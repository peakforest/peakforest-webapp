/*
 This file is part of MetExploreViz 

 Copyright Â© 2016 INRA 
 Contact: http://metexplore.toulouse.inra.fr/metexploreViz/doc/contact 
 GNU General Public License Usage 
 This file may be used under the terms of the GNU General Public License version 3.0 as 
 published by the Free Software Foundation and appearing in the file LICENSE included in the 
 packaging of this file. 
 Please review the following information to ensure the GNU General Public License version 3.0 
 requirements will be met: http://www.gnu.org/copyleft/gpl.html. 
 If you are unsure which license is appropriate for your use, please contact us 
 at http://metexplore.toulouse.inra.fr/metexploreViz/doc/contact
 Version: 1.2.0.2 
 Build Date: Mon Nov 21 14:42:33 CET 2016 
 */
var Ext=Ext||{};if(!Ext.Toolbar){Ext.Toolbar={}}if(!Ext.app){Ext.app={}}if(!Ext.app.bind){Ext.app.bind={}}if(!Ext.app.domain){Ext.app.domain={}}if(!Ext.app.route){Ext.app.route={}}if(!Ext.button){Ext.button={}}if(!Ext.container){Ext.container={}}if(!Ext.core){Ext.core={}}if(!Ext.data){Ext.data={}}if(!Ext.data.field){Ext.data.field={}}if(!Ext.data.flash){Ext.data.flash={}}if(!Ext.data.identifier){Ext.data.identifier={}}if(!Ext.data.matrix){Ext.data.matrix={}}if(!Ext.data.operation){Ext.data.operation={}}if(!Ext.data.proxy){Ext.data.proxy={}}if(!Ext.data.reader){Ext.data.reader={}}if(!Ext.data.request){Ext.data.request={}}if(!Ext.data.schema){Ext.data.schema={}}if(!Ext.data.session){Ext.data.session={}}if(!Ext.data.validator){Ext.data.validator={}}if(!Ext.data.writer){Ext.data.writer={}}if(!Ext.dd){Ext.dd={}}if(!Ext.dom){Ext.dom={}}if(!Ext.dom.Element){Ext.dom.Element={}}if(!Ext.event){Ext.event={}}if(!Ext.event.gesture){Ext.event.gesture={}}if(!Ext.event.publisher){Ext.event.publisher={}}if(!Ext.form){Ext.form={}}if(!Ext.form.Action){Ext.form.Action={}}if(!Ext.form.action){Ext.form.action={}}if(!Ext.form.field){Ext.form.field={}}if(!Ext.form.trigger){Ext.form.trigger={}}if(!Ext.fx){Ext.fx={}}if(!Ext.fx.animation){Ext.fx.animation={}}if(!Ext.fx.easing){Ext.fx.easing={}}if(!Ext.fx.runner){Ext.fx.runner={}}if(!Ext.fx.target){Ext.fx.target={}}if(!Ext.layout){Ext.layout={}}if(!Ext.layout.boxOverflow){Ext.layout.boxOverflow={}}if(!Ext.layout.component){Ext.layout.component={}}if(!Ext.layout.component.field){Ext.layout.component.field={}}if(!Ext.layout.container){Ext.layout.container={}}if(!Ext.layout.container.border){Ext.layout.container.border={}}if(!Ext.layout.container.boxOverflow){Ext.layout.container.boxOverflow={}}if(!Ext.menu){Ext.menu={}}if(!Ext.mixin){Ext.mixin={}}if(!Ext.overrides){Ext.overrides={}}if(!Ext.overrides.app){Ext.overrides.app={}}if(!Ext.overrides.app.domain){Ext.overrides.app.domain={}}if(!Ext.overrides.dom){Ext.overrides.dom={}}if(!Ext.overrides.event){Ext.overrides.event={}}if(!Ext.overrides.event.publisher){Ext.overrides.event.publisher={}}if(!Ext.overrides.util){Ext.overrides.util={}}if(!Ext.panel){Ext.panel={}}if(!Ext.perf){Ext.perf={}}if(!Ext.plugin){Ext.plugin={}}if(!Ext.promise){Ext.promise={}}if(!Ext.resizer){Ext.resizer={}}if(!Ext.scroll){Ext.scroll={}}if(!Ext.selection){Ext.selection={}}if(!Ext.state){Ext.state={}}if(!Ext.theme){Ext.theme={}}if(!Ext.theme.neptune){Ext.theme.neptune={}}if(!Ext.theme.neptune.layout){Ext.theme.neptune.layout={}}if(!Ext.theme.neptune.layout.component){Ext.theme.neptune.layout.component={}}if(!Ext.theme.neptune.menu){Ext.theme.neptune.menu={}}if(!Ext.theme.neptune.panel){Ext.theme.neptune.panel={}}if(!Ext.theme.neptune.resizer){Ext.theme.neptune.resizer={}}if(!Ext.theme.neptune.toolbar){Ext.theme.neptune.toolbar={}}if(!Ext.theme.triton){Ext.theme.triton={}}if(!Ext.theme.triton.form){Ext.theme.triton.form={}}if(!Ext.theme.triton.form.field){Ext.theme.triton.form.field={}}if(!Ext.theme.triton.menu){Ext.theme.triton.menu={}}if(!Ext.theme.triton.resizer){Ext.theme.triton.resizer={}}if(!Ext.theme.triton.toolbar){Ext.theme.triton.toolbar={}}if(!Ext.tip){Ext.tip={}}if(!Ext.toolbar){Ext.toolbar={}}if(!Ext.util){Ext.util={}}if(!Ext.util.paintmonitor){Ext.util.paintmonitor={}}if(!Ext.util.sizemonitor){Ext.util.sizemonitor={}}if(!Ext.util.translatable){Ext.util.translatable={}}if(!Ext.ux){Ext.ux={}}if(!Ext.ux.form){Ext.ux.form={}}if(!Ext.view){Ext.view={}}if(!Ext.window){Ext.window={}}var metExploreViz=metExploreViz||{};if(!metExploreViz.view){metExploreViz.view={}}if(!metExploreViz.view.button){metExploreViz.view.button={}}if(!metExploreViz.view.button.buttonImportMapping){metExploreViz.view.button.buttonImportMapping={}}if(!metExploreViz.view.button.buttonImportSideCompounds){metExploreViz.view.button.buttonImportSideCompounds={}}if(!metExploreViz.view.button.buttonImportToNetwork){metExploreViz.view.button.buttonImportToNetwork={}}if(!metExploreViz.view.form){metExploreViz.view.form={}}if(!metExploreViz.view.form.generalStyleForm){metExploreViz.view.form.generalStyleForm={}}if(!metExploreViz.view.form.metaboliteStyleForm){metExploreViz.view.form.metaboliteStyleForm={}}if(!metExploreViz.view.form.reactionStyleForm){metExploreViz.view.form.reactionStyleForm={}}if(!metExploreViz.view.form.selectCondition){metExploreViz.view.form.selectCondition={}}if(!metExploreViz.view.form.selectConditionForm){metExploreViz.view.form.selectConditionForm={}}if(!metExploreViz.view.form.selectMapping){metExploreViz.view.form.selectMapping={}}if(!metExploreViz.view.form.updateStyleForm){metExploreViz.view.form.updateStyleForm={}}if(!metExploreViz.view.menu){metExploreViz.view.menu={}}if(!metExploreViz.view.menu.viz_AlgorithmMenu){metExploreViz.view.menu.viz_AlgorithmMenu={}}if(!metExploreViz.view.menu.viz_ColorMenu){metExploreViz.view.menu.viz_ColorMenu={}}if(!metExploreViz.view.menu.viz_ConvexHullMenu){metExploreViz.view.menu.viz_ConvexHullMenu={}}if(!metExploreViz.view.menu.viz_DrawingMenu){metExploreViz.view.menu.viz_DrawingMenu={}}if(!metExploreViz.view.menu.viz_ExportMenu){metExploreViz.view.menu.viz_ExportMenu={}}if(!metExploreViz.view.menu.viz_ImportMenu){metExploreViz.view.menu.viz_ImportMenu={}}if(!metExploreViz.view.menu.viz_LayoutMenu){metExploreViz.view.menu.viz_LayoutMenu={}}if(!metExploreViz.view.menu.viz_LoadMenu){metExploreViz.view.menu.viz_LoadMenu={}}if(!metExploreViz.view.menu.viz_MiningMenu){metExploreViz.view.menu.viz_MiningMenu={}}if(!metExploreViz.view.menu.viz_SaveMenu){metExploreViz.view.menu.viz_SaveMenu={}}if(!metExploreViz.view.panel){metExploreViz.view.panel={}}if(!metExploreViz.view.panel.comparePanel){metExploreViz.view.panel.comparePanel={}}if(!metExploreViz.view.panel.comparisonSidePanel){metExploreViz.view.panel.comparisonSidePanel={}}if(!metExploreViz.view.panel.graphPanel){metExploreViz.view.panel.graphPanel={}}if(!metExploreViz.view.panel.networkPanel){metExploreViz.view.panel.networkPanel={}}if(!metExploreViz.view.panel.viz){metExploreViz.view.panel.viz={}}(function(N){var Q,G=["constructor","toString","valueOf","toLocaleString"],M={},C={},O=0,F,I,A,K,R,L,E,P,J,B=function(){var a,b;I=Ext.Base;A=Ext.ClassManager;for(a=G.length;a-->0;){b=(1<<a);C[M[b]=G[a]]=b}for(a in C){O|=C[a]}O=~O;Function.prototype.$isFunction=1;J=!!(A&&A.addAlias);K=Ext.Class.getPreprocessor("config").fn;R=Ext.Class.getPreprocessor("cachedConfig")&&Ext.Class.getPreprocessor("cachedConfig").fn;L=Ext.Class.getPreprocessor("platformConfig")&&Ext.Class.getPreprocessor("platformConfig").fn;P=Ext.Class.getPreprocessor("privates")&&Ext.Class.getPreprocessor("privates").fn;E=Ext.ClassManager.postprocessors.deprecated&&Ext.ClassManager.postprocessors.deprecated.fn;Q=I.$staticMembers;if(!Q){Q=[];for(F in I){if(I.hasOwnProperty(F)){Q.push(F)}}}N.derive=H;return H.apply(this,arguments)},z=function(g,o,h){var c=h.enumerableMembers,m=g.prototype,a,j,b,d,f;if(!o){return}if(J){g.addMembers(o)}else{for(a in o){d=o[a];if(d&&d.$isFunction&&!d.$isClass&&d!==Ext.emptyFn&&d!==Ext.identityFn){f=m.hasOwnProperty(a)&&m[a];if(f){d.$previous=f}m[a]=j=d;j.$owner=g;j.$name=a}else{m[a]=d}}for(b=1;c;b<<=1){if(c&b){c&=~b;a=M[b];m[a]=j=o[a];j.$owner=g;j.$name=a}}}},D=function(b){var d=function c(){return b.apply(this,arguments)||null},f,a;d.prototype=Ext.Object.chain(b.prototype);for(f=Q.length;f-->0;){a=Q[f];d[a]=I[a]}return d},H=function(aj,ag,ar,v,ah,o,ai,a,al,j,t){var an=function u(){return this.constructor.apply(this,arguments)||null},at=an,am={enumerableMembers:v&O,onCreated:t,onBeforeCreated:z,aliases:a},q=ar.alternateClassName||[],c=Ext.global,h,d,b,r,f,ao,ap,ak,g,w,au,m,s,aq,p=A.alternateToName||A.maps.alternateToName,y=A.nameToAlternates||A.maps.nameToAlternates;for(b=Q.length;b-->0;){ap=Q[b];an[ap]=I[ap]}if(ar.$isFunction){ar=ar(an)}am.data=ar;w=ar.statics;delete ar.statics;ar.$className=aj;if("$className" in ar){an.$className=ar.$className}an.extend(ag);g=an.prototype;an.xtype=ar.xtype=ah[0];if(ah){g.xtypes=ah}g.xtypesChain=o;g.xtypesMap=ai;ar.alias=a;at.triggerExtended(an,ar,am);if(ar.onClassExtended){an.onExtended(ar.onClassExtended,an);delete ar.onClassExtended}if(ar.privates&&P){P.call(Ext.Class,an,ar)}if(w){if(J){an.addStatics(w)}else{for(au in w){if(w.hasOwnProperty(au)){aq=w[au];if(aq&&aq.$isFunction&&!aq.$isClass&&aq!==Ext.emptyFn&&aq!==Ext.identityFn){an[au]=s=aq;s.$owner=an;s.$name=au}an[au]=aq}}}}if(ar.inheritableStatics){an.addInheritableStatics(ar.inheritableStatics);delete ar.inheritableStatics}if(g.onClassExtended){at.onExtended(g.onClassExtended,at);delete g.onClassExtended}if(ar.platformConfig&&L){L.call(Ext.Class,an,ar);delete ar.platformConfig}if(ar.config){K.call(Ext.Class,an,ar)}if(ar.cachedConfig&&R){R.call(Ext.Class,an,ar);delete ar.cachedConfig}if(ar.deprecated&&E){E.call(Ext.ClassManager,aj,an,ar)}am.onBeforeCreated(an,am.data,am);for(b=0,f=al&&al.length;b<f;++b){an.mixin.apply(an,al[b])}for(b=0,f=a.length;b<f;b++){h=a[b];A.setAlias?A.setAlias(an,h):A.addAlias(an,h)}if(ar.singleton){at=new an()}if(!(q instanceof Array)){q=[q]}m=A.getName(at);for(b=0,r=q.length;b<r;b++){d=q[b];A.classes[d]=at;if(J){A.addAlternate(an,d)}else{if(m){p[d]=m;q=y[m]||(y[m]=[]);q.push(d)}}}for(b=0,f=j.length;b<f;b+=2){ao=j[b];if(!ao){ao=c}ao[j[b+1]]=at}A.classes[aj]=at;if(!J){if(m&&m!==aj){p[aj]=m;q=y[m]||(y[m]=[]);q.push(aj)}}delete g.alternateClassName;if(am.onCreated){am.onCreated.call(at,at)}if(aj){A.triggerCreated(aj)}return at};N.derive=B}(Ext.cmd={}));var Ext=Ext||{};(function(){var E=this,z=Object.prototype,D=z.toString,s=["valueOf","toLocaleString","toString","constructor"],v=function(){},A=function(){},y=function(a){return a},t=function(){var a=t.caller.caller;return a.$owner.prototype[a.$name].apply(this,arguments)},F=Ext.manifest||{},w,C=/\[object\s*(?:Array|Arguments|\w*Collection|\w*List|HTML\s+document\.all\s+class)\]/,B=/^\\?\/Date\(([-+])?(\d+)(?:[+-]\d{4})?\)\\?\/$/;Ext.global=E;Ext.now=Date.now||(Date.now=function(){return +new Date()});Ext.ticks=(E.performance&&E.performance.now)?function(){return performance.now()}:Ext.now;Ext._startTime=Ext.ticks();v.$nullFn=y.$nullFn=v.$emptyFn=y.$identityFn=A.$nullFn=true;A.$privacy="framework";Ext.suspendLayouts=Ext.resumeLayouts=v;for(w in {toString:1}){s=null}Ext.enumerables=s;Ext.apply=function(b,c,g){if(g){Ext.apply(b,g)}if(b&&c&&typeof c==="object"){var a,d,f;for(a in c){b[a]=c[a]}if(s){for(d=s.length;d--;){f=s[d];if(c.hasOwnProperty(f)){b[f]=c[f]}}}}return b};function u(b,f,a){var d,c;for(d in a){if(a.hasOwnProperty(d)){c=a[d];if(typeof c==="function"){c.$name=d;c.$owner=f;c.$previous=b.hasOwnProperty(d)?b[d]:t}b[d]=c}}}Ext.buildSettings=Ext.apply({baseCSSPrefix:"x-"},Ext.buildSettings||{});Ext.apply(Ext,{idSeed:0,idPrefix:"ext-",isSecure:/^https/i.test(window.location.protocol),enableGarbageCollector:false,enableListenerCollection:true,name:Ext.sandboxName||"Ext",privateFn:A,emptyFn:v,identityFn:y,frameStartTime:Ext.now(),manifest:F,enableAria:true,enableAriaButtons:true,enableAriaPanels:true,startsWithHashRe:/^#/,validIdRe:/^[a-z_][a-z0-9\-_]*$/i,BLANK_IMAGE_URL:"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",makeIdSelector:function(a){return"#"+a},id:function(b,c){if(b&&b.id){return b.id}var a=(c||Ext.idPrefix)+(++Ext.idSeed);if(b){b.id=a}return a},returnId:function(a){return a.getId()},returnTrue:function(){return true},emptyString:new String(),baseCSSPrefix:Ext.buildSettings.baseCSSPrefix,$eventNameMap:{},$vendorEventRe:/^(Moz.+|MS.+|webkit.+)/,canonicalEventName:function(a){return Ext.$eventNameMap[a]||(Ext.$eventNameMap[a]=(Ext.$vendorEventRe.test(a)?a:a.toLowerCase()))},applyIf:function(b,c){var a;if(b){for(a in c){if(b[a]===undefined){b[a]=c[a]}}}return b},destroy:function(){var a=arguments.length,b,c;for(b=0;b<a;b++){c=arguments[b];if(c){if(Ext.isArray(c)){this.destroy.apply(this,c)}else{if(Ext.isFunction(c.destroy)){c.destroy()}}}}return null},destroyMembers:function(b){for(var g,c,a=1,d=arguments,f=d.length;a<f;a++){g=b[c=d[a]];if(g!=null){b[c]=Ext.destroy(g)}}},override:function(b,a){if(b.$isClass){b.override(a)}else{if(typeof b==="function"){Ext.apply(b.prototype,a)}else{var d=b.self,c;if(d&&d.$isClass){c=a.privates;if(c){a=Ext.apply({},a);delete a.privates;u(b,d,c)}u(b,d,a)}else{Ext.apply(b,a)}}}return b},valueFrom:function(a,c,b){return Ext.isEmpty(a,b)?c:a},isEmpty:function(b,a){return(b==null)||(!a?b==="":false)||(Ext.isArray(b)&&b.length===0)},isArray:("isArray" in Array)?Array.isArray:function(a){return D.call(a)==="[object Array]"},isDate:function(a){return D.call(a)==="[object Date]"},isMSDate:function(a){if(!Ext.isString(a)){return false}return B.test(a)},isObject:(D.call(null)==="[object Object]")?function(a){return a!==null&&a!==undefined&&D.call(a)==="[object Object]"&&a.ownerDocument===undefined}:function(a){return D.call(a)==="[object Object]"},isSimpleObject:function(a){return a instanceof Object&&a.constructor===Object},isPrimitive:function(a){var b=typeof a;return b==="string"||b==="number"||b==="boolean"},isFunction:(typeof document!=="undefined"&&typeof document.getElementsByTagName("body")==="function")?function(a){return !!a&&D.call(a)==="[object Function]"}:function(a){return !!a&&typeof a==="function"},isNumber:function(a){return typeof a==="number"&&isFinite(a)},isNumeric:function(a){return !isNaN(parseFloat(a))&&isFinite(a)},isString:function(a){return typeof a==="string"},isBoolean:function(a){return typeof a==="boolean"},isElement:function(a){return a?a.nodeType===1:false},isTextNode:function(a){return a?a.nodeName==="#text":false},isDefined:function(a){return typeof a!=="undefined"},isIterable:function(a){if(!a||typeof a.length!=="number"||typeof a==="string"||Ext.isFunction(a)){return false}if(!a.propertyIsEnumerable){return !!a.item}if(a.hasOwnProperty("length")&&!a.propertyIsEnumerable("length")){return true}return C.test(D.call(a))},isDebugEnabled:v,clone:function(h){if(h===null||h===undefined){return h}if(h.nodeType&&h.cloneNode){return h.cloneNode(true)}var a=D.call(h),b,d,f,g,c;if(a==="[object Date]"){return new Date(h.getTime())}if(a==="[object Array]"){b=h.length;g=[];while(b--){g[b]=Ext.clone(h[b])}}else{if(a==="[object Object]"&&h.constructor===Object){g={};for(c in h){g[c]=Ext.clone(h[c])}if(s){for(d=s.length;d--;){f=s[d];if(h.hasOwnProperty(f)){g[f]=h[f]}}}}}return g||h},getUniqueGlobalNamespace:function(){var a=this.uniqueGlobalNamespace,b;if(a===undefined){b=0;do{a="ExtBox"+(++b)}while(E[a]!==undefined);E[a]=Ext;this.uniqueGlobalNamespace=a}return a},functionFactoryCache:{},cacheableFunctionFactory:function(){var g=this,c=Array.prototype.slice.call(arguments),d=g.functionFactoryCache,f,b,a;if(Ext.isSandboxed){a=c.length;if(a>0){a--;c[a]="var Ext=window."+Ext.name+";"+c[a]}}f=c.join("");b=d[f];if(!b){b=Function.prototype.constructor.apply(Function.prototype,c);d[f]=b}return b},functionFactory:function(){var b=Array.prototype.slice.call(arguments),a;if(Ext.isSandboxed){a=b.length;if(a>0){a--;b[a]="var Ext=window."+Ext.name+";"+b[a]}}return Function.prototype.constructor.apply(Function.prototype,b)},Logger:{verbose:v,log:v,info:v,warn:v,error:function(a){throw new Error(a)},deprecate:v},getElementById:function(a){return document.getElementById(a)},splitAndUnescape:(function(){var a={};return function(c,d){if(!c){return[]}else{if(!d){return[c]}}var h=a[d]||(a[d]=new RegExp("\\\\"+d,"g")),f=[],g,b;g=c.split(d);while((b=g.shift())!==undefined){while(b.charAt(b.length-1)==="\\"&&g.length>0){b=b+d+g.shift()}b=b.replace(h,d);f.push(b)}return f}})()});Ext.returnTrue.$nullFn=Ext.returnId.$nullFn=true}());Ext.platformTags.modern=!(Ext.platformTags.classic=Ext.isClassic=true);(function(){function b(){var j=this,a=j.sourceClass,g=j.sourceMethod,h=j.msg;if(g){if(h){g+="(): ";g+=h}else{g+="()"}}if(a){g=g?(a+"."+g):a}return g||h||""}Ext.Error=function(d){if(Ext.isString(d)){d={msg:d}}var a=new Error();Ext.apply(a,d);a.message=a.message||a.msg;a.toString=b;return a};Ext.apply(Ext.Error,{ignore:false,raise:function(m){m=m||{};if(Ext.isString(m)){m={msg:m}}var o=this,h=o.raise.caller,j,a;if(h===Ext.raise){h=h.caller}if(h){if(!m.sourceMethod&&(a=h.$name)){m.sourceMethod=a}if(!m.sourceClass&&(a=h.$owner)&&(a=a.$className)){m.sourceClass=a}}if(o.handle(m)!==true){j=b.call(m);throw new Ext.Error(m)}},handle:function(){return this.ignore}})})();Ext.deprecated=function(b){return Ext.emptyFn};Ext.raise=function(){Ext.Error.raise.apply(Ext.Error,arguments)};Ext.Array=(function(){var N=Array.prototype,G=N.slice,E=(function(){var a=[],c,b=20;if(!a.splice){return false}while(b--){a.push("A")}a.splice(15,0,"F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F");c=a.length;a.splice(13,0,"XXX");if(c+1!==a.length){return false}return true}()),F="indexOf" in N,K=true;function H(c,b){var f=c.length,d=new Array(f),a;for(a=0;a<f;a++){d[a]=a}d.sort(function(g,h){return b(c[g],c[h])||(g-h)});for(a=0;a<f;a++){d[a]=c[d[a]]}for(a=0;a<f;a++){c[a]=d[a]}return c}try{if(typeof document!=="undefined"){G.call(document.getElementsByTagName("body"))}}catch(C){K=false}var I=function(a,b){return(b<0)?Math.max(0,a.length+b):Math.min(a.length,b)},y=function(p,q,f,j){var h=j?j.length:0,c=p.length,o=I(p,q);if(o===c){if(h){p.push.apply(p,j)}}else{var r=Math.min(f,c-o),m=o+r,d=m+h-r,g=c-m,b=c-r,a;if(d<m){for(a=0;a<g;++a){p[d+a]=p[m+a]}}else{if(d>m){for(a=g;a--;){p[d+a]=p[m+a]}}}if(h&&o===b){p.length=b;p.push.apply(p,j)}else{p.length=b+h;for(a=0;a<h;++a){p[o+a]=j[a]}}}return p},L=function(d,c,a,b){if(b&&b.length){if(c===0&&!a){d.unshift.apply(d,b)}else{if(c<d.length){d.splice.apply(d,[c,a].concat(b))}else{d.push.apply(d,b)}}}else{d.splice(c,a)}return d},O=function(a,c,b){return y(a,c,b)},D=function(a,c,b){a.splice(c,b);return a},J=function(c,f,a){var d=I(c,f),b=c.slice(f,I(c,d+a));if(arguments.length<4){y(c,d,a)}else{y(c,d,a,G.call(arguments,3))}return b},M=function(a){return a.splice.apply(a,G.call(arguments,1))},z=E?D:O,B=E?L:y,A=E?M:J,P={binarySearch:function(b,g,a,j,c){var h=b.length,f,d;if(a instanceof Function){c=a;a=0;j=h}else{if(j instanceof Function){c=j;j=h}else{if(a===undefined){a=0}if(j===undefined){j=h}c=c||P.lexicalCompare}}--j;while(a<=j){f=(a+j)>>1;d=c(g,b[f]);if(d>=0){a=f+1}else{if(d<0){j=f-1}}}return a},defaultCompare:function(b,a){return(b<a)?-1:((b>a)?1:0)},lexicalCompare:function(b,a){b=String(b);a=String(a);return(b<a)?-1:((b>a)?1:0)},each:function(b,g,a,f){b=P.from(b);var d,c=b.length;if(f!==true){for(d=0;d<c;d++){if(g.call(a||b[d],b[d],d,b)===false){return d}}}else{for(d=c-1;d>-1;d--){if(g.call(a||b[d],b[d],d,b)===false){return d}}}return true},forEach:("forEach" in N)?function(a,b,c){return a.forEach(b,c)}:function(c,a,b){for(var f=0,d=c.length;f<d;f++){a.call(b,c[f],f,c)}},indexOf:F?function(a,c,b){return N.indexOf.call(a,c,b)}:function(c,a,f){var d,b=c.length;for(d=(f<0)?Math.max(0,b+f):f||0;d<b;d++){if(c[d]===a){return d}}return -1},contains:F?function(a,b){return N.indexOf.call(a,b)!==-1}:function(d,a){var c,b;for(c=0,b=d.length;c<b;c++){if(d[c]===a){return true}}return false},toArray:function(a,c,f){if(!a||!a.length){return[]}if(typeof a==="string"){a=a.split("")}if(K){return G.call(a,c||0,f||a.length)}var d=[],b;c=c||0;f=f?((f<0)?a.length+f:f):a.length;for(b=c;b<f;b++){d.push(a[b])}return d},pluck:function(b,g){var d=[],a,c,f;for(a=0,c=b.length;a<c;a++){f=b[a];d.push(f[g])}return d},map:("map" in N)?function(a,b,c){return a.map(b,c)}:function(b,d,g){var a=[],f=b.length,c;for(c=0;c<f;c++){a[c]=d.call(g,b[c],c,b)}return a},every:("every" in N)?function(a,b,c){return a.every(b,c)}:function(c,a,b){var f=0,d=c.length;for(;f<d;++f){if(!a.call(b,c[f],f,c)){return false}}return true},some:("some" in N)?function(a,b,c){return a.some(b,c)}:function(c,a,b){var f=0,d=c.length;for(;f<d;++f){if(a.call(b,c[f],f,c)){return true}}return false},equals:function(c,f){var b=c.length,d=f.length,a;if(c===f){return true}if(b!==d){return false}for(a=0;a<b;++a){if(c[a]!==f[a]){return false}}return true},clean:function(c){var b=[],f=0,d=c.length,a;for(;f<d;f++){a=c[f];if(!Ext.isEmpty(a)){b.push(a)}}return b},unique:function(c){var f=[],d=0,a=c.length,b;for(;d<a;d++){b=c[d];if(P.indexOf(f,b)===-1){f.push(b)}}return f},filter:("filter" in N)?function(a,b,c){return a.filter(b,c)}:function(b,g,a){var d=[],f=0,c=b.length;for(;f<c;f++){if(g.call(a,b[f],f,b)){d.push(b[f])}}return d},findBy:function(c,f,a){var b=0,d=c.length;for(;b<d;b++){if(f.call(a||c,c[b],b)){return c[b]}}return null},from:function(a,b){if(a===undefined||a===null){return[]}if(Ext.isArray(a)){return(b)?G.call(a):a}var c=typeof a;if(a&&a.length!==undefined&&c!=="string"&&(c!=="function"||!a.apply)){return P.toArray(a)}return[a]},remove:function(a,b){var c=P.indexOf(a,b);if(c!==-1){z(a,c,1)}return a},removeAt:function(d,b,a){var c=d.length;if(b>=0&&b<c){a=a||1;a=Math.min(a,c-b);z(d,b,a)}return d},include:function(a,b){if(!P.contains(a,b)){a.push(b)}},clone:function(a){return G.call(a)},merge:function(){var d=G.call(arguments),c=[],b,a;for(b=0,a=d.length;b<a;b++){c=c.concat(d[b])}return P.unique(c)},intersect:function(){var m=[],d=G.call(arguments),h,o,s,p,f,c,g,q,j,b,r,t,a;if(!d.length){return m}h=d.length;for(r=f=0;r<h;r++){c=d[r];if(!p||c.length<p.length){p=c;f=r}}p=P.unique(p);z(d,f,1);g=p.length;h=d.length;for(r=0;r<g;r++){q=p[r];b=0;for(t=0;t<h;t++){o=d[t];s=o.length;for(a=0;a<s;a++){j=o[a];if(q===j){b++;break}}}if(b===h){m.push(q)}}return m},difference:function(f,h){var b=G.call(f),d=b.length,g,a,c;for(g=0,c=h.length;g<c;g++){for(a=0;a<d;a++){if(b[a]===h[g]){z(b,a,1);a--;d--}}}return b},reduce:Array.prototype.reduce?function(a,b,c){if(arguments.length===3){return Array.prototype.reduce.call(a,b,c)}return Array.prototype.reduce.call(a,b)}:function(b,d,g){b=Object(b);var a=0,f=b.length>>>0,c=g;if(arguments.length<3){while(true){if(a in b){c=b[a++];break}if(++a>=f){throw new TypeError("Reduce of empty array with no initial value")}}}for(;a<f;++a){if(a in b){c=d(c,b[a],a,b)}}return c},slice:([1,2].slice(1,undefined).length?function(a,b,c){return G.call(a,b,c)}:function(a,b,c){if(typeof b==="undefined"){return G.call(a)}if(typeof c==="undefined"){return G.call(a,b)}return G.call(a,b,c)}),sort:function(a,b){return H(a,b||P.lexicalCompare)},flatten:function(a){var b=[];function c(h){var f,d,g;for(f=0,d=h.length;f<d;f++){g=h[f];if(Ext.isArray(g)){c(g)}else{b.push(g)}}return b}return c(a)},min:function(b,d){var c=b[0],g,f,a;for(g=0,f=b.length;g<f;g++){a=b[g];if(d){if(d(c,a)===1){c=a}}else{if(a<c){c=a}}}return c},max:function(b,d){var g=b[0],c,f,a;for(c=0,f=b.length;c<f;c++){a=b[c];if(d){if(d(g,a)===-1){g=a}}else{if(a>g){g=a}}}return g},mean:function(a){return a.length>0?P.sum(a)/a.length:undefined},sum:function(c){var b=0,f,d,a;for(f=0,d=c.length;f<d;f++){a=c[f];b+=a}return b},toMap:function(c,f,a){var d={},b=c.length;if(!f){while(b--){d[c[b]]=b+1}}else{if(typeof f==="string"){while(b--){d[c[b][f]]=b+1}}else{while(b--){d[f.call(a,c[b])]=b+1}}}return d},toValueMap:function(q,c,h,a){var g={},d=q.length,f,b,m,p,j,o;if(!c){while(d--){o=q[d];g[o]=o}}else{if(!(p=(typeof c!=="string"))){a=h}b=a===1;f=a===2;while(d--){o=q[d];j=p?c.call(h,o):o[c];if(b){if(j in g){g[j].push(o)}else{g[j]=[o]}}else{if(f&&(j in g)){if((m=g[j]) instanceof Array){m.push(o)}else{g[j]=[m,o]}}else{g[j]=o}}}}return g},erase:z,insert:function(a,b,c){return B(a,b,0,c)},move:function(b,d,g){if(g===d){return}var a=b[d],c=g>d?1:-1,f;for(f=d;f!=g;f+=c){b[f]=b[f+c]}b[g]=a},replace:B,splice:A,push:function(d){var c=arguments.length,a=1,b;if(d===undefined){d=[]}else{if(!Ext.isArray(d)){d=[d]}}for(;a<c;a++){b=arguments[a];Array.prototype.push[Ext.isIterable(b)?"apply":"call"](d,b)}return d},numericSortFn:function(a,b){return a-b}};Ext.each=P.each;P.union=P.merge;Ext.min=P.min;Ext.max=P.max;Ext.sum=P.sum;Ext.mean=P.mean;Ext.flatten=P.flatten;Ext.clean=P.clean;Ext.unique=P.unique;Ext.pluck=P.pluck;Ext.toArray=function(){return P.toArray.apply(P,arguments)};return P}());Ext.String=(function(){var z=/^[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+|[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+$/g,u=/('|\\)/g,F=/([-.*+?\^${}()|\[\]\/\\])/g,H=/^\s+|\s+$/g,y=/\s+/,v=/(^[^a-z]*|[^\w])/gi,C,G,A,D,B=function(a,b){return C[b]},w=function(a,b){return(b in G)?G[b]:String.fromCharCode(parseInt(b.substr(2),10))},E=function(a,b){if(a===null||a===undefined||b===null||b===undefined){return false}return b.length<=a.length},t;return t={insert:function(b,a,c){if(!b){return a}if(!a){return b}var d=b.length;if(!c&&c!==0){c=d}if(c<0){c*=-1;if(c>=d){c=0}else{c=d-c}}if(c===0){b=a+b}else{if(c>=b.length){b+=a}else{b=b.substr(0,c)+a+b.substr(c)}}return b},startsWith:function(b,a,c){var d=E(b,a);if(d){if(c){b=b.toLowerCase();a=a.toLowerCase()}d=b.lastIndexOf(a,0)===0}return d},endsWith:function(a,c,b){var d=E(a,c);if(d){if(b){a=a.toLowerCase();c=c.toLowerCase()}d=a.indexOf(c,a.length-c.length)!==-1}return d},createVarName:function(a){return a.replace(v,"")},htmlEncode:function(a){return(!a)?a:String(a).replace(A,B)},htmlDecode:function(a){return(!a)?a:String(a).replace(D,w)},hasHtmlCharacters:function(a){return A.test(a)},addCharacterEntities:function(c){var d=[],f=[],b,a;for(b in c){a=c[b];G[b]=a;C[a]=b;d.push(a);f.push(b)}A=new RegExp("("+d.join("|")+")","g");D=new RegExp("("+f.join("|")+"|&#[0-9]{1,5};)","g")},resetCharacterEntities:function(){C={};G={};this.addCharacterEntities({"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&#39;":"'"})},urlAppend:function(a,b){if(!Ext.isEmpty(b)){return a+(a.indexOf("?")===-1?"?":"&")+b}return a},trim:function(a){if(a){a=a.replace(z,"")}return a||""},capitalize:function(a){if(a){a=a.charAt(0).toUpperCase()+a.substr(1)}return a||""},uncapitalize:function(a){if(a){a=a.charAt(0).toLowerCase()+a.substr(1)}return a||""},ellipsis:function(b,c,a){if(b&&b.length>c){if(a){var f=b.substr(0,c-2),d=Math.max(f.lastIndexOf(" "),f.lastIndexOf("."),f.lastIndexOf("!"),f.lastIndexOf("?"));if(d!==-1&&d>=(c-15)){return f.substr(0,d)+"..."}}return b.substr(0,c-3)+"..."}return b},escapeRegex:function(a){return a.replace(F,"\\$1")},createRegex:function(f,a,c,d){var b=f;if(f!=null&&!f.exec){b=t.escapeRegex(String(f));if(a!==false){b="^"+b}if(c!==false){b+="$"}b=new RegExp(b,(d!==false)?"i":"")}return b},escape:function(a){return a.replace(u,"\\$1")},toggle:function(b,a,c){return b===a?c:a},leftPad:function(c,b,a){var d=String(c);a=a||" ";while(d.length<b){d=a+d}return d},repeat:function(f,a,c){if(a<1){a=0}for(var d=[],b=a;b--;){d.push(f)}return d.join(c||"")},splitWords:function(a){if(a&&typeof a=="string"){return a.replace(H,"").split(y)}return a||[]}}}());Ext.String.resetCharacterEntities();Ext.htmlEncode=Ext.String.htmlEncode;Ext.htmlDecode=Ext.String.htmlDecode;Ext.urlAppend=Ext.String.urlAppend;Ext.Date=(function(){var v,w=Date,q=/(\\.)/g,B=/([gGhHisucUOPZ]|MS)/,u=/([djzmnYycU]|MS)/,r=/\\/gi,z=/\{(\d+)\}/g,t=new RegExp("\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/"),y=Ext.String.leftPad,A=["var me = this, dt, y, m, d, h, i, s, ms, o, O, z, zz, u, v, W, year, jan4, week1monday, daysInMonth, dayMatched,","def = me.defaults,","from = Ext.Number.from,","results = String(input).match(me.parseRegexes[{0}]);","if(results){","{1}","if(u != null){","v = new Date(u * 1000);","}else{","dt = me.clearTime(new Date);","y = from(y, from(def.y, dt.getFullYear()));","m = from(m, from(def.m - 1, dt.getMonth()));","dayMatched = d !== undefined;","d = from(d, from(def.d, dt.getDate()));","if (!dayMatched) {","dt.setDate(1);","dt.setMonth(m);","dt.setFullYear(y);","daysInMonth = me.getDaysInMonth(dt);","if (d > daysInMonth) {","d = daysInMonth;","}","}","h  = from(h, from(def.h, dt.getHours()));","i  = from(i, from(def.i, dt.getMinutes()));","s  = from(s, from(def.s, dt.getSeconds()));","ms = from(ms, from(def.ms, dt.getMilliseconds()));","if(z >= 0 && y >= 0){","v = me.add(new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);","v = !strict? v : (strict === true && (z <= 364 || (me.isLeapYear(v) && z <= 365))? me.add(v, me.DAY, z) : null);","}else if(strict === true && !me.isValid(y, m + 1, d, h, i, s, ms)){","v = null;","}else{","if (W) {","year = y || (new Date()).getFullYear();","jan4 = new Date(year, 0, 4, 0, 0, 0);","d = jan4.getDay();","week1monday = new Date(jan4.getTime() - ((d === 0 ? 6 : d - 1) * 86400000));","v = Ext.Date.clearTime(new Date(week1monday.getTime() + ((W - 1) * 604800000 + 43200000)));","} else {","v = me.add(new Date(y < 100 ? 100 : y, m, d, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);","}","}","}","}","if(v){","if(zz != null){","v = me.add(v, me.SECOND, -v.getTimezoneOffset() * 60 - zz);","}else if(o){","v = me.add(v, me.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));","}","}","return (v != null) ? v : null;"].join("\n");if(!Date.prototype.toISOString){Date.prototype.toISOString=function(){var a=this;return y(a.getUTCFullYear(),4,"0")+"-"+y(a.getUTCMonth()+1,2,"0")+"-"+y(a.getUTCDate(),2,"0")+"T"+y(a.getUTCHours(),2,"0")+":"+y(a.getUTCMinutes(),2,"0")+":"+y(a.getUTCSeconds(),2,"0")+"."+y(a.getUTCMilliseconds(),3,"0")+"Z"}}function s(a){var b=Array.prototype.slice.call(arguments,1);return a.replace(z,function(d,c){return b[c]})}return v={now:w.now,toString:function(a){if(!a){a=new w()}return a.getFullYear()+"-"+y(a.getMonth()+1,2,"0")+"-"+y(a.getDate(),2,"0")+"T"+y(a.getHours(),2,"0")+":"+y(a.getMinutes(),2,"0")+":"+y(a.getSeconds(),2,"0")},getElapsed:function(a,b){return Math.abs(a-(b||v.now()))},useStrict:false,formatCodeToRegex:function(b,c){var a=v.parseCodes[b];if(a){a=typeof a==="function"?a():a;v.parseCodes[b]=a}return a?Ext.applyIf({c:a.c?s(a.c,c||"{0}"):a.c},a):{g:0,c:null,s:Ext.String.escapeRegex(b)}},parseFunctions:{MS:function(b,c){var a=(b||"").match(t);return a?new w(((a[1]||"")+a[2])*1):null},time:function(b,c){var a=parseInt(b,10);if(a||a===0){return new w(a)}return null},timestamp:function(b,c){var a=parseInt(b,10);if(a||a===0){return new w(a*1000)}return null}},parseRegexes:[],formatFunctions:{MS:function(){return"\\/Date("+this.getTime()+")\\/"},time:function(){return this.getTime().toString()},timestamp:function(){return v.format(this,"U")}},y2kYear:50,MILLI:"ms",SECOND:"s",MINUTE:"mi",HOUR:"h",DAY:"d",MONTH:"mo",YEAR:"y",defaults:{},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNumbers:{January:0,Jan:0,February:1,Feb:1,March:2,Mar:2,April:3,Apr:3,May:4,June:5,Jun:5,July:6,Jul:6,August:7,Aug:7,September:8,Sep:8,October:9,Oct:9,November:10,Nov:10,December:11,Dec:11},defaultFormat:"m/d/Y",getShortMonthName:function(a){return v.monthNames[a].substring(0,3)},getShortDayName:function(a){return v.dayNames[a].substring(0,3)},getMonthNumber:function(a){return v.monthNumbers[a.substring(0,1).toUpperCase()+a.substring(1,3).toLowerCase()]},formatContainsHourInfo:function(a){return B.test(a.replace(q,""))},formatContainsDateInfo:function(a){return u.test(a.replace(q,""))},unescapeFormat:function(a){return a.replace(r,"")},formatCodes:{d:"Ext.String.leftPad(m.getDate(), 2, '0')",D:"Ext.Date.getShortDayName(m.getDay())",j:"m.getDate()",l:"Ext.Date.dayNames[m.getDay()]",N:"(m.getDay() ? m.getDay() : 7)",S:"Ext.Date.getSuffix(m)",w:"m.getDay()",z:"Ext.Date.getDayOfYear(m)",W:"Ext.String.leftPad(Ext.Date.getWeekOfYear(m), 2, '0')",F:"Ext.Date.monthNames[m.getMonth()]",m:"Ext.String.leftPad(m.getMonth() + 1, 2, '0')",M:"Ext.Date.getShortMonthName(m.getMonth())",n:"(m.getMonth() + 1)",t:"Ext.Date.getDaysInMonth(m)",L:"(Ext.Date.isLeapYear(m) ? 1 : 0)",o:"(m.getFullYear() + (Ext.Date.getWeekOfYear(m) == 1 && m.getMonth() > 0 ? +1 : (Ext.Date.getWeekOfYear(m) >= 52 && m.getMonth() < 11 ? -1 : 0)))",Y:"Ext.String.leftPad(m.getFullYear(), 4, '0')",y:"('' + m.getFullYear()).substring(2, 4)",a:"(m.getHours() < 12 ? 'am' : 'pm')",A:"(m.getHours() < 12 ? 'AM' : 'PM')",g:"((m.getHours() % 12) ? m.getHours() % 12 : 12)",G:"m.getHours()",h:"Ext.String.leftPad((m.getHours() % 12) ? m.getHours() % 12 : 12, 2, '0')",H:"Ext.String.leftPad(m.getHours(), 2, '0')",i:"Ext.String.leftPad(m.getMinutes(), 2, '0')",s:"Ext.String.leftPad(m.getSeconds(), 2, '0')",u:"Ext.String.leftPad(m.getMilliseconds(), 3, '0')",O:"Ext.Date.getGMTOffset(m)",P:"Ext.Date.getGMTOffset(m, true)",T:"Ext.Date.getTimezone(m)",Z:"(m.getTimezoneOffset() * -60)",c:function(){var a="Y-m-dTH:i:sP",c=[],d,f=a.length,b;for(d=0;d<f;++d){b=a.charAt(d);c.push(b==="T"?"'T'":v.getFormatCode(b))}return c.join(" + ")},C:function(){return"m.toISOString()"},U:"Math.round(m.getTime() / 1000)"},isValid:function(a,h,j,c,f,d,g){c=c||0;f=f||0;d=d||0;g=g||0;var b=v.add(new w(a<100?100:a,h-1,j,c,f,d,g),v.YEAR,a<100?a-100:0);return a===b.getFullYear()&&h===b.getMonth()+1&&j===b.getDate()&&c===b.getHours()&&f===b.getMinutes()&&d===b.getSeconds()&&g===b.getMilliseconds()},parse:function(c,a,d){var b=v.parseFunctions;if(b[a]==null){v.createParser(a)}return b[a].call(v,c,Ext.isDefined(d)?d:v.useStrict)},parseDate:function(b,a,c){return v.parse(b,a,c)},getFormatCode:function(a){var b=v.formatCodes[a];if(b){b=typeof b==="function"?b():b;v.formatCodes[a]=b}return b||("'"+Ext.String.escape(a)+"'")},createFormat:function(a){var b=[],f=false,c="",d;for(d=0;d<a.length;++d){c=a.charAt(d);if(!f&&c==="\\"){f=true}else{if(f){f=false;b.push("'"+Ext.String.escape(c)+"'")}else{if(c==="\n"){b.push("'\\n'")}else{b.push(v.getFormatCode(c))}}}}v.formatFunctions[a]=Ext.functionFactory("var m=this;return "+b.join("+"))},createParser:function(d){var a=v.parseRegexes.length,c=1,p=[],f=[],h=false,b="",m=0,j=d.length,g=[],o;for(;m<j;++m){b=d.charAt(m);if(!h&&b==="\\"){h=true}else{if(h){h=false;f.push(Ext.String.escape(b))}else{o=v.formatCodeToRegex(b,c);c+=o.g;f.push(o.s);if(o.g&&o.c){if(o.calcAtEnd){g.push(o.c)}else{p.push(o.c)}}}}}p=p.concat(g);v.parseRegexes[a]=new RegExp("^"+f.join("")+"$","i");v.parseFunctions[d]=Ext.functionFactory("input","strict",s(A,a,p.join("")))},parseCodes:{d:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(3[0-1]|[1-2][0-9]|0[1-9])"},j:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(3[0-1]|[1-2][0-9]|[1-9])"},D:function(){for(var b=[],a=0;a<7;b.push(v.getShortDayName(a)),++a){}return{g:0,c:null,s:"(?:"+b.join("|")+")"}},l:function(){return{g:0,c:null,s:"(?:"+v.dayNames.join("|")+")"}},N:{g:0,c:null,s:"[1-7]"},S:{g:0,c:null,s:"(?:st|nd|rd|th)"},w:{g:0,c:null,s:"[0-6]"},z:{g:1,c:"z = parseInt(results[{0}], 10);\n",s:"(\\d{1,3})"},W:{g:1,c:"W = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},F:function(){return{g:1,c:"m = parseInt(me.getMonthNumber(results[{0}]), 10);\n",s:"("+v.monthNames.join("|")+")"}},M:function(){for(var b=[],a=0;a<12;b.push(v.getShortMonthName(a)),++a){}return Ext.applyIf({s:"("+b.join("|")+")"},v.formatCodeToRegex("F"))},m:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(1[0-2]|0[1-9])"},n:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(1[0-2]|[1-9])"},t:{g:0,c:null,s:"(?:\\d{2})"},L:{g:0,c:null,s:"(?:1|0)"},o:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},Y:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},y:{g:1,c:"var ty = parseInt(results[{0}], 10);\ny = ty > me.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{2})"},a:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(am|pm|AM|PM)",calcAtEnd:true},A:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(AM|PM|am|pm)",calcAtEnd:true},g:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(1[0-2]|[0-9])"},G:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(2[0-3]|1[0-9]|[0-9])"},h:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(1[0-2]|0[1-9])"},H:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(2[0-3]|[0-1][0-9])"},i:{g:1,c:"i = parseInt(results[{0}], 10);\n",s:"([0-5][0-9])"},s:{g:1,c:"s = parseInt(results[{0}], 10);\n",s:"([0-5][0-9])"},u:{g:1,c:"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n",s:"(\\d+)"},O:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),","mn = o.substring(3,5) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{4})"},P:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),","mn = o.substring(4,6) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{2}:\\d{2})"},T:{g:0,c:null,s:"[A-Z]{1,5}"},Z:{g:1,c:"zz = results[{0}] * 1;\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\n",s:"([+-]?\\d{1,5})"},c:function(){var b=[],d=[v.formatCodeToRegex("Y",1),v.formatCodeToRegex("m",2),v.formatCodeToRegex("d",3),v.formatCodeToRegex("H",4),v.formatCodeToRegex("i",5),v.formatCodeToRegex("s",6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:["if(results[8]) {","if(results[8] == 'Z'){","zz = 0;","}else if (results[8].indexOf(':') > -1){",v.formatCodeToRegex("P",8).c,"}else{",v.formatCodeToRegex("O",8).c,"}","}"].join("\n")}],a,c;for(a=0,c=d.length;a<c;++a){b.push(d[a].c)}return{g:1,c:b.join(""),s:[d[0].s,"(?:","-",d[1].s,"(?:","-",d[2].s,"(?:","(?:T| )?",d[3].s,":",d[4].s,"(?::",d[5].s,")?","(?:(?:\\.|,)(\\d+))?","(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?",")?",")?",")?"].join("")}},U:{g:1,c:"u = parseInt(results[{0}], 10);\n",s:"(-?\\d+)"}},dateFormat:function(b,a){return v.format(b,a)},isEqual:function(a,b){if(a&&b){return(a.getTime()===b.getTime())}return !(a||b)},format:function(b,a){var c=v.formatFunctions;if(!Ext.isDate(b)){return""}if(c[a]==null){v.createFormat(a)}return c[a].call(b)+""},getTimezone:function(a){return a.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,5})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},getGMTOffset:function(c,b){var a=c.getTimezoneOffset();return(a>0?"-":"+")+Ext.String.leftPad(Math.floor(Math.abs(a)/60),2,"0")+(b?":":"")+Ext.String.leftPad(Math.abs(a%60),2,"0")},getDayOfYear:function(c){var d=0,a=v.clone(c),f=c.getMonth(),b;for(b=0,a.setDate(1),a.setMonth(0);b<f;a.setMonth(++b)){d+=v.getDaysInMonth(a)}return d+c.getDate()-1},getWeekOfYear:(function(){var b=86400000,a=7*b;return function(f){var d=w.UTC(f.getFullYear(),f.getMonth(),f.getDate()+3)/b,g=Math.floor(d/7),c=new w(g*a).getUTCFullYear();return g-Math.floor(w.UTC(c,0,7)/a)+1}}()),isLeapYear:function(b){var a=b.getFullYear();return !!((a&3)===0&&(a%100||(a%400===0&&a)))},getFirstDayOfMonth:function(a){var b=(a.getDay()-(a.getDate()-1))%7;return(b<0)?(b+7):b},getLastDayOfMonth:function(a){return v.getLastDateOfMonth(a).getDay()},getFirstDateOfMonth:function(a){return new w(a.getFullYear(),a.getMonth(),1)},getLastDateOfMonth:function(a){return new w(a.getFullYear(),a.getMonth(),v.getDaysInMonth(a))},getDaysInMonth:(function(){var a=[31,28,31,30,31,30,31,31,30,31,30,31];return function(b){var c=b.getMonth();return c===1&&v.isLeapYear(b)?29:a[c]}}()),getSuffix:function(a){switch(a.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},clone:function(a){return new w(a.getTime())},isDST:function(a){return new w(a.getFullYear(),0,1).getTimezoneOffset()!==a.getTimezoneOffset()},clearTime:function(f,a){if(isNaN(f.getTime())){return f}if(a){return v.clearTime(v.clone(f))}var c=f.getDate(),d,b;f.setHours(0);f.setMinutes(0);f.setSeconds(0);f.setMilliseconds(0);if(f.getDate()!==c){for(d=1,b=v.add(f,v.HOUR,d);b.getDate()!==c;d++,b=v.add(f,v.HOUR,d)){}f.setDate(c);f.setHours(b.getHours())}return f},add:function(f,g,b){var a=v.clone(f),h,c,d=0;if(!g||b===0){return a}c=b-parseInt(b,10);b=parseInt(b,10);if(b){switch(g.toLowerCase()){case v.MILLI:a.setTime(a.getTime()+b);break;case v.SECOND:a.setTime(a.getTime()+b*1000);break;case v.MINUTE:a.setTime(a.getTime()+b*60*1000);break;case v.HOUR:a.setTime(a.getTime()+b*60*60*1000);break;case v.DAY:a.setDate(a.getDate()+b);break;case v.MONTH:h=f.getDate();if(h>28){h=Math.min(h,v.getLastDateOfMonth(v.add(v.getFirstDateOfMonth(f),v.MONTH,b)).getDate())}a.setDate(h);a.setMonth(f.getMonth()+b);break;case v.YEAR:h=f.getDate();if(h>28){h=Math.min(h,v.getLastDateOfMonth(v.add(v.getFirstDateOfMonth(f),v.YEAR,b)).getDate())}a.setDate(h);a.setFullYear(f.getFullYear()+b);break}}if(c){switch(g.toLowerCase()){case v.MILLI:d=1;break;case v.SECOND:d=1000;break;case v.MINUTE:d=1000*60;break;case v.HOUR:d=1000*60*60;break;case v.DAY:d=1000*60*60*24;break;case v.MONTH:h=v.getDaysInMonth(a);d=1000*60*60*24*h;break;case v.YEAR:h=(v.isLeapYear(a)?366:365);d=1000*60*60*24*h;break}if(d){a.setTime(a.getTime()+d*c)}}return a},subtract:function(b,c,a){return v.add(b,c,-a)},between:function(c,a,d){var b=c.getTime();return a.getTime()<=b&&b<=d.getTime()},compat:function(){var j,h=["useStrict","formatCodeToRegex","parseFunctions","parseRegexes","formatFunctions","y2kYear","MILLI","SECOND","MINUTE","HOUR","DAY","MONTH","YEAR","defaults","dayNames","monthNames","monthNumbers","getShortMonthName","getShortDayName","getMonthNumber","formatCodes","isValid","parseDate","getFormatCode","createFormat","createParser","parseCodes"],a=["dateFormat","format","getTimezone","getGMTOffset","getDayOfYear","getWeekOfYear","isLeapYear","getFirstDayOfMonth","getLastDayOfMonth","getDaysInMonth","getSuffix","clone","isDST","clearTime","add","between"],f=h.length,g=a.length,c,b,d;for(d=0;d<f;d++){c=h[d];w[c]=v[c]}for(j=0;j<g;j++){b=a[j];w.prototype[b]=function(){var m=Array.prototype.slice.call(arguments);m.unshift(this);return v[b].apply(v,m)}}},diff:function(d,f,b){var c,a=+f-d;switch(b){case v.MILLI:return a;case v.SECOND:return Math.floor(a/1000);case v.MINUTE:return Math.floor(a/60000);case v.HOUR:return Math.floor(a/3600000);case v.DAY:return Math.floor(a/86400000);case"w":return Math.floor(a/604800000);case v.MONTH:c=(f.getFullYear()*12+f.getMonth())-(d.getFullYear()*12+d.getMonth());if(v.add(d,b,c)>f){return c-1}return c;case v.YEAR:c=f.getFullYear()-d.getFullYear();if(v.add(d,b,c)>f){return c-1}else{return c}}},align:function(c,a,b){var d=new w(+c);switch(a.toLowerCase()){case v.MILLI:return d;case v.SECOND:d.setUTCSeconds(d.getUTCSeconds()-d.getUTCSeconds()%b);d.setUTCMilliseconds(0);return d;case v.MINUTE:d.setUTCMinutes(d.getUTCMinutes()-d.getUTCMinutes()%b);d.setUTCSeconds(0);d.setUTCMilliseconds(0);return d;case v.HOUR:d.setUTCHours(d.getUTCHours()-d.getUTCHours()%b);d.setUTCMinutes(0);d.setUTCSeconds(0);d.setUTCMilliseconds(0);return d;case v.DAY:if(b===7||b===14){d.setUTCDate(d.getUTCDate()-d.getUTCDay()+1)}d.setUTCHours(0);d.setUTCMinutes(0);d.setUTCSeconds(0);d.setUTCMilliseconds(0);return d;case v.MONTH:d.setUTCMonth(d.getUTCMonth()-(d.getUTCMonth()-1)%b,1);d.setUTCHours(0);d.setUTCMinutes(0);d.setUTCSeconds(0);d.setUTCMilliseconds(0);return d;case v.YEAR:d.setUTCFullYear(d.getUTCFullYear()-d.getUTCFullYear()%b,1,1);d.setUTCHours(0);d.setUTCMinutes(0);d.setUTCSeconds(0);d.setUTCMilliseconds(0);return c}}}}());Ext.Function=(function(){var E=0,t,B=[],s=[],y=0,w={},z=window,C=Ext.global,A=!!(C.setImmediate&&C.clearImmediate),u=z.requestAnimationFrame||z.webkitRequestAnimationFrame||z.mozRequestAnimationFrame||z.oRequestAnimationFrame||function(a){var d=Ext.now(),c=Math.max(0,16-(d-E)),b=z.setTimeout(function(){a(d+c)},c);E=d+c;return b},D=function(){var d=B.length,a,c,b;t=null;for(c=0;c<d;c++){b=B[c];a=b[3];if(w[a]){b[0].apply(b[1]||C,b[2]||s);delete w[a]}}B=B.slice(d)},F=function(){Ext.elevateFunction(D)},v={flexSetter:function(a){return function(d,b){var f,c;if(d!==null){if(typeof d!=="string"){for(f in d){if(d.hasOwnProperty(f)){a.call(this,f,d[f])}}if(Ext.enumerables){for(c=Ext.enumerables.length;c--;){f=Ext.enumerables[c];if(d.hasOwnProperty(f)){a.call(this,f,d[f])}}}}else{a.call(this,d,b)}}return this}},bind:function(b,c,d,f){if(arguments.length===2){return function(){return b.apply(c,arguments)}}var g=b,a=Array.prototype.slice;return function(){var h=d||arguments;if(f===true){h=a.call(arguments,0);h=h.concat(d)}else{if(typeof f==="number"){h=a.call(arguments,0);Ext.Array.insert(h,f,d)}}return g.apply(c||C,h)}},bindCallback:function(a,b,c,d,f){return function(){var g=Ext.Array.slice(arguments);return Ext.callback(a,b,c?c.concat(g):g,d,f)}},pass:function(a,c,b){if(!Ext.isArray(c)){if(Ext.isIterable(c)){c=Ext.Array.clone(c)}else{c=c!==undefined?[c]:[]}}return function(){var d=c.slice();d.push.apply(d,arguments);return a.apply(b||this,d)}},alias:function(a,b){return function(){return a[b].apply(a,arguments)}},clone:function(a){return function(){return a.apply(this,arguments)}},createInterceptor:function(a,b,c,d){if(!Ext.isFunction(b)){return a}else{d=Ext.isDefined(d)?d:null;return function(){var g=this,f=arguments;return(b.apply(c||g||C,f)!==false)?a.apply(g||C,f):d}}},createDelayed:function(a,c,b,d,f){if(b||d){a=Ext.Function.bind(a,b,d,f)}return function(){var g=this,h=Array.prototype.slice.call(arguments);setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(a,g,h)}else{a.apply(g,h)}},c)}},defer:function(a,c,b,d,f){a=Ext.Function.bind(a,b,d,f);if(c>0){return setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(a)}else{a()}},c)}a();return 0},interval:function(a,c,b,d,f){a=Ext.Function.bind(a,b,d,f);return setInterval(function(){if(Ext.elevateFunction){Ext.elevateFunction(a)}else{a()}},c)},createSequence:function(b,a,c){if(!a){return b}else{return function(){var d=b.apply(this,arguments);a.apply(c||this,arguments);return d}}},createBuffered:function(a,d,b,c){var f;return function(){var g=c||Array.prototype.slice.call(arguments,0),h=b||this;if(f){clearTimeout(f)}f=setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(a,h,g)}else{a.apply(h,g)}},d)}},createAnimationFrame:function(b,c,d,a){var f;a=a||3;return function(){var g=d||Array.prototype.slice.call(arguments,0);c=c||this;if(a===3&&f){v.cancelAnimationFrame(f)}if((a&1)||!f){f=v.requestAnimationFrame(function(){f=null;b.apply(c,g)})}}},requestAnimationFrame:function(b,c,f){var a=++y,d=Array.prototype.slice.call(arguments,0);d[3]=a;w[a]=1;B.push(d);if(!t){t=u(Ext.elevateFunction?F:D)}return a},cancelAnimationFrame:function(a){delete w[a]},createThrottled:function(b,f,c){var j=0,g,d,a,h=function(){if(Ext.elevateFunction){Ext.elevateFunction(b,c,d)}else{b.apply(c,d)}j=Ext.now();a=null};return function(){if(!c){c=this}g=Ext.now()-j;d=arguments;if(g>=f){clearTimeout(a);h()}else{if(!a){a=Ext.defer(h,f-g)}}}},createBarrier:function(a,b,c){return function(){if(!--a){b.apply(c,arguments)}}},interceptBefore:function(d,f,b,c){var a=d[f]||Ext.emptyFn;return(d[f]=function(){var g=b.apply(c||this,arguments);a.apply(this,arguments);return g})},interceptAfter:function(d,f,b,c){var a=d[f]||Ext.emptyFn;return(d[f]=function(){a.apply(this,arguments);return b.apply(c||this,arguments)})},makeCallback:function(a,b){return function(){return b[a].apply(b,arguments)}},memoize:function(b,c,f){var d={},a=f&&Ext.isFunction(f);return function(g){var h=a?f.apply(c,arguments):g;if(!(h in d)){d[h]=b.apply(c,arguments)}return d[h]}}};Ext.asap=A?function(b,c,a){if(c!=null||a!=null){b=v.bind(b,c,a)}return setImmediate(function(){if(Ext.elevateFunction){Ext.elevateFunction(b)}else{b()}})}:function(b,c,a){if(c!=null||a!=null){b=v.bind(b,c,a)}return setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(b)}else{b()}},0,true)},Ext.asapCancel=A?function(a){clearImmediate(a)}:function(a){clearTimeout(a)};Ext.defer=v.defer;Ext.interval=v.interval;Ext.pass=v.pass;Ext.bind=v.bind;Ext.deferCallback=v.requestAnimationFrame;return v})();Ext.Number=(new function(){var h=this,j=(0.9).toFixed()!=="1",f=Math,g={count:false,inclusive:false,wrap:true};Ext.apply(h,{Clip:{DEFAULT:g,COUNT:Ext.applyIf({count:true},g),INCLUSIVE:Ext.applyIf({inclusive:true},g),NOWRAP:Ext.applyIf({wrap:false},g)},clipIndices:function(t,s,c){c=c||g;var d=0,u=c.wrap,a,r,b;s=s||[];for(b=0;b<2;++b){a=r;r=s[b];if(r==null){r=d}else{if(b&&c.count){r+=a;r=(r>t)?t:r}else{if(u){r=(r<0)?(t+r):r}if(b&&c.inclusive){++r}r=(r<0)?0:((r>t)?t:r)}}d=t}s[0]=a;s[1]=(r<a)?a:r;return s},constrain:function(a,b,c){var d=parseFloat(a);if(b===null){b=a}if(c===null){c=a}return(d<b)?b:((d>c)?c:d)},snap:function(a,c,b,m){var d;if(a===undefined||a<b){return b||0}if(c){d=a%c;if(d!==0){a-=d;if(d*2>=c){a+=c}else{if(d*2<-c){a-=c}}}}return h.constrain(a,b,m)},snapInRange:function(b,o,c,a){var d;c=(c||0);if(b===undefined||b<c){return c}if(o&&(d=((b-c)%o))){b-=d;d*=2;if(d>=o){b+=o}}if(a!==undefined){if(b>(a=h.snapInRange(a,o,c))){b=a}}return b},sign:function(a){a=+a;if(a===0||isNaN(a)){return a}return(a>0)?1:-1},toFixed:j?function(a,c){c=c||0;var b=f.pow(10,c);return(f.round(a*b)/b).toFixed(c)}:function(a,b){return a.toFixed(b)},from:function(a,b){if(isFinite(a)){a=parseFloat(a)}return !isNaN(a)?a:b},randomInt:function(a,b){return f.floor(f.random()*(b-a+1)+a)},correctFloat:function(a){return parseFloat(a.toPrecision(14))}});Ext.num=function(){return h.from.apply(this,arguments)}}());(function(){var p=function(){},h=/^\?/,q=/(\[):?([^\]]*)\]/g,j=/^([^\[]+)/,m=/\+/g,o=Ext.Object={chain:Object.create||function(a){p.prototype=a;var b=new p();p.prototype=null;return b},clear:function(b){for(var a in b){delete b[a]}return b},freeze:Object.freeze?function(a,c){if(a&&typeof a==="object"&&!Object.isFrozen(a)){Object.freeze(a);if(c){for(var b in a){o.freeze(a[b],c)}}}return a}:Ext.identityFn,toQueryObjects:function(a,d,b){var c=o.toQueryObjects,f=[],s,g;if(Ext.isArray(d)){for(s=0,g=d.length;s<g;s++){if(b){f=f.concat(c(a+"["+s+"]",d[s],true))}else{f.push({name:a,value:d[s]})}}}else{if(Ext.isObject(d)){for(s in d){if(d.hasOwnProperty(s)){if(b){f=f.concat(c(a+"["+s+"]",d[s],true))}else{f.push({name:a,value:d[s]})}}}}else{f.push({name:a,value:d})}}return f},toQueryString:function(c,f){var b=[],d=[],y,a,w,g,v;for(y in c){if(c.hasOwnProperty(y)){b=b.concat(o.toQueryObjects(y,c[y],f))}}for(a=0,w=b.length;a<w;a++){g=b[a];v=g.value;if(Ext.isEmpty(v)){v=""}else{if(Ext.isDate(v)){v=Ext.Date.toString(v)}}d.push(encodeURIComponent(g.name)+"="+encodeURIComponent(String(v)))}return d.join("&")},fromQueryString:function(P,a){var F=P.replace(h,"").split("&"),I={},M,J,g,f,b,N,d,c,Q,L,K,G,H,O;for(b=0,N=F.length;b<N;b++){d=F[b];if(d.length>0){J=d.split("=");g=J[0];g=g.replace(m,"%20");g=decodeURIComponent(g);f=J[1];if(f!==undefined){f=f.replace(m,"%20");f=decodeURIComponent(f)}else{f=""}if(!a){if(I.hasOwnProperty(g)){if(!Ext.isArray(I[g])){I[g]=[I[g]]}I[g].push(f)}else{I[g]=f}}else{L=g.match(q);K=g.match(j);g=K[0];G=[];if(L===null){I[g]=f;continue}for(c=0,Q=L.length;c<Q;c++){H=L[c];H=(H.length===2)?"":H.substring(1,H.length-1);G.push(H)}G.unshift(g);M=I;for(c=0,Q=G.length;c<Q;c++){H=G[c];if(c===Q-1){if(Ext.isArray(M)&&H===""){M.push(f)}else{M[H]=f}}else{if(M[H]===undefined||typeof M[H]==="string"){O=G[c+1];M[H]=(Ext.isNumeric(O)||O==="")?[]:{}}M=M[H]}}}}}return I},each:function(b,f,g){var c=Ext.enumerables,a,d;if(b){g=g||b;for(d in b){if(b.hasOwnProperty(d)){if(f.call(g,d,b[d],b)===false){return}}}if(c){for(a=c.length;a--;){if(b.hasOwnProperty(d=c[a])){if(f.call(g,d,b[d],b)===false){return}}}}}},eachValue:function(b,f,g){var c=Ext.enumerables,a,d;g=g||b;for(d in b){if(b.hasOwnProperty(d)){if(f.call(g,b[d])===false){return}}}if(c){for(a=c.length;a--;){if(b.hasOwnProperty(d=c[a])){if(f.call(g,b[d])===false){return}}}}},merge:function(a){var c=1,b=arguments.length,u=o.merge,f=Ext.clone,d,v,w,g;for(;c<b;c++){d=arguments[c];for(v in d){w=d[v];if(w&&w.constructor===Object){g=a[v];if(g&&g.constructor===Object){u(g,w)}else{a[v]=f(w)}}else{a[v]=w}}}return a},mergeIf:function(c){var g=1,f=arguments.length,a=Ext.clone,b,s,d;for(;g<f;g++){b=arguments[g];for(s in b){if(!(s in c)){d=b[s];if(d&&d.constructor===Object){c[s]=a(d)}else{c[s]=d}}}}return c},getAllKeys:function(c){var b=[],a;for(a in c){b.push(a)}return b},getKey:function(c,a){for(var b in c){if(c.hasOwnProperty(b)&&c[b]===a){return b}}return null},getValues:function(b){var c=[],a;for(a in b){if(b.hasOwnProperty(a)){c.push(b[a])}}return c},getKeys:(typeof Object.keys=="function")?function(a){if(!a){return[]}return Object.keys(a)}:function(c){var b=[],a;for(a in c){if(c.hasOwnProperty(a)){b.push(a)}}return b},getSize:function(c){var b=0,a;for(a in c){if(c.hasOwnProperty(a)){b++}}return b},isEmpty:function(b){for(var a in b){if(b.hasOwnProperty(a)){return false}}return true},equals:(function(){var a=function(d,b){var c;for(c in d){if(d.hasOwnProperty(c)){if(d[c]!==b[c]){return false}}}return true};return function(b,c){if(b===c){return true}if(b&&c){return a(b,c)&&a(c,b)}else{if(!b&&!c){return b===c}else{return false}}}})(),fork:function(d){var c,b,a;if(d&&d.constructor===Object){c=o.chain(d);for(b in d){a=d[b];if(a){if(a.constructor===Object){c[b]=o.fork(a)}else{if(a instanceof Array){c[b]=Ext.Array.clone(a)}}}}}else{c=d}return c},defineProperty:("defineProperty" in Object)?Object.defineProperty:function(b,c,a){if(!Object.prototype.__defineGetter__){return}if(a.get){b.__defineGetter__(c,a.get)}if(a.set){b.__defineSetter__(c,a.set)}},classify:function(s){var a=s,f=[],b={},c=function(){var w=0,v=f.length,r;for(;w<v;w++){r=f[w];this[r]=new b[r]()}},g,d;for(g in s){if(s.hasOwnProperty(g)){d=s[g];if(d&&d.constructor===Object){f.push(g);b[g]=o.classify(d)}}}c.prototype=a;return c}};Ext.merge=Ext.Object.merge;Ext.mergeIf=Ext.Object.mergeIf}());Ext.apply(Ext,{_namedScopes:{"this":{isThis:1},controller:{isController:1},self:{isSelf:1},"self.controller":{isSelf:1,isController:1}},escapeId:(function(){var o=/^[a-zA-Z_][a-zA-Z0-9_\-]*$/i,m=/([\W]{1})/g,g=/^(\d)/g,h=function(a,b){return"\\"+b},j=function(a,b){return"\\00"+b.charCodeAt(0).toString(16)+" "};return function(a){return o.test(a)?a:a.replace(m,h).replace(g,j)}}()),callback:function(p,r,t,u,m,q){if(!p){return}var s=(r in Ext._namedScopes);if(p.charAt){if((!r||s)&&m){r=m.resolveListenerScope(s?r:q)}p=r[p]}else{if(s){r=q||m}else{if(!r){r=m}}}var o;if(p&&Ext.isFunction(p)){r=r||Ext.global;if(u){Ext.defer(p,u,r,t)}else{if(Ext.elevateFunction){o=Ext.elevateFunction(p,r,t)}else{if(t){o=p.apply(r,t)}else{o=p.call(r)}}}}return o},coerce:function(j,m){var o=Ext.typeOf(j),g=Ext.typeOf(m),h=typeof j==="string";if(o!==g){switch(g){case"string":return String(j);case"number":return Number(j);case"boolean":return h&&(!j||j==="false")?false:Boolean(j);case"null":return h&&(!j||j==="null")?null:j;case"undefined":return h&&(!j||j==="undefined")?undefined:j;case"date":return h&&isNaN(j)?Ext.Date.parse(j,Ext.Date.defaultFormat):Date(Number(j))}}return j},copyTo:function(j,r,p,q){if(typeof p==="string"){p=p.split(Ext.propertyNameSplitRe)}for(var m,s=0,o=p?p.length:0;s<o;s++){m=p[s];if(q||r.hasOwnProperty(m)){j[m]=r[m]}}return j},copy:function(j,r,p,q){if(typeof p==="string"){p=p.split(Ext.propertyNameSplitRe)}for(var m,s=0,o=p?p.length:0;s<o;s++){m=p[s];if(r.hasOwnProperty(m)||(q&&m in r)){j[m]=r[m]}}return j},propertyNameSplitRe:/[,;\s]+/,copyToIf:function(j,p,o){if(typeof o==="string"){o=o.split(Ext.propertyNameSplitRe)}for(var h,q=0,m=o?o.length:0;q<m;q++){h=o[q];if(j[h]===undefined){j[h]=p[h]}}return j},copyIf:function(j,p,o){if(typeof o==="string"){o=o.split(Ext.propertyNameSplitRe)}for(var h,q=0,m=o?o.length:0;q<m;q++){h=o[q];if(!(h in j)&&(h in p)){j[h]=p[h]}}return j},extend:(function(){var d=Object.prototype.constructor,c=function(a){for(var b in a){if(!a.hasOwnProperty(b)){continue}this[b]=a[b]}};return function(q,a,m){if(Ext.isObject(a)){m=a;a=q;q=m.constructor!==d?m.constructor:function(){a.apply(this,arguments)}}var o=function(){},p,b=a.prototype;o.prototype=b;p=q.prototype=new o();p.constructor=q;q.superclass=b;if(b.constructor===d){b.constructor=a}q.override=function(f){Ext.override(q,f)};p.override=c;p.proto=p;q.override(m);q.extend=function(f){return Ext.extend(q,f)};return q}}()),iterate:function(f,g,d){if(Ext.isEmpty(f)){return}if(d===undefined){d=f}if(Ext.isIterable(f)){Ext.Array.each.call(Ext.Array,f,g,d)}else{Ext.Object.each.call(Ext.Object,f,g,d)}},_resourcePoolRe:/^[<]([^<>@:]*)(?:[@]([^<>@:]+))?[>](.+)$/,resolveResource:function(g){var d=g,f;if(g&&g.charAt(0)==="<"){f=Ext._resourcePoolRe.exec(g);if(f){d=Ext.getResourcePath(f[3],f[1],f[2])}}return d},urlEncode:function(){var d=Ext.Array.from(arguments),c="";if(Ext.isString(d[1])){c=d[1]+"&";d[1]=false}return c+Ext.Object.toQueryString.apply(Ext.Object,d)},urlDecode:function(){return Ext.Object.fromQueryString.apply(Ext.Object,arguments)},getScrollbarSize:function(j){var f=Ext._scrollbarSize;if(j||!f){var g=document.body,h=document.createElement("div");h.style.width=h.style.height="100px";h.style.overflow="scroll";h.style.position="absolute";g.appendChild(h);Ext._scrollbarSize=f={width:h.offsetWidth-h.clientWidth,height:h.offsetHeight-h.clientHeight};g.removeChild(h)}return f},typeOf:(function(){var g=/\S/,j=Object.prototype.toString,h={number:1,string:1,"boolean":1,"undefined":1},f={"[object Array]":"array","[object Date]":"date","[object Boolean]":"boolean","[object Number]":"number","[object RegExp]":"regexp"};return function(b){if(b===null){return"null"}var c=typeof b,d,a;if(h[c]){return c}d=f[a=j.call(b)];if(d){return d}if(c==="function"){return"function"}if(c==="object"){if(b.nodeType!==undefined){if(b.nodeType===3){return g.test(b.nodeValue)?"textnode":"whitespace"}else{return"element"}}return"object"}return a}}()),factory:function(h,o,j,m){var p=Ext.ClassManager,q;if(!h||h.isInstance){if(j&&j!==h){j.destroy()}return h}if(m){if(typeof h==="string"){return p.instantiateByAlias(m+"."+h)}else{if(Ext.isObject(h)&&"type" in h){return p.instantiateByAlias(m+"."+h.type,h)}}}if(h===true){return j||Ext.create(o)}if("xtype" in h){q=p.instantiateByAlias("widget."+h.xtype,h)}else{if("xclass" in h){q=Ext.create(h.xclass,h)}}if(q){if(j){j.destroy()}return q}if(j){return j.setConfig(h)}return Ext.create(o,h)},log:(function(){var b=function(){};b.info=b.warn=b.error=Ext.emptyFn;return b}())});(function(){var t=[""],p=/([^\d\.])/,m=/[^\d]/g,o=/[\-+]/g,q=/\s/g,u=/_/g,r={classic:1,modern:1},s;Ext.Version=s=function(j,a){var h=this,c=h.padModes,f,A,b,B,g,d,z;if(j.isVersion){j=j.version}h.version=z=String(j).toLowerCase().replace(u,".").replace(o,"");f=z.charAt(0);if(f in c){z=z.substring(1);b=c[f]}else{b=a?c[a]:0}h.pad=b;d=z.search(p);h.shortVersion=z;if(d!==-1){h.release=g=z.substr(d,j.length);h.shortVersion=z.substr(0,d);g=s.releaseValueMap[g]||g}h.releaseValue=g||b;h.shortVersion=h.shortVersion.replace(m,"");h.parts=B=z.split(".");for(A=B.length;A--;){B[A]=parseInt(B[A],10)}if(b===Infinity){B.push(b)}h.major=B[0]||b;h.minor=B[1]||b;h.patch=B[2]||b;h.build=B[3]||b;return h};s.prototype={isVersion:true,padModes:{"~":NaN,"^":Infinity},release:"",compareTo:function(j){var h=this,a=h.pad,C=h.parts,f=C.length,b=j.isVersion?j:new s(j),d=b.pad,D=b.parts,E=D.length,g=Math.max(f,E),F,c,B;for(F=0;F<g;F++){c=(F<f)?C[F]:a;B=(F<E)?D[F]:d;if(c<B){return -1}if(c>B){return 1}}c=h.releaseValue;B=b.releaseValue;if(c<B){return -1}if(c>B){return 1}return 0},toString:function(){return this.version},valueOf:function(){return this.version},getMajor:function(){return this.major},getMinor:function(){return this.minor},getPatch:function(){return this.patch},getBuild:function(){return this.build},getRelease:function(){return this.release},getReleaseValue:function(){return this.releaseValue},isGreaterThan:function(a){return this.compareTo(a)>0},isGreaterThanOrEqual:function(a){return this.compareTo(a)>=0},isLessThan:function(a){return this.compareTo(a)<0},isLessThanOrEqual:function(a){return this.compareTo(a)<=0},equals:function(a){return this.compareTo(a)===0},match:function(a){a=String(a);return this.version.substr(0,a.length)===a},toArray:function(){var a=this;return[a.getMajor(),a.getMinor(),a.getPatch(),a.getBuild(),a.getRelease()]},getShortVersion:function(){return this.shortVersion},gt:function(a){return this.compareTo(a)>0},lt:function(a){return this.compareTo(a)<0},gtEq:function(a){return this.compareTo(a)>=0},ltEq:function(a){return this.compareTo(a)<=0}};Ext.apply(s,{aliases:{from:{extjs:"ext",core:"core",touch:"modern"},to:{ext:["extjs"],core:["core"],modern:["touch"]}},releaseValueMap:{dev:-6,alpha:-5,a:-5,beta:-4,b:-4,rc:-3,"#":-2,p:-1,pl:-1},getComponentValue:function(a){return !a?0:(isNaN(a)?this.releaseValueMap[a]||a:parseInt(a,10))},compare:function(b,c){var a=b.isVersion?b:new s(b);return a.compareTo(c)},set:function(b,d,f){var g=s.aliases.to[d],a=f.isVersion?f:new s(f),c;b[d]=a;if(g){for(c=g.length;c-->0;){b[g[c]]=a}}return a}});Ext.apply(Ext,{compatVersions:{},versions:{},lastRegisteredVersion:null,getCompatVersion:function(c){var a=Ext.compatVersions,b;if(!c){b=a.ext||a.touch||a.core}else{b=a[s.aliases.from[c]||c]}return b||Ext.getVersion(c)},setCompatVersion:function(b,a){s.set(Ext.compatVersions,b,a)},setVersion:function(b,a){if(b in r){Ext.toolkit=b}Ext.lastRegisteredVersion=s.set(Ext.versions,b,a);return this},getVersion:function(b){var a=Ext.versions;if(!b){return a.ext||a.touch||a.core}return a[s.aliases.from[b]||b]},checkVersion:function(L,c){var H=Ext.isArray(L),g=s.aliases.from,b=H?L:t,j=b.length,d=Ext.versions,f=d.ext||d.touch,K,h,I,a,N,F,M,J,G;if(!H){t[0]=L}for(K=0;K<j;++K){if(!Ext.isString(M=b[K])){I=Ext.checkVersion(M.and||M.or,!M.or);if(M.not){I=!I}}else{if(M.indexOf(" ")>=0){M=M.replace(q,"")}h=M.indexOf("@");if(h<0){J=M;G=f}else{F=M.substring(0,h);if(!(G=d[g[F]||F])){if(c){return false}continue}J=M.substring(h+1)}h=J.indexOf("-");if(h<0){if(J.charAt(h=J.length-1)==="+"){a=J.substring(0,h);N=null}else{a=N=J}}else{if(h>0){a=J.substring(0,h);N=J.substring(h+1)}else{a=null;N=J.substring(h+1)}}I=true;if(a){a=new s(a,"~");I=a.ltEq(G)}if(I&&N){N=new s(N,"~");I=N.gtEq(G)}}if(I){if(!c){return true}}else{if(c){return false}}}return !!c},deprecate:function(a,c,b,d){if(s.compare(Ext.getVersion(a),c)<1){b.call(d)}}})}());(function(m){var j=(m&&m.packages)||{},o=m&&m.compatibility,g,h;for(g in j){h=j[g];Ext.setVersion(g,h.version)}if(o){if(Ext.isString(o)){Ext.setCompatVersion("core",o)}else{for(g in o){Ext.setCompatVersion(g,o[g])}}}if(!j.ext&&!j.touch){Ext.setVersion("ext","6.0.1.250");Ext.setVersion("core","6.0.1.250")}})(Ext.manifest);Ext.Config=function(d){var g=this,f=d.charAt(0).toUpperCase()+d.substr(1);g.name=d;g.names={internal:"_"+d,initializing:"is"+f+"Initializing",apply:"apply"+f,update:"update"+f,get:"get"+f,set:"set"+f,initGet:"initGet"+f,changeEvent:d.toLowerCase()+"change"};g.root=g};Ext.Config.map={};Ext.Config.get=function(d){var g=Ext.Config.map,f=g[d]||(g[d]=new Ext.Config(d));return f};Ext.Config.prototype={self:Ext.Config,isConfig:true,getGetter:function(){return this.getter||(this.root.getter=this.makeGetter())},getInitGetter:function(){return this.initGetter||(this.root.initGetter=this.makeInitGetter())},getSetter:function(){return this.setter||(this.root.setter=this.makeSetter())},getEventedSetter:function(){return this.eventedSetter||(this.root.eventedSetter=this.makeEventedSetter())},getInternalName:function(b){return b.$configPrefixed?this.names.internal:this.name},mergeNew:function(m,h,o,p){var j,q;if(!h){j=m}else{if(!m){j=h}else{j=Ext.Object.chain(h);for(q in m){if(!p||!(q in j)){j[q]=m[q]}}}}return j},mergeSets:function(o,q,j){var h=q?Ext.Object.chain(q):{},p,m;if(o instanceof Array){for(p=o.length;p--;){m=o[p];if(!j||!(m in h)){h[m]=true}}}else{if(o){if(o.constructor===Object){for(p in o){m=o[p];if(!j||!(p in h)){h[p]=m}}}else{if(!j||!(o in h)){h[o]=true}}}}return h},makeGetter:function(){var d=this.name,c=this.names.internal;return function(){var a=this.$configPrefixed?c:d;return this[a]}},makeInitGetter:function(){var h=this.name,j=this.names,m=j.set,g=j.get,o=j.initializing;return function(){var a=this;a[o]=true;delete a[g];a[m](a.config[h]);delete a[o];return a[g].apply(a,arguments)}},makeSetter:function(){var m=this.name,q=this.names,s=q.internal,r=q.get,j=q.apply,o=q.update,p;p=function(c){var d=this,a=d.$configPrefixed?s:m,b=d[a];delete d[r];if(!d[j]||(c=d[j](c,b))!==undefined){if(c!==(b=d[a])){d[a]=c;if(d[o]){d[o](c,b)}}}return d};p.$isDefault=true;return p},makeEventedSetter:function(){var v=this.name,q=this.names,o=q.internal,w=q.get,p=q.apply,t=q.update,r=q.changeEvent,s=function(b,a,d,c){b[c]=a;if(b[t]){b[t](a,d)}},u;u=function(a){var b=this,c=b.$configPrefixed?o:v,d=b[c];delete b[w];if(!b[p]||(a=b[p](a,d))!==undefined){if(a!==(d=b[c])){if(b.isConfiguring){b[c]=a;if(b[t]){b[t](a,d)}}else{b.fireEventedAction(r,[b,a,d],s,b,[b,a,d,c])}}}return b};u.$isDefault=true;return u}};(function(){var d=Ext.Config,g=d.map,f=Ext.Object;Ext.Configurator=function(j){var b=this,c=j.prototype,a=j.superclass?j.superclass.self.$config:null;b.cls=j;b.superCfg=a;if(a){b.configs=f.chain(a.configs);b.cachedConfigs=f.chain(a.cachedConfigs);b.initMap=f.chain(a.initMap);b.values=f.chain(a.values);b.needsFork=a.needsFork}else{b.configs={};b.cachedConfigs={};b.initMap={};b.values={}}c.config=c.defaultConfig=b.values;j.$config=b};Ext.Configurator.prototype={self:Ext.Configurator,needsFork:false,initList:null,add:function(a,T){var L=this,P=L.cls,M=L.configs,J=L.cachedConfigs,I=L.initMap,s=P.prototype,H=T&&T.$config.configs,S=L.values,N,K,b,R,Q,O,G,E,F,c;for(G in a){c=a[G];N=c&&c.constructor===Object;K=N&&"$value" in c?c:null;if(K){b=!!K.cached;c=K.$value;N=c&&c.constructor===Object}R=K&&K.merge;Q=M[G];if(Q){if(T){R=Q.merge;if(!R){continue}K=null}else{R=R||Q.merge}O=S[G];if(R){c=R.call(Q,c,O,P,T)}else{if(N){if(O&&O.constructor===Object){c=f.merge({},O,c)}}}}else{if(H){Q=H[G];K=null}else{Q=d.get(G)}M[G]=Q;if(Q.cached||b){J[G]=true}E=Q.names;if(!s[F=E.get]){s[F]=Q.getter||Q.getGetter()}if(!s[F=E.set]){s[F]=(K&&K.evented)?(Q.eventedSetter||Q.getEventedSetter()):(Q.setter||Q.getSetter())}}if(K){if(Q.owner!==P){M[G]=Q=Ext.Object.chain(Q);Q.owner=P}Ext.apply(Q,K);delete Q.$value}if(!L.needsFork&&c&&(c.constructor===Object||c instanceof Array)){L.needsFork=true}if(c!==null){I[G]=true}else{if(s.$configPrefixed){s[M[G].names.internal]=null}else{s[M[G].name]=null}if(G in I){I[G]=false}}S[G]=c}},configure:function(Q,U){var L=this,V=L.configs,S=L.initMap,O=L.initListMap,T=L.initList,M=L.cls.prototype,aa=L.values,K=0,c=!T,Z,Y,X,I,a,b,W,P,J,H,N,R,ab;aa=L.needsFork?f.fork(aa):f.chain(aa);Q.isConfiguring=true;if(c){L.initList=T=[];L.initListMap=O={};Q.isFirstInstance=true;for(J in S){I=S[J];Y=V[J];N=Y.cached;if(I){P=Y.names;H=aa[J];if(!M[P.set].$isDefault||M[P.apply]||M[P.update]||typeof H==="object"){if(N){(Z||(Z=[])).push(Y)}else{T.push(Y);O[J]=true}Q[P.get]=Y.initGetter||Y.getInitGetter()}else{M[Y.getInternalName(M)]=H}}else{if(N){M[Y.getInternalName(M)]=undefined}}}}W=Z&&Z.length;if(W){for(a=0;a<W;++a){b=Z[a].getInternalName(M);Q[b]=null}for(a=0;a<W;++a){P=(Y=Z[a]).names;X=P.get;if(Q.hasOwnProperty(X)){Q[P.set](aa[Y.name]);delete Q[X]}}for(a=0;a<W;++a){b=Z[a].getInternalName(M);M[b]=Q[b];delete Q[b]}}if(U&&U.platformConfig){U=L.resolvePlatformConfig(Q,U)}if(c){if(Q.afterCachedConfig&&!Q.afterCachedConfig.$nullFn){Q.afterCachedConfig(U)}}Q.config=aa;for(a=0,W=T.length;a<W;++a){Y=T[a];Q[Y.names.get]=Y.initGetter||Y.getInitGetter()}if(Q.transformInstanceConfig){U=Q.transformInstanceConfig(U)}if(U){for(J in U){H=U[J];Y=V[J];if(!Y){Q[J]=H}else{if(!Y.lazy){++K}if(!O[J]){Q[Y.names.get]=Y.initGetter||Y.getInitGetter()}if(Y.merge){H=Y.merge(H,aa[J],Q)}else{if(H&&H.constructor===Object){R=aa[J];if(R&&R.constructor===Object){H=f.merge(aa[J],H)}else{H=Ext.clone(H)}}}}aa[J]=H}}if(Q.beforeInitConfig&&!Q.beforeInitConfig.$nullFn){if(Q.beforeInitConfig(U)===false){return}}if(U){for(J in U){if(!K){break}Y=V[J];if(Y&&!Y.lazy){--K;P=Y.names;X=P.get;if(Q.hasOwnProperty(X)){Q[P.set](aa[J]);delete Q[P.get]}}}}for(a=0,W=T.length;a<W;++a){Y=T[a];P=Y.names;X=P.get;if(!Y.lazy&&Q.hasOwnProperty(X)){Q[P.set](aa[Y.name]);delete Q[X]}}delete Q.isConfiguring},getCurrentConfig:function(c){var j=c.defaultConfig,a={},b;for(b in j){a[b]=c[g[b].names.get]()}return a},merge:function(u,a,c){var s=this.configs,q,t,b,r;for(q in c){t=c[q];r=s[q];if(r){if(r.merge){t=r.merge(t,a[q],u)}else{if(t&&t.constructor===Object){b=a[q];if(b&&b.constructor===Object){t=Ext.Object.merge(b,t)}else{t=Ext.clone(t)}}}}a[q]=t}return a},reconfigure:function(G,b,F){var A=G.config,z=[],H=G.$configStrict&&!(F&&F.strict===false),a=this.configs,C=F&&F.defaults,c,I,B,y,D,J,E;for(D in b){if(C&&G.hasOwnProperty(D)){continue}A[D]=b[D];c=a[D];if(c){G[c.names.get]=c.initGetter||c.getInitGetter()}else{E=G.self.prototype[D];if(H){if((typeof E==="function")&&!E.$nullFn){continue}}}z.push(D)}for(B=0,y=z.length;B<y;B++){D=z[B];c=a[D];if(c){J=c.names;I=J.get;if(G.hasOwnProperty(I)){G[J.set](b[D]);delete G[I]}}else{c=g[D]||Ext.Config.get(D);J=c.names;if(G[J.set]){G[J.set](b[D])}else{G[D]=b[D]}}}},resolvePlatformConfig:function(s,r){var b=r&&r.platformConfig,q=r,p,c,a;if(b){c=Ext.getPlatformConfigKeys(b);a=c.length;if(a){q=Ext.merge({},q);for(p=0,a=c.length;p<a;++p){this.merge(s,q,b[c[p]])}}}return q}}}());Ext.Base=(function(B){var C=[],u,s=[],r=function(c,d){var a=this,f,g,b;if(c){g=Ext.Config.map[c];b=g.names.get;if(d&&a.hasOwnProperty(b)){f=a.config[c]}else{f=a[b]()}}else{f=a.getCurrentConfig()}return f},y=function(a){return function(){return this[a].apply(this,arguments)}},D=Ext.Version,v=/^\d/,t={},z={},w=function(){},A=w.prototype;Ext.apply(w,{$className:"Ext.Base",$isClass:true,create:function(){return Ext.create.apply(Ext,[this].concat(Array.prototype.slice.call(arguments,0)))},addDeprecations:function(c){var f=this,K=[],o=Ext.getCompatVersion(c.name),h,M,g,L,d,P,m,a,q,b,O,N,j,p;for(M in c){if(v.test(M)){p=new Ext.Version(M);p.deprecations=c[M];K.push(p)}}K.sort(D.compare);for(g=K.length;g--;){h=(p=K[g]).deprecations;d=f.prototype;j=h.statics;P=o&&o.lt(p);if(!P){break}while(h){q=h.methods;if(q){for(b in q){N=q[b];a=null;if(!N){}else{if(Ext.isString(N)){if(P){a=y(N)}}else{L="";if(N.message||N.fn){N=N.fn}m=d.hasOwnProperty(b)&&d[b];if(P&&N){N.$owner=f;N.$name=b;if(m){N.$previous=m}a=N}}}if(a){d[b]=a}}}h=j;j=null;d=f}}},extend:function(b){var j=this,g=b.prototype,d,c,a,f,h;d=j.prototype=Ext.Object.chain(g);d.self=j;j.superclass=d.superclass=g;if(!b.$isClass){for(c in A){if(c in d){d[c]=A[c]}}}h=g.$inheritableStatics;if(h){for(c=0,a=h.length;c<a;c++){f=h[c];if(!j.hasOwnProperty(f)){j[f]=b[f]}}}if(b.$onExtended){j.$onExtended=b.$onExtended.slice()}j.getConfigurator()},$onExtended:[],triggerExtended:function(){var b=this.$onExtended,c=b.length,d,a;if(c>0){for(d=0;d<c;d++){a=b[d];a.fn.apply(a.scope||this,arguments)}}},onExtended:function(a,b){this.$onExtended.push({fn:a,scope:b});return this},addStatics:function(a){this.addMembers(a,true);return this},addInheritableStatics:function(f){var b,g,c=this.prototype,d,a;b=c.$inheritableStatics;g=c.$hasInheritableStatics;if(!b){b=c.$inheritableStatics=[];g=c.$hasInheritableStatics={}}for(d in f){if(f.hasOwnProperty(d)){a=f[d];this[d]=a;if(!g[d]){g[d]=true;b.push(d)}}}return this},addMembers:function(o,m,L){var J=this,f=Ext.Function.clone,b=m?J:J.prototype,j=!m&&b.defaultConfig,q=Ext.enumerables,d=o.privates,c,g,K,h,a,I,p;if(d){delete o.privates;if(!m){p=d.statics;delete d.statics}J.addMembers(d,m,I);if(p){J.addMembers(p,true,I)}}for(a in o){if(o.hasOwnProperty(a)){h=o[a];if(typeof h==="function"&&!h.$isClass&&!h.$nullFn){if(h.$owner){h=f(h)}if(b.hasOwnProperty(a)){h.$previous=b[a]}h.$owner=J;h.$name=a}else{if(j&&(a in j)&&!b.config.hasOwnProperty(a)){(c||(c={}))[a]=h;continue}}b[a]=h}}if(c){J.addConfig(c)}if(q){for(g=0,K=q.length;g<K;++g){if(o.hasOwnProperty(a=q[g])){h=o[a];if(h&&!h.$nullFn){if(h.$owner){h=f(h)}h.$owner=J;h.$name=a;if(b.hasOwnProperty(a)){h.$previous=b[a]}}b[a]=h}}}return this},addMember:function(b,a){t[b]=a;this.addMembers(t);delete t[b];return this},borrow:function(h,g){var d=h.prototype,b={},c,a,f;g=Ext.Array.from(g);for(c=0,a=g.length;c<a;c++){f=g[c];b[f]=d[f]}return this.addMembers(b)},override:function(f){var c=this,h=f.statics,a=f.inheritableStatics,d=f.config,g=f.mixins,b=f.cachedConfig;if(h||a||d){f=Ext.apply({},f)}if(h){c.addMembers(h,true);delete f.statics}if(a){c.addInheritableStatics(a);delete f.inheritableStatics}if(d){c.addConfig(d);delete f.config}if(b){c.addCachedConfig(b);delete f.cachedConfig}delete f.mixins;c.addMembers(f);if(g){c.mixin(g)}return c},callParent:function(b){var a;return(a=this.callParent.caller)&&(a.$previous||((a=a.$owner?a:a.caller)&&a.$owner.superclass.self[a.$name])).apply(this,b||C)},callSuper:function(b){var a;return(a=this.callSuper.caller)&&((a=a.$owner?a:a.caller)&&a.$owner.superclass.self[a.$name]).apply(this,b||C)},mixin:function(b,F){var h=this,q,f,a,g,p,j,c,d,m;if(typeof b!=="string"){m=b;if(m instanceof Array){for(p=0,j=m.length;p<j;p++){q=m[p];h.mixin(q.prototype.mixinId||q.$className,q)}}else{for(var o in m){h.mixin(o,m[o])}}return}q=F.prototype;f=h.prototype;if(q.onClassMixedIn){q.onClassMixedIn.call(F,h)}if(!f.hasOwnProperty("mixins")){if("mixins" in f){f.mixins=Ext.Object.chain(f.mixins)}else{f.mixins={}}}for(a in q){d=q[a];if(a==="mixins"){Ext.applyIf(f.mixins,d)}else{if(!(a==="mixinId"||a==="config")&&(f[a]===undefined)){f[a]=d}}}g=q.$inheritableStatics;if(g){for(p=0,j=g.length;p<j;p++){c=g[p];if(!h.hasOwnProperty(c)){h[c]=F[c]}}}if("config" in q){h.addConfig(q.config,F)}f.mixins[b]=q;if(q.afterClassMixedIn){q.afterClassMixedIn.call(F,h)}return h},addConfig:function(b,a){var c=this.$config||this.getConfigurator();c.add(b,a)},addCachedConfig:function(d,b){var a={},c;for(c in d){a[c]={cached:true,$value:d[c]}}this.addConfig(a,b)},getConfigurator:function(){return this.$config||new Ext.Configurator(this)},getName:function(){return Ext.getClassName(this)},createAlias:B(function(a,b){z[a]=function(){return this[b].apply(this,arguments)};this.override(z);delete z[a]})});for(u in w){if(w.hasOwnProperty(u)){s.push(u)}}w.$staticMembers=s;w.getConfigurator();w.addMembers({$className:"Ext.Base",isInstance:true,$configPrefixed:true,$configStrict:true,isConfiguring:false,isFirstInstance:false,destroyed:false,statics:function(){var a=this.statics.caller,b=this.self;if(!a){return b}return a.$owner},callParent:function(b){var a,c=(a=this.callParent.caller)&&(a.$previous||((a=a.$owner?a:a.caller)&&a.$owner.superclass[a.$name]));return c.apply(this,b||C)},callSuper:function(b){var a,c=(a=this.callSuper.caller)&&((a=a.$owner?a:a.caller)&&a.$owner.superclass[a.$name]);return c.apply(this,b||C)},self:w,constructor:function(){return this},getConfigurator:function(){return this.$config||this.self.getConfigurator()},initConfig:function(a){var b=this,c=b.getConfigurator();b.initConfig=Ext.emptyFn;b.initialConfig=a||{};c.configure(b,a);return b},beforeInitConfig:Ext.emptyFn,getConfig:r,setConfig:function(c,a,d){var b=this,f;if(c){if(typeof c==="string"){f={};f[c]=a}else{f=c}b.getConfigurator().reconfigure(b,f,d)}return b},getCurrentConfig:function(){var a=this.getConfigurator();return a.getCurrentConfig(this)},hasConfig:function(a){return a in this.defaultConfig},getInitialConfig:function(a){var b=this.config;if(!a){return b}return b[a]},$links:null,link:function(c,a){var b=this,d=b.$links||(b.$links={});d[c]=true;b[c]=a;return a},unlink:function(a){var c=this,g,d,f,b;for(g=0,d=a.length;g<d;g++){f=a[g];b=c[f];if(b){if(b.isInstance&&!b.destroyed){b.destroy()}else{if(b.parentNode&&"nodeType" in b){b.parentNode.removeChild(b)}}}c[f]=null}return c},destroy:function(){var a=this,b=a.$links;a.initialConfig=a.config=null;a.destroy=Ext.emptyFn;a.isDestroyed=a.destroyed=true;if(b){a.$links=null;a.unlink(Ext.Object.getKeys(b))}}});A.callOverridden=A.callParent;return w}(Ext.Function.flexSetter));(function(c,d){(Ext.util||(Ext.util={})).Cache=c=function(g){var a=this,b;if(g){Ext.apply(a,g)}a.head=b={key:null,value:null};a.map={};b.next=b.prev=b};c.prototype=d={maxSize:100,count:0,clear:function(){var a=this,g=a.head,b=g.next;g.next=g.prev=g;if(!a.evict.$nullFn){for(;b!==g;b=b.next){a.evict(b.key,b.value)}}a.count=0},each:function(b,h){h=h||this;for(var j=this.head,a=j.next;a!==j;a=a.next){if(b.call(h,a.key,a.value)){break}}},get:function(m){var b=this,o=b.head,a=b.map,j=a[m];if(j){if(j.prev!==o){b.unlinkEntry(j);b.linkEntry(j)}}else{a[m]=j={key:m,value:b.miss.apply(b,arguments)};b.linkEntry(j);++b.count;while(b.count>b.maxSize){b.unlinkEntry(o.prev,true);--b.count}}return j.value},evict:Ext.emptyFn,linkEntry:function(b){var g=this.head,a=g.next;b.next=a;b.prev=g;g.next=b;a.prev=b},unlinkEntry:function(b,a){var j=b.next,h=b.prev;h.next=j;j.prev=h;if(a){this.evict(b.key,b.value)}}};d.destroy=d.clear}());(function(){var m,o=Ext.Base,j=o.$staticMembers,g=function(a,b){return(a.length-b.length)||((a<b)?-1:((a>b)?1:0))};function h(a){function b(){return this.constructor.apply(this,arguments)||null}return b}Ext.Class=m=function(b,a,c){if(typeof b!="function"){c=a;a=b;b=null}if(!a){a={}}b=m.create(b,a);m.process(b,a,c);return b};Ext.apply(m,{makeCtor:h,onBeforeCreated:function(b,a,c){b.addMembers(a);c.onCreated.call(b,b)},create:function(d,a){var b=j.length,c;if(!d){d=h()}while(b--){c=j[b];d[c]=o[c]}return d},process:function(B,a,f){var A=a.preprocessors||m.defaultPreprocessors,G=this.preprocessors,D={onBeforeCreated:this.onBeforeCreated},E=[],C,b,c,F,d,H,I;delete a.preprocessors;B._classHooks=D;for(c=0,F=A.length;c<F;c++){C=A[c];if(typeof C=="string"){C=G[C];b=C.properties;if(b===true){E.push(C.fn)}else{if(b){for(d=0,H=b.length;d<H;d++){I=b[d];if(a.hasOwnProperty(I)){E.push(C.fn);break}}}}}else{E.push(C)}}D.onCreated=f?f:Ext.emptyFn;D.preprocessors=E;this.doProcess(B,a,D)},doProcess:function(c,r,d){var s=this,f=d.preprocessors,b=f.shift(),a=s.doProcess;for(;b;b=f.shift()){if(b.call(s,c,r,d,a)===false){return}}d.onBeforeCreated.apply(s,arguments)},preprocessors:{},registerPreprocessor:function(c,f,b,d,a){if(!d){d="last"}if(!b){b=[c]}this.preprocessors[c]={name:c,properties:b||false,fn:f};this.setDefaultPreprocessorPosition(c,d,a);return this},getPreprocessor:function(a){return this.preprocessors[a]},getPreprocessors:function(){return this.preprocessors},defaultPreprocessors:[],getDefaultPreprocessors:function(){return this.defaultPreprocessors},setDefaultPreprocessors:function(a){this.defaultPreprocessors=Ext.Array.from(a);return this},setDefaultPreprocessorPosition:function(b,f,a){var d=this.defaultPreprocessors,c;if(typeof f=="string"){if(f==="first"){d.unshift(b);return this}else{if(f==="last"){d.push(b);return this}}f=(f==="after")?1:-1}c=Ext.Array.indexOf(d,a);if(c!==-1){Ext.Array.splice(d,Math.max(0,c+f),0,b)}return this}});m.registerPreprocessor("extend",function(u,f,w){var d=Ext.Base,c=d.prototype,b=f.extend,v,a,t;delete f.extend;if(b&&b!==Object){v=b}else{v=d}a=v.prototype;if(!v.$isClass){for(t in c){if(!a[t]){a[t]=c[t]}}}u.extend(v);u.triggerExtended.apply(u,arguments);if(f.onClassExtended){u.onExtended(f.onClassExtended,u);delete f.onClassExtended}},true);m.registerPreprocessor("privates",function(d,a){var b=a.privates,f=b.statics,c=b.privacy||true;delete a.privates;delete b.statics;d.addMembers(b,false,c);if(f){d.addMembers(f,true,c)}});m.registerPreprocessor("statics",function(b,a){b.addStatics(a.statics);delete a.statics});m.registerPreprocessor("inheritableStatics",function(b,a){b.addInheritableStatics(a.inheritableStatics);delete a.inheritableStatics});Ext.createRuleFn=function(a){return new Function("$c","with($c) { return ("+a+"); }")};Ext.expressionCache=new Ext.util.Cache({miss:Ext.createRuleFn});Ext.ruleKeySortFn=g;Ext.getPlatformConfigKeys=function(b){var c=[],d,a;for(d in b){a=Ext.expressionCache.get(d);if(a(Ext.platformTags)){c.push(d)}}c.sort(g);return c};m.registerPreprocessor("platformConfig",function(A,b,E){var a=b.platformConfig,f=b.config,G,J,I,d,B,D,C,F,c,H;delete b.platformConfig;d=A.getConfigurator();J=d.configs;D=Ext.getPlatformConfigKeys(a);for(c=0,H=D.length;c<H;++c){I=a[D[c]];B=G=null;for(C in I){F=I[C];if(f&&C in f){(G||(G={}))[C]=F;(B||(B={}))[C]=f[C];delete f[C]}else{if(C in J){(G||(G={}))[C]=F}else{b[C]=F}}}if(B){d.add(B)}if(G){d.add(G)}}});m.registerPreprocessor("config",function(b,a){if(a.hasOwnProperty("$configPrefixed")){b.prototype.$configPrefixed=a.$configPrefixed}b.addConfig(a.config);delete a.config});m.registerPreprocessor("cachedConfig",function(b,a){if(a.hasOwnProperty("$configPrefixed")){b.prototype.$configPrefixed=a.$configPrefixed}b.addCachedConfig(a.cachedConfig);delete a.cachedConfig});m.registerPreprocessor("mixins",function(a,f,d){var b=f.mixins,c=d.onCreated;delete f.mixins;d.onCreated=function(){d.onCreated=c;a.mixin(b);return d.onCreated.apply(this,arguments)}});Ext.extend=function(b,a,c){if(arguments.length===2&&Ext.isObject(a)){c=a;a=b;b=null}var d;if(!a){throw new Error("[Ext.extend] Attempting to extend from a class which has not been loaded on the page.")}c.extend=a;c.preprocessors=["extend","statics","inheritableStatics","mixins","platformConfig","config"];if(b){d=new m(b,c);d.prototype.constructor=b}else{d=new m(c)}d.prototype.override=function(f){for(var r in f){if(f.hasOwnProperty(r)){this[r]=f[r]}}};return d}}());Ext.Inventory=function(){var b=this;b.names=[];b.paths={};b.alternateToName={};b.aliasToName={};b.nameToAliases={};b.nameToAlternates={}};Ext.Inventory.prototype={_array1:[0],prefixes:null,dotRe:/\./g,wildcardRe:/\*/g,addAlias:function(d,f,g){return this.addMapping(d,f,this.aliasToName,this.nameToAliases,g)},addAlternate:function(d,c){return this.addMapping(d,c,this.alternateToName,this.nameToAlternates)},addMapping:function(v,C,B,H,A){var F=v.$className||v,y=F,w=this._array1,a,D,G,z,E,u;if(Ext.isString(F)){y={};y[F]=C}for(G in y){D=y[G];if(Ext.isString(D)){w[0]=D;D=w}E=D.length;u=H[G]||(H[G]=[]);for(z=0;z<E;++z){if(!(a=D[z])){continue}if(B[a]!==G){B[a]=G;u.push(a)}}}},getAliasesByName:function(b){return this.nameToAliases[b]||null},getAlternatesByName:function(b){return this.nameToAlternates[b]||null},getNameByAlias:function(b){return this.aliasToName[b]||""},getNameByAlternate:function(b){return this.alternateToName[b]||""},getNamesByExpression:function(J,T,M){var B=this,E=B.aliasToName,H=B.alternateToName,S=B.nameToAliases,Q=B.nameToAlternates,C=M?T:{},K=[],D=Ext.isString(J)?[J]:J,N=D.length,P=B.wildcardRe,R,G,F,L,I,A,O;for(G=0;G<N;++G){if((R=D[G]).indexOf("*")<0){if(!(A=E[R])){if(!(A=H[R])){A=R}}if(!(A in C)&&!(T&&(A in T))){C[A]=1;K.push(A)}}else{O=new RegExp("^"+R.replace(P,"(.*?)")+"$");for(A in S){if(!(A in C)&&!(T&&(A in T))){if(!(L=O.test(A))){I=(F=S[A]).length;while(!L&&I-->0){L=O.test(F[I])}F=Q[A];if(F&&!L){I=F.length;while(!L&&I-->0){L=O.test(F[I])}}}if(L){C[A]=1;K.push(A)}}}}}return K},getPath:function(g){var o=this,j=o.paths,h="",m;if(g in j){h=j[g]}else{m=o.getPrefix(g);if(m){g=g.substring(m.length+1);h=j[m];if(h){h+="/"}}h+=g.replace(o.dotRe,"/")+".js"}return h},getPrefix:function(g){if(g in this.paths){return g}var j=this.getPrefixes(),h=j.length,o,m;while(h-->0){o=(m=j[h]).length;if(o<g.length&&g.charAt(o)==="."&&m===g.substring(0,o)){return m}}return""},getPrefixes:function(){var d=this,c=d.prefixes;if(!c){d.prefixes=c=d.names.slice(0);c.sort(d._compareNames)}return c},removeName:function(z){var u=this,r=u.aliasToName,a=u.alternateToName,q=u.nameToAliases,v=u.nameToAlternates,y=q[z],t=v[z],w,s;delete q[z];delete v[z];if(y){for(w=y.length;w--;){if(z===(s=y[w])){delete r[s]}}}if(t){for(w=t.length;w--;){if(z===(s=t[w])){delete a[s]}}}},resolveName:function(f){var d=this,g;if(!(f in d.nameToAliases)){if(!(g=d.aliasToName[f])){g=d.alternateToName[f]}}return g||f},select:function(o,q){var p=this,m={},h={excludes:m,exclude:function(){p.getNamesByExpression(arguments,m,true);return this}},j;for(j in o){h[j]=p.selectMethod(m,o[j],q||o)}return h},selectMethod:function(h,f,g){var j=this;return function(b){var a=Ext.Array.slice(arguments,1);a.unshift(j.getNamesByExpression(b,h));return f.apply(g,a)}},setPath:Ext.Function.flexSetter(function(f,g){var d=this;d.paths[f]=g;d.names.push(f);d.prefixes=null;return d}),_compareNames:function(f,g){var d=f.length-g.length;if(!d){d=(f<g)?-1:1}return d}};Ext.ClassManager=(function(C,H,A,N,E){var Q=Ext.Class.makeCtor,L=[],K={Ext:{name:"Ext",value:Ext}},P=Ext.apply(new Ext.Inventory(),{classes:{},classState:{},existCache:{},instantiators:[],isCreated:function(a){if(P.classes[a]||P.existCache[a]){return true}if(!P.lookupName(a,false)){return false}P.triggerCreated(a);return true},createdListeners:[],nameCreatedListeners:{},existsListeners:[],nameExistsListeners:{},overrideMap:{},triggerCreated:function(b,a){P.existCache[b]=a||1;P.classState[b]+=40;P.notify(b,P.createdListeners,P.nameCreatedListeners)},onCreated:function(c,a,b){P.addListener(c,a,b,P.createdListeners,P.nameCreatedListeners)},notify:function(j,g,c){var b=P.getAlternatesByName(j),h=[j],p,m,a,o,d,f;for(p=0,m=g.length;p<m;p++){d=g[p];d.fn.call(d.scope,j)}while(h){for(p=0,m=h.length;p<m;p++){f=h[p];g=c[f];if(g){for(a=0,o=g.length;a<o;a++){d=g[a];d.fn.call(d.scope,f)}delete c[f]}}h=b;b=null}},addListener:function(c,d,g,h,a){if(Ext.isArray(g)){c=Ext.Function.createBarrier(g.length,c,d);for(f=0;f<g.length;f++){this.addListener(c,null,g[f],h,a)}return}var f,b={fn:c,scope:d};if(g){if(this.isCreated(g)){c.call(d,g);return}if(!a[g]){a[g]=[]}a[g].push(b)}else{h.push(b)}},$namespaceCache:K,addRootNamespaces:function(a){for(var b in a){K[b]={name:b,value:a[b]}}},clearNamespaceCache:function(){L.length=0;for(var a in K){if(!K[a].value){delete K[a]}}},getNamespaceEntry:function(a){if(typeof a!=="string"){return a}var c=K[a],b;if(!c){b=a.lastIndexOf(".");if(b<0){c={name:a}}else{c={name:a.substring(b+1),parent:P.getNamespaceEntry(a.substring(0,b))}}K[a]=c}return c},lookupName:function(g,c){var d=P.getNamespaceEntry(g),h=Ext.global,f=0,b,a;for(b=d;b;b=b.parent){L[f++]=b}while(h&&f-->0){b=L[f];a=h;h=b.value||h[b.name];if(!h&&c){a[b.name]=h={}}}return h},setNamespace:function(a,c){var d=P.getNamespaceEntry(a),b=Ext.global;if(d.parent){b=P.lookupName(d.parent,true)}b[d.name]=c;return c},setXType:function(h,b){var j=h.$className,c=j?h:P.get(j=h),g=c.prototype,f=g.xtypes,a=g.xtypesChain,d=g.xtypesMap;if(!g.hasOwnProperty("xtypes")){g.xtypes=f=[];g.xtypesChain=a=a?a.slice(0):[];g.xtypesMap=d=Ext.apply({},d)}P.addAlias(j,"widget."+b,true);f.push(b);a.push(b);d[b]=true},set:function(b,c){var a=P.getName(c);P.classes[b]=P.setNamespace(b,c);if(a&&a!==b){P.addAlternate(a,b)}return P},get:function(a){return P.classes[a]||P.lookupName(a,false)},addNameAliasMappings:function(a){P.addAlias(a)},addNameAlternateMappings:function(a){P.addAlternate(a)},getByAlias:function(a){return P.get(P.getNameByAlias(a))},getByConfig:function(a,d){var c=a.xclass,b;if(c){b=c}else{b=a.xtype;if(b){d="widget."}else{b=a.type}b=P.getNameByAlias(d+b)}return P.get(b)},getName:function(a){return a&&a.$className||""},getClass:function(a){return a&&a.self||null},create:function(a,c,b){var d=Q(a);if(typeof c==="function"){c=c(d)}c.$className=a;return new C(d,c,function(){var f=c.postprocessors||P.defaultPostprocessors,j=P.postprocessors,h=[],m,r,o,s,p,q,g;delete c.postprocessors;for(r=0,o=f.length;r<o;r++){m=f[r];if(typeof m==="string"){m=j[m];q=m.properties;if(q===true){h.push(m.fn)}else{if(q){for(s=0,p=q.length;s<p;s++){g=q[s];if(c.hasOwnProperty(g)){h.push(m.fn);break}}}}}else{h.push(m)}}c.postprocessors=h;c.createdFn=b;P.processCreate(a,this,c)})},processCreate:function(f,a,b){var c=this,d=b.postprocessors.shift(),g=b.createdFn;if(!d){if(f){c.set(f,a)}delete a._classHooks;if(g){g.call(a,a)}if(f){c.triggerCreated(f)}return}if(d.call(c,f,a,b,c.processCreate)!==false){c.processCreate(f,a,b)}},createOverride:function(p,a,c){var m=this,j=a.override,g=a.requires,b=a.uses,q=a.mixins,f,h=1,o,d=function(){var r,s,t,u,v;if(!o){s=g?g.slice(0):[];if(q){if(!(f=q instanceof Array)){for(u in q){if(Ext.isString(r=q[u])){s.push(r)}}}else{for(t=0,v=q.length;t<v;++t){if(Ext.isString(r=q[t])){s.push(r)}}}}o=true;if(s.length){Ext.require(s,d);return}}if(f){for(t=0,v=q.length;t<v;++t){if(Ext.isString(r=q[t])){q[t]=Ext.ClassManager.get(r)}}}else{if(q){for(u in q){if(Ext.isString(r=q[u])){q[u]=Ext.ClassManager.get(r)}}}}r=m.get(j);delete a.override;delete a.compatibility;delete a.requires;delete a.uses;Ext.override(r,a);Ext.Loader.history.push(p);if(b){Ext.Loader.addUsedClasses(b)}if(c){c.call(r,r)}};P.overrideMap[p]=true;if("compatibility" in a&&Ext.isString(h=a.compatibility)){h=Ext.checkVersion(h)}if(h){m.onCreated(d,m,j)}m.triggerCreated(p,2);return m},instantiateByAlias:function(){var a=arguments[0],b=A.call(arguments),c=this.getNameByAlias(a);b[0]=c;return Ext.create.apply(Ext,b)},instantiate:function(){return Ext.create.apply(Ext,arguments)},dynInstantiate:function(a,b){b=N(b,true);b.unshift(a);return Ext.create.apply(Ext,b)},getInstantiator:function(d){var f=this.instantiators,b,a,c;b=f[d];if(!b){a=d;c=[];for(a=0;a<d;a++){c.push("a["+a+"]")}b=f[d]=new Function("c","a","return new c("+c.join(",")+")")}return b},postprocessors:{},defaultPostprocessors:[],registerPostprocessor:function(a,b,f,d,c){if(!d){d="last"}if(!f){f=[a]}this.postprocessors[a]={name:a,properties:f||false,fn:b};this.setDefaultPostprocessorPosition(a,d,c);return this},setDefaultPostprocessors:function(a){this.defaultPostprocessors=N(a);return this},setDefaultPostprocessorPosition:function(a,b,d){var f=this.defaultPostprocessors,c;if(typeof b==="string"){if(b==="first"){f.unshift(a);return this}else{if(b==="last"){f.push(a);return this}}b=(b==="after")?1:-1}c=Ext.Array.indexOf(f,d);if(c!==-1){Ext.Array.splice(f,Math.max(0,c+b),0,a)}return this}});P.registerPostprocessor("alias",function(g,a,b){var f=Ext.Array.from(b.alias),d,c;for(d=0,c=f.length;d<c;d++){H=f[d];this.addAlias(a,H)}},["xtype","alias"]);P.registerPostprocessor("singleton",function(a,c,b,d){if(b.singleton){d.call(this,a,new c(),b)}else{return true}return false});P.registerPostprocessor("alternateClassName",function(a,g,c){var f=c.alternateClassName,h,d,b;if(!(f instanceof Array)){f=[f]}for(h=0,d=f.length;h<d;h++){b=f[h];this.set(b,g)}});P.registerPostprocessor("debugHooks",function(a,c,d){var b=c.isInstance?c.self:c;delete b.prototype.debugHooks});P.registerPostprocessor("deprecated",function(a,c,d){var b=c.isInstance?c.self:c;b.addDeprecations(d.deprecated);delete b.prototype.deprecated});Ext.apply(Ext,{create:function(){var d=arguments[0],c=typeof d,a=A.call(arguments,1),b;if(c==="function"){b=d}else{if(c!=="string"&&a.length===0){a=[d];if(!(d=d.xclass)){d=a[0].xtype;if(d){d="widget."+d}}}d=P.resolveName(d);b=P.get(d)}if(!b){Ext.syncRequire(d);b=P.get(d)}return P.getInstantiator(a.length)(b,a)},widget:function(g,a){var b=g,f,c,d;if(typeof b!=="string"){a=g;b=a.xtype;c=a.xclass}else{a=a||{}}if(a.isComponent){return a}if(!c){f="widget."+b;c=P.getNameByAlias(f)}if(c){d=P.get(c)}if(!d){return Ext.create(c||f,a)}return new d(a)},createByAlias:H(P,"instantiateByAlias"),define:function(a,c,b){if(c.override){P.classState[a]=20;return P.createOverride.apply(P,arguments)}P.classState[a]=10;return P.create.apply(P,arguments)},undefine:function(f){var d=P.classes;delete d[f];delete P.existCache[f];delete P.classState[f];P.removeName(f);var c=P.getNamespaceEntry(f),a=c.parent?P.lookupName(c.parent,false):Ext.global;if(a){try{delete a[c.name]}catch(b){a[c.name]=undefined}}},getClassName:H(P,"getName"),getDisplayName:function(a){if(a){if(a.displayName){return a.displayName}if(a.$name&&a.$class){return Ext.getClassName(a.$class)+"#"+a.$name}if(a.$className){return a.$className}}return"Anonymous"},getClass:H(P,"getClass"),namespace:function(){var b=E,a;for(a=arguments.length;a-->0;){b=P.lookupName(arguments[a],true)}return b}});Ext.addRootNamespaces=P.addRootNamespaces;Ext.createWidget=Ext.widget;Ext.ns=Ext.namespace;C.registerPreprocessor("className",function(b,a){if("$className" in a){b.$className=a.$className}},true,"first");C.registerPreprocessor("alias",function(h,r){var m=h.prototype,c=N(r.xtype),f=N(r.alias),g="widget.",j=g.length,q=Array.prototype.slice.call(m.xtypesChain||[]),b=Ext.merge({},m.xtypesMap||{}),a,o,p,d;for(a=0,o=f.length;a<o;a++){p=f[a];if(p.substring(0,j)===g){d=p.substring(j);Ext.Array.include(c,d)}}h.xtype=r.xtype=c[0];r.xtypes=c;for(a=0,o=c.length;a<o;a++){d=c[a];if(!b[d]){b[d]=true;q.push(d)}}r.xtypesChain=q;r.xtypesMap=b;Ext.Function.interceptAfter(r,"onClassCreated",function(){var u=m.mixins,s,t;for(s in u){if(u.hasOwnProperty(s)){t=u[s];c=t.xtypes;if(c){for(a=0,o=c.length;a<o;a++){d=c[a];if(!b[d]){b[d]=true;q.push(d)}}}}}});for(a=0,o=c.length;a<o;a++){d=c[a];Ext.Array.include(f,g+d)}r.alias=f},["xtype","alias"]);if(Ext.manifest){var M=Ext.manifest,B=M.classes,F=M.paths,D={},J={},O,I,z,G,R;if(F){if(M.bootRelative){R=Ext.Boot.baseUrl;for(G in F){if(F.hasOwnProperty(G)){F[G]=R+F[G]}}}P.setPath(F)}if(B){for(O in B){J[O]=[];D[O]=[];I=B[O];if(I.alias){D[O]=I.alias}if(I.alternates){J[O]=I.alternates}}}P.addAlias(D);P.addAlternate(J)}return P}(Ext.Class,Ext.Function.alias,Array.prototype.slice,Ext.Array.from,Ext.global));(Ext.env||(Ext.env={})).Browser=function(C,I){var B=this,V=Ext.Boot.browserPrefixes,T=Ext.Boot.browserNames,U=B.enginePrefixes,N=B.engineNames,F=C.match(new RegExp("((?:"+Ext.Object.getValues(V).join(")|(?:")+"))([\\w\\._]+)")),P=C.match(new RegExp("((?:"+Ext.Object.getValues(U).join(")|(?:")+"))([\\w\\._]+)")),G=T.other,D=N.other,L="",Q="",S="",O=false,H,J,M,K,E;B.userAgent=C;if(/Edge\//.test(C)){F=C.match(/(Edge\/)([\w.]+)/)}if(F){G=T[Ext.Object.getKey(V,F[1])];if(G==="Safari"&&/^Opera/.test(C)){G="Opera"}L=new Ext.Version(F[2])}if(P){D=N[Ext.Object.getKey(U,P[1])];Q=new Ext.Version(P[2])}if(D==="Trident"&&G!=="IE"){G="IE";var R=C.match(/.*rv:(\d+.\d+)/);if(R&&R.length){R=R[1];L=new Ext.Version(R)}}if(G&&L){Ext.setVersion(G,L)}if(C.match(/FB/)&&G==="Other"){G=T.safari;D=N.webkit}if(C.match(/Android.*Chrome/g)){G="ChromeMobile"}if(C.match(/OPR/)){G="Opera";F=C.match(/OPR\/(\d+.\d+)/);L=new Ext.Version(F[1])}Ext.apply(this,{engineName:D,engineVersion:Q,name:G,version:L});this.setFlag(G,true,I);if(L){S=L.getMajor()||"";if(B.is.IE){S=parseInt(S,10);M=document.documentMode;if(M===7||(S===7&&M!==8&&M!==9&&M!==10)){S=7}else{if(M===8||(S===8&&M!==8&&M!==9&&M!==10)){S=8}else{if(M===9||(S===9&&M!==7&&M!==8&&M!==10)){S=9}else{if(M===10||(S===10&&M!==7&&M!==8&&M!==9)){S=10}else{if(M===11||(S===11&&M!==7&&M!==8&&M!==9&&M!==10)){S=11}}}}}E=Math.max(S,Ext.Boot.maxIEVersion);for(H=7;H<=E;++H){J="isIE"+H;if(S<=H){Ext[J+"m"]=true}if(S===H){Ext[J]=true}if(S>=H){Ext[J+"p"]=true}}}if(B.is.Opera&&parseInt(S,10)<=12){Ext.isOpera12m=true}Ext.chromeVersion=Ext.isChrome?S:0;Ext.firefoxVersion=Ext.isFirefox?S:0;Ext.ieVersion=Ext.isIE?S:0;Ext.operaVersion=Ext.isOpera?S:0;Ext.safariVersion=Ext.isSafari?S:0;Ext.webKitVersion=Ext.isWebKit?S:0;this.setFlag(G+S,true,I);this.setFlag(G+L.getShortVersion())}for(H in T){if(T.hasOwnProperty(H)){K=T[H];this.setFlag(K,G===K)}}this.setFlag(K);if(Q){this.setFlag(D+(Q.getMajor()||""));this.setFlag(D+Q.getShortVersion())}for(H in N){if(N.hasOwnProperty(H)){K=N[H];this.setFlag(K,D===K,I)}}this.setFlag("Standalone",!!navigator.standalone);this.setFlag("Ripple",!!document.getElementById("tinyhippos-injected")&&!Ext.isEmpty(window.top.ripple));this.setFlag("WebWorks",!!window.blackberry);if(window.PhoneGap!==undefined||window.Cordova!==undefined||window.cordova!==undefined){O=true;this.setFlag("PhoneGap");this.setFlag("Cordova")}if(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)(?!.*FBAN)/i.test(C)){O=true}this.setFlag("WebView",O);this.isStrict=Ext.isStrict=document.compatMode==="CSS1Compat";this.isSecure=Ext.isSecure;this.identity=G+S+(this.isStrict?"Strict":"Quirks")};Ext.env.Browser.prototype={constructor:Ext.env.Browser,engineNames:{webkit:"WebKit",gecko:"Gecko",presto:"Presto",trident:"Trident",other:"Other"},enginePrefixes:{webkit:"AppleWebKit/",gecko:"Gecko/",presto:"Presto/",trident:"Trident/"},styleDashPrefixes:{WebKit:"-webkit-",Gecko:"-moz-",Trident:"-ms-",Presto:"-o-",Other:""},stylePrefixes:{WebKit:"Webkit",Gecko:"Moz",Trident:"ms",Presto:"O",Other:""},propertyPrefixes:{WebKit:"webkit",Gecko:"moz",Trident:"ms",Presto:"o",Other:""},is:function(b){return !!this.is[b]},name:null,version:null,engineName:null,engineVersion:null,setFlag:function(f,g,d){if(g===undefined){g=true}this.is[f]=g;this.is[f.toLowerCase()]=g;if(d){Ext["is"+f]=g}return this},getStyleDashPrefix:function(){return this.styleDashPrefixes[this.engineName]},getStylePrefix:function(){return this.stylePrefixes[this.engineName]},getVendorProperyName:function(d){var c=this.propertyPrefixes[this.engineName];if(c.length>0){return c+Ext.String.capitalize(d)}return d},getPreferredTranslationMethod:function(b){if(typeof b==="object"&&"translationMethod" in b&&b.translationMethod!=="auto"){return b.translationMethod}else{return"csstransform"}}};(function(b){Ext.browser=new Ext.env.Browser(b,true);Ext.userAgent=b.toLowerCase();Ext.SSL_SECURE_URL=Ext.isSecure&&Ext.isIE?"javascript:''":"about:blank"}(Ext.global.navigator.userAgent));Ext.env.OS=function(H,F,v){var w=this,y=Ext.Boot.osNames,D=Ext.Boot.osPrefixes,G,z="",B=w.is,E,A,C,t,u;v=v||Ext.browser;for(E in D){if(D.hasOwnProperty(E)){A=D[E];C=H.match(new RegExp("(?:"+A+")([^\\s;]+)"));if(C){G=y[E];u=C[1];if(u&&u==="HTC_"){z=new Ext.Version("2.3")}else{if(u&&u==="Silk/"){z=new Ext.Version("2.3")}else{z=new Ext.Version(C[C.length-1])}}break}}}if(!G){G=y[(H.toLowerCase().match(/mac|win|linux/)||["other"])[0]];z=new Ext.Version("")}this.name=G;this.version=z;if(F){this.setFlag(F.replace(/ simulator$/i,""))}this.setFlag(G);if(z){this.setFlag(G+(z.getMajor()||""));this.setFlag(G+z.getShortVersion())}for(E in y){if(y.hasOwnProperty(E)){t=y[E];if(!B.hasOwnProperty(G)){this.setFlag(t,(G===t))}}}if(this.name==="iOS"&&window.screen.height===568){this.setFlag("iPhone5")}if(v.is.Safari||v.is.Silk){if(this.is.Android2||this.is.Android3||v.version.shortVersion===501){v.setFlag("AndroidStock")}if(this.is.Android4){v.setFlag("AndroidStock");v.setFlag("AndroidStock4")}}};Ext.env.OS.prototype={constructor:Ext.env.OS,is:function(b){return !!this[b]},name:null,version:null,setFlag:function(d,c){if(c===undefined){c=true}if(this.flags){this.flags[d]=c}this.is[d]=c;this.is[d.toLowerCase()]=c;return this}};(function(){var w=Ext.global.navigator,q=w.userAgent,r=Ext.env.OS,s=(Ext.is||(Ext.is={})),p,t,v;r.prototype.flags=s;Ext.os=p=new r(q,w.platform);t=p.name;Ext["is"+t]=true;Ext.isMac=s.Mac=s.MacOS;var o=window.location.search.match(/deviceType=(Tablet|Phone)/),u=window.deviceType;if(o&&o[1]){v=o[1]}else{if(u==="iPhone"){v="Phone"}else{if(u==="iPad"){v="Tablet"}else{if(!p.is.Android&&!p.is.iOS&&!p.is.WindowsPhone&&/Windows|Linux|MacOS/.test(t)){v="Desktop";Ext.browser.is.WebView=!!Ext.browser.is.Ripple}else{if(p.is.iPad||p.is.RIMTablet||p.is.Android3||Ext.browser.is.Silk||(p.is.Android&&q.search(/mobile/i)===-1)){v="Tablet"}else{v="Phone"}}}}}p.setFlag(v,true);p.deviceType=v;delete r.prototype.flags}());Ext.feature={has:function(b){return !!this.has[b]},testElements:{},getTestElement:function(d,c){if(d===undefined){d="div"}else{if(typeof d!=="string"){return d}}if(c){return document.createElement(d)}if(!this.testElements[d]){this.testElements[d]=document.createElement(d)}return this.testElements[d]},isStyleSupported:function(j,f){var h=this.getTestElement(f).style,g=Ext.String.capitalize(j);if(typeof h[j]!=="undefined"||typeof h[Ext.browser.getStylePrefix(j)+g]!=="undefined"){return true}return false},isStyleSupportedWithoutPrefix:function(d,f){var g=this.getTestElement(f).style;if(typeof g[d]!=="undefined"){return true}return false},isEventSupported:function(o,h){if(h===undefined){h=window}var j=this.getTestElement(h),g="on"+o.toLowerCase(),m=(g in j);if(!m){if(j.setAttribute&&j.removeAttribute){j.setAttribute(g,"");m=typeof j[g]==="function";if(typeof j[g]!=="undefined"){j[g]=undefined}j.removeAttribute(g)}}return m},getStyle:function(j,f){var g=j.ownerDocument.defaultView,h=(g?g.getComputedStyle(j,null):j.currentStyle);return(h||j.style)[f]},getSupportedPropertyName:function(d,f){var g=Ext.browser.getVendorProperyName(f);if(g in d){return g}else{if(f in d){return f}}return null},detect:function(y){var w=this,u=document,B=w.toRun||w.tests,C=B.length,F=u.createElement("div"),E=[],H=Ext.supports,t=w.has,G,z,A,D,v;F.innerHTML='<div style="height:30px;width:50px;"><div style="height:20px;width:20px;"></div></div><div style="width: 200px; height: 200px; position: relative; padding: 5px;"><div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></div></div><div style="position: absolute; left: 10%; top: 10%;"></div><div style="float:left; background-color:transparent;"></div>';if(y){u.body.appendChild(F)}D=w.preDetected[Ext.browser.identity]||[];while(C--){A=B[C];v=D[C];G=A.name;z=A.names;if(v===undefined){if(!y&&A.ready){E.push(A);continue}v=A.fn.call(w,u,F)}if(G){H[G]=t[G]=v}else{if(z){while(z.length){G=z.pop();H[G]=t[G]=v}}}}if(y){u.body.removeChild(F)}w.toRun=E},report:function(){var d=[],f=this.tests.length,g;for(g=0;g<f;++g){d.push(this.has[this.tests[g].name]?1:0)}Ext.log(Ext.browser.identity+": ["+d.join(",")+"]")},preDetected:{},tests:[{name:"CloneNodeCopiesExpando",fn:function(){var b=document.createElement("div");b.expandoProp={};return b.cloneNode().expandoProp===b.expandoProp}},{name:"CSSPointerEvents",fn:function(b){return"pointerEvents" in b.documentElement.style}},{name:"CSS3BoxShadow",fn:function(b){return"boxShadow" in b.documentElement.style||"WebkitBoxShadow" in b.documentElement.style||"MozBoxShadow" in b.documentElement.style}},{name:"CSS3NegationSelector",fn:function(c){try{c.querySelectorAll("foo:not(bar)")}catch(d){return false}return true}},{name:"ClassList",fn:function(b){return !!b.documentElement.classList}},{name:"Canvas",fn:function(){var b=this.getTestElement("canvas");return !!(b&&b.getContext&&b.getContext("2d"))}},{name:"Svg",fn:function(b){return !!(b.createElementNS&&!!b.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)}},{name:"Vml",fn:function(){var c=this.getTestElement(),d=false;c.innerHTML="<!--[if vml]><br><![endif]-->";d=(c.childNodes.length===1);c.innerHTML="";return d}},{name:"touchScroll",fn:function(){var b=0;if(Ext.os.is.Desktop&&(navigator.maxTouchPoints||navigator.msMaxTouchPoints)){b=1}else{if(Ext.supports.Touch){b=2}}return b}},{name:"Touch",fn:function(){var b=navigator.msMaxTouchPoints||navigator.maxTouchPoints;if(Ext.browser.is.Chrome&&Ext.browser.version.isLessThanOrEqual(39)){return(Ext.supports.TouchEvents&&b!==1)||b>1}else{return Ext.supports.TouchEvents||b>0}}},{name:"TouchEvents",fn:function(){return this.isEventSupported("touchend")}},{name:"PointerEvents",fn:function(){return navigator.pointerEnabled}},{name:"MSPointerEvents",fn:function(){return navigator.msPointerEnabled}},{name:"Orientation",fn:function(){return("orientation" in window)&&this.isEventSupported("orientationchange")}},{name:"OrientationChange",fn:function(){return this.isEventSupported("orientationchange")}},{name:"DeviceMotion",fn:function(){return this.isEventSupported("devicemotion")}},{names:["Geolocation","GeoLocation"],fn:function(){return"geolocation" in window.navigator}},{name:"SqlDatabase",fn:function(){return"openDatabase" in window}},{name:"WebSockets",fn:function(){return"WebSocket" in window}},{name:"Range",fn:function(){return !!document.createRange}},{name:"CreateContextualFragment",fn:function(){var b=!!document.createRange?document.createRange():false;return b&&!!b.createContextualFragment}},{name:"History",fn:function(){return("history" in window&&"pushState" in window.history)}},{name:"Css3dTransforms",fn:function(){return this.has("CssTransforms")&&this.isStyleSupported("perspective")}},{name:"CssTransforms",fn:function(){return this.isStyleSupported("transform")}},{name:"CssTransformNoPrefix",fn:function(){return this.isStyleSupportedWithoutPrefix("transform")}},{name:"CssAnimations",fn:function(){return this.isStyleSupported("animationName")}},{names:["CssTransitions","Transitions"],fn:function(){return this.isStyleSupported("transitionProperty")}},{names:["Audio","AudioTag"],fn:function(){return !!this.getTestElement("audio").canPlayType}},{name:"Video",fn:function(){return !!this.getTestElement("video").canPlayType}},{name:"LocalStorage",fn:function(){try{if("localStorage" in window&&window.localStorage!==null){localStorage.setItem("sencha-localstorage-test","test success");localStorage.removeItem("sencha-localstorage-test");return true}}catch(b){}return false}},{name:"XHR2",fn:function(){return window.ProgressEvent&&window.FormData&&window.XMLHttpRequest&&("withCredentials" in new XMLHttpRequest())}},{name:"XHRUploadProgress",fn:function(){if(window.XMLHttpRequest&&!Ext.browser.is.AndroidStock){var b=new XMLHttpRequest();return b&&("upload" in b)&&("onprogress" in b.upload)}return false}},{name:"NumericInputPlaceHolder",fn:function(){return !(Ext.browser.is.AndroidStock4&&Ext.os.version.getMinor()<2)}},{name:"matchesSelector",fn:function(){var g=document.documentElement,j="matches",m="webkitMatchesSelector",h="msMatchesSelector",o="mozMatchesSelector";return g[j]?j:g[m]?m:g[h]?h:g[o]?o:null}},{name:"RightMargin",ready:true,fn:function(d,g){var f=d.defaultView;return !(f&&f.getComputedStyle(g.firstChild.firstChild,null).marginRight!=="0px")}},{name:"DisplayChangeInputSelectionBug",fn:function(){var b=Ext.webKitVersion;return 0<b&&b<533}},{name:"DisplayChangeTextAreaSelectionBug",fn:function(){var b=Ext.webKitVersion;return 0<b&&b<534.24}},{name:"TransparentColor",ready:true,fn:function(d,g,f){f=d.defaultView;return !(f&&f.getComputedStyle(g.lastChild,null).backgroundColor!=="transparent")}},{name:"ComputedStyle",ready:true,fn:function(d,g,f){f=d.defaultView;return f&&f.getComputedStyle}},{name:"Float",fn:function(b){return"cssFloat" in b.documentElement.style}},{name:"CSS3BorderRadius",ready:true,fn:function(h){var f=["borderRadius","BorderRadius","MozBorderRadius","WebkitBorderRadius","OBorderRadius","KhtmlBorderRadius"],j=false,g;for(g=0;g<f.length;g++){if(h.documentElement.style[f[g]]!==undefined){j=true}}return j&&!Ext.isIE9}},{name:"CSS3LinearGradient",fn:function(r,w){var p="background-image:",q="-webkit-gradient(linear, left top, right bottom, from(black), to(white))",s="linear-gradient(left top, black, white)",t="-moz-"+s,v="-ms-"+s,u="-o-"+s,o=[p+q,p+s,p+t,p+v,p+u];w.style.cssText=o.join(";");return((""+w.style.backgroundImage).indexOf("gradient")!==-1)&&!Ext.isIE9}},{name:"MouseEnterLeave",fn:function(b){return("onmouseenter" in b.documentElement&&"onmouseleave" in b.documentElement)}},{name:"MouseWheel",fn:function(b){return("onmousewheel" in b.documentElement)}},{name:"Opacity",fn:function(d,c){if(Ext.isIE8){return false}c.firstChild.style.cssText="opacity:0.73";return c.firstChild.style.opacity=="0.73"}},{name:"Placeholder",fn:function(b){return"placeholder" in b.createElement("input")}},{name:"Direct2DBug",fn:function(b){return Ext.isString(b.documentElement.style.msTransformOrigin)&&Ext.isIE9m}},{name:"BoundingClientRect",fn:function(b){return"getBoundingClientRect" in b.documentElement}},{name:"RotatedBoundingClientRect",ready:true,fn:function(j){var h=j.body,g=false,m=j.createElement("div"),o=m.style;if(m.getBoundingClientRect){o.position="absolute";o.top="0";o.WebkitTransform=o.MozTransform=o.msTransform=o.OTransform=o.transform="rotate(90deg)";o.width="100px";o.height="30px";h.appendChild(m);g=m.getBoundingClientRect().height!==100;h.removeChild(m)}return g}},{name:"ChildContentClearedWhenSettingInnerHTML",ready:true,fn:function(){var d=this.getTestElement(),c;d.innerHTML="<div>a</div>";c=d.firstChild;d.innerHTML="<div>b</div>";return c.innerHTML!=="a"}},{name:"IncludePaddingInWidthCalculation",ready:true,fn:function(d,c){return c.childNodes[1].firstChild.offsetWidth===210}},{name:"IncludePaddingInHeightCalculation",ready:true,fn:function(d,c){return c.childNodes[1].firstChild.offsetHeight===210}},{name:"TextAreaMaxLength",fn:function(b){return("maxlength" in b.createElement("textarea"))}},{name:"GetPositionPercentage",ready:true,fn:function(d,c){return Ext.feature.getStyle(c.childNodes[2],"left")==="10%"}},{name:"PercentageHeightOverflowBug",ready:true,fn:function(h){var g=false,j,f;if(Ext.getScrollbarSize().height){f=this.getTestElement();j=f.style;j.height="50px";j.width="50px";j.overflow="auto";j.position="absolute";f.innerHTML=['<div style="display:table;height:100%;">','<div style="width:51px;"></div>',"</div>"].join("");h.body.appendChild(f);if(f.firstChild.offsetHeight===50){g=true}h.body.removeChild(f)}return g}},{name:"xOriginBug",ready:true,fn:function(m,j){j.innerHTML='<div id="b1" style="height:100px;width:100px;direction:rtl;position:relative;overflow:scroll"><div id="b2" style="position:relative;width:100%;height:20px;"></div><div id="b3" style="position:absolute;width:20px;height:20px;top:0px;right:0px"></div></div>';var o=document.getElementById("b1").getBoundingClientRect(),g=document.getElementById("b2").getBoundingClientRect(),h=document.getElementById("b3").getBoundingClientRect();return(g.left!==o.left&&h.right!==o.right)}},{name:"ScrollWidthInlinePaddingBug",ready:true,fn:function(h){var g=false,j,f;f=h.createElement("div");j=f.style;j.height="50px";j.width="50px";j.padding="10px";j.overflow="hidden";j.position="absolute";f.innerHTML='<span style="display:inline-block;zoom:1;height:60px;width:60px;"></span>';h.body.appendChild(f);if(f.scrollWidth===70){g=true}h.body.removeChild(f);return g}},{name:"rtlVertScrollbarOnRight",ready:true,fn:function(j,h){h.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:scroll"><div style="width:20px;height:200px;"></div></div>';var f=h.firstChild,g=f.firstChild;return(g.offsetLeft+g.offsetWidth!==f.offsetLeft+f.offsetWidth)}},{name:"rtlVertScrollbarOverflowBug",ready:true,fn:function(d,g){g.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:auto"><div style="width:95px;height:200px;"></div></div>';var f=g.firstChild;return f.clientHeight===f.offsetHeight}},{identity:"defineProperty",fn:function(){if(Ext.isIE8m){Ext.Object.defineProperty=Ext.emptyFn;return false}return true}},{identify:"nativeXhr",fn:function(){if(typeof XMLHttpRequest!=="undefined"){return true}XMLHttpRequest=function(){try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(b){return null}};return false}},{name:"SpecialKeyDownRepeat",fn:function(){return Ext.isWebKit?parseInt(navigator.userAgent.match(/AppleWebKit\/(\d+)/)[1],10)>=525:!((Ext.isGecko&&!Ext.isWindows)||(Ext.isOpera&&Ext.operaVersion<12))}},{name:"EmulatedMouseOver",fn:function(){return Ext.os.is.iOS}},{name:"Hashchange",fn:function(){var b=document.documentMode;return"onhashchange" in window&&(b===undefined||b>7)}},{name:"FixedTableWidthBug",ready:true,fn:function(){if(Ext.isIE8){return false}var d=document.createElement("div"),f=document.createElement("div"),g;d.setAttribute("style","display:table;table-layout:fixed;");f.setAttribute("style","display:table-cell;min-width:50px;");d.appendChild(f);document.body.appendChild(d);d.offsetWidth;d.style.width="25px";g=d.offsetWidth;document.body.removeChild(d);return g===50}},{name:"FocusinFocusoutEvents",fn:function(){return !Ext.isGecko}},{name:"AsyncFocusEvents",fn:function(){return Ext.asyncFocus=!!Ext.isIE}},{name:"accessibility",ready:true,fn:function(q){var o=q.body,p,t,s,m,u;function r(b){var a=[],f=0,c,g;if(b.indexOf("rgb(")!==-1){a=b.replace("rgb(","").replace(")","").split(", ")}else{if(b.indexOf("#")!==-1){c=b.length===7?/^#(\S\S)(\S\S)(\S\S)$/:/^#(\S)(\S)(\S)$/;g=b.match(c);if(g){a=["0x"+g[1],"0x"+g[2],"0x"+g[3]]}}}for(var d=0;d<a.length;d++){f+=parseInt(a[d])}return f}p=q.createElement("div");t=q.createElement("img");s=p.style;Ext.apply(s,{width:"2px",position:"absolute",clip:"rect(1px,1px,1px,1px)",borderWidth:"1px",borderStyle:"solid",borderTopTolor:"#f00",borderRightColor:"#ff0",backgroundColor:"#fff",backgroundImage:"url("+Ext.BLANK_IMAGE_URL+")"});t.alt="";t.src=Ext.BLANK_IMAGE_URL;p.appendChild(t);o.appendChild(p);s=p.currentStyle||p.style;u=s.backgroundImage;m={Images:t.offsetWidth===1&&t.readyState!=="uninitialized",BackgroundImages:!(u!==null&&(u==="none"||u==="url(invalid-url:)")),BorderColors:s.borderTopColor!==s.borderRightColor,LightOnDark:r(s.color)-r(s.backgroundColor)>0};Ext.supports.HighContrastMode=!m.BackgroundImages;o.removeChild(p);p=t=null;return m}},0]};Ext.feature.tests.pop();Ext.supports={};Ext.feature.detect();Ext.env.Ready={blocks:(location.search||"").indexOf("ext-pauseReadyFire")>0?1:0,bound:0,delay:1,firing:false,generation:0,listeners:[],nextId:0,sortGeneration:0,state:0,timer:null,bind:function(){var d=Ext.env.Ready,c=document;if(!d.bound){if(c.readyState==="complete"){d.onReadyEvent({type:c.readyState||"body"})}else{d.bound=1;if(Ext.browser.is.PhoneGap&&!Ext.os.is.Desktop){d.bound=2;c.addEventListener("deviceready",d.onReadyEvent,false)}c.addEventListener("DOMContentLoaded",d.onReadyEvent,false);window.addEventListener("load",d.onReadyEvent,false)}}},block:function(){++this.blocks;Ext.isReady=false},fireReady:function(){var b=Ext.env.Ready;if(!b.state){Ext._readyTime=Ext.ticks();Ext.isDomReady=true;b.state=1;Ext.feature.detect(true);if(!b.delay){b.handleReady()}else{if(navigator.standalone){b.timer=Ext.defer(function(){b.timer=null;b.handleReadySoon()},1)}else{b.handleReadySoon()}}}},handleReady:function(){var b=this;if(b.state===1){b.state=2;Ext._beforeReadyTime=Ext.ticks();b.invokeAll();Ext._afterReadyTime=Ext.ticks()}},handleReadySoon:function(d){var c=this;if(!c.timer){c.timer=Ext.defer(function(){c.timer=null;c.handleReady()},d||c.delay)}},invoke:function(c){var d=c.delay;if(d){Ext.defer(c.fn,d,c.scope)}else{if(Ext.elevateFunction){Ext.elevateFunction(c.fn,c.scope)}else{c.fn.call(c.scope)}}},invokeAll:function(){if(Ext.elevateFunction){Ext.elevateFunction(this.doInvokeAll,this)}else{this.doInvokeAll()}},doInvokeAll:function(){var d=this,f=d.listeners,g;if(!d.blocks){Ext.isReady=true}d.firing=true;while(f.length){if(d.sortGeneration!==d.generation){d.sortGeneration=d.generation;f.sort(d.sortFn)}g=f.pop();if(d.blocks&&!g.dom){f.push(g);break}d.invoke(g)}d.firing=false},makeListener:function(h,j,f){var g={fn:h,id:++this.nextId,scope:j,dom:false,priority:0};if(f){Ext.apply(g,f)}g.phase=g.dom?0:1;return g},on:function(o,g,h){var m=Ext.env.Ready,j=m.makeListener(o,g,h);if(m.state===2&&!m.firing&&(j.dom||!m.blocks)){m.invoke(j)}else{m.listeners.push(j);++m.generation;if(!m.bound){m.bind()}}},onReadyEvent:function(c){var d=Ext.env.Ready;if(Ext.elevateFunction){Ext.elevateFunction(d.doReadyEvent,d,arguments)}else{d.doReadyEvent(c)}},doReadyEvent:function(c){var d=this;if(d.bound>0){d.unbind();d.bound=-1}if(!d.state){d.fireReady()}},sortFn:function(a,b){return -((a.phase-b.phase)||(b.priority-a.priority)||(a.id-b.id))},unblock:function(){var b=this;if(b.blocks){if(!--b.blocks){if(b.state===2&&!b.firing){b.invokeAll()}}}},unbind:function(){var d=this,c=document;if(d.bound>1){c.removeEventListener("deviceready",d.onReadyEvent,false)}c.removeEventListener("DOMContentLoaded",d.onReadyEvent,false);window.removeEventListener("load",d.onReadyEvent,false)}};(function(){var b=Ext.env.Ready;if(Ext.isIE9m){Ext.apply(b,{scrollTimer:null,readyStatesRe:/complete/i,pollScroll:function(){var a=true;try{document.documentElement.doScroll("left")}catch(d){a=false}if(a&&document.body){b.onReadyEvent({type:"doScroll"})}else{b.scrollTimer=Ext.defer(b.pollScroll,20)}return a},bind:function(){if(b.bound){return}var f=document,a;try{a=window.frameElement===undefined}catch(g){}if(!a||!f.documentElement.doScroll){b.pollScroll=Ext.emptyFn}else{if(b.pollScroll()){return}}if(f.readyState==="complete"){b.onReadyEvent({type:"already "+(f.readyState||"body")})}else{f.attachEvent("onreadystatechange",b.onReadyStateChange);window.attachEvent("onload",b.onReadyEvent);b.bound=1}},unbind:function(){document.detachEvent("onreadystatechange",b.onReadyStateChange);window.detachEvent("onload",b.onReadyEvent);if(Ext.isNumber(b.scrollTimer)){clearTimeout(b.scrollTimer);b.scrollTimer=null}},onReadyStateChange:function(){var a=document.readyState;if(b.readyStatesRe.test(a)){b.onReadyEvent({type:a})}}})}Ext.onDocumentReady=function(g,h,a){var j={dom:true};if(a){Ext.apply(j,a)}b.on(g,h,j)};Ext.onReady=function(f,g,a){b.on(f,g,a)};Ext.onInternalReady=function(f,g,a){b.on(f,g,Ext.apply({priority:1000},a))};b.bind()}());Ext.Loader=(new function(){var F=this,H=Ext.ClassManager,B=Ext.Boot,E=Ext.Class,z=Ext.env.Ready,A=Ext.Function.alias,C=["extend","mixins","requires"],u={},y=[],G=[],D=[],J={},v={},w={enabled:true,scriptChainDelay:false,disableCaching:true,disableCachingParam:"_dc",paths:H.paths,preserveScripts:true,scriptCharset:undefined},I={disableCaching:true,disableCachingParam:true,preserveScripts:true,scriptChainDelay:"loadDelay"};Ext.apply(F,{isInHistory:u,isLoading:false,history:y,config:w,readyListeners:G,optionalRequires:D,requiresMap:J,hasFileLoadError:false,scriptsLoading:0,syncModeEnabled:false,missingQueue:v,init:function(){var d=document.getElementsByTagName("script"),m=d[d.length-1].src,o=m.substring(0,m.lastIndexOf("/")+1),a=Ext._classPathMetadata,p=Ext.Microloader,h=Ext.manifest,g,c,b,f,j;if(!H.getPath("Ext")){H.setPath("Ext",o+"src")}if(a){Ext._classPathMetadata=null;F.addClassPathMappings(a)}if(h){g=h.loadOrder;c=Ext.Boot.baseUrl;if(g&&h.bootRelative){for(b=g.length,f=0;f<b;f++){j=g[f];j.path=c+j.path}}}if(p){z.block();p.onMicroloaderReady(function(){z.unblock()})}},setConfig:Ext.Function.flexSetter(function(c,b){if(c==="paths"){F.setPath(b)}else{w[c]=b;var a=I[c];if(a){B.setConfig((a===true)?c:a,b)}}return F}),getConfig:function(a){return a?w[a]:w},setPath:function(){H.setPath.apply(H,arguments);return F},addClassPathMappings:function(a){H.setPath(a);return F},addBaseUrlClassPathMappings:function(b){for(var a in b){b[a]=B.baseUrl+b[a]}Ext.Loader.addClassPathMappings(b)},getPath:function(a){return H.getPath(a)},require:function(a,b,c,d){if(d){return F.exclude(d).require(a,b,c)}var f=H.getNamesByExpression(a);return F.load(f,b,c)},syncRequire:function(){var a=F.syncModeEnabled;F.syncModeEnabled=true;var b=F.require.apply(F,arguments);F.syncModeEnabled=a;return b},exclude:function(a){var b=H.select({require:function(d,f,c){return F.load(d,f,c)},syncRequire:function(h,f,g){var c=F.syncModeEnabled;F.syncModeEnabled=true;var d=F.load(h,f,g);F.syncModeEnabled=c;return d}});b.exclude(a);return b},load:function(m,a,o){if(a){if(a.length){a=F.makeLoadCallback(m,a)}a=a.bind(o||Ext.global)}var g=[],h=m.length,c,d,f,b=[],j=H.classState;for(d=0;d<h;++d){c=H.resolveName(m[d]);if(!H.isCreated(c)){g.push(c);v[c]=F.getPath(c);if(!j[c]){b.push(v[c])}}}f=g.length;if(f){F.missingCount+=f;H.onCreated(function(){if(a){Ext.callback(a,o,arguments)}F.checkReady()},F,g);if(!w.enabled){Ext.raise("Ext.Loader is not enabled, so dependencies cannot be resolved dynamically. Missing required class"+((g.length>1)?"es":"")+": "+g.join(", "))}if(b.length){F.loadScripts({url:b,_classNames:g})}else{F.checkReady()}}else{if(a){a.call(o)}F.checkReady()}if(F.syncModeEnabled){if(h===1){return H.get(m[0])}}return F},makeLoadCallback:function(b,a){return function(){var d=[],c=b.length;while(c-->0){d[c]=H.get(b[c])}return a.apply(this,d)}},onLoadFailure:function(){var b=this,a=b.onError;F.hasFileLoadError=true;--F.scriptsLoading;if(a){a.call(b.userScope,b)}F.checkReady()},onLoadSuccess:function(){var b=this,a=b.onLoad;--F.scriptsLoading;if(a){a.call(b.userScope,b)}F.checkReady()},onReady:function(a,b,d,c){if(d){z.on(a,b,c)}else{var f=z.makeListener(a,b,c);if(F.isLoading){G.push(f)}else{z.invoke(f)}}},addUsedClasses:function(a){var c,b,d;if(a){a=(typeof a==="string")?[a]:a;for(b=0,d=a.length;b<d;b++){c=a[b];if(typeof c==="string"&&!Ext.Array.contains(D,c)){D.push(c)}}}return F},triggerReady:function(){var b,a=D;if(F.isLoading&&a.length){D=[];F.require(a)}else{F.isLoading=false;G.sort(z.sortFn);while(G.length&&!F.isLoading){b=G.pop();z.invoke(b)}z.unblock()}},historyPush:function(a){if(a&&!u[a]&&!H.overrideMap[a]){u[a]=true;y.push(a)}return F},loadScripts:function(d){var f=Ext.manifest,c=f&&f.loadOrder,b=f&&f.loadOrderMap,a;++F.scriptsLoading;if(c&&!b){f.loadOrderMap=b=B.createLoadOrderMap(c)}F.checkReady();a=Ext.apply({loadOrder:c,loadOrderMap:b,charset:w.scriptCharset,success:F.onLoadSuccess,failure:F.onLoadFailure,sync:F.syncModeEnabled,_classNames:[]},d);a.userScope=a.scope;a.scope=a;B.load(a)},loadScriptsSync:function(a){var b=F.syncModeEnabled;F.syncModeEnabled=true;F.loadScripts({url:a});F.syncModeEnabled=b},loadScriptsSyncBasePrefix:function(a){var b=F.syncModeEnabled;F.syncModeEnabled=true;F.loadScripts({url:a,prependBaseUrl:true});F.syncModeEnabled=b},loadScript:function(a){var j=typeof a==="string",f=a instanceof Array,b=!f&&!j,m=b?a.url:a,g=b&&a.onError,d=b&&a.onLoad,c=b&&a.scope,h={url:m,scope:c,onLoad:d,onError:g,_classNames:[]};F.loadScripts(h)},flushMissingQueue:function(){var c,d,a=0,b=0;for(c in v){a++;d=v[c];if(H.isCreated(c)){delete v[c]}else{if(H.existCache[c]===2){delete v[c]}else{++b}}}this.missingCount=b},checkReady:function(){var a=F.isLoading,b;F.flushMissingQueue();b=F.missingCount+F.scriptsLoading;if(b&&!a){z.block();F.isLoading=!!b}else{if(!b&&a){F.triggerReady()}}}});Ext.require=A(F,"require");Ext.syncRequire=A(F,"syncRequire");Ext.exclude=A(F,"exclude");E.registerPreprocessor("loader",function(h,f,j,o){var t=this,a=[],s,L=H.getName(h),g,m,b,c,q,d,p,r;for(g=0,b=C.length;g<b;g++){d=C[g];if(f.hasOwnProperty(d)){p=f[d];if(typeof p==="string"){a.push(p)}else{if(p instanceof Array){for(m=0,c=p.length;m<c;m++){q=p[m];if(typeof q==="string"){a.push(q)}}}else{if(typeof p!=="function"){for(m in p){if(p.hasOwnProperty(m)){q=p[m];if(typeof q==="string"){a.push(q)}}}}}}}}if(a.length===0){return}if(L){J[L]=a}(L?F.exclude(L):F).require(a,function(){for(g=0,b=C.length;g<b;g++){d=C[g];if(f.hasOwnProperty(d)){p=f[d];if(typeof p==="string"){f[d]=H.get(p)}else{if(p instanceof Array){for(m=0,c=p.length;m<c;m++){q=p[m];if(typeof q==="string"){f[d][m]=H.get(q)}}}else{if(typeof p!=="function"){for(var K in p){if(p.hasOwnProperty(K)){q=p[K];if(typeof q==="string"){f[d][K]=H.get(q)}}}}}}}}o.call(t,h,f,j)});return false},true,"after","className");H.registerPostprocessor("uses",function(j,m,c){var o=Ext.manifest,h=o&&o.loadOrder,g=o&&o.classes,f,a,p,b,d,q;if(h){a=g[j];if(a&&!isNaN(d=a.idx)){p=h[d];f=p.uses;q={};for(b=f.length,d=0;d<b;d++){q[f[d]]=true}f=Ext.Boot.getPathsFromIndexes(q,h,true);if(f.length>0){F.loadScripts({url:f,sequential:true})}}}if(c.uses){f=c.uses;F.addUsedClasses(f)}});H.onCreated(F.historyPush);F.init()}());Ext._endTime=Ext.ticks();if(Ext._beforereadyhandler){Ext._beforereadyhandler()}(Ext.cmd.derive("Ext.Mixin",Ext.Base,function(b){return{statics:{addHook:function(m,q,s,r){var o=Ext.isFunction(m),p=function(){var f=arguments,d=o?m:r[m],c=this.callParent(f);d.apply(this,f);return c},a=q.hasOwnProperty(s)&&q[s];if(o){m.$previous=Ext.emptyFn}p.$name=s;p.$owner=q.self;if(a){p.$previous=a.$previous;a.$previous=p}else{q[s]=p}}},onClassExtended:function(a,w){var u=w.mixinConfig,r=w.xhooks,s=a.superclass,v=w.onClassMixedIn,z,t,q,y;if(r){delete w.xhooks;(u||(w.mixinConfig=u={})).on=r}if(u){z=s.mixinConfig;if(z){w.mixinConfig=u=Ext.merge({},z,u)}w.mixinId=u.id;t=u.before;q=u.after;r=u.on;y=u.extended}if(t||q||r||y){w.onClassMixedIn=function(c){var g=this.prototype,d=c.prototype,f;if(t){Ext.Object.each(t,function(j,h){c.addMember(j,function(){if(g[h].apply(this,arguments)!==false){return this.callParent(arguments)}})})}if(q){Ext.Object.each(q,function(j,h){c.addMember(j,function(){var m=this.callParent(arguments);g[h].apply(this,arguments);return m})})}if(r){for(f in r){b.addHook(r[f],d,f,g)}}if(y){c.onExtended(function(){var h=Ext.Array.slice(arguments,0);h.unshift(c);return y.apply(this,h)},this)}if(v){v.apply(this,arguments)}}}}}},0,0,0,0,0,0,[Ext,"Mixin"],0));Ext.util=Ext.util||{};Ext.util.DelayedTask=function(s,t,m,p,q){var r=this,o,u=function(){var a=Ext.GlobalEvents;clearInterval(r.id);r.id=null;s.apply(t,m||[]);if(q!==false&&a.hasListeners.idle){a.fireEvent("idle")}};p=typeof p==="boolean"?p:true;r.id=null;r.delay=function(d,b,c,a){if(p){r.cancel()}if(typeof d==="number"){o=d}s=b||s;t=c||t;m=a||m;if(!r.id){r.id=Ext.interval(u,o)}};r.cancel=function(){if(r.id){clearInterval(r.id);r.id=null}}};(Ext.cmd.derive("Ext.util.Event",Ext.Base,function(){var h=Array.prototype.slice,g=Ext.Array.insert,j=Ext.Array.toArray,f={};return{isEvent:true,suspended:0,noOptions:{},constructor:function(a,b){this.name=b;this.observable=a;this.listeners=[]},addListener:function(J,R,Q,b,E){var I=this,M=false,F=I.observable,N=I.name,D,O,K,c,H,d,P,L,a,G;if(I.findListener(J,R)===-1){O=I.createListener(J,R,Q,b,E);if(I.firing){I.listeners=I.listeners.slice(0)}D=I.listeners;L=P=D.length;K=Q&&Q.priority;H=I._highestNegativePriorityIndex;d=H!==undefined;if(K){c=(K<0);if(!c||d){for(a=(c?H:0);a<P;a++){G=D[a].o?D[a].o.priority||0:0;if(G<K){L=a;break}}}else{I._highestNegativePriorityIndex=L}}else{if(d){L=H}}if(!c&&L<=H){I._highestNegativePriorityIndex++}if(L===P){D[P]=O}else{g(D,L,[O])}if(F.isElement){F._getPublisher(N).subscribe(F,N,Q.delegated!==false,Q.capture)}M=true}return M},createListener:function(B,z,y,w,o){var b=this,a=Ext._namedScopes[z],v={fn:B,scope:z,ev:b,caller:w,manager:o,namedScope:a,defaultScope:a?(z||b.observable):undefined,lateBound:typeof B==="string"},A=B,c=false,d;if(y){v.o=y;if(y.single){A=b.createSingle(A,v,y,z);c=true}if(y.target){A=b.createTargeted(A,v,y,z,c);c=true}if(y.delay){A=b.createDelayed(A,v,y,z,c);c=true}if(y.buffer){A=b.createBuffered(A,v,y,z,c);c=true}if(b.observable.isElement){d=y.type;if(d){v.type=d}}}v.fireFn=A;v.wrapped=c;return v},findListener:function(b,c){var d=this.listeners,o=d.length,a;while(o--){a=d[o];if(a){if(a.fn===b&&a.scope==c){return o}}}return -1},removeListener:function(I,G,a){var J=this,b=false,D=J.observable,c=J.name,B,E,F,z,A,H,C,d;a=a||J.findListener(I,G);if(a!=-1){B=J.listeners[a];F=B.o;E=J._highestNegativePriorityIndex;if(J.firing){J.listeners=J.listeners.slice(0)}if(B.task){B.task.cancel();delete B.task}z=B.tasks&&B.tasks.length;if(z){while(z--){B.tasks[z].cancel()}delete B.tasks}J.listeners.splice(a,1);A=B.manager;if(A){H=A.managedListeners;if(H){for(d=H.length;d--;){C=H[d];if(C.item===J.observable&&C.ename===c&&C.fn===I&&C.scope===G){H.splice(d,1)}}}}if(E){if(a<E){J._highestNegativePriorityIndex--}else{if(a===E&&a===J.listeners.length){delete J._highestNegativePriorityIndex}}}if(D.isElement){D._getPublisher(c).unsubscribe(D,c,F.delegated!==false,F.capture)}b=true}return b},clearListeners:function(){var b=this.listeners,c=b.length,a;while(c--){a=b[c];this.removeListener(a.fn,a.scope)}},suspend:function(){++this.suspended},resume:function(){if(this.suspended){--this.suspended}},isSuspended:function(){return this.suspended>0},fireDelegated:function(a,b){this.firingObservable=a;return this.fire.apply(this,b)},fire:function(){var J=this,H=J.listeners,S=H.length,N=J.observable,d=N.isElement,L=N.isComponent,P=J.firingObservable,W,R,K,b,X,U,a,c,G,V,O,T,M,I,Q;if(!J.suspended&&S>0){J.firing=true;X=arguments.length?h.call(arguments,0):[];a=X.length;if(d){M=X[0]}for(b=0;b<S;b++){U=H[b];W=U.o;if(d){if(G){M.setCurrentTarget(G)}V=U.type;if(V){O=M;M=X[0]=O.chain({type:V})}Ext.EventObject=M}T=X;if(W){R=W.delegate;if(R){if(d){c=M.getTarget("#"+M.currentTarget.id+" "+R);if(c){X[1]=c;G=M.currentTarget;M.setCurrentTarget(c)}else{continue}}else{if(L&&!P.is("#"+N.id+" "+W.delegate)){continue}}}if(d){if(W.preventDefault){M.preventDefault()}if(W.stopPropagation){M.stopPropagation()}if(W.stopEvent){M.stopEvent()}}X[a]=W;if(W.args){T=W.args.concat(X)}}K=J.getFireInfo(U);I=K.fn;Q=K.scope;K.fn=K.scope=null;if(I.apply(Q,T)===false){Ext.EventObject=null;return(J.firing=false)}if(O){M=X[0]=O;O=null}Ext.EventObject=null}}J.firing=false;return true},getFireInfo:function(s,a){var r=this.observable,q=s.fireFn,b=s.scope,d=s.namedScope,c;if(!a&&s.wrapped){f.fn=q;return f}c=a?s.fn:q;if(s.lateBound){if(!b||d){b=(s.caller||r).resolveListenerScope(s.defaultScope)}c=b[c]}else{if(d&&d.isController){b=(s.caller||r).resolveListenerScope(s.defaultScope)}else{if(!b||d){b=r}}}f.fn=c;f.scope=b;return f},createTargeted:function(c,b,a,d,o){return function(){if(a.target===arguments[0]){var m;if(!o){m=b.ev.getFireInfo(b,true);c=m.fn;d=m.scope;m.fn=m.scope=null}return c.apply(d,arguments)}}},createBuffered:function(c,b,a,d,o){b.task=new Ext.util.DelayedTask();return function(){var m;if(!o){m=b.ev.getFireInfo(b,true);c=m.fn;d=m.scope;m.fn=m.scope=null}b.task.delay(a.buffer,c,d,j(arguments))}},createDelayed:function(c,b,a,d,o){return function(){var q=new Ext.util.DelayedTask(),m;if(!o){m=b.ev.getFireInfo(b,true);c=m.fn;d=m.scope;m.fn=m.scope=null}if(!b.tasks){b.tasks=[]}b.tasks.push(q);q.delay(a.delay||10,c,d,j(arguments))}},createSingle:function(c,b,a,d,o){return function(){var q=b.ev,m;if(q.removeListener(b.fn,d)&&q.observable){q.observable.hasListeners[q.name]--}if(!o){m=q.getFireInfo(b,true);c=m.fn;d=m.scope;m.fn=m.scope=null}return c.apply(d,arguments)}}}},1,0,0,0,0,0,[Ext.util,"Event"],0));(Ext.cmd.derive("Ext.mixin.Identifiable",Ext.Base,{statics:{uniqueIds:{}},isIdentifiable:true,mixinId:"identifiable",idCleanRegex:/\.|[^\w\-]/g,defaultIdPrefix:"ext-",defaultIdSeparator:"-",getOptimizedId:function(){return this.id},getUniqueId:function(){var m=this.id,h,p,o,j,q;if(!(m||m===0)){h=this.self.prototype;p=this.defaultIdSeparator;j=Ext.mixin.Identifiable.uniqueIds;if(!h.hasOwnProperty("identifiablePrefix")){o=this.xtype;if(o){q=this.defaultIdPrefix+o.replace(this.idCleanRegex,p)+p}else{if(!(q=h.$className)){q=this.defaultIdPrefix+"anonymous"+p}else{q=q.replace(this.idCleanRegex,p).toLowerCase()+p}}h.identifiablePrefix=q}q=this.identifiablePrefix;if(!j.hasOwnProperty(q)){j[q]=0}m=this.id=this.id=q+(++j[q])}this.getUniqueId=this.getOptimizedId;return m},setId:function(b){this.id=this.id=b},getId:function(){var b=this.id;if(!b){b=this.getUniqueId()}this.getId=this.getOptimizedId;return b}},0,0,0,0,0,0,[Ext.mixin,"Identifiable"],0));(Ext.cmd.derive("Ext.mixin.Observable",Ext.Mixin,function(j){var p=Ext.emptyFn,q=[],o=Array.prototype,m=o.slice,h=function(a){if(a instanceof h){return a}this.observable=a;if(arguments[1].isObservable){this.managedListeners=true}this.args=m.call(arguments,1)};h.prototype.destroy=function(){this.destroy=Ext.emptyFn;var a=this.observable;a[this.managedListeners?"mun":"un"].apply(a,this.args)};return{mixinConfig:{id:"observable",after:{destroy:"clearListeners"}},statics:{releaseCapture:function(a){a.fireEventArgs=this.prototype.fireEventArgs},capture:function(d,b,c){var a=function(g,f){return b.apply(c,[g].concat(f))};this.captureArgs(d,a,c)},captureArgs:function(a,b,c){a.fireEventArgs=Ext.Function.createInterceptor(a.fireEventArgs,b,c)},observe:function(b,a){if(b){if(!b.isObservable){Ext.applyIf(b,new this());this.captureArgs(b.prototype,b.fireEventArgs,b)}if(Ext.isObject(a)){b.on(a)}}return b},prepareClass:function(c,A,b){var B=c.listeners=[],D=b||c.prototype,y=D.listeners,d=A?A.listeners:c.superclass.self.listeners,g,z,C;if(d){B.push(d)}if(y){z=y.scope;if(!z){y.scope="self"}else{C=Ext._namedScopes[z];if(C&&C.isController){y.scope="self.controller"}}B.push(y);D.listeners=null}if(!c.HasListeners){var a=function(){},f=c.superclass.HasListeners||(A&&A.HasListeners)||j.HasListeners;c.prototype.HasListeners=c.HasListeners=a;a.prototype=c.hasListeners=new f()}}},isObservable:true,eventsSuspended:0,constructor:function(u){var f=this,a=f.self,b,g,d,c,t;if(f.$observableInitialized){return}f.$observableInitialized=true;f.hasListeners=new f.HasListeners();f.eventedBeforeEventNames={};f.events=f.events||{};b=a.listeners;if(b&&!f._addDeclaredListeners(b)){a.listeners=null}g=(u&&u.listeners)||f.listeners;if(g){if(g instanceof Array){for(t=0,c=g.length;t<c;++t){f.addListener(g[t])}}else{f.addListener(g)}}d=(u&&u.bubbleEvents)||f.bubbleEvents;if(d){f.enableBubble(d)}if(f.$applyConfigs){if(u){Ext.apply(f,u)}}else{f.initConfig(u)}if(g){f.listeners=null}},onClassExtended:function(b,a){if(!b.HasListeners){j.prepareClass(b,b.prototype.$observableMixedIn?undefined:a)}},$eventOptions:{scope:1,delay:1,buffer:1,onFrame:1,single:1,args:1,destroyable:1,priority:1,order:1},$orderToPriority:{before:100,current:0,after:-100},_addDeclaredListeners:function(b){var a=this;if(b instanceof Array){Ext.each(b,a._addDeclaredListeners,a)}else{a._addedDeclaredListeners=true;a.addListener(b)}return a._addedDeclaredListeners},addManagedListener:function(z,d,b,y,w,f){var c=this,a=c.managedListeners=c.managedListeners||[],g,v;if(typeof d!=="string"){v=arguments.length>4?w:d;w=d;for(d in w){if(w.hasOwnProperty(d)){g=w[d];if(!z.$eventOptions[d]){c.addManagedListener(z,d,g.fn||g,g.scope||w.scope||y,g.fn?g:v,true)}}}if(w&&w.destroyable){return new h(c,z,w)}}else{if(b!==p){z.doAddListener(d,b,y,w,null,c,c);if(!f&&w&&w.destroyable){return new h(c,z,d,b,y)}}}},removeManagedListener:function(z,f,b,y){var c=this,w,g,a,v,d;if(typeof f!=="string"){w=f;for(f in w){if(w.hasOwnProperty(f)){g=w[f];if(!z.$eventOptions[f]){c.removeManagedListener(z,f,g.fn||g,g.scope||w.scope||y)}}}}else{a=c.managedListeners?c.managedListeners.slice():[];f=Ext.canonicalEventName(f);for(d=0,v=a.length;d<v;d++){c.removeManagedListenerItem(false,a[d],z,f,b,y)}}},fireEvent:function(a){return this.fireEventArgs(a,m.call(arguments,1))},resolveListenerScope:function(a){var b=Ext._namedScopes[a];if(b){if(b.isSelf||b.isThis){a=null}}return a||this},fireEventArgs:function(c,a){c=Ext.canonicalEventName(c);var d=this,g=d.events,f=g&&g[c],b=true;if(d.hasListeners[c]){b=d.doFireEvent(c,a||q,f?f.bubble:false)}return b},fireAction:function(b,g,d,f,a,c){if(typeof d==="string"&&!f){d=this[d]}a=a?Ext.Object.chain(a):{};a.single=true;a.priority=((c==="after")?-99.5:99.5);this.doAddListener(b,d,f,a);this.fireEventArgs(b,g)},$eventedController:{_paused:1,pause:function(){++this._paused},resume:function(){var f=this,g=f.fn,s=f.scope,d=f.fnArgs,c=f.owner,a,b;if(!--f._paused){if(g){a=Ext.Array.slice(d||f.args);if(d===false){a.shift()}f.fn=null;a.push(f);if(Ext.isFunction(g)){b=g.apply(s,a)}else{if(s&&Ext.isString(g)&&Ext.isFunction(s[g])){b=s[g].apply(s,a)}}if(b===false){return false}}if(!f._paused){return f.owner.fireEventArgs(f.eventName,f.args)}}}},fireEventedAction:function(g,d,a,w,b){var c=this,y=c.eventedBeforeEventNames,f=y[g]||(y[g]="before"+g),v=Ext.apply({owner:c,eventName:g,fn:a,scope:w,fnArgs:b,args:d},c.$eventedController),z;d.push(v);z=c.fireEventArgs(f,d);d.pop();if(z===false){return false}return v.resume()},doFireEvent:function(a,g,b){var d=this,c,f,s=true;do{if(d.eventsSuspended){if((c=d.eventQueue)){c.push([a,g])}return s}else{f=d.events&&d.events[a];if(f&&f!==true){if((s=f.fire.apply(f,g))===false){break}}}}while(b&&(d=d.getBubbleParent()));return s},getBubbleParent:function(){var a=this,b=a.getBubbleTarget&&a.getBubbleTarget();if(b&&b.isObservable){return b}return null},addListener:function(c,C,B,A,f,z){var D=this,b=Ext._namedScopes,g,E,a,F,d;if(typeof c!=="string"){A=c;B=A.scope;E=B&&b[B];a=E&&E.isSelf;d=((D.isComponent||D.isWidget)&&A.element)?D.$elementEventOptions:D.$eventOptions;for(c in A){g=A[c];if(!d[c]){F=g.scope;if(F&&a){E=b[F];if(E&&E.isController){F="self.controller"}}D.doAddListener(c,g.fn||g,F||B,g.fn?g:A,f,z)}}if(A&&A.destroyable){return new h(D,A)}}else{D.doAddListener(c,C,B,A,f,z);if(A&&A.destroyable){return new h(D,c,C,B,A)}}return D},removeListener:function(s,f,g,c){var d=this,a,b;if(typeof s!=="string"){b=s;c=c||d.$eventOptions;for(s in b){if(b.hasOwnProperty(s)){a=b[s];if(!d.$eventOptions[s]){d.doRemoveListener(s,a.fn||a,a.scope||b.scope)}}}}else{d.doRemoveListener(s,f,g)}return d},onBefore:function(c,d,a,b){return this.addListener(c,d,a,b,"before")},onAfter:function(c,d,a,b){return this.addListener(c,d,a,b,"after")},unBefore:function(c,d,a,b){return this.removeListener(c,d,a,b,"before")},unAfter:function(c,d,a,b){return this.removeListener(c,d,a,b,"after")},addBeforeListener:function(){return this.onBefore.apply(this,arguments)},addAfterListener:function(){return this.onAfter.apply(this,arguments)},removeBeforeListener:function(){return this.unBefore.apply(this,arguments)},removeAfterListener:function(){return this.unAfter.apply(this,arguments)},clearListeners:function(){var d=this,a=d.events,c=d.hasListeners,f,b;if(a){for(b in a){if(a.hasOwnProperty(b)){f=a[b];if(f.isEvent){delete c[b];f.clearListeners()}}}d.events=null}d.clearManagedListeners()},clearManagedListeners:function(){var d=this,b=d.managedListeners?d.managedListeners.slice():[],a=0,c=b.length;for(;a<c;a++){d.removeManagedListenerItem(true,b[a])}d.managedListeners=[]},removeManagedListenerItem:function(b,c,d,a,f,g){if(b||(c.item===d&&c.ename===a&&(!f||c.fn===f)&&(!g||c.scope===g))){c.item.doRemoveListener(c.ename,c.fn,c.scope,c.options);if(!b){Ext.Array.remove(this.managedListeners,c)}}},hasListener:function(a){a=Ext.canonicalEventName(a);return !!this.hasListeners[a]},isSuspended:function(a){var b=this.eventsSuspended>0,c=this.events;if(!b&&a&&c){a=c[a];if(a&&a.isEvent){return a.isSuspended()}}return b},suspendEvents:function(a){++this.eventsSuspended;if(a&&!this.eventQueue){this.eventQueue=[]}},suspendEvent:function(){var d=this,g=d.events,c=arguments.length,a,f,b;for(a=0;a<c;a++){b=arguments[a];b=Ext.canonicalEventName(b);f=g[b];if(!f||!f.isEvent){f=d._initEvent(b)}f.suspend()}},resumeEvent:function(){var a=this.events||0,c=a&&arguments.length,b,d;for(b=0;b<c;b++){d=a[arguments[b]];if(d&&d.resume){d.resume()}}},resumeEvents:function(c){var b=this,d=b.eventQueue,f,a;if(b.eventsSuspended&&!--b.eventsSuspended){delete b.eventQueue;if(!c&&d){f=d.length;for(a=0;a<f;a++){b.fireEventArgs.apply(b,d[a])}}}},relayEvents:function(w,v,f){var a=this,d=v.length,g=0,u,c,b={};if(Ext.isObject(v)){for(g in v){c=v[g];b[g]=a.createRelayer(c)}}else{for(;g<d;g++){u=v[g];b[u]=a.createRelayer(f?f+u:u)}}a.mon(w,b,null,null,undefined);return new h(a,w,b)},createRelayer:function(c,b){var a=this;return function(){return a.fireEventArgs.call(a,c,b?m.apply(arguments,b):arguments)}},enableBubble:function(d){if(d){var g=this,f=(typeof d=="string")?arguments:d,a=g.events,t=a&&f.length,b,u,c;for(c=0;c<t;++c){b=f[c];b=Ext.canonicalEventName(b);u=a[b];if(!u||!u.isEvent){u=g._initEvent(b)}g.hasListeners._incr_(b);u.bubble=true}}},destroy:function(){this.clearListeners();this.callParent()},privates:{doAddListener:function(d,a,z,y,f,g,c){var b=this,w,A,B;f=f||(y&&y.order);if(f){B=(y&&y.priority);if(!B){y=y?Ext.Object.chain(y):{};y.priority=b.$orderToPriority[f]}}d=Ext.canonicalEventName(d);if(!c&&(z&&z.isObservable&&(z!==b))){c=z}if(c){A=c.managedListeners=c.managedListeners||[];A.push({item:b,ename:d,fn:a,scope:z,options:y})}w=(b.events||(b.events={}))[d];if(!w||!w.isEvent){w=b._initEvent(d)}if(a!==p){if(w.addListener(a,z,y,g,c)){b.hasListeners._incr_(d)}}},doRemoveListener:function(b,g,a){var d=this,c=d.events,f;b=Ext.canonicalEventName(b);f=c&&c[b];if(f&&f.isEvent){if(f.removeListener(g,a)){d.hasListeners._decr_(b)}}},_initEvent:function(a){return(this.events[a]=new Ext.util.Event(this,a))}},deprecated:{"5.0":{methods:{addEvents:null}}}}},1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.mixin,"Observable"],function(){var h=this,o=h.prototype,q=function(){},m=function(b){if(!b.HasListeners){var a=b.prototype;a.$observableMixedIn=1;h.prepareClass(b,this);b.onExtended(function(c,d){h.prepareClass(c,null,d)});if(a.onClassMixedIn){Ext.override(b,{onClassMixedIn:function(c){m.call(this,c);this.callParent(arguments)}})}else{a.onClassMixedIn=function(c){m.call(this,c)}}}j.call(this,b)},j=o.onClassMixedIn;q.prototype={_decr_:function(a,b){if(b==null){b=1}if(!(this[a]-=b)){delete this[a]}},_incr_:function(a){if(this.hasOwnProperty(a)){++this[a]}else{this[a]=1}}};o.HasListeners=h.HasListeners=q;h.createAlias({on:"addListener",un:"removeListener",mon:"addManagedListener",mun:"removeManagedListener",setListeners:"addListener"});h.observeClass=h.observe;function p(d){var f=(this.methodEvents=this.methodEvents||{})[d],a,b,s,g=this,c;if(!f){this.methodEvents[d]=f={};f.originalFn=this[d];f.methodName=d;f.before=[];f.after=[];c=function(r,v,w){if((b=r.apply(v||g,w))!==undefined){if(typeof b=="object"){if(b.returnValue!==undefined){a=b.returnValue}else{a=b}s=!!b.cancel}else{if(b===false){s=true}else{a=b}}}};this[d]=function(){var w=Array.prototype.slice.call(arguments,0),y,r,z;a=b=undefined;s=false;for(r=0,z=f.before.length;r<z;r++){y=f.before[r];c(y.fn,y.scope,w);if(s){return a}}if((b=f.originalFn.apply(g,w))!==undefined){a=b}for(r=0,z=f.after.length;r<z;r++){y=f.after[r];c(y.fn,y.scope,w);if(s){return a}}return a}}return f}Ext.apply(o,{onClassMixedIn:m,beforeMethod:function(a,b,c){p.call(this,a).before.push({fn:b,scope:c})},afterMethod:function(a,b,c){p.call(this,a).after.push({fn:b,scope:c})},removeMethodListener:function(d,g,a){var f=this.getMethodEvent(d),b,c;for(b=0,c=f.before.length;b<c;b++){if(f.before[b].fn==g&&f.before[b].scope==a){Ext.Array.erase(f.before,b,1);return}}for(b=0,c=f.after.length;b<c;b++){if(f.after[b].fn==g&&f.after[b].scope==a){Ext.Array.erase(f.after,b,1);return}}},toggleEventLogging:function(a){Ext.util.Observable[a?"capture":"releaseCapture"](this,function(b){if(Ext.isDefined(Ext.global.console)){Ext.global.console.log(b,arguments)}})}})}));(Ext.cmd.derive("Ext.util.HashMap",Ext.Base,{generation:0,config:{keyFn:null},constructor:function(f){var g=this,d;g.mixins.observable.constructor.call(g,f);g.clear(true);d=g.getKeyFn();if(d){g.getKey=d}},getCount:function(){return this.length},getData:function(d,c){if(c===undefined){c=d;d=this.getKey(c)}return[d,c]},getKey:function(b){return b.id},add:function(f,g){var d=this;if(arguments.length===1){g=f;f=d.getKey(g)}if(d.containsKey(f)){return d.replace(f,g)}d.map[f]=g;++d.length;d.generation++;if(d.hasListeners.add){d.fireEvent("add",d,f,g)}return g},replace:function(g,m){var o=this,j=o.map,h;if(arguments.length===1){m=g;g=o.getKey(m)}if(!o.containsKey(g)){o.add(g,m)}h=j[g];j[g]=m;o.generation++;if(o.hasListeners.replace){o.fireEvent("replace",o,g,m,h)}return m},remove:function(c){var d=this.findKey(c);if(d!==undefined){return this.removeAtKey(d)}return false},removeAtKey:function(f){var d=this,g;if(d.containsKey(f)){g=d.map[f];delete d.map[f];--d.length;d.generation++;if(d.hasListeners.remove){d.fireEvent("remove",d,f,g)}return true}return false},get:function(d){var c=this.map;return c.hasOwnProperty(d)?c[d]:undefined},clear:function(d){var c=this;if(d||c.generation){c.map={};c.length=0;c.generation=d?0:c.generation+1}if(d!==true&&c.hasListeners.clear){c.fireEvent("clear",c)}return c},containsKey:function(d){var c=this.map;return c.hasOwnProperty(d)&&c[d]!==undefined},contains:function(b){return this.containsKey(this.findKey(b))},getKeys:function(){return this.getArray(true)},getValues:function(){return this.getArray(false)},getArray:function(h){var g=[],f,j=this.map;for(f in j){if(j.hasOwnProperty(f)){g.push(h?f:j[f])}}return g},each:function(m,o){var h=Ext.apply({},this.map),g,j=this.length;o=o||this;for(g in h){if(h.hasOwnProperty(g)){if(m.call(o,g,h[g],j)===false){break}}}return this},clone:function(){var g=new this.self(this.initialConfig),d=this.map,f;g.suspendEvents();for(f in d){if(d.hasOwnProperty(f)){g.add(f,d[f])}}g.resumeEvents();return g},findKey:function(d){var f,g=this.map;for(f in g){if(g.hasOwnProperty(f)&&g[f]===d){return f}}return undefined},destroy:function(){this.callParent();this.map=null}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.util,"HashMap"],function(c){var d=c.prototype;d.removeByKey=d.removeAtKey}));(Ext.cmd.derive("Ext.promise.Consequence",Ext.Base,function(b){return{promise:null,deferred:null,onFulfilled:null,onRejected:null,onProgress:null,constructor:function(g,a,h){var j=this;j.onFulfilled=g;j.onRejected=a;j.onProgress=h;j.deferred=new Ext.promise.Deferred();j.promise=j.deferred.promise},trigger:function(g,h){var j=this,a=j.deferred;switch(g){case"fulfill":j.propagate(h,j.onFulfilled,a,a.resolve);break;case"reject":j.propagate(h,j.onRejected,a,a.reject);break}},update:function(a){if(Ext.isFunction(this.onProgress)){a=this.onProgress(a)}this.deferred.update(a)},propagate:function(h,g,a,j){if(Ext.isFunction(g)){this.schedule(function(){try{a.resolve(g(h))}catch(c){a.reject(c)}})}else{j.call(this.deferred,h)}},schedule:function(d){var a=b.queueSize++;b.queue[a]=d;if(!a){Ext.asap(b.dispatch)}},statics:{queue:new Array(10000),queueSize:0,dispatch:function(){var a=b.queue,f,g;for(g=0;g<b.queueSize;++g){f=a[g];a[g]=null;f()}b.queueSize=0}}}},1,0,0,0,0,0,[Ext.promise,"Consequence"],0));(Ext.cmd.derive("Ext.promise.Deferred",Ext.Base,{promise:null,consequences:[],completed:false,completionAction:null,completionValue:null,constructor:function(){var b=this;b.promise=new Ext.promise.Promise(b);b.consequences=[];b.completed=false;b.completionAction=null;b.completionValue=null},then:function(j,h,m){var o=this,g=new Ext.promise.Consequence(j,h,m);if(o.completed){g.trigger(o.completionAction,o.completionValue)}else{o.consequences.push(g)}return g.promise},resolve:function(m){var o=this,h,g;if(o.completed){return}try{if(m===o.promise){throw new TypeError("A Promise cannot be resolved with itself.")}if((Ext.isObject(m)||Ext.isFunction(m))&&Ext.isFunction(g=m.then)){h=false;try{g.call(m,function(a){if(!h){h=true;o.resolve(a)}},function(a){if(!h){h=true;o.reject(a)}})}catch(j){if(!h){o.reject(j)}}}else{o.complete("fulfill",m)}}catch(j){o.reject(j)}},reject:function(b){if(this.completed){return}this.complete("reject",b)},update:function(g){var j=this.consequences,m,o,h;if(this.completed){return}for(o=0,h=j.length;o<h;o++){m=j[o];m.update(g)}},complete:function(p,q){var r=this,o=r.consequences,s,j,m;r.completionAction=p;r.completionValue=q;r.completed=true;for(j=0,m=o.length;j<m;j++){s=o[j];s.trigger(r.completionAction,r.completionValue)}r.consequences=null}},1,0,0,0,0,0,[Ext.promise,"Deferred"],0));(Ext.cmd.derive("Ext.promise.Promise",Ext.Base,function(c){var d;return{statics:{CancellationError:Ext.global.CancellationError||Error,_ready:function(){d=Ext.promise.Deferred},all:function(a){return c.when(a).then(function(y){var b=new d(),u=y.length,w=new Array(u),s,z,r,v,t;if(!u){b.resolve(w)}else{r=function(f,g){return c.when(f).then(function(h){w[g]=h;if(!--u){b.resolve(w)}return h},function(h){return b.reject(h)})};for(s=v=0,t=y.length;v<t;s=++v){z=y[s];if(s in y){r(z,s)}else{u--}}}return b.promise})},is:function(a){return(Ext.isObject(a)||Ext.isFunction(a))&&Ext.isFunction(a.then)},rethrowError:function(a){Ext.asap(function(){throw a})},when:function(a){var b=new Ext.promise.Deferred();b.resolve(a);return b.promise}},owner:null,constructor:function(a){this.owner=a},then:function(a,o,b,m){var j;if(arguments.length===1&&Ext.isObject(arguments[0])){j=arguments[0];a=j.success;o=j.failure;b=j.progress;m=j.scope}if(m){if(a){a=Ext.Function.bind(a,m)}if(o){o=Ext.Function.bind(o,m)}if(b){b=Ext.Function.bind(b,m)}}return this.owner.then(a,o,b)},otherwise:function(g,b){var a;if(arguments.length===1&&Ext.isObject(arguments[0])){a=arguments[0];g=a.fn;b=a.scope}if(b!=null){g=Ext.Function.bind(g,b)}return this.owner.then(null,g)},always:function(g,b){var a;if(arguments.length===1&&Ext.isObject(arguments[0])){a=arguments[0];g=a.fn;b=a.scope}if(b!=null){g=Ext.Function.bind(g,b)}return this.owner.then(function(j){try{g()}catch(f){c.rethrowError(f)}return j},function(f){try{g()}catch(j){c.rethrowError(j)}throw f})},done:function(){this.owner.then(null,c.rethrowError)},cancel:function(a){if(a==null){a=null}this.owner.reject(new this.self.CancellationError(a))},log:function(a){if(a==null){a=""}return this._owner.then(function(b){Ext.log(""+(a||"Promise")+" resolved with value: "+b);return b},function(b){Ext.log(""+(a||"Promise")+" rejected with reason: "+b);throw b})}}},1,0,0,0,0,0,[Ext.promise,"Promise"],function(b){b._ready()}));(Ext.cmd.derive("Ext.Promise",Ext.Base,function(){var b;return{statics:{_ready:function(){b=Ext.promise.Promise},all:function(){return b.all.apply(b,arguments)},race:function(){},reject:function(d){var a=new Ext.promise.Deferred();a.reject(d);return a.promise},resolve:function(d){var a=new Ext.promise.Deferred();a.resolve(d);return a.promise}},constructor:function(d){var a=new Ext.promise.Deferred();d(a.resolve.bind(a),a.reject.bind(a));return a.promise}}},1,0,0,0,0,0,[Ext,"Promise"],function(d){var c=Ext.global.Promise;if(c&&c.resolve){Ext.Promise=c}else{d._ready()}}));(Ext.cmd.derive("Ext.Deferred",Ext.promise.Deferred,function(d){var g,f;return{statics:{_ready:function(){g=Ext.promise.Promise;f=Ext.Promise.resolve},all:function(){return g.all.apply(g,arguments)},any:function(a){return d.some(a,1).then(function(b){return b[0]},function(b){if(b instanceof Error&&b.message==="Too few Promises were resolved."){Ext.raise("No Promises were resolved.")}else{throw b}})},delay:function(c,a){var b;if(arguments.length===1){a=c;c=undefined}a=Math.max(a,0);b=new d();setTimeout(function(){b.resolve(c)},a);return b.promise},map:function(b,a){return d.resolved(b).then(function(z){var B,t,A,v,c,y,w,u;v=z.length;y=new Array(z.length);B=new d();if(!v){B.resolve(y)}else{c=function(h,j){return d.resolved(h).then(function(m){return a(m,j,y)}).then(function(m){y[j]=m;if(!--v){B.resolve(y)}return m},function(m){return B.reject(m)})};for(t=w=0,u=z.length;w<u;t=++w){A=z[t];if(t in z){c(A,t)}else{v--}}}return B.promise})},memoize:function(a,b,j){var c=Ext.Function.memoize(a,b,j);return function(){return d.all(Ext.Array.slice(arguments)).then(function(h){return c.apply(b,h)})}},parallel:function(b,a){if(a==null){a=null}var c=Ext.Array.slice(arguments,2);return d.map(b,function(j){if(!Ext.isFunction(j)){throw new Error("Invalid parameter: expected a function.")}return j.apply(a,c)})},pipeline:function(b,c,a){if(a==null){a=null}return d.reduce(b,function(m,o){if(!Ext.isFunction(o)){throw new Error("Invalid parameter: expected a function.")}return o.call(a,m)},c)},reduce:function(c,b,j){var a=arguments.length===3;return d.resolved(c).then(function(h){var o=[h,function(r,m,s){return d.resolved(r).then(function(p){return d.resolved(m).then(function(q){return b(p,q,s,h)})})}];if(a){o.push(j)}return Ext.Array.reduce.apply(Ext.Array,o)})},rejected:function(a){var b=new Ext.Deferred();b.reject(a);return b.promise},resolved:function(a){var b=new Ext.Deferred();b.resolve(a);return b.promise},sequence:function(b,a){if(a==null){a=null}var c=Ext.Array.slice(arguments,2);return d.reduce(b,function(o,m){if(!Ext.isFunction(m)){throw new Error("Invalid parameter: expected a function.")}return d.resolved(m.apply(a,c)).then(function(h){o.push(h);return o})},[])},some:function(a,b){return d.resolved(a).then(function(A){var D,v,F,E,B,C,y,c,z,w;c=[];y=b;C=(A.length-y)+1;D=new d();if(A.length<b){D.reject(new Error("Too few Promises were resolved."))}else{E=function(h){if(y>0){c.push(h)}y--;if(y===0){D.resolve(c)}return h};F=function(h){C--;if(C===0){D.reject(new Error("Too few Promises were resolved."))}return h};for(v=z=0,w=A.length;z<w;v=++z){B=A[v];if(v in A){d.resolved(B).then(E,F)}}}return D.promise})},timeout:function(j,b){var c=new d(),a;a=setTimeout(function(){if(a){c.reject(new Error("Promise timed out."))}},b);d.resolved(j).then(function(h){clearTimeout(a);a=null;c.resolve(h)},function(h){clearTimeout(a);a=null;c.reject(h)});return c.promise}}}},0,0,0,0,0,0,[Ext,"Deferred"],function(b){b._ready()}));Ext.Factory=function(d){var c=this;c.aliasPrefix=d+".";c.cache={};c.name=d.replace(c.fixNameRe,c.fixNameFn);c.type=d};Ext.Factory.prototype={defaultProperty:"type",instanceProp:"isInstance",create:function(u,s){var p=this,w=Ext.ClassManager,v=p.cache,t,q,r,o;if(u){if(u[p.instanceProp]){return u}if(typeof u==="string"){o=u;u={};u[p.defaultProperty]=o}q=u.xclass;o=u.type}if(q){if(!(r=w.get(q))){return w.instantiate(q,u)}}else{if(!(o=o||s||p.defaultType)){r=p.defaultClass}if(!r&&!(r=v[o])){t=p.aliasPrefix+o;q=w.getNameByAlias(t);if(!(r=q&&w.get(q))){return w.instantiateByAlias(t,u)}v[o]=r}}return r.isInstance?r:new r(u)},fixNameRe:/\.[a-z]/ig,fixNameFn:function(b){return b.substring(1).toUpperCase()},clearCache:function(){this.cache={}}};Ext.Factory.define=function(m,p){var j=Ext.Factory,h,q,o;if(m.constructor===Object){Ext.Object.each(m,j.define,j)}else{q=new Ext.Factory(m);if(p){if(p.constructor===Object){Ext.apply(q,p);if(typeof(h=q.xclass)==="string"){q.defaultClass=Ext.ClassManager.get(h)}}else{q.defaultType=p}}j[q.name]=o=q.create.bind(q);o.instance=q}return o};(Ext.cmd.derive("Ext.mixin.Factoryable",Ext.Base,{mixinId:"factoryable",onClassMixedIn:function(p){var q=p.prototype,o=q.factoryConfig,r=q.alias,s={},j,m;r=r&&r.length&&r[0];if(r&&(j=r.lastIndexOf("."))>0){s.type=r.substring(0,j);s.defaultType=r.substring(j+1)}if(o){delete q.factoryConfig;Ext.apply(s,o)}m=Ext.Factory.define(s.type,s);if(p.create===Ext.Base.create){p.create=m}}},0,0,0,0,0,0,[Ext.mixin,"Factoryable"],0));(Ext.cmd.derive("Ext.data.request.Base",Ext.Base,{factoryConfig:{type:"request",defaultType:"ajax"},result:null,success:null,timer:null,constructor:function(d){var c=this;Ext.apply(c,d.options||{},d.ownerConfig);c.id=++Ext.data.Connection.requestId;c.owner=d.owner;c.options=d.options;c.requestOptions=d.requestOptions},start:function(){var d=this,c=d.getTimeout();if(c&&d.async){d.timer=Ext.defer(d.onTimeout,c,d)}},abort:function(){var b=this;b.clearTimer();if(!b.timedout){b.aborted=true}b.abort=Ext.emptyFn},createDeferred:function(){return(this.deferred=new Ext.Deferred())},getDeferred:function(){return this.deferred||this.createDeferred()},getPromise:function(){return this.getDeferred().promise},then:function(){var b=this.getPromise();return b.then.apply(b,arguments)},onComplete:function(){var g=this,d=g.deferred,f=g.result;g.clearTimer();if(d){if(g.success){d.resolve(f)}else{d.reject(f)}}},onTimeout:function(){var b=this;b.timedout=true;b.timer=null;b.abort(true)},getTimeout:function(){return this.timeout},clearTimer:function(){var b=this.timer;if(b){clearTimeout(b);this.timer=null}},destroy:function(){var b=this;b.abort();b.owner=b.options=b.requestOptions=b.result=null;b.callParent()},privates:{createException:function(){var c=this,d;d={request:c,requestId:c.id,status:c.aborted?-1:0,statusText:c.aborted?"transaction aborted":"communication failure",getResponseHeader:c._getHeader,getAllResponseHeaders:c._getHeaders};if(c.aborted){d.aborted=true}if(c.timedout){d.timedout=true}return d},_getHeader:function(d){var c=this.headers;return c&&c[d.toLowerCase()]},_getHeaders:function(){return this.headers}}},1,0,0,0,0,[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.request,"Base"],0));(Ext.cmd.derive("Ext.data.flash.BinaryXhr",Ext.Base,{statics:{flashPluginActivated:function(){Ext.data.flash.BinaryXhr.flashPluginActive=true;Ext.data.flash.BinaryXhr.flashPlugin=document.getElementById("ext-flash-polyfill");Ext.GlobalEvents.fireEvent("flashready")},flashPluginActive:false,flashPluginInjected:false,connectionIndex:1,liveConnections:{},flashPlugin:null,onFlashStateChange:function(h,j,f){var g;g=this.liveConnections[Number(h)];if(g){g.onFlashStateChange(j,f)}},registerConnection:function(c){var d=this.connectionIndex;this.conectionIndex=this.connectionIndex+1;this.liveConnections[d]=c;return d},injectFlashPlugin:function(){var d=this,f,g;d.flashPolyfillEl=Ext.getBody().appendChild({id:"ext-flash-polyfill",cn:[{tag:"p",html:"To view this page ensure that Adobe Flash Player version 11.1.0 or greater is installed."},{tag:"a",href:"http://www.adobe.com/go/getflashplayer",cn:[{tag:"img",src:window.location.protocol+"//www.adobe.com/images/shared/download_buttons/get_flash_player.gif",alt:"Get Adobe Flash player"}]}]});f=[Ext.Loader.getPath("Ext.data.Connection"),"../../../plugins/flash/swfobject.js"].join("/");g="/plugins/flash/FlashPlugin.swf";if(Ext.flashPluginPath){g=Ext.flashPluginPath}Ext.Loader.loadScript({url:f,onLoad:function(){var m="11.4.0";var b="playerProductInstall.swf";var o={};var a={};a.quality="high";a.bgcolor="#ffffff";a.allowscriptaccess="sameDomain";a.allowfullscreen="true";var c={};c.id="ext-flash-polyfill";c.name="polyfill";c.align="middle";swfobject.embedSWF(g,"ext-flash-polyfill","0","0",m,b,o,a,c)},onError:function(){},scope:d});Ext.data.flash.BinaryXhr.flashPluginInjected=true}},readyState:0,status:0,statusText:"",responseBytes:null,javascriptId:null,constructor:function(d){if(!Ext.data.flash.BinaryXhr.flashPluginInjected){Ext.data.flash.BinaryXhr.injectFlashPlugin()}var c=this;Ext.apply(c,d);c.requestHeaders={}},abort:function(){var b=this;if(b.readyState==4){return}b.aborted=true;if(!Ext.data.flash.BinaryXhr.flashPluginActive){Ext.GlobalEvents.removeListener("flashready",b.onFlashReady,b);return}Ext.data.flash.BinaryXhr.flashPlugin.abortRequest(b.javascriptId);delete Ext.data.flash.BinaryXhr.liveConnections[b.javascriptId]},getAllResponseHeaders:function(){var b=[];Ext.Object.each(this.responseHeaders,function(a,d){b.push(a+": "+d)});return b.join("\r\n")},getResponseHeader:function(c){var d=this.responseHeaders;return(d&&d[c])||null},open:function(m,q,p,j,h){var o=this;o.method=m;o.url=q;o.async=p!==false;o.user=j;o.password=h},overrideMimeType:function(b){this.mimeType=b},send:function(d){var c=this;c.body=d;if(!Ext.data.flash.BinaryXhr.flashPluginActive){Ext.GlobalEvents.addListener("flashready",c.onFlashReady,c)}else{this.onFlashReady()}},onFlashReady:function(){var g=this,d,f;g.javascriptId=Ext.data.flash.BinaryXhr.registerConnection(g);d={method:g.method,url:g.url,user:g.user,password:g.password,mimeType:g.mimeType,requestHeaders:g.requestHeaders,body:g.body,javascriptId:g.javascriptId};f=Ext.data.flash.BinaryXhr.flashPlugin.postBinary(d)},setReadyState:function(c){var d=this;if(d.readyState!=c){d.readyState=c;d.onreadystatechange()}},setRequestHeader:function(c,d){this.requestHeaders[c]=d},onreadystatechange:Ext.emptyFn,parseData:function(c){var d=this;this.status=c.status||0;d.responseHeaders={};if(d.mimeType){d.responseHeaders["content-type"]=d.mimeType}if(c.reason=="complete"){this.responseBytes=c.data;d.responseHeaders["content-length"]=c.data.length}else{if(c.reason=="error"||c.reason=="securityError"){this.statusText=c.text;d.responseHeaders["content-length"]=0}}},onFlashStateChange:function(g,d){var f=this;if(g==4){f.parseData(d);delete Ext.data.flash.BinaryXhr.liveConnections[f.javascriptId]}f.setReadyState(g)}},1,0,0,0,0,0,[Ext.data.flash,"BinaryXhr"],0));(Ext.cmd.derive("Ext.data.request.Ajax",Ext.data.request.Base,{statics:{parseStatus:function(f){f=f==1223?204:f;var g=(f>=200&&f<300)||f==304,d=false;if(!g){switch(f){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:d=true;break}}return{success:g,isException:d}}},start:function(q){var s=this,j=s.options,m=s.requestOptions,r=s.isXdr,o,p;o=s.xhr=s.openRequest(j,m,s.async,s.username,s.password);if(!r){p=s.setupHeaders(o,j,m.data,m.params)}if(s.async){if(!r){o.onreadystatechange=Ext.Function.bind(s.onStateChange,s)}}if(r){s.processXdrRequest(s,o)}Ext.data.request.Base.prototype.start.call(this,q);o.send(q);if(!s.async){return s.onComplete()}return s},abort:function(f){var g=this,h=g.xhr;if(f||g.isLoading()){try{h.onreadystatechange=null}catch(j){h.onreadystatechange=Ext.emptyFn}h.abort();Ext.data.request.Base.prototype.abort.call(this,f);g.onComplete();g.cleanup()}},cleanup:function(){this.xhr=null;delete this.xhr},isLoading:function(){var g=this,h=g.xhr,f=h&&h.readyState,j=Ext.data.flash&&Ext.data.flash.BinaryXhr;if(!h||g.aborted||g.timedout){return false}if(j&&h instanceof j){return f!==4}return f!==0&&f!==4},openRequest:function(s,m,r,o,j){var q=this,p=q.newRequest(s);if(o){p.open(m.method,m.url,r,o,j)}else{if(q.isXdr){p.open(m.method,m.url)}else{p.open(m.method,m.url,r)}}if(s.binary||q.binary){if(window.Uint8Array){p.responseType="arraybuffer"}else{if(p.overrideMimeType){p.overrideMimeType("text/plain; charset=x-user-defined")}}}if(s.withCredentials||q.withCredentials){p.withCredentials=true}return p},newRequest:function(f){var d=this,g;if(f.binaryData){if(window.Uint8Array){g=d.getXhrInstance()}else{g=new Ext.data.flash.BinaryXhr()}}else{if(d.cors&&Ext.isIE9m){g=d.getXdrInstance();d.isXdr=true}else{g=d.getXhrInstance();d.isXdr=false}}return g},setupHeaders:function(t,H,C,D){var y=this,F=Ext.apply({},H.headers||{},y.defaultHeaders),u=y.defaultPostHeader,w=H.jsonData,G=H.xmlData,z="Content-Type",E=y.useDefaultXhrHeader,v,B;if(!F.hasOwnProperty(z)&&(C||D)){if(C){if(H.rawData){u="text/plain"}else{if(G&&Ext.isDefined(G)){u="text/xml"}else{if(w&&Ext.isDefined(w)){u="application/json"}}}}F[z]=u}if(E&&!F["X-Requested-With"]){F["X-Requested-With"]=y.defaultXhrHeader}if(F[z]===undefined||F[z]===null){delete F[z]}try{for(v in F){if(F.hasOwnProperty(v)){B=F[v];t.setRequestHeader(v,B)}}}catch(A){y.owner.fireEvent("exception",v,B)}return F},getXdrInstance:function(){var b;if(Ext.ieVersion>=8){b=new XDomainRequest()}else{Ext.raise({msg:"Your browser does not support CORS"})}return b},getXhrInstance:(function(){var g=[function(){return new XMLHttpRequest()},function(){return new ActiveXObject("MSXML2.XMLHTTP.3.0")},function(){return new ActiveXObject("MSXML2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],o=0,h=g.length,j;for(;o<h;++o){try{j=g[o];j();break}catch(m){}}return j}()),processXdrRequest:function(d,g){var f=this;delete d.headers;d.contentType=d.options.contentType||f.defaultXdrContentType;g.onload=Ext.Function.bind(f.onStateChange,f,[true]);g.onerror=g.ontimeout=Ext.Function.bind(f.onStateChange,f,[false])},processXdrResponse:function(d,c){d.getAllResponseHeaders=function(){return[]};d.getResponseHeader=function(){return""};d.contentType=c.contentType||this.defaultXdrContentType},onStateChange:function(f){var j=this,h=j.xhr,g=Ext.GlobalEvents;if((h&&h.readyState==4)||j.isXdr){j.clearTimer();j.onComplete(f);j.cleanup();if(g.hasListeners.idle){g.fireEvent("idle")}}},onComplete:function(r){var u=this,z=u.owner,q=u.options,s=u.xhr,y={success:false,isException:false},p,t,w;if(!s||u.destroyed){return u.result=y}try{p=Ext.data.request.Ajax.parseStatus(s.status);if(p.success){p.success=s.readyState===4}}catch(v){p=y}t=u.success=u.isXdr?r:p.success;if(t){w=u.createResponse(s);z.fireEvent("requestcomplete",z,w,q);Ext.callback(q.success,q.scope,[w,q])}else{if(p.isException||u.aborted||u.timedout){w=u.createException(s)}else{w=u.createResponse(s)}z.fireEvent("requestexception",z,w,q);Ext.callback(q.failure,q.scope,[w,q])}u.result=w;Ext.callback(q.callback,q.scope,[q,t,w]);z.onRequestComplete(u);Ext.data.request.Base.prototype.onComplete.call(this,r);return w},createResponse:function(s){var u=this,z=u.isXdr,A={},r=z?[]:s.getAllResponseHeaders().replace(/\r\n/g,"\n").split("\n"),w=r.length,q,v,t,y,B;while(w--){q=r[w];v=q.indexOf(":");if(v>=0){t=q.substr(0,v).toLowerCase();if(q.charAt(v+1)==" "){++v}A[t]=q.substr(v+1)}}y={request:u,requestId:u.id,status:s.status,statusText:s.statusText,getResponseHeader:function(a){return A[a.toLowerCase()]},getAllResponseHeaders:function(){return A}};if(z){u.processXdrResponse(y,s)}if(u.binary){y.responseBytes=u.getByteArray(s)}else{y.responseText=s.responseText;y.responseXML=s.responseXML}return y},destroy:function(){this.xhr=null;Ext.data.request.Base.prototype.destroy.call(this)},privates:{getByteArray:function(p){var u=p.response,v=p.responseBody,o=Ext.data.flash&&Ext.data.flash.BinaryXhr,w,q,s,t;if(p instanceof o){w=p.responseBytes}else{if(window.Uint8Array){w=u?new Uint8Array(u):[]}else{if(Ext.isIE9p){try{w=new VBArray(v).toArray()}catch(r){w=[]}}else{if(Ext.isIE){if(!this.self.vbScriptInjected){this.injectVBScript()}getIEByteArray(p.responseBody,w=[])}else{w=[];q=p.responseText;s=q.length;for(t=0;t<s;t++){w.push(q.charCodeAt(t)&255)}}}}}return w},injectVBScript:function(){var b=document.createElement("script");b.type="text/vbscript";b.text=["Function getIEByteArray(byteArray, out)","Dim len, i","len = LenB(byteArray)","For i = 1 to len","out.push(AscB(MidB(byteArray, i, 1)))","Next","End Function"].join("\n");Ext.getHead().dom.appendChild(b);this.self.vbScriptInjected=true}}},0,0,0,0,["request.ajax"],0,[Ext.data.request,"Ajax"],0));(Ext.cmd.derive("Ext.data.request.Form",Ext.data.request.Base,{start:function(h){var j=this,f=j.options,g=j.requestOptions;Ext.data.request.Base.prototype.start.call(this,h);j.form=j.upload(f.form,g.url,g.data,f);return j},abort:function(f){var g=this,h;if(g.isLoading()){try{h=g.frame.dom;if(h.stop){h.stop()}else{h.document.execCommand("Stop")}}catch(j){}}Ext.data.request.Base.prototype.abort.call(this,f);g.onComplete();g.cleanup()},cleanup:function(){var d=this,c=d.frame;if(c){c.un("load",d.onComplete,d);Ext.removeNode(c)}d.frame=d.form=null},isLoading:function(){return !!this.frame},upload:function(S,N,J,O){S=Ext.getDom(S);O=O||{};var v=document.createElement("iframe"),I=Ext.get(v),F=I.id,R=[],Q="multipart/form-data",h={target:S.target,method:S.method,encoding:S.encoding,enctype:S.enctype,action:S.action},T=function(b,a){M=document.createElement("input");Ext.fly(M).set({type:"hidden",value:a,name:b});S.appendChild(M);R.push(M)},M,K,D,H,E,L,G,C,P;I.set({name:F,cls:"x-hidden-display",src:Ext.SSL_SECURE_URL,tabIndex:-1});document.body.appendChild(v);if(document.frames){document.frames[F].name=F}Ext.fly(S).set({target:F,method:"POST",enctype:Q,encoding:Q,action:N||h.action});if(J){K=Ext.Object.fromQueryString(J)||{};for(H in K){if(K.hasOwnProperty(H)){D=K[H];if(Ext.isArray(D)){E=D.length;for(L=0;L<E;L++){T(H,D[L])}}else{T(H,D)}}}}this.frame=I;I.on({load:this.onComplete,scope:this,single:!Ext.isOpera});S.submit();Ext.fly(S).set(h);for(G=R.length,C=0;C<G;C++){Ext.removeNode(R[C])}return S},getDoc:function(){var b=this.frame.dom;return(b&&(b.contentWindow.document||b.contentDocument))||(window.frames[b.id]||{}).document},getTimeout:function(){return this.options.timeout},onComplete:function(){var t=this,y=t.frame,z=t.owner,p=t.options,r,s,q,v,w;if(!y){return}if(t.aborted||t.timedout){t.result=w=t.createException();w.responseXML=null;w.responseText='{success:false,message:"'+Ext.String.trim(w.statusText)+'"}';r=p.failure;q=false}else{try{s=t.getDoc();t.result=w={responseText:"",responseXML:null};if(s){if(Ext.isOpera&&s.location==Ext.SSL_SECURE_URL){return}if(s.body){if((v=s.body.firstChild)&&/pre/i.test(v.tagName)){w.responseText=v.textContent||v.innerText}else{if((v=s.getElementsByTagName("textarea")[0])){w.responseText=v.value}else{w.responseText=s.body.textContent||s.body.innerText}}}w.responseXML=s.XMLDocument||s;r=p.success;q=true;w.status=200}else{Ext.raise("Could not acquire a suitable connection for the file upload service.")}}catch(u){t.result=w=t.createException();w.status=400;w.statusText=(u.message||u.description)+"";w.responseText='{success:false,message:"'+Ext.String.trim(w.statusText)+'"}';w.responseXML=null;r=p.failure;q=false}}t.frame=null;t.success=q;z.fireEvent(q?"requestcomplete":"requestexception",z,w,p);Ext.callback(r,p.scope,[w,p]);Ext.callback(p.callback,p.scope,[p,q,w]);z.onRequestComplete(t);Ext.asap(y.destroy,y);Ext.data.request.Base.prototype.onComplete.call(this)},destroy:function(){this.cleanup();Ext.data.request.Base.prototype.destroy.call(this)}},0,0,0,0,["request.form"],0,[Ext.data.request,"Form"],0));(Ext.cmd.derive("Ext.data.Connection",Ext.Base,{statics:{requestId:0},enctypeRe:/multipart\/form-data/i,config:{url:null,async:true,username:"",password:"",disableCaching:true,withCredentials:false,binary:false,cors:false,isXdr:false,defaultXdrContentType:"text/plain",disableCachingParam:"_dc",timeout:30000,extraParams:null,autoAbort:false,method:null,defaultHeaders:null,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:true,defaultXhrHeader:"XMLHttpRequest"},constructor:function(b){this.mixins.observable.constructor.call(this,b);this.requests={}},request:function(f){f=f||{};var h=this,g,j;if(h.fireEvent("beforerequest",h,f)!==false){g=h.setOptions(f,f.scope||Ext.global);j=h.createRequest(f,g);return j.start(g.data)}Ext.callback(f.callback,f.scope,[f,undefined,undefined]);return Ext.Deferred.rejected([f,undefined,undefined])},createRequest:function(g,h){var j=this,o=g.type||h.type,m;if(!o){o=j.isFormUpload(g)?"form":"ajax"}if(g.autoAbort||j.getAutoAbort()){j.abort()}m=Ext.Factory.request({type:o,owner:j,options:g,requestOptions:h,ownerConfig:j.getConfig()});j.requests[m.id]=m;j.latestId=m.id;return m},isFormUpload:function(d){var c=this.getForm(d);if(c){return d.isUpload||this.enctypeRe.test(c.getAttribute("enctype"))}return false},getForm:function(b){return Ext.getDom(b.form)},setOptions:function(r,s){var u=this,z=r.params||{},v=u.getExtraParams(),A=r.urlParams,B=r.url||u.getUrl(),w=r.cors,t=r.jsonData,C,D,y;if(w!==undefined){u.setCors(w)}if(Ext.isFunction(z)){z=z.call(s,r)}if(Ext.isFunction(B)){B=B.call(s,r)}B=this.setupUrl(r,B);y=r.rawData||r.binaryData||r.xmlData||t||null;if(t&&!Ext.isPrimitive(t)){y=Ext.encode(y)}if(r.binaryData){if(u.nativeBinaryPostSupport()){y=(new Uint8Array(r.binaryData));if((Ext.isChrome&&Ext.chromeVersion<22)||Ext.isSafari||Ext.isGecko){y=y.buffer}}}if(Ext.isObject(z)){z=Ext.Object.toQueryString(z)}if(Ext.isObject(v)){v=Ext.Object.toQueryString(v)}z=z+((v)?((z)?"&":"")+v:"");A=Ext.isObject(A)?Ext.Object.toQueryString(A):A;z=this.setupParams(r,z);C=(r.method||u.getMethod()||((z||y)?"POST":"GET")).toUpperCase();this.setupMethod(r,C);D=r.disableCaching!==false?(r.disableCaching||u.getDisableCaching()):false;if(C==="GET"&&D){B=Ext.urlAppend(B,(r.disableCachingParam||u.getDisableCachingParam())+"="+(new Date().getTime()))}if((C=="GET"||y)&&z){B=Ext.urlAppend(B,z);z=null}if(A){B=Ext.urlAppend(B,A)}return{url:B,method:C,data:y||z||null}},setupUrl:function(d,f){var g=this.getForm(d);if(g){f=f||g.action}return f},setupParams:function(g,h){var j=this.getForm(g),f;if(j&&!this.isFormUpload(g)){f=Ext.Element.serializeForm(j);h=h?(h+"&"+f):f}return h},setupMethod:function(d,c){if(this.isFormUpload(d)){return"POST"}return c},isLoading:function(b){if(!b){b=this.getLatest()}return b?b.isLoading():false},abort:function(b){if(!b){b=this.getLatest()}if(b&&b.isLoading()){b.abort()}},abortAll:function(){var c=this.requests,d;for(d in c){this.abort(c[d])}},getLatest:function(){var c=this.latestId,d;if(c){d=this.requests[c]}return d||null},clearTimeout:function(b){if(!b){b=this.getLatest()}if(b){b.clearTimer()}},onRequestComplete:function(b){delete this.requests[b.id]},nativeBinaryPostSupport:function(){return Ext.isChrome||(Ext.isSafari&&Ext.isDefined(window.Uint8Array))||(Ext.isGecko&&Ext.isDefined(window.Uint8Array))}},1,0,0,0,0,[["observable",Ext.mixin.Observable]],[Ext.data,"Connection"],0));(Ext.cmd.derive("Ext.Ajax",Ext.data.Connection,{singleton:true,autoAbort:false},0,0,0,0,0,0,[Ext,"Ajax"],0));(Ext.cmd.derive("Ext.AnimationQueue",Ext.Base,{singleton:true,constructor:function(){var b=this;b.queue=[];b.taskQueue=[];b.runningQueue=[];b.idleQueue=[];b.isRunning=false;b.isIdle=true;b.run=Ext.Function.bind(b.run,b);if(Ext.os.is.iOS){Ext.interval(b.watch,500,b)}},start:function(j,f,g){var h=this;h.queue.push(arguments);if(!h.isRunning){if(h.hasOwnProperty("idleTimer")){clearTimeout(h.idleTimer);delete h.idleTimer}if(h.hasOwnProperty("idleQueueTimer")){clearTimeout(h.idleQueueTimer);delete h.idleQueueTimer}h.isIdle=false;h.isRunning=true;h.doStart()}},watch:function(){if(this.isRunning&&Ext.now()-this.lastRunTime>=500){this.run()}},run:function(){var j=this;if(!j.isRunning){return}var h=j.runningQueue,g=Ext.now(),o,m;j.lastRunTime=g;j.frameStartTime=g;h.push.apply(h,j.queue);for(o=0,m=h.length;o<m;o++){j.invoke(h[o])}h.length=0;j.doIterate()},doStart:function(){this.animationFrameId=Ext.Function.requestAnimationFrame(this.run);this.lastRunTime=Ext.now()},doIterate:function(){this.animationFrameId=Ext.Function.requestAnimationFrame(this.run)},doStop:function(){Ext.Function.cancelAnimationFrame(this.animationFrameId)},stop:function(s,t,m){var p=this;if(!p.isRunning){return}var o=p.queue,q=o.length,u,r;for(u=0;u<q;u++){r=o[u];if(r[0]===s&&r[1]===t&&r[2]===m){o.splice(u,1);u--;q--}}if(q===0){p.doStop();p.isRunning=false;p.idleTimer=Ext.defer(p.whenIdle,100,p)}},onIdle:function(q,r,m){var s=this.idleQueue,j,p,o;for(j=0,p=s.length;j<p;j++){o=s[j];if(q===o[0]&&r===o[1]&&m===o[2]){return}}s.push(arguments);if(this.isIdle){this.processIdleQueue()}},unIdle:function(q,r,m){var s=this.idleQueue,j,p,o;for(j=0,p=s.length;j<p;j++){o=s[j];if(q===o[0]&&r===o[1]&&m===o[2]){s.splice(j,1);return true}}return false},queueTask:function(g,d,f){this.taskQueue.push(arguments);this.processTaskQueue()},dequeueTask:function(q,r,m){var s=this.taskQueue,j,p,o;for(j=0,p=s.length;j<p;j++){o=s[j];if(q===o[0]&&r===o[1]&&m===o[2]){s.splice(j,1);j--;p--}}},invoke:function(h){var j=h[0],f=h[1],g=h[2];j=(typeof j=="string"?f[j]:j);if(Ext.isArray(g)){j.apply(f,g)}else{j.call(f,g)}},whenIdle:function(){this.isIdle=true;this.processIdleQueue()},processIdleQueue:function(){if(!this.hasOwnProperty("idleQueueTimer")){this.idleQueueTimer=Ext.defer(this.processIdleQueueItem,1,this)}},processIdleQueueItem:function(){delete this.idleQueueTimer;if(!this.isIdle){return}var d=this.idleQueue,c;if(d.length>0){c=d.shift();this.invoke(c);this.processIdleQueue()}},processTaskQueue:function(){if(!this.hasOwnProperty("taskQueueTimer")){this.taskQueueTimer=Ext.defer(this.processTaskQueueItem,15,this)}},processTaskQueueItem:function(){delete this.taskQueueTimer;var d=this.taskQueue,c;if(d.length>0){c=d.shift();this.invoke(c);this.processTaskQueue()}}},1,0,0,0,0,0,[Ext,"AnimationQueue"],0));(Ext.cmd.derive("Ext.ComponentManager",Ext.Base,{alternateClassName:"Ext.ComponentMgr",singleton:true,count:0,typeName:"xtype",constructor:function(d){var c=this;Ext.apply(c,d||{});c.all={};c.references={};c.onAvailableCallbacks={}},create:function(d,c){if(typeof d==="string"){return Ext.widget(d)}if(d.isComponent){return d}if("xclass" in d){return Ext.create(d.xclass,d)}return Ext.widget(d.xtype||c,d)},get:function(b){return this.all[b]},register:function(h){var j=this,m=j.all,o=h.getId(),g=j.onAvailableCallbacks;m[o]=h;if(h.getReference&&h.getReference()){j.references[o]=h}++j.count;if(!j.hasFocusListener){Ext.on("focus",j.onGlobalFocus,j);j.hasFocusListener=true}g=g&&g[o];if(g&&g.length){j.notifyAvailable(h)}},unregister:function(d){var c=d.getId();if(d.getReference&&d.getReference()){this.references[c]=null;delete this.references[c]}this.all[c]=null;delete this.all[c];this.count--},markReferencesDirty:function(){this.referencesDirty=true},fixReferences:function(){var g=this,d=g.references,f;if(g.referencesDirty){for(f in d){if(d.hasOwnProperty(f)){d[f].fixReference()}}g.referencesDirty=false}},onAvailable:function(o,s,j){var p=this,q=p.onAvailableCallbacks,m=p.all,r;if(o in m){r=m[o];s.call(j||r,r)}else{if(o){if(!Ext.isArray(q[o])){q[o]=[]}q[o].push(function(a){s.call(j||a,a)})}}},notifyAvailable:function(c){var d=this.onAvailableCallbacks[c&&c.getId()]||[];while(d.length){(d.shift())(c)}},each:function(c,d){return Ext.Object.each(this.all,c,d)},getCount:function(){return this.count},getAll:function(){return Ext.Object.getValues(this.all)},getActiveComponent:function(){return Ext.Component.fromElement(Ext.dom.Element.getActiveElement())},onGlobalFocus:function(q){var t=this,m=q.toElement,p=q.fromElement,r=Ext.Component.fromElement(m),o=Ext.Component.fromElement(p),u,s;if(r===o){return}u=t.getCommonAncestor(o,r);if(o&&!(o.destroyed||o.destroying)){if(o.handleBlurEvent){o.handleBlurEvent(q)}for(s=o;s&&s!==u;s=s.getRefOwner()){if(!(s.destroyed||s.destroying)){s.onFocusLeave({event:q.event,type:"focusleave",target:p,relatedTarget:m,fromComponent:o,toComponent:r})}}}if(r&&!r.destroyed){if(r.handleFocusEvent){r.handleFocusEvent(q)}for(s=r;s&&s!==u;s=s.getRefOwner()){s.onFocusEnter({event:q.event,type:"focusenter",relatedTarget:p,target:m,fromComponent:o,toComponent:r})}}},getCommonAncestor:function(c,d){if(c===d){return c}while(c&&!(c.isAncestor(d)||c===d)){c=c.getRefOwner()}return c},privates:{clearAll:function(){this.all={};this.references={};this.onAvailableCallbacks={}},fromElement:function(v,t,u){var q=Ext.getDom(v),w=this.all,s=0,o,r,p;if(typeof t!=="number"){o=Ext.getDom(t);t=Number.MAX_VALUE}while(q&&q.nodeType===1&&s<t&&q!==o){r=q.getAttribute("data-componentid")||q.id;if(r){p=w[r];if(p&&(!u||Ext.ComponentQuery.is(p,u))){return p}s++}q=q.parentNode}return null}},deprecated:{5:{methods:{isRegistered:null,registerType:null}}}},1,0,0,0,0,0,[Ext,"ComponentManager",Ext,"ComponentMgr"],function(){Ext.getCmp=function(b){return Ext.ComponentManager.get(b)}}));Ext.ns("Ext.util").Operators={"=":function(a,d){return a==d},"!=":function(a,d){return a!=d},"^=":function(a,d){return a&&a.substr(0,d.length)==d},"$=":function(a,d){return a&&a.substr(a.length-d.length)==d},"*=":function(a,d){return a&&a.indexOf(d)!==-1},"%=":function(a,d){return(a%d)===0},"|=":function(a,d){return a&&(a==d||a.substr(0,d.length+1)==d+"-")},"~=":function(a,d){return a&&(" "+a+" ").indexOf(" "+d+" ")!=-1}};(Ext.cmd.derive("Ext.util.LruCache",Ext.util.HashMap,{config:{maxSize:null},add:function(h,j){var m=this,o,g;m.removeAtKey(h);g=m.last;o={prev:g,next:null,key:h,value:j};if(g){g.next=o}else{m.first=o}m.last=o;Ext.util.HashMap.prototype.add.call(this,h,o);m.prune();return j},insertBefore:function(h,m,q){var o=this,j,p;if(q=this.map[this.findKey(q)]){j=o.findKey(m);if(j){o.unlinkEntry(p=o.map[j])}else{p={prev:q.prev,next:q,key:h,value:m}}if(q.prev){p.prev.next=p}else{o.first=p}p.next=q;q.prev=p;o.prune();return m}else{return o.add(h,m)}},get:function(d){var c=this.map[d];if(c){if(c.next){this.moveToEnd(c)}return c.value}},removeAtKey:function(b){this.unlinkEntry(this.map[b]);return Ext.util.HashMap.prototype.removeAtKey.apply(this,arguments)},clear:function(b){this.first=this.last=null;return Ext.util.HashMap.prototype.clear.call(this,b)},unlinkEntry:function(b){if(b){if(b.next){b.next.prev=b.prev}else{this.last=b.prev}if(b.prev){b.prev.next=b.next}else{this.first=b.next}b.prev=b.next=null}},moveToEnd:function(b){this.unlinkEntry(b);if(b.prev=this.last){this.last.next=b}else{this.first=b}this.last=b},getArray:function(g){var f=[],d=this.first;while(d){f.push(g?d.key:d.value);d=d.next}return f},each:function(q,h,j){var m=this,o=j?m.last:m.first,p=m.length;h=h||m;while(o){if(q.call(h,o.key,o.value,p)===false){break}o=j?o.prev:o.next}return m},findKey:function(d){var f,g=this.map;for(f in g){if(g.hasOwnProperty(f)&&g[f].value===d){return f}}return undefined},clone:function(){var f=new this.self(this.initialConfig),g=this.map,d;f.suspendEvents();for(d in g){if(g.hasOwnProperty(d)){f.add(d,g[d].value)}}f.resumeEvents();return f},prune:function(){var d=this,f=d.getMaxSize(),g=f?(d.length-f):0;if(g>0){for(;d.first&&g;g--){d.removeAtKey(d.first.key)}}},destroy:function(){this.first=this.last=null;Ext.util.HashMap.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.util,"LruCache"],0));(Ext.cmd.derive("Ext.ComponentQuery",Ext.Base,{singleton:true},0,0,0,0,0,0,[Ext,"ComponentQuery"],function(){var K=this,y=Ext.util.Operators,G=/(\d*)n\+?(\d*)/,L=/\D/,E=/^(\s)+/,F=/\\(.)/g,D=new Ext.util.LruCache({maxSize:100}),C=["var r = [],","i = 0,","it = items,","l = it.length,","c;","for (; i < l; i++) {","c = it[i];","if (c.{0}) {","r.push(c);","}","}","return r;"].join(""),B=function(a,b){return b.method.apply(this,[a].concat(b.args))},P=function(a,b){var h=[],g=0,c=a.length,f,d=b!==">";for(;g<c;g++){f=a[g];if(f.getRefItems){h=h.concat(f.getRefItems(d))}}return h},J=function(c){var f=[],a=0,b=c.length,d;for(;a<b;a++){d=c[a];while(!!(d=d.getRefOwner())){f.push(d)}}return f},M=function(f,b,c){if(b==="*"){return f.slice()}else{var h=[],a=0,d=f.length,g;for(;a<d;a++){g=f[a];if(g.isXType(b,c)){h.push(g)}}return h}},O=function(p,o,c,d){var g=[],q=0,f=p.length,j,a,m,h,r,s,b;if(o.charAt(0)==="@"){j=true;o=o.substr(1)}if(o.charAt(0)==="?"){j=true;a=true;o=o.substr(1)}for(;q<f;q++){m=p[q];b=m.getConfigurator&&m.self.$config.configs[o];if(b){h=m[b.names.get]()}else{if(j&&!m.hasOwnProperty(o)){continue}else{h=m[o]}}if(a){g.push(m)}else{if(c==="~="){if(h){if(!Ext.isArray(h)){h=h.split(" ")}for(r=0,s=h.length;r<s;r++){if(y[c](Ext.coerce(h[r],d),d)){g.push(m);break}}}}else{if(c==="/="){if(h!=null&&d.test(h)){g.push(m)}}else{if(!d?!!m[o]:y[c](Ext.coerce(h,d),d)){g.push(m)}}}}}return g},I=function(d,b){var g=[],a=0,c=d.length,f;for(;a<c;a++){f=d[a];if(f.getItemId()===b){g.push(f)}}return g},z=function(c,b,a){return K.pseudos[b](c,a)},H=/^(\s?([>\^])\s?|\s|$)/,A=/^(#)?((?:\\\.|[\w\-])+|\*)(?:\((true|false)\))?/,N=[{re:/^\.((?:\\\.|[\w\-])+)(?:\((true|false)\))?/,method:M,argTransform:function(a){if(a[1]!==undefined){a[1]=a[1].replace(F,"$1")}return a.slice(1)}},{re:/^(?:\[((?:[@?$])?[\w\-]*)\s*(?:([\^$*~%!\/]?=)\s*(['"])?((?:\\\]|.)*?)\3)?(?!\\)\])/,method:O,argTransform:function(g){var f=g[0],d=g[1],c=g[2],a=g[4],b;if(a!==undefined){a=a.replace(F,"$1")}if(c==="/="){b=D.get(a);if(b){a=b}else{a=D.add(a,new RegExp(a))}}return[d,c,a]}},{re:/^#((?:\\\.|[\w\-])+)/,method:I},{re:/^\:([\w\-]+)(?:\(((?:\{[^\}]+\})|(?:(?!\{)[^\s>\/]*?(?!\})))\))?/,method:z,argTransform:function(a){if(a[2]!==undefined){a[2]=a[2].replace(F,"$1")}return a.slice(1)}},{re:/^(?:\{([^\}]+)\})/,method:C}];K.Query=Ext.extend(Object,{constructor:function(a){a=a||{};Ext.apply(this,a)},execute:function(a){var g=this.operations,d=[],b,c,f;for(c=0,f=g.length;c<f;c++){b=g[c];d=d.concat(this._execute(a,b))}return d},_execute:function(d,g){var c=0,b=g.length,a,f;if(!d){f=Ext.ComponentManager.getAll()}else{if(Ext.isIterable(d)){f=d}else{if(d.isMixedCollection){f=d.items}}}for(;c<b;c++){a=g[c];if(a.mode==="^"){f=J(f||[d])}else{if(a.mode){f=P(f||[d],a.mode)}else{f=B(f||P([d]),a)}}if(c===b-1){return f}}return[]},is:function(g){var a=this.operations,d=false,f=a.length,b,c;if(f===0){return true}for(c=0;c<f;c++){b=a[c];d=this._is(g,b);if(d){return d}}return false},_is:function(j,g){var o=g.length,f=[j],d,b,c,a,m,h;for(b=o-1;b>=0;--b){d=g[b];a=d.mode;if(a){if(a==="^"){f=P(f," ")}else{if(a===">"){m=[];for(c=0,o=f.length;c<o;++c){h=f[c].getRefOwner();if(h){m.push(h)}}f=m}else{f=J(f)}}if(f.length===0){return false}}else{f=B(f,d);if(f.length===0){return false}}}return true},getMatches:function(d,b){var c=b.length,a;for(a=0;a<c;++a){d=B(d,b[a]);if(d.length===0){break}}return d},isMultiMatch:function(){return this.operations.length>1}});Ext.apply(K,{cache:new Ext.util.LruCache({maxSize:100}),pseudos:{not:function(b,h){var f=0,c=b.length,g=[],a=-1,d;for(;f<c;++f){d=b[f];if(!K.is(d,h)){g[++a]=d}}return g},first:function(a){var b=[];if(a.length>0){b.push(a[0])}return b},last:function(a){var c=a.length,b=[];if(c>0){b.push(a[c-1])}return b},focusable:function(c){var f=c.length,d=[],a=0,b;for(;a<f;a++){b=c[a];if(b.isFocusable&&b.isFocusable()){d.push(b)}}return d},"nth-child":function(m,j){var h=[],f=G.exec(j==="even"&&"2n"||j==="odd"&&"2n+1"||!L.test(j)&&"n+"+j||j),b=(f[1]||1)-0,a=f[2]-0,c,g,d;for(c=0;g=m[c];c++){d=c+1;if(b===1){if(a===0||d===a){h.push(g)}}else{if((d+a)%b===0){h.push(g)}}}return h},scrollable:function(c){var f=c.length,d=[],a=0,b;for(;a<f;a++){b=c[a];if(b.scrollable||b._scrollable){d.push(b)}}return d}},query:function(g,j){if(!g){return Ext.ComponentManager.all.getArray()}var d=[],h=[],a={},b=K.cache.get(g),c,m,f;if(!b){b=K.cache.add(g,K.parse(g))}d=b.execute(j);if(b.isMultiMatch()){c=d.length;for(f=0;f<c;f++){m=d[f];if(!a[m.id]){h.push(m);a[m.id]=true}}d=h}return d},visitPreOrder:function(f,a,c,d,b){K._visit(true,f,a,c,d,b)},visitPostOrder:function(f,a,c,d,b){K._visit(false,f,a,c,d,b)},_visit:function(j,f,m,o,h,a){var p=K.cache.get(f),b=[m],g,q=0,c,d;if(!p){p=K.cache.add(f,K.parse(f))}d=p.is(m);if(m.getRefItems){g=m.getRefItems();q=g.length}if(a){Ext.Array.push(b,a)}if(j){if(d){if(o.apply(h||m,b)===false){return false}}}for(c=0;c<q;c++){if(K._visit.call(K,j,f,g[c],o,h,a)===false){return false}}if(!j){if(d){if(o.apply(h||m,b)===false){return false}}}},is:function(b,c){if(!c){return true}var a=K.cache.get(c);if(!a){a=K.cache.add(c,K.parse(c))}return a.is(b)},parse:function(d){var a=[],c,b,g,f;c=Ext.splitAndUnescape(d,",");for(g=0,f=c.length;g<f;g++){b=Ext.String.trim(c[g]);a.push(K._parse(b))}return new K.Query({operations:a})},_parse:function(t){var h=[],b=Ext.String.trim,d=N.length,o,s,a,m,g,f,c,r,q,j,p;while(t&&o!==t){o=t;s=t.match(A);if(s){m=s[1];a=b(s[2]).replace(F,"$1");if(m==="#"){h.push({method:I,args:[a]})}else{h.push({method:M,args:[a,Boolean(s[3])]})}t=t.replace(s[0],"").replace(E,"$1")}while(!(g=t.match(H))){for(r=0;t&&r<d;r++){q=N[r];f=t.match(q.re);j=q.method;c=q.argTransform;if(f){if(c){p=c(f)}else{p=f.slice(1)}h.push({method:Ext.isString(q.method)?Ext.functionFactory("items",Ext.String.format.apply(Ext.String,[j].concat(f.slice(1)))):q.method,args:p});t=t.replace(f[0],"").replace(E,"$1");break}if(r===(d-1)){Ext.raise('Invalid ComponentQuery selector: "'+arguments[0]+'"')}}}if(g[1]){h.push({mode:g[2]||g[1]});t=t.replace(g[0],"").replace(E,"")}}return h}});Ext.all=function(){return K.query.apply(K,arguments)};Ext.first=function(){var a=K.query.apply(K,arguments);return(a&&a[0])||null}}));(Ext.cmd.derive("Ext.Evented",Ext.Base,{alternateClassName:"Ext.EventedBase",initialized:false,constructor:function(b){this.mixins.observable.constructor.call(this,b);this.initialized=true},onClassExtended:function(h,o){if(!o.hasOwnProperty("eventedConfig")){return}var p=o.config,m=o.eventedConfig,q,j;if(p){Ext.applyIf(p,m)}else{h.addConfig(m)}for(q in m){if(m.hasOwnProperty(q)){j=Ext.Config.get(q);o[j.names.set]=j.eventedSetter||j.getEventedSetter()}}}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext,"Evented",Ext,"EventedBase"],0));(Ext.cmd.derive("Ext.util.Positionable",Ext.Base,{mixinId:"positionable",_positionTopLeft:["position","top","left"],_alignRe:/^([a-z]+)-([a-z]+)([?!])?$/,afterSetPosition:Ext.emptyFn,adjustForConstraints:function(g,d){var f=this.getConstrainVector(d,g);if(f){g[0]+=f[0];g[1]+=f[1]}return g},alignTo:function(q,j,m,h){var o=this,p=o.el;return o.setXY(o.getAlignToXY(q,j,m),p.anim&&!!h?p.anim(h):false)},calculateAnchorXY:function(y,v,w,A){var u=this,B=u.el,t=document,z=(B.dom===t.body||B.dom===t),s=Math.round,r,C,D;y=(y||"tl").toLowerCase();A=A||{};C=A.width||(z?Ext.Element.getViewportWidth():u.getWidth());D=A.height||(z?Ext.Element.getViewportHeight():u.getHeight());switch(y){case"tl":r=[0,0];break;case"bl":r=[0,D];break;case"tr":r=[C,0];break;case"c":r=[s(C*0.5),s(D*0.5)];break;case"t":r=[s(C*0.5),0];break;case"l":r=[0,s(D*0.5)];break;case"r":r=[C,s(D*0.5)];break;case"b":r=[s(C*0.5),D];break;case"tc":r=[s(C*0.5),0];break;case"bc":r=[s(C*0.5),D];break;case"br":r=[C,D]}return[r[0]+v,r[1]+w]},convertPositionSpec:Ext.identityFn,getAlignToXY:function(R,K,V){var J=this,W,N,Z,T,F,U,E,y,H,G,P,I,L,Y,X,S,O,M,Q;R=Ext.get(R.el||R);if(!R||!R.dom){}V=V||[0,0];K=(!K||K==="?"?"tl-bl?":(!(/-/).test(K)&&K!==""?"tl-"+K:K||"tl-bl")).toLowerCase();K=J.convertPositionSpec(K);Z=K.match(J._alignRe);I=Z[1];L=Z[2];P=!!Z[3];T=J.getAnchorXY(I,true);F=J.getAnchorToXY(R,L,false);M=F[0]-T[0]+V[0];Q=F[1]-T[1]+V[1];if(P){if(Z[3]==="!"){W=R}else{W=J.constrainTo||J.container||J.el.parent()}W=Ext.get(W.el||W);N=W.getConstrainRegion();N.right=N.left+W.el.dom.clientWidth;U=J.getWidth();E=J.getHeight();y=R.getRegion();Y=I.charAt(0);X=I.charAt(I.length-1);S=L.charAt(0);O=L.charAt(L.length-1);H=(M<y.right&&M+U>=y.left)&&((Y=="t"&&S=="b")||(Y=="b"&&S=="t"));G=(Q<y.bottom&&Q+E>=y.top)&&((X=="r"&&O=="l")||(X=="l"&&O=="r"));if(M+U>N.right){if(G){M=y.left-U;G=false}else{M=N.right-U}}if(M<N.left){M=G?y.right:N.left}if(Q+E>N.bottom){if(H){Q=y.top-E;H=false}else{Q=N.bottom-E}}if(Q<N.top){Q=H?y.bottom:N.top}}return[M,Q]},getAnchorXY:function(y,t,A){var u=this,s=u.getXY(),B=u.el,q=document,z=B.dom==q.body||B.dom==q,r=B.getScroll(),v=z?r.left:t?0:s[0],w=z?r.top:t?0:s[1];return u.calculateAnchorXY(y,v,w,A)},getBox:function(y,u){var w=this,h=u?w.getLocalXY():w.getXY(),t=h[0],v=h[1],s=w.getWidth(),A=w.getHeight(),z,B,r;if(y){z=w.getBorderPadding();B=z.beforeX;r=z.beforeY;t+=B;v+=r;s-=(B+z.afterX);A-=(r+z.afterY)}return{x:t,left:t,0:t,y:v,top:v,1:v,width:s,height:A,right:t+s,bottom:v+A}},calculateConstrainedPosition:function(z,E,u,C){var v=this,D,y=v.floatParent,B=y?y.getTargetEl():null,F,A,w,s=false,t;if(u&&y){F=B.getXY();A=B.getBorderPadding();F[0]+=A.beforeX;F[1]+=A.beforeY;if(E){w=[E[0]+F[0],E[1]+F[1]]}}else{w=E}z=z||v.constrainTo||B||v.container||v.el.parent();if(u&&w){w=v.reverseTranslateXY(w)}D=((v.constrainHeader&&v.header.rendered)?v.header:v).getConstrainVector(z,w,C);if(D){s=E||v.getPosition(u);s[0]+=D[0];s[1]+=D[1]}return s},getConstrainRegion:function(){var u=this,z=u.el,B=z.dom.nodeName==="BODY",w=z.dom,v=z.getBorders(),t=z.getXY(),y=t[0]+v.beforeX,s=t[1]+v.beforeY,r,A,q;if(B){r=z.getScroll();y=r.left;s=r.top;A=Ext.Element.getViewportWidth();q=Ext.Element.getViewportHeight()}else{A=w.clientWidth;q=w.clientHeight}return new Ext.util.Region(s,y+A,s+q,y)},getConstrainVector:function(q,u,s){var w=this.getRegion(),t=[0,0],v=(this.shadow&&this.constrainShadow&&!this.shadowDisabled)?this.shadow.getShadowSize():undefined,o=false,p,r=this.constraintInsets;if(!(q instanceof Ext.util.Region)){q=Ext.get(q.el||q);p=q.getViewSize();q=q.getConstrainRegion();q.right=q.left+p.width;q.bottom=q.top+p.height}if(r){r=Ext.isObject(r)?r:Ext.Element.parseBox(r);q.adjust(r.top,r.right,r.bottom,r.left)}if(u){w.translateBy(u[0]-w.x,u[1]-w.y)}if(s){w.right=w.left+s[0];w.bottom=w.top+s[1]}if(v){q.adjust(v[0],-v[1],-v[2],v[3])}if(w.right>q.right){o=true;t[0]=(q.right-w.right)}if(w.left+t[0]<q.left){o=true;t[0]=(q.left-w.left)}if(w.bottom>q.bottom){o=true;t[1]=(q.bottom-w.bottom)}if(w.top+t[1]<q.top){o=true;t[1]=(q.top-w.top)}return o?t:false},getOffsetsTo:function(f){var g=this.getXY(),d=Ext.fly(f.el||f).getXY();return[g[0]-d[0],g[1]-d[1]]},getRegion:function(){var b=this.getBox();return new Ext.util.Region(b.top,b.right,b.bottom,b.left)},getClientRegion:function(){var f=this,g,j=f.getBox(),h=f.dom;g=h.offsetWidth-h.clientWidth;if(g){if(f.getStyle("direction")==="rtl"){j.left+=g}else{j.right-=g}}g=h.offsetHeight-h.clientHeight;if(g){j.bottom-=g}return new Ext.util.Region(j.top,j.right,j.bottom,j.left)},getViewRegion:function(){var t=this,w=t.el,z=w.dom.nodeName==="BODY",u,q,s,r,v,y,p;if(z){q=w.getScroll();v=q.left;r=q.top;y=Ext.Element.getViewportWidth();p=Ext.Element.getViewportHeight()}else{u=t.getBorderPadding();s=t.getXY();v=s[0]+u.beforeX;r=s[1]+u.beforeY;y=t.getWidth(true);p=t.getHeight(true)}return new Ext.util.Region(r,v+y,r+p,v)},move:function(u,C,B){var y=this,r=y.getXY(),t=r[0],v=r[1],A=[t-C,v],s=[t+C,v],w=[t,v-C],D=[t,v+C],z={l:A,left:A,r:s,right:s,t:w,top:w,up:w,b:D,bottom:D,down:D};u=u.toLowerCase();y.setXY([z[u][0],z[u][1]],B)},setBox:function(j){var f=this,g,h;if(j.isRegion){j={x:j.left,y:j.top,width:j.right-j.left,height:j.bottom-j.top}}f.constrainBox(j);g=j.x;h=j.y;f.setXY([g,h]);f.setSize(j.width,j.height);f.afterSetPosition(g,h);return f},constrainBox:function(m){var o=this,g,h,j;if(o.constrain||o.constrainHeader){h=("x" in m)?m.x:m.left;j=("y" in m)?m.y:m.top;g=o.calculateConstrainedPosition(null,[h,j],false,[m.width,m.height]);if(g){m.x=g[0];m.y=g[1]}}},translatePoints:function(f,g){var d=this.translateXY(f,g);return{left:d.x,top:d.y}},translateXY:function(q,s){var t=this,v=t.el,p=v.getStyle(t._positionTopLeft),w=p.position==="relative",u=parseFloat(p.left),r=parseFloat(p.top),o=t.getXY();if(Ext.isArray(q)){s=q[1];q=q[0]}if(isNaN(u)){u=w?0:v.dom.offsetLeft}if(isNaN(r)){r=w?0:v.dom.offsetTop}u=(typeof q==="number")?q-o[0]+u:undefined;r=(typeof s==="number")?s-o[1]+r:undefined;return{x:u,y:r}},reverseTranslateXY:function(p){var r=p,w=this.el,q=[],v=w.dom,y=v.offsetParent,z,u,s,t;if(y){z=w.isStyle("position","relative"),u=Ext.fly(y).getXY(),s=p[0]+u[0]+y.clientLeft;t=p[1]+u[1]+y.clientTop;if(z){s+=w.getPadding("l");t+=w.getPadding("t")}r=[s,t]}return r}},0,0,0,0,0,0,[Ext.util,"Positionable"],0));Ext.define("Ext.overrides.util.Positionable",{override:"Ext.util.Positionable",anchorTo:function(s,u,y,z,q,p){var t=this,r=!Ext.isEmpty(q),w=function(){t.alignTo(s,u,y,z);Ext.callback(p,t)},v=t.getAnchor();t.removeAnchor();Ext.apply(v,{fn:w,scroll:r});Ext.on("resize",w,null);if(r){Ext.getWin().on("scroll",w,null,{buffer:!isNaN(q)?q:50})}w();return t},getAnchor:function(){var d=this.el,g,f;if(!d.dom){return}g=d.getData();f=g._anchor;if(!f){f=g._anchor={}}return f},removeAnchor:function(){var b=this.getAnchor();if(b&&b.fn){Ext.un("resize",b.fn);if(b.scroll){Ext.getWin().on("scroll",b.fn)}delete b.fn}return this},setBox:function(g,f){var d=this;if(g.isRegion){g={x:g.left,y:g.top,width:g.right-g.left,height:g.bottom-g.top}}if(f){d.constrainBox(g);d.animate(Ext.applyIf({to:g,listeners:{afteranimate:Ext.Function.bind(d.afterSetPosition,d,[g.x,g.y])}},f))}else{arguments.callee.$previous.call(this,g)}return d}});(Ext.cmd.derive("Ext.dom.UnderlayPool",Ext.Base,{constructor:function(b){this.elementConfig=b;this.cache=[]},checkOut:function(){var b=this.cache.shift();if(!b){b=Ext.Element.create(this.elementConfig);b.setVisibilityMode(2)}return b},checkIn:function(b){this.cache.push(b)},reset:function(){var d=this.cache,c=d.length;while(c--){d[c].destroy()}this.cache=[]}},1,0,0,0,0,0,[Ext.dom,"UnderlayPool"],0));(Ext.cmd.derive("Ext.dom.Underlay",Ext.Base,{constructor:function(b){Ext.apply(this,b)},beforeShow:Ext.emptyFn,getInsertionTarget:function(){return this.target},getPool:function(){return this.pool||(this.self.prototype.pool=new Ext.dom.UnderlayPool(this.elementConfig))},hide:function(){var c=this,d=c.el;if(d){d.hide();c.getPool().checkIn(d);c.el=null;c.hidden=true}},realign:function(p,q,w,o){var s=this,v=s.el,t=s.target,u=s.offsets,r=Math.max;if(v){if(p==null){p=t.getX()}if(q==null){q=t.getY()}if(w==null){w=t.getWidth()}if(o==null){o=t.getHeight()}if(u){p=p+u.x;q=q+u.y;w=r(w+u.w,0);o=r(o+u.h,0)}v.setXY([p,q]);v.setSize(w,o)}},setZIndex:function(b){this.zIndex=b;if(this.el){this.el.setStyle("z-index",b)}},show:function(){var h=this,p=h.target,m=h.zIndex,j=h.el,q=h.getInsertionTarget().dom,o;if(!j){j=h.el=h.getPool().checkOut()}h.beforeShow();if(m==null){m=(parseInt(p.getStyle("z-index"),10))}if(m){j.setStyle("z-index",m)}j.setStyle("position",h.fixed?"fixed":"");o=j.dom;if(o.nextSibling!==q){p.dom.parentNode.insertBefore(o,q)}j.show();h.realign();h.hidden=false}},1,0,0,0,0,0,[Ext.dom,"Underlay"],0));(Ext.cmd.derive("Ext.dom.Shadow",Ext.dom.Underlay,{alternateClassName:"Ext.Shadow",mode:"drop",offset:4,cls:"x-"+(!Ext.supports.CSS3BoxShadow?"ie":"css")+"-shadow",constructor:function(h){var p=this,o,q,m,j;Ext.dom.Underlay.prototype.constructor.call(this,h);p.elementConfig={cls:p.cls,role:"presentation"};m=p.offset;j=Math.floor(m/2);p.opacity=50;switch(p.mode.toLowerCase()){case"drop":o={x:0,y:0,w:m,h:m};if(Ext.supports.CSS3BoxShadow){q={x:m,y:m,h:-m,w:-m}}else{q={x:-j,y:-j,h:-j,w:-j}}break;case"sides":o={x:-m,y:0,w:m*2,h:m};if(Ext.supports.CSS3BoxShadow){q={x:0,y:m,h:-m,w:0}}else{q={x:1+j-2*m,y:-(1+j),h:-1,w:j-1}}break;case"frame":o={x:-m,y:-m,w:m*2,h:m*2};if(Ext.supports.CSS3BoxShadow){q={x:0,y:0,h:0,w:0}}else{q={x:1+j-2*m,y:1+j-2*m,h:m-j-1,w:m-j-1}}break;case"bottom":o={x:-m,y:0,w:m*2,h:m};if(Ext.supports.CSS3BoxShadow){q={x:0,y:m,h:-m,w:0}}else{q={x:0,y:m,h:0,w:0}}break}p.offsets=q;p.outerOffsets=o},getShadowSize:function(){var f=this,h=f.el?f.offset:0,g=[h,h,h,h],j=f.mode.toLowerCase();if(f.el&&j!=="frame"){g[0]=0;if(j=="drop"){g[3]=0}}return g},boxShadowProperty:(function(){var c="boxShadow",d=document.documentElement.style;if(!("boxShadow" in d)){if("WebkitBoxShadow" in d){c="WebkitBoxShadow"}else{if("MozBoxShadow" in d){c="MozBoxShadow"}}}return c}()),beforeShow:function(){var d=this,f=d.el.dom.style,g=d.shim;if(Ext.supports.CSS3BoxShadow){f[d.boxShadowProperty]="0 0 "+(d.offset+2)+"px #888"}else{f.filter="progid:DXImageTransform.Microsoft.alpha(opacity="+d.opacity+") progid:DXImageTransform.Microsoft.Blur(pixelradius="+(d.offset)+")"}if(g){g.realign()}},setOpacity:function(d){var c=this.el;if(c){if(Ext.isIE&&!Ext.supports.CSS3BoxShadow){d=Math.floor(d*100/2)/100}this.opacity=d;c.setOpacity(d)}}},1,0,0,0,0,0,[Ext.dom,"Shadow",Ext,"Shadow"],0));(Ext.cmd.derive("Ext.dom.Shim",Ext.dom.Underlay,{cls:"x-shim",constructor:function(b){Ext.dom.Underlay.prototype.constructor.call(this,b);this.elementConfig={tag:"iframe",cls:this.cls,role:"presentation",frameBorder:"0",src:Ext.SSL_SECURE_URL,tabindex:"-1"}},getInsertionTarget:function(){var b=this.shadow;return(b&&b.el)||this.target}},1,0,0,0,0,0,[Ext.dom,"Shim"],0));(Ext.cmd.derive("Ext.dom.ElementEvent",Ext.util.Event,{addListener:function(u,r,q,z,w){var v=this,t=false,B=v.name,A,y,s;q=q||{};if(q.delegated===false||Ext.event.publisher.Dom.instance.directEvents[B]){if(q.capture){s=v.directCaptures||(v.directCaptures=new Ext.util.Event(v.observable,B));t=s.addListener(u,r,q,z,w)}else{y=v.directs||(v.directs=new Ext.util.Event(v.observable,B));t=y.addListener(u,r,q,z,w)}}else{if(q.capture){A=v.captures||(v.captures=new Ext.util.Event(v.observable,B));t=A.addListener(u,r,q,z,w)}else{t=Ext.util.Event.prototype.addListener.call(this,u,r,q,z,w)}}return t},removeListener:function(s,t){var r=this,o=r.captures,u=r.directs,q=r.directCaptures,p=false,m=r.findListener(s,t);if(m!==-1){p=Ext.util.Event.prototype.removeListener.call(this,s,t,m)}else{if(u){m=u.findListener(s,t)}if(m!==-1){p=u.removeListener(s,t,m)}else{if(o){m=o.findListener(s,t)}if(m!==-1){p=o.removeListener(s,t,m)}else{if(q){m=q.findListener(s,t);if(m!==-1){p=q.removeListener(s,t,m)}}}}}return p},clearListeners:function(){var j=this,h=j.directCaptures,f=j.directs,g=j.captures;if(h){h.clearListeners()}if(f){f.clearListeners()}if(g){g.clearListeners()}Ext.util.Event.prototype.clearListeners.call(this)},suspend:function(){var j=this,h=j.directCaptures,f=j.directs,g=j.captures;if(h){h.suspend()}if(f){f.suspend()}if(g){g.suspend()}Ext.util.Event.prototype.suspend.call(this)},resume:function(){var j=this,h=j.directCaptures,f=j.directs,g=j.captures;if(h){h.resume()}if(f){f.resume()}if(g){g.resume()}Ext.util.Event.prototype.resume.call(this)}},0,0,0,0,0,0,[Ext.dom,"ElementEvent"],0));(Ext.cmd.derive("Ext.event.publisher.Publisher",Ext.Base,{handledEvents:[],statics:{publishers:{},publishersByEvent:{}},constructor:function(){var c=this,d=c.type;c.handles={};c.registerEvents();Ext.event.publisher.Publisher.publishers[d]=c},registerEvents:function(q){var o=this,r=Ext.event.publisher.Publisher.publishersByEvent,j=q||o.handledEvents,p=j.length,m,s;for(s=0;s<p;s++){m=j[s];o.handles[m]=1;r[m]=o}},fire:function(j,g,f){var h;if(j.hasListeners[g]){h=j.events[g];if(h){h.fire.apply(h,f)}}}},1,0,0,0,0,0,[Ext.event.publisher,"Publisher"],0));(Ext.cmd.derive("Ext.util.Offset",Ext.Base,{statics:{fromObject:function(b){return new this(b.x,b.y)}},constructor:function(d,c){this.x=(d!=null&&!isNaN(d))?d:0;this.y=(c!=null&&!isNaN(c))?c:0;return this},copy:function(){return new Ext.util.Offset(this.x,this.y)},copyFrom:function(b){this.x=b.x;this.y=b.y},toString:function(){return"Offset["+this.x+","+this.y+"]"},equals:function(b){return(this.x==b.x&&this.y==b.y)},round:function(c){if(!isNaN(c)){var d=Math.pow(10,c);this.x=Math.round(this.x*d)/d;this.y=Math.round(this.y*d)/d}else{this.x=Math.round(this.x);this.y=Math.round(this.y)}},isZero:function(){return this.x==0&&this.y==0}},3,0,0,0,0,0,[Ext.util,"Offset"],0));(Ext.cmd.derive("Ext.util.Region",Ext.Base,{isRegion:true,statics:{getRegion:function(b){return Ext.fly(b).getRegion()},from:function(b){return new this(b.top,b.right,b.bottom,b.left)}},constructor:function(j,g,h,m){var o=this;o.y=o.top=o[1]=j;o.right=g;o.bottom=h;o.x=o.left=o[0]=m},contains:function(c){var d=this;return(c.x>=d.x&&c.right<=d.right&&c.y>=d.y&&c.bottom<=d.bottom)},intersect:function(j){var m=this,p=Math.max(m.y,j.y),o=Math.min(m.right,j.right),b=Math.min(m.bottom,j.bottom),q=Math.max(m.x,j.x);if(b>p&&o>q){return new this.self(p,o,b,q)}else{return false}},union:function(j){var m=this,p=Math.min(m.y,j.y),o=Math.max(m.right,j.right),b=Math.max(m.bottom,j.bottom),q=Math.min(m.x,j.x);return new this.self(p,o,b,q)},constrainTo:function(d){var f=this,g=Ext.Number.constrain;f.top=f.y=g(f.top,d.y,d.bottom);f.bottom=g(f.bottom,d.y,d.bottom);f.left=f.x=g(f.left,d.x,d.right);f.right=g(f.right,d.x,d.right);return f},adjust:function(j,g,h,m){var o=this;o.top=o.y+=j;o.left=o.x+=m;o.right+=g;o.bottom+=h;return o},getOutOfBoundOffset:function(f,d){if(!Ext.isObject(f)){if(f=="x"){return this.getOutOfBoundOffsetX(d)}else{return this.getOutOfBoundOffsetY(d)}}else{d=f;var g=new Ext.util.Offset();g.x=this.getOutOfBoundOffsetX(d.x);g.y=this.getOutOfBoundOffsetY(d.y);return g}},getOutOfBoundOffsetX:function(b){if(b<=this.x){return this.x-b}else{if(b>=this.right){return this.right-b}}return 0},getOutOfBoundOffsetY:function(b){if(b<=this.y){return this.y-b}else{if(b>=this.bottom){return this.bottom-b}}return 0},isOutOfBound:function(d,c){if(!Ext.isObject(d)){if(d=="x"){return this.isOutOfBoundX(c)}else{return this.isOutOfBoundY(c)}}else{c=d;return(this.isOutOfBoundX(c.x)||this.isOutOfBoundY(c.y))}},isOutOfBoundX:function(b){return(b<this.x||b>this.right)},isOutOfBoundY:function(b){return(b<this.y||b>this.bottom)},restrict:function(f,h,g){if(Ext.isObject(f)){var j;g=h;h=f;if(h.copy){j=h.copy()}else{j={x:h.x,y:h.y}}j.x=this.restrictX(h.x,g);j.y=this.restrictY(h.y,g);return j}else{if(f=="x"){return this.restrictX(h,g)}else{return this.restrictY(h,g)}}},restrictX:function(c,d){if(!d){d=1}if(c<=this.x){c-=(c-this.x)*d}else{if(c>=this.right){c-=(c-this.right)*d}}return c},restrictY:function(c,d){if(!d){d=1}if(c<=this.y){c-=(c-this.y)*d}else{if(c>=this.bottom){c-=(c-this.bottom)*d}}return c},getSize:function(){return{width:this.right-this.x,height:this.bottom-this.y}},copy:function(){return new this.self(this.y,this.right,this.bottom,this.x)},copyFrom:function(c){var d=this;d.top=d.y=d[1]=c.y;d.right=c.right;d.bottom=c.bottom;d.left=d.x=d[0]=c.x;return this},toString:function(){return"Region["+this.top+","+this.right+","+this.bottom+","+this.left+"]"},translateBy:function(f,g){if(arguments.length==1){g=f.y;f=f.x}var d=this;d.top=d.y+=g;d.right+=f;d.bottom+=g;d.left=d.x+=f;return d},round:function(){var b=this;b.top=b.y=Math.round(b.y);b.right=Math.round(b.right);b.bottom=Math.round(b.bottom);b.left=b.x=Math.round(b.x);return b},equals:function(b){return(this.top===b.top&&this.right===b.right&&this.bottom===b.bottom&&this.left===b.left)}},3,0,0,0,0,0,[Ext.util,"Region"],0));(Ext.cmd.derive("Ext.util.Point",Ext.util.Region,{radianToDegreeConstant:180/Math.PI,origin:{x:0,y:0},statics:{fromEvent:function(d){var f=d.changedTouches,g=(f&&f.length>0)?f[0]:d;return this.fromTouch(g)},fromTouch:function(b){return new this(b.pageX,b.pageY)},from:function(b){if(!b){return new this(0,0)}if(!(b instanceof this)){return new this(b.x,b.y)}return b}},constructor:function(d,c){if(d==null){d=0}if(c==null){c=0}Ext.util.Region.prototype.constructor.call(this,c,d,c,d)},clone:function(){return new this.self(this.x,this.y)},copy:function(){return this.clone.apply(this,arguments)},copyFrom:function(b){this.x=b.x;this.y=b.y;return this},toString:function(){return"Point["+this.x+","+this.y+"]"},equals:function(b){return(this.x===b.x&&this.y===b.y)},isCloseTo:function(q,h){if(typeof h=="number"){return this.getDistanceTo(q)<=h}var j=q.x,m=q.y,o=h.x,p=h.y;return(this.x<=j+o&&this.x>=j-o&&this.y<=m+p&&this.y>=m-p)},isWithin:function(){return this.isCloseTo.apply(this,arguments)},isContainedBy:function(b){if(!(b instanceof Ext.util.Region)){b=Ext.get(b.el||b).getRegion()}return b.contains(this)},roundedEquals:function(b){if(!b||typeof b!=="object"){b=this.origin}return(Math.round(this.x)===Math.round(b.x)&&Math.round(this.y)===Math.round(b.y))},getDistanceTo:function(d){if(!d||typeof d!=="object"){d=this.origin}var g=this.x-d.x,f=this.y-d.y;return Math.sqrt(g*g+f*f)},getAngleTo:function(d){if(!d||typeof d!=="object"){d=this.origin}var g=this.x-d.x,f=this.y-d.y;return Math.atan2(f,g)*this.radianToDegreeConstant}},3,0,0,0,0,0,[Ext.util,"Point"],function(){this.prototype.translate=this.prototype.translateBy}));(Ext.cmd.derive("Ext.event.Event",Ext.Base,{alternateClassName:"Ext.EventObjectImpl",isStopped:false,defaultPrevented:false,isEvent:true,statics:{resolveTextNode:function(b){return(b&&b.nodeType===3)?b.parentNode:b},pointerEvents:{pointerdown:1,pointermove:1,pointerup:1,pointercancel:1,pointerover:1,pointerout:1,pointerenter:1,pointerleave:1,MSPointerDown:1,MSPointerMove:1,MSPointerUp:1,MSPointerOver:1,MSPointerOut:1,MSPointerCancel:1,MSPointerEnter:1,MSPointerLeave:1},mouseEvents:{mousedown:1,mousemove:1,mouseup:1,mouseover:1,mouseout:1,mouseenter:1,mouseleave:1},clickEvents:{click:1,dblclick:1},touchEvents:{touchstart:1,touchmove:1,touchend:1,touchcancel:1},focusEvents:{focus:1,blur:1,focusin:1,focusout:1,focusenter:1,focusleave:1},pointerTypes:{2:"touch",3:"pen",4:"mouse",touch:"touch",pen:"pen",mouse:"mouse"}},constructor:function(v){var r=this,o=r.self,s=r.self.resolveTextNode,p=v.changedTouches,u=p?p[0]:v,q=v.type,w,t;r.pageX=u.pageX;r.pageY=u.pageY;r.target=r.delegatedTarget=s(v.target);t=v.relatedTarget;if(t){r.relatedTarget=s(t)}r.browserEvent=r.event=v;r.type=q;r.button=v.button||0;r.shiftKey=v.shiftKey;r.ctrlKey=v.ctrlKey||v.metaKey||false;r.altKey=v.altKey;r.charCode=v.charCode;r.keyCode=v.keyCode;r.buttons=v.buttons;if(r.button===0&&r.buttons===0){r.buttons=1}if(o.forwardTab!==undefined&&o.focusEvents[q]){r.forwardTab=o.forwardTab}if(o.mouseEvents[q]||o.clickEvents[q]){w="mouse"}else{if(o.pointerEvents[q]){w=o.pointerTypes[v.pointerType]}else{if(o.touchEvents[q]){w="touch"}}}if(w){r.pointerType=w}r.timeStamp=r.time=+(v.timeStamp||new Date())},chain:function(d){var c=Ext.Object.chain(this);c.parentEvent=this;return Ext.apply(c,d)},correctWheelDelta:function(g){var d=this.WHEEL_SCALE,f=Math.round(g/d);if(!f&&g){f=(g<0)?-1:1}return f},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){return this.keyCode||this.charCode},getKeyName:function(){return this.keyCodes[this.keyCode]},getPoint:function(){var b=this.getXY();return new Ext.util.Point(b[0],b[1])},getRelatedTarget:function(g,j,h){var o=this.relatedTarget,m=null;if(o){if(g){m=Ext.fly(o).findParent(g,j,h)}else{m=h?Ext.get(o):o}}return m},getTarget:function(d,g,f){return d?Ext.fly(this.target).findParent(d,g,f):(f?Ext.get(this.target):this.target)},getTime:function(){return this.time},getWheelDelta:function(){var b=this.getWheelDeltas();return b.y},getWheelDeltas:function(){var h=this,j=h.browserEvent,f=0,g=0;if(Ext.isDefined(j.wheelDeltaX)){f=j.wheelDeltaX;g=j.wheelDeltaY}else{if(j.wheelDelta){g=j.wheelDelta}else{if(j.detail){g=-j.detail;if(g>100){g=3}else{if(g<-100){g=-3}}if(Ext.isDefined(j.axis)&&j.axis===j.HORIZONTAL_AXIS){f=g;g=0}}}}return{x:h.correctWheelDelta(f),y:h.correctWheelDelta(g)}},getX:function(){return this.getXY()[0]},getXY:function(){var s=this,q=s.xy;if(!q){q=s.xy=[s.pageX,s.pageY];var j=q[0],o,r,p,m;if(!j&&j!==0){o=s.browserEvent;r=document;p=r.documentElement;m=r.body;q[0]=o.clientX+(p&&p.scrollLeft||m&&m.scrollLeft||0)-(p&&p.clientLeft||m&&m.clientLeft||0);q[1]=o.clientY+(p&&p.scrollTop||m&&m.scrollTop||0)-(p&&p.clientTop||m&&m.clientTop||0)}}return q},getY:function(){return this.getXY()[1]},hasModifier:function(){var b=this;return !!(b.ctrlKey||b.altKey||b.shiftKey||b.metaKey)},isNavKeyPress:function(h){var j=this,g=j.keyCode,f=j.type==="keypress";return((!f||Ext.isGecko)&&g>=33&&g<=40)||(!h&&(g===j.RETURN||g===j.TAB||g===j.ESC))},isSpecialKey:function(){var h=this,f=h.keyCode,g=Ext.isGecko,j=h.type==="keypress";return(g&&j&&h.charCode===0)||(this.isNavKeyPress())||(f===h.BACKSPACE)||(f===h.ENTER)||(f>=16&&f<=20)||((!j||g)&&f>=44&&f<=46)},makeUnpreventable:function(){this.browserEvent.preventDefault=Ext.emptyFn},preventDefault:function(){var c=this,d=c.parentEvent;c.defaultPrevented=true;if(d){d.defaultPrevented=true}c.browserEvent.preventDefault();return c},setCurrentTarget:function(b){this.currentTarget=this.delegatedTarget=b},stopEvent:function(){return this.preventDefault().stopPropagation()},stopPropagation:function(){var d=this,g=d.browserEvent,f=d.parentEvent;d.isStopped=true;if(f){f.isStopped=true}if(!g.stopPropagation){g.cancelBubble=true;return d}g.stopPropagation();return d},within:function(j,h,g){var f;if(j){f=h?this.getRelatedTarget():this.getTarget()}return f?Ext.fly(j).contains(f)||!!(g&&f===Ext.getDom(j)):false},deprecated:{"4.0":{methods:{getPageX:"getX",getPageY:"getY"}}}},1,0,0,0,0,0,[Ext.event,"Event",Ext,"EventObjectImpl"],function(j){var q=j.prototype,p={BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,WHEEL_SCALE:(function(){var a;if(Ext.isGecko){a=3}else{if(Ext.isMac){if(Ext.isSafari&&Ext.webKitVersion>=532){a=120}else{a=12}a*=3}else{a=120}}return a}())},h={},o,m;Ext.apply(j,p);Ext.apply(q,p);delete p.WHEEL_SCALE;delete p.RETURN;for(o in p){m=p[o];h[m]=o}q.keyCodes=h;q.getTrueXY=q.getXY}));Ext.define("Ext.overrides.event.Event",{override:"Ext.event.Event",mousedownEvents:{mousedown:1,pointerdown:1,touchstart:1},injectEvent:(function(){var m,j={},o;if(!Ext.isIE9m&&document.createEvent){m={createHtmlEvent:function(f,b,c,d){var a=f.createEvent("HTMLEvents");a.initEvent(b,c,d);return a},createMouseEvent:function(D,F,b,c,J,d,A,f,C,G,H,a,I){var B=D.createEvent("MouseEvents"),E=D.defaultView||window;if(B.initMouseEvent){B.initMouseEvent(F,b,c,E,J,d,A,d,A,f,C,G,H,a,I)}else{B=D.createEvent("UIEvents");B.initEvent(F,b,c);B.view=E;B.detail=J;B.screenX=d;B.screenY=A;B.clientX=d;B.clientY=A;B.ctrlKey=f;B.altKey=C;B.metaKey=H;B.shiftKey=G;B.button=a;B.relatedTarget=I}return B},createUIEvent:function(f,s,b,c,a){var r=f.createEvent("UIEvents"),d=f.defaultView||window;r.initUIEvent(s,b,c,d,a);return r},fireEvent:function(a,c,b){a.dispatchEvent(b)}}}else{if(document.createEventObject){o={0:1,1:4,2:2};m={createHtmlEvent:function(f,b,c,d){var a=f.createEventObject();a.bubbles=c;a.cancelable=d;return a},createMouseEvent:function(C,D,b,c,H,d,z,f,B,E,F,a,G){var A=C.createEventObject();A.bubbles=b;A.cancelable=c;A.detail=H;A.screenX=d;A.screenY=z;A.clientX=d;A.clientY=z;A.ctrlKey=f;A.altKey=B;A.shiftKey=E;A.metaKey=F;A.button=o[a]||a;A.relatedTarget=G;return A},createUIEvent:function(f,a,c,d,b){var q=f.createEventObject();q.bubbles=c;q.cancelable=d;return q},fireEvent:function(a,c,b){a.fireEvent("on"+c,b)}}}}Ext.Object.each({load:[false,false],unload:[false,false],select:[true,false],change:[true,false],submit:[true,true],reset:[true,false],resize:[true,false],scroll:[true,false]},function(b,a){var c=a[0],d=a[1];j[b]=function(f,s){var r=m.createHtmlEvent(b,c,d);m.fireEvent(f,b,r)}});function g(a,b){var c=(a!=="mousemove");return function(f,d){var r=d.getXY(),s=m.createMouseEvent(f.ownerDocument,a,true,c,b,r[0],r[1],d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,d.button,d.relatedTarget);m.fireEvent(f,a,s)}}Ext.each(["click","dblclick","mousedown","mouseup","mouseover","mousemove","mouseout"],function(a){j[a]=g(a,1)});Ext.Object.each({focusin:[true,false],focusout:[true,false],activate:[true,true],focus:[false,false],blur:[false,false]},function(b,a){var c=a[0],d=a[1];j[b]=function(f,s){var r=m.createUIEvent(f.ownerDocument,b,c,d,1);m.fireEvent(f,b,r)}});if(!m){j={};m={}}function h(a,b){}return function(a){var b=this,c=j[b.type]||h,d=a?(a.dom||a):b.getTarget();c(d,b)}}()),preventDefault:function(){var m=this,o=m.browserEvent,g=m.parentEvent,h,j;if(typeof o.type!=="unknown"){m.defaultPrevented=true;if(g){g.defaultPrevented=true}if(o.preventDefault){o.preventDefault()}else{if(o.type==="mousedown"){j=o.target;h=j.getAttribute("unselectable");if(h!=="on"){j.setAttribute("unselectable","on");Ext.defer(function(){j.setAttribute("unselectable",h)},1)}}o.returnValue=false;if(o.ctrlKey||o.keyCode>111&&o.keyCode<124){o.keyCode=-1}}}return m},stopPropagation:function(){var c=this,d=c.browserEvent;if(typeof d.type!=="unknown"){if(c.mousedownEvents[c.type]){Ext.GlobalEvents.fireMouseDown(c)}arguments.callee.$previous.call(this)}return c},deprecated:{"5.0":{methods:{clone:function(){return new this.self(this.browserEvent,this)}}}}},function(){var g=this,h,j=function(a){if(a.keyCode===9){g.forwardTab=!a.shiftKey}},f=function(a){if(a.keyCode===9){delete g.forwardTab}};if(Ext.isIE9m){h={0:0,1:0,4:1,2:2};g.override({statics:{enableIEAsync:function(a){var c,b={};for(c in a){b[c]=a[c]}return b}},constructor:function(b,a,d,o){var c=this;c.callParent([b,a,d,o]);c.button=h[b.button];if(b.type==="contextmenu"){c.button=2}c.toElement=b.toElement;c.fromElement=b.fromElement},mouseLeaveRe:/(mouseout|mouseleave)/,mouseEnterRe:/(mouseover|mouseenter)/,enableIEAsync:function(a){this.browserEvent=this.self.enableIEAsync(a)},getRelatedTarget:function(d,q,p){var b=this,c,a;if(!b.relatedTarget){c=b.type;if(b.mouseLeaveRe.test(c)){a=b.toElement}else{if(b.mouseEnterRe.test(c)){a=b.fromElement}}if(a){b.relatedTarget=b.self.resolveTextNode(a)}}return b.callParent([d,q,p])}});document.attachEvent("onkeydown",j);document.attachEvent("onkeyup",f);window.attachEvent("onunload",function(){document.detachEvent("onkeydown",j);document.detachEvent("onkeyup",f)})}else{if(document.addEventListener){document.addEventListener("keydown",j,true);document.addEventListener("keyup",f,true)}}});(Ext.cmd.derive("Ext.event.publisher.Dom",Ext.event.publisher.Publisher,{type:"dom",handledDomEvents:[],reEnterCount:0,captureEvents:{animationstart:1,animationend:1,resize:1,focus:1,blur:1,scroll:1},directEvents:{mouseenter:1,mouseleave:1,pointerenter:1,pointerleave:1,MSPointerEnter:1,MSPointerLeave:1,load:1,unload:1,beforeunload:1,error:1,DOMContentLoaded:1,DOMFrameContentLoaded:1,hashchange:1},blockedPointerEvents:{pointerover:1,pointerout:1,pointerenter:1,pointerleave:1,MSPointerOver:1,MSPointerOut:1,MSPointerEnter:1,MSPointerLeave:1},blockedCompatibilityMouseEvents:{mouseenter:1,mouseleave:1},constructor:function(){var b=this;b.bubbleSubscribers={};b.captureSubscribers={};b.directSubscribers={};b.directCaptureSubscribers={};b.delegatedListeners={};b.initHandlers();Ext.onInternalReady(b.onReady,b);Ext.event.publisher.Publisher.prototype.constructor.call(this)},registerEvents:function(){var m=this,p=Ext.event.publisher.Publisher.publishersByEvent,j=m.handledDomEvents,o=j.length,q=0,h;for(;q<o;q++){h=j[q];m.handles[h]=1;p[h]=m}Ext.event.publisher.Publisher.prototype.registerEvents.call(this)},onReady:function(){var h=this,g=h.handledDomEvents,j,f;if(g){for(f=0,j=g.length;f<j;f++){h.addDelegatedListener(g[f])}}Ext.getWin().on("unload",h.destroy,h)},initHandlers:function(){var b=this;b.onDelegatedEvent=Ext.bind(b.onDelegatedEvent,b);b.onDirectEvent=Ext.bind(b.onDirectEvent,b);b.onDirectCaptureEvent=Ext.bind(b.onDirectCaptureEvent,b)},addDelegatedListener:function(b){this.delegatedListeners[b]=1;this.target.addEventListener(b,this.onDelegatedEvent,!!this.captureEvents[b])},removeDelegatedListener:function(b){delete this.delegatedListeners[b];this.target.removeEventListener(b,this.onDelegatedEvent,!!this.captureEvents[b])},addDirectListener:function(d,g,f){g.dom.addEventListener(d,f?this.onDirectCaptureEvent:this.onDirectEvent,f)},removeDirectListener:function(d,g,f){g.dom.removeEventListener(d,f?this.onDirectCaptureEvent:this.onDirectEvent,f)},subscribe:function(s,j,p,m){var r=this,q,o;if(p&&!r.directEvents[j]){q=m?r.captureSubscribers:r.bubbleSubscribers;if(!r.handles[j]&&!r.delegatedListeners[j]){r.addDelegatedListener(j)}if(q[j]){++q[j]}else{q[j]=1}}else{q=m?r.directCaptureSubscribers:r.directSubscribers;o=s.id;q=q[j]||(q[j]={});if(q[o]){++q[o]}else{q[o]=1;r.addDirectListener(j,s,m)}}},unsubscribe:function(s,r,v,o){var p=this,q,t,w,u;if(v&&!p.directEvents[r]){q=p.captureSubscribers;t=p.bubbleSubscribers;w=o?q:t;if(w[r]){--w[r]}if(!p.handles[r]&&!t[r]&&!q[r]){this.removeDelegatedListener(r)}}else{w=o?p.directCaptureSubscribers:p.directSubscribers;u=s.id;w=w[r];if(w[u]){--w[u]}if(!w[u]){delete w[u];p.removeDirectListener(r,s,o)}}},getPropagatingTargets:function(h){var j=h,f=[],g;while(j){f.push(j);g=j.parentNode;if(!g){g=j.defaultView}j=g}return f},publish:function(m,p,q){var r=this,o,t,u,s;if(Ext.isArray(p)){o=p}else{if(r.captureEvents[m]){t=Ext.cache[p.id];o=t?[t]:[]}else{o=r.getPropagatingTargets(p)}}s=o.length;if(r.captureSubscribers[m]){for(u=s;u--;){t=Ext.cache[o[u].id];if(t){r.fire(t,m,q,false,true);if(q.isStopped){break}}}}if(!q.isStopped&&r.bubbleSubscribers[m]){for(u=0;u<s;u++){t=Ext.cache[o[u].id];if(t){r.fire(t,m,q,false,false);if(q.isStopped){break}}}}},fire:function(q,h,o,m,j){var p;if(q.hasListeners[h]){p=q.events[h];if(p){if(j&&m){p=p.directCaptures}else{if(j){p=p.captures}else{if(m){p=p.directs}}}if(p){o.setCurrentTarget(q.dom);p.fire(o,o.target)}}}},onDelegatedEvent:function(b){if(Ext.elevateFunction){Ext.elevateFunction(this.doDelegatedEvent,this,[b])}else{this.doDelegatedEvent(b)}},doDelegatedEvent:function(h,j){var f=this,g=h.timeStamp;h=new Ext.event.Event(h);if(f.isEventBlocked(h)){return false}f.beforeEvent(h);Ext.frameStartTime=g;f.reEnterCount++;f.publish(h.type,h.target,h);f.reEnterCount--;if(j!==false){f.afterEvent(h)}return h},onDirectEvent:function(b){if(Ext.elevateFunction){Ext.elevateFunction(this.doDirectEvent,this,[b,false])}else{this.doDirectEvent(b,false)}},onDirectCaptureEvent:function(b){if(Ext.elevateFunction){Ext.elevateFunction(this.doDirectEvent,this,[b,true])}else{this.doDirectEvent(b,true)}},doDirectEvent:function(m,h){var p=this,o=m.currentTarget,j=m.timeStamp,q;m=new Ext.event.Event(m);if(p.isEventBlocked(m)){return}p.beforeEvent(m);Ext.frameStartTime=j;q=Ext.cache[o.id];if(q){p.reEnterCount++;p.fire(q,m.type,m,true,h);p.reEnterCount--}p.afterEvent(m)},beforeEvent:function(o){var j=o.browserEvent,h=Ext.event.publisher.Dom,g,m;if(j.type==="touchstart"){g=j.touches;if(g.length===1){m=g[0];h.lastTouchStartX=m.pageX;h.lastTouchStartY=m.pageY}}},afterEvent:function(m){var j=m.browserEvent,o=j.type,g=Ext.event.publisher.Dom,h=Ext.GlobalEvents;if(m.self.pointerEvents[o]&&m.pointerType!=="mouse"){g.lastScreenPointerEventTime=Ext.now()}if(o==="touchend"){g.lastTouchEndTime=Ext.now()}if(!this.reEnterCount&&h.hasListeners.idle&&!h.idleEventMask[o]){h.fireEvent("idle")}},isEventBlocked:function(j){var m=this,o=j.type,h=Ext.event.publisher.Dom,g=Ext.now();if(Ext.isGecko&&j.type==="click"&&j.button===2){return true}return(m.blockedPointerEvents[o]&&j.pointerType!=="mouse")||(m.blockedCompatibilityMouseEvents[o]&&(g-h.lastScreenPointerEventTime<1000))||(Ext.supports.TouchEvents&&j.self.mouseEvents[j.type]&&Math.abs(j.pageX-h.lastTouchStartX)<15&&Math.abs(j.pageY-h.lastTouchStartY)<15&&(Ext.now()-h.lastTouchEndTime)<1000)},destroy:function(){var b;for(b in this.delegatedListeners){this.removeDelegatedListener(b)}this.callParent()},reset:function(){var b=Ext.event.publisher.Dom;b.lastScreenPointerEventTime=b.lastTouchEndTime=b.lastTouchStartX=b.lastTouchStartY=undefined}},1,0,0,0,0,0,[Ext.event.publisher,"Dom"],function(f){var h=document,j=h.defaultView,g=f.prototype;if((Ext.os.is.iOS&&Ext.os.version.getMajor()<5)||Ext.browser.is.AndroidStock||!(j&&j.addEventListener)){g.target=h}else{g.target=j}f.instance=new f()}));Ext.define("Ext.overrides.event.publisher.Dom",{override:"Ext.event.publisher.Dom"},function(m){if(Ext.isIE9m){var h=document.documentElement,o=document.body,p=m.prototype,j,q;p.target=document;p.directBoundListeners={};j=function(a,b,c){a.target=a.srcElement||window;a.currentTarget=this;if(c){b.onDirectCaptureEvent(a)}else{b.onDirectEvent(a)}};q=function(a,b){a.target=a.srcElement||window;a.currentTarget=this;b.onDirectCaptureEvent(a)};m.override({addDelegatedListener:function(a){this.delegatedListeners[a]=1;this.target.attachEvent("on"+a,this.onDelegatedEvent)},removeDelegatedListener:function(a){delete this.delegatedListeners[a];this.target.detachEvent("on"+a,this.onDelegatedEvent)},addDirectListener:function(u,t,a){var f=this,d=t.dom,g=Ext.Function.bind(j,d,[f,a],true),c=f.directBoundListeners,b=c[u]||(c[u]={});b[d.id]=g;if(d.attachEvent){d.attachEvent("on"+u,g)}else{f.callParent(arguments)}},removeDirectListener:function(c,b){var a=b.dom;if(a.detachEvent){a.detachEvent("on"+c,this.directBoundListeners[c][a.id])}else{this.callParent(arguments)}},doDelegatedEvent:function(a,b){a.target=a.srcElement||window;if(a.type==="focusin"){a.relatedTarget=a.fromElement===o||a.fromElement===h?null:a.fromElement}else{if(a.type==="focusout"){a.relatedTarget=a.toElement===o||a.toElement===h?null:a.toElement}}return this.callParent([a,b])}});Ext.apply(p.directEvents,p.captureEvents);Ext.apply(p.directEvents,{change:1,input:1,paste:1});p.captureEvents={}}});(Ext.cmd.derive("Ext.event.publisher.Gesture",Ext.event.publisher.Dom,{type:"gesture",config:{async:true},isCancelEvent:{touchcancel:1,pointercancel:1,MSPointerCancel:1},handledEvents:[],handledDomEvents:[],constructor:function(C){var w=this,B=w.handledDomEvents,r=Ext.supports,t=r.TouchEvents,s=Ext.Function,A=w.onTouchStart,D=w.onTouchMove,u=w.onTouchEnd,y=s.createAnimationFrame(w.onTouchStart,w,null,1),z=s.createAnimationFrame(w.onTouchMove,w),v=s.createAnimationFrame(w.onTouchEnd,w,null,1);w._handlers={touchstart:A,touchmove:D,touchend:u,touchcancel:u,pointerdown:A,pointermove:D,pointerup:u,pointercancel:u,MSPointerDown:A,MSPointerMove:D,MSPointerUp:u,MSPointerCancel:u,mousedown:A,mousemove:D,mouseup:u};w._asyncHandlers={touchstart:y,touchmove:z,touchend:v,touchcancel:v,pointerdown:y,pointermove:z,pointerup:v,pointercancel:v,MSPointerDown:y,MSPointerMove:z,MSPointerUp:v,MSPointerCancel:v,mousedown:y,mousemove:z,mouseup:v};w.activeTouchesMap={};w.activeTouches=[];w.changedTouches=[];w.recognizers=[];if(t){w.onTargetTouchMove=w.onTargetTouchMove.bind(w);w.onTargetTouchEnd=w.onTargetTouchEnd.bind(w)}if(r.PointerEvents){B.push("pointerdown","pointermove","pointerup","pointercancel");w.mousePointerType="mouse"}else{if(r.MSPointerEvents){B.push("MSPointerDown","MSPointerMove","MSPointerUp","MSPointerCancel");w.mousePointerType=4}else{if(t){B.push("touchstart","touchmove","touchend","touchcancel")}}}if(!B.length||(t&&Ext.isWebKit&&Ext.os.is.Desktop)){B.push("mousedown","mousemove","mouseup")}w.initConfig(C);return Ext.event.publisher.Dom.prototype.constructor.call(this)},onReady:function(){Ext.event.publisher.Dom.prototype.onReady.call(this);Ext.Array.sort(this.recognizers,function(a,b){var h=a.priority,j=b.priority;return(h>j)?1:(h<j)?-1:0})},registerRecognizer:function(h){var j=this,g=h.handledEvents,m=g.length,o;h.setOnRecognized(j.onRecognized);h.setCallbackScope(j);for(o=0;o<m;o++){j.handledEvents.push(g[o])}j.registerEvents(g);j.recognizers.push(h)},onRecognized:function(v,t,z){var r=this,q=t.changedTouches,s=q.length,p,u,w,y;z=z||{};z.type=v;z.target=q[0].target;z.isStopped=false;t=t.chain(z);if(s>1){p=[];for(w=0;w<s;w++){y=q[w];p.push(y.targets)}u=r.getCommonTargets(p)}else{u=q[0].targets}r.publish(v,u,t)},getCommonTargets:function(p){var o=p[0],r=p.length;if(r===1){return o}var t=[],s=1,q,j,u;while(true){q=o[o.length-s];if(!q){return t}for(u=1;u<r;u++){j=p[u];if(j[j.length-s]!==q){return t}}t.unshift(q);s++}return t},invokeRecognizers:function(q,m){var h=this.recognizers,o=h.length,p,j;if(q==="onStart"){for(p=0;p<o;p++){h[p].isActive=true}}for(p=0;p<o;p++){j=h[p];if(j.isActive&&j[q].call(j,m)===false){j.isActive=false}}},updateTouches:function(B,H){var w=this,J=B.browserEvent,E=J.changedTouches||[J],I=w.activeTouches,A=w.activeTouchesMap,L=[],y,C,F,D,G,z,K,v;for(G=0,z=E.length;G<z;G++){y=E[G];if("identifier" in y){C=y.identifier}else{if("pointerId" in y){C=y.pointerId}else{C=1}}F=A[C];if(!F){D=Ext.event.Event.resolveTextNode(y.target);F=A[C]={identifier:C,target:D,targets:w.getPropagatingTargets(D)};I.push(F)}if(H){delete A[C];Ext.Array.remove(I,F)}K=y.pageX;v=y.pageY;F.pageX=K;F.pageY=v;F.point=new Ext.util.Point(K,v);L.push(F)}B.touches=Ext.Array.clone(I);B.changedTouches=L},doDelegatedEvent:function(c){var d=this;c=Ext.event.publisher.Dom.prototype.doDelegatedEvent.call(this,c,false);if(c){if(!c.button||c.button<1){d.handlers[c.type].call(d,c)}d.afterEvent(c)}},onTouchStart:function(h){var g=this,j=h.target,f=h.browserEvent.touches;if(h.browserEvent.type==="touchstart"){j.addEventListener("touchmove",g.onTargetTouchMove);j.addEventListener("touchend",g.onTargetTouchEnd);j.addEventListener("touchcancel",g.onTargetTouchEnd)}if(f&&f.length<=g.activeTouches.length){g.removeGhostTouches(f)}g.updateTouches(h);if(!g.isStarted){g.isStarted=true;g.invokeRecognizers("onStart",h);if(Ext.enableGarbageCollector){Ext.dom.GarbageCollector.pause()}}g.invokeRecognizers("onTouchStart",h)},onTouchMove:function(g){var d=this,f=d.mousePointerType;if(d.isStarted){if(f&&g.browserEvent.pointerType===f&&g.buttons===0){g.type=Ext.dom.Element.prototype.eventMap.touchend;g.button=0;d.onTouchEnd(g);return}d.updateTouches(g);if(g.changedTouches.length>0){d.invokeRecognizers("onTouchMove",g)}}},onTouchEnd:function(c){var d=this;if(!d.isStarted){return}d.updateTouches(c,true);d.invokeRecognizers(d.isCancelEvent[c.type]?"onTouchCancel":"onTouchEnd",c);if(!d.activeTouches.length){d.isStarted=false;d.invokeRecognizers("onEnd",c);if(Ext.enableGarbageCollector){Ext.dom.GarbageCollector.resume()}}},onTargetTouchMove:function(b){if(Ext.elevateFunction){Ext.elevateFunction(this.doTargetTouchMove,this,[b])}else{this.doTargetTouchMove(b)}},doTargetTouchMove:function(b){if(!Ext.getBody().contains(b.target)){this.onTouchMove(new Ext.event.Event(b))}},onTargetTouchEnd:function(b){if(Ext.elevateFunction){Ext.elevateFunction(this.doTargetTouchEnd,this,[b])}else{this.doTargetTouchEnd(b)}},doTargetTouchEnd:function(g){var f=this,d=g.target;d.removeEventListener("touchmove",f.onTargetTouchMove);d.removeEventListener("touchend",f.onTargetTouchEnd);d.removeEventListener("touchcancel",f.onTargetTouchEnd);if(!Ext.getBody().contains(d)){f.onTouchEnd(new Ext.event.Event(g))}},updateAsync:function(b){this.handlers=b?this._asyncHandlers:this._handlers},reset:function(){var j=this,g=j.recognizers,m=g.length,o,h;j.activeTouchesMap={};j.activeTouches=[];j.changedTouches=[];j.isStarted=false;for(o=0;o<m;o++){h=g[o];h.reset();h.isActive=false}Ext.event.publisher.Dom.prototype.reset.call(this)},privates:{removeGhostTouches:function(s){var u={},o=s.length,p=this.activeTouches,t=this.activeTouchesMap,m,q,r;for(m=0;m<o;++m){u[s[m].identifier]=true}m=p.length;while(m--){r=p[m];q=r.identifier;if(!s[q]){Ext.Array.remove(p,r);delete t[q]}}}}},1,0,0,0,0,0,[Ext.event.publisher,"Gesture"],function(b){b.instance=new b()}));Ext.define("Ext.overrides.event.publisher.Gesture",{override:"Ext.event.publisher.Gesture"},function(){if(Ext.isIE9m){this.override({updateTouches:function(j,g){var h=j.browserEvent,f=j.getXY();h.pageX=f[0];h.pageY=f[1];this.callParent([j,g])},doDelegatedEvent:function(b){this.callParent([Ext.event.Event.enableIEAsync(b)])}})}});(Ext.cmd.derive("Ext.mixin.Templatable",Ext.Mixin,{mixinConfig:{id:"templatable"},referenceAttributeName:"reference",referenceSelector:"[reference]",getElementConfig:function(){return{reference:"element"}},getElementTemplate:function(){var b=document.createDocumentFragment();b.appendChild(Ext.Element.create(this.getElementConfig(),true));return b},initElement:function(){var b=this.self.prototype;b.elementTemplate=this.getElementTemplate();b.initElement=b.doInitElement;this.initElement.apply(this,arguments)},linkElement:function(d,c){this.link(d,c)},doInitElement:function(){var o=this.referenceAttributeName,s,r,q,p,j,m;s=this.elementTemplate.cloneNode(true);r=s.querySelectorAll(this.referenceSelector);for(q=0,p=r.length;q<p;q++){j=r[q];m=j.getAttribute(o);j.removeAttribute(o);this.linkElement(m,j)}}},0,0,0,0,0,0,[Ext.mixin,"Templatable"],0));(Ext.cmd.derive("Ext.TaskQueue",Ext.Base,{singleton:true,pending:false,mode:true,constructor:function(){this.readQueue=[];this.writeQueue=[];this.run=Ext.Function.bind(this.run,this);if(Ext.os.is.iOS){Ext.interval(this.watch,500,this)}},requestRead:function(g,d,f){this.request(true);this.readQueue.push(arguments)},requestWrite:function(g,d,f){this.request(false);this.writeQueue.push(arguments)},request:function(b){if(!this.pending){this.pendingTime=Date.now();this.pending=true;this.mode=b;if(b){Ext.defer(this.run,1,this)}else{Ext.Function.requestAnimationFrame(this.run)}}},watch:function(){if(this.pending&&Date.now()-this.pendingTime>=500){this.run()}},run:function(){this.pending=false;var q=this.readQueue,u=this.writeQueue,w=null,t;if(this.mode){t=q;if(u.length>0){w=false}}else{t=u;if(q.length>0){w=true}}var y=t.slice(),v,s,z,r,p;t.length=0;for(v=0,s=y.length;v<s;v++){z=y[v];r=z[0];p=z[1];if(typeof r==="string"){r=p[r]}if(z.length>2){r.apply(p,z[2])}else{r.call(p)}}y.length=0;if(w!==null){this.request(w)}}},1,0,0,0,0,0,[Ext,"TaskQueue"],0));(Ext.cmd.derive("Ext.util.sizemonitor.Abstract",Ext.Base,{config:{element:null,callback:Ext.emptyFn,scope:null,args:[]},width:0,height:0,contentWidth:0,contentHeight:0,constructor:function(b){this.refresh=Ext.Function.bind(this.refresh,this);this.info={width:0,height:0,contentWidth:0,contentHeight:0,flag:0};this.initElement();this.initConfig(b);this.bindListeners(true)},bindListeners:Ext.emptyFn,applyElement:function(b){if(b){return Ext.get(b)}},updateElement:function(b){b.append(this.detectorsContainer);b.addCls("x-size-monitored")},applyArgs:function(b){return b.concat([this.info])},refreshMonitors:Ext.emptyFn,forceRefresh:function(){Ext.TaskQueue.requestRead("refresh",this)},getContentBounds:function(){return this.detectorsContainer.getBoundingClientRect()},getContentWidth:function(){return this.detectorsContainer.offsetWidth},getContentHeight:function(){return this.detectorsContainer.offsetHeight},refreshSize:function(){var v=this.getElement();if(!v||v.destroyed){return false}var y=v.getWidth(),p=v.getHeight(),z=this.getContentWidth(),q=this.getContentHeight(),r=this.contentWidth,t=this.contentHeight,w=this.info,u=false,s;this.width=y;this.height=p;this.contentWidth=z;this.contentHeight=q;s=((r!==z?1:0)+(t!==q?2:0));if(s>0){w.width=y;w.height=p;w.contentWidth=z;w.contentHeight=q;w.flag=s;u=true;this.getCallback().apply(this.getScope(),this.getArgs())}return u},refresh:function(b){if(this.refreshSize()||b){Ext.TaskQueue.requestWrite("refreshMonitors",this)}},destroy:function(){var c=this,d=c.getElement();c.bindListeners(false);if(d&&!d.destroyed){d.removeCls("x-size-monitored")}delete c._element;c.callParent()}},1,0,0,0,0,[[Ext.mixin.Templatable.prototype.mixinId||Ext.mixin.Templatable.$className,Ext.mixin.Templatable]],[Ext.util.sizemonitor,"Abstract"],0));(Ext.cmd.derive("Ext.util.sizemonitor.Scroll",Ext.util.sizemonitor.Abstract,{getElementConfig:function(){return{reference:"detectorsContainer",classList:["x-size-monitors","scroll"],children:[{reference:"expandMonitor",className:"expand"},{reference:"shrinkMonitor",className:"shrink"}]}},constructor:function(b){this.onScroll=Ext.Function.bind(this.onScroll,this);Ext.util.sizemonitor.Abstract.prototype.constructor.apply(this,arguments)},bindListeners:function(c){var d=c?"addEventListener":"removeEventListener";this.expandMonitor[d]("scroll",this.onScroll,true);this.shrinkMonitor[d]("scroll",this.onScroll,true)},forceRefresh:function(){Ext.TaskQueue.requestRead("refresh",this,[true])},onScroll:function(){Ext.TaskQueue.requestRead("refresh",this)},refreshMonitors:function(){var d=this.expandMonitor,g=this.shrinkMonitor,f=1000000;if(d&&!d.destroyed){d.scrollLeft=f;d.scrollTop=f}if(g&&!g.destroyed){g.scrollLeft=f;g.scrollTop=f}}},1,0,0,0,0,0,[Ext.util.sizemonitor,"Scroll"],0));(Ext.cmd.derive("Ext.util.sizemonitor.OverflowChange",Ext.util.sizemonitor.Abstract,{constructor:function(b){this.onExpand=Ext.Function.bind(this.onExpand,this);this.onShrink=Ext.Function.bind(this.onShrink,this);Ext.util.sizemonitor.Abstract.prototype.constructor.apply(this,arguments)},getElementConfig:function(){return{reference:"detectorsContainer",classList:["x-size-monitors","overflowchanged"],children:[{reference:"expandMonitor",className:"expand",children:[{reference:"expandHelper"}]},{reference:"shrinkMonitor",className:"shrink",children:[{reference:"shrinkHelper"}]}]}},bindListeners:function(c){var d=c?"addEventListener":"removeEventListener";this.expandMonitor[d](Ext.browser.is.Firefox?"underflow":"overflowchanged",this.onExpand,true);this.shrinkMonitor[d](Ext.browser.is.Firefox?"overflow":"overflowchanged",this.onShrink,true)},onExpand:function(b){if(Ext.browser.is.Webkit&&b.horizontalOverflow&&b.verticalOverflow){return}Ext.TaskQueue.requestRead("refresh",this)},onShrink:function(b){if(Ext.browser.is.Webkit&&!b.horizontalOverflow&&!b.verticalOverflow){return}Ext.TaskQueue.requestRead("refresh",this)},refreshMonitors:function(){if(this.destroyed){return}var m=this.expandHelper,o=this.shrinkHelper,h=this.getContentBounds(),p=h.width,j=h.height,q;if(m&&!m.destroyed){q=m.style;q.width=(p+1)+"px";q.height=(j+1)+"px"}if(o&&!o.destroyed){q=o.style;q.width=p+"px";q.height=j+"px"}Ext.TaskQueue.requestRead("refresh",this)}},1,0,0,0,0,0,[Ext.util.sizemonitor,"OverflowChange"],0));(Ext.cmd.derive("Ext.util.SizeMonitor",Ext.Base,{constructor:function(d){var c=Ext.util.sizemonitor;if(Ext.browser.is.Firefox){return new c.OverflowChange(d)}else{return new c.Scroll(d)}}},1,0,0,0,0,0,[Ext.util,"SizeMonitor"],0));(Ext.cmd.derive("Ext.event.publisher.ElementSize",Ext.event.publisher.Publisher,{type:"size",handledEvents:["resize"],constructor:function(){this.monitors={};this.subscribers={};Ext.event.publisher.Publisher.prototype.constructor.apply(this,arguments)},subscribe:function(f){var h=f.id,j=this.subscribers,g=this.monitors;if(j[h]){++j[h]}else{j[h]=1;g[h]=new Ext.util.SizeMonitor({element:f,callback:this.onElementResize,scope:this,args:[f]})}f.on("painted","forceRefresh",g[h]);return true},unsubscribe:function(o){var j=o.id,m=this.subscribers,g=this.monitors,h;if(m[j]&&!--m[j]){delete m[j];h=g[j];o.un("painted","forceRefresh",h);h.destroy();delete g[j]}},onElementResize:function(d,c){Ext.TaskQueue.requestRead("fire",this,[d,"resize",[d,c]])}},1,0,0,0,0,0,[Ext.event.publisher,"ElementSize"],function(b){b.instance=new b()}));(Ext.cmd.derive("Ext.util.paintmonitor.Abstract",Ext.Base,{config:{element:null,callback:Ext.emptyFn,scope:null,args:[]},eventName:"",monitorClass:"",constructor:function(b){this.onElementPainted=Ext.Function.bind(this.onElementPainted,this);this.initConfig(b)},bindListeners:function(b){this.monitorElement[b?"addEventListener":"removeEventListener"](this.eventName,this.onElementPainted,true)},applyElement:function(b){if(b){return Ext.get(b)}},updateElement:function(b){this.monitorElement=Ext.Element.create({classList:["x-paint-monitor",this.monitorClass]},true);b.appendChild(this.monitorElement);b.addCls("x-paint-monitored");this.bindListeners(true)},onElementPainted:function(){},destroy:function(){var h=this,f=h.monitorElement,g=f.parentNode,j=h.getElement();h.bindListeners(false);delete h.monitorElement;if(j&&!j.destroyed){j.removeCls("x-paint-monitored");delete h._element}if(g){g.removeChild(f)}h.callParent()}},1,0,0,0,0,0,[Ext.util.paintmonitor,"Abstract"],0));(Ext.cmd.derive("Ext.util.paintmonitor.CssAnimation",Ext.util.paintmonitor.Abstract,{eventName:Ext.browser.is.WebKit?"webkitAnimationEnd":"animationend",monitorClass:"cssanimation",onElementPainted:function(b){if(b.animationName==="x-paint-monitor-helper"){this.getCallback().apply(this.getScope(),this.getArgs())}}},0,0,0,0,0,0,[Ext.util.paintmonitor,"CssAnimation"],0));(Ext.cmd.derive("Ext.util.PaintMonitor",Ext.Base,{constructor:function(b){return new Ext.util.paintmonitor.CssAnimation(b)}},1,0,0,0,0,0,[Ext.util,"PaintMonitor"],0));(Ext.cmd.derive("Ext.event.publisher.ElementPaint",Ext.event.publisher.Publisher,{type:"paint",handledEvents:["painted"],constructor:function(){this.monitors={};this.subscribers={};Ext.event.publisher.Publisher.prototype.constructor.apply(this,arguments)},subscribe:function(g){var f=this,h=g.id,j=f.subscribers;if(j[h]){++j[h]}else{j[h]=1;f.monitors[h]=new Ext.util.PaintMonitor({element:g,callback:f.onElementPainted,scope:f,args:[g]})}},unsubscribe:function(f){var h=f.id,j=this.subscribers,g=this.monitors;if(j[h]&&!--j[h]){delete j[h];g[h].destroy();delete g[h]}},onElementPainted:function(b){Ext.TaskQueue.requestRead("fire",this,[b,"painted",[b]])}},1,0,0,0,0,0,[Ext.event.publisher,"ElementPaint"],function(b){b.instance=new b()}));(Ext.cmd.derive("Ext.dom.Element",Ext.Base,function(a9){var a3=window,aq=document,aH="ext-window",ax="ext-document",bg="width",at="height",aN="min-width",bk="min-height",a8="max-width",aL="max-height",ap="top",aE="right",aw="bottom",aD="left",be="visibility",aK="hidden",bl="display",a2="none",bb="z-index",aY="position",a6="relative",a5="static",aT="-",aX=/\w/g,ay=/\s+/,aJ=/[\s]+/,bn=/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,aA=/table-row|table-.*-group/,bm=/top/i,aZ={t:"border-top-width",r:"border-right-width",b:"border-bottom-width",l:"border-left-width"},aP={t:"padding-top",r:"padding-right",b:"padding-bottom",l:"padding-left"},bc={t:"margin-top",r:"margin-right",b:"margin-bottom",l:"margin-left"},aF=[aP.l,aP.r,aP.t,aP.b],bi=[aZ.l,aZ.r,aZ.t,aZ.b],aS=/\d+$/,bf=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,ar="px",au=/(-[a-z])/gi,aC=/([a-z0-9\-]+)\s*:\s*([^;\s]+(?:\s*[^;\s]+)*);?/gi,a7=/^\d+(?:\.\d*)?px$/i,aV={},a1="originalDisplay",a0=function(b,a){return a.charAt(1).toUpperCase()},az=function(a,c){var f,b,d;if(a.nodeType===1){a._extData=null;if(c){f=a.childNodes;for(b=0,d=f.length;b<d;++b){az(f[b],c)}}}},aI="x-hidden-visibility",aM="x-hidden-display",bd="x-hidden-offsets",bo="x-hidden-clip",aO="x-sized",av="x-unsized",aB="x-stretched",aU="x-no-touch-scroll",ba={style:"style",className:"className",cls:"cls",classList:"classList",text:"text",hidden:"hidden",html:"html",children:"children"},a4=0,aR=0,aQ=false,bj=false,aW,aG,bh;return{alternateClassName:["Ext.Element"],observableType:"element",isElement:true,skipGarbageCollection:true,$applyConfigs:true,identifiablePrefix:"ext-element-",styleHooks:{},validIdRe:Ext.validIdRe,blockedEvents:Ext.supports.EmulatedMouseOver?{mouseover:1}:{},longpressEvents:{longpress:1,taphold:1},constructor:function(b){var c=this,a;if(typeof b==="string"){b=aq.getElementById(b)}if(!b){return null}c.dom=b;a=b.id;if(a){c.id=a}else{a=b.id=c.getUniqueId()}c.el=c;Ext.cache[a]=c;c.mixins.observable.constructor.call(c)},inheritableStatics:{cache:Ext.cache={},editableSelector:'input,textarea,[contenteditable="true"]',VISIBILITY:1,DISPLAY:2,OFFSETS:3,CLIP:4,minKeyboardHeight:100,unitRe:bf,useDelegatedEvents:true,validNodeTypes:{1:1,9:1},addUnits:function(a,b){if(typeof a==="number"){return a+(b||ar)}if(a===""||a==="auto"||a==null){return a||""}if(aS.test(a)){return a+(b||ar)}if(!bf.test(a)){return a||""}return a},create:function(g,h){var q=this,c=ba.hidden,d,p,m,o,j,f,a,b;if(!g){g={}}if(g.isElement){return h?g.dom:g}else{if("nodeType" in g){return h?g:Ext.get(g)}}if(typeof g==="string"){return aq.createTextNode(g)}m=g.tag;if(!m){m="div"}if(g.namespace){d=aq.createElementNS(g.namespace,m)}else{d=aq.createElement(m)}p=d.style;if(g[c]){b=g.className;b=(b==null)?"":b+" ";g.className=b+aM;delete g[c]}for(j in g){if(j!=="tag"){o=g[j];switch(j){case ba.style:if(typeof o==="string"){d.setAttribute(j,o)}else{for(f in o){if(o.hasOwnProperty(f)){p[f]=o[f]}}}break;case ba.className:case ba.cls:d.className=o;break;case ba.classList:d.className=o.join(" ");break;case ba.text:d.textContent=o;break;case ba.html:d.innerHTML=o;break;case ba.children:for(f=0,a=o.length;f<a;f++){d.appendChild(q.create(o[f],true))}break;default:if(o!=null){d.setAttribute(j,o)}}}}if(h){return d}else{return q.get(d)}},detach:function(){var a=this.dom;if(a&&a.parentNode&&a.tagName!=="BODY"){a.parentNode.removeChild(a)}return this},fly:function(a,b){return Ext.fly(a,b)},fromPoint:function(b,a){return Ext.get(aq.elementFromPoint(b,a))},get:function(g){var b=this,j=Ext.cache,d,f,h,m,o,c,a;if(!g){return null}if(g.isFly){g=g.dom}if(typeof g==="string"){h=g;if(j.hasOwnProperty(h)){m=j[h];if(m.skipGarbageCollection||!Ext.isGarbage(m.dom)){return m}else{m.destroy()}}if(h===aH){return a9.get(a3)}else{if(h===ax){return a9.get(aq)}}f=Ext.getElementById?Ext.getElementById(h):aq.getElementById(h);if(f){return new a9(f)}}d=g.nodeType;if(d){o=(d===9);a=b.validNodeTypes[d]}else{c=(g.window==g)}if(a||c){h=g.id;if(j.hasOwnProperty(h)){m=j[h];if(m.skipGarbageCollection||g===m.dom||!Ext.isGarbage(m.dom)){return m}else{m.destroy()}}if(g===aq){g.id=ax}if(g==a3){g.id=aH}g=new a9(g);if(c||o){g.skipGarbageCollection=true}return g}if(g.isElement){return g}if(g.isComposite){return g}if(Ext.isIterable(g)){return b.select(g)}return null},getActiveElement:function(b){var a=aq.activeElement;if(!a||!a.focus){a=aq.body}return b?Ext.get(a):a},getDocumentHeight:function(){return Math.max(!Ext.isStrict?aq.body.scrollHeight:aq.documentElement.scrollHeight,this.getViewportHeight())},getDocumentWidth:function(){return Math.max(!Ext.isStrict?aq.body.scrollWidth:aq.documentElement.scrollWidth,this.getViewportWidth())},getOrientation:function(){if(Ext.supports.OrientationChange){return(a3.orientation==0)?"portrait":"landscape"}return(a3.innerHeight>a3.innerWidth)?"portrait":"landscape"},getViewportHeight:function(){var a=a9._viewportHeight;if(Ext.isIE9m){return aq.documentElement.clientHeight}return(a!=null)?a:a3.innerHeight},getViewportWidth:function(){var a=a9._viewportWidth;if(Ext.isIE9m){return aq.documentElement.clientWidth}return(a!=null)?a:a3.innerWidth},getViewSize:function(){return{width:a9.getViewportWidth(),height:a9.getViewportHeight()}},normalize:function(a){return aV[a]||(aV[a]=a.replace(au,a0))},_onWindowFocusChange:function(a){if(Ext.fly(a.target).is(a9.editableSelector)){a4=new Date();aQ=(a.type==="focusin"||a.type==="pointerup")}},_onWindowResize:function(){var g=window.innerWidth,f=window.innerHeight,a=new Date(),c=1000,b,d;b=g-a9._windowWidth;d=f-a9._windowHeight;a9._windowWidth=g;a9._windowHeight=f;if(((a-a4)<c)||((a-aR)<c)){if(b===0&&(aQ&&(d<=-a9.minKeyboardHeight))){bj=true;return}}if(bj&&(b===0)&&(d>=a9.minKeyboardHeight)){bj=false;aR=new Date()}if(bj){return}a9._viewportWidth=g;a9._viewportHeight=f},parseBox:function(b){b=b||0;var d=typeof b,a,c;if(d==="number"){return{top:b,right:b,bottom:b,left:b}}else{if(d!=="string"){return b}}a=b.split(" ");c=a.length;if(c===1){a[1]=a[2]=a[3]=a[0]}else{if(c===2){a[2]=a[0];a[3]=a[1]}else{if(c===3){a[3]=a[1]}}}return{top:parseFloat(a[0])||0,right:parseFloat(a[1])||0,bottom:parseFloat(a[2])||0,left:parseFloat(a[3])||0}},parseStyles:function(b){var c={},a;if(b){aC.lastIndex=0;while((a=aC.exec(b))){c[a[1]]=a[2]||""}}return c},select:function(c,a,b){return Ext.fly(b||aq).select(c,a)},query:function(b,c,a){return Ext.fly(a||aq).query(b,c)},unitizeBox:function(a,c){var b=this;a=b.parseBox(a);return b.addUnits(a.top,c)+" "+b.addUnits(a.right,c)+" "+b.addUnits(a.bottom,c)+" "+b.addUnits(a.left,c)},serializeForm:function(j){var f=j.elements||(aq.forms[j]||Ext.getDom(j)).elements,o=false,p=encodeURIComponent,b="",c=f.length,a,q,r,g,h,t,d,s,m;for(t=0;t<c;t++){a=f[t];q=a.name;r=a.type;g=a.options;if(!a.disabled&&q){if(/select-(one|multiple)/i.test(r)){s=g.length;for(d=0;d<s;d++){m=g[d];if(m.selected){h=m.hasAttribute("value");b+=Ext.String.format("{0}={1}&",p(q),p(h?m.value:m.text))}}}else{if(!(/file|undefined|reset|button/i.test(r))){if(!(/radio|checkbox/i.test(r)&&!a.checked)&&!(r=="submit"&&o)){b+=p(q)+"="+p(a.value)+"&";o=/submit/i.test(r)}}}}}return b.substr(0,b.length-1)},getCommonAncestor:function(a,b,c){bh=bh||new Ext.dom.Fly();bh.attach(Ext.getDom(a));while(!bh.isAncestor(b)){if(bh.dom.parentNode){bh.attach(bh.dom.parentNode)}else{bh.attach(document.body);break}}return c?bh.dom:Ext.get(bh)}},addCls:function(q,b,o){var p=this,f=p.getData(),m,d,h,g,c,a,j;if(!q){return p}if(!f.isSynchronized){p.synchronize()}d=p.dom;h=f.classMap;g=f.classList;b=b?b+aT:"";o=o?aT+o:"";if(typeof q==="string"){q=q.split(ay)}for(c=0,a=q.length;c<a;c++){j=q[c];if(j){j=b+j+o;if(!h[j]){h[j]=true;g.push(j);m=true}}}if(m){d.className=g.join(" ")}return p},addStyles:function(f,g){var b=0,h=(f||"").match(aX),j,d=h.length,a,c=[];if(d===1){b=Math.abs(parseFloat(this.getStyle(g[h[0]]))||0)}else{if(d){for(j=0;j<d;j++){a=h[j];c.push(g[a])}c=this.getStyle(c);for(j=0;j<d;j++){a=h[j];b+=parseFloat(c[g[a]])||0}}}return b},addUnits:function(a,b){return a9.addUnits(a,b)},adjustDirect2DDimension:function(g){var a=this,h=a.dom,c=a.getStyle("display"),d=h.style.display,m=h.style.position,b=g===bg?0:1,j=h.currentStyle,f;if(c==="inline"){h.style.display="inline-block"}h.style.position=c.match(aA)?"absolute":"static";f=(parseFloat(j[g])||parseFloat(j.msTransformOrigin.split(" ")[b])*2)%1;h.style.position=m;if(c==="inline"){h.style.display=d}return f},animate:function(a){a=new Ext.fx.Animation(a);a.setElement(this);this._activeAnimation=a;a.on({animationend:this._onAnimationEnd});Ext.Animator.run(a);return a},_onAnimationEnd:function(){this._activeAnimation=null},getActiveAnimation:function(){return this._activeAnimation},append:function(){this.appendChild.apply(this,arguments)},appendChild:function(b,c){var a=this,f,d,g;if(b.nodeType||b.dom||typeof b==="string"){b=Ext.getDom(b);a.dom.appendChild(b);return !c?Ext.get(b):b}else{if(b.length){f=Ext.fly(document.createDocumentFragment());d=b.length;for(g=0;g<d;g++){f.appendChild(b[g],c)}a.dom.appendChild(f.dom);return c?f.dom:f}else{return a.createChild(b,null,c)}}},appendTo:function(a){Ext.getDom(a).appendChild(this.dom);return this},applyStyles:function(a){if(a){if(typeof a==="function"){a=a.call()}if(typeof a==="string"){a=a9.parseStyles(a)}if(typeof a==="object"){this.setStyle(a)}}return this},blur:function(){var c=this,a=c.dom;if(a!==aq.body){try{a.blur()}catch(b){}return c}else{return c.focus(undefined,a)}},cacheScrollValues:function(){var h=this,g=[],a=[],f,b,c,d;aG=aG||new Ext.dom.Fly();f=h.query("*");for(c=0,d=f.length;c<d;c++){b=f[c];if(b.scrollTop>0||b.scrollLeft!==0){a.push(b);g.push(aG.attach(b).getScroll())}}return function(){var m,j,o;for(j=0,o=a.length;j<o;j++){m=g[j];aG.attach(a[j]);aG.setScrollLeft(m.left);aG.setScrollTop(m.top)}}},center:function(a){return this.alignTo(a||aq,"c-c")},child:function(d,c){var b=this,a=Ext.get(b).id;return b.selectNode(Ext.makeIdSelector(a)+" > "+d,!!c)},clone:function(c,b){var a=this.dom.cloneNode(c);if(Ext.supports.CloneNodeCopiesExpando){az(a,c)}return b?a:Ext.get(a)},constrainScrollLeft:function(b){var a=this.dom;return Math.max(Math.min(b,a.scrollWidth-a.clientWidth),0)},constrainScrollTop:function(b){var a=this.dom;return Math.max(Math.min(b,a.scrollHeight-a.clientHeight),0)},createChild:function(b,c,a){b=b||{tag:"div"};if(c){return Ext.DomHelper.insertBefore(c,b,a!==true)}else{return Ext.DomHelper.append(this.dom,b,a!==true)}},contains:function(c){if(!c){return false}var b=this,a=Ext.getDom(c);return(a===b.dom)||b.isAncestor(a)},destroy:function(){var b=this,a=b.dom;if(a&&a.parentNode){a.parentNode.removeChild(a)}b.collect();if(!b.isFly){b.callParent()}},detach:function(){var a=this.dom;if(a&&a.parentNode&&a.tagName!=="BODY"){a.parentNode.removeChild(a)}return this},disableShadow:function(){var a=this.shadow;if(a){a.hide();a.disabled=true}},disableShim:function(){var a=this.shim;if(a){a.hide();a.disabled=true}},disableTouchContextMenu:function(){this._contextMenuListenerRemover=this.on({MSHoldVisual:function(a){a.preventDefault()},destroyable:true,delegated:false})},disableTouchScroll:function(){this.addCls(aU);this.on({touchmove:function(a){a.preventDefault()},translate:false})},doReplaceWith:function(b){var a=this.dom;a.parentNode.replaceChild(Ext.getDom(b),a)},doScrollIntoView:function(o,d,j,c,m,r){aG=aG||new Ext.dom.Fly();var q=this,b=q.dom,h=aG.attach(o)[m](),p=o.scrollTop,a=q.getScrollIntoViewXY(o,h,p),f=a.x,g=a.y;if(c){if(j){j=Ext.apply({listeners:{afteranimate:function(){aG.attach(b).highlight()}}},j)}else{aG.attach(b).highlight()}}if(g!==p){aG.attach(o).scrollTo("top",g,j)}if(d!==false&&(f!==h)){aG.attach(o)[r]("left",f,j)}return q},down:function(b,a){return this.selectNode(b,!!a)},enableShadow:function(c,d){var b=this,f=b.shadow||(b.shadow=new Ext.dom.Shadow(Ext.apply({target:b},c))),a=b.shim;if(a){a.offsets=f.outerOffsets;a.shadow=f;f.shim=a}if(d===true||(d!==false&&b.isVisible())){f.show()}else{f.hide()}f.disabled=false},enableShim:function(c,d){var b=this,f=b.shim||(b.shim=new Ext.dom.Shim(Ext.apply({target:b},c))),a=b.shadow;if(a){f.offsets=a.outerOffsets;f.shadow=a;a.shim=f}if(d===true||(d!==false&&b.isVisible())){f.show()}else{f.hide()}f.disabled=false},findParent:function(f,c,d){var a=this,h=a.dom,b=aq.documentElement,g=0;if(c||c===0){if(typeof c!=="number"){b=Ext.getDom(c);c=Number.MAX_VALUE}}else{c=50}while(h&&h.nodeType===1&&g<c&&h!==b){if(Ext.fly(h).is(f)){return d?Ext.get(h):h}g++;h=h.parentNode}return null},findParentNode:function(a,c,d){var b=Ext.fly(this.dom.parentNode);return b?b.findParent(a,c,d):null},first:function(b,a){return this.matchNode("nextSibling","firstChild",b,a)},focus:function(a,b){var c=this;b=b||c.dom;if(Number(a)){Ext.defer(c.focus,a,c,[null,b])}else{Ext.GlobalEvents.fireEvent("beforefocus",b);b.focus()}return c},collect:function(){var d=this,c=d.dom,a=d.shadow,b=d.shim;if(!d.isFly){d.mixins.observable.destroy.call(d);delete Ext.cache[d.id];d.destroyed=true;d.el=null}if(c){c._extData=d.dom=null}if(a){a.hide();d.shadow=null}if(b){b.hide();d.shim=null}},getAnchorToXY:function(a,d,b,c){return a.getAnchorXY(d,b,c)},getAttribute:function(c,b){var a=this.dom;return b?(a.getAttributeNS(b,c)||a.getAttribute(b+":"+c)):(a.getAttribute(c)||a[c]||null)},getAttributes:function(){var a=this.dom.attributes,b={},c,f,d;for(f=0,d=a.length;f<d;f++){c=a[f];b[c.name]=c.value}return b},getBottom:function(a){return(a?this.getLocalY():this.getY())+this.getHeight()},getById:function(a,c){var b=aq.getElementById(a)||this.dom.querySelector(Ext.makeIdSelector(a));return c?b:(b?Ext.get(b):null)},getBorderPadding:function(){var b=this.getStyle(aF),a=this.getStyle(bi);return{beforeX:(parseFloat(a[aZ.l])||0)+(parseFloat(b[aP.l])||0),afterX:(parseFloat(a[aZ.r])||0)+(parseFloat(b[aP.r])||0),beforeY:(parseFloat(a[aZ.t])||0)+(parseFloat(b[aP.t])||0),afterY:(parseFloat(a[aZ.b])||0)+(parseFloat(b[aP.b])||0)}},getBorders:function(){var a=this.getStyle(bi);return{beforeX:(parseFloat(a[aZ.l])||0),afterX:(parseFloat(a[aZ.r])||0),beforeY:(parseFloat(a[aZ.t])||0),afterY:(parseFloat(a[aZ.b])||0)}},getBorderWidth:function(a){return this.addStyles(a,aZ)},getData:function(c){var a=this.dom,b;if(a){b=a._extData;if(!b&&!c){a._extData=b={}}}return b},getFirstChild:function(){return Ext.get(this.dom.firstElementChild)},getHeight:function(a,c){var b=this,g=b.isStyle("display","none"),d,f;if(g){return 0}d=b.dom.offsetHeight;if(Ext.supports.Direct2DBug){f=b.adjustDirect2DDimension(at);if(c){d+=f}else{if(f>0&&f<0.5){d++}}}if(a){d-=b.getBorderWidth("tb")+b.getPadding("tb")}return(d<0)?0:d},getHtml:function(){return this.dom?this.dom.innerHTML:""},getLeft:function(a){return a?this.getLocalX():this.getX()},getLocalX:function(){var a=this,b,c=a.getStyle("left");if(!c||c==="auto"){c=0}else{if(a7.test(c)){c=parseFloat(c)}else{c=a.getX();b=a.dom.offsetParent;if(b){c-=Ext.fly(b).getX()}}}return c},getLocalXY:function(){var a=this,b,c=a.getStyle(["left","top"]),d=c.left,f=c.top;if(!d||d==="auto"){d=0}else{if(a7.test(d)){d=parseFloat(d)}else{d=a.getX();b=a.dom.offsetParent;if(b){d-=Ext.fly(b).getX()}}}if(!f||f==="auto"){f=0}else{if(a7.test(f)){f=parseFloat(f)}else{f=a.getY();b=a.dom.offsetParent;if(b){f-=Ext.fly(b).getY()}}}return[d,f]},getLocalY:function(){var b=this,c,a=b.getStyle("top");if(!a||a==="auto"){a=0}else{if(a7.test(a)){a=parseFloat(a)}else{a=b.getY();c=b.dom.offsetParent;if(c){a-=Ext.fly(c).getY()}}}return a},getMargin:(function(){var a={t:"top",l:"left",r:"right",b:"bottom"},b=["margin-top","margin-left","margin-right","margin-bottom"];return function(c){var g=this,h,d,f;if(!c){h=g.getStyle(b);f={};if(h&&typeof h==="object"){f={};for(d in bc){f[d]=f[a[d]]=parseFloat(h[bc[d]])||0}}}else{f=g.addStyles(c,bc)}return f}})(),getPadding:function(a){return this.addStyles(a,aP)},getParent:function(){return Ext.get(this.dom.parentNode)},getRight:function(a){return(a?this.getLocalX():this.getX())+this.getWidth()},getScroll:function(){var b=this,f=b.dom,c=aq.documentElement,g,a,d=document.body;if(f===aq||f===d){g=c.scrollLeft||(d?d.scrollLeft:0);a=c.scrollTop||(d?d.scrollTop:0)}else{g=f.scrollLeft;a=f.scrollTop}return{left:g,top:a}},getScrollIntoViewXY:function(h,r,t){var o=this.dom,u=Ext.getDom(h),s=this.getOffsetsTo(u),v=o.offsetWidth,c=o.offsetHeight,w=s[0]+r,f=s[1]+t,m=f+c,g=w+v,b=u.clientHeight,q=u.clientWidth,j=r,a=t,p=a+b,d=j+q;if(c>b||f<a){t=f}else{if(m>p){t=m-b}}if(v>q||w<j){r=w}else{if(g>d){r=g-q}}return{x:r,y:t}},getScrollLeft:function(){var a=this.dom;if(a===aq||a===document.body){return this.getScroll().left}else{return a.scrollLeft}},getScrollTop:function(){var a=this.dom;if(a===aq||a===document.body){return this.getScroll().top}else{return a.scrollTop}},getSize:function(a){return{width:this.getWidth(a),height:this.getHeight(a)}},getStyle:function(o,a){var u=this,g=u.dom,f=typeof o!=="string",m=u.styleHooks,p=o,t=p,b=1,c,h,r,s,j,q,d;if(f){r={};p=t[0];d=0;if(!(b=t.length)){return r}}if(!g||g.documentElement){return r||""}c=g.style;if(a){q=c}else{q=g.ownerDocument.defaultView.getComputedStyle(g,null);if(!q){a=true;q=c}}do{s=m[p];if(!s){m[p]=s={name:a9.normalize(p)}}if(s.get){j=s.get(g,u,a,q)}else{h=s.name;j=q[h]}if(!f){return j}r[p]=j;p=t[++d]}while(d<b);return r},getStyleValue:function(a){return this.dom.style.getPropertyValue(a)},getTop:function(a){return a?this.getLocalY():this.getY()},getValue:function(a){var b=this.dom.value;return a?parseInt(b,10):b},getViewSize:function(){var a=this.dom;if(a===aq||a===aq.body){return{width:a9.getViewportWidth(),height:a9.getViewportHeight()}}else{return{width:a.clientWidth,height:a.clientHeight}}},getVisibilityMode:function(){var c=this,b=c.getData(),a=b.visibilityMode;if(a===undefined){b.visibilityMode=a=a9.DISPLAY}return a},getWidth:function(d,h){var a=this,g=a.dom,j=a.isStyle("display","none"),b,c,f;if(j){return 0}if(Ext.supports.BoundingClientRect){b=g.getBoundingClientRect();c=(a.vertical&&!Ext.supports.RotatedBoundingClientRect)?(b.bottom-b.top):(b.right-b.left);c=h?c:Math.ceil(c)}else{c=g.offsetWidth}if(Ext.supports.Direct2DBug&&!a.vertical){f=a.adjustDirect2DDimension(bg);if(h){c+=f}else{if(f>0&&f<0.5){c++}}}if(d){c-=a.getBorderWidth("lr")+a.getPadding("lr")}return(c<0)?0:c},getX:function(){return this.getXY()[0]},getXY:function(){var b=Math.round,g=this.dom,c=0,f=0,h,d;if(g!==aq&&g!==aq.body){try{h=g.getBoundingClientRect()}catch(a){h={left:0,top:0}}c=b(h.left);f=b(h.top);d=Ext.getDoc().getScroll();c+=d.left;f+=d.top}return[c,f]},getY:function(){return this.getXY()[1]},getZIndex:function(){return parseInt(this.getStyle("z-index"),10)},hasCls:function(b){var a=this.getData();if(!a.isSynchronized){this.synchronize()}return a.classMap.hasOwnProperty(b)},hide:function(){this.setVisible(false);return this},insertAfter:function(a){a=Ext.getDom(a);a.parentNode.insertBefore(this.dom,a.nextSibling);return this},insertBefore:function(a){a=Ext.getDom(a);a.parentNode.insertBefore(this.dom,a);return this},insertFirst:function(a,b){a=a||{};if(a.nodeType||a.dom||typeof a==="string"){a=Ext.getDom(a);this.dom.insertBefore(a,this.dom.firstChild);return !b?Ext.get(a):a}else{return this.createChild(a,this.dom.firstChild,b)}},insertHtml:function(c,b,d){var a=Ext.DomHelper.insertHtml(c,this.dom,b);return d?Ext.get(a):a},insertSibling:function(h,d,a){var b=this,o=Ext.DomHelper,m=(d||"before").toLowerCase()==="after",f,j,g,c;if(Ext.isIterable(h)){g=h.length;j=Ext.fly(document.createDocumentFragment());if(Ext.isArray(h)){for(c=0;c<g;c++){f=j.appendChild(h[c],a)}}else{for(c=0;c<g;c++){j.dom.appendChild(f=h[0])}if(a===false){f=Ext.get(f)}}b.dom.parentNode.insertBefore(j.dom,m?b.dom.nextSibling:b.dom);return f}h=h||{};if(h.nodeType||h.dom){f=b.dom.parentNode.insertBefore(Ext.getDom(h),m?b.dom.nextSibling:b.dom);if(!a){f=Ext.get(f)}}else{if(m&&!b.dom.nextSibling){f=o.append(b.dom.parentNode,h,!a)}else{f=o[m?"insertAfter":"insertBefore"](b.dom,h,!a)}}return f},is:function(c){var a=this.dom,b;if(!c){b=true}else{if(!a.tagName){b=false}else{if(Ext.isFunction(c)){b=c(a)}else{b=a[Ext.supports.matchesSelector](c)}}}return b},isAncestor:function(c){var d=false,b=this.dom,a=Ext.getDom(c);if(b&&a){if(b.contains){return b.contains(a)}else{if(b.compareDocumentPosition){return !!(b.compareDocumentPosition(a)&16)}else{while((a=a.parentNode)){d=a===b||d}}}}return d},isPainted:(function(){return !Ext.browser.is.IE?function(){var a=this.dom;return Boolean(a&&a.offsetParent)}:function(){var a=this.dom;return Boolean(a&&(a.offsetHeight!==0&&a.offsetWidth!==0))}})(),isScrollable:function(){var a=this.dom;return a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth},isStyle:function(b,a){return this.getStyle(b)===a},isVisible:function(b){var a=this.dom,c;if(!a){return false}if(!aW){aW=new Ext.dom.Fly()}for(c=a.ownerDocument.documentElement;a!==c;a=a.parentNode){if(!a||a.nodeType===11||(aW.attach(a)).isStyle(be,aK)||aW.isStyle(bl,a2)){return false}if(!b){break}}return true},last:function(b,a){return this.matchNode("previousSibling","lastChild",b,a)},maskIframes:function(){var a=document.getElementsByTagName("iframe");Ext.each(a,function(b){var c=Ext.fly(b.parentNode),d=c.mask();d.setStyle("background-color","transparent")})},matchNode:function(c,f,d,b){var a=this.dom,g;if(!a){return null}g=a[f];while(g){if(g.nodeType===1&&(!d||Ext.fly(g,"_matchNode").is(d))){return !b?Ext.get(g):g}g=g[c]}return null},next:function(b,a){return this.matchNode("nextSibling","nextSibling",b,a)},parent:function(b,a){return this.matchNode("parentNode","parentNode",b,a)},position:function(f,a,d,b){var c=this;if(c.dom.tagName!=="BODY"){if(!f&&c.isStyle(aY,a5)){c.setStyle(aY,a6)}else{if(f){c.setStyle(aY,f)}}if(a){c.setStyle(bb,a)}if(d||b){c.setXY([d||false,b||false])}}},prev:function(b,a){return this.matchNode("previousSibling","previousSibling",b,a)},query:function(g,m,p){var d=this.dom,b,a,o,h,j,c,f;if(!d){return null}m=(m!==false);g=g.split(",");if(!p){b=[]}for(c=0,a=g.length;c<a;c++){if(typeof g[c]==="string"){if(p){h=d.querySelector(g[c]);return m?h:Ext.get(h)}j=d.querySelectorAll(g[c]);for(f=0,o=j.length;f<o;f++){b.push(m?j[f]:Ext.get(j[f]))}}}return b},radioCls:function(a){var f=this.dom.parentNode.childNodes,c;a=Ext.isArray(a)?a:[a];for(var b=0,d=f.length;b<d;b++){c=f[b];if(c&&c.nodeType===1){Ext.fly(c).removeCls(a)}}return this.addCls(a)},redraw:function(){var a=this.dom,b=a.style;b.display="none";a.offsetHeight;b.display=""},remove:function(){this.destroy()},removeChild:function(a){this.dom.removeChild(Ext.getDom(a));return this},removeCls:function(q,b,o){var p=this,f=p.getData(),m,d,h,g,c,a,j;if(!q){return p}if(!f.isSynchronized){p.synchronize()}d=p.dom;h=f.classMap;g=f.classList;b=b?b+aT:"";o=o?aT+o:"";if(typeof q==="string"){q=q.split(ay)}for(c=0,a=q.length;c<a;c++){j=q[c];if(j){j=b+j+o;if(h[j]){delete h[j];Ext.Array.remove(g,j);m=true}}}if(m){d.className=g.join(" ")}return p},repaint:function(){var a=this;a.addCls("x-repaint");Ext.defer(function(){if(a.dom){Ext.fly(a.dom).removeCls("x-repaint")}},1);return a},replace:function(b,c){b=Ext.getDom(b);var d=b.parentNode,f=b.id,a=this.dom;if(c!==false&&f&&Ext.cache[f]){d.insertBefore(a,b);Ext.get(b).destroy()}else{d.replaceChild(a,b)}return this},replaceCls:function(g,q,a,h){var p=this,c,j,f,b,r,o,d=p.getData(),m;if(!g&&!q){return p}g=g||[];q=q||[];if(!d.isSynchronized){p.synchronize()}if(!h){h=""}c=p.dom;j=d.classMap;f=d.classList;a=a?a+aT:"";h=h?aT+h:"";if(typeof g==="string"){g=g.split(ay)}if(typeof q==="string"){q=q.split(ay)}for(b=0,r=g.length;b<r;b++){o=a+g[b]+h;if(j[o]){delete j[o];m=true}}for(b=0,r=q.length;b<r;b++){o=a+q[b]+h;if(!j[o]){j[o]=true;m=true}}if(m){d.classList=f=Ext.Object.getKeys(j);c.className=f.join(" ")}return p},replaceWith:function(a){var g=this,f=g.dom,b=f.parentNode,d=Ext.cache,c;g.clearListeners();if(a.nodeType||a.dom||typeof a==="string"){a=Ext.get(a);c=b.insertBefore(a.dom,f)}else{c=Ext.DomHelper.insertBefore(f,a)}b.removeChild(f);g.dom=c;if(!g.isFly){delete d[g.id];d[g.id=Ext.id(c)]=g}return g},resolveListenerScope:function(a){var b=this.component;return b?b.resolveListenerScope(a):this},scroll:function(m,j,g){if(!this.isScrollable()){return false}m=m.charAt(0);var a=this,d=a.dom,b=m==="r"||m==="l"?"left":"top",h=false,f,c;if(m==="l"||m==="t"||m==="u"){j=-j}if(b==="left"){f=d.scrollLeft;c=a.constrainScrollLeft(f+j)}else{f=d.scrollTop;c=a.constrainScrollTop(f+j)}if(c!==f){this.scrollTo(b,c,g);h=true}return h},scrollBy:function(c,d,b){var a=this,f=a.dom;if(c.length){b=d;d=c[1];c=c[0]}else{if(typeof c!="number"){b=d;d=c.y;c=c.x}}if(c){a.scrollTo("left",a.constrainScrollLeft(f.scrollLeft+c),b)}if(d){a.scrollTo("top",a.constrainScrollTop(f.scrollTop+d),b)}return a},scrollChildIntoView:function(a,b){Ext.fly(a).scrollIntoView(this,b)},scrollIntoView:function(d,a,b,c){d=Ext.getDom(d)||Ext.getBody().dom;return this.doScrollIntoView(d,a,b,c,"getScrollLeft","scrollTo")},scrollTo:function(b,j,d){var h=bm.test(b),a=this,f=h?"scrollTop":"scrollLeft",g=a.dom,c;if(!d||!a.anim){g[f]=j;g[f]=j}else{c={to:{}};c.to[f]=j;if(Ext.isObject(d)){Ext.applyIf(c,d)}a.animate(c)}return a},select:function(c,a){var d,b;if(typeof c==="string"){b=this.query(c,!a)}else{b=c;d=true}return a?new Ext.CompositeElement(b,!d):new Ext.CompositeElementLite(b,true)},selectNode:function(a,b){return this.query(a,b,true)},set:function(d,c){var a=this,f=a.dom,b,g;for(b in d){if(d.hasOwnProperty(b)){g=d[b];if(b==="style"){a.applyStyles(g)}else{if(b==="cls"){f.className=g}else{if(c!==false){if(g===undefined){f.removeAttribute(b)}else{f.setAttribute(b,g)}}else{f[b]=g}}}}}return a},setBottom:function(a){this.dom.style[aw]=a9.addUnits(a);return this},setCls:function(a){var h=this,b=h.getData(),c,j,d,g,f;if(!b.isSynchronized){h.synchronize()}if(typeof a==="string"){a=a.split(ay)}b.classList=f=a.slice();b.classMap=g={};for(c=0,j=f.length;c<j;c++){g[f[c]]=true}h.dom.className=f.join(" ")},setDisplayed:function(a){var b=this;if(typeof a==="boolean"){a=a?b._getDisplay():a2}b.setStyle(bl,a);if(b.shadow||b.shim){b.setUnderlaysVisible(a!==a2)}return b},setHeight:function(b){var a=this;a.dom.style[at]=a9.addUnits(b);if(a.shadow||a.shim){a.syncUnderlays()}return a},setHtml:function(a){if(this.dom){this.dom.innerHTML=a}return this},setId:function(a){var b=this,d=b.id,c=Ext.cache;if(d){delete c[d]}b.dom.id=a;b.id=a;c[a]=b;return b},setLeft:function(a){var b=this;b.dom.style[aD]=a9.addUnits(a);if(b.shadow||b.shim){b.syncUnderlays()}return b},setLocalX:function(c){var a=this,b=a.dom.style;b.right="auto";b.left=(c===null)?"auto":c+"px";if(a.shadow||a.shim){a.syncUnderlays()}return a},setLocalXY:function(d,a){var b=this,c=b.dom.style;c.right="auto";if(d&&d.length){a=d[1];d=d[0]}if(d===null){c.left="auto"}else{if(d!==undefined){c.left=d+"px"}}if(a===null){c.top="auto"}else{if(a!==undefined){c.top=a+"px"}}if(b.shadow||b.shim){b.syncUnderlays()}return b},setLocalY:function(a){var b=this;b.dom.style.top=(a===null)?"auto":a+"px";if(b.shadow||b.shim){b.syncUnderlays()}return b},setMargin:function(a){var b=this,c=b.dom.style;if(a||a===0){a=b.self.unitizeBox((a===true)?5:a);c.setProperty("margin",a,"important")}else{c.removeProperty("margin-top");c.removeProperty("margin-right");c.removeProperty("margin-bottom");c.removeProperty("margin-left")}},setMaxHeight:function(a){this.dom.style[aL]=a9.addUnits(a);return this},setMaxWidth:function(a){this.dom.style[a8]=a9.addUnits(a);return this},setMinHeight:function(a){this.dom.style[bk]=a9.addUnits(a);return this},setMinWidth:function(a){this.dom.style[aN]=a9.addUnits(a);return this},setOpacity:function(b){var a=this;if(a.dom){a.setStyle("opacity",b)}return a},setPadding:function(a){var b=this,c=b.dom.style;if(a||a===0){a=b.self.unitizeBox((a===true)?5:a);c.setProperty("padding",a,"important")}else{c.removeProperty("padding-top");c.removeProperty("padding-right");c.removeProperty("padding-bottom");c.removeProperty("padding-left")}},setRight:function(a){this.dom.style[aE]=a9.addUnits(a);return this},setScrollLeft:function(a){this.dom.scrollLeft=a;return this},setScrollTop:function(a){this.dom.scrollTop=a;return this},setSize:function(b,d){var a=this,c=a.dom.style;if(Ext.isObject(b)){d=b.height;b=b.width}c.width=a9.addUnits(b);c.height=a9.addUnits(d);if(a.shadow||a.shim){a.syncUnderlays()}return a},setSizeState:function(b){var c=this,a,d;if(b===true){a=aO;d=[av,aB]}else{if(b===false){a=av;d=[aO,aB]}else{if(b===null){a=aB;d=[aO,av]}else{d=[aO,av,aB]}}}if(a){c.addCls(a)}c.removeCls(d);return c},setStyle:function(f,h){var a=this,g=a.dom,d=a.styleHooks,b=g.style,c=f,j;if(typeof c==="string"){j=d[c];if(!j){d[c]=j={name:a9.normalize(c)}}h=(h==null)?"":h;if(j.set){j.set(g,h,a)}else{b[j.name]=h}if(j.afterSet){j.afterSet(g,h,a)}}else{for(c in f){if(f.hasOwnProperty(c)){j=d[c];if(!j){d[c]=j={name:a9.normalize(c)}}h=f[c];h=(h==null)?"":h;if(j.set){j.set(g,h,a)}else{b[j.name]=h}if(j.afterSet){j.afterSet(g,h,a)}}}}return a},setText:function(a){this.dom.textContent=a},setTop:function(a){var b=this;b.dom.style[ap]=a9.addUnits(a);if(b.shadow||b.shim){b.syncUnderlays()}return b},setUnderlaysVisible:function(c){var a=this.shadow,b=this.shim;if(a&&!a.disabled){if(c){a.show()}else{a.hide()}}if(b&&!b.disabled){if(c){b.show()}else{b.hide()}}},setVisibility:function(b){var a=this.dom.style;if(b){a.removeProperty("visibility")}else{a.setProperty("visibility","hidden","important")}},setVisibilityMode:function(a){this.getData().visibilityMode=a;return this},setVisible:function(b){var d=this,c=d.getVisibilityMode(),a=b?"removeCls":"addCls";switch(c){case a9.DISPLAY:d.removeCls([aI,bd,bo]);d[a](aM);break;case a9.VISIBILITY:d.removeCls([aM,bd,bo]);d[a](aI);break;case a9.OFFSETS:d.removeCls([aI,aM,bo]);d[a](bd);break;case a9.CLIP:d.removeCls([aI,aM,bd]);d[a](bo);break}if(d.shadow||d.shim){d.setUnderlaysVisible(b)}return d},setWidth:function(b){var a=this;a.dom.style[bg]=a9.addUnits(b);if(a.shadow||a.shim){a.syncUnderlays()}return a},setX:function(a){return this.setXY([a,false])},setXY:function(b){var c=this,a=c.translatePoints(b),d=c.dom.style,f;c.position();d.right="auto";for(f in a){if(!isNaN(a[f])){d[f]=a[f]+"px"}}if(c.shadow||c.shim){c.syncUnderlays()}return c},setY:function(a){return this.setXY([false,a])},setZIndex:function(b){var a=this;if(a.shadow){a.shadow.setZIndex(b)}if(a.shim){a.shim.setZIndex(b)}return a.setStyle("z-index",b)},show:function(){this.setVisible(true);return this},swapCls:function(c,f,d,h){if(d===undefined){d=true}var a=this,g=d?c:f,b=d?f:c;if(b){a.removeCls(h?h+"-"+b:b)}if(g){a.addCls(h?h+"-"+g:g)}return a},synchronize:function(){var a=this,f=a.dom,m={},b=f.className,h,d,c,j,g=a.getData();if(b&&b.length>0){h=f.className.split(aJ);for(d=0,c=h.length;d<c;d++){j=h[d];m[j]=true}}else{h=[]}g.classList=h;g.classMap=m;g.isSynchronized=true;return a},syncUnderlays:function(){var f=this,a=f.shadow,j=f.shim,h=f.dom,m,c,d,b,g;if(f.isVisible()){m=f.getXY();c=m[0];d=m[1];b=h.offsetWidth;g=h.offsetHeight;if(a&&!a.hidden){a.realign(c,d,b,g)}if(j&&!j.hidden){j.realign(c,d,b,g)}}},toggleCls:function(b,a){if(typeof a!=="boolean"){a=!this.hasCls(b)}return a?this.addCls(b):this.removeCls(b)},toggle:function(){this.setVisible(!this.isVisible());return this},translate:function(){var a="webkitTransform" in aq.createElement("div").style?"webkitTransform":"transform";return function(d,b,c){this.dom.style[a]="translate3d("+(d||0)+"px, "+(b||0)+"px, "+(c||0)+"px)"}}(),unmaskIframes:function(){var a=document.getElementsByTagName("iframe");Ext.each(a,function(b){var c=Ext.fly(b.parentNode);c.unmask()})},unwrap:function(){var g=this.dom,c=g.parentNode,a,h=Ext.fly(Ext.Element.getActiveElement()),j,b,f,d;j=Ext.cache[h.id];if(j){h=j}if(this.contains(h)){if(j){j.suspendFocusEvents()}b=true}if(c){a=c.parentNode;if(b){d=a.getAttribute("tabIndex");f=Ext.fly(a);f.set({tabIndex:-1});f.suspendFocusEvents();f.focus()}a.insertBefore(g,c);a.removeChild(c)}else{a=document.createDocumentFragment();a.appendChild(g)}if(b){if(j){j.focus();j.resumeFocusEvents()}else{Ext.fly(h).focus()}if(f){f.resumeFocusEvents();f.set({tabIndex:d})}}return this},up:function(a,c,b){return this.findParentNode(a,c,!b)},update:function(a){return this.setHtml(a)},wrap:function(f,m,b){var o=this,a=o.dom,c=Ext.DomHelper.insertBefore(a,f||{tag:"div"},!m),p=c,g=Ext.Element.getActiveElement(),d,h,j;d=Ext.cache[g.id];if(d){g=d}if(b){p=c.selectNode(b,m)}if(o.contains(g)){if(d){d.suspendFocusEvents()}j=c.dom.getAttribute("tabIndex");c.set({tabIndex:-1});c.suspendFocusEvents();c.focus();h=true}p.appendChild(a);if(h){if(d){d.focus();d.resumeFocusEvents()}else{Ext.fly(g).focus()}c.resumeFocusEvents();c.set({tabIndex:j})}return c},privates:{doAddListener:function(c,p,o,m,h,j,g){var a=this,f,d,b;c=Ext.canonicalEventName(c);if(!a.blockedEvents[c]){f=a.mixins.observable.doAddListener;m=m||{};if(a.longpressEvents[c]){a.disableTouchContextMenu()}if(a9.useDelegatedEvents===false){m.delegated=m.delegated||false}if(m.translate!==false){d=a.additiveEvents[c];if(d){m.type=c;c=d;f.call(a,c,p,o,m,h,j,g)}b=a.eventMap[c];if(b){m.type=m.type||c;c=b}}f.call(a,c,p,o,m,h,j,g);delete m.type}},doRemoveListener:function(d,j,a){var h=this,b,f,g,c;if(!h.blockedEvents[d]){b=h.mixins.observable.doRemoveListener;if(h.longpressEvents[d]){c=this._contextMenuListenerRemover;if(c){c.destroy()}}g=h.additiveEvents[d];if(g){d=g;b.call(h,d,j,a)}f=h.eventMap[d];if(f){b.call(h,f,j,a)}b.call(h,d,j,a)}},_initEvent:function(a){return(this.events[a]=new Ext.dom.ElementEvent(this,a))},_getDisplay:function(){var b=this.getData(),a=b[a1];if(a===undefined){b[a1]=a=""}return a},_getPublisher:function(c){var a=Ext.event.publisher.Publisher,b=a.publishersByEvent[c];if(!b||(this.dom===window&&c==="resize")){b=a.publishers.dom}return b},isFocusSuspended:function(){return !!this.getData().suspendFocusEvents},suspendFocusEvents:function(){if(!this.isFly){this.suspendEvent("focus","blur")}this.getData().suspendFocusEvents=true},resumeFocusEvents:function(){function a(){var b;if(!this.destroyed){b=this.getData();if(b){b.suspendFocusEvents=false}if(!this.isFly){this.resumeEvent("focus","blur")}}}if(!this.destroyed&&this.getData().suspendFocusEvents){if(Ext.isIE){Ext.asap(a,this)}else{a.call(this)}}}},deprecated:{"5.0":{methods:{cssTranslate:null,getHTML:"getHtml",getOuterHeight:null,getOuterWidth:null,getPageBox:function(g){var c=this,f=c.dom,a=f.nodeName==="BODY",p=a?a9.getViewportWidth():f.offsetWidth,d=a?a9.getViewportHeight():f.offsetHeight,m=c.getXY(),o=m[1],j=m[0]+p,b=m[1]+d,h=m[0];if(g){return new Ext.util.Region(o,j,b,h)}else{return{left:h,top:o,width:p,height:d,right:j,bottom:b}}},getScrollParent:null,isDescendent:null,isTransparent:function(a){var b=this.getStyle(a);return b?bn.test(b):false},purgeAllListeners:"clearListeners",removeAllListeners:"clearListeners",setHTML:"setHtml",setTopLeft:null}}}}},1,0,0,0,0,[[Ext.util.Positionable.prototype.mixinId||Ext.util.Positionable.$className,Ext.util.Positionable],[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.dom,"Element",Ext,"Element"],function(V){var ao=document,ad=V.prototype,aa=Ext.supports,N="pointerdown",al="pointermove",an="pointerup",am="pointercancel",ai="MSPointerDown",ab="MSPointerMove",U="MSPointerUp",ap="MSPointerCancel",O="mousedown",X="mousemove",M="mouseup",L="mouseover",P="mouseout",W="mouseenter",ak="mouseleave",ac="touchstart",af="touchmove",T="touchend",aj="touchcancel",S="click",ah="dblclick",ae="tap",R="doubletap",ag=ad.eventMap={},Q=ad.additiveEvents={},Z=Ext.id,Y;Ext.id=function(d,f){var a=Ext.getDom(d,true),c,b;if(!a){b=Z(d,f)}else{if(!(b=a.id)){b=Z(null,f||V.prototype.identifiablePrefix);if(Ext.isSandboxed){c=Ext.sandboxPrefix||(Ext.sandboxPrefix=Ext.sandboxName.toLowerCase()+"-");b=c+b}a.id=b}}return b};if(aa.PointerEvents){ag[O]=N;ag[X]=al;ag[M]=an;ag[ac]=N;ag[af]=al;ag[T]=an;ag[aj]=am;ag[S]=ae;ag[ah]=R;ag[L]="pointerover";ag[P]="pointerout";ag[W]="pointerenter";ag[ak]="pointerleave"}else{if(aa.MSPointerEvents){ag[N]=ai;ag[al]=ab;ag[an]=U;ag[am]=ap;ag[O]=ai;ag[X]=ab;ag[M]=U;ag[ac]=ai;ag[af]=ab;ag[T]=U;ag[aj]=ap;ag[S]=ae;ag[ah]=R;ag[L]="MSPointerOver";ag[P]="MSPointerOut"}else{if(aa.TouchEvents){ag[N]=ac;ag[al]=af;ag[an]=T;ag[am]=aj;ag[O]=ac;ag[X]=af;ag[M]=T;ag[S]=ae;ag[ah]=R;if(Ext.isWebKit&&Ext.os.is.Desktop){ag[ac]=O;ag[af]=X;ag[T]=M;ag[aj]=M;Q[O]=O;Q[X]=X;Q[M]=M;Q[ac]=ac;Q[af]=af;Q[T]=T;Q[aj]=aj;Q[N]=O;Q[al]=X;Q[an]=M;Q[am]=M}}else{ag[N]=O;ag[al]=X;ag[an]=M;ag[am]=M;ag[ac]=O;ag[af]=X;ag[T]=M;ag[aj]=M}}}if(Ext.isWebKit){ag.transitionend=Ext.browser.getVendorProperyName("transitionEnd");ag.animationstart=Ext.browser.getVendorProperyName("animationStart");ag.animationend=Ext.browser.getVendorProperyName("animationEnd")}if(!Ext.supports.MouseWheel&&!Ext.isOpera){ag.mousewheel="DOMMouseScroll"}Y=ad.$eventOptions=Ext.Object.chain(ad.$eventOptions);Y.translate=Y.capture=Y.delegate=Y.delegated=Y.stopEvent=Y.preventDefault=Y.stopPropagation=Y.element=1;ad.styleHooks.opacity={name:"opacity",afterSet:function(c,d,a){var b=a.shadow;if(b){b.setOpacity(d)}}};ad.getTrueXY=ad.getXY;Ext.select=V.select;Ext.query=V.query;Ext.apply(Ext,{get:function(a){return V.get(a)},getDom:function(a){if(!a||!ao){return null}return typeof a==="string"?Ext.getElementById(a):"dom" in a?a.dom:a},getBody:function(){if(!Ext._bodyEl){if(!ao.body){throw new Error("[Ext.getBody] document.body does not yet exist")}Ext._bodyEl=Ext.get(ao.body)}return Ext._bodyEl},getHead:function(){if(!Ext._headEl){Ext._headEl=Ext.get(ao.head||ao.getElementsByTagName("head")[0])}return Ext._headEl},getDoc:function(){if(!Ext._docEl){Ext._docEl=Ext.get(ao)}return Ext._docEl},getWin:function(){if(!Ext._winEl){Ext._winEl=Ext.get(window)}return Ext._winEl},removeNode:function(c){c=c.dom||c;var b=c&&c.id,d=Ext.cache[b],a;if(d){d.destroy()}else{if(c&&(c.nodeType===3||c.tagName.toUpperCase()!=="BODY")){a=c.parentNode;if(a){a.removeChild(c)}}}}});Ext.isGarbage=function(a){return a&&a.nodeType===1&&a.tagName!=="BODY"&&a.tagName!=="HTML"&&(!a.parentNode||(!a.offsetParent&&((Ext.isIE8?ao.all[a.id]:ao.getElementById(a.id))!==a)&&!(Ext.detachedBodyEl&&Ext.detachedBodyEl.isAncestor(a))))};if(Ext.os.is.Android||(Ext.os.is.Windows&&Ext.supports.Touch)){Ext.onReady(function(){var a=Ext.getWin();V._windowWidth=V._viewportWidth=window.innerWidth;V._windowHeight=V._viewportHeight=window.innerHeight;a.on({focusin:"_onWindowFocusChange",focusout:"_onWindowFocusChange",pointerup:"_onWindowFocusChange",capture:true,delegated:false,delay:1,scope:V});a.on({resize:"_onWindowResize",priority:2000,scope:V})})}}));(Ext.cmd.derive("Ext.util.Filter",Ext.Base,{isFilter:true,config:{property:null,value:null,filterFn:null,id:null,anyMatch:false,exactMatch:false,caseSensitive:false,disabled:false,disableOnEmpty:false,operator:null,root:null,serializer:null,convert:null},scope:null,$configStrict:false,statics:{createFilterFn:function(b){if(!b){return Ext.returnTrue}return function(m){var a=b.isCollection?b.items:b,j=a.length,q=true,p,o;for(p=0;q&&p<j;p++){o=a[p];if(!o.getDisabled()){q=o.filter(m)}}return q}},isInvalid:function(b){if(!b.filterFn){if(!b.property){return"A Filter requires either a property or a filterFn to be set"}if(!b.hasOwnProperty("value")&&!b.operator){return"A Filter requires either a property and value, or a filterFn to be set"}}return false}},constructor:function(b){this.initConfig(b)},preventConvert:{"in":1,notin:1},filter:function(g){var h=this,j=h._filterFn||h.getFilterFn(),m=h.getConvert(),o=h._value;h._filterValue=o;h.isDateValue=Ext.isDate(o);if(h.isDateValue){h.dateValue=o.getTime()}if(m&&!h.preventConvert[h.getOperator()]){h._filterValue=m.call(h.scope||h,o)}return j.call(h.scope||h,g)},getId:function(){var b=this._id;if(!b){b=this.getProperty();if(!b){b=Ext.id(null,"ext-filter-")}this._id=b}return b},getFilterFn:function(){var d=this,g=d._filterFn,f;if(!g){f=d.getOperator();if(f){g=d.operatorFns[f]}else{g=d.createRegexFilter()}d._filterFn=g}return g},createRegexFilter:function(){var g=this,j=!!g.getAnyMatch(),h=!!g.getExactMatch(),o=g.getValue(),m=Ext.String.createRegex(o,!j,!j&&h,!g.getCaseSensitive());return function(b){var a=g.getPropertyValue(b);return m?m.test(a):(a==null)}},getPropertyValue:function(d){var f=this._root,g=(f==null)?d:d[f];return g[this._property]},getState:function(){var g=this.getInitialConfig(),f={},d;for(d in g){if(g.hasOwnProperty(d)){f[d]=g[d]}}delete f.root;f.value=this.getValue();return f},getScope:function(){return this.scope},serialize:function(){var d=this.getState(),c=this.getSerializer();delete d.id;delete d.serializer;if(c){c.call(this,d)}return d},updateOperator:function(){this._filterFn=null},updateValue:function(b){this._filterFn=null;if(this.getDisableOnEmpty()){this.setDisabled(Ext.isEmpty(b))}},updateDisableOnEmpty:function(d){var c=false;if(d){c=Ext.isEmpty(this.getValue())}this.setDisabled(c)},privates:{getCandidateValue:function(q,h,o){var p=this,m=p._convert,j=p.getPropertyValue(q);if(m){j=m.call(p.scope||p,j)}else{if(!o){j=Ext.coerce(j,h)}}return j}}},1,0,0,0,0,0,[Ext.util,"Filter"],function(){var d=this.prototype,c=(d.operatorFns={"<":function(a){var b=this._filterValue;return this.getCandidateValue(a,b)<b},"<=":function(a){var b=this._filterValue;return this.getCandidateValue(a,b)<=b},"=":function(b){var a=this,g=a._filterValue;b=a.getCandidateValue(b,g);if(a.isDateValue&&b instanceof Date){b=b.getTime();g=a.dateValue}return b==g},"===":function(b){var a=this,g=a._filterValue;b=a.getCandidateValue(b,g,true);if(a.isDateValue&&b instanceof Date){b=b.getTime();g=a.dateValue}return b===g},">=":function(a){var b=this._filterValue;return this.getCandidateValue(a,b)>=b},">":function(a){var b=this._filterValue;return this.getCandidateValue(a,b)>b},"!=":function(b){var a=this,g=a._filterValue;b=a.getCandidateValue(b,g);if(a.isDateValue&&b instanceof Date){b=b.getTime();g=a.dateValue}return b!=g},"!==":function(b){var a=this,g=a._filterValue;b=a.getCandidateValue(b,g,true);if(a.isDateValue&&b instanceof Date){b=b.getTime();g=a.dateValue}return b!==g},"in":function(a){var b=this._filterValue;return Ext.Array.contains(b,this.getCandidateValue(a,b))},notin:function(a){var b=this._filterValue;return !Ext.Array.contains(b,this.getCandidateValue(a,b))},like:function(a){var b=this._filterValue;return b&&this.getCandidateValue(a,b).toLowerCase().indexOf(b.toLowerCase())>-1}});c["=="]=c["="];c.gt=c[">"];c.ge=c[">="];c.lt=c["<"];c.le=c["<="];c.eq=c["="];c.ne=c["!="]}));(Ext.cmd.derive("Ext.util.Observable",Ext.mixin.Observable,{$applyConfigs:true},0,0,0,0,0,0,[Ext.util,"Observable"],function(d){var c=Ext.mixin.Observable;d.releaseCapture=c.releaseCapture;d.capture=c.capture;d.captureArgs=c.captureArgs;d.observe=d.observeClass=c.observe}));(Ext.cmd.derive("Ext.util.AbstractMixedCollection",Ext.Base,{isMixedCollection:true,generation:0,indexGeneration:0,constructor:function(d,f){var g=this;if(arguments.length===1&&Ext.isObject(d)){g.initialConfig=d;Ext.apply(g,d)}else{g.allowFunctions=d===true;if(f){g.getKey=f}g.initialConfig={allowFunctions:g.allowFunctions,getKey:g.getKey}}g.items=[];g.map={};g.keys=[];g.indexMap={};g.length=0;g.mixins.observable.constructor.call(g)},destroy:function(){var b=this;b.items=b.map=b.keys=b.indexMap=null;b.callParent()},allowFunctions:false,add:function(j,h){var g=this.length,f;if(arguments.length===1){f=this.insert(g,j)}else{f=this.insert(g,j,h)}return f},getKey:function(b){return b.id},replace:function(o,j){var m=this,h,g;if(arguments.length==1){j=arguments[0];o=m.getKey(j)}h=m.map[o];if(typeof o=="undefined"||o===null||typeof h=="undefined"){return m.add(o,j)}m.generation++;g=m.indexOfKey(o);m.items[g]=j;m.map[o]=j;if(m.hasListeners.replace){m.fireEvent("replace",o,h,j)}return j},reorder:function(t){var q=this,m=q.items,u=0,r=m.length,o=[],s=[],p;q.suspendEvents();for(p in t){o[t[p]]=m[p]}for(u=0;u<r;u++){if(t[u]==undefined){s.push(m[u])}}for(u=0;u<r;u++){if(o[u]==undefined){o[u]=s.shift()}}q.clear();q.addAll(o);q.resumeEvents()},updateKey:function(p,o){var r=this,q=r.map,m=r.indexOfKey(p),s=r.indexMap,j;if(m>-1){j=q[p];delete q[p];delete s[p];q[o]=j;s[o]=m;r.keys[m]=o;r.indexGeneration=++r.generation}},addAll:function(g){var d=this,f;if(arguments.length>1||Ext.isArray(g)){d.insert(d.length,arguments.length>1?arguments:g)}else{for(f in g){if(g.hasOwnProperty(f)){if(d.allowFunctions||typeof g[f]!="function"){d.add(f,g[f])}}}}},each:function(o,p){var h=Ext.Array.push([],this.items),q=0,j=h.length,m;for(;q<j;q++){m=h[q];if(o.call(p||m,m,q,j)===false){break}}},eachKey:function(o,p){var m=this.keys,h=this.items,q=0,j=m.length;for(;q<j;q++){o.call(p||window,m[q],h[q],q,j)}},findBy:function(o,p){var m=this.keys,h=this.items,q=0,j=h.length;for(;q<j;q++){if(o.call(p||window,h[q],m[q])){return h[q]}}return null},insert:function(f,j,h){var g;if(Ext.isIterable(j)){g=this.doInsert(f,j,h)}else{if(arguments.length>2){g=this.doInsert(f,[j],[h])}else{g=this.doInsert(f,[j])}g=g[0]}return g},doInsert:function(A,u,v){var y=this,G,F,C,z=u.length,H=z,D=y.hasListeners.add,E,B={},w,I,J;if(v!=null){y.useLinearSearch=true}else{v=u;u=new Array(z);for(C=0;C<z;C++){u[C]=this.getKey(v[C])}}y.suspendEvents();for(C=0;C<z;C++){G=u[C];F=y.indexOfKey(G);if(F!==-1){if(F<A){A--}y.removeAt(F)}if(G!=null){if(B[G]!=null){w=true;H--}B[G]=C}}y.resumeEvents();if(w){I=u;J=v;u=new Array(H);v=new Array(H);C=0;for(G in B){u[C]=I[B[G]];v[C]=J[B[G]];C++}z=H}E=A===y.length&&y.indexGeneration===y.generation;Ext.Array.insert(y.items,A,v);Ext.Array.insert(y.keys,A,u);y.length+=z;y.generation++;if(E){y.indexGeneration=y.generation}for(C=0;C<z;C++,A++){G=u[C];if(G!=null){y.map[G]=v[C];if(E){y.indexMap[G]=A}}if(D){y.fireEvent("add",A,v[C],G)}}return v},remove:function(h){var j=this,f,g;if(!j.useLinearSearch&&(f=j.getKey(h))){g=j.indexOfKey(f)}else{g=Ext.Array.indexOf(j.items,h)}return(g===-1)?false:j.removeAt(g)},removeAll:function(f){var g=this,d;if(f||g.hasListeners.remove){if(f){for(d=f.length-1;d>=0;--d){g.remove(f[d])}}else{while(g.length){g.removeAt(0)}}}else{g.length=g.items.length=g.keys.length=0;g.map={};g.indexMap={};g.generation++;g.indexGeneration=g.generation}},removeAt:function(g){var j=this,h,f;if(g<j.length&&g>=0){j.length--;h=j.items[g];Ext.Array.erase(j.items,g,1);f=j.keys[g];if(typeof f!="undefined"){delete j.map[f]}Ext.Array.erase(j.keys,g,1);if(j.hasListeners.remove){j.fireEvent("remove",h,f)}j.generation++;return h}return false},removeRange:function(q,w){var p=this,v,o,r,s,u,t;if(q<p.length&&q>=0){if(!w){w=1}s=Math.min(q+w,p.length);w=s-q;t=s===p.length;u=t&&p.indexGeneration===p.generation;for(r=q;r<s;r++){o=p.keys[r];if(o!=null){delete p.map[o];if(u){delete p.indexMap[o]}}}v=p.items[r-1];p.length-=w;p.generation++;if(u){p.indexGeneration=p.generation}if(t){p.items.length=p.keys.length=p.length}else{p.items.splice(q,w);p.keys.splice(q,w)}return v}return false},removeAtKey:function(f){var h=this,j=h.keys,g;if(f==null){for(g=j.length-1;g>=0;g--){if(j[g]==null){h.removeAt(g)}}}else{return h.removeAt(h.indexOfKey(f))}},getCount:function(){return this.length},indexOf:function(g){var d=this,f;if(g!=null){if(!d.useLinearSearch&&(f=d.getKey(g))){return this.indexOfKey(f)}return Ext.Array.indexOf(d.items,g)}return -1},indexOfKey:function(b){if(!this.map.hasOwnProperty(b)){return -1}if(this.indexGeneration!==this.generation){this.rebuildIndexMap()}return this.indexMap[b]},rebuildIndexMap:function(){var j=this,m=j.indexMap={},o=j.keys,h=o.length,g;for(g=0;g<h;g++){m[o[g]]=g}j.indexGeneration=j.generation},get:function(f){var h=this,g=h.map[f],j=g!==undefined?g:(typeof f=="number")?h.items[f]:undefined;return typeof j!="function"||h.allowFunctions?j:null},getAt:function(b){return this.items[b]},getByKey:function(b){return this.map[b]},contains:function(g){var d=this,f;if(g!=null){if(!d.useLinearSearch&&(f=d.getKey(g))){return this.map[f]!=null}return Ext.Array.indexOf(this.items,g)!==-1}return false},containsKey:function(b){return this.map.hasOwnProperty(b)},clear:function(){var b=this;if(b.generation){b.length=0;b.items=[];b.keys=[];b.map={};b.indexMap={};b.generation++;b.indexGeneration=b.generation}if(b.hasListeners.clear){b.fireEvent("clear")}},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},sum:function(q,m,p,o){var u=this.extractValues(q,m),r=u.length,s=0,t;p=p||0;o=(o||o===0)?o:r-1;for(t=p;t<=o;t++){s+=u[t]}return s},collect:function(q,u,s){var p=this.extractValues(q,u),z=p.length,y={},w=[],r,t,v;for(v=0;v<z;v++){r=p[v];t=String(r);if((s||!Ext.isEmpty(r))&&!y[t]){y[t]=true;w.push(r)}}return w},extractValues:function(g,f){var d=this.items;if(f){d=Ext.Array.pluck(d,f)}return Ext.Array.pluck(d,g)},hasRange:function(c,d){return(d<this.length)},getRange:function(p,m){var q=this,t=q.items,u=[],o=t.length,r,s;if(o<1){return u}if(p>m){s=true;r=p;p=m;m=r}if(p<0){p=0}if(m==null||m>=o){m=o-1}u=t.slice(p,m+1);if(s&&u.length){u.reverse()}return u},filter:function(m,o,j,h){var g=[];if(Ext.isString(m)){g.push(new Ext.util.Filter({property:m,value:o,anyMatch:j,caseSensitive:h}))}else{if(Ext.isArray(m)||m instanceof Ext.util.Filter){g=g.concat(m)}}return this.filterBy(Ext.util.Filter.createFilterFn(g))},filterBy:function(s,t){var p=this,o=new p.self(p.initialConfig),q=p.keys,m=p.items,r=m.length,u;o.getKey=p.getKey;for(u=0;u<r;u++){if(s.call(t||p,m[u],q[u])){o.add(q[u],m[u])}}o.useLinearSearch=p.useLinearSearch;return o},findIndex:function(o,g,j,m,h){if(Ext.isEmpty(g,false)){return -1}g=this.createValueMatcher(g,m,h);return this.findIndexBy(function(a){return a&&g.test(a[o])},null,j)},findIndexBy:function(s,t,p){var q=this,r=q.keys,m=q.items,u=p||0,o=m.length;for(;u<o;u++){if(s.call(t||q,m[u],r[u])){return u}}return -1},createValueMatcher:function(o,j,h,g){if(!o.exec){var m=Ext.String.escapeRegex;o=String(o);if(j===true){o=m(o)}else{o="^"+m(o);if(g===true){o+="$"}}o=new RegExp(o,h?"":"i")}return o},clone:function(){var d=this,c=new d.self(d.initialConfig);c.add(d.keys,d.items);c.useLinearSearch=d.useLinearSearch;return c}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.util,"AbstractMixedCollection"],0));(Ext.cmd.derive("Ext.util.Sorter",Ext.Base,{isSorter:true,config:{property:null,sorterFn:null,root:null,transform:null,direction:"ASC",id:undefined},statics:{createComparator:function(c,d){d=d||0;return function(q,a){var o=c.isCollection?c.items:c,b=o.length,p,m;for(m=0;m<b;++m){p=o[m].sort(q,a);if(p){return p}}return d&&d(q,a)}}},multiplier:1,constructor:function(b){this.initConfig(b)},getId:function(){var b=this._id;if(!b){b=this.getProperty();if(!b){b=Ext.id(null,"ext-sorter-")}this._id=b}return b},sort:function(d,c){return this.multiplier*this.sortFn(d,c)},sortFn:function(t,u){var r=this,s=r._transform,m=r._root,q=r._property,o,p;if(m){t=t[m];u=u[m]}o=t[q];p=u[q];if(s){o=s(o);p=s(p)}return(o>p)?1:(o<p?-1:0)},applyDirection:function(b){return b?b:"ASC"},updateDirection:function(b){this.multiplier=(b.toUpperCase()==="DESC")?-1:1},updateProperty:function(b){if(b){delete this.sortFn}},updateSorterFn:function(b){this.sortFn=b},toggle:function(){this.setDirection(Ext.String.toggle(this.getDirection(),"ASC","DESC"))},getState:function(){var c=this,d={root:c.getRoot(),property:c.getProperty(),direction:c.getDirection()};if(c._id){d.id=c._id}return d},serialize:function(){return{property:this.getProperty(),direction:this.getDirection()}}},1,0,0,0,0,0,[Ext.util,"Sorter"],0));(Ext.cmd.derive("Ext.util.Sortable",Ext.Base,{isSortable:true,$configPrefixed:false,$configStrict:false,config:{sorters:null},defaultSortDirection:"ASC",multiSortLimit:3,statics:{createComparator:function(b){return b&&b.length?function(m,o){var a=b[0].sort(m,o),h=b.length,j=1;for(;!a&&j<h;j++){a=b[j].sort.call(b[j],m,o)}return a}:function(){return 0}}},applySorters:function(g){var d=this,f=d.getSorters()||new Ext.util.MixedCollection(false,Ext.returnId);if(g){f.addAll(d.decodeSorters(g))}return f},sort:function(q,r,o,s){var m=this,p,t,u=m.getSorters();if(!u){m.setSorters(null);u=m.getSorters()}if(Ext.isArray(q)){s=o;o=r}else{if(Ext.isObject(q)){q=[q];s=o;o=r}else{if(Ext.isString(q)){p=u.get(q);if(!p){p={property:q,direction:r}}else{if(r==null){p.toggle()}else{p.setDirection(r)}}q=[p]}}}if(q&&q.length){q=m.decodeSorters(q);switch(o){case"multi":u.insert(0,q[0]);t=u.getCount()-m.multiSortLimit;if(t>0){u.removeRange(m.multiSortLimit,t)}break;case"prepend":u.insert(0,q);break;case"append":u.addAll(q);break;case undefined:case null:case"replace":u.clear();u.addAll(q);break;default:}}if(s!==false){m.fireEvent("beforesort",m,q);m.onBeforeSort(q);if(m.getSorterCount()){m.doSort(m.generateComparator())}}return q},getSorterCount:function(){return this.getSorters().items.length},generateComparator:function(){var b=this.getSorters().getRange();return b.length?this.createComparator(b):this.emptyComparator},emptyComparator:function(){return 0},onBeforeSort:Ext.emptyFn,decodeSorters:function(p){if(!Ext.isArray(p)){if(p===undefined){p=[]}else{p=[p]}}var r=p.length,o=Ext.util.Sorter,j=this.getModel?this.getModel():this.model,q,m,s;for(s=0;s<r;s++){m=p[s];if(!(m instanceof o)){if(Ext.isString(m)){m={property:m}}Ext.applyIf(m,{root:this.sortRoot,direction:"ASC"});if(m.fn){m.sorterFn=m.fn}if(typeof m=="function"){m={sorterFn:m}}if(j&&!m.transform){q=j.getField(m.property);m.transform=q&&q.sortType!==Ext.identityFn?q.sortType:undefined}p[s]=new Ext.util.Sorter(m)}}return p},getFirstSorter:function(){var j=this.getSorters().items,g=j.length,f=0,h;for(;f<g;++f){h=j[f];if(!h.isGrouper){return h}}return null}},0,0,0,0,0,0,[Ext.util,"Sortable"],function(){this.prototype.createComparator=this.createComparator}));(Ext.cmd.derive("Ext.util.MixedCollection",Ext.util.AbstractMixedCollection,{constructor:function(){this.initConfig();Ext.util.AbstractMixedCollection.prototype.constructor.apply(this,arguments)},doSort:function(b){this.sortBy(b)},_sort:function(o,A,s){var t=this,y,w,z=String(A).toUpperCase()=="DESC"?-1:1,u=[],c=t.keys,v=t.items,B;s=s||function(a,b){return a-b};for(y=0,w=v.length;y<w;y++){u[u.length]={key:c[y],value:v[y],index:y}}Ext.Array.sort(u,function(a,b){return s(a[o],b[o])*z||(a.index<b.index?-1:1)});for(y=0,w=u.length;y<w;y++){B=u[y];v[y]=B.value;c[y]=B.key;t.indexMap[B.key]=y}t.generation++;t.indexGeneration=t.generation;t.fireEvent("sort",t)},sortBy:function(m){var p=this,o=p.items,q,r=p.keys,t,s=o.length,u;for(u=0;u<s;u++){o[u].$extCollectionIndex=u}Ext.Array.sort(o,function(b,a){return m(b,a)||(b.$extCollectionIndex<a.$extCollectionIndex?-1:1)});for(u=0;u<s;u++){q=o[u];t=p.getKey(q);r[u]=t;p.indexMap[t]=u;delete o.$extCollectionIndex}p.generation++;p.indexGeneration=p.generation;p.fireEvent("sort",p,o,r)},findInsertionIndex:function(s,t){var r=this,m=r.items,p=0,o=m.length-1,u,q;if(!t){t=r.generateComparator()}while(p<=o){u=(p+o)>>1;q=t(s,m[u]);if(q>=0){p=u+1}else{if(q<0){o=u-1}}}return p},reorder:function(b){Ext.util.AbstractMixedCollection.prototype.reorder.call(this,b);this.fireEvent("sort",this)},sortByKey:function(d,c){this._sort("key",d,c||function(h,j){var a=String(h).toUpperCase(),b=String(j).toUpperCase();return a>b?1:(a<b?-1:0)})}},1,0,0,0,0,[["sortable",Ext.util.Sortable]],[Ext.util,"MixedCollection"],0));(Ext.cmd.derive("Ext.util.TaskRunner",Ext.Base,{interval:10,timerId:null,constructor:function(d){var c=this;if(typeof d=="number"){c.interval=d}else{if(d){Ext.apply(c,d)}}c.tasks=[];c.timerFn=Ext.Function.bind(c.onTick,c)},newTask:function(c){var d=new Ext.util.TaskRunner.Task(c);d.manager=this;return d},start:function(f){var g=this,d=Ext.Date.now();if(!f.pending){g.tasks.push(f);f.pending=true}f.stopped=false;f.taskStartTime=d;f.taskRunTime=f.fireOnStart!==false?0:f.taskStartTime;f.taskRunCount=0;if(!g.firing){if(f.fireOnStart!==false){g.startTimer(0,d)}else{g.startTimer(f.interval,d)}}return f},stop:function(b){if(!b.stopped){b.stopped=true;if(b.onStop){b.onStop.call(b.scope||b,b)}}return b},stopAll:function(){Ext.each(this.tasks,this.stop,this)},firing:false,nextExpires:1e+99,onTick:function(){var v=this,C=v.tasks,H=Ext.Date.now(),u=1e+99,y=C.length,E=Ext.GlobalEvents,F,J,A,G,D,B,I;v.timerId=null;v.firing=true;for(A=0;A<y||A<(y=C.length);++A){G=C[A];if(!(B=G.stopped)){F=G.taskRunTime+G.interval;if(F<=H){D=1;if(G.hasOwnProperty("fireIdleEvent")){I=G.fireIdleEvent}else{I=v.fireIdleEvent}try{D=G.run.apply(G.scope||G,G.args||[++G.taskRunCount])}catch(z){try{if(G.onError){D=G.onError.call(G.scope||G,G,z)}}catch(w){}}G.taskRunTime=H;if(D===false||G.taskRunCount===G.repeat){v.stop(G);B=true}else{B=G.stopped;F=H+G.interval}}if(!B&&G.duration&&G.duration<=(H-G.taskStartTime)){v.stop(G);B=true}}if(B){G.pending=false;if(!J){J=C.slice(0,A)}}else{if(J){J.push(G)}if(u>F){u=F}}}if(J){v.tasks=J}v.firing=false;if(v.tasks.length){v.startTimer(u-H,Ext.Date.now())}if(I!==false&&E.hasListeners.idle){E.fireEvent("idle")}},startTimer:function(j,o){var m=this,g=o+j,h=m.timerId;if(h&&m.nextExpires-g>m.interval){clearTimeout(h);h=null}if(!h){if(j<m.interval){j=m.interval}m.timerId=Ext.defer(m.timerFn,j);m.nextExpires=g}}},1,0,0,0,0,0,[Ext.util,"TaskRunner"],function(){var c=this,d=c.prototype;d.destroy=d.stopAll;c.Task=new Ext.Class({isTask:true,stopped:true,fireOnStart:false,constructor:function(a){Ext.apply(this,a)},restart:function(a){if(a!==undefined){this.interval=a}this.manager.start(this)},start:function(a){if(this.stopped){this.restart(a)}},stop:function(){this.manager.stop(this)}});d=c.Task.prototype;d.destroy=d.stop}));(Ext.cmd.derive("Ext.fx.target.Target",Ext.Base,{isAnimTarget:true,constructor:function(b){this.target=b;this.id=this.getId()},getId:function(){return this.target.id},remove:function(){Ext.destroy(this.target)}},1,0,0,0,0,0,[Ext.fx.target,"Target"],0));(Ext.cmd.derive("Ext.fx.target.Element",Ext.fx.target.Target,{type:"element",getElVal:function(d,f,g){if(g===undefined){if(f==="x"){g=d.getX()}else{if(f==="y"){g=d.getY()}else{if(f==="scrollTop"){g=d.getScroll().top}else{if(f==="scrollLeft"){g=d.getScroll().left}else{if(f==="height"){g=d.getHeight()}else{if(f==="width"){g=d.getWidth()}else{g=d.getStyle(f)}}}}}}}return g},getAttr:function(f,g){var d=this.target;return[[d,this.getElVal(d,f,g)]]},setAttr:function(o){var r=o.length,t,p,q,s,u,j;for(s=0;s<r;s++){t=o[s].attrs;for(p in t){if(t.hasOwnProperty(p)){j=t[p].length;for(u=0;u<j;u++){q=t[p][u];this.setElVal(q[0],p,q[1])}}}}},setElVal:function(d,f,g){if(f==="x"){d.setX(g)}else{if(f==="y"){d.setY(g)}else{if(f==="scrollTop"){d.scrollTo("top",g)}else{if(f==="scrollLeft"){d.scrollTo("left",g)}else{if(f==="width"){d.setWidth(g)}else{if(f==="height"){d.setHeight(g)}else{d.setStyle(f,g)}}}}}}}},0,0,0,0,0,0,[Ext.fx.target,"Element"],0));(Ext.cmd.derive("Ext.fx.target.ElementCSS",Ext.fx.target.Element,{setAttr:function(J,B){var G={attrs:[],duration:[],easing:[]},o=J.length,j=function(){this.setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",null);this.setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",null);this.setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",null)},I={single:true},A,H,y,w,D,E,z,C,F;for(z=0;z<o;z++){H=J[z];D=H.duration;w=H.easing;H=H.attrs;for(y in H){if(Ext.Array.indexOf(G.attrs,y)==-1){G.attrs.push(y.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()}));G.duration.push(D+"ms");G.easing.push(w)}}}A=G.attrs.join(",");D=G.duration.join(",");w=G.easing.join(", ");for(z=0;z<o;z++){H=J[z].attrs;for(y in H){F=H[y].length;for(C=0;C<F;C++){E=H[y][C];E[0].setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",B?"":A);E[0].setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",B?"":D);E[0].setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",B?"":w);E[0].setStyle(y,E[1]);if(B){E=E[0].dom.offsetWidth}else{E[0].on(Ext.supports.CSS3TransitionEnd,j,E[0],I)}}}}}},0,0,0,0,0,0,[Ext.fx.target,"ElementCSS"],0));(Ext.cmd.derive("Ext.fx.target.CompositeElement",Ext.fx.target.Element,{isComposite:true,constructor:function(b){b.id=b.id||Ext.id(null,"ext-composite-");Ext.fx.target.Element.prototype.constructor.call(this,b)},getAttr:function(o,p){var m=[],q=this.target,r=q.elements,s=r.length,u,t;for(u=0;u<s;u++){t=r[u];if(t){t=q.getElement(t);m.push([t,this.getElVal(t,o,p)])}}return m},setAttr:function(u){var w=this.target,v=u.length,D=w.elements,F=D.length,t,B,j,y,C,z,A,E;for(z=0;z<v;z++){j=u[z].attrs;for(y in j){if(j.hasOwnProperty(y)){E=j[y].length;for(A=0;A<E;A++){t=j[y][A][1];for(B=0;B<F;++B){C=D[B];if(C){C=w.getElement(C);this.setElVal(C,y,t)}}}}}}},remove:function(){this.target.destroy()}},1,0,0,0,0,0,[Ext.fx.target,"CompositeElement"],0));(Ext.cmd.derive("Ext.fx.target.CompositeElementCSS",Ext.fx.target.CompositeElement,{setAttr:function(){return Ext.fx.target.ElementCSS.prototype.setAttr.apply(this,arguments)}},0,0,0,0,0,0,[Ext.fx.target,"CompositeElementCSS"],0));(Ext.cmd.derive("Ext.fx.target.Sprite",Ext.fx.target.Target,{type:"draw",getFromPrim:function(d,f){var g;switch(f){case"rotate":case"rotation":g=d.attr.rotation;return{x:g.x||0,y:g.y||0,degrees:g.degrees||0};case"scale":case"scaling":g=d.attr.scaling;return{x:g.x||1,y:g.y||1,cx:g.cx||0,cy:g.cy||0};case"translate":case"translation":g=d.attr.translation;return{x:g.x||0,y:g.y||0};default:return d.attr[f]}},getAttr:function(d,c){return[[this.target,c!==undefined?c:this.getFromPrim(this.target,d)]]},setAttr:function(w){var B=w.length,z=[],F,C,J,H,I,j,v,D,E,y,A,G;for(D=0;D<B;D++){F=w[D].attrs;for(C in F){J=F[C];G=J.length;for(E=0;E<G;E++){I=J[E][0];H=J[E][1];if(C==="translate"||C==="translation"){v={x:H.x,y:H.y}}else{if(C==="rotate"||C==="rotation"){y=H.x;if(isNaN(y)){y=null}A=H.y;if(isNaN(A)){A=null}v={degrees:H.degrees,x:y,y:A}}else{if(C==="scale"||C==="scaling"){y=H.x;if(isNaN(y)){y=null}A=H.y;if(isNaN(A)){A=null}v={x:y,y:A,cx:H.cx,cy:H.cy}}else{if(C==="width"||C==="height"||C==="x"||C==="y"){v=parseFloat(H)}else{v=H}}}}j=Ext.Array.indexOf(z,I);if(j===-1){z.push([I,{}]);j=z.length-1}z[j][1][C]=v}}}B=z.length;for(D=0;D<B;D++){z[D][0].setAttributes(z[D][1])}this.target.redraw()}},0,0,0,0,0,0,[Ext.fx.target,"Sprite"],0));(Ext.cmd.derive("Ext.fx.target.CompositeSprite",Ext.fx.target.Sprite,{getAttr:function(m,o){var j=[],p=[].concat(this.target.items),q=p.length,r,s;for(r=0;r<q;r++){s=p[r];j.push([s,o!==undefined?o:this.getFromPrim(s,m)])}return j}},0,0,0,0,0,0,[Ext.fx.target,"CompositeSprite"],0));(Ext.cmd.derive("Ext.fx.target.Component",Ext.fx.target.Target,{type:"component",getPropMethod:{top:function(){return this.getPosition(true)[1]},left:function(){return this.getPosition(true)[0]},x:function(){return this.getPosition()[0]},y:function(){return this.getPosition()[1]},height:function(){return this.getHeight()},width:function(){return this.getWidth()},opacity:function(){return this.el.getStyle("opacity")}},setMethods:{top:"setPosition",left:"setPosition",x:"setPagePosition",y:"setPagePosition",height:"setSize",width:"setSize",opacity:"setOpacity"},getAttr:function(d,c){return[[this.target,c!==undefined?c:this.getPropMethod[d].call(this.target)]]},setAttr:function(K,C,I){var M=this,N=K.length,w,h,G,B,D,j,E,L,F,o,J={},H;for(B=0;B<N;B++){w=K[B].attrs;for(h in w){j=w[h].length;for(D=0;D<j;D++){G=w[h][D];H=J[M.setMethods[h]]||(J[M.setMethods[h]]={});H.target=G[0];H[h]=G[1]}}if(J.setPosition){G=J.setPosition;E=(G.left===undefined)?undefined:parseFloat(G.left);L=(G.top===undefined)?undefined:parseFloat(G.top);G.target.setPosition(E,L)}if(J.setPagePosition){G=J.setPagePosition;G.target.setPagePosition(G.x,G.y)}if(J.setSize){G=J.setSize;F=(G.width===undefined)?G.target.getWidth():parseFloat(G.width);o=(G.height===undefined)?G.target.getHeight():parseFloat(G.height);G.target.el.setSize(F,o);if(I||M.dynamic){Ext.GlobalEvents.on({idle:Ext.Function.bind(G.target.setSize,G.target,[F,o]),single:true})}}if(J.setOpacity){G=J.setOpacity;G.target.el.setStyle("opacity",G.opacity)}}}},0,0,0,0,0,0,[Ext.fx.target,"Component"],0));(Ext.cmd.derive("Ext.fx.Queue",Ext.Base,{constructor:function(){this.targets=new Ext.util.HashMap();this.fxQueue={}},getFxDefaults:function(d){var c=this.targets.get(d);if(c){return c.fxDefaults}return{}},setFxDefaults:function(f,g){var d=this.targets.get(f);if(d){d.fxDefaults=Ext.apply(d.fxDefaults||{},g)}},stopAnimation:function(g){var j=this,h=j.getFxQueue(g),m=h.length,o;while(m){o=h[m-1];if(o){o.end()}m--}},getActiveAnimation:function(c){var d=this.getFxQueue(c);return(d&&!!d.length)?d[0]:false},hasFxBlock:function(c){var d=this.getFxQueue(c);return d&&d[0]&&d[0].block},getFxQueue:function(f){if(!f){return false}var j=this,g=j.fxQueue[f],h=j.targets.get(f);if(!h){return false}if(!g){j.fxQueue[f]=[];if(h.type!=="element"){h.target.on("destroy",function(){j.fxQueue[f]=[]})}}return j.fxQueue[f]},queueFx:function(m){var o=this,j=m.target,h,g;if(!j){return}h=o.getFxQueue(j.getId());g=h.length;if(g){if(m.concurrent){m.paused=false}else{h[g-1].on("afteranimate",function(){m.paused=false})}}else{m.paused=false}m.on("afteranimate",function(){Ext.Array.remove(h,m);if(h.length===0){o.targets.remove(m.target)}if(m.remove){if(j.type==="element"){var a=Ext.get(j.id);if(a){a.destroy()}}}},o,{single:true});h.push(m)}},1,0,0,0,0,0,[Ext.fx,"Queue"],0));(Ext.cmd.derive("Ext.fx.Manager",Ext.Base,{singleton:true,constructor:function(){var b=this;b.items=new Ext.util.MixedCollection();b.targetArr={};b.mixins.queue.constructor.call(b);b.taskRunner=new Ext.util.TaskRunner()},interval:16,forceJS:true,createTarget:function(h){var f=this,j=!f.forceJS&&Ext.supports.Transitions,g;f.useCSS3=j;if(h){if(h.tagName||Ext.isString(h)||h.isFly){h=Ext.get(h);g=new Ext.fx.target["Element"+(j?"CSS":"")](h)}else{if(h.dom){g=new Ext.fx.target["Element"+(j?"CSS":"")](h)}else{if(h.isComposite){g=new Ext.fx.target["CompositeElement"+(j?"CSS":"")](h)}else{if(h.isSprite){g=new Ext.fx.target.Sprite(h)}else{if(h.isCompositeSprite){g=new Ext.fx.target.CompositeSprite(h)}else{if(h.isComponent){g=new Ext.fx.target.Component(h)}else{if(h.isAnimTarget){return h}else{return null}}}}}}}f.targets.add(g);return g}else{return null}},addAnim:function(h){var j=this,f=j.items,g=j.task;f.add(h.id,h);if(!g&&f.length){g=j.task={run:j.runner,interval:j.interval,scope:j};j.taskRunner.start(g)}},removeAnim:function(h){var j=this,f=j.items,g=j.task;f.removeAtKey(h.id);if(g&&!f.length){j.taskRunner.stop(g);delete j.task}},runner:function(){var m=this,g=m.items.getRange(),o=0,h=g.length,j;m.targetArr={};m.timestamp=new Date();for(;o<h;o++){j=g[o];if(j.isReady()){m.startAnim(j)}}for(o=0;o<h;o++){j=g[o];if(j.isRunning()){m.runAnim(j)}}m.applyPendingAttrs();m.targetArr=null},startAnim:function(b){b.start(this.timestamp)},runAnim:function(s,o){if(!s){return}var t=this,q=t.useCSS3&&s.target.type==="element",m=t.timestamp-s.startTime,u=(m>=s.duration),r,p;if(o){m=s.duration;u=true}r=this.collectTargetData(s,m,q,u);if(q){s.target.setAttr(r.anims[s.id].attributes,true);t.collectTargetData(s,s.duration,q,u);s.paused=true;r=s.target.target;if(s.target.isComposite){r=s.target.target.last()}p={};p[Ext.supports.CSS3TransitionEnd]=s.lastFrame;p.scope=s;p.single=true;r.on(p)}return r},jumpToEnd:function(j){var f=this,h,g;if(!f.targetArr){f.targetArr={};g=true}h=f.runAnim(j,true);f.applyAnimAttrs(h,h.anims[j.id]);if(g){f.targetArr=null}},collectTargetData:function(q,j,o,m){var h=q.target.getId(),p=this.targetArr[h];if(!p){p=this.targetArr[h]={id:h,el:q.target,anims:{}}}p.anims[q.id]={id:q.id,anim:q,elapsed:j,isLastFrame:m,attributes:[{duration:q.duration,easing:(o&&q.reverse)?q.easingFn.reverse().toCSS3():q.easing,attrs:q.runAnim(j)}]};return p},applyAnimAttrs:function(g,f){var d=f.anim;if(f.attributes&&d.isRunning()){g.el.setAttr(f.attributes,false,f.isLastFrame);if(f.isLastFrame){d.lastFrame()}}},applyPendingAttrs:function(){var o=this.targetArr,m,q,h,p,j;for(q in o){if(o.hasOwnProperty(q)){m=o[q];for(j in m.anims){if(m.anims.hasOwnProperty(j)){h=m.anims[j];p=h.anim;if(h.attributes&&p.isRunning()){m.el.setAttr(h.attributes,false,h.isLastFrame);if(h.isLastFrame){p.lastFrame()}}}}}}}},1,0,0,0,0,[["queue",Ext.fx.Queue]],[Ext.fx,"Manager"],0));(Ext.cmd.derive("Ext.fx.Animator",Ext.Base,{isAnimator:true,duration:250,delay:0,delayStart:0,dynamic:false,easing:"ease",running:false,paused:false,damper:1,iterations:1,currentIteration:0,keyframeStep:0,animKeyFramesRE:/^(from|to|\d+%?)$/,constructor:function(d){var c=this;d=Ext.apply(c,d||{});c.config=d;c.id=Ext.id(null,"ext-animator-");c.mixins.observable.constructor.call(c,d);c.timeline=[];c.createTimeline(c.keyframes);if(c.target){c.applyAnimator(c.target);Ext.fx.Manager.addAnim(c)}},sorter:function(a,b){return a.pct-b.pct},createTimeline:function(y){var u=this,r=[],t=u.to||{},A=u.duration,q,B,z,v,s,w;for(s in y){if(y.hasOwnProperty(s)&&u.animKeyFramesRE.test(s)){w={attrs:Ext.apply(y[s],t)};if(s==="from"){s=0}else{if(s==="to"){s=100}}w.pct=parseInt(s,10);r.push(w)}}Ext.Array.sort(r,u.sorter);v=r.length;for(z=0;z<v;z++){q=(r[z-1])?A*(r[z-1].pct/100):0;B=A*(r[z].pct/100);u.timeline.push({duration:B-q,attrs:r[z].attrs})}},applyAnimator:function(v){var s=this,r=[],p=s.timeline,t=p.length,y,u,z,q,w;if(s.fireEvent("beforeanimate",s)!==false){for(w=0;w<t;w++){y=p[w];q=y.attrs;u=q.easing||s.easing;z=q.damper||s.damper;delete q.easing;delete q.damper;y=new Ext.fx.Anim({target:v,easing:u,damper:z,duration:y.duration,paused:true,to:q});r.push(y)}s.animations=r;s.target=y.target;for(w=0;w<t-1;w++){y=r[w];y.nextAnim=r[w+1];y.on("afteranimate",function(){this.nextAnim.paused=false});y.on("afteranimate",function(){this.fireEvent("keyframe",this,++this.keyframeStep)},s)}r[t-1].on("afteranimate",function(){this.lastFrame()},s)}},start:function(m){var j=this,o=j.delay,g=j.delayStart,h;if(o){if(!g){j.delayStart=m;return}else{h=m-g;if(h<o){return}else{m=new Date(g.getTime()+o)}}}if(j.fireEvent("beforeanimate",j)!==false){j.startTime=m;j.running=true;j.animations[j.keyframeStep].paused=false}},lastFrame:function(){var g=this,f=g.iterations,d=g.currentIteration;d++;if(d<f){g.startTime=new Date();g.currentIteration=d;g.keyframeStep=0;g.applyAnimator(g.target);g.animations[g.keyframeStep].paused=false}else{g.currentIteration=0;g.end()}},end:function(){var b=this;b.fireEvent("afteranimate",b,b.startTime,new Date()-b.startTime)},isReady:function(){return this.paused===false&&this.running===false&&this.iterations>0},isRunning:function(){return false}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.fx,"Animator"],0));(Ext.cmd.derive("Ext.fx.CubicBezier",Ext.Base,{singleton:true,cubicBezierAtTime:function(J,E,G,t,v,A){var z=3*E,w=3*(t-E)-z,H=1-z-w,B=3*G,y=3*(v-G)-B,I=1-B-y;function C(a){return((H*a+w)*a+z)*a}function F(b,c){var a=D(b,c);return((I*a+y)*a+B)*a}function D(d,g){var j,a,h,c,f,b;for(h=d,b=0;b<8;b++){c=C(h)-d;if(Math.abs(c)<g){return h}f=(3*H*h+2*w)*h+z;if(Math.abs(f)<0.000001){break}h=h-c/f}j=0;a=1;h=d;if(h<j){return j}if(h>a){return a}while(j<a){c=C(h);if(Math.abs(c-d)<g){return h}if(d>c){j=h}else{a=h}h=(a-j)/2+j}return h}return F(J,1/(200*A))},cubicBezier:function(g,j,h,o){var m=function(a){return Ext.fx.CubicBezier.cubicBezierAtTime(a,g,j,h,o,1)};m.toCSS3=function(){return"cubic-bezier("+[g,j,h,o].join(",")+")"};m.reverse=function(){return Ext.fx.CubicBezier.cubicBezier(1-h,1-o,1-g,1-j)};return m}},0,0,0,0,0,0,[Ext.fx,"CubicBezier"],0));(Ext.cmd.derive("Ext.fx.Easing",Ext.Base,function(){var q=Math,o=q.PI,r=q.pow,j=q.sin,p=q.sqrt,m=q.abs,s=1.70158;return{singleton:true,linear:Ext.identityFn,ease:function(b){var h=0.07813-b/2,t=p(0.0066+h*h),d=t-h,c=r(m(d),1/3)*(d<0?-1:1),f=-t-h,g=r(m(f),1/3)*(f<0?-1:1),a=c+g+0.25;return r(1-a,2)*3*a*0.1+(1-a)*3*a*a+a*a*a},easeIn:function(a){return r(a,1.7)},easeOut:function(a){return r(a,0.48)},easeInOut:function(b){var h=0.48-b/1.04,t=p(0.1734+h*h),d=t-h,c=r(m(d),1/3)*(d<0?-1:1),f=-t-h,g=r(m(f),1/3)*(f<0?-1:1),a=c+g+0.5;return(1-a)*3*a*a+a*a*a},backIn:function(a){return a*a*((s+1)*a-s)},backOut:function(a){a=a-1;return a*a*((s+1)*a+s)+1},elasticIn:function(c){if(c===0||c===1){return c}var a=0.3,b=a/4;return r(2,-10*c)*j((c-b)*(2*o)/a)+1},elasticOut:function(a){return 1-Ext.fx.Easing.elasticIn(1-a)},bounceIn:function(a){return 1-Ext.fx.Easing.bounceOut(1-a)},bounceOut:function(c){var a=7.5625,d=2.75,b;if(c<(1/d)){b=a*c*c}else{if(c<(2/d)){c-=(1.5/d);b=a*c*c+0.75}else{if(c<(2.5/d)){c-=(2.25/d);b=a*c*c+0.9375}else{c-=(2.625/d);b=a*c*c+0.984375}}}return b}}},0,0,0,0,0,0,[Ext.fx,"Easing"],function(d){var g=d.self,f=g.prototype;g.addMembers({"back-in":f.backIn,"back-out":f.backOut,"ease-in":f.easeIn,"ease-out":f.easeOut,"elastic-in":f.elasticIn,"elastic-out":f.elasticOut,"bounce-in":f.bounceIn,"bounce-out":f.bounceOut,"ease-in-out":f.easeInOut})}));(Ext.cmd.derive("Ext.fx.DrawPath",Ext.Base,{singleton:true,pathToStringRE:/,?([achlmqrstvxz]),?/gi,pathCommandRE:/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,pathValuesRE:/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,stopsRE:/^(\d+%?)$/,radian:Math.PI/180,is:function(c,d){d=String(d).toLowerCase();return(d=="object"&&c===Object(c))||(d=="undefined"&&typeof c==d)||(d=="null"&&c===null)||(d=="array"&&Array.isArray&&Array.isArray(c))||(Object.prototype.toString.call(c).toLowerCase().slice(8,-1))==d},path2string:function(){return this.join(",").replace(Ext.fx.DrawPath.pathToStringRE,"$1")},pathToString:function(b){return b.join(",").replace(Ext.fx.DrawPath.pathToStringRE,"$1")},parsePathString:function(g){if(!g){return null}var h={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},j=[],f=this;if(f.is(g,"array")&&f.is(g[0],"array")){j=f.pathClone(g)}if(!j.length){String(g).replace(f.pathCommandRE,function(d,o,a){var b=[],c=o.toLowerCase();a.replace(f.pathValuesRE,function(m,q){if(q){b.push(+q)}});if(c=="m"&&b.length>2){j.push([o].concat(Ext.Array.splice(b,0,2)));c="l";o=(o=="m")?"l":"L"}while(b.length>=h[c]){j.push([o].concat(Ext.Array.splice(b,0,h[c])));if(!h[c]){break}}})}j.toString=f.path2string;return j},pathClone:function(m){var q=[],j,o,h,p;if(!this.is(m,"array")||!this.is(m&&m[0],"array")){m=this.parsePathString(m)}for(h=0,p=m.length;h<p;h++){q[h]=[];for(j=0,o=m[h].length;j<o;j++){q[h][j]=m[h][j]}}q.toString=this.path2string;return q},pathToAbsolute:function(A){if(!this.is(A,"array")||!this.is(A&&A[0],"array")){A=this.parsePathString(A)}var u=[],r=0,t=0,D=0,j=0,w=0,v=A.length,B,z,y,C;if(v&&A[0][0]=="M"){r=+A[0][1];t=+A[0][2];D=r;j=t;w++;u[0]=["M",r,t]}for(;w<v;w++){B=u[w]=[];z=A[w];if(z[0]!=z[0].toUpperCase()){B[0]=z[0].toUpperCase();switch(B[0]){case"A":B[1]=z[1];B[2]=z[2];B[3]=z[3];B[4]=z[4];B[5]=z[5];B[6]=+(z[6]+r);B[7]=+(z[7]+t);break;case"V":B[1]=+z[1]+t;break;case"H":B[1]=+z[1]+r;break;case"M":D=+z[1]+r;j=+z[2]+t;default:y=1;C=z.length;for(;y<C;y++){B[y]=+z[y]+((y%2)?r:t)}}}else{y=0;C=z.length;for(;y<C;y++){u[w][y]=z[y]}}switch(B[0]){case"Z":r=D;t=j;break;case"H":r=B[1];break;case"V":t=B[1];break;case"M":z=u[w];C=z.length;D=z[C-2];j=z[C-1];default:z=u[w];C=z.length;r=z[C-2];t=z[C-1]}}u.toString=this.path2string;return u},interpolatePaths:function(H,w){var z=this,D=z.pathToAbsolute(H),v=z.pathToAbsolute(w),p={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},G={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},F=function(c,b){if(c[b].length>7){c[b].shift();var a=c[b];while(a.length){Ext.Array.splice(c,b++,0,["C"].concat(Ext.Array.splice(a,0,6)))}Ext.Array.erase(c,b,1);J=Math.max(D.length,v.length||0)}},E=function(d,f,b,c,a){if(d&&f&&d[a][0]=="M"&&f[a][0]!="M"){Ext.Array.splice(f,a,0,["M",c.x,c.y]);b.bx=0;b.by=0;b.x=d[a][1];b.y=d[a][2];J=Math.max(D.length,v.length||0)}},A,J,B,I,C,y;for(A=0,J=Math.max(D.length,v.length||0);A<J;A++){D[A]=z.command2curve(D[A],p);F(D,A);(v[A]=z.command2curve(v[A],G));F(v,A);E(D,v,p,G,A);E(v,D,G,p,A);B=D[A];I=v[A];C=B.length;y=I.length;p.x=B[C-2];p.y=B[C-1];p.bx=parseFloat(B[C-4])||p.x;p.by=parseFloat(B[C-3])||p.y;G.bx=(parseFloat(I[y-4])||G.x);G.by=(parseFloat(I[y-3])||G.y);G.x=I[y-2];G.y=I[y-1]}return[D,v]},command2curve:function(g,d){var f=this;if(!g){return["C",d.x,d.y,d.x,d.y,d.x,d.y]}if(g[0]!="T"&&g[0]!="Q"){d.qx=d.qy=null}switch(g[0]){case"M":d.X=g[1];d.Y=g[2];break;case"A":g=["C"].concat(f.arc2curve.apply(f,[d.x,d.y].concat(g.slice(1))));break;case"S":g=["C",d.x+(d.x-(d.bx||d.x)),d.y+(d.y-(d.by||d.y))].concat(g.slice(1));break;case"T":d.qx=d.x+(d.x-(d.qx||d.x));d.qy=d.y+(d.y-(d.qy||d.y));g=["C"].concat(f.quadratic2curve(d.x,d.y,d.qx,d.qy,g[1],g[2]));break;case"Q":d.qx=g[1];d.qy=g[2];g=["C"].concat(f.quadratic2curve(d.x,d.y,g[1],g[2],g[3],g[4]));break;case"L":g=["C"].concat(d.x,d.y,g[1],g[2],g[1],g[2]);break;case"H":g=["C"].concat(d.x,d.y,g[1],d.y,g[1],d.y);break;case"V":g=["C"].concat(d.x,d.y,d.x,g[1],d.x,g[1]);break;case"Z":g=["C"].concat(d.x,d.y,d.X,d.Y,d.X,d.Y);break}return g},quadratic2curve:function(m,t,q,s,o,u){var r=1/3,p=2/3;return[r*m+p*q,r*t+p*s,r*o+p*q,r*u+p*s,o,u]},rotate:function(j,o,m){var r=Math.cos(m),s=Math.sin(m),p=j*r-o*s,q=j*s+o*r;return{x:p,y:q}},arc2curve:function(aQ,az,aw,ay,aK,aV,aZ,aR,aC,aI){var aO=this,a1=Math.PI,aM=aO.radian,aA=a1*120/180,a3=aM*(+aK||0),aq=[],au=Math,aj=au.cos,a4=au.sin,y=au.sqrt,aP=au.abs,aU=au.asin,av,ao,ap,aJ,a2,al,ai,aE,aG,aW,aX,aS,aY,aD,a0,aF,an,ak,am,aH,aL,aN,t,ar,h,at,aB,ax,aT;if(!aI){av=aO.rotate(aQ,az,-a3);aQ=av.x;az=av.y;av=aO.rotate(aR,aC,-a3);aR=av.x;aC=av.y;ao=(aQ-aR)/2;ap=(az-aC)/2;aJ=(ao*ao)/(aw*aw)+(ap*ap)/(ay*ay);if(aJ>1){aJ=y(aJ);aw=aJ*aw;ay=aJ*ay}a2=aw*aw;al=ay*ay;ai=(aV==aZ?-1:1)*y(aP((a2*al-a2*ap*ap-al*ao*ao)/(a2*ap*ap+al*ao*ao)));aE=ai*aw*ap/ay+(aQ+aR)/2;aG=ai*-ay*ao/aw+(az+aC)/2;aW=aU(((az-aG)/ay).toFixed(7));aX=aU(((aC-aG)/ay).toFixed(7));aW=aQ<aE?a1-aW:aW;aX=aR<aE?a1-aX:aX;if(aW<0){aW=a1*2+aW}if(aX<0){aX=a1*2+aX}if(aZ&&aW>aX){aW=aW-a1*2}if(!aZ&&aX>aW){aX=aX-a1*2}}else{aW=aI[0];aX=aI[1];aE=aI[2];aG=aI[3]}aS=aX-aW;if(aP(aS)>aA){aB=aX;ax=aR;aT=aC;aX=aW+aA*(aZ&&aX>aW?1:-1);aR=aE+aw*aj(aX);aC=aG+ay*a4(aX);aq=aO.arc2curve(aR,aC,aw,ay,aK,0,aZ,ax,aT,[aX,aB,aE,aG])}aS=aX-aW;aY=aj(aW);aD=a4(aW);a0=aj(aX);aF=a4(aX);an=au.tan(aS/4);ak=4/3*aw*an;am=4/3*ay*an;aH=[aQ,az];aL=[aQ+ak*aD,az-am*aY];aN=[aR+ak*aF,aC-am*a0];t=[aR,aC];aL[0]=2*aH[0]-aL[0];aL[1]=2*aH[1]-aL[1];if(aI){return[aL,aN,t].concat(aq)}else{aq=[aL,aN,t].concat(aq).join().split(",");ar=[];at=aq.length;for(h=0;h<at;h++){ar[h]=h%2?aO.rotate(aq[h-1],aq[h],a3).y:aO.rotate(aq[h],aq[h+1],a3).x}return ar}}},0,0,0,0,0,0,[Ext.fx,"DrawPath"],0));(Ext.cmd.derive("Ext.fx.PropertyHandler",Ext.Base,{statics:{defaultHandler:{pixelDefaultsRE:/width|height|top$|bottom$|left$|right$/i,unitRE:/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/,scrollRE:/^scroll/i,computeDelta:function(o,u,w,r,p){w=(typeof w=="number")?w:1;var q=this.unitRE,t=q.exec(o),v,s;if(t){o=t[1];s=t[2];if(!this.scrollRE.test(p)&&!s&&this.pixelDefaultsRE.test(p)){s="px"}}o=+o||0;t=q.exec(u);if(t){u=t[1];s=t[2]||s}u=+u||0;v=(r!=null)?r:o;return{from:o,delta:(u-v)*w,units:s}},get:function(j,C,D,s,v){var t=j.length,A=[],z,w,u,B,y;for(z=0;z<t;z++){if(s){w=s[z][1].from}if(Ext.isArray(j[z][1])&&Ext.isArray(C)){u=[];B=0;y=j[z][1].length;for(;B<y;B++){u.push(this.computeDelta(j[z][1][B],C[B],D,w,v))}A.push([j[z][0],u])}else{A.push([j[z][0],this.computeDelta(j[z][1],C,D,w,v)])}}return A},set:function(j,r){var q=j.length,u=[],t,w,p,s,v;for(t=0;t<q;t++){w=j[t][1];if(Ext.isArray(w)){p=[];v=0;s=w.length;for(;v<s;v++){p.push(w[v].from+w[v].delta*r+(w[v].units||0))}u.push([j[t][0],p])}else{u.push([j[t][0],w.from+w.delta*r+(w.units||0)])}}return u}},stringHandler:{computeDelta:function(j,g,m,o,h){return{from:j,delta:g}},get:function(o,v,w,p,r){var q=o.length,u=[],t,s;for(t=0;t<q;t++){u.push([o[t][0],this.computeDelta(o[t][1],v,w,s,r)])}return u},set:function(j,m){var p=j.length,h=[],q,o;for(q=0;q<p;q++){o=j[q][1];h.push([j[q][0],o.delta])}return h}},color:{rgbRE:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,hexRE:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,hex3RE:/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,parseColor:function(s,w){w=(typeof w=="number")?w:1;var r=false,u=[this.hexRE,this.rgbRE,this.hex3RE],t=u.length,p,v,o,q;for(q=0;q<t;q++){o=u[q];v=(q%2===0)?16:10;p=o.exec(s);if(p&&p.length===4){if(q===2){p[1]+=p[1];p[2]+=p[2];p[3]+=p[3]}r={red:parseInt(p[1],v),green:parseInt(p[2],v),blue:parseInt(p[3],v)};break}}return r||s},computeDelta:function(o,m,q,s){o=this.parseColor(o);m=this.parseColor(m,q);var p=s?s:o,j=typeof p,r=typeof m;if(j==="string"||j==="undefined"||r==="string"||r==="undefined"){return m||p}return{from:o,delta:{red:Math.round((m.red-p.red)*q),green:Math.round((m.green-p.green)*q),blue:Math.round((m.blue-p.blue)*q)}}},get:function(p,o,r,t){var q=p.length,u=[],s,m;for(s=0;s<q;s++){if(t){m=t[s][1].from}u.push([p[s][0],this.computeDelta(p[s][1],o,r,m)])}return u},set:function(o,s){var r=o.length,u=[],t,v,w,q,p;for(t=0;t<r;t++){v=o[t][1];if(v){q=v.from;p=v.delta;v=(typeof v==="object"&&"red" in v)?"rgb("+v.red+", "+v.green+", "+v.blue+")":v;v=(typeof v==="object"&&v.length)?v[0]:v;if(typeof v==="undefined"){return[]}w=typeof v==="string"?v:"rgb("+[(q.red+Math.round(p.red*s))%256,(q.green+Math.round(p.green*s))%256,(q.blue+Math.round(p.blue*s))%256].join(",")+")";u.push([o[t][0],w])}}return u}},object:{interpolate:function(h,f){f=(typeof f==="number")?f:1;var g={},j;for(j in h){g[j]=parseFloat(h[j])*f}return g},computeDelta:function(o,m,s,j){o=this.interpolate(o);m=this.interpolate(m,s);var p=j?j:o,q={},r;for(r in m){q[r]=m[r]-p[r]}return{from:o,delta:q}},get:function(p,o,r,t){var q=p.length,u=[],s,m;for(s=0;s<q;s++){if(t){m=t[s][1].from}u.push([p[s][0],this.computeDelta(p[s][1],o,r,m)])}return u},set:function(p,t){var s=p.length,w=[],u={},v,r,q,y,z;for(v=0;v<s;v++){y=p[v][1];r=y.from;q=y.delta;for(z in r){u[z]=r[z]+q[z]*t}w.push([p[v][0],u])}return w}},path:{computeDelta:function(j,h,o,g){o=(typeof o==="number")?o:1;var m;j=+j||0;h=+h||0;m=(g!=null)?g:j;return{from:j,delta:(h-m)*o}},forcePath:function(b){if(!Ext.isArray(b)&&!Ext.isArray(b[0])){b=Ext.fx.DrawPath.parsePathString(b)}return b},get:function(G,A,H,L){var F=this.forcePath(A),y=[],J=G.length,E,B,w,C,j,z,D,I,K;for(w=0;w<J;w++){K=this.forcePath(G[w][1]);C=Ext.fx.DrawPath.interpolatePaths(K,F);K=C[0];F=C[1];E=K.length;I=[];for(z=0;z<E;z++){C=[K[z][0]];B=K[z].length;for(D=1;D<B;D++){j=L&&L[0][1][z][D].from;C.push(this.computeDelta(K[z][D],F[z][D],H,j))}I.push(C)}y.push([G[w][0],I])}return y},set:function(j,t){var s=j.length,z=[],w,y,A,v,u,B,D,C;for(w=0;w<s;w++){B=j[w][1];v=[];D=B.length;for(y=0;y<D;y++){u=[B[y][0]];C=B[y].length;for(A=1;A<C;A++){u.push(B[y][A].from+B[y][A].delta*t)}v.push(u.join(","))}z.push([j[w][0],v.join(",")])}return z}}}},0,0,0,0,0,0,[Ext.fx,"PropertyHandler"],function(){var f=["outlineColor","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","fill","stroke"],j=f.length,g=0,h;for(;g<j;g++){h=f[g];this[h]=this.color}f=["cursor"];j=f.length;g=0;for(;g<j;g++){h=f[g];this[h]=this.stringHandler}}));(Ext.cmd.derive("Ext.fx.Anim",Ext.Base,{isAnimation:true,duration:250,delay:0,delayStart:0,dynamic:false,easing:"ease",damper:1,bezierRE:/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,reverse:false,running:false,paused:false,iterations:1,autoEnd:false,alternate:false,currentIteration:0,startTime:0,frameCount:0,constructor:function(f){var d=this,g;f=f||{};if(f.keyframes){return new Ext.fx.Animator(f)}Ext.apply(d,f);if(d.from===undefined){d.from={}}d.propHandlers={};d.config=f;d.target=Ext.fx.Manager.createTarget(d.target);d.easingFn=Ext.fx.Easing[d.easing];d.target.dynamic=d.dynamic;if(!d.easingFn){d.easingFn=String(d.easing).match(d.bezierRE);if(d.easingFn&&d.easingFn.length===5){g=d.easingFn;d.easingFn=Ext.fx.CubicBezier.cubicBezier(+g[1],+g[2],+g[3],+g[4])}}d.id=Ext.id(null,"ext-anim-");d.mixins.observable.constructor.call(d);Ext.fx.Manager.addAnim(d);if(f.autoEnd){d.running=true;d.jumpToEnd()}},setAttr:function(d,c){return Ext.fx.Manager.items.get(this.id).setAttr(this.target,d,c)},initAttrs:function(){var s=this,q=s.from,p=s.to,r=s.initialFrom||{},u={},w,v,o,t;for(t in p){if(p.hasOwnProperty(t)){w=s.target.getAttr(t,q[t]);v=p[t];if(!Ext.fx.PropertyHandler[t]){if(Ext.isObject(v)){o=s.propHandlers[t]=Ext.fx.PropertyHandler.object}else{o=s.propHandlers[t]=Ext.fx.PropertyHandler.defaultHandler}}else{o=s.propHandlers[t]=Ext.fx.PropertyHandler[t]}u[t]=o.get(w,v,s.damper,r[t],t)}}s.currentAttrs=u},start:function(m){var j=this,o=j.delay,g=j.delayStart,h;if(o){if(!g){j.delayStart=m;return}else{h=m-g;if(h<o){return}else{m=new Date(g.getTime()+o)}}}if(j.fireEvent("beforeanimate",j)!==false){j.startTime=m;if(!j.paused&&!j.currentAttrs){j.initAttrs()}j.running=true;j.frameCount=0}},jumpToEnd:function(){var b=this;if(!b.endWasCalled){if(!b.currentAttrs){b.initAttrs()}Ext.fx.Manager.jumpToEnd(b);b.end()}},runAnim:function(q){var t=this,r=t.currentAttrs,y=t.duration,z=t.easingFn,A=t.propHandlers,v={},u,s,w,B;if(q>=y){q=y;B=true}if(t.reverse){q=y-q}for(w in r){if(r.hasOwnProperty(w)){s=r[w];u=B?1:z(q/y);v[w]=A[w].set(s,u)}}t.frameCount++;return v},lastFrame:function(){var g=this,f=g.iterations,d=g.currentIteration;d++;if(d<f){if(g.alternate){g.reverse=!g.reverse}g.startTime=new Date();g.currentIteration=d;g.paused=false}else{g.currentIteration=0;g.end();g.fireEvent("lastframe",g,g.startTime)}},endWasCalled:0,end:function(){var b=this;if(b.endWasCalled++){return}b.startTime=0;b.paused=false;b.running=false;Ext.fx.Manager.removeAnim(b);b.fireEvent("afteranimate",b,b.startTime);Ext.callback(b.callback,b.scope,[b,b.startTime]);if(b.remove){b.target.destroy()}},isReady:function(){return this.paused===false&&this.running===false&&this.iterations>0},isRunning:function(){return this.paused===false&&this.running===true&&this.isAnimator!==true}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.fx,"Anim"],0));Ext.enableFx=true;(Ext.cmd.derive("Ext.util.Animate",Ext.Base,{mixinId:"animate",isAnimate:true,animate:function(d){var c=this;if(Ext.fx.Manager.hasFxBlock(c.id)){return c}Ext.fx.Manager.queueFx(new Ext.fx.Anim(c.anim(d)));return this},anim:function(d){if(!Ext.isObject(d)){return(d)?{}:false}var c=this;if(d.stopAnimation){c.stopAnimation()}Ext.applyIf(d,Ext.fx.Manager.getFxDefaults(c.id));return Ext.apply({target:c,paused:true},d)},getAnimationProps:function(){var c=this,d=c.layout;return d&&d.animate?d.animate:{}},stopFx:Ext.Function.alias(Ext.util.Animate,"stopAnimation"),stopAnimation:function(){Ext.fx.Manager.stopAnimation(this.id);return this},syncFx:function(){Ext.fx.Manager.setFxDefaults(this.id,{concurrent:true});return this},sequenceFx:function(){Ext.fx.Manager.setFxDefaults(this.id,{concurrent:false});return this},hasActiveFx:Ext.Function.alias(Ext.util.Animate,"getActiveAnimation"),getActiveAnimation:function(){return Ext.fx.Manager.getActiveAnimation(this.id)}},0,0,0,0,0,0,[Ext.util,"Animate"],0));(Ext.cmd.derive("Ext.dom.Fly",Ext.dom.Element,{alternateClassName:"Ext.dom.Element.Fly",validNodeTypes:{1:1,9:1,11:1},isFly:true,constructor:function(b){this.dom=b;this.el=this},attach:function(c){var d=this;if(!c){return d.detach()}d.dom=c;if(!Ext.cache[c.id]){d.getData().isSynchronized=false}return d},detach:function(){this.dom=null},addListener:null,removeListener:null},1,0,0,0,0,0,[Ext.dom,"Fly",Ext.dom.Element,"Fly"],function(d){var c={};d.cache=c;Ext.fly=function(a,p){var m=null,o=Ext.fly,q,b;p=p||(o.caller&&o.caller.$name)||"_global";a=Ext.getDom(a);if(a){q=a.nodeType;if(d.prototype.validNodeTypes[q]||(!q&&(a.window==a))){m=Ext.cache[a.id];if(!m||m.dom!==a){m=c[p]||(c[p]=new d());m.dom=a;b=m.getData(true);if(b){b.isSynchronized=false}}}}return m}}));(Ext.cmd.derive("Ext.dom.CompositeElementLite",Ext.Base,{alternateClassName:["Ext.CompositeElementLite"],isComposite:true,isLite:true,statics:{importElementMethods:function(){var d=Ext.dom.Element,c=this.prototype;Ext.Object.each(d.prototype,function(b,a){if(typeof a==="function"&&!c[b]){c[b]=function(){return this.invoke(b,arguments)}}})}},constructor:function(c,d){if(d){this.elements=c||[]}else{this.elements=[];this.add(c)}},getElement:function(c){var d=this._fly||(this._fly=new Ext.dom.Fly());return d.attach(c)},transformElement:function(b){return Ext.getDom(b)},getCount:function(){return this.elements.length},add:function(o,h){var j=this.elements,g,m;if(!o){return this}if(typeof o=="string"){o=Ext.fly(h||document).query(o)}else{if(o.isComposite){o=o.elements}else{if(!Ext.isIterable(o)){o=[o]}}}for(g=0,m=o.length;g<m;++g){j.push(this.transformElement(o[g]))}return this},invoke:function(s,m){var q=this,p=q.elements,r=p.length,o,t,u;if(u!==0){o=(q.isLite?Ext.dom.Fly:Ext.dom.Element).prototype;for(u=0;u<r;u++){t=p[u];if(t){o[s].apply(q.getElement(t),m)}}}return q},item:function(d){var g=this.elements[d],f=null;if(g){f=this.getElement(g)}return f},slice:function(c,d){return Ext.Array.slice(this.elements,c,d)},each:function(q,r){var p=this,s=p.elements,m=s.length,j,o;for(j=0;j<m;j++){o=s[j];if(o){o=this.getElement(o);if(q.call(r||o,o,p,j)===false){break}}}return p},fill:function(d){var c=this;c.elements=[];c.add(d);return c},insert:function(c,d){Ext.Array.insert(this.elements,c,d)},filter:function(v){var q=this,u=q.elements,r=u.length,t=[],s=0,p=typeof v=="function",o,w;for(;s<r;s++){w=u[s];o=false;if(w){w=q.getElement(w);if(p){o=v.call(w,w,q,s)!==false}else{o=w.is(v)}if(o){t.push(q.transformElement(w))}}}q.elements=t;return q},indexOf:function(b){return Ext.Array.indexOf(this.elements,this.transformElement(b))},replaceElement:function(m,o,h){var d=!isNaN(m)?m:this.indexOf(m),j;if(d>-1){o=Ext.getDom(o);if(h){j=this.elements[d];j.parentNode.insertBefore(o,j);Ext.removeNode(j)}Ext.Array.splice(this.elements,d,1,o)}return this},clear:function(h){var j=this,f=j.elements,g=f.length-1;if(h){for(;g>=0;g--){Ext.removeNode(f[g])}}this.elements=[]},addElements:function(m,g){if(!m){return this}if(typeof m==="string"){m=Ext.dom.Element.selectorFunction(m,g)}var o=this.elements,h=m.length,j;for(j=0;j<h;j++){o.push(Ext.get(m[j]))}return this},first:function(){return this.item(0)},last:function(){return this.item(this.getCount()-1)},contains:function(b){return this.indexOf(b)!=-1},removeElement:function(s,p){s=[].concat(s);var t=this,r=t.elements,u=s.length,q,m,o;for(o=0;o<u;o++){q=s[o];if((m=(r[q]||r[q=t.indexOf(q)]))){if(p){if(m.dom){m.destroy()}else{Ext.removeNode(m)}}Ext.Array.erase(r,q,1)}}return t},destroy:function(){return this.invoke("destroy",arguments);this.callParent()}},1,0,0,0,0,0,[Ext.dom,"CompositeElementLite",Ext,"CompositeElementLite"],function(c){var d=c.prototype;c.importElementMethods();d.on=d.addListener}));Ext.define("Ext.overrides.dom.Element",(function(){var aC,aA=window,ag=document,Y="hidden",av="isClipped",aa="overflow",aq="overflow-x",ar="overflow-y",an="originalClip",ai="height",aG="width",aF="visibility",aK="display",ae="none",W="offsets",aI="clip",az="originalDisplay",ad="visibilityMode",am="isVisible",aB="x-hidden-offsets",aw="x-hidden-clip",V=['<div class="{0}-tl" role="presentation">','<div class="{0}-tr" role="presentation">','<div class="{0}-tc" role="presentation"></div>',"</div>","</div>",'<div class="{0}-ml" role="presentation">','<div class="{0}-mr" role="presentation">','<div class="{0}-mc" role="presentation"></div>',"</div>","</div>",'<div class="{0}-bl" role="presentation">','<div class="{0}-br" role="presentation">','<div class="{0}-bc" role="presentation"></div>',"</div>","</div>"].join(""),ab=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/ig,ah=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,aJ=/\ssrc=([\'\"])(.*?)\1/i,ax=/\S/,aD=/\stype=([\'\"])(.*?)\1/i,ak=/^-ms-/,aj=/(-[a-z])/gi,ac=function(b,a){return a.charAt(1).toUpperCase()},ay="x-masked",al="x-masked-relative",ap="x-mask-msg",at=/^body/i,au={},ao=function(a){var c=a.getData(),b=c[ad];if(b===undefined){c[ad]=b=aC.VISIBILITY}return b},X=ag.createRange?ag.createRange():null,af={INPUT:true,TEXTAREA:true};if(Ext.isIE8){var aE=ag.createElement("div"),Z=[],aH=Ext.Function.createBuffered(function(){var b=Z.length,a;for(a=0;a<b;a++){aE.appendChild(Z[a])}aE.innerHTML="";Z.length=0},10)}return{override:"Ext.dom.Element",mixins:[Ext.util.Animate],skipGarbageCollection:false,_init:function(a){aC=a;a.tabbableSelector+=",["+a.tabbableSavedCounterAttribute+"]"},statics:{selectableCls:"x-selectable",unselectableCls:"x-unselectable",tabbableSelector:Ext.supports.CSS3NegationSelector?'a[href],button,iframe,input,select,textarea,[tabindex]:not([tabindex="-1"]),[contenteditable="true"]':'a[href],button,iframe,input,select,textarea,[tabindex],[contenteditable="true"]',naturallyFocusableTags:{BUTTON:true,IFRAME:true,EMBED:true,INPUT:true,OBJECT:true,SELECT:true,TEXTAREA:true,HTML:Ext.isIE?true:false},naturallyTabbableTags:{BUTTON:true,IFRAME:true,INPUT:true,SELECT:true,TEXTAREA:true,OBJECT:Ext.isIE8m?true:false},tabbableSavedCounterAttribute:"data-tabindex-counter",tabbableSavedValueAttribute:"data-tabindex-value",normalize:function(a){if(a==="float"){a=Ext.supports.Float?"cssFloat":"styleFloat"}return au[a]||(au[a]=a.replace(ak,"ms-").replace(aj,ac))}},addClsOnClick:function(g,d,a){var f=this,c=f.dom,b=Ext.isFunction(d);f.on("mousedown",function(){if(b&&d.call(a||f,f)===false){return false}Ext.fly(c).addCls(g);var h=Ext.getDoc(),j=function(){Ext.fly(c).removeCls(g);h.removeListener("mouseup",j)};h.on("mouseup",j)});return f},addClsOnFocus:function(g,d,a){var f=this,c=f.dom,b=Ext.isFunction(d);f.on("focus",function(){if(b&&d.call(a||f,f)===false){return false}Ext.fly(c).addCls(g)});f.on("blur",function(){Ext.fly(c).removeCls(g)});return f},addClsOnOver:function(g,d,a){var f=this,c=f.dom,b=Ext.isFunction(d);f.hover(function(){if(b&&d.call(a||f,f)===false){return}Ext.fly(c).addCls(g)},function(){Ext.fly(c).removeCls(g)});return f},addKeyListener:function(a,c,d){var b;if(typeof a!=="object"||Ext.isArray(a)){b={target:this,key:a,fn:c,scope:d}}else{b={target:this,key:a.key,shift:a.shift,ctrl:a.ctrl,alt:a.alt,fn:c,scope:d}}return new Ext.util.KeyMap(b)},addKeyMap:function(a){return new Ext.util.KeyMap(Ext.apply({target:this},a))},afterAnimate:function(){var a=this.shadow;if(a&&!a.disabled&&!a.animate){a.show()}},anchorAnimX:function(b){var a=(b==="l")?"right":"left";this.dom.style[a]="0px"},anim:function(b){if(!Ext.isObject(b)){return(b)?{}:false}var a=this,f=b.duration||Ext.fx.Anim.prototype.duration,c=b.easing||"ease",d;if(b.stopAnimation){a.stopAnimation()}Ext.applyIf(b,Ext.fx.Manager.getFxDefaults(a.id));Ext.fx.Manager.setFxDefaults(a.id,{delay:0});d={target:a.dom,remove:b.remove,alternate:b.alternate||false,duration:f,easing:c,callback:b.callback,listeners:b.listeners,iterations:b.iterations||1,scope:b.scope,block:b.block,concurrent:b.concurrent,delay:b.delay||0,paused:true,keyframes:b.keyframes,from:b.from||{},to:Ext.apply({},b),userConfig:b};Ext.apply(d.to,b.to);delete d.to.to;delete d.to.from;delete d.to.remove;delete d.to.alternate;delete d.to.keyframes;delete d.to.iterations;delete d.to.listeners;delete d.to.target;delete d.to.paused;delete d.to.callback;delete d.to.scope;delete d.to.duration;delete d.to.easing;delete d.to.concurrent;delete d.to.block;delete d.to.stopAnimation;delete d.to.delay;return d},animate:function(a){this.addAnimation(a);return this},addAnimation:function(g){var d=this,a=d.dom.id||Ext.id(d.dom),f,c,b;if(!Ext.fx.Manager.hasFxBlock(a)){if(g.listeners){f=g.listeners;delete g.listeners}if(g.internalListeners){g.listeners=g.internalListeners;delete g.internalListeners}b=g.autoEnd;delete g.autoEnd;c=new Ext.fx.Anim(d.anim(g));c.on({afteranimate:"afterAnimate",beforeanimate:"beforeAnimate",scope:d,single:true});if(f){c.on(f)}Ext.fx.Manager.queueFx(c);if(b){c.jumpToEnd()}}return c},beforeAnimate:function(){var a=this.shadow;if(a&&!a.disabled&&!a.animate){a.hide()}},boxWrap:function(b){b=b||"x-box";var a=Ext.get(this.insertHtml("beforeBegin","<div class='"+b+"' role='presentation'>"+Ext.String.format(V,b)+"</div>"));a.selectNode("."+b+"-mc").appendChild(this.dom);return a},clean:function(a){var g=this,f=g.dom,d=g.getData(),c=f.firstChild,h=-1,b;if(d.isCleaned&&a!==true){return g}while(c){b=c.nextSibling;if(c.nodeType===3){if(!(ax.test(c.nodeValue))){f.removeChild(c)}else{if(b&&b.nodeType===3){c.appendData(Ext.String.trim(b.data));f.removeChild(b);b=c.nextSibling;c.nodeIndex=++h}}}else{Ext.fly(c,"_clean").clean();c.nodeIndex=++h}c=b}d.isCleaned=true;return g},empty:X?function(){var a=this.dom;if(a.firstChild){X.setStartBefore(a.firstChild);X.setEndAfter(a.lastChild);X.deleteContents()}}:function(){var a=this.dom;while(a.lastChild){a.removeChild(a.lastChild)}},clearListeners:function(){this.removeAnchor();arguments.callee.$previous.call(this)},clearPositioning:function(a){a=a||"";return this.setStyle({left:a,right:a,top:a,bottom:a,"z-index":"",position:"static"})},createProxy:function(b,c,d){b=(typeof b==="object")?b:{tag:"div",role:"presentation",cls:b};var f=this,a=c?Ext.DomHelper.append(c,b,true):Ext.DomHelper.insertBefore(f.dom,b,true);a.setVisibilityMode(aC.DISPLAY);a.hide();if(d&&f.setBox&&f.getBox){a.setBox(f.getBox())}return a},clearOpacity:function(){return this.setOpacity("")},clip:function(){var a=this,c=a.getData(),b;if(!c[av]){c[av]=true;b=a.getStyle([aa,aq,ar]);c[an]={o:b[aa],x:b[aq],y:b[ar]};a.setStyle(aa,Y);a.setStyle(aq,Y);a.setStyle(ar,Y)}return a},destroy:function(){var f=this,c=f.dom,d=f.getData(),a,b;if(c&&f.isAnimate){f.stopAnimation()}arguments.callee.$previous.call(this);if(c&&Ext.isIE8&&(c.window!=c)&&(c.nodeType!==9)&&(c.tagName!=="BODY")&&(c.tagName!=="HTML")){Z[Z.length]=c;aH()}if(d){a=d.maskEl;b=d.maskMsg;if(a){a.destroy()}if(b){b.destroy()}}},enableDisplayMode:function(a){var b=this;b.setVisibilityMode(aC.DISPLAY);if(a!==undefined){b.getData()[az]=a}return b},fadeIn:function(c){var b=this,a=b.dom;b.animate(Ext.apply({},c,{opacity:1,internalListeners:{beforeanimate:function(d){var f=Ext.fly(a,"_anim");if(f.isStyle("display","none")){f.setDisplayed("")}else{f.show()}}}}));return this},fadeOut:function(c){var b=this,a=b.dom;c=Ext.apply({opacity:0,internalListeners:{afteranimate:function(d){if(a&&d.to.opacity===0){var f=Ext.fly(a,"_anim");if(c.useDisplay){f.setDisplayed(false)}else{f.hide()}}}}},c);b.animate(c);return b},fixDisplay:function(){var a=this;if(a.isStyle(aK,ae)){a.setStyle(aF,Y);a.setStyle(aK,a._getDisplay());if(a.isStyle(aK,ae)){a.setStyle(aK,"block")}}},frame:function(b,f,d){var g=this,c=g.dom,a;b=b||"#C3DAF9";f=f||1;d=d||{};a=function(){var j=Ext.fly(c,"_anim"),m=this,h,o,p;j.show();h=j.getBox();o=Ext.getBody().createChild({role:"presentation",id:j.dom.id+"-anim-proxy",style:{position:"absolute","pointer-events":"none","z-index":35000,border:"0px solid "+b}});p=new Ext.fx.Anim({target:o,duration:d.duration||1000,iterations:f,from:{top:h.y,left:h.x,borderWidth:0,opacity:1,height:h.height,width:h.width},to:{top:h.y-20,left:h.x-20,borderWidth:10,opacity:0,height:h.height+40,width:h.width+40}});p.on("afteranimate",function(){o.destroy();m.end()})};g.animate({duration:(Math.max(d.duration,500)*2)||2000,listeners:{beforeanimate:{fn:a}},callback:d.callback,scope:d.scope});return g},getColor:function(a,j,c){var g=this.getStyle(a),h=c||c===""?c:"#",d,b,f=0;if(!g||(/transparent|inherit/.test(g))){return j}if(/^r/.test(g)){g=g.slice(4,g.length-1).split(",");b=g.length;for(;f<b;f++){d=parseInt(g[f],10);h+=(d<16?"0":"")+d.toString(16)}}else{g=g.replace("#","");h+=g.length===3?g.replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"):g}return(h.length>5?h.toLowerCase():j)},getLoader:function(){var a=this,c=a.getData(),b=c.loader;if(!b){c.loader=b=new Ext.ElementLoader({target:a})}return b},getPositioning:function(a){var b=this.getStyle(["left","top","position","z-index"]),c=this.dom;if(a){if(b.left==="auto"){b.left=c.offsetLeft+"px"}if(b.top==="auto"){b.top=c.offsetTop+"px"}}return b},ghost:function(b,d){var f=this,c=f.dom,a;b=b||"b";a=function(){var j=Ext.fly(c,"_anim"),m=j.getWidth(),o=j.getHeight(),h=j.getXY(),p=j.getPositioning(),g={opacity:0};switch(b){case"t":g.y=h[1]-o;break;case"l":g.x=h[0]-m;break;case"r":g.x=h[0]+m;break;case"b":g.y=h[1]+o;break;case"tl":g.x=h[0]-m;g.y=h[1]-o;break;case"bl":g.x=h[0]-m;g.y=h[1]+o;break;case"br":g.x=h[0]+m;g.y=h[1]+o;break;case"tr":g.x=h[0]+m;g.y=h[1]-o;break}this.to=g;this.on("afteranimate",function(){var q=Ext.fly(c,"_anim");if(q){q.hide();q.clearOpacity();q.setPositioning(p)}})};f.animate(Ext.applyIf(d||{},{duration:500,easing:"ease-out",listeners:{beforeanimate:a}}));return f},hide:function(a){if(typeof a==="string"){this.setVisible(false,a);return this}this.setVisible(false,this.anim(a));return this},highlight:function(c,f){var o=this,b=o.dom,j={},p,h,a,d,g,m;f=f||{};d=f.listeners||{};a=f.attr||"backgroundColor";j[a]=c||"ffff9c";if(!f.to){h={};h[a]=f.endColor||o.getColor(a,"ffffff","")}else{h=f.to}f.listeners=Ext.apply(Ext.apply({},d),{beforeanimate:function(){p=b.style[a];var q=Ext.fly(b,"_anim");q.clearOpacity();q.show();g=d.beforeanimate;if(g){m=g.fn||g;return m.apply(g.scope||d.scope||aA,arguments)}},afteranimate:function(){if(b){b.style[a]=p}g=d.afteranimate;if(g){m=g.fn||g;m.apply(g.scope||d.scope||aA,arguments)}}});o.animate(Ext.apply({},f,{duration:1000,easing:"ease-in",from:j,to:h}));return o},hover:function(a,b,d,f){var c=this;c.on("mouseenter",a,d||c.dom,f);c.on("mouseleave",b,d||c.dom,f);return c},initDD:function(d,a,c){var b=new Ext.dd.DD(Ext.id(this.dom),d,a);return Ext.apply(b,c)},initDDProxy:function(d,a,c){var b=new Ext.dd.DDProxy(Ext.id(this.dom),d,a);return Ext.apply(b,c)},initDDTarget:function(d,a,c){var b=new Ext.dd.DDTarget(Ext.id(this.dom),d,a);return Ext.apply(b,c)},isFocusable:function(){var a=this.dom,b=false,c;if(a&&!a.disabled){c=a.nodeName;b=!!Ext.Element.naturallyFocusableTags[c]||((c==="A"||c==="LINK")&&!!a.href)||a.getAttribute("tabIndex")!=null||a.contentEditable==="true";if(Ext.isIE8&&c==="INPUT"&&a.type==="hidden"){b=false}b=b&&this.isVisible(true)}return b},isInputField:function(){var a=this.dom,b=a.contentEditable;if((af[a.tagName]&&a.type!=="button")||(b===""||b==="true")){return true}return false},isTabbable:function(g){var f=this.dom,d=false,c,a,b;if(f&&!f.disabled){c=f.nodeName;b=f.getAttribute("tabIndex");a=b!=null;b-=0;if(c==="A"||c==="LINK"){if(f.href){d=a&&b<0?false:true}else{if(f.contentEditable==="true"){d=!a||(a&&b>=0)?true:false}else{d=a&&b>=0?true:false}}}else{if(f.contentEditable==="true"||Ext.Element.naturallyTabbableTags[c]){d=a&&b<0?false:true}else{if(a&&b>=0){d=true}}}if(Ext.isIE8&&c==="INPUT"&&f.type==="hidden"){d=false}d=d&&(g||((!this.component||this.component.isVisible(true))&&this.isVisible(true)))}return d},isMasked:function(b){var f=this,c=f.getData(),g=c.maskEl,a=c.maskMsg,d=false,h;if(g&&g.isVisible()){if(a){a.center(f)}d=true}else{if(b){h=f.findParentNode();if(h){return Ext.fly(h).isMasked(b)}}}return d},load:function(a){this.getLoader().load(a);return this},mask:function(c,g,b){var h=this,d=h.dom,f=h.getData(),j=f.maskEl,a;if(!(at.test(d.tagName)&&h.getStyle("position")==="static")){h.addCls(al)}if(j){j.destroy()}j=Ext.DomHelper.append(d,{role:"presentation",cls:"x-mask x-border-box",children:{role:"presentation",cls:g?ap+" "+g:ap,cn:{tag:"div",role:"presentation",cls:"x-mask-msg-inner",cn:{tag:"div",role:"presentation",cls:"x-mask-msg-text",html:c||""}}}},true);a=Ext.get(j.dom.firstChild);f.maskEl=j;h.addCls(ay);j.setDisplayed(true);if(typeof c==="string"){a.setDisplayed(true);a.center(h)}else{a.setDisplayed(false)}if(d===ag.body){j.addCls("x-mask-fixed")}h.saveTabbableState({skipSelf:d===ag.body});if(Ext.isIE9m&&d!==ag.body&&h.isStyle("height","auto")){j.setSize(undefined,b||h.getHeight())}return j},monitorMouseLeave:function(b,f,g){var d=this,c,a={mouseleave:function(h){if(Ext.isIE9m){h.enableIEAsync()}c=Ext.defer(f,b,g||d,[h])},mouseenter:function(){clearTimeout(c)}};d.on(a);return a},puff:function(d){var f=this,c=f.dom,a,g=f.getBox(),b=f.getStyle(["width","height","left","right","top","bottom","position","z-index","font-size","opacity"],true);d=Ext.applyIf(d||{},{easing:"ease-out",duration:500,useDisplay:false});a=function(){var h=Ext.fly(c,"_anim");h.clearOpacity();h.show();this.to={width:g.width*2,height:g.height*2,x:g.x-(g.width/2),y:g.y-(g.height/2),opacity:0,fontSize:"200%"};this.on("afteranimate",function(){var j=Ext.fly(c,"_anim");if(j){if(d.useDisplay){j.setDisplayed(false)}else{j.hide()}j.setStyle(b);Ext.callback(d.callback,d.scope)}})};f.animate({duration:d.duration,easing:d.easing,listeners:{beforeanimate:{fn:a}}});return f},selectable:function(){var a=this;a.dom.unselectable="";a.removeCls(aC.unselectableCls);a.addCls(aC.selectableCls);return a},setCapture:function(){var a=this.dom;if(Ext.isIE9m&&a.setCapture){a.setCapture()}},setHeight:function(b,a){var c=this;if(!a||!c.anim){arguments.callee.$previous.apply(this,arguments)}else{if(!Ext.isObject(a)){a={}}c.animate(Ext.applyIf({to:{height:b}},a))}return c},setHorizontal:function(){var a=this,b=a.verticalCls;delete a.vertical;if(b){delete a.verticalCls;a.removeCls(b)}delete a.setWidth;delete a.setHeight;if(!Ext.isIE8){delete a.getWidth;delete a.getHeight}delete a.styleHooks},updateText:function(c){var b=this,d,a;if(d){a=d.firstChild;if(!a||(a.nodeType!==3||a.nextSibling)){a=ag.createTextNode();b.empty();d.appendChild(a)}if(c){a.data=c}}},setHtml:function(j,a,c,h){var g=this,d,f,b;if(!g.dom){return g}j=j||"";f=g.dom;if(a!==true){f.innerHTML=j;Ext.callback(c,g);return g}d=Ext.id();j+='<span id="'+d+'" role="presentation"></span>';b=Ext.interval(function(){var t,p,q,r,s,m,o;if(!(m=ag.getElementById(d))){return false}clearInterval(b);Ext.removeNode(m);t=Ext.getHead().dom;while((p=ab.exec(j))){q=p[1];r=q?q.match(aJ):false;if(r&&r[2]){o=ag.createElement("script");o.src=r[2];s=q.match(aD);if(s&&s[2]){o.type=s[2]}t.appendChild(o)}else{if(p[2]&&p[2].length>0){if(h){Ext.functionFactory(p[2]).call(h)}else{Ext.globalEval(p[2])}}}}Ext.callback(c,h||g)},20);f.innerHTML=j.replace(ah,"");return g},setOpacity:function(a,b){var c=this;if(!c.dom){return c}if(!b||!c.anim){c.setStyle("opacity",a)}else{if(typeof b!="object"){b={duration:350,easing:"ease-in"}}c.animate(Ext.applyIf({to:{opacity:a}},b))}return c},setPositioning:function(a){return this.setStyle(a)},setVertical:function(c,b){var d=this,a=aC.prototype;d.vertical=true;if(b){d.addCls(d.verticalCls=b)}d.setWidth=a.setHeight;d.setHeight=a.setWidth;if(!Ext.isIE8){d.getWidth=a.getHeight;d.getHeight=a.getWidth}d.styleHooks=(c===270)?a.verticalStyleHooks270:a.verticalStyleHooks90},setSize:function(d,b,a){var c=this;if(Ext.isObject(d)){a=b;b=d.height;d=d.width}if(!a||!c.anim){c.dom.style.width=aC.addUnits(d);c.dom.style.height=aC.addUnits(b);if(c.shadow||c.shim){c.syncUnderlays()}}else{if(a===true){a={}}c.animate(Ext.applyIf({to:{width:d,height:b}},a))}return c},setVisible:function(c,b){var f=this,d=f.dom,a=ao(f);if(typeof b==="string"){switch(b){case aK:a=aC.DISPLAY;break;case aF:a=aC.VISIBILITY;break;case W:a=aC.OFFSETS;break;case aI:a=aC.CLIP;break}f.setVisibilityMode(a);b=false}if(!b||!f.anim){if(a===aC.DISPLAY){return f.setDisplayed(c)}else{if(a===aC.OFFSETS){f[c?"removeCls":"addCls"](aB)}else{if(a===aC.CLIP){f[c?"removeCls":"addCls"](aw)}else{if(a===aC.VISIBILITY){f.fixDisplay();d.style.visibility=c?"":Y}}}}}else{if(c){f.setOpacity(0.01);f.setVisible(true)}if(!Ext.isObject(b)){b={duration:350,easing:"ease-in"}}f.animate(Ext.applyIf({callback:function(){if(!c){Ext.fly(d).setVisible(false).setOpacity(1)}},to:{opacity:(c)?1:0}},b))}f.getData()[am]=c;if(f.shadow||f.shim){f.setUnderlaysVisible(c)}return f},setWidth:function(a,b){var c=this;if(!b||!c.anim){arguments.callee.$previous.apply(this,arguments)}else{if(!Ext.isObject(b)){b={}}c.animate(Ext.applyIf({to:{width:a}},b))}return c},setX:function(b,a){return this.setXY([b,this.getY()],a)},setXY:function(c,b){var a=this;if(!b||!a.anim){arguments.callee.$previous.call(this,c)}else{if(!Ext.isObject(b)){b={}}a.animate(Ext.applyIf({to:{x:c[0],y:c[1]}},b))}return this},setY:function(a,b){return this.setXY([this.getX(),a],b)},show:function(a){if(typeof a==="string"){this.setVisible(true,a);return this}this.setVisible(true,this.anim(a));return this},slideIn:function(c,d,b){var o=this,f=o.dom,h=f.style,j,g,a,m;c=c||"t";d=d||{};j=function(){var v=this,p=d.listeners,q=Ext.fly(f,"_anim"),u,s,t,r;if(!b){q.fixDisplay()}u=q.getBox();if((c=="t"||c=="b")&&u.height===0){u.height=f.scrollHeight}else{if((c=="l"||c=="r")&&u.width===0){u.width=f.scrollWidth}}s=q.getStyle(["width","height","left","right","top","bottom","position","z-index"],true);q.setSize(u.width,u.height);if(d.preserveScroll){a=q.cacheScrollValues()}r=q.wrap({role:"presentation",id:Ext.id()+"-anim-wrap-for-"+q.dom.id,style:{visibility:b?"visible":"hidden"}});m=r.dom.parentNode;r.setPositioning(q.getPositioning());if(r.isStyle("position","static")){r.position("relative")}q.clearPositioning("auto");r.clip();if(a){a()}q.setStyle({visibility:"",position:"absolute"});if(b){r.setSize(u.width,u.height)}switch(c){case"t":t={from:{width:u.width+"px",height:"0px"},to:{width:u.width+"px",height:u.height+"px"}};h.bottom="0px";break;case"l":t={from:{width:"0px",height:u.height+"px"},to:{width:u.width+"px",height:u.height+"px"}};o.anchorAnimX(c);break;case"r":t={from:{x:u.x+u.width,width:"0px",height:u.height+"px"},to:{x:u.x,width:u.width+"px",height:u.height+"px"}};o.anchorAnimX(c);break;case"b":t={from:{y:u.y+u.height,width:u.width+"px",height:"0px"},to:{y:u.y,width:u.width+"px",height:u.height+"px"}};break;case"tl":t={from:{x:u.x,y:u.y,width:"0px",height:"0px"},to:{width:u.width+"px",height:u.height+"px"}};h.bottom="0px";o.anchorAnimX("l");break;case"bl":t={from:{y:u.y+u.height,width:"0px",height:"0px"},to:{y:u.y,width:u.width+"px",height:u.height+"px"}};o.anchorAnimX("l");break;case"br":t={from:{x:u.x+u.width,y:u.y+u.height,width:"0px",height:"0px"},to:{x:u.x,y:u.y,width:u.width+"px",height:u.height+"px"}};o.anchorAnimX("r");break;case"tr":t={from:{x:u.x+u.width,width:"0px",height:"0px"},to:{x:u.x,width:u.width+"px",height:u.height+"px"}};h.bottom="0px";o.anchorAnimX("r");break}r.show();g=Ext.apply({},d);delete g.listeners;g=new Ext.fx.Anim(Ext.applyIf(g,{target:r,duration:500,easing:"ease-out",from:b?t.to:t.from,to:b?t.from:t.to}));g.on("afteranimate",function(){var w=Ext.fly(f,"_anim");w.setStyle(s);if(b){if(d.useDisplay){w.setDisplayed(false)}else{w.hide()}}if(r.dom){if(r.dom.parentNode){r.dom.parentNode.insertBefore(w.dom,r.dom)}else{m.appendChild(w.dom)}r.destroy()}if(a){a()}v.end()});if(p){g.on(p)}};o.animate({duration:d.duration?Math.max(d.duration,500)*2:1000,listeners:{beforeanimate:j}});return o},slideOut:function(b,a){return this.slideIn(b,a,true)},swallowEvent:function(a,g){var d=this,c,b,f=function(h){h.stopPropagation();if(g){h.preventDefault()}};if(Ext.isArray(a)){b=a.length;for(c=0;c<b;c++){d.on(a[c],f)}return d}d.on(a,f);return d},switchOff:function(d){var a=this,c=a.dom,b;d=Ext.applyIf(d||{},{easing:"ease-in",duration:500,remove:false,useDisplay:false});b=function(){var g=Ext.fly(c,"_anim"),h=this,j=g.getSize(),f=g.getXY(),o,m;g.clearOpacity();g.clip();m=g.getPositioning();o=new Ext.fx.Animator({target:c,duration:d.duration,easing:d.easing,keyframes:{33:{opacity:0.3},66:{height:1,y:f[1]+j.height/2},100:{width:1,x:f[0]+j.width/2}}});o.on("afteranimate",function(){var p=Ext.fly(c,"_anim");if(d.useDisplay){p.setDisplayed(false)}else{p.hide()}p.clearOpacity();p.setPositioning(m);p.setSize(j);h.end()})};a.animate({duration:(Math.max(d.duration,500)*2),listeners:{beforeanimate:{fn:b}},callback:d.callback,scope:d.scope});return a},syncContent:function(f){f=Ext.getDom(f);var d=f.childNodes,h=d.length,m=this.dom,j=m.childNodes,p=j.length,r,o,b,s,c,g,q,a=m._extData;if(Ext.isIE9m&&m.mergeAttributes){m.mergeAttributes(f,true);m.src=f.src}else{c=f.attributes;g=c.length;for(r=0;r<g;r++){q=c[r].name;if(q!=="id"){m.setAttribute(q,c[r].value)}}}if(a){a.isSynchronized=false}if(h!==p){m.innerHTML=f.innerHTML;return}for(r=0;r<h;r++){b=d[r];o=j[r];s=b.nodeType;if(s!==o.nodeType||(s===1&&b.tagName!==o.tagName)){m.innerHTML=f.innerHTML;return}if(s===3){o.data=b.data}else{if(b.id&&o.id!==b.id){o.id=b.id}o.style.cssText=b.style.cssText;o.className=b.className;Ext.fly(o,"_syncContent").syncContent(b)}}},toggle:function(b){var a=this;a.setVisible(!a.isVisible(),a.anim(b));return a},unmask:function(){var d=this,c=d.getData(),a=c.maskEl,b;if(a){b=a.dom.style;if(b.clearExpression){b.clearExpression("width");b.clearExpression("height")}if(a){a.destroy();delete c.maskEl}d.removeCls([ay,al])}d.restoreTabbableState(d.dom===ag.body)},unclip:function(){var a=this,c=a.getData(),b;if(c[av]){c[av]=false;b=c[an];if(b.o){a.setStyle(aa,b.o)}if(b.x){a.setStyle(aq,b.x)}if(b.y){a.setStyle(ar,b.y)}}return a},translate:function(b,c,a){if(Ext.supports.CssTransforms&&!Ext.isIE9m){arguments.callee.$previous.apply(this,arguments)}else{if(b!=null){this.dom.style.left=b+"px"}if(c!=null){this.dom.style.top=c+"px"}}},unselectable:function(){var a=this;if(Ext.isOpera){a.dom.unselectable="on"}a.removeCls(aC.selectableCls);a.addCls(aC.unselectableCls);return a},privates:{findTabbableElements:function(h){var g,q,o,b,a,s=this.dom,t=Ext.Element.tabbableSavedCounterAttribute,j=[],m=0,f,c,u,r,p,d;if(!s){return j}if(h){g=h.skipSelf;q=h.skipChildren;o=h.excludeRoot;b=h.includeSaved;a=h.includeHidden}o=o&&Ext.getDom(o);if(o&&o.contains(s)){return j}if(!g&&((b&&s.hasAttribute(t))||this.isTabbable(a))){j[m++]=s}if(q){return j}f=s.querySelectorAll(Ext.Element.tabbableSelector);p=f.length;if(!p){return j}u=new Ext.dom.Fly();for(r=0;r<p;r++){c=f[r];d=+c.getAttribute("tabIndex");if(((b&&c.hasAttribute(t))||(!(d<0)&&u.attach(c).isTabbable(a)))&&!(o&&(o===c||o.contains(c)))){j[m++]=c}}return j},saveTabbableState:function(g){var c=Ext.Element.tabbableSavedCounterAttribute,h=Ext.Element.tabbableSavedValueAttribute,a,j,d,f,b;if(!g||g.includeSaved==null){g=Ext.Object.chain(g||null);g.includeSaved=true}j=this.findTabbableElements(g);for(f=0,b=j.length;f<b;f++){d=j[f];a=+d.getAttribute(c);if(a>0){d.setAttribute(c,++a)}else{if(d.hasAttribute("tabIndex")){d.setAttribute(h,d.getAttribute("tabIndex"))}else{d.setAttribute(h,"none")}d.setAttribute("tabIndex","-1");d.setAttribute(c,"1")}}return j},restoreTabbableState:function(g,p){var b=this.dom,m=Ext.Element.tabbableSavedCounterAttribute,j=Ext.Element.tabbableSavedValueAttribute,d=[],h,f,d,c,a,o;if(!b){return this}if(!p){d=Ext.Array.from(b.querySelectorAll("["+m+"]"))}if(!g){d.unshift(b)}for(a=0,o=d.length;a<o;a++){c=d[a];if(!c.hasAttribute(m)||!c.hasAttribute(j)){continue}f=+c.getAttribute(m);if(f>1){c.setAttribute(m,--f);continue}h=c.getAttribute(j);if(h==="none"){c.removeAttribute("tabIndex")}else{c.setAttribute("tabIndex",h)}c.removeAttribute(j);c.removeAttribute(m)}return d}},deprecated:{"4.0":{methods:{pause:function(b){var a=this;Ext.fx.Manager.setFxDefaults(a.id,{delay:b});return a},scale:function(b,a,c){this.animate(Ext.apply({},c,{width:b,height:a}));return this},shift:function(a){this.animate(a);return this}}},"4.2":{methods:{moveTo:function(b,c,a){return this.setXY([b,c],a)},setBounds:function(a,c,d,b,f){return this.setBox({x:a,y:c,width:d,height:b},f)},setLeftTop:function(c,d){var a=this,b=a.dom.style;b.left=aC.addUnits(c);b.top=aC.addUnits(d);if(a.shadow||a.shim){a.syncUnderlays()}return a},setLocation:function(b,c,a){return this.setXY([b,c],a)}}},"5.0":{methods:{getAttributeNS:function(a,b){return this.getAttribute(b,a)},getCenterXY:function(){return this.getAlignToXY(ag,"c-c")},getComputedHeight:function(){return Math.max(this.dom.offsetHeight,this.dom.clientHeight)||parseFloat(this.getStyle(ai))||0},getComputedWidth:function(){return Math.max(this.dom.offsetWidth,this.dom.clientWidth)||parseFloat(this.getStyle(aG))||0},getStyleSize:function(){var d=this,c=this.dom,a=(c===ag||c===ag.body),f,b,g;if(a){return{width:aC.getViewportWidth(),height:aC.getViewportHeight()}}f=d.getStyle(["height","width"],true);if(f.width&&f.width!=="auto"){b=parseFloat(f.width)}if(f.height&&f.height!=="auto"){g=parseFloat(f.height)}return{width:b||d.getWidth(true),height:g||d.getHeight(true)}},isBorderBox:function(){return true},isDisplayed:function(){return !this.isStyle("display","none")},focusable:"isFocusable"}}}}})(),function(){var I=Ext.dom.Element,J=I.prototype,O=!Ext.isIE8,Y=document,P=Y.defaultView,D=/alpha\(opacity=(.*)\)/i,T=/^\s+|\s+$/g,N=J.styleHooks,F=Ext.supports,V,L,W,G,U,K,X;J._init(I);delete J._init;Ext.plainTableCls="x-table-plain";Ext.plainListCls="x-list-plain";if(Ext.CompositeElementLite){Ext.CompositeElementLite.importElementMethods()}if(!F.Opacity&&Ext.isIE){Ext.apply(N.opacity,{get:function(a){var b=a.style.filter,c,d;if(b.match){c=b.match(D);if(c){d=parseFloat(c[1]);if(!isNaN(d)){return d?d/100:0}}}return 1},set:function(a,c){var d=a.style,b=d.filter.replace(D,"").replace(T,"");d.zoom=1;if(typeof(c)==="number"&&c>=0&&c<1){c*=100;d.filter=b+(b.length?" ":"")+"alpha(opacity="+c+")"}else{d.filter=b}}})}if(!F.matchesSelector){var R=/^([a-z]+|\*)?(?:\.([a-z][a-z\-_0-9]*))?$/i,Q=/\-/g,Z,E=function(c,b){var a=new RegExp("(?:^|\\s+)"+b.replace(Q,"\\-")+"(?:\\s+|$)");if(c&&c!=="*"){c=c.toUpperCase();return function(d){return d.tagName===c&&a.test(d.className)}}return function(d){return a.test(d.className)}},H=function(a){a=a.toUpperCase();return function(b){return b.tagName===a}},M={};J.matcherCache=M;J.is=function(a){if(!a){return true}var m=this.dom,c,h,d,f,g,j,b;if(m.nodeType!==1){return false}if(!(d=Ext.isFunction(a)?a:M[a])){if(!(h=a.match(R))){f=m.parentNode;if(!f){g=true;f=Z||(Z=Y.createDocumentFragment());Z.appendChild(m)}j=Ext.Array.indexOf(Ext.fly(f,"_is").query(a),m)!==-1;if(g){Z.removeChild(m)}return j}b=h[1];c=h[2];M[a]=d=c?E(b,c):H(b)}return d(m)}}if(!P||!P.getComputedStyle){J.getStyle=function(d,m){var j=this,r=j.dom,b=typeof d!=="string",u=d,h=u,o=1,t=m,v=j.styleHooks,c,p,f,g,s,a,q;if(b){f={};u=h[0];q=0;if(!(o=h.length)){return f}}if(!r||r.documentElement){return f||""}p=r.style;if(m){a=p}else{a=r.currentStyle;if(!a){t=true;a=p}}do{g=v[u];if(!g){v[u]=g={name:I.normalize(u)}}if(g.get){s=g.get(r,j,t,a)}else{c=g.name;s=a[c]}if(!b){return s}f[u]=s;u=h[++q]}while(q<o);return f}}if(Ext.isIE8){X=function(a,c,b,d){if(d[this.styleName]==="none"){return"0px"}return d[this.name]};W=["Top","Right","Bottom","Left"];G=W.length;while(G--){U=W[G];K="border"+U+"Width";N["border-"+U.toLowerCase()+"-width"]=N[K]={name:K,styleName:"border"+U+"Style",get:X}}var S="x-sync-repaint";J.syncRepaint=function(){this.addCls(S);this.getWidth();this.removeCls(S)}}if(Ext.isIE10m){Ext.override(I,{focus:function(a,b){var c=this,d;b=b||c.dom;if(Number(a)){Ext.defer(c.focus,a,c,[null,b])}else{Ext.GlobalEvents.fireEvent("beforefocus",b);if(b&&(b.tagName==="INPUT"||b.tagname==="TEXTAREA")){Ext.synchronouslyFocusing=document.activeElement}try{b.focus()}catch(f){d=f}if(Ext.synchronouslyFocusing&&document.activeElement!==b&&!d){b.focus()}Ext.synchronouslyFocusing=null}return c}})}Ext.apply(Ext,{enableGarbageCollector:true,isBorderBox:true,useShims:false,getDetachedBody:function(){var a=Ext.detachedBodyEl;if(!a){a=Y.createElement("div");Ext.detachedBodyEl=a=new Ext.dom.Fly(a);a.isDetachedBody=true}return a},getElementById:function(a){var b=Y.getElementById(a),c;if(!b&&(c=Ext.detachedBodyEl)){b=c.dom.querySelector(Ext.makeIdSelector(a))}return b},addBehaviors:function(a){if(!Ext.isReady){Ext.onInternalReady(function(){Ext.addBehaviors(a)})}else{var d={},b,f,c;for(f in a){if((b=f.split("@"))[1]){c=b[0];if(!d[c]){d[c]=Ext.fly(document).select(c,true)}d[c].on(b[1],a[f])}}d=null}}});if(Ext.isIE9m){Ext.getElementById=function(a){var b=Y.getElementById(a),c;if(!b&&(c=Ext.detachedBodyEl)){b=c.dom.all[a]}return b};J.getById=function(a,g){var b=this.dom,f=null,c,d;if(b){d=(O&&Y.getElementById(a))||b.all[a];if(d){if(g){f=d}else{c=Ext.cache[a];if(c){if(c.skipGarbageCollection||!Ext.isGarbage(c.dom)){f=c}else{c.destroy()}}f=f||new Ext.Element(d)}}}return f}}else{if(!Y.querySelector){Ext.getDetachedBody=Ext.getBody;Ext.getElementById=function(a){return Y.getElementById(a)};J.getById=function(a,c){var b=Y.getElementById(a);return c?b:(b?Ext.get(b):null)}}}if(Ext.isIE&&!(Ext.isIE9p&&Y.documentMode>=9)){J.getAttribute=function(d,b){var a=this.dom,c;if(b){c=typeof a[b+":"+d];if(c!=="undefined"&&c!=="unknown"){return a[b+":"+d]||null}return null}if(d==="for"){d="htmlFor"}return a[d]||null}}Ext.onInternalReady(function(){var r=/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,t=[],j=J.setWidth,h=J.setHeight,c=J.setSize,b=/^\d+(?:\.\d*)?px$/i,m,p,a,d;if(F.FixedTableWidthBug){N.width={name:"width",set:function(A,u,w){var y=A.style,z=w._needsTableWidthFix,v=y.display;if(z){y.display="none"}y.width=u;if(z){A.scrollWidth;y.display=v}}};J.setWidth=function(v,y){var B=this,A=B.dom,w=A.style,z=B._needsTableWidthFix,u=w.display;if(z&&!y){w.display="none"}j.call(B,v,y);if(z&&!y){A.scrollWidth;w.display=u}return B};J.setSize=function(u,y,w){var B=this,A=B.dom,v=A.style,z=B._needsTableWidthFix,C=v.display;if(z&&!w){v.display="none"}c.call(B,u,y,w);if(z&&!w){A.scrollWidth;v.display=C}return B}}if(Ext.isIE8){N.height={name:"height",set:function(A,u,w){var y=w.component,v,z;if(y&&y._syncFrameHeight&&w===y.el){z=y.frameBody.dom.style;if(b.test(u)){v=y.getFrameInfo();if(v){z.height=(parseInt(u,10)-v.height)+"px"}}else{if(!u||u==="auto"){z.height=""}}}A.style.height=u}};J.setHeight=function(z,w){var v=this.component,u,y;if(v&&v._syncFrameHeight&&this===v.el){y=v.frameBody.dom.style;if(!z||z==="auto"){y.height=""}else{u=v.getFrameInfo();if(u){y.height=(z-u.height)+"px"}}}return h.call(this,z,w)};J.setSize=function(u,z,w){var v=this.component,A,y;if(v&&v._syncFrameHeight&&this===v.el){y=v.frameBody.dom.style;if(!z||z==="auto"){y.height=""}else{A=v.getFrameInfo();if(A){y.height=(z-A.height)+"px"}}}return c.call(this,u,z,w)}}Ext.getDoc().on("selectstart",function(u,A){var v=I.selectableCls,w=I.unselectableCls,z=A&&A.tagName;z=z&&z.toLowerCase();if(z==="input"||z==="textarea"){return}while(A&&A.nodeType===1&&A!==Y.documentElement){var y=Ext.fly(A);if(y.hasCls(v)){return}if(y.hasCls(w)){u.stopEvent();return}A=A.parentNode}});function o(u,y,v,z){var w=z[this.name]||"";return r.test(w)?"transparent":w}function f(v,u,w){return function(){v.selectionStart=u;v.selectionEnd=w}}function g(u){var w=F.DisplayChangeInputSelectionBug,v=F.DisplayChangeTextAreaSelectionBug,B,z,A,y;if(w||v){B=I.getActiveElement();z=B&&B.tagName;if((v&&z==="TEXTAREA")||(w&&z==="INPUT"&&B.type==="text")){if(Ext.fly(u).isAncestor(B)){A=B.selectionStart;y=B.selectionEnd;if(Ext.isNumber(A)&&Ext.isNumber(y)){return f(B,A,y)}}}}return Ext.emptyFn}function q(A,v,B,w){var z=w.marginRight,y,u;if(z!=="0px"){y=A.style;u=y.display;y.display="inline-block";z=(B?w:A.ownerDocument.defaultView.getComputedStyle(A,null)).marginRight;y.display=u}return z}function s(A,u,B,v){var z=v.marginRight,w,y,C;if(z!=="0px"){w=A.style;y=g(A);C=w.display;w.display="inline-block";z=(B?v:A.ownerDocument.defaultView.getComputedStyle(A,"")).marginRight;w.display=C;y()}return z}if(!F.RightMargin){N.marginRight=N["margin-right"]={name:"marginRight",get:(F.DisplayChangeInputSelectionBug||F.DisplayChangeTextAreaSelectionBug)?s:q}}if(!F.TransparentColor){m=["background-color","border-color","color","outline-color"];for(p=m.length;p--;){a=m[p];d=I.normalize(a);N[a]=N[d]={name:d,get:o}}}J.verticalStyleHooks90=V=Ext.Object.chain(N);J.verticalStyleHooks270=L=Ext.Object.chain(N);V.width=N.height||{name:"height"};V.height=N.width||{name:"width"};V["margin-top"]={name:"marginLeft"};V["margin-right"]={name:"marginTop"};V["margin-bottom"]={name:"marginRight"};V["margin-left"]={name:"marginBottom"};V["padding-top"]={name:"paddingLeft"};V["padding-right"]={name:"paddingTop"};V["padding-bottom"]={name:"paddingRight"};V["padding-left"]={name:"paddingBottom"};V["border-top"]={name:"borderLeft"};V["border-right"]={name:"borderTop"};V["border-bottom"]={name:"borderRight"};V["border-left"]={name:"borderBottom"};L.width=N.height||{name:"height"};L.height=N.width||{name:"width"};L["margin-top"]={name:"marginRight"};L["margin-right"]={name:"marginBottom"};L["margin-bottom"]={name:"marginLeft"};L["margin-left"]={name:"marginTop"};L["padding-top"]={name:"paddingRight"};L["padding-right"]={name:"paddingBottom"};L["padding-bottom"]={name:"paddingLeft"};L["padding-left"]={name:"paddingTop"};L["border-top"]={name:"borderRight"};L["border-right"]={name:"borderBottom"};L["border-bottom"]={name:"borderLeft"};L["border-left"]={name:"borderTop"};if(!Ext.scopeCss){t.push("x-body")}if(F.Touch){t.push("x-touch")}if(Ext.isIE&&Ext.isIE9m){t.push("x-ie","x-ie9m");t.push("x-ie8p");if(Ext.isIE8){t.push("x-ie8")}else{t.push("x-ie9","x-ie9p")}if(Ext.isIE8m){t.push("x-ie8m")}}if(Ext.isIE10){t.push("x-ie10")}if(Ext.isIE10p){t.push("x-ie10p")}if(Ext.isIE11){t.push("x-ie11")}if(Ext.isGecko){t.push("x-gecko")}if(Ext.isOpera){t.push("x-opera")}if(Ext.isOpera12m){t.push("x-opera12m")}if(Ext.isWebKit){t.push("x-webkit")}if(Ext.isSafari){t.push("x-safari")}if(Ext.isChrome){t.push("x-chrome")}if(Ext.isMac){t.push("x-mac")}if(Ext.isLinux){t.push("x-linux")}if(!F.CSS3BorderRadius){t.push("x-nbr")}if(!F.CSS3LinearGradient){t.push("x-nlg")}if(F.Touch){t.push("x-touch")}Ext.getBody().addCls(t)},null,{priority:1500})});(Ext.cmd.derive("Ext.GlobalEvents",Ext.mixin.Observable,{alternateClassName:"Ext.globalEvents",observableType:"global",singleton:true,resizeBuffer:100,idleEventMask:{mousemove:1,touchmove:1,pointermove:1,MSPointerMove:1,unload:1},constructor:function(){var b=this;b.callParent();Ext.onInternalReady(function(){b.attachListeners()})},attachListeners:function(){Ext.get(window).on("resize",this.fireResize,this,{buffer:this.resizeBuffer});Ext.getDoc().on("mousedown",this.fireMouseDown,this)},fireMouseDown:function(b){this.fireEvent("mousedown",b)},fireResize:function(){var h=this,f=Ext.Element,g=f.getViewportWidth(),j=f.getViewportHeight();if(h.curHeight!==j||h.curWidth!==g){h.curHeight=j;h.curWidth=g;h.fireEvent("resize",g,j)}}},1,0,0,0,0,0,[Ext,"GlobalEvents",Ext,"globalEvents"],function(b){Ext.on=function(){return b.addListener.apply(b,arguments)};Ext.un=function(){return b.removeListener.apply(b,arguments)}}));Ext.define("Ext.overrides.GlobalEvents",{override:"Ext.GlobalEvents",deprecated:{5:{methods:{addListener:function(t,q,p,o,u,v,s){var w,r;if(t==="ready"){r=q}else{if(typeof t!=="string"){for(w in t){if(w==="ready"){r=t[w]}}}}if(r){Ext.onReady(r)}this.callParent([t,q,p,o,u,v,s])}}}}});Ext.USE_NATIVE_JSON=false;Ext.JSON=(new (function(){var me=this,hasNative=window.JSON&&JSON.toString()==="[object JSON]",useHasOwn=!!{}.hasOwnProperty,pad=function(n){return n<10?"0"+n:n},doDecode=function(json){return eval("("+json+")")},doEncode=function(o,newline){if(o===null||o===undefined){return"null"}else{if(Ext.isDate(o)){return me.encodeDate(o)}else{if(Ext.isString(o)){if(Ext.isMSDate(o)){return me.encodeMSDate(o)}else{return me.encodeString(o)}}else{if(typeof o==="number"){return isFinite(o)?String(o):"null"}else{if(Ext.isBoolean(o)){return String(o)}else{if(o.toJSON){return o.toJSON()}else{if(Ext.isArray(o)){return encodeArray(o,newline)}else{if(Ext.isObject(o)){return encodeObject(o,newline)}else{if(typeof o==="function"){return"null"}}}}}}}}}return"undefined"},m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\","\v":"\\u000b"},charToReplace=/[\\\"\x00-\x1f\x7f-\uffff]/g,encodeString=function(s){return'"'+s.replace(charToReplace,function(a){var c=m[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"'},encodeMSDate=function(o){return'"'+o+'"'},encodeArrayPretty=function(o,newline){var len=o.length,cnewline=newline+"   ",sep=","+cnewline,a=["[",cnewline],i;for(i=0;i<len;i+=1){a.push(me.encodeValue(o[i],cnewline),sep)}a[a.length-1]=newline+"]";return a.join("")},encodeObjectPretty=function(o,newline){var cnewline=newline+"   ",sep=","+cnewline,a=["{",cnewline],i,val;for(i in o){val=o[i];if(!useHasOwn||o.hasOwnProperty(i)){if(typeof val==="function"||val===undefined){continue}a.push(me.encodeValue(i)+": "+me.encodeValue(val,cnewline),sep)}}a[a.length-1]=newline+"}";return a.join("")},encodeArray=function(o,newline){if(newline){return encodeArrayPretty(o,newline)}var a=["[",""],len=o.length,i;for(i=0;i<len;i+=1){a.push(me.encodeValue(o[i]),",")}a[a.length-1]="]";return a.join("")},encodeObject=function(o,newline){if(newline){return encodeObjectPretty(o,newline)}var a=["{",""],i,val;for(i in o){val=o[i];if(!useHasOwn||o.hasOwnProperty(i)){if(typeof val==="function"||val===undefined){continue}a.push(me.encodeValue(i),":",me.encodeValue(val),",")}}a[a.length-1]="}";return a.join("")};me.encodeString=encodeString;me.encodeValue=doEncode;me.encodeDate=function(o){return'"'+o.getFullYear()+"-"+pad(o.getMonth()+1)+"-"+pad(o.getDate())+"T"+pad(o.getHours())+":"+pad(o.getMinutes())+":"+pad(o.getSeconds())+'"'};me.encode=function(o){if(hasNative&&Ext.USE_NATIVE_JSON){return JSON.stringify(o)}return me.encodeValue(o)};me.decode=function(json,safe){try{if(hasNative&&Ext.USE_NATIVE_JSON){return JSON.parse(json)}return doDecode(json)}catch(e){if(safe){return null}Ext.raise({sourceClass:"Ext.JSON",sourceMethod:"decode",msg:"You're trying to decode an invalid JSON String: "+json})}};me.encodeMSDate=encodeMSDate;if(!Ext.util){Ext.util={}}Ext.util.JSON=me;Ext.encode=me.encode;Ext.decode=me.decode})());(Ext.cmd.derive("Ext.mixin.Inheritable",Ext.Mixin,{mixinConfig:{id:"inheritable"},getInherited:function(o){var s=this,q=(o&&s.inheritedStateInner)||s.inheritedState,v=s.getRefOwner(),w=s.isContainer,p,u,t,r;if(!q||q.invalid){p=s.getRefOwner();r=s.ownerLayout;if(v){t=r?r===v.layout:true}s.inheritedState=q=Ext.Object.chain(p?p.getInherited(t):Ext.rootInheritedState);if(w){s.inheritedStateInner=u=Ext.Object.chain(q)}s.initInheritedState(q,u);q=(w&&o)?s.inheritedStateInner:s.inheritedState}return q},getInheritedConfig:function(j,h){var m=this.inheritedState,g,o;if(!m||m.invalid){m=this.getInherited()}o=m[j];if(h&&m.hasOwnProperty(j)){g=o;delete m[j];o=m[j];m[j]=g}return o},resolveListenerScope:function(m,j){var p=this,o=(typeof j==="boolean"),q=Ext._namedScopes[m],h;if(!q){h=p.getInheritedConfig("defaultListenerScope",o?j:true)||m||p}else{if(q.isController){h=p.getInheritedConfig("controller",o?j:!q.isSelf)}else{if(q.isSelf){h=p.getInheritedConfig("defaultListenerScope",o&&j)||p}else{if(q.isThis){h=p}}}}return h||null},resolveSatelliteListenerScope:function(o,j){var m=this,g=Ext._namedScopes[j],h;if(!g){h=m.getInheritedConfig("defaultListenerScope")||j||m}else{if(g.isController){h=m.getInheritedConfig("controller")}else{if(g.isSelf){h=m.getInheritedConfig("defaultListenerScope")||o}else{if(g.isThis){h=o}}}}return h||null},lookupReferenceHolder:function(b){return this.getInheritedConfig("referenceHolder",b!==false)||null},getRefOwner:function(){var b=this;return b.ownerCt||b.parent||b.$initParent||b.ownerCmp||b.floatParent},invalidateInheritedState:function(){var b=this.inheritedState;if(b){b.invalid=true;delete this.inheritedState}},privates:{fixReference:function(){var d=this,c;if(d.getReference()){c=d.lookupReferenceHolder();if(c){c.attachReference(d)}}},onInheritedAdd:function(d,f){var g=this;if(g.inheritedState&&f){g.invalidateInheritedState()}if(g.getReference()){Ext.ComponentManager.markReferencesDirty()}},onInheritedRemove:function(d){var f=this,g;if(f.getReference()){g=f.lookupReferenceHolder();if(g){g.clearReference(f)}}if(f.inheritedState&&!d){f.invalidateInheritedState()}}}},0,0,0,0,0,0,[Ext.mixin,"Inheritable"],function(){Ext.rootInheritedState={}}));(Ext.cmd.derive("Ext.mixin.Bindable",Ext.Base,{mixinId:"bindable",config:{bind:{$value:null,lazy:true},controller:null,defaultListenerScope:false,publishes:{$value:null,lazy:true,merge:function(c,d){return this.mergeSets(c,d)}},reference:null,session:{$value:null,lazy:true},twoWayBindable:{$value:null,lazy:true,merge:function(c,d){return this.mergeSets(c,d)}},viewModel:{$value:null,lazy:true}},defaultBindProperty:null,validRefRe:/^[a-z_][a-z0-9_]*$/i,initInheritedState:function(r){var q=this,m=q.getReference(),j=q.getController(),s=q.getConfig("viewModel",true),o=q.getConfig("session",true),p=q.getDefaultListenerScope();if(j){r.controller=j}if(p){r.defaultListenerScope=q}else{if(j){r.defaultListenerScope=j}}if(s){if(!s.isViewModel){s=q}r.viewModel=s}if(o){if(!o.isSession){o=q}r.session=o}if(m){q.referenceKey=(r.referencePath||"")+m;q.viewModelKey=(r.viewModelPath||"")+m}},lookupController:function(b){return this.getInheritedConfig("controller",b)||null},lookupSession:function(d){var c=d?null:this.getSession();if(!c){c=this.getInheritedConfig("session",d);if(c&&!c.isSession){c=c.getInherited().session=c.getSession()}}return c||null},lookupViewModel:function(d){var c=d?null:this.getViewModel();if(!c){c=this.getInheritedConfig("viewModel",d);if(c&&!c.isViewModel){c=c.getInherited().viewModel=c.getViewModel()}}return c||null},publishState:function(r,s){var t=this,A=t.publishedState,w=t.getBind(),u=w&&r&&w[r],v=0,z,B,y,q;if(u&&!u.syncing&&!u.isReadOnly()){if(!(u.calls===0&&(s==null||s===t.getInitialConfig()[r]))){u.setValue(s)}}if(!(B=t.getPublishes())){return}if(!(y=t.lookupViewModel())){return}if(!(q=t.viewModelKey)){return}if(r&&A){if(!B[r]){return}if(!(s&&s.constructor===Object)&&!(s instanceof Array)){if(A[r]===s){return}}q+=".";q+=r}else{A=A||(t.publishedState={});for(z in B){++v;if(z===r){A[z]=s}else{A[z]=t[z]}}if(!v){return}s=A}y.set(q,s)},privates:{addBindableUpdater:function(o){var g=this,m=g.self.$config.configs,h=m[o],j;if(h&&!g.hasOwnProperty(j=h.names.update)){g[j]=h.bindableUpdater||(h.root.bindableUpdater=g.makeBindableUpdater(h))}},applyBind:function(u,b){if(!u){return u}var s=this,q=s.lookupViewModel(),t=s.getTwoWayBindable(),w=s._getBindTemplateScope,r,p,v;if(!b||typeof b==="string"){b={}}if(Ext.isString(u)){r=u;u={};u[s.defaultBindProperty]=r}for(p in u){v=u[p];r=b[p];if(r&&typeof r!=="string"){r.destroy();r=null}if(v){r=q.bind(v,s.onBindNotify,s);r._config=Ext.Config.get(p);r.getTemplateScope=w}b[p]=r;if(t&&t[p]&&!r.isReadOnly()){s.addBindableUpdater(p)}}return b},applyController:function(b){if(b){b=Ext.Factory.controller(b);b.setView(this)}return b},applyPublishes:function(d){if(this.lookupViewModel()){for(var c in d){this.addBindableUpdater(c)}}return d},applySession:function(g){if(!g){return null}if(!g.isSession){var d=this.lookupSession(true),f=(g===true)?{}:g;if(d){g=d.spawn(f)}else{g=new Ext.data.Session(f)}}return g},applyViewModel:function(f){var j=this,g,h;if(!f){return null}if(!f.isViewModel){g={parent:j.lookupViewModel(true)};g.session=j.getSession();if(!h&&!g.parent){g.session=j.lookupSession()}if(f){if(f.constructor===Object){Ext.apply(g,f)}else{if(typeof f==="string"){g.type=f}}}f=Ext.Factory.viewModel(g)}return f},_getBindTemplateScope:function(){return this.scope.resolveListenerScope()},destroyBindable:function(){var j=this,f=j.getConfig("viewModel",true),h=j.getConfig("session",true),g=j.getController();if(f&&f.isViewModel){f.destroy();j.setViewModel(null)}if(h&&h.isSession){if(h.getAutoDestroy()){h.destroy()}j.setSession(null)}if(g){j.setController(null);g.destroy()}},initBindable:function(){this.initBindable=Ext.emptyFn;this.getBind();this.getPublishes()},makeBindableUpdater:function(d){var c=d.names.update;return function(b,j){var h=this,a=h.self.prototype[c];if(a){a.call(h,b,j)}h.publishState(d.name,b)}},isSyncing:function(f){var h=this.getBind(),g=false,j;if(h){j=h[f];if(j){g=j.syncing>0}}return g},onBindNotify:function(d,f,g){g.syncing=(g.syncing+1)||1;this[g._config.names.set](d);--g.syncing},removeBindings:function(){var f=this,h,g,j;if(!f.destroying){h=f.getBind();if(h&&typeof h!=="string"){for(g in h){j=h[g];j.destroy();j._config=j.getTemplateScope=null}}}f.setBind(null)},updateSession:function(c){var d=this.getInherited();if(c){d.session=c}else{delete d.session}},updateViewModel:function(d){var g=this.getInherited(),f=this.getController();if(d){g.viewModel=d;d.setView(this);if(f){f.initViewModel(d)}}else{delete g.viewModel}}}},0,0,0,0,0,0,[Ext.mixin,"Bindable"],0));(Ext.cmd.derive("Ext.mixin.ComponentDelegation",Ext.Mixin,{mixinConfig:{id:"componentDelegation"},privates:{addDelegatedListener:function(v,t,r,q,y,z,w){var u=this,A,B,s;y=y||q.order;if(y){s=(q&&q.priority);if(!s){q=q?Ext.Object.chain(q):{};q.priority=u.$orderToPriority[y]}}A=u.$delegatedEvents||(u.$delegatedEvents={});B=A[v]||(A[v]=new Ext.util.Event(u,v));if(B.addListener(t,r,q,z,w)){u.$hasDelegatedListeners._incr_(v)}},clearDelegatedListeners:function(){var m=this,g=m.$delegatedEvents,h,o,j;if(g){for(h in g){o=g[h];j=o.listeners.length;o.clearListeners();m.$hasDelegatedListeners._decr_(h,j);delete g[h]}}},doFireDelegatedEvent:function(j,r){var o=this,s=true,m,q,p;if(o.$hasDelegatedListeners[j]){m=o.getRefOwner();while(m){q=m.$delegatedEvents;if(q){p=q[j];if(p){s=p.fireDelegated(o,r);if(s===false){break}}}m=m.getRefOwner()}}return s},removeDelegatedListener:function(j,p,q){var m=this,h=m.$delegatedEvents,o;if(h){o=h[j];if(o&&o.removeListener(p,q)){m.$hasDelegatedListeners._decr_(j);if(o.listeners.length===0){delete h[j]}}}}},onClassMixedIn:function(d){function c(){}d.prototype.HasListeners=d.HasListeners=c;c.prototype=d.hasListeners=new Ext.mixin.ComponentDelegation.HasDelegatedListeners()}},0,0,0,0,0,0,[Ext.mixin,"ComponentDelegation"],function(c){function d(){}c.HasDelegatedListeners=d;d.prototype=c.prototype.$hasDelegatedListeners=new Ext.mixin.Observable.HasListeners()}));(Ext.cmd.derive("Ext.Widget",Ext.Evented,{isWidget:true,element:{reference:"element"},observableType:"component",cachedConfig:{style:null},config:{userCls:null},eventedConfig:{width:null,height:null},template:[],constructor:function(d){var g=this,f;g.initId(d);g.initElement();g.mixins.observable.constructor.call(g,d);Ext.ComponentManager.register(g);f=g.getController();if(f){f.init(g)}},afterCachedConfig:function(){var r=this,q=r.self.prototype,p=r.referenceList,w=r.renderElement,t,v,u,s,y,z;q.renderTemplate=t=document.createDocumentFragment();t.appendChild(w.clone(true,true));z=t.querySelectorAll("[id]");for(u=0,s=z.length;u<s;u++){v=z[u];v.removeAttribute("id")}for(u=0,s=p.length;u<s;u++){y=p[u];r[y].dom.removeAttribute("reference")}},addCls:function(b){this.el.addCls(b)},applyWidth:function(b){return this.filterLengthValue(b)},applyHeight:function(b){return this.filterLengthValue(b)},clearListeners:function(){var b=this;b.mixins.observable.clearListeners.call(b);b.mixins.componentDelegation.clearDelegatedListeners.call(b)},destroy:function(){var j=this,g=j.referenceList,o,m,h;for(o=0,m=g.length;o<m;o++){h=g[o];if(j.hasOwnProperty(h)){j[h].destroy();j[h]=null}}j.destroyBindable();Ext.Evented.prototype.destroy.call(this);Ext.ComponentManager.unregister(j)},doFireEvent:function(g,m,h){var j=this,o=j.mixins.observable.doFireEvent.call(j,g,m,h);if(o!==false){o=j.mixins.componentDelegation.doFireDelegatedEvent.call(j,g,m)}return o},getElementConfig:function(){var c=this,d=c.element;if(!("children" in d)){d=Ext.apply({children:c.getTemplate()},d)}return d},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getTemplate:function(){return this.template},initElement:function(){var u=this,t=u.self.prototype,F=u.getId(),s=u.referenceList=u.referenceList=[],D=true,y,B,z,E,A,v,w,C;if(t.hasOwnProperty("renderTemplate")){y=u.renderTemplate.cloneNode(true);B=y.firstChild}else{D=false;y=document.createDocumentFragment();B=Ext.Element.create(u.processElementConfig.call(t),true);y.appendChild(B)}E=y.querySelectorAll("[reference]");for(A=0,v=E.length;A<v;A++){w=E[A];C=w.getAttribute("reference");if(D){w.removeAttribute("reference")}if(C==="element"){w.id=F;z=u.el=u.addElementReference(C,w);z.dom.setAttribute("data-componentid",F)}else{u.addElementReferenceOnDemand(C,w)}s.push(C)}if(B===z.dom){u.renderElement=z}else{u.addElementReferenceOnDemand("renderElement",B)}},is:function(b){return Ext.ComponentQuery.is(this,b)},isXType:function(c,d){return d?(Ext.Array.indexOf(this.xtypes,c)!==-1):!!this.xtypesMap[c]},removeCls:function(b){this.el.removeCls(b)},toggleCls:function(d,c){this.element.toggleCls(d,c)},resolveListenerScope:function(c,d){return this.mixins.inheritable.resolveListenerScope.call(this,c,d)},setSize:function(c,d){if(c!==undefined){this.setWidth(c)}if(d!==undefined){this.setHeight(d)}},applyStyle:function(c,d){if(d&&c===d&&Ext.isObject(d)){c=Ext.apply({},c)}return c},updateStyle:function(b){this.element.applyStyles(b)},updateWidth:function(b){this.element.setWidth(b)},updateHeight:function(b){this.element.setHeight(b)},onFocusEnter:Ext.emptyFn,onFocusLeave:Ext.emptyFn,isAncestor:function(){return false},privates:{addElementReferenceOnDemand:function(d,c){if(this._elementListeners[d]){this.addElementReference(d,c)}else{Ext.Object.defineProperty(this,d,{get:function(){delete this[d];return this.addElementReference(d,c)},configurable:true})}},addElementReference:function(s,q){var p=this,j=p[s]=Ext.get(q),r=p._elementListeners[s],m,o;j.skipGarbageCollection=true;j.component=p;if(r){r=Ext.clone(r);for(m in r){o=r[m];if(typeof o==="object"){o.scope=p}}r.scope=p;j.on(r)}return j},detachFromBody:function(){Ext.getDetachedBody().appendChild(this.element);this.isDetached=true},doAddListener:function(w,q,p,o,u,v,t){var r=this,s;if(o&&"element" in o){r[o.element].doAddListener(w,q,p||r,o,u)}if(o){s=o.delegate;if(s){r.mixins.componentDelegation.addDelegatedListener.call(r,w,q,p,o,u,v,t);return}}Ext.Evented.prototype.doAddListener.call(this,w,q,p,o,u,v,t)},doRemoveListener:function(g,j,f){var h=this;h.mixins.observable.doRemoveListener.call(h,g,j,f);h.mixins.componentDelegation.removeDelegatedListener.call(h,g,j,f)},filterLengthValue:function(b){if(b==="auto"||(!b&&b!==0)){return null}return b},getFocusEl:function(){return this.element},initElementListeners:function(q){var r=this,y=r.self.superclass,z=y._elementListeners,w=q.reference,B=q.children,u,s,A,t,v;if(r.hasOwnProperty("_elementListeners")){u=r._elementListeners}else{u=r._elementListeners=(z?Ext.Object.chain(z):{})}if(w){s=q.listeners;if(s){if(z){A=z[w];if(A){s=Ext.Object.chain(A);Ext.apply(s,q.listeners)}}u[w]=s;q.listeners=null}}if(B){for(v=0,t=B.length;v<t;v++){r.initElementListeners(B[v])}}},initId:function(f){var j=this,g=j.config,h=(f&&f.id)||(g&&g.id);if(h){j.setId(h);j.id=h}else{j.getId()}},processElementConfig:function(){var f=this,g=f.self.superclass,d;if(f.hasOwnProperty("_elementConfig")){d=f._elementConfig}else{d=f._elementConfig=f.getElementConfig();if(g.isWidget){f.processElementConfig.call(g)}f.initElementListeners(d)}return d},reattachToBody:function(){this.isDetached=false},updateUserCls:function(c,d){this.element.replaceCls(d,c)}}},1,["widget"],["widget"],{widget:true},["widget.widget"],[[Ext.mixin.Inheritable.prototype.mixinId||Ext.mixin.Inheritable.$className,Ext.mixin.Inheritable],[Ext.mixin.Bindable.prototype.mixinId||Ext.mixin.Bindable.$className,Ext.mixin.Bindable],[Ext.mixin.ComponentDelegation.prototype.mixinId||Ext.mixin.ComponentDelegation.$className,Ext.mixin.ComponentDelegation]],[Ext,"Widget"],function(c){var d=c.prototype;(d.$elementEventOptions=Ext.Object.chain(Ext.Element.prototype.$eventOptions)).element=1;(d.$eventOptions=Ext.Object.chain(d.$eventOptions)).delegate=1}));Ext.define("Ext.overrides.Widget",{override:"Ext.Widget",$configStrict:false,isComponent:true,liquidLayout:true,rendered:true,rendering:true,config:{renderTo:null},cachedConfig:{baseCls:"x-widget"},constructor:function(f){var d=this,g;(arguments.callee.$previous||Ext.Evented.prototype.constructor).call(this,f);d.getComponentLayout();g=d.getRenderTo();if(g){d.render(g)}},addClsWithUI:function(b){this.el.addCls(b)},afterComponentLayout:Ext.emptyFn,updateLayout:function(){var b=this.getRefOwner();if(b){b.updateLayout()}},destroy:function(){var c=this,d=c.ownerCt;if(d&&d.remove){d.remove(c,false)}(arguments.callee.$previous||Ext.Evented.prototype.destroy).call(this)},finishRender:function(){this.rendering=false;this.initBindable()},getAnimationProps:function(){return{}},getComponentLayout:function(){var c=this,d=c.componentLayout;if(!d){d=c.componentLayout=new Ext.layout.component.Auto();d.setOwner(c)}return d},getEl:function(){return this.element},getTdCls:function(){return"x-"+this.getTdType()+"-"+(this.ui||"default")+"-cell"},getTdType:function(){return this.xtype},getItemId:function(){return this.itemId||this.id},getSizeModel:function(){return Ext.Component.prototype.getSizeModel.apply(this,arguments)},onAdded:function(g,j,h){var m=this,o=m.inheritedState;m.ownerCt=g;m.onInheritedAdd(m,h)},onRemoved:function(c){var d=this;if(!c){d.removeBindings()}d.onInheritedRemove(c);d.ownerCt=d.ownerLayout=null},parseBox:function(b){return Ext.Element.parseBox(b)},removeClsWithUI:function(b){this.el.removeCls(b)},render:function(h,j){var o=this,q=o.element,p=Ext.Component.prototype,m;if(!o.ownerCt||o.floating){if(Ext.scopeCss){q.addCls(p.rootCls)}q.addCls(p.borderBoxCls)}if(j){m=h.childNodes[j];if(m){Ext.fly(h).insertBefore(q,m);return}}Ext.fly(h).appendChild(q)},setPosition:function(d,c){this.el.setLocalXY(d,c)},up:function(){return Ext.Component.prototype.up.apply(this,arguments)},isAncestor:function(){return Ext.Component.prototype.isAncestor.apply(this,arguments)},onFocusEnter:function(){return Ext.Component.prototype.onFocusEnter.apply(this,arguments)},onFocusLeave:function(){return Ext.Component.prototype.onFocusLeave.apply(this,arguments)},isLayoutChild:function(c){var d=this.ownerCt;return d?(d===c||d.isLayoutChild(c)):false}},function(c){var d=c.prototype;if(Ext.isIE9m){d.addElementReferenceOnDemand=d.addElementReference}});(Ext.cmd.derive("Ext.ProgressBase",Ext.Base,{mixinId:"progressbase",config:{value:0,textTpl:null},applyTextTpl:function(b){if(!b.isTemplate){b=new Ext.XTemplate(b)}return b},applyValue:function(b){return b||0}},0,0,0,0,0,0,[Ext,"ProgressBase"],0));(Ext.cmd.derive("Ext.util.Format",Ext.Base,function(){var b;return{singleton:true,defaultDateFormat:"m/d/Y",thousandSeparator:",",decimalSeparator:".",currencyPrecision:2,currencySign:"$",percentSign:"%",currencyAtEnd:false,stripTagsRe:/<\/?[^>]+>/gi,stripScriptsRe:/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,nl2brRe:/\r?\n/g,hashRe:/#+$/,allHashes:/^#+$/,formatPattern:/[\d,\.#]+/,formatCleanRe:/[^\d\.#]/g,I18NFormatCleanRe:null,formatFns:{},constructor:function(){b=this},undef:function(a){return a!==undefined?a:""},defaultValue:function(d,a){return d!==undefined&&d!==""?d:a},substr:"ab".substr(-1)!="b"?function(j,g,a){var h=String(j);return(g<0)?h.substr(Math.max(h.length+g,0),a):h.substr(g,a)}:function(g,f,a){return String(g).substr(f,a)},lowercase:function(a){return String(a).toLowerCase()},uppercase:function(a){return String(a).toUpperCase()},usMoney:function(a){return b.currency(a,"$",2)},currency:function(r,p,s,a){var m="",o=",0",q=0;r=r-0;if(r<0){r=-r;m="-"}s=Ext.isDefined(s)?s:b.currencyPrecision;o+=(s>0?".":"");for(;q<s;q++){o+="0"}r=b.number(r,o);if((a||b.currencyAtEnd)===true){return Ext.String.format("{0}{1}{2}",m,r,p||b.currencySign)}else{return Ext.String.format("{0}{1}{2}",m,p||b.currencySign,r)}},date:function(a,d){if(!a){return""}if(!Ext.isDate(a)){a=new Date(Date.parse(a))}return Ext.Date.dateFormat(a,d||Ext.Date.defaultFormat)},dateRenderer:function(a){return function(d){return b.date(d,a)}},hex:function(f,g){var a=parseInt(f||0,10).toString(16);if(g){if(g<0){g=-g;if(a.length>g){a=a.substring(a.length-g)}}while(a.length<g){a="0"+a}}return a},or:function(d,a){return d||a},pick:function(h,j,g){if(Ext.isNumber(h)){var a=arguments[h+1];if(a){return a}}return h?g:j},stripTags:function(a){return !a?a:String(a).replace(b.stripTagsRe,"")},stripScripts:function(a){return !a?a:String(a).replace(b.stripScriptsRe,"")},fileSize:(function(){var a=1024,g=1048576,f=1073741824;return function(c){var d;if(c<a){if(c===1){d="1 byte"}else{d=c+" bytes"}}else{if(c<g){d=(Math.round(((c*10)/a))/10)+" KB"}else{if(c<f){d=(Math.round(((c*10)/g))/10)+" MB"}else{d=(Math.round(((c*10)/f))/10)+" GB"}}}return d}})(),math:(function(){var a={};return function(f,g){if(!a[g]){a[g]=Ext.functionFactory("v","return v "+g+";")}return a[g](f)}}()),round:function(f,g){var a=Number(f);if(typeof g==="number"){g=Math.pow(10,g);a=Math.round(f*g)/g}else{if(g===undefined){a=Math.round(a)}}return a},number:function(u,B){if(!B){return u}if(isNaN(u)){return""}var C=b.formatFns[B];if(!C){var y=B,G=b.thousandSeparator,a=b.decimalSeparator,A=0,D="",E,w,v,H,F,z;if(B.substr(B.length-2)==="/i"){if(!b.I18NFormatCleanRe||b.lastDecimalSeparator!==a){b.I18NFormatCleanRe=new RegExp("[^\\d\\"+a+"#]","g");b.lastDecimalSeparator=a}B=B.substr(0,B.length-2);E=B.indexOf(G)!==-1;w=B.replace(b.I18NFormatCleanRe,"").split(a)}else{E=B.indexOf(",")!==-1;w=B.replace(b.formatCleanRe,"").split(".")}v=B.replace(b.formatPattern,"");if(w.length>2){}else{if(w.length===2){A=w[1].length;H=w[1].match(b.hashRe);if(H){z=H[0].length;D='trailingZeroes=new RegExp(Ext.String.escapeRegex(utilFormat.decimalSeparator) + "*0{0,'+z+'}$")'}}}F=["var utilFormat=Ext.util.Format,extNumber=Ext.Number,neg,absVal,fnum,parts"+(E?",thousandSeparator,thousands=[],j,n,i":"")+(v?',formatString="'+B+'",formatPattern=/[\\d,\\.#]+/':"")+',trailingZeroes;return function(v){if(typeof v!=="number"&&isNaN(v=extNumber.from(v,NaN)))return"";neg=v<0;',"absVal=Math.abs(v);","fnum=Ext.Number.toFixed(absVal, "+A+");",D,";"];if(E){if(A){F[F.length]='parts=fnum.split(".");';F[F.length]="fnum=parts[0];"}F[F.length]="if(absVal>=1000) {";F[F.length]="thousandSeparator=utilFormat.thousandSeparator;thousands.length=0;j=fnum.length;n=fnum.length%3||3;for(i=0;i<j;i+=n){if(i!==0){n=3;}thousands[thousands.length]=fnum.substr(i,n);}fnum=thousands.join(thousandSeparator);}";if(A){F[F.length]="fnum += utilFormat.decimalSeparator+parts[1];"}}else{if(A){F[F.length]='if(utilFormat.decimalSeparator!=="."){parts=fnum.split(".");fnum=parts[0]+utilFormat.decimalSeparator+parts[1];}'}}F[F.length]='if(neg&&fnum!=="'+(A?"0."+Ext.String.repeat("0",A):"0")+'") { fnum="-"+fnum; }';if(H){F[F.length]='fnum=fnum.replace(trailingZeroes,"");'}F[F.length]="return ";if(v){F[F.length]="formatString.replace(formatPattern, fnum);"}else{F[F.length]="fnum;"}F[F.length]="};";C=b.formatFns[y]=Ext.functionFactory("Ext",F.join(""))(Ext)}return C(u)},numberRenderer:function(a){return function(d){return b.number(d,a)}},percent:function(d,a){return b.number(d*100,a||"0")+b.percentSign},attributes:function(g){if(typeof g==="object"){var a=[],f;for(f in g){if(g.hasOwnProperty(f)){a.push(f,'="',f==="style"?Ext.DomHelper.generateStyles(g[f],null,true):Ext.htmlEncode(g[f]),'" ')}}g=a.join("")}return g||""},plural:function(a,g,f){return a+" "+(a===1?g:(f?f:g+"s"))},nl2br:function(a){return Ext.isEmpty(a)?"":a.replace(b.nl2brRe,"<br/>")},capitalize:Ext.String.capitalize,uncapitalize:Ext.String.uncapitalize,ellipsis:Ext.String.ellipsis,escape:Ext.String.escape,escapeRegex:Ext.String.escapeRegex,htmlDecode:Ext.String.htmlDecode,htmlEncode:Ext.String.htmlEncode,leftPad:Ext.String.leftPad,toggle:Ext.String.toggle,trim:Ext.String.trim,parseBox:function(g){g=g||0;if(typeof g==="number"){return{top:g,right:g,bottom:g,left:g}}var f=g.split(" "),a=f.length;if(a===1){f[1]=f[2]=f[3]=f[0]}else{if(a===2){f[2]=f[0];f[3]=f[1]}else{if(a===3){f[3]=f[1]}}}return{top:parseInt(f[0],10)||0,right:parseInt(f[1],10)||0,bottom:parseInt(f[2],10)||0,left:parseInt(f[3],10)||0}}}},1,0,0,0,0,0,[Ext.util,"Format"],0));(Ext.cmd.derive("Ext.Template",Ext.Base,{inheritableStatics:{from:function(c,d){c=Ext.getDom(c);return new this(c.value||c.innerHTML,d||"")}},useEval:Ext.isGecko,constructor:function(r){var p=this,j=arguments,m=[],s,q=j.length,o;p.initialConfig={};if(q===1&&Ext.isArray(r)){j=r;q=j.length}if(q>1){for(s=0;s<q;s++){o=j[s];if(typeof o==="object"){Ext.apply(p.initialConfig,o);Ext.apply(p,o)}else{m.push(o)}}}else{m.push(r)}p.html=m.join("")},isTemplate:true,disableFormats:false,tokenRe:/\{(?:(?:(\d+)|([a-z_][\w\-]*))(?::([a-z_\.]+)(?:\(([^\)]*?)?\))?)?)\}/gi,apply:function(d){var c=this;if(c.compiled){if(!c.fn){c.compile()}return c.fn(d).join("")}return c.evaluate(d)},evaluate:function(j){var m=this,q=!m.disableFormats,o=Ext.util.Format,h=m;function p(f,a,b,d,c){if(b==null||b===""){b=a}if(d&&q){if(c){c=[j[b]].concat(Ext.functionFactory("return ["+c+"];")())}else{c=[j[b]]}if(d.substr(0,5)==="this."){return h[d.substr(5)].apply(h,c)}else{if(o[d]){return o[d].apply(o,c)}else{return f}}}else{return j[b]!==undefined?j[b]:""}}return m.html.replace(m.tokenRe,p)},applyOut:function(f,d){var g=this;if(g.compiled){if(!g.fn){g.compile()}d.push.apply(d,g.fn(f))}else{d.push(g.apply(f))}return d},applyTemplate:function(){return this.apply.apply(this,arguments)},set:function(f,g){var d=this;d.html=f;d.compiled=!!g;d.fn=null;return d},compileARe:/\\/g,compileBRe:/(\r\n|\n)/g,compileCRe:/'/g,compile:function(){var c=this,d;d=c.html.replace(c.compileARe,"\\\\").replace(c.compileBRe,"\\n").replace(c.compileCRe,"\\'").replace(c.tokenRe,c.regexReplaceFn.bind(c));d=(this.disableFormats!==true?"var fm=Ext.util.Format;":"")+(c.useEval?"$=":"return")+" function(v){return ['"+d+"'];};";c.fn=c.useEval?c.evalCompiled(d):(new Function("Ext",d))(Ext);c.compiled=true;return c},evalCompiled:function($){eval($);return $},regexReplaceFn:function(m,o,g,j,h){if(o==null||o===""){o='"'+g+'"'}else{if(this.stringFormat){o=parseInt(o)+1}}if(j&&this.disableFormats!==true){h=h?","+h:"";if(j.substr(0,5)==="this."){j=j+"("}else{if(Ext.util.Format[j]){j="fm."+j+"("}else{return m}}return"',"+j+"v["+o+"]"+h+"),'"}else{return"',v["+o+"] == undefined ? '' : v["+o+"],'"}},insertFirst:function(d,f,g){return this.doInsert("afterBegin",d,f,g)},insertBefore:function(d,f,g){return this.doInsert("beforeBegin",d,f,g)},insertAfter:function(d,f,g){return this.doInsert("afterEnd",d,f,g)},append:function(d,f,g){return this.doInsert("beforeEnd",d,f,g)},doInsert:function(g,m,h,j){var o=Ext.DomHelper.insertHtml(g,Ext.getDom(m),this.apply(h));return j?Ext.get(o):o},overwrite:function(j,g,h){var f=Ext.DomHelper.overwrite(Ext.getDom(j),this.apply(g));return h?Ext.get(f):f}},1,0,0,0,0,0,[Ext,"Template"],function(m){var o=/\{\d+\}/,h=function(a){if(o.test(a)){a=new m(a,g);return function(){return a.apply(arguments)}}else{return function(){return a}}},g={useFormat:false,compiled:true,stringFormat:true},j={};Ext.String.format=Ext.util.Format.format=function(a){var b=j[a]||(j[a]=h(a));return b.apply(this,arguments)};Ext.String.formatEncode=function(){return Ext.String.htmlEncode(Ext.String.format.apply(this,arguments))}}));(Ext.cmd.derive("Ext.util.XTemplateParser",Ext.Base,{constructor:function(b){Ext.apply(this,b)},doTpl:Ext.emptyFn,parse:function(E){var G=this,t=E.length,C={elseif:"elif"},s=G.topRe,P=G.actionsRe,N,O,J,D,L,I,K,H,m,Q,M,R,F;G.level=0;G.stack=O=[];for(N=0;N<t;N=Q){s.lastIndex=N;D=s.exec(E);if(!D){G.doText(E.substring(N,t));break}m=D.index;Q=s.lastIndex;if(N<m){J=E.substring(N,m);if(!(F&&Ext.String.trim(J)==="")){G.doText(J)}}F=false;if(D[1]){Q=E.indexOf("%}",m+2);G.doEval(E.substring(m+2,Q));Q+=2}else{if(D[2]){Q=E.indexOf("]}",m+2);G.doExpr(E.substring(m+2,Q));Q+=2}else{if(D[3]){G.doTag(D[3])}else{if(D[4]){M=null;while((H=P.exec(D[4]))!==null){J=H[2]||H[3];if(J){J=Ext.String.htmlDecode(J);L=H[1];L=C[L]||L;M=M||{};I=M[L];if(typeof I=="string"){M[L]=[I,J]}else{if(I){M[L].push(J)}else{M[L]=J}}}}if(!M){if(G.elseRe.test(D[4])){G.doElse()}else{if(G.defaultRe.test(D[4])){G.doDefault()}else{G.doTpl();O.push({type:"tpl"})}}}else{if(M["if"]){G.doIf(M["if"],M);O.push({type:"if"})}else{if(M["switch"]){G.doSwitch(M["switch"],M);O.push({type:"switch"});F=true}else{if(M["case"]){G.doCase(M["case"],M)}else{if(M.elif){G.doElseIf(M.elif,M)}else{if(M["for"]){++G.level;if(R=G.propRe.exec(D[4])){M.propName=R[1]||R[2]}G.doFor(M["for"],M);O.push({type:"for",actions:M})}else{if(M.foreach){++G.level;if(R=G.propRe.exec(D[4])){M.propName=R[1]||R[2]}G.doForEach(M.foreach,M);O.push({type:"foreach",actions:M})}else{if(M.exec){G.doExec(M.exec,M);O.push({type:"exec",actions:M})}}}}}}}}}else{if(D[0].length===5){O.push({type:"tpl"})}else{K=O.pop();G.doEnd(K.type,K.actions);if(K.type=="for"||K.type=="foreach"){--G.level}}}}}}}},topRe:/(?:(\{\%)|(\{\[)|\{([^{}]+)\})|(?:<tpl([^>]*)\>)|(?:<\/tpl>)/g,actionsRe:/\s*(elif|elseif|if|for|foreach|exec|switch|case|eval|between)\s*\=\s*(?:(?:"([^"]*)")|(?:'([^']*)'))\s*/g,propRe:/prop=(?:(?:"([^"]*)")|(?:'([^']*)'))/,defaultRe:/^\s*default\s*$/,elseRe:/^\s*else\s*$/},1,0,0,0,0,0,[Ext.util,"XTemplateParser"],0));(Ext.cmd.derive("Ext.util.XTemplateCompiler",Ext.util.XTemplateParser,{useEval:Ext.isGecko,useIndex:Ext.isIE8m,useFormat:true,propNameRe:/^[\w\d\$]*$/,compile:function(f){var g=this,d=g.generate(f);return g.useEval?g.evalTpl(d):(new Function("Ext",d))(Ext)},generate:function(g){var h=this,f="var fm=Ext.util.Format,ts=Object.prototype.toString;",j;h.maxLevel=0;h.body=["var c0=values, a0="+h.createArrayTest(0)+", p0=parent, n0=xcount, i0=xindex, k0, v;\n"];if(h.definitions){if(typeof h.definitions==="string"){h.definitions=[h.definitions,f]}else{h.definitions.push(f)}}else{h.definitions=[f]}h.switches=[];h.parse(g);h.definitions.push((h.useEval?"$=":"return")+" function ("+h.fnArgs+") {",h.body.join(""),"}");j=h.definitions.join("\n");h.definitions.length=h.body.length=h.switches.length=0;delete h.definitions;delete h.body;delete h.switches;return j},doText:function(g){var d=this,f=d.body;g=g.replace(d.aposRe,"\\'").replace(d.newLineRe,"\\n");if(d.useIndex){f.push("out[out.length]='",g,"'\n")}else{f.push("out.push('",g,"')\n")}},doExpr:function(c){var d=this.body;d.push("if ((v="+c+") != null) out");if(this.useIndex){d.push("[out.length]=v+''\n")}else{d.push(".push(v+'')\n")}},doTag:function(d){var c=this.parseTag(d);if(c){this.doExpr(c)}else{this.doText("{"+d+"}")}},doElse:function(){this.body.push("} else {\n")},doEval:function(b){this.body.push(b,"\n")},doIf:function(d,g){var f=this;if(d==="."){f.body.push("if (values) {\n")}else{if(f.propNameRe.test(d)){f.body.push("if (",f.parseTag(d),") {\n")}else{f.body.push("if (",f.addFn(d),f.callFn,") {\n")}}if(g.exec){f.doExec(g.exec)}},doElseIf:function(d,g){var f=this;if(d==="."){f.body.push("else if (values) {\n")}else{if(f.propNameRe.test(d)){f.body.push("} else if (",f.parseTag(d),") {\n")}else{f.body.push("} else if (",f.addFn(d),f.callFn,") {\n")}}if(g.exec){f.doExec(g.exec)}},doSwitch:function(g){var d=this,f;if(g==="."||g==="#"){f=g==="."?"values":"xindex";d.body.push("switch (",f,") {\n")}else{if(d.propNameRe.test(g)){d.body.push("switch (",d.parseTag(g),") {\n")}else{d.body.push("switch (",d.addFn(g),d.callFn,") {\n")}}d.switches.push(0)},doCase:function(o){var p=this,q=Ext.isArray(o)?o:[o],m=p.switches.length-1,j,h;if(p.switches[m]){p.body.push("break;\n")}else{p.switches[m]++}for(h=0,m=q.length;h<m;++h){j=p.intRe.exec(q[h]);q[h]=j?j[1]:("'"+q[h].replace(p.aposRe,"\\'")+"'")}p.body.push("case ",q.join(": case "),":\n")},doDefault:function(){var d=this,c=d.switches.length-1;if(d.switches[c]){d.body.push("break;\n")}else{d.switches[c]++}d.body.push("default:\n")},doEnd:function(f,h){var j=this,g=j.level-1;if(f=="for"||f=="foreach"){if(h.exec){j.doExec(h.exec)}j.body.push("}\n");j.body.push("parent=p",g,";values=r",g+1,";xcount=n"+g+";xindex=i",g,"+1;xkey=k",g,";\n")}else{if(f=="if"||f=="switch"){j.body.push("}\n")}}},doFor:function(q,o){var r=this,s,j=r.level,m=j-1,p;if(q==="."){s="values"}else{if(r.propNameRe.test(q)){s=r.parseTag(q)}else{s=r.addFn(q)+r.callFn}}if(r.maxLevel<j){r.maxLevel=j;r.body.push("var ")}if(q=="."){p="c"+j}else{p="a"+m+"?c"+m+"[i"+m+"]:c"+m}r.body.push("i",j,"=0,n",j,"=0,c",j,"=",s,",a",j,"=",r.createArrayTest(j),",r",j,"=values,p",j,",k",j,";\n","p",j,"=parent=",p,"\n","if (c",j,"){if(a",j,"){n",j,"=c",j,".length;}else if (c",j,".isMixedCollection){c",j,"=c",j,".items;n",j,"=c",j,".length;}else if(c",j,".isStore){c",j,"=c",j,".data.items;n",j,"=c",j,".length;}else{c",j,"=[c",j,"];n",j,"=1;}}\n","for (xcount=n",j,";i",j,"<n"+j+";++i",j,"){\n","values=c",j,"[i",j,"]");if(o.propName){r.body.push(".",o.propName)}r.body.push("\n","xindex=i",j,"+1\n");if(o.between){r.body.push('if(xindex>1){ out.push("',o.between,'"); } \n')}},doForEach:function(q,o){var r=this,s,j=r.level,m=j-1,p;if(q==="."){s="values"}else{if(r.propNameRe.test(q)){s=r.parseTag(q)}else{s=r.addFn(q)+r.callFn}}if(r.maxLevel<j){r.maxLevel=j;r.body.push("var ")}if(q=="."){p="c"+j}else{p="a"+m+"?c"+m+"[i"+m+"]:c"+m}r.body.push("i",j,"=-1,n",j,"=0,c",j,"=",s,",a",j,"=",r.createArrayTest(j),",r",j,"=values,p",j,",k",j,";\n","p",j,"=parent=",p,"\n","for(k",j," in c",j,"){\n","xindex=++i",j,"+1;\n","xkey=k",j,";\n","values=c",j,"[k",j,"];");if(o.propName){r.body.push(".",o.propName)}if(o.between){r.body.push('if(xindex>1){ out.push("',o.between,'"); } \n')}},createArrayTest:("isArray" in Array)?function(b){return"Array.isArray(c"+b+")"}:function(b){return"ts.call(c"+b+')==="[object Array]"'},doExec:function(m,j){var o=this,h="f"+o.definitions.length,g=o.guards[o.strict?0:1];o.definitions.push("function "+h+"("+o.fnArgs+") {",g.doTry," var $v = values; with($v) {","  "+m," }",g.doCatch,"}");o.body.push(h+o.callFn+"\n")},guards:[{doTry:"",doCatch:""},{doTry:"try { ",doCatch:" } catch(e) {\n}"}],addFn:function(g){var h=this,f="f"+h.definitions.length,j=h.guards[h.strict?0:1];if(g==="."){h.definitions.push("function "+f+"("+h.fnArgs+") {"," return values","}")}else{if(g===".."){h.definitions.push("function "+f+"("+h.fnArgs+") {"," return parent","}")}else{h.definitions.push("function "+f+"("+h.fnArgs+") {",j.doTry," var $v = values; with($v) {","  return("+g+")"," }",j.doCatch,"}")}}return f},parseTag:function(m){var q=this,o=q.tagRe.exec(m),s,p,t,r,u;if(!o){return null}s=o[1];p=o[2];t=o[3];r=o[4];if(s=="."){if(!q.validTypes){q.definitions.push("var validTypes={string:1,number:1,boolean:1};");q.validTypes=true}u='validTypes[typeof values] || ts.call(values) === "[object Date]" ? values : ""'}else{if(s=="#"){u="xindex"}else{if(s=="$"){u="xkey"}else{if(s.substr(0,7)=="parent."){u=s}else{if(isNaN(s)&&s.indexOf("-")==-1&&s.indexOf(".")!=-1){u="values."+s}else{u="values['"+s+"']"}}}}}if(r){u="("+u+r+")"}if(p&&q.useFormat){t=t?","+t:"";if(p.substr(0,5)!="this."){p="fm."+p+"("}else{p+="("}}else{return u}return p+u+t+")"},evalTpl:function($){eval($);return $},newLineRe:/\r\n|\r|\n/g,aposRe:/[']/g,intRe:/^\s*(\d+)\s*$/,tagRe:/^([\w-\.\#\$]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\/]\s?[\d\.\+\-\*\/\(\)]+)?$/},0,0,0,0,0,0,[Ext.util,"XTemplateCompiler"],function(){var b=this.prototype;b.fnArgs="out,values,parent,xindex,xcount,xkey";b.callFn=".call(this,"+b.fnArgs+")"}));(Ext.cmd.derive("Ext.XTemplate",Ext.Template,{isXTemplate:true,emptyObj:{},fn:null,strict:false,apply:function(g,f,j,h){return this.applyOut(g,[],f,j,h).join("")},applyOut:function(o,m,t,r,p){var s=this,u;if(!s.fn){u=new Ext.util.XTemplateCompiler({useFormat:s.disableFormats!==true,definitions:s.definitions,strict:s.strict});s.fn=u.compile(s.html)}r=r||1;p=p||1;if(s.strict){s.fn(m,o,t||s.emptyObj,r,p)}else{try{s.fn(m,o,t||s.emptyObj,r,p)}catch(q){}}return m},compile:function(){return this},statics:{getTpl:function(f,h){var j=f[h],g;if(j&&!j.isTemplate){j=Ext.ClassManager.dynInstantiate("Ext.XTemplate",j);if(f.hasOwnProperty(h)){g=f}else{for(g=f.self.prototype;g&&!g.hasOwnProperty(h);g=g.superclass){}}g[h]=j;j.owner=g}return j||null}}},0,0,0,0,0,0,[Ext,"XTemplate"],0));(Ext.cmd.derive("Ext.app.EventDomain",Ext.Base,{statics:{instances:{}},isEventDomain:true,isInstance:false,constructor:function(){var b=this;if(!b.isInstance){Ext.app.EventDomain.instances[b.type]=b}b.bus={};b.monitoredClasses=[]},dispatch:function(z,u,w){u=Ext.canonicalEventName(u);var v=this,y=v.bus,t=y[u],C,E,F,D,H,A,B,G;if(!t){return true}for(C in t){if(t.hasOwnProperty(C)&&v.match(z,C,v.controller)){E=t[C];for(F in E){if(E.hasOwnProperty(F)){D=E[F];if(D.controller.isActive()){H=D.list;A=H.length;for(B=0;B<A;B++){G=H[B];if(G.fire.apply(G,w)===false){return false}}}}}}}return true},listen:function(S,J){var K=this,L=K.bus,P=K.idProperty,O=K.monitoredClasses,R=O.length,M=J.getId(),B=(K.type==="component"),G=B?J.getRefMap():null,E,N,D,F,U,T,V,H,I,C,Q;for(F in S){I=S[F];if(B){F=G[F]||F}if(I){if(P){F=F==="*"?F:F.substring(1)}for(C in I){U=null;T=I[C];V=J;C=Ext.canonicalEventName(C);H=new Ext.util.Event(J,C);if(Ext.isObject(T)){U=T;T=U.fn;V=U.scope||J;delete U.fn;delete U.scope}if(typeof T==="string"){T=V[T]}H.addListener(T,V,U);for(E=0;E<R;++E){Q=O[E].hasListeners;if(Q){Q._incr_(C)}}N=L[C]||(L[C]={});N=N[F]||(N[F]={});D=N[M]||(N[M]={controller:J,list:[]});D.list.push(H)}}}},match:function(g,f){var d=this.idProperty;if(d){return f==="*"||g[d]===f}return false},monitor:function(j){var f=this,g=j.isInstance?j:j.prototype,h=g.doFireEvent;f.monitoredClasses.push(j);g.doFireEvent=function(a,b){var c=h.apply(this,arguments);if(c!==false&&!this.isSuspended(a)){c=f.dispatch(this,a,b)}return c}},unlisten:function(E){var w=this.bus,H=E,J=this.monitoredClasses,z=J.length,G,j,I,y,K,D,L,A,B,F,C;if(E.isController){H=E.getId()}for(j in w){j=Ext.canonicalEventName(j);if(w.hasOwnProperty(j)&&(L=w[j])){for(D in L){G=L[D];F=G[H];if(F){I=F.list;if(I){for(A=0,y=I.length;A<y;++A){K=I[A];K.clearListeners();for(B=0;B<z;++B){C=J[B].hasListeners;if(C){C._decr_(K.name)}}}delete G[H]}}}}}},destroy:function(){this.monitoredClasses=this.bus=null;this.callParent()}},1,0,0,0,0,0,[Ext.app,"EventDomain"],0));(Ext.cmd.derive("Ext.app.domain.Component",Ext.app.EventDomain,{singleton:true,type:"component",constructor:function(){this.callParent();this.monitor(Ext.Widget)},dispatch:function(m,p,q){var h=m.lookupController(false),o,j;while(h){o=h.compDomain;if(o){if(o.dispatch(m,p,q)===false){return false}}j=h.getView();h=j?j.lookupController(true):null}return this.callParent(arguments)},match:function(c,d){return c.is(d)}},1,0,0,0,0,0,[Ext.app.domain,"Component"],0));(Ext.cmd.derive("Ext.util.ProtoElement",Ext.Base,function(){var c=Ext.String.splitWords,d=Ext.Array.toMap;return{isProtoEl:true,clsProp:"cls",styleProp:"style",removedProp:"removed",styleIsText:false,constructor:function(h){var a=this,j,b;if(h){Ext.apply(a,h);j=a.cls;b=a.style;delete a.cls}a.classList=j?c(j):[];a.classMap=j?d(a.classList):{};if(b){if(typeof b==="string"){a.style=Ext.Element.parseStyles(b)}else{if(Ext.isFunction(b)){a.styleFn=b;delete a.style}else{a.style=Ext.apply({},b)}}}},flush:function(){this.flushClassList=[];this.removedClasses={};delete this.style;delete this.unselectableAttr},addCls:function(a){if(!a){return this}var r=this,b=(typeof a==="string")?c(a):a,w=b.length,t=r.classList,y=r.classMap,v=r.flushClassList,u=0,s;for(;u<w;++u){s=b[u];if(!y[s]){y[s]=true;t.push(s);if(v){v.push(s);delete r.removedClasses[s]}}}return r},hasCls:function(a){return a in this.classMap},removeCls:function(a){var b=this,t=b.classList,y=(b.classList=[]),v=d(c(a)),z=t.length,A=b.classMap,u=b.removedClasses,w,s;for(w=0;w<z;++w){s=t[w];if(v[s]){if(u){if(A[s]){u[s]=true;Ext.Array.remove(b.flushClassList,s)}}delete A[s]}else{y.push(s)}}return b},setStyle:function(a,b){var h=this,j=h.style||(h.style={});if(typeof a==="string"){if(arguments.length===1){h.setStyle(Ext.Element.parseStyles(a))}else{j[a]=b}}else{Ext.apply(j,a)}return h},unselectable:function(){this.addCls(Ext.dom.Element.unselectableCls);if(Ext.isOpera){this.unselectableAttr=true}},writeTo:function(a){var j=this,b=j.flushClassList||j.classList,m=j.removedClasses,o;if(j.styleFn){o=Ext.apply({},j.styleFn());Ext.apply(o,j.style)}else{o=j.style}a[j.clsProp]=b.join(" ");if(o){a[j.styleProp]=j.styleIsText?Ext.DomHelper.generateStyles(o,null,true):o}if(m){m=Ext.Object.getKeys(m);if(m.length){a[j.removedProp]=m.join(" ")}}if(j.unselectableAttr){a.unselectable="on"}return a}}},1,0,0,0,0,0,[Ext.util,"ProtoElement"],0));(Ext.cmd.derive("Ext.dom.CompositeElement",Ext.dom.CompositeElementLite,{alternateClassName:"Ext.CompositeElement",isLite:false,getElement:function(b){return b},transformElement:function(b){return Ext.get(b)}},0,0,0,0,0,0,[Ext.dom,"CompositeElement",Ext,"CompositeElement"],0));(Ext.cmd.derive("Ext.scroll.Scroller",Ext.Evented,{factoryConfig:{defaultType:"dom"},isScroller:true,_spacerCls:"x-domscroller-spacer",config:{direction:undefined,directionLock:false,disabled:null,element:undefined,indicators:null,maxPosition:{x:0,y:0},maxUserPosition:{x:0,y:0},minPosition:{x:0,y:0},minUserPosition:{x:0,y:0},momentumEasing:null,size:null,slotSnapSize:{x:0,y:0},x:true,y:true,spacerXY:null},statics:{create:function(b){return Ext.Factory.scroller(b,Ext.supports.Touch?"touch":"dom")}},constructor:function(d){var c=this;c.position={x:0,y:0};Ext.Evented.prototype.constructor.call(this,d);c.onDomScrollEnd=Ext.Function.createBuffered(c.onDomScrollEnd,100,c)},destroy:function(){var b=this;b.setX(Ext.emptyString);b.setY(Ext.emptyString);b.setElement(null);b.onDomScrollEnd=b._partners=b.component=null;Ext.Evented.prototype.destroy.call(this)},addPartner:function(m,g){var o=this,j=o._partners||(o._partners={}),h=m._partners||(m._partners={});j[m.getId()]={scroller:m,axis:g};h[o.getId()]={scroller:o,axis:g}},applyElement:function(g,h){var m=this,o,j;if(h){m.scrollListener.destroy()}if(g){if(g.isElement){o=g}else{o=Ext.get(g)}if(o.dom===document.body){o=Ext.get(document.scrollingElement||(Ext.isWebKit?document.body:document.documentElement));j=Ext.get(Ext.isIE9m?window:document)}else{j=o}m.scrollListener=j.on({scroll:m.onDomScroll,scope:m,destroyable:true});return o}},getClientSize:function(){var b=this.getElement().dom;return{x:b.clientWidth,y:b.clientHeight}},getScrollbarSize:function(){var t=this,y=0,p=0,u,v,q,r,s,w,z;if(t.isDomScroller||Ext.supports.touchScroll===1){u=t.getElement();if(u&&!u.destroyed){q=t.getX();r=t.getY();v=u.dom;if(q||r){z=Ext.getScrollbarSize()}if(q==="scroll"){s=true}else{if(q){s=v.scrollWidth>v.clientWidth}}if(r==="scroll"){w=true}else{if(r){w=v.scrollHeight>v.clientHeight}}if(s){p=z.height}if(w){y=z.width}}}return{width:y,height:p}},getPosition:function(){return this.position},updateDirectionLock:Ext.emptyFn,updateDisabled:Ext.emptyFn,updateIndicators:Ext.emptyFn,updateMaxPosition:Ext.emptyFn,updateMaxUserPosition:Ext.emptyFn,updateMinPosition:Ext.emptyFn,updateMinUserPosition:Ext.emptyFn,updateMomenumEasing:Ext.emptyFn,updateX:Ext.emptyFn,updateY:Ext.emptyFn,onPartnerScrollStart:Ext.emptyFn,onPartnerScrollEnd:Ext.emptyFn,refresh:function(){this.fireEvent("refresh",this);return this},removePartner:function(d){var g=this._partners,f=d._partners;if(g){delete g[d.getId()]}if(f){delete (f[this.getId()])}},scrollBy:function(j,f,h){var g=this.getPosition();if(j){if(j.length){h=f;f=j[1];j=j[0]}else{if(typeof j!=="number"){h=f;f=j.y;j=j.x}}}j=(typeof j==="number")?j+g.x:null;f=(typeof f==="number")?f+g.y:null;return this.doScrollTo(j,f,h)},scrollIntoView:function(v,u,y,s){var q=this,r=q.getPosition(),t,z,p,w=q.getElement();if(v){t=Ext.fly(v).getScrollIntoViewXY(w,r.x,r.y);z=(u===false)?r.x:t.x;p=t.y;if(s){q.on({scrollend:"doHighlight",scope:q,single:true,args:[v,s]})}q.doScrollTo(z,p,y)}},isInView:function(q){var p=this,j={x:false,y:false},o,m=p.getElement(),h;if(q&&m.contains(q)){h=m.getRegion();o=Ext.fly(q).getRegion();j.x=o.right>h.left&&o.left<h.right;j.y=o.bottom>h.top&&o.top<h.bottom}return j},scrollTo:function(g,h,f){var j;if(g){if(g.length){f=h;h=g[1];g=g[0]}else{if(typeof g!=="number"){f=h;h=g.y;g=g.x}}}if(g<0||h<0){j=this.getMaxPosition();if(g<0){g+=j.x}if(h<0){h+=j.y}}this.doScrollTo(g,h,f)},updateDirection:function(j){var f=this,g,h;if(!j){g=f.getX();h=f.getY();if(g&&h){j=(h==="scroll"&&g==="scroll")?"both":"auto"}else{if(h){j="vertical"}else{if(g){j="horizontal"}}}f._direction=j}else{if(j==="auto"){g=true;h=true}else{if(j==="vertical"){g=false;h=true}else{if(j==="horizontal"){g=true;h=false}else{if(j==="both"){g="scroll";h="scroll"}}}}f.setX(g);f.setY(h)}},updateSize:function(p){var o=this,q=o.getElement(),h,j,m;if(q){h=o.getSpacer();if(p==null){h.hide()}else{if(typeof p==="number"){j=p;m=p}else{j=p.x||0;m=p.y||0}if(j>0){j-=1}if(m>0){m-=1}o.setSpacerXY({x:j,y:m});h.show()}}},deprecated:{"5":{methods:{getScroller:function(){return this}}},"5.1.0":{methods:{scrollToTop:function(b){return this.scrollTo(0,0,b)},scrollToEnd:function(b){return this.scrollTo(Infinity,Infinity,b)}}}},privates:{getSpacer:function(){var g=this,f=g._spacer,d;if(!f){d=g.getElement();f=g._spacer=d.createChild({cls:g._spacerCls,role:"presentation"});f.setVisibilityMode(2);d.position()}return f},applySpacerXY:function(c,d){if(d&&c.x===d.x&&c.y===d.y){c=undefined}return c},updateSpacerXY:function(b){this.getSpacer().setLocalXY(b.x,b.y)},convertX:function(b){return b},doHighlight:function(c,d){if(d!==true){Ext.fly(c).highlight(d)}else{Ext.fly(c).highlight()}},fireScrollStart:function(g,h){var j=this,f=j.component;j.invokePartners("onPartnerScrollStart",g,h);if(j.hasListeners.scrollstart){j.fireEvent("scrollstart",j,g,h)}if(f&&f.onScrollStart){f.onScrollStart(g,h)}Ext.GlobalEvents.fireEvent("scrollstart",j,g,h)},fireScroll:function(g,h){var j=this,f=j.component;j.invokePartners("onPartnerScroll",g,h);if(j.hasListeners.scroll){j.fireEvent("scroll",j,g,h)}if(f&&f.onScrollMove){f.onScrollMove(g,h)}Ext.GlobalEvents.fireEvent("scroll",j,g,h)},fireScrollEnd:function(g,h){var j=this,f=j.component;j.invokePartners("onPartnerScrollEnd",g,h);if(j.hasListeners.scrollend){j.fireEvent("scrollend",j,g,h)}if(f&&f.onScrollEnd){f.onScrollEnd(g,h)}Ext.GlobalEvents.fireEvent("scrollend",j,g,h)},initXStyle:function(){var c=this.getElement(),d=this.getX();if(c&&c.dom){if(!d){d="hidden"}else{if(d===true){d="auto"}}c.setStyle("overflow-x",d)}},initYStyle:function(){var d=this.getElement(),c=this.getY();if(d&&d.dom){if(!c){c="hidden"}else{if(c===true){c="auto"}}d.setStyle("overflow-y",c)}},invokePartners:function(p,o,q){var u=this,s=u._partners,m,r,t=p==="onPartnerScrollEnd";if(!u.suspendSync&!u.isReflecting){for(r in s){m=s[r].scroller;m.isReflecting=true;m[p](u,o,q);if(t){m.isReflecting=false}}}},clearReflecting:function(){this.isReflecting=false},suspendPartnerSync:function(){this.suspendSync=(this.suspendSync||0)+1},resumePartnerSync:function(){if(this.suspendSync){this.suspendSync--}},updateDomScrollPosition:function(){var h=this,j=h.getElement(),f,g=h.position;if(j&&!j.destroyed){f=h.getElementScroll(j);g.x=f.left;g.y=f.top}h.positionDirty=false;return g},getElementScroll:function(b){return b.getScroll()},onDomScroll:function(){var m=this,g,h,j,o;if(m.isTouchScroller&&Ext.supports.touchScroll===2){o=m.getElement().dom;o.scrollTop=o.scrollLeft=0;return}g=m.updateDomScrollPosition();h=g.x;j=g.y;if(!m.isScrolling){m.isScrolling=Ext.isScrolling=true;m.fireScrollStart(h,j)}m.fireScroll(h,j);m.onDomScrollEnd()},onDomScrollEnd:function(){var j=this,f=j.getPosition(),g=f.x,h=f.y;j.isScrolling=Ext.isScrolling=false;j.trackingScrollLeft=g;j.trackingScrollTop=h;j.fireScrollEnd(g,h)},onPartnerScroll:function(j,g,h){var f=j._partners[this.getId()].axis;if(f){if(f==="x"){h=null}else{if(f==="y"){g=null}}}this.doScrollTo(g,h,false,true)},restoreState:function(){var d=this,f=d.getElement(),g;if(f){g=f.dom;if(d.trackingScrollTop!==undefined){g.scrollTop=d.trackingScrollTop;g.scrollLeft=d.trackingScrollLeft}}}}},1,0,0,0,["scroller.scroller"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.scroll,"Scroller"],0));(Ext.cmd.derive("Ext.fx.easing.Abstract",Ext.Base,{config:{startTime:0,startValue:0},isEasing:true,isEnded:false,constructor:function(b){this.initConfig(b);return this},applyStartTime:function(b){if(!b){b=Ext.Date.now()}return b},updateStartTime:function(b){this.reset()},reset:function(){this.isEnded=false},getValue:Ext.emptyFn},1,0,0,0,0,0,[Ext.fx.easing,"Abstract"],0));(Ext.cmd.derive("Ext.fx.easing.Momentum",Ext.fx.easing.Abstract,{config:{acceleration:30,friction:0,startVelocity:0},alpha:0,updateFriction:function(c){var d=Math.log(1-(c/10));this.theta=d;this.alpha=d/this.getAcceleration()},updateStartVelocity:function(b){this.velocity=b*this.getAcceleration()},updateAcceleration:function(b){this.velocity=this.getStartVelocity()*b;this.alpha=this.theta/b},getValue:function(){return this.getStartValue()-this.velocity*(1-this.getFrictionFactor())/this.theta},getFrictionFactor:function(){var b=Ext.Date.now()-this.getStartTime();return Math.exp(b*this.alpha)},getVelocity:function(){return this.getFrictionFactor()*this.velocity}},0,0,0,0,0,0,[Ext.fx.easing,"Momentum"],0));(Ext.cmd.derive("Ext.fx.easing.Bounce",Ext.fx.easing.Abstract,{config:{springTension:0.3,acceleration:30,startVelocity:0},getValue:function(){var d=Ext.Date.now()-this.getStartTime(),g=(d/this.getAcceleration()),f=g*Math.pow(Math.E,-this.getSpringTension()*g);return this.getStartValue()+(this.getStartVelocity()*f)}},0,0,0,0,0,0,[Ext.fx.easing,"Bounce"],0));(Ext.cmd.derive("Ext.fx.easing.BoundMomentum",Ext.fx.easing.Abstract,{config:{momentum:null,bounce:null,minMomentumValue:0,maxMomentumValue:0,minVelocity:0.01,startVelocity:0},applyMomentum:function(d,c){return Ext.factory(d,Ext.fx.easing.Momentum,c)},applyBounce:function(d,c){return Ext.factory(d,Ext.fx.easing.Bounce,c)},updateStartTime:function(b){this.getMomentum().setStartTime(b);Ext.fx.easing.Abstract.prototype.updateStartTime.apply(this,arguments)},updateStartVelocity:function(b){this.getMomentum().setStartVelocity(b)},updateStartValue:function(b){this.getMomentum().setStartValue(b)},reset:function(){this.lastValue=null;this.isBouncingBack=false;this.isOutOfBound=false;return Ext.fx.easing.Abstract.prototype.reset.apply(this,arguments)},getValue:function(){var z=this.getMomentum(),p=this.getBounce(),u=z.getStartVelocity(),t=u>0?1:-1,s=this.getMinMomentumValue(),v=this.getMaxMomentumValue(),w=(t==1)?v:s,r=this.lastValue,q,y;if(u===0){return this.getStartValue()}if(!this.isOutOfBound){q=z.getValue();y=z.getVelocity();if(Math.abs(y)<this.getMinVelocity()){this.isEnded=true}if(q>=s&&q<=v){return q}this.isOutOfBound=true;p.setStartTime(Ext.Date.now()).setStartVelocity(y).setStartValue(w)}q=p.getValue();if(!this.isEnded){if(!this.isBouncingBack){if(r!==null){if((t==1&&q<r)||(t==-1&&q>r)){this.isBouncingBack=true}}}else{if(Math.round(q)==w){this.isEnded=true}}}this.lastValue=q;return q}},0,0,0,0,0,0,[Ext.fx.easing,"BoundMomentum"],0));(Ext.cmd.derive("Ext.fx.easing.Linear",Ext.fx.easing.Abstract,{config:{duration:0,endValue:0},updateStartValue:function(b){this.distance=this.getEndValue()-b},updateEndValue:function(b){this.distance=b-this.getStartValue()},getValue:function(){var d=Ext.Date.now()-this.getStartTime(),c=this.getDuration();if(d>c){this.isEnded=true;return this.getEndValue()}else{return this.getStartValue()+((d/c)*this.distance)}}},0,0,0,0,["easing.linear"],0,[Ext.fx.easing,"Linear"],0));(Ext.cmd.derive("Ext.fx.easing.EaseOut",Ext.fx.easing.Linear,{config:{exponent:4,duration:1500},getValue:function(){var r=Ext.Date.now()-this.getStartTime(),t=this.getDuration(),v=this.getStartValue(),p=this.getEndValue(),w=this.distance,u=r/t,q=1-u,s=1-Math.pow(q,this.getExponent()),o=v+(s*w);if(r>=t){this.isEnded=true;return p}return o}},0,0,0,0,["easing.ease-out"],0,[Ext.fx.easing,"EaseOut"],0));(Ext.cmd.derive("Ext.util.translatable.Abstract",Ext.Evented,{config:{useWrapper:null,easing:null,easingX:null,easingY:null},x:0,y:0,activeEasingX:null,activeEasingY:null,isAnimating:false,isTranslatable:true,constructor:function(b){this.mixins.observable.constructor.call(this,b);this.position={x:0,y:0}},factoryEasing:function(b){return Ext.factory(b,Ext.fx.easing.Linear,null,"easing")},applyEasing:function(b){if(!this.getEasingX()){this.setEasingX(this.factoryEasing(b))}if(!this.getEasingY()){this.setEasingY(this.factoryEasing(b))}},applyEasingX:function(b){return this.factoryEasing(b)},applyEasingY:function(b){return this.factoryEasing(b)},doTranslate:Ext.emptyFn,translate:function(f,g,d){if(d){return this.translateAnimated(f,g,d)}if(this.isAnimating){this.stopAnimation()}if(!isNaN(f)&&typeof f=="number"){this.x=f}if(!isNaN(g)&&typeof g=="number"){this.y=g}this.doTranslate(f,g)},translateAxis:function(g,m,o){var h,j;if(g=="x"){h=m}else{j=m}return this.translate(h,j,o)},getPosition:function(){var c=this,d=c.position;d.x=-c.x;d.y=-c.y;return d},animate:function(c,d){this.activeEasingX=c;this.activeEasingY=d;this.isAnimating=true;this.lastX=null;this.lastY=null;Ext.AnimationQueue.start(this.doAnimationFrame,this);this.fireEvent("animationstart",this,this.x,this.y);return this},translateAnimated:function(m,p,r){var s=this;if(!Ext.isObject(r)){r={}}if(s.isAnimating){s.stopAnimation()}s.callback=r.callback;s.callbackScope=r.scope;var t=Ext.Date.now(),q=r.easing,u=(typeof m=="number")?(r.easingX||q||s.getEasingX()||true):null,o=(typeof p=="number")?(r.easingY||q||s.getEasingY()||true):null;if(u){u=s.factoryEasing(u);u.setStartTime(t);u.setStartValue(s.x);u.setEndValue(m);if("duration" in r){u.setDuration(r.duration)}}if(o){o=s.factoryEasing(o);o.setStartTime(t);o.setStartValue(s.y);o.setEndValue(p);if("duration" in r){o.setDuration(r.duration)}}return s.animate(u,o)},doAnimationFrame:function(){var o=this,q=o.activeEasingX,h=o.activeEasingY,p=Date.now(),j,m;if(!o.isAnimating){return}o.lastRun=p;if(q===null&&h===null){o.stopAnimation();return}if(q!==null){o.x=j=Math.round(q.getValue());if(q.isEnded){o.activeEasingX=null;o.fireEvent("axisanimationend",o,"x",j)}}else{j=o.x}if(h!==null){o.y=m=Math.round(h.getValue());if(h.isEnded){o.activeEasingY=null;o.fireEvent("axisanimationend",o,"y",m)}}else{m=o.y}if(o.lastX!==j||o.lastY!==m){o.doTranslate(j,m);o.lastX=j;o.lastY=m}o.fireEvent("animationframe",o,j,m)},stopAnimation:function(){var b=this;if(!b.isAnimating){return}b.activeEasingX=null;b.activeEasingY=null;b.isAnimating=false;Ext.AnimationQueue.stop(b.doAnimationFrame,b);b.fireEvent("animationend",b,b.x,b.y);if(b.callback){b.callback.call(b.callbackScope);b.callback=null}},refresh:function(){this.translate(this.x,this.y)},destroy:function(){if(this.isAnimating){this.stopAnimation()}Ext.Evented.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.util.translatable,"Abstract"],0));(Ext.cmd.derive("Ext.util.translatable.Dom",Ext.util.translatable.Abstract,{config:{element:null},applyElement:function(b){if(!b){return}return Ext.get(b)},updateElement:function(){this.refresh()}},0,0,0,0,0,0,[Ext.util.translatable,"Dom"],0));(Ext.cmd.derive("Ext.util.translatable.CssTransform",Ext.util.translatable.Dom,{doTranslate:function(f,g){var d=this.getElement();if(!this.destroyed&&!d.destroyed){d.translate(f,g)}},destroy:function(){var b=this.getElement();if(b&&!b.destroyed){b.dom.style.webkitTransform=null}Ext.util.translatable.Dom.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.util.translatable,"CssTransform"],0));(Ext.cmd.derive("Ext.util.translatable.ScrollPosition",Ext.util.translatable.Dom,{type:"scrollposition",config:{useWrapper:true},getWrapper:function(){var g=this.wrapper,d=this.getElement(),f;if(!g){f=d.getParent();if(!f){return null}if(f.hasCls("x-translatable-hboxfix")){f=f.getParent()}if(this.getUseWrapper()){g=d.wrap()}else{g=f}d.addCls("x-translatable");g.addCls("x-translatable-container");this.wrapper=g;g.on("painted",function(){if(!this.isAnimating){this.refresh()}},this);this.refresh()}return g},doTranslate:function(g,h){var j=this.getWrapper(),f;if(j){f=j.dom;if(typeof g=="number"){f.scrollLeft=500000-g}if(typeof h=="number"){f.scrollTop=500000-h}}},destroy:function(){var d=this,f=d.getElement(),g=d.wrapper;if(g){if(!f.destroyed){if(d.getUseWrapper()){g.doReplaceWith(f)}f.removeCls("x-translatable")}if(!g.destroyed){g.removeCls("x-translatable-container");g.un("painted","refresh",d)}delete d.wrapper;delete d._element}Ext.util.translatable.Dom.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.util.translatable,"ScrollPosition"],0));(Ext.cmd.derive("Ext.util.translatable.ScrollParent",Ext.util.translatable.Dom,{isScrollParent:true,applyElement:function(d){var c=Ext.get(d);if(c){this.parent=c.parent()}return c},doTranslate:function(f,g){var d=this.parent;d.setScrollLeft(Math.round(-f));d.setScrollTop(Math.round(-g))},getPosition:function(){var g=this,f=g.position,d=g.parent;f.x=d.getScrollLeft();f.y=d.getScrollTop();return f}},0,0,0,0,0,0,[Ext.util.translatable,"ScrollParent"],0));(Ext.cmd.derive("Ext.util.translatable.CssPosition",Ext.util.translatable.Dom,{doTranslate:function(f,g){var d=this.getElement().dom.style;if(typeof f=="number"){d.left=f+"px"}if(typeof g=="number"){d.top=g+"px"}},destroy:function(){var b=this.getElement().dom.style;b.left=null;b.top=null;Ext.util.translatable.Dom.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.util.translatable,"CssPosition"],0));(Ext.cmd.derive("Ext.util.Translatable",Ext.Base,{constructor:function(d){var c=Ext.util.translatable;switch(Ext.browser.getPreferredTranslationMethod(d)){case"scrollposition":return new c.ScrollPosition(d);case"scrollparent":return new c.ScrollParent(d);case"csstransform":return new c.CssTransform(d);case"cssposition":return new c.CssPosition(d)}}},1,0,0,0,0,0,[Ext.util,"Translatable"],0));(Ext.cmd.derive("Ext.scroll.Indicator",Ext.Widget,{config:{axis:null,hideAnimation:true,hideDelay:0,scroller:null,minLength:24},defaultHideAnimation:{to:{opacity:0},duration:300},names:{x:{side:"l",getSize:"getHeight",setLength:"setWidth",translate:"translateX"},y:{side:"t",getSize:"getWidth",setLength:"setHeight",translate:"translateY"}},oppositeAxis:{x:"y",y:"x"},cls:"x-scroll-indicator",applyHideAnimation:function(b){if(b){b=Ext.mergeIf({onEnd:this.onHideAnimationEnd,scope:this},this.defaultHideAnimation,b)}return b},constructor:function(f){var g=this,d;Ext.Widget.prototype.constructor.call(this,f);d=g.getAxis();g.names=g.names[d];g.element.addCls(g.cls+" "+g.cls+"-"+d)},hide:function(){var c=this,d=c.getHideDelay();if(d){c._hideTimer=Ext.defer(c.doHide,d,c)}else{c.doHide()}},setValue:function(u){var w=this,F=w.element,y=w.names,E=w.getAxis(),A=w.getScroller(),B=A.getMaxUserPosition()[E],J=A.getElementSize()[E],z=w.length,G=w.getMinLength(),H=z,C=J-z-w.sizeAdjust,I=Math.round,v=Math.max,D;if(u<0){H=I(v(z+(z*u/J),G));D=0}else{if(u>B){H=I(v(z-(z*(u-B)/J),G));D=C+z-H}else{D=I(u/B*C)}}w[y.translate](D);F[y.setLength](H)},show:function(){var d=this,f=d.element,g=f.getActiveAnimation();if(g){g.end()}if(!d._inDom){d.getScroller().getElement().appendChild(f);d._inDom=true;if(!d.size){d.cacheStyles()}}d.refreshLength();clearTimeout(d._hideTimer);f.setStyle("opacity","")},privates:{cacheStyles:function(){var d=this,f=d.element,g=d.names;d.size=f[g.getSize]();d.margin=f.getMargin(g.side)},doHide:function(){var c=this.getHideAnimation(),d=this.element;if(c){d.animate(c)}else{d.setStyle("opacity",0)}},hasOpposite:function(){return this.getScroller().isAxisEnabled(this.oppositeAxis[this.getAxis()])},onHideAnimationEnd:function(){this.element.setStyle("opacity","0")},refreshLength:function(){var q=this,r=q.names,v=q.getAxis(),t=q.getScroller(),z=t.getSize()[v],p=t.getElementSize()[v],s=p/z,w=q.margin*2,u=q.hasOpposite()?(w+q.size):w,y=Math.max(Math.round((p-u)*s),q.getMinLength());q.sizeAdjust=u;q.length=y;q.element[r.setLength](y)},translateX:function(b){this.element.translate(b)},translateY:function(b){this.element.translate(0,b)}}},1,["scrollindicator"],["widget","scrollindicator"],{widget:true,scrollindicator:true},["widget.scrollindicator"],0,[Ext.scroll,"Indicator"],0));(Ext.cmd.derive("Ext.scroll.TouchScroller",Ext.scroll.Scroller,{isTouchScroller:true,config:{autoRefresh:true,bounceEasing:{duration:400},elementSize:undefined,indicators:true,fps:"auto",maxAbsoluteVelocity:6,momentumEasing:{momentum:{acceleration:30,friction:0.5},bounce:{acceleration:30,springTension:0.3},minVelocity:1},outOfBoundRestrictFactor:0.5,innerElement:null,size:undefined,slotSnapEasing:{duration:150},slotSnapOffset:{x:0,y:0},startMomentumResetTime:300,translatable:{translationMethod:"auto",useWrapper:false}},cls:"x-scroll-container",scrollerCls:"x-scroll-scroller",dragStartTime:0,dragEndTime:0,isDragging:false,isAnimating:false,isMouseEvent:{mousedown:1,mousemove:1,mouseup:1},listenerMap:{touchstart:"onTouchStart",touchmove:"onTouchMove",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd"},refreshCounter:0,constructor:function(f){var d=this,g="onEvent";d.elementListeners={touchstart:g,touchmove:g,dragstart:g,drag:g,dragend:g,scope:d};d.minPosition={x:0,y:0};d.startPosition={x:0,y:0};d.velocity={x:0,y:0};d.isAxisEnabledFlags={x:false,y:false};d.flickStartPosition={x:0,y:0};d.flickStartTime={x:0,y:0};d.lastDragPosition={x:0,y:0};d.dragDirection={x:0,y:0};Ext.scroll.Scroller.prototype.constructor.call(this,f);d.refreshAxes();d.scheduleRefresh={idle:d.doRefresh,scope:d,single:true,destroyable:true}},applyBounceEasing:function(c){var d=Ext.fx.easing.EaseOut;return{x:Ext.factory(c,d),y:Ext.factory(c,d)}},applyElementSize:function(g){var o=this.getElement(),m,h,j;if(!o){return null}m=o.dom;if(!m){return}if(g==null){h=m.clientWidth;j=m.clientHeight}else{h=g.x;j=g.y}return{x:h,y:j}},applyIndicators:function(p,s){var q=this,j,r,m,o;if(p){if(p===true){j=r={}}else{m=p.x;o=p.y;if(m||o){j=(m==null||m===true)?{}:m;r=(m==null||o===true)?{}:o}else{j=r=p}}if(s){if(j){s.x.setConfig(j)}else{s.x.destroy();s.x=null}if(r){s.y.setConfig(r)}else{s.y.destroy();s.y=null}p=s}else{p={x:null,y:null};if(j){p.x=new Ext.scroll.Indicator(Ext.applyIf({axis:"x",scroller:q},j))}if(r){p.y=new Ext.scroll.Indicator(Ext.applyIf({axis:"y",scroller:q},r))}}}else{if(s){if(s.x){s.x.destroy()}if(s.y){s.y.destroy()}s.x=s.y=null}}return p},applyMomentumEasing:function(c){var d=Ext.fx.easing.BoundMomentum;return{x:Ext.factory(c,d),y:Ext.factory(c,d)}},applyInnerElement:function(b){if(b&&!b.isElement){b=Ext.get(b)}return b},applyMaxPosition:function(j,h){if(h&&j.x===h.x&&j.y===h.y){return}var g=this.getTranslatable(),f;if(g.isAnimating){f=g.activeEasingY;if(f&&f.getStartVelocity&&f.getStartVelocity()<0&&j.y<h.y){f.setMinMomentumValue(-j.y)}}return j},applyMaxUserPosition:function(c,d){if(d&&c.x===d.x&&c.y===d.y){return}return c},applySize:function(h){var q=this.getElement(),o,p,j,m;if(typeof h==="number"){j=h;m=h}else{if(h){j=h.x;m=h.y}}if(q&&(j==null||m==null)){o=q.dom;p=this.getInnerElement().dom;if(j==null){j=Math.max(p.scrollWidth,o.clientWidth)}if(m==null){m=Math.max(p.scrollHeight,o.clientHeight)}}return{x:j,y:m}},applySlotSnapOffset:function(b){if(typeof b==="number"){b={x:b,y:b}}return b},applySlotSnapSize:function(b){if(typeof b==="number"){b={x:b,y:b}}return b},applySlotSnapEasing:function(c){var d=Ext.fx.easing.EaseOut;return{x:Ext.factory(c,d),y:Ext.factory(c,d)}},applyTranslatable:function(c,d){return Ext.factory(c,Ext.util.Translatable,d)},destroy:function(){var j=this,f=j.getElement(),h=j.getInnerElement(),g=j.sizeMonitors;if(g){g.element.destroy();g.container.destroy()}if(f&&!f.destroyed){f.removeCls(j.cls)}if(h&&!h.destroyed){h.removeCls(j.scrollerCls)}if(j._isWrapped){if(!f.destroyed){j.unwrapContent()}h.destroy()}j.setElement(null);j.setInnerElement(null);j.setIndicators(null);Ext.destroy(j.getTranslatable());Ext.scroll.Scroller.prototype.destroy.call(this)},refresh:function(f,d){var g=this;++g.refreshCounter;if(f){g.doRefresh(d)}else{if(!g.refreshScheduled){g.scheduleRefresh.args=[d];g.refreshScheduled=Ext.on(g.scheduleRefresh)}}},updateAutoRefresh:function(b){this.toggleResizeListeners(b)},updateBounceEasing:function(b){this.getTranslatable().setEasingX(b.x).setEasingY(b.y)},updateElementSize:function(){if(!this.isConfiguring){this.refreshAxes()}},updateDisabled:function(b){if(!this.isConfiguring){if(b){this.detachListeners()}else{this.attachListeners()}}},updateElement:function(q,h){var o=this,m=o.getInnerElement(),p,j;if(!m){m=q.dom.firstChild;if(!m||m.nodeType!==1||!Ext.fly(m).hasCls(o.scrollerCls)){m=o.wrapContent(q)}o.setInnerElement(m)}q.addCls(o.cls);if(o.isConfiguring){if(!o.getTranslatable().isScrollParent){q.dom.style.overflowX=q.dom.style.overflowY="";p=o.elementListeners;p.mousewheel="onMouseWheel";p.scroll={fn:"onElementScroll",delegated:false,scope:o}}}if(!o.getDisabled()){o.attachListeners()}if(!o.isConfiguring){j=o.getAutoRefresh();if(j!==false){o.toggleResizeListeners(j);if(j){o.refresh()}else{if(j===null){o.setElementSize(null)}}}}},updateFps:function(b){if(b!=="auto"){this.getTranslatable().setFps(b)}},updateMaxUserPosition:function(){this.snapToBoundary()},updateMinUserPosition:function(){this.snapToBoundary()},updateInnerElement:function(b){if(b){b.addCls(this.scrollerCls)}this.getTranslatable().setElement(b)},updateSize:function(b){if(!this.isConfiguring){if(Ext.supports.touchScroll===1){Ext.scroll.Scroller.prototype.updateSize.call(this,b)}this.refreshAxes()}},updateTranslatable:function(b){b.setElement(this.getInnerElement());if(!b.isScrollParent){b.on({animationframe:"onAnimationFrame",animationend:"onAnimationEnd",scope:this})}},updateX:function(){if(!this.isConfiguring){this.refreshAxes()}},updateY:function(){if(!this.isConfiguring){this.refreshAxes()}},privates:{attachListeners:function(){this.getElement().on(this.elementListeners)},constrainX:function(b){return Math.min(this.getMaxPosition().x,Math.max(b,0))},constrainY:function(b){return Math.min(this.getMaxPosition().y,Math.max(b,0))},convertEasingConfig:function(b){return b},detachListeners:function(){this.getElement().un(this.elementListeners)},doRefresh:function(f){var h=this,j,g;if(h.refreshScheduled){h.refreshScheduled=h.refreshScheduled.destroy()}if(h.refreshCounter&&h.getElement()){h.stopAnimation();h.getTranslatable().refresh();if(f){j=f.size;g=f.elementSize}h.setSize(j);h.setElementSize(g);h.fireEvent("refresh",h);h.refreshCounter=0}},doScrollTo:function(v,w,E,A){var y=this,z=y.isDragging,u=y.getTranslatable().isScrollParent,F=!y.isReflecting&&!u;if(y.destroyed||!y.getElement()){return y}A=A||y.isDragging;var t=y.getTranslatable(),D=y.position,s=false,B,C;if(!z||y.isAxisEnabled("x")){if(isNaN(v)||typeof v!=="number"){v=D.x}else{if(!A){v=y.constrainX(v)}if(D.x!==v){D.x=v;s=true}}B=y.convertX(-v)}if(!z||y.isAxisEnabled("y")){if(isNaN(w)||typeof w!=="number"){w=D.y}else{if(!A){w=y.constrainY(w)}if(D.y!==w){D.y=w;s=true}}C=-w}if(s){if(F){y.onScrollStart()}if(E){t.translateAnimated(B,C,E)}else{if(!u){y.onScroll()}t.translate(B,C);if(F){y.onScrollEnd()}}}else{if(E&&E.callback){E.callback()}}return y},getAnimationEasing:function(z,v){if(!this.isAxisEnabled(z)){return null}var t=this,A=t.position[z],C=t.getMinUserPosition()[z],w=t.getMaxUserPosition()[z],E=t.getMaxAbsoluteVelocity(),B=null,D=t.dragEndTime,y=v.flick.velocity[z],s=z==="x",F,u;if(A<C){B=C}else{if(A>w){B=w}}if(s){A=t.convertX(A);B=t.convertX(B)}if(B!==null){u=t.getBounceEasing()[z];u.setConfig({startTime:D,startValue:-A,endValue:-B});return u}if(y===0){return null}if(y<-E){y=-E}else{if(y>E){y=E}}u=t.getMomentumEasing()[z];F={startTime:D,startValue:-A,startVelocity:y*1.5,minMomentumValue:-w,maxMomentumValue:0};if(s){t.convertEasingConfig(F)}u.setConfig(F);return u},getSnapPosition:function(u){var t=this,p=t.getSlotSnapSize()[u],s=null,o,q,r,m;if(p!==0&&t.isAxisEnabled(u)){o=t.position[u];q=t.getSlotSnapOffset()[u];r=t.getMaxUserPosition()[u];m=Math.floor((o-q)%p);if(m!==0){if(o!==r){if(Math.abs(m)>p/2){s=Math.min(r,o+((m>0)?p-m:m-p))}else{s=o-m}}else{s=o-m}}}return s},hideIndicators:function(){var j=this,h=j.getIndicators(),g,f;if(h){if(j.isAxisEnabled("x")){g=h.x;if(g){g.hide()}}if(j.isAxisEnabled("y")){f=h.y;if(f){f.hide()}}}},isAxisEnabled:function(b){this.getX();this.getY();return this.isAxisEnabledFlags[b]},onAnimationEnd:function(){this.snapToBoundary();this.onScrollEnd()},onAnimationFrame:function(j,f,h){var g=this.position;g.x=this.convertX(-f);g.y=-h;this.onScroll()},onAxisDrag:function(M,A){if(A&&this.isAxisEnabled(M)){var z=this,F=z.flickStartPosition,y=z.flickStartTime,H=z.lastDragPosition,D=z.dragDirection,P=z.position[M],C=z.getMinUserPosition()[M],B=z.getMaxUserPosition()[M],J=z.startPosition[M],G=H[M],E=J-A,I=D[M],K=z.getOutOfBoundRestrictFactor(),O=z.getStartMomentumResetTime(),N=Ext.Date.now(),L;if(E<C){E*=K}else{if(E>B){L=E-B;E=B+L*K}}if(E>G){D[M]=1}else{if(E<G){D[M]=-1}}if((I!==0&&(D[M]!==I))||(N-y[M])>O){F[M]=P;y[M]=N}H[M]=E;return true}},onDomScroll:function(){var d=this,g,f;if(d.getTranslatable().isScrollParent){g=d.getElement().dom;f=d.position;f.x=g.scrollLeft;f.y=g.scrollTop}Ext.scroll.Scroller.prototype.onDomScroll.call(this)},onDrag:function(g){var f=this,d=f.lastDragPosition;if(!f.isDragging){return}if(f.onAxisDrag("x",f.convertX(g.deltaX))|f.onAxisDrag("y",g.deltaY)){f.doScrollTo(d.x,d.y)}},onDragEnd:function(h){var j=this,f,g;if(!j.isDragging){return}j.dragEndTime=Ext.Date.now();j.onDrag(h);j.isDragging=false;f=j.getAnimationEasing("x",h);g=j.getAnimationEasing("y",h);if(f||g){j.getTranslatable().animate(f,g)}else{j.onScrollEnd()}},onDragStart:function(w){var v=this,I=v.getDirection(),C=w.absDeltaX,D=w.absDeltaY,y=v.getDirectionLock(),A=v.startPosition,E=v.flickStartPosition,z=v.flickStartTime,B=v.lastDragPosition,F=v.position,G=v.dragDirection,J=F.x,u=F.y,H=Ext.Date.now();if(y&&I!=="both"){if((I==="horizontal"&&C>D)||(I==="vertical"&&D>C)){w.stopPropagation()}else{return}}B.x=J;B.y=u;E.x=J;E.y=u;A.x=J;A.y=u;z.x=H;z.y=H;G.x=0;G.y=0;v.dragStartTime=H;v.isDragging=true;if(!v.isScrolling){v.onScrollStart()}},onElementResize:function(d,c){this.refresh(true,{elementSize:{x:c.contentWidth,y:c.contentHeight},size:this.getAutoRefresh()?null:this.getSize()})},onElementScroll:function(d,c){c.scrollTop=c.scrollLeft=0},onEvent:function(d){var f=this,g=d.browserEvent;if((!f.self.isTouching||f.isTouching)&&((!f.getTranslatable().isScrollParent)||(!f.isMouseEvent[g.type]&&g.pointerType!=="mouse"))&&(f.getY()||f.getX())){f[f.listenerMap[d.type]](d)}},onInnerElementResize:function(d,c){this.refresh(true,{size:{x:c.width,y:c.height}})},onMouseWheel:function(u){var t=this,r=u.getWheelDeltas(),A=-r.x,C=-r.y,y=t.position,z=t.getMaxUserPosition(),D=t.getMinUserPosition(),s=Math.max,B=Math.min,v=s(B(y.x+A,z.x),D.x),w=s(B(y.y+C,z.y),D.y);A=v-y.x;C=w-y.y;if(!A&&!C){return}u.stopEvent();t.onScrollStart();t.scrollBy(A,C);t.onScroll();t.onScrollEnd()},onPartnerScrollEnd:function(f,g){var d=this;if(!d.getTranslatable().isScrollParent){d.fireScrollEnd(f,g)}Ext.scroll.Scroller.prototype.onPartnerScrollEnd.call(this,f,g);d.isScrolling=false;d.hideIndicators()},onPartnerScrollStart:function(f,g){var d=this;d.isScrolling=true;if(!d.getTranslatable().isScrollParent){d.fireScrollStart(f,g)}d.showIndicators()},onScroll:function(){var q=this,s=q.position,j=s.x,o=s.y,p=q.getIndicators(),m,r;if(p){if(q.isAxisEnabled("x")){m=p.x;if(m){m.setValue(j)}}if(q.isAxisEnabled("y")){r=p.y;if(r){r.setValue(o)}}}q.fireScroll(j,o)},onScrollEnd:function(){var c=this,d=c.position;if(c.isScrolling&&!c.isTouching&&!c.snapToSlot()){c.hideIndicators();c.isScrolling=Ext.isScrolling=false;c.fireScrollEnd(d.x,d.y)}},onScrollStart:function(){var c=this,d=c.position;if(!c.isScrolling){c.showIndicators();c.isScrolling=Ext.isScrolling=true;c.fireScrollStart(d.x,d.y)}},onTouchEnd:function(){var b=this;b.isTouching=b.self.isTouching=false;if(!b.isDragging&&b.snapToSlot()){b.onScrollStart()}},onTouchMove:function(b){b.preventDefault()},onTouchStart:function(){var b=this;b.isTouching=b.self.isTouching=true;Ext.getDoc().on({touchend:"onTouchEnd",scope:b,single:true});b.stopAnimation()},refreshAxes:function(){var w=this,z=w.isAxisEnabledFlags,q=w.getSize(),r=w.getElementSize(),s=w.getIndicators(),A,B,t,u,y,v;if(!q||!r){return}A=Math.max(0,q.x-r.x);B=Math.max(0,q.y-r.y);t=w.getX();u=w.getY();w.setMaxPosition({x:A,y:B});if(t===true||t==="auto"){z.x=!!A}else{if(t===false){z.x=false;y=s&&s.x;if(y){y.hide()}}else{if(t==="scroll"){z.x=true}}}if(u===true||u==="auto"){z.y=!!B}else{if(u===false){z.y=false;v=s&&s.y;if(v){v.hide()}}else{if(u==="scroll"){z.y=true}}}w.setMaxUserPosition({x:z.x?A:0,y:z.y?B:0});if(Ext.supports.touchScroll===1){w.initXStyle();w.initYStyle()}},showIndicators:function(){var j=this,h=j.getIndicators(),g,f;if(h){if(j.isAxisEnabled("x")){g=h.x;if(g){g.show()}}if(j.isAxisEnabled("y")){f=h.y;if(f){f.show()}}}},snapToBoundary:function(){var r=this,s=r.getPosition();if(r.isConfiguring||!(s.x||s.y)){return}var w=r.getMinUserPosition(),t=r.getMaxUserPosition(),u=w.x,v=w.y,y=t.x,z=t.y,p=Math.round(s.x),q=Math.round(s.y);if(p<u){p=u}else{if(p>y){p=y}}if(q<v){q=v}else{if(q>z){q=z}}r.doScrollTo(p,q)},snapToSlot:function(){var g=this,j=g.getSnapPosition("x"),f=g.getSnapPosition("y"),h=g.getSlotSnapEasing();if(j!==null||f!==null){g.doScrollTo(j,f,{easingX:h.x,easingY:h.y});return true}return false},stopAnimation:function(){this.getTranslatable().stopAnimation()},toggleResizeListeners:function(j){var q=this,h=q.getElement(),m,o,p;if(h){p=q.getInnerElement();if(j){m=o="on"}else{if(j===null){m="on";o="un"}else{m=o="un"}}h[m]("resize","onElementResize",q);p[o]("resize","onInnerElementResize",q)}},unwrapContent:function(){var f=this.getInnerElement().dom,d=this.getElement().dom,g;while((g=f.firstChild)){d.insertBefore(g,f)}},wrapContent:function(g){var f=document.createElement("div"),j=g.dom,h;while(h=j.lastChild){f.insertBefore(h,f.firstChild)}j.appendChild(f);this.setInnerElement(f);this._isWrapped=true;return this.getInnerElement()}}},1,0,0,0,["scroller.touch"],0,[Ext.scroll,"TouchScroller"],0));(Ext.cmd.derive("Ext.scroll.DomScroller",Ext.scroll.Scroller,{isDomScroller:true,getMaxPosition:function(){var f=this.getElement(),g=0,h=0,j;if(f&&!f.destroyed){j=f.dom;g=j.scrollWidth-j.clientWidth;h=j.scrollHeight-j.clientHeight}return{x:g,y:h}},getMaxUserPosition:function(){var o=this,g=o.getElement(),h=0,j=0,m;if(g&&!g.destroyed){m=g.dom;if(o.getX()){h=m.scrollWidth-m.clientWidth}if(o.getY()){j=m.scrollHeight-m.clientHeight}}return{x:h,y:j}},getPosition:function(){var b=this;if(b.positionDirty){b.updateDomScrollPosition()}return b.position},getSize:function(){var d=this.getElement(),f,g;if(d&&!d.destroyed){g=d.dom;f={x:g.scrollWidth,y:g.scrollHeight}}else{f={x:0,y:0}}return f},updateElement:function(c,d){this.initXStyle();this.initYStyle()},updateX:function(b){this.initXStyle()},updateY:function(b){this.initYStyle()},privates:{doScrollTo:function(s,t,B){var u=this,y=u.getElement(),w,A,r,q,v,z;if(y&&!y.destroyed){A=y.dom;q=(s===Infinity);v=(t===Infinity);if(q||v){w=u.getMaxPosition();if(q){s=w.x}if(v){t=w.y}}s=u.convertX(s);if(B){r={};if(t!=null){r.scrollTop=t}if(s!=null){r.scrollLeft=s}y.animate(Ext.mergeIf({to:{scrollTop:t,scrollLeft:s}},B))}else{if(t!=null){A.scrollTop=t}if(s!=null){A.scrollLeft=s;if(Ext.isIE8){z=A.scrollLeft;A.scrollLeft=s}}}u.positionDirty=true}},getElementScroll:function(b){return b.getScroll()},stopAnimation:function(){var b=this.getElement().getActiveAnimation();if(b){b.end()}}}},0,0,0,0,["scroller.dom"],0,[Ext.scroll,"DomScroller"],function(b){Ext.onDocumentReady(function(){b.document=new b({x:true,y:true,element:document.body})})}));(Ext.cmd.derive("Ext.util.Floating",Ext.Base,{mixinId:"floating",focusOnToFront:true,shadow:"sides",animateShadow:false,constrain:false,config:{activeCounter:0,alwaysOnTop:false},preventDefaultAlign:false,_visModeMap:{visibility:1,display:2,offsets:3},constructor:function(){var m=this,o=m.el,j=m.shadow,h,g;if(j){g={mode:(j===true)?"sides":j};h=m.shadowOffset;if(h){g.offset=h}g.animate=m.animateShadow;g.fixed=m.fixed;o.enableShadow(g,false)}if(m.shim||Ext.useShims){o.enableShim({fixed:m.fixed},false)}o.setVisibilityMode(m._visModeMap[m.hideMode]);m.el.on({mousedown:m.onMouseDown,scope:m,capture:true});m.registerWithOwnerCt();m.initHierarchyEvents()},alignTo:function(q,j,m,p){var o=this,h;Ext.un("scroll",o.onAlignToScroll,o);if(q.isComponent){h=q.el}else{if(q.nodeType){h=Ext.fly(q)}else{h=q}}if(!h.contains(o.el)){Ext.on("scroll",o.onAlignToScroll,o)}o._lastAlignTarget=q;o._lastAlignToPos=j;o.mixins.positionable.alignTo.call(o,h,j,m,p)},initFloatConstrain:function(){var d=this,c=d.floatParent;if((d.constrain||d.constrainHeader)&&!d.constrainTo){d.constrainTo=c?c.getTargetEl():d.container}},initHierarchyEvents:function(){var c=this,d=this.syncHidden;if(!c.hasHierarchyEventListeners){c.mon(Ext.GlobalEvents,{hide:d,collapse:d,show:d,expand:d,added:d,scope:c});c.hasHierarchyEventListeners=true}},registerWithOwnerCt:function(){var g=this,d=g.ownerCt,f=g.zIndexParent;if(f){f.unregisterFloatingItem(g)}f=g.zIndexParent=g.up("[floating]");g.floatParent=d||f;g.initFloatConstrain();delete g.ownerCt;if(f){f.registerFloatingItem(g)}else{Ext.WindowManager.register(g)}},onMouseDown:function(q){var j=this,m=j.focusTask,s=q.pointerType==="touch",r,p,o;if(j.floating&&(!m||!m.id)){r=q.target;p=j.el.dom;while(!s&&r&&r!==p){if(Ext.fly(r).isFocusable()){s=true}r=r.parentNode}o=Ext.WindowManager.getActive()===j&&(r===p||s);if(!o){j.toFront(s)}}},onBeforeFloatLayout:function(){this.el.preventSync=true},onAfterFloatLayout:function(){var b=this.el;if(b.shadow||b.shim){b.setUnderlaysVisible(true);b.syncUnderlays()}},syncHidden:function(){var j=this,h=j.hidden||!j.rendered,g=j.hierarchicallyHidden=j.isHierarchicallyHidden(),f=j.pendingShow;if(h!==g){if(g){j.hide();j.pendingShow=true}else{if(f){delete j.pendingShow;if(f.length){j.show.apply(j,f)}else{j.show()}}}}},setZIndex:function(d){var c=this;c.el.setZIndex(d);d+=10;if(c.floatingDescendants){d=Math.floor(c.floatingDescendants.setBase(d)/100)*100+10000}return d},doConstrain:function(f){var d=this,g=d.calculateConstrainedPosition(f,null,true);if(g){d.setPosition(g)}},updateActiveCounter:function(d){var c=this.zIndexParent;if(c&&this.bringParentToFront!==false){c.setActiveCounter(++Ext.ZIndexManager.activeCounter)}c=this.zIndexManager;if(c){c.onComponentUpdate(this)}},updateAlwaysOnTop:function(d){var c=this.zIndexManager;if(c){c.onComponentUpdate(this)}},toFront:function(c){var d=this;if(d.zIndexManager.bringToFront(d,c||!d.focusOnToFront)){if(d.hasListeners.tofront){d.fireEvent("tofront",d,d.el.getZIndex())}}return d},setActive:function(h,f){var j=this,g;if(h){if(j.el.shadow&&!j.maximized){j.el.enableShadow(null,true)}if(f){g=Ext.ComponentManager.getActiveComponent();if(!g||!g.up(j)){j.focus()}}j.fireEvent("activate",j)}else{j.fireEvent("deactivate",j)}},toBack:function(){this.zIndexManager.sendToBack(this);return this},center:function(){var d=this,c;if(d.isVisible()){c=d.getAlignToXY(d.container,"c-c");d.setPagePosition(c)}else{d.needsCenter=true}return d},onFloatShow:function(){if(this.needsCenter){this.center()}delete this.needsCenter;if(this.toFrontOnShow){this.toFront()}},fitContainer:function(q){var m=this,o=m.floatParent,h=o?o.getTargetEl():m.container,j=h.getViewSize(),p=o||(h.dom!==document.body)?[0,0]:h.getXY();j.x=p[0];j.y=p[1];m.setBox(j,q)},privates:{onFloatDestroy:function(){this.clearAlignEl()},clearAlignEl:function(){var b=this;if(b._lastAlignTarget){Ext.un("scroll",b.onAlignToScroll,b);b._lastAlignPos=b._lastAlignTarget=null}},onAlignToScroll:function(j){var o=this,h=o._lastAlignTarget,q=h.isFloating,p,m;if(h){if(h.isComponent){p=h.destroyed;h=h.el}else{if(h.nodeType){h=Ext.fly(h)}m=h.dom;p=!m||Ext.isGarbage(m)}if(p){o.clearAlignEl()}else{if((j.getElement().contains(h)||q)&&!j.getElement().contains(o.el)){o.alignTo(h,o._lastAlignToPos)}}}}}},1,0,0,0,0,0,[Ext.util,"Floating"],0));(Ext.cmd.derive("Ext.util.ElementContainer",Ext.Base,{mixinId:"elementCt",config:{childEls:{$value:{},cached:true,lazy:true,merge:function(p,m,q,r){var s=m?Ext.Object.chain(m):{},j,o;if(p instanceof Array){for(j=p.length;j--;){o=p[j];if(!r||!(o in s)){if(typeof o==="string"){s[o]={name:o,itemId:o}}else{s[o.name]=o}}}}else{if(p){if(p.constructor===Object){for(j in p){if(!r||!(j in s)){o=p[j];if(o===true){s[j]={itemId:j}}else{if(typeof o==="string"){s[j]={itemId:o}}else{s[j]=o;if(!("itemId" in o)){o.itemId=j}}}s[j].name=j}}}else{if(!r||!(p in s)){s[p]={name:p,itemId:p}}}}}return s}}},destroy:function(){var j=this,f=j.getChildEls(),h,g;for(g in f){h=j[g];if(h){if(h.destroy){h.component=null;h.destroy()}j[g]=null}}},privates:{addChildEl:function(f){var g=this,d=g.getChildEls();if(!g.hasOwnProperty("childEls")){g.childEls=d=Ext.Object.chain(d)}if(typeof f==="string"){f={name:f,itemId:f}}d[f.name]=f},afterClassMixedIn:function(g){var d=g.prototype,f=d.childEls;if(f){delete d.childEls;g.getConfigurator().add({childEls:f})}},attachChildEls:function(D,E){var z=this,y=z.getChildEls(),A=E||z,t=A.id+"-",u=!A.frame,H,G,v,B,C,w,F;for(H in y){v=y[H];if(u&&v.frame){continue}C=v.select;if(C){w=D.select(C,true)}else{if(!(C=v.selectNode)){if(!(F=v.id)){F=t+v.itemId;w=Ext.cache[F]}else{w=Ext.cache[F]||D.getById(F)}}else{w=D.selectNode(C,false)}}if(w){if(w.isElement){w.component=A}else{if(w.isComposite&&!w.isLite){G=w.elements;for(B=G.length;B--;){G[B].component=A}}}}z[H]=w||null}}}},0,0,0,0,0,0,[Ext.util,"ElementContainer"],0));(Ext.cmd.derive("Ext.util.Renderable",Ext.Base,{mixinId:"renderable",frameCls:"x-frame",frameIdRegex:/[\-]frame\d+[TMB][LCR]$/,frameElNames:["TL","TC","TR","ML","MC","MR","BL","BC","BR","Table"],frameTpl:["{%this.renderDockedItems(out,values,0);%}",'<tpl if="top">','<tpl if="left"><div id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>",'<tpl if="left"><div id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}Body" data-ref="frameBody" class="{frameBodyCls} {frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</div>",'<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>','<tpl if="bottom">','<tpl if="left"><div id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>","{%this.renderDockedItems(out,values,1);%}"],frameTableTpl:["{%this.renderDockedItems(out,values,0);%}",'<table id="{fgid}Table" data-ref="frameTable" class="{frameCls} ','x-table-plain" cellpadding="0" role="presentation">','<tpl if="top">','<tr role="presentation">','<tpl if="left"><td id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>",'<tr role="presentation">','<tpl if="left"><td id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}Body" data-ref="frameBody" class="{frameBodyCls} {frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" style="{mcStyle}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</td>",'<tpl if="right"><td id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>",'<tpl if="bottom">','<tr role="presentation">','<tpl if="left"><td id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>","</table>","{%this.renderDockedItems(out,values,1);%}"],_renderState:0,ariaEl:"el",_layerCls:"x-layer",_fixedLayerCls:"x-fixed-layer",ariaStaticRoles:{presentation:true,article:true,definition:true,directory:true,document:true,img:true,heading:true,math:true,note:true,banner:true,complementary:true,contentinfo:true,navigation:true,search:true,"undefined":true,"null":true},statics:{makeRenderSetter:function(f,g){var d=f.name;return function(c){var j=this,a=(j.renderConfigs||(j.renderConfigs={})),b=a[g];if(j._renderState>=g){(f.setter||f.getSetter()).call(j,c)}else{if(!b){a[g]=b={}}if(!(d in b)){b[d]=j[d]}j[d]=c}return j}},processRenderConfig:function(D,s,B){var w=this.prototype,z=this.getConfigurator(),r=Ext.util.Renderable,t=r.makeRenderSetter,A=D[s],v,u,C,y;for(C in A){u=Ext.Config.get(C);if(!w[y=u.names.set]){v=(u.renderSetter||(u.renderSetter={}));w[y]=v[B]||(v[B]=t(u,B))}}delete D[s];z.add(A)}},onClassMixedIn:function(o){var h=o.override,j=this.processRenderConfig,m=function(a){if(a.beforeRenderConfig){this.processRenderConfig(a,"beforeRenderConfig",1)}if(a.renderConfig){this.processRenderConfig(a,"renderConfig",3)}h.call(this,a)},g=function(a,b){a.override=m;a.processRenderConfig=j;if(b.beforeRenderConfig){a.processRenderConfig(b,"beforeRenderConfig",1)}if(b.renderConfig){a.processRenderConfig(b,"renderConfig",3)}};g(o,o.prototype);o.onExtended(g)},afterRender:function(){var p=this,t={},v=p.protoEl,q=p.el,s,o,u,r,w;p.finishRenderChildren();p._renderState=4;if(p.contentEl){u="x-";r=u+"hidden-";w=p.contentEl=Ext.get(p.contentEl);w.component=p;w.removeCls([u+"hidden",r+"display",r+"offsets"]);p.getContentTarget().appendChild(w.dom)}v.writeTo(t);o=t.removed;if(o){q.removeCls(o)}o=t.cls;if(o.length){q.addCls(o)}o=t.style;if(t.style){q.setStyle(o)}p.protoEl=null;if(!p.ownerCt&&!p.skipLayout){p.updateLayout()}if(!(p.x&&p.y)&&(p.pageX||p.pageY)){p.setPagePosition(p.pageX,p.pageY)}if(p.disableOnRender){p.onDisable()}s=p.controller;if(s&&s.afterRender){s.afterRender(p)}},afterFirstLayout:function(A,s){var y=this,t=y.x,v=y.y,u=y.defaultAlign,C=y.alignOffset,z,B,D,w,r;if(!y.ownerLayout){B=t!==undefined;D=v!==undefined}if(y.floating&&!y.preventDefaultAlign&&(!B||!D)){if(y.floatParent){w=y.floatParent.getTargetEl().getViewRegion();r=y.el.getAlignToXY(y.alignTarget||y.floatParent.getTargetEl(),u,C);w.x=r[0]-w.x;w.y=r[1]-w.y}else{r=y.el.getAlignToXY(y.alignTarget||y.container,u,C);w=y.el.translateXY(r[0],r[1])}t=B?t:w.x;v=D?v:w.y;B=D=true}if(B||D){y.setPosition(t,v)}y.onBoxReady(A,s);z=y.controller;if(z&&z.boxReady){z.boxReady(y)}},beforeRender:function(){var m=this,j=m.floating,o=m.getComponentLayout(),g=m.userCls,h;m._renderState=1;m.ariaUsesMainElement=m.ariaEl==="el";h=m.controller;if(h&&h.beforeRender){h.beforeRender(m)}m.initBindable();if(m.renderConfigs){m.flushRenderConfigs()}if(m.reference){m.publishState()}if(g){m.addCls(g)}if(j){m.addCls(m.fixed?m._fixedLayerCls:m._layerCls);g=j.cls;if(g){m.addCls(g)}}m.frame=m.frame||m.alwaysFramed;if(!o.initialized){o.initLayout()}m.initOverflow();m.setUI(m.ui)},doApplyRenderTpl:function(j,g){var h=g.$comp,f;if(!h.rendered){f=h.initRenderTpl();f.applyOut(g.renderData,j)}},getElConfig:function(){var s=this,q=s.autoEl,t=s.getFrameInfo(),m={tag:"div",tpl:t?s.initFramingTpl(t.table):s.initRenderTpl()},p=s.layoutTargetCls,r=s.protoEl,o=s.ariaRole,u;s.initStyles(r);if(p&&!t){r.addCls(p)}r.writeTo(m);r.flush();if(q){if(Ext.isString(q)){m.tag=q}else{Ext.apply(m,q)}}if(o&&s.ariaUsesMainElement){m.role=o;if(!s.ariaStaticRoles[o]){m["aria-hidden"]=!!s.hidden;m["aria-disabled"]=!!s.disabled;if(s.ariaLabel&&!s.ariaLabelledBy){m["aria-label"]=s.ariaLabel}if(s.collapsible){m["aria-expanded"]=!s.collapsed}if(s.ariaRenderAttributes){Ext.apply(m,s.ariaRenderAttributes)}if(s.config.ariaAttributes){Ext.apply(m,s.getAriaAttributes())}}}m.id=s.id;if(m.tpl){if(t){m.tplData=u=s.getFrameRenderData();u.renderData=s.initRenderData()}else{m.tplData=s.initRenderData()}}s.ariaRenderAttributes=null;return m},getInsertPosition:function(b){if(b!==undefined){if(Ext.isNumber(b)){b=this.container.dom.childNodes[b]}else{b=Ext.getDom(b)}}return b},getRenderTree:function(){var c=this,d=null;if(!c.hasListeners.beforerender||c.fireEvent("beforerender",c)!==false){c._renderState=1;c.beforeRender();c.rendering=true;c._renderState=2;d=c.getElConfig();if(c.el){d.id=c.$pid=Ext.id(null,c.el.identifiablePrefix)}}return d},initRenderData:function(){var j=this,g=j.ariaRole,h,f;h=Ext.apply({$comp:j,id:j.id,ui:j.ui,uiCls:j.uiCls,baseCls:j.baseCls,componentCls:j.componentCls,frame:j.frame,renderScroller:j.touchScroll,scrollerCls:j.scrollerCls,childElCls:""},j.renderData);if(g&&!j.ariaUsesMainElement){f={role:g};if(!j.ariaStaticRoles[g]){f["aria-hidden"]=!!j.hidden;f["aria-disabled"]=!!j.disabled;if(j.ariaLabel&&!j.ariaLabelledBy){f["aria-label"]=j.ariaLabel}if(j.collapsible){f["aria-expanded"]=!j.collapsed}if(j.ariaRenderAttributes){Ext.apply(f,j.ariaRenderAttributes)}if(j.config.ariaAttributes){Ext.apply(f,j.getAriaAttributes())}}h.ariaAttributes=f}return h},onRender:function(t,s){var r=this,p=r.x,q=r.y,u=null,v=r.el,w,o;r.applyRenderSelectors();r.rendering=null;r.rendered=true;r._renderState=3;if(r.renderConfigs){r.flushRenderConfigs()}if(p!=null){u={x:p}}if(q!=null){(u=u||{}).y=q}if(!r.getFrameInfo()){w=r.width;o=r.height;if(typeof w==="number"){u=u||{};u.width=w}if(typeof o==="number"){u=u||{};u.height=o}}if(r.touchScroll===1){r.getOverflowEl().disableTouchScroll()}r.lastBox=v.lastBox=u},render:function(u,m){var s=this,t=s.el,p=s.ownerLayout,q,o,r;if(t&&!t.isElement){s.wrapPrimaryEl(t);t=s.el}if(!s.skipLayout){Ext.suspendLayouts()}u=s.initContainer(u);r=s.getInsertPosition(m);if(!t){o=s.getRenderTree();if(p&&p.transformItemRenderTree){o=p.transformItemRenderTree(o)}if(o){if(r){t=Ext.DomHelper.insertBefore(r,o)}else{t=Ext.DomHelper.append(u,o)}s.wrapPrimaryEl(t);s.cacheRefEls(t)}}else{if(!s.hasListeners.beforerender||s.fireEvent("beforerender",s)!==false){s.beforeRender();s.needsRenderTpl=s.rendering=true;s._renderState=2;s.initStyles(t);if(s.allowDomMove!==false){if(r){u.dom.insertBefore(t.dom,r)}else{u.dom.appendChild(t.dom)}}}else{q=true}}if(t&&!q){s.finishRender(m)}if(!s.skipLayout){Ext.resumeLayouts(!s.hidden&&!u.isDetachedBody)}},ensureAttachedToBody:function(g){var d=this,f;while(d.ownerCt){d=d.ownerCt}if(d.container.isDetachedBody){d.container=f=Ext.getBody();f.appendChild(d.el.dom);if(g){d.updateLayout()}if(typeof d.x==="number"||typeof d.y==="number"){d.setPosition(d.x,d.y)}}},privates:{applyRenderSelectors:function(){var m=this,g=m.renderSelectors,o=m.el,j,h;m.attachChildEls(o);m.ariaEl=m[m.ariaEl]||m.el;if(g){for(h in g){j=g[h];if(j){m[h]=o.selectNode(j,false)}}}},cacheRefEls:function(s){s=s||this.el;var u=Ext.cache,q=Ext.dom.Element,p=s.isElement?s.dom:s,m=p.querySelectorAll("[data-ref]"),o=m.length,r,t;for(t=0;t<o;t++){r=m[t];if(!u[r.id]){new q(r)}}},doAutoRender:function(){var b=this;if(!b.rendered){if(b.floating){b.render(b.renderTo||document.body)}else{b.render(Ext.isBoolean(b.autoRender)?Ext.getBody():b.autoRender)}}},doRenderContent:function(g,h){var f=h.$comp,j=f.data;if(f.html){Ext.DomHelper.generateMarkup(f.html,g);delete f.html}if(f.tpl){if(!f.tpl.isTemplate){f.tpl=new Ext.XTemplate(f.tpl)}if(j){f.data=j=j.isEntity?j.getData(true):j;f.tpl.applyOut(j,g)}}},doRenderFramingDockedItems:function(g,j,h){var f=j.$comp;if(!f.rendered&&f.doRenderDockedItems){j.renderData.$skipDockedItems=true;f.doRenderDockedItems.call(this,g,j,h)}},flushRenderConfigs:function(){var t=this,q=t.renderConfigs,r=t._renderState,p,u,m,o,s;if(q){for(u=0;u<=r;++u){p=q[u];if(p){q[u]=null;for(m in p){s=p[m];(o||(o={}))[m]=t[m];t[m]=s}}}if(o){t.setConfig(o)}}},finishRender:function(s){var p=this,z=Ext.cache,q,t,y,r,u,v,w;if(!p.el||p.$pid){if(p.container){w=z[p.id];v=w?w.dom:p.container.getById(p.id,true)}else{y=p.$pid||p.id;w=z[y];v=w?w.dom:Ext.getDom(y)}if(!p.el){p.wrapPrimaryEl(v)}else{delete p.$pid;if(!p.el.dom){p.wrapPrimaryEl(p.el)}v.parentNode.insertBefore(p.el.dom,v);q=v;v=p.el.dom;t=v.firstChild;while(q.firstChild){v.insertBefore(q.firstChild,t)}p.el.addCls(q.className);Ext.removeNode(q)}}else{if(p.needsRenderTpl){r=p.initRenderTpl();if(r){u=p.initRenderData();r.insertFirst(p.getTargetEl(),u)}p.cacheRefEls()}}p.el.component=p;if(!p.container){p.container=Ext.get(p.el.dom.parentNode)}if(p.ctCls){p.container.addCls(p.ctCls)}p.onRender(p.container,s);if(!p.overflowInited){p.initOverflow()}p.el.setVisibilityMode(Ext.Element[p.hideMode.toUpperCase()]);if(p.overCls){p.el.hover(p.addOverCls,p.removeOverCls,p)}if(p.hasListeners.render){p.fireEvent("render",p)}p.afterRender();if(p.hasListeners.afterrender){p.fireEvent("afterrender",p)}p.initEvents();if(p.hidden){p.el.hide()}},finishRenderChildren:function(){var b=this.getComponentLayout();b.finishRender()},getFrameRenderData:function(){var g=this,d=g.frameSize,f="";if(g._syncFrameHeight&&g.height){f="height:"+(g.height-d.height)+"px"}return{$comp:g,id:g.id,fgid:g.id+"-frame",ui:g.ui,uiCls:g.uiCls,frameCls:g.frameCls,frameBodyCls:g.layoutTargetCls||"",baseCls:g.baseCls,top:!!d.top,left:!!d.left,right:!!d.right,bottom:!!d.bottom,mcStyle:f,frameElCls:""}},getFrameInfo:function(){if(Ext.supports.CSS3BorderRadius||!this.frame){return false}var B=this,H=B.frameInfoCache,N=B.getFramingInfoCls()+"-frameInfo",A=H[N],I,F,J,z,M,L,G,y,C,O,E,P,K,D;if(A==null){I=Ext.fly(B.getStyleProxy(N),"frame-style-el");F=I.getStyle("font-family");if(F){F=F.split("-");J=parseInt(F[1],10);z=parseInt(F[2],10);M=parseInt(F[3],10);L=parseInt(F[4],10);G=parseInt(F[5],10);y=parseInt(F[6],10);C=parseInt(F[7],10);O=parseInt(F[8],10);E=parseInt(F[9],10);P=parseInt(F[10],10);K=parseInt(F[11],10);D=parseInt(F[12],10);A={table:F[0].charAt(0)==="t",vertical:F[0].charAt(1)==="v",top:J,right:z,bottom:M,left:L,width:L+z,height:J+M,border:{top:G,right:y,bottom:C,left:O,width:O+y,height:G+C},padding:{top:E,right:P,bottom:K,left:D,width:D+P,height:E+K}}}else{A=false}H[N]=A}B.frame=!!A;B.frameSize=A;return A},getFramingInfoCls:function(){return this.baseCls+"-"+this.ui},getStyleProxy:function(c){var d=this.styleProxyEl||(Ext.Component.prototype.styleProxyEl=Ext.getBody().createChild({role:"presentation",style:{position:"absolute",top:"-10000px"}},null,true));d.className=c;return d},getFrameTpl:function(b){return this.getTpl(b?"frameTableTpl":"frameTpl")},initContainer:function(d){var c=this;if(!d&&c.el){d=c.el.dom.parentNode;c.allowDomMove=false}c.container=d.dom?d:Ext.get(d);return c.container},initOverflow:function(){var p=this,j=p.getOverflowStyle(),m=p.scrollFlags,o=p.getOverflowEl(),q=(m.y||m.x),h=p.touchScroll=(q&&Ext.supports.touchScroll);if(!q||!o||!o.isElement){return}p.overflowInited=true;if(h===2){o.setStyle("overflow","hidden")}else{o.setStyle(j)}},doRenderPadding:function(f,g){var d=g.$comp;if(d.touchScroll){f.push("padding:",d.unitizeBox(d.padding))}},initFramingTpl:function(c){var d=this.getFrameTpl(c);if(d&&!d.applyRenderTpl){this.setupFramingTpl(d)}return d},initRenderTpl:function(){var b=this.getTpl("renderTpl");if(b&&!b.renderContent){this.setupRenderTpl(b)}return b},setupFramingTpl:function(b){b.applyRenderTpl=this.doApplyRenderTpl;b.renderDockedItems=this.doRenderFramingDockedItems},setupRenderTpl:function(b){b.renderBody=b.renderContent=this.doRenderContent;b.renderPadding=this.doRenderPadding},updateFrame:function(){if(Ext.supports.CSS3BorderRadius||!this.frame){return}var y=this,D=y.el.dom,z=y.frameTable,H=y.frameBody,N=H.dom,A=y.getFrameInfo(),M,E,I,F,B,L,K,G,C,J,w;I=document.createElement("div");L=y.getFrameRenderData();G=y.getFrameTpl(A.table);G.insertFirst(I,L);w=I.querySelectorAll("[data-ref]");J=I.querySelector('[data-ref="frameBody"]');for(B=N;B.parentNode!==D;){B=B.parentNode}while(I.firstChild){D.insertBefore(I.firstChild,B)}J.parentNode.replaceChild(N,J);N.className=J.className;H.setSize();M=y.getChildEls();if(z){z.destroy();y.frameTable=null}for(E in M){if(M[E].frame){F=y[E];if(F&&F!==H){F.destroy();y[E]=null}}}for(C=w.length;C--;){E=(K=w[C]).getAttribute("data-ref");if(E!=="frameBody"){y[E]=new Ext.dom.Element(K)}}},frameInfoCache:{}}},0,0,0,0,0,0,[Ext.util,"Renderable"],0));(Ext.cmd.derive("Ext.state.Provider",Ext.Base,{prefix:"ext-",constructor:function(d){var c=this;Ext.apply(c,d);c.state={};c.mixins.observable.constructor.call(c)},get:function(g,f){var d=this.state[g];return d===undefined?f:d},clear:function(d){var c=this;delete c.state[d];c.fireEvent("statechange",c,d,null)},set:function(f,g){var d=this;d.state[f]=g;d.fireEvent("statechange",d,f,g)},decodeValue:function(t){var w=this,p=/^(a|n|d|b|s|o|e)\:(.*)$/,y=p.exec(unescape(t)),s,v,z,q,u,r;if(!y||!y[1]){return}v=y[1];t=y[2];switch(v){case"e":return null;case"n":return parseFloat(t);case"d":return new Date(Date.parse(t));case"b":return(t==="1");case"a":s=[];if(t){q=t.split("^");u=q.length;for(r=0;r<u;r++){t=q[r];s.push(w.decodeValue(t))}}return s;case"o":s={};if(t){q=t.split("^");u=q.length;for(r=0;r<u;r++){t=q[r];z=t.split("=");s[z[0]]=w.decodeValue(z[1])}}return s;default:return t}},encodeValue:function(o){var m="",p=0,h,j,q;if(o==null){return"e:1"}else{if(typeof o==="number"){h="n:"+o}else{if(typeof o==="boolean"){h="b:"+(o?"1":"0")}else{if(Ext.isDate(o)){h="d:"+o.toUTCString()}else{if(Ext.isArray(o)){for(j=o.length;p<j;p++){m+=this.encodeValue(o[p]);if(p!==j-1){m+="^"}}h="a:"+m}else{if(typeof o==="object"){for(q in o){if(typeof o[q]!=="function"&&o[q]!==undefined){m+=q+"="+this.encodeValue(o[q])+"^"}}h="o:"+m.substring(0,m.length-1)}else{h="s:"+o}}}}}}return escape(h)}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.state,"Provider"],0));(Ext.cmd.derive("Ext.state.Manager",Ext.Base,{singleton:true,constructor:function(){this.provider=new Ext.state.Provider()},setProvider:function(b){this.provider=b},get:function(c,d){return this.provider.get(c,d)},set:function(d,c){this.provider.set(d,c)},clear:function(b){this.provider.clear(b)},getProvider:function(){return this.provider}},1,0,0,0,0,0,[Ext.state,"Manager"],0));(Ext.cmd.derive("Ext.state.Stateful",Ext.Base,{mixinId:"state",stateful:false,saveDelay:100,constructor:function(){var b=this;if(!b.stateEvents){b.stateEvents=[]}if(b.stateful!==false){b.addStateEvents(b.stateEvents);b.initState()}},addStateEvents:function(p){var m=this,q,o,h,j;if(m.stateful&&m.getStateId()){j=(typeof p==="string")?arguments:p;h=m.stateEventsByName||(m.stateEventsByName={});for(q=j.length;q--;){o=j[q];if(o&&!h[o]){h[o]=1;m.on(o,m.onStateChange,m)}}}},onStateChange:function(){var j=this,g=j.saveDelay,h,f;if(!j.stateful){return}if(g){if(!j.stateTask){h=Ext.state.Stateful;f=h.runner||(h.runner=new Ext.util.TaskRunner());j.stateTask=f.newTask({run:j.saveState,scope:j,interval:g,repeat:1,fireIdleEvent:false})}j.stateTask.start()}else{j.saveState()}},saveState:function(){var p=this,v=p.stateful&&p.getStateId(),q=p.hasListeners,u,s,t,r,w,o;if(v){w=p.getState()||{};u=p.getPlugins()||[];for(t=0,r=u.length;t<r;t++){s=u[t];if(s&&s.getState){o=s.getState(w);if(o&&!w[s.ptype]){w[s.ptype]=o}}}if(!q.beforestatesave||p.fireEvent("beforestatesave",p,w)!==false){Ext.state.Manager.set(v,w);if(q.statesave){p.fireEvent("statesave",p,w)}}}},getState:function(){return null},applyState:function(b){if(b){Ext.apply(this,b)}},getStateId:function(){var b=this;return b.stateId||(b.autoGenId?null:b.id)},initState:function(){var q=this,y=q.stateful&&q.getStateId(),r=q.hasListeners,z,p,u,s,v,t,w;if(y){p=Ext.state.Manager.get(y);if(p){z=Ext.apply({},p);if(!r.beforestaterestore||q.fireEvent("beforestaterestore",q,p)!==false){v=q.getPlugins()||[];for(u=0,s=v.length;u<s;u++){t=v[u];if(t){w=t.ptype;if(t.applyState){t.applyState(z[w],p)}delete z[w]}}q.applyState(z);if(r.staterestore){q.fireEvent("staterestore",q,p)}}}}},savePropToState:function(m,o,p){var h=this,q=h[m],j=h.initialConfig;if(h.hasOwnProperty(m)){if(!j||j[m]!==q){if(o){o[p||m]=q}return true}}return false},savePropsToState:function(j,o){var g=this,h,m;if(typeof j==="string"){g.savePropToState(j,o)}else{for(h=0,m=j.length;h<m;++h){g.savePropToState(j[h],o)}}return o},destroy:function(){var c=this,d=c.stateTask;if(d){d.destroy();c.stateTask=null}c.clearListeners()}},1,0,0,0,0,0,[Ext.state,"Stateful"],0));(Ext.cmd.derive("Ext.util.Focusable",Ext.Base,{mixinId:"focusable",hasFocus:false,focusable:false,focusCls:"focus",initFocusable:Ext.emptyFn,initFocusableEvents:function(){this.initFocusableElement()},getFocusClsEl:function(){return this.getFocusEl()},getFocusEl:function(){return this.element||this.el},destroyFocusable:function(){var b=this;Ext.destroy(b.focusListeners);b.focusListeners=b.focusEnterEvent=b.focusTask=null;b.focusEl=b.ariaEl=null},enableFocusable:Ext.emptyFn,disableFocusable:function(){var h=this,f,j=h.focusCls,g;if(h.hasFocus){f=h.findFocusTarget();if(f){f.focus()}}g=h.getFocusClsEl();if(j&&g){g.removeCls(h.removeClsWithUI(j,true))}},isFocusable:function(f){var g=this,d;if(!g.focusable&&(!g.isContainer||!f)){return false}d=g.getFocusEl();if(d&&g.canFocus()){return d.isFocusable(f)}return false},canFocus:function(f,h){var j=this,g;g=(j.isContainer||j.focusable)&&j.rendered&&!j.destroying&&!j.destroyed&&!j.disabled&&(f||j.isVisible(true));return g||(h&&!!j.findFocusTarget())},focus:function(r,u,p,t){var s=this,o,q,m;if((!s.focusable&&!s.isContainer)||s.destroyed||s.destroying){return}if(u){s.getFocusTask().delay(Ext.isNumber(u)?u:10,s.focus,s,[r,false,p,t]);return s}s.cancelFocus();if(s.canFocus()){if(o=s.getFocusEl()){if(o.isComponent){return o.focus(r,u,p,t)}q=o.dom;if(q){if(s.floating){m=s.container.dom.scrollTop}o.focus();if(r){if(Ext.isArray(r)){if(s.selectText){s.selectText.apply(s,r)}}else{if(q.select){q.select()}else{if(s.selectText){s.selectText()}}}}Ext.callback(p,t)}if(s.floating){if(m!==undefined){s.container.dom.scrollTop=m}}}}else{o=s.findFocusTarget();if(o){return o.focus(r,u,p,t)}}return s},cancelFocus:function(){var b=this.getFocusTask();if(b){b.cancel()}},beforeBlur:Ext.emptyFn,onBlur:function(j){var m=this,g=m.focusableContainer,o=m.focusCls,h;if(!m.focusable||m.destroying){return}m.beforeBlur(j);if(g){g.beforeFocusableChildBlur(m,j)}h=m.getFocusClsEl();if(o&&h){h.removeCls(m.removeClsWithUI(o,true))}if(m.validateOnBlur){m.validate()}m.hasFocus=false;m.fireEvent("blur",m,j);m.postBlur(j);if(g){g.afterFocusableChildBlur(m,j)}},postBlur:Ext.emptyFn,beforeFocus:Ext.emptyFn,onFocus:function(j){var m=this,g=m.focusableContainer,o=m.focusCls,h;if(!m.focusable){return}if(m.canFocus()){m.beforeFocus(j);if(g){g.beforeFocusableChildFocus(m,j)}h=m.getFocusClsEl();if(o&&h){h.addCls(m.addClsWithUI(o,true))}if(!m.hasFocus){m.hasFocus=true;m.fireEvent("focus",m,j)}m.postFocus(j);if(g){g.afterFocusableChildFocus(m,j)}}},postFocus:Ext.emptyFn,getTabIndex:function(){var g=this,d,f;if(!g.focusable){return}d=g.rendered&&g.getFocusEl();if(d){if(d.isComponent){f=d.getTabIndex()}else{if(d.isElement){f=d.getAttribute("tabIndex")}else{return}}g.tabIndex=f}else{f=g.tabIndex}return f-0},setTabIndex:function(h,g){var j=this,f;if(!j.focusable){return}j.tabIndex=h;if(!j.rendered){return}f=g||j.getFocusEl();if(f){if(f.isComponent){f.setTabIndex(h)}else{if(f.isElement){f.set({tabIndex:h})}}}},onFocusEnter:function(c){var d=this;if(d.floating&&d!==d.zIndexManager.getActive()){d.toFront(true)}d.focusEnterEvent=c;d.containsFocus=true;d.fireEvent("focusenter",d,c)},onFocusLeave:function(c){var d=this;d.focusEnterEvent=null;d.containsFocus=false;d.fireEvent("focusleave",d,c)},privates:{revertFocus:function(){var h=this,j=h.previousFocus,f=h.focusEnterEvent,g;h.previousFocus=null;if(h.preventRefocus||!h.el.contains(Ext.Element.getActiveElement())){return}g=j||(f&&f.fromComponent);if(g){if(g.canFocus&&g.canFocus(false,true)){g.focus();return}else{if(g.nodeType){g=Ext.fly(g)}if(g.isFocusable&&g.isFocusable()){g.focus();return}}}if(f){g=Ext.fly(f.relatedTarget);if(Ext.isIE8||(g.isFocusable&&g.isFocusable())){g.focus()}}},findFocusTarget:function(){var d=this,f,g;for(f=d.up(":not([disabled])");f;f=f.up(":not([disabled])")){g=Ext.ComponentQuery.query(":focusable:not([hasFocus])",f);if(g.length){return g[0]}if(f.isFocusable&&f.isFocusable()){return f}}},initFocusableElement:function(){var g=this,f=g.tabIndex,d=g.getFocusEl();if(d&&!d.isComponent){g.focusEl=d;if(f!=null&&g.canFocus(true)){g.setTabIndex(f,d)}d.dom.setAttribute("data-componentid",g.id);if(g.config.keyHandlers){g.initKeyHandlers(d)}}},getFocusTask:function(){if(!this.focusTask){this.focusTask=Ext.focusTask}return this.focusTask},handleFocusEvent:function(c){var d;if(this.isFocusing(c)){d=new Ext.event.Event(c.event);d.type="focus";d.relatedTarget=c.fromElement;d.target=c.toElement;this.onFocus(d)}},handleBlurEvent:function(c){var d;if(this.isBlurring(c)){d=new Ext.event.Event(c.event);d.type="blur";d.target=c.fromElement;d.relatedTarget=c.toElement;this.onBlur(d)}},isFocusing:function(f){var h=f.fromElement,j=f.toElement,g;if(this.focusable){g=this.getFocusEl();if(g){if(g.isComponent){return g.isFocusing(h,j)}else{return j===g.dom&&h!==j}}}return false},isBlurring:function(f){var h=f.fromElement,j=f.toElement,g;if(this.focusable){g=this.getFocusEl();if(g){if(g.isComponent){return g.isBlurring(h,j)}else{return h===g.dom&&h!==j}}}return false},blur:function(){var c=this,d;if(!c.focusable||!c.canFocus()){return}d=c.getFocusEl();if(d){c.blurring=true;d.blur();delete c.blurring}return c},disableTabbing:function(){var g=this,d=g.el,f;if(d){d.saveTabbableState()}f=g.getFocusEl();if(f){if(f.isComponent){f.disableTabbing()}else{if(f.isElement&&d&&!d.contains(f)){f.saveTabbableState()}}}},enableTabbing:function(){var g=this,d=g.el,f;f=g.getFocusEl();if(f){if(f.isComponent){f.enableTabbing()}else{if(f.isElement&&d&&!d.contains(f)){f.restoreTabbableState()}}}if(d){d.restoreTabbableState()}}}},0,0,0,0,0,0,[Ext.util,"Focusable"],function(){if(!Ext.focusTask){Ext.focusTask=new Ext.util.DelayedTask()}}));(Ext.cmd.derive("Ext.mixin.Accessible",Ext.Mixin,{mixinConfig:{id:"accessible"},config:{ariaAttributes:{$value:null,lazy:true}},privates:{getAriaLabelEl:function(s){var q=[],o,r,j,p,m;if(s){if(Ext.isFunction(s)){return s.call(this)}else{if(!Ext.isArray(s)){s=[s]}o=this.lookupReferenceHolder();if(o){for(r=0,j=s.length;r<j;r++){p=o.lookupReference(s[r]);if(p){q.push(p.ariaEl.id)}}}}}return q.length?q.join(" "):null}}},0,0,0,0,0,0,[Ext.mixin,"Accessible"],0));(Ext.cmd.derive("Ext.util.KeyboardInteractive",Ext.Mixin,{mixinConfig:{id:"keyboardinteractive"},config:{keyHandlers:{$value:null,lazy:true}},initKeyHandlers:function(f){var h=this,g=h.getKeyHandlers(),j;for(j in g){f.on("keydown",h.handleKeydown,h);h.keydownListenerAttached=true;break}},applyKeyHandlers:function(s){var q=this,u={},m,r,p,t,o;if(s){for(r in s){t=s[r];if(typeof t==="function"){u[r]=t}else{u[r]=q[t]}}if(q.focusable&&q.rendered&&!q.destroyed&&!q.destroying){m=q.getFocusEl();if(m&&!q.keydownListenerAttached){m.on("keydown",q.handleKeydown,q);q.keydownListenerAttached=true}}}return u},handleKeydown:function(h){var j=this,f,g;f=h.getKeyName();if(f){g=j.getKeyHandlers()[f];if(g){g.call(j,h)}}}},0,0,0,0,0,0,[Ext.util,"KeyboardInteractive"],0));(Ext.cmd.derive("Ext.Component",Ext.Base,{alternateClassName:"Ext.AbstractComponent",statics:{AUTO_ID:1000,pendingLayouts:null,layoutSuspendCount:0,DIRECTION_TOP:"top",DIRECTION_RIGHT:"right",DIRECTION_BOTTOM:"bottom",DIRECTION_LEFT:"left",VERTICAL_DIRECTION_Re:/^(?:top|bottom)$/,INVALID_ID_CHARS_Re:/[\.,\s]/g,ariaHighContrastModeCls:"x-aria-highcontrast",cancelLayout:function(f,g){var d=this.runningLayoutContext||this.pendingLayouts;if(d){d.cancelComponent(f,false,g)}},fromElement:function(g,d,f){return Ext.ComponentManager.fromElement(g,d,f)},flushLayouts:function(){var c=this,d=c.pendingLayouts;if(d&&d.invalidQueue.length){c.pendingLayouts=null;c.runningLayoutContext=d;Ext.override(d,{runComplete:function(){c.runningLayoutContext=null;var a=this.callParent();if(Ext.GlobalEvents.hasListeners.afterlayout){Ext.GlobalEvents.fireEvent("afterlayout")}return a}});d.run()}},resumeLayouts:function(b){if(this.layoutSuspendCount&&!--this.layoutSuspendCount){if(b){this.flushLayouts()}if(Ext.GlobalEvents.hasListeners.resumelayouts){Ext.GlobalEvents.fireEvent("resumelayouts")}}},suspendLayouts:function(){++this.layoutSuspendCount},updateLayout:function(g,j){var o=this,h=o.runningLayoutContext,m;if(h){h.queueInvalidate(g)}else{m=o.pendingLayouts||(o.pendingLayouts=new Ext.layout.Context());m.queueInvalidate(g);if(!j&&!o.layoutSuspendCount&&!g.isLayoutSuspended()){o.flushLayouts()}}}},$configPrefixed:false,$configStrict:false,config:{data:null,maxHeight:null,maxWidth:null,minHeight:null,minWidth:null,scrollable:null},defaultBindProperty:"html",alignTarget:null,autoRender:false,autoShow:false,baseCls:"x-component",childEls:{frameTable:{frame:true},frameTL:{frame:"tl"},frameTC:{frame:"tc"},frameTR:{frame:"tr"},frameML:{frame:"ml"},frameBody:{frame:"mc"},frameMR:{frame:"mr"},frameBL:{frame:"bl"},frameBC:{frame:"bc"},frameBR:{frame:"br"}},componentLayout:"autocomponent",defaultAlign:"c-c",disabled:false,disabledRe:/^(?:button|input|select|textarea|optgroup|option|fieldset)$/i,nonMaskableRe:(function(){var b=["input","select","textarea","optgroup","option","table"];if(Ext.isIE9m&&!(Ext.isIE9&&!Ext.isIEQuirks)){b.push("p")}return new RegExp("^(?:"+b.join("|")+")$","i")}()),disabledCls:"x-item-disabled",draggable:false,floating:false,hidden:false,hideMode:"display",maskElement:null,renderTpl:['<tpl if="renderScroller">','<div class="{scrollerCls}" style="{%this.renderPadding(out, values)%}">',"</tpl>","{%this.renderContent(out,values)%}",'<tpl if="renderScroller"></div></tpl>'],resizeHandles:"all",shrinkWrap:2,toFrontOnShow:true,synthetic:false,tplWriteMode:"overwrite",ui:"default",uiCls:[],userCls:null,weight:null,allowDomMove:true,autoGenId:false,borderBoxCls:"x-border-box",componentLayoutCounter:0,contentPaddingProperty:"padding",deferLayouts:false,frameSize:null,horizontalPosProp:"left",isComponent:true,_isLayoutRoot:false,layoutSuspendCount:0,liquidLayout:false,maskOnDisable:true,offsetsCls:"x-hidden-offsets",rendered:false,rootCls:"x-body",scrollerCls:"x-scroll-scroller",scrollerSelector:".x-scroll-scroller",_scrollFlags:{auto:{auto:{overflowX:"auto",overflowY:"auto",x:true,y:true,both:true},"false":{overflowX:"auto",overflowY:"hidden",x:true,y:false,both:false},scroll:{overflowX:"auto",overflowY:"scroll",x:true,y:true,both:true}},"false":{auto:{overflowX:"hidden",overflowY:"auto",x:false,y:true,both:false},"false":{overflowX:"hidden",overflowY:"hidden",x:false,y:false,both:false},scroll:{overflowX:"hidden",overflowY:"scroll",x:false,y:true,both:false}},scroll:{auto:{overflowX:"scroll",overflowY:"auto",x:true,y:true,both:true},"false":{overflowX:"scroll",overflowY:"hidden",x:true,y:false,both:false},scroll:{overflowX:"scroll",overflowY:"scroll",x:true,y:true,both:true}},none:{overflowX:"",overflowY:"",x:false,y:false,both:false}},_scrollableCfg:{x:{x:true,y:false},y:{x:false,y:true},horizontal:{x:true,y:false},vertical:{x:false,y:true},both:{x:true,y:true},"true":{x:true,y:true}},validIdRe:Ext.validIdRe,constructor:function(z){var s=this,w,t,r,u,p,v,y,q;z=z||{};if(z.initialConfig){if(z.isAction){s.baseAction=z}z=z.initialConfig}else{if(z.tagName||z.dom||Ext.isString(z)){z={applyTo:z,id:z.id||z}}}s.initialConfig=z;s.getId();s.protoEl=new Ext.util.ProtoElement();s.initConfig(z);if(s.scrollable==null){p=s.autoScroll;if(p){q=!!p}else{v=s.overflowX;y=s.overflowY;if(v||y){q={x:(v&&v!=="hidden")?v:false,y:(y&&y!=="hidden")?y:false}}}if(q){s.setScrollable(q)}}r=s.xhooks;if(r){delete s.xhooks;Ext.override(s,r)}s.mixins.elementCt.constructor.call(s);s.setupProtoEl();if(s.cls){s.initialCls=s.cls;s.protoEl.addCls(s.cls)}if(s.style){s.initialStyle=s.style;s.protoEl.setStyle(s.style)}s.renderData=s.renderData||{};s.initComponent();if(!s.preventRegister){Ext.ComponentManager.register(s)}s.mixins.state.constructor.call(s);s.addStateEvents("resize");u=s.getController();if(u){u.init(s)}if(s.plugins){for(w=0,t=s.plugins.length;w<t;w++){s.plugins[w]=s.initPlugin(s.plugins[w])}}s.loader=s.getLoader();if(s.disabled){s.disabled=false;s.disable(true)}if(s.renderTo){s.render(s.renderTo)}if(s.autoShow&&!s.$initParent){s.show()}if(s.baseAction){s.baseAction.addComponent(s)}},beforeInitConfig:function(){this.mixins.observable.constructor.call(this)},addCls:function(f){var g=this,d=g.rendered?g.el:g.protoEl;d.addCls.apply(d,arguments);return g},addClsWithUI:function(u,p){var q=this,r=[],s=0,t=q.uiCls=Ext.Array.clone(q.uiCls),v=q.activeUI,w,o;if(typeof u==="string"){u=(u.indexOf(" ")<0)?[u]:Ext.String.splitWords(u)}w=u.length;for(;s<w;s++){o=u[s];if(o&&!q.hasUICls(o)){t.push(o);if(v){r=r.concat(q.addUIClsToElement(o))}}}if(p!==true&&v){q.addCls(r)}return r},afterComponentLayout:function(p,h,q,m){var o=this,j;if(++o.componentLayoutCounter===1){j=o.scrollable;if(j){if(o.touchScroll&&j.isTouchScroller){j.setInnerElement(o.getScrollerEl())}j.setElement(o.getOverflowEl());if(Ext.isIE){Ext.on("show",o.onGlobalShow,o)}}o.afterFirstLayout(p,h)}if(p!==q||h!==m){o.onResize(p,h,q,m)}if(o.floating){o.onAfterFloatLayout()}},addPlugin:function(c){var d=this;c=d.constructPlugin(c);if(d.plugins){d.plugins.push(c)}else{d.plugins=[c]}if(d.pluginsInitialized){d.initPlugin(c)}return c},addPropertyToState:function(j,m,o){var g=this,h=arguments.length;if(h===3||g.hasOwnProperty(m)){if(h<3){o=g[m]}if(o!==g.initialConfig[m]){(j||(j={}))[m]=o}}return j},addUIClsToElement:function(p){var s=this,m=s.baseCls+"-"+s.ui+"-"+p,o=["x-"+p,s.baseCls+"-"+p,m],t,q,u,r;if(s.rendered&&s.frame&&!Ext.supports.CSS3BorderRadius){m+="-";t=s.getChildEls();for(q in t){r=t[q].frame;if(r&&r!==true){u=s[q];if(u){u.addCls(m+r)}}}}return o},removeUIClsFromElement:function(p){var s=this,m=s.baseCls+"-"+s.ui+"-"+p,o=["x-"+p,s.baseCls+"-"+p,m],t,q,u,r;if(s.rendered&&s.frame&&!Ext.supports.CSS3BorderRadius){m+="-";t=s.getChildEls();for(q in t){r=t[q].frame;if(r&&r!==true){u=s[q];if(u){u.removeCls(m+r)}}}}return o},adjustPosition:function(g,h){var f=this,j;if(f.isContainedFloater()){j=f.floatParent.getTargetEl().getViewRegion();g+=j.left;h+=j.top}return{x:g,y:h}},afterHide:function(g,j){var h=this,f=h.focusableContainer;h.hiddenByLayout=null;if(this.ownerLayout){this.updateLayout({isRoot:false})}Ext.callback(g,j||h);h.fireHierarchyEvent("hide");h.fireEvent("hide",h);if(f){f.onFocusableChildHide(h)}},afterSetPosition:function(f,g){var d=this;d.onPosition(f,g);if(d.hasListeners.move){d.fireEvent("move",d,f,g)}},afterShow:function(q,m,s){var r=this,p=r.el,o,u,t;q=r.getAnimateTarget(q);if(!r.ghost){q=null}if(q){u={x:p.getX(),y:p.getY(),width:p.dom.offsetWidth,height:p.dom.offsetHeight};o={x:q.getX(),y:q.getY(),width:q.dom.offsetWidth,height:q.dom.offsetHeight};p.addCls(r.offsetsCls);t=r.ghost();t.el.stopAnimation();t.setX(-10000);r.ghostBox=u;t.el.animate({from:o,to:u,listeners:{afteranimate:function(){delete t.componentLayout.lastComponentSize;r.unghost();delete r.ghostBox;p.removeCls(r.offsetsCls);r.onShowComplete(m,s)}}})}else{r.onShowComplete(m,s)}r.fireHierarchyEvent("show")},animate:function(N){var h=this,K,G,H,P,M,O,w,C,F,L,B,E,J,D,A,I;N=N||{};M=N.to||{};if(Ext.fx.Manager.hasFxBlock(h.id)){return h}K=Ext.isDefined(M.width);if(K){P=Ext.Number.constrain(M.width,h.minWidth,h.maxWidth)}G=Ext.isDefined(M.height);if(G){H=Ext.Number.constrain(M.height,h.minHeight,h.maxHeight)}if(!N.dynamic&&(K||G)){C=(N.from?N.from.width:undefined)||h.getWidth();F=C;L=(N.from?N.from.height:undefined)||h.getHeight();B=L;E=false;if(G&&H>L){B=H;E=true}if(K&&P>C){F=P;E=true}if(G||K){I=h.el.getStyle("overflow");if(I!=="hidden"){h.el.setStyle("overflow","hidden")}}if(E){O=!Ext.isNumber(h.width);w=!Ext.isNumber(h.height);h.setSize(F,B);h.el.setSize(C,L);if(O){delete h.width}if(w){delete h.height}}if(K){M.width=P}if(G){M.height=H}}J=h.constrain;D=h.constrainHeader;if(J||D){h.constrain=h.constrainHeader=false;A=N.callback;N.callback=function(){h.constrain=J;h.constrainHeader=D;if(A){A.call(N.scope||h,arguments)}if(I!=="hidden"){h.el.setStyle("overflow",I)}}}return h.mixins.animate.animate.apply(h,arguments)},applyScrollable:function(h,p){var j=this,m=j.rendered,o,q;if(h){if(h===true||typeof h==="string"){o=j._scrollableCfg[h];h=o}if(p){p.setConfig(h);h=p}else{h=Ext.Object.chain(h);if(m){h.element=j.getOverflowEl();q=j.getScrollerEl();if(q){h.innerElement=q}}h.autoRefresh=false;if(Ext.supports.touchScroll===1){h.translatable={translationMethod:"scrollparent"};h.indicators=false}h=Ext.scroll.Scroller.create(h);h.component=j}}else{if(p){p.setConfig({x:false,y:false});p.destroy();h=null}}if(j.rendered&&!j.destroying&&!j.destroyed){if(h){j.getOverflowStyle()}else{j.scrollFlags=j._scrollFlags.none}j.updateLayout()}return h},beforeComponentLayout:function(){return true},beforeDestroy:Ext.emptyFn,beforeLayout:function(){if(this.floating){this.onBeforeFloatLayout()}},beforeSetPosition:function(o,q,v){var r=this,p=null,t,u,w,s;if(o){if(Ext.isNumber(t=o[0])){v=q;q=o[1];o=t}else{if((t=o.x)!==undefined){v=q;q=o.y;o=t}}}if(r.constrain||r.constrainHeader){p=r.calculateConstrainedPosition(null,[o,q],true);if(p){o=p[0];q=p[1]}}u=(o!==undefined);w=(q!==undefined);if(u||w){r.x=o;r.y=q;s=r.adjustPosition(o,q);p={x:s.x,y:s.y,anim:v,hasX:u,hasY:w}}return p},beforeShow:Ext.emptyFn,bubble:function(j,f,g){var h=this;while(h){if(j.apply(f||h,g||[h])===false){break}h=h.getBubbleTarget()}return this},clearListeners:function(){var b=this;b.mixins.observable.clearListeners.call(b);b.mixins.componentDelegation.clearDelegatedListeners.call(b)},cloneConfig:function(j){j=j||{};var h=j.id||Ext.id(),g=Ext.applyIf(j,this.initialConfig),f;g.id=h;f=Ext.getClass(this);return new f(g)},destroy:function(){var p=this,s=p.renderSelectors,j=p.getConfig("viewModel",true),o=p.getConfig("session",true),m,q,r;if(!p.hasListeners.beforedestroy||p.fireEvent("beforedestroy",p)!==false){p.isDestroying=p.destroying=true;q=p.floatParent||p.ownerCt;if(p.floating){delete p.floatParent;if(p.zIndexManager){p.zIndexManager.unregister(p);p.zIndexManager=null}}p.removeBindings();p.beforeDestroy();p.destroyBindable();if(q&&q.remove){q.remove(p,false)}p.stopAnimation();p.onDestroy();Ext.destroy(p.plugins);if(p.rendered){Ext.Component.cancelLayout(p,true)}p.componentLayout=null;if(p.hasListeners.destroy){p.fireEvent("destroy",p)}if(!p.preventRegister){Ext.ComponentManager.unregister(p)}p.mixins.state.destroy.call(p);if(p.floating){p.onFloatDestroy()}p.clearListeners();if(p.rendered){if(!p.preserveElOnDestroy){p.el.destroy()}p.el.component=null;p.mixins.elementCt.destroy.call(p);if(s){for(m in s){if(s.hasOwnProperty(m)){r=p[m];if(r){delete p[m];r.destroy()}}}}p.data=p.el=p.frameBody=p.rendered=p.afterRenderEvents=null;p.tpl=p.renderTpl=p.renderData=null;p.focusableContainer=p.container=p.scrollable=null}p.isDestroying=p.destroying=false;p.callParent()}},disable:function(o,j){var m=this,g=m.focusableContainer,h=m.getInherited();if(!j){h.disabled=true;m.savedDisabled=true}if(m.maskOnDisable){h.disableMask=true}if(!m.disabled){if(g){g.beforeFocusableChildDisable(m)}m.addCls(m.disabledCls);if(m.rendered){m.onDisable()}else{m.disableOnRender=true}m.disabled=true;if(o!==true){m.fireEvent("disable",m)}if(g){g.onFocusableChildDisable(m)}}return m},doFireEvent:function(g,m,h){var j=this,o=j.mixins.observable.doFireEvent.call(j,g,m,h);if(o!==false){o=j.mixins.componentDelegation.doFireDelegatedEvent.call(j,g,m)}return o},enable:function(o,j){var m=this,g=m.focusableContainer,h=m.getInherited();if(!j){delete m.getInherited().disabled;m.savedDisabled=false}if(m.maskOnDisable){delete h.disableMask}if(m.disabled){if(!(j&&h.hasOwnProperty("disabled"))){if(g){g.beforeFocusableChildEnable(m)}m.disableOnRender=false;m.removeCls(m.disabledCls);if(m.rendered){m.onEnable()}m.disabled=false;if(o!==true){m.fireEvent("enable",m)}if(g){g.onFocusableChildEnable(m)}}}return m},findParentBy:function(d){var c;for(c=this.getRefOwner();c&&!d(c,this);c=c.getRefOwner()){}return c||null},findParentByType:function(b){return Ext.isFunction(b)?this.findParentBy(function(a){return a.constructor===b}):this.up(b)},findPlugin:function(h){var f,g=this.plugins,j=g&&g.length;for(f=0;f<j;f++){if(g[f].ptype===h){return g[f]}}},getAnimateTarget:function(b){b=b||this.animateTarget;if(b){b=b.isComponent?b.getEl():Ext.get(b)}return b||null},getBubbleTarget:function(){return this.getRefOwner()},getComponentLayout:function(){var b=this;if(!b.componentLayout||!b.componentLayout.isLayout){b.setComponentLayout(Ext.layout.Layout.create(b.componentLayout,"autocomponent"))}return b.componentLayout},getEl:function(){return this.el},getHeight:function(){return this.el.getHeight()},initInheritedState:function(f){var g=this,d=g.componentLayout;if(g.hidden){f.hidden=true}if(g.collapseImmune){f.collapseImmune=true}if(g.modelValidation!==undefined){f.modelValidation=g.modelValidation}if(g.savedDisabled){f.disabled=true}g.mixins.bindable.initInheritedState.call(g,f);if(d&&d.initInheritedState){d.initInheritedState(f)}},getId:function(){var d=this,c;if(!(d.id||(d.id=d.initialConfig.id))){c=d.getXType();if(c){c=c.replace(Ext.Component.INVALID_ID_CHARS_Re,"-")}else{c=Ext.name.toLowerCase()+"-comp"}d.id=c+"-"+d.getAutoId()}return d.id},getItemId:function(){return this.itemId||this.id},getLoader:function(){var c=this,d=c.loader;if(d){if(!d.isLoader){c.loader=new Ext.ComponentLoader(Ext.apply({target:c},d))}else{d.setTarget(c)}return c.loader}return null},getMaskTarget:function(){return this.maskElement?this[this.maskElement]:null},getPlugin:function(f){var j,g=this.plugins,h=g&&g.length;for(j=0;j<h;j++){if(g[j].pluginId===f){return g[j]}}return null},getPosition:function(h){var g=this,m,o=g.isContainedFloater(),j;if((h===true)&&!o){return[g.getLocalX(),g.getLocalY()]}m=g.getXY();if((h===true)&&o){j=g.floatParent.getTargetEl().getViewRegion();m[0]-=j.left;m[1]-=j.top}return m},getScrollX:function(){var b=this.getScrollable();return b?b.getPosition().x:0},getScrollY:function(){var b=this.getScrollable();return b?b.getPosition().y:0},getSize:function(b){return this.el.getSize(b)},getSizeModel:function(A){var N=this,J=Ext.layout.SizeModel,G=N.componentLayout.ownerContext,I=N.width,L=N.height,K,H,D,E,C,M,y,w,z,B,F=N.floating||N.floated;if(G){B=G.widthModel;C=G.heightModel}if(!B||!C){D=((K=typeof I)==="number");E=((H=typeof L)==="number");z=F||!(M=N.ownerLayout);if(z){y=Ext.layout.Layout.prototype.autoSizePolicy;w=F?3:N.shrinkWrap;if(D){B=J.configured}if(E){C=J.configured}}else{y=M.getItemSizePolicy(N,A);w=M.isItemShrinkWrap(N)}if(G){G.ownerSizePolicy=y}w=(w===true)?3:(w||0);if(z&&w){if(I&&K==="string"){w&=2}if(L&&H==="string"){w&=1}}if(w!==3){if(!A){A=N.ownerCt&&N.ownerCt.getSizeModel()}if(A){w|=(A.width.shrinkWrap?1:0)|(A.height.shrinkWrap?2:0)}}if(!B){if(!y.setsWidth){if(D){B=J.configured}else{B=(w&1)?J.shrinkWrap:J.natural}}else{if(y.readsWidth){if(D){B=J.calculatedFromConfigured}else{B=(w&1)?J.calculatedFromShrinkWrap:J.calculatedFromNatural}}else{B=J.calculated}}}if(!C){if(!y.setsHeight){if(E){C=J.configured}else{C=(w&2)?J.shrinkWrap:J.natural}}else{if(y.readsHeight){if(E){C=J.calculatedFromConfigured}else{C=(w&2)?J.calculatedFromShrinkWrap:J.calculatedFromNatural}}else{C=J.calculated}}}}return B.pairsByHeightOrdinal[C.ordinal]},getState:function(){var d=this,g=null,f=d.getSizeModel();if(f.width.configured){g=d.addPropertyToState(g,"width")}if(f.height.configured){g=d.addPropertyToState(g,"height")}return g},getUserCls:function(){return this.userCls},setUserCls:function(f){var d=this,g=d.userCls;if(f!==g){d.userCls=f;if(d.rendered){d.el.replaceCls(g,f)}}return g},getWidth:function(){return this.el.getWidth()},getXType:function(){return this.self.xtype},getXTypes:function(){var j=this.self,h,f,g;if(!j.xtypes){h=[];f=this;while(f){g=f.xtypes;if(g!==undefined){h.unshift.apply(h,g)}f=f.superclass}j.xtypeChain=h;j.xtypes=h.join("/")}return j.xtypes},hasCls:function(d){var c=this.rendered?this.el:this.protoEl;return c.hasCls.apply(c,arguments)},hasUICls:function(f){var d=this,g=d.uiCls||[];return Ext.Array.contains(g,f)},hide:function(h,g,f){var j=this;if(j.pendingShow){j.pendingShow=false}if(!(j.rendered&&!j.isVisible())){if(!j.hasListeners.beforehide||j.fireEvent("beforehide",j)!==false||j.hierarchicallyHidden){j.getInherited().hidden=j.hidden=true;j.fireHierarchyEvent("beforehide");if(j.rendered){j.onHide.apply(j,arguments)}}}return j},initComponent:function(){var g=this,d=g.width,f=g.height;if(g.plugins&&!g.plugins.processed){g.plugins=g.constructPlugins()}g.pluginsInitialized=true;if(d!=null||f!=null){g.setSize(d,f)}if(g.listeners){g.on(g.listeners);g.listeners=null}if(g.focusable){g.initFocusable()}},initEvents:function(){var q=this,o=q.afterRenderEvents,j,r,p,s,m;if(o){for(p in o){r=q[p];if(r&&r.on){j=o[p];for(s=0,m=j.length;s<m;++s){q.mon(r,j[s])}}}}if(q.focusable){q.initFocusableEvents()}},is:function(b){return Ext.ComponentQuery.is(this,b)},isDescendantOf:function(d){var c;for(c=this.getRefOwner();c&&c!==d;c=c.getRefOwner()){}return c||null},isAncestor:function(b){while(b){if(b.getRefOwner()===this){return true}b=b.getRefOwner()}},isDisabled:function(){return this.disabled},isDraggable:function(){return !!this.draggable},isDroppable:function(){return !!this.droppable},isFloating:function(){return this.floating},isHidden:function(){return this.hidden},isHierarchicallyHidden:function(){var h=this,j=false,g,f;for(;(g=h.ownerCt||h.floatParent);h=g){f=g.getInherited();if(f.hidden){j=true;break}if(h.getInherited().collapseImmune){if(g.collapsed&&!h.collapseImmune){j=true;break}}else{j=!!f.collapsed;break}}return j},isLayoutChild:function(b){return !this.floating&&!!this.up(b)},isLayoutRoot:function(){var d=this,c=d.ownerLayout;if(!c||d._isLayoutRoot||d.floating){return true}return c.isItemLayoutRoot(d)},isLayoutSuspended:function(){var d=this,c;while(d){if(d.layoutSuspendCount||d.suspendLayout){return true}c=d.ownerLayout;if(!c){break}d=c.owner}return false},isVisible:function(f){var d=this,g;if(d.hidden||!d.rendered||d.destroyed){g=true}else{if(f){g=d.isHierarchicallyHidden()}}return !g},isXType:function(c,d){return d?(Ext.Array.indexOf(this.xtypes,c)!==-1):!!this.xtypesMap[c]},isMasked:function(d){var c=this;return !!(c.masked||(c.loadMask&&c.loadMask.isVisible())||(d&&c.getInherited().masked))},setMasked:function(g){var d=this,f=d.focusableContainer;if(g){d.masked=true;d.getInherited().masked=g}else{d.masked=false;delete d.getInherited().masked}if(f){f.onFocusableChildMasked(d,g)}return d},mask:function(j,o,h){var g=this.lastBox,m=this.getMaskTarget()||this.el;if(g){h=g.height}m.mask(j,o,h);this.setMasked(true)},nextNode:function(t,p){var v=this,u=v.ownerCt,o,s,q,r,w;if(p&&v.is(t)){return v}if(u){for(s=u.items.items,r=Ext.Array.indexOf(s,v)+1,q=s.length;r<q;r++){w=s[r];if(w.is(t)){return w}if(w.down){o=w.down(t);if(o){return o}}}return u.nextNode(t)}return null},nextSibling:function(c){var o=this.ownerCt,q,p,j,m;if(o){q=o.items;j=q.indexOf(this)+1;if(j){if(c){for(p=q.getCount();j<p;j++){if((m=q.getAt(j)).is(c)){return m}}}else{if(j<q.getCount()){return q.getAt(j)}}}}return null},onAdded:function(f,h,g){var j=this;j.ownerCt=f;j.onInheritedAdd(j,g);if(j.hasListeners&&j.hasListeners.added){j.fireEvent("added",j,f,h)}if(Ext.GlobalEvents.hasListeners.added){j.fireHierarchyEvent("added")}},onRemoved:function(d){var f=this,g;if(Ext.GlobalEvents.hasListeners.removed){f.fireHierarchyEvent("removed")}if(f.hasListeners.removed){f.fireEvent("removed",f,f.ownerCt)}if(!d){f.removeBindings()}f.onInheritedRemove(d);f.ownerCt=f.ownerLayout=null},onBoxReady:function(j,g){var h=this,f;if(h.ariaLabelledBy||h.ariaDescribedBy){if(h.ariaLabelledBy){f=h.getAriaLabelEl(h.ariaLabelledBy);if(f){h.ariaEl.dom.setAttribute("aria-labelledby",f)}}if(h.ariaDescribedBy){f=h.getAriaLabelEl(h.ariaDescribedBy);if(f){h.ariaEl.dom.setAttribute("aria-describedby",f)}}}if(h.resizable){h.initResizable(h.resizable)}if(h.draggable){h.initDraggable()}if(h.hasListeners.boxready){h.fireEvent("boxready",h,j,g)}},onDestroy:function(){var c=this,d=c.focusableContainer;if(c.rendered){Ext.destroy(c.dd,c.resizer,c.proxy,c.proxyWrap,c.resizerComponent,c.scrollable,c.contentEl)}if(d){d.onFocusableChildDestroy(c)}if(c.focusable){c.destroyFocusable()}Ext.destroy(c.componentLayout,c.loadMask,c.floatingDescendants)},onDisable:function(){var f=this,d,g;if(f.focusable){f.disableFocusable()}if(!f.ariaStaticRoles[f.ariaRole]){f.ariaEl.dom.setAttribute("aria-disabled",true)}if(f.maskOnDisable&&!f.getInheritedConfig("disableMask",true)){d=f.el.dom;g=d.nodeName;if(f.disabledRe.test(g)){d.disabled=true}if(!f.nonMaskableRe.test(g)){f.mask()}}},onEnable:function(){var f=this,d,g;if(f.focusable){f.enableFocusable()}if(!f.ariaStaticRoles[f.ariaRole]){f.ariaEl.dom.setAttribute("aria-disabled",false)}if(f.maskOnDisable&&f.getInherited().hasOwnProperty("masked")){d=f.el.dom;g=d.nodeName;if(f.disabledRe.test(g)){d.disabled=false}if(!f.nonMaskableRe.test(g)){f.unmask()}}},onGlobalShow:function(b){if(this.up(b)){this.getScrollable().restoreState()}},onHide:function(o,m,q){var p=this,s,r,j;if(!p.ariaStaticRoles[p.ariaRole]){p.ariaEl.dom.setAttribute("aria-hidden",true)}p.revertFocus();o=p.getAnimateTarget(o);if(!p.ghost){o=null}if(o){j={x:o.getX(),y:o.getY(),width:o.dom.offsetWidth,height:o.dom.offsetHeight};s=p.ghost();s.el.stopAnimation();r=p.getSize();s.el.animate({to:j,listeners:{afteranimate:function(){delete s.componentLayout.lastComponentSize;s.el.hide();s.setHiddenState(true);s.el.setSize(r);p.afterHide(m,q)}}})}p.el.hide();if(!o){p.afterHide(m,q)}},onPosition:Ext.emptyFn,onResize:function(o,h,g,j){var m=this;if(m.floating&&m.constrain){m.doConstrain()}m.refreshScroll();if(m.hasListeners.resize){m.fireEvent("resize",m,o,h,g,j)}},onShow:function(){var b=this;if(!b.ariaStaticRoles[b.ariaRole]){b.ariaEl.dom.setAttribute("aria-hidden",false)}b.el.show();b.updateLayout({isRoot:false});if(b.floating){if(b.maximized){b.fitContainer()}else{if(b.constrain){b.doConstrain()}}}},onShowComplete:function(g,j){var h=this,f=h.focusableContainer;if(h.floating){h.onFloatShow()}Ext.callback(g,j||h);h.fireEvent("show",h);if(f){f.onFocusableChildShow(h)}delete h.hiddenByLayout},onShowVeto:Ext.emptyFn,previousNode:function(m,t){var p=this,q=p.ownerCt,o,r,s,u;if(t&&p.is(m)){return p}if(q){for(r=q.items.items,s=Ext.Array.indexOf(r,p)-1;s>-1;s--){u=r[s];if(u.query){o=u.query(m);o=o[o.length-1];if(o){return o}}if(u.is(m)){return u}}return q.previousNode(m,true)}return null},previousSibling:function(c){var m=this.ownerCt,o,h,j;if(m){o=m.items;h=o.indexOf(this);if(h!==-1){if(c){for(--h;h>=0;h--){if((j=o.getAt(h)).is(c)){return j}}}else{if(h){return o.getAt(--h)}}}}return null},registerFloatingItem:function(c){var d=this;if(!d.floatingDescendants){d.floatingDescendants=new Ext.ZIndexManager(d)}d.floatingDescendants.register(c)},removeCls:function(f){var g=this,d=g.rendered?g.el:g.protoEl;d.removeCls.apply(d,arguments);return g},removeClsWithUI:function(y,r){var s=this,t=[],v=0,B=Ext.Array,u=B.remove,w=s.uiCls=B.clone(s.uiCls),z=s.activeUI,A,q;if(typeof y==="string"){y=(y.indexOf(" ")<0)?[y]:Ext.String.splitWords(y)}A=y.length;for(v=0;v<A;v++){q=y[v];if(q&&s.hasUICls(q)){u(w,q);if(z){t=t.concat(s.removeUIClsFromElement(q))}}}if(r!==true&&z){s.removeCls(t)}return t},resumeLayouts:function(c){var d=this;if(!d.rendered){return}if(d.layoutSuspendCount&&!--d.layoutSuspendCount){d.suspendLayout=false;if(c&&!d.isLayoutSuspended()){d.updateLayout(c)}}},scrollBy:function(j,f,h){var g=this.getScrollable();if(g){g.scrollBy(j,f,h)}},scrollTo:function(f,h,j){var g=this.getScrollable();if(g){g.scrollTo(f,h,j)}},setAutoScroll:function(b){this.setScrollable(!!b);return this},setBorder:function(f,h){var j=this,g=!!h;if(j.rendered||g){if(!g){h=j.el}if(!f){f=0}else{if(f===true){f="1px"}else{f=this.unitizeBox(f)}}h.setStyle("border-width",f);if(!g){j.updateLayout()}}j.border=f},setDock:function(g){var d=this,f=d.ownerCt;if(g!==d.dock){if(f&&f.moveDocked){f.moveDocked(d,g)}else{d.dock=g}}return d},setDisabled:function(b){return this[b?"disable":"enable"]()},setFlex:function(b){this.flex=b},setHeight:function(b){return this.setSize(undefined,b)},setLoading:function(j,h){var f=this,g={target:f};if(f.rendered){if(j!==false){if(Ext.isString(j)){g.msg=j}else{Ext.apply(g,j)}if(!f.loadMask||!f.loadMask.isLoadMask){if(h&&g.useTargetEl==null){g.useTargetEl=true}f.loadMask=new Ext.LoadMask(g)}else{Ext.apply(f.loadMask,g)}if(f.loadMask.isVisible()){f.loadMask.syncMaskState()}else{f.loadMask.show()}}else{if(f.loadMask&&f.loadMask.isLoadMask){f.loadMask.hide()}}}return f.loadMask},setMargin:function(g,d){var f=this;if(f.rendered){if(!g&&g!==0){g=""}else{if(g===true){g=5}g=this.unitizeBox(g)}f.margin=g;f.margin$=null;f.getEl().setStyle("margin",g);if(!d){f.updateLayout(f._notAsLayoutRoot)}}else{f.margin=g}},setOverflowXY:function(c,d){this.setScrollable({x:(c&&c!=="hidden")?c:false,y:(d&&d!=="hidden")?d:false});return this},setPagePosition:function(j,m,h){var q=this,p,o;if(Ext.isArray(j)){m=j[1];j=j[0]}q.pageX=j;q.pageY=m;if(q.floating){if(q.isContainedFloater()){o=q.floatParent.getTargetEl().getViewRegion();if(Ext.isNumber(j)&&Ext.isNumber(o.left)){j-=o.left}if(Ext.isNumber(m)&&Ext.isNumber(o.top)){m-=o.top}}else{p=q.el.translateXY(j,m);j=p.x;m=p.y}q.setPosition(j,m,h)}else{p=q.el.translateXY(j,m);q.setPosition(p.x,p.y,h)}return q},setPosition:function(h,j,g){var o=this,m=o.beforeSetPosition.apply(o,arguments);if(m&&o.rendered){h=m.x;j=m.y;if(g){if(h!==o.getLocalX()||j!==o.getLocalY()){o.stopAnimation();o.animate(Ext.apply({duration:1000,listeners:{afteranimate:Ext.Function.bind(o.afterSetPosition,o,[h,j])},to:{left:h,top:j}},g))}}else{o.setLocalXY(h,j);o.afterSetPosition(h,j)}}return o},setScrollX:function(d,g){var f=this.getScrollable();if(f){f.scrollTo(d,null,g)}},setScrollY:function(g,d){var f=this.getScrollable();if(f){f.scrollTo(null,g,d)}},setSize:function(r,m){var q=this,j=q.width,o=q.height,p,s;if(r&&typeof r==="object"){m=r.height;r=r.width}if(typeof r==="number"){q.width=Ext.Number.constrain(r,q.minWidth,q.maxWidth)}else{if(r===null){delete q.width}else{if(typeof r==="string"){p=true;q.width=r}}}if(typeof m==="number"){q.height=Ext.Number.constrain(m,q.minHeight,q.maxHeight)}else{if(m===null){delete q.height}else{if(typeof m==="string"){s=true;q.height=m}}}if(q.rendered&&q.isVisible()){if(j!==q.width||o!==q.height){if(q.liquidLayout||p||s){q.el.setSize(q.width,q.height)}q.updateLayout(q._notAsLayoutRoot)}}return q},setStyle:function(g,d){var f=this.el||this.protoEl;f.setStyle(g,d);return this},setUI:function(o){var g=this,j=g.uiCls,m=g.activeUI,h;if(o===m){return}if(m){h=g.removeClsWithUI(j,true);if(h.length){g.removeCls(h)}g.removeUIFromElement()}else{g.uiCls=[]}g.ui=o;g.activeUI=o;g.addUIToElement();h=g.addClsWithUI(j,true);if(h.length){g.addCls(h)}if(g.rendered){g.updateLayout()}},setVisible:function(b){return this[b?"show":"hide"]()},setHidden:function(b){return this.setVisible(!b)},setWidth:function(b){return this.setSize(b)},show:function(m,h,g){var o=this,j=o.rendered;if(o.hierarchicallyHidden||(o.floating&&!j&&o.isHierarchicallyHidden())){if(!j){o.initHierarchyEvents()}if(arguments.length>1){arguments[0]=null;o.pendingShow=arguments}else{o.pendingShow=true}}else{if(j&&o.isVisible()){if(o.floating){o.onFloatShow()}}else{if(o.fireEvent("beforeshow",o)!==false){o.hidden=false;delete this.getInherited().hidden;Ext.suspendLayouts();if(!j&&(o.autoRender||o.floating)){o.doAutoRender();j=o.rendered}if(j){o.beforeShow();Ext.resumeLayouts();o.onShow.apply(o,arguments);o.afterShow.apply(o,arguments)}else{Ext.resumeLayouts(true)}}else{o.onShowVeto()}}}return o},showAt:function(g,h,f){var j=this;if(!j.rendered&&(j.autoRender||j.floating)){j.x=g;j.y=h;return j.show()}if(j.floating){j.setPosition(g,h,f)}else{j.setPagePosition(g,h,f)}return j.show()},showBy:function(f,h,j){var g=this;if(g.floating&&f){g.alignTarget=f;if(h){g.defaultAlign=h}if(j){g.alignOffset=j}g.show();if(!g.hidden){g.alignTo(f,h||g.defaultAlign,j||g.alignOffset)}}return g},suspendLayouts:function(){var b=this;if(!b.rendered){return}if(++b.layoutSuspendCount===1){b.suspendLayout=true}},unitizeBox:function(b){return Ext.Element.unitizeBox(b)},unmask:function(){(this.getMaskTarget()||this.el).unmask();this.setMasked(false)},unregisterFloatingItem:function(c){var d=this;if(d.floatingDescendants){d.floatingDescendants.unregister(c)}},up:function(r,q){var s=this.getRefOwner(),j=typeof q==="string",o=typeof q==="number",m=q&&q.isComponent,p=0;if(r){for(;s;s=s.getRefOwner()){p++;if(r.isComponent){if(s===r){return s}}else{if(Ext.ComponentQuery.is(s,r)){return s}}if(j&&s.is(q)){return}if(o&&p===q){return}if(m&&s===q){return}}}return s},update:function(y,u,r,A){var s=this,q=(s.tpl&&!Ext.isString(y)),t=s.getScrollable(),z=s.focusableContainer,v,B,w;if(q){s.data=(y&&y.isEntity)?y.getData(true):y}else{s.html=Ext.isObject(y)?Ext.DomHelper.markup(y):y}if(s.rendered){v=s.getSizeModel();B=v.width.shrinkWrap||v.height.shrinkWrap;if(s.isContainer){w=s.layout.getRenderTarget();B=B||s.items.items.length>0}else{w=s.touchScroll?s.getScrollerEl():s.getTargetEl()}if(q){s.tpl[s.tplWriteMode](w,s.data||{})}else{w.setHtml(s.html,u,r,A||s)}if(B){s.updateLayout()}if(t){t.refresh(true)}if(z){z.onFocusableChildUpdate(s)}}},setHtml:function(d,f,g){this.update(d,f,null,g)},applyData:function(b){this.update(b)},updateBox:function(b){this.setSize(b.width,b.height);this.setPagePosition(b.x,b.y);return this},_asLayoutRoot:{isRoot:true},_notAsLayoutRoot:{isRoot:false},updateLayout:function(o){var m=this,j,g=m.lastBox,h=o&&o.isRoot;if(g){g.invalid=true}if(!m.rendered||m.layoutSuspendCount||m.suspendLayout){return}if(m.hidden){Ext.Component.cancelLayout(m)}else{if(typeof h!=="boolean"){h=m.isLayoutRoot()}}if(h||!m.ownerLayout||!m.ownerLayout.onContentChange(m)){if(!m.isLayoutSuspended()){j=(o&&o.hasOwnProperty("defer"))?o.defer:m.deferLayouts;Ext.Component.updateLayout(m,j)}}},updateMaxHeight:function(c,d){this.changeConstraint(c,d,"min","max-height","height")},updateMaxWidth:function(c,d){this.changeConstraint(c,d,"min","max-width","width")},updateMinHeight:function(c,d){this.changeConstraint(c,d,"max","min-height","height")},updateMinWidth:function(d,c){this.changeConstraint(d,c,"max","min-width","width")},getAnchorToXY:function(h,g,j,f){return h.getAnchorXY(g,j,f)},getBorderPadding:function(){return this.el.getBorderPadding()},getLocalX:function(){return this.el.getLocalX()},getLocalXY:function(){return this.el.getLocalXY()},getLocalY:function(){return this.el.getLocalY()},getX:function(){return this.el.getX()},getXY:function(){return this.el.getXY()},getY:function(){return this.el.getY()},setLocalX:function(b){this.el.setLocalX(b)},setLocalXY:function(d,c){this.el.setLocalXY(d,c)},setLocalY:function(b){this.el.setLocalY(b)},setX:function(d,c){this.el.setX(d,c)},setXY:function(c,d){this.el.setXY(c,d)},setY:function(c,d){this.el.setY(c,d)},privates:{addOverCls:function(){var b=this;if(!b.disabled){b.el.addCls(b.overCls)}},addUIToElement:function(){var p=this,j=p.baseCls+"-"+p.ui,q,m,h,o;p.addCls(j);if(p.rendered&&p.frame&&!Ext.supports.CSS3BorderRadius){j+="-";q=p.getChildEls();for(m in q){o=q[m].frame;if(o&&o!==true){h=p[m];if(h){h.addCls(j+o)}}}}},changeConstraint:function(o,s,m,q,j){var p=this,r=p[j];if(o!=null&&typeof r==="number"){p[j]=Math[m](r,o)}if(p.liquidLayout){if(o!=null){p.setStyle(q,o+"px")}else{if(s){p.setStyle(q,"")}}}if(p.rendered){p.updateLayout()}},constructPlugin:function(c){var d=this;if(typeof c==="string"){c=Ext.PluginManager.create({},c,d)}else{c=Ext.PluginManager.create(c,null,d)}return c},constructPlugins:function(){var j=this,o=j.plugins,g,m,h;if(o){g=[];g.processed=true;if(!Ext.isArray(o)){o=[o]}for(m=0,h=o.length;m<h;m++){g[m]=j.constructPlugin(o[m])}}j.pluginsInitialized=true;return g},detachFromBody:function(){Ext.getDetachedBody().appendChild(this.el);Ext.Component.cancelLayout(this);this.isDetached=true},doAddListener:function(D,v,u,H,F,G,C){var w=this,y,A,E,t,B,z;if(Ext.isObject(v)||(H&&H.element)){if(H.element){t=H.element;y={};y[D]=v;if(u){y.scope=u}E=w.$elementEventOptions;for(A in H){if(E[A]){y[A]=H[A]}}}else{y=v;t=D}B=w[t];if(B&&B.isObservable){w.mon(B,y)}else{w.afterRenderEvents=w.afterRenderEvents||{};if(!w.afterRenderEvents[t]){w.afterRenderEvents[t]=[]}w.afterRenderEvents[t].push(y)}return}if(H){z=H.delegate;if(z){w.mixins.componentDelegation.addDelegatedListener.call(w,D,v,u,H,F,G,C);return}}w.mixins.observable.doAddListener.call(w,D,v,u,H,F,G,C)},doRemoveListener:function(g,j,f){var h=this;h.mixins.observable.doRemoveListener.call(h,g,j,f);h.mixins.componentDelegation.removeDelegatedListener.call(h,g,j,f)},fireHierarchyEvent:function(c){var d=Ext.GlobalEvents;if(d.hasListeners[c]){d.fireEvent(c,this)}},getActionEl:function(){return this.el},getAutoId:function(){this.autoGenId=true;return ++Ext.Component.AUTO_ID},getContentTarget:function(){return this.el},getDragEl:function(){return this.el},getOverflowEl:function(){return this.getTargetEl()},getOverflowStyle:function(){var p=this,h=p.getScrollable(),q=p._scrollFlags,j,m,o;if(h){j=h.getX();if(j===true){j="auto"}m=h.getY();if(m===true){m="auto"}o=q[j][m]}else{o=q.none}p.scrollFlags=o;return{overflowX:o.overflowX,overflowY:o.overflowY}},getPlugins:function(){var b=this.plugins;b=(b&&b.processed)?b:this.constructPlugins();return b||null},getProxy:function(){var d=this,c;if(!d.proxy){c=Ext.getBody();d.proxy=d.el.createProxy("x-proxy-el",c,true)}return d.proxy},getScrollerEl:function(){var b=this;return b.scrollerEl||(b.scrollerEl=b.componentLayout.getScrollerEl()||b.getOverflowEl().child(b.scrollerSelector))},getTargetEl:function(){return this.frameBody||this.el},getTdCls:function(){return"x-"+this.getTdType()+"-"+this.ui+"-cell"},getTdType:function(){return this.xtype},getTpl:function(b){return Ext.XTemplate.getTpl(this,b)},initCls:function(){var d=this,f=[d.baseCls],g=d.getComponentLayout().targetCls;if(g){f.push(g)}if(d.componentCls){f.push(d.componentCls)}else{d.componentCls=d.baseCls}return f},initDraggable:function(){var g=this,f=(g.resizer&&g.resizer.el!==g.el)?g.resizerComponent=new Ext.Component({el:g.resizer.el,rendered:true,container:g.container}):g,d=Ext.applyIf({el:f.getDragEl(),constrainTo:(g.constrain||g.draggable.constrain)?(g.constrainTo||(g.floatParent?g.floatParent.getTargetEl():g.container)):undefined},g.draggable);if(g.constrain||g.constrainDelegate){d.constrain=g.constrain;d.constrainDelegate=g.constrainDelegate}g.dd=new Ext.util.ComponentDragger(f,d)},initPadding:function(g){var f=this,d=f.padding;if(d!=null){if(f.touchScroll||(f.layout&&f.layout.managePadding&&f.contentPaddingProperty==="padding")){g.setStyle("padding",0)}else{g.setStyle("padding",this.unitizeBox((d===true)?5:d))}}},initPlugin:function(b){b.init(this);return b},initResizable:function(d){var c=this;d=Ext.apply({target:c,dynamic:false,constrainTo:(c.constrain||(d&&d.constrain))?(c.constrainTo||(c.floatParent?c.floatParent.getTargetEl():c.container)):undefined,handles:c.resizeHandles},d);d.target=c;c.resizer=new Ext.resizer.Resizer(d)},initStyles:function(r){var v=this,y=v.margin,w=v.border,q=v.cls,B=v.style,t=v.x,u=v.y,z=v.liquidLayout,A,s;v.initPadding(r);if(y!=null){r.setStyle("margin",this.unitizeBox((y===true)?5:y))}if(w!=null){v.setBorder(w,r)}if(q&&q!==v.initialCls){r.addCls(q);v.cls=v.initialCls=null}if(B&&B!==v.initialStyle){r.setStyle(B);v.style=v.initialStyle=null}if(t!=null){r.setStyle(v.horizontalPosProp,(typeof t==="number")?(t+"px"):t)}if(u!=null){r.setStyle("top",(typeof u==="number")?(u+"px"):u)}if(!v.ownerCt||v.floating){if(Ext.scopeCss){r.addCls(v.rootCls)}r.addCls(v.borderBoxCls)}if(z||!v.getFrameInfo()){A=v.width;s=v.height;if(A!=null){if(typeof A==="number"){r.setStyle("width",A+"px")}else{r.setStyle("width",A)}}if(s!=null){if(typeof s==="number"){r.setStyle("height",s+"px")}else{r.setStyle("height",s)}}}},isContainedFloater:function(){return(this.floating&&this.floatParent)},isDescendant:function(d){if(d.isContainer){for(var c=this.ownerCt;c;c=c.ownerCt){if(c===d){return true}}}return false},owns:function(d){var f=false,g;if(d.isEvent){d=d.target}else{if(d.isElement){d=d.dom}}g=Ext.Component.fromElement(d);if(g){f=(g===this)||(!!g.up(this))}return f},parseBox:function(b){return Ext.Element.parseBox(b)},reattachToBody:function(){this.isDetached=false},refreshScroll:function(){var b=this.getScrollable();if(b){b.refresh()}},removeManagedListenerItem:function(m,o,p,t,r,s){var q=this,u=o.options?o.options.element:null;if(u){u=q[u];if(u&&u.un){if(m||(o.item===p&&o.ename===t&&(!r||o.fn===r)&&(!s||o.scope===s))){u.un(o.ename,o.fn,o.scope);if(!m){Ext.Array.remove(q.managedListeners,o)}}}}else{return q.mixins.observable.removeManagedListenerItem.apply(q,arguments)}},removeOverCls:function(){this.el.removeCls(this.overCls)},removePlugin:function(b){Ext.Array.remove(this.plugins,b);b.destroy()},removeUIFromElement:function(){var p=this,j=p.baseCls+"-"+p.ui,q,m,h,o;p.removeCls(j);if(p.rendered&&p.frame&&!Ext.supports.CSS3BorderRadius){j+="-";q=p.getChildEls();for(m in q){o=q[m].frame;if(o&&o!==true){h=p[m];if(h){h.removeCls(j+o)}}}}},setComponentLayout:function(c){var d=this.componentLayout;if(d&&d.isLayout&&d!==c){d.setOwner(null)}this.componentLayout=c;c.setOwner(this)},setHiddenState:function(h){var j=this,f=j.getInherited(),g=j.zIndexManager;j.hidden=h;if(h){f.hidden=true}else{delete f.hidden}if(g){g.onComponentShowHide(j)}},setupProtoEl:function(){var b=this.initCls();this.protoEl.addCls(b)},wrapPrimaryEl:function(g){var d=this,f=d.el;if(!f||!f.isElement){d.el=Ext.get(g)}if(d.floating){this.mixins.floating.constructor.call(this)}}},deprecated:{5:{methods:{addClass:"addCls",doComponentLayout:function(){this.updateLayout();return this},removeClass:"removeCls",forceComponentLayout:"updateLayout",setDocked:"setDock"}}}},1,["component","box"],["component","box"],{component:true,box:true},["widget.box","widget.component"],[[Ext.mixin.Inheritable.prototype.mixinId||Ext.mixin.Inheritable.$className,Ext.mixin.Inheritable],[Ext.util.Floating.prototype.mixinId||Ext.util.Floating.$className,Ext.util.Floating],[Ext.util.Positionable.prototype.mixinId||Ext.util.Positionable.$className,Ext.util.Positionable],[Ext.util.Observable.prototype.mixinId||Ext.util.Observable.$className,Ext.util.Observable],[Ext.mixin.ComponentDelegation.prototype.mixinId||Ext.mixin.ComponentDelegation.$className,Ext.mixin.ComponentDelegation],[Ext.mixin.Bindable.prototype.mixinId||Ext.mixin.Bindable.$className,Ext.mixin.Bindable],[Ext.util.Animate.prototype.mixinId||Ext.util.Animate.$className,Ext.util.Animate],[Ext.util.ElementContainer.prototype.mixinId||Ext.util.ElementContainer.$className,Ext.util.ElementContainer],[Ext.util.Renderable.prototype.mixinId||Ext.util.Renderable.$className,Ext.util.Renderable],[Ext.state.Stateful.prototype.mixinId||Ext.state.Stateful.$className,Ext.state.Stateful],[Ext.util.Focusable.prototype.mixinId||Ext.util.Focusable.$className,Ext.util.Focusable],[Ext.mixin.Accessible.prototype.mixinId||Ext.mixin.Accessible.$className,Ext.mixin.Accessible],[Ext.util.KeyboardInteractive.prototype.mixinId||Ext.util.KeyboardInteractive.$className,Ext.util.KeyboardInteractive]],[Ext,"Component",Ext,"AbstractComponent"],function(c){var d=c.prototype;(d.$elementEventOptions=Ext.Object.chain(Ext.Element.prototype.$eventOptions)).element=1;(d.$eventOptions=Ext.Object.chain(d.$eventOptions)).delegate=1;c.createAlias({on:"addListener",prev:"previousSibling",next:"nextSibling"});Ext.resumeLayouts=function(a){c.resumeLayouts(a)};Ext.suspendLayouts=function(){c.suspendLayouts()};Ext.batchLayouts=function(a,b){c.suspendLayouts();a.call(b);c.resumeLayouts(true)};Ext.setGlyphFontFamily=function(a){Ext._glyphFontFamily=a};c.hierarchyEventSource=d.hierarchyEventSource=Ext.GlobalEvents;Ext.onReady(function(){if(Ext.supports.HighContrastMode){Ext.getBody().addCls(c.ariaHighContrastModeCls)}})}));Ext.define("Ext.layout.container.border.Region",{override:"Ext.Component",initBorderRegion:function(){var b=this;if(!b._borderRegionInited){b._borderRegionInited=true;b.addStateEvents(["changeregion","changeweight"]);Ext.override(b,{getState:function(){var a=b.callParent();a=b.addPropertyToState(a,"region");a=b.addPropertyToState(a,"weight");return a}})}},getOwningBorderContainer:function(){var b=this.getOwningBorderLayout();return b&&b.owner},getOwningBorderLayout:function(){var b=this.ownerLayout;return(b&&b.isBorderLayout)?b:null},setRegion:function(v){var w=this,D,C=w.region;if(v!==C){D=w.getOwningBorderLayout();if(D){var A=D.regionFlags[v],u=w.placeholder,F=w.splitter,E=D.owner,s=D.regionMeta,B=w.collapsed||w.floated,t,y,z;if(w.fireEventArgs("beforechangeregion",[w,v])===false){return C}Ext.suspendLayouts();w.region=v;Ext.apply(w,A);if(w.updateCollapseTool){w.updateCollapseTool()}if(F){Ext.apply(F,A);F.updateOrientation();y=E.items;z=y.indexOf(w);if(z>=0){t=s[v].splitterDelta;if(y.getAt(z+t)!==F){y.remove(F);z=y.indexOf(w);if(t>0){++z}y.insert(z,F)}}}if(u){if(B){w.expand(false)}E.remove(u);w.placeholder=null;if(B){w.collapse(null,false)}}E.updateLayout();Ext.resumeLayouts(true);w.fireEventArgs("changeregion",[w,C])}else{w.region=v}}return C},setWeight:function(m){var o=this,g=o.getOwningBorderContainer(),j=o.placeholder,h=o.weight;if(m!==h){if(o.fireEventArgs("beforechangeweight",[o,m])!==false){o.weight=m;if(j){j.weight=m}if(g){g.updateLayout()}o.fireEventArgs("changeweight",[o,h])}}return h}},function(d){var c=d.prototype;c.setBorderRegion=c.setRegion;c.setRegionWeight=c.setWeight});Ext.define("Ext.theme.neptune.Component",{override:"Ext.Component",initComponent:function(){arguments.callee.$previous.call(this);if(this.dock&&this.border===undefined){this.border=false}},privates:{initStyles:function(){var g=this,d=g.hasOwnProperty("border"),f=g.border;if(g.dock){g.border=null}arguments.callee.$previous.apply(this,arguments);if(d){g.border=f}else{delete g.border}}}},function(){Ext.namespace("Ext.theme.is").Neptune=true;Ext.theme.name="Neptune"});Ext.define("Ext.theme.triton.Component",{override:"Ext.Component"},function(){Ext.namespace("Ext.theme.is").Triton=true;Ext.theme.name="Triton"});Ext.define("Ext.overrides.app.domain.Component",{override:"Ext.app.domain.Component"},function(b){b.monitor(Ext.Component)});(Ext.cmd.derive("Ext.app.EventBus",Ext.Base,{singleton:true,constructor:function(){var c=this,d=Ext.app.EventDomain.instances;c.callParent();c.domains=d;c.bus=d.component.bus},control:function(c,d){return this.domains.component.listen(c,d)},listen:function(h,f){var g=this.domains,j;for(j in h){if(h.hasOwnProperty(j)){g[j].listen(h[j],f)}}},unlisten:function(g){var f=Ext.app.EventDomain.instances,d;for(d in f){f[d].unlisten(g)}}},1,0,0,0,0,0,[Ext.app,"EventBus"],0));(Ext.cmd.derive("Ext.app.domain.Global",Ext.app.EventDomain,{singleton:true,type:"global",constructor:function(){var b=this;b.callParent();b.monitor(Ext.GlobalEvents)},listen:function(c,d){this.callParent([{global:c},d])},match:Ext.returnTrue},1,0,0,0,0,0,[Ext.app.domain,"Global"],0));(Ext.cmd.derive("Ext.app.BaseController",Ext.Base,{isController:true,config:{id:null,control:null,listen:null,routes:null,before:null},constructor:function(d){var c=this;Ext.apply(c,d);delete c.control;delete c.listen;c.eventbus=Ext.app.EventBus;c.mixins.observable.constructor.call(c,d);c.ensureId()},applyListen:function(b){if(Ext.isObject(b)){b=Ext.clone(b)}return b},applyControl:function(b){if(Ext.isObject(b)){b=Ext.clone(b)}return b},updateControl:function(b){this.ensureId();if(b){this.control(b)}},updateListen:function(b){this.ensureId();if(b){this.listen(b)}},updateRoutes:function(j){if(j){var q=this,p=q.getBefore()||{},m=Ext.app.route.Router,r,s,o;for(r in j){s=j[r];if(Ext.isString(s)){s={action:s}}o=s.action;if(!s.before){s.before=p[o]}m.connect(r,s,q)}}},isActive:function(){return true},control:function(h,q,j){var p=this,o=j,m;if(Ext.isString(h)){m={};m[h]=q}else{m=h;o=q}p.eventbus.control(m,o||p)},listen:function(c,d){this.eventbus.listen(c,d||this)},destroy:function(){var c=this,d=c.eventbus;Ext.app.route.Router.disconnectAll(c);if(d){d.unlisten(c);c.eventbus=null}c.callParent()},redirectTo:function(d,g){if(d.isModel){d=d.toUrl()}if(!g){var f=Ext.util.History.getToken();if(f===d){return false}}else{Ext.app.route.Router.onStateChange(d)}Ext.util.History.add(d);return true}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.app,"BaseController"],0));(Ext.cmd.derive("Ext.app.Util",Ext.Base,{},0,0,0,0,0,0,[Ext.app,"Util"],function(){Ext.apply(Ext.app,{namespaces:{Ext:{}},addNamespaces:function(j){var h=Ext.app.namespaces,f,g;if(!Ext.isArray(j)){j=[j]}for(f=0,g=j.length;f<g;f++){h[j[f]]=true}},clearNamespaces:function(){Ext.app.namespaces={}},getNamespace:function(f){var h=Ext.apply({},Ext.ClassManager.paths,Ext.app.namespaces),g="",j;for(j in h){if(h.hasOwnProperty(j)&&j.length>g.length&&(j+"."===f.substring(0,j.length+1))){g=j}}return g===""?undefined:g},setupPaths:function(h,g,j){var m=Ext.manifest,o;if(h&&g!==null){m=m&&m.paths;if(!m||g!==undefined){Ext.Loader.setPath(h,(g===undefined)?"app":g)}}if(j){for(o in j){if(j.hasOwnProperty(o)){Ext.Loader.setPath(o,j[o])}}}}});Ext.getNamespace=Ext.app.getNamespace}));(Ext.cmd.derive("Ext.util.CollectionKey",Ext.Base,{isCollectionKey:true,observerPriority:-200,config:{collection:null,keyFn:null,property:null,rootProperty:null,unique:true},generation:0,map:null,mapRebuilds:0,constructor:function(b){this.initConfig(b)},get:function(d){var c=this.map||this.getMap();return c[d]||null},clear:function(){this.map=null},getRootProperty:function(){var c=this,d=(arguments.callee.$previous||Ext.Base.prototype.getRootProperty).call(this);return d!==null?d:c.getCollection().getRootProperty()},indexOf:function(q,u){var z=this.map||this.getMap(),p=z[q],t=this.getCollection(),y=t.length,v,s,r,w;if(!p){return -1}if(u===undefined){u=-1}if(p instanceof Array){r=p;s=y;for(w=r.length;w-->0;){v=t.indexOf(r[w]);if(v<s&&v>u){s=v}}if(s===y){return -1}}else{s=t.indexOf(p)}return(s>u)?s:-1},updateKey:function(q,o){var h=this,p=h.map,m,j;if(p){m=p[o];if(m instanceof Array){j=Ext.Array.indexOf(m,q);if(j>=0){if(m.length>2){m.splice(j,1)}else{p[o]=m[1-j]}}}else{if(m){delete p[o]}}h.add([q])}},onCollectionAdd:function(c,d){if(this.map){this.add(d.items)}},onCollectionItemChange:function(c,d){this.map=null},onCollectionRefresh:function(){this.map=null},onCollectionRemove:function(s,t){var q=this,w=q.map,r=t.items,v=r.length,u,o,p;if(w){if(q.getUnique()&&v<s.length/2){for(u=0;u<v;++u){p=q.getKey(o=r[u]);delete w[p]}}else{q.map=null}}},add:function(r){var q=this,w=q.map,v,s,o,p,u,t;u=r.length;t=q.getUnique();for(s=0;s<u;++s){p=q.getKey(o=r[s]);if(t||!(p in w)){w[p]=o}else{if(!((v=w[p]) instanceof Array)){w[p]=v=[v]}v.push(o)}}},applyKeyFn:function(b){if(Ext.isString(b)){this.getKey=function(a){return a[b]()}}else{this.getKey=b}},updateProperty:function(c){var d=this.getRootProperty();this.getKey=function(a){return(d?a[d]:a)[c]}},getMap:function(){var d=this,c=d.map;if(!c){d.map=c={};d.keysByItemKey={};++d.mapRebuilds;d.add(d.getCollection().items)}return c},updateCollection:function(b){b.addObserver(this)},clone:function(){return new Ext.util.CollectionKey(this.getCurrentConfig())}},1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.util,"CollectionKey"],0));(Ext.cmd.derive("Ext.util.Grouper",Ext.util.Sorter,{isGrouper:true,config:{groupFn:null,sortProperty:null},constructor:function(b){Ext.util.Sorter.prototype.constructor.apply(this,arguments)},getGroupString:function(d){var c=this._groupFn(d);return(c!=null)?String(c):""},sortFn:function(t,u){var r=this,v=r._groupFn(t),s=r._groupFn(u),o=r._sortProperty,p=r._root,q=r._sorterFn,w=r._transform;if(v===s){return 0}if(o||q){if(q){return q.call(this,t,u)}if(p){t=t[p];u=u[p]}v=t[o];s=u[o];if(w){v=w(v);s=w(s)}}return(v>s)?1:(v<s?-1:0)},standardGroupFn:function(c){var d=this._root;return(d?c[d]:c)[this._property]},updateSorterFn:function(){},updateProperty:function(){if(!this.getGroupFn()){this.setGroupFn(this.standardGroupFn)}}},1,0,0,0,0,0,[Ext.util,"Grouper"],0));(Ext.cmd.derive("Ext.util.Collection",Ext.Base,{isCollection:true,config:{autoFilter:true,autoSort:true,autoGroup:true,decoder:null,extraKeys:null,filters:null,grouper:null,groups:null,rootProperty:null,sorters:null,multiSortLimit:3,defaultSortDirection:"ASC",source:null,trackGroups:true},generation:0,indices:null,indexRebuilds:0,updating:0,grouped:false,sorted:false,filtered:false,$endUpdatePriority:1001,constructor:function(d){var c=this;c.items=[];c.map={};c.length=0;if(d&&d.keyFn){c.getKey=d.keyFn}c.mixins.observable.constructor.call(c,d)},destroy:function(){var j=this,f=j._filters,h=j._sorters,g=j._groups;if(f){f.destroy();j._filters=null}if(h){h.destroy();j._sorters=null}if(g){g.destroy();j._groups=null}j.setSource(null);j.observers=j.items=j.map=null;j.callParent()},add:function(h){var j=this,g=j.decodeItems(arguments,0),f=g;if(g.length){j.requestedIndex=j.length;j.splice(j.length,0,g);delete j.requestedIndex;f=(g.length===1)?g[0]:g}return f},replaceAll:function(){var g=this,d,f;f=g.decodeItems(arguments,0);d=f;if(f.length){g.splice(0,g.length,f);d=(f.length===1)?f[0]:f}else{g.removeAll()}return d},aggregate:function(o,j,q,m,r){var p=this,s=Ext.Array.slice(arguments);s.unshift(p.items);return p.aggregateItems.apply(p,s)},aggregateByGroup:function(h,f,j){var g=this.getGroups();return this.aggregateGroups(g,h,f,j)},aggregateItems:function(z,J,E,H,D,I){var y=this,A=Ext.Number.clipIndices(z.length,[H,D]),G=(H!==0&&D!==z.length),B,C,F,w,L,K,j;H=A[0];D=A[1];if(!Ext.isFunction(E)){E=y._aggregators[E];return E.call(y,z,H,D,J,y.getRootProperty())}w=y.getRootProperty();K=new Array(F);j=G?new Array(F):z;for(B=H,C=0;B<D;++B,C++){if(G){j[C]=L=z[B]}K[C]=(w?L[w]:L)[J]}return E.call(I||y,z,K,0)},aggregateGroups:function(B,s,z,r){var u=B.items,v=u.length,A=!Ext.isFunction(z),y={},w,t,q;for(w=0;w<v;++w){t=u[w];if(!A){q=this.aggregateItems(t.items,s,z,null,null,r)}else{q=t[z](s)}y[t.getGroupKey()]=q}return y},beginUpdate:function(){if(!this.updating++){this.notify("beginupdate")}},clear:function(){var o=this,m=o.generation,h=m?o.items:[],g,j;if(m){o.items=[];o.length=0;o.map={};o.indices={};o.generation++;g=o.getExtraKeys();if(g){for(j in g){g[j].clear()}}}return h},clone:function(){var d=this,c=new d.self(d.initialConfig);c.add(d.items);return c},collect:function(p,t,r){var u=this.items,y=u.length,z={},v=[],w,s,q;for(w=0;w<y;++w){q=u[w];q=(t?q[t]:q)[p];s=String(q);if((r||!Ext.isEmpty(q))&&!z[s]){z[s]=1;v.push(q)}}return v},contains:function(g){var f=false,d;if(g!=null){d=this.getKey(g);f=this.map[d]===g}return f},containsKey:function(b){return b in this.map},createFiltered:function(t,u,C,y,D){var z=this,B=new z.self(z.initialConfig),v=z.getRootProperty(),A=z.items,F,E,G,w,H;if(Ext.isFunction(t)){w=t;H=u}else{if(Ext.isString(t)){G=[new Ext.util.Filter({property:t,value:u,root:v,anyMatch:C,caseSensitive:y,exactMatch:D})]}else{if(t instanceof Ext.util.Filter){G=[t];t.setRoot(v)}else{if(Ext.isArray(t)){G=t.slice(0);for(E=0,F=G.length;E<F;++E){G[E].setRoot(v)}}}}w=Ext.util.Filter.createFilterFn(G)}H=H||z;for(E=0,F=A.length;E<F;E++){if(w.call(H,A[E])){B.add(A[E])}}return B},filterBy:function(c,d){return this.createFiltered(c,d)},each:function(m,o){var h=this.items,j=h.length,p,q;if(j){o=o||this;h=h.slice(0);for(p=0;p<j;p++){q=m.call(o,h[p],p,j);if(q===false){break}}}return q},eachKey:function(r,o){var s=this,t=s.items,v=t.length,w,p,q,u;if(v){o=o||s;t=t.slice(0);for(w=0;w<v;w++){q=s.getKey(p=t[w]);u=r.call(o,q,p,w,v);if(u===false){break}}}return u},endUpdate:function(){if(!--this.updating){this.notify("endupdate")}},find:function(q,r,p,t,u,m){if(Ext.isEmpty(r,false)){return null}var s=Ext.String.createRegex(r,t,u,m),o=this.getRootProperty();return this.findBy(function(a){return a&&s.test((o?a[o]:a)[q])},null,p)},findBy:function(r,o,w){var s=this,t=s.items,u=t.length,v,p,q;o=o||s;for(v=w||0;v<u;v++){q=s.getKey(p=t[v]);if(r.call(o,p,q)){return t[v]}}return null},findIndex:function(p,q,o,s,j,m){var r=this.find(p,q,o,s,j,m);return r?this.indexOf(r):-1},findIndexBy:function(f,g,h){var j=this.findBy(f,g,h);return j?this.indexOf(j):-1},first:function(c){var d=c?this.getGroups():undefined;return d?this.aggregateGroups(d,null,"first"):this.items[0]},last:function(c){var d=c?this.getGroups():undefined;return d?this.aggregateGroups(d,null,"last"):this.items[this.length-1]},get:function(b){return this.map[b]},getAt:function(b){return this.items[b]},getByKey:function(b){return this.map[b]},getCount:function(){return this.length},getKey:function(d){var c=d.id;return(c===0||c)?c:((c=d._id)===0||c)?c:d.getId()},getRange:function(m,h){var o=this.items,j=o.length,g;if(!j){g=[]}else{g=Ext.Number.clipIndices(j,[m,h]);g=o.slice(g[0],g[1])}return g},getValues:function(o,q,w,v){var r=this.items,t=Ext.Number.clipIndices(r.length,[w,v]),s=[],u,p;for(u=t[0],v=t[1];u<v;++u){p=r[u];p=(q?p[q]:p)[o];s.push(p)}return s},indexOf:function(c){if(!c){return -1}var d=this.getKey(c);return this.indexOfKey(d)},indexOfKey:function(f){var d=this,g=d.indices;if(f in d.map){if(!g){g=d.getIndices()}return g[f]}return -1},insert:function(o,j){var m=this,h=m.decodeItems(arguments,1),g=h;if(h.length){m.requestedIndex=o;m.splice(o,0,h);delete m.requestedIndex;g=(h.length===1)?h[0]:h}return g},itemChanged:function(C,Q,L,J){var M=this,V=L===0||!!L,P=M.filtered&&M.getAutoFilter(),T=false,U=0,H=M.items,N=M.length-1,X=M.sorted&&N>0&&M.getAutoSort(),F=M.getSource(),G=0,O=false,I=false,D,E,S,K,R,W;if(F&&!F.updating){F.itemChanged(C,Q,L,J)}else{E=M.getKey(C);if(P){R=M.indexOfKey(V?L:E);I=(R<0);O=M.isItemFiltered(C);T=(I!==O)}if(T){if(O){G=[C];W=-1}else{K=[C];W=M.length}}else{if(X&&!O){if(!P){R=M.indexOfKey(V?L:E)}S=M.getSortFn();if(R!==-1){if(R&&S(H[R-1],H[R])>0){U=-1;W=Ext.Array.binarySearch(H,C,0,R,S)}else{if(R<N&&S(H[R],H[R+1])>0){U=1;W=Ext.Array.binarySearch(H,C,R+1,S)}}if(U){K=[C]}}}}D={item:C,key:E,index:W,filterChanged:T,keyChanged:V,indexChanged:!!U,filtered:O,oldIndex:R,newIndex:W,wasFiltered:I,meta:J};if(V){D.oldKey=L}if(Q){D.modified=Q}M.beginUpdate();M.notify("beforeitemchange",[D]);if(V){M.updateKey(C,L)}if(K||G){M.splice(W,G,K)}if(U>0){D.newIndex--}else{if(U<0){D.oldIndex++}}M.notify(O?"filtereditemchange":"itemchange",[D]);M.endUpdate()}},remove:function(h){var j=this,g=j.decodeRemoveItems(arguments,0),f=j.length;j.splice(0,g);return f-j.length},removeAll:function(){var c=this,d=c.length;if(c.generation&&d){c.splice(0,d)}return c},removeAt:function(r,s){var q=this,y=q.length,u=Ext.Number,v=u.clipIndices(y,[r,(s===undefined)?1:s],u.Clip.COUNT),w=v[0],z=v[1]-w,p=(z===1)&&q.getAt(w),t;q.splice(w,z);t=q.length-y;return(p&&t)?p:t},removeByKey:function(d){var c=this.getByKey(d);if(!c||!this.remove(c)){return false}return c},replace:function(c){var d=this.indexOf(c);if(d===-1){this.add(c)}else{this.insert(d,c)}},splice:function(ad,au,af){var av=this,aB=av.sorted&&av.getAutoSort(),ah=av.map,ap=av.items,ar=av.length,al=(au instanceof Array)?av.decodeRemoveItems(au):null,ak=!al,ac=Ext.Number,aA=ac.clipIndices(ar,[ad,ak?au:0],ac.Clip.COUNT),ay=aA[0],aw=aA[1],W=aw-ay,an=av.decodeItems(arguments,2),X=an?an.length:0,ae,aj,am,aC=ay,aD=av.indices||((X||al)?av.getIndices():null),aq=null,ax=W?[ay]:null,az=null,ao=av.getSource(),aE,aa,Z,U,ag,ab,V,at,ai,Y,S,T,aw;if(ao&&!ao.updating){if(ak){al=[];for(U=0;U<W;++U){al.push(ap[ay+U])}}if(ay<ar){U=ao.indexOf(ap[ay])}else{U=ao.length}ao.splice(U,al,an);return av}if(X){ae=an;az=[];aj={};if(aB){T=av.getSorters();if(X>1){if(!ae.$cloned){an=ae=ae.slice(0)}av.sortData(ae)}}for(U=0;U<X;++U){at=av.getKey(ag=an[U]);if((V=aj[at])!==undefined){(S||(S={}))[V]=1}else{ab=aD[at];if(ab<ay||aw<=ab){(ax||(ax=[])).push(ab)}}aj[at]=U;az.push(at)}if(S){ai=az;ae=[];az=[];ae.$cloned=true;for(U=0;U<X;++U){if(!S[U]){ag=an[U];ae.push(ag);az.push(ai[U])}}X=ae.length}aq={items:ae,keys:az}}for(U=al?al.length:0;U-->0;){at=av.getKey(al[U]);if((ab=aD[at])!==undefined){(ax||(ax=[])).push(ab)}}if(!aq&&!ax){return av}av.beginUpdate();if(ax){aE=null;Z=[];am={};if(ax.length>1){ax.sort(Ext.Array.numericSortFn)}for(U=0,Y=ax.length;U<Y;++U){at=av.getKey(ag=ap[ab=ax[U]]);if(!(at in ah)){continue}delete ah[at];if(!aE||ab>(aE.at+aa.length)){Z.push(aE={at:ab,items:(aa=[]),keys:(ai=[]),map:am,next:aE,replacement:aq});if(aq){aq.replaced=aE}}aa.push(am[at]=ag);ai.push(at);if(ab<aC){--aC}if(W>1&&ab===ay){--W;ax[U--]=++ay}}if(aq){aq.at=aC}for(V=Z.length;V-->0;){aE=Z[V];U=aE.at;Y=aE.items.length;if(U+Y<ar){av.indices=aD=null}av.length=ar-=Y;ap.splice(U,Y);if(aD){ai=aE.keys;for(U=0;U<Y;++U){delete aD[ai[U]]}}++av.generation;av.notify("remove",[aE])}}if(aq){if(aB&&X>1&&ar){av.spliceMerge(ae,az)}else{if(aB){if(X>1){aC=0;av.indices=aD=null}else{aC=T.findInsertionIndex(aq.items[0],ap,av.getSortFn())}}if(aC===ar){aw=aC;for(U=ae.length-1;U>=0;--U){ap[aw+U]=ae[U]}aD=av.indices;if(aD){for(U=0;U<X;++U){aD[az[U]]=aC+U}}}else{av.indices=null;Ext.Array.insert(ap,aC,ae)}for(U=0;U<X;++U){ah[az[U]]=ae[U]}av.length+=X;aq.at=aC;aq.atItem=aC===0?null:ap[aC-1];++av.generation;av.notify("add",[aq])}}av.endUpdate();return av},update:function(f,g){var j=this;j.beginUpdate();try{return f.call(g||j,j)}catch(h){throw h}finally{j.endUpdate()}},updateKey:function(j,q){var m=this,r=m.map,o=m.indices,s=m.getSource(),p;if(s&&!s.updating){s.updateKey(j,q)}else{if((p=m.getKey(j))!==q){if(r[q]===j&&!(p in r)){delete r[q];m.updating++;m.generation++;r[p]=j;if(o){o[p]=o[q];delete o[q]}m.notify("updatekey",[{item:j,newKey:p,oldKey:q}]);m.updating--}}}},findInsertIndex:function(p){var o=this.getSource(),m=o.items,h=o.indexOf(p)-1,q,j;while(h>-1){q=m[h];j=this.indexOf(q);if(j>-1){return j+1}--h}return 0},onCollectionAdd:function(D,C){var t=this,r=C.atItem,u=C.items,y=t.requestedIndex,v,w,B,z,s,A;if(!t.sorted){if(y!==undefined){w=y}else{if(r){w=t.indexOf(r);if(w===-1){w=t.findInsertIndex(u[0])}else{++w}}else{w=0}}}if(t.getAutoFilter()&&t.filtered){for(z=0,A=u.length;z<A;++z){s=u[z];if(t.isItemFiltered(s)){if(!B){B=u.slice(0,z)}if(!v){v=[]}v.push(s)}else{if(B){B.push(s)}}}}t.splice((w<0)?t.length:w,0,B||u);if(v){t.notify("filteradd",[v])}},onCollectionBeforeItemChange:function(c,d){this.onCollectionUpdateKey=null},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionItemChange:function(c,d){delete this.onCollectionUpdateKey;this.itemChanged(d.item,d.modified,d.oldKey,d.meta)},onCollectionFilteredItemChange:null,onCollectionRefresh:function(w){var r=this,v={},p={},t,o,s,q,u;s=w.items;s=r.filtered&&r.getAutoFilter()?Ext.Array.filter(s,r.getFilterFn()):s.slice(0);if(r.sorted){r.sortData(s)}r.items=s;r.length=u=s.length;r.map=v;r.indices=p;for(t=0;t<u;++t){q=r.getKey(o=s[t]);v[q]=o;p[q]=t}r.notify("refresh")},onCollectionRemove:function(c,d){this.splice(0,d.items)},onCollectionUpdateKey:function(c,d){this.updateKey(d.item,d.oldKey)},_aggregators:{average:function(q,p,h,o,j){var m=h-p;return m&&this._aggregators.sum.call(this,q,p,h,o,j)/m},bounds:function(s,w,v,o,r){for(var p,q,u,t=w;t<v;++t){p=s[t];p=(r?p[r]:p)[o];if(!(p<q)){q=p}if(!(p>u)){u=p}}return[u,q]},count:function(b){return b.length},extremes:function(y,D,B,s,u){var w=null,C=null,z,r,v,A,t;for(z=D;z<B;++z){r=y[z];t=(u?r[u]:r)[s];if(!(t<v)){v=t;w=r}if(!(t>A)){A=t;C=r}}return[C,w]},max:function(o,m,p,j,q){var b=this._aggregators.bounds.call(this,o,m,p,j,q);return b[1]},maxItem:function(o,m,p,j,q){var b=this._aggregators.extremes.call(this,o,m,p,j,q);return b[1]},min:function(o,m,p,j,q){var b=this._aggregators.bounds.call(this,o,m,p,j,q);return b[0]},minItem:function(o,m,p,j,q){var b=this._aggregators.extremes.call(this,o,m,p,j,q);return b[0]},sum:function(u,r,m,p,o){for(var q,s=0,t=r;t<m;++t){q=u[t];q=(o?q[o]:q)[p];s+=q}return s}},_eventToMethodMap:{add:"onCollectionAdd",beforeitemchange:"onCollectionBeforeItemChange",beginupdate:"onCollectionBeginUpdate",endupdate:"onCollectionEndUpdate",itemchange:"onCollectionItemChange",filtereditemchange:"onCollectionFilteredItemChange",refresh:"onCollectionRefresh",remove:"onCollectionRemove",beforesort:"beforeCollectionSort",sort:"onCollectionSort",filter:"onCollectionFilter",filteradd:"onCollectionFilterAdd",updatekey:"onCollectionUpdateKey"},addObserver:function(f){var d=this,g=d.observers;if(!g){d.observers=g=[]}g.push(f);if(g.length>1){Ext.Array.sort(g,d.prioritySortFn)}},prioritySortFn:function(a,b){var h=a.observerPriority||0,j=b.observerPriority||0;return h-j},applyExtraKeys:function(q,m){var p=this,r=m||{},s,j,o;for(j in q){o=q[j];if(!o.isCollectionKey){s={collection:p};if(Ext.isString(o)){s.property=o}else{s=Ext.apply(s,o)}o=new Ext.util.CollectionKey(s)}else{o.setCollection(p)}r[j]=p[j]=o;o.name=j}return r},applyGrouper:function(b){if(b){b=this.getSorters().decodeSorter(b,"Ext.util.Grouper")}return b},decodeItems:function(r,s){var p=this,j=(s===undefined)?r:r[s],m,o,q;if(!j||!j.$cloned){m=r.length>s+1||!Ext.isIterable(j);if(m){j=Ext.Array.slice(r,s);if(j.length===1&&j[0]===undefined){j.length=0}}o=p.getDecoder();if(o){if(!m){j=j.slice(0);m=true}for(q=j.length;q-->0;){if((j[q]=o.call(p,j[q]))===false){j.splice(q,1)}}}if(m){j.$cloned=true}}return j},getIndices:function(){var p=this,o=p.indices,j=p.items,m=j.length,q,h;if(!o){p.indices=o={};++p.indexRebuilds;for(q=0;q<m;++q){h=p.getKey(j[q]);o[h]=q}}return o},notify:function(v,s){var r=this,w=r.observers,p=r._eventToMethodMap[v],q=0,u,y,z,t;s=s||[];if(w&&p){for(u=0,y=w.length;u<y;++u){z=(t=w[u])[p];if(z){if(!q++){s.unshift(r)}z.apply(t,s)}}}if(!r.hasListeners){return}if(r.hasListeners[v]){if(!q){s.unshift(r)}r.fireEventArgs(v,s)}},getFilterFn:function(){return this.getFilters().getFilterFn()},getFilters:function(c){var d=this._filters;if(!d&&c!==false){d=new Ext.util.FilterCollection();this.setFilters(d)}return d},isItemFiltered:function(b){return !this.getFilters().filterFn(b)},onFilterChange:function(o){var p=this,m=p.getSource(),q,h,j;if(!m){q=p.getExtraKeys();if(q){h={};for(j in q){h[j]=q[j].clone(p)}}m=new Ext.util.Collection({keyFn:p.getKey,extraKeys:h,rootProperty:p.getRootProperty()});if(p.length){m.add(p.items)}p.setSource(m);p.autoSource=m}else{if(m.length||p.length){p.onCollectionRefresh(m)}}p.notify("filter")},applyFilters:function(d,c){if(d==null||(d&&d.isFilterCollection)){return d}if(d){if(!c){c=this.getFilters()}c.splice(0,c.length,d)}return c},updateFilters:function(f,d){var g=this;if(d){d.un("endupdate","onEndUpdateFilters",g)}if(f){f.on({endupdate:"onEndUpdateFilters",scope:g,priority:g.$endUpdatePriority});f.$filterable=g}g.onEndUpdateFilters(f)},onEndUpdateFilters:function(j){var f=this,h=f.filtered,g=!!j&&(j.length>0);if(h||g){f.filtered=g;f.onFilterChange(j)}},getSortFn:function(){return this._sortFn||this.createSortFn()},getSorters:function(c){var d=this._sorters;if(!d&&c!==false){d=new Ext.util.SorterCollection();this.setSorters(d)}return d},onSortChange:function(){if(this.sorted){this.sortItems()}},sort:function(g,j,h){var f=this.getSorters();f.addSort.apply(f,arguments);return this},sortData:function(b){Ext.Array.sort(b,this.getSortFn());return b},sortItems:function(c){var d=this;if(d.sorted){c=d.getSortFn()}d.indices=null;d.notify("beforesort",[d.getSorters(false)]);if(d.length){Ext.Array.sort(d.items,c)}d.notify("sort")},sortBy:function(b){return this.sortItems(b)},findInsertionIndex:function(g,f,d){if(!f){f=this.items}if(!d){d=this.getSortFn()}return Ext.Array.binarySearch(f,g,d)},applySorters:function(d,c){if(d==null||(d&&d.isSorterCollection)){return d}if(d){if(!c){c=this.getSorters()}c.splice(0,c.length,d)}return c},createSortFn:function(){var j=this,g=j.getGrouper(),h=j.getSorters(false),f=h?h.getSortFn():null;if(!g){return f}return function(c,a){var b=g.sort(c,a);if(!b&&f){b=f(c,a)}return b}},updateGrouper:function(g){var o=this,h=o.getGroups(),j=o.getSorters(),m;o.onSorterChange();o.grouped=!!g;if(g){if(o.getTrackGroups()){if(!h){h=new Ext.util.GroupCollection({itemRoot:o.getRootProperty()});h.$groupable=o;o.setGroups(h)}h.setGrouper(g);m=true}}else{if(h){o.removeObserver(h);h.destroy()}o.setGroups(null)}if(!j.updating){o.onEndUpdateSorters(j)}if(m){h.onCollectionRefresh(o)}},updateSorters:function(f,d){var g=this;if(d){d.un("endupdate","onEndUpdateSorters",g)}if(f){f.on({endupdate:"onEndUpdateSorters",scope:g,priority:g.$endUpdatePriority});f.$sortable=g}g.onSorterChange();g.onEndUpdateSorters(f)},onSorterChange:function(){this._sortFn=null},onEndUpdateSorters:function(j){var f=this,h=f.sorted,g=(f.grouped&&f.getAutoGroup())||(j&&j.length>0);if(h||g){f.sorted=!!g;f.onSortChange(j)}},removeObserver:function(d){var c=this.observers;if(c){Ext.Array.remove(c,d)}},spliceMerge:function(H,z){var A=this,B=A.map,K=H.length,N=0,G=A.items,y=G.length,I=[],J=0,E=[],M=A.getSortFn(),F,O,D,L,C,P;A.items=E;for(P=0;P<K;P=O){L=H[P];for(;N<y;++N){if(M(L,C=G[N])<0){break}E.push(C)}if(N===y){I[J++]={at:E.length,itemAt:E[E.length-1],items:(F=[])};if(J>1){I[J-2].next=I[J-1]}for(;P<K;++P){F.push(L=H[P]);E.push(L)}break}I[J++]={at:E.length,itemAt:E[E.length-1],items:(F=[L])};if(J>1){I[J-2].next=I[J-1]}E.push(L);for(O=P+1;O<K;++O){if(M(L=H[O],C)>=0){break}E.push(L);F.push(L)}}for(;N<y;++N){E.push(G[N])}for(D=0;D<K;++D){B[z[D]]=H[D]}A.length=E.length;++A.generation;A.indices=null;for(D=0;D<J;++D){A.notify("add",[I[D]])}},getGroups:function(){return(arguments.callee.$previous||Ext.Base.prototype.getGroups).call(this)||null},updateAutoGroup:function(c){var d=this.getGroups();if(d){d.setAutoGroup(c)}this.onEndUpdateSorters(this._sorters)},updateGroups:function(d,c){if(c){this.removeObserver(c)}if(d){this.addObserver(d)}},updateSource:function(d,f){var g=this.autoSource;if(f){f.removeObserver(this);if(f===g){g.destroy();this.autoSource=null}}if(d){d.addObserver(this);if(d.length||this.length){this.onCollectionRefresh(d)}}}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.util,"Collection"],function(){var b=this.prototype;b.removeAtKey=b.removeByKey;b.decodeRemoveItems=b.decodeItems;Ext.Object.each(b._aggregators,function(a){b[a]=function(g,h,j){return this.aggregate(g,a,h,j)};b[a+"ByGroup"]=function(d){return this.aggregateByGroup(d,a)}})}));(Ext.cmd.derive("Ext.util.ObjectTemplate",Ext.Base,{isObjectTemplate:true,excludeProperties:{},valueRe:/^[{][a-z\.]+[}]$/i,statics:{create:function(c,d){return c.isObjectTemplate?c:new Ext.util.ObjectTemplate(c,d)}},constructor:function(c,d){Ext.apply(this,d);this.template=c},apply:function(d){var c=this;delete c.apply;c.apply=c.compile(c.template);return c.apply(d)},privates:{compile:function(q){var p=this,j=p.excludeProperties,o,s,m,r;if(Ext.isString(q)){if(q.indexOf("{")<0){r=function(){return q}}else{if(p.valueRe.test(q)){q=q.substring(1,q.length-1).split(".");r=function(c){for(var b=c,a=0;b&&a<q.length;++a){b=b[q[a]]}return b}}else{q=new Ext.XTemplate(q);r=function(a){return q.apply(a)}}}}else{if(!q||Ext.isPrimitive(q)||Ext.isFunction(q)){r=function(){return q}}else{if(q instanceof Array){o=[];for(s=0,m=q.length;s<m;++s){o[s]=p.compile(q[s])}r=function(c){var b=[],a;for(a=0;a<m;++a){b[a]=o[a](c)}return b}}else{o={};for(s in q){if(!j[s]){o[s]=p.compile(q[s])}}r=function(c){var a={},d,b;for(d in q){b=j[d]?q[d]:o[d](c);if(b!==undefined){a[d]=b}}return a}}}}return r}}},1,0,0,0,0,0,[Ext.util,"ObjectTemplate"],0));(Ext.cmd.derive("Ext.data.schema.Role",Ext.Base,{isRole:true,left:true,owner:false,side:"left",isMany:false,defaultReaderType:"json",_internalReadOptions:{recordsOnly:true,asRoot:true},constructor:function(f,j){var h=this,g=j.extra;Ext.apply(h,j);if(g){delete g.type;Ext.apply(h,g);delete h.extra}h.association=f;if(f.owner===h.side){f.owner=h;h.owner=true}},processUpdate:function(){Ext.raise('Only the "many" for an association may be processed. "'+this.role+'" is not valid.')},processLoad:function(f,j,g,h){return g},checkMembership:Ext.emptyFn,adoptAssociated:function(d,g){var f=this.getAssociatedItem(d);if(f){g.adopt(f)}},createAssociationStore:function(y,s,z,r){var v=this,A=v.association,w=A.getFieldName(),u=A.isManyToMany,C=v.storeConfig,D=s.getId(),B={asynchronousLoad:false,model:v.cls,role:v,session:y,associatedEntity:s,disableMetaChangeEvent:true,pageSize:null,remoteFilter:true,trackRemoved:!y},t;if(u){B.filters=[{property:v.inverse.field,value:D,exactMatch:true}]}else{if(w){B.filters=[{property:w,value:D,exactMatch:true}];B.foreignKeyName=w}}if(C){Ext.apply(B,C)}t=Ext.Factory.store(B);v.onStoreCreate(t,y,D);if(w||(u&&y)){t.on({scope:v,add:"onAddToMany",remove:"onRemoveFromMany",clear:"onRemoveFromMany"})}if(z){t.loadData(z);t.complete=!!r}return t},onStoreCreate:Ext.emptyFn,getAssociatedStore:function(G,O,S,E,C){var A=this,I=A.getStoreName(),N=G[I],T=G.session,K=O&&O.reload,H=G.$source,M=false,R,Q,F,D,J,L,P,B;if(!N){if(T){if(!E&&H){H=H[I];if(H&&!H.isLoading()){P=H;E=[];J=H.getData().items;for(F=0,D=J.length;F<D;++F){L=J[F];E.push(T.getRecord(L.self,L.id))}M=!!H.complete;R=true}}if(!R){B=!!E;E=A.findRecords(T,G,E,C);if(!B&&(!E||!E.length)){E=null}M=B}}else{M=!!(E&&E.length>0)}N=A.createAssociationStore(T,G,E,M);N.$source=P;if(!E&&(A.autoLoad||O)){K=true}G[I]=N}if(O){if(K||N.isLoading()){N.on("load",function(c,d,b,a){Q=[c,a];S=S||O.scope||G;if(b){Ext.callback(O.success,S,Q)}else{Ext.callback(O.failure,S,Q)}Q.push(b);Ext.callback(O,S,Q);Ext.callback(O.callback,S,Q)},null,{single:true})}else{Q=[N,null];S=S||O.scope||G;Ext.callback(O.success,S,Q);Q.push(true);Ext.callback(O,S,Q);Ext.callback(O.callback,S,Q)}}if(K&&!N.isLoading()){N.load()}return N},getAssociatedItem:function(c){var d=this.isMany?this.getStoreName():this.getInstanceName();return c[d]||null},onDrop:Ext.emptyFn,getReaderRoot:function(){var b=this;return b.associationKey||(b.associationKey=b.association.schema.getNamer().readerRoot(b.role))},getReader:function(){var o=this,h=o.reader,m=o.cls,j=!o.associationKey,g=this.getReaderRoot();if(h&&!h.isReader){if(Ext.isString(h)){h={type:h}}Ext.applyIf(h,{model:m,rootProperty:g,useSimpleAccessors:j,type:o.defaultReaderType});h=o.reader=Ext.createByAlias("reader."+h.type,h)}return h},getInstanceName:function(){var b=this;return b.instanceName||(b.instanceName=b.association.schema.getNamer().instanceName(b.role))},getOldInstanceName:function(){return this.oldInstanceName||(this.oldInstanceName="$old"+this.getInstanceName())},getStoreName:function(){var b=this;return b.storeName||(b.storeName=b.association.schema.getNamer().storeName(b.role))},constructReader:function(s){var r=this,o=r.getReader(),q=r.cls,p=!r.associationKey,m=r.getReaderRoot(),u,t;if(!o){t=q.getProxy();if(t){u=t.getReader();o=new u.self();o.copyFrom(u);o.setRootProperty(m)}else{o=new s.self({model:q,useSimpleAccessors:p,rootProperty:m})}r.reader=o}return o},read:function(q,m,p,o){var j=this.constructReader(p),h=j.getRoot(m);if(h){return j.readRecords(h,o,this._internalReadOptions)}},getCallbackOptions:function(f,d,g){if(typeof f==="function"){f={callback:f,scope:d||g}}else{if(f){f=Ext.apply({},f);f.scope=d||f.scope||g}}return f},doGetFK:function(E,s,u){var y=this,t=y.cls,B=y.association.getFieldName(),v=y.getInstanceName(),w=E[v],F=s&&s.reload,C=w!==undefined&&!F,z=E.session,D,A;if(!C){if(z){D=E.get(B);if(D||D===0){C=z.peekRecord(t,D,true)&&!F;w=z.getRecord(t,D,false)}else{C=true;E[v]=w=null}}else{if(B){D=E.get(B);if(!D&&D!==0){C=true;E[v]=w=null}else{if(!w){w=t.createWithId(D)}}}else{C=true}}}else{if(w){C=!w.isLoading()}}if(C){if(s){A=[w,null];u=u||s.scope||E;Ext.callback(s.success,u,A);A.push(true);Ext.callback(s,u,A);Ext.callback(s.callback,u,A)}}else{E[v]=w;s=y.getCallbackOptions(s,u,E);w.load(s)}return w},doSetFK:function(F,w,s,t){var y=this,A=y.association.getFieldName(),v=y.getInstanceName(),B=F[v],D=y.inverse,C=D.setterName,z=F.session,u,E;if(w&&w.isEntity){if(B!==w){E=y.getOldInstanceName();F[E]=B;F[v]=w;if(B&&B.isEntity){B[D.getInstanceName()]=undefined}if(A){F.set(A,w.getId())}delete F[E];if(C){w[C](F)}}}else{u=(F.changingKey&&!D.isMany)||F.set(A,w);if(u&&B&&B.isEntity&&!B.isEqual(B.getId(),w)){F[v]=undefined;if(!D.isMany){B[D.getInstanceName()]=undefined}}}if(s){if(Ext.isFunction(s)){s={callback:s,scope:t||F}}return F.save(s)}}},1,0,0,0,0,0,[Ext.data.schema,"Role"],0));(Ext.cmd.derive("Ext.data.schema.Association",Ext.Base,{isOneToOne:false,isManyToOne:false,isManyToMany:false,owner:null,field:null,constructor:function(g){var j=this,h,f;Ext.apply(j,g);j.left=h=new j.Left(j,j.left);j.right=f=new j.Right(j,j.right);h.inverse=f;f.inverse=h},hasField:function(){return !!this.field},getFieldName:function(){var b=this.field;return b?b.name:""}},1,0,0,0,0,0,[Ext.data.schema,"Association"],0));(Ext.cmd.derive("Ext.data.schema.OneToOne",Ext.data.schema.Association,{isOneToOne:true,isToOne:true,kind:"one-to-one",Left:Ext.define(null,{extend:"Ext.data.schema.Role",onDrop:function(f,d){var g=this.getAssociatedItem(f);f[this.getInstanceName()]=null;if(g){g[this.inverse.getInstanceName()]=null}},createGetter:function(){var b=this;return function(){return b.doGet(this)}},createSetter:function(){var b=this;return function(a){return b.doSet(this,a)}},doGet:function(g){var f=this.getInstanceName(),j=g[f],h=g.session;if(!j&&h){}return j||null},doSet:function(h,j){var g=this.getInstanceName(),m=h[g],o=this.inverse.setterName;if(m!==j){h[g]=j;if(o){j[o](h)}}return m},read:function(m,r,j,q){var s=this,p=s.callParent([m,r,j,q]),o;if(p){o=p[0];if(o){o[s.inverse.getInstanceName()]=m;m[s.getInstanceName()]=o;delete m.data[s.role]}}}}),Right:Ext.define(null,{extend:"Ext.data.schema.Role",left:false,side:"right",createGetter:function(){var b=this;return function(a,d){return b.doGetFK(this,a,d)}},createSetter:function(){var b=this;return function(f,a,g){return b.doSetFK(this,f,a,g)}},onDrop:function(m,p){var h=this,q=h.association.field,j=h.getAssociatedItem(m),o;if(h.inverse.owner){if(p){o=m.get(q.name);if(o||o===0){j=p.getEntry(h.cls,o).record;if(j){j.drop()}}}else{if(j){j.drop()}}}if(q){m.set(q.name,null)}m[h.getInstanceName()]=null;if(j){j[h.inverse.getInstanceName()]=null}},onValueChange:function(p,q,r){var s=this,o=p[s.getOldInstanceName()]||s.getAssociatedItem(p),t=r||r===0,u=s.getInstanceName(),m=s.cls;p.changingKey=true;s.doSetFK(p,r);if(!t){p[u]=null}else{if(q&&m){p[u]=q.peekRecord(m,r)||undefined}}if(s.inverse.owner&&o){s.association.schema.queueKeyCheck(o,s)}p.changingKey=false},checkKeyForDrop:function(d){var c=this.inverse.getAssociatedItem(d);if(!c){d.drop()}},read:function(E,D,I,C){var z=this,u=z.callParent([E,D,I,C]),y,v,J,A,w,G,F,H,B;if(u){y=u[0];v=z.association.field;if(v){J=v.name}A=E.session;B=E.data;if(y){if(A){w=A.getRefs(y,this.inverse,true);H=(w&&w[E.id])||(B[J]===undefined)}else{H=true}if(H){if(v){F=B[J];G=y.id;if(F!==G){B[J]=G;if(A){A.updateReference(E,v,G,F)}}}y[z.inverse.getInstanceName()]=E;E[z.getInstanceName()]=y}delete B[z.role]}}}})},0,0,0,0,0,0,[Ext.data.schema,"OneToOne"],0));(Ext.cmd.derive("Ext.data.schema.ManyToOne",Ext.data.schema.Association,{isManyToOne:true,isToOne:true,kind:"many-to-one",Left:Ext.define(null,{extend:"Ext.data.schema.Role",isMany:true,onDrop:function(q,s){var r=this,o=r.getAssociatedItem(q),v,t,u,p,w;if(o){v=o.removeAll();if(v&&r.inverse.owner){for(u=0,t=v.length;u<t;++u){v[u].drop()}}o.destroy();q[r.getStoreName()]=null}else{if(s){v=s.getRefs(q,r);if(v){for(w in v){v[w].drop()}}}}},processUpdate:function(r,v){var q=this,t=q.inverse.cls,s=v.R,w,p,o,u;if(s){for(w in s){p=r.peekRecord(t,w);if(p){u=r.getEntityList(q.cls,s[w]);o=q.getAssociatedItem(p);if(o){o.loadData(u);o.complete=true}else{p[q.getterName](null,null,u)}}else{r.onInvalidAssociationEntity(t,w)}}}},findRecords:function(y,w,C,s){var z=C,v=y.getRefs(w,this,true),u=this.association.field,t=u.name,D,E,B,A,F;if(!w.phantom){z=[];if(v||s){if(C){F={};for(B=0,A=C.length;B<A;++B){D=C[B];E=D.id;if(v&&v[E]){z.push(D)}else{if(s&&D.data[t]===undefined){z.push(D);D.data[t]=w.id;y.updateReference(D,u,w.id,undefined)}}F[E]=true}}if(v){for(E in v){if(!F||!F[E]){z.push(v[E])}}}}}return z},processLoad:function(g,h,j,m){var o=j;if(m){o=this.findRecords(m,h,j,true)}this.onLoadMany(h,o,m);return o},adoptAssociated:function(h,m){var q=this.getAssociatedItem(h),o,p,j;if(q){q.setSession(m);o=q.getData().items;for(p=0,j=o.length;p<j;++p){m.adopt(o[p])}}},createGetter:function(){var b=this;return function(a,g,f){return b.getAssociatedStore(this,a,g,f,b,true)}},createSetter:null,onAddToMany:function(d,c){this.syncFK(c,d.getAssociatedEntity(),false)},onLoadMany:function(t,z,u){var r=this.inverse.getInstanceName(),C=t.getId(),s=this.association.field,w,v,A,B,y,D;if(s){for(w=0,v=z.length;w<v;++w){A=z[w];A[r]=t;if(s){D=s.name;y=A.data;B=y[D];if(B!==C){y[D]=C;if(u){u.updateReference(A,s,C,B)}}}}}},onRemoveFromMany:function(d,c){this.syncFK(c,d.getAssociatedEntity(),true)},read:function(s,z,p,w){var t=this,q=t.inverse.getInstanceName(),y=t.callParent([s,z,p,w]),r,u,v;if(y){r=s[t.getterName](null,null,y);delete s.data[t.role];y=r.getData().items;for(v=0,u=y.length;v<u;++v){y[v][q]=s}}},syncFK:function(z,t,s){var u=this.association.getFieldName(),w=this.inverse,y=w.setterName,r=w.getInstanceName(),v=z.length,C=t.getId(),D,A,B;while(v-->0){A=z[v];D=!A.isEqual(C,A.get(u));B=s?null:t;if(D!==s){A.changingKey=true;A[y](B);A.changingKey=false}else{A[r]=B}}}}),Right:Ext.define(null,{extend:"Ext.data.schema.Role",left:false,side:"right",onDrop:function(g,d){var f=this.association.field;if(f){g.set(f.name,null)}g[this.getInstanceName()]=null},createGetter:function(){var b=this;return function(a,d){return b.doGetFK(this,a,d)}},createSetter:function(){var b=this;return function(a,g,f){return b.doSetFK(this,a,g,f)}},checkMembership:function(j,h){var f=this.association.field,g;g=this.getSessionStore(j,h.get(f.name));if(g&&!g.contains(h)){g.add(h)}},onValueChange:function(D,z,F,G){var y=this,u=y.getInstanceName(),H=y.cls,E,t,v,C,B,w,A;if(!D.changingKey){E=F||F===0;if(!E){D[u]=null}if(z){v=y.getSessionStore(z,G);if(v){v.remove(D)}if(E){v=y.getSessionStore(z,F);if(v&&!v.isLoading()){v.add(D)}if(H){A=z.peekRecord(H,F)}D[u]=A||undefined}}else{t=D.joined;if(t){for(C=0,B=t.length;C<B;++C){v=t[C];if(v.isStore){w=v.getAssociatedEntity();if(w&&w.self===y.cls&&w.getId()===G){v.remove(D)}}}}}}if(y.owner&&F===null){y.association.schema.queueKeyCheck(D,y)}},checkKeyForDrop:function(c){var d=this.association.field;if(c.get(d.name)===null){c.drop()}},getSessionStore:function(j,f){var g=this.cls,h;if(g){h=j.peekRecord(g,f);if(h){return this.inverse.getAssociatedItem(h)}}},read:function(m,q,h,o){var p=this.callParent([m,q,h,o]),j;if(p){j=p[0];if(j){m[this.getInstanceName()]=j;delete m.data[this.role]}}}})},0,0,0,0,0,0,[Ext.data.schema,"ManyToOne"],0));(Ext.cmd.derive("Ext.data.schema.ManyToMany",Ext.data.schema.Association,{isManyToMany:true,isToMany:true,kind:"many-to-many",Left:Ext.define(null,{extend:"Ext.data.schema.Role",isMany:true,digitRe:/^\d+$/,findRecords:function(v,u,C){var t=v.getMatrixSlice(this.inverse,u.id),B=t.members,w=[],s=this.cls,F,z,y,E,A,D;if(C){F={};for(z=0,y=C.length;z<y;++z){D=C[z];E=D.id;A=B[E];if(!(A&&A[2]===-1)){w.push(D)}F[E]=true}}for(E in B){A=B[E];if(!F||!F[E]&&(A&&A[2]!==-1)){D=v.peekRecord(s,E);if(D){w.push(D)}}}return w},processLoad:function(g,h,j,m){var o=j;if(m){o=this.findRecords(m,h,j);this.onAddToMany(g,o,true)}return o},processUpdate:function(r,v){var q=this,t=q.inverse.cls,s=v.R,w,p,o,u;if(s){for(w in s){p=r.peekRecord(t,w);if(p){u=r.getEntityList(q.cls,s[w]);o=q.getAssociatedItem(p);if(o){o.loadData(u);o.complete=true}else{p[q.getterName](null,null,u)}}else{r.onInvalidAssociationEntity(t,w)}}}q.processMatrixBlock(r,v.C,1);q.processMatrixBlock(r,v.D,-1)},checkMembership:function(y,w){var v=y.getMatrix(this.association,true),z,C,B,t,s,F,D,A,E,u;if(!v){return}z=this.left?v.right:v.left;C=z.inverse.role.cls;B=this.inverse;s=z.slices;if(s){t=s[w.id];if(t){D=t.members;for(F in D){A=D[F];if(A[2]!==-1){E=y.peekRecord(C,F);if(E){u=B.getAssociatedItem(E);if(u){u.matrixUpdate=1;u.add(w);u.matrixUpdate=0}}}}}}},onStoreCreate:function(g,m,j){var o=this,h;if(m){h=m.getMatrixSlice(o.inverse,j);h.attach(g);h.notify=o.onMatrixUpdate;h.scope=o}},processMatrixBlock:function(q,r,s){var m=this.inverse,j=this.digitRe,p,o;if(r){for(o in r){if(j.test(o)){o=parseInt(o,10)}p=q.getMatrixSlice(m,o);p.update(r[o],s)}}},createGetter:function(){var b=this;return function(a,g,f){return b.getAssociatedStore(this,a,g,f,false)}},onAddToMany:function(f,g,d){if(!f.matrixUpdate){f.matrixUpdate=1;f.matrix.update(g,d===true?0:1);f.matrixUpdate=0}},onRemoveFromMany:function(c,d){if(!c.matrixUpdate){c.matrixUpdate=1;c.matrix.update(d,-1);c.matrixUpdate=0}},read:function(j,p,h,o){var q=this,m=q.callParent([j,p,h,o]);if(m){j[q.getterName](null,null,m);delete j.data[q.role]}},onMatrixUpdate:function(q,o,r){var m=q.store,j,p,s;if(m&&!m.loading&&!m.matrixUpdate){m.matrixUpdate=1;j=m.indexOfId(o);if(r<0){if(j>=0){m.remove([j])}}else{if(j<0){s=m.getSession().getEntry(this.type,o);p=s&&s.record;if(p){m.add(p)}}}m.matrixUpdate=0}},adoptAssociated:function(h,m){var p=this.getAssociatedItem(h),q,o,j;if(p){p.setSession(m);this.onStoreCreate(p,m,h.getId());q=p.getData().items;for(o=0,j=q.length;o<j;++o){m.adopt(q[o])}}}},function(){var b=this;Ext.ClassManager.onCreated(function(){Ext.data.schema.ManyToMany.prototype.Right=Ext.define(null,{extend:b,left:false,side:"right"})},null,"Ext.data.schema.ManyToMany")})},0,0,0,0,0,0,[Ext.data.schema,"ManyToMany"],0));(Ext.cmd.derive("Ext.util.Inflector",Ext.Base,{singleton:true,plurals:[[(/(quiz)$/i),"$1zes"],[(/^(ox)$/i),"$1en"],[(/([m|l])ouse$/i),"$1ice"],[(/(matr|vert|ind)ix|ex$/i),"$1ices"],[(/(x|ch|ss|sh)$/i),"$1es"],[(/([^aeiouy]|qu)y$/i),"$1ies"],[(/(hive)$/i),"$1s"],[(/(?:([^f])fe|([lr])f)$/i),"$1$2ves"],[(/sis$/i),"ses"],[(/([ti])um$/i),"$1a"],[(/(buffal|tomat|potat)o$/i),"$1oes"],[(/(bu)s$/i),"$1ses"],[(/(alias|status|sex)$/i),"$1es"],[(/(octop|vir)us$/i),"$1i"],[(/(ax|test)is$/i),"$1es"],[(/^(p)erson$/i),"$1eople"],[(/^(m)an$/i),"$1en"],[(/(.*)(child)(ren)?$/i),"$1$2ren"],[(/s$/i),"s"],[(/$/),"s"]],singulars:[[(/(address)$/i),"$1"],[(/(quiz)zes$/i),"$1"],[(/(matr)ices$/i),"$1ix"],[(/(vert|ind)ices$/i),"$1ex"],[(/^(ox)en/i),"$1"],[(/(alias|status)es$/i),"$1"],[(/(octop|vir)i$/i),"$1us"],[(/(cris|ax|test)es$/i),"$1is"],[(/(shoe)s$/i),"$1"],[(/(o)es$/i),"$1"],[(/(bus)es$/i),"$1"],[(/([m|l])ice$/i),"$1ouse"],[(/(x|ch|ss|sh)es$/i),"$1"],[(/(m)ovies$/i),"$1ovie"],[(/(s)eries$/i),"$1eries"],[(/([^aeiouy]|qu)ies$/i),"$1y"],[(/([lr])ves$/i),"$1f"],[(/(tive)s$/i),"$1"],[(/(hive)s$/i),"$1"],[(/([^f])ves$/i),"$1fe"],[(/(^analy)ses$/i),"$1sis"],[(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i),"$1$2sis"],[(/([ti])a$/i),"$1um"],[(/(n)ews$/i),"$1ews"],[(/(p)eople$/i),"$1erson"],[(/s$/i),""]],uncountable:["sheep","fish","series","species","money","rice","information","equipment","grass","mud","offspring","deer","means"],singular:function(c,d){this.singulars.unshift([c,d])},plural:function(c,d){this.plurals.unshift([c,d])},clearSingulars:function(){this.singulars=[]},clearPlurals:function(){this.plurals=[]},isTransnumeral:function(b){return Ext.Array.indexOf(this.uncountable,b)!=-1},pluralize:function(m){if(this.isTransnumeral(m)){return m}var o=this.plurals,p=o.length,j,q,h;for(h=0;h<p;h++){j=o[h];q=j[0];if(q==m||(q.test&&q.test(m))){return m.replace(q,j[1])}}return m},singularize:function(m){if(this.isTransnumeral(m)){return m}var o=this.singulars,p=o.length,j,q,h;for(h=0;h<p;h++){j=o[h];q=j[0];if(q==m||(q.test&&q.test(m))){return m.replace(q,j[1])}}return m},classify:function(b){return Ext.String.capitalize(this.singularize(b))},ordinalize:function(h){var f=parseInt(h,10),j=f%10,g=f%100;if(11<=g&&g<=13){return h+"th"}else{switch(j){case 1:return h+"st";case 2:return h+"nd";case 3:return h+"rd";default:return h+"th"}}}},0,0,0,0,0,0,[Ext.util,"Inflector"],function(){var c={alumnus:"alumni",cactus:"cacti",focus:"foci",nucleus:"nuclei",radius:"radii",stimulus:"stimuli",ellipsis:"ellipses",paralysis:"paralyses",oasis:"oases",appendix:"appendices",index:"indexes",beau:"beaux",bureau:"bureaux",tableau:"tableaux",woman:"women",child:"children",man:"men",corpus:"corpora",criterion:"criteria",curriculum:"curricula",genus:"genera",memorandum:"memoranda",phenomenon:"phenomena",foot:"feet",goose:"geese",tooth:"teeth",antenna:"antennae",formula:"formulae",nebula:"nebulae",vertebra:"vertebrae",vita:"vitae"},d;for(d in c){if(c.hasOwnProperty(d)){this.plural(d,c[d]);this.singular(c[d],d)}}}));(Ext.cmd.derive("Ext.data.schema.Namer",Ext.Base,{isNamer:true,capitalize:function(b){return Ext.String.capitalize(b)},fieldRole:function(c){var d=c.match(this.endsWithIdRe,"");if(d){c=c.substr(0,c.length-(d[1]||d[2]).length)}return this.apply("uncapitalize",c)},idField:function(b){return this.apply("uncapitalize,singularize",b)+"Id"},instanceName:function(b){return this.apply("underscore",b)},multiRole:function(b){return this.apply("undotted,uncapitalize,pluralize",b)},pluralize:function(b){return Ext.util.Inflector.pluralize(b)},readerRoot:function(b){return this.apply("uncapitalize",b)},singularize:function(b){return Ext.util.Inflector.singularize(b)},storeName:function(b){return this.apply("underscore",b)},uncapitalize:function(b){return Ext.String.uncapitalize(b)},underscore:function(b){return"_"+b},uniRole:function(b){return this.apply("undotted,uncapitalize,singularize",b)},undotted:function(d){if(d.indexOf(".")<0){return d}var g=d.split("."),f=g.length;while(f-->1){g[f]=this.apply("capitalize",g[f])}return g.join("")},getterName:function(c){var d=c.role;if(c&&c.isMany){return d}return"get"+this.apply("capitalize",d)},inverseFieldRole:function(q,p,s,m){var r=this,o=r.apply(p?"uniRole":"multiRole",q),t=r.apply("pluralize",s),u=r.apply("undotted,pluralize",m);if(t.toLowerCase()!==u.toLowerCase()){o=s+r.apply("capitalize",o)}return o},manyToMany:function(j,m,h){var o=this,g=o.apply("undotted,capitalize,singularize",m)+o.apply("undotted,capitalize,pluralize",h);if(j){g=o.apply("capitalize",j+g)}return g},manyToOne:function(h,f,g,j){return this.apply("capitalize,singularize",g)+this.apply("capitalize",f)},matrixRole:function(g,d){var f=this.apply(g?"multiRole,capitalize":"multiRole",d);return g?g+f:f},oneToOne:function(h,f,g,j){return this.apply("undotted,capitalize,singularize",g)+this.apply("capitalize",f)},setterName:function(b){return"set"+this.apply("capitalize",b.role)},endsWithIdRe:/(?:(_id)|[^A-Z](Id))$/,cache:{},apply:function(s,u){var p=this,v=p.cache,o=v[u]||(v[u]={}),q=o[s],r,t,w;if(!q){if(s.indexOf(",")<0){q=p[s](u)}else{t=(w=s.split(",")).length;q=u;for(r=0;r<t;++r){q=p.apply(w[r],q)}}o[s]=q}return q}},0,0,0,0,["namer.default"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.schema,"Namer"],0));(Ext.cmd.derive("Ext.data.schema.Schema",Ext.Base,{aliasPrefix:"schema.",isSchema:true,type:"default",statics:{instances:{},get:function(r){var p=this,s=p.instances,o="default",j=r&&Ext.isString(r),m,q;if(r){if(r.isSchema){return r}o=j?r:(r.id||o)}if(!(m=s[o])){s[o]=m=p.create(r);m.id=o}else{if(r&&!j){q=Ext.merge({},m.config);Ext.merge(q,r);m.setConfig(q);m.config=q}}return m},lookupEntity:function(j){var p=null,m=this.instances,q,h,o;if(j){if(j.isEntity){p=j.self}else{if(Ext.isFunction(j)){p=j}else{if(Ext.isString(j)){p=Ext.ClassManager.get(j);if(p&&(!p.prototype||!p.prototype.isEntity)){p=null}if(!p){for(h in m){o=m[h];q=o.getEntity(j);if(q){if(p){Ext.raise('Ambiguous entity name "'+j+'". Defined by schema "'+p.schema.type+'" and "'+h+'"')}p=q}}}if(!p){Ext.raise('No such Entity "'+j+'".')}}}}}return p}},assocCount:0,entityCount:0,config:{defaultIdentifier:null,keyCheckDelay:10,namer:"default",namespace:null,proxy:{type:"ajax",url:"{prefix}/{entityName}"},urlPrefix:""},onClassExtended:function(f,g){var d=g.alias;if(d&&!g.type){if(!Ext.isString(d)){d=d[0]}f.prototype.type=d.substring(this.prototype.aliasPrefix.length)}},constructor:function(b){this.initConfig(b);this.clear()},applyDefaultIdentifier:function(b){return b&&Ext.Factory.dataIdentifier(b)},applyNamer:function(c){var d=Ext.data.schema.Namer.create(c);d.schema=this;return d},applyNamespace:function(c){if(c){var d=c.length-1;if(c.charAt(d)!=="."){c+="."}}return c},applyProxy:function(b){return Ext.util.ObjectTemplate.create(b)},eachAssociation:function(h,j){var f=this.associations,g;for(g in f){if(f.hasOwnProperty(g)){if(h.call(j,g,f[g])===false){break}}}},eachEntity:function(j,f){var h=this.entities,g;for(g in h){if(h.hasOwnProperty(g)){if(j.call(f,g,h[g].cls)===false){break}}}},getAssociation:function(d){var c=this.associations[d];return c||null},getEntity:function(d){var c=this.entityClasses[d]||this.entities[d];return(c&&c.cls)||null},getEntityName:function(g){var h=this.getNamespace(),j,f;if(typeof g==="string"){f=g}else{f=g.$className||null}if(f){if(h){j=h.length;if(f.substring(0,j)!==h){return f}}if(j){f=f.substring(j)}}return f},hasAssociations:function(b){b=b.entityName||b;return !!this.associationEntityMap[b]},hasEntity:function(d){var c=this.getEntityName(d);return !!(this.entities[c]||this.entityClasses[c])},addMatrix:function(D,J,M,N,z){var y=this,F=y.getNamer(),B=y.associations,P=y.entities,K=N.type,A=z.type,L=N.field||F.apply("idField",K),H=z.field||F.apply("idField",A),O=N.role||F.matrixRole(M,K),E=z.role||F.matrixRole(M,A),C,I,G;I=P[K]||(P[K]={cls:null,name:K,associations:{}});G=P[A]||(P[A]={cls:null,name:A,associations:{}});++y.assocCount;B[J]=C=new Ext.data.schema.ManyToMany({name:J,schema:y,definedBy:D,left:{cls:I.cls,type:K,role:O,field:L,associationKey:N.associationKey},right:{cls:G.cls,type:A,role:E,field:H,associationKey:z.associationKey}});I.associations[C.right.role]=C.right;G.associations[C.left.role]=C.left;if(I.cls){y.associationEntityMap[I.cls.entityName]=true}if(G.cls){y.associationEntityMap[G.cls.entityName]=true}y.decorateModel(C)},addReference:function(D,T,F,S){var A=this,H=A.getNamer(),Q=A.entities,C=A.associations,I=D.entityName,P=F.association,E=!!F.legacy,L=F.child,J=F.parent,G=F.role,B=F.type||J||L,K=F.inverse,M=Ext.isString(K)?{role:K}:K,N=M&&M.role,R,O;if(!G){if(E){G=H.apply("uncapitalize",B)}else{G=H.apply("fieldRole",T.name)}}if(!N){N=H.inverseFieldRole(I,S,G,B)}if(!P){if(S){P=H.oneToOne(D,N,B,G)}else{P=H.manyToOne(D,N,B,G)}}R=Q[B]||(Q[B]={cls:null,name:B,associations:{}});O=S?Ext.data.schema.OneToOne:Ext.data.schema.ManyToOne;P=new O({name:P,owner:L?"left":(J?"right":null),definedBy:D,schema:A,field:T,nullable:T?!!T.allowBlank:true,legacy:F.legacy,left:{cls:D,type:I,role:N,extra:M},right:{cls:R.cls,type:B,role:G,extra:F}});D.associations[G]=P.right;R.associations[N]=P.left;if(T){T.reference=P.right;D.references.push(T)}++A.assocCount;A.associationEntityMap[I]=true;if(R.cls){A.associationEntityMap[R.cls.entityName]=true}C[P.name]=P;if(P.right.cls){A.decorateModel(P)}},privates:{addEntity:function(y){var t=this,u=t.entities,r=y.entityName,q=u[r],v=y.fields,z,s,w,A,B;if(!q){u[r]=q={name:r,associations:{}}}else{z=q.associations;for(B in z){z[B].inverse.cls=y;t.associationEntityMap[r]=true;t.decorateModel(z[B].association)}}q.cls=y;y.prototype.associations=y.associations=q.associations;t.entityClasses[y.$className]=q;++t.entityCount;for(w=0,A=v.length;w<A;++w){s=v[w];if(s.reference){t.addReferenceDescr(y,s)}}},addMatrices:function(m,j){var o=this,h,p,q;if(Ext.isString(j)){o.addMatrixDescr(m,null,j)}else{if(j[0]){for(h=0,p=j.length;h<p;++h){o.addMatrixDescr(m,null,j[h])}}else{for(q in j){o.addMatrixDescr(m,q,j[q])}}}},addMatrixDescr:function(w,B,v){var u=this,s=w.entityName,y=u.associations,t=u.getNamer(),z=v.left,q=v.right,r,A;if(Ext.isString(v)){if(v.charAt(0)==="#"){z={type:s};q={type:v.substring(1)}}else{if(v.charAt(r=v.length-1)==="#"){z={type:v.substring(0,r)};q={type:s}}else{if(t.apply("multiRole",s)<t.apply("multiRole",v)){z={type:s};q={type:v}}else{z={type:v};q={type:s}}}}}else{A=v.relation;if(z||(!q&&t.apply("multiRole",s)<t.apply("multiRole",v.type))){if(!z||z===true){z={type:s}}else{z=Ext.apply({type:s},z)}q=v}else{if(!q||q===true){q={type:s}}else{q=Ext.apply({type:s},q)}z=v}}if(!B){B=t.manyToMany(A,z.type,q.type)}if(!(B in y)){u.addMatrix(w,B,A,z,q)}},addReferenceDescr:function(f,h){var g=this,j=h.$reference;if(Ext.isString(j)){j={type:j}}else{j=Ext.apply({},j)}if(j.legacy){if(j.single){g.addLegacySingle(f,j)}else{g.addLegacyHasMany(f,j)}}else{g.addReference(f,h,j,h.unique)}},addPending:function(h,o,j,g){var m=this.pending;if(!m[h]){m[h]=[]}m[h].push([o,j,g])},addLegacyBelongsTo:function(d,c){this.addLegacySingle(d,c)},addLegacyHasOne:function(d,c){this.addLegacySingle(d,c)},addLegacySingle:function(o,j){var g,h,m;j=this.constructLegacyAssociation(o,j);j.single=true;h=j.type;g=j.foreignKey||(h.toLowerCase()+"_id");m=o.getField(g);if(m){m.$reference=j}this.addReference(o,m,j,true)},addLegacyHasMany:function(A,u){var t=this,y=t.entities,B=t.pending,D=u.associationKey,r,C,s,v,w,z;u=this.constructLegacyAssociation(A,u);C=u.type;v=y[C];if(v&&v.cls){u.type=A.entityName;w=u.foreignKey||(u.type.toLowerCase()+"_id");r=v.cls;s=r.getField(w);u.inverse=u||{};z=u.name;if(z||D){if(z){u.inverse.role=z}if(D){u.inverse.associationKey=D}}if(s){s.$reference=u}t.addReference(r,s,u,false)}else{if(!B[C]){B[C]=[]}B[C].push([A,u])}},constructLegacyAssociation:function(d,g){if(Ext.isString(g)){g={model:g}}g.legacy=true;g.type=this.getEntityName(g.model);var f=g.associatedName||g.name;if(f){g.role=f}return g},afterLegacyAssociations:function(h){var m=this.pending,q=h.entityName,o=m[q],p,j;if(o){for(p=0,j=o.length;p<j;++p){this.addLegacyHasMany.apply(this,o[p])}delete m[q]}},clear:function(d){var f=this,g=f.timer;delete f.setConfig;if(g){window.clearTimeout(g);f.timer=null}f.associations={};f.associationEntityMap={};f.entities={};f.entityClasses={};f.pending={};f.assocCount=f.entityCount=0;if(d){f.setNamespace(null)}},constructProxy:function(h){var f=this,j=Ext.Object.chain(h),g=f.getProxy();j.schema=f;j.prefix=f.getUrlPrefix();return g.apply(j)},applyDecoration:function(o){var q=this,m=o.inverse.cls,p=q.getNamer(),s,j,r;if(m&&!o.decorated){o.decorated=true;r=m.prototype;if(!(s=o.getterName)){o.getterName=s=p.getterName(o)}r[s]=o.createGetter();if(o.createSetter){if(!(j=o.setterName)){o.setterName=j=p.setterName(o)}r[j]=o.createSetter()}}},decorateModel:function(b){this.applyDecoration(b.left);this.applyDecoration(b.right)},processKeyChecks:function(r){var p=this,j=p.keyCheckQueue,o=p.timer,m,s,q;if(o){window.clearTimeout(o);p.timer=null}if(!j){return}do{j=p.keyCheckQueue;p.keyCheckQueue=[];for(s=0,m=j.length;s<m;++s){q=j[s];q.role.checkKeyForDrop(q.record)}}while(r&&p.keyCheckQueue.length)},queueKeyCheck:function(h,j){var o=this,g=o.keyCheckQueue,m=o.timer;if(!g){o.keyCheckQueue=g=[]}g.push({record:h,role:j});if(!m){o.timer=m=Ext.Function.defer(o.processKeyChecks,o.getKeyCheckDelay(),o)}},rankEntities:function(){var o=this,m=o.entities,j=Ext.Object.getKeys(m),p=j.length,q,h;o.nextRank=1;j.sort();for(h=0;h<p;++h){q=m[j[h]].cls;if(!q.rank){o.rankEntity(q)}}},rankEntity:function(o){var g=o.associations,j,m,h;for(h in g){m=g[h];if(!m.left&&m.association.field){j=m.cls;if(!j.rank){this.rankEntity(j)}}}o.rank=this.nextRank++}}},1,0,0,0,["schema.default"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.schema,"Schema"],0));(Ext.cmd.derive("Ext.data.AbstractStore",Ext.Base,{factoryConfig:{defaultType:"store",type:"store"},$configPrefixed:false,$configStrict:false,config:{filters:null,autoDestroy:undefined,storeId:null,statefulFilters:false,sorters:null,remoteSort:{lazy:true,$value:false},remoteFilter:{lazy:true,$value:false},groupField:undefined,groupDir:"ASC",grouper:null,pageSize:25},currentPage:1,loading:false,isStore:true,updating:0,constructor:function(d){var g=this,f;g.isInitializing=true;g.mixins.observable.constructor.call(g,d);g.isInitializing=false;f=g.getStoreId();if(!f&&(d&&d.id)){g.setStoreId(f=d.id)}if(f){Ext.data.StoreManager.register(g)}},getCount:function(){return this.getData().getCount()},rangeCached:function(c,d){return this.getData().getCount()>=Math.max(c,d)},find:function(r,s,q,p,o,t){var u=!p,m=!!(u&&t);return this.getData().findIndex(r,s,q,u,m,!o)},findRecord:function(){var c=this,d=c.find.apply(c,arguments);return d!==-1?c.getAt(d):null},findExact:function(d,f,g){return this.getData().findIndexBy(function(a){return a.isEqual(a.get(d),f)},this,g)},findBy:function(d,f,g){return this.getData().findIndexBy(d,f,g)},getAt:function(b){return this.getData().getAt(b)||null},getRange:function(h,f,j){var g=this.getData().getRange(h,Ext.isNumber(f)?f+1:f);if(j&&j.callback){j.callback.call(j.scope||this,g,h,f,j)}return g},getFilters:function(c){var d=(arguments.callee.$previous||Ext.Base.prototype.getFilters).call(this);if(!d&&c!==false){this.setFilters([]);d=(arguments.callee.$previous||Ext.Base.prototype.getFilters).call(this)}return d},applyFilters:function(d,f){var g;if(!f){f=this.createFiltersCollection();g=true}f.add(d);if(g){this.onRemoteFilterSet(f,this.getRemoteFilter())}return f},getSorters:function(c){var d=(arguments.callee.$previous||Ext.Base.prototype.getSorters).call(this);if(!d&&c!==false){this.setSorters([]);d=(arguments.callee.$previous||Ext.Base.prototype.getSorters).call(this)}return d},applySorters:function(d,f){var g;if(!f){f=this.createSortersCollection();g=true}f.add(d);if(g){this.onRemoteSortSet(f,this.getRemoteSort())}return f},filter:function(d,g,f){if(Ext.isString(d)){d={property:d,value:g}}this.suppressNextFilter=!!f;this.getFilters().add(d);this.suppressNextFilter=false},removeFilter:function(g,h){var j=this,f=j.getFilters();j.suppressNextFilter=!!h;if(g instanceof Ext.util.Filter){f.remove(g)}else{f.removeByKey(g)}j.suppressNextFilter=false},updateRemoteSort:function(b){this.onRemoteSortSet(this.getSorters(false),b)},updateRemoteFilter:function(b){this.onRemoteFilterSet(this.getFilters(false),b)},addFilter:function(c,d){this.suppressNextFilter=!!d;this.getFilters().add(c);this.suppressNextFilter=false},filterBy:function(c,d){this.getFilters().add({filterFn:c,scope:d||this})},clearFilter:function(g){var d=this,f=d.getFilters(false);if(!f||f.getCount()===0){return}d.suppressNextFilter=!!g;f.removeAll();d.suppressNextFilter=false},isFiltered:function(){return this.getFilters().getCount()>0},isSorted:function(){var b=this.getSorters(false);return !!(b&&b.length>0)||this.isGrouped()},addFieldTransform:function(j){if(j.getTransform()){return}var m=j.getProperty(),o=this.getModel(),h,g;if(o){h=o.getField(m);g=h?h.getSortType():null}if(g&&g!==Ext.identityFn){j.setTransform(g)}},beginUpdate:function(){if(!this.updating++){this.fireEvent("beginupdate")}},endUpdate:function(){if(this.updating&&!--this.updating){this.fireEvent("endupdate");this.onEndUpdate()}},getState:function(){var q=this,p=[],r=q.getFilters(),j=q.getGrouper(),o,s,m;q.getSorters().each(function(a){p[p.length]=a.getState();s=true});if(q.statefulFilters&&q.saveStatefulFilters){s=true;o=[];r.each(function(a){o[o.length]=a.getState()})}if(j){s=true}if(s){m={};if(p.length){m.sorters=p}if(o){m.filters=o}if(j){m.grouper=j.getState()}}return m},applyState:function(j){var o=this,g=j.sorters,h=j.filters,m=j.grouper;if(g){o.getSorters().replaceAll(g)}if(h){o.saveStatefulFilters=true;o.getFilters().replaceAll(h)}if(m){o.setGrouper(m)}},hasPendingLoad:Ext.emptyFn,isLoaded:Ext.emptyFn,isLoading:Ext.emptyFn,destroy:function(){var b=this;if(b.getStoreId()){Ext.data.StoreManager.unregister(b)}b.callParent();b.onDestroy()},sort:function(j,f,h){var g=this;if(arguments.length===0){if(g.getRemoteSort()){g.load()}else{g.forceLocalSort()}}else{g.getSorters().addSort(j,f,h)}},onBeforeCollectionSort:function(d,c){if(c){this.fireEvent("beforesort",this,c.getRange())}},onSorterEndUpdate:function(){var d=this,c;c=d.getSorters(false);if(d.settingGroups||!c){return}c=c.getRange();if(c.length){if(d.getRemoteSort()){d.load({callback:function(){d.fireEvent("sort",d,c)}})}else{d.fireEvent("datachanged",d);d.fireEvent("refresh",d);d.fireEvent("sort",d,c)}}else{d.fireEvent("sort",d,c)}},onFilterEndUpdate:function(){var c=this,d=c.suppressNextFilter;if(c.getRemoteFilter()){c.currentPage=1;if(!d){c.load()}}else{if(!d){c.fireEvent("datachanged",c);c.fireEvent("refresh",c)}}if(c.trackStateChanges){c.saveStatefulFilters=true}c.fireEvent("filterchange",c,c.getFilters().getRange())},updateGroupField:function(b){if(b){this.setGrouper({property:b,direction:this.getGroupDir()})}else{this.setGrouper(null)}},getGrouper:function(){return this.getData().getGrouper()},group:function(h,m){var g=this,o=g.getSorters(false),j=h||(o&&o.length);if(h&&typeof h==="string"){h={property:h,direction:m||g.getGroupDir()}}g.settingGroups=true;g.getData().setGrouper(h);delete g.settingGroups;if(j){if(g.getRemoteSort()){g.load({scope:g,callback:g.fireGroupChange})}else{g.fireEvent("datachanged",g);g.fireEvent("refresh",g);g.fireGroupChange()}}else{g.fireGroupChange()}},fireGroupChange:function(){if(!this.destroyed){this.fireEvent("groupchange",this,this.getGrouper())}},clearGrouping:function(){this.group(null)},getGroupField:function(){var d=this.getGrouper(),c="";if(d){c=d.getProperty()}return c},isGrouped:function(){return !!this.getGrouper()},applyGrouper:function(b){this.group(b);return this.getData().getGrouper()},getGroups:function(){return this.getData().getGroups()},onEndUpdate:Ext.emptyFn,privates:{loadsSynchronously:Ext.privateFn,onRemoteFilterSet:function(d,c){if(d){d[c?"on":"un"]("endupdate",this.onFilterEndUpdate,this)}},onRemoteSortSet:function(d,g){var f=this;if(d){d[g?"on":"un"]("endupdate",f.onSorterEndUpdate,f);f.getData()[g?"un":"on"]("beforesort",f.onBeforeCollectionSort,f)}}},deprecated:{5:{methods:{destroyStore:function(){this.destroy()}}}}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data,"AbstractStore"],0));(Ext.cmd.derive("Ext.data.Error",Ext.Base,{isError:true,$configPrefixed:false,config:{field:null,message:""},constructor:function(b){this.initConfig(b);this.msg=this.message}},1,0,0,0,0,0,[Ext.data,"Error"],0));(Ext.cmd.derive("Ext.data.ErrorCollection",Ext.util.MixedCollection,{alternateClassName:"Ext.data.Errors",init:function(y){var u=this,w=y.fields,A=y.data,s,t,r,z,v,B,C,D;for(z=0,v=w.length;z<v;++z){t=w[z];D=t.name;C=A[D];if(t.validate&&!t.validate.$nullFn){s=u.length;B=t.validate(C,null,u,y);if(s===u.length&&B!==true){u.add(D,B)}}}return u},add:function(h,p){var q=this,j=Ext.data.field.Field.defaultInvalidMessage,m=h,o;if(Ext.isString(h)){m=new Ext.data.Error({field:h,message:p||j})}else{if(!(m.isError)){m=new Ext.data.Error({field:m.field||m.name,message:m.error||m.message||m.msg||j})}h=m.field}o=q.get(h);if(o){if(Ext.isArray(o)){o.push(m);return o}q.removeAtKey(h);m=[o,m];m.field=h;m=[m]}return Ext.util.MixedCollection.prototype.add.call(this,m)},getKey:function(b){return b.field},isValid:function(){return this.length===0},getByField:function(c){var d=this.get(c);if(d&&!Ext.isArray(d)){d=[d]}return d||[]}},0,0,0,0,0,0,[Ext.data,"ErrorCollection",Ext.data,"Errors"],0));(Ext.cmd.derive("Ext.data.operation.Operation",Ext.Base,{alternateClassName:"Ext.data.Operation",isOperation:true,config:{synchronous:false,url:"",params:undefined,callback:undefined,scope:undefined,resultSet:null,response:null,request:null,records:null,id:undefined,proxy:null,batch:null,recordCreator:null,internalCallback:null,internalScope:null},order:0,foreignKeyDirection:1,started:false,running:false,complete:false,success:undefined,exception:false,error:undefined,idPrefix:"ext-operation-",constructor:function(d){var c=d&&d.scope;this.initConfig(d);if(d){d.scope=c}if(c){this.setScope(c);this.initialConfig.scope=c}this._internalId=Ext.id(this,this.idPrefix)},getAction:function(){return this.action},execute:function(){var c=this,d;delete c.error;delete c.success;c.complete=c.exception=false;c.setStarted();c.request=d=c.doExecute();if(d){d.setOperation(c)}return d},doExecute:Ext.emptyFn,abort:function(){var c=this,d=c.request;if(c.running&&d){c.getProxy().abort(d);c.request=null}},process:function(g,m,h,j){var o=this;j=j!==false;o.setResponse(h);o.setResultSet(g);if(g.getSuccess()){o.doProcess(g,m,h);o.setSuccessful(j)}else{if(j){o.setException(g.getMessage())}}},_commitSetOptions:{convert:true,commit:true},doProcess:function(u,B,C){var w=this,D=w._commitSetOptions,G=w.getRecords(),E=G.length,t=G[0].clientIdProperty,H=u.getRecords(),y=H?H.length:0,v,z,F,A;if(y&&t){v=Ext.Array.toValueMap(G,"id");for(A=0;A<y;++A){z=H[A];F=v[z[t]];if(F){delete v[F.id];delete z[t];F.set(z,D)}}for(A in v){v[A].commit()}}else{for(A=0;A<E;++A){F=G[A];if(y===0||!(z=H[A])){F.commit()}else{F.set(z,D)}}}},setStarted:function(){this.started=this.running=true},setCompleted:function(){var c=this,d=c.getProxy();c.complete=true;c.running=false;c.triggerCallbacks();if(d){d.completeOperation(c)}},setSuccessful:function(b){this.success=true;if(b){this.setCompleted()}},setException:function(d){var c=this;c.exception=true;c.success=c.running=false;c.error=d;c.setCompleted()},triggerCallbacks:function(){var d=this,c=d.getInternalCallback();if(c){c.call(d.getInternalScope()||d,d);d.setInternalCallback(null);d.setInternalScope(null)}if(c=d.getCallback()){c.call(d.getScope()||d,d.getRecords(),d,d.wasSuccessful());d.setCallback(null);d.setScope(null)}},hasException:function(){return this.exception},getError:function(){return this.error},getRecords:function(){var b;return this._records||((b=this.getResultSet())?b.getRecords():null)},isStarted:function(){return this.started},isRunning:function(){return this.running},isComplete:function(){return this.complete},wasSuccessful:function(){return this.isComplete()&&this.success===true},allowWrite:function(){return true}},1,0,0,0,0,0,[Ext.data.operation,"Operation",Ext.data,"Operation"],0));(Ext.cmd.derive("Ext.data.operation.Create",Ext.data.operation.Operation,{action:"create",isCreateOperation:true,order:10,config:{recordCreator:Ext.identityFn},doExecute:function(){return this.getProxy().create(this)}},0,0,0,0,["data.operation.create"],0,[Ext.data.operation,"Create"],0));(Ext.cmd.derive("Ext.data.operation.Destroy",Ext.data.operation.Operation,{action:"destroy",isDestroyOperation:true,order:30,foreignKeyDirection:-1,doProcess:function(){var g=this.getRecords(),f=g.length,d;for(d=0;d<f;++d){g[d].setErased()}},doExecute:function(){return this.getProxy().erase(this)},getRecordData:function(h,o){var j={},m=h.idField,g=this.getNameProperty()||"name";j[m[g]]=h.id;return j}},0,0,0,0,["data.operation.destroy"],0,[Ext.data.operation,"Destroy"],0));(Ext.cmd.derive("Ext.data.operation.Read",Ext.data.operation.Operation,{action:"read",isReadOperation:true,config:{filters:undefined,sorters:undefined,grouper:undefined,start:undefined,limit:undefined,page:undefined,addRecords:false},doExecute:function(){return this.getProxy().read(this)},doProcess:Ext.emptyFn,allowWrite:function(){return false}},0,0,0,0,["data.operation.read"],0,[Ext.data.operation,"Read"],0));(Ext.cmd.derive("Ext.data.operation.Update",Ext.data.operation.Operation,{action:"update",isUpdateOperation:true,order:20,config:{recordCreator:Ext.identityFn},doExecute:function(){return this.getProxy().update(this)}},0,0,0,0,["data.operation.update"],0,[Ext.data.operation,"Update"],0));(Ext.cmd.derive("Ext.data.SortTypes",Ext.Base,{singleton:true,none:Ext.identityFn,stripCommasRe:/,/g,stripTagsRE:/<\/?[^>]+>/gi,asText:function(b){return(b!=null)?String(b).replace(this.stripTagsRe,""):"\x00"},asUCText:function(b){return(b!=null)?String(b).toUpperCase().replace(this.stripTagsRe,""):"\x00"},asUCString:function(b){return(b!=null)?String(b).toUpperCase():"\x00"},asDate:function(b){if(!b){return 0}if(Ext.isDate(b)){return b.getTime()}return Date.parse(String(b))},asFloat:function(d){var c=parseFloat(String(d).replace(this.stripCommasRe,""));return isNaN(c)?0:c},asInt:function(d){var c=parseInt(String(d).replace(this.stripCommasRe,""),10);return isNaN(c)?0:c}},0,0,0,0,0,0,[Ext.data,"SortTypes"],0));(Ext.cmd.derive("Ext.data.validator.Validator",Ext.Base,{isValidator:true,type:"base",statics:{all:{},register:function(d,f){var g=this.all;g[d.toUpperCase()]=g[d.toLowerCase()]=g[d]=f.prototype}},onClassExtended:function(d,c){if(c.type){Ext.data.validator.Validator.register(c.type,d)}},constructor:function(b){if(typeof b==="function"){this.fnOnly=true;this.validate=b}else{this.initConfig(b)}},validate:function(){return true},clone:function(){var b=this;if(b.fnOnly){return new Ext.data.validator.Validator(b.validate)}return new b.self(b.getCurrentConfig())}},1,0,0,0,["data.validator.base"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.validator,"Validator"],function(){this.register(this.prototype.type,this)}));(Ext.cmd.derive("Ext.data.field.Field",Ext.Base,{alternateClassName:"Ext.data.Field",aliasPrefix:"data.field.",type:"auto",factoryConfig:{defaultProperty:"name"},isDataField:true,isField:true,allowBlank:true,allowNull:false,critical:false,defaultInvalidMessage:"This field is invalid",defaultValue:undefined,definedBy:null,depends:null,dependents:null,mapping:null,name:null,ordinal:undefined,persist:null,reference:null,unique:false,rank:null,stripRe:/[\$,%]/g,calculated:false,evil:false,identifier:false,onClassExtended:function(q,o){var m=o.sortType,p=q.prototype,j=p.validators,h=o.validators;if(m&&Ext.isString(m)){p.sortType=Ext.data.SortTypes[m]}if(h){if(!Ext.isArray(h)){h=[h]}delete o.validators;if(j){h=j.concat(h)}p.validators=h}},argumentNamesRe:/^function\s*\(\s*([^,\)\s]+)/,calculateRe:/[^\.a-z0-9_]([a-z_][a-z_0-9]*)\.([a-z_][a-z_0-9]*)/gi,constructor:function(D){var v=this,t=v.calculateRe,A,H,u,z,E,G,y,F,w,C,B;if(D){if(Ext.isString(D)){v.name=D}else{B=D.validators;if(B){delete D.validators;v.instanceValidators=B}Ext.apply(v,D)}}if(!v.allowNull){v.allowNull=!!v.reference}A=v.calculate;E=v.depends;if(A){v.convert=v.doCalculate;if(!E){if(!(E=A.$depends)){G={};w=A.toString();A.$depends=E=[];y=v.argumentNamesRe.exec(w);F=y?y[1]:"data";while((y=t.exec(w))){if(F===y[1]&&!G[C=y[2]]){G[C]=1;E.push(C)}}}v.depends=E}}u=v.defaultValue;if(v.convert){v.calculated=H=v.convert.length>1;v.evil=H&&!E}if(v.persist===null){v.persist=!A}z=v.sortType;if(!v.sortType){v.sortType=Ext.data.SortTypes.none}else{if(Ext.isString(z)){v.sortType=Ext.data.SortTypes[z]}}if(E&&typeof E==="string"){v.depends=[E]}v.cloneDefaultValue=u!==undefined&&(Ext.isDate(u)||Ext.isArray(u)||Ext.isObject(u))},setModelValidators:function(b){this._validators=null;this.modelValidators=b},compileValidators:function(){var b=this;b._validators=[];b.constructValidators(b.validators);b.constructValidators(b.modelValidators);b.constructValidators(b.instanceValidators)},constructValidators:function(h){if(h){if(!(h instanceof Array)){h=[h]}var j=h.length,o=this._validators,g,m;for(g=0;g<j;++g){m=h[g];if(m.fn){m=m.fn}o.push(Ext.Factory.dataValidator(m))}}},collate:function(o,g){var m=this,h=o,j=g;if(m.sortType){h=m.sortType(h);j=m.sortType(j)}return(h===j)?0:((h<j)?-1:1)},compare:function(c,d){return(c===d)?0:((c<d)?-1:1)},isEqual:function(c,d){return this.compare(c,d)===0},convert:null,serialize:null,validate:function(r,w,s,v){var t=this,u="",q,B,z,A,y;if(!t._validators){t.compileValidators()}z=t._validators;for(y=0,A=z.length;y<A;++y){B=z[y];q=B.validate(r,v);if(q!==true){q=q||t.defaultInvalidMessage;if(s){s.add(t.name,q);u=u||q}else{if(w){if(u){u+=w}u+=q}else{u=q;break}}}}return u||true},doCalculate:function(d,c){return c?this.calculate(c.data):d},getName:function(){return this.name},getAllowBlank:function(){return this.allowBlank},getAllowNull:function(){return this.allowNull},getConvert:function(){return this.convert},getDefaultValue:function(){return this.defaultValue},getDepends:function(){return this.depends},getMapping:function(){return this.mapping},hasMapping:function(){var b=this.mapping;return !!(b||b===0)},getPersist:function(){return this.persist},getSortType:function(){return this.sortType},getType:function(){return"auto"},deprecated:{5.1:{methods:{getSortDir:function(){return this.sortDir}}}}},1,0,0,0,["data.field.auto"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.field,"Field",Ext.data,"Field"],0));(Ext.cmd.derive("Ext.data.field.Boolean",Ext.data.field.Field,{isBooleanField:true,trueRe:/^\s*(?:true|yes|on|1)\s*$/i,convert:function(b){if(typeof b==="boolean"){return b}if(this.allowNull&&(b===undefined||b===null||b==="")){return null}return this.trueRe.test(String(b))},getType:function(){return"bool"}},0,0,0,0,["data.field.bool","data.field.boolean"],0,[Ext.data.field,"Boolean"],0));(Ext.cmd.derive("Ext.data.field.Date",Ext.data.field.Field,{sortType:"asDate",isDateField:true,dateFormat:null,dateReadFormat:null,dateWriteFormat:null,compare:function(g,j){var m=g instanceof Date,o=j instanceof Date,h;if(o&&m){h=g.getTime()-j.getTime();if(h===0){h=0}else{h=h<0?-1:1}}else{if(m===o){h=0}else{h=m?1:-1}}return h},convert:function(g){if(!g){return null}if(g instanceof Date){return g}var f=this.dateReadFormat||this.dateFormat,d;if(f){return Ext.Date.parse(g,f)}d=Date.parse(g);return d?new Date(d):null},serialize:function(d){var f=null,g;if(Ext.isDate(d)){g=this.getDateWriteFormat();f=g?Ext.Date.format(d,g):d}return f},getDateFormat:function(){return this.dateFormat},getDateReadFormat:function(){return this.dateReadFormat},getDateWriteFormat:function(){var b=this;if(b.hasOwnProperty("dateWriteFormat")){return b.dateWriteFormat}if(b.hasOwnProperty("dateFormat")){return b.dateFormat}return b.dateWriteFormat||b.dateFormat||"timestamp"},getType:function(){return"date"}},0,0,0,0,["data.field.date"],0,[Ext.data.field,"Date"],0));(Ext.cmd.derive("Ext.data.field.Integer",Ext.data.field.Field,{isNumeric:true,isIntegerField:true,numericType:"int",convert:function(f){if(typeof f==="number"){return this.getNumber(f)}var h=f===undefined||f===null||f==="",g=this.allowNull,j;if(h){j=g?null:0}else{j=this.parse(f);if(g&&isNaN(j)){j=null}}return j},getNumber:function(b){return parseInt(b,10)},getType:function(){return this.numericType},parse:function(b){return parseInt(String(b).replace(this.stripRe,""),10)},sortType:function(b){if(b==null){b=Infinity}return b}},0,0,0,0,["data.field.int","data.field.integer"],0,[Ext.data.field,"Integer"],0));(Ext.cmd.derive("Ext.data.field.Number",Ext.data.field.Integer,{isIntegerField:false,isNumberField:true,numericType:"float",getNumber:Ext.identityFn,parse:function(b){return parseFloat(String(b).replace(this.stripRe,""))}},0,0,0,0,["data.field.float","data.field.number"],0,[Ext.data.field,"Number"],0));(Ext.cmd.derive("Ext.data.field.String",Ext.data.field.Field,{sortType:"asUCString",isStringField:true,convert:function(c){var d=this.allowNull?null:"";return(c===undefined||c===null)?d:String(c)},getType:function(){return"string"}},0,0,0,0,["data.field.string"],0,[Ext.data.field,"String"],0));(Ext.cmd.derive("Ext.data.identifier.Generator",Ext.Base,{"abstract":true,factoryConfig:{defaultType:"sequential"},isGenerator:true,config:{id:null},constructor:function(f){var j=this,g,h;j.initConfig(f);h=j.getId();if(h){g=(f&&f.cache)||Ext.data.identifier.Generator.all;g[h]=j}},privates:{clone:function(c){var d=this.getInitialConfig();d=c?Ext.apply({},c,d):d;return new this.self(d)},statics:{all:{}}}},1,0,0,0,["data.identifier.default"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.identifier,"Generator"],function(){var g=this,f=Ext.Factory,d=f.dataIdentifier;f.dataIdentifier=function(c){var a=Ext.isString(c)?c:(c&&c.id),b=a&&((c&&c.cache)||g.all)[a];return b||d(c)}}));(Ext.cmd.derive("Ext.data.identifier.Sequential",Ext.data.identifier.Generator,{config:{increment:1,prefix:null,seed:1},generate:function(){var d=this,f=d._seed,g=d._prefix;d._seed+=d._increment;return(g!==null)?g+f:f}},0,0,0,0,["data.identifier.sequential"],0,[Ext.data.identifier,"Sequential"],0));(Ext.cmd.derive("Ext.data.Model",Ext.Base,{alternateClassName:"Ext.data.Record",isEntity:true,isModel:true,validIdRe:null,erasing:false,observableType:"record",constructor:function(D,w){var v=this,I=v.self,y=I.identifier,F=Ext.data.Model,u=F.identifier,J=v.idField.name,z,H,G,A,B,E,C;v.data=v.data=D||(D={});v.session=w||null;v.internalId=A=u.generate();if((z=D) instanceof Array){v.data=D={};C=v.getFields();B=Math.min(C.length,z.length);for(E=0;E<B;++E){D[C[E].name]=z[E]}}if(!(G=I.initializeFn)){I.initializeFn=G=F.makeInitializeFn(I)}if(!G.$nullFn){I.initializeFn(v)}if(!(v.id=H=D[J])&&H!==0){if(w){y=w.getIdentifier(I);H=y.generate()}else{if(u===y){H=A}else{H=y.generate()}}D[J]=v.id=H;v.phantom=true}if(w){w.add(v)}if(v.init&&Ext.isFunction(v.init)){v.init()}},editing:false,dirty:false,session:null,dropped:false,erased:false,clientIdProperty:null,evented:false,phantom:false,idProperty:"id",manyToMany:null,identifier:null,previousValues:undefined,proxy:undefined,schema:"default",versionProperty:null,generation:1,validationSeparator:null,convertOnSet:true,beginEdit:function(){var g=this,d=g.modified,f=g.previousValues;if(!g.editing){g.editing=true;g.editMemento={dirty:g.dirty,data:Ext.apply({},g.data),generation:g.generation,modified:d&&Ext.apply({},d),previousValues:f&&Ext.apply({},f)}}},cancelEdit:function(){var c=this,d=c.editMemento;if(d){c.editing=false;Ext.apply(c,d);c.editMemento=null}},endEdit:function(f,h){var j=this,g=j.editMemento;if(g){j.editing=false;j.editMemento=null;j.previousValues=g.previousValues;if(!f){if(!h){h=j.getModifiedFieldNames(g.data)}if(j.dirty||(h&&h.length)){j.callJoined("afterEdit",[h])}}}},getField:function(b){return this.self.getField(b)},getFields:function(){return this.self.getFields()},getFieldsMap:function(){return this.fieldsMap},getIdProperty:function(){return this.idProperty},getId:function(){return this.id},getObservableId:function(){return this.internalId},setId:function(c,d){this.set(this.idProperty,c,d)},getPrevious:function(c){var d=this.previousValues;return d&&d[c]},isModified:function(c){var d=this.modified;return !!(d&&d.hasOwnProperty(c))},getModified:function(c){var d;if(this.isModified(c)){d=this.modified[c]}return d},get:function(b){return this.data[b]},_singleProp:{},_rejectOptions:{convert:false,silent:true},set:function(at,U,ar){var S=this,av=S.self,R=S.data,aj=S.modified,an=S.previousValues,ay=S.session,T=Ext.isString(at),ax=(T?ar:U),ad=ax?ax.convert!==false:S.convertOnSet,ap=S.fieldsMap,X=ax&&ax.silent,ab=ax&&ax.commit,af=!(ax&&ax.refs===false)&&ay,ah=!(ax&&ax.dirty===false&&!ab),ac=null,Z,aw,Y,P,Q,ai,aq,al,ak,aa,ag=0,W,V,am,ao,ae,au;if(T){au=S._singleProp;au[at]=U}else{au=at}if(!(am=av.rankedFields)){am=av.rankFields()}W=am.length;do{for(Q in au){ae=au[Q];Z=R[Q];aq=S;aw=ap[Q];if(aw){if(ad&&aw.convert){ae=aw.convert(ae,S)}aq=aw;ao=aw.reference}else{ao=null}if(aq.isEqual(Z,ae)){continue}R[Q]=ae;(ac||(ac=[])).push(Q);(an||(S.previousValues=an={}))[Q]=Z;if(ao&&ao.cls){if(af){ay.updateReference(S,aw,ae,Z)}ao.onValueChange(S,ay,ae,Z)}aa=(ak=aw&&aw.dependents)&&ak.length;while(aa-->0){(al=ak[aa]).dirty=true;ag=ag?Math.min(ag,al.rank):al.rank}if(!aw||aw.persist){if(aj&&aj.hasOwnProperty(Q)){if(!ah||aq.isEqual(aj[Q],ae)){delete aj[Q];S.dirty=-1}}else{if(ah){if(!aj){S.modified=aj={}}S.dirty=true;aj[Q]=Z}}}if(Q===S.idField.name){Y=true;ai=Z;V=ae}}if(!ag){break}aw=am[ag-1];aw.dirty=false;if(T){delete au[at]}else{au=S._singleProp;T=true}at=aw.name;au[at]=R[at];ad=true;for(;ag<W;++ag){if(am[ag].dirty){break}}if(ag<W){++ag}else{ag=0}}while(1);if(S.dirty<0){S.dirty=false;for(P in aj){if(aj.hasOwnProperty(P)){S.dirty=true;break}}}if(T){delete au[at]}++S.generation;if(Y){S.id=V;S.callJoined("onIdChanged",[ai,V])}if(ab){S.commit(X,ac)}else{if(!X&&!S.editing&&ac){S.callJoined("afterEdit",[ac])}}return ac},reject:function(f){var g=this,d=g.modified;if(d){g.set(d,g._rejectOptions)}g.dropped=false;g.clearState();if(!f){g.callJoined("afterReject")}},commit:function(h,p){var q=this,m=q.versionProperty,o=q.data,j;q.clearState();if(m&&!q.phantom&&!isNaN(o[m])){++o[m]}q.phantom=false;if(q.dropped){q.erased=j=true}if(!h){if(j){q.callJoined("afterErase")}else{q.callJoined("afterCommit",[p])}}},clearState:function(){var b=this;b.dirty=b.editing=false;b.editMemento=b.modified=null},drop:function(g){var m=this,o=m.associations,j=m.session,h;if(m.erased||m.dropped){return}m.dropped=true;if(o&&g!==false){for(h in o){o[h].onDrop(m,j)}}m.callJoined("afterDrop");if(m.phantom){m.setErased()}},join:function(d){var f=this,g=f.joined;if(!g){g=f.joined=[d]}else{if(!g.length){g[0]=d}else{Ext.Array.include(g,d)}}if(d.isStore&&!f.store){f.store=d}},unjoin:function(o){var p=this,m=p.joined,j=m&&m.length,h=p.store,q;if(j===1&&m[0]===o){m.length=0}else{if(j){Ext.Array.remove(m,o)}}if(h===o){h=null;if(m){for(q=0,j=m.length;q<j;++q){o=m[q];if(o.isStore){h=o;break}}}p.store=h}},clone:function(h){var j=this,f=j.modified,g=j.copy(j.id,h);if(f){g.modified=Ext.apply({},f)}g.dirty=j.dirty;g.dropped=j.dropped;g.phantom=j.phantom;return g},copy:function(q,m){var p=this,o=Ext.apply({},p.data),h=p.idProperty,j=p.self;if(q||q===0){o[h]=q}else{if(q===null){delete o[h]}}return new j(o,m)},getProxy:function(){return this.self.getProxy()},getValidation:function(d){var g=this,f=g.validation;if(!f){g.validation=f=new Ext.data.Validation();f.attach(g)}if(d===true||(d!==false&&f.syncGeneration!==g.generation)){f.refresh(d)}return f},validate:function(){return new Ext.data.ErrorCollection().init(this)},isValid:function(){return this.getValidation().isValid()},toUrl:function(){var c=this.$className.split("."),d=c[c.length-1].toLowerCase();return d+"/"+this.getId()},erase:function(d){var c=this;c.erasing=true;c.drop();c.erasing=false;return c.save(d)},setErased:function(){this.erased=true;this.callJoined("afterErase")},getChanges:function(){return this.getData(this._getChangesOptions)},getCriticalFields:function(){var d=this.self,c=d.criticalFields;if(!c){d.rankFields();c=d.criticalFields}return c},getAssociatedData:function(J,K){var y=this,G=y.associations,v,C,L,z,F,H,A,D,E,I,B,w;J=J||{};y.$gathering=1;if(K){K=Ext.Object.chain(K)}for(E in G){D=G[E];L=D.getAssociatedItem(y);if(!L||L.$gathering){continue}if(L.isStore){L.$gathering=1;z=L.getData().items;H=z.length;F=[];for(C=0;C<H;++C){A=z[C];v=!A.$gathering;A.$gathering=1;if(K){w=K.associated;if(w===undefined){K.associated=v;B=true}else{if(!v){K.associated=false;B=true}}I=K}else{I=v?y._getAssociatedOptions:y._getNotAssociatedOptions}F.push(A.getData(I));if(B){K.associated=w;B=false}delete A.$gathering}delete L.$gathering}else{I=K||y._getAssociatedOptions;if(K&&K.associated===undefined){I.associated=true}F=L.getData(I)}J[E]=F}delete y.$gathering;return J},getData:function(K){var A=this,B={},J=(K===true)?A._getAssociatedOptions:(K||B),F=A.data,z=J.associated,N=J.changes,w=N&&J.critical,C=N?A.modified:F,D=A.fieldsMap,E=J.persist,L=J.serialize,H,y,G,I,M;if(C){for(I in C){M=F[I];y=D[I];if(y){if(E&&!y.persist){continue}if(L&&y.serialize){M=y.serialize(M,A)}}B[I]=M}}if(w){H=A.self.criticalFields||A.getCriticalFields();for(G=H.length;G-->0;){I=(y=H[G]).name;if(!(I in B)){M=F[I];if(L&&y.serialize){M=y.serialize(M,A)}B[I]=M}}}if(z){A.getAssociatedData(B,J)}return B},getTransientFields:function(){var d=this.self,c=d.transientFields;if(!c){d.rankFields();c=d.transientFields}return c},isLoading:function(){return !!this.loadOperation},abort:function(){var b=this.loadOperation;if(b){b.abort()}},load:function(m){m=Ext.apply({},m);var r=this,s=m.scope||r,u=r.getProxy(),p=m.callback,o=r.loadOperation,q=r.getId(),t;if(o){t=o.extraCalls;if(!t){t=o.extraCalls=[]}t.push(m);return o}m.id=q;m.recordCreator=function(c,a,d){var b=r.session;if(d){d.recordCreator=b?b.recordCreator:null}r.set(c,r._commitOptions);return r};m.internalCallback=function(h){var c=h.wasSuccessful()&&h.getRecords().length>0,b=r.loadOperation,f=b.extraCalls,j=[r,h],d=[r,h,c],g,a;r.loadOperation=null;if(c){Ext.callback(m.success,s,j)}else{Ext.callback(m.failure,s,j)}Ext.callback(p,s,d);if(f){for(g=0,a=f.length;g<a;++g){m=f[g];if(c){Ext.callback(m.success,s,j)}else{Ext.callback(m.failure,s,j)}Ext.callback(m.callback,s,d)}}r.callJoined("afterLoad")};delete m.callback;r.loadOperation=o=u.createOperation("read",m);o.execute();return o},save:function(o){o=Ext.apply({},o);var r=this,t=r.phantom,w=r.dropped,u=w?"destroy":(t?"create":"update"),p=o.scope||r,q=o.callback,s=r.getProxy(),v;o.records=[r];o.internalCallback=function(c){var b=[r,c],a=c.wasSuccessful();if(a){Ext.callback(o.success,p,b)}else{Ext.callback(o.failure,p,b)}b.push(a);Ext.callback(q,p,b)};delete o.callback;v=s.createOperation(u,o);if(w&&t){v.setResultSet(Ext.data.reader.Reader.prototype.nullResultSet);r.setErased();v.setSuccessful(true)}else{v.execute()}return v},inheritableStatics:{addFields:function(b){this.replaceFields(b)},replaceFields:function(u,y){var t=this,C=t.prototype,z=Ext.data.field.Field,B=t.fields,v=t.fieldsMap,E=t.fieldOrdinals,H,D,F,A,G,w;if(y===true){B.length=0;t.fieldsMap=v={};t.fieldOrdinals=E={}}else{if(y){for(D=y.length;D-->0;){G=y[D];if(G in E){delete E[G];delete v[G]}}for(D=0,A=B.length;D<A;++D){G=(H=B[D]).name;if(G in E){E[G]=D}else{B.splice(D,1);--D;--A}}}}for(D=0,A=u?u.length:0;D<A;D++){G=(H=u[D]).name;if(!(G in E)){E[G]=w=B.length;B.push(H=z.create(H));v[G]=H;H.ordinal=w;H.definedBy=H.owner=this}}t.idField=C.idField=F=v[C.idProperty];F.allowNull=F.critical=F.identifier=true;F.defaultValue=null;t.initializeFn=t.rankedFields=t.transientFields=t.criticalFields=null},removeFields:function(b){this.replaceFields(null,b)},getIdFromData:function(j){var f=this,g=f.idField,h=g.calculated?(new f(j)).id:j[g.name];return h},createWithId:function(j,d,o){var m=d,h=this;if(j||j===0){m={};if(d){Ext.apply(m,d)}m[h.idField.name]=j}return new h(m,o)},getFields:function(){return this.fields},getFieldsMap:function(){return this.fieldsMap},getField:function(b){return this.fieldsMap[b]||null},getProxy:function(){var f=this,g=f.proxy,h=f.defaultProxy,j;if(!g){g=f.proxyConfig;if(!g&&h){g=h}if(!g||!g.isProxy){if(typeof g==="string"){g={type:g}}j=f.schema.constructProxy(f);g=g?Ext.merge(j,g):j}g=f.setProxy(g)}return g},setProxy:function(d){var g=this,f;if(d){if(!d.isProxy){d=Ext.Factory.proxy(d)}else{f=d.getModel();if(f&&f!==g){d=d.clone()}}d.setModel(g)}return(g.prototype.proxy=g.proxy=d)},load:function(j,h,o){var g={},m;g[this.prototype.idProperty]=j;m=new this(g,o);m.load(h);return m}},deprecated:{5:{methods:{hasId:null,markDirty:null,setDirty:null,eachStore:function(m,p){var o=this,h=o.stores,j=h.length,q;for(q=0;q<j;++q){m.call(p,h[q])}},join:function(j){var f=this,g=f.stores,h=f.joined;if(!h){h=f.joined=[j]}else{h.push(j)}if(j.isStore){f.store=f.store||j;if(!g){g=f.stores=[]}g.push(j)}},unjoin:function(j){var f=this,g=f.stores,h=f.joined;if(h.length===1){h.length=0}else{Ext.Array.remove(h,j)}if(j.isStore){Ext.Array.remove(g,j);f.store=g[0]||null}}},properties:{persistenceProperty:null},inheritableStatics:{methods:{setFields:null}}}},privates:{_commitOptions:{commit:true},_getChangesOptions:{changes:true},_getAssociatedOptions:{associated:true},_getNotAssociatedOptions:{associated:false},copyFrom:function(v){var w=this,z=w.fields,s=z.length,C=[],u,B=0,y,A,r=w.idProperty,D,t;if(v){y=w.data;A=v.data;for(;B<s;B++){u=z[B];D=u.name;if(D!==r){t=A[D];if(t!==undefined&&!w.isEqual(y[D],t)){y[D]=t;C.push(D)}}}if(w.phantom&&!v.phantom){w.beginEdit();w.setId(v.getId());w.endEdit(true);w.commit(true)}}return C},callJoined:function(t,u){var r=this,p=r.joined,s=r.session,w,v,q,o;if(!p&&!s){return}if(u){u.unshift(r)}else{u=[r]}if(p){for(w=0,v=p.length;w<v;++w){o=p[w];if(o&&(q=o[t])){q.apply(o,u)}}}q=s&&s[t];if(q){q.apply(s,u)}},setSession:function(b){this.session=b;if(b){b.add(this)}},getModifiedFieldNames:function(j){var p=this,o=p.data,h=[],m=j||p.editMemento.data,q;for(q in o){if(o.hasOwnProperty(q)){if(!p.isEqual(o[q],m[q],q)){h.push(q)}}}return h},isEqual:function(g,h,j){var f;if(j){f=j.isField?j:this.fieldsMap[j];if(f){return f.isEqual(g,h)}}if(g instanceof Date&&h instanceof Date){return g.getTime()===h.getTime()}return g===h},statics:{EDIT:"edit",REJECT:"reject",COMMIT:"commit",defaultProxy:"memory",rankFields:function(){var q=this,r=q.prototype,v=q.fields,y=v.length,t=[],z=[],u=[],p,s,w;q.rankedFields=r.rankedFields=t;q.criticalFields=r.criticalFields=z;q.transientFields=r.transientFields=u;for(w=0;w<y;++w){s=v[w];if(s.critical){z.push(s)}if(!s.persist){u.push(s)}if(s.evil){(p||(p=[])).push(s)}else{if(!s.depends){t.push(s);s.rank=t.length}}}for(w=0;w<y;++w){if(!(s=v[w]).rank&&!s.evil){q.topoAdd(s)}}if(p){for(w=0,y=p.length;w<y;++w){t.push(s=p[w]);s.rank=t.length}}return t},topoAdd:function(o){var j=this,p=o.depends,m=p?p.length:0,r=j.rankedFields,s,q;for(s=0;s<m;++s){q=j.fieldsMap[p[s]];(q.dependents||(q.dependents=[])).push(o);if(!q.rank){j.topoAdd(q)}}r.push(o);o.rank=r.length},initFields:function(M,W,I){var P=Ext.data.field.Field,U=M.fields,H=[],O={},S={},X=[],C=I.fields,N=M.versionProperty||I.versionProperty,L=W.idProperty,R,V,E,T,K,F,Q,D,G,J;W.fields=I.fields=H;W.fieldOrdinals=I.fieldOrdinals=O;W.fieldsMap=I.fieldsMap=S;W.references=I.references=X;if(C){for(E=0,T=C.length;E<T;++E){H[E]=V=Ext.Object.chain(C[E]);V.dependents=null;V.owner=W;O[K=V.name]=E;S[K]=V;V.rank=null;if(V.generated){D=V;G=V.name}}}if(U){delete M.fields;for(E=0,T=U.length;E<T;++E){V=U[E];Q=V.reference;if(Q&&typeof Q!=="string"){Q=Ext.merge({},Q)}V.$reference=Q;V=P.create(U[E]);K=V.name;F=O[K];if(F===undefined){O[K]=F=H.length}S[K]=V;H[F]=V;V.definedBy=V.owner=W;V.ordinal=F;if(K===L){J=V}}}R=S[L];if(!R){if(D&&D.generated){F=D.ordinal}else{F=H.length}delete S[G];delete O[G];R=new P(L);H[F]=R;O[L]=F;S[L]=R;R.definedBy=W;R.ordinal=F;R.generated=true}else{if(J&&D&&D.generated){Ext.Array.remove(H,D);delete S[G];delete O[G];S[L]=J;for(E=0,T=H.length;E<T;++E){V=H[E];H.ordinal=E;O[V.name]=E}}}R.allowNull=R.critical=R.identifier=true;R.defaultValue=null;W.idField=I.idField=R;if(N){V=S[N];if(!V){F=H.length;V=new P({name:N,type:"int"});H[F]=V;O[N]=F;S[N]=V;V.definedBy=W;V.ordinal=F;V.generated=true}V.defaultValue=1;V.critical=true}},initValidators:function(A,H,y){var u=y.validators,C,v,E,w,B,D,z,F,G,t;if(u){C={};for(v in u){C[v]=Ext.Array.clone(u[v])}}w=A.validators||A.validations;if(w){delete A.validators;C=C||{};if(Ext.isArray(w)){E={};for(B=0,D=w.length;B<D;++B){t=w[B];F=t.field;if(!E[F]){E[F]=[]}t=t.fn||t;E[F].push(t)}w=E}for(F in w){z=w[F];if(!Ext.isArray(z)){z=[z]}G=C[F];if(C[F]){Ext.Array.push(G,z)}else{C[F]=z}}}if(C){for(F in C){v=H.getField(F);if(v){v.setModelValidators(C[F])}}}H.validators=y.validators=C},initAssociations:function(z,v,r){var A=v.associations,y=v.belongsTo,t=v.hasMany,q=v.hasOne,s=v.manyToMany,w,B,u;delete v.manyToMany;if(s){z.addMatrices(r,s)}delete v.associations;delete v.belongsTo;delete v.hasMany;delete v.hasOne;if(A){A=Ext.isArray(A)?A:[A];for(w=0,B=A.length;w<B;++w){u=A[w];switch(u.type){case"belongsTo":z.addLegacyBelongsTo(r,u);break;case"hasMany":z.addLegacyHasMany(r,u);break;case"hasOne":z.addLegacyHasOne(r,u);break}}}if(y){y=Ext.isArray(y)?y:[y];for(w=0,B=y.length;w<B;++w){z.addLegacyBelongsTo(r,y[w])}}if(t){t=Ext.isArray(t)?t:[t];for(w=0,B=t.length;w<B;++w){z.addLegacyHasMany(r,t[w])}}if(q){q=Ext.isArray(q)?q:[q];for(w=0,B=q.length;w<B;++w){z.addLegacyHasOne(r,q[w])}}z.afterLegacyAssociations(r)},initIdentifier:function(m,j,o){var h=m.identifier||m.idgen,p=o.identifier||j.schema._defaultIdentifier,q;if(h){delete m.identifier;delete m.idgen;h=Ext.Factory.dataIdentifier(h)}else{if(p){if(p.clone&&!p.getId()){h=p.clone()}else{if(p.isGenerator){h=p}else{h=Ext.Factory.dataIdentifier(p)}}}}j.identifier=o.identifier=h;if(!h){q=j.entityName;if(!q){q=Ext.id(null,"extModel")}j.identifier=Ext.Factory.dataIdentifier({type:"sequential",prefix:q+"-"})}},findValidator:function(u,t,m){var r=m.type||m,p=u[t],o,s,q;if(p){for(s=0,o=p.length;s<o;++s){q=p[s];if(q.type===r){return q}}}return null},makeInitializeFn:function(J){var I=["var "],B=["\nreturn function (e) {\n    var data = e.data, v;\n"],E=[],v=0,z,A,y,K,F,w,C,D,L,G,H;if(!(C=J.rankedFields)){C=J.rankFields()}for(G=0,H=C.length;G<H;++G){w=C[G];E[G]=D="f"+G;y=w.convert;if(G){I.push(",  \n    ")}I.push(D," = $fields["+G+"]");if((L=(w.defaultValue!==undefined))||y){K='data["'+w.name+'"]';++v;z=A="";if(w.cloneDefaultValue){z="Ext.clone(";A=")"}B.push("\n");if(y&&L){B.push("    v = ",K,";\n    if (v !== undefined) {\n        v = ",D,".convert(v, e);\n    }\n    if (v === undefined) {\n        v = ",z,D,".defaultValue",A,";\n    }\n    ",K," = v;")}else{if(y){B.push("    v = ",D,".convert(",K,",e);\n    if (v !== undefined) {\n        ",K," = v;\n    }\n")}else{if(L){B.push("    if (",K," === undefined) {\n        ",K," = ",z,D,".defaultValue",A,";\n    }\n")}}}}}if(!v){return Ext.emptyFn}I.push(";\n");I.push.apply(I,B);I.push("}");I=I.join("");F=new Function("$fields","Ext",I);return F(C,Ext)}}}},1,0,0,0,0,0,[Ext.data,"Model",Ext.data,"Record"],function(){var h=this,j=h.prototype,f=Ext.data.schema.Schema,g;h.proxyConfig=j.proxy;delete j.proxy;h.fields=[];h.fieldsMap=j.fieldsMap={};h.schema=j.schema=f.get(j.schema);j.idField=new Ext.data.field.Field(j.idProperty);h.identifier=new Ext.data.identifier.Sequential();h.onExtended(function(s,u){var a=s.prototype,r=u.schema,t=a.superclass.self,b,c,d;s.idProperty=u.idProperty||a.idProperty;if(r){delete u.schema;b=f.get(r)}else{if(!(b=a.schema)){b=g||(g=f.get("default"))}}s.rankFields=h.rankFields;s.topoAdd=h.topoAdd;a.schema=s.schema=b;if(!(c=u.entityName)){a.entityName=c=b.getEntityName(s)}s.entityName=c;s.fieldExtractors={};h.initIdentifier(u,s,a);h.initFields(u,s,a);h.initValidators(u,s,a);s.fields.items=s.fields;if(c){b.addEntity(s);h.initAssociations(b,u,s)}d=u.proxy;if(d){delete u.proxy}else{if(t!==h){d=t.proxyConfig||t.proxy}}s.proxyConfig=d})}));(Ext.cmd.derive("Ext.data.ResultSet",Ext.Base,{isResultSet:true,$configPrefixed:false,config:{loaded:true,count:null,total:null,success:false,records:null,message:null},constructor:function(b){this.initConfig(b)},getCount:function(){var c=(arguments.callee.$previous||Ext.Base.prototype.getCount).call(this),d;if(!c){d=this.getRecords();if(d){c=d.length}}return c}},1,0,0,0,0,0,[Ext.data,"ResultSet"],0));(Ext.cmd.derive("Ext.data.reader.Reader",Ext.Base,{alternateClassName:["Ext.data.Reader","Ext.data.DataReader"],factoryConfig:{defaultType:null},config:{totalProperty:"total",successProperty:"success",rootProperty:"",messageProperty:"",typeProperty:"",implicitIncludes:true,readRecordsOnFailure:true,model:null,proxy:null,transform:null,keepRawData:null},isReader:true,constructor:function(d){if(d&&d.hasOwnProperty("root")){d=Ext.apply({},d);d.rootProperty=d.root;delete d.root}var c=this;c.duringInit=1;c.mixins.observable.constructor.call(c,d);--c.duringInit;c.buildExtractors()},applyModel:function(b){return Ext.data.schema.Schema.lookupEntity(b)},applyTransform:function(b){if(b){if(Ext.isFunction(b)){b={fn:b}}else{if(b.charAt){b={fn:this[b]}}}return b.fn.bind(b.scope||this)}return b},forceBuildExtractors:function(){if(!this.duringInit){this.buildExtractors(true)}},updateTotalProperty:function(){this.forceBuildExtractors()},updateMessageProperty:function(){this.forceBuildExtractors()},updateSuccessProperty:function(){this.forceBuildExtractors()},read:function(f,h){var j,g;if(f){if(f.responseText){g=this.getResponseData(f);if(g&&g.__$isError){return new Ext.data.ResultSet({total:0,count:0,records:[],success:false,message:g.msg})}else{j=this.readRecords(g,h)}}else{j=this.readRecords(f,h)}}return j||this.nullResultSet},getNullResultSet:function(){return this.nullResultSet},createReadError:function(b){return{__$isError:true,msg:b}},readRecords:function(C,E,A){var z=this,B=A&&A.recordsOnly,u=A&&A.asRoot,t,D,F,w,y,v,H,G;G=this.getTransform();if(G){C=G(C)}z.buildExtractors();if(z.getKeepRawData()){z.rawData=C}if(z.hasListeners.rawdata){z.fireEventArgs("rawdata",[C])}C=z.getData(C);t=true;D=0;F=[];if(z.getSuccessProperty()){v=z.getSuccess(C);if(v===false||v==="false"){t=false}}if(z.getMessageProperty()){H=z.getMessage(C)}if(t||z.getReadRecordsOnFailure()){w=(u||Ext.isArray(C))?C:z.getRoot(C);if(w){y=w.length}if(z.getTotalProperty()){v=parseInt(z.getTotal(C),10);if(!isNaN(v)){y=v}}if(w){F=z.extractData(w,E);D=F.length}}return B?F:new Ext.data.ResultSet({total:y||D,count:D,records:F,success:t,message:H})},extractData:function(J,C){var v=this,B=C&&C.model?Ext.data.schema.Schema.lookupEntity(C.model):v.getModel(),E=B.schema,I=E.hasAssociations(B)&&v.getImplicitIncludes(),u=v.getFieldExtractorInfo(B.fieldExtractors),H=J.length,F=new Array(H),y=v.getTypeProperty(),w,G,D,z,A;if(!H&&Ext.isObject(J)){J=[J];H=1}for(A=0;A<H;A++){z=J[A];if(!z.isModel){G=z;if(y&&(D=v.getChildType(E,G,y))){w=D.getProxy().getReader();z=w.extractRecord(G,C,D,E.hasAssociations(D)&&w.getImplicitIncludes(),w.getFieldExtractorInfo(D.fieldExtractors))}else{z=v.extractRecord(G,C,B,I,u)}if(z.isModel&&z.isNode){z.raw=G}}if(z.onLoad){z.onLoad()}F[A]=z}return F},getChildType:function(f,j,h){var g;switch(typeof h){case"string":return f.getEntity(j[h]);case"object":g=h.namespace;return f.getEntity((g?g+".":"")+j[h.name]);case"function":return f.getEntity(h(j))}},extractRecordData:function(j,h){var f=h&&h.model?Ext.data.schema.Schema.lookupEntity(h.model):this.getModel(),g=this.getFieldExtractorInfo(f.fieldExtractors);return this.extractRecord(j,h,f,false,g)},extractRecord:function(w,v,u,o,q){var r=this,s=(v&&v.recordCreator)||r.defaultRecordCreator,p,t;p=r.extractModelData(w,q);t=s.call(r,p,u||r.getModel(),v);if(o&&t.isModel){r.readAssociated(t,w,v)}return t},getFieldExtractorInfo:function(g){if(!g){return}var f=this.$className,d=g[f];if(d===undefined){g[f]=d=this.buildFieldExtractors()}return d},buildFieldExtractors:function(){var s=this.getFields(),r=s.length,u=[],p=[],v=null,y=0,q,z,t,w;for(t=0;t<r;++t){q=s[t];w=this.createFieldAccessor(q);if(w){z=q.name;u.push("val = extractors["+y+"](raw); if (val !== undefined) { data['"+z+"'] = val; }");p.push(w);++y}}if(u.length){v={extractors:p,fn:new Function("raw","data","extractors","var val;"+u.join(""))}}return v},defaultRecordCreator:function(d,g){var f=new g(d);f.phantom=false;return f},getModelData:function(b){return{}},extractModelData:function(f,g){var h=this.getModelData(f),j;if(g){j=g.fn;j(f,h,g.extractors)}return h},readAssociated:function(j,o,p){var q=j.associations,h,m;for(h in q){if(q.hasOwnProperty(h)){m=q[h];if(m.cls){m.read(j,o,this,p)}}}},getFields:function(){return this.getModel().fields},getData:Ext.identityFn,getRoot:Ext.identityFn,getResponseData:function(b){},onMetaChange:function(o){var p=this,j=o.fields,s,q,m,r;p.metaData=o;if(o.root){p.setRootProperty(o.root)}if(o.totalProperty){p.setTotalProperty(o.totalProperty)}if(o.successProperty){p.setSuccessProperty(o.successProperty)}if(o.messageProperty){p.setMessageProperty(o.messageProperty)}m=o.clientIdProperty;if(j){q=Ext.define(null,{extend:"Ext.data.Model",fields:j,clientIdProperty:m});p.setModel(q);r=p.getProxy();if(r){r.setModel(q)}}else{if(m){s=p.getModel();if(s){s.self.prototype.clientIdProperty=m}}}},buildExtractors:function(m){var g=this,o,h,j;if(m||!g.hasExtractors){o=g.getTotalProperty();h=g.getSuccessProperty();j=g.getMessageProperty();if(o){g.getTotal=g.getAccessor(o)}if(h){g.getSuccess=g.getAccessor(h)}if(j){g.getMessage=g.getAccessor(j)}g.hasExtractors=true;return true}},getAccessor:function(j){var m=this,h=m.extractorCache,g,o;if(typeof j==="string"){o=m.getAccessorKey(j);g=h.get(o);if(!g){g=m.createAccessor(j);h.add(o,g)}}else{g=m.createAccessor(j)}return g},getAccessorKey:function(b){return this.$className+b},createAccessor:Ext.emptyFn,createFieldAccessor:Ext.emptyFn,destroy:function(){var b=this;b.model=b.getTotal=b.getSuccess=b.getMessage=b.rawData=null;b.onMetaChange=null;b.transform=null;b.callParent()},privates:{copyFrom:function(d){var c=this;d.buildExtractors();c.getTotal=d.getTotal;c.getSuccess=d.getSuccess;c.getMessage=d.getMessage;++c.duringInit;c.setConfig(d.getConfig());--c.duringInit;c.hasExtractors=true}}},1,0,0,0,["reader.base"],[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.reader,"Reader",Ext.data,"Reader",Ext.data,"DataReader"],function(c){var d=c.prototype;Ext.apply(d,{nullResultSet:new Ext.data.ResultSet({total:0,count:0,records:[],success:true,message:""})});d.extractorCache=new Ext.util.LruCache()}));(Ext.cmd.derive("Ext.data.writer.Writer",Ext.Base,{factoryConfig:{defaultType:null},alternateClassName:["Ext.data.DataWriter","Ext.data.Writer"],config:{clientIdProperty:null,allDataOptions:{persist:true},partialDataOptions:{changes:true,critical:true},writeAllFields:false,dateFormat:null,nameProperty:"name",writeRecordId:true,transform:null},isWriter:true,constructor:function(b){this.initConfig(b)},applyTransform:function(b){if(b){if(Ext.isFunction(b)){b={fn:b}}return b.fn.bind(b.scope||this)}return b},write:function(o){var q=o.getOperation(),h=q.getRecords()||[],j=h.length,m=[],p;for(p=0;p<j;p++){m.push(this.getRecordData(h[p],q))}return this.writeRecords(o,m)},writeRecords:Ext.emptyFn,getRecordData:function(B,D){var y=this,F=y.getNameProperty(),J=F!=="name",H=B.self.idField,L=H[F]||H.name,M=B.id,G=y.getWriteAllFields(),z,I,E,K,N,A,C,w;if(H.serialize){M=H.serialize(M)}if(!G&&D&&D.isDestroyOperation){z={};z[L]=M}else{I=y.getDateFormat();E=B.phantom;K=(E||G)?y.getAllDataOptions():y.getPartialDataOptions();N=E&&y.getClientIdProperty();A=B.getFieldsMap();K.serialize=false;C=B.getData(K);z=J?{}:C;if(N){z[N]=M;delete C[L]}else{if(!y.getWriteRecordId()){delete C[L]}}for(L in C){M=C[L];if(!(w=A[L])){if(J){z[L]=M}}else{if(w.isDateField&&I&&Ext.isDate(M)){M=Ext.Date.format(M,I)}else{if(w.serialize){M=w.serialize(M,B)}}if(J){L=w[F]||L}z[L]=M}}}return z}},1,0,0,0,["writer.base"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.writer,"Writer",Ext.data,"DataWriter",Ext.data,"Writer"],0));(Ext.cmd.derive("Ext.data.proxy.Proxy",Ext.Base,{$configPrefixed:false,alternateClassName:["Ext.data.DataProxy","Ext.data.Proxy"],config:{batchOrder:"create,update,destroy",batchActions:true,model:undefined,reader:{type:"json"},writer:{type:"json"}},isProxy:true,isSynchronous:false,constructor:function(b){this.mixins.observable.constructor.call(this,b);this.pendingOperations={}},applyModel:function(b){return Ext.data.schema.Schema.lookupEntity(b)},updateModel:function(c){if(c){var d=this.getReader();if(d&&!d.getModel()){d.setModel(c)}}},applyReader:function(b){if(this.isSynchronous){b=b||{};b.keepRawData=true}return Ext.Factory.reader(b)},updateReader:function(f){if(f){var g=this,d=g.getModel();if(!d){d=f.getModel();if(d){g.setModel(d)}}else{f.setModel(d)}if(f.onMetaChange){f.onMetaChange=Ext.Function.createSequence(f.onMetaChange,g.onMetaChange,g)}}},applyWriter:function(c){var d=this.getReader();c=Ext.Factory.writer(c);if(c.getRecord&&!c.getRecord()&&d&&d.getRecord){d=d.getRecord();if(d){c.setRecord(d)}}return c},abort:Ext.emptyFn,onMetaChange:function(b){this.fireEvent("metachange",this,b)},create:Ext.emptyFn,read:Ext.emptyFn,update:Ext.emptyFn,erase:Ext.emptyFn,batch:function(E,r){var u=this,v=u.getBatchActions(),y,C,z,B,A,a,D,F,w;if(E.operations===undefined){E={operations:E,listeners:r}}if(E.batch){if(Ext.isDefined(E.batch.runOperation)){y=Ext.applyIf(E.batch,{proxy:u,listeners:{}})}}else{E.batch={proxy:u,listeners:E.listeners||{}}}if(!y){y=new Ext.data.Batch(E.batch)}y.on("complete",Ext.bind(u.onBatchComplete,u,[E],0));z=u.getBatchOrder().split(",");B=z.length;for(a=0;a<B;a++){A=z[a];C=E.operations[A];if(C){if(v){y.add(u.createOperation(A,{records:C,params:E.params}))}else{F=C.length;for(D=0;D<F;D++){w=C[D];y.add(u.createOperation(A,{records:[w],params:E.params}))}}}}y.start();return y},onBatchComplete:function(f,d){var g=f.scope||this;if(d.hasException()){if(Ext.isFunction(f.failure)){Ext.callback(f.failure,g,[d,f])}}else{if(Ext.isFunction(f.success)){Ext.callback(f.success,g,[d,f])}}if(Ext.isFunction(f.callback)){Ext.callback(f.callback,g,[d,f])}},createOperation:function(g,d){var f=Ext.createByAlias("data.operation."+g,d);f.setProxy(this);this.pendingOperations[f._internalId]=f;return f},completeOperation:function(b){delete this.pendingOperations[b._internalId]},clone:function(){return new this.self(this.getInitialConfig())},destroy:function(){var d=this.pendingOperations,f,g;for(f in d){g=d[f];if(g&&g.isRunning()){g.abort()}}this.pendingOperations=null}},1,0,0,0,["proxy.proxy"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable],[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.data.proxy,"Proxy",Ext.data,"DataProxy",Ext.data,"Proxy"],0));(Ext.cmd.derive("Ext.data.proxy.Client",Ext.data.proxy.Proxy,{alternateClassName:"Ext.data.ClientProxy",isSynchronous:true,clear:function(){}},0,0,0,0,0,0,[Ext.data.proxy,"Client",Ext.data,"ClientProxy"],0));(Ext.cmd.derive("Ext.data.proxy.Memory",Ext.data.proxy.Client,{alternateClassName:"Ext.data.MemoryProxy",isMemoryProxy:true,config:{enablePaging:false,data:{$value:null,merge:function(h,g,j,f){if(Ext.isArray(h)){return Ext.Array.clone(h)}else{return Ext.clone(h)}}}},finishOperation:function(f){var j=0,h=f.getRecords(),g=h.length;for(j;j<g;j++){h[j].commit()}f.setSuccessful(true)},create:function(b){this.finishOperation(b)},update:function(b){this.finishOperation(b)},erase:function(b){this.finishOperation(b)},read:function(r){var p=this,o=p.getReader().read(p.getData()),t=o.getRecords(),q=r.getSorters(),w=r.getGrouper(),u=r.getFilters(),v=r.getStart(),s=r.getLimit();if(r.process(o,null,null,false)!==false){if(u&&u.length){o.setRecords(t=Ext.Array.filter(t,Ext.util.Filter.createFilterFn(u)));o.setTotal(t.length)}if(w){q=q?q.concat(w):q}if(q&&q.length){o.setRecords(t=Ext.Array.sort(t,Ext.util.Sortable.createComparator(q)))}if(p.getEnablePaging()&&v!==undefined&&s!==undefined){if(v>=o.getTotal()){o.setConfig({success:false,records:[],total:0})}else{o.setRecords(Ext.Array.slice(t,v,v+s))}}r.setCompleted()}},clear:Ext.emptyFn},0,0,0,0,["proxy.memory"],0,[Ext.data.proxy,"Memory",Ext.data,"MemoryProxy"],0));(Ext.cmd.derive("Ext.data.ProxyStore",Ext.data.AbstractStore,{config:{model:undefined,fields:null,proxy:undefined,autoLoad:undefined,autoSync:false,batchUpdateMode:"operation",sortOnLoad:true,trackRemoved:true,asynchronousLoad:undefined},onClassExtended:function(g,m,h){var o=m.model,j;if(typeof o==="string"){j=h.onBeforeCreated;h.onBeforeCreated=function(){var a=this,b=arguments;Ext.require(o,function(){j.apply(a,b)})}}},implicitModel:"Ext.data.Model",autoSyncSuspended:0,constructor:function(d){var c=this;c.removed=[];Ext.data.AbstractStore.prototype.constructor.apply(this,arguments);if(c.getAsynchronousLoad()===false){c.flushLoad()}},applyAsynchronousLoad:function(b){if(b==null){b=!this.loadsSynchronously()}return b},updateAutoLoad:function(b){this.getData();if(b){this.load(Ext.isObject(b)?b:undefined)}},getTotalCount:function(){return this.totalCount||0},applyFields:function(b){if(b){this.createImplicitModel(b)}},applyModel:function(b){if(b){b=Ext.data.schema.Schema.lookupEntity(b)}else{this.getFields();b=this.getModel()||this.createImplicitModel()}return b},applyProxy:function(c){var d=this.getModel();if(c!==null){if(c){if(c.isProxy){c.setModel(d)}else{if(Ext.isString(c)){c={type:c,model:d}}else{if(!c.model){c=Ext.apply({model:d},c)}}c=Ext.createByAlias("proxy."+c.type,c);c.autoCreated=true}}else{if(d){c=d.getProxy()}}if(!c){c=Ext.createByAlias("proxy.memory");c.autoCreated=true}}return c},applyState:function(c){var d=this;Ext.data.AbstractStore.prototype.applyState.call(this,c);if(d.getAutoLoad()||d.isLoaded()){d.load()}},updateProxy:function(c,d){this.proxyListeners=Ext.destroy(this.proxyListeners)},updateTrackRemoved:function(b){this.cleanRemoved();this.removed=b?[]:null},onMetaChange:function(d,c){this.fireEvent("metachange",this,c)},create:function(o,q){var p=this,m=p.getModel(),j=new m(o),h;q=Ext.apply({},q);if(!q.records){q.records=[j]}q.internalScope=p;q.internalCallback=p.onProxyWrite;h=p.createOperation("create",q);return h.execute()},read:function(){return this.load.apply(this,arguments)},update:function(d){var g=this,f;d=Ext.apply({},d);if(!d.records){d.records=g.getUpdatedRecords()}d.internalScope=g;d.internalCallback=g.onProxyWrite;f=g.createOperation("update",d);return f.execute()},onProxyWrite:function(f){var j=this,h=f.wasSuccessful(),g=f.getRecords();switch(f.getAction()){case"create":j.onCreateRecords(g,f,h);break;case"update":j.onUpdateRecords(g,f,h);break;case"destroy":j.onDestroyRecords(g,f,h);break}if(h){j.fireEvent("write",j,f);j.fireEvent("datachanged",j)}},onCreateRecords:Ext.emptyFn,onUpdateRecords:Ext.emptyFn,onDestroyRecords:function(d,f,g){if(g){this.cleanRemoved()}},erase:function(d){var g=this,f;d=Ext.apply({},d);if(!d.records){d.records=g.getRemovedRecords()}d.internalScope=g;d.internalCallback=g.onProxyWrite;f=g.createOperation("destroy",d);return f.execute()},onBatchOperationComplete:function(c,d){return this.onProxyWrite(d)},onBatchComplete:function(q,j){var m=this,h=q.operations,o=h.length,p;if(m.batchUpdateMode!=="operation"){m.suspendEvents();for(p=0;p<o;p++){m.onProxyWrite(h[p])}m.resumeEvents()}m.isSyncing=false;m.fireEvent("datachanged",m)},onBatchException:function(c,d){},filterNew:function(b){return b.phantom===true&&b.isValid()},getNewRecords:function(){return[]},getUpdatedRecords:function(){return[]},getModifiedRecords:function(){return[].concat(this.getNewRecords(),this.getUpdatedRecords())},filterUpdated:function(b){return b.dirty===true&&b.phantom!==true&&b.isValid()},getRemovedRecords:function(){var b=this.getRawRemovedRecords();return b?Ext.Array.clone(b):b},sync:function(s){var q=this,j={},p=q.getNewRecords(),r=q.getUpdatedRecords(),m=q.getRemovedRecords(),o=false;q.needsSync=false;if(p.length>0){j.create=p;o=true}if(r.length>0){j.update=r;o=true}if(m.length>0){j.destroy=m;o=true}if(o&&q.fireEvent("beforesync",j)!==false){q.isSyncing=true;s=s||{};q.proxy.batch(Ext.apply(s,{operations:j,listeners:q.getBatchListeners()}))}return q},getBatchListeners:function(){var c=this,d={scope:c,exception:c.onBatchException,complete:c.onBatchComplete};if(c.batchUpdateMode==="operation"){d.operationcomplete=c.onBatchOperationComplete}return d},save:function(){return this.sync.apply(this,arguments)},load:function(d){var c=this;if(typeof d==="function"){d={callback:d}}else{d=d?Ext.Object.chain(d):{}}c.pendingLoadOptions=d;if(c.getAsynchronousLoad()){if(!c.loadTimer){c.loadTimer=Ext.asap(c.flushLoad,c)}}else{c.flushLoad()}return c},flushLoad:function(){var g=this,d=g.pendingLoadOptions,f;g.clearLoadTask();if(!d){return}g.setLoadOptions(d);if(g.getRemoteSort()&&d.sorters){g.fireEvent("beforesort",g,d.sorters)}f=Ext.apply({internalScope:g,internalCallback:g.onProxyLoad,scope:g},d);g.lastOptions=f;f=g.createOperation("read",f);if(g.fireEvent("beforeload",g,f)!==false){g.onBeforeLoad(f);g.loading=true;f.execute()}},reload:function(d){var c=Ext.apply({},d,this.lastOptions);return this.load(c)},onEndUpdate:function(){var b=this;if(b.needsSync&&b.autoSync&&!b.autoSyncSuspended){b.sync()}},afterReject:function(d){var c=this;if(c.contains(d)){c.onUpdate(d,Ext.data.Model.REJECT,null);c.fireEvent("update",c,d,Ext.data.Model.REJECT,null)}},afterCommit:function(f,g){var d=this;if(!g){g=null}if(d.contains(f)){d.onUpdate(f,Ext.data.Model.COMMIT,g);d.fireEvent("update",d,f,Ext.data.Model.COMMIT,g)}},afterErase:function(b){this.onErase(b)},onErase:Ext.emptyFn,onUpdate:Ext.emptyFn,onDestroy:function(){var c=this,d=c.getProxy();c.clearLoadTask();c.getData().destroy();c.data=null;c.setProxy(null);if(d.autoCreated){d.destroy()}c.setModel(null)},hasPendingLoad:function(){return !!this.pendingLoadOptions||this.isLoading()},isLoading:function(){return !!this.loading},isLoaded:function(){return this.loadCount>0},suspendAutoSync:function(){++this.autoSyncSuspended},resumeAutoSync:function(c){var d=this;if(d.autoSyncSuspended&&!--d.autoSyncSuspended){if(c){d.sync()}}},removeAll:Ext.emptyFn,clearData:Ext.emptyFn,privates:{getRawRemovedRecords:function(){return this.removed},onExtraParamsChanged:function(){},clearLoadTask:function(){Ext.asapCancel(this.loadTimer);this.pendingLoadOptions=this.loadTimer=null},cleanRemoved:function(){var g=this.getRawRemovedRecords(),f,d;if(g){for(d=0,f=g.length;d<f;++d){g[d].unjoin(this)}g.length=0}},createOperation:function(m,h){var j=this,g=j.getProxy(),o;if(!j.proxyListeners){o={scope:j,destroyable:true,beginprocessresponse:j.beginUpdate,endprocessresponse:j.endUpdate};if(!j.disableMetaChangeEvent){o.metachange=j.onMetaChange}j.proxyListeners=g.on(o)}return g.createOperation(m,h)},createImplicitModel:function(h){var j=this,g={extend:j.implicitModel,statics:{defaultProxy:"memory"}},m,o;if(h){g.fields=h}o=Ext.define(null,g);j.setModel(o);m=j.getProxy();if(m){o.setProxy(m)}else{j.setProxy(o.getProxy())}},loadsSynchronously:function(){return this.getProxy().isSynchronous},onBeforeLoad:Ext.privateFn,removeFromRemoved:function(d){var c=this.getRawRemovedRecords();if(c){Ext.Array.remove(c,d);d.unjoin(this)}},setLoadOptions:function(g){var j=this,f,h;if(j.getRemoteFilter()){f=j.getFilters(false);if(f&&f.getCount()){g.filters=f.getRange()}}if(j.getRemoteSort()){h=j.getSorters(false);if(h&&h.getCount()){g.sorters=h.getRange()}}}}},1,0,0,0,0,0,[Ext.data,"ProxyStore"],0));(Ext.cmd.derive("Ext.data.LocalStore",Ext.Mixin,{mixinConfig:{id:"localstore"},config:{extraKeys:null},applyExtraKeys:function(f){var g,d=this.getData();d.setExtraKeys(f);f=d.getExtraKeys();for(g in f){this[g]=f[g]}},add:function(b){return this.insert(this.getCount(),arguments.length===1?b:arguments)},constructDataCollection:function(){return new Ext.util.Collection({rootProperty:"data"})},createModel:function(f){var d=this.getSession(),g;if(!f.isModel){g=this.getModel();f=new g(f,d)}return f},createFiltersCollection:function(){return this.getData().getFilters()},createSortersCollection:function(){var b=this.getData().getSorters();b.setSorterConfigure(this.addFieldTransform,this);return b},onCollectionSort:function(){this.onSorterEndUpdate()},onCollectionFilter:function(){this.onFilterEndUpdate()},notifySorterChange:function(){this.getData().onSorterChange()},forceLocalSort:function(){this.getData().onSortChange()},contains:function(b){return this.indexOf(b)>-1},each:function(o,p){var m=this.data.items,j=m.length,h,q;for(q=0;q<j;++q){h=m[q];if(o.call(p||h,h,q,j)===false){break}}},collect:function(g,h,o){var m=this,j=m.getData();if(o===true&&j.filtered){j=j.getSource()}return j.collect(g,"data",h)},getById:function(c){var d=this.getData();if(d.filtered){d=d.getSource()}return d.get(c)||null},getByInternalId:function(f){var g=this.getData(),d;if(g.filtered){if(!g.$hasExtraKeys){d=this.makeInternalKeyCfg();g.setExtraKeys(d);g.$hasExtraKeys=true}g=g.getSource()}if(!g.$hasExtraKeys){g.setExtraKeys(d||this.makeInternalKeyCfg());g.$hasExtraKeys=true}return g.byInternalId.get(f)||null},getDataSource:function(){var b=this.getData();return b.getSource()||b},indexOf:function(b){return this.getData().indexOf(b)},indexOfId:function(b){return this.indexOf(this.getById(b))},insert:function(o,g){var j=this,h,m;if(g){if(!Ext.isIterable(g)){g=[g]}else{g=Ext.Array.clone(g)}h=g.length}if(!h){return[]}for(m=0;m<h;++m){g[m]=j.createModel(g[m])}j.getData().insert(o,g);return g},queryBy:function(d,f){var g=this.getData();return(g.getSource()||g).createFiltered(d,f)},query:function(o,p,m,j,h){var q=this.getData();return(q.getSource()||q).createFiltered(o,p,m,j,h)},first:function(b){return this.getData().first(b)||null},last:function(b){return this.getData().last(b)||null},sum:function(g,f){var d=this.getData();return(f&&this.isGrouped())?d.sumByGroup(g):d.sum(g)},count:function(d){var c=this.getData();return(d&&this.isGrouped())?c.countByGroup():c.count()},min:function(g,f){var d=this.getData();return(f&&this.isGrouped())?d.minByGroup(g):d.min(g)},max:function(g,f){var d=this.getData();return(f&&this.isGrouped())?d.maxByGroup(g):d.max(g)},average:function(g,f){var d=this.getData();return(f&&this.isGrouped())?d.averageByGroup(g):d.average(g)},aggregate:function(s,p,u,r){var t=this,z,v,y,q,w;if(u&&t.isGrouped()){z=t.getGroups().items;v=z.length;y={};for(w=0;w<v;++w){q=z[w];y[q.getGroupKey()]=t.getAggregate(s,p||t,q.items,r)}return y}else{return t.getAggregate(s,p,t.getData().items,r)}},getAggregate:function(p,q,s,o){var j=[],m=s.length,r;for(r=0;r<m;++r){j[r]=s[r].get(o)}return p.call(q||this,s,j)},addObserver:function(d){var c=this.observers;if(!c){this.observers=c=new Ext.util.Collection()}c.add(d)},removeObserver:function(d){var c=this.observers;if(c){c.remove(d)}},callObservers:function(q,t){var p=this.observers,o,u,s,m,r;if(p){u=p.items;if(t){t.unshift(this)}else{t=[this]}for(s=0,o=u.length;s<o;++s){r=u[s];m="onSource"+q;if(r[m]){r[m].apply(r,t)}}}},queryRecordsBy:function(q,r){var o=this.getData(),p=[],m,s,j;o=(o.getSource()||o).items;r=r||this;for(s=0,m=o.length;s<m;++s){j=o[s];if(q.call(r,j)===true){p.push(j)}}return p},queryRecords:function(o,p){var q=this.getData(),r=[],m,s,j;q=(q.getSource()||q).items;for(s=0,m=q.length;s<m;++s){j=q[s];if(j.get(o)===p){r.push(j)}}return r},privates:{isLast:function(b){return b===this.last()},makeInternalKeyCfg:function(){return{byInternalId:{property:"internalId",rootProperty:""}}}}},0,0,0,0,0,0,[Ext.data,"LocalStore"],0));(Ext.cmd.derive("Ext.data.proxy.Server",Ext.data.proxy.Proxy,{alternateClassName:"Ext.data.ServerProxy",isRemote:true,config:{url:"",pageParam:"page",startParam:"start",limitParam:"limit",groupParam:"group",groupDirectionParam:"groupDir",sortParam:"sort",filterParam:"filter",directionParam:"dir",idParam:"id",simpleSortMode:false,simpleGroupMode:false,noCache:true,cacheString:"_dc",timeout:30000,api:{create:undefined,read:undefined,update:undefined,destroy:undefined},extraParams:{}},create:function(){return this.doRequest.apply(this,arguments)},read:function(){return this.doRequest.apply(this,arguments)},update:function(){return this.doRequest.apply(this,arguments)},erase:function(){return this.doRequest.apply(this,arguments)},setExtraParam:function(f,d){var g=this.getExtraParams();g[f]=d;this.fireEvent("extraparamschanged",g)},updateExtraParams:function(c,d){this.fireEvent("extraparamschanged",c)},buildRequest:function(m){var p=this,j=Ext.apply({},m.getParams()),o=Ext.applyIf(j,p.getExtraParams()||{}),q,r,s;Ext.applyIf(o,p.getParams(m));r=m.getId();s=p.getIdParam();if(r!==undefined&&o[s]===undefined){o[s]=r}q=new Ext.data.Request({params:o,action:m.getAction(),records:m.getRecords(),url:m.getUrl(),operation:m,proxy:p});q.setUrl(p.buildUrl(q));m.setRequest(q);return q},processResponse:function(p,u,q,m){var r=this,t,o,s;r.fireEvent("beginprocessresponse",r,m,u);if(p===true){o=r.getReader();if(m.status===204){s=o.getNullResultSet()}else{s=o.read(r.extractResponseData(m),{recordCreator:u.getRecordCreator()})}u.process(s,q,m);t=!u.wasSuccessful()}else{r.setException(u,m);t=true}if(t){r.fireEvent("exception",r,m,u)}r.afterRequest(q,p);r.fireEvent("endprocessresponse",r,m,u)},setException:function(c,d){c.setException({status:d.status,statusText:d.statusText,response:d})},extractResponseData:Ext.identityFn,applyEncoding:function(b){return Ext.encode(b)},encodeSorters:function(j,o){var h=[],m=j.length,g;for(g=0;g<m;g++){h[g]=j[g].serialize()}return this.applyEncoding(o?h[0]:h)},encodeFilters:function(m){var h=[],o=m.length,g,j;for(g=0;g<o;g++){h[g]=m[g].serialize()}return this.applyEncoding(h)},getParams:function(G){if(!G.isReadOperation){return{}}var K=this,B={},D=G.getGrouper(),V=G.getSorters(),I=G.getFilters(),O=G.getPage(),P=G.getStart(),C=G.getLimit(),L=K.getSimpleSortMode(),S=K.getSimpleGroupMode(),E=K.getPageParam(),R=K.getStartParam(),U=K.getLimitParam(),T=K.getGroupParam(),J=K.getGroupDirectionParam(),Q=K.getSortParam(),F=K.getFilterParam(),H=K.getDirectionParam(),M,N;if(E&&O){B[E]=O}if(R&&(P||P===0)){B[R]=P}if(U&&C){B[U]=C}M=T&&D;if(M){if(S){B[T]=D.getProperty();B[J]=D.getDirection()}else{B[T]=K.encodeSorters([D],true)}}if(Q&&V&&V.length>0){if(L){N=0;if(V.length>1&&M){N=1}B[Q]=V[N].getProperty();B[H]=V[N].getDirection()}else{B[Q]=K.encodeSorters(V)}}if(F&&I&&I.length>0){B[F]=K.encodeFilters(I)}return B},buildUrl:function(g){var d=this,f=d.getUrl(g);if(d.getNoCache()){f=Ext.urlAppend(f,Ext.String.format("{0}={1}",d.getCacheString(),Ext.Date.now()))}return f},getUrl:function(c){var d;if(c){d=c.getUrl()||this.getApi()[c.getAction()]}return d?d:(arguments.callee.$previous||Ext.data.proxy.Proxy.prototype.getUrl).call(this)},doRequest:function(b){},afterRequest:Ext.emptyFn,destroy:function(){Ext.data.proxy.Proxy.prototype.destroy.call(this);Ext.destroy(this.getReader(),this.getWriter());this.reader=this.writer=null}},0,0,0,0,["proxy.server"],0,[Ext.data.proxy,"Server",Ext.data,"ServerProxy"],0));(Ext.cmd.derive("Ext.data.proxy.Ajax",Ext.data.proxy.Server,{alternateClassName:["Ext.data.HttpProxy","Ext.data.AjaxProxy"],isAjaxProxy:true,defaultActionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"},config:{binary:false,headers:undefined,paramsAsJson:false,withCredentials:false,useDefaultXhrHeader:true,username:null,password:null,actionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"}},doRequest:function(m){var r=this,q=r.getWriter(),s=r.buildRequest(m),o=r.getMethod(s),j,p;if(q&&m.allowWrite()){s=q.write(s)}s.setConfig({binary:r.getBinary(),headers:r.getHeaders(),timeout:r.getTimeout(),scope:r,callback:r.createRequestCallback(s,m),method:o,useDefaultXhrHeader:r.getUseDefaultXhrHeader(),disableCaching:false});if(o.toUpperCase()!=="GET"&&r.getParamsAsJson()){p=s.getParams();if(p){j=s.getJsonData();if(j){j=Ext.Object.merge({},j,p)}else{j=p}s.setJsonData(j);s.setParams(undefined)}}if(r.getWithCredentials()){s.setWithCredentials(true);s.setUsername(r.getUsername());s.setPassword(r.getPassword())}return r.sendRequest(s)},sendRequest:function(b){b.setRawRequest(Ext.Ajax.request(b.getCurrentConfig()));this.lastRequest=b;return b},abort:function(b){b=b||this.lastRequest;if(b){Ext.Ajax.abort(b.getRawRequest())}},getMethod:function(g){var j=this.getActionMethods(),f=g.getAction(),h;if(j){h=j[f]}return h||this.defaultActionMethods[f]},createRequestCallback:function(g,f){var d=this;return function(b,a,c){if(g===d.lastRequest){d.lastRequest=null}d.processResponse(a,f,g,c)}},destroy:function(){this.lastRequest=null;Ext.data.proxy.Server.prototype.destroy.call(this)}},0,0,0,0,["proxy.ajax"],0,[Ext.data.proxy,"Ajax",Ext.data,"HttpProxy",Ext.data,"AjaxProxy"],0));(Ext.cmd.derive("Ext.data.reader.Json",Ext.data.reader.Reader,{alternateClassName:"Ext.data.JsonReader",config:{record:null,metaProperty:"metaData",useSimpleAccessors:false,preserveRawData:false},updateRootProperty:function(){this.forceBuildExtractors()},updateMetaProperty:function(){this.forceBuildExtractors()},readRecords:function(m,o,h){var g=this,j;if(g.getMeta){j=g.getMeta(m);if(j){g.onMetaChange(j)}}else{if(m.metaData){g.onMetaChange(m.metaData)}}return Ext.data.reader.Reader.prototype.readRecords.call(this,m,o,h)},getResponseData:function(f){var d;try{return Ext.decode(f.responseText)}catch(g){d=this.createReadError(g.message);Ext.Logger.warn("Unable to parse the JSON returned by the server");this.fireEvent("exception",this,f,d);return d}},buildExtractors:function(){var g=this,f,d;if(Ext.data.reader.Reader.prototype.buildExtractors.apply(this,arguments)){f=g.getMetaProperty();d=g.getRootProperty();if(d){g.getRoot=g.getAccessor(d)}else{g.getRoot=Ext.identityFn}if(f){g.getMeta=g.getAccessor(f)}}},extractData:function(j,o){var m=this.getRecord(),p=[],q,h;if(m){q=j.length;if(!q&&Ext.isObject(j)){q=1;j=[j]}for(h=0;h<q;h++){p[h]=j[h][m]}}else{p=j}return Ext.data.reader.Reader.prototype.extractData.call(this,p,o)},getModelData:function(b){return this.getPreserveRawData()?Ext.apply({},b):b},createAccessor:(function(){var b=/[\[\.]/;return function(L){var c=this,I=c.getUseSimpleAccessors(),F,H,B,E,G,M,J,N,a,A,z,D,K,C;if(!(L||L===0)){return}if(typeof L==="function"){return L}if(!I){F=String(L).search(b)}if(I===true||F<0){H=function(d){return d[L]}}else{B="raw";E=[];G="";M=0;C=L.length;for(D=0;D<=C;++D){z=L[D];J=z===".";N=z==="[";a=z==="]";A=J||N||a||!z;if(!A||M>1||(M&&!a)){G+=z}else{if(A){K=false;if(N){++M}else{if(a){--M;K=true}}if(G){if(K){G="["+G+"]"}else{G="."+G}B+=G;E.push(""+B);G=""}}}}H=E.join(" && ");H=Ext.functionFactory("raw","return "+H)}return H}}()),createFieldAccessor:function(j){var g=this,h=j.mapping,o=h||h===0,m=o?h:j.name;if(o){if(typeof m==="function"){return function(a){return j.mapping(a,g)}}else{return g.createAccessor(m)}}},getAccessorKey:function(c){var d=this.getUseSimpleAccessors()?"simple":"";return this.$className+d+c},privates:{copyFrom:function(b){Ext.data.reader.Reader.prototype.copyFrom.call(this,b);this.getRoot=b.getRoot}}},0,0,0,0,["reader.json"],0,[Ext.data.reader,"Json",Ext.data,"JsonReader"],0));(Ext.cmd.derive("Ext.data.writer.Json",Ext.data.writer.Writer,{alternateClassName:"Ext.data.JsonWriter",config:{rootProperty:undefined,encode:false,allowSingle:true,expandData:false},getExpandedData:function(t){var v=t.length,s=0,p,w,r,u,q,j=function(a,c){var b={};b[a]=c;return b};for(;s<v;s++){p=t[s];for(w in p){if(p.hasOwnProperty(w)){r=w.split(".");u=r.length-1;if(u>0){q=p[w];for(;u>0;u--){q=j(r[u],q)}p[r[0]]=p[r[0]]||{};Ext.Object.merge(p[r[0]],q);delete p[w]}}}}return t},writeRecords:function(q,p){var r=this,m=r.getRootProperty(),s,o,j;if(r.getExpandData()){p=r.getExpandedData(p)}if(r.getAllowSingle()&&p.length===1){p=p[0];o=true}j=this.getTransform();if(j){p=j(p,q)}if(r.getEncode()){if(m){q.setParam(m,Ext.encode(p))}else{}}else{if(o||(p&&p.length)){s=q.getJsonData()||{};if(m){s[m]=p}else{s=p}q.setJsonData(s)}}return q}},0,0,0,0,["writer.json"],0,[Ext.data.writer,"Json",Ext.data,"JsonWriter"],0));(Ext.cmd.derive("Ext.util.Group",Ext.util.Collection,{config:{groupKey:null},$endUpdatePriority:2001},0,0,0,0,0,0,[Ext.util,"Group"],0));(Ext.cmd.derive("Ext.util.SorterCollection",Ext.util.Collection,{isSorterCollection:true,$sortable:null,sortFn:null,config:{sorterOptionsFn:null,sorterOptionsScope:null},constructor:function(d){var c=this;c.sortFn=Ext.util.Sorter.createComparator(c);Ext.util.Collection.prototype.constructor.call(this,d);c.setDecoder(c.decodeSorter)},addSort:function(s,t,z){var u=this,y,w,A,q,B,r,v;if(!s){u.beginUpdate();u.endUpdate()}else{q=u.getOptions();if(s instanceof Array){v=s;z=t;t=null}else{if(Ext.isString(s)){if(!(r=u.get(s))){v=[{property:s,direction:t||q.getDefaultSortDirection()}]}else{v=[r]}}else{if(Ext.isFunction(s)){v=[{sorterFn:s,direction:t||q.getDefaultSortDirection()}]}else{v=[s];z=t;t=null}}}z=u._sortModes[z||"replace"];B=u.getAt(0);y=u.length;w=z.append?y:0;u.beginUpdate();u.splice(w,z.replace?y:0,v);if(z.multi){y=u.length;A=q.getMultiSortLimit();if(y>A){u.removeAt(A,y)}}if(r&&t){r.setDirection(t)}else{if(w===0&&B&&B===u.getAt(0)){B.toggle()}}u.endUpdate()}},clear:function(){this.beginUpdate();Ext.util.Collection.prototype.clear.call(this);this.endUpdate(this.items)},getSortFn:function(){return this.sortFn},getByProperty:function(j){var g=this.items,h=g.length,o,m;for(o=0;o<h;++o){m=g[o];if(m.getProperty()===j){return m}}return null},_sortModes:{append:{append:1},multi:{multi:1},prepend:{prepend:1},replace:{replace:1}},decodeSorter:function(p,w){var r=this,o=r.getOptions(),q=o.getRootProperty(),v=r.getSorterOptionsFn(),u,s,t;if(p.isSorter){if(!p.getRoot()){p.setRoot(q)}}else{s={direction:o.getDefaultSortDirection(),root:q};t=typeof p;if(t==="string"){u=r.get(p);if(u){return u}s.property=p}else{if(t==="function"){s.sorterFn=p}else{s=Ext.apply(s,p);if(s.fn){s.sorterFn=s.fn;delete s.fn}}}p=Ext.create(w||"Ext.util.Sorter",s)}if(v){v.call(r.getSorterOptionsScope()||r,p)}return p},setSorterConfigure:function(c,d){this.setSorterOptionsFn(c);this.setSorterOptionsScope(d)},decodeRemoveItems:function(w,A){var u=this,z=(A===undefined)?w:w[A];if(!z||!z.$cloned){if(w.length>A+1||!Ext.isIterable(z)){z=Ext.Array.slice(w,A)}var t=u.items,y=z.length,B=[],C,s,D,r,v;for(C=0;C<y;C++){r=z[C];if(r&&r.isSorter){B.push(r)}else{v=typeof r;if(v==="string"){r=u.get(r);if(r){B.push(r)}}else{if(v==="function"){for(D=t.length;D-->0;){s=t[D];if(s.getSorterFn()===r){B.push(s)}}}}}}z=B;z.$cloned=true}return z},getOptions:function(){return this.$sortable||this}},1,0,0,0,0,0,[Ext.util,"SorterCollection"],0));(Ext.cmd.derive("Ext.util.FilterCollection",Ext.util.Collection,{isFilterCollection:true,$filterable:null,filterFn:null,constructor:function(d){var c=this;c.filterFn=Ext.util.Filter.createFilterFn(c);Ext.util.Collection.prototype.constructor.call(this,d);c.setDecoder(c.decodeFilter)},filterData:function(b){return this.filtered?Ext.Array.filter(b,this.filterFn):b},getFilterFn:function(){return this.filterFn},isItemFiltered:function(b){return !this.filterFn(b)},decodeFilter:function(j){var f=this.getOptions(),g=f.getRootProperty(),h;if(j.isFilter){if(!j.getRoot()){j.setRoot(g)}}else{h={root:g};if(Ext.isFunction(j)){h.filterFn=j}else{h=Ext.apply(h,j);if(h.fn){h.filterFn=h.fn;delete h.fn}if(Ext.util.Filter.isInvalid(h)){return false}}j=new Ext.util.Filter(h)}return j},decodeRemoveItems:function(v,A){var K=this,z=(A===undefined)?v:v[A];if(!z.$cloned){if(v.length>A+1||!Ext.isIterable(z)){z=Ext.Array.slice(v,A)}var E=K.items,w=z.length,C=[],H,D,G,y,I,J,B,F,L;for(D=0;D<w;D++){H=z[D];if(H&&H.isFilter){C.push(H)}else{L=typeof H;G=L==="function";y=H.property!==undefined&&H.value!==undefined;I=L==="string";for(F=E.length;F-->0;){J=E[F];B=false;if(I){B=J.getProperty()===H}else{if(G){B=J.getFilterFn()===H}else{if(y){B=J.getProperty()===H.property&&J.getValue()===H.value}}}if(B){C.push(J)}}}}z=C;z.$cloned=true}return z},getOptions:function(){return this.$filterable||this}},1,0,0,0,0,0,[Ext.util,"FilterCollection"],0));(Ext.cmd.derive("Ext.util.GroupCollection",Ext.util.Collection,{isGroupCollection:true,config:{grouper:null,itemRoot:null},observerPriority:-100,onCollectionAdd:function(c,d){this.addItemsToGroups(c,d.items)},onCollectionBeforeItemChange:function(c,d){this.changeDetails=d},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionItemChange:function(g,f){var d=f.item;if(!f.indexChanged){this.syncItemGrouping(g,d,g.getKey(d),f.oldKey,f.oldIndex)}this.changeDetails=null},onCollectionRefresh:function(b){this.removeAll();this.addItemsToGroups(b,b.items)},onCollectionRemove:function(B,A){var u=this,r=u.changeDetails,v,t,s,w,z,y,q;if(r){q=r.item;s=u.findGroupForItem(q);v=[];if(s){v.push({group:s,items:[q]})}}else{v=u.groupItems(B,A.items,false)}for(w=0,z=v.length;w<z;++w){s=(t=v[w]).group;if(s){s.remove(t.items);if(!s.length){(y||(y=[])).push(s)}}}if(y){u.remove(y)}},onCollectionSort:function(q){var r=this,o=q.getSorters(false),m,s,j,p;if(o){m=r.items;s=r.length;for(j=0;j<s;++j){p=m[j];if(p.getSorters()!==o){p.setSorters(o)}}}},onCollectionUpdateKey:function(h,f){var g=f.index,j=f.item;if(!f.indexChanged){g=h.indexOf(j);this.syncItemGrouping(h,j,f.newKey,f.oldKey,g)}},addItemsToGroups:function(c,d){this.groupItems(c,d,true)},groupItems:function(H,z,F){var y=this,I={},B=[],G=H.getGrouper(),v=y.itemGroupKeys,w,L,J,C,K,E,A,D;for(C=0,A=z.length;C<A;++C){J=G.getGroupString(K=z[C]);E=H.getKey(K);if(F){(v||(y.itemGroupKeys=v={}))[E]=J}else{if(v){delete v[E]}}if(!(w=I[J])){if(!(L=y.getByKey(J))&&F){(D||(D=[])).push(L=y.createGroup(H,J))}B.push(I[J]=w={group:L,items:[]})}w.items.push(K)}for(C=0,A=B.length;C<A;++C){w=B[C];w.group.add(w.items)}if(D){y.add(D)}return B},syncItemGrouping:function(I,K,D,A,H){var v=this,z=v.itemGroupKeys||(v.itemGroupKeys={}),G=I.getGrouper(),J=G.getGroupString(K),C=0,w=-1,y,L,E,B,F;if(A){B=z[A];delete z[A]}else{B=z[D]}z[D]=J;if(!(L=v.get(J))){L=v.createGroup(I,J);y=[L]}if(L.get(D)!==K){if(L.getCount()>0&&I.getSorters().getCount()===0){F=I.indexOf(L.items[0]);if(H<F){w=0}else{w=H-F}}if(w===-1){L.add(K)}else{L.insert(w,K)}}else{L.itemChanged(K)}if(J!==B&&(B===0||B)){E=v.get(B);if(E){E.remove(K);if(!E.length){C=[E]}}}if(y){v.splice(0,C,y)}else{if(C){v.splice(0,C)}}},createGroup:function(d,f){var g=new Ext.util.Group({groupKey:f,rootProperty:this.getItemRoot(),sorters:d.getSorters()});return g},getKey:function(b){return b.getGroupKey()},createSortFn:function(){var g=this,f=g.getGrouper(),d=g.getSorters().getSortFn();if(!f){return d}return function(b,a){return f.sort(b.items[0],a.items[0])||d(b,a)}},updateGrouper:function(d){var c=this;c.grouped=!!(d&&c.$groupable.getAutoGroup());c.onSorterChange();c.onEndUpdateSorters(c.getSorters())},destroy:function(){this.$groupable=null;Ext.util.Collection.prototype.destroy.call(this)},privates:{findGroupForItem:function(m){var g=this.items,h=g.length,o,j;for(o=0;o<h;++o){j=g[o];if(j.contains(m)){return j}}}}},0,0,0,0,0,0,[Ext.util,"GroupCollection"],0));(Ext.cmd.derive("Ext.data.Store",Ext.data.ProxyStore,{config:{data:0,clearRemovedOnLoad:true,clearOnPageLoad:true,associatedEntity:null,role:null,session:null},addRecordsOptions:{addRecords:true},loadCount:0,complete:false,moveMapCount:0,constructor:function(f){var d=this,g;if(f){if(f.buffered){return new Ext.data.BufferedStore(f)}}Ext.data.ProxyStore.prototype.constructor.call(this,f);d.getData().addObserver(d);g=d.inlineData;if(g){delete d.inlineData;d.loadInlineData(g)}},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},applyData:function(g,f){var d=this;d.getFields();d.getModel();if(g&&g.isCollection){f=g}else{if(!f){f=d.constructDataCollection()}if(g){if(d.isInitializing){d.inlineData=g}else{d.loadData(g)}}}return f},loadInlineData:function(g){var d=this,f=d.getProxy();if(f&&f.isMemoryProxy){f.setData(g);d.suspendEvents();d.read();d.resumeEvents()}else{d.removeAll(true);d.suspendEvents();d.loadData(g);d.resumeEvents()}},onCollectionAdd:function(c,d){this.onCollectionAddItems(c,d.items,d)},onCollectionFilterAdd:function(c,d){this.onCollectionAddItems(c,d)},onCollectionAddItems:function(B,F,G){var w=this,z=F.length,u=G?!G.next:false,A=w.removed,C=w.ignoreCollectionAdd,y=w.getSession(),H=G&&G.replaced,E,v,D,t;for(E=0;E<z;++E){D=F[E];if(y){y.adopt(D)}if(!C){D.join(w);if(A&&A.length){Ext.Array.remove(A,D)}v=v||D.phantom||D.dirty}}if(C){return}if(H){t=[];do{Ext.Array.push(t,H.items);H=H.next}while(H);w.setMoving(t,true)}if(G){if(G.replaced){if(u){w.fireEvent("refresh",w)}}else{w.fireEvent("add",w,F,G.at);if(u){w.fireEvent("datachanged",w)}}}if(t){w.setMoving(t,false)}w.needsSync=w.needsSync||v},onCollectionFilteredItemChange:function(){this.onCollectionItemChange.apply(this,arguments)},onCollectionItemChange:function(m,o){var p=this,j=o.item,q=o.modified||null,h=o.meta;if(p.fireChangeEvent(j)){p.onUpdate(j,h,q,o);p.fireEvent("update",p,j,h,q,o)}},fireChangeEvent:function(b){return this.getDataSource().contains(b)},afterChange:function(f,g,d){this.getData().itemChanged(f,g||null,undefined,d)},afterCommit:function(d,c){this.afterChange(d,c,Ext.data.Model.COMMIT)},afterEdit:function(d,c){this.needsSync=this.needsSync||d.dirty;this.afterChange(d,c,Ext.data.Model.EDIT)},afterReject:function(b){this.afterChange(b,null,Ext.data.Model.REJECT)},afterDrop:function(b){this.getData().remove(b)},afterErase:function(b){this.removeFromRemoved(b)},addSorted:function(h){var o=this,j=o.getRemoteSort(),m=o.getData(),g;if(j){m.setSorters(o.getSorters())}g=m.findInsertionIndex(h);if(j){m.setSorters(null)}return o.insert(g,h)},remove:function(v,o,q){var p=this,u=p.getDataSource(),r,t,w,s;if(v){if(v.isModel){if(u.indexOf(v)>-1){w=[v];r=1}else{r=0}}else{w=[];for(t=0,r=v.length;t<r;++t){s=v[t];if(s&&s.isEntity){if(!u.contains(s)){continue}}else{if(!(s=u.getAt(s))){continue}}w.push(s)}r=w.length}}if(!r){return[]}p.removeIsMove=o===true;p.removeIsSilent=q;u.remove(w);p.removeIsSilent=false;return w},onCollectionRemove:function(A,G){var u=this,z=u.removed,E=G.items,w=E.length,y=G.at,F=G.replacement,H=u.removeIsMove||(F&&Ext.Array.equals(E,F.items)),v=u.removeIsSilent,t=!G.next,C=u.getDataSource(),D,B;if(u.ignoreCollectionRemove){return}if(F){u.setMoving(F.items,true)}for(D=0;D<w;++D){B=E[D];if(!C.contains(B)){if(z&&!H&&!B.phantom&&!B.erasing){B.removedFrom=y+D;z.push(B);u.needsSync=true}else{B.unjoin(u)}}}if(!v){if(!F||!F.items.length){u.fireEvent("remove",u,E,y,H);if(t){u.fireEvent("datachanged",u)}}}if(F){u.setMoving(F.items,false)}},onFilterEndUpdate:function(){Ext.data.ProxyStore.prototype.onFilterEndUpdate.apply(this,arguments);this.callObservers("Filter")},removeAt:function(f,d){var g=this.getData();f=Math.max(f,0);if(f<g.length){if(arguments.length===1){d=1}else{if(!d){return}}g.removeAt(f,d)}},removeAll:function(g){var o=this,m=o.getData(),j=o.hasListeners.clear,h=m.getRange();if(m.length){o.removeIsSilent=true;o.callObservers("BeforeRemoveAll");m.removeAll();o.removeIsSilent=false;if(!g){o.fireEvent("clear",o,h);o.fireEvent("datachanged",o)}o.callObservers("AfterRemoveAll",[!!g])}return h},setRecords:function(d){var c=this.getCount();++this.loadCount;if(c){this.getData().splice(0,c,d)}else{this.add(d)}},splice:function(f,g,d){return this.getData().splice(f,g,d)},onProxyLoad:function(g){var m=this,o=g.getResultSet(),h=g.getRecords(),j=g.wasSuccessful();if(m.destroyed){return}if(o){m.totalCount=o.getTotal()}if(j){h=m.processAssociation(h);m.loadRecords(h,g.getAddRecords()?{addRecords:true}:undefined)}else{m.loading=false}if(m.hasListeners.load){m.fireEvent("load",m,h,j,g)}m.callObservers("AfterLoad",[h,j,g])},filterDataSource:function(o){var m=this.getDataSource(),h=m.items,j=h.length,q=[],p;for(p=0;p<j;p++){if(o.call(m,h[p])){q.push(h[p])}}return q},getNewRecords:function(){return this.filterDataSource(this.filterNew)},getRejectRecords:function(){return this.filterDataSource(this.filterRejects)},getUpdatedRecords:function(){return this.filterDataSource(this.filterUpdated)},loadData:function(m,j){var o=this,p=m.length,q=[],h;for(h=0;h<p;h++){q.push(o.createModel(m[h]))}q=o.processAssociation(q);o.loadRecords(q,j?o.addRecordsOptions:undefined)},loadRawData:function(q,j){var r=this,p=r.getSession(),m=r.getProxy().getReader().read(q,p?{recordCreator:p.recordCreator}:undefined),s=m.getRecords(),o=m.getSuccess();if(o){r.totalCount=m.getTotal();r.loadRecords(s,j?r.addRecordsOptions:undefined)}return o},loadRecords:function(o,u){var q=this,r=o.length,p=q.getData(),s,t,m;if(u){s=u.addRecords}if(!q.getRemoteSort()&&!q.getSortOnLoad()){m=true;p.setAutoSort(false)}if(!s){q.clearData(true)}q.loading=false;q.ignoreCollectionAdd=true;q.callObservers("BeforePopulate");p.add(o);q.ignoreCollectionAdd=false;if(m){p.setAutoSort(true)}for(t=0;t<r;t++){o[t].join(q)}++q.loadCount;q.complete=true;q.fireEvent("datachanged",q);q.fireEvent("refresh",q);q.callObservers("AfterPopulate")},loadPage:function(h,g){var j=this,f=j.getPageSize();j.currentPage=h;g=Ext.apply({page:h,start:(h-1)*f,limit:f,addRecords:!j.getClearOnPageLoad()},g);j.read(g)},nextPage:function(b){this.loadPage(this.currentPage+1,b)},previousPage:function(b){this.loadPage(this.currentPage-1,b)},clearData:function(w){var q=this,s=q.removed,v=q.getDataSource(),r=q.getClearRemovedOnLoad(),p=s&&w&&!r,z,u,y,t;if(v){z=v.items;for(y=0,t=z.length;y<t;++y){u=z[y];if(p&&Ext.Array.contains(s,u)){continue}u.unjoin(q)}q.ignoreCollectionRemove=true;q.callObservers("BeforeClear");v.removeAll();q.ignoreCollectionRemove=false;q.callObservers("AfterClear")}if(s&&(!w||r)){s.length=0}},onIdChanged:function(g,d,f){this.getData().updateKey(g,d);this.fireEvent("idchanged",this,g,d,f)},commitChanges:function(){var j=this,h=j.getModifiedRecords(),g=h.length,f=0;Ext.suspendLayouts();j.beginUpdate();for(;f<g;f++){h[f].commit()}j.cleanRemoved();j.endUpdate();Ext.resumeLayouts(true)},filterNewOnly:function(b){return b.phantom===true},filterRejects:function(b){return b.phantom||b.dirty},rejectChanges:function(){var p=this,o=p.getRejectRecords(),r=o.length,t,v,w,q,u,s;Ext.suspendLayouts();p.beginUpdate();for(t=0;t<r;t++){v=o[t];if(v.phantom){w=w||[];w.push(v)}else{v.reject()}}if(w){p.remove(w);for(t=0,r=w.length;t<r;++t){w[t].reject()}}o=p.getRawRemovedRecords();if(o){r=o.length;q=!p.getRemoteSort()&&p.isSorted();if(q){u=p.getData();s=u.getAutoSort();u.setAutoSort(false)}for(t=r-1;t>=0;t--){v=o[t];v.reject();if(!q){p.insert(v.removedFrom||0,v)}}if(q){u.setAutoSort(s);p.add(o)}o.length=0}p.endUpdate();Ext.resumeLayouts(true)},onDestroy:function(){var f=this,g=f.loadTask,h=f.getData(),j=h.getSource();f.clearData();Ext.data.ProxyStore.prototype.onDestroy.call(this);f.setSession(null);f.observers=null;if(g){g.cancel();f.loadTask=null}if(j){j.destroy()}},privates:{fetch:function(c){c=Ext.apply({},c);this.setLoadOptions(c);var d=this.createOperation("read",c);d.execute()},onBeforeLoad:function(b){this.callObservers("BeforeLoad",[b])},onRemoteFilterSet:function(d,c){if(d){this.getData().setFilters(c?null:d)}Ext.data.ProxyStore.prototype.onRemoteFilterSet.call(this,d,c)},onRemoteSortSet:function(d,g){var f=this.getData();if(d){f.setSorters(g?null:d)}f.setAutoGroup(!g);Ext.data.ProxyStore.prototype.onRemoteSortSet.call(this,d,g)},isMoving:function(q,o){var m=this.moveMap,h=0,j,p;if(m){if(q){if(Ext.isArray(q)){for(p=0,j=q.length;p<j;++p){h+=m[q[p].id]?1:0}}else{if(m[q.id]){++h}}}else{h=o?m:this.moveMapCount}}return h},setLoadOptions:function(o){var m=this,h=m.getPageSize(),j,g;if(m.getRemoteSort()&&!o.grouper){g=m.getGrouper();if(g){o.grouper=g}}if(h||"start" in o||"limit" in o||"page" in o){o.page=o.page!=null?o.page:m.currentPage;o.start=(o.start!==undefined)?o.start:(o.page-1)*h;o.limit=o.limit!=null?o.limit:h;m.currentPage=o.page}o.addRecords=o.addRecords||false;if(!o.recordCreator){j=m.getSession();if(j){o.recordCreator=j.recordCreator}}Ext.data.ProxyStore.prototype.setLoadOptions.call(this,o)},setMoving:function(j,p){var r=this,q=r.moveMap||(r.moveMap={}),m=j.length,s,o;for(s=0;s<m;++s){o=j[s].id;if(p){if(q[o]){++q[o]}else{q[o]=1;++r.moveMapCount}}else{if(--q[o]===0){delete q[o];--r.moveMapCount}}}if(r.moveMapCount===0){r.moveMap=null}},processAssociation:function(f){var g=this,d=g.getAssociatedEntity();if(d){f=g.getRole().processLoad(g,d,f,g.getSession())}return f}}},1,0,0,0,["store.store"],[[Ext.data.LocalStore.prototype.mixinId||Ext.data.LocalStore.$className,Ext.data.LocalStore]],[Ext.data,"Store"],0));(Ext.cmd.derive("Ext.data.reader.Array",Ext.data.reader.Json,{alternateClassName:"Ext.data.ArrayReader",config:{totalProperty:undefined,successProperty:undefined},createFieldAccessor:function(h){var f=h.mapping,j=h.hasMapping()?f:h.ordinal,g;h.mapping=j;g=Ext.data.reader.Json.prototype.createFieldAccessor.apply(this,arguments);h.mapping=f;return g},getModelData:function(b){return{}}},0,0,0,0,["reader.array"],0,[Ext.data.reader,"Array",Ext.data,"ArrayReader"],0));(Ext.cmd.derive("Ext.data.ArrayStore",Ext.data.Store,{alternateClassName:["Ext.data.SimpleStore"],config:{proxy:{type:"memory",reader:"array"}},loadData:function(j,h){if(this.expandData){var m=[],g=0,o=j.length;for(;g<o;g++){m[m.length]=[j[g]]}j=m}Ext.data.Store.prototype.loadData.call(this,j,h)}},0,0,0,0,["store.array"],0,[Ext.data,"ArrayStore",Ext.data,"SimpleStore"],0));(Ext.cmd.derive("Ext.data.StoreManager",Ext.util.MixedCollection,{alternateClassName:["Ext.StoreMgr","Ext.data.StoreMgr","Ext.StoreManager"],singleton:true,register:function(){for(var d=0,c;(c=arguments[d]);d++){this.add(c)}},unregister:function(){for(var d=0,c;(c=arguments[d]);d++){this.remove(this.lookup(c))}},lookup:function(s,o){if(Ext.isArray(s)){var j=["field1"],q=!Ext.isArray(s[0]),p=s,r,m;if(q){p=[];for(r=0,m=s.length;r<m;++r){p.push([s[r]])}}else{for(r=2,m=s[0].length;r<=m;++r){j.push("field"+r)}}return new Ext.data.ArrayStore({data:p,fields:j,autoDestroy:true,autoCreated:true,expanded:q})}if(Ext.isString(s)){return this.get(s)}else{return Ext.Factory.store(s,o)}},getKey:function(b){return b.storeId}},0,0,0,0,0,0,[Ext.data,"StoreManager",Ext,"StoreMgr",Ext.data,"StoreMgr",Ext,"StoreManager"],function(){Ext.regStore=function(f,g){var a;if(Ext.isObject(f)){g=f}else{if(Ext.data.StoreManager.containsKey(f)){return Ext.data.StoreManager.lookup(f)}g.storeId=f}if(g instanceof Ext.data.Store){a=g}else{a=new Ext.data.Store(g)}Ext.data.StoreManager.register(a);return a};Ext.getStore=function(a){return Ext.data.StoreManager.lookup(a)};var b=Ext.regStore("ext-empty-store",{proxy:"memory",useModelWarning:false});b.isEmptyStore=true}));(Ext.cmd.derive("Ext.app.domain.Store",Ext.app.EventDomain,{singleton:true,type:"store",prefix:"store.",idMatchRe:/^\#/,constructor:function(){var b=this;b.callParent();b.monitor(Ext.data.AbstractStore)},match:function(h,f){var g=false,j=h.alias;if(f==="*"){g=true}else{if(this.idMatchRe.test(f)){g=h.getStoreId()===f.substring(1)}else{if(j){g=Ext.Array.indexOf(j,this.prefix+f)>-1}}}return g}},1,0,0,0,0,0,[Ext.app.domain,"Store"],0));(Ext.cmd.derive("Ext.app.route.Queue",Ext.Base,{queue:null,token:null,constructor:function(b){Ext.apply(this,b);this.queue=new Ext.util.MixedCollection()},queueAction:function(d,c){this.queue.add({route:d,args:c})},clearQueue:function(){this.queue.removeAll()},runQueue:function(){var f=this.queue,g=f.removeAt(0),d;if(g){d=g&&g.route;d.execute(this.token,g.args,this.onActionExecute,this)}},onActionExecute:function(b){if(b){this.clearQueue()}else{this.runQueue()}}},1,0,0,0,0,0,[Ext.app.route,"Queue"],0));(Ext.cmd.derive("Ext.app.route.Route",Ext.Base,{action:null,conditions:null,controller:null,allowInactive:false,url:null,before:null,caseInsensitive:false,matcherRegex:null,paramMatchingRegex:null,paramsInMatchString:null,constructor:function(d){var g=this,f;Ext.apply(g,d,{conditions:{}});f=g.url;g.paramMatchingRegex=new RegExp(/:([0-9A-Za-z\_]*)/g);g.paramsInMatchString=f.match(g.paramMatchingRegex)||[];g.matcherRegex=g.createMatcherRegex(f)},recognize:function(o){var m=this,h=m.controller,j,g;if((m.allowInactive||h.isActive())&&m.recognizes(o)){j=m.matchesFor(o);g=o.match(m.matcherRegex);g.shift();return Ext.applyIf(j,{controller:h,action:m.action,historyUrl:o,args:g})}return false},recognizes:function(b){return this.matcherRegex.test(b)},execute:function(u,q,p,t){var m=q.args||[],r=this.before,o=this.controller,s=this.createCallback(q,p,t);if(r){m.push(s);if(Ext.isString(r)){r=this.before=o[r]}if(r){r.apply(o,m)}}else{s.resume()}},matchesFor:function(q){var m={},o=this.paramsInMatchString,h=q.match(this.matcherRegex),p=0,j=o.length;h.shift();for(;p<j;p++){m[o[p].replace(":","")]=h[p]}return m},createMatcherRegex:function(z){var w=this.paramsInMatchString,r=this.conditions,v=0,t=w.length,q=Ext.util.Format.format,p=this.caseInsensitive?"i":"",y,s,u;for(;v<t;v++){y=w[v];s=r[y];u=q("{0}",s||"([%a-zA-Z0-9\\-\\_\\s,]+)");z=z.replace(new RegExp(y),u)}return new RegExp("^"+z+"$",p)},createCallback:function(g,h,f){var j=this;f=f||j;return{resume:function(){var c=j.controller,a=j.action,b;if(Ext.isString(a)){a=c[a]}g=g&&g.args?g.args:[];b=g.pop();if(b&&!Ext.isObject(b)){g.push(b)}if(a){j.action=a;a.apply(c,g)}if(h){h.call(f)}},stop:function(a){if(h){h.call(f,a)}}}}},1,0,0,0,0,0,[Ext.app.route,"Route"],0));(Ext.cmd.derive("Ext.util.History",Ext.Base,{singleton:true,alternateClassName:"Ext.History",useTopWindow:false,constructor:function(){var b=this;b.hiddenField=null;b.ready=false;b.currentToken=null;b.mixins.observable.constructor.call(b)},getHash:function(){return this.win.location.hash.substr(1)},setHash:function(c){try{this.win.location.hash=c;this.currentToken=c}catch(d){}},handleStateChange:function(b){this.currentToken=b;this.fireEvent("change",b)},startUp:function(){var b=this;b.currentToken=b.getHash();if(Ext.supports.Hashchange){Ext.get(b.win).on("hashchange",b.onHashChange,b)}else{Ext.TaskManager.start({fireIdleEvent:false,run:b.onHashChange,interval:50,scope:b})}b.ready=true;b.fireEvent("ready",b)},onHashChange:function(){var c=this,d=c.getHash();if(d!==c.hash){c.hash=d;c.handleStateChange(d)}},init:function(g,f){var d=this;if(d.ready){Ext.callback(g,f,[d]);return}if(!Ext.isReady){Ext.onInternalReady(function(){d.init(g,f)});return}d.win=d.useTopWindow?window.top:window;d.hash=d.getHash();if(g){d.on("ready",g,f,{single:true})}d.startUp()},add:function(g,f){var j=this,h=false;if(f===false||j.getToken()!==g){j.setHash(g);h=true}return h},back:function(){var b=this.useTopWindow?window.top:window;b.history.go(-1)},forward:function(){var b=this.useTopWindow?window.top:window;b.history.go(1)},getToken:function(){return this.ready?this.currentToken:this.getHash()}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.util,"History",Ext,"History"],0));(Ext.cmd.derive("Ext.app.route.Router",Ext.Base,{singleton:true,multipleToken:"|",queueRoutes:true,constructor:function(){var b=Ext.util.History;if(!b.ready){b.init()}b.on("change",this.onStateChange,this);this.clear()},onStateChange:function(D){var w=this,E=w.application,u=w.routes,A=u.length,H=w.queueRoutes,y=D.split(w.multipleToken),t=0,F=y.length,C,B,v,z,G;for(;t<F;t++){D=y[t];G=false;if(H){B=new Ext.app.route.Queue({token:D})}for(C=0;C<A;C++){v=u[C];z=v.recognize(D);if(z){G=true;if(H){B.queueAction(v,z)}else{v.execute(D,z)}}}if(H){B.runQueue()}if(!G&&E){E.fireEvent("unmatchedroute",D)}}},connect:function(j,h,g){var f={url:j,action:h,controller:g};if(Ext.isObject(h)){Ext.merge(f,h)}this.routes.push(new Ext.app.route.Route(f))},disconnectAll:function(q){var h=this.routes,j=h.length,o=[],m,p;for(m=0;m<j;++m){p=h[m];if(p.controller!==q){o.push(p)}}this.routes=o},recognize:function(o){var h=this.routes||[],m=0,j=h.length,q,p;for(;m<j;m++){q=h[m];p=q.recognize(o);if(p){return{route:q,args:p}}}return false},draw:function(b){b.call(this,this)},clear:function(){this.routes=[]}},1,0,0,0,0,0,[Ext.app.route,"Router"],0));(Ext.cmd.derive("Ext.app.Controller",Ext.app.BaseController,{statics:{strings:{model:{getter:"getModel",upper:"Model"},view:{getter:"getView",upper:"View"},controller:{getter:"getController",upper:"Controller"},store:{getter:"getStore",upper:"Store"},profile:{getter:"getProfile",upper:"Profiles"}},controllerRegex:/^(.*)\.controller\./,profileRegex:/^(.*)\.profile\./,createGetter:function(d,c){return function(){return this[d](c)}},getGetterName:function(q,j){var p="get",o=q.split("."),m=o.length,h;for(h=0;h<m;h++){p+=Ext.String.capitalize(o[h])}p+=j;return p},resolveNamespace:function(m,p){var o=Ext.app.Controller,q=m.prototype.isProfile?o.profileRegex:o.controllerRegex,r,s,j;r=Ext.getClassName(m);s=p.$namespace||p.namespace||Ext.app.getNamespace(r)||((j=q.exec(r))&&j[1]);return s},processDependencies:function(I,H,D,C,y,F){if(!y||!y.length){return}var o=this,J=o.strings[C],E,K,L,G,B,A,j,z;if(!Ext.isArray(y)){y=[y]}for(B=0,A=y.length;B<A;B++){G=y[B];E=o.getFullName(G,C,D,F);y[B]=K=E.absoluteName;L=E.shortName;H.push(K);j=o.getGetterName(L,J.upper);if(!I[j]){I[j]=z=o.createGetter(J.getter,G)}if(z&&C!=="controller"){z["Ext.app.getter"]=true}}},getFullName:function(s,p,q,r){var m=s,j,o;if((j=s.indexOf("@"))>0){m=s.substring(0,j);o=s.substring(j+1)+"."+m}else{if(s.indexOf(".")>0&&(Ext.ClassManager.isCreated(s)||this.hasRegisteredPrefix(s))){o=s}else{if(q){o=q+"."+p+"."+(r?r+"."+s:s);m=s}else{o=s}}}return{absoluteName:o,shortName:m}},hasRegisteredPrefix:function(f){var g=Ext.ClassManager,d=g.getPrefix(f);return d&&d!==f}},models:null,views:null,stores:null,controllers:null,config:{application:null,refs:null,active:true,moduleClassName:null},onClassExtended:function(f,j,g){var h=g.onBeforeCreated;g.onBeforeCreated=function(p,a){var q=Ext.app.Controller,c=[],d,b;b=p.prototype;d=q.resolveNamespace(p,a);if(d){b.$namespace=d}q.processDependencies(b,c,d,"model",a.models);q.processDependencies(b,c,d,"view",a.views);q.processDependencies(b,c,d,"store",a.stores);q.processDependencies(b,c,d,"controller",a.controllers);Ext.require(c,Ext.Function.pass(h,arguments,this))}},constructor:function(b){this.initAutoGetters();Ext.app.BaseController.prototype.constructor.apply(this,arguments)},normalizeRefs:function(d){var g=this,f=[];if(d){if(Ext.isObject(d)){Ext.Object.each(d,function(b,a){if(Ext.isString(a)){a={selector:a}}a.ref=b;f.push(a)})}else{if(Ext.isArray(d)){f=Ext.Array.merge(f,d)}}}d=g.refs;if(d){g.refs=null;d=g.normalizeRefs(d);if(d){f=Ext.Array.merge(f,d)}}return f},getRefMap:function(){var m=this,q=m._refMap,j,o,p,h;if(!q){j=m.getRefs();q=m._refMap={};if(j){for(h=0,p=j.length;h<p;h++){o=j[h];q[o.ref]=o.selector}}}return q},applyRefs:function(b){return this.normalizeRefs(Ext.clone(b))},updateRefs:function(b){if(b){this.ref(b)}},initAutoGetters:function(){var d=this.self.prototype,g,f;for(g in d){f=d[g];if(f&&f["Ext.app.getter"]){f.call(this)}}},doInit:function(c){var d=this;if(!d._initialized){d.init(c);d._initialized=true}},finishInit:function(m){var p=this,o=p.controllers,h,q,j;if(p._initialized&&o&&o.length){for(q=0,j=o.length;q<j;q++){h=p.getController(o[q]);h.finishInit(m)}}},init:Ext.emptyFn,onLaunch:Ext.emptyFn,activate:function(){this.setActive(true)},deactivate:function(){this.setActive(false)},isActive:function(){return this.getActive()},ref:function(m){var p=this,j=0,q=m.length,o,r,s;m=Ext.Array.from(m);p.references=p.references||[];for(;j<q;j++){o=m[j];r=o.ref;s="get"+Ext.String.capitalize(r);if(!p[s]){p[s]=Ext.Function.pass(p.getRef,[r,o],p)}p.references.push(r.toLowerCase())}},addRef:function(b){this.ref(b)},getRef:function(p,m,j){var q=this,o=q.refCache||(q.refCache={}),h=o[p];m=m||{};j=j||{};Ext.apply(m,j);if(m.forceCreate){return Ext.ComponentManager.create(m,"component")}if(!h){if(m.selector){o[p]=h=Ext.ComponentQuery.query(m.selector)[0]}if(!h&&m.autoCreate){o[p]=h=Ext.ComponentManager.create(m,"component")}if(h){h.on("beforedestroy",function(){o[p]=null})}}return h},hasRef:function(c){var d=this.references;return d&&Ext.Array.indexOf(d,c.toLowerCase())!==-1},getController:function(c){var d=this.getApplication();if(c===this.getId()){return this}return d&&d.getController(c)},getStore:function(g){var f,d;f=(g.indexOf("@")===-1)?g:g.split("@")[0];d=Ext.StoreManager.get(f);if(!d){g=Ext.app.Controller.getFullName(g,"store",this.$namespace);if(g){d=Ext.create(g.absoluteName,{id:f})}}return d},getModel:function(g){var d=Ext.app.Controller.getFullName(g,"model",this.$namespace),f=Ext.ClassManager.get(d.absoluteName);if(!f){f=Ext.data.schema.Schema.lookupEntity(g)}return f},getProfile:function(b){b=Ext.app.Controller.getFullName(b,"profile",this.$namespace);return b},getView:function(d){var c=Ext.app.Controller.getFullName(d,"view",this.$namespace);return c&&Ext.ClassManager.get(c.absoluteName)},ensureId:function(){var b=this.getId();if(!b){this.setId(this.getModuleClassName(this.$className,"controller"))}},destroy:function(j,h){var p=this,m=p.application,o,q;if(!h&&m){m.unregister(p)}p.application=null;if(j){o=p.refCache;for(q in o){if(o.hasOwnProperty(q)){Ext.destroy(o[q])}}}Ext.app.BaseController.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.app,"Controller"],0));(Ext.cmd.derive("Ext.app.domain.View",Ext.app.EventDomain,{isInstance:true,constructor:function(b){Ext.app.EventDomain.prototype.constructor.apply(this,arguments);this.controller=b;this.monitoredClasses=[Ext.Component]},match:function(h,g,f){var j=false;if(g==="#"){j=f===h.getController()}else{j=h.is(g)}return j},destroy:function(){this.controller=null;Ext.app.EventDomain.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.app.domain,"View"],0));(Ext.cmd.derive("Ext.app.ViewController",Ext.app.BaseController,{isViewController:true,factoryConfig:{type:"controller"},config:{closeViewAction:"destroy"},view:null,constructor:function(){this.compDomain=new Ext.app.domain.View(this);Ext.app.BaseController.prototype.constructor.apply(this,arguments)},beforeInit:Ext.emptyFn,init:Ext.emptyFn,initViewModel:Ext.emptyFn,destroy:function(){var d=this,c=d.compDomain;if(c){c.unlisten(d);c.destroy()}d.compDomain=d.view=null;Ext.app.BaseController.prototype.destroy.call(this)},closeView:function(){var d=this.getView(),c;if(d){c=this.getCloseViewAction();d[c]()}},control:function(f,d){var g=f;if(Ext.isString(f)){g={};g[f]=d}this.compDomain.listen(g,this)},listen:function(g,f){var d=g.component;if(d){g=Ext.apply({},g);delete g.component;this.control(d)}this.callParent([g,f])},getReferences:function(){var b=this.view;return b&&b.getReferences()},getView:function(){return this.view},lookup:function(c){var d=this.view;return d&&d.lookup(c)},lookupReference:function(b){return this.lookup(b)},getSession:function(){var b=this.view;return b&&b.lookupSession()},getViewModel:function(){var b=this.view;return b&&b.lookupViewModel()},getStore:function(c){var d=this.getViewModel();return d?d.getStore(c):null},fireViewEvent:function(m,g){var o=this.view,h=false,j=arguments;if(o){if(o!==g){j=Ext.Array.slice(j);j.splice(1,0,o)}h=o.fireEvent.apply(o,j)}return h},privates:{view:null,ensureId:function(){var b=this.getId();if(!b){this.setId(Ext.id(null,"controller-"))}},attachReference:function(c){var d=this.view;if(d){d.attachReference(c)}},clearReference:function(c){var d=this.view;if(d){d.clearReference(c)}},clearReferences:function(){var b=this.view;if(b){b.clearReferences()}},setView:function(b){this.view=b;if(!this.beforeInit.$nullFn){this.beforeInit(b)}}}},1,0,0,0,0,[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.app,"ViewController"],0));(Ext.cmd.derive("Ext.util.Bag",Ext.Base,{isBag:true,constructor:function(){this.items=[];this.map={}},generation:0,length:0,add:function(q){var r=this,o=r.getKey(q),p=r.map,s=r.items,m=p[o],j;if(m===undefined){s.push(q);p[o]=r.length++;j=q}else{j=s[m];s[m]=q}++r.generation;return j},clear:function(){var g=this,d=g.generation||g.length,f=d?g.items:[];if(d){g.items=[];g.length=0;g.map={};++g.generation}return f},clone:function(){var g=this,d=new g.self(),f=g.length;if(f){Ext.apply(d.map,g.map);d.items=g.items.slice();d.length=g.length}return d},contains:function(j){var g=false,h=this.map,f;if(j!=null){f=this.getKey(j);if(f in h){g=this.items[h[f]]===j}}return g},containsKey:function(b){return b in this.map},destroy:function(){this.items=this.map=null;this.callParent()},getAt:function(c){var d=null;if(c<this.length){d=this.items[c]}return d},getByKey:function(d){var g=this.map,f=null;if(d in g){f=this.items[g[d]]}return f},getCount:function(){return this.length},getKey:function(b){return b.id||b.getId()},remove:function(r){var s=this,q=s.map,u=s.items,m=null,o,p,t;if(s.length){o=q[p=s.getKey(r)];if(o!==undefined){delete q[p];m=u[o];t=u.pop();if(o<--s.length){u[o]=t;q[s.getKey(t)]=o}++s.generation}}return m},removeByKey:function(d){var c=this.getByKey(d);if(c){this.remove(c)}return c||null},sort:function(g){var m=this,h=m.items,j=h.length,o;if(j){Ext.Array.sort(h,g);m.map={};while(j-->0){o=h[j];m.map[m.getKey(o)]=j}++m.generation}}},1,0,0,0,0,0,[Ext.util,"Bag"],0));(Ext.cmd.derive("Ext.util.Scheduler",Ext.Base,{busyCounter:0,lastBusyCounter:0,destroyed:false,firing:null,notifyIndex:-1,nextId:0,orderedItems:null,passes:0,scheduledCount:0,validIdRe:null,config:{cycleLimit:5,preSort:null,tickDelay:5},suspendOnNotify:true,constructor:function(b){this.mixins.observable.constructor.call(this,b);this.items=new Ext.util.Bag()},destroy:function(){var d=this,c=d.timer;if(c){window.clearTimeout(c);d.timer=null}d.items.destroy();d.items=d.orderedItems=null;d.callParent()},add:function(g){var d=this,f=d.items;if(f===d.firing){d.items=f=f.clone()}g.id=g.id||++d.nextId;g.scheduler=d;f.add(g);if(!d.sortMap){d.orderedItems=null}},remove:function(g){var d=this,f=d.items;if(d.destroyed){return}if(f===d.firing){d.items=f=f.clone()}if(g.scheduled){d.unscheduleItem(g);g.scheduled=false}f.remove(g);d.orderedItems=null},sort:function(){var p=this,j=p.items,o={},m=p.getPreSort(),h,q;p.orderedItems=[];p.sortMap=o;if(m){j.sort(m)}j=j.items;for(h=0;h<j.length;++h){q=j[h];if(!o[q.id]){p.sortItem(q)}}p.sortMap=null},sortItem:function(o){var g=this,m=g.sortMap,h=g.orderedItems,j;if(!o.scheduler){g.add(o)}j=o.id;if(!(j in m)){m[j]=0;if(!o.sort.$nullFn){o.sort()}m[j]=1;o.order=g.orderedItems.length;h.push(o)}return g},sortItems:function(f){var d=this,g=d.sortItem;if(f){if(f instanceof Array){Ext.each(f,g,d)}else{Ext.Object.eachValue(f,g,d)}}return d},applyPreSort:function(p){if(typeof p==="function"){return p}var q=p.split(","),r=[],s=q.length,o,m,c;for(m=0;m<s;++m){r[m]=1;c=q[m];if((o=c.charAt(0))==="-"){r[m]=-1}else{if(o!=="+"){o=0}}if(o){q[m]=c.substring(1)}}return function(j,b){var a=0,h,d,f,g;for(h=0;!a&&h<s;++h){d=q[h];f=j[d];g=b[d];a=r[h]*((f<g)?-1:((g<f)?1:0))}return a}},notify:function(){var s=this,A=s.timer,y=s.getCycleLimit(),z=Ext.GlobalEvents,u=s.suspendOnNotify,q,w,r,t,v,B;if(A){window.clearTimeout(A);s.timer=null}if(u){Ext.suspendLayouts()}while(s.scheduledCount){if(y){--y}else{s.firing=null;break}if(!B){B=true;if(z.hasListeners.beforebindnotify){z.fireEvent("beforebindnotify",s)}}++s.passes;if(!(v=s.orderedItems)){s.sort();v=s.orderedItems}t=v.length;if(t){s.firing=s.items;for(w=0;w<t;++w){r=v[w];if(r.scheduled){r.scheduled=false;--s.scheduledCount;s.notifyIndex=w;r.react();if(!s.scheduledCount){break}}}}}s.firing=null;s.notifyIndex=-1;if(u){Ext.resumeLayouts(true)}if((q=s.busyCounter)!==s.lastBusyCounter){if(!(s.lastBusyCounter=q)){s.fireEvent("idle",s)}}},onTick:function(){this.timer=null;this.notify()},scheduleItem:function(c){var d=this;++d.scheduledCount;if(!d.timer&&!d.firing){d.scheduleTick()}},scheduleTick:function(){var b=this;if(!b.destroyed&&!b.timer){b.timer=Ext.Function.defer(b.onTick,b.getTickDelay(),b)}},unscheduleItem:function(b){if(this.scheduledCount){--this.scheduledCount}},adjustBusy:function(f){var d=this,g=d.busyCounter+f;d.busyCounter=g;if(g){if(!d.lastBusyCounter){d.lastBusyCounter=g;d.fireEvent("busy",d)}}else{if(d.lastBusyCounter&&!d.timer){d.scheduleTick()}}},isBusy:function(){return !this.isIdle()},isIdle:function(){return !(this.busyCounter+this.lastBusyCounter)}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.util,"Scheduler"],0));(Ext.cmd.derive("Ext.data.Batch",Ext.Base,{config:{pauseOnException:false},current:-1,total:0,running:false,complete:false,exception:false,constructor:function(d){var c=this;c.mixins.observable.constructor.call(c,d);c.operations=[];c.exceptions=[]},add:function(f){var h=this,j,g;if(Ext.isArray(f)){for(j=0,g=f.length;j<g;++j){h.add(f[j])}}else{h.total++;f.setBatch(h);h.operations.push(f)}return h},sort:function(){this.operations.sort(this.sortFn)},sortFn:function(q,j){var h=q.order-j.order;if(h){return h}var m=q.entityType,p=j.entityType,o;if(!m||!p){return 0}if(!(o=m.rank)){m.schema.rankEntities();o=m.rank}return(o-p.rank)*q.foreignKeyDirection},start:function(d){var c=this;if(!c.operations.length||c.running){return c}c.exceptions.length=0;c.exception=false;c.running=true;return c.runOperation(Ext.isDefined(d)?d:c.current+1)},retry:function(){return this.start(this.current)},runNextOperation:function(){var b=this;if(b.running){b.runOperation(b.current+1)}return b},pause:function(){this.running=false;return this},getOperations:function(){return this.operations},getExceptions:function(){return this.exceptions},getCurrent:function(){var d=null,c=this.current;if(!(c===-1||this.complete)){d=this.operations[c]}return d},getTotal:function(){return this.total},isRunning:function(){return this.running},isComplete:function(){return this.complete},hasException:function(){return this.exception},runOperation:function(j){var h=this,f=h.operations,g=f[j];if(g===undefined){h.running=false;h.complete=true;h.fireEvent("complete",h,f[f.length-1])}else{h.current=j;g.setInternalCallback(h.onOperationComplete);g.setInternalScope(h);g.execute()}return h},onOperationComplete:function(f){var g=this,d=f.hasException();if(d){g.exception=true;g.exceptions.push(f);g.fireEvent("exception",g,f)}if(d&&g.getPauseOnException()){g.pause()}else{g.fireEvent("operationcomplete",g,f);g.runNextOperation()}}},1,0,0,0,0,[["observable",Ext.mixin.Observable]],[Ext.data,"Batch"],0));(Ext.cmd.derive("Ext.data.matrix.Slice",Ext.Base,{constructor:function(d,c){this.id=c;this.side=d;this.members={}},attach:function(d){var c=this;c.store=d;d.matrix=c;d.on("load",c.onStoreLoad,c,{single:true})},commit:function(){var d=this.members,c;for(c in d){d[c][2]=0}},onStoreLoad:function(b){this.update(b.getData().items,0)},update:function(E,K){var y=this,I=Ext.data.matrix.Slice,N=y.side,H=N.index,L=E.length,F=y.id,z=y.members,O=N.inverse,A=O.slices,J,C,D,B,P,G,M;for(D=0;D<L;++D){C=M=null;B=E[D];P=B.isEntity?(M=B).id:B;J=z[P];if(K<0&&J&&J[2]===1){delete z[P];G=A[P];if(G){delete G.members[F]}C=1}else{if(!J){J=[P,P,K];J[H]=F;z[P]=J;G=A[P];if(!G){A[P]=G=new I(O,P)}G.members[F]=J;C=1}else{if(K!==J[2]&&K!==0){J[2]=K;G=A[P];C=1}}}if(C){if(y.notify){y.notify.call(y.scope,y,P,K)}if(G&&G.notify){G.notify.call(G.scope,G,F,K)}}}},updateId:function(C){var u=this,D=u.id,v=u.side,r=v.slices,s=r[D],B=s.members,y=v.index,A=v.inverse.slices,w,z,t;u.id=C;r[C]=s;delete r[D];for(z in B){w=B[z];w[y]=C;t=A[z].members;t[C]=t[D];delete t[D]}},destroy:function(){var c=this,d=c.store;if(d){d.matrix=null;d.un("load",c.onStoreLoad,c)}c.notify=c.scope=c.store=c.side=c.members=null;c.callParent()}},1,0,0,0,0,0,[Ext.data.matrix,"Slice"],0));(Ext.cmd.derive("Ext.data.matrix.Side",Ext.Base,{constructor:function(g,f,h){var j=this;j.matrix=g;j.index=f;j.role=h;j.slices={}},commit:function(){var d=this.slices,c;for(c in d){d[c].commit()}},get:function(g,h){var o=this,j=o.slices,m=j[g]||(j[g]=new Ext.data.matrix.Slice(o,g));return(h||h===0)?m.members[h]:m},update:function(f,g,j){var h=this.get(f);return h.update(g,j)},updateId:function(g,f){var d=this.get(g);if(d){d.updateId(f)}},destroy:function(){var f=this,d=f.slices,g;for(g in d){d[g].destroy()}f.inverse=f.matrix=f.role=f.slices=null;f.callParent()}},1,0,0,0,0,0,[Ext.data.matrix,"Side"],0));(Ext.cmd.derive("Ext.data.matrix.Matrix",Ext.Base,{constructor:function(o,s){var q=this,j=s.isManyToMany?s:o.getSchema().getAssociation(s),m=Ext.data.matrix.Side,p=new m(q,0,j.left),r=new m(q,1,j.right);q.association=j;q.session=o;q.left=p;q.right=r;p.inverse=r;r.inverse=p},commit:function(){this.left.commit();this.right.commit()},update:function(d,f,g){return this.left.update(d,f,g)},updateId:function(m,o,s){var j=m.self,p=this.left,r=this.right,q;if(j===p.role.cls){q=p}if(j===r.role.cls){q=r}if(q){q.updateId(o,s)}},destroy:function(){var b=this;b.left.destroy();b.right.destroy();b.association=b.session=b.left=b.right=null;b.callParent()}},1,0,0,0,0,0,[Ext.data.matrix,"Matrix"],0));(Ext.cmd.derive("Ext.data.session.ChangesVisitor",Ext.Base,{constructor:function(g){var f=this,d;f.session=g;d=g.getCrudProperties();f.result=null;f.writerOptions={};f.createKey=d.create;f.readKey=d.read;f.updateKey=d.update;f.dropKey=d.drop},onDirtyRecord:function(B){var y=this,u=y.crud,C=B.phantom,E=B.dropped,A=!C&&!E,w=B.$className,F=(C||E)?"allDataOptions":"partialDataOptions",z=y.writerOptions,G=B.entityName,H,D,v,t;if(C&&E){return false}u=C?y.createKey:(E?y.dropKey:y.updateKey);z=z[w]||(z[w]={});if(E){if(!(H=z.drop)){z.drop=H={all:B.getProxy().getWriter().getWriteAllFields()}}if(!H.all){v=B.id}}if(!v){if(!(H=z[F])){H=B.getProxy().getWriter().getConfig(F);z[F]=H=Ext.Object.chain(H);y.setupOptions(H)}v=B.getData(H)}t=y.result||(y.result={});D=t[G]||(t[G]={});D=D[u]||(D[u]=[]);D.push(v)},setupOptions:function(b){b.serialize=true},onMatrixChange:function(v,q,r,z){var s=this,y=v.left.type,t=v.right.role,u=z<0?s.dropKey:s.createKey,w,p;p=s.result||(s.result={});w=p[y]||(p[y]={});w=w[t]||(w[t]={});w=w[u]||(w[u]={});w=w[q]||(w[q]=[]);w.push(r)}},1,0,0,0,0,0,[Ext.data.session,"ChangesVisitor"],0));(Ext.cmd.derive("Ext.data.session.ChildChangesVisitor",Ext.data.session.ChangesVisitor,{constructor:function(){this.seen={};Ext.data.session.ChangesVisitor.prototype.constructor.apply(this,arguments)},setupOptions:function(b){Ext.data.session.ChangesVisitor.prototype.setupOptions.call(this,b);b.serialize=false},onDirtyRecord:function(b){if(Ext.data.session.ChangesVisitor.prototype.onDirtyRecord.apply(this,arguments)!==false){if(!b.$source&&(b.dropped||!b.phantom)){this.readEntity(b)}}},readEntity:function(r){var q=this,s=q.readKey,v=r.entityName,u=r.id,w=q.seen,p=v+u,o,t;if(w[p]){return}w[p]=true;o=q.result||(q.result={});t=o[v]||(o[v]={});t=t[s]||(t[s]=[]);t.push(Ext.apply({},r.modified,r.data))}},1,0,0,0,0,0,[Ext.data.session,"ChildChangesVisitor"],0));(Ext.cmd.derive("Ext.data.session.BatchVisitor",Ext.Base,{map:null,constructor:function(b){this.batch=b},getBatch:function(r){var q=this.map,t=this.batch,p,m,u,o,s;if(q){if(!t){t=new Ext.data.Batch()}for(u in q){p=q[u];m=p.entity;s=m.getProxy();delete p.entity;for(o in p){o=s.createOperation(o,{records:p[o]});o.entityType=m;t.add(o)}}}if(t&&r!==false){t.sort()}return t},onDirtyRecord:function(j){var p=this,h=j.phantom?"create":(j.dropped?"destroy":"update"),q=j.$className,o=(p.map||(p.map={})),m=(o[q]||(o[q]={entity:j.self}));m=m[h]||(m[h]=[]);m.push(j)}},1,0,0,0,0,0,[Ext.data.session,"BatchVisitor"],0));(Ext.cmd.derive("Ext.data.Session",Ext.Base,{isSession:true,config:{schema:"default",parent:null,autoDestroy:true,crudProperties:{create:"C",read:"R",update:"U",drop:"D"}},destroyed:false,crudOperations:[{type:"R",entityMethod:"readEntities"},{type:"C",entityMethod:"createEntities"},{type:"U",entityMethod:"updateEntities"},{type:"D",entityMethod:"dropEntities"}],crudKeys:{C:1,R:1,U:1,D:1},constructor:function(d){var c=this;c.data={};c.matrices={};c.identifierCache={};c.recordCreator=c.recordCreator.bind(c);c.initConfig(d)},destroy:function(){var r=this,j=r.matrices,q=r.data,s,p,m,o;for(o in j){j[o].destroy()}for(s in q){p=q[s];for(o in p){m=p[o].record;if(m){m.$source=m.session=null}}}r.recordCreator=r.matrices=r.data=null;r.setSchema(null);r.callParent()},adopt:function(f){var h=this,j=f.associations,g;if(f.session!==h){f.session=h;h.add(f);if(j){for(g in j){j[g].adoptAssociated(f,h)}}}},commit:function(){var p=this.data,h=this.matrices,q,o,m,j;for(q in p){o=p[q];for(m in o){j=o[m].record;if(j){j.commit()}}}for(m in h){h[m].commit()}},createRecord:function(g,o){var m=g.$isClass?g:this.getSchema().getEntity(g),h=this.getParent(),j;if(o&&h){j=m.getIdFromData(o);if(h.peekRecord(m,j)){Ext.raise("A parent session already contains an entry for "+m.entityName+": "+j)}}return new m(o,this)},getChanges:function(){var b=new Ext.data.session.ChangesVisitor(this);this.visitData(b);return b.result},getChangesForParent:function(){var b=new Ext.data.session.ChildChangesVisitor(this);this.visitData(b);return b.result},getRecord:function(p,w,u){var q=this,v=p.isModel,r,t,o,s;if(v){v=p;w=p.id;p=p.self}r=q.peekRecord(p,w);if(!r){t=p.$isClass?p:q.getSchema().getEntity(p);o=q.getParent();if(o){s=o.peekRecord(t,w)}if(s){if(s.isLoading()){v=false}else{r=s.copy(undefined,q);r.$source=s}}if(!r){if(v){r=v;q.adopt(r)}else{r=t.createWithId(w,null,q);if(u!==false){r.load(Ext.isObject(u)?u:undefined)}}}}return r},getSaveBatch:function(d){var c=new Ext.data.session.BatchVisitor();this.visitData(c);return c.getBatch(d)},onInvalidAssociationEntity:function(d,c){Ext.raise("Unable to read association entity: "+this.getModelIdentifier(d,c))},onInvalidEntityCreate:function(d,c){Ext.raise("Cannot create, record already not exists: "+this.getModelIdentifier(d,c))},onInvalidEntityDrop:function(d,c){Ext.raise("Cannot drop, record does not exist: "+this.getModelIdentifier(d,c))},onInvalidEntityRead:function(d,c){Ext.raise("Cannot read, record already not exists: "+this.getModelIdentifier(d,c))},onInvalidEntityUpdate:function(f,g,d){if(d){Ext.raise("Cannot update, record dropped: "+this.getModelIdentifier(f,g))}else{Ext.raise("Cannot update, record does not exist: "+this.getModelIdentifier(f,g))}},peekRecord:function(s,p,o){var q=s.$isClass?s:this.getSchema().getEntity(s),u=q.entityName,r=this.data[u],m,t;r=r&&r[p];m=r&&r.record;if(!m&&o){t=this.getParent();m=t&&t.peekRecord(s,p,o)}return m||null},save:function(){var b=new Ext.data.session.ChildChangesVisitor(this);this.visitData(b);this.getParent().update(b.result)},spawn:function(){return new this.self({schema:this.getSchema(),parent:this})},update:function(A){var y=this,E=y.getSchema(),I=y.crudOperations,z=I.length,w=y.crudKeys,v,D,K,B,F,J,G,L,C,H;y.getSchema().processKeyChecks(true);for(v in A){D=E.getEntity(v);K=A[v];for(B=0;B<z;++B){F=I[B];J=K[F.type];if(J){y[F.entityMethod](D,J)}}}for(v in A){D=E.getEntity(v);G=D.associations;K=A[v];for(L in K){if(w[L]){continue}C=G[L];H=K[C.role];C.processUpdate(y,H)}}},privates:{add:function(h){var o=this,m=h.id,p=o.getEntry(h.self,m),q,j;p.record=h;o.registerReferences(h);q=h.associations;for(j in q){q[j].checkMembership(o,h)}},afterErase:function(b){this.evict(b)},applySchema:function(b){return Ext.data.schema.Schema.get(b)},createEntities:function(r,j){var m=j.length,s,q,p,o;for(s=0;s<m;++s){q=j[s];o=r.getIdFromData(q);p=this.peekRecord(r,o);if(!p){p=this.createRecord(r,q)}else{this.onInvalidEntityCreate(r,o)}p.phantom=true}},dropEntities:function(q,r){var j=r.length,s,p,o,m;if(j){m=Ext.isObject(r[0])}for(s=0;s<j;++s){o=r[s];if(m){o=q.getIdFromData(o)}p=this.peekRecord(q,o);if(p){p.drop()}else{this.onInvalidEntityDrop(q,o)}}},evict:function(h){var g=h.entityName,m=this.data[g],j=h.id,o;if(m){delete m[j]}},getEntityList:function(r,s){var m=s.length,j,o,p,q;for(j=0;j<m;++j){o=s[j];p=this.peekRecord(r,o);if(p){s[j]=p}else{q=true;s[j]=null;this.onInvalidAssociationEntity(r,o)}}if(q){s=Ext.Array.clean(s)}return s},getEntry:function(h,m){if(h.isModel){m=h.getId();h=h.self}var p=h.$isClass?h:this.getSchema().getEntity(h),j=p.entityName,o=this.data,q;q=o[j]||(o[j]={});q=q[m]||(q[m]={});return q},getRefs:function(t,u,p){var r=this.getEntry(t),s=r&&r.refs&&r.refs[u.role],q=p&&this.getParent(),o,w,v;if(q){o=q.getRefs(t,u);if(o){for(w in o){v=o[w];if((!s||!s[w])){this.getRecord(v.self,v.id)}}s=r&&r.refs&&r.refs[u.role]}}return s||null},getIdentifier:function(m){var o=this.getParent(),j,q,p,h;if(o){h=o.getIdentifier(m)}else{j=this.identifierCache;q=m.identifier;p=q.id||m.entityName;h=j[p];if(!h){if(q.clone){h=q.clone({cache:j})}else{h=q}j[p]=h}}return h},getMatrix:function(h,j){var m=h.isManyToMany?h.name:h,o=this.matrices,g;g=o[m];if(!g&&!j){g=o[m]=new Ext.data.matrix.Matrix(this,h)}return g||null},getMatrixSlice:function(h,j){var g=this.getMatrix(h.association),f=g[h.side];return f.get(j)},getModelIdentifier:function(d,c){return c+"@"+d.entityName},onIdChanged:function(O,I,M){var D=this,S=D.matrices,L=O.entityName,H=O.id,A=D.data[L],R=A[I],E=O.associations,Q=R.refs,T=D._setNoRefs,N,P,F,K,B,J,G,C;delete A[I];A[M]=R;for(C in S){S[C].updateId(O,I,M)}if(Q){for(J in Q){G=Q[J];B=E[J];N=B.association;if(!N.isManyToMany){P=N.field.name;for(K in G){G[K].set(P,H,T)}}}}D.registerReferences(O,I)},processManyBlock:function(t,s,q,v){var p=this,w,r,u,o;if(q){for(w in q){r=p.peekRecord(t,w);if(r){u=p.getEntityList(s.cls,q[w]);o=s.getAssociatedItem(r);p[v](s,o,r,u)}else{p.onInvalidAssociationEntity(t,w)}}}},processManyCreate:function(h,j,g,f){if(j){j.add(f)}else{g[h.getterName](null,null,f)}},processManyDrop:function(h,j,g,f){if(j){j.remove(f)}},processManyRead:function(h,j,g,f){if(j){j.setRecords(f)}else{g[h.getterName](null,null,f)}},readEntities:function(r,j){var m=j.length,s,q,p,o;for(s=0;s<m;++s){q=j[s];o=r.getIdFromData(q);p=this.peekRecord(r,o);if(!p){p=this.createRecord(r,q)}else{this.onInvalidEntityRead(r,o)}p.phantom=false}},recordCreator:function(o,m){var g=this,j=m.getIdFromData(o),h=g.peekRecord(m,j,true);if(!h){h=new m(o,g)}else{h=g.getRecord(m,j)}return h},registerReferences:function(z,E){var v=z.entityName,F=z.id,G=z.data,A=E||E===0,u,B,H,y,D,t,w,C;y=(t=z.references).length;for(B=0;B<y;++B){D=t[B];H=G[D.name];if(H||H===0){D=D.reference;v=D.type;C=D.inverse.role;u=this.getEntry(D.cls,H);w=u.refs||(u.refs={});w=w[C]||(w[C]={});w[F]=z;if(A){delete w[E]}}}},updateEntities:function(s,m){var o=m.length,t,r,q,p,u;if(Ext.isArray(m)){for(t=0;t<o;++t){r=m[t];p=s.getIdFromData(r);q=this.peekRecord(s,p);if(q){q.set(r)}else{this.onInvalidEntityUpdate(s,p)}}}else{for(p in m){r=m[p];q=this.peekRecord(s,p);if(q&&!q.dropped){u=q.set(r)}else{this.onInvalidEntityUpdate(s,p,!!q)}}}},updateReference:function(t,r,w,z){var v=r.reference,q=v.type,u=v.inverse.role,y=t.id,p,s;if(z||z===0){s=this.getEntry(q,z).refs[u];delete s[y]}if(w||w===0){p=this.getEntry(q,w);s=p.refs||(p.refs={});s=s[u]||(s[u]={});s[y]=t}},visitData:function(B){var z=this,D=z.data,u=z.matrices,v,A,F,I,y,E,G,C,w,J,H;z.getSchema().processKeyChecks(true);for(G in D){v=D[G];for(F in v){C=v[F].record;if(C){if(C.phantom||C.dirty||C.dropped){if(B.onDirtyRecord){B.onDirtyRecord(C)}}else{if(B.onCleanRecord){B.onCleanRecord(C)}}}}}if(B.onMatrixChange){for(G in u){y=u[G].left;J=y.slices;A=y.role.association;for(F in J){w=J[F];E=w.members;for(I in E){H=(C=E[I])[2];if(H){B.onMatrixChange(A,C[0],C[1],H)}}}}}return B},_setNoRefs:{refs:false}}},1,0,0,0,0,0,[Ext.data,"Session"],0));(Ext.cmd.derive("Ext.util.Schedulable",Ext.Base,{"abstract":true,isSchedulable:true,scheduled:false,constructor:function(){this.getScheduler().add(this)},destroy:function(){var c=this,d=c.getScheduler();if(d){d.remove(c)}c.scheduler=null;c.schedule=c.react=Ext.emptyFn;c.callParent()},getFullName:function(){return this.name||this.id},privates:{getScheduler:function(){return this.scheduler},schedule:function(){var c=this,d;if(!c.scheduled){d=c.getScheduler();if(d){c.scheduled=true;if(c.onSchedule){c.onSchedule()}d.scheduleItem(c)}}},unschedule:function(){var c=this,d;if(c.scheduled){d=c.getScheduler();if(d){d.unscheduleItem(c)}c.scheduled=false}},sort:function(){}}},1,0,0,0,0,0,[Ext.util,"Schedulable"],0));(Ext.cmd.derive("Ext.app.bind.BaseBinding",Ext.util.Schedulable,{calls:0,kind:20,defaultOptions:{},lastValue:undefined,constructor:function(h,j,o,g){var m=this;m.options=g;m.owner=h;m.scope=o;m.callback=j;m.lateBound=Ext.isString(j);if(g&&g.deep){m.deep=true}Ext.util.Schedulable.prototype.constructor.call(this)},destroy:function(){var c=this,d=c.owner;Ext.util.Schedulable.prototype.destroy.call(this);if(d){d.onBindDestroy(c)}c.scope=c.callback=c.owner=null},isReadOnly:function(){return true},privates:{getScheduler:function(){var b=this.owner;return b&&b.getScheduler()},getSession:function(){var b=this.owner;return b.isSession?b:b.getSession()},notify:function(h){var j=this,g=j.options||j.defaultOptions,f=j.lastValue;if(!j.calls||j.deep||f!==h||Ext.isArray(h)){++j.calls;j.lastValue=h;if(j.lateBound){j.scope[j.callback](h,f,j)}else{j.callback.call(j.scope,h,f,j)}if(g.single){j.destroy()}}}}},1,0,0,0,0,0,[Ext.app.bind,"BaseBinding"],0));(Ext.cmd.derive("Ext.app.bind.Binding",Ext.app.bind.BaseBinding,{constructor:function(m,j,g,h){var o=this;Ext.app.bind.BaseBinding.prototype.constructor.call(this,m.owner,j,g,h);o.stub=m;o.depth=m.depth;if(!m.isLoading()&&!m.scheduled){o.schedule()}},destroy:function(g){var f=this,d=f.stub;if(d&&!g){d.unbind(f);f.stub=null}Ext.app.bind.BaseBinding.prototype.destroy.call(this)},bindValidation:function(g,f){var d=this.stub;return d&&d.bindValidation(g,f)},bindValidationField:function(g,f){var d=this.stub;return d&&d.bindValidationField(g,f)},getFullName:function(){return this.fullName||(this.fullName="@("+this.stub.getFullName()+")")},getValue:function(){var d=this,g=d.stub,f=g&&g.getValue();if(d.transform){f=d.transform(f)}return f},isLoading:function(){var b=this.stub;return b&&b.isLoading()},isReadOnly:function(){var c=this.stub,d=this.options;if(!(d&&d.twoWay===false)){if(c){return c.isReadOnly()}}return true},refresh:function(){},setValue:function(b){this.stub.set(b)},privates:{getDataObject:function(){var b=this.stub;return b&&b.getDataObject()},getRawValue:function(){var d=this,g=d.stub,f=g&&g.getRawValue();if(d.transform){f=d.transform(f)}return f},isDescendantOf:function(d){var c=this.stub;return c?(d===c)||c.isDescendantOf(d):false},react:function(){this.notify(this.getValue())},schedule:function(){if(!this.stub.scheduled){Ext.app.bind.BaseBinding.prototype.schedule.call(this)}},sort:function(){var b=this.stub;b.scheduler.sortItem(b)}}},1,0,0,0,0,0,[Ext.app.bind,"Binding"],0));(Ext.cmd.derive("Ext.app.bind.AbstractStub",Ext.util.Schedulable,{children:null,depth:0,generation:1,kind:10,parent:null,constructor:function(f,d){var g=this;g.owner=f;g.name=d;Ext.util.Schedulable.prototype.constructor.call(this)},destroy:function(){var o=this,p=o.children,m=o.bindings,j,q,h;if(m){for(q=0,j=m.length;q<j;++q){m[q].destroy(true)}}for(h in p){p[h].destroy()}Ext.util.Schedulable.prototype.destroy.call(this);o.bindings=o.children=o.owner=null},add:function(c){var d=this;(d.children||(d.children={}))[c.name]=c;c.depth=d.depth+1;c.parent=d},getChild:function(c){var d=Ext.isString(c)?c.split("."):c;if(d&&d.length){return this.descend(d,0)}return this},getFullName:function(){var h=this,g=h.fullName,j=h.parent,f;if(!g){g=h.name||h.id;if(j&&(f=j.getFullName())){g=((f.charAt(f.length-1)!==":")?f+".":f)+g}h.fullName=g}return g},getSession:function(){var b=this.owner;return b.isSession?b:b.getSession()},bind:function(m,h,j){var q=this,p=new Ext.app.bind.Binding(q,m,h,j),o=(q.bindings||(q.bindings=[]));p.depth=q.depth;o.push(p);return p},getValue:function(){return this.isLoading()?null:this.getRawValue()},graft:function(o){var m=this,j=m.bindings,h=m.name,g;m.parent=m.bindings=null;m.destroy();o.depth=m.depth;o.bindings=j;o.generation=m.generation+1;o.name=h;o.id=m.id;o.path=m.path;if(j){for(g=j.length;g-->0;){j[g].stub=o}}return o},isDescendantOf:function(c){for(var d=this;d=d.parent;){if(d===c){return true}}return false},onSchedule:function(){for(var g,h,m,j,o=this.parent;o;o=o.parent){j=o.bindings;if(j){for(g=0,h=j.length;g<h;++g){m=j[g];if(m.deep&&!m.scheduled){m.schedule()}}}}},react:function(){var h=this.bindings,j,f,g;if(h){for(f=0,g=h.length;f<g;++f){j=h[f];if(!j.scheduled){j.schedule()}}}},unbind:function(d){var c=this.bindings;if(c&&c.length){Ext.Array.remove(c,d)}},privates:{collect:function(){var q=this.children,m=this.bindings,j=0,p=0,o,h;if(q){for(h in q){o=q[h];p=o.collect();if(p===0){o.destroy();delete q[h]}j+=p}}if(m){j+=m.length}return j},getScheduler:function(){var b=this.owner;return b&&b.getScheduler()},sort:function(){var b=this.parent;if(b){this.scheduler.sortItem(b)}}}},1,0,0,0,0,0,[Ext.app.bind,"AbstractStub"],0));(Ext.cmd.derive("Ext.app.bind.Stub",Ext.app.bind.AbstractStub,{isStub:true,dirty:true,formula:null,validationKey:"validation",statics:{trackHadValue:function(s,o,q,r){var u=r&&r.children,p,m,t;t=s!==undefined;if(!o.hadValue[q]){o.hadValue[q]=t}if(r){r.hadValue=t}if(s&&(s.constructor===Object||s.isModel)){if(s.isModel){s=s.data}for(m in s){Ext.app.bind.Stub.trackHadValue(s[m],o,q+"."+m,u&&u[m])}}}},constructor:function(h,g,o){var m=this,j=g;Ext.app.bind.AbstractStub.prototype.constructor.call(this,h,g);m.boundValue=null;if(o){o.add(m);if(!o.isRootStub){j=o.path+"."+g}}m.hadValue=h.hadValue[j];m.path=j},destroy:function(){var j=this,h=j.formula,g=j.parent,f=j.storeBinding;if(h){h.destroy()}if(f){f.destroy()}j.detachBound();j.parentValue=j.formula=j.storeBinding=null;Ext.app.bind.AbstractStub.prototype.destroy.call(this)},bindValidation:function(g,d){var f=this.parent;return f&&f.descend([this.validationKey,this.name]).bind(g,d)},bindValidationField:function(m,p){var q=this.parent,h=this.name,o=typeof m==="string",j;if(q){j=q.bind(function(b){var a=null;if(b&&b.isModel){a=b.getField(h)}if(o){p[m](a,null,this)}else{m.call(p,a,null,this)}})}return j||null},descend:function(p,s){var q=this,r=q.children||(q.children={}),o=s||0,j=p[o++],m;if(!(m=r[j])){m=new Ext.app.bind.Stub(q.owner,j,q)}if(o<p.length){m=m.descend(p,o)}return m},getChildValue:function(g){var h=this,j=h.name,f;if(!g&&!Ext.isString(g)){f=h.hadValue?null:undefined}else{f=h.inspectValue(g);if(!f){if(g.isEntity){f=g.data[j]}else{f=g[j]}}}return f},getDataObject:function(){var m=this,h=m.parent.getDataObject(),p=m.name,q=h?h[p]:null,o,j;if(!q&&h&&h.isEntity){o=h.associations;if(o&&p in o){q=h[o[p].getterName]()}}if(!q||!(q.$className||Ext.isObject(q))){h[p]=q={};m.hadValue=m.owner.hadValue[m.path]=true;m.invalidate(true,true)}return q},getRawValue:function(){return this.getChildValue(this.getParentValue())},graft:function(o){var m=this,p=m.parent,q=m.children,j=m.name,h;o.parent=p;o.children=q;if(p){p.children[j]=o}if(q){for(h in q){q[h].parent=o}}m.children=null;return Ext.app.bind.AbstractStub.prototype.graft.call(this,o)},isLoading:function(){var r=this,s=r.parent,o=false,j,p,q,m;if(s&&!(o=s.isLoading())){p=r.getParentValue();q=r.inspectValue(p);if(q){o=q.isLoading()}else{if(p&&p.isModel){j=p.associations;if(!(j&&r.name in j)){o=false;m=true}}if(!m){o=!r.hadValue&&r.getRawValue()===undefined}}}return o},invalidate:function(g,h){var j=this,m=j.children,o;j.dirty=true;if(!h&&!j.isLoading()){if(!j.scheduled){j.schedule()}}if(g&&m){for(o in m){m[o].invalidate(g,h)}}},isReadOnly:function(){var b=this.formula;return !!(b&&!b.set)},set:function(p){var q=this,o=q.parent,w=q.name,s=q.formula,r,u,v,t;if(s&&!s.settingValue&&s.set){s.setValue(p);return}else{if(q.isLinkStub){t=q.getLinkFormulaStub();s=t?t.formula:null;if(s){s.setValue(p);return}}}r=o.getDataObject();if(r.isEntity){u=r.associations;if(u&&(w in u)){v=u[w];r[v.setterName](p);q.invalidate(true)}else{r.set(w,p)}}else{if((p&&p.constructor===Object)||p!==r[w]){if(!q.setByLink(p)){if(p===undefined){delete r[w]}else{r[w]=p;Ext.app.bind.Stub.trackHadValue(p,q.owner,q.path,q)}q.inspectValue(r);q.invalidate(true)}}}},onStoreLoad:function(){this.invalidate(true)},afterLoad:function(b){this.invalidate(true)},afterCommit:function(b){this.afterEdit(b,null)},afterEdit:function(q,s){var u=this.children,p=s&&s.length,t=q.associations,o,r,v,w;if(u){if(p){for(r=0;r<p;++r){v=u[s[r]];if(v){v.invalidate()}}}else{for(o in u){if(!(t&&o in t)){u[o].invalidate()}}}}this.invalidate()},afterReject:function(b){this.afterEdit(b,null)},setByLink:function(r){var s=this,o=0,m,j,p,q;for(q=s;q;q=q.parent){if(q.isLinkStub){j=q;if(o){for(p=[],m=0,q=s;q!==j;q=q.parent){++m;p[o-m]=q.name}}break}++o}if(!j||!(q=j.getTargetStub())){return false}if(p){q=q.descend(p)}q.set(r);return true},setFormula:function(g){var f=this,d=f.formula;if(d){d.destroy()}f.formula=new Ext.app.bind.Formula(f,g)},react:function(){var j=this,f=this.boundValue,g=j.children,h;if(f){if(f.isValidation){f.refresh();h=f.generation;if(j.lastValidationGeneration===h){return}j.lastValidationGeneration=h}else{if(f.isModel){if(g&&g[j.validationKey]){f.isValid()}}else{if(f.isStore){if(f.isLoading()&&!f.loadCount){return}}}}}Ext.app.bind.AbstractStub.prototype.react.call(this)},privates:{collect:function(){var j=this,g=Ext.app.bind.AbstractStub.prototype.collect.call(this),f=j.storeBinding?1:0,h=j.formula?1:0;return g+f+h},getLinkFormulaStub:function(){var b=this;while(b.isLinkStub){b=b.binding.stub}return b.formula?b:null},getParentValue:function(){var b=this;if(b.dirty){b.parentValue=b.parent.getValue();b.dirty=false}return b.parentValue},setStore:function(b){this.storeBinding=b},inspectValue:function(q){var p=this,w=p.name,s=p.boundValue,v=null,u,o,t,r;if(q&&q.isEntity){u=q.associations;if(u&&(w in u)){v=q[u[w].getterName]();if(v&&v.isStore){v.$associatedStore=true}}else{if(w===p.validationKey){v=q.getValidation();p.lastValidationGeneration=null}}}else{if(q){o=q[w];if(o&&(o.isModel||o.isStore)){v=o}}}t=s!==v;if(t){if(s){p.detachBound()}if(v){if(v.isModel){v.join(p)}else{r=v.associatedEntity;if(r&&!r.phantom&&!v.complete&&!v.hasPendingLoad()){v.load()}v.on("load",p.onStoreLoad,p,{single:true})}}p.boundValue=v}return v},detachBound:function(){var d=this,c=d.boundValue;if(c){if(c.isModel){c.unjoin(d)}else{c.un("load",d.onStoreLoad,d)}}},sort:function(){var j=this,h=j.formula,g=j.scheduler,f=j.storeBinding;Ext.app.bind.AbstractStub.prototype.sort.call(this);if(f){g.sortItem(f)}if(h){g.sortItem(h)}}}},1,0,0,0,0,0,[Ext.app.bind,"Stub"],0));(Ext.cmd.derive("Ext.app.bind.LinkStub",Ext.app.bind.Stub,{isLinkStub:true,binding:null,destroy:function(){var d=this,g=d.binding,f=d.owner;if(g){d.binding=null;g.destroy();if(f){delete f.linkData[d.name]}}d.target=null;Ext.app.bind.Stub.prototype.destroy.call(this)},getFullName:function(){var b=this;return b.fullName||(b.fullName="("+Ext.app.bind.Stub.prototype.getFullName.call(this)+" -> "+b.binding.getFullName()+")")},getDataObject:function(){var b=this.binding;return b&&b.getDataObject()},getRawValue:function(){var b=this.binding;return b&&b.getRawValue()},getValue:function(){var b=this.binding;return b&&b.getValue()},getTargetStub:function(){var b=this.binding;return b&&b.stub},isLoading:function(){var b=this.binding;return b?b.isLoading():false},link:function(h,f){var g=this,j=g.binding;if(j){j.destroy()}f=g.target=f||g.owner;g.linkDescriptor=h;g.binding=f.bind(h,g.onChange,g);g.binding.deep=true},onChange:function(){this.invalidate(true)},react:function(){var c=this,d=c.owner.linkData;d[c.name]=c.getValue();Ext.app.bind.Stub.prototype.react.call(this)},privates:{collect:function(){var d=this,f=Ext.app.bind.Stub.prototype.collect.call(this),g=d.binding?1:0;return f+g},sort:function(){var b=this.binding;if(b){this.scheduler.sortItem(b)}}}},0,0,0,0,0,0,[Ext.app.bind,"LinkStub"],0));(Ext.cmd.derive("Ext.app.bind.RootStub",Ext.app.bind.AbstractStub,{isRootStub:true,depth:0,createRootChild:function(z,u){var q=this,y=q.owner,t=y.getData(),w=q.children,r=w&&w[z],s=r?null:q,p,v;if(u||t.hasOwnProperty(z)||!(p=y.getParent())){v=new Ext.app.bind.Stub(y,z,s)}else{v=new Ext.app.bind.LinkStub(y,z,r?null:s);v.link("{"+z+"}",p)}if(r){r.graft(v)}return v},createStubChild:function(b){return this.createRootChild(b,true)},descend:function(p,s){var q=this,r=q.children,o=s||0,j=p[o++],m=(r&&r[j])||q.createRootChild(j);if(o<p.length){m=m.descend(p,o)}return m},getFullName:function(){return this.fullName||(this.fullName=this.owner.id+":")},getDataObject:function(){return this.owner.data},getRawValue:function(){return this.owner.data},getValue:function(){return this.owner.data},isDescendantOf:function(){return false},isLoading:function(){return false},set:function(s){var t=this,y=t.children||(t.children={}),z=t.owner,v=z.data,p=z.getParent(),u,w,q,r;for(r in s){if((q=s[r])!==undefined){if(!(w=y[r])){w=new Ext.app.bind.Stub(z,r,t)}else{if(w.isLinkStub){if(!w.getLinkFormulaStub()){u=w;w=new Ext.app.bind.Stub(z,r);u.graft(w)}}}w.set(q)}else{if(v.hasOwnProperty(r)){delete v[r];w=y[r];if(w&&!w.isLinkStub&&p){w=t.createRootChild(r)}w.invalidate(true)}}}},schedule:Ext.emptyFn,unschedule:Ext.emptyFn},0,0,0,0,0,0,[Ext.app.bind,"RootStub"],0));(Ext.cmd.derive("Ext.app.bind.Multi",Ext.app.bind.BaseBinding,{isMultiBinding:true,missing:1,deep:true,constructor:function(q,m,o,s,j){var r=this,p=j&&j.trackStatics;Ext.app.bind.BaseBinding.prototype.constructor.call(this,m,o,s,j);r.bindings=[];r.literal=q.$literal;if(q.constructor===Object){if(p){r.staticKeys=[]}r.addObject(q,r.lastValue={},r.staticKeys)}else{r.addArray(q,r.lastValue=[])}if(!--r.missing&&!r.scheduled){r.schedule()}},destroy:function(){var b=this;b.bindings=Ext.destroy(b.bindings);Ext.app.bind.BaseBinding.prototype.destroy.call(this)},add:function(v,r,o){var p=this,t=p.owner,u=p.bindings,w=p.literal?(v.reference?"bindEntity":"bindExpression"):"bind",q,s;++p.missing;q=t[w](v,function(a){r[o]=a;if(q.calls===1){--p.missing}if(!p.missing&&!p.scheduled){p.schedule()}},p,null);s=q.depth;if(!u.length||s<p.depth){p.depth=s}u.push(q);return !this.isBindingStatic(q)},addArray:function(u,b){var r=this,p=u.length,t=false,q,o,s;for(s=0;s<p;++s){o=u[s];if(o&&(o.reference||Ext.isString(o))){q=r.add(o,b,s)}else{if(Ext.isArray(o)){q=r.addArray(o,b[s]=[])}else{if(o&&o.constructor===Object){q=r.addObject(o,b[s]={})}else{b[s]=o;q=false}}}t=t||q}return t},addObject:function(u,r,p){var q=this,s=false,b,o,t;for(t in u){o=u[t];if(o&&(o.reference||Ext.isString(o))){b=q.add(o,r,t)}else{if(Ext.isArray(o)){b=q.addArray(o,r[t]=[])}else{if(o&&o.constructor===Object){b=q.addObject(o,r[t]={})}else{r[t]=o;b=false}}}if(p&&!b){p.push(t)}s=s||b}return s},getFullName:function(){var o=this,m=o.fullName,j=o.bindings,g=j.length,h;if(!m){m="@[";for(h=0;h<g;++h){if(h){m+=","}m+=j[h].getFullName()}m+="]";o.fullName=m}return m},getRawValue:function(){return this.lastValue},isDescendantOf:function(){return false},isLoading:function(){for(var c=this.bindings,d=c.length;d-->0;){if(c[d].isLoading()){return true}}return false},isBindingStatic:function(b){return b.isTemplateBinding&&b.isStatic},isStatic:function(){var h=this.bindings,g=h.length,f,j;for(f=0;f<g;++f){j=h[f];if(!this.isBindingStatic(j)){return false}}return true},pruneStaticKeys:function(){var h=Ext.apply({},this.lastValue),j=this.staticKeys,g=j.length,f;for(f=0;f<g;++f){delete h[j[f]]}return h},react:function(){this.notify(this.lastValue)},refresh:function(){},privates:{sort:function(){this.scheduler.sortItems(this.bindings)}}},1,0,0,0,0,0,[Ext.app.bind,"Multi"],0));(Ext.cmd.derive("Ext.app.bind.Formula",Ext.util.Schedulable,{statics:{getFormulaParser:function(f){var g=this.formulaCache,h,j;if(!g){g=this.formulaCache=new Ext.util.LruCache({maxSize:20})}h=g.get(f);if(!h){j="[^\\.a-z0-9_]"+f+"\\(\\s*(['\"])(.*?)\\1\\s*\\)";h=new RegExp(j,"gi");g.add(f,h)}return h}},isFormula:true,calculation:null,explicit:false,set:null,single:false,argumentNamesRe:/^function\s*\(\s*([^,\)\s]+)/,constructor:function(q,p){var r=this,m=q.owner,t,s,o,u;r.owner=m;r.stub=q;Ext.util.Schedulable.prototype.constructor.call(this);if(p instanceof Function){r.get=o=p}else{r.get=o=p.get;r.set=p.set;s=p.bind;if(p.single){r.single=p.single}if(s){t=s.bindTo;if(t){u=Ext.apply({},s);delete u.bindTo;s=t}}}if(s){r.explicit=true}else{s=o.$expressions||r.parseFormula(o)}r.binding=m.bind(s,r.onChange,r,u)},destroy:function(){var f=this,g=f.binding,d=f.stub;if(g){g.destroy();f.binding=null}if(d){d.formula=null}Ext.util.Schedulable.prototype.destroy.call(this);f.getterFn=f.owner=null},getFullName:function(){return this.fullName||(this.fullName=this.stub.getFullName()+"="+Ext.util.Schedulable.prototype.getFullName.call(this)+")")},getRawValue:function(){return this.calculation},onChange:function(){if(!this.scheduled){this.schedule()}},parseFormula:function(o){var p=o.toString(),r={$literal:true},s,j,m,q;s=this.argumentNamesRe.exec(p);j=s?s[1]:"get";m=Ext.app.bind.Formula.getFormulaParser(j);while((s=m.exec(p))){q=s[2];r[q]=q}r.$literal=true;o.$expressions=r;return r},react:function(){var o=this,g=o.owner,m=o.binding.lastValue,j=o.getterFn,h;if(o.explicit){h=m}else{h=g.getFormulaFn(m)}o.settingValue=true;o.stub.set(o.calculation=o.get.call(g,h));o.settingValue=false;if(o.single){o.destroy()}},setValue:function(b){this.set.call(this.stub.owner,b)},privates:{getScheduler:function(){var b=this.owner;return b&&b.getScheduler()},sort:function(){var d=this,c=d.binding;if(!c.destroyed){d.scheduler.sortItem(c)}}}},1,0,0,0,0,0,[Ext.app.bind,"Formula"],0));(Ext.cmd.derive("Ext.app.bind.Template",Ext.Base,{numberRe:/^(?:\d+(?:\.\d*)?)$/,stringRe:/^(?:["][^"]*["])$/,tokenRe:/\{[!]?(?:(?:(\d+)|([a-z_][\w\-\.]*))(?::([a-z_\.]+)(?:\(([^\)]*?)?\))?)?)\}/gi,formatRe:/^([a-z_]+)(?:\(([^\)]*?)?\))?$/i,buffer:null,slots:null,tokens:null,constructor:function(h){var j=this,f=j._initters,g;j.text=h;for(g in f){j[g]=f[g]}},_initters:{apply:function(d,c){return this.parse().apply(d,c)},getTokens:function(){return this.parse().getTokens()}},apply:function(p,o){var s=this,t=s.slots,v=s.buffer,w=t.length,u,q,r;for(u=0;u<w;++u){q=t[u];if(q){if((r=p[q.pos])==null){r=""}if(q.not){r=!r}if(q.format){r=q.format(r,o)}v[u]=r}}return v.join("")},getTokens:function(){return this.tokens},parse:function(){var z=this,K=z.text,E=[],B=[],A=[],L={},s=0,F=z.tokenRe,y=0,H,D,I,C,J,w,G;for(D in z._initters){delete z[D]}z.buffer=E;z.slots=B;z.tokens=A;while((C=F.exec(K))){I=C.index-s;if(I){E[y++]=K.substring(s,s+I);s+=I}s+=(J=C[0]).length;w={fmt:(H=C[3]||null),index:C[1]?parseInt(C[1],10):null,not:J.charAt(1)==="!",token:C[2]||null};G=w.token||String(w.index);if(G in L){w.pos=L[G]}else{L[G]=w.pos=A.length;A.push(G)}if(H){if(H.substring(0,5)==="this."){w.fmt=H.substring(5)}else{w.scope=Ext.util.Format}z.parseArgs(C[4],w)}B[y++]=w}if(s<K.length){E[y++]=K.substring(s)}return z},parseArgs:function(r,q){var s=this,v=s.numberRe,p=s.stringRe,o,t,u,w;if(!r){t=[]}else{if(r.indexOf(",")<0){t=[r]}else{t=r.split(",")}}q=q||{};w=t.length;q.args=t;for(u=0;u<w;++u){o=t[u];if(o==="true"){t[u]=true}else{if(o==="false"){t[u]=false}else{if(o==="null"){t[u]=null}else{if(v.test(o)){t[u]=parseFloat(o)}else{if(p.test(o)){t[u]=o.substring(1,o.length-1)}else{q.fn=Ext.functionFactory("return ["+r+"];");q.format=s._formatEval;break}}}}}}if(!q.format){t.unshift(0);q.format=s._formatArgs}return q},parseFormat:function(h){var m=this,o=m.formatRe.exec(h),j={fmt:h,scope:Ext.util.Format},g;g=o[2];if(g){j.fmt=o[1];m.parseArgs(g,j)}else{j.args=[0];j.format=m._formatArgs}return j},_formatArgs:function(c,d){d=this.scope||d;this.args[0]=c;return d[this.fmt].apply(d,this.args)},_formatEval:function(g,d){var f=this.fn();f.unshift(g);d=this.scope||d;return d[this.fmt].apply(d,f)}},1,0,0,0,0,0,[Ext.app.bind,"Template"],0));(Ext.cmd.derive("Ext.app.bind.TemplateBinding",Ext.app.bind.BaseBinding,{isTemplateBinding:true,lastValue:undefined,value:undefined,constructor:function(s,o,p,t,u){var r=this,m=new Ext.app.bind.Template(s),q=m.getTokens();Ext.app.bind.BaseBinding.prototype.constructor.call(this,o,p,t,u);r.tpl=m;r.tokens=q;q.$literal=true;if(q.length){r.multiBinding=new Ext.app.bind.Multi(q,o,r.onBindData,r)}else{r.isStatic=true;r.onData(m.text)}},destroy:function(){var b=this;Ext.destroy(b.multiBinding);b.tpl=b.multiBinding=null;Ext.app.bind.BaseBinding.prototype.destroy.call(this)},getFullName:function(){var b=this.multiBinding;return this.fullName||(this.fullName="$"+(b?b.getFullName():Ext.app.bind.BaseBinding.prototype.getFullName.call(this)))},getRawValue:function(){return this.value},getTemplateScope:function(){return null},isDescendantOf:function(){return false},isLoading:function(){var b=this.multiBinding;return b?b.isLoading():false},onBindData:function(b){this.onData(this.tpl.apply(b,this.getTemplateScope()))},onData:function(g){var d=this,f=d.value;if(f!==(d.value=g)){d.lastValue=f;d.schedule()}},react:function(){this.notify(this.value)},refresh:function(){var b=this.multiBinding;if(b){b.refresh()}},privates:{sort:function(){var b=this.multiBinding;if(b){this.scheduler.sortItem(b)}}}},1,0,0,0,0,0,[Ext.app.bind,"TemplateBinding"],0));(Ext.cmd.derive("Ext.data.ChainedStore",Ext.data.AbstractStore,{config:{source:null,remoteFilter:false,remoteSort:false},constructor:function(){Ext.data.AbstractStore.prototype.constructor.apply(this,arguments);this.getData().addObserver(this)},remove:function(){var b=this.getSource();return b.remove.apply(b,arguments)},removeAll:function(){var b=this.getSource();return b.removeAll()},getData:function(){var d=this,c=d.data;if(!c){d.data=c=d.constructDataCollection()}return c},getSession:function(){return this.getSource().getSession()},applySource:function(b){if(b){b=Ext.data.StoreManager.lookup(b)}return b},updateSource:function(h,f){var g=this,j;if(f){f.removeObserver(g)}if(h){j=g.getData();j.setSource(h.getData());if(!g.isInitializing){g.fireEvent("refresh",g);g.fireEvent("datachanged",g)}h.addObserver(g)}},getModel:function(){return this.getSource().getModel()},getProxy:function(){return null},onCollectionAdd:function(m,o){var g=this,h=o.items,j=!o.next;if(g.ignoreCollectionAdd){return}g.fireEvent("add",g,h,o.at);if(j){g.fireEvent("datachanged",g)}},onCollectionItemChange:function(m,o){var p=this,j=o.item,q=o.modified||null,h=o.meta;p.onUpdate(j,h,q,o);p.fireEvent("update",p,j,h,q,o)},onUpdate:Ext.emptyFn,onCollectionRemove:function(m,o){var g=this,h=o.items,j=!o.next;if(g.ignoreCollectionRemove){return}g.fireEvent("remove",g,h,o.at,false);if(j){g.fireEvent("datachanged",g)}},onSourceBeforeLoad:function(c,d){this.fireEvent("beforeload",this,d)},onSourceAfterLoad:function(j,f,h,g){this.fireEvent("load",this,f,h,g)},onFilterEndUpdate:function(){Ext.data.AbstractStore.prototype.onFilterEndUpdate.apply(this,arguments);this.callObservers("Filter")},onSourceBeforePopulate:function(){this.ignoreCollectionAdd=true;this.callObservers("BeforePopulate")},onSourceAfterPopulate:function(){var b=this;b.ignoreCollectionAdd=false;b.fireEvent("datachanged",b);b.fireEvent("refresh",b);this.callObservers("AfterPopulate")},onSourceBeforeClear:function(){this.ignoreCollectionRemove=true;this.callObservers("BeforeClear")},onSourceAfterClear:function(){this.ignoreCollectionRemove=false;this.callObservers("AfterClear")},onSourceBeforeRemoveAll:function(){this.ignoreCollectionRemove=true;this.callObservers("BeforeRemoveAll")},onSourceAfterRemoveAll:function(g,f){var d=this;d.ignoreCollectionRemove=false;if(!f){d.fireEvent("clear",d);d.fireEvent("datachanged",d)}this.callObservers("AfterRemoveAll",[f])},onSourceFilter:function(){var b=this;b.fireEvent("refresh",b);b.fireEvent("datachanged",b)},hasPendingLoad:function(){return this.getSource().hasPendingLoad()},isLoaded:function(){return this.getSource().isLoaded()},isLoading:function(){return this.getSource().isLoading()},onDestroy:function(){var b=this;b.observers=null;b.setSource(null);b.getData().destroy(true);b.data=null},privates:{isMoving:function(){var b=this.getSource();return b.isMoving?b.isMoving.apply(b,arguments):false},loadsSynchronously:function(){return this.getSource().loadsSynchronously()}}},1,0,0,0,["store.chained"],[[Ext.data.LocalStore.prototype.mixinId||Ext.data.LocalStore.$className,Ext.data.LocalStore]],[Ext.data,"ChainedStore"],0));(Ext.cmd.derive("Ext.app.ViewModel",Ext.Base,{isViewModel:true,factoryConfig:{name:"viewModel"},collectTimeout:100,expressionRe:/^(?:\{[!]?(?:(\d+)|([a-z_][\w\-\.]*))\})$/i,$configStrict:false,config:{data:true,formulas:{$value:null,merge:function(h,g,j,f){return this.mergeNew(h,g,j,f)}},links:null,parent:null,root:true,scheduler:null,schema:"default",session:null,stores:null,view:null},constructor:function(b){this.hadValue={};this.bindings={};this.initConfig(b)},destroy:function(){var t=this,v=t._scheduler,p=t.storeInfo,r=t.getParent(),w=t.collectTask,y=t.children,z=t.bindings,q,s,u;t.destroying=true;if(w){w.cancel();t.collectTask=null}if(y){for(q in y){y[q].destroy()}}if(p){for(q in p){s=p[q];u=s.autoDestroy;if(u||(!s.$wasInstance&&u!==false)){s.destroy()}Ext.destroy(s.$binding)}}if(r){r.unregisterChild(t)}t.getRoot().destroy();for(q in z){z[q].destroy()}if(v&&v.$owner===t){v.$owner=null;v.destroy()}t.hadValue=t.children=t.storeInfo=t._session=t._view=t._scheduler=t.bindings=t._root=t._parent=t.formulaFn=t.$formulaData=null;t.destroying=false;t.callParent()},bind:function(q,o,s,j){var r=this,p,m;s=s||r;if(!j&&q.bindTo!==undefined&&!Ext.isString(q)){j=q;q=j.bindTo}if(!Ext.isString(q)){p=new Ext.app.bind.Multi(q,r,o,s,j);m=true}else{if(r.expressionRe.test(q)){q=q.substring(1,q.length-1);p=r.bindExpression(q,o,s,j)}else{p=new Ext.app.bind.TemplateBinding(q,r,o,s,j);m=true}}if(m){r.bindings[p.id]=p}return p},getSession:function(){var d=this,g=d._session,f;if(!g&&(f=d.getParent())){d.setSession(g=f.getSession())}return g||null},getStore:function(d){var g=this.storeInfo,f;if(g){f=g[d]}return f||null},linkTo:function(o,t){var p=this,u,r,w,v,q,s;if(t.isModel){t={type:t.entityName,id:t.id}}v=t.type||t.reference;r=t.create;if(v){w=t.id;if(r){w=undefined}s=p.getRecord(v,w);if(Ext.isObject(r)){s.set(r);s.commit();s.phantom=true}u=p.getRoot().createStubChild(o);u.set(s)}else{u=p.getStub(o);if(!u.isLinkStub){q=new Ext.app.bind.LinkStub(p,u.name);u.graft(q);u=q}u.link(t)}},notify:function(){this.getScheduler().notify()},get:function(b){return this.getStub(b).getValue()},set:function(j,g){var h=this,m,o;h.getData();if(g===undefined&&j&&j.constructor===Object){o=h.getRoot();g=j}else{if(j&&j.indexOf(".")<0){m={};m[j]=g;g=m;o=h.getRoot()}else{o=h.getStub(j)}}o.set(g)},privates:{registerChild:function(c){var d=this.children;if(!d){this.children=d={}}d[c.getId()]=c},unregisterChild:function(c){var d=this.children;if(!this.destroying&&d){delete d[c.getId()]}},getRecord:function(h,m){var p=this.getSession(),o=h,q=m!==undefined,j;if(p){if(q){j=p.getRecord(h,m)}else{j=p.createRecord(h)}}else{if(!o.$isClass){o=this.getSchema().getEntity(o)}if(q){j=o.createWithId(m);j.load()}else{j=new o()}}return j},notFn:function(b){return !b},bindExpression:function(v,r,q,o){var w=v.charAt(0),t=(w==="!"),p=t?v.substring(1):v,u=this.getStub(p),s;s=u.bind(r,q,o);if(t){s.transform=this.notFn}return s},applyScheduler:function(b){if(b&&!b.isInstance){b=new Ext.util.Scheduler(b);b.$owner=this}return b},getScheduler:function(){var g=this,f=g._scheduler,d;if(!f){if(!(d=g.getParent())){f=new Ext.util.Scheduler({preSort:"kind,-depth"});f.$owner=g}else{f=d.getScheduler()}g.setScheduler(f)}return f},getStub:function(c){var d=this.getRoot();return c?d.getChild(c):d},collect:function(){var g=this,d=g.getParent(),f=g.collectTask;if(d){d.collect();return}if(!f){f=g.collectTask=new Ext.util.DelayedTask(g.doCollect,g)}if(g.collectTimeout===0){g.doCollect()}else{f.delay(g.collectTimeout)}},doCollect:function(){var c=this.children,d;if(c){for(d in c){c[d].doCollect()}}this.getRoot().collect()},onBindDestroy:function(h,g){var j=this,f;if(j.destroying){return}if(!g){delete j.bindings[h.id]}f=j.getParent();if(f){f.onBindDestroy(h,true)}else{j.collect()}},applyData:function(o,j){var m=this,h,g;m.getSession();if(!j){g=m.getParent();m.linkData=h=g?Ext.Object.chain(g.getData()):{};m.data=m._data=Ext.Object.chain(h)}if(o&&o.constructor===Object){m.getRoot().set(o)}},applyParent:function(b){if(b){b.registerChild(this)}return b},applyStores:function(o){var t=this,r=t.getRoot(),p,u,w,v,s,q;t.storeInfo={};t.listenerScopeFn=function(){return t.getView().getInheritedConfig("defaultListenerScope")};for(p in o){u=o[p];if(u.isStore){u.$wasInstance=true;t.setupStore(u,p);continue}else{if(Ext.isString(u)){u={source:u}}else{u=Ext.apply({},u)}}s=u.listeners;delete u.listeners;w=t.bind(u,t.onStoreBind,t,{trackStatics:true});if(w.isStatic()){w.destroy();t.createStore(p,u,s)}else{w.$storeKey=p;w.$listeners=s;v=r.createStubChild(p);v.setStore(w)}}},onStoreBind:function(m,s,o){var p=this.storeInfo,q=o.$storeKey,j=p[q],r;if(!j){this.createStore(q,m,o.$listeners,o)}else{m=Ext.merge({},o.pruneStaticKeys());r=m.proxy;delete m.type;delete m.model;delete m.fields;delete m.proxy;delete m.listeners;if(r){delete r.reader;delete r.writer;j.getProxy().setConfig(r)}j.setConfig(m)}},createStore:function(q,j,p,m){var o=this.getSession(),h;j=Ext.apply({},j);if(j.session){j.session=o}if(j.source){j.type=j.type||"chained"}j.listeners=p;h=Ext.Factory.store(j);h.$binding=m;this.setupStore(h,q)},setupStore:function(d,c){d.resolveListenerScope=this.listenerScopeFn;this.storeInfo[c]=d;this.set(c,d)},applyFormulas:function(o){var m=this,h=m.getRoot(),g,j;m.getData();for(g in o){h.createStubChild(g);j=m.getStub(g);j.setFormula(o[g])}return o},applyLinks:function(d){for(var c in d){this.linkTo(c,d[c])}},applySchema:function(b){return Ext.data.schema.Schema.get(b)},applyRoot:function(){var d=new Ext.app.bind.RootStub(this),c=this.getParent();if(c){d.depth=c.getRoot().depth-1000}return d},getFormulaFn:function(g){var d=this,f=d.formulaFn;if(!f){f=d.formulaFn=function(a){return d.$formulaData[a]}}d.$formulaData=g;return f}}},1,0,0,0,["viewmodel.default"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable],[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.app,"ViewModel"],0));(Ext.cmd.derive("Ext.app.domain.Controller",Ext.app.EventDomain,{singleton:true,type:"controller",prefix:"controller.",idMatchRe:/^\#/,constructor:function(){var b=this;b.callParent();b.monitor(Ext.app.BaseController)},match:function(h,f){var g=false,j=h.alias;if(f==="*"){g=true}else{if(f==="#"){g=!!h.isApplication}else{if(this.idMatchRe.test(f)){g=h.getId()===f.substring(1)}else{if(j){g=Ext.Array.indexOf(j,this.prefix+f)>-1}}}}return g}},1,0,0,0,0,0,[Ext.app.domain,"Controller"],0));(Ext.cmd.derive("Ext.data.PageMap",Ext.util.LruCache,{config:{store:null,pageSize:0,rootProperty:""},clear:function(d){var c=this;c.pageMapGeneration=(c.pageMapGeneration||0)+1;c.indexMap={};Ext.util.LruCache.prototype.clear.call(this,d)},forEach:function(s,j){var u=this,y=Ext.Object.getKeys(u.map),B=y.length,t=u.getPageSize(),z,A,r,v,w;for(z=0;z<B;z++){y[z]=+y[z]}Ext.Array.sort(y,Ext.Array.numericSortFn);j=j||u;for(z=0;z<B;z++){r=y[z];v=u.getPage(r);w=v.length;for(A=0;A<w;A++){if(s.call(j,v[A],(r-1)*t+A)===false){return}}}},findBy:function(j,f){var h=this,g=null;f=f||h;h.forEach(function(a,b){if(j.call(f,a,b)){g=a;return false}});return g},findIndexBy:function(j,f){var h=this,g=-1;f=f||h;h.forEach(function(a,b){if(j.call(f,a)){g=b;return false}});return g},find:function(q,r,p,t,u,m){if(Ext.isEmpty(r,false)){return null}var s=Ext.String.createRegex(r,t,u,m),o=this.getRootProperty();return this.findBy(function(a){return a&&s.test((o?a[o]:a)[q])},null,p)},findIndex:function(q,r,p,t,u,m){if(Ext.isEmpty(r,false)){return null}var s=Ext.String.createRegex(r,t,u,m),o=this.getRootProperty();return this.findIndexBy(function(a){return a&&s.test((o?a[o]:a)[q])},null,p)},getPageFromRecordIndex:function(b){return Math.floor(b/this.getPageSize())+1},addAll:function(b){this.addPage(1,b)},addPage:function(q,B){var s=this,r=s.getPageSize(),z=q+Math.floor((B.length-1)/r),t=(q-1)*r,v=s.indexMap,w,A,y,u;for(u=0;q<=z;q++,u+=r){w=Ext.Array.slice(B,u,u+r);for(A=0,y=w.length;A<y;A++){v[w[A].internalId]=t++}s.add(q,w);s.fireEvent("pageadd",s,q,w)}},getCount:function(){var b=Ext.util.LruCache.prototype.getCount.call(this);if(b){b=(b-1)*this.getPageSize()+this.last.value.length}return b},getByInternalId:function(d){var c=this.indexMap[d];if(c!=null){return this.getAt(c)}},indexOf:function(c){var d=-1;if(c){d=this.indexMap[c.internalId];if(d==null){d=-1}}return d},insert:function(){},remove:function(){},removeAt:function(){},removeAtKey:function(m){var o=this,q=o.getPage(m),h,p,j;if(q){if(o.fireEvent("beforepageremove",o,m,q)!==false){h=q.length;for(p=0;p<h;p++){delete o.indexMap[q[p].internalId]}j=Ext.util.LruCache.prototype.removeAtKey.apply(this,arguments);o.fireEvent("pageremove",o,m,q);q.length=0}}return j},getPage:function(b){return this.get(b)},hasRange:function(j,g){var o=this,h=o.getPageFromRecordIndex(j),m=o.getPageFromRecordIndex(g);for(;h<=m;h++){if(!o.hasPage(h)){return false}}return(m-1)*o._pageSize+o.getPage(m).length>g},hasPage:function(b){return !!this.get(b)},peekPage:function(b){return this.map[b]},getAt:function(b){return this.getRange(b,b+1)[0]},getRange:function(G,F){F--;if(!this.hasRange(G,F)){Ext.raise("PageMap asked for range which it does not have")}var A=this,D=Ext.Array,z=A.getPageSize(),v=A.getPageFromRecordIndex(G),C=A.getPageFromRecordIndex(F),E=(v-1)*z,t=(C*z)-1,y=v,H=[],u,B,w;for(;y<=C;y++){if(y===v){u=G-E;w=u>0}else{u=0;w=false}if(y===C){B=z-(t-F);w=w||B<z}if(w){D.push(H,D.slice(A.getPage(y),u,B))}else{D.push(H,A.getPage(y))}}return H},destroy:function(){Ext.util.LruCache.prototype.destroy.call(this);this.indexMap={}}},0,0,0,0,0,0,[Ext.data,"PageMap"],0));(Ext.cmd.derive("Ext.data.BufferedStore",Ext.data.ProxyStore,{isBufferedStore:true,buffered:true,config:{data:0,pageSize:25,remoteSort:true,remoteFilter:true,sortOnLoad:false,purgePageCount:5,trailingBufferZone:25,leadingBufferZone:200,defaultViewSize:100,viewSize:0,trackRemoved:false},applyData:function(c){var d=this.data||(this.data=this.createDataCollection());return d},applyProxy:function(b){b=Ext.data.ProxyStore.prototype.applyProxy.call(this,b);if(b&&b.setEnablePaging){b.setEnablePaging(true)}return b},createFiltersCollection:function(){return new Ext.util.FilterCollection()},createSortersCollection:function(){return new Ext.util.SorterCollection()},updateGroupField:function(b){this.group(b)},getGrouper:function(){return this.grouper},isGrouped:function(){return !!this.grouper},createDataCollection:function(){var c=this,d=new Ext.data.PageMap({store:c,rootProperty:"data",pageSize:c.getPageSize(),maxSize:c.getPurgePageCount(),listeners:{clear:c.onPageMapClear,scope:c}});c.relayEvents(d,["beforepageremove","pageadd","pageremove"]);c.pageRequests={};return d},removeAll:function(f){var d=this,g=d.getData();if(g){if(f){d.suspendEvent("clear")}g.clear();if(f){d.resumeEvent("clear")}}},flushLoad:function(){var c=this,d=c.pendingLoadOptions;c.clearLoadTask();if(!d){return}c.getData().clear();d.page=1;d.start=0;d.limit=c.getViewSize()||c.getDefaultViewSize();d.loadCallback=d.callback;d.callback=null;return c.loadToPrefetch(d)},reload:function(r){var w=this,z=w.getData(),u=Number.MAX_VALUE,v,C,y,s,A,D,t,B;if(!r){r={}}if(w.loading||w.fireEvent("beforeload",w,r)===false){return}D=function(){var a=w.totalCount,b=C-v;if(C>=a){C=a-1;v=Math.max(C-b,0)}if(w.rangeCached(v,Math.min(C,w.totalCount))){w.loading=false;z.un("pageadd",D);B=z.getRange(v,C+1);w.fireEvent("load",w,B,true);w.fireEvent("refresh",w)}};t=Math.ceil((w.getLeadingBufferZone()+w.getTrailingBufferZone())/2);if(w.lastRequestStart&&w.preserveScrollOnReload){v=w.lastRequestStart;C=w.lastRequestEnd;u=w.getTotalCount()}else{v=r.start||0;C=v+(r.count||w.getPageSize())-1}z.clear(true);delete w.totalCount;v=Math.max(v-t,0);C=Math.min(C+t,u);y=w.getPageFromRecordIndex(v);s=w.getPageFromRecordIndex(C);w.loading=true;r.waitForReload=D;z.on("pageadd",D);for(A=y;A<=s;A++){w.prefetchPage(A,r)}},filter:function(){Ext.data.ProxyStore.prototype.filter.apply(this,arguments)},filterBy:function(c,d){},loadData:function(c,d){},loadPage:function(g,f){var d=this;f=f||{};f.page=d.currentPage=g;f.start=(g-1)*d.getPageSize();f.limit=d.getViewSize()||d.getDefaultViewSize();f.loadCallback=f.callback;f.callback=null;return d.loadToPrefetch(f)},clearData:function(g){var f=this,d=f.getData();if(d){d.clear()}},getCount:function(){return this.totalCount||0},getRange:function(C,z,t){var u=this,B=u.totalCount-1,A=u.lastRequestStart,s=[],y=u.getData(),D,v,E,F,w;t=Ext.apply({prefetchStart:C,prefetchEnd:z},t);z=(z>=u.totalCount)?B:z;v=C===0?0:C-1;E=z===B?z:z+1;u.lastRequestStart=C;u.lastRequestEnd=z;if(u.rangeCached(v,E)){u.onRangeAvailable(t);s=y.getRange(C,z+1)}else{u.fireEvent("cachemiss",u,C,z);F=u.getPageFromRecordIndex(v);w=u.getPageFromRecordIndex(E);D=function(c,a,b){if(a>=F&&a<=w&&u.rangeCached(v,E)){u.fireEvent("cachefilled",u,C,z);y.un("pageadd",D);u.onRangeAvailable(t)}};y.on("pageadd",D);u.prefetchRange(C,z)}u.primeCache(C,z,C<A?-1:1);return s},getById:function(c){var d=this.data.findBy(function(a){return a.getId()===c});return d},getAt:function(d){var c=this.getData();if(c.hasRange(d,d)){return c.getAt(d)}},getByInternalId:function(b){return this.data.getByInternalId(b)},contains:function(b){return this.indexOf(b)>-1},indexOf:function(b){return this.getData().indexOf(b)},indexOfId:function(b){return this.indexOf(this.getById(b))},group:function(f,h){var j=this,g;if(f&&typeof f==="string"){g=j.grouper;if(!g){j.grouper=new Ext.util.Grouper({property:f,direction:h||"ASC",root:"data"})}else{if(h===undefined){g.toggle()}else{g.setDirection(h)}}}else{j.grouper=f?j.getSorters().decodeSorter(f,"Ext.util.Grouper"):null}j.getData().clear();j.loadPage(1,{callback:function(){j.fireEvent("groupchange",j,j.getGrouper())}})},getPageFromRecordIndex:function(b){return Math.floor(b/this.getPageSize())+1},calculatePageCacheSize:function(f){var g=this,d=g.getPurgePageCount();return d?Math.max(g.getData().getMaxSize()||0,Math.ceil((f+g.getTrailingBufferZone()+g.getLeadingBufferZone())/g.getPageSize())*2+d):0},loadToPrefetch:function(K){var z=this,H=K,D,I,w,y=K.start,J=K.start+K.limit-1,L=(z.getViewSize()||K.limit),C=Math.min(J,K.start+L-1),B=z.getPageFromRecordIndex(Math.max(y-z.getTrailingBufferZone(),0)),M=z.getPageFromRecordIndex(J+z.getLeadingBufferZone()),E=z.getData(),A=function(){I=I||[];if(K.loadCallback){K.loadCallback.call(K.scope||z,I,F,true)}if(K.callback){K.callback.call(K.scope||z,I,y||0,J||0,K)}},N=function(){z.fireEvent("datachanged",z);z.fireEvent("refresh",z);z.fireEvent("load",z,I,true)},G=function(){if(z.rangeCached(y,C)){z.loading=false;I=E.getRange(y,C+1);E.un("pageadd",G);if(z.hasListeners.guaranteedrange){z.guaranteeRange(y,C,K.callback,K.scope)}A();N()}},F;E.setMaxSize(z.calculatePageCacheSize(L));if(z.fireEvent("beforeload",z,K)!==false){delete z.totalCount;z.loading=true;if(K.callback){H=Ext.apply({},K);delete H.callback}z.on("prefetch",function(d,b,a,c){F=c;if(a){if((w=z.getTotalCount())){E.on("pageadd",G);C=Math.min(C,w-1);M=z.getPageFromRecordIndex(Math.min(C+z.getLeadingBufferZone(),w-1));for(D=B+1;D<=M;++D){z.prefetchPage(D,H)}}else{A();N()}}else{z.loading=false;A();z.fireEvent("load",z,b,false)}},null,{single:true});z.prefetchPage(B,H)}},prefetch:function(p){var o=this,h=o.getPageSize(),m=o.getData(),q,j;if(h){if(o.lastPageSize&&h!=o.lastPageSize){Ext.raise("pageSize cannot be dynamically altered")}if(!m.getPageSize()){m.setPageSize(h)}}else{o.pageSize=m.setPageSize(h=p.limit)}o.lastPageSize=h;if(!p.page){p.page=o.getPageFromRecordIndex(p.start);p.start=(p.page-1)*h;p.limit=Math.ceil(p.limit/h)*h}j=o.pageRequests[p.page];if(!j||j.getOperation().pageMapGeneration!==m.pageMapGeneration){p=Ext.apply({action:"read",filters:o.getFilters().items,sorters:o.getSorters().items,grouper:o.getGrouper(),internalCallback:o.onProxyPrefetch,internalScope:o},p);q=o.createOperation("read",p);q.pageMapGeneration=m.pageMapGeneration;if(o.fireEvent("beforeprefetch",o,q)!==false){o.pageRequests[p.page]=q.execute();if(o.getProxy().isSynchronous){delete o.pageRequests[p.page]}}}return o},onPageMapClear:function(){var o=this,g=o.wasLoading,h=o.pageRequests,j=o.getData(),m;j.clearListeners();j.on("clear",o.onPageMapClear,o);o.relayEvents(j,["beforepageremove","pageadd","pageremove"]);o.loading=true;o.totalCount=0;for(m in h){if(h.hasOwnProperty(m)){h[m].getOperation().abort()}}o.fireEvent("clear",o);o.loading=g},prefetchPage:function(o,h){var p=this,j=p.getPageSize(),m=(o-1)*j,q=p.totalCount;if(q!==undefined&&p.data.getCount()===q){return}p.prefetch(Ext.applyIf({page:o,start:m,limit:j},h))},onProxyPrefetch:function(y){if(this.destroyed){return}var t=this,s=y.getResultSet(),z=y.getRecords(),v=y.wasSuccessful(),u=y.getPage(),A=y.waitForReload,q=t.totalCount,B=t.pageRequests,r,w;if(y.pageMapGeneration===t.getData().pageMapGeneration){if(s){t.totalCount=s.getTotal();if(t.totalCount!==q){t.fireEvent("totalcountchange",t.totalCount)}}if(u!==undefined){delete t.pageRequests[u]}t.loading=false;t.fireEvent("prefetch",t,z,v,y);if(v){if(t.totalCount===0){if(A){for(r in B){w=B[r].getOperation();if(w.waitForReload===A){delete w.waitForReload}}t.getData().un("pageadd",A);t.fireEvent("load",t,[],true);t.fireEvent("refresh",t)}}else{t.cachePage(z,y.getPage())}}Ext.callback(y.getCallback(),y.getScope()||t,[z,y,v])}},cachePage:function(g,j){var m=this,h=g.length,o;if(!Ext.isDefined(m.totalCount)){m.totalCount=g.length;m.fireEvent("totalcountchange",m.totalCount)}for(o=0;o<h;o++){g[o].join(m)}m.getData().addPage(j,g)},rangeCached:function(c,d){return this.getData().hasRange(c,d)},pageCached:function(b){return this.getData().hasPage(b)},pagePending:function(b){return !!this.pageRequests[b]},rangeSatisfied:function(c,d){return this.rangeCached(c,d)},onRangeAvailable:function(p){var o=this,h=o.getTotalCount(),m=p.prefetchStart,j=(p.prefetchEnd>h-1)?h-1:p.prefetchEnd,q;j=Math.max(0,j);q=o.getData().getRange(m,j+1);if(p.fireEvent!==false){o.fireEvent("guaranteedrange",q,m,j,p)}if(p.callback){p.callback.call(p.scope||o,q,m,j,p)}},guaranteeRange:function(j,h,m,o,g){g=Ext.apply({callback:m,scope:o},g);this.getRange(j,h+1,g)},prefetchRange:function(o,j){var r=this,s,m,p,q=r.getData();if(!r.rangeCached(o,j)){s=r.getPageFromRecordIndex(o);m=r.getPageFromRecordIndex(j);q.setMaxSize(r.calculatePageCacheSize(j-o+1));for(p=s;p<=m;p++){if(!r.pageCached(p)){r.prefetchPage(p)}}}},primeCache:function(p,u,q){var r=this,s=r.getLeadingBufferZone(),t=r.getTrailingBufferZone(),m=r.getPageSize(),o=r.totalCount;if(q===-1){p=Math.max(p-s,0);u=Math.min(u+t,o-1)}else{if(q===1){p=Math.max(Math.min(p-t,o-m),0);u=Math.min(u+s,o-1)}else{p=Math.min(Math.max(Math.floor(p-((s+t)/2)),0),o-r.pageSize);u=Math.min(Math.max(Math.ceil(u+((s+t)/2)),0),o-1)}}r.prefetchRange(p,u)},sort:function(d,f,g){if(arguments.length===0){this.clearAndLoad()}else{this.getSorters().addSort(d,f,g)}},onSorterEndUpdate:function(){var d=this,c=d.getSorters().getRange();if(c.length){d.fireEvent("beforesort",d,c);d.clearAndLoad({callback:function(){d.fireEvent("sort",d,c)}})}else{d.fireEvent("sort",d,c)}},clearAndLoad:function(b){this.getData().clear();this.loadPage(1,b)},privates:{isLast:function(b){return this.indexOf(b)===this.getTotalCount()-1},isMoving:function(){return false}}},0,0,0,0,["store.buffered"],0,[Ext.data,"BufferedStore"],0));(Ext.cmd.derive("Ext.mixin.Queryable",Ext.Base,{mixinId:"queryable",isQueryable:true,query:function(b){b=b||"*";return Ext.ComponentQuery.query(b,this.getQueryRoot())},queryBy:function(p,q){var s=[],j=this.getQueryRoot().getRefItems(true),r=0,m=j.length,o;for(;r<m;++r){o=j[r];if(p.call(q||o,o)!==false){s.push(o)}}return s},queryById:function(b){return this.down(Ext.makeIdSelector(b))},child:function(d){var c=this.getQueryRoot().getRefItems();if(d&&d.isComponent){return this.matchById(c,d.getItemId())}if(d){c=Ext.ComponentQuery.query(d,c)}if(c.length){return c[0]}return null},down:function(b){if(b&&b.isComponent){return this.matchById(this.getRefItems(true),b.getItemId())}b=b||"";return this.query(b)[0]||null},visitPreOrder:function(g,h,j,f){Ext.ComponentQuery._visit(true,g,this.getQueryRoot(),h,j,f)},visitPostOrder:function(g,h,j,f){Ext.ComponentQuery._visit(false,g,this.getQueryRoot(),h,j,f)},getRefItems:function(){return[]},getQueryRoot:function(){return this},privates:{matchById:function(g,j){var h=g.length,o,m;for(o=0;o<h;++o){m=g[o];if(m.getItemId()===j){return m}}return null}}},0,0,0,0,0,0,[Ext.mixin,"Queryable"],0));(Ext.cmd.derive("Ext.data.Request",Ext.Base,{config:{action:undefined,params:undefined,method:"GET",url:null,operation:null,proxy:null,disableCaching:false,headers:{},callbackKey:null,rawRequest:null,jsonData:undefined,xmlData:undefined,withCredentials:false,username:null,password:null,binary:false,callback:null,scope:null,timeout:30000,records:null,directFn:null,args:null,useDefaultXhrHeader:null},constructor:function(b){this.initConfig(b)},getParam:function(f){var g=this.getParams(),d;if(g){return g[f]}return d},setParam:function(f,d){var g=this.getParams()||{};g[f]=d;this.setParams(g)}},1,0,0,0,0,0,[Ext.data,"Request"],0));(Ext.cmd.derive("Ext.data.Validation",Ext.data.Model,{isValidation:true,syncGeneration:0,attach:function(b){this.record=b;delete this.data.id},getValidation:function(){return null},isValid:function(){var b=this;if(b.syncGeneration!==b.record.generation){b.refresh()}return !b.dirty},refresh:function(U){var C=this,j=C.data,S=C.record,N=S.fields,I=S.generation,D=S.data,O=S.validationSeparator,T=null,R,P,M,V,F,H,K,E,G,Q,J,L;if(U||C.syncGeneration!==I){C.syncGeneration=I;for(H=0,G=N.length;H<G;++H){V=N[H];L=V.name;J=D[L];R=V.defaultInvalidMessage;M=0;if(!(L in j)){j[L]=P=true}else{P=j[L]}if(V.validate!==Ext.emptyFn){Q=V.validate(J,O,null,S);if(Q!==true){M=Q||R}}if(!M){M=true}if(M!==P){(T||(T={}))[L]=M}}if(T){C.set(T)}}}},0,0,0,0,0,0,[Ext.data,"Validation"],0));(Ext.cmd.derive("Ext.dom.Helper",Ext.Base,function(){var o="afterbegin",r="afterend",q="beforebegin",t="beforeend",p=["BeforeBegin","previousSibling"],s=["AfterEnd","nextSibling"],u={beforebegin:p,afterend:s},m={beforebegin:p,afterend:s,afterbegin:["AfterBegin","firstChild"],beforeend:["BeforeEnd","lastChild"]};return{singleton:true,alternateClassName:["Ext.DomHelper","Ext.core.DomHelper"],emptyTags:/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,confRe:/^(?:tag|children|cn|html|tpl|tplData)$/i,endRe:/end/i,attributeTransform:{cls:"class",htmlFor:"for"},closeTags:{},detachedDiv:document.createElement("div"),decamelizeName:function(){var b=/([a-z])([A-Z])/g,c={};function a(g,d,f){return d+"-"+f.toLowerCase()}return function(d){return c[d]||(c[d]=d.replace(b,a))}}(),generateMarkup:function(h,d){var j=this,w=typeof h,a,f,g,b,c;if(w==="string"||w==="number"){d.push(h)}else{if(Ext.isArray(h)){for(b=0;b<h.length;b++){if(h[b]){j.generateMarkup(h[b],d)}}}else{g=h.tag||"div";d.push("<",g);for(a in h){if(h.hasOwnProperty(a)){f=h[a];if(f!==undefined&&!j.confRe.test(a)){if(typeof f==="object"){d.push(" ",a,'="');j.generateStyles(f,d,true).push('"')}else{d.push(" ",j.attributeTransform[a]||a,'="',f,'"')}}}}if(j.emptyTags.test(g)){d.push("/>")}else{d.push(">");if((f=h.tpl)){f.applyOut(h.tplData,d)}if((f=h.html)){d.push(f)}if((f=h.cn||h.children)){j.generateMarkup(f,d)}c=j.closeTags;d.push(c[g]||(c[g]="</"+g+">"))}}}return d},generateStyles:function(c,g,d){var a=g||[],f,b;for(f in c){if(c.hasOwnProperty(f)){b=c[f];f=this.decamelizeName(f);if(d&&Ext.String.hasHtmlCharacters(b)){b=Ext.String.htmlEncode(b)}a.push(f,":",b,";")}}return g||a.join("")},markup:function(a){if(typeof a==="string"){return a}var b=this.generateMarkup(a,[]);return b.join("")},applyStyles:function(a,b){Ext.fly(a).applyStyles(b)},createContextualFragment:function(f){var b=this.detachedDiv,a=document.createDocumentFragment(),d,c;b.innerHTML=f;c=b.childNodes;d=c.length;while(d--){a.appendChild(c[0])}return a},createDom:function(d,a){var f=this,g=f.markup(d),b=f.detachedDiv,c;b.innerHTML=g;c=b.firstChild;return Ext.supports.ChildContentClearedWhenSettingInnerHTML?c.cloneNode(true):c},insertHtml:function(b,f,a){var h=this,d,z,c,j,g;b=b.toLowerCase();if(f.insertAdjacentHTML){if(h.ieInsertHtml){g=h.ieInsertHtml(b,f,a);if(g){return g}}d=m[b];if(d){f.insertAdjacentHTML(d[0],a);return f[d[1]]}}else{if(f.nodeType===3){b=b===o?q:b;b=b===t?r:b}z=Ext.supports.CreateContextualFragment?f.ownerDocument.createRange():undefined;j="setStart"+(this.endRe.test(b)?"After":"Before");if(u[b]){if(z){z[j](f);g=z.createContextualFragment(a)}else{g=this.createContextualFragment(a)}f.parentNode.insertBefore(g,b===q?f:f.nextSibling);return f[(b===q?"previous":"next")+"Sibling"]}else{c=(b===o?"first":"last")+"Child";if(f.firstChild){if(z){try{z[j](f[c]);g=z.createContextualFragment(a)}catch(y){g=this.createContextualFragment(a)}}else{g=this.createContextualFragment(a)}if(b===o){f.insertBefore(g,f.firstChild)}else{f.appendChild(g)}}else{f.innerHTML=a}return f[c]}}},insertBefore:function(a,b,c){return this.doInsert(a,b,c,q)},insertAfter:function(a,b,c){return this.doInsert(a,b,c,r)},insertFirst:function(a,b,c){return this.doInsert(a,b,c,o)},append:function(a,b,c){return this.doInsert(a,b,c,t)},overwrite:function(d,f,b){var c=this,a;d=Ext.getDom(d);f=c.markup(f);if(c.ieOverwrite){a=c.ieOverwrite(d,f)}if(!a){d.innerHTML=f;a=d.firstChild}return b?Ext.get(a):a},doInsert:function(f,b,c,a){var d=this,g;f=f.dom||Ext.getDom(f);if("innerHTML" in f){g=d.insertHtml(a,f,d.markup(b))}else{g=d.createDom(b,null);if(f.nodeType===3){a=a===o?q:a;a=a===t?r:a}if(u[a]){f.parentNode.insertBefore(g,a===q?f:f.nextSibling)}else{if(f.firstChild&&a===o){f.insertBefore(g,f.firstChild)}else{f.appendChild(g)}}}return c?Ext.get(g):g},createTemplate:function(b){var a=this.markup(b);return new Ext.Template(a)},createHtml:function(a){return this.markup(a)}}},0,0,0,0,0,0,[Ext.dom,"Helper",Ext,"DomHelper",Ext.core,"DomHelper"],0));Ext.define("Ext.overrides.dom.Helper",(function(){var u=/^(?:table|thead|tbody|tr|td)$/i,q=/td|tr|tbody|thead/i,r="<table>",p="</table>",m=r+"<tbody>",s="</tbody>"+p,o=m+"<tr>",t="</tr>"+s;return{override:"Ext.dom.Helper",ieInsertHtml:function(a,c,d){var b=null;if(Ext.isIE9m&&u.test(c.tagName)){b=this.insertIntoTable(c.tagName.toLowerCase(),a,c,d)}return b},ieOverwrite:function(b,a){if(Ext.isIE9m&&u.test(b.tagName)){while(b.firstChild){b.removeChild(b.firstChild)}if(a){return this.insertHtml("afterbegin",b,a)}}},ieTable:function(c,j,b,d){var h=-1,f=this.detachedDiv,g,a;f.innerHTML=[j,b,d].join("");while(++h<c){f=f.firstChild}g=f.nextSibling;if(g){g=f;f=document.createDocumentFragment();while(g){a=g.nextSibling;f.appendChild(g);g=a}}return f},insertIntoTable:function(g,c,d,b){var f,y,z=c==="beforebegin",h=c==="afterbegin",a=c==="beforeend",j=c==="afterend";if(g==="td"&&(h||a)||!q.test(g)&&(z||j)){return null}y=z?d:j?d.nextSibling:h?d.firstChild:null;if(z||j){d=d.parentNode}if(g==="td"||(g==="tr"&&(a||h))){f=this.ieTable(4,o,b,t)}else{if(((g==="tbody"||g==="thead")&&(a||h))||(g==="tr"&&(z||j))){f=this.ieTable(3,m,b,s)}else{f=this.ieTable(2,r,b,p)}}d.insertBefore(f,y);return f}}})());(Ext.cmd.derive("Ext.dom.GarbageCollector",Ext.Base,{singleton:true,interval:30000,constructor:function(){var b=this;b.collect=Ext.Function.bind(b.collect,b);b.lastTime=Ext.now();b.resume()},collect:function(){var p=this,w=Ext.cache,v,s,u,o,r,t;for(v in w){if(!w.hasOwnProperty(v)){continue}u=w[v];if(u.skipGarbageCollection){continue}s=u.dom;try{r=Ext.isGarbage(s)}catch(q){delete w[v];continue}if(r){if(u&&u.dom){u.collect()}}}if(Ext.isIE9m){o={};for(v in w){if(w.hasOwnProperty(v)){o[v]=w[v]}}Ext.cache=Ext.dom.Element.cache=o}p.lastTime=Ext.now()},pause:function(){clearTimeout(this.timerId)},resume:function(){var d=this,c=d.lastTime;if(Ext.enableGarbageCollector&&(Ext.now()-c>d.interval)){d.collect()}d.timerId=Ext.interval(d.collect,d.interval)}},1,0,0,0,0,0,[Ext.dom,"GarbageCollector"],0));(Ext.cmd.derive("Ext.event.gesture.Recognizer",Ext.Base,{priority:0,handledEvents:[],config:{onRecognized:Ext.emptyFn,callbackScope:null},constructor:function(b){this.initConfig(b);Ext.event.publisher.Gesture.instance.registerRecognizer(this)},onStart:Ext.emptyFn,onEnd:Ext.emptyFn,onTouchStart:Ext.emptyFn,onTouchMove:Ext.emptyFn,onTouchEnd:Ext.emptyFn,onTouchCancel:Ext.emptyFn,fail:function(){return false},fire:function(){this.getOnRecognized().apply(this.getCallbackScope(),arguments)},reset:Ext.emptyFn},1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.event.gesture,"Recognizer"],0));(Ext.cmd.derive("Ext.event.gesture.SingleTouch",Ext.event.gesture.Recognizer,{inheritableStatics:{NOT_SINGLE_TOUCH:"Not Single Touch",TOUCH_MOVED:"Touch Moved",EVENT_CANCELED:"Event Canceled"},onTouchStart:function(b){if(b.touches.length>1){return this.fail(this.self.NOT_SINGLE_TOUCH)}},onTouchCancel:function(){return false}},0,0,0,0,0,0,[Ext.event.gesture,"SingleTouch"],0));(Ext.cmd.derive("Ext.event.gesture.DoubleTap",Ext.event.gesture.SingleTouch,{priority:300,inheritableStatics:{DIFFERENT_TARGET:"Different Target"},config:{moveDistance:8,tapDistance:24,maxDuration:300},handledEvents:["singletap","doubletap"],singleTapTimer:null,startTime:0,lastTapTime:0,onTouchStart:function(g){var d=this,f;if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===false){return false}f=d.lastStartPoint=g.changedTouches[0].point;d.startPoint=d.startPoint||f;d.startTime=g.time;clearTimeout(d.singleTapTimer)},onTouchMove:function(g){var d=this,f=g.changedTouches[0].point;if(Math.abs(f.getDistanceTo(d.lastStartPoint))>=d.getMoveDistance()){d.startPoint=null;return d.fail(d.self.TOUCH_MOVED)}},onTouchEnd:function(s){var q=this,t=q.getMaxDuration(),w=s.time,r=s.target,p=q.lastTapTime,v=q.lastTarget,o=s.changedTouches[0].point,u;q.lastTapTime=w;q.lastTarget=r;if(p){u=w-p;if(u<=t&&Math.abs(o.getDistanceTo(q.startPoint))<=q.getTapDistance()){if(r!==v){return q.fail(q.self.DIFFERENT_TARGET)}q.lastTarget=null;q.lastTapTime=0;q.fire("doubletap",s,{touch:s.changedTouches[0],duration:u});q.startPoint=null;return}}if(w-q.startTime>t){q.fireSingleTap(s)}else{q.setSingleTapTimer(s)}},setSingleTapTimer:function(c){var d=this;d.singleTapTimer=Ext.defer(function(){d.fireSingleTap(c)},d.getMaxDuration())},fireSingleTap:function(d,c){this.fire("singletap",d,{touch:c});this.startPoint=null},reset:function(){var b=this;b.startTime=b.lastTapTime=0;b.lastStartPoint=b.startPoint=b.singleTapTimer=null}},0,0,0,0,0,0,[Ext.event.gesture,"DoubleTap"],function(d){var c=Ext.manifest.gestures;d.instance=new d(c&&c.doubleTap)}));(Ext.cmd.derive("Ext.event.gesture.Drag",Ext.event.gesture.SingleTouch,{priority:100,isStarted:false,startPoint:null,previousPoint:null,lastPoint:null,handledEvents:["dragstart","drag","dragend","dragcancel"],config:{minDistance:8},constructor:function(){Ext.event.gesture.SingleTouch.prototype.constructor.apply(this,arguments);this.initInfo()},initInfo:function(){this.info={touch:null,previous:{x:0,y:0},x:0,y:0,delta:{x:0,y:0},absDelta:{x:0,y:0},flick:{velocity:{x:0,y:0}},direction:{x:0,y:0},time:0,previousTime:{x:0,y:0}}},onTouchStart:function(b){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===false){if(this.isStarted&&this.lastMoveEvent!==null){this.lastMoveEvent.isStopped=false;this.onTouchEnd(this.lastMoveEvent)}return false}this.startTime=b.time;this.startPoint=b.changedTouches[0].point},tryDragStart:function(p){var h=this.startPoint,m=p.changedTouches[0],j=m.point,o=this.getMinDistance(),q=this.info;if(Math.abs(j.getDistanceTo(h))>=o){this.isStarted=true;this.previousPoint=this.lastPoint=j;this.resetInfo("x",p,m);this.resetInfo("y",p,m);q.time=p.time;this.fire("dragstart",p,q)}},onTouchMove:function(d){if(!this.isStarted){this.tryDragStart(d)}if(!this.isStarted){return}var g=d.changedTouches[0],f=g.point;if(this.lastPoint){this.previousPoint=this.lastPoint}this.lastPoint=f;this.lastMoveEvent=d;this.updateInfo("x",d,g);this.updateInfo("y",d,g);this.info.time=d.time;this.fire("drag",d,this.info)},onAxisDragEnd:function(f,g){var d=g.time-g.previousTime[f];if(d>0){g.flick.velocity[f]=(g[f]-g.previous[f])/d}},resetInfo:function(u,r,p){var t=this.lastPoint[u],m=this.startPoint[u],q=t-m,o=u.toUpperCase(),s=this.info;s.touch=p;s.delta[u]=q;s.absDelta[u]=Math.abs(q);s.previousTime[u]=this.startTime;s.previous[u]=m;s[u]=t;s.direction[u]=0;s["start"+o]=this.startPoint[u];s["previous"+o]=s.previous[u];s["page"+o]=s[u];s["delta"+o]=s.delta[u];s["absDelta"+o]=s.absDelta[u];s["previousDelta"+o]=0;s.startTime=this.startTime},updateInfo:function(A,v,w){var u=this,s=u.lastPoint[A],z=u.previousPoint[A],D=u.startPoint[A],r=s-D,B=u.info,t=B.direction,y=A.toUpperCase(),C=B.previous[A];B.touch=w;B.delta[A]=r;B.absDelta[A]=Math.abs(r);if(s!==C&&s!==B[A]){B.previous[A]=B[A];B.previousTime[A]=B.time}B[A]=s;if(s>z){t[A]=1}else{if(s<z){t[A]=-1}}B["start"+y]=D;B["previous"+y]=B.previous[A];B["page"+y]=B[A];B["delta"+y]=B.delta[A];B["absDelta"+y]=B.absDelta[A];B["previousDelta"+y]=B.previous[A]-D;B.startTime=u.startTime},onTouchEnd:function(b){this.doEnd(b)},onTouchCancel:function(b){this.doEnd(b,true);return false},doEnd:function(m,g){if(!this.isStarted){this.tryDragStart(m)}if(this.isStarted){var j=m.changedTouches[0],h=j.point,o=this.info;this.isStarted=false;this.lastPoint=h;this.updateInfo("x",m,j);this.updateInfo("y",m,j);o.time=m.time;this.onAxisDragEnd("x",o);this.onAxisDragEnd("y",o);this.fire(g?"dragcancel":"dragend",m,o);this.startPoint=null;this.previousPoint=null;this.lastPoint=null;this.lastMoveEvent=null}},reset:function(){var b=this;b.isStarted=b.lastPoint=b.startPoint=b.previousPoint=b.lastPoint=b.lastMoveEvent=null;b.initInfo()}},1,0,0,0,0,0,[Ext.event.gesture,"Drag"],function(d){var c=Ext.manifest.gestures;d.instance=new d(c&&c.drag)}));(Ext.cmd.derive("Ext.event.gesture.Swipe",Ext.event.gesture.SingleTouch,{priority:500,handledEvents:["swipestart","swipe","swipecancel"],inheritableStatics:{MAX_OFFSET_EXCEEDED:"Max Offset Exceeded",MAX_DURATION_EXCEEDED:"Max Duration Exceeded",DISTANCE_NOT_ENOUGH:"Distance Not Enough"},config:{minDistance:80,maxOffset:35,maxDuration:1000},onTouchStart:function(d){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===false){return false}var c=d.changedTouches[0];this.startTime=d.time;this.isHorizontal=true;this.isVertical=true;this.startX=c.pageX;this.startY=c.pageY},onTouchMove:function(w){var y=w.changedTouches[0],t=y.pageX,v=y.pageY,z=t-this.startX,A=v-this.startY,C=Math.abs(t-this.startX),D=Math.abs(v-this.startY),B=w.time-this.startTime,s=this.getMinDistance(),E=w.time,u,F;if(E-this.startTime>this.getMaxDuration()){return this.fail(this.self.MAX_DURATION_EXCEEDED)}if(this.isHorizontal&&D>this.getMaxOffset()){this.isHorizontal=false}if(this.isVertical&&C>this.getMaxOffset()){this.isVertical=false}if(!this.isVertical||!this.isHorizontal){if(this.isHorizontal&&C<s){u=(z<0)?"left":"right";F=C}else{if(this.isVertical&&D<s){u=(A<0)?"up":"down";F=D}}}if(u&&!this.started){this.started=true;this.fire("swipestart",w,{touch:y,direction:u,distance:F,duration:B})}if(!this.isHorizontal&&!this.isVertical){return this.fail(this.self.MAX_OFFSET_EXCEEDED)}},onTouchEnd:function(v){if(this.onTouchMove(v)===false){return false}var w=v.changedTouches[0],s=w.pageX,u=w.pageY,y=s-this.startX,z=u-this.startY,B=Math.abs(y),C=Math.abs(z),r=this.getMinDistance(),A=v.time-this.startTime,t,D;if(this.isVertical&&C<r){this.isVertical=false}if(this.isHorizontal&&B<r){this.isHorizontal=false}if(this.isHorizontal){t=(y<0)?"left":"right";D=B}else{if(this.isVertical){t=(z<0)?"up":"down";D=C}else{return this.fail(this.self.DISTANCE_NOT_ENOUGH)}}this.started=false;this.fire("swipe",v,{touch:w,direction:t,distance:D,duration:A})},onTouchCancel:function(b){this.fire("swipecancel",b);return false},reset:function(){var b=this;b.startTime=b.isHorizontal=b.isVertical=b.startX=b.startY=null}},0,0,0,0,0,0,[Ext.event.gesture,"Swipe"],function(d){var c=Ext.manifest.gestures;d.instance=new d(c&&c.swipe)}));(Ext.cmd.derive("Ext.event.gesture.EdgeSwipe",Ext.event.gesture.Swipe,{priority:800,handledEvents:["edgeswipe","edgeswipestart","edgeswipeend","edgeswipecancel"],inheritableStatics:{NOT_NEAR_EDGE:"Not Near Edge"},config:{minDistance:60},onTouchStart:function(d){if(Ext.event.gesture.Swipe.prototype.onTouchStart.apply(this,arguments)===false){return false}var c=d.changedTouches[0];this.started=false;this.direction=null;this.isHorizontal=true;this.isVertical=true;this.startX=c.pageX;this.startY=c.pageY},onTouchMove:function(y){var A=y.changedTouches[0],J=A.pageX,w=A.pageY,B=J-this.startX,C=w-this.startY,G=Math.abs(w-this.startY),F=Math.abs(J-this.startX),I=this.getMinDistance(),D=this.getMaxOffset(),E=y.time-this.startTime,u=Ext.Viewport&&Ext.Element.getViewportWidth(),z=Ext.Viewport&&Ext.Element.getViewportHeight(),v,H;if(this.isVertical&&F>D){this.isVertical=false}if(this.isHorizontal&&G>D){this.isHorizontal=false}if(this.isVertical&&this.isHorizontal){if(G>F){this.isHorizontal=false}else{this.isVertical=false}}if(this.isHorizontal){v=(B<0)?"left":"right";H=B}else{if(this.isVertical){v=(C<0)?"up":"down";H=C}}v=this.direction||(this.direction=v);if(v==="up"){H=C*-1}else{if(v==="left"){H=B*-1}}this.distance=H;if(!H){return this.fail(this.self.DISTANCE_NOT_ENOUGH)}if(!this.started){if(v==="right"&&this.startX>I){return this.fail(this.self.NOT_NEAR_EDGE)}else{if(v==="down"&&this.startY>I){return this.fail(this.self.NOT_NEAR_EDGE)}else{if(v==="left"&&(u-this.startX)>I){return this.fail(this.self.NOT_NEAR_EDGE)}else{if(v==="up"&&(z-this.startY)>I){return this.fail(this.self.NOT_NEAR_EDGE)}}}}this.started=true;this.startTime=y.time;this.fire("edgeswipestart",y,{touch:A,direction:v,distance:H,duration:E})}else{this.fire("edgeswipe",y,{touch:A,direction:v,distance:H,duration:E})}},onTouchEnd:function(c){var d;if(this.onTouchMove(c)!==false){d=c.time-this.startTime;this.fire("edgeswipeend",c,{touch:c.changedTouches[0],direction:this.direction,distance:this.distance,duration:d})}},onTouchCancel:function(b){this.fire("edgeswipecancel",b,{touch:b.changedTouches[0]});return false},reset:function(){var b=this;b.started=b.direction=b.isHorizontal=b.isVertical=b.startX=b.startY=b.startTime=b.distance=null}},0,0,0,0,0,0,[Ext.event.gesture,"EdgeSwipe"],function(d){var c=Ext.manifest.gestures;d.instance=new d(c&&c.edgeSwipe)}));(Ext.cmd.derive("Ext.event.gesture.LongPress",Ext.event.gesture.SingleTouch,{priority:400,inheritableStatics:{DURATION_NOT_ENOUGH:"Duration Not Enough"},config:{moveDistance:8,minDuration:1000},handledEvents:["longpress","taphold"],fireLongPress:function(b){this.fire("longpress",b,{touch:b.changedTouches[0],duration:this.getMinDuration()});this.isLongPress=true},onTouchStart:function(b){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===false){return false}this.startPoint=b.changedTouches[0].point;this.isLongPress=false;this.setLongPressTimer(b)},setLongPressTimer:function(c){var d=this;d.timer=Ext.defer(function(){d.fireLongPress(c)},d.getMinDuration())},onTouchMove:function(c){var d=c.changedTouches[0].point;if(Math.abs(d.getDistanceTo(this.startPoint))>=this.getMoveDistance()){return this.fail(this.self.TOUCH_MOVED)}},onTouchEnd:function(){if(!this.isLongPress){return this.fail(this.self.DURATION_NOT_ENOUGH)}},fail:function(){clearTimeout(this.timer);return Ext.event.gesture.SingleTouch.prototype.fail.apply(this,arguments)},reset:function(){this.isLongPress=this.startPoint=null},fire:function(d){if(d==="longpress"){var c=Array.prototype.slice.call(arguments);c[0]="taphold";this.fire.apply(this,c)}return Ext.event.gesture.SingleTouch.prototype.fire.apply(this,arguments)}},0,0,0,0,0,0,[Ext.event.gesture,"LongPress"],function(d){var c=Ext.manifest.gestures;d.instance=new d(c&&c.longPress)}));(Ext.cmd.derive("Ext.event.gesture.MultiTouch",Ext.event.gesture.Recognizer,{requiredTouchesCount:2,isTracking:false,isStarted:false,onTouchStart:function(h){var g=this.requiredTouchesCount,j=h.touches,f=j.length;if(f===g){this.start(h)}else{if(f>g){this.end(h)}}},onTouchEnd:function(b){this.end(b)},onTouchCancel:function(b){this.end(b,true);return false},start:function(){if(!this.isTracking){this.isTracking=true;this.isStarted=false}},end:function(c,d){if(this.isTracking){this.isTracking=false;if(this.isStarted){this.isStarted=false;this[d?"fireCancel":"fireEnd"](c)}}},reset:function(){this.isTracking=this.isStarted=false}},0,0,0,0,0,0,[Ext.event.gesture,"MultiTouch"],0));(Ext.cmd.derive("Ext.event.gesture.Pinch",Ext.event.gesture.MultiTouch,{priority:600,handledEvents:["pinchstart","pinch","pinchend","pinchcancel"],startDistance:0,lastTouches:null,onTouchMove:function(o){if(!this.isTracking){return}var g=o.touches,m,h,j;m=g[0].point;h=g[1].point;j=m.getDistanceTo(h);if(j===0){return}if(!this.isStarted){this.isStarted=true;this.startDistance=j;this.fire("pinchstart",o,{touches:g,distance:j,scale:1})}else{this.fire("pinch",o,{touches:g,distance:j,scale:j/this.startDistance})}},fireEnd:function(b){this.fire("pinchend",b)},fireCancel:function(b){this.fire("pinchcancel",b)},fail:function(){return Ext.event.gesture.MultiTouch.prototype.fail.apply(this,arguments)},reset:function(){this.lastTouches=null;this.startDistance=0;Ext.event.gesture.MultiTouch.prototype.reset.call(this)}},0,0,0,0,0,0,[Ext.event.gesture,"Pinch"],function(d){var c=Ext.manifest.gestures;d.instance=new d(c&&c.pinch)}));(Ext.cmd.derive("Ext.event.gesture.Rotate",Ext.event.gesture.MultiTouch,{priority:700,handledEvents:["rotatestart","rotate","rotateend","rotatecancel"],startAngle:0,lastTouches:null,lastAngle:null,onTouchMove:function(q){if(!this.isTracking){return}var r=q.touches,v=this.lastAngle,t,s,u,w,p,o;t=r[0].point;s=r[1].point;u=t.getAngleTo(s);if(v!==null){o=Math.abs(v-u);w=u+360;p=u-360;if(Math.abs(w-v)<o){u=w}else{if(Math.abs(p-v)<o){u=p}}}this.lastAngle=u;if(!this.isStarted){this.isStarted=true;this.startAngle=u;this.fire("rotatestart",q,{touches:r,angle:u,rotation:0})}else{this.fire("rotate",q,{touches:r,angle:u,rotation:u-this.startAngle})}this.lastTouches=Ext.Array.clone(r)},fireEnd:function(b){this.lastAngle=null;this.fire("rotateend",b)},fireCancel:function(b){this.lastAngle=null;this.fire("rotatecancel",b)},reset:function(){var b=this;b.lastTouches=b.lastAngle=b.startAngle=null;Ext.event.gesture.MultiTouch.prototype.reset.call(this)}},0,0,0,0,0,0,[Ext.event.gesture,"Rotate"],function(d){var c=Ext.manifest.gestures;d.instance=new d(c&&c.rotate)}));(Ext.cmd.derive("Ext.event.gesture.Tap",Ext.event.gesture.SingleTouch,{priority:200,handledEvents:["tap","tapcancel"],config:{moveDistance:8},onTouchStart:function(b){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.call(this,b)===false){return false}this.startPoint=b.changedTouches[0].point},onTouchMove:function(d){var g=d.changedTouches[0],f=g.point;if(Math.abs(f.getDistanceTo(this.startPoint))>=this.getMoveDistance()){this.fire("tapcancel",d,{touch:g});return this.fail(this.self.TOUCH_MOVED)}},onTouchEnd:function(b){this.fire("tap",b,{touch:b.changedTouches[0]})},onTouchCancel:function(b){this.fire("tapcancel",b,{touch:b.changedTouches[0]});return false},reset:function(){this.startPoint=null}},0,0,0,0,0,0,[Ext.event.gesture,"Tap"],function(c){var d=Ext.manifest.gestures;c.instance=new c(d&&d.tap)}));(Ext.cmd.derive("Ext.event.publisher.Focus",Ext.event.publisher.Dom,{type:"focus",handledEvents:["focusenter","focusleave","focusmove"],handledDomEvents:["focusin","focusout"],doDelegatedEvent:function(h,j){var f=this,g;h=Ext.event.publisher.Dom.prototype.doDelegatedEvent.call(this,h,false);if(h){if(h.type==="focusout"){if(h.relatedTarget==null){f.processFocusIn(h,h.target,document.body,j)}}else{g=h.relatedTarget;f.processFocusIn(h,(g==null||!g.tagName)?document.body:g,h.target,j)}}},processFocusIn:function(v,u,B,s){var t=this,r,C,w=[],D,y,z,A;z=Ext.fly(u);A=Ext.fly(B);if((z&&z.isFocusSuspended())||(A&&A.isFocusSuspended())){return}for(C=u,r=Ext.dom.Element.getCommonAncestor(B,u,true);C&&C!==r;C=C.parentNode){w.push(C)}if(w.length){D=t.createSyntheticEvent("focusleave",v,u,B);t.publish("focusleave",w,D);if(D.isStopped){return}}w.length=0;for(C=B;C!==r;C=C.parentNode){w.push(C)}y=t.createSyntheticEvent("focusenter",v,B,u);if(w.length){t.publish("focusenter",w,y);if(y.isStopped){return}}w=t.getPropagatingTargets(r);if(w.length){D=t.createSyntheticEvent("focusmove",v,B,u);t.publish("focusmove",w,D);if(D.isStopped){return}}if(s){t.afterEvent(v)}Ext.GlobalEvents.fireEvent("focus",{event:y,toElement:B,fromElement:u})},createSyntheticEvent:function(g,j,m,h){var o=new Ext.event.Event(j);o.type=g;o.relatedTarget=h;o.target=m;return o}},0,0,0,0,0,0,[Ext.event.publisher,"Focus"],function(c){var d;c.instance=new c();if(!Ext.supports.FocusinFocusoutEvents){this.override({handledDomEvents:["focus","blur"],doDelegatedEvent:function(a,b){var h=this;a=h.callSuper([a,false]);if(a){clearTimeout(d);d=0;if(a.type==="blur"){var j=a.target===window?document.body:a.target;d=setTimeout(function(){d=0;h.processFocusIn(a,j,document.body,b);c.previousActiveElement=null},0);if(a.target===window||a.target===document){c.previousActiveElement=null}else{c.previousActiveElement=a.target}}else{h.processFocusIn(a,c.previousActiveElement||document.body,a.target===window?document.body:a.target,b)}}}})}}));(Ext.cmd.derive("Ext.fx.State",Ext.Base,{isAnimatable:{"background-color":true,"background-image":true,"background-position":true,"border-bottom-color":true,"border-bottom-width":true,"border-color":true,"border-left-color":true,"border-left-width":true,"border-right-color":true,"border-right-width":true,"border-spacing":true,"border-top-color":true,"border-top-width":true,"border-width":true,bottom:true,color:true,crop:true,"font-size":true,"font-weight":true,height:true,left:true,"letter-spacing":true,"line-height":true,"margin-bottom":true,"margin-left":true,"margin-right":true,"margin-top":true,"max-height":true,"max-width":true,"min-height":true,"min-width":true,opacity:true,"outline-color":true,"outline-offset":true,"outline-width":true,"padding-bottom":true,"padding-left":true,"padding-right":true,"padding-top":true,right:true,"text-indent":true,"text-shadow":true,top:true,"vertical-align":true,visibility:true,width:true,"word-spacing":true,"z-index":true,zoom:true,transform:true},constructor:function(b){this.data={};this.set(b)},setConfig:function(b){this.set(b);return this},setRaw:function(b){this.data=b;return this},clear:function(){return this.setRaw({})},setTransform:function(s,o){var p=this.data,m=Ext.isArray(o),j=p.transform,q,r;if(!j){j=p.transform={translateX:0,translateY:0,translateZ:0,scaleX:1,scaleY:1,scaleZ:1,rotate:0,rotateX:0,rotateY:0,rotateZ:0,skewX:0,skewY:0}}if(typeof s=="string"){switch(s){case"translate":if(m){q=o.length;if(q==0){break}j.translateX=o[0];if(q==1){break}j.translateY=o[1];if(q==2){break}j.translateZ=o[2]}else{j.translateX=o}break;case"rotate":if(m){q=o.length;if(q==0){break}j.rotateX=o[0];if(q==1){break}j.rotateY=o[1];if(q==2){break}j.rotateZ=o[2]}else{j.rotate=o}break;case"scale":if(m){q=o.length;if(q==0){break}j.scaleX=o[0];if(q==1){break}j.scaleY=o[1];if(q==2){break}j.scaleZ=o[2]}else{j.scaleX=o;j.scaleY=o}break;case"skew":if(m){q=o.length;if(q==0){break}j.skewX=o[0];if(q==1){break}j.skewY=o[1]}else{j.skewX=o}break;default:j[s]=o}}else{for(r in s){if(s.hasOwnProperty(r)){o=s[r];this.setTransform(r,o)}}}},set:function(g,h){var j=this.data,f;if(typeof g!="string"){for(f in g){h=g[f];if(f==="transform"){this.setTransform(h)}else{j[f]=h}}}else{if(g==="transform"){this.setTransform(h)}else{j[g]=h}}return this},unset:function(d){var c=this.data;if(c.hasOwnProperty(d)){delete c[d]}return this},getData:function(){return this.data}},1,0,0,0,0,0,[Ext.fx,"State"],0));(Ext.cmd.derive("Ext.fx.animation.Abstract",Ext.Evented,{isAnimation:true,config:{name:"",element:null,before:null,from:{},to:{},after:null,states:{},duration:300,easing:"linear",iteration:1,direction:"normal",delay:0,onBeforeStart:null,callback:null,onEnd:null,onBeforeEnd:null,scope:null,reverse:null,preserveEndState:false,replacePrevious:true},STATE_FROM:"0%",STATE_TO:"100%",DIRECTION_UP:"up",DIRECTION_DOWN:"down",DIRECTION_LEFT:"left",DIRECTION_RIGHT:"right",stateNameRegex:/^(?:[\d\.]+)%$/,constructor:function(){this.states={};Ext.Evented.prototype.constructor.apply(this,arguments);return this},applyElement:function(b){return Ext.get(b)},applyBefore:function(d,c){if(d){return Ext.factory(d,Ext.fx.State,c)}},applyAfter:function(c,d){if(c){return Ext.factory(c,Ext.fx.State,d)}},setFrom:function(b){return this.setState(this.STATE_FROM,b)},setTo:function(b){return this.setState(this.STATE_TO,b)},getFrom:function(){return this.getState(this.STATE_FROM)},getTo:function(){return this.getState(this.STATE_TO)},setStates:function(f){var g=this.stateNameRegex,d;for(d in f){if(g.test(d)){this.setState(d,f[d])}}return this},getStates:function(){return this.states},updateCallback:function(b){if(b){this.setOnEnd(b)}},end:function(){this.stop()},stop:function(){this.fireEvent("stop",this)},destroy:function(){this.stop();Ext.Evented.prototype.destroy.call(this)},setState:function(f,h){var g=this.getStates(),j;j=Ext.factory(h,Ext.fx.State,g[f]);if(j){g[f]=j}return this},getState:function(b){return this.getStates()[b]},getData:function(){var w=this,r=w.getStates(),z={},v=w.getBefore(),B=w.getAfter(),u=r[w.STATE_FROM],t=r[w.STATE_TO],s=u.getData(),y=t.getData(),A,C,D;for(C in r){if(r.hasOwnProperty(C)){D=r[C];A=D.getData();z[C]=A}}return{before:v?v.getData():{},after:B?B.getData():{},states:z,from:s,to:y,duration:w.getDuration(),iteration:w.getIteration(),direction:w.getDirection(),easing:w.getEasing(),delay:w.getDelay(),onEnd:w.getOnEnd(),onBeforeEnd:w.getOnBeforeEnd(),onBeforeStart:w.getOnBeforeStart(),scope:w.getScope(),preserveEndState:w.getPreserveEndState(),replacePrevious:w.getReplacePrevious()}}},1,0,0,0,0,0,[Ext.fx.animation,"Abstract"],0));(Ext.cmd.derive("Ext.fx.animation.Slide",Ext.fx.animation.Abstract,{alternateClassName:"Ext.fx.animation.SlideIn",config:{direction:"left",out:false,offset:0,easing:"auto",containerBox:"auto",elementBox:"auto",isElementBoxFit:true,useCssTransform:true},reverseDirectionMap:{up:"down",down:"up",left:"right",right:"left"},applyEasing:function(b){if(b==="auto"){return"ease-"+((this.getOut())?"in":"out")}return b},getContainerBox:function(){var b=this._containerBox;if(b==="auto"){b=this.getElement().getParent().getBox()}return b},getElementBox:function(){var b=this._elementBox;if(this.getIsElementBoxFit()){return this.getContainerBox()}if(b==="auto"){b=this.getElement().getBox()}return b},getData:function(){var J=this.getElementBox(),G=this.getContainerBox(),C=J?J:G,L=this.getFrom(),K=this.getTo(),D=this.getOut(),E=this.getOffset(),v=this.getDirection(),H=this.getUseCssTransform(),B=this.getReverse(),F=0,I=0,w,z,y,A;if(B){v=this.reverseDirectionMap[v]}switch(v){case this.DIRECTION_UP:if(D){I=G.top-C.top-C.height-E}else{I=G.bottom-C.bottom+C.height+E}break;case this.DIRECTION_DOWN:if(D){I=G.bottom-C.bottom+C.height+E}else{I=G.top-C.height-C.top-E}break;case this.DIRECTION_RIGHT:if(D){F=G.right-C.right+C.width+E}else{F=G.left-C.left-C.width-E}break;case this.DIRECTION_LEFT:if(D){F=G.left-C.left-C.width-E}else{F=G.right-C.right+C.width+E}break}w=(D)?0:F;z=(D)?0:I;if(H){L.setTransform({translateX:w,translateY:z})}else{L.set("left",w);L.set("top",z)}y=(D)?F:0;A=(D)?I:0;if(H){K.setTransform({translateX:y,translateY:A})}else{K.set("left",y);K.set("top",A)}return Ext.fx.animation.Abstract.prototype.getData.apply(this,arguments)}},0,0,0,0,["animation.slide","animation.slideIn"],0,[Ext.fx.animation,"Slide",Ext.fx.animation,"SlideIn"],0));(Ext.cmd.derive("Ext.fx.animation.SlideOut",Ext.fx.animation.Slide,{config:{out:true}},0,0,0,0,["animation.slideOut"],0,[Ext.fx.animation,"SlideOut"],0));(Ext.cmd.derive("Ext.fx.animation.Fade",Ext.fx.animation.Abstract,{alternateClassName:"Ext.fx.animation.FadeIn",config:{out:false,before:{display:null,opacity:0},after:{opacity:null},reverse:null},updateOut:function(f){var g=this.getTo(),d=this.getFrom();if(f){d.set("opacity",1);g.set("opacity",0)}else{d.set("opacity",0);g.set("opacity",1)}}},0,0,0,0,["animation.fade","animation.fadeIn"],0,[Ext.fx.animation,"Fade",Ext.fx.animation,"FadeIn"],0));(Ext.cmd.derive("Ext.fx.animation.FadeOut",Ext.fx.animation.Fade,{config:{out:true,before:{}}},0,0,0,0,["animation.fadeOut"],0,[Ext.fx.animation,"FadeOut"],0));(Ext.cmd.derive("Ext.fx.animation.Flip",Ext.fx.animation.Abstract,{config:{easing:"ease-in",direction:"right",half:false,out:null},getData:function(){var z=this,w=z.getFrom(),v=z.getTo(),y=z.getDirection(),E=z.getOut(),s=z.getHalf(),D=s?90:180,B=1,F=1,t=0,u=0,A=0,C=0;if(E){F=0.8}else{B=0.8}switch(y){case this.DIRECTION_UP:if(E){A=D}else{t=-D}break;case this.DIRECTION_DOWN:if(E){A=-D}else{t=D}break;case this.DIRECTION_RIGHT:if(E){C=D}else{u=-D}break;case this.DIRECTION_LEFT:if(E){C=-D}else{u=D}break}w.setTransform({rotateX:t,rotateY:u,scale:B});v.setTransform({rotateX:A,rotateY:C,scale:F});return Ext.fx.animation.Abstract.prototype.getData.call(this)}},0,0,0,0,["animation.flip"],0,[Ext.fx.animation,"Flip"],0));(Ext.cmd.derive("Ext.fx.animation.Pop",Ext.fx.animation.Abstract,{alternateClassName:"Ext.fx.animation.PopIn",config:{out:false,before:{display:null,opacity:0},after:{opacity:null}},getData:function(){var g=this.getTo(),d=this.getFrom(),f=this.getOut();if(f){d.set("opacity",1);d.setTransform({scale:1});g.set("opacity",0);g.setTransform({scale:0})}else{d.set("opacity",0);d.setTransform({scale:0});g.set("opacity",1);g.setTransform({scale:1})}return Ext.fx.animation.Abstract.prototype.getData.apply(this,arguments)}},0,0,0,0,["animation.pop","animation.popIn"],0,[Ext.fx.animation,"Pop",Ext.fx.animation,"PopIn"],0));(Ext.cmd.derive("Ext.fx.animation.PopOut",Ext.fx.animation.Pop,{config:{out:true,before:{}}},0,0,0,0,["animation.popOut"],0,[Ext.fx.animation,"PopOut"],0));(Ext.cmd.derive("Ext.fx.Animation",Ext.Base,{constructor:function(d){var f=Ext.fx.animation.Abstract,g;if(typeof d=="string"){g=d;d={}}else{if(d&&d.type){g=d.type}}if(g){f=Ext.ClassManager.getByAlias("animation."+g)}return Ext.factory(d,f)}},1,0,0,0,0,0,[Ext.fx,"Animation"],0));(Ext.cmd.derive("Ext.fx.runner.Css",Ext.Evented,{prefixedProperties:{transform:true,"transform-origin":true,perspective:true,"transform-style":true,transition:true,"transition-property":true,"transition-duration":true,"transition-timing-function":true,"transition-delay":true,animation:true,"animation-name":true,"animation-duration":true,"animation-iteration-count":true,"animation-direction":true,"animation-timing-function":true,"animation-delay":true},lengthProperties:{top:true,right:true,bottom:true,left:true,width:true,height:true,"max-height":true,"max-width":true,"min-height":true,"min-width":true,"margin-bottom":true,"margin-left":true,"margin-right":true,"margin-top":true,"padding-bottom":true,"padding-left":true,"padding-right":true,"padding-top":true,"border-bottom-width":true,"border-left-width":true,"border-right-width":true,"border-spacing":true,"border-top-width":true,"border-width":true,"outline-width":true,"letter-spacing":true,"line-height":true,"text-indent":true,"word-spacing":true,"font-size":true,translate:true,translateX:true,translateY:true,translateZ:true,translate3d:true},durationProperties:{"transition-duration":true,"transition-delay":true,"animation-duration":true,"animation-delay":true},angleProperties:{rotate:true,rotateX:true,rotateY:true,rotateZ:true,skew:true,skewX:true,skewY:true},lengthUnitRegex:/([a-z%]*)$/,DEFAULT_UNIT_LENGTH:"px",DEFAULT_UNIT_ANGLE:"deg",DEFAULT_UNIT_DURATION:"ms",formattedNameCache:{},transformMethods3d:["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","skewX","skewY","scaleX","scaleY","scaleZ"],transformMethodsNo3d:["translateX","translateY","rotate","skewX","skewY","scaleX","scaleY"],constructor:function(){var b=this;b.transformMethods=Ext.feature.has.Css3dTransforms?b.transformMethods3d:b.transformMethodsNo3d;b.vendorPrefix=Ext.browser.getStyleDashPrefix();b.ruleStylesCache={};Ext.Evented.prototype.constructor.call(this)},getStyleSheet:function(){var g=this.styleSheet,f,d;if(!g){f=document.createElement("style");f.type="text/css";(document.head||document.getElementsByTagName("head")[0]).appendChild(f);d=document.styleSheets;this.styleSheet=g=d[d.length-1]}return g},applyRules:function(s){var u=this.getStyleSheet(),q=this.ruleStylesCache,r=u.cssRules,z,w,t,A,y,B,v;for(z in s){w=s[z];t=q[z];if(t===undefined){y=r.length;u.insertRule(z+"{}",y);t=q[z]=r.item(y).style}A=t.$cache;if(!A){A=t.$cache={}}for(B in w){v=this.formatValue(w[B],B);B=this.formatName(B);if(A[B]!==v){A[B]=v;if(v===null){t.removeProperty(B)}else{t.setProperty(B,v,"important")}}}}return this},applyStyles:function(r){var o,s,p,j,m,q;for(o in r){if(r.hasOwnProperty(o)){s=document.getElementById(o);if(!s){continue}p=s.style;j=r[o];for(m in j){if(j.hasOwnProperty(m)){q=this.formatValue(j[m],m);m=this.formatName(m);if(q===null){p.removeProperty(m)}else{p.setProperty(m,q,"important")}}}}}return this},formatName:function(d){var f=this.formattedNameCache,g=f[d];if(!g){if((Ext.os.is.Tizen||!Ext.feature.has.CssTransformNoPrefix)&&this.prefixedProperties[d]){g=this.vendorPrefix+d}else{g=d}f[d]=g}return g},formatValue:function(s,A){var u=typeof s,q=this.DEFAULT_UNIT_LENGTH,w,B,y,v,z,r,t;if(s===null){return""}if(u=="string"){if(this.lengthProperties[A]){t=s.match(this.lengthUnitRegex)[1];if(t.length>0){}else{return s+q}}return s}else{if(u=="number"){if(s==0){return"0"}if(this.lengthProperties[A]){return s+q}if(this.angleProperties[A]){return s+this.DEFAULT_UNIT_ANGLE}if(this.durationProperties[A]){return s+this.DEFAULT_UNIT_DURATION}}else{if(A==="transform"){w=this.transformMethods;z=[];for(y=0,v=w.length;y<v;y++){B=w[y];z.push(B+"("+this.formatValue(s[B],B)+")")}return z.join(" ")}else{if(Ext.isArray(s)){r=[];for(y=0,v=s.length;y<v;y++){r.push(this.formatValue(s[y],A))}return(r.length>0)?r.join(", "):"none"}}}}return s}},1,0,0,0,0,0,[Ext.fx.runner,"Css"],0));(Ext.cmd.derive("Ext.fx.runner.CssTransition",Ext.fx.runner.Css,{alternateClassName:"Ext.Animator",singleton:true,listenersAttached:false,constructor:function(){this.runningAnimationsData={};return this.callParent(arguments)},attachListeners:function(){this.listenersAttached=true;Ext.getWin().on("transitionend","onTransitionEnd",this)},onTransitionEnd:function(d){var f=d.target,g=f.id;if(g&&this.runningAnimationsData.hasOwnProperty(g)){this.refreshRunningAnimationsData(Ext.get(f),[d.browserEvent.propertyName])}},onAnimationEnd:function(A,B,D,y,t){var E=A.getId(),w=this.runningAnimationsData[E],H={},u={},F,z,C,v,G;D.un("stop","onAnimationStop",this);if(w){F=w.nameMap}H[E]=u;if(B.onBeforeEnd){B.onBeforeEnd.call(B.scope||this,A,y)}D.fireEvent("animationbeforeend",D,A,y);this.fireEvent("animationbeforeend",this,D,A,y);if(t||(!y&&!B.preserveEndState)){z=B.toPropertyNames;for(C=0,v=z.length;C<v;C++){G=z[C];if(F&&!F.hasOwnProperty(G)){u[G]=null}}}if(B.after){Ext.merge(u,B.after)}this.applyStyles(H);if(B.onEnd){B.onEnd.call(B.scope||this,A,y)}D.fireEvent("animationend",D,A,y);this.fireEvent("animationend",this,D,A,y);Ext.AnimationQueue.stop(Ext.emptyFn,D)},onAllAnimationsEnd:function(d){var g=d.getId(),f={};delete this.runningAnimationsData[g];f[g]={"transition-property":null,"transition-duration":null,"transition-timing-function":null,"transition-delay":null};this.applyStyles(f);this.fireEvent("animationallend",this,d)},hasRunningAnimations:function(f){var g=f.getId(),d=this.runningAnimationsData;return d.hasOwnProperty(g)&&d[g].sessions.length>0},refreshRunningAnimationsData:function(O,J,A,E){var L=O.getId(),D=this.runningAnimationsData,R=D[L];if(!R){return}var H=R.nameMap,B=R.nameList,Q=R.sessions,M,K,N,j,I,P,C,F,G=false;A=Boolean(A);E=Boolean(E);if(!Q){return this}M=Q.length;if(M===0){return this}if(E){R.nameMap={};B.length=0;for(I=0;I<M;I++){P=Q[I];this.onAnimationEnd(O,P.data,P.animation,A,E)}Q.length=0}else{for(I=0;I<M;I++){P=Q[I];C=P.map;F=P.list;for(K=0,N=J.length;K<N;K++){j=J[K];if(C[j]){delete C[j];Ext.Array.remove(F,j);P.length--;if(--H[j]==0){delete H[j];Ext.Array.remove(B,j)}}}if(P.length==0){Q.splice(I,1);I--;M--;G=true;this.onAnimationEnd(O,P.data,P.animation,A)}}}if(!E&&!A&&Q.length==0&&G){this.onAllAnimationsEnd(O)}},getRunningData:function(c){var d=this.runningAnimationsData;if(!d.hasOwnProperty(c)){d[c]={nameMap:{},nameList:[],sessions:[]}}return d[c]},getTestElement:function(){var j=this.testElement,f,h,g;if(!j){f=document.createElement("iframe");f.setAttribute("tabIndex",-1);g=f.style;g.setProperty("visibility","hidden","important");g.setProperty("width","0px","important");g.setProperty("height","0px","important");g.setProperty("position","absolute","important");g.setProperty("border","0px","important");g.setProperty("zIndex","-1000","important");document.body.appendChild(f);h=f.contentDocument;h.open();h.writeln("</body>");h.close();this.testElement=j=h.createElement("div");j.style.setProperty("position","absolute","important");h.body.appendChild(j);this.testElementComputedStyle=window.getComputedStyle(j)}return j},getCssStyleValue:function(g,j){var m=this.getTestElement(),h=this.testElementComputedStyle,o=m.style;o.setProperty(g,j);if(Ext.browser.is.Firefox){m.offsetHeight}j=h.getPropertyValue(g);o.removeProperty(g);return j},run:function(ac){var R=this,ao=R.lengthProperties,ag={},T={},Q={},at,V,ae,ar,am,j,ak,aa,Y,aw,ai,Z,ab,ad,X,al,S,ap,W,P,an,aq,ah,af,au,U,av,aj;if(!R.listenersAttached){R.attachListeners()}ac=Ext.Array.from(ac);for(Z=0,ad=ac.length;Z<ad;Z++){X=ac[Z];X=Ext.factory(X,Ext.fx.Animation);at=X.getElement();Ext.AnimationQueue.start(Ext.emptyFn,X);ap=window.getComputedStyle(at.dom);V=at.getId();Q=Ext.merge({},X.getData());if(X.onBeforeStart){X.onBeforeStart.call(X.scope||R,at)}X.fireEvent("animationstart",X);R.fireEvent("animationstart",R,X);Q[V]=Q;am=Q.before;ae=Q.from;ar=Q.to;Q.fromPropertyNames=j=[];Q.toPropertyNames=ak=[];for(P in ar){if(ar.hasOwnProperty(P)){ar[P]=an=R.formatValue(ar[P],P);W=R.formatName(P);af=ao.hasOwnProperty(P);if(!af){an=R.getCssStyleValue(W,an)}if(ae.hasOwnProperty(P)){ae[P]=ah=R.formatValue(ae[P],P);if(!af){ah=R.getCssStyleValue(W,ah)}if(an!==ah){j.push(W);ak.push(W)}}else{aq=ap.getPropertyValue(W);if(an!==aq){ak.push(W)}}}}al=ak.length;if(al===0){R.onAnimationEnd(at,Q,X);continue}aw=R.getRunningData(V);av=aw.sessions;if(av.length>0){R.refreshRunningAnimationsData(at,Ext.Array.merge(j,ak),true,Q.replacePrevious)}au=aw.nameMap;U=aw.nameList;S={};for(ab=0;ab<al;ab++){P=ak[ab];S[P]=true;if(!au.hasOwnProperty(P)){au[P]=1;U.push(P)}else{au[P]++}}aj={element:at,map:S,list:ak.slice(),length:al,data:Q,animation:X};av.push(aj);X.on("stop","onAnimationStop",R);ai=Ext.apply({},am);Ext.apply(ai,ae);if(U.length>0){j=Ext.Array.difference(U,j);ak=Ext.Array.merge(j,ak);ai["transition-property"]=j}ag[V]=ai;T[V]=Ext.apply({},ar);T[V]["transition-property"]=ak;T[V]["transition-duration"]=Q.duration;T[V]["transition-timing-function"]=Q.easing;T[V]["transition-delay"]=Q.delay;X.startTime=Date.now()}Y=R.$className;R.applyStyles(ag);aa=function(a){if(a.data===Y&&a.source===window){window.removeEventListener("message",aa,false);R.applyStyles(T)}};if(window.requestAnimationFrame){window.requestAnimationFrame(function(){window.addEventListener("message",aa,false);window.postMessage(Y,"*")})}else{Ext.defer(function(){window.addEventListener("message",aa,false);window.postMessage(Y,"*")},1)}},onAnimationStop:function(t){var r=this.runningAnimationsData,p,o,q,m,u,s;for(p in r){if(r.hasOwnProperty(p)){o=r[p];q=o.sessions;for(m=0,u=q.length;m<u;m++){s=q[m];if(s.animation===t){this.refreshRunningAnimationsData(s.element,s.list.slice(),false)}}}}}},1,0,0,0,0,0,[Ext.fx.runner,"CssTransition",Ext,"Animator"],0));(Ext.cmd.derive("Ext.mixin.Container",Ext.Mixin,{mixinConfig:{id:"container"},isContainer:true,config:{referenceHolder:false},getReferences:function(){Ext.ComponentManager.fixReferences();return this.refs||null},lookup:function(c){var d=this.getReferences();return(d&&d[c])||null},lookupReference:function(b){return this.lookup(b)},privates:{attachReference:function(f){var h=this,j,g;if(h.destroying||h.destroyed){return}g=h.refs||(h.refs={});j=f.referenceKey;g[j]=f},clearReference:function(d){var f=this.refs,g=d.referenceKey;if(f&&g){d.viewModelKey=d.referenceKey=f[g]=null}},containerOnAdded:function(c,d){if(d){Ext.ComponentManager.markReferencesDirty()}},containerOnRemoved:function(d){var c;if(!d){c=this.lookupReferenceHolder();if(c){Ext.ComponentManager.markReferencesDirty();c.clearReferences()}}},clearReferences:function(){this.refs=null},initContainerInheritedState:function(s,u){var q=this,m=q.getController(),p=q.getSession(),t=q.getConfig("viewModel",true),o=q.getReference(),r=q.getReferenceHolder();if(m){s.referenceHolder=m;r=true}else{if(r){s.referenceHolder=q}}if(r){s.referencePath=""}else{if(o&&q.isParentReference){s.referencePath=q.referenceKey+"."}}if(p){s.session=p}if(t){s.viewModelPath=""}else{if(o&&q.isParentReference){s.viewModelPath=q.viewModelKey+"."}}},setupReference:function(c){var d;if(c&&c.charAt(d=c.length-1)===">"){this.isParentReference=true;c=c.substring(0,d)}return c}}},0,0,0,0,0,0,[Ext.mixin,"Container"],0));(Ext.cmd.derive("Ext.perf.Accumulator",Ext.Base,function(){var u=null,q=Ext.global.chrome,t,v=function(){v=Ext.now;var c,b;if(Ext.isChrome&&q&&q.Interval){c=new q.Interval();c.start();v=function(){return c.microseconds()/1000}}else{if(window.ActiveXObject){try{b=new ActiveXObject("SenchaToolbox.Toolbox");Ext.senchaToolbox=b;v=function(){return b.milliseconds}}catch(a){}}}Ext.perf.getTimestamp=Ext.perf.Accumulator.getTimestamp=v;return v()};function p(a,b){a.sum+=b;a.min=Math.min(a.min,b);a.max=Math.max(a.max,b)}function s(a){var c=a?a:(v()-this.time),b=this,d=b.accum;++d.count;if(!--d.depth){p(d.total,c)}p(d.pure,c-b.childTime);u=b.parent;if(u){++u.accum.childCount;u.childTime+=c}}function w(){return{min:Number.MAX_VALUE,max:0,sum:0}}function o(a,b){return function(){var c=a.enter(),d=b.apply(this,arguments);c.leave();return d}}function r(c,d,f,a){var b={avg:0,min:a.min,max:a.max,sum:0};if(c){f=f||0;b.sum=a.sum-d*f;b.avg=b.sum/c}return b}return{constructor:function(b){var a=this;a.count=a.childCount=a.depth=a.maxDepth=0;a.pure=w();a.total=w();a.name=b},statics:{getTimestamp:v},format:function(b){if(!t){t=new Ext.XTemplate(["{name} - {count} call(s)",'<tpl if="count">','<tpl if="childCount">'," ({childCount} children)","</tpl>",'<tpl if="depth - 1">'," ({depth} deep)","</tpl>",'<tpl for="times">',", {type}: {[this.time(values.sum)]} msec (","avg={[this.time(values.sum / parent.count)]}",")","</tpl>","</tpl>"].join(""),{time:function(c){return Math.round(c*100)/100}})}var a=this.getData(b);a.name=this.name;a.pure.type="Pure";a.total.type="Total";a.times=[a.pure,a.total];return t.apply(a)},getData:function(b){var a=this;return{count:a.count,childCount:a.childCount,depth:a.maxDepth,pure:r(a.count,a.childCount,b,a.pure),total:r(a.count,a.childCount,b,a.total)}},enter:function(){var b=this,a={accum:b,leave:s,childTime:0,parent:u};++b.depth;if(b.maxDepth<b.depth){b.maxDepth=b.depth}u=a;a.time=v();return a},monitor:function(b,c,d){var a=this.enter();if(d){b.apply(c,d)}else{b.call(c)}a.leave()},report:function(){Ext.log(this.format())},tap:function(j,g){var h=this,a=typeof g==="string"?[g]:g,m,f,C,D,b,c,d,B;B=function(){if(typeof j==="string"){m=Ext.global;D=j.split(".");for(C=0,b=D.length;C<b;++C){m=m[D[C]]}}else{m=j}for(C=0,b=a.length;C<b;++C){c=a[C];f=c.charAt(0)==="!";if(f){c=c.substring(1)}else{f=!(c in m.prototype)}d=f?m:m.prototype;d[c]=o(h,d[c])}};Ext.ClassManager.onCreated(B,h,j);return h}}},1,0,0,0,0,0,[Ext.perf,"Accumulator"],function(){Ext.perf.getTimestamp=this.getTimestamp}));(Ext.cmd.derive("Ext.perf.Monitor",Ext.Base,{singleton:true,alternateClassName:"Ext.Perf",constructor:function(){this.accumulators=[];this.accumulatorsByName={}},calibrate:function(){var j=new Ext.perf.Accumulator("$"),p=j.total,s=Ext.perf.Accumulator.getTimestamp,q=0,o,m,r;r=s();do{o=j.enter();o.leave();++q}while(p.sum<100);m=s();return(m-r)/q},get:function(d){var g=this,f=g.accumulatorsByName[d];if(!f){g.accumulatorsByName[d]=f=new Ext.perf.Accumulator(d);g.accumulators.push(f)}return f},enter:function(b){return this.get(b).enter()},monitor:function(f,g,d){this.get(f).monitor(g,d)},report:function(){var g=this,d=g.accumulators,f=g.calibrate();d.sort(function(a,b){return(a.name<b.name)?-1:((b.name<a.name)?1:0)});g.updateGC();Ext.log("Calibration: "+Math.round(f*100)/100+" msec/sample");Ext.each(d,function(a){Ext.log(a.format(f))})},getData:function(g){var d={},f=this.accumulators;Ext.each(f,function(a){if(g||a.count){d[a.name]=a.getData()}});return d},reset:function(){Ext.each(this.accumulators,function(d){var c=d;c.count=c.childCount=c.depth=c.maxDepth=0;c.pure={min:Number.MAX_VALUE,max:0,sum:0};c.total={min:Number.MAX_VALUE,max:0,sum:0}})},updateGC:function(){var f=this.accumulatorsByName.GC,d=Ext.senchaToolbox,g;if(f){f.count=d.garbageCollectionCounter||0;if(f.count){g=f.pure;f.total.sum=g.sum=d.garbageCollectionMilliseconds;g.min=g.max=g.sum/f.count;g=f.total;g.min=g.max=g.sum/f.count}}},watchGC:function(){Ext.perf.getTimestamp();var b=Ext.senchaToolbox;if(b){this.get("GC");b.watchGarbageCollector(false)}},setup:function(q){if(!q){q={render:{"Ext.Component":"render"},layout:{"Ext.layout.Context":"run"}}}this.currentConfig=q;var p,m,h,o,j;for(p in q){if(q.hasOwnProperty(p)){m=q[p];h=Ext.Perf.get(p);for(o in m){if(m.hasOwnProperty(o)){j=m[o];h.tap(o,j)}}}}this.watchGC()},setupLog:function(q){var o,j,h,m,p;for(o in q){if(q.hasOwnProperty(o)){j=Ext.ClassManager.get(o);if(j){h=q[o];p={};for(m in h){p[m]=(function(b,a){return function(){var g,f,d,s,c;g=+Date.now();c=this.callParent(arguments);f=+Date.now()-g;if(window.console&&f>0){s=a==="this"?this:typeof a==="string"?this[a]:typeof a==="number"?arguments[a]:null;if(s){d=s.id}if(d!=null){console.log(b+" for "+d+": "+f+"ms")}else{console.log(b+" for unknown: "+f+"ms")}if(console.trace){console.trace()}}return c}})(m,h[m])}Ext.override(j,p)}}}}},1,0,0,0,0,0,[Ext.perf,"Monitor",Ext,"Perf"],0));(Ext.cmd.derive("Ext.util.ItemCollection",Ext.util.MixedCollection,{alternateClassName:"Ext.ItemCollection",getKey:function(b){return b.getItemId&&b.getItemId()},has:function(b){return this.map.hasOwnProperty(b.getId())}},0,0,0,0,0,0,[Ext.util,"ItemCollection",Ext,"ItemCollection"],0));(Ext.cmd.derive("Ext.util.TaskManager",Ext.util.TaskRunner,{alternateClassName:["Ext.TaskManager"],singleton:true},0,0,0,0,0,0,[Ext.util,"TaskManager",Ext,"TaskManager"],0));(Ext.cmd.derive("Ext.util.TextMetrics",Ext.Base,{statics:{shared:null,measure:function(h,m,j){var g=this,o=g.shared;if(!o){o=g.shared=new g(h,j)}o.bind(h);o.setFixedWidth(j||"auto");return o.getSize(m)},destroy:function(){var b=this;Ext.destroy(b.shared);b.shared=null}},constructor:function(g,h){var j=this,f=Ext.getBody().createChild({role:"presentation",cls:"x-textmetrics"});f.setVisibilityMode(1);j.measure=f;if(g){j.bind(g)}f.position("absolute");f.setLocalXY(-1000,-1000);f.hide();if(h){f.setWidth(h)}},getSize:function(g){var d=this.measure,f;d.setHtml(g);f=d.getSize();d.setHtml("");return f},bind:function(d){var c=this;c.el=Ext.get(d);c.measure.setStyle(c.el.getStyle(["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing","word-break"]))},setFixedWidth:function(b){this.measure.setWidth(b)},getWidth:function(b){this.measure.dom.style.width="auto";return this.getSize(b).width},getHeight:function(b){return this.getSize(b).height},destroy:function(){var b=this;b.el=b.measure=Ext.destroy(b.measure);b.callParent()}},1,0,0,0,0,0,[Ext.util,"TextMetrics"],function(){Ext.Element.override({getTextWidth:function(g,d,f){return Ext.Number.constrain(Ext.util.TextMetrics.measure(this.dom,Ext.valueFrom(g,this.dom.innerHTML,true)).width,d||0,f||1000000)}})}));(Ext.cmd.derive("Ext.ElementLoader",Ext.Base,{statics:{Renderer:{Html:function(f,d,g){f.getTarget().setHtml(d.responseText,g.scripts===true,g.rendererScope);return true}}},url:null,params:null,baseParams:null,autoLoad:false,target:null,loadMask:false,ajaxOptions:null,scripts:false,isLoader:true,constructor:function(d){var g=this,f;g.mixins.observable.constructor.call(g,d);g.setTarget(g.target);if(g.autoLoad){f=g.autoLoad;if(f===true){f=null}g.load(f)}},setTarget:function(c){var d=this;c=Ext.get(c);if(d.target&&d.target!==c){d.abort()}d.target=c},getTarget:function(){return this.target||null},abort:function(){var b=this.active;if(b!==undefined){Ext.Ajax.abort(b.request);if(b.mask){this.removeMask()}delete this.active}},removeMask:function(){this.target.unmask()},addMask:function(b){this.target.mask(b===true?null:b)},load:function(s){s=Ext.apply({},s);var q=this,m=Ext.isDefined(s.loadMask)?s.loadMask:q.loadMask,p=Ext.apply({},s.params),j=Ext.apply({},s.ajaxOptions),o=s.callback||q.callback,r=s.scope||q.scope||q;Ext.applyIf(j,q.ajaxOptions);Ext.applyIf(s,j);Ext.applyIf(p,q.params);Ext.apply(p,q.baseParams);Ext.applyIf(s,{url:q.url});Ext.apply(s,{scope:q,params:p,callback:q.onComplete});if(q.fireEvent("beforeload",q,s)===false){return}if(m){q.addMask(m)}q.active={options:s,mask:m,scope:r,callback:o,success:s.success||q.success,failure:s.failure||q.failure,renderer:s.renderer||q.renderer,scripts:Ext.isDefined(s.scripts)?s.scripts:q.scripts};q.active.request=Ext.Ajax.request(s);q.setOptions(q.active,s)},setOptions:function(c,d){c.rendererScope=d.rendererScope||this.rendererScope||this},onComplete:function(j,p,m){var r=this,q=r.active,o,s;if(q){s=q.scope;o=q.rendererScope;if(p){p=r.getRenderer(q.renderer).call(o,r,m,q)!==false}if(p){Ext.callback(q.success,s,[r,m,j]);r.fireEvent("load",r,m,j)}else{Ext.callback(q.failure,s,[r,m,j]);r.fireEvent("exception",r,m,j)}Ext.callback(q.callback,s,[r,p,m,j]);if(q.mask){r.removeMask()}}delete r.active},getRenderer:function(b){if(Ext.isFunction(b)){return b}return this.statics().Renderer.Html},startAutoRefresh:function(f,d){var g=this;g.stopAutoRefresh();g.autoRefresh=Ext.interval(function(){g.load(d)},f)},stopAutoRefresh:function(){clearInterval(this.autoRefresh);delete this.autoRefresh},isAutoRefreshing:function(){return Ext.isDefined(this.autoRefresh)},destroy:function(){var b=this;b.stopAutoRefresh();delete b.target;b.abort();b.callParent()}},1,0,0,0,0,[[Ext.util.Observable.prototype.mixinId||Ext.util.Observable.$className,Ext.util.Observable]],[Ext,"ElementLoader"],0));(Ext.cmd.derive("Ext.ComponentLoader",Ext.ElementLoader,{statics:{Renderer:{Data:function(h,g,m){var j=true;try{h.getTarget().update(Ext.decode(g.responseText))}catch(o){j=false}return j},Component:function(m,s,p){var o=true,q=m.getTarget(),j=[];try{j=Ext.decode(s.responseText)}catch(r){o=false}if(o){q.suspendLayouts();if(p.removeAll){q.removeAll()}q.add(j);q.resumeLayouts(true)}return o}}},target:null,loadOnRender:false,loadMask:false,renderer:"html",setTarget:function(c){var d=this;if(Ext.isString(c)){c=Ext.getCmp(c)}if(d.target&&d.target!==c){d.abort()}d.target=c;if(c&&d.loadOnRender){if(c.rendered){d.doLoadOnRender()}else{d.mon(c,"render",d.doLoadOnRender,d)}}},doLoadOnRender:function(){var b=this.loadOnRender;this.load(Ext.isObject(b)?b:null)},removeMask:function(){this.target.setLoading(false)},addMask:function(b){this.target.setLoading(b)},setOptions:function(c,d){c.removeAll=Ext.isDefined(d.removeAll)?d.removeAll:this.removeAll;c.rendererScope=d.rendererScope||this.rendererScope||this.target},getRenderer:function(c){if(Ext.isFunction(c)){return c}var d=this.statics().Renderer;switch(c){case"component":return d.Component;case"data":return d.Data;default:return Ext.ElementLoader.Renderer.Html}}},0,0,0,0,0,0,[Ext,"ComponentLoader"],0));(Ext.cmd.derive("Ext.layout.SizeModel",Ext.Base,{constructor:function(o){var j=this,m=j.self,h=m.sizeModelsArray,g;Ext.apply(j,o);j[g=j.name]=true;j.fixed=!(j.auto=j.natural||j.shrinkWrap);h[j.ordinal=h.length]=m[g]=m.sizeModels[g]=j},statics:{sizeModelsArray:[],sizeModels:{}},calculated:false,configured:false,constrainedMax:false,constrainedMin:false,natural:false,shrinkWrap:false,calculatedFromConfigured:false,calculatedFromNatural:false,calculatedFromShrinkWrap:false,names:null},1,0,0,0,0,0,[Ext.layout,"SizeModel"],function(){var q=this,m=q.sizeModelsArray,s,j,o,p,r;new q({name:"calculated"});new q({name:"configured",names:{width:"width",height:"height"}});new q({name:"natural"});new q({name:"shrinkWrap"});new q({name:"calculatedFromConfigured",configured:true,calculatedFrom:true,names:{width:"width",height:"height"}});new q({name:"calculatedFromNatural",natural:true,calculatedFrom:true});new q({name:"calculatedFromShrinkWrap",shrinkWrap:true,calculatedFrom:true});new q({name:"constrainedMax",configured:true,constrained:true,names:{width:"maxWidth",height:"maxHeight"}});new q({name:"constrainedMin",configured:true,constrained:true,names:{width:"minWidth",height:"minHeight"}});new q({name:"constrainedDock",configured:true,constrained:true,constrainedByMin:true,names:{width:"dockConstrainedWidth",height:"dockConstrainedHeight"}});for(s=0,o=m.length;s<o;++s){r=m[s];r.pairsByHeightOrdinal=p=[];for(j=0;j<o;++j){p.push({width:r,height:m[j]})}}}));(Ext.cmd.derive("Ext.layout.Layout",Ext.Base,{factoryConfig:{type:"layout"},isLayout:true,initialized:false,running:false,needsItemSize:true,setsItemSize:true,autoSizePolicy:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},$configPrefixed:false,$configStrict:false,constructor:function(d){var c=this;c.id=Ext.id(null,c.type+"-");c.initConfig(d);delete c.type;c.layoutCount=0},beginLayout:Ext.emptyFn,beginLayoutCycle:function(j){var f=this,g=f.context,h;if(f.lastWidthModel!==j.widthModel){if(f.lastWidthModel){h=true}f.lastWidthModel=j.widthModel}if(f.lastHeightModel!==j.heightModel){if(f.lastWidthModel){h=true}f.lastHeightModel=j.heightModel}if(h){(g=j.context).clearTriggers(f,false);g.clearTriggers(f,true);f.triggerCount=0}},finishedLayout:function(b){this.lastWidthModel=b.widthModel;this.lastHeightModel=b.heightModel;this.ownerContext=null},redoLayout:Ext.emptyFn,undoLayout:Ext.emptyFn,getAnimatePolicy:function(){return this.animatePolicy},getItemSizePolicy:function(b){return this.autoSizePolicy},getScrollerEl:Ext.emptyFn,isItemBoxParent:function(b){return false},isItemLayoutRoot:function(h){var j=h.getSizeModel(),f=j.width,g=j.height;if(!h.componentLayout.lastComponentSize&&(f.calculated||g.calculated)){return false}return !f.shrinkWrap&&!g.shrinkWrap},isItemShrinkWrap:function(b){return b.shrinkWrap},isRunning:function(){return !!this.ownerContext},getItemsRenderTree:function(r,j){var o=r.length,q,p,s,m;if(o){m=[];for(q=0;q<o;++q){p=r[q];if(!p.rendered){if(j&&(j[p.id]!==undefined)){s=j[p.id]}else{this.configureItem(p);s=p.getRenderTree();if(j){j[p.id]=s}}if(s){m.push(s)}}}}return m},finishRender:Ext.emptyFn,finishRenderItems:function(j,h){var m=h.length,g,o;for(g=0;g<m;g++){o=h[g];if(o.rendering){o.finishRender(g)}}},renderChildren:function(){var d=this,f=d.getLayoutItems(),g=d.getRenderTarget();d.renderItems(f,g)},renderItems:function(j,m){var o=this,p=j.length,h=0,q;if(p){Ext.suspendLayouts();for(;h<p;h++){q=j[h];if(q&&!q.rendered){o.renderItem(q,m,h)}else{if(!o.isValidParent(q,m,h)){o.moveItem(q,m,h)}else{o.configureItem(q)}}}Ext.resumeLayouts(true)}},isValidParent:function(m,j,h){var o=(j&&j.dom)||j,g=this.getItemLayoutEl(m);if(g&&o){if(typeof h==="number"){h=this.getPositionOffset(h);return g===o.childNodes[h]}return g.parentNode===o}return false},getItemLayoutEl:function(j){var h=j.el?j.el.dom:Ext.getDom(j),g=h.parentNode,f;if(g){f=g.className;if(f&&f.indexOf("x-resizable-wrap")!==-1){h=h.parentNode}}return h},getPositionOffset:function(b){return b},configureItem:function(b){b.ownerLayout=this},renderItem:function(j,h,g){var f=this;if(!j.rendered){f.configureItem(j);j.render(h,g)}},moveItem:function(d,g,f){g=g.dom||g;if(typeof f==="number"){f=g.childNodes[f]}g.insertBefore(d.el.dom,f||null);d.container=Ext.get(g);this.configureItem(d)},onContentChange:function(){this.owner.updateLayout();return true},initLayout:function(){this.initialized=true},setOwner:function(b){this.owner=b},getLayoutItems:function(){return[]},onAdd:function(b){b.ownerLayout=this},onRemove:Ext.emptyFn,onDestroy:Ext.emptyFn,afterRemove:function(j){var m=this,o=j.el,g=m.owner,h;if(j.rendered){h=[].concat(m.itemCls||[]);if(g.itemCls){h=Ext.Array.push(h,g.itemCls)}if(h.length){o.removeCls(h)}}delete j.ownerLayout},afterCollapse:function(d,c){if(c){this.onContentChange(d)}},afterExpand:function(d,c){if(c){this.onContentChange(d)}},destroy:function(){var d=this,c;if(d.targetCls){c=d.getTarget();if(c){c.removeCls(d.targetCls)}}d.onDestroy();d.callParent()},sortWeightedItems:function(g,h){for(var f=0,j=g.length;f<j;++f){g[f].$i=f}Ext.Array.sort(g,function(b,c){var a=c.weight-b.weight;if(!a){a=b.$i-c.$i;if(b[h]){a=-a}}return a});for(f=0;f<j;++f){delete g[f].$i}}},1,0,0,0,0,[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.layout,"Layout"],function(){var b=this;b.prototype.sizeModels=b.sizeModels=Ext.layout.SizeModel.sizeModels}));(Ext.cmd.derive("Ext.layout.container.Container",Ext.layout.Layout,{alternateClassName:"Ext.layout.ContainerLayout",type:"container",beginCollapse:Ext.emptyFn,beginExpand:Ext.emptyFn,animatePolicy:null,activeItemCount:0,renderTpl:["{%this.renderBody(out,values)%}"],usesContainerHeight:true,usesContainerWidth:true,usesHeight:true,usesWidth:true,constructor:function(){Ext.layout.Layout.prototype.constructor.apply(this,arguments);this.mixins.elementCt.constructor.call(this)},destroy:function(){Ext.layout.Layout.prototype.destroy.call(this);this.mixins.elementCt.destroy.call(this)},beginLayout:function(b){Ext.layout.Layout.prototype.beginLayout.apply(this,arguments);b.targetContext=b.paddingContext=b.getEl("getTarget",this);this.cacheChildItems(b)},beginLayoutCycle:function(g,f){var d=this;Ext.layout.Layout.prototype.beginLayoutCycle.apply(this,arguments);if(f){if(d.usesContainerHeight){++g.consumersContainerHeight}if(d.usesContainerWidth){++g.consumersContainerWidth}}},cacheChildItems:function(p){var q=this,s,o,m,r,j;if(q.needsItemSize||q.setsItemSize){s=p.context;o=p.childItems=[];m=p.visibleItems=q.getVisibleItems();r=m.length;for(j=0;j<r;++j){o.push(s.getCmp(m[j]))}}},cacheElements:function(){var b=this.owner;this.attachChildEls(b.el,b)},calculate:function(g){var d=g.props,f=g.el;if(g.widthModel.shrinkWrap&&isNaN(d.width)){g.setContentWidth(f.getWidth())}if(g.heightModel.shrinkWrap&&isNaN(d.height)){g.setContentHeight(f.getHeight())}},configureItem:function(p){var q=this,o=q.itemCls,h=q.owner.itemCls,j,m;p.ownerLayout=q;if(o){if(typeof o==="string"){m=[o]}else{m=o;j=!!m}}if(h){if(j){m=Ext.Array.clone(m)}m=Ext.Array.push(m||[],h)}if(m){p.addCls(m)}},doRenderBody:function(d,c){this.renderItems(d,c);this.renderContent(d,c)},doRenderContainer:function(g,j){var o=j.$comp.layout,h=o.getRenderTpl(),m=o.getRenderData();h.applyOut(m,g)},doRenderItems:function(f,h){var j=h.$layout,g=j.getRenderTree();if(g){Ext.DomHelper.generateMarkup(g,f)}},finishRender:function(){var d=this,g,f;Ext.layout.Layout.prototype.finishRender.call(this);d.cacheElements();g=d.getRenderTarget();f=d.getLayoutItems();d.finishRenderItems(g,f)},notifyOwner:function(){this.owner.afterLayout(this)},getContainerSize:function(A,v){var z=A.targetContext,w=z.getFrameInfo(),s=A.paddingContext.getPaddingInfo(),t=0,r=0,y,u,B,q;if(!A.widthModel.shrinkWrap){++r;B=v?z.getDomProp("width"):z.getProp("width");y=(typeof B==="number");if(y){++t;B-=w.width+s.width;if(B<0){B=0}}}if(!A.heightModel.shrinkWrap){++r;q=v?z.getDomProp("height"):z.getProp("height");u=(typeof q==="number");if(u){++t;q-=w.height+s.height;if(q<0){q=0}}}return{width:B,height:q,needed:r,got:t,gotAll:t===r,gotWidth:y,gotHeight:u}},getPositionOffset:function(d){if(!this.createsInnerCt){var c=this.owner.itemNodeOffset;if(c){d+=c}}return d},getLayoutItems:function(){var d=this.owner,c=d&&d.items;return(c&&c.items)||[]},getRenderData:function(){var b=this.owner;return{$comp:b,$layout:this,ownerId:b.id}},getRenderedItems:function(){var q=this,o=q.getRenderTarget(),m=q.getLayoutItems(),r=m.length,p=[],j,s;for(j=0;j<r;j++){s=m[j];if(s.rendered&&q.isValidParent(s,o,j)){p.push(s)}}return p},getRenderTarget:function(){return this.owner.getTargetEl()},getElementTarget:function(){return this.getRenderTarget()},getRenderTpl:function(){var d=this,c=Ext.XTemplate.getTpl(this,"renderTpl");if(!c.renderContent){d.owner.setupRenderTpl(c)}return c},getRenderTree:function(){var g,j=this.owner.items,h,f={};do{h=j.generation;g=this.getItemsRenderTree(this.getLayoutItems(),f)}while(j.generation!==h);return g},renderChildren:function(){var g=this,o=g.owner.items,j=g.getRenderTarget(),m,h;do{m=o.generation;h=g.getLayoutItems();g.renderItems(h,j)}while(o.generation!==m)},getScrollbarsNeeded:function(u,p,v,q){var w=Ext.getScrollbarSize(),s=typeof u==="number",o=typeof p==="number",r=0,t=0;if(!w.width){return 0}if(o&&p<q){t=2;u-=w.width}if(s&&u<v){r=1;if(!t&&o){p-=w.height;if(p<q){t=2}}}return t+r},getTarget:function(){return this.owner.getTargetEl()},getVisibleItems:function(){var m=this.getRenderTarget(),h=this.getLayoutItems(),o=h.length,j=[],q,p;for(q=0;q<o;q++){p=h[q];if(p.rendered&&this.isValidParent(p,m,q)&&p.hidden!==true&&!p.floated){j.push(p)}}return j},getMoveAfterIndex:function(b){return this.owner.items.indexOf(b)+1},moveItemBefore:function(p,o){var j=this.owner,h=j.items,q=h.indexOf(p),m;if(p===o){return p}if(o){m=h.indexOf(o);if(q>-1&&q<m){--m}}else{m=h.length}return j.insert(m,p)},setupRenderTpl:function(b){b.renderBody=this.doRenderBody;b.renderContainer=this.doRenderContainer;b.renderItems=this.doRenderItems},getContentTarget:function(){return this.owner.getDefaultContentTarget()},onAdd:function(b){if(!b.liquidLayout){++this.activeItemCount}Ext.layout.Layout.prototype.onAdd.call(this,b)},onRemove:function(c,d){if(!c.liquidLayout){--this.activeItemCount}Ext.layout.Layout.prototype.onRemove.call(this,c,d)}},1,0,0,0,["layout.container"],[[Ext.util.ElementContainer.prototype.mixinId||Ext.util.ElementContainer.$className,Ext.util.ElementContainer]],[Ext.layout.container,"Container",Ext.layout,"ContainerLayout"],0));(Ext.cmd.derive("Ext.layout.container.Auto",Ext.layout.container.Container,{type:"autocontainer",childEls:["outerCt","innerCt"],reserveScrollbar:false,managePadding:true,manageOverflow:false,needsItemSize:false,setsItemSize:false,lastOverflowAdjust:{width:0,height:0},outerCtCls:"x-autocontainer-outerCt",innerCtCls:"x-autocontainer-innerCt",renderTpl:['<div id="{ownerId}-outerCt" data-ref="outerCt" class="{outerCtCls}" role="presentation">','<div id="{ownerId}-innerCt" data-ref="innerCt" style="{%this.renderPadding(out, values)%}" ','<tpl if="!$comp.html">role="presentation"</tpl>','class="{innerCtCls}">',"{%this.renderBody(out,values)%}","</div>","</div>"],beginLayout:function(b){Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments);this.initContextItems(b)},beforeLayoutCycle:function(h){var f=this.owner,j=f.inheritedState,g=f.inheritedStateInner;if(!j||j.invalid){j=f.getInherited();g=f.inheritedStateInner}if(h.widthModel.shrinkWrap){g.inShrinkWrapTable=true}else{delete g.inShrinkWrapTable}},beginLayoutCycle:function(A){var u=this,C=u.outerCt,w=u.lastOuterCtWidth||"",y=u.lastOuterCtHeight||"",t=u.lastOuterCtTableLayout||"",D=A.state,s,z,r,B,v;Ext.layout.container.Container.prototype.beginLayoutCycle.apply(this,arguments);z=r=B="";if(!A.widthModel.shrinkWrap){z="100%";v=u.owner.inheritedStateInner;s=u.getOverflowXStyle(A);B=(v.inShrinkWrapTable||s==="auto"||s==="scroll")?"":"fixed"}if(!A.heightModel.shrinkWrap&&!Ext.supports.PercentageHeightOverflowBug){r="100%"}if((z!==w)||u.hasOuterCtPxWidth){C.setStyle("width",z);u.lastOuterCtWidth=z;u.hasOuterCtPxWidth=false}if(B!==t){C.setStyle("table-layout",B);u.lastOuterCtTableLayout=B}if((r!==y)||u.hasOuterCtPxHeight){C.setStyle("height",r);u.lastOuterCtHeight=r;u.hasOuterCtPxHeight=false}if(u.hasInnerCtPxHeight){u.innerCt.setStyle("height","");u.hasInnerCtPxHeight=false}D.overflowAdjust=D.overflowAdjust||u.lastOverflowAdjust},calculate:function(o){var h=this,g=o.state,j=h.getContainerSize(o,true),m=g.calculatedItems||(g.calculatedItems=h.calculateItems?h.calculateItems(o,j):true);h.setCtSizeIfNeeded(o,j);if(m&&o.hasDomProp("containerChildrenSizeDone")){h.calculateContentSize(o);if(j.gotAll){if(h.manageOverflow&&!o.state.secondPass&&!h.reserveScrollbar){h.calculateOverflow(o,j)}return}}h.done=false},calculateContentSize:function(p){var q=this,m=((p.widthModel.shrinkWrap?1:0)|(p.heightModel.shrinkWrap?2:0)),s=(m&1)||undefined,o=(m&2)||undefined,r=0,j=p.props;if(s){if(isNaN(j.contentWidth)){++r}else{s=undefined}}if(o){if(isNaN(j.contentHeight)){++r}else{o=undefined}}if(r){if(s&&!p.setContentWidth(q.measureContentWidth(p))){q.done=false}if(o&&!p.setContentHeight(q.measureContentHeight(p))){q.done=false}}},calculateOverflow:function(u){var q=this,v,o,w,r,s,t,p;s=(q.getOverflowXStyle(u)==="auto");t=(q.getOverflowYStyle(u)==="auto");if(s||t){w=Ext.getScrollbarSize();p=u.overflowContext.el.dom;r=0;if(p.scrollWidth>p.clientWidth){r|=1}if(p.scrollHeight>p.clientHeight){r|=2}v=(t&&(r&2))?w.width:0;o=(s&&(r&1))?w.height:0;if(v!==q.lastOverflowAdjust.width||o!==q.lastOverflowAdjust.height){q.done=false;u.invalidate({state:{overflowAdjust:{width:v,height:o},overflowState:r,secondPass:true}})}}},completeLayout:function(b){this.lastOverflowAdjust=b.state.overflowAdjust},doRenderBody:function(q,o){var p=o.$layout,j=Ext.XTemplate,m=p.beforeBodyTpl,h=p.afterBodyTpl;if(m){j.getTpl(p,"beforeBodyTpl").applyOut(o,q)}this.renderItems(q,o);this.renderContent(q,o);if(h){j.getTpl(p,"afterBodyTpl").applyOut(o,q)}},doRenderPadding:function(g,m){var o=m.$layout,h=m.$layout.owner,j=h[h.contentPaddingProperty];if(o.managePadding&&j){g.push("padding:",h.unitizeBox(j))}},finishedLayout:function(c){var d=this.innerCt;Ext.layout.container.Container.prototype.finishedLayout.apply(this,arguments);if(Ext.isIE8){d.repaint()}if(Ext.isOpera){d.setStyle("position","relative");d.dom.scrollWidth;d.setStyle("position","")}},getContainerSize:function(f,j){var g=Ext.layout.container.Container.prototype.getContainerSize.apply(this,arguments),h=f.state.overflowAdjust;if(h){g.width-=h.width;g.height-=h.height}return g},getRenderData:function(){var d=this,c=Ext.layout.container.Container.prototype.getRenderData.call(this);c.innerCtCls=d.innerCtCls;c.outerCtCls=d.outerCtCls;return c},getRenderTarget:function(){return this.innerCt},getElementTarget:function(){return this.innerCt},getOverflowXStyle:function(b){return b.overflowXStyle||(b.overflowXStyle=this.owner.scrollFlags.overflowX||b.overflowContext.getStyle("overflow-x"))},getOverflowYStyle:function(b){return b.overflowYStyle||(b.overflowYStyle=this.owner.scrollFlags.overflowY||b.overflowContext.getStyle("overflow-y"))},initContextItems:function(f){var g=this,h=f.target,j=g.owner.getOverflowEl();f.outerCtContext=f.getEl("outerCt",g);f.innerCtContext=f.getEl("innerCt",g);f.overflowContext=(j===f.el)?f:f.getEl(j);if(h[h.contentPaddingProperty]!==undefined){f.paddingContext=f.innerCtContext}},initLayout:function(){var g=this,d=Ext.getScrollbarSize().width,f=g.owner;Ext.layout.container.Container.prototype.initLayout.call(this);if(d&&g.manageOverflow&&!g.hasOwnProperty("lastOverflowAdjust")){if(f.scrollable||g.reserveScrollbar){g.lastOverflowAdjust={width:d,height:0}}}},measureContentHeight:function(d){var f=this.outerCt.getHeight(),g=d.target;if(this.managePadding&&(g[g.contentPaddingProperty]===undefined)){f+=d.targetContext.getPaddingInfo().height}return f},measureContentWidth:function(p){var m,q,h,j,o;if(this.chromeCellMeasureBug){m=this.innerCt.dom;q=m.style;h=q.display;if(h==="table-cell"){q.display="";m.offsetWidth;q.display=h}}if(Ext.isSafari){m=this.outerCt.dom;q=m.style;q.display="table-cell";m.offsetWidth;m.style.display=""}j=this.outerCt.getWidth();o=p.target;if(this.managePadding&&(o[o.contentPaddingProperty]===undefined)){j+=p.targetContext.getPaddingInfo().width}return j},setCtSizeIfNeeded:function(y,A){var w=this,q=A.height,u=y.paddingContext.getPaddingInfo(),s=w.getTarget(),r=w.getOverflowXStyle(y),z=(r==="auto"||r==="scroll"),B=Ext.getScrollbarSize(),v,t;if(q&&!y.heightModel.shrinkWrap){if(Ext.supports.PercentageHeightOverflowBug){v=true}if(Ext.isIE8){t=true}if((v||t)&&z&&(s.dom.scrollWidth>s.dom.clientWidth)){q=Math.max(q-B.height,0)}if(v){y.outerCtContext.setProp("height",q+u.height);w.hasOuterCtPxHeight=true}if(t){y.innerCtContext.setProp("height",q);w.hasInnerCtPxHeight=true}}},setupRenderTpl:function(b){Ext.layout.container.Container.prototype.setupRenderTpl.apply(this,arguments);b.renderPadding=this.doRenderPadding},getContentTarget:function(){return this.innerCt},getScrollerEl:function(){return this.outerCt}},0,0,0,0,["layout.auto","layout.autocontainer"],0,[Ext.layout.container,"Auto"],function(){this.prototype.chromeCellMeasureBug=Ext.isChrome&&Ext.chromeVersion>=26}));(Ext.cmd.derive("Ext.ZIndexManager",Ext.Base,{alternateClassName:"Ext.WindowGroup",statics:{zBase:9000,activeCounter:0},constructor:function(d){var c=this;c.id=Ext.id(null,"zindex-mgr-");c.zIndexStack=new Ext.util.Collection({sorters:{sorterFn:function(a,b){var g=(a.alwaysOnTop||0)-(b.alwaysOnTop||0);if(!g){g=a.getActiveCounter()-b.getActiveCounter()}return g}},filters:{filterFn:function(a){return a.isVisible()}}});c.zIndexStack.addObserver(c);c.front=null;c.globalListeners=Ext.GlobalEvents.on({beforehide:c.onComponentShowHide,show:c.onComponentShowHide,scope:c,destroyable:true});if(d){if(d.isContainer){d.on("resize",c.onContainerResize,c);c.zseed=Ext.Number.from(c.rendered?d.getEl().getStyle("zIndex"):undefined,c.getNextZSeed());c.targetEl=d.getTargetEl();c.container=d}else{Ext.on("resize",c.onContainerResize,c);c.zseed=c.getNextZSeed();c.targetEl=Ext.get(d)}}else{c.zseed=c.getNextZSeed();Ext.onInternalReady(function(){Ext.on("resize",c.onContainerResize,c);c.targetEl=Ext.getBody()})}},getId:function(){return this.id},getNextZSeed:function(){return(Ext.ZIndexManager.zBase+=10000)},setBase:function(b){this.zseed=b;return this.onCollectionSort()},onCollectionSort:function(){var t=this,y=t.front,u=y&&y.containsFocus,s=t.zseed,r=t.zIndexStack.getRange(),v=r.length,z,w,A,B,a=false;for(z=0;z<v;z++){w=r[z];s=w.setZIndex(s);if(!w.hidden){B=w;if(w.modal){A=w}}}if(B!==y){if(y&&!y.destroying){y.setActive(false)}if(B){a=B.isFocusable(true)&&(B.modal||(B.focusOnToFront&&!B.preventFocusOnActivate));B.setActive(true,a)}}t.front=B;if(A){t.showModalMask(A)}else{t.hideModalMask()}return s},onComponentUpdate:function(b){if(this.zIndexStack.contains(b)){this.zIndexStack.sort()}},onComponentRender:function(b){this.zIndexStack.itemChanged(b,"hidden")},onComponentShowHide:function(d){var c=this.zIndexStack;if(d.isFloating()&&!this.hidingAll&&(c.getSource()||c).contains(d)){c.itemChanged(d,"hidden");c.sort()}},register:function(d){var c=this;if(d.zIndexManager){d.zIndexManager.unregister(d)}d.zIndexManager=c;if(!d.rendered){d.on("render",c.onComponentRender,c,{single:true})}c.zIndexStack.add(d)},unregister:function(d){var c=this;delete d.zIndexManager;d.un("render",c.onComponentRender,c);c.zIndexStack.remove(d);c.onCollectionSort()},get:function(b){return b.isComponent?b:this.zIndexStack.get(b)},bringToFront:function(j,q){var s=this,o=s.zIndexStack,m=o.last(),r,p;j=s.get(j);if(!j||o.find("alwaysOnTop",true)){return false}p=j.preventFocusOnActivate;j.preventFocusOnActivate=q;j.setActiveCounter(++Ext.ZIndexManager.activeCounter);j.preventFocusOnActivate=p;r=o.last();return(r===j&&r!==m)},sendToBack:function(b){b=this.get(b);if(b){b.setActiveCounter(0)}return b||null},hideAll:function(){var g=this.zIndexStack.getRange(),f=g.length,d;this.hidingAll=true;for(d=0;d<f;d++){g[d].hide()}this.hidingAll=false},hide:function(){var m=this,o=Ext.Element.getActiveElement(),p=m.tempHidden=m.zIndexStack.getRange(),j=p.length,q,h;m.focusRestoreElement=null;for(q=0;q<j;q++){h=p[q];if(h.el.contains(o)){m.focusRestoreElement=o}h.el.hide();h.hidden=true}},show:function(){var m=this,o,j=m.tempHidden,h=j?j.length:0,g;for(o=0;o<h;o++){g=j[o];g.el.show();g.hidden=false;g.setPosition(g.x,g.y)}m.tempHidden=null;if(m.focusRestoreElement){m.focusRestoreElement.focus()}},getActive:function(){return this.zIndexStack.last()},getBy:function(c,d){return this.zIndexStack.filterBy(c,d).getRange()},each:function(c,d){this.zIndexStack.each(c,d)},eachBottomUp:function(m,o){var h=this.zIndexStack.getRange(),p,j=h.length,q;for(p=0;p<j;p++){q=h[p];if(q.isComponent&&m.call(o||q,q)===false){return}}},eachTopDown:function(j,m){var h=this.zIndexStack.getRange(),o,g;for(o=h.length;o-->0;){g=h[o];if(g.isComponent&&j.call(m||g,g)===false){return}}},destroy:function(){var h=this,f=h.zIndexStack.getRange(),g=f.length,j;for(j=0;j<g;j++){Ext.destroy(f[j])}if(h.container){h.container.un("resize",h.onContainerResize,h)}else{if(h.targetEl){Ext.un("resize",h.onContainerResize,h)}}Ext.destroy(h.mask,h.maskShim,h.zIndexStack,h.globalListeners);h.zIndexStack=h.container=h.targetEl=h.globalListeners=null;h.callParent()},privates:{getMaskBox:function(){var b=this.mask.maskTarget;if(b.dom===document.body){return{height:Math.max(document.body.scrollHeight,Ext.dom.Element.getDocumentHeight()),width:Math.max(document.body.scrollWidth,document.documentElement.clientWidth),x:0,y:0}}else{return b.getBox()}},onContainerResize:function(){var j=this,f=j.mask,g=j.maskShim,h;if(f&&f.isVisible()){f.hide();if(g){g.hide()}h=j.getMaskBox();if(g){g.setSize(h);g.show()}f.setSize(h);f.show()}},onMaskClick:function(){if(this.front){this.front.focus()}},showModalMask:function(m){var t=this,p=m.el,q=p.getStyle("zIndex")-4,u=m.floatParent?m.floatParent.getTargetEl():m.container,o=t.mask,r=t.maskShim,s;if(!o){t.mask=o=Ext.getBody().createChild({role:"presentation",cls:"x-mask x-border-box",style:"height:0;width:0"});o.setVisibilityMode(Ext.Element.DISPLAY);o.on("click",t.onMaskClick,t)}else{t.hideModalMask()}o.maskTarget=u;s=t.getMaskBox();if(r){r.setStyle("zIndex",q);r.show();r.setBox(s)}o.setStyle("zIndex",q);u.saveTabbableState({excludeRoot:p});o.show();o.setBox(s)},hideModalMask:function(){var c=this.mask,d=this.maskShim;if(c&&c.isVisible()){c.maskTarget.restoreTabbableState();c.maskTarget=undefined;c.hide();if(d){d.hide()}}}}},1,0,0,0,0,0,[Ext,"ZIndexManager",Ext,"WindowGroup"],function(){Ext.WindowManager=Ext.WindowMgr=new this()}));(Ext.cmd.derive("Ext.container.Container",Ext.Component,{alternateClassName:["Ext.Container","Ext.AbstractContainer"],renderTpl:"{%this.renderContainer(out,values)%}",autoDestroy:true,defaultType:"panel",detachOnRemove:true,items:undefined,layout:"auto",suspendLayout:false,_applyDefaultsOptions:{defaults:true,strict:false},ariaRole:"presentation",baseCls:"x-container",layoutCounter:0,add:function(){var v=this,z=Ext.Array.slice(arguments),B=(typeof z[0]==="number")?z.shift():-1,D=v.getLayout(),C=false,t,y,E,F,s,u,A,w;if(z.length===1&&Ext.isArray(z[0])){y=z[0];t=true}else{y=z}if(v.rendered){Ext.suspendLayouts()}A=y=v.prepareItems(y,true);F=y.length;if(!t&&F===1){A=y[0]}for(E=0;E<F;E++){s=y[E];u=(B<0)?v.items.length:(B+E);w=!!s.instancedCmp;delete s.instancedCmp;if(s.floating){(v.floatingItems||(v.floatingItems=new Ext.util.ItemCollection())).add(s);s.onAdded(v,u,w);delete s.$initParent;if(v.hasListeners.add){v.fireEvent("add",v,s,u)}}else{if((!v.hasListeners.beforeadd||v.fireEvent("beforeadd",v,s,u)!==false)&&v.onBeforeAdd(s)!==false){v.items.insert(u,s);s.onAdded(v,u,w);delete s.$initParent;v.onAdd(s,u);D.onAdd(s,u);C=true;if(v.hasListeners.add){v.fireEvent("add",v,s,u)}}}}if(C){v.updateLayout()}if(v.rendered){Ext.resumeLayouts(true)}return A},onAdded:function(d,g,f){Ext.Component.prototype.onAdded.call(this,d,g,f);this.containerOnAdded(d,f)},onRemoved:function(b){this.containerOnRemoved(b);Ext.Component.prototype.onRemoved.apply(this,arguments)},afterComponentLayout:function(){var f=this.floatingItems,g,h,j;Ext.Component.prototype.afterComponentLayout.apply(this,arguments);if(f){f=f.items;g=f.length;for(h=0;h<g;h++){j=f[h];if(!j.rendered&&j.autoShow){j.show()}}}},afterLayout:function(g){var d=this,f=d.getScrollable();++d.layoutCounter;if(f&&d.layoutCounter>1){f.refresh()}if(d.hasListeners.afterlayout){d.fireEvent("afterlayout",d,g)}},beforeDestroy:function(){var c=this,g=c.items,j=c.floatingItems,h;if(g){while((h=g.first())){c.doRemove(h,true)}}if(j){while((h=j.first())){c.doRemove(h,true)}}Ext.destroy(c.layout);Ext.Component.prototype.beforeDestroy.call(this)},destroy:function(){var b=this;Ext.Component.prototype.destroy.call(this);if(b.items){b.items.destroy()}if(b.floatingItems){b.floatingItems.destroy()}b.refs=b.items=b.floatingItems=b.layout=null},beforeRender:function(){var d=this,f=d.getLayout(),g;d.preventChildDisable=true;Ext.Component.prototype.beforeRender.call(this);d.preventChildDisable=false;if(!f.initialized){f.initLayout()}g=f.targetCls;if(g){d.applyTargetCls(g)}},cascade:function(q,c,z){var r=this,v=r.items?r.items.items:[],u=v.length,w=0,s,t=z?z.concat(r):[r],y=t.length-1;if(q.apply(c||r,t)!==false){for(;w<u;w++){s=v[w];if(s.cascade){s.cascade(q,c,z)}else{t[y]=s;q.apply(c||s,t)}}}return this},contains:function(g,d){var f=false;if(d){this.cascade(function(a){if(a.contains&&a.contains(g)){f=true;return false}});return f}else{return this.items.contains(g)||(this.floatingItems&&this.floatingItems.contains(g))}},disable:function(j,o){var q=this,r=q.disabled,p,m,s;Ext.Component.prototype.disable.call(this,j,o);if(!o&&!q.preventChildDisable&&!r){p=q.getChildItemsToDisable();m=p.length;for(s=0;s<m;s++){p[s].disable(j,true)}}return q},enable:function(j,o){var q=this,r=q.disabled,p,m,s;Ext.Component.prototype.enable.call(this,j,o);if(r){p=q.getChildItemsToDisable();m=p.length;for(s=0;s<m;s++){p[s].enable(j,true)}}return q},getChildByElement:function(q,m){var o,s,j=0,r=this.getRefItems(),p=r.length;q=Ext.getDom(q);for(;j<p;j++){o=r[j];s=o.getEl();if(s&&((s.dom===q)||s.contains(q))){return(m&&o.getChildByElement)?o.getChildByElement(q,m):o}}return null},getComponent:function(c){if(Ext.isObject(c)){c=c.getItemId()}var g=this.items.get(c),f=this.floatingItems;if(!g&&f&&typeof c!=="number"){g=f.get(c)}return g},getFocusEl:function(){var b=this.getDefaultFocus();if(b){return b}else{if(this.focusable){return this.getTargetEl()}}return undefined},getLayout:function(){var c=this,d=c.layout;if(!d||!d.isLayout){c.setLayout(d)}return c.layout},getRefItems:function(s){var o=this,r=o.items.items,j=r.length,q=0,p,m=[];for(;q<j;q++){p=r[q];m[m.length]=p;if(s&&p.getRefItems){m.push.apply(m,p.getRefItems(true))}}if(o.floatingItems){r=o.floatingItems.items;j=r.length;for(q=0;q<j;q++){p=r[q];m[m.length]=p;if(s&&p.getRefItems){m.push.apply(m,p.getRefItems(true))}}}return m},getDefaultFocus:function(){var c=this.defaultFocus,d;if(c){d=this.down(c)}return d},initComponent:function(){var b=this;Ext.Component.prototype.initComponent.call(this);b.getLayout();b.constructing=true;b.initItems();if(b.disabled){b.disabled=false;b.disable(true)}delete b.constructing},initItems:function(){var c=this,d=c.items;if(!d||!d.isMixedCollection){c.items=new Ext.util.ItemCollection();if(d){if(!Ext.isArray(d)){d=[d]}c.add(d)}}},initInheritedState:function(p,u){var q=this,t=q.controller,s=q.layout,r=q.session,o=q.viewModel,v=q.reference,w=q.referenceHolder;Ext.Component.prototype.initInheritedState.call(this,p,u);if(q.collapsed){p.collapsed=true}q.initContainerInheritedState(p,u);if(s&&s.initInheritedState){s.initInheritedState(p,u)}},insert:function(g,d){var f;if(d&&d.isComponent){f=this.items.indexOf(d);if(f!==-1){return this.move(f,g)}}return this.add(g,d)},lookupComponent:function(b){if(!b.isComponent){if(typeof b==="string"){b=Ext.ComponentManager.get(b)}else{b=Ext.ComponentManager.create(b,this.defaultType)}}return b},move:function(g,j){var m=this,h=m.items,o;if(g.isComponent){g=h.indexOf(g)}o=h.getAt(g);if(g!==j){o=h.removeAt(g);if(o===false){return false}j=Math.min(j,h.getCount());h.insert(j,o);m.onMove(o,g,j);if(m.hasListeners.childmove){m.fireEvent("childmove",m,o,g,j)}m.updateLayout()}return o},moveBefore:function(d,c){if(d!==c){d=this.layout.moveItemBefore(d,c)}return d},moveAfter:function(j,h){var f=this.layout,g;if(j!==h){g=h?f.getMoveAfterIndex(h):0;j=f.moveItemBefore(j,this.items.getAt(g))}return j},nextChild:function(p,u){var r=this,t=r.items,q=t.indexOf(p),s=0,m=t.length,o;if(q!==-1){if(u){for(;s<m;s++){o=t.getAt(q+s);if(!o||Ext.ComponentQuery.is(o,u)){break}}}else{o=t.getAt(q+1)}}return o||null},onAdd:Ext.emptyFn,onBeforeAdd:function(c){var d=c.ownerCt;if(d&&d!==this){d.remove(c,false)}},onMove:Ext.emptyFn,onRemove:Ext.emptyFn,onPosition:function(){Ext.Component.prototype.onPosition.apply(this,arguments);this.repositionFloatingItems()},onResize:function(){Ext.Component.prototype.onResize.apply(this,arguments);this.repositionFloatingItems()},prevChild:function(p,u){var r=this,t=r.items,q=t.indexOf(p),s=0,m=t.length,o;if(q!==-1){if(u){for(;s<m;s++){o=t.getAt(q-s);if(!o||Ext.ComponentQuery.is(o,u)){break}}}else{o=t.getAt(q-1)}}return o||null},remove:function(c,g){var j=this,h;if(j.destroyed||j.destroying){return}h=j.getComponent(c);if(h&&(!j.hasListeners.beforeremove||j.fireEvent("beforeremove",j,h)!==false)){j.doRemove(h,g);if(j.hasListeners.remove){j.fireEvent("remove",j,h)}if(!j.destroying&&!h.floating){j.updateLayout()}}return h},removeAll:function(t){var p=this,r,m=p.floatingItems,u=[],s=0,o,q;if(m){r=p.items.items.concat(m.items)}else{r=p.items.items.slice()}o=r.length;Ext.suspendLayouts();p.removingAll=true;for(;s<o;s++){q=r[s];p.remove(q,t);if(q.ownerCt!==p){u.push(q)}}p.removingAll=false;Ext.resumeLayouts(!!o);return u},setLayout:function(o){var p=this,h=p.layout,m=h&&h.isLayout,j,q;if(typeof o==="string"){o={type:o}}q=o.type;if(m&&(!q||(q===h.type))){delete o.type;h.setConfig(o)}else{if(m){h.setOwner(null)}j=p.self.prototype.layout;if(typeof j==="string"){o.type=q||j}else{Ext.merge(Ext.merge({},j),o)}o=this.layout=Ext.Factory.layout(o);o.setOwner(this)}if(p.rendered){p.updateLayout()}},setActiveItem:function(b){return this.getLayout().setActiveItem(b)},privates:{applyDefaults:function(f){var d=this,g=d.defaults;if(g){if(Ext.isFunction(g)){g=g.call(d,f)}if(Ext.isString(f)){f=Ext.ComponentManager.get(f)}if(f.isComponent){f.setConfig(g,null,d._applyDefaultsOptions)}else{f=d.getConfigurator().merge(d,Ext.Object.fork(g),f)}}return f},applyReference:function(b){return this.setupReference(b)},applyTargetCls:function(b){this.layoutTargetCls=b},detachComponent:function(b){Ext.getDetachedBody().appendChild(b.getEl())},doRemove:function(s,j){j=j===true||(j!==false&&this.autoDestroy);var p=this,q=p.layout,m=q&&p.rendered,r=s.destroying||j,o=s.floating;if(o){p.floatingItems.remove(s)}else{p.items.remove(s)}if(m&&!o){if(q.running){Ext.Component.cancelLayout(s,r)}q.onRemove(s,r)}s.onRemoved(r);p.onRemove(s,r);if(j){s.destroy()}else{if(m&&!o){q.afterRemove(s)}if(p.detachOnRemove&&s.rendered){p.detachComponent(s)}}},finishRenderChildren:function(){Ext.Component.prototype.finishRenderChildren.call(this);var b=this.getLayout();if(b){b.finishRender()}},getChildItemsToDisable:function(){return this.query("[isFormField],[isFocusableContainer],button")},getContentTarget:function(){return this.getLayout().getContentTarget()},getDefaultContentTarget:function(){return this.el},getScrollerEl:function(){return this.layout.getScrollerEl()||Ext.Component.prototype.getScrollerEl.call(this)},prepareItems:function(h,p){if(Ext.isArray(h)){h=h.slice()}else{h=[h]}var m=this,q=0,j=h.length,o;for(;q<j;q++){o=h[q];if(o==null){Ext.Array.erase(h,q,1);--q;--j}else{if(p){o=this.applyDefaults(o)}o.$initParent=m;if(o.isComponent){o.instancedCmp=true}h[q]=m.lookupComponent(o);delete o.$initParent}}return h},repositionFloatingItems:function(){var f=this.floatingItems,g,h,j;if(f){f=f.items;g=f.length;for(h=0;h<g;h++){j=f[h];if(j.el&&!j.hidden){j.setPosition(j.x,j.y)}}}},_noMargin:{"margin-top":"","margin-right":"","margin-bottom":"","margin-left":""},resetItemMargins:function(){var g=this.items.items,j=g.length,f=this._noMargin,h;while(j--){h=g[j];h.margin$=null;h.el.setStyle(f)}},setupRenderTpl:function(b){Ext.Component.prototype.setupRenderTpl.apply(this,arguments);this.getLayout().setupRenderTpl(b)}}},0,["container"],["component","box","container"],{component:true,box:true,container:true},["widget.container"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable],[Ext.mixin.Container.prototype.mixinId||Ext.mixin.Container.$className,Ext.mixin.Container]],[Ext.container,"Container",Ext,"Container",Ext,"AbstractContainer"],0));(Ext.cmd.derive("Ext.util.StoreHolder",Ext.Base,{mixinId:"storeholder",bindStore:function(g,o,h){h=h||"store";var m=this,j=o?null:m[h];if(g!==j){if(j){m.onUnbindStore(j,o,h);if(m.isComponent&&h==="store"&&j.autoDestroy){j.destroy()}else{m.unbindStoreListeners(j)}}if(g){m[h]=g=Ext.data.StoreManager.lookup(g);m.bindStoreListeners(g);m.onBindStore(g,j)}else{m[h]=null}}return m},getStore:function(){return this.store},setStore:function(b){this.bindStore(b)},unbindStoreListeners:function(d){var c=this.storeListeners;if(c){d.un(c)}},bindStoreListeners:function(d){var c=this.getStoreListeners(d);if(c){c=Ext.apply({},c);if(!c.scope){c.scope=this}this.storeListeners=c;d.on(c)}},getStoreListeners:Ext.emptyFn,onUnbindStore:Ext.emptyFn,onBindStore:Ext.emptyFn},0,0,0,0,0,0,[Ext.util,"StoreHolder"],0));(Ext.cmd.derive("Ext.LoadMask",Ext.Component,{isLoadMask:true,msg:"Loading...",msgCls:"x-mask-loading",msgWrapCls:"x-mask-msg",useMsg:true,useTargetEl:false,cls:"x-mask",componentCls:"x-border-box",ariaRole:"status",focusable:true,tabIndex:0,autoEl:{tag:"div",role:"status"},childEls:["msgWrapEl","msgEl","msgTextEl"],renderTpl:['<div id="{id}-msgWrapEl" data-ref="msgWrapEl" class="{[values.$comp.msgWrapCls]}">','<div id="{id}-msgEl" data-ref="msgEl" class="{[values.$comp.msgCls]} ',"x-",'mask-msg-inner {childElCls}">','<div id="{id}-msgTextEl" data-ref="msgTextEl" class="',"x-","mask-msg-text",'{childElCls}">{msg}</div>',"</div>","</div>"],maskOnDisable:false,skipLayout:true,constructor:function(d){var g=this,f;if(arguments.length===2){f=g.target=d;d=arguments[1]}else{f=d.target}Ext.Component.prototype.constructor.call(this,d);if(f.isComponent){g.ownerCt=f;g.hidden=true;g.renderTo=g.getMaskTarget();g.external=g.renderTo===Ext.getBody();g.bindComponent(f)}else{f=Ext.get(f);g.isElement=true;g.renderTo=g.target}g.render(g.renderTo);if(g.store){g.bindStore(g.store,true)}},initRenderData:function(){var b=Ext.Component.prototype.initRenderData.apply(this,arguments);b.msg=this.msg||"";return b},onRender:function(){Ext.Component.prototype.onRender.apply(this,arguments);this.maskEl=this.el},bindComponent:function(f){var g=this,d={scope:this,resize:g.sizeMask};if(g.external){d.added=g.onComponentAdded;d.removed=g.onComponentRemoved;if(f.floating){d.move=g.sizeMask;g.activeOwner=f}else{if(f.ownerCt){g.onComponentAdded(f.ownerCt)}}}g.mon(f,d);if(g.external){g.mon(Ext.GlobalEvents,{show:g.onContainerShow,hide:g.onContainerHide,expand:g.onContainerExpand,collapse:g.onContainerCollapse,scope:g})}},onComponentAdded:function(d){var c=this;delete c.activeOwner;c.floatParent=d;if(!d.floating){d=d.up("[floating]")}if(d){c.activeOwner=d;c.mon(d,"move",c.sizeMask,c);c.mon(d,"tofront",c.onOwnerToFront,c)}else{c.preventBringToFront=true}d=c.floatParent.ownerCt;if(c.rendered&&c.isVisible()&&d){c.floatOwner=d;c.mon(d,"afterlayout",c.sizeMask,c,{single:true})}},onComponentRemoved:function(g){var j=this,h=j.activeOwner,f=j.floatOwner;if(h){j.mun(h,"move",j.sizeMask,j);j.mun(h,"tofront",j.onOwnerToFront,j)}if(f){j.mun(f,"afterlayout",j.sizeMask,j)}delete j.activeOwner;delete j.floatOwner},afterRender:function(){var b=this;Ext.Component.prototype.afterRender.apply(this,arguments);if(Ext.isIE){b.el.on("mousedown",b.onMouseDown,b)}this.el.skipGarbageCollection=true},onMouseDown:function(c){var d=this.el;if(c.within(d)){c.preventDefault();d.focus()}},onOwnerToFront:function(d,c){this.el.setStyle("zIndex",c+1)},onContainerShow:function(b){if(!this.isHierarchicallyHidden()){this.onComponentShow()}},onContainerHide:function(b){if(this.isHierarchicallyHidden()){this.onComponentHide()}},onContainerExpand:function(b){if(!this.isHierarchicallyHidden()){this.onComponentShow()}},onContainerCollapse:function(b){if(this.isHierarchicallyHidden()){this.onComponentHide()}},onComponentHide:function(){var b=this;if(b.rendered&&b.isVisible()){b.hide();b.showNext=true}},onComponentShow:function(){if(this.showNext){this.show()}delete this.showNext},sizeMask:function(){var d=this,g=d.activeOwner||d.target,f=d.external?d.getOwner().el:d.getMaskTarget();if(d.rendered&&d.isVisible()){if(d.external){if(!d.isElement&&g.floating){d.onOwnerToFront(g,g.el.getZIndex())}d.el.setSize(f.getSize()).alignTo(f,"tl-tl")}d.msgWrapEl.center(d.el)}},bindStore:function(f,d){var g=this;Ext.destroy(g.proxyListeners);g.mixins.storeholder.bindStore.apply(g,arguments);f=g.store;if(f){while(f.getSource){f=f.getSource()}if(!f.loadsSynchronously()){g.proxyListeners=f.getProxy().on({exception:g.onLoad,scope:g,destroyable:true})}if(f.isLoading()){g.onBeforeLoad()}}},getStoreListeners:function(f){var h=this.onLoad,j=this.onBeforeLoad,g={cachemiss:j,cachefilled:{fn:h,buffer:100}};if(!f.loadsSynchronously()){g.beforeload=j;g.load=h}return g},onDisable:function(){Ext.Component.prototype.onDisable.apply(this,arguments);if(this.loading){this.onLoad()}},getOwner:function(){return this.ownerCt||this.ownerCmp||this.floatParent},getMaskTarget:function(){var b=this.getOwner();if(this.isElement){return this.target}return this.useTargetEl?b.getTargetEl():(b.getMaskTarget()||Ext.getBody())},onBeforeLoad:function(){var g=this,f=g.getOwner(),d;if(!g.disabled){g.loading=true;if(f.componentLayoutCounter){g.maybeShow()}else{d=f.afterComponentLayout;f.afterComponentLayout=function(){f.afterComponentLayout=d;d.apply(f,arguments);g.maybeShow()}}}},maybeShow:function(){var c=this,d=c.getOwner();if(!d.isVisible(true)){c.showNext=true}else{if(c.loading&&d.rendered){c.show()}}},hide:function(){var c=this,d=c.ownerCt;if(c.isElement){d.unmask();c.fireEvent("hide",this);return}if(d){d.enableTabbing();d.setMasked(false)}delete c.showNext;return Ext.Component.prototype.hide.apply(this,arguments)},show:function(){var b=this;if(b.isElement){b.ownerCt.mask(this.useMsg?this.msg:"",this.msgCls);b.fireEvent("show",this);return}return Ext.Component.prototype.show.apply(this,arguments)},afterShow:function(){var c=this,d=c.ownerCt;c.loading=true;Ext.Component.prototype.afterShow.apply(this,arguments);d.disableTabbing();d.setMasked(true);c.el.restoreTabbableState();c.syncMaskState()},syncMaskState:function(){var g=this,d=g.ownerCt,f=g.el;if(g.isVisible()){if(g.hasOwnProperty("msgWrapCls")){f.dom.className=g.msgWrapCls}if(g.useMsg){g.msgTextEl.setHtml(g.msg)}else{g.msgEl.hide()}if(g.shim||Ext.useShims){f.enableShim(null,true)}else{f.disableShim()}if(d.el.contains(Ext.Element.getActiveElement())){g.focus()}g.sizeMask()}},onLoad:function(){this.loading=false;this.hide()},beforeDestroy:function(){this.ownerCt=null;this.bindStore(null);Ext.Component.prototype.beforeDestroy.call(this)},onDestroy:function(){var b=this;if(b.isElement){b.ownerCt.unmask()}Ext.Component.prototype.onDestroy.call(this)}},1,["loadmask"],["component","box","loadmask"],{component:true,box:true,loadmask:true},["widget.loadmask"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext,"LoadMask"],0));(Ext.cmd.derive("Ext.layout.component.Component",Ext.layout.Layout,{type:"component",isComponentLayout:true,nullBox:{},usesContentHeight:true,usesContentWidth:true,usesHeight:true,usesWidth:true,widthCache:{},heightCache:{},beginLayoutCycle:function(F,J){var y=this,G=y.owner,C=F.ownerCtContext,B=F.heightModel,A=F.widthModel,z=G.el.dom===document.body,D=G.lastBox||y.nullBox,v=G.el.lastBox||y.nullBox,I=!z,E=F.isTopLevel,w,L,H,K;Ext.layout.Layout.prototype.beginLayoutCycle.call(this,F,J);if(J){if(y.usesContentWidth){++F.consumersContentWidth}if(y.usesContentHeight){++F.consumersContentHeight}if(y.usesWidth){++F.consumersWidth}if(y.usesHeight){++F.consumersHeight}if(C&&!C.hasRawContent){w=G.ownerLayout;if(w){if(w.usesWidth){++F.consumersWidth}if(w.usesHeight){++F.consumersHeight}}}}if(A.configured){H=G[A.names.width];if(E&&A.calculatedFrom){H=D.width}if(!z){I=y.setWidthInDom||(J?H!==v.width:A.constrained)}F.setWidth(H,I)}else{if(E){if(A.calculated){L=D.width;F.setWidth(L,L!==v.width)}L=D.x;F.setProp("x",L,L!==v.x)}}if(B.configured){K=G[B.names.height];if(E&&B.calculatedFrom){K=D.height}if(!z){I=J?K!==v.height:B.constrained}F.setHeight(K,I)}else{if(E){if(B.calculated){L=D.height;F.setHeight(L,L!==v.height)}L=D.y;F.setProp("y",L,L!==v.y)}}},finishedLayout:function(v){var q=this,o=v.children,w=q.owner,s,u,p,t,r;if(o){s=o.length;for(u=0;u<s;u++){p=o[u];p.el.lastBox=p.props}}v.previousSize=q.lastComponentSize;q.lastComponentSize=w.el.lastBox=r=v.props;t=w.lastBox||(w.lastBox={});t.x=r.x;t.y=r.y;t.width=r.width;t.height=r.height;t.invalid=false;Ext.layout.Layout.prototype.finishedLayout.call(this,v)},notifyOwner:function(j){var f=this,g=f.lastComponentSize,h=j.previousSize;f.owner.afterComponentLayout(g.width,g.height,h?h.width:undefined,h?h.height:undefined)},getTarget:function(){return this.owner.el},getRenderTarget:function(){return this.owner.el},cacheTargetInfo:function(f){var g=this,h=g.targetInfo,j;if(!h){j=f.getEl("getTarget",g);g.targetInfo=h={padding:j.getPaddingInfo(),border:j.getBorderInfo()}}return h},measureAutoDimensions:function(N,S){var D=this,Z=D.owner,G=Z.layout,W=N.heightModel,T=N.widthModel,X=N.boxParent,J=N.isBoxParent,P=N.target,Y=N.props,R,M={gotWidth:false,gotHeight:false,isContainer:(R=!N.hasRawContent)},E=S||3,H,V,Q=0,U=0,O,I,F,L,K;if(T.shrinkWrap&&N.consumersContentWidth){++Q;H=!(E&1);if(R){if(H){M.contentWidth=0;M.gotWidth=true;++U}else{if((M.contentWidth=N.getProp("contentWidth"))!==undefined){M.gotWidth=true;++U}}}else{I=Y.contentWidth;if(typeof I==="number"){M.contentWidth=I;M.gotWidth=true;++U}else{if(H){O=true}else{if(!N.hasDomProp("containerChildrenSizeDone")){O=false}else{if(J||!X||X.widthModel.shrinkWrap){O=true}else{O=X.hasDomProp("width")}}}if(O){if(H){F=0}else{if(G&&G.measureContentWidth){F=G.measureContentWidth(N)}else{if(P.cacheWidth){L=P.xtype+"-"+P.ui;K=D.widthCache;F=K[L]||(K[L]=D.measureContentWidth(N))}else{F=D.measureContentWidth(N)}}}if(!isNaN(M.contentWidth=F)){N.setContentWidth(F,true);M.gotWidth=true;++U}}}}}else{if(T.natural&&N.consumersWidth){++Q;I=Y.width;if(typeof I==="number"){M.width=I;M.gotWidth=true;++U}else{if(J||!X){O=true}else{O=X.hasDomProp("width")}if(O){if(!isNaN(M.width=D.measureOwnerWidth(N))){N.setWidth(M.width,false);M.gotWidth=true;++U}}}}}if(W.shrinkWrap&&N.consumersContentHeight){++Q;V=!(E&2);if(R){if(V){M.contentHeight=0;M.gotHeight=true;++U}else{if((M.contentHeight=N.getProp("contentHeight"))!==undefined){M.gotHeight=true;++U}}}else{I=Y.contentHeight;if(typeof I==="number"){M.contentHeight=I;M.gotHeight=true;++U}else{if(V){O=true}else{if(!N.hasDomProp("containerChildrenSizeDone")){O=false}else{if(Z.noWrap){O=true}else{if(!T.shrinkWrap){O=(N.bodyContext||N).hasDomProp("width")}else{if(J||!X||X.widthModel.shrinkWrap){O=true}else{O=X.hasDomProp("width")}}}}}if(O){if(V){F=0}else{if(G&&G.measureContentHeight){F=G.measureContentHeight(N)}else{if(P.cacheHeight){L=P.xtype+"-"+P.ui;K=D.heightCache;F=K[L]||(K[L]=D.measureContentHeight(N))}else{F=D.measureContentHeight(N)}}}if(!isNaN(M.contentHeight=F)){N.setContentHeight(F,true);M.gotHeight=true;++U}}}}}else{if(W.natural&&N.consumersHeight){++Q;I=Y.height;if(typeof I==="number"){M.height=I;M.gotHeight=true;++U}else{if(J||!X){O=true}else{O=X.hasDomProp("width")}if(O){if(!isNaN(M.height=D.measureOwnerHeight(N))){N.setHeight(M.height,false);M.gotHeight=true;++U}}}}}if(X){N.onBoxMeasured()}M.gotAll=U===Q;return M},measureContentWidth:function(b){return b.el.getWidth()-b.getFrameInfo().width},measureContentHeight:function(b){return b.el.getHeight()-b.getFrameInfo().height},measureOwnerHeight:function(b){return b.el.getHeight()},measureOwnerWidth:function(b){return b.el.getWidth()}},0,0,0,0,0,0,[Ext.layout.component,"Component"],0));(Ext.cmd.derive("Ext.layout.component.Auto",Ext.layout.component.Component,{type:"autocomponent",setHeightInDom:false,setWidthInDom:false,waitForOuterHeightInDom:false,waitForOuterWidthInDom:false,beginLayoutCycle:function(p,j){var q=this,m=q.lastWidthModel,o=q.lastHeightModel,h=q.owner.el;Ext.layout.component.Component.prototype.beginLayoutCycle.apply(this,arguments);if(m&&m.fixed&&p.widthModel.shrinkWrap){h.setWidth(null)}if(o&&o.fixed&&p.heightModel.shrinkWrap){h.setHeight(null)}},calculate:function(o){var p=this,q=p.measureAutoDimensions(o),j=o.heightModel,s=o.widthModel,r,m;if(q.gotWidth){if(s.shrinkWrap){p.publishOwnerWidth(o,q.contentWidth)}else{if(p.publishInnerWidth){p.publishInnerWidth(o,q.width)}}}else{if(!s.auto&&p.publishInnerWidth){r=p.waitForOuterWidthInDom?o.getDomProp("width"):o.getProp("width");if(r===undefined){p.done=false}else{p.publishInnerWidth(o,r)}}}if(q.gotHeight){if(j.shrinkWrap){p.publishOwnerHeight(o,q.contentHeight)}else{if(p.publishInnerHeight){p.publishInnerHeight(o,q.height)}}}else{if(!j.auto&&p.publishInnerHeight){m=p.waitForOuterHeightInDom?o.getDomProp("height"):o.getProp("height");if(m===undefined){p.done=false}else{p.publishInnerHeight(o,m)}}}if(!q.gotAll){p.done=false}},calculateOwnerHeightFromContentHeight:function(c,d){return d+c.getFrameInfo().height},calculateOwnerWidthFromContentWidth:function(c,d){return d+c.getFrameInfo().width},publishOwnerHeight:function(p,r){var s=this,m=s.owner,o=s.calculateOwnerHeightFromContentHeight(p,r),q,t,u;if(isNaN(o)){s.done=false}else{q=Ext.Number.constrain(o,m.minHeight,m.maxHeight);if(q===o){t=s.setHeightInDom}else{u=s.sizeModels[(q<o)?"constrainedMax":"constrainedMin"];o=q;if(p.heightModel.calculatedFromShrinkWrap){p.heightModel=u}else{p.invalidate({heightModel:u})}}p.setHeight(o,t)}},publishOwnerWidth:function(q,m){var r=this,o=r.owner,s=r.calculateOwnerWidthFromContentWidth(q,m),p,t,u;if(isNaN(s)){r.done=false}else{p=Ext.Number.constrain(s,o.minWidth,o.maxWidth);if(p===s){t=r.setWidthInDom}else{u=r.sizeModels[(p<s)?"constrainedMax":"constrainedMin"];s=p;if(q.widthModel.calculatedFromShrinkWrap){q.widthModel=u}else{q.invalidate({widthModel:u})}}q.setWidth(s,t)}}},0,0,0,0,["layout.autocomponent"],0,[Ext.layout.component,"Auto"],0));(Ext.cmd.derive("Ext.layout.component.ProgressBar",Ext.layout.component.Auto,{type:"progressbar",beginLayout:function(h){var f=this,g,j;Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);if(!h.textEls){j=f.owner.textEl;if(j.isComposite){h.textEls=[];j=j.elements;for(g=j.length;g--;){h.textEls[g]=h.getEl(Ext.get(j[g]))}}else{h.textEls=[h.getEl("textEl")]}}},calculate:function(j){var o=this,h,m,g;Ext.layout.component.Auto.prototype.calculate.apply(this,arguments);if(Ext.isNumber(g=j.getProp("width"))){g-=j.getBorderInfo().width;m=j.textEls;for(h=m.length;h--;){m[h].setWidth(g)}}else{o.done=false}}},0,0,0,0,["layout.progressbar"],0,[Ext.layout.component,"ProgressBar"],0));(Ext.cmd.derive("Ext.ProgressBar",Ext.Component,{baseCls:"x-progress",animate:false,text:"",waitTimer:null,childEls:["bar"],defaultBindProperty:"value",renderTpl:['<tpl if="internalText">','<div class="{baseCls}-text {baseCls}-text-back">{text}</div>',"</tpl>",'<div id="{id}-bar" data-ref="bar" class="{baseCls}-bar {baseCls}-bar-{ui}" role="presentation" style="width:{percentage}%">','<tpl if="internalText">','<div class="{baseCls}-text">',"<div>{text}</div>","</div>","</tpl>","</div>"],componentLayout:"progressbar",ariaRole:"progressbar",initRenderData:function(){var d=this,c=d.value||0;return Ext.apply(Ext.Component.prototype.initRenderData.call(this),{internalText:!d.hasOwnProperty("textEl"),text:d.text||"&#160;",percentage:c*100})},onRender:function(){var b=this;Ext.Component.prototype.onRender.apply(this,arguments);if(b.textEl){b.textEl=Ext.get(b.textEl);b.updateText(b.text)}else{b.textEl=b.el.select("."+b.baseCls+"-text")}},updateValue:function(b){this.updateProgress(b,Math.round(b*100)+"%")},updateProgress:function(o,m,j){o=o||0;var p=this,h=p.value,q=p.getTextTpl();p.value=o||(o=0);if(m!=null){p.updateText(m)}else{if(q){p.updateText(q.apply({value:o,percent:o*100}))}}if(p.rendered&&!p.destroyed){if(j===true||(j!==false&&p.animate)){p.bar.stopAnimation();p.bar.animate(Ext.apply({from:{width:(h*100)+"%"},to:{width:(o*100)+"%"}},p.animate))}else{p.bar.setStyle("width",(o*100)+"%")}}p.fireEvent("update",p,o,m);return p},updateText:function(c){var d=this;d.text=c;if(d.rendered){d.textEl.setHtml(d.text)}return d},applyText:function(b){this.updateText(b)},getText:function(){return this.text},wait:function(g){var d=this,f;if(!d.waitTimer){f=d;g=g||{};d.updateText(g.text);d.waitTimer=Ext.TaskManager.start({run:function(b){var a=g.increment||10;b-=1;d.updateProgress(((((b+a)%a)+1)*(100/a))*0.01,null,g.animate)},interval:g.interval||1000,duration:g.duration,onStop:function(){if(g.fn){g.fn.apply(g.scope||d)}d.reset()},scope:f})}return d},isWaiting:function(){return this.waitTimer!==null},reset:function(d){var c=this;c.updateProgress(0);c.clearTimer();if(d===true){c.hide()}return c},clearTimer:function(){var b=this;if(b.waitTimer){b.waitTimer.onStop=null;Ext.TaskManager.stop(b.waitTimer);b.waitTimer=null}},onDestroy:function(){var c=this,d=c.bar;c.clearTimer();if(c.rendered){if(c.textEl.isComposite){c.textEl.clear()}Ext.destroyMembers(c,"textEl","progressBar");if(d&&c.animate){d.stopAnimation()}}Ext.Component.prototype.onDestroy.call(this)}},0,["progressbar"],["component","box","progressbar"],{component:true,box:true,progressbar:true},["widget.progressbar"],[[Ext.ProgressBase.prototype.mixinId||Ext.ProgressBase.$className,Ext.ProgressBase]],[Ext,"ProgressBar"],0));(Ext.cmd.derive("Ext.dom.ButtonElement",Ext.dom.Element,{setSize:function(m,h,g){var j=this,o=j.component;Ext.dom.Element.prototype.setSize.call(this,m,h,g);o.btnWrap.setStyle("table-layout",(!m||m==="auto")?"":"fixed");o.btnEl.setStyle("height",(!h||h==="auto")?"":"auto");return j},setStyle:function(m,o){var p=this,h=p.component,q,j;Ext.dom.Element.prototype.setStyle.call(this,m,o);if(m){if(m==="width"||(typeof m!=="string"&&"width" in m)){q=o||m.width;h.btnWrap.setStyle("table-layout",(!q||q==="auto")?"":"fixed")}if(m==="height"||(typeof m!=="string"&&"height" in m)){j=o||m.height;h.btnEl.setStyle("height",(!j||j==="auto")?"":"auto")}}return p},setHeight:function(d,c){Ext.dom.Element.prototype.setHeight.call(this,d,c);this.component.btnEl.setStyle("height",(!d||d==="auto")?"":"auto");return this},setWidth:function(c,d){Ext.dom.Element.prototype.setWidth.call(this,c,d);this.component.btnWrap.setStyle("table-layout",(!c||c==="auto")?"":"fixed");return this}},0,0,0,0,0,0,[Ext.dom,"ButtonElement"],0));(Ext.cmd.derive("Ext.button.Manager",Ext.Base,{singleton:true,alternateClassName:"Ext.ButtonToggleManager",groups:{},pressedButton:null,init:function(){var b=this;if(!b.initialized){Ext.getDoc().on({mouseup:b.onDocumentMouseUp,scope:b});b.initialized=true}},onButtonMousedown:function(f,g){var d=this.pressedButton;if(d){d.onMouseUp(g)}this.pressedButton=f},onDocumentMouseUp:function(c){var d=this.pressedButton;if(d){d.onMouseUp(c);this.pressedButton=null}},toggleGroup:function(g,j){if(j){var m=this.groups[g.toggleGroup],o=m.length,h;for(h=0;h<o;h++){if(m[h]!==g){m[h].toggle(false)}}}},register:function(f){var j=this,g=this.groups,h=g[f.toggleGroup];j.init();if(!f.toggleGroup){return}if(!h){h=g[f.toggleGroup]=[]}h.push(f);f.on("toggle",j.toggleGroup,j)},unregister:function(f){if(!f.toggleGroup){return}var d=this,g=d.groups[f.toggleGroup];if(g){Ext.Array.remove(g,f);f.un("toggle",d.toggleGroup,d)}},getPressed:function(h){var j=this.groups[h],f=0,g;if(j){for(g=j.length;f<g;f++){if(j[f].pressed===true){return j[f]}}}return null}},0,0,0,0,0,0,[Ext.button,"Manager",Ext,"ButtonToggleManager"],0));(Ext.cmd.derive("Ext.menu.Manager",Ext.Base,{singleton:true,alternateClassName:"Ext.menu.MenuMgr",groups:{},visible:[],constructor:function(){var b=this;b.onShow=function(){delete b.onShow;Ext.on("mousedown",b.checkActiveMenus,b);return b.onShow.apply(b,arguments)}},checkActiveMenus:function(p){var m=this.visible,j=m.length,h,o,q=Ext.Component.fromElement(p.target);if(j){m=m.slice();for(h=0;h<j;++h){o=m[h];if(!(o.owns(p)||(q&&q.isMenuCheckItem&&q.menu===o))){o.hide()}}}},onShow:function(b){if(b.floating){Ext.Array.include(this.visible,b)}},onHide:function(b){if(b.floating){Ext.Array.remove(this.visible,b)}},hideAll:function(){var h=this.visible,f=h.length,g=false,j;if(f){h=h.slice();for(j=0;j<f;j++){h[j].hide();g=true}}return g},get:function(g,d){var f;if(typeof g==="string"){f=Ext.getCmp(g);if(f instanceof Ext.menu.Menu){g=f}}else{if(Ext.isArray(g)){d=Ext.apply({items:g},d);g=new Ext.menu.Menu(d)}else{if(!g.isComponent){d=Ext.apply({},g,d);g=Ext.ComponentManager.create(d,"menu")}}}return g},registerCheckable:function(g){var f=this.groups,d=g.group;if(d){if(!f[d]){f[d]=[]}f[d].push(g)}},unregisterCheckable:function(g){var f=this.groups,d=g.group;if(d){Ext.Array.remove(f[d],g)}},onCheckChange:function(t,r){var o=this.groups,u=t.group,m=0,p,s,q;if(u&&r){p=o[u];s=p.length;for(;m<s;m++){q=p[m];if(q!==t){q.setChecked(false)}}}}},1,0,0,0,0,0,[Ext.menu,"Manager",Ext.menu,"MenuMgr"],0));(Ext.cmd.derive("Ext.util.ClickRepeater",Ext.util.Observable,{constructor:function(d,f){var g=this;g.el=Ext.get(d);g.el.unselectable();Ext.apply(g,f);Ext.util.Observable.prototype.constructor.call(this);if(!g.disabled){g.disabled=true;g.enable()}if(g.handler){g.on("click",g.handler,g.scope||g)}},interval:20,delay:250,preventDefault:true,stopDefault:false,timer:0,enable:function(){if(this.disabled){this.el.on("mousedown",this.handleMouseDown,this);if(Ext.isIE8){this.el.on("dblclick",this.handleDblClick,this)}if(this.preventDefault||this.stopDefault){this.el.on("click",this.eventOptions,this)}}this.disabled=false},disable:function(b){if(b||!this.disabled){clearTimeout(this.timer);if(this.pressedCls){this.el.removeCls(this.pressedCls)}Ext.getDoc().un("mouseup",this.handleMouseUp,this);this.el.clearListeners()}this.disabled=true},setDisabled:function(b){this[b?"disable":"enable"]()},eventOptions:function(b){if(this.preventDefault){b.preventDefault()}if(this.stopDefault){b.stopEvent()}},destroy:function(){this.disable(true);Ext.util.Observable.prototype.destroy.call(this)},handleDblClick:function(b){clearTimeout(this.timer);this.fireEvent("mousedown",this,b);this.fireEvent("click",this,b)},handleMouseDown:function(b){clearTimeout(this.timer);if(this.pressedCls){this.el.addCls(this.pressedCls)}this.mousedownTime=new Date();Ext.getDoc().on("mouseup",this.handleMouseUp,this);this.el.on("mouseout",this.handleMouseOut,this);this.fireEvent("mousedown",this,b);this.fireEvent("click",this,b);if(this.accelerate){this.delay=400}this.timer=Ext.defer(this.click,this.delay||this.interval,this,[b]);if(this.mousedownPreventDefault){b.preventDefault()}if(this.mousedownStopEvent){b.stopEvent()}},click:function(b){this.fireEvent("click",this,b);this.timer=Ext.defer(this.click,this.accelerate?this.easeOutExpo(Ext.Date.getElapsed(this.mousedownTime),400,-390,12000):this.interval,this,[b])},easeOutExpo:function(j,b,c,d){return(j===d)?b+c:c*(-Math.pow(2,-10*j/d)+1)+b},handleMouseOut:function(){clearTimeout(this.timer);if(this.pressedCls){this.el.removeCls(this.pressedCls)}this.el.on("mouseover",this.handleMouseReturn,this)},handleMouseReturn:function(b){this.el.un("mouseover",this.handleMouseReturn,this);if(this.pressedCls){this.el.addCls(this.pressedCls)}this.click(b)},handleMouseUp:function(b){clearTimeout(this.timer);this.el.un("mouseover",this.handleMouseReturn,this);this.el.un("mouseout",this.handleMouseOut,this);Ext.getDoc().un("mouseup",this.handleMouseUp,this);if(this.pressedCls){this.el.removeCls(this.pressedCls)}this.fireEvent("mouseup",this,b)}},1,0,0,0,0,0,[Ext.util,"ClickRepeater"],0));(Ext.cmd.derive("Ext.button.Button",Ext.Component,{alternateClassName:"Ext.Button",config:{iconAlign:"left",text:null,textAlign:"center",arrowVisible:true},isButton:true,_syncFrameHeight:true,liquidLayout:true,hidden:false,disabled:false,pressed:false,tabIndex:0,enableToggle:false,menuAlign:"tl-bl?",showEmptyMenu:false,clickEvent:"click",preventDefault:true,handleMouseEvents:true,tooltipType:"qtip",baseCls:"x-btn",hrefTarget:"_blank",destroyMenu:true,focusable:true,ariaRole:"button",keyHandlers:{SPACE:"onEnterKey",ENTER:"onEnterKey",DOWN:"onDownKey"},defaultBindProperty:"text",childEls:["btnEl","btnWrap","btnInnerEl","btnIconEl","arrowEl"],publishes:{pressed:1},_btnWrapCls:"x-btn-wrap",_btnCls:"x-btn-button",_baseIconCls:"x-btn-icon-el",_glyphCls:"x-btn-glyph",_innerCls:"x-btn-inner",_textCls:"x-btn-text",_noTextCls:"x-btn-no-text",_hasIconCls:"x-btn-icon",_pressedCls:"x-btn-pressed",overCls:"x-btn-over",_disabledCls:"x-btn-disabled",_menuActiveCls:"x-btn-menu-active",_arrowElCls:"x-btn-arrow-el",_focusCls:"x-btn-focus",_arrowFocusCls:"x-arrow-focus",renderTpl:'<span id="{id}-btnWrap" data-ref="btnWrap" role="presentation" unselectable="on" style="{btnWrapStyle}" class="{btnWrapCls} {btnWrapCls}-{ui} {splitCls}{childElCls}"><span id="{id}-btnEl" data-ref="btnEl" role="presentation" unselectable="on" style="{btnElStyle}" class="{btnCls} {btnCls}-{ui} {textCls} {noTextCls} {hasIconCls} {iconAlignCls} {textAlignCls} {btnElAutoHeightCls}{childElCls}"><tpl if="iconBeforeText">{[values.$comp.renderIcon(values)]}</tpl><span id="{id}-btnInnerEl" data-ref="btnInnerEl" unselectable="on" class="{innerCls} {innerCls}-{ui}{childElCls}">{text}</span><tpl if="!iconBeforeText">{[values.$comp.renderIcon(values)]}</tpl></span></span>{[values.$comp.getAfterMarkup ? values.$comp.getAfterMarkup(values) : ""]}<tpl if="closable"><span id="{id}-closeEl" data-ref="closeEl" class="{baseCls}-close-btn"><tpl if="closeText"> {closeText}</tpl></span></tpl><tpl if="split"><span id="{id}-arrowEl" class="{arrowElCls}" data-ref="arrowEl" role="button" hidefocus="on" unselectable="on"<tpl if="tabIndex != null"> tabindex="{tabIndex}"</tpl><tpl foreach="arrowElAttributes"> {$}="{.}"</tpl>>{arrowElText}</span></tpl>',iconTpl:'<span id="{id}-btnIconEl" data-ref="btnIconEl" role="presentation" unselectable="on" class="{baseIconCls} {baseIconCls}-{ui} {iconCls} {glyphCls}{childElCls}" style="<tpl if="iconUrl">background-image:url({iconUrl});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl></span>',scale:"small",allowedScales:["small","medium","large"],arrowAlign:"right",arrowCls:"arrow",maskOnDisable:false,shrinkWrap:3,frame:true,autoEl:{tag:"a",hidefocus:"on",unselectable:"on"},hasFrameTable:function(){return this.href&&this.frameTable},frameTableListener:function(){if(!this.disabled){this.doNavigate()}},doNavigate:function(){if(this.hrefTarget==="_blank"){window.open(this.getHref(),this.hrefTarget)}else{location.href=this.getHref()}},_triggerRegion:{},initComponent:function(){var b=this;b.addCls("x-unselectable");Ext.Component.prototype.initComponent.call(this);if(b.menu){b.split=true;b.setMenu(b.menu,false,true)}if(b.url){b.href=b.url}b.configuredWithPreventDefault=b.hasOwnProperty("preventDefault");if(b.href&&!b.configuredWithPreventDefault){b.preventDefault=false}if(Ext.isString(b.toggleGroup)&&b.toggleGroup!==""){b.enableToggle=true}if(b.html&&!b.text){b.text=b.html;delete b.html}},getElConfig:function(){var j=this,f=Ext.Component.prototype.getElConfig.call(this),g=j.getHref(),h=j.hrefTarget;if(f.tag==="a"){if(!j.disabled){f.tabIndex=j.tabIndex}if(g){if(!j.disabled){f.href=g;if(h){f.target=h}}}}if(!j.ariaStaticRoles[j.ariaRole]){if(j.menu&&!j.isSplitButton){f["aria-haspopup"]=true}if(j.enableToggle){f["aria-pressed"]=!!j.pressed}}return f},beforeRender:function(){Ext.Component.prototype.beforeRender.call(this);if(this.pressed){this.addCls(this._pressedCls)}},initRenderData:function(){return Ext.apply(Ext.Component.prototype.initRenderData.call(this),this.getTemplateArgs())},getMenu:function(){return this.menu||null},setMenu:function(p,q,s){var r=this,m=r.menu,o=r.isSplitButton?r.arrowEl&&r.arrowEl.dom:r.ariaEl.dom,u,t;if(m&&!s){if(q!==false&&r.destroyMenu){m.destroy()}m.ownerCmp=null}if(p){u=p.isMenu;p=Ext.menu.Manager.get(p,{ownerCmp:r});p.setOwnerCmp(r,u);p.menuClickBuffer=250;r.mon(p,{scope:r,show:r.onMenuShow,hide:r.onMenuHide});if(!m&&r.getArrowVisible()){r.split=true;if(r.rendered){r._addSplitCls();r.updateLayout()}}r.menu=p;if(o){o.setAttribute("aria-haspopup",true);o.setAttribute("aria-owns",p.id)}else{t=r.isSplitButton?(r.ariaArrowElAttributes||(r.ariaArrowElAttributes={})):(r.ariaRenderAttributes||(r.ariaRenderAttributes={}));t["aria-haspopup"]=true;t["aria-owns"]=p.id}}else{if(r.rendered){o.removeAttribute("aria-haspopup");o.removeAttribute("aria-owns");r._removeSplitCls();r.updateLayout()}else{t=r.isSplitButton?r.ariaArrowElAttributes:r.ariaRenderAttributes;if(t){delete t["aria-haspopup"];delete t["aria-owns"]}}r.split=false;r.menu=null}},onRender:function(){var j=this,h,g,f;Ext.Component.prototype.onRender.apply(this,arguments);g=j.el;if(j.tooltip){j.setTooltip(j.tooltip,true)}if(j.handleMouseEvents){f={scope:j,mouseover:j.onMouseOver,mouseout:j.onMouseOut,mousedown:j.onMouseDown};if(j.split){f.mousemove=j.onMouseMove}}else{f={scope:j}}if(Ext.supports.Touch){f.touchstart=j.onTouchStart}if(j.repeat){j.mon(new Ext.util.ClickRepeater(g,Ext.isObject(j.repeat)?j.repeat:{}),"click",j.onRepeatClick,j)}else{if(f[j.clickEvent]){h=true}else{f[j.clickEvent]=j.onClick}}j.mon(g,f);if(j.hasFrameTable()){j.mon(j.frameTable,"click",j.frameTableListener,j)}if(h){j.mon(g,j.clickEvent,j.onClick,j)}Ext.button.Manager.register(j)},onFocusLeave:function(b){Ext.Component.prototype.onFocusLeave.call(this,b);if(this.menu){this.menu.hide()}},getTemplateArgs:function(){var r=this,w=r._btnCls,u=r._baseIconCls,z=r.getIconAlign(),q=r.glyph,s=Ext._glyphFontFamily,p=r.text,v=r._hasIcon(),t=r._hasIconCls,y;if(typeof q==="string"){y=q.split("@");q=y[0];s=y[1]}return{split:r.isSplitButton,innerCls:r._innerCls,splitCls:r.getArrowVisible()?r.getSplitCls():"",iconUrl:r.icon,iconCls:r.iconCls,glyph:q,glyphCls:q?r._glyphCls:"",glyphFontFamily:s,text:p||"&#160;",closeText:r.closeText,textCls:p?r._textCls:"",noTextCls:p?"":r._noTextCls,hasIconCls:v?t:"",btnWrapCls:r._btnWrapCls,btnWrapStyle:r.width?"table-layout:fixed;":"",btnElStyle:r.height?"height:auto;":"",btnCls:w,baseIconCls:u,iconBeforeText:z==="left"||z==="top",iconAlignCls:v?(t+"-"+z):"",textAlignCls:w+"-"+r.getTextAlign(),arrowElCls:r._arrowElCls,tabIndex:r.tabIndex}},renderIcon:function(b){return this.getTpl("iconTpl").apply(b)},setHref:function(g){var f=this,h=f.hrefTarget,j;f.href=g;if(!f.configuredWithPreventDefault){f.preventDefault=!g}if(f.rendered){j=f.el.dom;if(!g||f.disabled){j.removeAttribute("href");j.removeAttribute("hrefTarget")}else{j.href=f.getHref();if(h){j.target=h}}}},getHref:function(){var c=this,d=c.href;return d?Ext.urlAppend(d,Ext.Object.toQueryString(Ext.apply({},c.params,c.baseParams))):false},setParams:function(g){var f=this,d;f.params=g;if(f.rendered){d=f.el.dom;if(f.disabled){d.removeAttribute("href")}else{d.href=f.getHref()||""}}},getSplitCls:function(){var b=this;return b.split?(b.baseCls+"-"+b.arrowCls)+" "+(b.baseCls+"-"+b.arrowCls+"-"+b.arrowAlign):""},setIcon:function(f){f=f||"";var j=this,g=j.btnIconEl,h=j.icon||"";j.icon=f;if(f!==h){if(g){g.setStyle("background-image",f?"url("+f+")":"");j._syncHasIconCls();if(j.didIconStateChange(h,f)){j.updateLayout()}}j.fireEvent("iconchange",j,h,f)}return j},setIconCls:function(f){f=f||"";var h=this,g=h.btnIconEl,j=h.iconCls||"";h.iconCls=f;if(j!==f){if(g){g.removeCls(j);g.addCls(f);h._syncHasIconCls();if(h.didIconStateChange(j,f)){h.updateLayout()}}h.fireEvent("iconchange",h,j,f)}return h},setGlyph:function(p){p=p||0;var q=this,j=q.btnIconEl,s=q.glyph,o=q._glyphCls,m,r;q.glyph=p;if(j){if(typeof p==="string"){r=p.split("@");p=r[0];m=r[1]||Ext._glyphFontFamily}if(!p){j.dom.innerHTML="";j.removeCls(o)}else{if(s!==p){j.dom.innerHTML="&#"+p+";";j.addCls(o)}}if(m){j.setStyle("font-family",m)}q._syncHasIconCls();if(q.didIconStateChange(s,p)){q.updateLayout()}}q.fireEvent("glyphchange",q,q.glyph,s);return q},setTooltip:function(g,f){var d=this;if(d.rendered){if(!f||!g){d.clearTip()}if(g){if(Ext.quickTipsActive&&Ext.isObject(g)){Ext.tip.QuickTipManager.register(Ext.apply({target:d.el.id},g));d.tooltip=g}else{d.el.dom.setAttribute(d.getTipAttr(),g)}}}else{d.tooltip=g}return d},updateIconAlign:function(m,p){var q=this,h,j,o;if(q.rendered){h=q.btnEl;j=q.btnIconEl;o=q._hasIconCls;if(p){h.removeCls(o+"-"+p)}h.addCls(o+"-"+m);if(m==="top"||m==="left"){h.insertFirst(j)}else{h.appendChild(j)}q.updateLayout()}},updateTextAlign:function(j,m){var o=this,g=o.btnEl,h=o._btnCls;if(o.rendered){g.removeCls(h+"-"+m);g.addCls(h+"-"+j)}},getTipAttr:function(){return this.tooltipType==="qtip"?"data-qtip":"title"},getRefItems:function(f){var g=this.menu,d;if(g){d=g.getRefItems(f);d.unshift(g)}return d||[]},clearTip:function(){var c=this,d=c.el;if(Ext.quickTipsActive&&Ext.isObject(c.tooltip)){Ext.tip.QuickTipManager.unregister(d)}else{d.dom.removeAttribute(c.getTipAttr())}},beforeDestroy:function(){var b=this;if(b.rendered){b.clearTip()}Ext.destroy(b.repeater);Ext.Component.prototype.beforeDestroy.call(this)},onDestroy:function(){var d=this,c=d.menu;if(d.rendered){Ext.destroy(d.keyMap);delete d.keyMap}if(c&&d.destroyMenu){d.menu=Ext.destroy(c)}Ext.button.Manager.unregister(d);Ext.Component.prototype.onDestroy.call(this)},setHandler:function(c,d){this.handler=c;if(arguments.length>1){this.scope=d}return this},updateText:function(m,h){m=m==null?"":String(m);h=h||"";var o=this,j=o.btnInnerEl,g=o.btnEl;if(o.rendered){j.setHtml(m||"&#160;");g[m?"addCls":"removeCls"](o._textCls);g[m?"removeCls":"addCls"](o._noTextCls);o.updateLayout()}o.fireEvent("textchange",o,h,m)},didIconStateChange:function(f,g){var d=Ext.isEmpty(g);return Ext.isEmpty(f)?!d:d},click:function(b){return this.onClick(b)},setPressed:function(b){return this.toggle(b!==false)},toggle:function(h,f){var j=this,g=j.ariaEl.dom;h=h===undefined?!j.pressed:!!h;if(j.fireEvent("beforetoggle",j,h)!==false){if(h!==j.pressed){j[h?"addCls":"removeCls"](j._pressedCls);j.pressed=h;if(g){g.setAttribute("aria-pressed",h)}if(!f){j.fireEvent("toggle",j,h);Ext.callback(j.toggleHandler,j.scope,[j,h],0,j);if(j.reference&&j.publishState){j.publishState("pressed",h)}}}}return j},maybeShowMenu:function(b){if(this.menu){this.showMenu(b)}},showMenu:function(g){var j=this,h=j.menu,f=!g||g.pointerType;if(h&&j.rendered){if(j.tooltip&&Ext.quickTipsActive&&j.getTipAttr()!=="title"){Ext.tip.QuickTipManager.getQuickTip().cancelShow(j.el)}if(h.isVisible()){if(f){h.hide()}else{h.focus()}}else{if(!g||j.showEmptyMenu||h.items.getCount()>0){h.autoFocus=!f;h.showBy(j.el,j.menuAlign)}}}return j},hideMenu:function(){if(this.hasVisibleMenu()){this.menu.hide()}return this},hasVisibleMenu:function(){var b=this.menu;return b&&b.rendered&&b.isVisible()},onRepeatClick:function(d,c){this.onClick(c)},onTouchStart:function(b){this.doPreventDefault(b)},onEnterKey:function(b){this.onClick(b);b.stopEvent();return false},onClick:function(c){var d=this;d.doPreventDefault(c);if(c.type!=="keydown"&&c.button){return}if(!d.disabled){d.doToggle();d.maybeShowMenu(c);d.fireHandler(c)}},doPreventDefault:function(b){if(b&&(this.preventDefault||(this.disabled&&this.getHref()))){b.preventDefault()}},fireHandler:function(c){var d=this;if(d.fireEvent("click",d,c)!==false&&!d.destroyed){Ext.callback(d.handler,d.scope,[d,c],0,d)}},doToggle:function(){var b=this;if(b.enableToggle&&(b.allowDepress!==false||!b.pressed)){b.toggle()}},onMouseOver:function(c){var d=this;if(!d.disabled&&!c.within(d.el,true,true)){d.onMouseEnter(c)}},onMouseOut:function(c){var d=this;if(!c.within(d.el,true,true)){if(d.overMenuTrigger){d.onMenuTriggerOut(c)}d.onMouseLeave(c)}},onMouseMove:function(g){var f=this,d=f.overMenuTrigger;if(f.split){if(f.isWithinTrigger(g)){if(!d){f.onMenuTriggerOver(g)}}else{if(d){f.onMenuTriggerOut(g)}}}},isWithinTrigger:function(m){var o=this,g=o.el,j,h;j=(o.arrowAlign==="right")?m.getX()-o.getX():m.getY()-g.getY();h=o.getTriggerRegion();return j>h.begin&&j<h.end},getTriggerRegion:function(){var m=this,j=m._triggerRegion,o=m.arrowAlign==="right",g=o?"getRight":"getBottom",h=o?m.getWidth():m.getHeight();j.begin=h-(m.el[g]()-m.btnEl[g]());j.end=h;return j},onMouseEnter:function(b){this.fireEvent("mouseover",this,b)},onMouseLeave:function(b){this.fireEvent("mouseout",this,b)},onMenuTriggerOver:function(g){var d=this,f=d.arrowTooltip;d.overMenuTrigger=true;if(d.split&&f){d.btnWrap.dom.setAttribute(d.getTipAttr(),f)}d.fireEvent("menutriggerover",d,d.menu,g)},onMenuTriggerOut:function(c){var d=this;delete d.overMenuTrigger;if(d.split&&d.arrowTooltip){d.btnWrap.dom.setAttribute(d.getTipAttr(),"")}d.fireEvent("menutriggerout",d,d.menu,c)},onEnable:function(){var f=this,g=f.href,h=f.hrefTarget,j=f.el.dom;Ext.Component.prototype.onEnable.call(this);f.removeCls(f._disabledCls);j.setAttribute("tabIndex",f.tabIndex);if(g){j.href=g}if(h){j.target=h}},onDisable:function(){var d=this,c=d.el.dom;Ext.Component.prototype.onDisable.call(this);d.addCls(d._disabledCls);d.removeCls(d.overCls);c.removeAttribute("tabIndex");if(d.href){c.removeAttribute("href")}if(d.hrefTarget){c.removeAttribute("target")}},setScale:function(g){var f=this,d=f.ui.replace("-"+f.scale,"");if(!Ext.Array.contains(f.allowedScales,g)){throw ("#setScale: scale must be an allowed scale ("+f.allowedScales.join(", ")+")")}f.scale=g;f.setUI(d)},setUI:function(c){var d=this;if(d.scale&&!c.match(d.scale)){c=c+"-"+d.scale}Ext.Component.prototype.setUI.call(this,c)},onMouseDown:function(c){var d=this;if(Ext.isIE||c.pointerType==="touch"){Ext.defer(function(){var a=d.getFocusEl();if(a&&!c.defaultPrevented){a.focus()}},1)}if(!d.disabled&&c.button===0){Ext.button.Manager.onButtonMousedown(d,c);d.addCls(d._pressedCls)}},onMouseUp:function(c){var d=this;if(!d.destroyed&&c.button===0){if(!d.pressed){d.removeCls(d._pressedCls)}}},onMenuShow:function(){var b=this;b.addCls(b._menuActiveCls);b.fireEvent("menushow",b,b.menu)},onMenuHide:function(c){var d=this;d.removeCls(d._menuActiveCls);d.fireEvent("menuhide",d,d.menu)},onDownKey:function(c){var d=this;if(d.menu&&!d.disabled){d.showMenu(c);c.stopEvent();return false}},updateArrowVisible:function(c){var d=this;if(d.rendered){if(c){if(d.menu||d.isSplitButton){d.split=true;d._addSplitCls()}}else{d._removeSplitCls();d.split=false}}return c},privates:{addOverCls:function(){if(!this.disabled){this.addCls(this.overCls)}},_addSplitCls:function(){var b=this;b.btnWrap.addCls(b.getSplitCls())},getTdCls:function(){return"x-button-"+this.ui+"-"+this.scale+"-cell"},removeOverCls:function(){this.removeCls(this.overCls)},_removeSplitCls:function(){var b=this;b.btnWrap.removeCls(b.getSplitCls())},_syncHasIconCls:function(){var d=this,f=d.btnEl,g=d._hasIconCls;if(f){f[d._hasIcon()?"addCls":"removeCls"]([g,g+"-"+d.iconAlign])}},_hasIcon:function(){return !!(this.icon||this.iconCls||this.glyph)},wrapPrimaryEl:function(b){this.el=new Ext.dom.ButtonElement(b);Ext.Component.prototype.wrapPrimaryEl.call(this,b)}}},0,["button"],["component","box","button"],{component:true,box:true,button:true},["widget.button"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable],[Ext.util.KeyboardInteractive.prototype.mixinId||Ext.util.KeyboardInteractive.$className,Ext.util.KeyboardInteractive]],[Ext.button,"Button",Ext,"Button"],0));(Ext.cmd.derive("Ext.panel.Bar",Ext.container.Container,{vertical:false,_verticalSides:{left:1,right:1},initComponent:function(){var c=this,d=c.vertical;c.dock=c.dock||(d?"left":"top");c.layout=Ext.apply(d?{type:"vbox",align:"middle",alignRoundingMethod:"ceil"}:{type:"hbox",align:"middle",alignRoundingMethod:"floor"},c.layout);Ext.container.Container.prototype.initComponent.call(this)},onAdded:function(d,g,f){this.initOrientation();Ext.container.Container.prototype.onAdded.call(this,d,g,f)},onRemoved:function(b){this.removeClsWithUI(this.uiCls);Ext.container.Container.prototype.onRemoved.call(this,b)},beforeRender:function(){var b=this;if(b.forceOrientation||!b.ownerCt){b.initOrientation()}Ext.container.Container.prototype.beforeRender.call(this)},setDock:function(h){var j=this,f,g;if(h!==j.dock){Ext.suspendLayouts();j.clearOrientation();Ext.container.Container.prototype.setDock.call(this,h);j.initOrientation();g=j.vertical;f=j.layout;f.setVertical(g);f.setAlignRoundingMethod(g?"ceil":"floor");Ext.resumeLayouts(true)}},privates:{clearOrientation:function(){this.removeClsWithUI([this.vertical?"vertical":"horizontal",this.getDockName()])},getDockName:function(){return this.dock},initOrientation:function(){var g=this,d=g.dock,f=(g.vertical=(d?d in g._verticalSides:g.vertical));g.addClsWithUI([f?"vertical":"horizontal",g.getDockName()])}}},0,0,["component","box","container"],{component:true,box:true,container:true},0,0,[Ext.panel,"Bar"],0));(Ext.cmd.derive("Ext.panel.Title",Ext.Component,{isTitle:true,noWrap:true,textAlign:"left",iconAlign:"left",rotation:0,text:"&#160;",beforeRenderConfig:{textAlign:null,text:null,glyph:null,icon:null,iconAlign:null,iconCls:null,rotation:null},autoEl:{role:"presentation",unselectable:"on"},textElRole:"presentation",tabIndex:0,childEls:["textEl","iconEl","iconWrapEl"],renderTpl:'<tpl if="iconMarkup && iconBeforeTitle">{iconMarkup}</tpl><div id="{id}-textEl" data-ref="textEl" class="{textCls} {textCls}-{ui} {itemCls}{childElCls}" unselectable="on"<tpl if="textElRole"> role="{textElRole}"</tpl>>{text}</div><tpl if="iconMarkup && !iconBeforeTitle">{iconMarkup}</tpl>',iconTpl:'<div id="{id}-iconWrapEl" data-ref="iconWrapEl" role="presentation" class="{iconWrapCls} {iconWrapCls}-{ui} {iconAlignCls} {itemCls}{childElCls}"<tpl if="iconWrapStyle"> style="{iconWrapStyle}"</tpl>><div id="{id}-iconEl" data-ref="iconEl" role="presentation" unselectable="on" class="{baseIconCls} {baseIconCls}-{ui} {iconCls} {glyphCls}" style="<tpl if="iconUrl">background-image:url({iconUrl});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl></div></div>',_textAlignClasses:{left:"x-title-align-left",center:"x-title-align-center",right:"x-title-align-right"},_iconAlignClasses:{top:"x-title-icon-top",right:"x-title-icon-right",bottom:"x-title-icon-bottom",left:"x-title-icon-left"},_rotationClasses:{0:"x-title-rotate-none",1:"x-title-rotate-right",2:"x-title-rotate-left"},_rotationAngles:{1:90,2:270},baseCls:"x-title",_titleSuffix:"-title",_glyphCls:"x-title-glyph",_iconWrapCls:"x-title-icon-wrap",_baseIconCls:"x-title-icon",_itemCls:"x-title-item",_textCls:"x-title-text",afterComponentLayout:function(){var m=this,g=m.getRotation(),h,j,o;if(g&&!Ext.isIE8){o=m.el;h=m.lastBox;j=h.x;o.setStyle(m._getVerticalAdjustDirection(),(j+((g===1)?h.width:-h.height))+"px")}Ext.Component.prototype.afterComponentLayout.call(this)},onRender:function(){var g=this,f=g.getRotation(),d=g.el;Ext.Component.prototype.onRender.call(this);if(f){d.setVertical(g._rotationAngles[f])}if(Ext.supports.FixedTableWidthBug){d._needsTableWidthFix=true}},applyText:function(b){if(!b){b="&#160;"}return b},beforeRender:function(){var b=this;Ext.Component.prototype.beforeRender.call(this);b.addCls(b._rotationClasses[b.getRotation()]);b.addCls(b._textAlignClasses[b.getTextAlign()])},getIconMarkup:function(){return this.getTpl("iconTpl").apply(this.getIconRenderData())},getIconRenderData:function(){var p=this,s=p.getIcon(),j=p.getIconCls(),q=p.getGlyph(),o=Ext._glyphFontFamily,m=p.getIconAlign(),r;if(typeof q==="string"){r=q.split("@");q=r[0];o=r[1]}return{id:p.id,ui:p.ui,itemCls:p._itemCls,iconUrl:s,iconCls:j,iconWrapCls:p._iconWrapCls,baseIconCls:p._baseIconCls,iconAlignCls:p._iconAlignClasses[m],glyph:q,glyphCls:q?p._glyphCls:"",glyphFontFamily:o}},initRenderData:function(){var d=this,f,g;g=Ext.apply({text:d.getText(),textElRole:d.textElRole,id:d.id,ui:d.ui,itemCls:d._itemCls,textCls:d._textCls,iconMarkup:null,iconBeforeTitle:null},Ext.Component.prototype.initRenderData.call(this));if(d._hasIcon()){f=d.getIconAlign();g.iconMarkup=d.getIconMarkup();g.iconBeforeTitle=(f==="top"||f==="left")}return g},onAdded:function(h,m,j){var p=this,o=p._titleSuffix,q=h.baseCls;p.addCls([q+o,q+o+"-"+h.ui]);Ext.Component.prototype.onAdded.call(this,h,m,j)},updateGlyph:function(p,s){p=p||0;var q=this,o=q._glyphCls,j,m,r;q.glyph=p;if(q.rendered){q._syncIconVisibility();j=q.iconEl;if(typeof p==="string"){r=p.split("@");p=r[0];m=r[1]||Ext._glyphFontFamily}if(!p){j.dom.innerHTML="";j.removeCls(o)}else{if(s!==p){j.dom.innerHTML="&#"+p+";";j.addCls(o)}}if(m){j.setStyle("font-family",m)}if(q._didIconStateChange(s,p)){q.updateLayout()}}},updateIcon:function(f,h){f=f||"";var j=this,g;if(j.rendered&&f!==h){j._syncIconVisibility();g=j.iconEl;g.setStyle("background-image",f?"url("+f+")":"");if(j._didIconStateChange(h,f)){j.updateLayout()}}},updateIconAlign:function(m,q){var h=this,o=h.iconWrapEl,j,p;if(h.iconWrapEl){j=h.el;p=h._iconAlignClasses;if(q){o.removeCls(p[q])}o.addCls(p[m]);if(m==="top"||m==="left"){j.insertFirst(o)}else{j.appendChild(o)}h.updateLayout()}},updateIconCls:function(f,j){f=f||"";var h=this,g;if(h.rendered&&j!==f){h._syncIconVisibility();g=h.iconEl;if(j){g.removeCls(j)}g.addCls(f);if(h._didIconStateChange(j,f)){h.updateLayout()}}},updateRotation:function(g,h){var m=this,o,j;if(m.rendered){o=m.el;j=m._rotationClasses;m.removeCls(j[h]);m.addCls(j[g]);o.setHorizontal();if(g){o.setVertical(m._rotationAngles[g])}o.setStyle({right:"",left:"",top:"",height:"",width:""});m.lastBox=null;m.updateLayout()}},updateText:function(b){if(this.rendered){this.textEl.setHtml(b);this.updateLayout()}},updateTextAlign:function(h,f){var g=this,j=g._textAlignClasses;if(g.rendered){if(f){g.removeCls(j[f])}g.addCls(j[h]);g.updateLayout()}},privates:{_getVerticalAdjustDirection:function(){return"left"},_didIconStateChange:function(f,g){var d=Ext.isEmpty(g);return Ext.isEmpty(f)?!d:d},_hasIcon:function(){return !!(this.getIcon()||this.getIconCls()||this.getGlyph())},_syncIconVisibility:function(){var o=this,p=o.el,j=o._hasIcon(),m=o.iconWrapEl,q,h;if(j&&!m){h=o.iconAlign;q=(h==="left"||h==="top");p.dom.insertAdjacentHTML(q?"afterbegin":"beforeend",o.getIconMarkup());m=o.iconWrapEl=p[q?"first":"last"]();o.iconEl=m.first()}if(m){m.setDisplayed(j)}}}},0,["title"],["component","box","title"],{component:true,box:true,title:true},["widget.title"],0,[Ext.panel,"Title"],0));(Ext.cmd.derive("Ext.panel.Tool",Ext.Component,{isTool:true,baseCls:"x-tool",disabledCls:"x-tool-disabled",toolPressedCls:"x-tool-pressed",toolOverCls:"x-tool-over",childEls:["toolEl"],renderTpl:['<div id="{id}-toolEl" data-ref="toolEl" class="{baseCls}-img {baseCls}-{type}{childElCls}" role="presentation"></div>'],toolOwner:null,tooltipType:"qtip",stopEvent:true,ariaRole:"button",focusable:true,tabIndex:0,keyHandlers:{SPACE:"onClick",ENTER:"onClick"},cacheHeight:true,cacheWidth:true,initComponent:function(){var b=this;b.type=b.type||b.id;Ext.applyIf(b.renderData,{baseCls:b.baseCls,type:b.type});b.tooltip=b.tooltip||b.qtip;Ext.Component.prototype.initComponent.call(this)},afterRender:function(){var d=this,c;Ext.Component.prototype.afterRender.apply(this,arguments);d.el.on({click:d.onClick,mousedown:d.onMouseDown,mouseover:d.onMouseOver,mouseout:d.onMouseOut,scope:d});c=d.tooltip;if(c){d.setTooltip(c)}},tipAttrs:{qtip:"data-qtip"},setTooltip:function(q,t){var s=this,m=s.tooltip,r=s.tooltipType,p=s.id,u=s.el,o;if(m&&Ext.quickTipsActive&&Ext.isObject(m)){Ext.tip.QuickTipManager.unregister(p)}s.tooltip=q;if(t){s.tooltipType=t}if(q){if(Ext.quickTipsActive&&Ext.isObject(q)){Ext.tip.QuickTipManager.register(Ext.apply({target:p},q))}else{if(u){if(t&&r&&t!==r){o=s.tipAttrs[r]||"title";u.dom.removeAttribute(o)}o=s.tipAttrs[t||r]||"title";u.dom.setAttribute(o,q)}}if(o!=="title"&&s.ariaRole&&s.ariaRole!=="presentation"){if(u){u.dom.setAttribute("aria-label",q)}else{s.ariaRenderAttributes=s.ariaRenderAttributes||{};s.ariaRenderAttributes["aria-label"]=q}}}},setType:function(f){var d=this,g=d.type;d.type=f;if(d.rendered){if(g){d.toolEl.removeCls(d.baseCls+"-"+g)}d.toolEl.addCls(d.baseCls+"-"+f)}else{d.renderData.type=f}return d},onDestroy:function(){var d=this,c=d.keyMap;d.setTooltip(null);delete d.toolOwner;Ext.Component.prototype.onDestroy.call(this)},privates:{onClick:function(g,d){var f=this;if(f.disabled){return false}if(g.type!=="keydown"){f.el.removeCls(f.toolPressedCls+" "+f.toolOverCls)}if(f.stopEvent!==false){g.stopEvent()}if(f.handler){Ext.callback(f.handler,f.scope,[g,d,f.ownerCt,f],0,f)}else{if(f.callback){Ext.callback(f.callback,f.scope,[f.toolOwner||f.ownerCt,f,g],0,f)}}f.fireEvent("click",f,g,f.toolOwner||f.ownerCt);return true},onMouseDown:function(b){b.preventDefault();if(this.disabled){return false}this.el.addCls(this.toolPressedCls)},onMouseOver:function(){if(this.disabled){return false}this.el.addCls(this.toolOverCls)},onMouseOut:function(){this.el.removeCls(this.toolOverCls)}}},0,["tool"],["component","box","tool"],{component:true,box:true,tool:true},["widget.tool"],0,[Ext.panel,"Tool"],0));(Ext.cmd.derive("Ext.util.KeyMap",Ext.Base,{alternateClassName:"Ext.KeyMap",eventName:"keydown",constructor:function(d){var c=this;if((arguments.length!==1)||(typeof d==="string")||d.dom||d.tagName||d===document||d.isComponent){c.legacyConstructor.apply(c,arguments);return}Ext.apply(c,d);c.bindings=[];if(!c.target.isComponent){c.target=Ext.get(c.target)}if(c.binding){c.addBinding(c.binding)}else{if(d.key){c.addBinding(d)}}c.enable()},legacyConstructor:function(f,h,g){var j=this;Ext.apply(j,{target:Ext.get(f),eventName:g||j.eventName,bindings:[]});if(h){j.addBinding(h)}j.enable()},addBinding:function(j){var o=this,m=j.key,g,h;if(o.processing){o.bindings=o.bindings.slice(0)}if(Ext.isArray(j)){for(g=0,h=j.length;g<h;g++){o.addBinding(j[g])}return}o.bindings.push(Ext.apply({keyCode:o.processKeys(m)},j))},removeBinding:function(p){var q=this,o=q.bindings,m=o.length,j,r,s;if(q.processing){q.bindings=o.slice(0)}s=q.processKeys(p.key);for(j=0;j<m;++j){r=o[j];if((r.fn||r.handler)===(p.fn||p.handler)&&r.scope===p.scope){if(p.alt===r.alt&&p.crtl===r.crtl&&p.shift===r.shift){if(Ext.Array.equals(r.keyCode,s)){Ext.Array.erase(q.bindings,j,1);return}}}}},processKeys:function(p){var o=false,r,q,j,m,s;if(p.test){return p}if(Ext.isString(p)){q=[];j=p.toUpperCase();for(s=0,m=j.length;s<m;++s){q.push(j.charCodeAt(s))}p=q;o=true}if(!Ext.isArray(p)){p=[p]}if(!o){for(s=0,m=p.length;s<m;++s){r=p[s];if(Ext.isString(r)){p[s]=r.toUpperCase().charCodeAt(0)}}}return p},handleTargetEvent:function(o){var p=this,m,q,h,j;if(p.enabled){m=p.bindings;q=0;h=m.length;o=p.processEvent.apply(p.processEventScope||p,arguments);if(o){p.lastKeyEvent=o;if(p.ignoreInputFields&&Ext.fly(o.target).isInputField()){return}if(!o.getKey){return o}p.processing=true;for(;q<h;++q){j=p.processBinding(m[q],o);if(j===false){p.processing=false;return j}}p.processing=false}}},processEvent:Ext.identityFn,processBinding:function(u,z){if(this.checkModifiers(u,z)){var t=z.getKey(),r=u.fn||u.handler,q=u.scope||this,s=u.keyCode,y=u.defaultEventAction,w,v,p;if(s.test){if(s.test(String.fromCharCode(z.getCharCode()))){p=r.call(q,t,z);if(p!==true&&y){z[y]()}if(p===false){return p}}}else{if(s.length){for(w=0,v=s.length;w<v;++w){if(t===s[w]){p=r.call(q,t,z);if(p!==true&&y){z[y]()}if(p===false){return p}break}}}}}},checkModifiers:function(o,q){var r=["shift","ctrl","alt"],s=0,m=r.length,p,j;for(;s<m;++s){j=r[s];p=o[j];if(!(p===undefined||(p===q[j+"Key"]))){return false}}return true},on:function(j,r,s){var o,m,q,p;if(Ext.isObject(j)&&!Ext.isArray(j)){o=j.key;m=j.shift;q=j.ctrl;p=j.alt}else{o=j}this.addBinding({key:o,shift:m,ctrl:q,alt:p,fn:r,scope:s})},un:function(j,r,s){var o,m,q,p;if(Ext.isObject(j)&&!Ext.isArray(j)){o=j.key;m=j.shift;q=j.ctrl;p=j.alt}else{o=j}this.removeBinding({key:o,shift:m,ctrl:q,alt:p,fn:r,scope:s})},isEnabled:function(){return this.enabled},enable:function(){var b=this;if(!b.enabled){b.target.on(b.eventName,b.handleTargetEvent,b,{capture:b.capture,priority:b.priority});b.enabled=true}},disable:function(){var b=this;if(b.enabled){b.target.removeListener(b.eventName,b.handleTargetEvent,b);b.enabled=false}},setDisabled:function(b){if(b){this.disable()}else{this.enable()}},destroy:function(g){var f=this,d=f.target;f.bindings=[];f.disable();if(g){d.destroy()}delete f.target;f.callParent()}},1,0,0,0,0,0,[Ext.util,"KeyMap",Ext,"KeyMap"],0));(Ext.cmd.derive("Ext.util.KeyNav",Ext.Base,{alternateClassName:"Ext.KeyNav",disabled:false,defaultEventAction:false,forceKeyDown:false,eventName:"keypress",statics:{keyOptions:{left:37,right:39,up:38,down:40,space:32,pageUp:33,pageDown:34,del:46,backspace:8,home:36,end:35,enter:13,esc:27,tab:9}},constructor:function(d){var c=this;if(arguments.length===2){c.legacyConstructor.apply(c,arguments);return}c.doConstruction(d)},legacyConstructor:function(c,d){this.doConstruction(Ext.apply({target:c},d))},doConstruction:function(g){var j=this,f={target:g.target,ignoreInputFields:g.ignoreInputFields,eventName:j.getKeyEvent("forceKeyDown" in g?g.forceKeyDown:j.forceKeyDown,g.eventName),capture:g.capture},h;if(j.map){j.map.destroy()}j.initConfig(g);if(g.processEvent){f.processEvent=g.processEvent;f.processEventScope=g.processEventScope||j}if(g.priority){f.priority=g.priority}if(g.keyMap){h=j.map=g.keyMap}else{h=j.map=new Ext.util.KeyMap(f);j.destroyKeyMap=true}this.addBindings(g);h.disable();if(!g.disabled){h.enable()}},addBindings:function(p){var u=this,m,r,s=u.map,o=Ext.util.KeyNav.keyOptions,t,q=p.scope||u;for(m in p){r=p[m];t=o[m];if(t!=null){m=t}if(r&&(m.length===1||!isNaN(m=parseInt(m,10)))){if(typeof r==="function"){r={handler:r,defaultEventAction:(p.defaultEventAction!==undefined)?p.defaultEventAction:u.defaultEventAction}}s.addBinding({key:m,ctrl:r.ctrl,shift:r.shift,alt:r.alt,handler:Ext.Function.bind(u.handleEvent,r.scope||q,[r.handler||r.fn,u],true),defaultEventAction:(r.defaultEventAction!==undefined)?r.defaultEventAction:u.defaultEventAction})}}},handleEvent:function(h,j,f,g){g.lastKeyEvent=j;return f.call(this,j)},destroy:function(c){var d=this;if(d.destroyKeyMap){d.map.destroy(c)}delete d.map;d.callParent()},enable:function(){if(this.map){this.map.enable();this.disabled=false}},disable:function(){if(this.map){this.map.disable()}this.disabled=true},setDisabled:function(b){this.map.setDisabled(b);this.disabled=b},getKeyEvent:function(c,d){if(c||(Ext.supports.SpecialKeyDownRepeat&&!d)){return"keydown"}else{return d||this.eventName}}},1,0,0,0,0,0,[Ext.util,"KeyNav",Ext,"KeyNav"],0));(Ext.cmd.derive("Ext.util.FocusableContainer",Ext.Mixin,{mixinConfig:{id:"focusablecontainer",before:{onAdd:"onFocusableChildAdd",onRemove:"onFocusableChildRemove",destroy:"destroyFocusableContainer",onFocusEnter:"onFocusEnter"},after:{afterRender:"initFocusableContainer",onFocusLeave:"onFocusLeave",afterShow:"activateFocusableContainerEl"}},isFocusableContainer:true,enableFocusableContainer:true,activeChildTabIndex:0,inactiveChildTabIndex:-1,privates:{initFocusableContainer:function(j){var f,h,g;if(this.enableFocusableContainer){j=j!=null?j:true;this.doInitFocusableContainer(j)}else{f=this.getFocusables();for(h=0,g=f.length;h<g;h++){f[h].focusableContainer=null}}},doInitFocusableContainer:function(g){var j=this,f,h;f=j.getFocusableContainerEl();if(g){j.clearFocusables()}h=j.findNextFocusableChild({step:1,beforeRender:true});if(h){j.activateFocusableContainerEl(f)}j.focusableContainerMouseListener=j.mon(f,"mousedown",j.onFocusableContainerMousedown,j);j.focusableKeyNav=j.createFocusableContainerKeyNav(f)},createFocusableContainerKeyNav:function(d){var c=this;return new Ext.util.KeyNav(d,{eventName:"keydown",ignoreInputFields:true,scope:c,tab:c.onFocusableContainerTabKey,enter:c.onFocusableContainerEnterKey,space:c.onFocusableContainerSpaceKey,up:c.onFocusableContainerUpKey,down:c.onFocusableContainerDownKey,left:c.onFocusableContainerLeftKey,right:c.onFocusableContainerRightKey})},destroyFocusableContainer:function(){if(this.enableFocusableContainer){this.doDestroyFocusableContainer()}},doDestroyFocusableContainer:function(){var b=this;if(b.keyNav){b.keyNav.destroy()}if(b.focusableContainerMouseListener){b.focusableContainerMouseListener.destroy()}b.focusableKeyNav=b.focusableContainerMouseListener=null},getFocusables:function(){return this.items.items},initDefaultFocusable:function(o){var r=this,p=r.activeChildTabIndex,u=false,s,q,v,t,w;s=r.getFocusables();t=s.length;if(!t){return}for(v=0;v<t;v++){q=s[v];if(q.focusable&&!q.disabled){u=true;w=q.getTabIndex();if(w!=null&&w>=p){return q}}}if(!u){return}q=r.findNextFocusableChild({beforeRender:o,items:s,step:true});if(q){r.activateFocusable(q)}return q},clearFocusables:function(){var j=this,g=j.getFocusables(),h=g.length,m,o;for(o=0;o<h;o++){m=g[o];if(m.focusable&&!m.disabled){j.deactivateFocusable(m)}}},activateFocusable:function(g,d){var f=d!=null?d:this.activeChildTabIndex;g.setTabIndex(f)},deactivateFocusable:function(g,d){var f=d!=null?d:this.inactiveChildTabIndex;g.setTabIndex(f)},onFocusableContainerTabKey:function(){return true},onFocusableContainerEnterKey:function(){return true},onFocusableContainerSpaceKey:function(){return true},onFocusableContainerUpKey:function(b){b.preventDefault();return this.moveChildFocus(b,false)},onFocusableContainerDownKey:function(b){b.preventDefault();return this.moveChildFocus(b,true)},onFocusableContainerLeftKey:function(b){b.preventDefault();return this.moveChildFocus(b,false)},onFocusableContainerRightKey:function(b){b.preventDefault();return this.moveChildFocus(b,true)},getFocusableFromEvent:function(d){var c=Ext.Component.fromElement(d.getTarget());return c},moveChildFocus:function(d,f){var g=this.getFocusableFromEvent(d);return this.focusChild(g,f,d)},focusChild:function(g,f){var d=this.findNextFocusableChild({child:g,step:f});if(d){d.focus()}return d},findNextFocusableChild:function(o){var p=o.beforeRender,s,q,w,v,r,u,t;s=o.items||this.getFocusables();v=o.step!=null?o.step:1;w=o.child;r=Ext.Array.indexOf(s,w);v=v===true?1:v===false?-1:v;t=s.length;u=v>0?(r<t?r+v:0):(r>0?r+v:t-1);for(;;u+=v){if(r<0&&(u>=t||u<0)){return null}else{if(u>=t){u=-1;continue}else{if(u<0){u=t;continue}else{if(u===r){return null}}}}q=s[u];if(!q||!q.focusable||q.disabled){continue}if(p||(q.isFocusable&&q.isFocusable())){return q}}return null},getFocusableContainerEl:function(){return this.el},onFocusableChildAdd:function(b){if(this.enableFocusableContainer){return this.doFocusableChildAdd(b)}},activateFocusableContainerEl:function(b){b=b||this.getFocusableContainerEl();if(b){b.set({tabIndex:this.activeChildTabIndex})}},deactivateFocusableContainerEl:function(b){b=b||this.getFocusableContainerEl();if(b){b.set({tabIndex:undefined})}},isFocusableContainerActive:function(){var m=this,o=false,g,j,h;g=m.getFocusableContainerEl();if(g&&g.isTabbable&&g.isTabbable()){o=true}else{j=m.lastFocusedChild;h=j&&j.getFocusEl&&j.getFocusEl();if(h&&h.isTabbable&&h.isTabbable()){o=true}}return o},doFocusableChildAdd:function(b){if(b.focusable){b.focusableContainer=this}},onFocusableChildRemove:function(b){if(this.enableFocusableContainer){return this.doFocusableChildRemove(b)}b.focusableContainer=null},doFocusableChildRemove:function(b){if(b===this.lastFocusedChild){this.lastFocusedChild=null;this.activateFocusableContainerEl()}},onFocusableContainerMousedown:function(g,d){var f=Ext.Component.fromElement(d);this.mousedownTimestamp=f===this?Ext.Date.now():0;if(f===this){g.preventDefault()}},onFocusEnter:function(q){var j=this,h=q.toComponent,p=j.mousedownTimestamp,m=50,o;if(!j.enableFocusableContainer){return null}j.mousedownTimestamp=0;if(h===j){if(!p||Ext.Date.now()-p>m){o=j.initDefaultFocusable();if(o){j.deactivateFocusableContainerEl();o.focus()}}}else{j.deactivateFocusableContainerEl()}return h},onFocusLeave:function(g){var d=this,f=d.lastFocusedChild;if(!d.enableFocusableContainer){return}if(!d.destroyed&&!d.destroying){d.clearFocusables();if(f&&!f.disabled){d.activateFocusable(f)}else{d.activateFocusableContainerEl()}}},beforeFocusableChildBlur:Ext.privateFn,afterFocusableChildBlur:Ext.privateFn,beforeFocusableChildFocus:function(c){var d=this;if(!d.enableFocusableContainer){return}d.clearFocusables();d.activateFocusable(c);if(c.needArrowKeys){d.guardFocusableChild(c)}},guardFocusableChild:function(h){var j=this,g=j.activeChildTabIndex,f;f=j.findNextFocusableChild({child:h,step:-1});if(f){f.setTabIndex(g)}f=j.findNextFocusableChild({child:h,step:1});if(f){f.setTabIndex(g)}},afterFocusableChildFocus:function(b){if(!this.enableFocusableContainer){return}this.lastFocusedChild=b},beforeFocusableChildEnable:Ext.privateFn,onFocusableChildEnable:function(c){var d=this;if(!d.enableFocusableContainer){return}if(c!==d.lastFocusedChild){d.deactivateFocusable(c);if(!d.isFocusableContainerActive()){d.activateFocusableContainerEl()}}},beforeFocusableChildDisable:function(g){var d=this,f;if(!d.enableFocusableContainer||d.destroying||d.destroyed){return}if(g.hasFocus){f=d.findNextFocusableChild({child:g})||g.findFocusTarget();if(f){f.focus()}}},onFocusableChildDisable:function(h){var j=this,g=j.lastFocusedChild,f;if(!j.enableFocusableContainer||j.destroying||j.destroyed){return}if(h===g){j.activateFocusableContainerEl()}f=j.findNextFocusableChild({step:1});if(!f){j.deactivateFocusableContainerEl()}},onFocusableChildShow:Ext.privateFn,onFocusableChildHide:Ext.privateFn,onFocusableChildMasked:Ext.privateFn,onFocusableChildDestroy:Ext.privateFn,onFocusableChildUpdate:Ext.privateFn}},0,0,0,0,0,0,[Ext.util,"FocusableContainer"],0));(Ext.cmd.derive("Ext.panel.Header",Ext.panel.Bar,{isHeader:true,defaultType:"tool",indicateDrag:false,weight:-1,shrinkWrap:3,iconAlign:"left",titleAlign:"left",titlePosition:0,titleRotation:"default",autoEl:{role:"presentation"},beforeRenderConfig:{glyph:null,icon:null,iconCls:null,iconAlign:null,title:{$value:{xtype:"title",flex:1},merge:function(c,d){if(typeof c!=="object"){c={text:c}}return Ext.merge(d?Ext.Object.chain(d):{},c)}},titleAlign:null,titlePosition:null,titleRotation:null},headerCls:"x-header",initComponent:function(){var h=this,j=h.items,f=h.itemPosition,g=[h.headerCls];h.tools=h.tools||[];h.items=j=(j?j.slice():[]);if(f!==undefined){h._userItems=j.slice();h.items=j=[]}h.indicateDragCls=h.headerCls+"-draggable";if(h.indicateDrag){g.push(h.indicateDragCls)}h.addCls(g);h.syncNoBorderCls();h.enableFocusableContainer=!h.isAccordionHeader&&h.tools.length>0;if(h.enableFocusableContainer){h.ariaRole="toolbar"}Ext.Array.push(j,h.tools);h.tools.length=0;Ext.panel.Bar.prototype.initComponent.call(this);h.on({dblclick:h.onDblClick,click:h.onClick,element:"el",scope:h})},addTool:function(d){var c=this;c.add(Ext.ComponentManager.create(d,"tool"));if(!c.isAccordionHeader&&c.tools.length>0&&!c.enableFocusableContainer){c.enableFocusableContainer=true;c.ariaRole="toolbar";if(c.rendered){c.ariaEl.dom.setAttribute("role","toolbar");c.initFocusableContainer(true)}}},afterLayout:function(){var g=this,j,h,o,m;if(g.vertical){h=g.frameTR;if(h){j=g.frameBR;o=g.frameTL;m=(g.getWidth()-h.getPadding("r")-((o)?o.getPadding("l"):g.el.getBorderWidth("l")))+"px";j.setStyle("background-position-x",m);h.setStyle("background-position-x",m)}}Ext.panel.Bar.prototype.afterLayout.call(this)},applyTitle:function(j,o){var m=this,h,g;j=j||"";h=typeof j==="string";if(h){j={text:j}}if(o){Ext.suspendLayouts();o.setConfig(j);Ext.resumeLayouts(true);j=o}else{if(h){j.xtype="title"}j.ui=m.ui;g=("rotation" in j);j.id=m.id+"-title";if(m.isAccordionHeader){j.ariaRole="tab";j.textElRole=null;j.focusable=true}j=Ext.create(j);if(!g&&m.vertical&&m.titleRotation==="default"){j.rotation=1}}return j},applyTitlePosition:function(c){var d=this.items.getCount();if(this._titleInItems){--d}return Math.max(Math.min(c,d),0)},beforeLayout:function(){Ext.panel.Bar.prototype.beforeLayout.call(this);this.syncBeforeAfterTitleClasses()},beforeRender:function(){var c=this,d=c.itemPosition;c.protoEl.unselectable();Ext.panel.Bar.prototype.beforeRender.call(this);if(d!==undefined){c.insert(d,c._userItems)}},getTools:function(){return this.tools.slice()},onAdd:function(d,f){var g=this.tools;Ext.panel.Bar.prototype.onAdd.call(this,d,f);if(d.isTool){g.push(d);g[d.type]=d}},onAdded:function(d,g,f){this.syncNoBorderCls();Ext.panel.Bar.prototype.onAdded.call(this,d,g,f)},onRemoved:function(d,g,f){this.syncNoBorderCls();Ext.panel.Bar.prototype.onRemoved.call(this,d,g,f)},setDock:function(o){var g=this,j=g.getTitle(),h=g.getTitleRotation(),m=j.getRotation();Ext.suspendLayouts();Ext.panel.Bar.prototype.setDock.call(this,o);if(h==="default"){h=(g.vertical?1:0);if(h!==m){j.setRotation(h)}if(g.rendered){g.resetItemMargins()}}Ext.resumeLayouts(true)},updateGlyph:function(b){this.getTitle().setGlyph(b)},updateIcon:function(b){this.getTitle().setIcon(b)},updateIconAlign:function(c,d){this.getTitle().setIconAlign(c)},updateIconCls:function(b){this.getTitle().setIconCls(b)},updateTitle:function(c,d){if(!d){this.insert(this.getTitlePosition(),c);this._titleInItems=true}this.titleCmp=c},updateTitleAlign:function(c,d){this.getTitle().setTextAlign(c)},updateTitlePosition:function(b){this.insert(b,this.getTitle())},updateTitleRotation:function(b){if(b==="default"){b=(this.vertical?1:0)}this.getTitle().setRotation(b)},privates:{fireClickEvent:function(f,g){var d="."+Ext.panel.Tool.prototype.baseCls;if(!g.getTarget(d)){this.fireEvent(f,this,g)}},getFramingInfoCls:function(){var g=this,d=Ext.panel.Bar.prototype.getFramingInfoCls.call(this),f=g.ownerCt;if(!g.expanding&&f&&(f.collapsed||g.isCollapsedExpander)){d+="-"+f.collapsedCls}return d+"-"+g.dock},onClick:function(b){this.fireClickEvent("click",b)},onDblClick:function(b){this.fireClickEvent("dblclick",b)},onFocusableContainerMousedown:function(g,d){var f=Ext.Component.fromElement(d);if(f===this){g.preventDefault()}else{this.mixins.focusablecontainer.onFocusableContainerMousedown.apply(this,arguments)}},syncBeforeAfterTitleClasses:function(B){var u=this,v=u.items,y=v.items,C=u.getTitlePosition(),D=y.length,w=v.generation,t=u.syncBeforeAfterGen,r,z,A,s;if(!B&&(t===w)){return}u.syncBeforeAfterGen=w;for(A=0;A<D;++A){s=y[A];r=s.afterTitleCls||(s.afterTitleCls=s.baseCls+"-after-title");z=s.beforeTitleCls||(s.beforeTitleCls=s.baseCls+"-before-title");if(!u.title||A<C){if(t){s.removeCls(r)}s.addCls(z)}else{if(A>C){if(t){s.removeCls(z)}s.addCls(r)}}}},syncNoBorderCls:function(){var d=this,f=this.ownerCt,g=d.headerCls+"-noborder";if(f?(f.border===false&&!f.frame):d.border===false){d.addCls(g)}else{d.removeCls(g)}}}},0,["header"],["component","box","container","header"],{component:true,box:true,container:true,header:true},["widget.header"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.panel,"Header"],0));(Ext.cmd.derive("Ext.layout.container.boxOverflow.None",Ext.Base,{alternateClassName:"Ext.layout.boxOverflow.None",factoryConfig:{defaultType:"none"},isBoxOverflowHandler:true,$configPrefixed:false,$configStrict:false,constructor:function(b){this.initConfig(b)},handleOverflow:Ext.emptyFn,clearOverflow:Ext.emptyFn,beginLayout:Ext.emptyFn,beginLayoutCycle:Ext.emptyFn,calculate:function(f){var g=this,j=f.state.boxPlan,h;if(j&&j.tooNarrow){h=g.handleOverflow(f);if(h){if(h.reservedSpace){g.layout.publishInnerCtSize(f,h.reservedSpace)}}}else{g.clearOverflow()}},completeLayout:Ext.emptyFn,finishedLayout:function(m){var o=this,h=o.layout.owner,g,j;if(h.hasListeners.overflowchange){g=h.query(">[hidden]");j=g.length;if(j!==o.lastHiddenCount){h.fireEvent("overflowchange",o.lastHiddenCount,j,g);o.lastHiddenCount=j}}},onRemove:Ext.emptyFn,getItem:function(b){return this.layout.owner.getComponent(b)},getOwnerType:function(d){var c;if(d.isToolbar){c="toolbar"}else{if(d.isTabBar){c="tab-bar"}else{if(d.isMenu){c="menu"}else{if(d.isBreadcrumb){c="breadcrumb"}else{c=d.getXType()}}}}return c},getPrefixConfig:Ext.emptyFn,getSuffixConfig:Ext.emptyFn,getOverflowCls:function(){return""},setVertical:function(){var d=this,f=d.layout,g=f.innerCt;g.removeCls(d.getOverflowCls(f.oppositeDirection));g.addCls(d.getOverflowCls(f.direction))}},1,0,0,0,["box.overflow.None","box.overflow.none"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.layout.container.boxOverflow,"None",Ext.layout.boxOverflow,"None"],0));(Ext.cmd.derive("Ext.layout.container.boxOverflow.Scroller",Ext.layout.container.boxOverflow.None,{alternateClassName:"Ext.layout.boxOverflow.Scroller",animateScroll:false,scrollIncrement:20,wheelIncrement:10,scrollRepeatInterval:60,scrollDuration:400,scrollerCls:"x-box-scroller",beforeSuffix:"-before-scroller",afterSuffix:"-after-scroller",constructor:function(d){var c=this;c.mixins.observable.constructor.call(c,d);c.scrollPosition=0;c.scrollSize=0},getPrefixConfig:function(){return{role:"presentation",id:this.layout.owner.id+this.beforeSuffix,cls:this.createScrollerCls("beforeX"),style:"display:none"}},getSuffixConfig:function(){return{role:"presentation",id:this.layout.owner.id+this.afterSuffix,cls:this.createScrollerCls("afterX"),style:"display:none"}},createScrollerCls:function(q){var o=this,p=o.layout,j=p.owner,r=o.getOwnerType(j),m=o.scrollerCls,s=m+" "+m+"-"+p.names[q]+" "+m+"-"+r+" "+m+"-"+r+"-"+j.ui;if(j.plain){s+=" "+m+"-plain"}return s},getOverflowCls:function(b){return this.scrollerCls+"-body-"+b},beginLayout:function(b){b.innerCtScrollPos=this.getScrollPosition();Ext.layout.container.boxOverflow.None.prototype.beginLayout.apply(this,arguments)},finishedLayout:function(r){var s=this,p=r.state.boxPlan,j=s.layout,q=j.names,o=Math.min(s.getMaxScrollPosition(),r.innerCtScrollPos),m;if(p&&p.tooNarrow){m=r.childItems[r.childItems.length-1].props;s.scrollSize=m[q.x]+m[q.width];s.updateScrollButtons();j.innerCt[q.setScrollLeft](o)}Ext.layout.container.boxOverflow.None.prototype.finishedLayout.call(this,r)},handleOverflow:function(v){var q=this,r=q.layout.names,p=r.getWidth,o=r.parallelMargins,u,s,t,w;q.showScrollers();t=q.getBeforeScroller();w=q.getAfterScroller();u=t[p]()+w[p]()+t.getMargin(o)+w.getMargin(o);s=v.targetContext.getPaddingInfo()[r.width];return{reservedSpace:Math.max(u-s,0)}},getBeforeScroller:function(){var b=this;return b._beforeScroller||(b._beforeScroller=b.createScroller(b.beforeSuffix,"beforeRepeater","scrollLeft"))},getAfterScroller:function(){var b=this;return b._afterScroller||(b._afterScroller=b.createScroller(b.afterSuffix,"afterRepeater","scrollRight"))},createScroller:function(p,r,o){var q=this,s=q.layout.owner,j=q.scrollerCls,m;m=s.el.getById(s.id+p);m.addClsOnOver(j+"-hover");m.addClsOnClick(j+"-pressed");m.setVisibilityMode(Ext.Element.DISPLAY);q[r]=new Ext.util.ClickRepeater(m,{interval:q.scrollRepeatInterval,handler:o,scope:q});return m},createWheelListener:function(){var b=this;b.wheelListener=b.layout.innerCt.on("mousewheel",b.onMouseWheel,b,{destroyable:true})},onMouseWheel:function(b){b.stopEvent();this.scrollBy(this.getWheelDelta(b)*this.wheelIncrement*-1,false)},getWheelDelta:function(b){return b.getWheelDelta()},clearOverflow:function(){this.hideScrollers()},showScrollers:function(){var b=this;if(!b.wheelListener){b.createWheelListener()}b.getBeforeScroller().show();b.getAfterScroller().show();b.layout.owner.addClsWithUI(b.layout.direction==="vertical"?"vertical-scroller":"scroller")},hideScrollers:function(){var d=this,g=d.getBeforeScroller(),f=d.getAfterScroller();if(g){g.hide();f.hide();d.layout.owner.removeClsWithUI(d.layout.direction==="vertical"?"vertical-scroller":"scroller")}},destroy:function(){Ext.destroyMembers(this,"beforeRepeater","afterRepeater","_beforeScroller","_afterScroller","wheelListener");this.callParent()},scrollBy:function(c,d){this.scrollTo(this.getScrollPosition()+c,d)},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},updateScrollButtons:function(){var f=this,h=f.getBeforeScroller(),g=f.getAfterScroller(),j;if(!h||!g){return}j=f.scrollerCls+"-disabled";h[f.atExtremeBefore()?"addCls":"removeCls"](j);g[f.atExtremeAfter()?"addCls":"removeCls"](j);f.scrolling=false},scrollLeft:function(){this.scrollBy(-this.scrollIncrement,false)},scrollRight:function(){this.scrollBy(this.scrollIncrement,false)},getScrollPosition:function(){var g=this,d=g.layout,f;if(isNaN(g.scrollPosition)){f=d.innerCt[d.names.getScrollLeft]()}else{f=g.scrollPosition}return f},getMaxScrollPosition:function(){var d=this,f=d.layout,g=d.scrollSize-f.innerCt.lastBox[f.names.width];return(g<0)?0:g},atExtremeBefore:function(){return !this.getScrollPosition()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollPosition()},setVertical:function(){var o=this,m=o.getBeforeScroller(),g=o.getAfterScroller(),j=o.layout.names,h=o.scrollerCls;m.removeCls(h+"-"+j.beforeY);g.removeCls(h+"-"+j.afterY);m.addCls(h+"-"+j.beforeX);g.addCls(h+"-"+j.afterX);Ext.layout.container.boxOverflow.None.prototype.setVertical.call(this)},scrollTo:function(m,j){var p=this,q=p.layout,o=q.names,r=p.getScrollPosition(),s=Ext.Number.constrain(m,0,p.getMaxScrollPosition());if(s!==r&&!p.scrolling){p.scrollPosition=NaN;if(j===undefined){j=p.animateScroll}q.innerCt[o.scrollTo](o.beforeScrollX,s,j?p.getScrollAnim():false);if(j){p.scrolling=true}else{p.updateScrollButtons()}p.fireEvent("scroll",p,s,j?p.getScrollAnim():false)}},scrollToItem:function(p,w){var q=this,t=q.layout,v=t.owner,r=t.names,y=t.innerCt,z,u,s;p=q.getItem(p);if(p!==undefined){if(p===v.items.first()){s=0}else{if(p===v.items.last()){s=q.getMaxScrollPosition()}else{z=q.getItemVisibility(p);if(!z.fullyVisible){u=p.getBox(false,true);s=u[r.x];if(z.hiddenEnd){s-=(y[r.getWidth]()-u[r.width])}}}}if(s!==undefined){q.scrollTo(s,w)}}},getItemVisibility:function(o){var q=this,v=q.getItem(o).getBox(true,true),u=q.layout,r=u.names,s=v[r.x],t=s+v[r.width],w=q.getScrollPosition(),p=w+u.innerCt[r.getWidth]();return{hiddenStart:s<w,hiddenEnd:t>p,fullyVisible:s>=w&&t<=p}}},1,0,0,0,["box.overflow.Scroller","box.overflow.scroller"],[["observable",Ext.mixin.Observable]],[Ext.layout.container.boxOverflow,"Scroller",Ext.layout.boxOverflow,"Scroller"],0));(Ext.cmd.derive("Ext.dd.DragDropManager",Ext.Base,{singleton:true,alternateClassName:["Ext.dd.DragDropMgr","Ext.dd.DDM"],ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:true,stopPropagation:true,initialized:false,locked:false,init:function(){this.initialized=true},POINT:0,INTERSECT:1,mode:0,notifyOccluded:false,dragCls:"x-dd-drag-current",_execOnAll:function(s,j){var q=this.ids,r,m,o,p;for(r in q){if(q.hasOwnProperty(r)){p=q[r];for(m in p){if(p.hasOwnProperty(m)){o=p[m];if(!this.isTypeOfDD(o)){continue}o[s].apply(o,j)}}}}},addListeners:function(){var b=this;b.init();Ext.getDoc().on({mouseup:b.handleMouseUp,mousemove:{fn:b.handleMouseMove,capture:false},dragstart:b.preventDrag,drag:b.preventDrag,dragend:b.preventDrag,capture:true,scope:b});Ext.getWin().on({unload:b._onUnload,resize:b._onResize,scope:b})},preventDrag:function(b){if(this.isMouseDown){b.stopPropagation()}},_onResize:function(b){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=true},unlock:function(){this.locked=false},isLocked:function(){return this.locked},locationCache:{},useCache:true,clickPixelThresh:8,dragThreshMet:false,clickTimeout:null,startX:0,startY:0,regDragDrop:function(c,d){if(!this.initialized){this.init()}if(!this.ids[d]){this.ids[d]={}}this.ids[d][c.id]=c},removeDDFromGroup:function(g,f){if(!this.ids[f]){this.ids[f]={}}var d=this.ids[f];if(d&&d[g.id]){delete d[g.id]}},_remove:function(m,g){var o=this,q=o.ids,j=m.groups,p;if(o.clearingAll){return}if(o.dragCurrent===m){o.dragCurrent=null}for(p in j){if(j.hasOwnProperty(p)){if(g){delete q[p]}else{if(q[p]){delete q[p][m.id]}}}}delete o.handleIds[m.id];delete o.locationCache[m.id]},regHandle:function(c,d){if(!this.handleIds[c]){this.handleIds[c]={}}this.handleIds[c][d]=d},isDragDrop:function(b){return(this.getDDById(b))?true:false},getRelated:function(m,h){var o=[],p,q,j;for(p in m.groups){for(q in this.ids[p]){j=this.ids[p][q];if(!this.isTypeOfDD(j)){continue}if(!h||j.isTarget){o[o.length]=j}}}return o},isLegalTarget:function(j,m){var g=this.getRelated(j,true),o,h;for(o=0,h=g.length;o<h;++o){if(g[o].id===m.id){return true}}return false},isTypeOfDD:function(b){return(b&&b.__ygDragDrop)},isHandle:function(c,d){return(this.handleIds[c]&&this.handleIds[c][d])},getDDById:function(h,j){var f,g;for(f in this.ids){g=this.ids[f][h];if(g instanceof Ext.dd.DDTarget||j){return g}}return null},handleMouseDown:function(j,m){var g=this,o,h;g.isMouseDown=true;if(Ext.quickTipsActive){Ext.tip.QuickTipManager.ddDisable()}g.currentPoint=j.getPoint();if(g.dragCurrent){g.handleMouseUp(j)}g.mousedownEvent=j;g.currentTarget=j.getTarget();g.dragCurrent=m;h=m.getEl();Ext.fly(h).setCapture();o=j.getXY();g.startX=o[0];g.startY=o[1];g.offsetX=g.offsetY=0;g.deltaX=g.startX-h.offsetLeft;g.deltaY=g.startY-h.offsetTop;g.dragThreshMet=false},startDrag:function(g,j){var o=this,m=o.dragCurrent,h;clearTimeout(o.clickTimeout);if(m){m.b4StartDrag(g,j);m.startDrag(g,j);h=m.getDragEl();if(h){Ext.fly(h).addCls(o.dragCls)}}o.dragThreshMet=true},handleMouseUp:function(c){var d=this;d.isMouseDown=false;if(Ext.quickTipsActive){Ext.tip.QuickTipManager.ddEnable()}if(!d.dragCurrent){return}if(Ext.isIE&&document.releaseCapture){document.releaseCapture()}clearTimeout(d.clickTimeout);if(d.dragThreshMet){d.fireEvents(c,true)}d.stopDrag(c);d.stopEvent(c);d.mousedownEvent=d.currentTarget=null},stopEvent:function(b){if(this.stopPropagation){b.stopPropagation()}if(this.preventDefault){b.preventDefault()}},stopDrag:function(h){var f=this,j=f.dragCurrent,g;if(j){if(f.dragThreshMet){g=j.getDragEl();if(g){Ext.fly(g).removeCls(f.dragCls)}j.b4EndDrag(h);j.endDrag(h)}f.dragCurrent.onMouseUp(h)}f.dragCurrent=null;f.dragOvers={}},handleMouseMove:function(p){var r=this,q=r.dragCurrent,o=r.currentPoint=p.getPoint(),t=o.x,m=o.y,s,u;r.offsetX=t-r.startX;r.offsetY=m-r.startY;if(!q){return true}if(!r.dragThreshMet){s=Math.abs(r.offsetX);u=Math.abs(r.offsetY);if(s>r.clickPixelThresh||u>r.clickPixelThresh){r.startDrag(r.startX,r.startY)}}if(r.dragThreshMet){q.b4Drag(p);q.onDrag(p);if(!q.moveOnly){r.fireEvents(p,false)}}r.stopEvent(p);return true},fireEvents:function(O,P){var K=this,N=Ext.supports.Touch,U=K.dragCurrent,E=K.currentPoint,I=E.x,J=E.y,L=[],T=[],R=[],Y=[],M=[],D=[],Z=N?document.documentElement.clientWidth/window.innerWidth:1,W,V,Q,X,G,F,H,S;if(!U||U.isLocked()){return}S=!(U.deltaX<0||U.deltaY<0);if(N||(!K.notifyOccluded&&(!Ext.supports.CSSPointerEvents||Ext.isIE10m||Ext.isOpera)&&S)){W=U.getDragEl();if(S){W.style.visibility="hidden"}O.target=document.elementFromPoint(I/Z,J/Z);if(S){W.style.visibility="visible"}}for(G in K.dragOvers){V=K.dragOvers[G];delete K.dragOvers[G];if(!K.isTypeOfDD(V)||V.destroyed){continue}if(K.notifyOccluded){if(!this.isOverTarget(E,V,K.mode)){R.push(V)}}else{if(!O.within(V.getEl())){R.push(V)}}T[G]=true}for(H in U.groups){if("string"!==typeof H){continue}for(G in K.ids[H]){V=K.ids[H][G];if(K.isTypeOfDD(V)&&(Q=V.getEl())&&(V.isTarget)&&(!V.isLocked())&&(Ext.fly(Q).isVisible(true))&&((V!==U)||(U.ignoreSelf===false))){if(K.notifyOccluded){if((V.zIndex=K.getZIndex(Q))!==-1){X=true}L.push(V)}else{if(O.within(V.getEl())){L.push(V);break}}}}}if(X){Ext.Array.sort(L,K.byZIndex)}for(G=0,F=L.length;G<F;G++){V=L[G];if(K.isOverTarget(E,V,K.mode)){if(P){M.push(V)}else{if(!T[V.id]){D.push(V)}else{Y.push(V)}K.dragOvers[V.id]=V}if(!K.notifyOccluded){break}}}if(K.mode){if(R.length){U.b4DragOut(O,R);U.onDragOut(O,R)}if(D.length){U.onDragEnter(O,D)}if(Y.length){U.b4DragOver(O,Y);U.onDragOver(O,Y)}if(M.length){U.b4DragDrop(O,M);U.onDragDrop(O,M)}}else{for(G=0,F=R.length;G<F;++G){U.b4DragOut(O,R[G].id);U.onDragOut(O,R[G].id)}for(G=0,F=D.length;G<F;++G){U.onDragEnter(O,D[G].id)}for(G=0,F=Y.length;G<F;++G){U.b4DragOver(O,Y[G].id);U.onDragOver(O,Y[G].id)}for(G=0,F=M.length;G<F;++G){U.b4DragDrop(O,M[G].id);U.onDragDrop(O,M[G].id)}}if(P&&!M.length){U.onInvalidDrop(O)}},getZIndex:function(f){var g=document.body,j,h=-1;f=Ext.getDom(f);while(f!==g){if(!isNaN(j=Number(Ext.fly(f).getStyle("zIndex")))){h=j}f=f.parentNode}return h},byZIndex:function(c,d){return c.zIndex<d.zIndex},getBestMatch:function(o){var j=null,g=o.length,m,h;if(g===1){j=o[0]}else{for(m=0;m<g;++m){h=o[m];if(h.cursorIsOver){j=h;break}else{if(!j||j.overlap.getArea()<h.overlap.getArea()){j=h}}}}return j},refreshCache:function(g){var h,o,m,j;for(h in g){if("string"!==typeof h){continue}for(o in this.ids[h]){m=this.ids[h][o];if(this.isTypeOfDD(m)){j=this.getLocation(m);if(j){this.locationCache[m.id]=j}else{delete this.locationCache[m.id]}}}}},verifyEl:function(b){return Ext.getBody().contains(b)},getLocation:function(w){if(!this.isTypeOfDD(w)){return null}if(w.getRegion){return w.getRegion()}var z=w.getEl(),t,A,B,b,r,D,C,u,y;try{t=Ext.fly(z).getXY()}catch(v){}if(!t){return null}A=t[0];B=A+z.offsetWidth;b=t[1];r=b+z.offsetHeight;D=b-w.padding[0];C=B+w.padding[1];u=r+w.padding[2];y=A-w.padding[3];return new Ext.util.Region(D,C,u,y)},isOverTarget:function(o,w,u){var s=this.locationCache[w.id],p,r,v,t,q;if(!s||!this.useCache){s=this.getLocation(w);this.locationCache[w.id]=s}if(!s){return false}w.cursorIsOver=s.contains(o);p=this.dragCurrent;if(!p||!p.getTargetCoord||(!u&&!p.constrainX&&!p.constrainY)){return w.cursorIsOver}w.overlap=null;r=p.getTargetCoord(o.x,o.y);v=p.getDragEl();t=new Ext.util.Region(r.y,r.x+v.offsetWidth,r.y+v.offsetHeight,r.x);q=t.intersect(s);if(q){w.overlap=q;return(u)?true:w.cursorIsOver}else{return false}},_onUnload:function(c,d){Ext.dd.DragDropManager.unregAll()},unregAll:function(){var g=this,f=g.elementCache,d;if(g.dragCurrent){g.stopDrag();g.dragCurrent=null}g.clearingAll=true;g._execOnAll("unreg",[]);delete g.clearingAll;for(d in f){delete f[d]}g.elementCache={};g.ids={};g.handleIds={}},elementCache:{},getElWrapper:function(c){var d=this.elementCache[c];if(!d||!d.el){d=this.elementCache[c]=new this.ElementWrapper(Ext.getDom(c))}return d},getElement:function(b){return Ext.getDom(b)},getCss:function(c){var d=Ext.getDom(c);return(d)?d.style:null},ElementWrapper:function(b){this.el=b||null;this.id=this.el&&b.id;this.css=this.el&&b.style},getPosX:function(b){return Ext.fly(b).getX()},getPosY:function(b){return Ext.fly(b).getY()},swapNode:function(j,g){if(j.swapNode){j.swapNode(g)}else{var h=g.parentNode,f=g.nextSibling;if(f===j){h.insertBefore(j,g)}else{if(g===j.nextSibling){h.insertBefore(g,j)}else{j.parentNode.replaceChild(g,j);h.insertBefore(j,f)}}}},getScroll:function(){var m=window.document,j=m.documentElement,h=m.body,o=0,g=0;if(j&&(j.scrollTop||j.scrollLeft)){o=j.scrollTop;g=j.scrollLeft}else{if(h){o=h.scrollTop;g=h.scrollLeft}}return{top:o,left:g}},getStyle:function(c,d){return Ext.fly(c).getStyle(d)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(f,g){var d=Ext.fly(g).getXY();Ext.fly(f).setXY(d)},numericSort:function(a,b){return(a-b)},handleWasClicked:function(f,g){if(this.isHandle(g,f.id)){return true}else{var d=f.parentNode;while(d){if(this.isHandle(g,d.id)){return true}else{d=d.parentNode}}}return false}},0,0,0,0,0,0,[Ext.dd,"DragDropManager",Ext.dd,"DragDropMgr",Ext.dd,"DDM"],function(b){Ext.onInternalReady(function(){b.addListeners()})}));(Ext.cmd.derive("Ext.resizer.Splitter",Ext.Component,{childEls:["collapseEl"],renderTpl:['<tpl if="collapsible===true">','<div id="{id}-collapseEl" data-ref="collapseEl" role="presentation" class="',"x-","collapse-el ","x-",'layout-split-{collapseDir}{childElCls}">',"</div>","</tpl>"],isSplitter:true,baseCls:"x-splitter",collapsedClsInternal:"x-splitter-collapsed",canResize:true,collapsible:null,collapseOnDblClick:true,defaultSplitMin:40,defaultSplitMax:1000,collapseTarget:"next",horizontal:false,vertical:false,size:5,tracker:null,ariaRole:"separator",focusable:true,tabIndex:0,getTrackerConfig:function(){return Ext.apply({xclass:"Ext.resizer.SplitterTracker",el:this.el,splitter:this},this.tracker)},beforeRender:function(){var j=this,h=j.getCollapseTarget(),f=j.collapsible,g;Ext.Component.prototype.beforeRender.call(this);if(h.collapsed){j.addCls(j.collapsedClsInternal)}if(!j.canResize){j.addCls(j.baseCls+"-noresize")}Ext.applyIf(j.renderData,{collapseDir:j.getCollapseDirection(),collapsible:(f!==null)?f:h.collapsible});j.ariaRenderAttributes=j.ariaRenderAttributes||{};j.ariaRenderAttributes["aria-orientation"]=j.orientation;j.protoEl.unselectable()},onRender:function(){var c=this,d;Ext.Component.prototype.onRender.apply(this,arguments);if(c.performCollapse!==false){if(c.renderData.collapsible){c.mon(c.collapseEl,"click",c.toggleTargetCmp,c)}if(c.collapseOnDblClick){c.mon(c.el,"dblclick",c.toggleTargetCmp,c)}}c.getCollapseTarget().on({collapse:c.onTargetCollapse,expand:c.onTargetExpand,beforeexpand:c.onBeforeTargetExpand,beforecollapse:c.onBeforeTargetCollapse,scope:c});if(c.canResize){c.tracker=Ext.create(c.getTrackerConfig());c.relayEvents(c.tracker,["beforedragstart","dragstart","dragend"])}d=c.collapseEl;if(d){d.lastCollapseDirCls=c.collapseDirProps[c.collapseDirection].cls}},getCollapseDirection:function(){var m=this,q=m.collapseDirection,o,j,h,p;if(!q){o=m.collapseTarget;if(o.isComponent){q=o.collapseDirection}if(!q){p=m.ownerCt.layout.type;if(o.isComponent){h=m.ownerCt.items;j=Number(h.indexOf(o)===h.indexOf(m)-1)<<1|Number(p==="hbox")}else{j=Number(m.collapseTarget==="prev")<<1|Number(p==="hbox")}q=["bottom","right","top","left"][j]}m.collapseDirection=q}m.setOrientation((q==="top"||q==="bottom")?"horizontal":"vertical");return q},getCollapseTarget:function(){var b=this;return b.collapseTarget.isComponent?b.collapseTarget:b.collapseTarget==="prev"?b.previousSibling():b.nextSibling()},setCollapseEl:function(c){var d=this.collapseEl;if(d){d.setDisplayed(c)}},onBeforeTargetExpand:function(b){this.setCollapseEl("none")},onBeforeTargetCollapse:function(){this.setCollapseEl("none")},onTargetCollapse:function(c){var d=this;if(c===d.getCollapseTarget()&&c[d.orientation==="vertical"?"collapsedHorizontal":"collapsedVertical"]()){d.el.addCls(d.collapsedClsInternal+" "+(d.collapsedCls||""))}d.setCollapseEl("")},onTargetExpand:function(c){var d=this;d.el.removeCls(d.collapsedClsInternal+" "+(d.collapsedCls||""));d.setCollapseEl("")},collapseDirProps:{top:{cls:"x-layout-split-top"},right:{cls:"x-layout-split-right"},bottom:{cls:"x-layout-split-bottom"},left:{cls:"x-layout-split-left"}},orientationProps:{horizontal:{opposite:"vertical",fixedAxis:"height",stretchedAxis:"width"},vertical:{opposite:"horizontal",fixedAxis:"width",stretchedAxis:"height"}},applyCollapseDirection:function(){var j=this,f=j.collapseEl,h=j.collapseDirProps[j.collapseDirection],g;if(f){g=f.lastCollapseDirCls;if(g){f.removeCls(g)}f.addCls(f.lastCollapseDirCls=h.cls)}},applyOrientation:function(){var q=this,s=q.orientation,r=q.orientationProps[s],p=q.size,j=r.fixedAxis,o=r.stretchedAxis,m=q.baseCls+"-";q[s]=true;q[r.opposite]=false;if(!q.hasOwnProperty(j)||q[j]==="100%"){q[j]=p}if(!q.hasOwnProperty(o)||q[o]===p){q[o]="100%"}q.removeCls(m+r.opposite);q.addCls(m+s)},setOrientation:function(d){var c=this;if(c.orientation!==d){c.orientation=d;c.applyOrientation()}},updateOrientation:function(){delete this.collapseDirection;this.getCollapseDirection();this.applyCollapseDirection()},toggleTargetCmp:function(m,g){var o=this.getCollapseTarget(),j=o.placeholder,h;if(Ext.isFunction(o.expand)&&Ext.isFunction(o.collapse)){if(j&&!j.hidden){h=true}else{h=!o.hidden}if(h){if(o.collapsed){o.expand()}else{if(o.collapseDirection){o.collapse()}else{o.collapse(this.renderData.collapseDir)}}}}},setSize:function(){var b=this;Ext.Component.prototype.setSize.apply(this,arguments);if(Ext.isIE&&b.el){b.el.repaint()}},beforeDestroy:function(){Ext.destroy(this.tracker);Ext.Component.prototype.beforeDestroy.call(this)}},0,["splitter"],["component","box","splitter"],{component:true,box:true,splitter:true},["widget.splitter"],0,[Ext.resizer,"Splitter"],0));Ext.define("Ext.theme.neptune.resizer.Splitter",{override:"Ext.resizer.Splitter",size:8});Ext.define("Ext.theme.triton.resizer.Splitter",{override:"Ext.resizer.Splitter",size:10});(Ext.cmd.derive("Ext.layout.container.Box",Ext.layout.container.Container,{alternateClassName:"Ext.layout.BoxLayout",type:"box",config:{align:"begin",constrainAlign:false,enableSplitters:true,overflowHandler:{$value:null,merge:function(c,d){if(typeof c==="string"){c={type:c}}return Ext.merge(d?Ext.Object.chain(d):{},c)}},padding:0,pack:"start",stretchMaxPartner:undefined,vertical:false,alignRoundingMethod:"round"},itemCls:"x-box-item",targetCls:"x-box-layout-ct",targetElCls:"x-box-target",innerCls:"x-box-inner",manageMargins:true,createsInnerCt:true,childEls:["innerCt","targetEl"],renderTpl:['{%var oc,l=values.$comp.layout,oh=l.overflowHandler;if (oh && oh.getPrefixConfig!==Ext.emptyFn) {if(oc=oh.getPrefixConfig())dh.generateMarkup(oc, out)}%}<div id="{ownerId}-innerCt" data-ref="innerCt" role="presentation" class="{[l.innerCls]}{[oh ? (" " + oh.getOverflowCls(l.direction)) : ""]}"><div id="{ownerId}-targetEl" data-ref="targetEl" class="{targetElCls}" role="presentation">{%this.renderBody(out, values)%}</div></div>{%if (oh && oh.getSuffixConfig!==Ext.emptyFn) {if(oc=oh.getSuffixConfig())dh.generateMarkup(oc, out)}%}',{disableFormats:true,definitions:"var dh=Ext.DomHelper;"}],constructor:function(f){var g=this,d;Ext.layout.container.Container.prototype.constructor.apply(this,arguments);g.setVertical(g.vertical);g.flexSortFn=g.flexSort.bind(g);d=typeof g.padding;if(d==="string"||d==="number"){g.padding=Ext.util.Format.parseBox(g.padding);g.padding.height=g.padding.top+g.padding.bottom;g.padding.width=g.padding.left+g.padding.right}},_beginRe:/^(?:begin|left|top)$/,_centerRe:/^(?:center|middle)$/,_endRe:/^(?:end|right|bottom)$/,_percentageRe:/^\s*(\d+(?:\.\d*)?)\s*[%]\s*$/,getItemSizePolicy:function(L,K){var z=this,B=z.sizePolicy,D=z.align,E=L.flex,N=D,A=z.names,C=A.height,w=A.width,I=L[w],M=L[C],G=z._percentageRe,H=G.test(I),F=(D==="stretch"),J=(D==="stretchmax"),y=z.constrainAlign;if(!K&&(F||E||H||(y&&!J))){K=z.owner.getSizeModel()}if(F){if(!G.test(M)&&K[C].shrinkWrap){N="stretchmax"}}else{if(!J){if(G.test(M)){N="stretch"}else{if(y&&!K[C].shrinkWrap){N="stretchmax"}else{N=""}}}}if(E||H){if(!K[w].shrinkWrap){B=B.flex}}return B[N]},flexSort:function(L,a){var y=this.names.maxWidth,E=this.names.minWidth,b=Infinity,z=L.target,I=a.target,B=z.flex,C=I.flex,H=0,G,K,A,F,J,D;A=z[y]||b;F=I[y]||b;G=z[E]||0;K=I[E]||0;J=isFinite(G)||isFinite(K);D=isFinite(A)||isFinite(F);if(J||D){if(D){H=A-F}if(H===0&&J){H=K-G}if(H===0){if(D){H=C-B}else{H=B-C}}}return H},isItemBoxParent:function(b){return true},isItemShrinkWrap:function(b){return true},roundFlex:function(b){return Math.floor(b)},beginCollapse:function(c){var d=this;if(d.direction==="vertical"&&c.collapsedVertical()){c.collapseMemento.capture(["flex"]);delete c.flex}else{if(d.direction==="horizontal"&&c.collapsedHorizontal()){c.collapseMemento.capture(["flex"]);delete c.flex}}},beginExpand:function(b){b.collapseMemento.restore(["flex"])},beginLayout:function(s){var p=this,v=p.owner,t=v.stretchMaxPartner,w=p.innerCt.dom.style,q=p.names,r=p.overflowHandler,o=v.getScrollable(),u;s.boxNames=q;if(r){r.beginLayout(s)}if(typeof t==="string"){t=Ext.getCmp(t)||v.query(t)[0]}s.stretchMaxPartner=t&&s.context.getCmp(t);Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments);s.innerCtContext=s.getEl("innerCt",p);s.targetElContext=s.getEl("targetEl",p);if(o){s.ownerScrollable=o;u=o.getPosition();if(u.x||u.y){s.scrollRestore=u}}w.width=w.height=""},beginLayoutCycle:function(C,s){var v=this,F=C.state,u=C.ownerScrollable,y=v.align,w=C.boxNames,t=v.pack,D=v._centerRe,B=v.overflowHandler,E=C.state.canScroll,z,A;if(B){B.beginLayoutCycle(C,s)}Ext.layout.container.Container.prototype.beginLayoutCycle.apply(this,arguments);C.parallelSizeModel=z=C[w.widthModel];C.perpendicularSizeModel=A=C[w.heightModel];C.boxOptions={align:y={stretch:y==="stretch",stretchmax:y==="stretchmax",center:D.test(y),bottom:v._endRe.test(y)},pack:t={center:D.test(t),end:t==="end"}};if(u){if(!E){F.canScroll={parallel:!z.shrinkWrap&&u[w.getX](),perpendicular:!A.shrinkWrap&&u[w.getY]()}}if(!F.actualScroll){F.actualScroll={parallel:false,perpendicular:false}}}if(y.stretch&&A.shrinkWrap){y.stretchmax=true;y.stretch=false}y.nostretch=!(y.stretch||y.stretchmax);if(z.shrinkWrap){t.center=t.end=false}v.cacheFlexes(C);v.targetEl.setWidth(20000)},cacheFlexes:function(V){var L=this,T=V.boxNames,af=T.widthModel,Z=T.heightModel,ad=V.boxOptions.align.nostretch,I=0,ae=V.childItems,G=ae.length,P=[],R=0,U=0,J=0,W=T.minWidth,Q=T.minHeight,Y=L._percentageRe,S=0,N=0,aa,M,H,X,ac,ab,K,O;while(G--){M=ae[G];aa=M.target;ab=M[af];if(ab.calculated){M.flex=H=aa.flex;if(H){I+=H;P.push(M);R+=aa[W]||0}else{X=Y.exec(aa[T.width]);M.percentageParallel=parseFloat(X[1])/100;++S}}if(ab.configured){K=aa[T.width]}else{K=aa[W]||0}J+=K;ac=M[Z];if(ad&&ac.calculated){X=Y.exec(aa[T.height]);M.percentagePerpendicular=parseFloat(X[1])/100;++N}if(ac.configured){O=aa[T.height]}else{O=aa[Q]||0}if(O>U){U=O}}V.flexedItems=P;V.flexedMinWidth=R;V.smallestWidth=J;V.smallestHeight=U;V.totalFlex=I;V.percentageWidths=S;V.percentageHeights=N;Ext.Array.sort(P,L.flexSortFn)},calculate:function(u){var q=this,r=u.boxNames,w=u.state,s=w.actualScroll,o=w.needsScroll,v=w.canScroll,p=w.boxPlan||(w.boxPlan={}),t=q.overflowHandler;p.targetSize=q.getContainerSize(u);if(v&&!o){w.needsScroll=o={parallel:v.parallel&&p.targetSize[r.width]<u.smallestWidth,perpendicular:v.perpendicular&&p.targetSize[r.height]<u.smallestHeight}}if(!w.parallelDone){w.parallelDone=q.calculateParallel(u,r,p)}if(!w.perpendicularDone){w.perpendicularDone=q.calculatePerpendicular(u,r,p)}if(w.parallelDone&&w.perpendicularDone){if(v&&!w.scrollPass){if(o.parallel!==s.parallel||o.perpendicular!==s.perpendicular){u.invalidate({state:{scrollPass:true,canScroll:v,needsScroll:s}});q.done=false;return}}q.publishInnerCtSize(u);if(q.done&&u.boxOptions.align.stretchmax&&!w.stretchMaxDone){q.calculateStretchMax(u,r,p);w.stretchMaxDone=true}if(t){t.calculate(u)}}else{q.done=false}},calculateParallel:function(ag,S,ab){var am=this,ap=ag.parallelSizeModel.shrinkWrap,aa=S.width,aw=ag.childItems,ak=S.beforeX,W=S.afterX,at=S.setWidth,ad=aw.length,ah=ag.flexedItems,X=ah.length,an=ag.boxOptions.pack,V=am.padding,aB=ab.targetSize,ao=aB[aa],R=ag.state,ae=R.needsScroll,al=R.canScroll,ac=0,av=V[ak],Y=av+V[W],aj=Ext.getScrollbarSize(),ay=aj[S.width],aC=aj[S.height],U,af,ax,ar,aq,au,aA,T,Z,ai,az;if(!ap&&!aB[S.gotWidth]){return false}for(U=0;U<ad;++U){aq=aw[U];af=aq.marginInfo||aq.getMarginInfo();ac+=af[aa];if(!aq[S.widthModel].calculated){Z=aq.getProp(aa);Y+=Z;if(isNaN(Y)){return false}}}Y+=ac;if(ag.percentageWidths){ai=ao-ac;if(isNaN(ai)){return false}for(U=0;U<ad;++U){aq=aw[U];if(aq.percentageParallel){Z=Math.ceil(ai*aq.percentageParallel);Z=aq.setWidth(Z);Y+=Z}}}if(ap){az=0;ab.tooNarrow=false}else{az=ao-Y;if(ae&&ae.perpendicular){az-=aC}ab.tooNarrow=az<ag.flexedMinWidth;if(ab.tooNarrow&&al&&al.parallel){R.actualScroll.parallel=true}}T=Y;ax=az;ar=ag.totalFlex;for(U=0;U<X;U++){aq=ah[U];au=aq.flex;aA=am.roundFlex((au/ar)*ax);aA=aq[at](aA);T+=aA;ax=Math.max(0,ax-aA);ar-=au}if(an.center){av+=ax/2;if(av<0){av=0}}else{if(an.end){av+=ax}}for(U=0;U<ad;++U){aq=aw[U];af=aq.marginInfo;av+=af[ak];aq.setProp(S.x,av);av+=af[W]+aq.props[aa]}T+=ag.targetContext.getPaddingInfo()[aa];ag.state.contentWidth=T;if(ae&&ae.perpendicular){if(ap){T+=ay}ag[S.hasOverflowY]=true;ag.target.componentLayout[S.setWidthInDom]=true;ag[S.invalidateScrollY]=Ext.isIE8}ag[S.setContentWidth](T);return true},calculatePerpendicular:function(aq,Z,ak){var at=this,V=aq.state,ao=V.needsScroll,ar=V.canScroll,aH=aq.perpendicularSizeModel.shrinkWrap,aJ=ak.targetSize,aD=aq.childItems,al=aD.length,aA=Math.max,aB=Z.height,az=Z.setHeight,aE=Z.beforeY,au=Z.y,ac=at.padding,aC=ac[aE],ay=aJ[aB]-aC-ac[Z.afterY],af=aq.boxOptions.align,ax=af.stretch,aw=af.stretchmax,W=af.center,X=af.bottom,ad=at.constrainAlign,ae=0,ai=0,ag=at.onBeforeConstrainInvalidateChild,aj=at.onAfterConstrainInvalidateChild,aK=Ext.getScrollbarSize().height,am,ab,ah,ap,an,aI,av,aG,Y,aa,aF;if(!aH&&!aJ[Z.gotHeight]){return false}if(ax||((W||X)&&!aH)){if(isNaN(ay)){return false}}if(ao&&ao.parallel){if(aH){aa=true}else{ay-=aK;ak.targetSize[aB]-=aK}}if(ax){aI=ay;ae=aA(aI,aq.smallestHeight)}else{for(ab=0;ab<al;ab++){av=aD[ab];ap=(av.marginInfo||av.getMarginInfo())[aB];if(!(aF=av.percentagePerpendicular)){ah=av.getProp(aB)}else{++ai;if(aH){continue}else{ah=aF*ay-ap;ah=av[Z.setHeight](ah)}}if(!aH&&ad&&av[Z.heightModel].shrinkWrap&&ah>ay){av.invalidate({before:ag,after:aj,layout:at,childHeight:ay,names:Z});aq.state.parallelDone=false}if(isNaN(ae=aA(ae,ah+ap,av.target[Z.minHeight]||0))){return false}}}if(aa){ae+=aK;aq[Z.hasOverflowX]=true;aq.target.componentLayout[Z.setHeightInDom]=true;aq[Z.invalidateScrollX]=Ext.isIE8}aG=aq.stretchMaxPartner;if(aG){aq.setProp("maxChildHeight",ae);Y=aG.childItems;if(Y&&Y.length){ae=aA(ae,aG.getProp("maxChildHeight"));if(isNaN(ae)){return false}}}aq[Z.setContentHeight](ae+at.padding[aB]+aq.targetContext.getPaddingInfo()[aB]);if(aa){ae-=aK}if(ae>aJ[aB]&&ar&&ar.perpendicular){V.actualScroll.perpendicular=true}ak.maxSize=ae;if(aw){aI=ae}else{if(W||X||ai){if(ad){aI=aH?ae:ay}else{aI=aH?ae:aA(ay,ae)}aI-=aq.innerCtContext.getBorderInfo()[aB]}}for(ab=0;ab<al;ab++){av=aD[ab];ap=av.marginInfo||av.getMarginInfo();am=aC+ap[aE];if(ax){av[az](aI-ap[aB])}else{aF=av.percentagePerpendicular;if(aH&&aF){ap=av.marginInfo||av.getMarginInfo();ah=aF*aI-ap[aB];ah=av.setHeight(ah)}if(W){an=aI-av.props[aB];if(an>0){am=aC+Math[at.alignRoundingMethod](an/2)}}else{if(X){am=aA(0,aI-am-av.props[aB])}}}av.setProp(au,am)}return true},onBeforeConstrainInvalidateChild:function(d,f){var g=f.names.heightModel;if(!d[g].constrainedMin){d[g]=Ext.layout.SizeModel.calculated}},onAfterConstrainInvalidateChild:function(d,f){var g=f.names;d.setProp(g.beforeY,0);if(d[g.heightModel].calculated){d[g.setHeight](f.childHeight)}},calculateStretchMax:function(F,z,w){var y=this,B=z.height,v=z.width,C=F.childItems,H=C.length,J=w.maxSize,u=y.onBeforeStretchMaxInvalidateChild,D=y.onAfterStretchMaxInvalidateChild,I,A,E,G;for(E=0;E<H;++E){I=C[E];A=I.props;G=J-I.getMarginInfo()[B];if(G!==A[B]||I[z.heightModel].constrained){I.invalidate({before:u,after:D,layout:y,childWidth:A[v],childHeight:G,childX:A.x,childY:A.y,names:z})}}},onBeforeStretchMaxInvalidateChild:function(d,f){var g=f.names.heightModel;if(!d[g].constrainedMax){d[g]=Ext.layout.SizeModel.calculated}},onAfterStretchMaxInvalidateChild:function(m,o){var j=o.names,h=o.childHeight,g=o.childWidth;m.setProp("x",o.childX);m.setProp("y",o.childY);if(m[j.heightModel].calculated){m[j.setHeight](h)}if(m[j.widthModel].calculated){m[j.setWidth](g)}},completeLayout:function(A){var s=this,t=A.invalidateScrollX,u=A.invalidateScrollY,z=s.overflowHandler,r=A.scrollRestore,w,B,v,y,q;if(z){z.completeLayout(A)}if(t||u){B=s.getTarget();w=B.dom;q=w.style;if(t){v=B.getStyle("overflowX");if(v==="auto"){v=q.overflowX;q.overflowX="scroll"}else{t=false}}if(u){y=B.getStyle("overflowY");if(y==="auto"){y=q.overflowY;q.overflowY="scroll"}else{u=false}}if(t||u){w.scrollWidth;if(t){q.overflowX=v}if(u){q.overflowY=y}}}if(r){A.ownerScrollable.scrollTo(r.x,r.y)}},finishedLayout:function(c){var d=this.overflowHandler;if(d){d.finishedLayout(c)}Ext.layout.container.Container.prototype.finishedLayout.apply(this,arguments)},getLayoutItems:function(){var p=Ext.layout.container.Container.prototype.getLayoutItems.call(this),v=p.length,s,t,u,o,q,r,w;for(u=0;u<v;++u){if((o=p[u]).isSplitter){continue}w=o.splitter;if(o.hidden){if(w){if(!w.hidden){w.hidden=true;if(w.el){w.el.hide()}}}continue}if(w){r=w.collapseTarget==="next"}else{r=false}t=null;if(s&&q){if(q.hidden){q.hidden=false;if(q.el){q.el.show()}}if(r){t=true}}else{if(r){t=!s}}if(t!==null&&w.hidden!==t){w.hidden=t;if(w.el){w.el.setVisible(!t)}}q=!r&&w;s=o}if(s&&q&&!q.hidden){q.hidden=true;if(q.el){q.el.hide()}}return p},getScrollerEl:function(){return this.innerCt},insertSplitter:function(p,q,m,h){var o={xtype:"splitter",id:p.id+"-splitter",hidden:m,splitterFor:p,synthetic:true},j=q+((h.collapseTarget==="prev")?1:0);o[this.names.height]="100%";if(h){Ext.apply(o,h)}p.splitter=this.owner.add(j,o)},publishInnerCtSize:function(H,F){F=F||0;var A=this,I=H.state,B=H.boxNames,C=B.height,y=B.width,D=H.boxOptions.align,v=A.padding,z=I.boxPlan,E=z.targetSize,K=z.maxSize,w=I.needsScroll,J=H.innerCtContext,G,L;if(H.parallelSizeModel.shrinkWrap||(z.tooNarrow&&I.canScroll)){G=I.contentWidth-H.targetContext.getPaddingInfo()[y]}else{G=E[y];if(w&&w.perpendicular){G-=Ext.getScrollbarSize()[y]}}G-=F;A.owner.tooNarrow=z.tooNarrow;if(D.stretch){L=K}else{L=z.maxSize+v[B.beforeY]+v[B.afterY]+J.getBorderInfo()[C];if(!H.perpendicularSizeModel.shrinkWrap&&(D.center||D.bottom)){L=Math.max(E[C],L)}}J[B.setWidth](G);J[B.setHeight](L);H.targetElContext.setWidth(H.innerCtContext.props.width-(A.vertical?0:(F||0)));if(isNaN(G+L)){A.done=false}},onAdd:function(h,g){var j=this,f=j.enableSplitters&&h.split&&!h.isButton;Ext.layout.container.Container.prototype.onAdd.apply(this,arguments);if(f){if(f===true){f={collapseTarget:"next"}}else{if(Ext.isString(f)){f={collapseTarget:f==="before"?"next":"prev"}}else{f=Ext.apply({collapseTarget:f.side==="before"?"next":"prev"},f)}}j.insertSplitter(h,g,!!h.hidden,f)}},onRemove:function(m,s){var r=this,p=r.names,o=r.owner,q=m.splitter,u=r.overflowHandler,t;Ext.layout.container.Container.prototype.onRemove.apply(this,arguments);if(q&&o.contains(q)){o.doRemove(q,true);m.splitter=null}if(u){u.onRemove(m)}if(m.layoutMarginCap===r.id){delete m.layoutMarginCap}if(!o.destroying&&!s&&m.rendered){t=m.getEl();if(t){t.setStyle(p.beforeY,"");t.setStyle(p.beforeX,"");t.setStyle("margin","")}}},applyOverflowHandler:function(d,f){var g;if(typeof d==="string"){d={type:d}}g=d.type;if(f&&f.type===d.type){delete d.type;f.setConfig(d);return f}d.layout=this;return Ext.Factory.boxOverflow(d)},getRenderTarget:function(){return this.targetEl},getElementTarget:function(){return this.innerCt},destroy:function(){var b=this;Ext.destroy(b.innerCt,b.overflowHandler);b.flexSortFn=b.innerCt=null;Ext.layout.container.Container.prototype.destroy.call(this)},getRenderData:function(){var b=Ext.layout.container.Container.prototype.getRenderData.call(this);b.targetElCls=this.targetElCls;return b},updateVertical:function(g){var j=this,o=j.overflowHandler,h=j.owner,m=j._props;Ext.apply(j,g?m.vbox:m.hbox);if(o&&h&&h.rendered){o.setVertical(g)}},_props:{hbox:{direction:"horizontal",oppositeDirection:"vertical",horizontal:true,vertical:false,names:{beforeX:"left",beforeScrollX:"left",leftCap:"Left",afterX:"right",width:"width",contentWidth:"contentWidth",minWidth:"minWidth",maxWidth:"maxWidth",widthCap:"Width",widthModel:"widthModel",widthIndex:0,x:"x",getX:"getX",setX:"setX",scrollLeft:"scrollLeft",overflowX:"overflowX",hasOverflowX:"hasOverflowX",invalidateScrollX:"invalidateScrollX",parallelMargins:"lr",center:"middle",beforeY:"top",afterY:"bottom",height:"height",contentHeight:"contentHeight",minHeight:"minHeight",maxHeight:"maxHeight",heightCap:"Height",heightModel:"heightModel",heightIndex:1,y:"y",getY:"getY",setY:"setY",overflowY:"overflowY",hasOverflowY:"hasOverflowY",invalidateScrollY:"invalidateScrollY",perpendicularMargins:"tb",getWidth:"getWidth",getHeight:"getHeight",setWidth:"setWidth",setHeight:"setHeight",gotWidth:"gotWidth",gotHeight:"gotHeight",setContentWidth:"setContentWidth",setContentHeight:"setContentHeight",setWidthInDom:"setWidthInDom",setHeightInDom:"setHeightInDom",getScrollLeft:"getScrollLeft",setScrollLeft:"setScrollLeft",scrollTo:"scrollTo"},sizePolicy:{flex:{"":{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},stretch:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1},stretchmax:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:1}},"":{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},stretch:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},stretchmax:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:1}}},vbox:{direction:"vertical",oppositeDirection:"horizontal",horizontal:false,vertical:true,names:{beforeX:"top",beforeScrollX:"top",leftCap:"Top",afterX:"bottom",width:"height",contentWidth:"contentHeight",minWidth:"minHeight",maxWidth:"maxHeight",widthCap:"Height",widthModel:"heightModel",widthIndex:1,x:"y",getX:"getY",setX:"setY",scrollLeft:"scrollTop",overflowX:"overflowY",hasOverflowX:"hasOverflowY",invalidateScrollX:"invalidateScrollY",parallelMargins:"tb",center:"center",beforeY:"left",afterY:"right",height:"width",contentHeight:"contentWidth",minHeight:"minWidth",maxHeight:"maxWidth",heightCap:"Width",heightModel:"widthModel",heightIndex:0,y:"x",getY:"getX",setY:"setX",overflowY:"overflowX",hasOverflowY:"hasOverflowX",invalidateScrollY:"invalidateScrollX",perpendicularMargins:"lr",getWidth:"getHeight",getHeight:"getWidth",setWidth:"setHeight",setHeight:"setWidth",gotWidth:"gotHeight",gotHeight:"gotWidth",setContentWidth:"setContentHeight",setContentHeight:"setContentWidth",setWidthInDom:"setHeightInDom",setHeightInDom:"setWidthInDom",getScrollLeft:"getScrollTop",setScrollLeft:"setScrollTop",scrollTo:"scrollTo"},sizePolicy:{flex:{"":{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},stretch:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1},stretchmax:{readsWidth:1,readsHeight:0,setsWidth:1,setsHeight:1}},"":{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},stretch:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},stretchmax:{readsWidth:1,readsHeight:1,setsWidth:1,setsHeight:0}}}}},1,0,0,0,["layout.box"],0,[Ext.layout.container,"Box",Ext.layout,"BoxLayout"],0));(Ext.cmd.derive("Ext.layout.container.HBox",Ext.layout.container.Box,{alternateClassName:"Ext.layout.HBoxLayout",type:"hbox",vertical:false},0,0,0,0,["layout.hbox"],0,[Ext.layout.container,"HBox",Ext.layout,"HBoxLayout"],0));(Ext.cmd.derive("Ext.layout.container.VBox",Ext.layout.container.Box,{alternateClassName:"Ext.layout.VBoxLayout",type:"vbox",vertical:true},0,0,0,0,["layout.vbox"],0,[Ext.layout.container,"VBox",Ext.layout,"VBoxLayout"],0));(Ext.cmd.derive("Ext.toolbar.Toolbar",Ext.container.Container,{alternateClassName:"Ext.Toolbar",isToolbar:true,baseCls:"x-toolbar",ariaRole:"toolbar",defaultType:"button",layout:undefined,vertical:undefined,enableOverflow:false,overflowHandler:null,defaultButtonUI:"default-toolbar",defaultFieldUI:"default",defaultFooterButtonUI:"default",defaultFooterFieldUI:"default",trackMenus:true,itemCls:"x-toolbar-item",statics:{shortcuts:{"-":"tbseparator"," ":"tbspacer"},shortcutsHV:{0:{"->":{xtype:"tbfill",height:0}},1:{"->":{xtype:"tbfill",width:0}}}},initComponent:function(){var g=this,d=g.layout,f=g.vertical;if(f===undefined){g.vertical=f=g.dock==="right"||g.dock==="left"}g.layout=d=Ext.applyIf(Ext.isString(d)?{type:d}:d||{},{type:f?"vbox":"hbox",align:f?"stretchmax":"middle"});if(g.overflowHandler){d.overflowHandler=g.overflowHandler}else{if(g.enableOverflow){d.overflowHandler="menu"}}if(f){g.addClsWithUI("vertical")}if(g.ui==="footer"){g.ignoreBorderManagement=true}Ext.container.Container.prototype.initComponent.call(this)},getRefItems:function(h){var j=this,g=Ext.container.Container.prototype.getRefItems.apply(this,arguments),m=j.layout,o;if(h&&(j.enableOverflow||(j.overflowHandler==="menu"))){o=m.overflowHandler;if(o&&o.menu){g=g.concat(o.menu.getRefItems(h))}}return g},lookupComponent:function(h){var j=arguments,g,c;if(typeof h==="string"){c=Ext.toolbar.Toolbar;g=c.shortcutsHV[this.vertical?1:0][h]||c.shortcuts[h];if(typeof g==="string"){h={xtype:g}}else{if(g){h=Ext.apply({},g)}else{h={xtype:"tbtext",text:h}}}this.applyDefaults(h);j=[h]}return Ext.container.Container.prototype.lookupComponent.apply(this,j)},onBeforeAdd:function(f){var j=this,h=j.ui==="footer",g=h?j.defaultFooterButtonUI:j.defaultButtonUI;if(f.isSegmentedButton){if(f.getDefaultUI()==="default"&&!f.config.hasOwnProperty("defaultUI")){f.setDefaultUI(g)}}else{if(f.ui==="default"&&!f.hasOwnProperty("ui")){if(f.isButton){f.ui=g}else{if(f.isFormField){f.ui=h?j.defaultFooterFieldUI:j.defaultFieldUI}}}}if(f instanceof Ext.toolbar.Separator){f.setUI(j.vertical?"vertical":"horizontal")}Ext.container.Container.prototype.onBeforeAdd.apply(this,arguments)},onAdd:function(b){if(b.needArrowKeys&&this.enableFocusableContainer){this.enableFocusableContainer=false}Ext.container.Container.prototype.onAdd.apply(this,arguments);this.trackMenu(b)},onRemove:function(b){Ext.container.Container.prototype.onRemove.apply(this,arguments);this.trackMenu(b,true)},privates:{applyDefaults:function(b){if(!Ext.isString(b)){b=Ext.container.Container.prototype.applyDefaults.apply(this,arguments)}return b},trackMenu:function(g,f){var d=this;if(d.trackMenus&&g.menu){g[f?"un":"on"]({mouseover:d.onButtonOver,menushow:d.onButtonMenuShow,menuhide:d.onButtonMenuHide,scope:d})}},getChildItemsToDisable:function(){return this.items.getRange()},onButtonOver:function(d,g){var f=this.activeMenuBtn;if(f&&f!==d){f.hideMenu();d.focus();d.showMenu(g);this.activeMenuBtn=d}},onButtonMenuShow:function(b){this.activeMenuBtn=b},onButtonMenuHide:function(b){this.activeMenuBtn=null}}},0,["toolbar"],["component","box","container","toolbar"],{component:true,box:true,container:true,toolbar:true},["widget.toolbar"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.toolbar,"Toolbar",Ext,"Toolbar"],0));Ext.define("Ext.theme.neptune.toolbar.Toolbar",{override:"Ext.toolbar.Toolbar",usePlainButtons:false,border:false});(Ext.cmd.derive("Ext.dd.DragDrop",Ext.Base,{constructor:function(g,f,d){if(g){this.init(g,f,d)}},id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:false,lock:function(){this.locked=true},moveOnly:false,unlock:function(){this.locked=false},isTarget:true,padding:null,_domRef:null,__ygDragDrop:true,constrainX:false,constrainY:false,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:false,xTicks:null,yTicks:null,primaryButtonOnly:true,available:false,hasOuterHandles:false,triggerEvent:"mousedown",b4StartDrag:function(d,c){},startDrag:function(d,c){},b4Drag:function(b){},onDrag:function(b){},onDragEnter:function(d,c){},b4DragOver:function(b){},onDragOver:function(d,c){},b4DragOut:function(b){},onDragOut:function(d,c){},b4DragDrop:function(b){},onDragDrop:function(d,c){},onInvalidDrop:function(b){},b4EndDrag:function(b){},endDrag:function(b){},b4MouseDown:function(b){},onMouseDown:function(b){},onMouseUp:function(b){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(y,A,r){if(Ext.isNumber(A)){A={left:A,right:A,top:A,bottom:A}}A=A||this.defaultPadding;var v=Ext.get(this.getEl()).getBox(),c=Ext.get(y),s=c.getScroll(),w,u=c.dom,t,z,B;if(u===document.body){w={x:s.left,y:s.top,width:Ext.Element.getViewportWidth(),height:Ext.Element.getViewportHeight()}}else{t=c.getXY();w={x:t[0],y:t[1],width:u.clientWidth,height:u.clientHeight}}z=v.y-w.y;B=v.x-w.x;this.resetConstraints();this.setXConstraint(B-(A.left||0),w.width-B-v.width-(A.right||0),this.xTickSize);this.setYConstraint(z-(A.top||0),w.height-z-v.height-(A.bottom||0),this.yTickSize)},getEl:function(){if(!this._domRef){this._domRef=Ext.getDom(this.id)}return this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(h,g,f){var j=this;j.el=j.el||Ext.get(h);j.initTarget(h,g,f);Ext.get(j.id).on(j.triggerEvent,j.handleMouseDown,j)},initTarget:function(g,f,d){this.config=d||{};this.DDMInstance=Ext.dd.DragDropManager;this.groups={};if(typeof g!=="string"){g=Ext.id(g)}this.id=g;this.addToGroup((f)?f:"default");this.handleElId=g;this.setDragElId(g);this.invalidHandleTypes={A:"A"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig();this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0];this.isTarget=(this.config.isTarget!==false);this.maintainOffset=(this.config.maintainOffset);this.primaryButtonOnly=(this.config.primaryButtonOnly!==false)},handleOnAvailable:function(){this.available=true;this.resetConstraints();this.onAvailable()},setPadding:function(j,g,h,f){if(!g&&0!==g){this.padding=[j,j,j,j]}else{if(!h&&0!==h){this.padding=[j,g,j,g]}else{this.padding=[j,g,h,f]}}},setInitPosition:function(p,q){var o=this.getEl(),h,j,m;if(!this.DDMInstance.verifyEl(o)){return}h=p||0;j=q||0;m=Ext.fly(o).getXY();this.initPageX=m[0]-h;this.initPageY=m[1]-j;this.lastPageX=m[0];this.lastPageY=m[1];this.setStartPosition(m)},setStartPosition:function(c){var d=c||Ext.fly(this.getEl()).getXY();this.deltaSetXY=null;this.startPageX=d[0];this.startPageY=d[1]},addToGroup:function(b){this.groups[b]=true;this.DDMInstance.regDragDrop(this,b)},removeFromGroup:function(b){if(this.groups[b]){delete this.groups[b]}this.DDMInstance.removeDDFromGroup(this,b)},setDragElId:function(b){this.dragElId=b},setHandleElId:function(b){if(typeof b!=="string"){b=Ext.id(b)}this.handleElId=b;this.DDMInstance.regHandle(this.id,b)},setOuterHandleElId:function(b){if(typeof b!=="string"){b=Ext.id(b)}Ext.get(b).on(this.triggerEvent,this.handleMouseDown,this);this.setHandleElId(b);this.hasOuterHandles=true},unreg:function(){var c=this,d;if(c._domRef){d=Ext.fly(c.id);if(d){d.un(c.triggerEvent,c.handleMouseDown,c)}}c._domRef=null;c.DDMInstance._remove(c,c.autoGroup)},destroy:function(){this.unreg();this.callParent()},isLocked:function(){return(this.DDMInstance.isLocked()||this.locked)},handleMouseDown:function(g,d){var f=this;if((f.primaryButtonOnly&&g.button)||f.isLocked()){return}f.DDMInstance.refreshCache(f.groups);if(f.hasOuterHandles||f.DDMInstance.isOverTarget(g.getPoint(),f)){if(f.clickValidator(g)){f.setStartPosition();f.b4MouseDown(g);f.onMouseDown(g);f.DDMInstance.handleMouseDown(g,f);f.DDMInstance.stopEvent(g)}}},clickValidator:function(c){var d=c.getTarget();return(this.isValidHandleChild(d)&&(this.id===this.handleElId||this.DDMInstance.handleWasClicked(d,this.id)))},addInvalidHandleType:function(d){var c=d.toUpperCase();this.invalidHandleTypes[c]=c},addInvalidHandleId:function(b){if(typeof b!=="string"){b=Ext.id(b)}this.invalidHandleIds[b]=b},addInvalidHandleClass:function(b){this.invalidHandleClasses.push(b)},removeInvalidHandleType:function(d){var c=d.toUpperCase();delete this.invalidHandleTypes[c]},removeInvalidHandleId:function(b){if(typeof b!=="string"){b=Ext.id(b)}delete this.invalidHandleIds[b]},removeInvalidHandleClass:function(f){var h=this.invalidHandleClasses,g=h.length,j;for(j=0;j<g;++j){if(h[j]===f){delete h[j]}}},isValidHandleChild:function(p){var q=true,m,h,j;try{m=p.nodeName.toUpperCase()}catch(o){m=p.nodeName}q=q&&!this.invalidHandleTypes[m];q=q&&!this.invalidHandleIds[p.id];for(h=0,j=this.invalidHandleClasses.length;q&&h<j;++h){q=!Ext.fly(p).hasCls(this.invalidHandleClasses[h])}return q},setXTicks:function(h,g){this.xTicks=[];this.xTickSize=g;var j={},f;for(f=this.initPageX;f>=this.minX;f=f-g){if(!j[f]){this.xTicks[this.xTicks.length]=f;j[f]=true}}for(f=this.initPageX;f<=this.maxX;f=f+g){if(!j[f]){this.xTicks[this.xTicks.length]=f;j[f]=true}}Ext.Array.sort(this.xTicks,this.DDMInstance.numericSort)},setYTicks:function(h,g){this.yTicks=[];this.yTickSize=g;var j={},f;for(f=this.initPageY;f>=this.minY;f=f-g){if(!j[f]){this.yTicks[this.yTicks.length]=f;j[f]=true}}for(f=this.initPageY;f<=this.maxY;f=f+g){if(!j[f]){this.yTicks[this.yTicks.length]=f;j[f]=true}}Ext.Array.sort(this.yTicks,this.DDMInstance.numericSort)},setXConstraint:function(g,d,f){this.leftConstraint=g;this.rightConstraint=d;this.minX=this.initPageX-g;this.maxX=this.initPageX+d;if(f){this.setXTicks(this.initPageX,f)}this.constrainX=true},clearConstraints:function(){this.constrainX=false;this.constrainY=false;this.clearTicks()},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0},setYConstraint:function(f,g,d){this.topConstraint=f;this.bottomConstraint=g;this.minY=this.initPageY-f;this.maxY=this.initPageY+g;if(d){this.setYTicks(this.initPageY,d)}this.constrainY=true},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var c=(this.maintainOffset)?this.lastPageX-this.initPageX:0,d=(this.maintainOffset)?this.lastPageY-this.initPageY:0;this.setInitPosition(c,d)}else{this.setInitPosition()}if(this.constrainX){this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize)}if(this.constrainY){this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)}},getTick:function(o,r){if(!r){return o}else{if(r[0]>=o){return r[0]}else{var j,m,s,p,q;for(j=0,m=r.length;j<m;++j){s=j+1;if(r[s]&&r[s]>=o){p=o-r[j];q=r[s]-o;return(q>p)?r[j]:r[s]}}return r[r.length-1]}}},toString:function(){return("DragDrop "+this.id)}},3,0,0,0,0,0,[Ext.dd,"DragDrop"],0));(Ext.cmd.derive("Ext.dd.DD",Ext.dd.DragDrop,{constructor:function(g,f,d){if(g){this.init(g,f,d)}},scroll:true,autoOffset:function(j,f){var g=j-this.startPageX,h=f-this.startPageY;this.setDelta(g,h)},setDelta:function(c,d){this.deltaX=c;this.deltaY=d},setDragElPos:function(g,d){var f=this.getDragEl();this.alignElWithMouse(f,g,d)},alignElWithMouse:function(A,w,z){var v=this.getTargetCoord(w,z),y=A.dom?A:Ext.fly(A,"_dd"),q=y.getSize(),t=Ext.Element,s,B,r,u;if(!this.deltaSetXY){s=this.cachedViewportSize={width:t.getDocumentWidth(),height:t.getDocumentHeight()};B=[Math.max(0,Math.min(v.x,s.width-q.width)),Math.max(0,Math.min(v.y,s.height-q.height))];y.setXY(B);r=this.getLocalX(y);u=y.getLocalY();this.deltaSetXY=[r-v.x,u-v.y]}else{s=this.cachedViewportSize;this.setLocalXY(y,Math.max(0,Math.min(v.x+this.deltaSetXY[0],s.width-q.width)),Math.max(0,Math.min(v.y+this.deltaSetXY[1],s.height-q.height)))}this.cachePosition(v.x,v.y);this.autoScroll(v.x,v.y,A.offsetHeight,A.offsetWidth);return v},cachePosition:function(d,f){if(d){this.lastPageX=d;this.lastPageY=f}else{var g=Ext.fly(this.getEl()).getXY();this.lastPageX=g[0];this.lastPageY=g[1]}},autoScroll:function(v,w,B,u){if(this.scroll){var h=Ext.Element.getViewportHeight(),E=Ext.Element.getViewportWidth(),G=this.DDMInstance.getScrollTop(),C=this.DDMInstance.getScrollLeft(),y=B+w,H=u+v,z=(h+G-w-this.deltaY),A=(E+C-v-this.deltaX),D=40,F=(document.all)?80:30;if(y>h&&z<D){window.scrollTo(C,G+F)}if(w<G&&G>0&&w-G<D){window.scrollTo(C,G-F)}if(H>E&&A<D){window.scrollTo(C+F,G)}if(v<C&&C>0&&v-C<D){window.scrollTo(C-F,G)}}},getTargetCoord:function(j,f){var g=j-this.deltaX,h=f-this.deltaY;if(this.constrainX){if(g<this.minX){g=this.minX}if(g>this.maxX){g=this.maxX}}if(this.constrainY){if(h<this.minY){h=this.minY}if(h>this.maxY){h=this.maxY}}g=this.getTick(g,this.xTicks);h=this.getTick(h,this.yTicks);return{x:g,y:h}},applyConfig:function(){Ext.dd.DragDrop.prototype.applyConfig.call(this);this.scroll=(this.config.scroll!==false)},b4MouseDown:function(c){var d=c.getXY();this.autoOffset(d[0],d[1])},b4Drag:function(c){var d=c.getXY();this.setDragElPos(d[0],d[1])},toString:function(){return("DD "+this.id)},getLocalX:function(b){return b.getLocalX()},setLocalXY:function(d,f,g){d.setLocalXY(f,g)}},3,0,0,0,0,0,[Ext.dd,"DD"],0));(Ext.cmd.derive("Ext.dd.DDProxy",Ext.dd.DD,{statics:{dragElId:"ygddfdiv"},constructor:function(g,f,d){if(g){this.init(g,f,d);this.initFrame()}},resizeFrame:true,centerFrame:false,createFrame:function(){var f=this,g=document.body,h,j;if(!g||!g.firstChild){Ext.defer(function(){f.createFrame()},50);return}h=this.getDragEl();if(!h){h=document.createElement("div");h.id=this.dragElId;h.setAttribute("role","presentation");j=h.style;j.position="absolute";j.visibility="hidden";j.cursor="move";j.border="2px solid #aaa";j.zIndex=999;g.insertBefore(h,g.firstChild)}},initFrame:function(){this.createFrame()},applyConfig:function(){Ext.dd.DD.prototype.applyConfig.call(this);this.resizeFrame=(this.config.resizeFrame!==false);this.centerFrame=(this.config.centerFrame);this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(j,m){var o=this,h=o.getDragEl(),g=h.style;o._resizeProxy();if(o.centerFrame){o.setDelta(Math.round(parseInt(g.width,10)/2),Math.round(parseInt(g.height,10)/2))}o.setDragElPos(j,m);Ext.fly(h).show()},_resizeProxy:function(){if(this.resizeFrame){var b=this.getEl();Ext.fly(this.getDragEl()).setSize(b.offsetWidth,b.offsetHeight)}},b4MouseDown:function(j){var f=j.getXY(),g=f[0],h=f[1];this.autoOffset(g,h);this.setDragElPos(g,h)},b4StartDrag:function(d,c){this.showFrame(d,c)},b4EndDrag:function(b){Ext.fly(this.getDragEl()).hide()},endDrag:function(g){var d=this.getEl(),f=this.getDragEl();f.style.visibility="";this.beforeMove();d.style.visibility="hidden";Ext.dd.DDM.moveToEl(d,f);f.style.visibility="hidden";d.style.visibility="";this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return("DDProxy "+this.id)}},3,0,0,0,0,0,[Ext.dd,"DDProxy"],0));(Ext.cmd.derive("Ext.dd.StatusProxy",Ext.Component,{animRepair:false,childEls:["ghost"],renderTpl:['<div class="x-dd-drop-icon" role="presentation"></div><div id="{id}-ghost" data-ref="ghost" class="x-dd-drag-ghost" role="presentation"></div>'],repairCls:"x-dd-drag-repair",ariaRole:"presentation",skipLayout:true,constructor:function(d){var c=this;d=d||{};Ext.apply(c,{hideMode:"visibility",hidden:true,floating:true,id:c.id||Ext.id(),cls:"x-dd-drag-proxy "+this.dropNotAllowed,shadow:d.shadow||false,renderTo:Ext.getDetachedBody()});Ext.Component.prototype.constructor.apply(this,arguments);this.dropStatus=this.dropNotAllowed},dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",setStatus:function(b){b=b||this.dropNotAllowed;if(this.dropStatus!==b){this.el.replaceCls(this.dropStatus,b);this.dropStatus=b}},reset:function(d){var g=this,f="x-dd-drag-proxy ";g.el.replaceCls(f+g.dropAllowed,f+g.dropNotAllowed);g.dropStatus=g.dropNotAllowed;if(d){g.ghost.setHtml("")}},update:function(d){if(typeof d==="string"){this.ghost.setHtml(d)}else{this.ghost.setHtml("");d.style.margin="0";this.ghost.dom.appendChild(d)}var c=this.ghost.dom.firstChild;if(c){Ext.fly(c).setStyle("float","none")}},getGhost:function(){return this.ghost},hide:function(b){Ext.Component.prototype.hide.call(this);if(b){this.reset(true)}},stop:function(){if(this.anim&&this.anim.isAnimated&&this.anim.isAnimated()){this.anim.stop()}},sync:function(){this.el.syncUnderlays()},repair:function(j,h,g){var f=this;f.callback=h;f.scope=g;if(j&&f.animRepair!==false){f.el.addCls(f.repairCls);f.el.setUnderlaysVisible(false);f.anim=f.el.animate({duration:f.repairDuration||500,easing:"ease-out",to:{x:j[0],y:j[1]},stopAnimation:true,callback:f.afterRepair,scope:f})}else{f.afterRepair()}},afterRepair:function(){var b=this;b.hide(true);b.el.removeCls(b.repairCls);if(typeof b.callback==="function"){b.callback.call(b.scope||b)}delete b.callback;delete b.scope}},1,0,["component","box"],{component:true,box:true},0,0,[Ext.dd,"StatusProxy"],0));(Ext.cmd.derive("Ext.dd.DragSource",Ext.dd.DDProxy,{dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",animRepair:true,repairHighlightColor:"c3daf9",constructor:function(c,d){this.el=Ext.get(c);if(!this.dragData){this.dragData={}}Ext.apply(this,d);if(!this.proxy){this.proxy=new Ext.dd.StatusProxy({id:this.el.id+"-drag-status-proxy",animRepair:this.animRepair})}Ext.dd.DDProxy.prototype.constructor.call(this,this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:false,isTarget:false,scroll:this.scroll===true});this.dragging=false},getDragData:function(b){return this.dragData},onDragEnter:function(j,h){var f=Ext.dd.DragDropManager.getDDById(h),g;this.cachedTarget=f;if(this.beforeDragEnter(f,j,h)!==false){if(f.isNotifyTarget){g=f.notifyEnter(this,j,this.dragData);this.proxy.setStatus(g)}else{this.proxy.setStatus(this.dropAllowed)}if(this.afterDragEnter){this.afterDragEnter(f,j,h)}}},beforeDragEnter:function(d,f,g){return true},onDragOver:function(j,h){var f=this.cachedTarget||Ext.dd.DragDropManager.getDDById(h),g;if(this.beforeDragOver(f,j,h)!==false){if(f.isNotifyTarget){g=f.notifyOver(this,j,this.dragData);this.proxy.setStatus(g)}if(this.afterDragOver){this.afterDragOver(f,j,h)}}},beforeDragOver:function(d,f,g){return true},onDragOut:function(d,g){var f=this.cachedTarget||Ext.dd.DragDropManager.getDDById(g);if(this.beforeDragOut(f,d,g)!==false){if(f.isNotifyTarget){f.notifyOut(this,d,this.dragData)}this.proxy.reset();if(this.afterDragOut){this.afterDragOut(f,d,g)}}this.cachedTarget=null},beforeDragOut:function(d,f,g){return true},onDragDrop:function(d,g){var f=this.cachedTarget||Ext.dd.DragDropManager.getDDById(g);if(this.beforeDragDrop(f,d,g)!==false){if(f.isNotifyTarget){if(f.notifyDrop(this,d,this.dragData)!==false){this.onValidDrop(f,d,g)}else{this.onInvalidDrop(f,d,g)}}else{this.onValidDrop(f,d,g)}if(this.afterDragDrop){this.afterDragDrop(f,d,g)}}delete this.cachedTarget},beforeDragDrop:function(d,f,g){return true},onValidDrop:function(d,f,g){this.hideProxy();if(this.afterValidDrop){this.afterValidDrop(d,f,g)}},getRepairXY:function(c,d){return this.el.getXY()},onInvalidDrop:function(j,f,h){var g=this;if(!f){f=j;j=null;h=f.getTarget().id}if(g.beforeInvalidDrop(j,f,h)!==false){if(g.cachedTarget){if(g.cachedTarget.isNotifyTarget){g.cachedTarget.notifyOut(g,f,g.dragData)}g.cacheTarget=null}g.proxy.repair(g.getRepairXY(f,g.dragData),g.afterRepair,g);if(g.afterInvalidDrop){g.afterInvalidDrop(f,h)}}},afterRepair:function(){var b=this;if(Ext.enableFx){b.el.highlight(b.repairHighlightColor)}b.dragging=false},beforeInvalidDrop:function(d,f,g){return true},handleMouseDown:function(c){if(this.dragging){return}var d=this.getDragData(c);if(d&&this.onBeforeDrag(d,c)!==false){this.dragData=d;this.proxy.stop();Ext.dd.DDProxy.prototype.handleMouseDown.apply(this,arguments)}},onBeforeDrag:function(d,c){return true},onStartDrag:Ext.emptyFn,alignElWithMouse:function(){this.proxy.ensureAttachedToBody(true);return Ext.dd.DDProxy.prototype.alignElWithMouse.apply(this,arguments)},startDrag:function(d,c){this.proxy.reset();this.proxy.hidden=false;this.dragging=true;this.proxy.update("");this.onInitDrag(d,c);this.proxy.show()},onInitDrag:function(f,g){var d=this.el.dom.cloneNode(true);d.id=Ext.id();this.proxy.update(d);this.onStartDrag(f,g);return true},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide();this.proxy.reset(true);this.dragging=false},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(b){},endDrag:function(b){this.onEndDrag(this.dragData,b)},onEndDrag:function(d,c){},autoOffset:function(d,c){this.setDelta(-12,-20)},destroy:function(){Ext.dd.DDProxy.prototype.destroy.call(this);Ext.destroy(this.proxy)}},1,0,0,0,0,0,[Ext.dd,"DragSource"],0));(Ext.cmd.derive("Ext.panel.Proxy",Ext.Base,{alternateClassName:"Ext.dd.PanelProxy",moveOnDrag:true,constructor:function(f,d){var g=this;g.panel=f;g.id=g.panel.id+"-ddproxy";Ext.apply(g,d)},insertProxy:true,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost.el},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){var b=this;if(b.ghost){if(b.proxy){b.proxy.destroy();delete b.proxy}b.panel.unghost(null,b.moveOnDrag);delete b.ghost}},show:function(){var c=this,d;if(!c.ghost){d=c.panel.getSize();c.panel.el.setVisibilityMode(Ext.Element.DISPLAY);c.ghost=c.panel.ghost();if(c.insertProxy){c.proxy=c.panel.el.insertSibling({role:"presentation",cls:"x-panel-dd-spacer"});c.proxy.setSize(d)}}},repair:function(d,g,f){this.hide();Ext.callback(g,f||this)},moveProxy:function(d,c){if(this.proxy){d.insertBefore(this.proxy.dom,c)}}},1,0,0,0,0,0,[Ext.panel,"Proxy",Ext.dd,"PanelProxy"],0));(Ext.cmd.derive("Ext.panel.DD",Ext.dd.DragSource,{constructor:function(d,f){var g=this;g.panel=d;g.dragData={panel:d};g.panelProxy=new Ext.panel.Proxy(d,f);g.proxy=g.panelProxy.proxy;Ext.dd.DragSource.prototype.constructor.call(this,d.el,f);g.setupEl(d)},setupEl:function(g){var j=this,h=g.header,f=g.body;if(h){j.setHandleElId(h.id);f=h.el}if(f){f.setStyle("cursor","move");j.scroll=false}else{g.on("boxready",j.setupEl,j,{single:true})}},showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(d,c){this.panelProxy.show()},b4MouseDown:function(j){var f=j.getXY(),g=f[0],h=f[1];this.autoOffset(g,h)},onInitDrag:function(d,c){this.onStartDrag(d,c);return true},createFrame:Ext.emptyFn,getDragEl:function(c){var d=this.panelProxy.ghost;if(d){return d.el.dom}},endDrag:function(b){this.panelProxy.hide();this.panel.saveState()},autoOffset:function(d,c){d-=this.startPageX;c-=this.startPageY;this.setDelta(d,c)},onInvalidDrop:function(j,f,h){var g=this;if(g.beforeInvalidDrop(j,f,h)!==false){if(g.cachedTarget){if(g.cachedTarget.isNotifyTarget){g.cachedTarget.notifyOut(g,f,g.dragData)}g.cacheTarget=null}if(g.afterInvalidDrop){g.afterInvalidDrop(f,h)}}}},1,0,0,0,0,0,[Ext.panel,"DD"],0));(Ext.cmd.derive("Ext.layout.component.Dock",Ext.layout.component.Component,{alternateClassName:"Ext.layout.component.AbstractDock",type:"dock",horzAxisProps:{name:"horz",oppositeName:"vert",dockBegin:"left",dockEnd:"right",horizontal:true,marginBegin:"margin-left",maxSize:"maxWidth",minSize:"minWidth",pos:"x",setSize:"setWidth",shrinkWrapDock:"shrinkWrapDockWidth",size:"width",sizeModel:"widthModel"},vertAxisProps:{name:"vert",oppositeName:"horz",dockBegin:"top",dockEnd:"bottom",horizontal:false,marginBegin:"margin-top",maxSize:"maxHeight",minSize:"minHeight",pos:"y",setSize:"setHeight",shrinkWrapDock:"shrinkWrapDockHeight",size:"height",sizeModel:"heightModel"},initializedBorders:-1,horizontalCollapsePolicy:{width:true,x:true},verticalCollapsePolicy:{height:true,y:true},finishRender:function(){var d=this,g,f;Ext.layout.component.Component.prototype.finishRender.call(this);g=d.getRenderTarget();f=d.getDockedItems();d.finishRenderItems(g,f)},isItemBoxParent:function(b){return true},isItemShrinkWrap:function(b){return true},noBorderClasses:["x-docked-noborder-top","x-docked-noborder-right","x-docked-noborder-bottom","x-docked-noborder-left"],noBorderClassesSides:{top:"x-docked-noborder-top",right:"x-docked-noborder-right",bottom:"x-docked-noborder-bottom",left:"x-docked-noborder-left"},borderWidthProps:{top:"border-top-width",right:"border-right-width",bottom:"border-bottom-width",left:"border-left-width"},_itemCls:"x-docked",handleItemBorders:function(){var w=this,H=w.owner,y,I,B=w.lastDockedItems,C=w.borders,G=H.dockedItems.generation,F=w.noBorderClassesSides,v=w.borderWidthProps,D,z,J,u,A,E=w.collapsed;if(w.initializedBorders===G||(H.border&&!H.manageBodyBorders)||(H.collapsed&&H.collapseMode==="mini")){return}w.initializedBorders=G;w.collapsed=false;w.lastDockedItems=I=w.getLayoutItems();w.collapsed=E;y={top:[],right:[],bottom:[],left:[]};for(D=0,z=I.length;D<z;D++){J=I[D];u=J.dock;if(J.ignoreBorderManagement){continue}if(!y[u].satisfied){y[u].push(J);y[u].satisfied=true}if(!y.top.satisfied&&u!=="bottom"){y.top.push(J)}if(!y.right.satisfied&&u!=="left"){y.right.push(J)}if(!y.bottom.satisfied&&u!=="top"){y.bottom.push(J)}if(!y.left.satisfied&&u!=="right"){y.left.push(J)}}if(B){for(D=0,z=B.length;D<z;D++){J=B[D];if(!J.destroyed&&!J.ignoreBorderManagement&&!H.manageBodyBorders){J.removeCls(w.noBorderClasses)}}}if(C){for(A in C){if(H.manageBodyBorders&&C[A].satisfied){H.setBodyStyle(v[A],"")}}}for(A in y){z=y[A].length;if(!H.manageBodyBorders){for(D=0;D<z;D++){y[A][D].addCls(F[A])}if((!y[A].satisfied&&!H.bodyBorder)||H.bodyBorder===false){H.addBodyCls(F[A])}else{H.removeBodyCls(F[A])}}else{if(y[A].satisfied){H.setBodyStyle(v[A],"1px")}}}w.borders=y},beforeLayoutCycle:function(p){var s=this,j=s.owner,o=s.sizeModels.shrinkWrap,q=j.shrinkWrapDock,r,m;if(j.collapsed){if(j.collapsedVertical()){m=true;p.measureDimensions=1}else{r=true;p.measureDimensions=2}}p.collapsedVert=m;p.collapsedHorz=r;if(m){p.heightModel=o}else{if(r){p.widthModel=o}}q=q===true?3:(q||0);p.shrinkWrapDockHeight=(q&1)&&p.heightModel.shrinkWrap;p.shrinkWrapDockWidth=(q&2)&&p.widthModel.shrinkWrap},beginLayout:function(D){var w=this,E=w.owner,H=w.getLayoutItems(),F=D.context,B=H.length,y=w.lastCollapsedState,v,z,t,G,C,A,u;Ext.layout.component.Component.prototype.beginLayout.apply(this,arguments);A=E.getCollapsed();if(A!==y&&y!==undefined){if(w.owner.collapsed){D.isCollapsingOrExpanding=1;E.addClsWithUI(E.collapsedCls)}else{D.isCollapsingOrExpanding=2;E.removeClsWithUI(E.collapsedCls);D.lastCollapsedState=w.lastCollapsedState}}w.lastCollapsedState=A;D.dockedItems=v=[];for(z=0;z<B;z++){t=H[z];if(t.rendered){u=t.dock;G=F.getCmp(t);G.dockedAt={x:0,y:0};G.offsets=C=Ext.Element.parseBox(t.offsets||0);G.horizontal=u==="top"||u==="bottom";C.width=C.left+C.right;C.height=C.top+C.bottom;v.push(G)}}D.bodyContext=D.getEl("body")},beginLayoutCycle:function(y){var u=this,p=y.dockedItems,v=p.length,z=u.owner,t=z.frameBody,q=u.lastHeightModel,w,r,s;Ext.layout.component.Component.prototype.beginLayoutCycle.apply(this,arguments);if(u.owner.manageHeight){if(u.lastBodyDisplay){z.body.dom.style.display=u.lastBodyDisplay=""}}else{if(u.lastBodyDisplay!=="inline-block"){z.body.dom.style.display=u.lastBodyDisplay="inline-block"}if(q&&q.shrinkWrap&&!y.heightModel.shrinkWrap){z.body.dom.style.marginBottom=""}}if(y.widthModel.auto){if(y.widthModel.shrinkWrap){z.el.setWidth(null)}z.body.setWidth(null);if(t){t.setWidth(null)}}if(y.heightModel.auto){z.body.setHeight(null);if(t){t.setHeight(null)}}if(y.collapsedVert){y.setContentHeight(0)}else{if(y.collapsedHorz){y.setContentWidth(0)}}for(w=0;w<v;w++){r=p[w].target;s=r.dock;if(s==="right"){r.setLocalX(0)}else{if(s!=="left"){continue}}}},calculate:function(A){var s=this,B=s.measureAutoDimensions(A,A.measureDimensions),C=A.state,t=C.horzDone,z=C.vertDone,y=A.bodyContext,u,D,v,w,r;A.borderInfo||A.getBorderInfo();A.paddingInfo||A.getPaddingInfo();A.frameInfo||A.getFrameInfo();y.borderInfo||y.getBorderInfo();y.paddingInfo||y.getPaddingInfo();if(!A.frameBorder){if(!(u=A.framing)){A.frameBorder=A.borderInfo;A.framePadding=A.paddingInfo}else{A.frameBorder=u.border;A.framePadding=u.padding}}D=!t&&s.createAxis(A,B.contentWidth,A.widthModel,s.horzAxisProps,A.collapsedHorz);v=!z&&s.createAxis(A,B.contentHeight,A.heightModel,s.vertAxisProps,A.collapsedVert);for(w=0,r=A.dockedItems.length;r--;++w){if(D){s.dockChild(A,D,r,w)}if(v){s.dockChild(A,v,r,w)}}if(D&&s.finishAxis(A,D)){C.horzDone=t=D}if(v&&s.finishAxis(A,v)){C.vertDone=z=v}if(t&&z&&s.finishConstraints(A,t,z)){s.finishPositions(A,t,z)}else{s.done=false}},createAxis:function(F,L,P,I,Q){var A=this,B=0,S=A.owner,O=S[I.maxSize],R=S[I.minSize]||0,H=I.dockBegin,M=I.dockEnd,D=I.pos,J=I.size,K=O!=null,G=P.shrinkWrap,T,C,E,N;if(G){if(Q){N=0}else{T=F.bodyContext;N=L+T.borderInfo[J]}}else{C=F.frameBorder;E=F.framePadding;B=C[H]+E[H];N=F.getProp(J)-(C[M]+E[M])}return{shrinkWrap:P.shrinkWrap,sizeModel:P,initialBegin:B,begin:B,end:N,collapsed:Q,horizontal:I.horizontal,ignoreFrameBegin:null,ignoreFrameEnd:null,initialSize:N-B,maxChildSize:0,hasMinMaxConstraints:(R||K)&&P.shrinkWrap,minSize:R,maxSize:K?O:1000000000,bodyPosProp:A.owner.manageHeight?D:I.marginBegin,dockBegin:H,dockEnd:M,posProp:D,sizeProp:J,setSize:I.setSize,shrinkWrapDock:F[I.shrinkWrapDock],sizeModelName:I.sizeModel,dockedPixelsEnd:0}},dockChild:function(A,z,q,w){var v=this,B=A.dockedItems[z.shrinkWrap?q:w],t=B.target,s=t.dock,y=z.sizeProp,u,r;if(t.ignoreParentFrame&&A.isCollapsingOrExpanding){B.clearMarginCache()}if(!B.marginInfo){B.getMarginInfo()}if(s===z.dockBegin){if(z.shrinkWrap){u=v.dockOutwardBegin(A,B,t,z)}else{u=v.dockInwardBegin(A,B,t,z)}}else{if(s===z.dockEnd){if(z.shrinkWrap){u=v.dockOutwardEnd(A,B,t,z)}else{u=v.dockInwardEnd(A,B,t,z)}}else{if(z.shrinkWrapDock){r=B.getProp(y)+B.marginInfo[y];z.maxChildSize=Math.max(z.maxChildSize,r);u=0}else{u=v.dockStretch(A,B,t,z)}}}B.dockedAt[z.posProp]=u},dockInwardBegin:function(y,z,q,v){var t=v.begin,u=v.sizeProp,w=q.ignoreParentFrame,s,p,r;if(w){v.ignoreFrameBegin=z;r=q.dock;s=y.frameBorder[r];t-=s+y.framePadding[r]}if(!q.overlay){p=z.getProp(u)+z.marginInfo[u];v.begin+=p;if(w){v.begin-=s}}return t},dockInwardEnd:function(s,t,u,m){var p=m.sizeProp,o=t.getProp(p)+t.marginInfo[p],q=m.end-o,r;if(!u.overlay){m.end=q}if(u.ignoreParentFrame){m.ignoreFrameEnd=t;r=s.frameBorder[u.dock];q+=r+s.framePadding[u.dock];m.end+=r}return q},dockOutwardBegin:function(q,r,s,j){var o=j.begin,p=j.sizeProp,m;if(j.collapsed){j.ignoreFrameBegin=j.ignoreFrameEnd=r}else{if(s.ignoreParentFrame){j.ignoreFrameBegin=r}}if(!s.overlay){m=r.getProp(p)+r.marginInfo[p];o-=m;j.begin=o}return o},dockOutwardEnd:function(q,r,s,j){var o=j.end,p=j.sizeProp,m;m=r.getProp(p)+r.marginInfo[p];if(j.collapsed){j.ignoreFrameBegin=j.ignoreFrameEnd=r}else{if(s.ignoreParentFrame){j.ignoreFrameEnd=r}}if(!s.overlay){j.end=o+m;j.dockedPixelsEnd+=m}return o},dockStretch:function(F,G,v,E){var u=v.dock,z=E.sizeProp,H=u==="top"||u==="bottom",A=F.frameBorder,D=G.offsets,w=F.framePadding,B=H?"right":"bottom",I=H?"left":"top",y=E.begin+D[I],C,J;if(v.stretch!==false){J=E.end-y-D[B];if(v.ignoreParentFrame){y-=w[I]+A[I];J+=w[z]+A[z]}C=G.marginInfo;J-=C[z];G[E.setSize](J)}return y},finishAxis:function(N,V){if(isNaN(V.maxChildSize)){return false}var W=V.begin,I=V.end-W,T=V.collapsed,M=V.setSize,Q=V.dockBegin,D=V.dockEnd,J=N.framePadding,G=N.frameBorder,U=G[Q],F=N.framing,L=F&&F[Q],Y=T?0:J[Q],R=V.sizeProp,E=V.ignoreFrameBegin,H=V.ignoreFrameEnd,Z=N.bodyContext,P=Math.max(U+Y-L,0),X,K,O,S;if(V.shrinkWrap){K=V.initialSize;if(F){O=-W+U+Y;X=O-L-P}else{X=-W;O=X+Y}if(!T){I+=J[R]}if(E){O-=U;X-=U;E.dockedAt[V.posProp]-=Y}else{I+=U}if(T){}else{if(H){H.dockedAt[V.posProp]+=J[D]}else{I+=G[D]}}V.size=I;if(!V.horizontal&&!this.owner.manageHeight){S=false}}else{if(F){O=0;X=W-L-P}else{O=-U;X=W-Y-U}K=I}V.delta=O;Z[M](K,S);Z.setProp(V.bodyPosProp,X);return !isNaN(I)},beforeInvalidateShrinkWrapDock:function(g,d){var f=d.axis.sizeModelName;if(!g[f].constrainedMin){g[f]=Ext.layout.SizeModel.calculated}},afterInvalidateShrinkWrapDock:function(m,h){var g=h.axis,o=h.layout,j;if(m[g.sizeModelName].calculated){j=o.dockStretch(h.ownerContext,m,m.target,g);m.setProp(g.posProp,g.delta+j)}},finishConstraints:function(G,N,B){var y=this,z=y.sizeModels,C=N.shrinkWrap,A=B.shrinkWrap,P=y.owner,I,E,D,K,J,F,O,M,L,H;if(C){F=N.size;O=N.collapsed?0:N.minSize;M=N.maxSize;L=N.maxChildSize;H=Math.max(F,L);if(H>M){J=z.constrainedMax;D=M}else{if(H<O){J=z.constrainedMin;D=O}else{if(F<L){J=z.constrainedDock;P.dockConstrainedWidth=D=L}else{D=F}}}}if(A){F=B.size;O=B.collapsed?0:B.minSize;M=B.maxSize;L=B.maxChildSize;H=Math.max(F,L+F-B.initialSize);if(H>M){K=z.constrainedMax;E=M}else{if(H<O){K=z.constrainedMin;E=O}else{if(F<L){K=z.constrainedDock;P.dockConstrainedHeight=E=L}else{if(!G.collapsedVert&&!P.manageHeight){I=false;G.bodyContext.setProp("margin-bottom",B.dockedPixelsEnd)}E=F}}}}if(J||K){if(J&&K&&J.constrainedMax&&K.constrainedByMin){G.invalidate({widthModel:J});return false}if(!G.widthModel.calculatedFromShrinkWrap&&!G.heightModel.calculatedFromShrinkWrap){G.invalidate({widthModel:J,heightModel:K});return false}}else{y.invalidateAxes(G,N,B)}if(C){G.setWidth(D);if(J){G.widthModel=J}}if(A){G.setHeight(E,I);if(K){G.heightModel=K}}return true},invalidateAxes:function(E,J,A){var N=this.beforeInvalidateShrinkWrapDock,I=this.afterInvalidateShrinkWrapDock,F=J.end-J.begin,K=A.initialSize,H=J.shrinkWrapDock&&J.maxChildSize<=F,z=A.shrinkWrapDock&&A.maxChildSize<=K,M,y,B,G,L,w,D,C;if(H||z){if(z){A.begin=A.initialBegin;A.end=A.begin+A.initialSize}M=E.dockedItems;for(B=0,y=M.length;B<y;++B){G=M[B];w=G.horizontal;D=null;if(H&&w){C=J.sizeProp;L=F;D=J}else{if(z&&!w){C=A.sizeProp;L=K;D=A}}if(D){L-=G.getMarginInfo()[C];if(L!==G.props[C]){G.invalidate({before:N,after:I,axis:D,ownerContext:E,layout:this})}}}}},finishPositions:function(t,w,q){var o=t.dockedItems,u=o.length,r=w.delta,s=q.delta,p,v;for(p=0;p<u;++p){v=o[p];v.setProp("x",r+v.dockedAt.x);v.setProp("y",s+v.dockedAt.y)}},finishedLayout:function(d){var f=this,g=d.target;Ext.layout.component.Component.prototype.finishedLayout.apply(this,arguments);if(!d.animatePolicy){if(d.isCollapsingOrExpanding===1){g.afterCollapse(false)}else{if(d.isCollapsingOrExpanding===2){g.afterExpand(false)}}}},getAnimatePolicy:function(j){var f=this,g,h;if(j.isCollapsingOrExpanding===1){g=f.lastCollapsedState}else{if(j.isCollapsingOrExpanding===2){g=j.lastCollapsedState}}if(g==="left"||g==="right"){h=f.horizontalCollapsePolicy}else{if(g==="top"||g==="bottom"){h=f.verticalCollapsePolicy}}return h},getDockedItems:function(B,r){var v=this,z=(B==="visual"),u=z?Ext.ComponentQuery.query("[rendered]",v.owner.dockedItems.items):v.owner.dockedItems.items,w=u&&u.length&&B!==false,C,s,t,y,A,D;if(r==null){t=w&&!z?u.slice():u}else{t=[];for(y=0,D=u.length;y<D;++y){s=u[y].dock;A=(s==="top"||s==="left");if(r?A:!A){t.push(u[y])}}w=w&&t.length}if(w){C=(B=B||"render")==="render";Ext.Array.sort(t,function(c,d){var b,a;if(C&&((b=v.owner.dockOrder[c.dock])!==(a=v.owner.dockOrder[d.dock]))){if(!(b+a)){return b-a}}b=v.getItemWeight(c,B);a=v.getItemWeight(d,B);if((b!==undefined)&&(a!==undefined)){return b-a}return 0})}return t||[]},getItemWeight:function(d,f){var g=d.weight||this.owner.defaultDockWeights[d.dock];return g[f]||g},getLayoutItems:function(){var o=this,h,m,p,q,j;if(o.owner.collapsed){j=o.owner.getCollapsedDockedItems()}else{h=o.getDockedItems("visual");m=h.length;j=[];for(q=0;q<m;q++){p=h[q];if(!p.hidden){j.push(p)}}}return j},measureContentWidth:function(d){var c=d.bodyContext;return c.el.getWidth()-c.getBorderInfo().width},measureContentHeight:function(d){var c=d.bodyContext;return c.el.getHeight()-c.getBorderInfo().height},redoLayout:function(g){var d=this,f=d.owner;if(g.isCollapsingOrExpanding===1){if(f.reExpander){f.reExpander.el.show()}f.addClsWithUI(f.collapsedCls);g.redo(true)}else{if(g.isCollapsingOrExpanding===2){f.removeClsWithUI(f.collapsedCls);g.bodyContext.redo()}}},renderChildren:function(){var d=this,f=d.getDockedItems(),g=d.getRenderTarget();d.handleItemBorders();d.renderItems(f,g)},renderItems:function(J,z){var A=this,P=A.owner,M={},C=J.length,L=P.body,O=!!P.frameSize,D=P.bodyContainer,K,N,H,E,I,F,B,y,G;if(C){for(F=0;F<C;F++){B=J[F];M[B.id]=B}N=A.getRenderTarget().dom.childNodes;H=N.length;I=0;for(F=0;F<H;++F){E=N[F];if(O){G=E===L.dom||E===D;if(!G&&Ext.fly(E).contains(L)){G=true;P.bodyContainer=E}}else{G=E===L.dom}if(G){K=F;break}if(M[E.id]){++I}}K-=I;for(F=0;F<C;++F){B=J[F];y=K+F;if(B.dock==="right"||B.dock==="bottom"){++y}if(!B.rendered){A.renderItem(B,z,y)}else{if(!A.isValidParent(B,z,y)){A.moveItem(B,z,y)}}}}},undoLayout:function(g){var d=this,f=d.owner;if(g.isCollapsingOrExpanding===1){if(f.reExpander){f.reExpander.el.hide()}f.removeClsWithUI(f.collapsedCls);g.undo(true)}else{if(g.isCollapsingOrExpanding===2){f.addClsWithUI(f.collapsedCls);g.bodyContext.undo()}}},sizePolicy:{nostretch:{setsWidth:0,setsHeight:0},horz:{shrinkWrap:{setsWidth:1,setsHeight:0,readsWidth:1},stretch:{setsWidth:1,setsHeight:0}},vert:{shrinkWrap:{setsWidth:0,setsHeight:1,readsHeight:1},stretch:{setsWidth:0,setsHeight:1}},stretchV:{setsWidth:0,setsHeight:1},autoStretchH:{readsWidth:1,setsWidth:1,setsHeight:0},autoStretchV:{readsHeight:1,setsWidth:0,setsHeight:1}},getItemSizePolicy:function(r,p){var s=this,o=s.sizePolicy,q=s.owner.shrinkWrapDock,j,m;if(r.stretch===false){return o.nostretch}j=r.dock;m=(j==="left"||j==="right");q=q===true?3:(q||0);if(m){o=o.vert;q=q&1}else{o=o.horz;q=q&2}if(q){if(!p){p=s.owner.getSizeModel()}if(p[m?"height":"width"].shrinkWrap){return o.shrinkWrap}}return o.stretch},configureItem:function(d,c){Ext.layout.component.Component.prototype.configureItem.apply(this,arguments);d.addCls(this._itemCls);if(!d.ignoreBorderManagement){d.addClsWithUI(this.getDockCls(d.dock))}},getDockCls:function(b){return"docked-"+b},afterRemove:function(d){var c;Ext.layout.component.Component.prototype.afterRemove.apply(this,arguments);d.removeCls(this._itemCls);if(!d.ignoreBorderManagement){d.removeClsWithUI(this.getDockCls(d.dock))}c=d.el.dom;if(!d.destroying&&c){c.parentNode.removeChild(c)}this.childrenChanged=true},borderCollapseMap:{},getBorderCollapseTable:function(){var p=this,m=p.borderCollapseMap,j=p.owner,h=j.baseCls,o=j.ui,q;m=m[h]||(m[h]={});q=m[o];if(!q){h+="-"+o+"-outer-border-";m[o]=q=[0,h+"l",h+"b",h+"bl",h+"r",h+"rl",h+"rb",h+"rbl",h+"t",h+"tl",h+"tb",h+"tbl",h+"tr",h+"trl",h+"trb",h+"trbl"]}return q}},0,0,0,0,["layout.dock"],0,[Ext.layout.component,"Dock",Ext.layout.component,"AbstractDock"],0));Ext.define("Ext.theme.neptune.layout.component.Dock",{override:"Ext.layout.component.Dock",noBorderClassTable:[0,"x-noborder-l","x-noborder-b","x-noborder-bl","x-noborder-r","x-noborder-rl","x-noborder-rb","x-noborder-rbl","x-noborder-t","x-noborder-tl","x-noborder-tb","x-noborder-tbl","x-noborder-tr","x-noborder-trl","x-noborder-trb","x-noborder-trbl"],edgeMasks:{top:8,right:4,bottom:2,left:1},handleItemBorders:function(){var O=this,Z=0,L=8,K=4,U=2,aa=1,ad=O.owner,H=ad.bodyBorder,Q=ad.border,W=O.collapsed,M=O.edgeMasks,V=O.noBorderClassTable,P=ad.dockedItems.generation,S,ab,T,X,I,R,b,N,Y,J,G,ac;if(O.initializedBorders===P){return}G=[];ac=[];ab=O.getBorderCollapseTable();V=O.getBorderClassTable?O.getBorderClassTable():V;O.initializedBorders=P;O.collapsed=false;T=O.getDockedItems("visual");O.collapsed=W;for(I=0,R=T.length;I<R;I++){b=T[I];if(b.ignoreBorderManagement){continue}N=b.dock;J=X=0;G.length=0;ac.length=0;if(N!=="bottom"){if(Z&L){S=b.border}else{S=Q;if(S!==false){X+=L}}if(S===false){J+=L}}if(N!=="left"){if(Z&K){S=b.border}else{S=Q;if(S!==false){X+=K}}if(S===false){J+=K}}if(N!=="top"){if(Z&U){S=b.border}else{S=Q;if(S!==false){X+=U}}if(S===false){J+=U}}if(N!=="right"){if(Z&aa){S=b.border}else{S=Q;if(S!==false){X+=aa}}if(S===false){J+=aa}}if((Y=b.lastBorderMask)!==J){b.lastBorderMask=J;if(Y){ac[0]=V[Y]}if(J){G[0]=V[J]}}if((Y=b.lastBorderCollapse)!==X){b.lastBorderCollapse=X;if(Y){ac[ac.length]=ab[Y]}if(X){G[G.length]=ab[X]}}if(ac.length){b.removeCls(ac)}if(G.length){b.addCls(G)}Z|=M[N]}J=X=0;G.length=0;ac.length=0;if(Z&L){S=H}else{S=Q;if(S!==false){X+=L}}if(S===false){J+=L}if(Z&K){S=H}else{S=Q;if(S!==false){X+=K}}if(S===false){J+=K}if(Z&U){S=H}else{S=Q;if(S!==false){X+=U}}if(S===false){J+=U}if(Z&aa){S=H}else{S=Q;if(S!==false){X+=aa}}if(S===false){J+=aa}if((Y=O.lastBodyBorderMask)!==J){O.lastBodyBorderMask=J;if(Y){ac[0]=V[Y]}if(J){G[0]=V[J]}}if((Y=O.lastBodyBorderCollapse)!==X){O.lastBodyBorderCollapse=X;if(Y){ac[ac.length]=ab[Y]}if(X){G[G.length]=ab[X]}}if(ac.length){ad.removeBodyCls(ac)}if(G.length){ad.addBodyCls(G)}},onRemove:function(h){var j=this,f=h.lastBorderMask,g=h.lastBorderCollapse;if(!h.destroyed&&!h.ignoreBorderManagement){if(f){h.lastBorderMask=0;h.removeCls(j.noBorderClassTable[f])}if(g){h.lastBorderCollapse=0;h.removeCls(j.getBorderCollapseTable()[g])}}(arguments.callee.$previous||Ext.layout.component.Component.prototype.onRemove).call(this,h)}});(Ext.cmd.derive("Ext.util.Memento",Ext.Base,(function(){function m(b,c,a,d){b[d?d+a:a]=c[a]}function o(b,c,a){delete b[a]}function j(q,a,f,b){var d=b?b+f:f,c=q[d];if(c||q.hasOwnProperty(d)){h(a,f,c)}}function h(b,a,c){if(Ext.isDefined(c)){b[a]=c}else{delete b[a]}}function g(c,f,p,b,a){if(f){if(Ext.isArray(b)){var s,d=b.length;for(s=0;s<d;s++){c(f,p,b[s],a)}}else{c(f,p,b,a)}}}return{data:null,target:null,constructor:function(a,b){this.data={};if(a){this.target=a;if(b){this.capture(b)}}},capture:function(d,a,b){var c=this;g(m,c.data||(c.data={}),a||c.target,d,b)},remove:function(a){g(o,this.data,null,a)},restore:function(c,d,a,b){g(j,this.data,a||this.target,c,b);if(d!==false){this.remove(c)}},restoreAll:function(d,q){var b=this,c=q||this.target,a=b.data,f;d=d!==false;for(f in a){if(a.hasOwnProperty(f)){h(c,f,a[f]);if(d){delete a[f]}}}}}}()),1,0,0,0,0,0,[Ext.util,"Memento"],0));(Ext.cmd.derive("Ext.container.DockingContainer",Ext.Base,{isDockingContainer:true,defaultDockWeights:{top:{render:1,visual:1},left:{render:3,visual:5},right:{render:5,visual:7},bottom:{render:7,visual:3}},dockOrder:{top:-1,left:-1,right:1,bottom:1},horizontalDocks:0,tabGuard:false,tabGuardTpl:'<div id="{id}-{tabGuardEl}" data-ref="{tabGuardEl}" tabIndex="0" class="x-tab-guard x-tab-guard-{tabGuard}" ></div>',addDocked:function(v,s){var t=this,A=t.rendered,z=0,r=t.dockedItems,y=r.getCount(),w,u,q,B;v=t.prepareItems(v);B=v.length;if(A){Ext.suspendLayouts()}if(s===undefined){s=y}else{s=Math.min(s,y)}for(;z<B;z++){q=v[z];q.dock=q.dock||"top";if(q.dock==="left"||q.dock==="right"){t.horizontalDocks++}w=s+z;r.insert(w,q);u=!!q.instancedCmp;delete q.instancedCmp;q.onAdded(t,w,u);delete q.$initParent;if(t.onDockedAdd!==Ext.emptyFn){t.onDockedAdd(q)}if(t.hasListeners.dockedadd){t.fireEvent("dockedadd",t,q,w)}}if(t.rendered){t.updateLayout();Ext.resumeLayouts(true)}return v},destroyDockedItems:function(){var d=this.dockedItems,c;if(d){while((c=d.first())){this.removeDocked(c,true)}}},doRenderDockedItems:function(t,q,p){var r=q.$comp,s=r.componentLayout,u=r.tabGuard&&r.getTpl("tabGuardTpl"),m,o;if(s.getDockedItems&&!q.$skipDockedItems){if(u&&!p){q.tabGuard="before";r.addChildEl(q.tabGuardEl="tabGuardBeforeEl");u.applyOut(q,t)}m=s.getDockedItems("render",!p);o=m&&s.getItemsRenderTree(m);if(o){Ext.DomHelper.generateMarkup(o,t)}if(u&&p){q.tabGuard="after";r.addChildEl(q.tabGuardEl="tabGuardAfterEl");u.applyOut(q,t)}}},getDockedComponent:function(b){if(Ext.isObject(b)){b=b.getItemId()}return this.dockedItems.get(b)},getDockedItems:function(f,g){var d=this.getComponentLayout().getDockedItems("render",g);if(f&&d.length){d=Ext.ComponentQuery.query(f,d)}return d},getDockingRefItems:function(g,j){var h=g&&"*,* *",m=this.getDockedItems(h,true),o;m.push.apply(m,j);o=this.getDockedItems(h,false);m.push.apply(m,o);return m},initDockingItems:function(){var c=this,d=c.dockedItems;if(!d||!d.isMixedCollection){c.dockedItems=new Ext.util.ItemCollection();if(d){c.addDocked(d)}}},insertDocked:function(c,d){this.addDocked(d,c)},onDockedAdd:Ext.emptyFn,onDockedRemove:Ext.emptyFn,removeDocked:function(j,g){var m=this,o,h;g=g===true||(g!==false&&m.autoDestroy);if(!m.dockedItems.contains(j)){return j}if(j.dock==="left"||j.dock==="right"){m.horizontalDocks--}o=m.componentLayout;h=o&&m.rendered;if(h){o.onRemove(j)}m.dockedItems.remove(j);j.onRemoved(j.destroying||g);m.onDockedRemove(j);if(g){j.destroy()}else{if(h){o.afterRemove(j)}}if(m.hasListeners.dockedremove){m.fireEvent("dockedremove",m,j)}if(!m.destroying){m.updateLayout()}return j},moveDocked:function(g,f){var d=this;if(d.rendered){Ext.suspendLayouts()}d.removeDocked(g,false);g.dock=f;d.addDocked(g);if(d.rendered){if(g.frame){Ext.getDetachedBody().appendChild(g.el);g.updateFrame()}Ext.resumeLayouts(true)}},setupDockingRenderTpl:function(b){b.renderDockedItems=this.doRenderDockedItems}},0,0,0,0,0,0,[Ext.container,"DockingContainer"],0));(Ext.cmd.derive("Ext.panel.Panel",Ext.container.Container,{alternateClassName:"Ext.Panel",childEls:["body"],renderTpl:['<tpl if="headingText">','<div id="{id}-headingEl" data-ref="headingEl" role="heading"',' class="',"x-",'hidden-clip" style="height:0">',"{headingText}","</div>","</tpl>","{% this.renderDockedItems(out,values,0); %}",'<div id="{id}-body" data-ref="body" class="{baseCls}-body<tpl if="bodyCls"> {bodyCls}</tpl>',' {baseCls}-body-{ui}<tpl if="uiCls">','<tpl for="uiCls"> {parent.baseCls}-body-{parent.ui}-{.}</tpl>','</tpl>{childElCls}"','<tpl if="bodyAriaAttributes">','<tpl foreach="bodyAriaAttributes"> {$}="{.}"</tpl>',"<tpl else>",' role="presentation"',"</tpl>",'<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{%this.renderContainer(out,values);%}","</div>","{% this.renderDockedItems(out,values,1); %}"],headerPosition:"top",iconAlign:"left",titleAlign:"left",titleRotation:"default",beforeRenderConfig:{glyph:null,headerPosition:null,icon:null,iconAlign:null,iconCls:null,title:null,titleAlign:null,titleRotation:null},animCollapse:Ext.enableFx,border:true,closable:false,closeAction:"destroy",closeToolText:"Close panel",collapsed:false,collapsedCls:"collapsed",collapseFirst:true,collapsible:undefined,collapseToolText:"Collapse panel",expandToolText:"Expand panel",constrain:false,constrainHeader:false,dockedItems:null,tbar:null,bbar:null,fbar:null,lbar:null,rbar:null,buttons:null,floatable:true,frame:false,frameHeader:true,hideCollapseTool:false,manageHeight:true,maskElement:"el",minButtonWidth:75,preventHeader:false,shrinkWrapDock:false,titleCollapse:undefined,baseCls:"x-panel",bodyPosProps:{x:"x",y:"y"},componentLayout:"dock",contentPaddingProperty:"bodyPadding",emptyArray:[],isPanel:true,defaultBindProperty:"title",addBodyCls:function(d){var g=this,f=g.rendered?g.body:g.getProtoBody();f.addCls(d);return g},addTool:function(q){if(!Ext.isArray(q)){q=[q]}var r=this,o=r.header,m=q.length,p=r.tools,s,j;if(!o||!o.isHeader){o=null;if(!p){r.tools=p=[]}}for(s=0;s<m;s++){j=q[s];j.toolOwner=r;if(o){o.addTool(j)}else{p.push(j)}}r.updateHeader()},addTools:Ext.emptyFn,setCollapsible:function(j){var f=this,h=f.collapsible,g=f.collapseTool;f.collapsible=j;if(j&&!h){f.updateCollapseTool();g=f.collapseTool;if(g){g.show()}}else{if(!j&&h){if(g){g.hide()}}}},addUIClsToElement:function(d){var g=this,f=Ext.container.Container.prototype.addUIClsToElement.apply(this,arguments);g.addBodyCls(["x-"+d,g.baseCls+"-body-"+d,g.baseCls+"-body-"+g.ui+"-"+d]);return f},afterCollapse:function(j){var f=this,g=f.ariaEl.dom,h=f.ownerLayout;f.isCollapsingOrExpanding=0;f.updateCollapseTool();if(j){f.removeCls("x-animating-size")}if(h){h.afterCollapse(f,j)}if(g){g.setAttribute("aria-expanded",false)}if(f.isAccordionPanel){f.body.dom.setAttribute("aria-hidden",true)}f.setHiddenDocked();f.fireEvent("collapse",f)},afterExpand:function(j){var f=this,g=f.ariaEl.dom,h=f.ownerLayout;f.isCollapsingOrExpanding=0;f.updateCollapseTool();if(j){f.removeCls("x-animating-size")}if(h){h.afterExpand(f,j)}if(g){g.setAttribute("aria-expanded",true)}if(f.isAccordionPanel){f.body.dom.setAttribute("aria-hidden",false)}f.fireEvent("expand",f);f.fireHierarchyEvent("expand")},beforeDestroy:function(){var b=this;Ext.destroy(b.placeholder,b.ghostPanel,b.dd,b.accordionKeyNav,b.defaultButtonKeyNav);b.destroyDockedItems();Ext.container.Container.prototype.beforeDestroy.call(this)},destroy:function(){Ext.container.Container.prototype.destroy.call(this);this.dockedItems=this.bodyContainer=null},beforeRender:function(){var c=this,d;c.getProtoBody();Ext.container.Container.prototype.beforeRender.call(this);c.initTools();if(!(c.preventHeader||(c.header===false))||c.isViewportBorderChild){c.updateHeader()}c.afterHeaderInit=true;if(c.collapsed){if(c.isPlaceHolderCollapse()){if(!c.hidden){c.setHiddenState(true);c.preventCollapseFire=true;c.placeholderCollapse();delete c.preventCollapseFire;d=c.collapsed;c.collapsed=false}}else{c.beginCollapse();c.addClsWithUI(c.collapsedCls)}}if(d){c.collapsed=d}},getMemento:function(d){var c=this;if(d&&typeof d==="string"){d+="Memento";return c[d]||(c[d]=new Ext.util.Memento(c))}},beginCollapse:function(){var q=this,s=q.lastBox,o=q.rendered,j=q.getMemento("collapse"),r=q.getSizeModel(),p=q.header,m;j.capture(["height","minHeight","width","minWidth"]);if(s){j.capture(q.restoreDimension(),s,"last.")}if(q.collapsedVertical()){if(r.width.shrinkWrap){q.width=o?q.getWidth():q.width||q.minWidth||100}delete q.height;q.minHeight=0}else{if(q.collapsedHorizontal()){if(r.height.shrinkWrap){q.height=o?q.getHeight():q.height||q.minHeight||100}delete q.width;q.minWidth=0}}if(q.ownerCt){q.ownerCt.getLayout().beginCollapse(q)}if(!q.isPlaceHolderCollapse()&&p!==false){if(p===(m=q.getReExpander())){p.collapseImmune=true;p.getInherited().collapseImmune=true;p.addClsWithUI(q.getHeaderCollapsedClasses(p));if(p.rendered){p.updateFrame()}}else{if(m.el){m.el.show();m.hidden=false}}}if(q.resizer){q.resizer.disable()}},beginDrag:function(){if(this.floatingDescendants){this.floatingDescendants.hide()}},beginExpand:function(){var o=this,p=o.lastBox,q=o.getMemento("collapse"),j=o.restoreDimension(),m=o.header,h;if(q){q.restore(["minHeight","minWidth",j]);if(p){q.restore(j,true,p,"last.")}}if(o.ownerCt){o.ownerCt.getLayout().beginExpand(o)}if(!o.isPlaceHolderCollapse()&&m!==false){if(m===(h=o.getReExpander())){delete m.collapseImmune;delete m.getInherited().collapseImmune;m.removeClsWithUI(o.getHeaderCollapsedClasses(m));if(m.rendered){m.expanding=true;m.updateFrame();delete m.expanding}}else{h.hidden=true;h.el.hide()}}if(o.resizer){o.resizer.enable()}},bridgeToolbars:function(){var j=this,m=[],o=j.minButtonWidth,q,h;function p(c,a,b){if(Ext.isArray(c)){c={xtype:"toolbar",items:c}}else{if(!c.xtype){c.xtype="toolbar"}}c.dock=a;if(b){c.layout=Ext.applyIf(c.layout||{},{pack:{left:"start",center:"center"}[j.buttonAlign]||"end"})}return c}if(j.tbar){m.push(p(j.tbar,"top"));j.tbar=null}if(j.bbar){m.push(p(j.bbar,"bottom"));j.bbar=null}if(j.buttons){j.fbar=j.buttons;j.buttons=null}if(j.fbar){q=p(j.fbar,"bottom",true);q.ui="footer";if(o){h=q.defaults;q.defaults=function(a){var d=h||{},b=!a.xtype||a.isButton,c;if(!b){c=Ext.ClassManager.getByAlias("widget."+a.xtype);if(c){b=c.prototype.isButton}}if(b&&!("minWidth" in d)){d=Ext.apply({minWidth:o},d)}return d}}m.push(q);j.fbar=null}if(j.lbar){m.push(p(j.lbar,"left"));j.lbar=null}if(j.rbar){m.push(p(j.rbar,"right"));j.rbar=null}if(j.dockedItems){if(j.dockedItems.isMixedCollection){j.addDocked(m)}else{if(!Ext.isArray(j.dockedItems)){j.dockedItems=[j.dockedItems]}j.dockedItems=j.dockedItems.concat(m)}}else{j.dockedItems=m}},close:function(){if(this.fireEvent("beforeclose",this)!==false){this.doClose()}},collapse:function(q,m){var r=this,p=q||r.collapseDirection,j=r.ownerCt,s=r.ownerLayout,o=r.rendered;if(r.isCollapsingOrExpanding){return r}if(arguments.length<2){m=r.animCollapse}if(r.collapsed||r.fireEvent("beforecollapse",r,q,m)===false){return r}if(s&&s.onBeforeComponentCollapse){if(s.onBeforeComponentCollapse(r)===false){return r}}if(o&&j&&r.isPlaceHolderCollapse()){return r.placeholderCollapse(q,m)}r.collapsed=p;if(o){r.beginCollapse()}r.getInherited().collapsed=true;r.fireHierarchyEvent("collapse");if(o){r.doCollapseExpand(1,m)}return r},collapsedHorizontal:function(){var b=this.getCollapsed();return b==="left"||b==="right"},collapsedVertical:function(){var b=this.getCollapsed();return b==="top"||b==="bottom"},convertCollapseDir:function(b){return b.substr(0,1)},createGhost:function(g){var f=this,h=f.header,j=f.frame&&!f.alwaysFramed;return{xtype:"panel",hidden:false,header:h?{titleAlign:h.getTitleAlign()}:null,ui:j?f.ui.replace(/-framed$/,""):f.ui,id:f.id+"-ghost",renderTo:Ext.getBody(),resizable:false,draggable:false,closable:false,focusable:false,floating:true,shadow:false,frame:j,shim:f.shim,alwaysFramed:f.alwaysFramed,overlapHeader:f.overlapHeader,headerPosition:f.getHeaderPosition(),titleRotation:f.getTitleRotation(),baseCls:f.baseCls,getRefOwner:function(){return f.getRefOwner()},cls:f.baseCls+"-ghost "+(g||"")}},createReExpander:function(r,s){var t=this,p=r==="left",u=r==="right",q=p||u,m=t.ownerCt,o=Ext.apply({hideMode:"offsets",title:t.getTitle(),titleAlign:t.getTitleAlign(),vertical:q,textCls:t.headerTextCls,icon:t.getIcon(),iconCls:t.getIconCls(),iconAlign:t.getIconAlign(),glyph:t.getGlyph(),baseCls:t.self.prototype.baseCls+"-header",ui:t.ui,frame:t.frame&&t.frameHeader,ignoreParentFrame:t.frame||t.overlapHeader,ignoreBorderManagement:t.frame||t.ignoreHeaderBorderManagement,indicateDrag:t.draggable,collapseImmune:true,ariaRole:t.ariaRole,preventRefocus:true,ownerCt:(m&&t.collapseMode==="placeholder")?m:t,ownerLayout:t.componentLayout,forceOrientation:true,margin:t.margin},s);if(t.collapseMode==="mini"){if(q){o.width=1}else{o.height=1}}if(!t.hideCollapseTool){if(p||(u&&t.isPlaceHolderCollapse())){o.titlePosition=1}o.tools=[{xtype:"tool",type:"expand-"+t.getOppositeDirection(r),isDefaultExpandTool:true,uiCls:["top"],handler:t.toggleCollapse,scope:t,tooltip:t.expandToolText}]}o=new Ext.panel.Header(o);o.addClsWithUI(t.getHeaderCollapsedClasses(o));o.expandTool=o.down("tool[isDefaultExpandTool=true]");return o},doClose:function(){this.fireEvent("close",this);this[this.closeAction]()},doCollapseExpand:function(h,g){var m=this,o=m.animCollapse,j=m.ownerLayout;m.animCollapse=g;m.isCollapsingOrExpanding=h;if(g){m.addCls("x-animating-size")}if(j&&!g){j.onContentChange(m)}else{m.updateLayout({isRoot:true})}m.animCollapse=o;return m},endDrag:function(){if(this.floatingDescendants){this.floatingDescendants.show()}},expand:function(g){var j=this,f=j.ownerLayout,h=j.rendered;if(j.isCollapsingOrExpanding){return j}if(!arguments.length){g=j.animCollapse}if(!j.collapsed&&!j.floatedFromCollapse){return j}if(j.fireEvent("beforeexpand",j,g)===false){return j}if(f&&f.onBeforeComponentExpand){if(f.onBeforeComponentExpand(j)===false){return j}}delete j.getInherited().collapsed;if(h&&j.isPlaceHolderCollapse()){return j.placeholderExpand(g)}j.restoreHiddenDocked();if(h){j.beginExpand()}j.collapsed=false;if(j.rendered){j.doCollapseExpand(2,g)}return j},findReExpander:function(p){var q=this,o=Ext.Component,r=q.dockedItems.items,m=r.length,c,s;if(q.collapseMode==="mini"){return}switch(p){case o.DIRECTION_TOP:case o.DIRECTION_BOTTOM:for(s=0;s<m;s++){c=r[s];if(!c.hidden){if(c.isHeader&&(!c.dock||c.dock==="top"||c.dock==="bottom")){return c}}}break;case o.DIRECTION_LEFT:case o.DIRECTION_RIGHT:for(s=0;s<m;s++){c=r[s];if(!c.hidden){if(c.isHeader&&(c.dock==="left"||c.dock==="right")){return c}}}break;default:throw ("Panel#findReExpander must be passed a valid collapseDirection")}},floatCollapsedPanel:function(){var q=this,p=q.placeholder,w=p.getSize(),r=Ext.panel.Panel.floatCls,t=q.collapsed,o=q.ownerCt||q,v,u,s;if(q.isSliding){return}if(q.el.hasCls(r)){q.slideOutFloatedPanel();return}q.isSliding=true;p.el.hide();p.hidden=true;q.el.show();q.setHiddenState(false);q.collapsed=false;o.updateLayout();p.el.show();p.hidden=false;q.el.hide();q.setHiddenState(true);q.collapsed=t;o.updateLayout();s=q.getBox(false,true);q.slideOutTask=q.slideOutTask||new Ext.util.DelayedTask(q.slideOutFloatedPanel,q);if(Ext.supports.Touch){Ext.on("mousedown",u=function(a){if(!a.within(q.el)){Ext.un("mousedown",u);q.slideOutFloatedPanel()}})}if(!q.placeholderListener){q.placeholderListener=p.on({resize:q.onPlaceholderResize,scope:q,destroyable:true})}p.el.on("mouseleave",q.onMouseLeaveFloated,q);q.el.on("mouseleave",q.onMouseLeaveFloated,q);p.el.on("mouseenter",q.onMouseEnterFloated,q);q.el.on("mouseenter",q.onMouseEnterFloated,q);q.el.addCls(r);q.floated=t;if(q.collapseTool){q.collapseTool.el.hide()}switch(q.collapsed){case"top":q.width=w.width;q.setLocalXY(s.x,s.y+w.height);break;case"right":q.height=w.height;q.setLocalXY(s.x-w.width,s.y);break;case"bottom":q.width=w.width;q.setLocalXY(s.x,s.y-w.height);break;case"left":q.height=w.height;q.setLocalXY(s.x+w.width,s.y);break}v=q.convertCollapseDir(q.collapsed);q.floatedFromCollapse=q.collapsed;q.collapsed=false;q.setHiddenState(false);q.el.slideIn(v,{preserveScroll:true,duration:Ext.Number.from(q.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){q.isSliding=false;q.fireEvent("float",q)}}})},onPlaceholderResize:function(o,q,j){var h=this,p=h.getBox(false,true),m=o.getBox(false,true);switch(h.floated){case"top":h.width=q;h.setLocalY(m.y+m.height);break;case"right":h.height=j;h.setLocalX(m.x-p.width);break;case"bottom":h.width=q;h.setLocalY(m.y-p.height);break;case"left":h.height=j;h.setLocalX(m.x+m.width);break}h.updateLayout({isRoot:true})},getAnimationProps:function(){var d=this,g=d.animCollapse,f;f=Ext.container.Container.prototype.getAnimationProps.call(this);if(typeof g==="number"){f.duration=g}return f},getCollapsed:function(){var b=this;if(b.collapsed===true){return b.collapseDirection}return b.collapsed},getCollapsedDockedItems:function(){var b=this;return b.header===false||b.collapseMode==="placeholder"?b.emptyArray:[b.getReExpander()]},getComponent:function(d){var c=Ext.container.Container.prototype.getComponent.apply(this,arguments);if(c===undefined&&!Ext.isNumber(d)){c=this.getDockedComponent(d)}return c},getHeader:function(){return this.header},getHeaderCollapsedClasses:function(h){var f=this,j=f.collapsedCls,g;g=[j,j+"-"+h.getDockName()];if(f.border&&(!f.frame||(f.frame&&Ext.supports.CSS3BorderRadius))){g.push(j+"-border-"+h.getDockName())}return g},getKeyMap:function(){return this.keyMap||(this.keyMap=new Ext.util.KeyMap(Ext.apply({target:this.el},this.keys)))},getOppositeDirection:function(d){var c=Ext.Component;switch(d){case c.DIRECTION_TOP:return c.DIRECTION_BOTTOM;case c.DIRECTION_RIGHT:return c.DIRECTION_LEFT;case c.DIRECTION_BOTTOM:return c.DIRECTION_TOP;case c.DIRECTION_LEFT:return c.DIRECTION_RIGHT}},getPlaceholder:function(q){var r=this,o=q||r.collapseDirection,s=null,p=r.placeholder,j=r.floatable,m=r.titleCollapse;if(!p){if(j||(r.collapsible&&m)){s={click:{fn:(!m&&j)?r.floatCollapsedPanel:r.toggleCollapse,element:"el",scope:r}}}r.placeholder=p=Ext.widget(r.createReExpander(o,{id:r.id+"-placeholder",listeners:s}))}if(!p.placeholderFor){if(!p.isComponent){r.placeholder=p=r.lookupComponent(p)}Ext.applyIf(p,{margin:r.margin,placeholderFor:r,synthetic:true});p.addCls(["x-region-collapsed-placeholder","x-region-collapsed-"+o+"-placeholder",r.collapsedCls])}return p},getProtoBody:function(){var c=this,d=c.protoBody;if(!d){c.protoBody=d=new Ext.util.ProtoElement({cls:c.bodyCls,style:c.bodyStyle,clsProp:"bodyCls",styleProp:"bodyStyle",styleIsText:true})}return d},getReExpander:function(j){var f=this,h=j||f.collapseDirection,g=f.reExpander||f.findReExpander(h);f.expandDirection=f.getOppositeDirection(h);if(!g){f.reExpander=g=f.createReExpander(h,{dock:h,cls:"x-docked "+f.baseCls+"-"+f.ui+"-collapsed",isCollapsedExpander:true});f.dockedItems.insert(0,g)}return g},getRefItems:function(d){var c=Ext.container.Container.prototype.getRefItems.apply(this,arguments);return this.getDockingRefItems(d,c)},getState:function(){var h=this,o=Ext.container.Container.prototype.getState.call(this)||{},j=h.collapsed,g=h.floated,m;if(g){h.collapsed=g}o=h.addPropertyToState(o,"collapsed");if(g){h.collapsed=j}if(h.getCollapsed()){m=h.getMemento("collapse").data;o=h.addPropertyToState(o,"collapsed",m);if(h.collapsedVertical()){delete o.height;if(m){o=h.addPropertyToState(o,"height",m.height)}}else{delete o.width;if(m){o=h.addPropertyToState(o,"width",m.width)}}}return o},applyState:function(j){var f=this,g={},h;if(j){h=j.collapsed;if(h){g=f.getMemento("collapse");Ext.Object.merge(g.data,h);j.collapsed=true}Ext.container.Container.prototype.applyState.apply(this,arguments)}},ghost:function(q){var u=this,B=u.ghostPanel,y=u.getBox(),z=u.header,s,w,t,r,v,A;if(!B){u.ghostPanel=B=Ext.widget(u.createGhost(q));B.el.dom.removeAttribute("tabIndex")}else{B.el.show()}B.setHiddenState(false);B.floatParent=u.floatParent;B.toFront();if(z&&!u.preventHeader){s=B.header;s.suspendLayouts();w=s.query("tool");for(A=w.length;A--;){s.remove(w[A])}s.setTitlePosition(0);B.addTool(u.ghostTools());B.setTitle(u.getTitle());s.setTitlePosition(z.titlePosition);r=u.getIconCls();if(r){B.setIconCls(r)}else{t=u.getIcon();if(t){B.setIcon(t)}else{v=u.getGlyph();if(v){B.setGlyph(v)}}}s.addCls("x-header-ghost");s.resumeLayouts()}B.setPagePosition(y.x,y.y);B.setSize(y.width,y.height);u.el.hide();return B},ghostTools:function(){var o=[],m=this.header,p=m?m.query("tool[hidden=false]"):[],q,j,h;if(p.length){q=0;j=p.length;for(;q<j;q++){h=p[q];o.push({type:h.type,tooltip:h.tooltip})}}else{o=[{type:"placeholder"}]}return o},initBodyBorder:function(){var b=this;if(b.frame&&b.bodyBorder){if(!Ext.isNumber(b.bodyBorder)){b.bodyBorder=1}b.getProtoBody().setStyle("border-width",this.unitizeBox(b.bodyBorder))}},initBodyStyles:function(){var c=this,d=c.getProtoBody();if(c.bodyPadding!==undefined){if(c.layout.managePadding){d.setStyle("padding",0)}else{d.setStyle("padding",this.unitizeBox((c.bodyPadding===true)?5:c.bodyPadding))}}c.initBodyBorder()},initBorderProps:function(){var b=this;if(b.frame&&b.border&&b.bodyBorder===undefined){b.bodyBorder=false}if(b.frame&&b.border&&(b.bodyBorder===false||b.bodyBorder===0)){b.manageBodyBorders=true}},initComponent:function(){var b=this;if(b.collapsible){b.addStateEvents(["expand","collapse"])}if(b.unstyled){b.setUI("plain")}if(b.frame){b.setUI(b.ui+"-framed")}b.bridgeToolbars();b.initBorderProps();Ext.container.Container.prototype.initComponent.call(this);b.collapseDirection=b.collapseDirection||b.getHeaderPosition()||Ext.Component.DIRECTION_TOP;b.hiddenOnCollapse=new Ext.dom.CompositeElement()},initItems:function(){Ext.container.Container.prototype.initItems.call(this);this.initDockingItems()},initRenderData:function(){var d=this,c=Ext.container.Container.prototype.initRenderData.call(this);d.initBodyStyles();d.protoBody.writeTo(c);delete d.protoBody;if(d.headingText){c.headingText=d.headingText;d.addChildEl("headingEl")}if(d.bodyAriaRole){c.bodyAriaAttributes={role:d.bodyAriaRole};if(!d.ariaStaticRoles[d.bodyAriaRole]&&d.bodyAriaRenderAttributes){Ext.apply(c.bodyAriaAttributes,d.bodyAriaRenderAttributes)}}return c},calculateConstrainedPosition:function(r,m,s,o){var q=this,p=q.header,t,u;if(q.constrainHeader){t=p.lastBox;if(o){if(!p.vertical){o=[o[0],t?t.height:o[1]]}else{o=[t?t.width:o[0],o[1]]}}else{if(t){o=[t.width,t.height]}}u=q.floatParent;r=r||q.constrainTo||(u?u.getTargetEl():null)||q.container||q.el.parent()}return Ext.container.Container.prototype.calculateConstrainedPosition.call(this,r,m,s,o)},initTools:function(){var o=this,j=o.tools,g,m,h;o.tools=[];for(g=j&&j.length;g;){--g;o.tools[g]=h=j[g];h.toolOwner=o}if(o.collapsible&&!(o.hideCollapseTool||o.header===false||o.preventHeader)){o.updateCollapseTool();if(o.collapseFirst){o.tools.unshift(o.collapseTool)}}o.addTools();if(o.pinnable){o.initPinnable()}if(o.closable){o.addClsWithUI("closable");m={xtype:"tool",type:"close",scope:o,handler:o.close,tooltip:o.closeToolText};if(o.isAccordionPanel){m.focusable=false;m.ariaRole="presentation"}o.addTool(m)}if(o.collapseTool&&!o.collapseFirst){o.addTool(o.collapseTool)}},isLayoutRoot:function(){if(this.floatedFromCollapse){return true}return Ext.container.Container.prototype.isLayoutRoot.call(this)},isPlaceHolderCollapse:function(){return this.collapseMode==="placeholder"},isVisible:function(d){var c=this;if(c.collapsed&&c.placeholder){return c.placeholder.isVisible(d)}return Ext.container.Container.prototype.isVisible.apply(this,arguments)},onBoxReady:function(){var d=this,c;Ext.container.Container.prototype.onBoxReady.apply(this,arguments);if(d.collapsed){d.setHiddenDocked()}if(d.isAccordionPanel){d.ariaEl=d.header.titleCmp.el;d.ariaEl.dom.setAttribute("aria-expanded",!d.collapsed);d.body.dom.setAttribute("aria-labelledby",d.header.titleCmp.id);d.body.dom.setAttribute("aria-hidden",!!d.collapsed);d.accordionKeyNav=new Ext.util.KeyNav({target:d.header.titleCmp.el,scope:d,left:d.navigateAccordion,right:d.navigateAccordion,left:d.navigateAccordion,up:d.navigateAccordion,down:d.navigateAccordion,home:d.navigateAccordion,end:d.navigateAccordion,space:d.toggleCollapse,enter:d.toggleCollapse,del:{alt:true,fn:d.maybeClose}})}if(d.defaultButton){c=d.defaultButtonTarget?d[d.defaultButtonTarget]:d.body;d.defaultButtonKeyNav=new Ext.util.KeyNav({target:c,scope:d,defaultEventAction:"stopEvent",enter:d.fireDefaultButton})}},onHide:function(j,g,o){var m=this,h=m.dd;if(m.floatedFromCollapse){m.slideOutFloatedPanel(true)}if(m.draggable&&h){h.endDrag()}if(m.collapsed&&m.placeholder){if(m.splitter){Ext.suspendLayouts();m.splitter.hide();Ext.resumeLayouts()}m.placeholder.hide()}else{Ext.container.Container.prototype.onHide.call(this,j,g,o)}},onMouseEnterFloated:function(b){this.slideOutTask.cancel()},onMouseLeaveFloated:function(b){this.slideOutTask.delay(500)},onRemoved:function(c){var d=this;if(d.placeholder&&!c){d.ownerCt.remove(d.placeholder,false)}Ext.container.Container.prototype.onRemoved.apply(this,arguments)},onShow:function(){var b=this;if(b.collapsed&&b.isPlaceHolderCollapse()){if(b.splitter){Ext.suspendLayouts();b.splitter.show();Ext.resumeLayouts()}b.setHiddenState(true);b.placeholderCollapse()}else{Ext.container.Container.prototype.onShow.apply(this,arguments)}},placeholderCollapse:function(r,w){var s=this,v=s.ownerCt,o=r||s.collapseDirection,t=Ext.panel.Panel.floatCls,u=s.collapseTool,q=s.getPlaceholder(o),p;s.isCollapsingOrExpanding=1;s.setHiddenState(true);s.collapsed=o;if(q.rendered){if(q.el.dom.parentNode!==s.el.dom.parentNode){s.el.dom.parentNode.insertBefore(q.el.dom,s.el.dom)}q.hidden=false;q.setHiddenState(false);q.el.show();v.updateLayout()}else{v.insert(v.items.indexOf(s),q)}if(s.rendered){if(u&&Ext.ComponentManager.getActiveComponent()===u){s.focusPlaceholderExpandTool=true}s.el.setVisibilityMode(s.placeholderCollapseHideMode);if(w){s.el.addCls(t);q.el.hide();p=s.convertCollapseDir(o);s.el.slideOut(p,{preserveScroll:true,duration:Ext.Number.from(w,Ext.fx.Anim.prototype.duration),listeners:{scope:s,afteranimate:function(){var a=this;a.el.removeCls(t);a.placeholder.el.show().setStyle("display","none").slideIn(p,{easing:"linear",duration:100,listeners:{afteranimate:a.doPlaceholderCollapse,scope:a}})}}})}else{s.el.hide();s.doPlaceholderCollapse()}}else{s.isCollapsingOrExpanding=0;if(!s.preventCollapseFire){s.fireEvent("collapse",s)}}return s},doPlaceholderCollapse:function(){var f=this,d=f.placeholder,g=d.expandTool;if(f.focusPlaceholderExpandTool&&g){g.focus()}else{d.focus()}f.focusPlaceholderExpandTool=false;d.setHiddenState(false);d.ariaEl.dom.setAttribute("aria-hidden",false);d.ariaEl.dom.setAttribute("aria-expanded",false);f.ariaEl.dom.setAttribute("aria-hidden",true);f.ariaEl.dom.setAttribute("aria-expanded",false);f.isCollapsingOrExpanding=0;f.fireEvent("collapse",f)},placeholderExpand:function(u){var s=this,q=s.collapsed,p=s.placeholder.expandTool,t=Ext.panel.Panel.floatCls,m=s.ownerLayout?s.ownerLayout.centerRegion:null,r,o;if(Ext.Component.layoutSuspendCount){u=false}if(s.floatedFromCollapse){o=s.getPosition(true);s.slideOutFloatedPanelBegin();s.slideOutFloatedPanelEnd();s.floated=false}if(p&&Ext.ComponentManager.getActiveComponent()===p){s.focusHeaderCollapseTool=true;p._ariaRole=p.ariaEl.dom.getAttribute("role");p._ariaLabel=p.ariaEl.dom.getAttribute("aria-label");p.ariaEl.dom.setAttribute("role","presentation");p.ariaEl.dom.removeAttribute("aria-label")}if(u){Ext.suspendLayouts();s.placeholder.hide();s.el.show();s.collapsed=false;s.setHiddenState(false);if(m&&!o){m.hidden=true}Ext.resumeLayouts(true);m.hidden=false;s.el.addCls(t);s.isCollapsingOrExpanding=2;if(o){r=s.getXY();s.setLocalXY(o[0],o[1]);s.setXY([r[0],r[1]],{duration:Ext.Number.from(u,Ext.fx.Anim.prototype.duration),listeners:{scope:s,afteranimate:function(){var a=this;a.el.removeCls(t);a.isCollapsingOrExpanding=0;a.fireEvent("expand",a)}}})}else{s.el.hide();s.placeholder.el.show();s.placeholder.hidden=false;s.setHiddenState(false);s.el.slideIn(s.convertCollapseDir(q),{preserveScroll:true,duration:Ext.Number.from(u,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:s.doPlaceholderExpand,scope:s}})}}else{s.floated=s.collapsed=false;s.doPlaceholderExpand(true)}return s},doPlaceholderExpand:function(g){var o=this,m=o.placeholder,h=o.collapseTool,j=m.expandTool;if(g){Ext.suspendLayouts();o.show()}o.el.removeCls(Ext.panel.Panel.floatCls);m.hide();if(g){Ext.resumeLayouts(true)}else{o.updateLayout()}if(o.focusHeaderCollapseTool&&h){h.focus()}o.focusHeaderCollapseTool=false;m.ariaEl.dom.setAttribute("aria-expanded",true);o.ariaEl.dom.setAttribute("aria-expanded",true);if(j&&j._ariaRole){j.ariaEl.dom.setAttribute("role",j._ariaRole);j.ariaEl.dom.setAttribute("aria-label",j._ariaLabel);j._ariaRole=j._ariaLabel=null}o.isCollapsingOrExpanding=0;o.fireEvent("expand",o)},remove:function(d,f){var g=this.dockedItems;if(g&&g.contains(d)){this.removeDocked(d,f)}else{Ext.container.Container.prototype.remove.call(this,d,f)}return d},removeBodyCls:function(d){var g=this,f=g.rendered?g.body:g.getProtoBody();f.removeCls(d);return g},removeUIClsFromElement:function(d){var g=this,f=Ext.container.Container.prototype.removeUIClsFromElement.apply(this,arguments);g.removeBodyCls(["x-"+d,g.baseCls+"-body-"+d,g.baseCls+"-body-"+g.ui+"-"+d]);return f},restoreDimension:function(){var b=this.collapseDirection;return(b==="top"||b==="bottom")?"height":"width"},restoreHiddenDocked:function(){this.setDockedItemsVisibility(this.hiddenOnCollapse,true)},setBodyStyle:function(f,h){var j=this,g=j.rendered?j.body:j.getProtoBody();if(Ext.isFunction(f)){f=f()}if(arguments.length===1){if(Ext.isString(f)){f=Ext.Element.parseStyles(f)}g.setStyle(f)}else{g.setStyle(f,h)}return j},setBorder:function(g,j){if(j){return}var f=this,h=f.header;if(!g){g=0}else{if(g===true){g="1px"}else{g=f.unitizeBox(g)}}if(h){if(h.isHeader){h.setBorder(g)}else{h.border=g}}if(f.rendered&&f.bodyBorder!==false){f.body.setStyle("border-width",g)}f.updateLayout();f.border=g},setCollapsed:function(b){this[b?"collapse":"expand"]()},setDockedItemsVisibility:function(r,u){var p=this,t=p.getDockedItems(),o=t.length,s=0,q,m;if(p.header!==false){m=p.getReExpander()}for(;s<o;s++){q=t[s];if(q&&q!==m&&q.el){r.add(q.el)}}r.setStyle("visibility",u?"":"hidden");r.clear()},setGlyph:function(o){var g=this,h=g.glyph,j=g.header,m=g.placeholder;if(o!==h){g.glyph=o;if(j){if(j.isHeader){j.setGlyph(o)}else{j.glyph=o}}else{if(g.rendered||g.afterHeaderInit){g.updateHeader()}}if(m&&m.setGlyph){m.setGlyph(o)}g.fireEvent("glyphchange",g,o,h)}},setIcon:function(h){var g=this,o=g.icon,j=g.header,m=g.placeholder;if(h!==o){g.icon=h;if(j){if(j.isHeader){j.setIcon(h)}else{j.icon=h}}else{if(g.rendered||g.afterHeaderInit){g.updateHeader()}}if(m&&m.setIcon){m.setIcon(h)}g.fireEvent("iconchange",g,h,o)}},setIconCls:function(g){var o=this,h=o.iconCls,j=o.header,m=o.placeholder;if(g!==h){o.iconCls=g;if(j){if(j.isHeader){j.setIconCls(g)}else{j.iconCls=g}}else{if(o.rendered||o.afterHeaderInit){o.updateHeader()}}if(m&&m.setIconCls){m.setIconCls(g)}o.fireEvent("iconclschange",o,g,h)}},setTitle:function(o){var q=this,h=q.title,m=q.header,j=q.reExpander,p=q.placeholder;if(o!==h){q.title=o;if(m){if(m.isHeader){m.setTitle(o)}}else{if(q.rendered||q.afterHeaderInit){q.updateHeader()}}if(q.headingEl){q.headingEl.setHtml(o)}if(j){j.setTitle(o)}if(p&&p.setTitle){p.setTitle(o)}q.fireEvent("titlechange",q,o,h)}},setHiddenDocked:function(){var c=this,d=new Ext.dom.CompositeElement();c.hiddenOnCollapse.add(c.body);d.add(c.body);c.setDockedItemsVisibility(d,false)},setUI:function(c){var d=this;Ext.container.Container.prototype.setUI.apply(this,arguments);if(d.header&&d.header.rendered){d.header.setUI(c)}},toggleCollapse:function(){return(this.collapsed||this.floatedFromCollapse)?this.expand():this.collapse()},updateCollapseTool:function(){var d=this,f=d.collapseTool,g;if(!f&&d.collapsible){d.collapseDirection=d.collapseDirection||d.getHeaderPosition()||"top";g={xtype:"tool",handler:d.toggleCollapse,scope:d};if(d.isAccordionPanel){g.focusable=false;g.ariaRole="presentation"}d.collapseTool=d.expandTool=f=Ext.widget(g)}if(f){if(d.collapsed&&!d.isPlaceHolderCollapse()){f.setType("expand-"+d.getOppositeDirection(d.collapseDirection));f.setTooltip(d.expandToolText)}else{f.setType("collapse-"+d.collapseDirection);f.setTooltip(d.collapseToolText)}}},navigateAccordion:function(q){var s=this,m=s.accordionWrapOver,o="[isAccordionPanel]",p=o+":first",r=o+":last",u,t;u=q.getKey();switch(u){case q.UP:case q.LEFT:t=s.prev(o);if(!t&&m){t=s.ownerCt.child(r)}break;case q.DOWN:case q.RIGHT:t=s.next(o);if(!t&&m){t=s.ownerCt.child(p)}break;case q.HOME:t=s.ownerCt.child(p);break;case q.END:t=s.ownerCt.child(r);break;case q.DELETE:t=s.prev(o)||s.next(o);if(!t){q.doNotClose=true}break}if(t&&t!==s){t.header.titleCmp.focus()}},fireDefaultButton:function(j){var f=this,h,g;h=f.lookupReferenceHolder(false)||f;g=h.lookupReference(f.defaultButton);if(g&&g.click){g.click(j);j.stopEvent();return false}},maybeClose:function(c){var d=this;if(d.closable){d.navigateAccordion(c);if(!c.doNotClose){d.close()}}},onFocusEnter:function(g){var d=this,f=d.ariaEl.dom;Ext.container.Container.prototype.onFocusEnter.call(this,g);if(d.isAccordionPanel&&f){f.setAttribute("aria-selected",true)}},onFocusLeave:function(g){var d=this,f=d.ariaEl.dom;Ext.container.Container.prototype.onFocusLeave.call(this,g);if(d.isAccordionPanel&&f){f.removeAttribute("aria-selected")}},updateHeaderPosition:function(d){var c=this.header;if(c&&c.isHeader){c.setDock(d)}},updateIconAlign:function(c){var d=this.header;if(d&&d.isHeader){d.setIconAlign(c)}},updateTitleAlign:function(c){var d=this.header;if(d&&d.isHeader){d.setTitleAlign(c)}},updateTitleRotation:function(d){var c=this.header;if(c&&c.isHeader){c.setTitleRotation(d)}},unghost:function(o,h,g){var j=this,m=j.ghostPanel;if(!m){return}if(o!==false){j.el.show();if(h!==false){j.setPagePosition(m.getXY());if(j.hideMode==="offsets"){delete j.el.hideModeStyles}}if(g){j.focus(false,10)}}m.el.hide();m.setHiddenState(true)},updateHeader:function(G){var y=this,C=y.header,u=y.getTitle(),A=y.tools,v=y.getIcon(),w=y.getGlyph(),H=y.getIconCls(),D=w||v||H,z=y.ariaEl.dom,B=y.getHeaderPosition(),E=B==="left"||B==="right",t,F;if(Ext.isObject(C)||(C!==false&&(G||(u||D)||(A&&A.length)||(y.collapsible&&!y.titleCollapse)))){if(C&&C.isHeader){C.show()}else{C=y.header=Ext.widget(Ext.merge({xtype:"header",title:u,titleAlign:y.getTitleAlign(),vertical:E,dock:y.getHeaderPosition()||"top",titleRotation:y.getTitleRotation(),textCls:y.headerTextCls,iconCls:H,iconAlign:y.getIconAlign(),icon:v,glyph:w,baseCls:y.baseCls+"-header",tools:A,ui:y.ui,id:y.id+"_header",overCls:y.headerOverCls,indicateDrag:y.draggable,frame:(y.frame||y.alwaysFramed)&&y.frameHeader,ignoreParentFrame:y.frame||y.overlapHeader,ignoreBorderManagement:y.frame||y.ignoreHeaderBorderManagement,isAccordionHeader:y.isAccordionPanel,ownerCt:y,synthetic:true,listeners:y.collapsible&&y.titleCollapse?{click:y.toggleCollapse,scope:y}:null},y.header));y.addDocked(C,0)}if(y.isAccordionPanel){if(z){z.setAttribute("aria-labelledby",C.id+"-title");z.removeAttribute("aria-label")}else{F=y.ariaRenderAttributes||(y.ariaRenderAttributes={});F["aria-labelledby"]=C.id+"-title";delete F["aria-label"]}}else{if(u){if(y.ariaRole!=="tabpanel"){if(z){z.setAttribute("aria-labelledby",C.id+"-title-textEl");z.removeAttribute("aria-label")}else{F=y.ariaRenderAttributes||(y.ariaRenderAttributes={});F["aria-labelledby"]=C.id+"-title-textEl";delete F["aria-label"]}}}else{if(y.ariaRenderAttributes){delete y.ariaRenderAttributes["aria-label"]}}}}else{if(C){C.hide()}u=Ext.util.Format.stripTags(u);if(z){if(!z.hasAttribute("aria-labelledby")){if(u){z.setAttribute("aria-label",u)}else{z.removeAttribute("aria-label")}}}else{F=y.ariaRenderAttributes||(y.ariaRenderAttributes={});if(!F["aria-labelledby"]){if(u){F["aria-label"]=u}else{delete F["aria-label"]}}}}if(y.isViewportBorderChild&&!y.hasOwnProperty("ariaRole")){y.ariaRole="region"}if(u&&y.ariaRole==="region"){t=y.headingEl;if(t){t.setHtml(u)}else{if(y.rendered){y.headingEl=Ext.dom.Helper.insertFirst(y.el,{tag:"div",id:y.id+"-headingEl",role:"heading","class":"x-hidden-clip",style:"height:0",html:u},true);z.removeAttribute("aria-label");z.setAttribute("aria-labelledby",y.id+"-headingEl")}else{y.headingText=y.title;F=y.ariaRenderAttributes||(y.ariaRenderAttributes={});F["aria-labelledby"]=y.id+"-headingEl";delete F["aria-label"]}}}else{if(y.headingEl){y.headingEl.destroy();y.headingEl=null}}},statics:{floatCls:"x-border-region-slide-in"},privates:{addUIToElement:function(){var b=this;Ext.container.Container.prototype.addUIToElement.apply(this,arguments);b.addBodyCls(b.baseCls+"-body-"+b.ui)},applyTargetCls:function(b){this.getProtoBody().addCls(b)},getDefaultContentTarget:function(){return this.body},getTargetEl:function(){var b=this;return b.body||b.protoBody||b.frameBody||b.el},initDraggable:function(){var b=this;if(b.simpleDrag){b.initSimpleDraggable()}else{b.dd=new Ext.panel.DD(b,Ext.isBoolean(b.draggable)?null:b.draggable)}},initResizable:function(){Ext.container.Container.prototype.initResizable.apply(this,arguments);if(this.collapsed){this.resizer.disable()}},initSimpleDraggable:function(){var g=this,d,f;if(!g.header){g.updateHeader(true)}if(g.header){d=Ext.applyIf({el:g.el,delegate:"#"+g.header.id},g.draggable);if(g.constrain||g.constrainHeader){d.constrain=g.constrain;d.constrainDelegate=g.constrainHeader;d.constrainTo=g.constrainTo||g.container}f=g.dd=new Ext.util.ComponentDragger(g,d);g.relayEvents(f,["dragstart","drag","dragend"]);if(g.maximized){f.disable()}}},removeUIFromElement:function(){var b=this;Ext.container.Container.prototype.removeUIFromElement.apply(this,arguments);b.removeBodyCls(b.baseCls+"-body-"+b.ui)},setupRenderTpl:function(b){Ext.container.Container.prototype.setupRenderTpl.apply(this,arguments);this.setupDockingRenderTpl(b)},slideOutFloatedPanel:function(h){var o=this,j=o.el,m,g=function(){o.slideOutFloatedPanelEnd();o.el.removeCls("x-border-region-slide-in")};if(o.isSliding||o.destroyed){return}o.isSliding=true;o.floated=false;o.slideOutFloatedPanelBegin();if(h){j.hide();return g()}if(typeof o.collapsed==="string"){m=o.convertCollapseDir(o.collapsed)}j.slideOut(m,{preserveScroll:true,duration:Ext.Number.from(o.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:g}})},slideOutFloatedPanelBegin:function(){var d=this,g=d.placeholder.el,f=d.el;d.collapsed=d.floatedFromCollapse;d.setHiddenState(true);d.floatedFromCollapse=null;g.un("mouseleave",d.onMouseLeaveFloated,d);f.un("mouseleave",d.onMouseLeaveFloated,d);g.un("mouseenter",d.onMouseEnterFloated,d);f.un("mouseenter",d.onMouseEnterFloated,d)},slideOutFloatedPanelEnd:function(d){var c=this;if(c.collapseTool){c.collapseTool.el.show()}c.slideOutTask.cancel();c.isSliding=false;if(!d){c.fireEvent("unfloat",c)}}}},0,["panel"],["component","box","container","panel"],{component:true,box:true,container:true,panel:true},["widget.panel"],[["docking",Ext.container.DockingContainer]],[Ext.panel,"Panel",Ext,"Panel"],function(){var b=this.prototype;b.animCollapse=Ext.enableFx;b.placeholderCollapseHideMode=Ext.Element.VISIBILITY}));Ext.define("Ext.theme.neptune.panel.Panel",{override:"Ext.panel.Panel",border:false,bodyBorder:false,initBorderProps:Ext.emptyFn,initBodyBorder:function(){if(this.bodyBorder!==true){arguments.callee.$previous.call(this)}}});(Ext.cmd.derive("Ext.container.Monitor",Ext.Base,{target:null,selector:"",scope:null,addHandler:null,removeHandler:null,invalidateHandler:null,disabled:0,constructor:function(b){Ext.apply(this,b)},bind:function(c){var d=this;d.target=c;c.on("beforedestroy",d.disable,d);d.onContainerAdd(c)},unbind:function(){var d=this,c=d.target;if(c){c.un("beforedestroy",d.disable,d)}d.items=null},disable:function(){++this.disabled},enable:function(){if(this.disabled>0){--this.disabled}},handleAdd:function(c,d){if(!this.disabled){if(d.is(this.selector)){this.onItemAdd(d.ownerCt,d)}if(d.isQueryable){this.onContainerAdd(d)}}},onItemAdd:function(o,g){var j=this,h=j.items,m=j.addHandler;if(!j.disabled){if(m){m.call(j.scope||g,g)}if(h){h.add(g)}}},onItemRemove:function(o,g){var j=this,h=j.items,m=j.removeHandler;if(!j.disabled){if(m){m.call(j.scope||g,g)}if(h){h.remove(g)}}},onContainerAdd:function(r,v){var o=this,p,q,u=o.handleAdd,w=o.handleRemove,t,s;if(r.isContainer){r.on("add",u,o);r.on("dockedadd",u,o);r.on("remove",w,o);r.on("dockedremove",w,o)}if(v!==true){p=r.query(o.selector);for(t=0,q=p.length;t<q;++t){s=p[t];o.onItemAdd(s.ownerCt,s)}}p=r.query(">container");for(t=0,q=p.length;t<q;++t){o.onContainerAdd(p[t],true)}},handleRemove:function(d,f){var g=this;if(!g.disabled){if(f.is(g.selector)){g.onItemRemove(d,f)}if(f.isQueryable){g.onContainerRemove(d,f)}}},onContainerRemove:function(q,s){var o=this,j,r,m,p;if(!s.destroyed&&!s.destroying&&s.isContainer){o.removeCtListeners(s);j=s.query(o.selector);for(r=0,m=j.length;r<m;++r){p=j[r];o.onItemRemove(p.ownerCt,p)}j=s.query("container");for(r=0,m=j.length;r<m;++r){o.removeCtListeners(j[r])}}else{o.invalidateItems(true)}},removeCtListeners:function(d){var c=this;d.un("add",c.handleAdd,c);d.un("dockedadd",c.handleAdd,c);d.un("remove",c.handleRemove,c);d.un("dockedremove",c.handleRemove,c)},getItems:function(){var c=this,d=c.items;if(!d){d=c.items=new Ext.util.MixedCollection();d.addAll(c.target.query(c.selector))}return d},invalidateItems:function(g){var d=this,f=d.invalidateHandler;if(g&&f){f.call(d.scope||d,d)}d.items=null}},1,0,0,0,0,0,[Ext.container,"Monitor"],0));(Ext.cmd.derive("Ext.layout.container.Anchor",Ext.layout.container.Auto,{alternateClassName:"Ext.layout.AnchorLayout",type:"anchor",defaultAnchor:"100%",parseAnchorRE:/^(r|right|b|bottom)$/i,manageOverflow:true,setsItemSize:true,beginLayoutCycle:function(r){var s=this,t=0,p,o,q,m,u;Ext.layout.container.Auto.prototype.beginLayoutCycle.apply(this,arguments);q=r.childItems;u=q.length;for(m=0;m<u;++m){o=q[m];p=o.target.anchorSpec;if(p){if(o.widthModel.calculated&&p.right){t|=1}if(o.heightModel.calculated&&p.bottom){t|=2}if(t===3){break}}}r.anchorDimensions=t},calculateItems:function(D,J){var M=this,A=D.childItems,E=A.length,w=J.gotHeight,C=J.gotWidth,F=J.height,H=J.width,I=(C?1:0)|(w?2:0),N=D.anchorDimensions,z,K,y,L,B,G;if(!N){return true}for(B=0;B<E;B++){K=A[B];y=K.getMarginInfo();z=K.target.anchorSpec;if(C&&K.widthModel.calculated){G=z.right(H)-y.width;G=M.adjustWidthAnchor(G,K);K.setWidth(G)}if(w&&K.heightModel.calculated){L=z.bottom(F)-y.height;L=M.adjustHeightAnchor(L,K);K.setHeight(L)}}return(I&N)===N},anchorFactory:{offset:function(b){return function(a){return a+b}},ratio:function(b){return function(a){return Math.floor(a*b)}},standard:function(b){return function(a){return a-b}}},parseAnchor:function(o,h,a){if(o&&o!=="none"){var m=this.anchorFactory,j;if(this.parseAnchorRE.test(o)){return m.standard(a-h)}if(o.indexOf("%")!==-1){return m.ratio(parseFloat(o.replace("%",""))*0.01)}j=parseInt(o,10);if(!isNaN(j)){return m.offset(j)}}return null},adjustWidthAnchor:function(c,d){return c},adjustHeightAnchor:function(c,d){return c},configureItem:function(p){var q=this,m=q.owner,r=p.anchor,j,s,o;Ext.layout.container.Auto.prototype.configureItem.apply(this,arguments);if(!p.anchor&&p.items&&!Ext.isNumber(p.width)){p.anchor=r=q.defaultAnchor}if(m.anchorSize){if(typeof m.anchorSize==="number"){s=m.anchorSize}else{s=m.anchorSize.width;o=m.anchorSize.height}}else{s=m.initialConfig.width;o=m.initialConfig.height}if(r){j=r.split(" ");p.anchorSpec={right:q.parseAnchor(j[0],p.initialConfig.width,s),bottom:q.parseAnchor(j[1],p.initialConfig.height,o)}}},sizePolicy:{$:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},b:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},r:{$:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},b:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}}},getItemSizePolicy:function(o){var j=o.anchorSpec,h="$",m=this.sizePolicy,g;if(j){g=this.owner.getSizeModel();if(j.right&&!g.width.shrinkWrap){m=m.r}if(j.bottom&&!g.height.shrinkWrap){h="b"}}return m[h]}},0,0,0,0,["layout.anchor"],0,[Ext.layout.container,"Anchor",Ext.layout,"AnchorLayout"],0));(Ext.cmd.derive("Ext.dd.DragTracker",Ext.Base,{active:false,trackOver:false,tolerance:5,autoStart:false,constructor:function(d){var c=this;Ext.apply(c,d);c.dragRegion=new Ext.util.Region(0,0,0,0);if(c.el){c.initEl(c.el)}c.mixins.observable.constructor.call(c);if(c.disabled){c.disable()}},initEl:function(d){var g=this,f=g.delegate;g.el=d=Ext.get(d);if(f&&f.isElement){g.handle=f}g.delegate=g.handle?undefined:g.delegate;if(!g.handle){g.handle=d}g.handleListeners={scope:g,delegate:g.delegate,mousedown:g.onMouseDown,dragstart:g.onDragStart};if(!Ext.supports.TouchEvents&&(g.trackOver||g.overCls)){Ext.apply(g.handleListeners,{mouseover:g.onMouseOver,mouseout:g.onMouseOut})}g.mon(g.handle,g.handleListeners);g.keyNav=new Ext.util.KeyNav({target:d,up:g.onResizeKeyDown,left:g.onResizeKeyDown,right:g.onResizeKeyDown,down:g.onResizeKeyDown,scope:g})},disable:function(){this.disabled=true},enable:function(){this.disabled=false},destroy:function(){var b=this;b.endDrag({});b.el=b.handle=b.onBeforeStart=b.onStart=b.onDrag=b.onEnd=null;b.callParent()},onMouseOver:function(p,q){var s=this,r,t,u,o,m;if(!s.disabled){if(p.within(p.target,true,true)||s.delegate){r=s.handleCls;s.mouseIsOut=false;if(r){for(u=0,o=s.handleEls.length;u<o;u++){t=s.handleEls[u];m=t.delegateCls;if(!m){m=t.delegateCls=[r,"-",t.region,"-over"].join("")}t.addCls([m,s.overCls])}}s.fireEvent("mouseover",s,p,s.delegate?p.getTarget(s.delegate,q):s.handle)}}},onMouseOut:function(j){var m=this,o,g,h;if(m.mouseIsDown){m.mouseIsOut=true}else{if(m.handleCls){for(g=0,h=m.handleEls.length;g<h;g++){o=m.handleEls[g];o.removeCls([o.delegateCls,m.overCls])}}m.fireEvent("mouseout",m,j)}},onMouseDown:function(g,d){var f=this;if(f.disabled||g.dragTracked){return}f.dragTarget=f.delegate?d:f.handle.dom;f.startXY=f.lastXY=g.getXY();f.startRegion=Ext.fly(f.dragTarget).getRegion();if(f.fireEvent("mousedown",f,g)===false||f.fireEvent("beforedragstart",f,g)===false||f.onBeforeStart(g)===false){return}f.mouseIsDown=true;g.dragTracked=true;f.el.setCapture();g.stopPropagation();if(f.preventDefault!==false){g.preventDefault()}Ext.getDoc().on({scope:f,capture:true,mouseup:f.onMouseUp,mousemove:f.onMouseMove,selectstart:f.stopSelect});f.dragEnded=false;if(!f.tolerance){f.triggerStart()}else{if(f.autoStart){f.timer=Ext.defer(f.triggerStart,f.autoStart===true?1000:f.autoStart,f,[g])}}},onMouseMove:function(j,m){var g=this,o=j.getXY(),h=g.startXY;j.stopPropagation();if(g.preventDefault!==false){j.preventDefault()}if(g.dragEnded){return}g.lastXY=o;if(!g.active){if(Math.max(Math.abs(h[0]-o[0]),Math.abs(h[1]-o[1]))>g.tolerance){g.triggerStart(j)}else{return}}if(g.fireEvent("mousemove",g,j)===false){g.onMouseUp(j)}else{g.onDrag(j);g.fireEvent("drag",g,j)}},onMouseUp:function(c){var d=this;d.mouseIsDown=false;if(d.mouseIsOut){d.mouseIsOut=false;d.onMouseOut(c)}if(d.preventDefault!==false){c.preventDefault()}if(Ext.isIE&&document.releaseCapture){document.releaseCapture()}d.fireEvent("mouseup",d,c);d.endDrag(c)},endDrag:function(g){var d=this,f=d.active;Ext.getDoc().un({mousemove:d.onMouseMove,mouseup:d.onMouseUp,selectstart:d.stopSelect,capture:true,scope:d});d.clearStart();d.active=false;if(f){d.dragEnded=true;d.onEnd(g);d.fireEvent("dragend",d,g)}d._constrainRegion=null},triggerStart:function(c){var d=this;d.clearStart();d.active=true;d.onStart(c);d.fireEvent("dragstart",d,c)},clearStart:function(){var b=this.timer;if(b){clearTimeout(b);this.timer=null}},stopSelect:function(b){b.stopEvent();return false},onBeforeStart:function(b){},onStart:function(b){},onDrag:function(b){},onEnd:function(b){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getConstrainRegion:function(){var b=this;if(b.constrainTo){if(b.constrainTo instanceof Ext.util.Region){return b.constrainTo}if(!b._constrainRegion){b._constrainRegion=Ext.fly(b.constrainTo).getViewRegion()}}else{if(!b._constrainRegion){b._constrainRegion=b.getDragCt().getViewRegion()}}return b._constrainRegion},getXY:function(b){return b?this.constrainModes[b](this,this.lastXY):this.lastXY},getOffset:function(g){var d=this.getXY(g),f=this.startXY;return[d[0]-f[0],d[1]-f[1]]},onDragStart:function(b){b.stopPropagation()},constrainModes:{point:function(f,h){var j=f.dragRegion,g=f.getConstrainRegion();if(!g){return h}j.x=j.left=j[0]=j.right=h[0];j.y=j.top=j[1]=j.bottom=h[1];j.constrainTo(g);return[j.left,j.top]},dragTarget:function(q,m){var h=q.startXY,o=q.startRegion.copy(),j=q.getConstrainRegion(),p;if(!j){return m}o.translateBy(m[0]-h[0],m[1]-h[1]);if(o.right>j.right){m[0]+=p=(j.right-o.right);o.left+=p}if(o.left<j.left){m[0]+=(j.left-o.left)}if(o.bottom>j.bottom){m[1]+=p=(j.bottom-o.bottom);o.top+=p}if(o.top<j.top){m[1]+=(j.top-o.top)}return m}}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.dd,"DragTracker"],0));(Ext.cmd.derive("Ext.resizer.SplitterTracker",Ext.dd.DragTracker,{enabled:true,overlayCls:"x-resizable-overlay",createDragOverlay:function(){var d,c=Ext.dom.Element;d=this.overlay=Ext.getBody().createChild({role:"presentation",cls:this.overlayCls,html:"&#160;"});d.unselectable();d.setSize(c.getDocumentWidth(),c.getDocumentHeight());d.show()},getPrevCmp:function(){var b=this.getSplitter();return b.previousSibling(":not([hidden])")},getNextCmp:function(){var b=this.getSplitter();return b.nextSibling(":not([hidden])")},onBeforeStart:function(o){var r=this,q=r.getPrevCmp(),m=r.getNextCmp(),s=r.getSplitter().collapseEl,p=o.getTarget(),j;if(!q||!m){return false}if(s&&p===s.dom){return false}if(m.collapsed||q.collapsed){return false}r.prevBox=q.getEl().getBox();r.nextBox=m.getEl().getBox();r.constrainTo=j=r.calculateConstrainRegion();if(!j){return false}return j},onStart:function(c){var d=this.getSplitter();this.createDragOverlay();d.addCls(d.baseCls+"-active")},onResizeKeyDown:function(q){var j=this,r=j.getSplitter(),m=q.getKey(),s=r.orientation==="vertical"?0:1,o=m===q.UP||m===q.LEFT?-1:1,p;if(!j.active&&j.onBeforeStart(q)){Ext.fly(q.target).on("keyup",j.onResizeKeyUp,j);j.triggerStart(q);j.onMouseDown(q);j.startXY=r.getXY();j.lastKeyDownXY=Ext.Array.slice(j.startXY);p=j.easing=new Ext.fx.easing.Linear();p.setStartTime(Ext.Date.now());p.setStartValue(1);p.setEndValue(4);p.setDuration(2000)}if(j.active){j.lastKeyDownXY[s]=Math.round(j.lastKeyDownXY[s]+(o*j.easing.getValue()));j.lastXY=j.lastKeyDownXY;r.setXY(j.getXY("dragTarget"))}},onResizeKeyUp:function(b){this.onMouseUp(b)},calculateConstrainRegion:function(){var w=this,D=w.getSplitter(),v=D.getWidth(),u=D.defaultSplitMin,C=D.orientation,z=w.prevBox,t=w.getPrevCmp(),B=w.nextBox,y=w.getNextCmp(),r,s,A;if(C==="vertical"){A={prevCmp:t,nextCmp:y,prevBox:z,nextBox:B,defaultMin:u,splitWidth:v};r=new Ext.util.Region(z.y,w.getVertPrevConstrainRight(A),z.bottom,w.getVertPrevConstrainLeft(A));s=new Ext.util.Region(B.y,w.getVertNextConstrainRight(A),B.bottom,w.getVertNextConstrainLeft(A))}else{r=new Ext.util.Region(z.y+(t.minHeight||u),z.right,(t.maxHeight?z.y+t.maxHeight:B.bottom-(y.minHeight||u))+v,z.x);s=new Ext.util.Region((y.maxHeight?B.bottom-y.maxHeight:z.y+(t.minHeight||u))-v,B.right,B.bottom-(y.minHeight||u),B.x)}return r.intersect(s)},performResize:function(y,D){var v=this,I=v.getSplitter(),C=I.orientation,L=v.getPrevCmp(),w=v.getNextCmp(),H=I.ownerCt,A=H.query(">[flex]"),z=A.length,G=C==="vertical",B=0,E=G?"width":"height",F=0,K,J;for(;B<z;B++){K=A[B];J=G?K.getWidth():K.getHeight();F+=J;K.flex=J}D=G?D[0]:D[1];if(L){J=v.prevBox[E]+D;if(L.flex){L.flex=J}else{L[E]=J}}if(w){J=v.nextBox[E]-D;if(w.flex){w.flex=J}else{w[E]=J}}H.updateLayout()},endDrag:function(){var b=this;if(b.overlay){b.overlay.destroy();delete b.overlay}Ext.dd.DragTracker.prototype.endDrag.apply(this,arguments)},onEnd:function(g){var f=this,d=f.getSplitter();d.removeCls(d.baseCls+"-active");f.performResize(g,f.getResizeOffset())},onDrag:function(o){var q=this,m=q.getOffset("dragTarget"),p=q.getSplitter(),h=p.getEl(),j=p.orientation;if(j==="vertical"){h.setX(q.startRegion.left+m[0])}else{h.setY(q.startRegion.top+m[1])}},getSplitter:function(){return this.splitter},getVertPrevConstrainRight:function(b){return(b.prevCmp.maxWidth?b.prevBox.x+b.prevCmp.maxWidth:b.nextBox.right-(b.nextCmp.minWidth||b.defaultMin))+b.splitWidth},getVertPrevConstrainLeft:function(b){return b.prevBox.x+(b.prevCmp.minWidth||b.defaultMin)},getVertNextConstrainRight:function(b){return b.nextBox.right-(b.nextCmp.minWidth||b.defaultMin)},getVertNextConstrainLeft:function(b){return(b.nextCmp.maxWidth?b.nextBox.right-b.nextCmp.maxWidth:b.prevBox.x+(b.prevBox.minWidth||b.defaultMin))-b.splitWidth},getResizeOffset:function(){return this.getOffset("dragTarget")}},0,0,0,0,0,0,[Ext.resizer,"SplitterTracker"],0));(Ext.cmd.derive("Ext.dd.DDTarget",Ext.dd.DragDrop,{constructor:function(g,f,d){if(g){this.initTarget(g,f,d)}},getDragEl:Ext.emptyFn,isValidHandleChild:Ext.emptyFn,startDrag:Ext.emptyFn,endDrag:Ext.emptyFn,onDrag:Ext.emptyFn,onDragDrop:Ext.emptyFn,onDragEnter:Ext.emptyFn,onDragOut:Ext.emptyFn,onDragOver:Ext.emptyFn,onInvalidDrop:Ext.emptyFn,onMouseDown:Ext.emptyFn,onMouseUp:Ext.emptyFn,setXConstraint:Ext.emptyFn,setYConstraint:Ext.emptyFn,resetConstraints:Ext.emptyFn,clearConstraints:Ext.emptyFn,clearTicks:Ext.emptyFn,setInitPosition:Ext.emptyFn,setDragElId:Ext.emptyFn,setHandleElId:Ext.emptyFn,setOuterHandleElId:Ext.emptyFn,addInvalidHandleClass:Ext.emptyFn,addInvalidHandleId:Ext.emptyFn,addInvalidHandleType:Ext.emptyFn,removeInvalidHandleClass:Ext.emptyFn,removeInvalidHandleId:Ext.emptyFn,removeInvalidHandleType:Ext.emptyFn,toString:function(){return("DDTarget "+this.id)}},3,0,0,0,0,0,[Ext.dd,"DDTarget"],0));(Ext.cmd.derive("Ext.event.publisher.MouseEnterLeave",Ext.event.publisher.Dom,{type:"mouseEnterLeave"},0,0,0,0,0,0,[Ext.event.publisher,"MouseEnterLeave"],function(d){var c={mouseover:"mouseenter",mouseout:"mouseleave"};if(!Ext.supports.MouseEnterLeave){d.override({handledDomEvents:["mouseover","mouseout"],handledEvents:["mouseenter","mouseleave"],doDelegatedEvent:function(b){var o,s,a,q,r,p;b=this.callParent([b]);o=b.getTarget();s=b.getRelatedTarget();if(s&&Ext.fly(o).contains(s)){return}a=o.id;if(a){q=Ext.cache[a];if(q){r=c[b.type];b=b.chain({type:r});if(q.hasListeners[r]){p=q.events[r];if(p){p=p.directs;if(p){b.setCurrentTarget(q.dom);p.fire(b,b.target)}}}}}}})}d.instance=new d()}));(Ext.cmd.derive("Ext.form.action.Action",Ext.Base,{alternateClassName:"Ext.form.Action",submitEmptyText:true,constructor:function(d){if(d){Ext.apply(this,d)}var c=d.params;if(Ext.isString(c)){this.params=Ext.Object.fromQueryString(c)}},run:Ext.emptyFn,onFailure:function(f){var g=this.form,d=g&&!g.destroying&&!g.destroyed;this.response=f;this.failureType=Ext.form.action.Action.CONNECT_FAILURE;if(d){g.afterAction(this,false)}},processResponse:function(b){this.response=b;if(!b.responseText&&!b.responseXML){return true}return(this.result=this.handleResponse(b))},getUrl:function(){return this.url||this.form.url},getMethod:function(){return(this.method||this.form.method||"POST").toUpperCase()},getParams:function(){return Ext.apply({},this.params,this.form.baseParams)},createCallback:function(){var b=this;return{success:b.onSuccess,failure:b.onFailure,scope:b,timeout:(b.timeout||b.form.timeout)*1000}},statics:{CLIENT_INVALID:"client",SERVER_INVALID:"server",CONNECT_FAILURE:"connect",LOAD_FAILURE:"load"}},1,0,0,0,0,0,[Ext.form.action,"Action",Ext.form,"Action"],0));(Ext.cmd.derive("Ext.form.action.Load",Ext.form.action.Action,{alternateClassName:"Ext.form.Action.Load",type:"load",run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(),{method:this.getMethod(),url:this.getUrl(),headers:this.headers,params:this.getParams()}))},onSuccess:function(f){var g=this.processResponse(f),h=this.form,j=h&&!h.destroying&&!h.destroyed;if(g===true||!g.success||!g.data){this.failureType=Ext.form.action.Action.LOAD_FAILURE;if(j){h.afterAction(this,false)}return}if(j){h.clearInvalid();h.setValues(g.data);h.afterAction(this,true)}},handleResponse:function(j){var g=this.form.reader,f,h;if(g){f=g.read(j);h=f.records&&f.records[0]?f.records[0].data:null;return{success:f.success,data:h}}return Ext.decode(j.responseText)}},0,0,0,0,["formaction.load"],0,[Ext.form.action,"Load",Ext.form.Action,"Load"],0));(Ext.cmd.derive("Ext.form.action.Submit",Ext.form.action.Action,{alternateClassName:"Ext.form.Action.Submit",type:"submit",run:function(){var c=this,d=c.form;if(c.clientValidation===false||d.isValid()){c.doSubmit()}else{c.failureType=Ext.form.action.Action.CLIENT_INVALID;d.afterAction(c,false)}},doSubmit:function(){var p=this,h=Ext.apply(p.createCallback(),{url:p.getUrl(),method:p.getMethod(),headers:p.headers}),q=p.form,o=p.jsonSubmit||q.jsonSubmit,j=o?"jsonData":"params",m;if(q.hasUpload()){m=p.buildForm();h.form=m.formEl;h.isUpload=true}else{h[j]=p.getParams(o)}Ext.Ajax.request(h);if(m){p.cleanup(m)}},cleanup:function(o){var q=o.formEl,r=o.uploadEls,j=o.uploadFields,m=j.length,s,p;for(s=0;s<m;++s){p=j[s];if(!p.clearOnSubmit){p.restoreInput(r[s])}}if(q){Ext.removeNode(q)}},getParams:function(h){var j=false,f=Ext.form.action.Action.prototype.getParams.call(this),g=this.form.getValues(j,j,this.submitEmptyText!==j,h,true);return Ext.apply({},g,f)},buildForm:function(){var B=this,y=[],A,K,D=B.form,G=B.getParams(),H=[],J=[],E=D.getFields().items,F,C=E.length,z,L,N,M,v,I;for(F=0;F<C;++F){z=E[F];if(z.isFileUpload()){H.push(z)}}for(L in G){if(G.hasOwnProperty(L)){N=G[L];if(Ext.isArray(N)){v=N.length;for(M=0;M<v;M++){y.push(B.getFieldConfig(L,N[M]))}}else{y.push(B.getFieldConfig(L,N))}}}A={tag:"form",role:"presentation",action:B.getUrl(),method:B.getMethod(),target:B.target?(Ext.isString(B.target)?B.target:Ext.fly(B.target).dom.name):"_self",style:"display:none",cn:y};if(H.length){A.encoding=A.enctype="multipart/form-data"}K=Ext.DomHelper.append(Ext.getBody(),A);C=H.length;for(F=0;F<C;++F){I=H[F].extractFileInput();K.appendChild(I);J.push(I)}return{formEl:K,uploadFields:H,uploadEls:J}},getFieldConfig:function(d,c){return{tag:"input",type:"hidden",name:d,value:Ext.String.htmlEncode(c)}},onSuccess:function(g){var m=this.form,o=m&&!m.destroying&&!m.destroyed,j=true,h=this.processResponse(g);if(h!==true&&!h.success){if(h.errors&&o){m.markInvalid(h.errors)}this.failureType=Ext.form.action.Action.SERVER_INVALID;j=false}if(o){m.afterAction(this,j)}},handleResponse:function(v){var z=this.form,w=z.errorReader,u,q,t,s,y,p;if(w){u=w.read(v);y=u.records;q=[];if(y){for(t=0,s=y.length;t<s;t++){q[t]=y[t].data}}if(q.length<1){q=null}p={success:u.success,errors:q}}else{try{p=Ext.decode(v.responseText)}catch(r){p={success:false,errors:[]}}}return p}},0,0,0,0,["formaction.submit"],0,[Ext.form.action,"Submit",Ext.form.Action,"Submit"],0));(Ext.cmd.derive("Ext.util.ComponentDragger",Ext.dd.DragTracker,{autoStart:500,constructor:function(d,c){this.comp=d;this.initialConstrainTo=c.constrainTo;Ext.dd.DragTracker.prototype.constructor.call(this,c)},onStart:function(g){var d=this,f=d.comp;d.startPosition=f.getXY();if(f.ghost&&!f.liveDrag){d.proxy=f.ghost();d.dragTarget=d.proxy.header.el}if(d.constrain||d.constrainDelegate){d.constrainTo=d.calculateConstrainRegion()}if(f.beginDrag){f.beginDrag()}if(f.el.shim){f.el.maskIframes()}},calculateConstrainRegion:function(){var r=this,t=r.comp,s=r.initialConstrainTo,u=t.constraintInsets,p,y,v,w=r.proxy?r.proxy.el:t.el,q=w.shadow,z=(q&&!r.constrainDelegate&&t.constrainShadow&&!q.disabled)?q.getShadowSize():0;if(!(s instanceof Ext.util.Region)){p=Ext.fly(s);s=p.getConstrainRegion()}else{s=s.copy()}if(u){u=Ext.isObject(u)?u:Ext.Element.parseBox(u);s.adjust(u.top,u.right,u.bottom,u.left)}if(z){s.adjust(z[0],-z[1],-z[2],z[3])}if(!r.constrainDelegate){y=Ext.fly(r.dragTarget).getRegion();v=w.getRegion();s.adjust(y.top-v.top,y.right-v.right,y.bottom-v.bottom,y.left-v.left)}return s},onDrag:function(j){var f=this,g=(f.proxy&&!f.comp.liveDrag)?f.proxy:f.comp,h=f.getOffset(f.constrain||f.constrainDelegate?"dragTarget":null);g.setPagePosition(f.startPosition[0]+h[0],f.startPosition[1]+h[1])},onEnd:function(c){var d=this.comp;if(d.destroyed||d.destroying){return}if(this.proxy&&!d.liveDrag){d.unghost()}if(d.endDrag){d.endDrag()}if(d.el.shim){d.el.unmaskIframes()}}},1,0,0,0,0,0,[Ext.util,"ComponentDragger"],0));(Ext.cmd.derive("Ext.util.FocusTrap",Ext.Mixin,{mixinConfig:{id:"focustrap",after:{afterRender:"initTabGuards",addTool:"initTabGuards",add:"initTabGuards",remove:"initTabGuards",addDocked:"initTabGuards",removeDocked:"initTabGuards",onShow:"initTabGuards",afterHide:"initTabGuards"}},config:{tabGuard:true,tabGuardTpl:'<div id="{id}-{tabGuardEl}" data-ref="{tabGuardEl}" role="button" data-tabguardposition="{tabGuard}" aria-busy="true" style="height:0"class="x-hidden-clip"></div>',tabGuardIndex:0},tabGuardPositionAttribute:"data-tabguardposition",privates:{initTabGuards:function(){var o=this,q=o.tabGuardPositionAttribute,p=o.tabGuardBeforeEl,m=o.tabGuardAfterEl,j=o.tabGuardIndex,h;if(!o.rendered||!o.tabGuard){return}h=o.el.findTabbableElements({skipSelf:true});if(h[0]&&h[0].hasAttribute(q)){h.shift()}if(h.length&&h[h.length-1].hasAttribute(q)){h.pop()}if(h.length){p.dom.setAttribute("tabIndex",j);p.on("focusenter",o.onTabGuardFocusEnter,o);m.dom.setAttribute("tabIndex",j);m.on("focusenter",o.onTabGuardFocusEnter,o)}else{p.dom.removeAttribute("tabIndex");p.un("focusenter",o.onTabGuardFocusEnter,o);m.dom.removeAttribute("tabIndex");m.un("focusenter",o.onTabGuardFocusEnter,o)}},onTabGuardFocusEnter:function(u,t){var s=this,y=s.el,r=s.tabGuardPositionAttribute,v=t.getAttribute(r),q=u.relatedTarget,z,w,p;if(!q.hasAttribute(r)&&q!==y.dom&&y.contains(q)){w=v==="before"?false:true}else{w=v==="before"?true:false}z=y.findTabbableElements({skipSelf:true});z.shift();z.pop();p=w?z[0]:z[z.length-1];if(p){p.focus()}}}},0,0,0,0,0,0,[Ext.util,"FocusTrap"],0));(Ext.cmd.derive("Ext.window.Window",Ext.panel.Panel,{alternateClassName:"Ext.Window",baseCls:"x-window",resizable:true,draggable:true,constrain:false,constrainHeader:false,plain:false,minimizable:false,maximizable:false,minHeight:50,minWidth:50,expandOnShow:true,collapsible:false,closable:true,hidden:true,autoRender:true,hideMode:"offsets",floating:true,itemCls:"x-window-item",overlapHeader:true,ignoreHeaderBorderManagement:true,alwaysFramed:true,isRootCfg:{isRoot:true},isWindow:true,ariaRole:"dialog",initComponent:function(){var b=this;b.frame=false;Ext.panel.Panel.prototype.initComponent.call(this);if(b.plain){b.addClsWithUI("plain")}b.addStateEvents(["maximize","restore","resize","dragend"])},getElConfig:function(){var c=this,d;d=Ext.panel.Panel.prototype.getElConfig.call(this);d.tabIndex=-1;return d},getFocusEl:function(){return this.getDefaultFocus()||this.el},getState:function(){var g=this,m=Ext.panel.Panel.prototype.getState.call(this)||{},h=!!g.maximized,o=g.ghostBox,j;m.maximized=h;if(h){j=g.restorePos}else{if(o){j=[o.x,o.y]}else{j=g.getPosition()}}Ext.apply(m,{size:h?g.restoreSize:g.getSize(),pos:j});return m},applyState:function(c){var d=this;if(c){d.maximized=c.maximized;if(d.maximized){d.hasSavedRestore=true;d.restoreSize=c.size;d.restorePos=c.pos}else{Ext.apply(d,{width:c.size.width,height:c.size.height,x:c.pos[0],y:c.pos[1]})}}},onRender:function(d,f){var g=this;Ext.panel.Panel.prototype.onRender.apply(this,arguments);if(g.header){g.header.on({scope:g,click:g.onHeaderClick})}if(g.maximizable){g.header.on({scope:g,dblclick:g.toggleMaximize})}},afterRender:function(){var f=this,g=f.header,d;if(f.maximized){f.maximized=false;f.maximize();if(g){g.removeCls(g.indicateDragCls)}}Ext.panel.Panel.prototype.afterRender.call(this);if(f.closable){d=f.getKeyMap();d.on(27,f.onEsc,f)}else{d=f.keyMap}if(d&&f.hidden){d.disable()}},onEsc:function(d,c){c.stopEvent();this.close()},beforeDestroy:function(){var b=this;if(b.rendered){Ext.un("resize",b.onWindowResize,b);delete b.animateTarget;b.hide();Ext.destroy(b.keyMap)}Ext.panel.Panel.prototype.beforeDestroy.call(this)},addTools:function(){var d=this,c=[];Ext.panel.Panel.prototype.addTools.call(this);if(d.minimizable){c.push({type:"minimize",handler:"minimize",scope:d})}if(d.maximizable){c.push({type:d.maximized?"restore":"maximize",handler:"toggleMaximize",scope:d})}if(c.length){d.addTool(c)}},onShow:function(){var b=this;Ext.panel.Panel.prototype.onShow.apply(this,arguments);if(b.expandOnShow){b.expand(false)}b.syncMonitorWindowResize();if(b.keyMap){b.keyMap.enable()}},doClose:function(){var b=this;if(b.hidden){b.fireEvent("close",b);if(b.closeAction==="destroy"){b.destroy()}}else{b.hide(b.animateTarget,b.doClose,b)}},afterHide:function(){var b=this;b.syncMonitorWindowResize();if(b.keyMap){b.keyMap.disable()}Ext.panel.Panel.prototype.afterHide.apply(this,arguments)},onWindowResize:function(){var c=this,d;if(!c.destroyed){if(c.maximized){c.fitContainer()}else{d=c.getSizeModel();if(d.width.natural||d.height.natural){c.updateLayout()}c.doConstrain()}}},minimize:function(){this.fireEvent("minimize",this);return this},resumeHeaderLayout:function(b){this.header.resumeLayouts(b?this.isRootCfg:null)},afterCollapse:function(){var f=this,g=f.header,d=f.tools;if(g&&f.maximizable){g.suspendLayouts();d.maximize.hide();this.resumeHeaderLayout(true)}if(f.resizer){f.resizer.disable()}Ext.panel.Panel.prototype.afterCollapse.apply(this,arguments)},afterExpand:function(){var g=this,h=g.header,f=g.tools,j;if(h){h.suspendLayouts();if(g.maximizable){f.maximize.show();j=true}this.resumeHeaderLayout(j)}if(g.resizer){g.resizer.enable()}Ext.panel.Panel.prototype.afterExpand.apply(this,arguments)},maximize:function(m){var s=this,p=s.header,r=s.tools,t=s.width,o=s.height,u,q;if(!s.maximized){s.expand(false);if(!s.hasSavedRestore){u=s.restoreSize={width:t?t:null,height:o?o:null};s.restorePos=s.getPosition()}if(p){p.suspendLayouts();if(r.maximize){r.maximize.setType("restore")}if(s.collapseTool){s.collapseTool.hide();q=true}s.resumeHeaderLayout(q)}s.el.disableShadow();if(s.dd){s.dd.disable();if(p){p.removeCls(p.indicateDragCls)}}if(s.resizer){s.resizer.disable()}s.el.addCls("x-window-maximized");s.container.addCls("x-window-maximized-ct");s.syncMonitorWindowResize();s.fitContainer(m=(m||!!s.animateTarget)?{callback:function(){s.maximized=true;s.fireEvent("maximize",s)}}:null);if(!m){s.maximized=true;s.fireEvent("maximize",s)}}return s},restore:function(h){var q=this,p=q.tools,m=q.header,j=q.restoreSize,o;if(q.maximized){q.hasSavedRestore=null;q.removeCls("x-window-maximized");if(m){m.suspendLayouts();if(p.maximize){p.maximize.setType("maximize")}if(q.collapseTool){q.collapseTool.show();o=true}q.resumeHeaderLayout(o)}j.x=q.restorePos[0];j.y=q.restorePos[1];q.setBox(j,h=(h||!!q.animateTarget)?{callback:function(){q.el.enableShadow(null,true);q.maximized=false;q.fireEvent("restore",q)}}:null);q.restorePos=q.restoreSize=null;if(q.dd){q.dd.enable();if(m){m.addCls(m.indicateDragCls)}}if(q.resizer){q.resizer.enable()}q.container.removeCls("x-window-maximized-ct");q.syncMonitorWindowResize();if(!h){q.el.enableShadow(null,true);q.maximized=false;q.fireEvent("restore",q)}}return q},syncMonitorWindowResize:function(){var f=this,j=f._monitoringResize,h=f.monitorResize||f.constrain||f.constrainHeader||f.maximized,g=f.hidden||f.destroying||f.destroyed;if(h&&!g){if(!j){Ext.on("resize",f.onWindowResize,f,{buffer:1});f._monitoringResize=true}}else{if(j){Ext.un("resize",f.onWindowResize,f);f._monitoringResize=false}}},toggleMaximize:function(){return this[this.maximized?"restore":"maximize"]()},createGhost:function(){var b=Ext.panel.Panel.prototype.createGhost.apply(this,arguments);b.xtype="window";b.focusOnToFront=false;return b},getDefaultFocus:function(){var j=this,f,h=j.defaultFocus,g;if(h!==undefined){if(Ext.isNumber(h)){f=j.query("button")[h]}else{if(Ext.isString(h)){g=h;if(Ext.validIdRe.test(g)){f=j.down(Ext.makeIdSelector(g))}if(!f){f=j.down(g)}}else{if(h.focus){f=h}}}}return f},privates:{initDraggable:function(){this.initSimpleDraggable()},onHeaderClick:function(g,d){var f;if(g.el.contains(d.getTarget())){f=this.getDefaultFocus();if(f){f.focus()}}},initResizable:function(){Ext.panel.Panel.prototype.initResizable.apply(this,arguments);if(this.maximized){this.resizer.disable()}}}},0,["window"],["component","box","container","panel","window"],{component:true,box:true,container:true,panel:true,window:true},["widget.window"],[[Ext.util.FocusTrap.prototype.mixinId||Ext.util.FocusTrap.$className,Ext.util.FocusTrap]],[Ext.window,"Window",Ext,"Window"],0));(Ext.cmd.derive("Ext.form.Labelable",Ext.Mixin,{isLabelable:true,mixinConfig:{id:"labelable",on:{beforeRender:"beforeLabelRender",onRender:"onLabelRender"}},config:{childEls:["labelEl","bodyEl","errorEl","errorWrapEl","ariaErrorEl"]},labelableRenderTpl:["{beforeLabelTpl}",'<label id="{id}-labelEl" data-ref="labelEl" class="{labelCls} {labelCls}-{ui} {labelClsExtra} ','{childElCls} {unselectableCls}" style="{labelStyle}"<tpl if="inputId">',' for="{inputId}"</tpl> {labelAttrTpl}>','<span class="{labelInnerCls} {labelInnerCls}-{ui}" style="{labelInnerStyle}">',"{beforeLabelTextTpl}",'<tpl if="fieldLabel">{fieldLabel}','<tpl if="labelSeparator">{labelSeparator}</tpl>',"</tpl>","{afterLabelTextTpl}","</span>","</label>","{afterLabelTpl}",'<div id="{id}-bodyEl" data-ref="bodyEl" role="presentation"',' class="{baseBodyCls} {baseBodyCls}-{ui}<tpl if="fieldBodyCls">',' {fieldBodyCls} {fieldBodyCls}-{ui}</tpl> {growCls} {extraFieldBodyCls}"','<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{beforeBodyEl}","{beforeSubTpl}","{[values.$comp.getSubTplMarkup(values)]}","{afterSubTpl}","{afterBodyEl}",'<div id="{id}-ariaErrorEl" data-ref="ariaErrorEl" role="alert" aria-live="polite"',' class="x-hidden-clip">',"</div>","</div>",'<tpl if="renderError">','<div id="{id}-errorWrapEl" data-ref="errorWrapEl" class="{errorWrapCls} {errorWrapCls}-{ui}',' {errorWrapExtraCls}" style="{errorWrapStyle}">','<div role="presentation" id="{id}-errorEl" data-ref="errorEl" ','class="{errorMsgCls} {invalidMsgCls} {invalidMsgCls}-{ui}" ','data-anchorTarget="{tipAnchorTarget}">',"</div>","</div>","</tpl>",{disableFormats:true}],activeErrorsTpl:undefined,htmlActiveErrorsTpl:['<tpl if="errors && errors.length">','<ul class="{listCls}">','<tpl for="errors"><li>{.}</li></tpl>',"</ul>","</tpl>"],plaintextActiveErrorsTpl:['<tpl if="errors && errors.length">','<tpl for="errors"><tpl if="xindex &gt; 1">\n</tpl>{.}</tpl>',"</tpl>"],isFieldLabelable:true,formItemCls:"x-form-item",labelCls:"x-form-item-label",topLabelCls:"x-form-item-label-top",rightLabelCls:"x-form-item-label-right",labelInnerCls:"x-form-item-label-inner",topLabelSideErrorCls:"x-form-item-label-top-side-error",errorMsgCls:"x-form-error-msg",errorWrapCls:"x-form-error-wrap",errorWrapSideCls:"x-form-error-wrap-side",errorWrapUnderCls:"x-form-error-wrap-under",errorWrapUnderSideLabelCls:"x-form-error-wrap-under-side-label",baseBodyCls:"x-form-item-body",invalidIconCls:"x-form-invalid-icon",invalidUnderCls:"x-form-invalid-under",noLabelCls:"x-form-item-no-label",fieldBodyCls:"",invalidCls:"x-form-invalid",fieldLabel:undefined,labelAlign:"left",labelWidth:100,labelPad:5,labelSeparator:":",hideLabel:false,hideEmptyLabel:true,preventMark:false,autoFitErrors:true,msgTarget:"qtip",msgTargets:{qtip:1,title:1,under:1,side:1,none:1},noWrap:true,labelableInsertions:["beforeBodyEl","afterBodyEl","beforeLabelTpl","afterLabelTpl","beforeSubTpl","afterSubTpl","beforeLabelTextTpl","afterLabelTextTpl","labelAttrTpl"],statics:{initTip:function(){var d=this.tip,f,g;if(d){return}f={id:"ext-form-error-tip",ui:"form-invalid"};if(Ext.supports.Touch){f.dismissDelay=0;f.anchor="top";f.showDelay=0;f.listeners={beforeshow:function(){this.minWidth=Ext.fly(this.anchorTarget).getWidth()}}}d=this.tip=Ext.create("Ext.tip.QuickTip",f);g=Ext.apply({},d.tagConfig);g.attribute="errorqtip";d.setTagConfig(g)},destroyTip:function(){this.tip=Ext.destroy(this.tip)}},initLabelable:function(){var d=this,c=d.padding;if(c){d.padding=undefined;d.extraMargins=Ext.Element.parseBox(c)}if(Ext.isIE8){d.restoreDisplay=Ext.Function.createDelayed(d.doRestoreDisplay,0,d)}if(!d.activeErrorsTpl){if(d.msgTarget==="title"){d.activeErrorsTpl=d.plaintextActiveErrorsTpl}else{d.activeErrorsTpl=d.htmlActiveErrorsTpl}}d.addCls([d.formItemCls,d.formItemCls+"-"+d.ui]);d.lastActiveError="";d.enableBubble("errorchange")},trimLabelSeparator:function(){var j=this,h=j.labelSeparator,g=j.fieldLabel||"",f=g.substr(g.length-1);return f===h?g.slice(0,-1):g},getFieldLabel:function(){return this.trimLabelSeparator()},setFieldLabel:function(t){t=t||"";var s=this,r=s.labelSeparator,u=s.labelEl,m=s.errorWrapEl,p=(s.labelAlign!=="top"),o=s.noLabelCls,q=s.errorWrapUnderSideLabelCls;s.fieldLabel=t;if(s.rendered){if(Ext.isEmpty(t)&&s.hideEmptyLabel){s.addCls(o);if(p&&m){m.removeCls(q)}}else{if(r){t=s.trimLabelSeparator()+r}u.dom.firstChild.innerHTML=t;s.removeCls(o);if(p&&m){m.addCls(q)}}s.updateLayout()}},setHideLabel:function(d){var c=this;if(d!==c.hideLabel){c.hideLabel=d;if(c.rendered){c[d?"addCls":"removeCls"](c.noLabelCls);c.updateLayout()}}},setHideEmptyLabel:function(f){var g=this,d;if(f!==g.hideEmptyLabel){g.hideEmptyLabel=f;if(g.rendered&&!g.hideLabel){d=f&&!g.getFieldLabel();g[d?"addCls":"removeCls"](g.noLabelCls);g.updateLayout()}}},getInsertionRenderData:function(m,j){var g=j.length,h,o;while(g--){h=j[g];o=this[h];if(o){if(typeof o!=="string"){if(!o.isTemplate){o=Ext.XTemplate.getTpl(this,h)}o=o.apply(m)}}m[h]=o||""}return m},getLabelableRenderData:function(){var B=this,y=B.labelAlign,L=(y==="top"),E=(y==="right"),H=(B.msgTarget==="side"),K=(B.msgTarget==="under"),z=B.errorMsgCls,J=B.labelPad,C=B.labelWidth,O=B.labelClsExtra||"",I=H?B.errorWrapSideCls:B.errorWrapUnderCls,P="",F="",M=B.hasVisibleLabel(),D=B.autoFitErrors,G=B.defaultBodyWidth,N,A;if(L){O+=" "+B.topLabelCls;if(J){F="padding-bottom:"+J+"px;"}if(H&&!D){O+=" "+B.topLabelSideErrorCls}}else{if(E){O+=" "+B.rightLabelCls}if(J){P+=B.getHorizontalPaddingStyle()+J+"px;"}P+="width:"+(C+(J?J:0))+"px;";F="width:"+C+"px"}if(M){if(!L&&K){I+=" "+B.errorWrapUnderSideLabelCls}}if(G){N="min-width:"+G+"px;max-width:"+G+"px;"}A={id:B.id,inputId:B.getInputId(),labelCls:B.labelCls,labelClsExtra:O,labelStyle:P+(B.labelStyle||""),labelInnerStyle:F,labelInnerCls:B.labelInnerCls,unselectableCls:Ext.Element.unselectableCls,bodyStyle:N,baseBodyCls:B.baseBodyCls,fieldBodyCls:B.fieldBodyCls,extraFieldBodyCls:B.extraFieldBodyCls,errorWrapCls:B.errorWrapCls,errorWrapExtraCls:I,renderError:H||K,invalidMsgCls:H?B.invalidIconCls:K?B.invalidUnderCls:"",errorMsgCls:z,growCls:B.grow?B.growCls:"",tipAnchorTarget:B.id+"-inputEl",errorWrapStyle:(H&&!D)?"visibility:hidden":"display:none",fieldLabel:B.getFieldLabel(),labelSeparator:B.labelSeparator};B.getInsertionRenderData(A,B.labelableInsertions);return A},getHorizontalPaddingStyle:function(){return"padding-right:"},beforeLabelRender:function(){var b=this;b.setFieldDefaults(b.getInherited().fieldDefaults);if(b.ownerLayout){b.addCls("x-"+b.ownerLayout.type+"-form-item")}if(!b.hasVisibleLabel()){b.addCls(b.noLabelCls)}},onLabelRender:function(){var p=this,q={},m=Ext.Element,j=p.errorWrapEl,o,h;if(j){j.setVisibilityMode((p.msgTarget==="side"&&!p.autoFitErrors)?m.VISIBILITY:m.DISPLAY)}if(p.extraMargins){o=p.el.getMargin();for(h in o){if(o.hasOwnProperty(h)){q["margin-"+h]=(o[h]+p.extraMargins[h])+"px"}}p.el.setStyle(q)}},hasVisibleLabel:function(){if(this.hideLabel){return false}return !(this.hideEmptyLabel&&!this.getFieldLabel())},getSubTplMarkup:function(){return""},getInputId:function(){return""},getActiveError:function(){return this.activeError||""},hasActiveError:function(){return !!this.getActiveError()},setActiveError:function(b){this.setActiveErrors(b)},getActiveErrors:function(){return this.activeErrors||[]},setActiveErrors:function(r){var t=this,s=t.errorWrapEl,v=t.msgTarget,w=v==="side",p=v==="qtip",z,y,u,q;r=Ext.Array.from(r);u=t.getTpl("activeErrorsTpl");t.activeErrors=r;y=t.activeError=u.apply({fieldLabel:t.fieldLabel,errors:r,listCls:"x-list-plain"});t.renderActiveError();if(t.rendered){z=t.getActionEl();if(w){t.errorEl.dom.setAttribute("data-errorqtip",y)}else{if(p){z.dom.setAttribute("data-errorqtip",y)}else{if(v==="title"){z.dom.setAttribute("title",y)}}}if(v!=="title"){t.ariaErrorEl.dom.innerHTML=r.join(". ");z.dom.setAttribute("aria-describedby",t.ariaErrorEl.id)}if(w||p){Ext.form.Labelable.initTip()}if(!t.msgTargets[v]){q=Ext.get(v);if(q){q.dom.innerHTML=y}}}if(s){s.setVisible(r.length>0);if(w&&t.autoFitErrors){t.labelEl.addCls(t.topLabelSideErrorCls)}t.updateLayout()}},unsetActiveError:function(){var o=this,h=o.errorWrapEl,q=o.msgTarget,j=o.restoreDisplay,p,m;if(o.hasActiveError()){delete o.activeError;delete o.activeErrors;o.renderActiveError();if(o.rendered){p=o.getActionEl();if(q==="qtip"){p.dom.removeAttribute("data-errorqtip")}else{if(q==="title"){p.dom.removeAttribute("title")}}if(q!=="title"){o.ariaErrorEl.dom.innerHTML="";p.dom.removeAttribute("aria-describedby")}if(!o.msgTargets[q]){m=Ext.get(q);if(m){m.dom.innerHTML=""}}if(h){h.hide();if(q==="side"&&o.autoFitErrors){o.labelEl.removeCls(o.topLabelSideErrorCls)}o.updateLayout();if(j){o.el.dom.style.display="block";o.restoreDisplay()}}}}},doRestoreDisplay:function(){var b=this.el;if(b&&b.dom){b.dom.style.display=""}},renderActiveError:function(){var g=this,d=g.getActiveError(),f=!!d;if(d!==g.lastActiveError){g.lastActiveError=d;g.fireEvent("errorchange",g,d)}if(g.rendered&&!g.destroyed&&!g.preventMark){g.toggleInvalidCls(f);if(g.errorEl){g.errorEl.dom.innerHTML=d}}},toggleInvalidCls:function(b){this.el[b?"addCls":"removeCls"](this.invalidCls)},setFieldDefaults:function(c){var d;for(d in c){if(!this.hasOwnProperty(d)){this[d]=c[d]}}}},0,0,0,0,0,0,[Ext.form,"Labelable"],function(){if(Ext.supports.Touch){this.prototype.msgTarget="side"}}));(Ext.cmd.derive("Ext.form.field.Field",Ext.Base,{mixinId:"field",isFormField:true,config:{validation:null,validationField:null},disabled:false,submitValue:true,validateOnChange:true,valuePublishEvent:"change",suspendCheckChange:0,dirty:false,initField:function(){var h=this,j=h.valuePublishEvent,g,f;h.initValue();if(Ext.isString(j)){h.on(j,h.publishValue,h)}else{for(f=0,g=j.length;f<g;++f){h.on(j[f],h.publishValue,h)}}},initValue:function(){var b=this;if("value" in b){b.suspendCheckChange++;b.setValue(b.value);b.suspendCheckChange--}b.initialValue=b.originalValue=b.lastValue=b.getValue()},getFieldIdentifier:function(){return this.isEditorComponent?this.dataIndex:this.name},getName:function(){return this.name},getValue:function(){return this.value},setValue:function(c){var d=this;d.value=c;d.checkChange();return d},isEqual:function(c,d){return String(c)===String(d)},isEqualAsString:function(c,d){return String(Ext.valueFrom(c,""))===String(Ext.valueFrom(d,""))},getSubmitData:function(){var d=this,c=null;if(!d.disabled&&d.submitValue){c={};c[d.getName()]=""+d.getValue()}return c},getModelData:function(g,f){var j=this,h=null;if(!j.disabled&&(j.submitValue||!f)){h={};h[j.getFieldIdentifier()]=j.getValue()}return h},reset:function(){var b=this;b.beforeReset();b.setValue(b.originalValue);b.clearInvalid();delete b.wasValid},beforeReset:Ext.emptyFn,resetOriginalValue:function(){this.originalValue=this.getValue();this.checkDirty()},checkChange:function(){var g=this,d,f;if(!g.suspendCheckChange){d=g.getValue();f=g.lastValue;if(!g.destroyed&&g.didValueChange(d,f)){g.lastValue=d;g.fireEvent("change",g,d,f);g.onChange(d,f)}}},didValueChange:function(c,d){return !this.isEqual(c,d)},onChange:function(d){var c=this;if(c.validateOnChange){c.validate()}c.checkDirty()},publishValue:function(){var b=this;if(b.rendered&&!b.getErrors().length){b.publishState("value",b.getValue())}},isDirty:function(){var b=this;return !b.disabled&&!b.isEqual(b.getValue(),b.originalValue)},checkDirty:function(){var d=this,c=d.isDirty();if(c!==d.wasDirty){d.dirty=c;d.fireEvent("dirtychange",d,c);d.onDirtyChange(c);d.wasDirty=c}},onDirtyChange:Ext.emptyFn,getErrors:function(m){var j=[],o=this.getValidationField(),g=this.getValidation(),h;if(o){h=o.validate(m);if(h!==true){j.push(h)}}if(g&&g!==true){j.push(g)}return j},isValid:function(){var b=this;return b.disabled||Ext.isEmpty(b.getErrors())},validate:function(){return this.checkValidityChange(this.isValid())},checkValidityChange:function(c){var d=this;if(c!==d.wasValid){d.wasValid=c;d.fireEvent("validitychange",d,c)}return c},batchChanges:function(d){try{this.suspendCheckChange++;d()}catch(c){throw c}finally{this.suspendCheckChange--}this.checkChange()},isFileUpload:function(){return false},extractFileInput:function(){return null},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,updateValidation:function(d,c){if(c){this.validate()}},privates:{resetToInitialValue:function(){var c=this,d=c.originalValue;c.originalValue=c.initialValue;c.reset();c.originalValue=d}}},0,0,0,0,0,0,[Ext.form.field,"Field"],0));(Ext.cmd.derive("Ext.form.field.Base",Ext.Component,{alternateClassName:["Ext.form.Field","Ext.form.BaseField"],focusable:true,shrinkWrap:true,fieldSubTpl:['<input id="{id}" data-ref="inputEl" type="{type}" {inputAttrTpl}',' size="1"','<tpl if="name"> name="{name}"</tpl>','<tpl if="value"> value="{[Ext.util.Format.htmlEncode(values.value)]}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','{%if (values.maxLength !== undefined){%} maxlength="{maxLength}"{%}%}','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {editableCls} {inputCls}" autocomplete="off"/>',{disableFormats:true}],defaultBindProperty:"value",autoEl:{role:"presentation"},subTplInsertions:["inputAttrTpl"],childEls:["inputEl"],inputType:"text",isTextInput:true,invalidText:"The value in this field is invalid",fieldCls:"x-form-field",focusCls:"form-focus",dirtyCls:"x-form-dirty",checkChangeEvents:Ext.isIE&&(!document.documentMode||document.documentMode<=9)?["change","propertychange","keyup"]:["change","input","textInput","keyup","dragdrop"],ignoreChangeRe:/data\-errorqtip|style\.|className/,checkChangeBuffer:50,liquidLayout:true,readOnly:false,readOnlyCls:"x-form-readonly",validateOnBlur:true,hasFocus:false,baseCls:"x-field",fieldBodyCls:"x-field-body",maskOnDisable:false,stretchInputElFixed:true,ariaEl:"inputEl",initComponent:function(){var b=this;Ext.Component.prototype.initComponent.call(this);b.subTplData=b.subTplData||{};b.initLabelable();b.initField();b.initDefaultName();if(b.readOnly){b.addCls(b.readOnlyCls)}b.addCls("x-form-type-"+b.inputType)},initDefaultName:function(){var b=this;if(!b.name){b.name=b.getInputId()}},getInputId:function(){return this.inputId||(this.inputId=this.id+"-inputEl")},getSubTplData:function(q){var o=this,p=o.inputType,j=o.getInputId(),m,h;m=Ext.apply({ui:o.ui,id:j,cmpId:o.id,name:o.name||j,disabled:o.disabled,readOnly:o.readOnly,value:o.getRawValue(),type:p,fieldCls:o.fieldCls,fieldStyle:o.getFieldStyle(),childElCls:q.childElCls,tabIdx:o.tabIndex,inputCls:o.inputCls,typeCls:"x-form-"+(o.isTextInput?"text":p)},o.subTplData);if(o.ariaRole){h={role:o.ariaRole,"aria-hidden":!!o.hidden,"aria-disabled":!!o.disabled,"aria-readonly":!!o.readOnly,"aria-invalid":false};if(o.ariaLabel){h["aria-label"]=o.ariaLabel}if(o.format&&o.formatText&&!m.title){h.title=Ext.String.formatEncode(o.formatText,o.format)}m.inputElAriaAttributes=Ext.apply(h,o.getAriaAttributes())}o.getInsertionRenderData(m,o.subTplInsertions);return m},getSubTplMarkup:function(h){var q=this,p=q.getSubTplData(h),o=q.getTpl("preSubTpl"),m=q.getTpl("postSubTpl"),j="";if(o){j+=o.apply(p)}j+=q.getTpl("fieldSubTpl").apply(p);if(m){j+=m.apply(p)}return j},initRenderData:function(){return Ext.applyIf(Ext.Component.prototype.initRenderData.call(this),this.getLabelableRenderData())},setFieldStyle:function(f){var d=this,g=d.inputEl;if(g){g.applyStyles(f)}d.fieldStyle=f},getFieldStyle:function(){var b=this.fieldStyle;return Ext.isObject(b)?Ext.DomHelper.generateStyles(b,null,true):b||""},onRender:function(){this.callParent(arguments);this.mixins.labelable.self.initTip();this.renderActiveError()},onFocusLeave:function(b){Ext.Component.prototype.onFocusLeave.call(this,b);this.completeEdit()},completeEdit:Ext.emptyFn,isFileUpload:function(){return this.inputType==="file"},getSubmitData:function(){var f=this,d=null,g;if(!f.disabled&&f.submitValue){g=f.getSubmitValue();if(g!==null){d={};d[f.getName()]=g}}return d},getSubmitValue:function(){return this.processRawValue(this.getRawValue())},getRawValue:function(){var c=this,d=(c.inputEl?c.inputEl.getValue():Ext.valueFrom(c.rawValue,""));c.rawValue=d;return d},setRawValue:function(g){var f=this,d=f.rawValue;if(!f.transformRawValue.$nullFn){g=f.transformRawValue(g)}g=Ext.valueFrom(g,"");if(d===undefined||d!==g||f.valueContainsPlaceholder){f.rawValue=g;if(f.inputEl){f.bindChangeEvents(false);f.inputEl.dom.value=g;f.bindChangeEvents(true)}if(f.rendered&&f.reference){f.publishState("rawValue",g)}}return g},transformRawValue:Ext.identityFn,valueToRaw:function(b){return""+Ext.valueFrom(b,"")},rawToValue:Ext.identityFn,processRawValue:Ext.identityFn,getValue:function(){var d=this,c=d.rawToValue(d.processRawValue(d.getRawValue()));d.value=c;return c},setValue:function(c){var d=this;d.setRawValue(d.valueToRaw(c));return d.mixins.field.setValue.call(d,c)},onBoxReady:function(){var b=this;Ext.Component.prototype.onBoxReady.apply(this,arguments);if(b.setReadOnlyOnBoxReady){b.setReadOnly(b.readOnly)}},onDisable:function(){var d=this,c=d.inputEl;Ext.Component.prototype.onDisable.call(this);if(c){c.dom.disabled=true;if(d.hasActiveError()){d.clearInvalid();d.hadErrorOnDisable=true}}if(d.wasValid===false){d.checkValidityChange(true)}},onEnable:function(){var f=this,j=f.inputEl,h=f.preventMark,g;Ext.Component.prototype.onEnable.call(this);if(j){j.dom.disabled=false}if(f.wasValid!==undefined){f.forceValidation=true;f.preventMark=!f.hadErrorOnDisable;g=f.isValid();f.forceValidation=false;f.preventMark=h;f.checkValidityChange(g)}delete f.hadErrorOnDisable},setReadOnly:function(h){var f=this,j=f.inputEl,g=f.readOnly;h=!!h;f[h?"addCls":"removeCls"](f.readOnlyCls);f.readOnly=h;if(j){j.dom.readOnly=h;f.ariaEl.dom.setAttribute("aria-readonly",h)}else{if(f.rendering){f.setReadOnlyOnBoxReady=true}}if(h!==g){f.fireEvent("writeablechange",f,h)}},fireKey:function(b){if(b.isSpecialKey()){this.fireEvent("specialkey",this,b)}},initEvents:function(){var q=this,o=q.inputEl,p=q.onFieldMutation,s=q.checkChangeEvents,m=s.length,j,r;if(o){q.mon(o,Ext.supports.SpecialKeyDownRepeat?"keydown":"keypress",q.fireKey,q);for(j=0;j<m;++j){r=s[j];if(r==="propertychange"){q.usesPropertychange=true}if(r==="textInput"){q.usesTextInput=true}q.mon(o,r,p,q)}}Ext.Component.prototype.initEvents.call(this)},onFieldMutation:function(b){if(!this.readOnly&&!(b.type==="propertychange"&&this.ignoreChangeRe.test(b.browserEvent.propertyName))){this.startCheckChangeTask()}},startCheckChangeTask:function(){var c=this,d=c.checkChangeTask;if(!d){c.checkChangeTask=d=new Ext.util.DelayedTask(c.doCheckChangeTask,c)}if(!c.bindNotifyListener){c.bindNotifyListener=Ext.on("beforebindnotify",c.onBeforeNotify,c,{destroyable:true})}d.delay(c.checkChangeBuffer)},doCheckChangeTask:function(){var b=this.bindNotifyListener;if(b){b.destroy();this.bindNotifyListener=null}this.checkChange()},publishValue:function(){var b=this;if(b.rendered&&!b.getErrors().length){b.publishState("value",b.getValue())}},onDirtyChange:function(c){var d=this;d[c?"addCls":"removeCls"](d.dirtyCls);if(d.rendered&&d.reference){d.publishState("dirty",c)}},isValid:function(){var d=this,f=d.disabled,g=d.forceValidation||!f;return g?d.validateValue(d.processRawValue(d.getRawValue())):f},validateValue:function(f){var g=this,h=g.getErrors(f),j=Ext.isEmpty(h);if(!g.preventMark){if(j){g.clearInvalid()}else{g.markInvalid(h)}}return j},markInvalid:function(j){var o=this,h=o.ariaEl.dom,g=o.getActiveError(),m;o.setActiveErrors(Ext.Array.from(j));m=o.getActiveError();if(g!==m){o.setError(m);if(!o.ariaStaticRoles[o.ariaRole]&&h){h.setAttribute("aria-invalid",true)}}},clearInvalid:function(){var g=this,f=g.ariaEl.dom,d=g.hasActiveError();delete g.hadErrorOnDisable;g.unsetActiveError();if(d){g.setError("");if(!g.ariaStaticRoles[g.ariaRole]&&f){f.setAttribute("aria-invalid",false)}}},setError:function(g){var j=this,f=j.msgTarget,h;if(j.rendered){if(f==="title"||f==="qtip"){h=f==="qtip"?"data-errorqtip":"title";j.getActionEl().dom.setAttribute(h,g||"")}else{j.updateLayout()}}},renderActiveError:function(){var g=this,d=g.hasActiveError(),f=g.invalidCls+"-field";if(g.inputEl){g.inputEl[d?"addCls":"removeCls"]([f,f+"-"+g.ui])}g.mixins.labelable.renderActiveError.call(g)},beforeDestroy:function(){var c=this,d=c.checkChangeTask;if(d){d.cancel()}c.checkChangeTask=c.bindNotifyListener=Ext.destroy(c.bindNotifyListener);Ext.Component.prototype.beforeDestroy.call(this)},privates:{applyBind:function(m,q){var h=this,j=q&&q.value,o,p;o=Ext.Component.prototype.applyBind.call(this,m,q);if(o){p=o.value;h.hasBindingValue=!!p;if(p!==j&&h.getInherited().modelValidation){h.updateValueBinding(o)}}return o},applyRenderSelectors:function(){var b=this;Ext.Component.prototype.applyRenderSelectors.call(this);if(!b.inputEl){b.inputEl=b.el.getById(b.getInputId())}},bindChangeEvents:function(d){var g=d?"resumeEvent":"suspendEvent",f=this.inputEl;if(this.usesPropertychange){f[g]("propertychange")}if(this.usesTextInput){f[g]("textInput")}},getActionEl:function(){return this.inputEl||this.el},getFocusEl:function(){return this.inputEl},initRenderTpl:function(){var b=this;if(!b.hasOwnProperty("renderTpl")){b.renderTpl=b.getTpl("labelableRenderTpl")}return Ext.Component.prototype.initRenderTpl.call(this)},onBeforeNotify:function(){this.checkChangeTask.cancel();this.checkChange()},updateValueBinding:function(h){var j=this,f=h.value,g=h.$fieldBinding;if(g){g.destroy();h.$fieldBinding=null}if(f&&f.bindValidationField){j.fieldBinding=f.bindValidationField("setValidationField",j)}}},deprecated:{"5":{methods:{doComponentLayout:function(){this.bindChangeEvents(false);this.callParent(arguments);this.bindChangeEvents(true)}}}}},0,["field"],["component","box","field"],{component:true,box:true,field:true},["widget.field"],[[Ext.form.Labelable.prototype.mixinId||Ext.form.Labelable.$className,Ext.form.Labelable],[Ext.form.field.Field.prototype.mixinId||Ext.form.field.Field.$className,Ext.form.field.Field]],[Ext.form.field,"Base",Ext.form,"Field",Ext.form,"BaseField"],0));(Ext.cmd.derive("Ext.form.field.VTypes",Ext.Base,(function(){var j=/^[a-zA-Z_]+$/,h=/^[a-zA-Z0-9_]+$/,f=/^(")?(?:[^\."\s])(?:(?:[\.])?(?:[\w\-!#$%&'*+/=?^_`{|}~]))*\1@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,g=/(((^https?)|(^ftp)):\/\/((([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*)|(localhost|LOCALHOST))\/?)/i;return{singleton:true,alternateClassName:"Ext.form.VTypes",email:function(a){return f.test(a)},emailText:'This field should be an e-mail address in the format "user@example.com"',emailMask:/[\w.\-@'"!#$%&'*+/=?^_`{|}~]/i,url:function(a){return g.test(a)},urlText:'This field should be a URL in the format "http://www.example.com"',alpha:function(a){return j.test(a)},alphaText:"This field should only contain letters and _",alphaMask:/[a-z_]/i,alphanum:function(a){return h.test(a)},alphanumText:"This field should only contain letters, numbers and _",alphanumMask:/[a-z0-9_]/i}}()),0,0,0,0,0,0,[Ext.form.field,"VTypes",Ext.form,"VTypes"],0));(Ext.cmd.derive("Ext.form.trigger.Trigger",Ext.Base,{factoryConfig:{defaultType:"trigger"},repeatClick:false,hidden:false,hideOnReadOnly:undefined,weight:0,preventMouseDown:true,baseCls:"x-form-trigger",focusCls:"x-form-trigger-focus",overCls:"x-form-trigger-over",clickCls:"x-form-trigger-click",validIdRe:Ext.validIdRe,renderTpl:['<div id="{triggerId}" class="{baseCls} {baseCls}-{ui} {cls} {cls}-{ui} {extraCls} ','{childElCls}"<tpl if="triggerStyle"> style="{triggerStyle}"</tpl>>',"{[values.$trigger.renderBody(values)]}","</div>"],statics:{weightComparator:function(d,c){return d.weight-c.weight}},constructor:function(d){var g=this,f;Ext.apply(g,d);if(g.compat4Mode){f=g.cls;g.focusCls=[g.focusCls,f+"-focus"];g.overCls=[g.overCls,f+"-over"];g.clickCls=[g.clickCls,f+"-click"]}},afterFieldRender:function(){this.initEvents()},destroy:function(){var b=this;b.clickRepeater=b.el=Ext.destroy(b.clickRepeater,b.el);b.callParent()},getBodyRenderData:Ext.emptyFn,getEl:function(){return this.el||null},getStateEl:function(){return this.el},hide:function(){var c=this,d=c.el;c.hidden=true;if(d){d.hide()}},initEvents:function(){var h=this,g=h.isFieldEnabled,j=h.getStateEl(),f=h.el;j.addClsOnOver(h.overCls,g,h);j.addClsOnClick(h.clickCls,g,h);if(h.repeatClick){h.clickRepeater=new Ext.util.ClickRepeater(f,{preventDefault:true,handler:h.onClick,listeners:{mousedown:h.onClickRepeaterMouseDown,scope:h},scope:h})}else{h.field.mon(f,{click:h.onClick,mousedown:h.onMouseDown,scope:h})}},isFieldEnabled:function(){return !this.field.disabled},isVisible:function(){var f=this,g=f.field,d=false;if(f.hidden||!g||!f.rendered||f.destroyed){d=true}return !d},onClick:function(){var o=this,h=arguments,j=o.clickRepeater?h[1]:h[0],g=o.handler,m=o.field;if(g&&!m.readOnly&&o.isFieldEnabled()){Ext.callback(o.handler,o.scope,[m,o,j],0,m)}},resolveListenerScope:function(b){return this.field.resolveSatelliteListenerScope(this,b)},onMouseDown:function(b){if(b.pointerType!=="touch"&&!this.field.owns(Ext.Element.getActiveElement())){this.field.inputEl.focus()}if(this.preventMouseDown){b.preventDefault()}},onClickRepeaterMouseDown:function(c,d){if(!d.parentEvent||d.parentEvent.type==="mousedown"){this.field.inputEl.focus()}d.preventDefault()},onFieldBlur:function(){this.getStateEl().removeCls(this.focusCls)},onFieldFocus:function(){this.getStateEl().addCls(this.focusCls)},onFieldRender:function(){var c=this,d=c.el=c.field.triggerWrap.selectNode("#"+c.domId,false);d.setVisibilityMode(Ext.Element.DISPLAY);c.rendered=true},renderBody:function(d){var f=this,g=f.bodyTpl;Ext.apply(d,f.getBodyRenderData());return g?Ext.XTemplate.getTpl(f,"bodyTpl").apply(d):""},renderTrigger:function(g){var j=this,f=j.width,h=j.hidden?"display:none;":"";if(f){h+="width:"+f}return Ext.XTemplate.getTpl(j,"renderTpl").apply({$trigger:j,fieldData:g,ui:g.ui,childElCls:g.childElCls,triggerId:j.domId=j.field.id+"-trigger-"+j.id,cls:j.cls,triggerStyle:h,extraCls:j.extraCls,baseCls:j.baseCls})},setHidden:function(b){if(b!==this.hidden){this[b?"hide":"show"]()}},setVisible:function(b){this.setHidden(!b)},show:function(){var c=this,d=c.el;c.hidden=false;if(d){d.show()}}},1,0,0,0,["trigger.trigger"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.form.trigger,"Trigger"],0));(Ext.cmd.derive("Ext.form.field.Text",Ext.form.field.Base,{alternateClassName:["Ext.form.TextField","Ext.form.Text"],config:{hideTrigger:false,triggers:undefined},renderConfig:{editable:true},growMin:30,growMax:800,growAppend:"W",allowBlank:true,validateBlank:false,allowOnlyWhitespace:true,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",blankText:"This field is required",regexText:"",emptyText:"",emptyCls:"x-form-empty-field",requiredCls:"x-form-required-field",valueContainsPlaceholder:false,ariaRole:"textbox",repeatTriggerClick:false,triggerWrapCls:"x-form-trigger-wrap",triggerWrapFocusCls:"x-form-trigger-wrap-focus",triggerWrapInvalidCls:"x-form-trigger-wrap-invalid",fieldBodyCls:"x-form-text-field-body",inputWrapCls:"x-form-text-wrap",inputWrapFocusCls:"x-form-text-wrap-focus",inputWrapInvalidCls:"x-form-text-wrap-invalid",growCls:"x-form-text-grow",needArrowKeys:true,squashMouseUp:{mouseup:function(){},translate:false,single:true,preventDefault:true},childEls:["triggerWrap","inputWrap"],preSubTpl:['<div id="{cmpId}-triggerWrap" data-ref="triggerWrap"',' role="presentation" class="{triggerWrapCls} {triggerWrapCls}-{ui}">','<div id={cmpId}-inputWrap data-ref="inputWrap"',' role="presentation" class="{inputWrapCls} {inputWrapCls}-{ui}">'],postSubTpl:["</div>",'<tpl for="triggers">{[values.renderTrigger(parent)]}</tpl>',"</div>"],initComponent:function(){var c=this,d=c.emptyCls;if(c.allowOnlyWhitespace===false){c.allowBlank=false}if(c.size){c.defaultBodyWidth=c.size*6.5+20}if(!c.onTrigger1Click){c.onTrigger1Click=c.onTriggerClick}Ext.form.field.Base.prototype.initComponent.call(this);if(c.readOnly){c.setReadOnly(c.readOnly)}c.fieldFocusCls=c.baseCls+"-focus";c.emptyUICls=d+" "+d+"-"+c.ui;c.addStateEvents("change")},initEvents:function(){var c=this,d=c.inputEl;Ext.form.field.Base.prototype.initEvents.call(this);if(c.selectOnFocus||c.emptyText){c.mon(d,"mousedown",c.onMouseDown,c)}if(c.maskRe||(c.vtype&&c.disableKeyFilter!==true&&(c.maskRe=Ext.form.field.VTypes[c.vtype+"Mask"]))){c.mon(d,"keypress",c.filterKeys,c)}if(c.enableKeyEvents){c.mon(d,{scope:c,keyup:c.onKeyUp,keydown:c.onKeyDown,keypress:c.onKeyPress})}},isEqual:function(c,d){return this.isEqualAsString(c,d)},onChange:function(c,d){Ext.form.field.Base.prototype.onChange.apply(this,arguments);this.autoSize()},getSubTplData:function(u){var t=this,r=t.getRawValue(),p=t.emptyText&&r.length<1,o=t.maxLength,q,s,m;if(t.enforceMaxLength){if(o===Number.MAX_VALUE){o=undefined}}else{o=undefined}if(p){if(Ext.supports.Placeholder){q=t.emptyText}else{r=t.emptyText;t.valueContainsPlaceholder=true}}s=Ext.apply(Ext.form.field.Base.prototype.getSubTplData.call(this,u),{triggerWrapCls:t.triggerWrapCls,inputWrapCls:t.inputWrapCls,triggers:t.orderedTriggers,maxLength:o,readOnly:!t.editable||t.readOnly,placeholder:q,value:r,fieldCls:t.fieldCls+((p&&(q||r))?" "+t.emptyUICls:"")+(t.allowBlank?"":" "+t.requiredCls)});m=s.inputElAriaAttributes;if(m){m["aria-required"]=!t.allowBlank}return s},onRender:function(){var o=this,g=o.getTriggers(),m=[],j,h;if(Ext.supports.FixedTableWidthBug){o.el._needsTableWidthFix=true}(arguments.callee.$previous||Ext.form.field.Base.prototype.onRender).call(this);if(g){this.invokeTriggers("onFieldRender");for(j in g){m.push(g[j].el)}h=o.triggerEl=o.triggerCell=new Ext.CompositeElement(m,true)}o.inputCell=o.inputWrap},afterRender:function(){var b=this;b.autoSize();Ext.form.field.Base.prototype.afterRender.call(this);b.invokeTriggers("afterFieldRender")},onMouseDown:function(){if(!this.hasFocus){Ext.getDoc().on(this.squashMouseUp)}},applyTriggers:function(u){var t=this,z=t.getHideTrigger(),r=t.readOnly,q=t.orderedTriggers=[],s=t.repeatTriggerClick,A,v,y,B,w;if(!u){u={};if(t.triggerCls&&!t.trigger1Cls){t.trigger1Cls=t.triggerCls}for(w=1;B=t["trigger"+w+"Cls"];w++){u["trigger"+w]={cls:B,extraCls:"x-trigger-index-"+w,handler:"onTrigger"+w+"Click",compat4Mode:true,scope:t}}}for(A in u){if(u.hasOwnProperty(A)){v=u[A];v.field=t;v.id=A;if((r&&v.hideOnReadOnly!==false)||(z&&v.hidden!==false)){v.hidden=true}if(s&&(v.repeatClick!==false)){v.repeatClick=true}y=u[A]=Ext.form.trigger.Trigger.create(v);q.push(y)}}Ext.Array.sort(q,Ext.form.trigger.Trigger.weightComparator);return u},invokeTriggers:function(j,q){var o=this,p=o.getTriggers(),m,h;if(p){for(m in p){if(p.hasOwnProperty(m)){h=p[m];h[j].apply(h,q||[])}}}},getTrigger:function(b){return this.getTriggers()[b]},updateHideTrigger:function(b){this.invokeTriggers(b?"hide":"show")},updateEditable:function(d,c){this.setReadOnlyAttr(!d||this.readOnly)},setReadOnly:function(m){var p=this,q=p.getTriggers(),h=p.getHideTrigger(),j,o;m=!!m;Ext.form.field.Base.prototype.setReadOnly.call(this,m);if(p.rendered){p.setReadOnlyAttr(m||!p.editable)}if(q){for(o in q){j=q[o];if(j.hideOnReadOnly===true||(j.hideOnReadOnly!==false&&!h)){j.setVisible(!m)}}}},setReadOnlyAttr:function(h){var f=this,g="readonly",j=f.inputEl.dom;if(h){j.setAttribute(g,g)}else{j.removeAttribute(g)}if(f.ariaRole){f.ariaEl.dom.setAttribute("aria-readonly",!!h)}},processRawValue:function(o){var g=this,j=g.stripCharsRe,h,m;if(j){if(!j.global){h="g";h+=(j.ignoreCase)?"i":"";h+=(j.multiline)?"m":"";j=new RegExp(j.source,h)}m=o.replace(j,"");if(m!==o){g.setRawValue(m);o=m}}return o},onDisable:function(){Ext.form.field.Base.prototype.onDisable.call(this);if(Ext.isIE){this.inputEl.dom.unselectable="on"}},onEnable:function(){Ext.form.field.Base.prototype.onEnable.call(this);if(Ext.isIE){this.inputEl.dom.unselectable=""}},onKeyDown:function(b){this.fireEvent("keydown",this,b)},onKeyUp:function(b){this.fireEvent("keyup",this,b)},onKeyPress:function(b){this.fireEvent("keypress",this,b)},reset:function(){Ext.form.field.Base.prototype.reset.call(this);this.applyEmptyText()},applyEmptyText:function(){var d=this,f=d.emptyText,g;if(d.rendered&&f){g=d.getRawValue().length<1&&!d.hasFocus;if(Ext.supports.Placeholder){d.inputEl.dom.placeholder=f}else{if(g){d.setRawValue(f);d.valueContainsPlaceholder=true}}if(g){d.inputEl.addCls(d.emptyUICls)}else{d.inputEl.removeCls(d.emptyUICls)}d.autoSize()}},getEmptyText:function(){return this.emptyText},setEmptyText:function(m){var o=this,j=o.inputEl,g=j&&j.dom,h=m||"";if(m){o.emptyText=h;o.applyEmptyText()}else{if(g){if(Ext.supports.Placeholder){g.removeAttribute("placeholder")}else{if(g.value!==o.getRawValue()){g.value="";j.removeCls(o.emptyUICls)}}o.valueContainsPlaceholder=false}}o.emptyText=h;return o},afterFirstLayout:function(){Ext.form.field.Base.prototype.afterFirstLayout.call(this);if(Ext.isIE&&this.disabled){var b=this.inputEl;if(b){b.dom.unselectable="on"}}},toggleInvalidCls:function(d){var c=d?"addCls":"removeCls";Ext.form.field.Base.prototype.toggleInvalidCls.call(this);this.triggerWrap[c](this.triggerWrapInvalidCls);this.inputWrap[c](this.inputWrapInvalidCls)},beforeFocus:function(){var f=this,j=f.inputEl,g=f.emptyText,h;Ext.form.field.Base.prototype.beforeFocus.apply(this,arguments);if((g&&!Ext.supports.Placeholder)&&(j.dom.value===f.emptyText&&f.valueContainsPlaceholder)){f.setRawValue("");h=true;j.removeCls(f.emptyUICls);f.valueContainsPlaceholder=false}else{if(Ext.supports.Placeholder){j.removeCls(f.emptyUICls)}}},onFocus:function(c){var d=this;Ext.form.field.Base.prototype.onFocus.apply(this,arguments);if(d.selectOnFocus){d.inputEl.dom.select()}if(d.emptyText){d.autoSize()}d.addCls(d.fieldFocusCls);d.triggerWrap.addCls(d.triggerWrapFocusCls);d.inputWrap.addCls(d.inputWrapFocusCls);d.invokeTriggers("onFieldFocus",[c])},onBlur:function(c){var d=this;Ext.form.field.Base.prototype.onBlur.apply(this,arguments);d.removeCls(d.fieldFocusCls);d.triggerWrap.removeCls(d.triggerWrapFocusCls);d.inputWrap.removeCls(d.inputWrapFocusCls);d.invokeTriggers("onFieldBlur",[c])},completeEdit:function(b){Ext.form.field.Base.prototype.completeEdit.call(this,b);this.applyEmptyText()},filterKeys:function(c){if((c.ctrlKey&&!c.altKey)||c.isSpecialKey()){return}var d=String.fromCharCode(c.getCharCode());if(!this.maskRe.test(d)){c.stopEvent()}},getState:function(){return this.addPropertyToState(Ext.form.field.Base.prototype.getState.call(this),"value")},applyState:function(b){Ext.form.field.Base.prototype.applyState.apply(this,arguments);if(b.hasOwnProperty("value")){this.setValue(b.value)}},getRawValue:function(){var c=this,d=Ext.form.field.Base.prototype.getRawValue.call(this);if(d===c.emptyText&&c.valueContainsPlaceholder){d=""}return d},setValue:function(d){var f=this,g=f.inputEl;if(g&&f.emptyText&&!Ext.isEmpty(d)){g.removeCls(f.emptyUICls);f.valueContainsPlaceholder=false}Ext.form.field.Base.prototype.setValue.apply(this,arguments);f.applyEmptyText();return f},getErrors:function(q){q=arguments.length?(q==null?"":q):this.processRawValue(this.getRawValue());var v=this,s=Ext.form.field.Base.prototype.getErrors.call(this,q),B=v.validator,y=v.vtype,u=Ext.form.field.VTypes,t=v.regex,r=Ext.String.format,A,w,z;if(Ext.isFunction(B)){A=B.call(v,q);if(A!==true){s.push(A)}}w=v.allowOnlyWhitespace?q:Ext.String.trim(q);if(w.length<1||(q===v.emptyText&&v.valueContainsPlaceholder)){if(!v.allowBlank){s.push(v.blankText)}if(!v.validateBlank){return s}z=true}if(!z&&q.length<v.minLength){s.push(r(v.minLengthText,v.minLength))}if(q.length>v.maxLength){s.push(r(v.maxLengthText,v.maxLength))}if(y){if(!u[y](q,v)){s.push(v.vtypeText||u[y+"Text"])}}if(t&&!t.test(q)){s.push(v.regexText||v.invalidText)}return s},selectText:function(o,j){var p=this,r=p.getRawValue(),m=r.length,q=p.inputEl.dom,s;if(m>0){o=o===undefined?0:Math.min(o,m);j=j===undefined?m:Math.min(j,m);if(q.setSelectionRange){q.setSelectionRange(o,j)}else{if(q.createTextRange){s=q.createTextRange();s.moveStart("character",o);s.moveEnd("character",j-m);s.select()}}}},getGrowWidth:function(){return this.inputEl.dom.value},autoSize:function(){var s=this,j,o,q,p,m,r;if(s.grow&&s.rendered&&s.getSizeModel().width.auto){p=s.inputEl;j=s.getTriggers();q=0;r=Ext.util.Format.htmlEncode(s.getGrowWidth()||(s.hasFocus?"":s.emptyText)||"");r+=s.growAppend;for(o in j){q+=j[o].el.getWidth()}m=p.getTextWidth(r)+q+s.inputWrap.getBorderWidth("lr")+s.triggerWrap.getBorderWidth("lr");m=Math.min(Math.max(m,s.growMin),s.growMax);s.bodyEl.setWidth(m);s.updateLayout();s.fireEvent("autosize",s,m)}},onDestroy:function(){var b=this;b.invokeTriggers("destroy");Ext.destroy(b.triggerRepeater);Ext.form.field.Base.prototype.onDestroy.call(this)},onTriggerClick:Ext.emptyFn,privates:{getTdType:function(){return"textfield"}},deprecated:{5:{methods:{getTriggerWidth:function(){var d=this.getTriggers(),f=0,g;if(d&&this.rendered){for(g in d){if(d.hasOwnProperty(g)){f+=d[g].el.getWidth()}}}return f}}}}},0,["textfield"],["component","box","field","textfield"],{component:true,box:true,field:true,textfield:true},["widget.textfield"],0,[Ext.form.field,"Text",Ext.form,"TextField",Ext.form,"Text"],0));(Ext.cmd.derive("Ext.form.field.TextArea",Ext.form.field.Text,{alternateClassName:"Ext.form.TextArea",fieldSubTpl:['<textarea id="{id}" data-ref="inputEl" {inputAttrTpl}','<tpl if="name"> name="{name}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','<tpl if="maxLength !== undefined"> maxlength="{maxLength}"</tpl>','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {inputCls}" ','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>',' autocomplete="off">\n','<tpl if="value">{[Ext.util.Format.htmlEncode(values.value)]}</tpl>',"</textarea>",{disableFormats:true}],growMin:60,growMax:1000,growAppend:"\n-",enterIsSpecial:false,preventScrollbars:false,returnRe:/\r/g,inputCls:"x-form-textarea",extraFieldBodyCls:"x-form-textarea-body",ariaAttributes:{"aria-multiline":true},getSubTplData:function(f){var h=this,j=h.getFieldStyle(),g=Ext.form.field.Text.prototype.getSubTplData.apply(this,arguments);if(h.grow){if(h.preventScrollbars){g.fieldStyle=(j||"")+";overflow:hidden;height:"+h.growMin+"px"}}return g},afterRender:function(){var b=this;Ext.form.field.Text.prototype.afterRender.apply(this,arguments);b.needsMaxCheck=b.enforceMaxLength&&b.maxLength!==Number.MAX_VALUE&&!Ext.supports.TextAreaMaxLength;if(b.needsMaxCheck){b.inputEl.on("paste",b.onPaste,b)}},transformRawValue:function(b){return this.stripReturns(b)},getValue:function(){return this.stripReturns(Ext.form.field.Text.prototype.getValue.call(this))},valueToRaw:function(b){b=this.stripReturns(b);return Ext.form.field.Text.prototype.valueToRaw.call(this,b)},stripReturns:function(b){if(b&&typeof b==="string"){b=b.replace(this.returnRe,"")}return b},onPaste:function(){var b=this;if(!b.pasteTask){b.pasteTask=new Ext.util.DelayedTask(b.pasteCheck,b)}b.pasteTask.delay(1)},pasteCheck:function(){var d=this,g=d.getValue(),f=d.maxLength;if(g.length>f){g=g.substr(0,f);d.setValue(g)}},fireKey:function(h){var f=this,g=h.getKey(),j;if(h.isSpecialKey()&&(f.enterIsSpecial||(g!==h.ENTER||h.hasModifier()))){f.fireEvent("specialkey",f,h)}if(f.needsMaxCheck&&g!==h.BACKSPACE&&g!==h.DELETE&&!h.isNavKeyPress()&&!f.isCutCopyPasteSelectAll(h,g)){j=f.getValue();if(j.length>=f.maxLength){h.stopEvent()}}},isCutCopyPasteSelectAll:function(c,d){if(c.ctrlKey){return d===c.A||d===c.C||d===c.V||d===c.X}return false},autoSize:function(){var o=this,j,h,g,m;if(o.grow&&o.rendered&&o.getSizeModel().height.auto){j=o.inputEl;g=j.getWidth(true);m=Ext.util.Format.htmlEncode(j.dom.value)||"&#160;";m+=o.growAppend;m=m.replace(/\n/g,"<br/>");h=Ext.util.TextMetrics.measure(j,m,g).height+j.getPadding("tb")+o.inputWrap.getBorderWidth("tb")+o.triggerWrap.getBorderWidth("tb");h=Math.min(Math.max(h,o.growMin),o.growMax);o.bodyEl.setHeight(h);o.updateLayout();o.fireEvent("autosize",o,h)}},beforeDestroy:function(){var b=this.pasteTask;if(b){b.cancel();this.pasteTask=null}Ext.form.field.Text.prototype.beforeDestroy.call(this)}},0,["textarea","textareafield"],["component","box","field","textfield","textareafield","textarea"],{component:true,box:true,field:true,textfield:true,textareafield:true,textarea:true},["widget.textarea","widget.textareafield"],0,[Ext.form.field,"TextArea",Ext.form,"TextArea"],0));(Ext.cmd.derive("Ext.window.MessageBox",Ext.window.Window,{OK:1,YES:2,NO:4,CANCEL:8,OKCANCEL:9,YESNO:6,YESNOCANCEL:14,INFO:"x-message-box-info",WARNING:"x-message-box-warning",QUESTION:"x-message-box-question",ERROR:"x-message-box-error",hideMode:"offsets",closeAction:"hide",resizable:false,scrollable:true,title:"&#160;",defaultMinWidth:250,defaultMaxWidth:600,defaultMinHeight:110,defaultMaxHeight:500,minWidth:null,maxWidth:null,minHeight:null,maxHeight:null,constrain:true,cls:["x-message-box","x-hidden-offsets"],layout:{type:"vbox",align:"stretch"},shrinkWrapDock:true,defaultTextHeight:75,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:"OK",yes:"Yes",no:"No",cancel:"Cancel"},buttonIds:["ok","yes","no","cancel"],titleText:{confirm:"Confirm",prompt:"Prompt",wait:"Loading...",alert:"Attention"},baseIconCls:"x-message-box-icon",ariaRole:"alertdialog",makeButton:function(d){var c=this.buttonIds[d];return new Ext.button.Button({handler:this.btnCallback,itemId:c,scope:this,text:this.buttonText[c],minWidth:75})},btnCallback:function(h,o){var g=this,m,j;if(o&&o.type==="keydown"&&!o.isSpecialKey()){o.getTarget(null,null,true).on({keyup:function(a){g.btnCallback(h,a)},single:true});return}if(g.cfg.prompt||g.cfg.multiline){if(g.cfg.multiline){j=g.textArea}else{j=g.textField}m=j.getValue();j.reset()}g.hide();g.userCallback(h.itemId,m,g.cfg)},hide:function(){var c=this,d=c.cfg?c.cfg.cls:"";c.progressBar.reset();if(d){c.removeCls(d)}Ext.window.Window.prototype.hide.apply(this,arguments)},constructor:function(d){var c=this;Ext.window.Window.prototype.constructor.apply(this,arguments);c.minWidth=c.defaultMinWidth=(c.minWidth||c.defaultMinWidth);c.maxWidth=c.defaultMaxWidth=(c.maxWidth||c.defaultMaxWidth);c.minHeight=c.defaultMinHeight=(c.minHeight||c.defaultMinHeight);c.maxHeight=c.defaultMaxHeight=(c.maxHeight||c.defaultMaxHeight)},initComponent:function(h){var j=this,g=j.id,m,o;j.title=j.title||"&#160;";j.iconCls=j.iconCls||"";j.topContainer=new Ext.container.Container({layout:"hbox",padding:10,style:{overflow:"hidden"},items:[j.iconComponent=new Ext.Component({cls:j.baseIconCls}),j.promptContainer=new Ext.container.Container({flex:1,layout:{type:"vbox",align:"stretch"},items:[j.msg=new Ext.Component({id:g+"-msg",cls:j.baseCls+"-text"}),j.textField=new Ext.form.field.Text({id:g+"-textfield",enableKeyEvents:true,listeners:{keydown:j.onPromptKey,scope:j}}),j.textArea=new Ext.form.field.TextArea({id:g+"-textarea",height:75})]})]});j.progressBar=new Ext.ProgressBar({id:g+"-progressbar",margin:"0 10 10 10"});j.items=[j.topContainer,j.progressBar];j.msgButtons=[];for(m=0;m<4;m++){o=j.makeButton(m);j.msgButtons[o.itemId]=o;j.msgButtons.push(o)}j.bottomTb=new Ext.toolbar.Toolbar({id:g+"-toolbar",ui:"footer",dock:"bottom",layout:{pack:"center"},items:[j.msgButtons[0],j.msgButtons[1],j.msgButtons[2],j.msgButtons[3]]});j.dockedItems=[j.bottomTb];j.on("close",j.onClose,j);Ext.window.Window.prototype.initComponent.call(this)},onClose:function(){var b=this.header.child("[type=close]");if(b){b.itemId="cancel";this.btnCallback(b);delete b.itemId}},onPromptKey:function(f,g){var d=this;if(g.keyCode===g.RETURN||g.keyCode===10){if(d.msgButtons.ok.isVisible()){d.msgButtons.ok.handler.call(d,d.msgButtons.ok)}else{if(d.msgButtons.yes.isVisible()){d.msgButtons.yes.handler.call(d,d.msgButtons.yes)}}}},reconfigure:function(R){var C=this,F=0,O=true,B=C.buttonText,P=C.resizer,H=C.header,D=H&&!H.isHeader,Q=R&&(R.message||R.msg),A,J,M,G,E,N,S,L,I,K,T;C.updateButtonText();C.cfg=R=R||{};K=R.wait;if(R.width){J=R.width}if(R.height){M=R.height}C.minWidth=R.minWidth||C.defaultMinWidth;C.maxWidth=R.maxWidth||C.defaultMaxWidth;C.minHeight=R.minHeight||C.defaultMinHeight;C.maxHeight=R.maxHeight||C.defaultMaxHeight;if(P){A=P.resizeTracker;P.minWidth=A.minWidth=C.minWidth;P.maxWidth=A.maxWidth=C.maxWidth;P.minHeight=A.minHeight=C.minHeight;P.maxHeight=A.maxHeight=C.maxHeight}delete C.defaultFocus;if(R.defaultFocus){C.defaultFocus=R.defaultFocus}C.animateTarget=R.animateTarget||undefined;C.modal=R.modal!==false;C.setTitle(R.title||(D&&H.title)||C.title);C.setIconCls(R.iconCls||(D&&H.iconCls)||C.iconCls);if(Ext.isObject(R.buttons)){C.buttonText=R.buttons;F=0}else{C.buttonText=R.buttonText||C.buttonText;F=Ext.isNumber(R.buttons)?R.buttons:0}F=F|C.updateButtonText();C.buttonText=B;Ext.suspendLayouts();C.width=C.height=null;if(J||M){if(J){C.setWidth(J)}if(M){C.setHeight(M)}}C.hidden=false;if(!C.rendered){C.render(Ext.getBody())}C.closable=R.closable!==false&&!K;H=C.header;if(H){T=H.child("[type=close]");if(T){T.setVisible(C.closable)}if(!R.title&&!C.closable&&!R.iconCls){H.hide()}else{H.show()}}C.liveDrag=!R.proxyDrag;C.userCallback=Ext.Function.bindCallback(R.callback||R.fn||Ext.emptyFn,R.scope||Ext.global);C.setIcon(R.icon);S=C.msg;if(Q){S.setHtml(Q);S.show()}else{S.hide()}E=C.textArea;N=C.textField;if(R.prompt||R.multiline){C.multiline=R.multiline;if(R.multiline){E.setValue(R.value);E.setHeight(R.defaultTextHeight||C.defaultTextHeight);E.show();N.hide();C.defaultFocus=E}else{N.setValue(R.value);E.hide();N.show();C.defaultFocus=N}}else{E.hide();N.hide()}L=C.progressBar;if(R.progress||K){L.show();C.updateProgress(0,R.progressText);if(K){L.wait(K===true?R.waitConfig:K)}}else{L.hide()}I=C.msgButtons;for(G=0;G<4;G++){if(F&Math.pow(2,G)){if(!C.defaultFocus){C.defaultFocus=I[G]}I[G].show();O=false}else{I[G].hide()}}if(O){C.bottomTb.hide()}else{C.bottomTb.show()}Ext.resumeLayouts(true)},updateButtonText:function(){var m=this,o=m.buttonText,g=0,j,h;for(j in o){if(o.hasOwnProperty(j)){h=m.msgButtons[j];if(h){if(m.cfg&&m.cfg.buttonText){g=g|Math.pow(2,Ext.Array.indexOf(m.buttonIds,j))}if(h.text!==o[j]){h.setText(o[j])}}}}return g},show:function(f){var g=this,d;f=f||{};if(Ext.Component.layoutSuspendCount){Ext.on({resumelayouts:function(){g.show(f)},single:true});return g}g.reconfigure(f);if(f.cls){g.addCls(f.cls)}d=g.query("textfield:not([hidden]),textarea:not([hidden]),button:not([hidden])");g.preventFocusOnActivate=!d.length;g.hidden=true;Ext.window.Window.prototype.show.call(this);return g},onShow:function(){Ext.window.Window.prototype.onShow.apply(this,arguments);this.center()},updateText:function(b){this.msg.setHtml(b)},setIcon:function(p,q,j){var o=this,m=o.iconComponent,h=o.messageIconCls;if(h){m.removeCls(h)}if(p){m.show();if(q||j){m.setSize(q||m.getWidth(),j||m.getHeight())}m.addCls("x-dlg-icon");m.addCls(o.messageIconCls=p)}else{m.removeCls("x-dlg-icon");m.hide()}return o},updateProgress:function(g,f,d){this.progressBar.updateProgress(g,f);if(d){this.updateText(d)}return this},onEsc:function(){if(this.closable!==false){Ext.window.Window.prototype.onEsc.apply(this,arguments)}},confirm:function(g,h,j,f){if(Ext.isString(g)){g={title:g,icon:this.QUESTION,message:h,buttons:this.YESNO,callback:j,scope:f}}return this.show(g)},prompt:function(m,p,q,h,j,o){if(Ext.isString(m)){m={prompt:true,title:m,minWidth:this.minPromptWidth,message:p,buttons:this.OKCANCEL,callback:q,scope:h,multiline:j,value:o}}return this.show(m)},wait:function(d,g,f){if(Ext.isString(d)){d={title:g,message:d,closable:false,wait:true,modal:true,minWidth:this.minProgressWidth,waitConfig:f}}return this.show(d)},alert:function(h,j,f,g){if(Ext.isString(h)){h={title:h,message:j,buttons:this.OK,fn:f,scope:g,minWidth:this.minWidth}}return this.show(h)},progress:function(g,d,f){if(Ext.isString(g)){g={title:g,message:d,progress:true,progressText:f}}return this.show(g)}},1,["messagebox"],["component","box","container","panel","window","messagebox"],{component:true,box:true,container:true,panel:true,window:true,messagebox:true},["widget.messagebox"],0,[Ext.window,"MessageBox"],function(b){Ext.onInternalReady(function(){Ext.MessageBox=Ext.Msg=new b()})}));(Ext.cmd.derive("Ext.form.Basic",Ext.util.Observable,{alternateClassName:"Ext.form.BasicForm",taskDelay:10,constructor:function(f,j){var h=this,g;h.owner=f;h.fieldMonitors={validitychange:h.checkValidityDelay,enable:h.checkValidityDelay,disable:h.checkValidityDelay,dirtychange:h.checkDirtyDelay,errorchange:h.checkErrorDelay,scope:h};h.checkValidityTask=new Ext.util.DelayedTask(h.checkValidity,h);h.checkDirtyTask=new Ext.util.DelayedTask(h.checkDirty,h);h.checkErrorTask=new Ext.util.DelayedTask(h.checkError,h);h.monitor=new Ext.container.Monitor({selector:"[isFormField]:not([excludeForm])",scope:h,addHandler:h.onFieldAdd,removeHandler:h.onFieldRemove,invalidateHandler:h.onMonitorInvalidate});h.monitor.bind(f);Ext.apply(h,j);if(Ext.isString(h.paramOrder)){h.paramOrder=h.paramOrder.split(/[\s,|]/)}g=h.reader;if(g&&!g.isReader){if(typeof g==="string"){g={type:g}}h.reader=Ext.createByAlias("reader."+g.type,g)}g=h.errorReader;if(g&&!g.isReader){if(typeof g==="string"){g={type:g}}h.errorReader=Ext.createByAlias("reader."+g.type,g)}Ext.util.Observable.prototype.constructor.call(this)},initialize:function(){this.initialized=true;this.onValidityChange(!this.hasInvalidField())},timeout:30,paramsAsHash:false,waitTitle:"Please Wait...",trackResetOnLoad:false,wasDirty:false,destroy:function(){var c=this,d=c.monitor;if(d){d.unbind();c.monitor=null}c.clearListeners();c.checkValidityTask.cancel();c.checkDirtyTask.cancel();c.checkErrorTask.cancel();c.checkValidityTask=c.checkDirtyTask=c.checkErrorTask=null;Ext.util.Observable.prototype.destroy.call(this)},onFieldAdd:function(b){b.on(this.fieldMonitors);this.onMonitorInvalidate()},onFieldRemove:function(b){b.un(this.fieldMonitors);this.onMonitorInvalidate()},onMonitorInvalidate:function(){if(this.initialized){this.checkValidityDelay()}},getFields:function(){return this.monitor.getItems()},getBoundItems:function(){var b=this._boundItems;if(!b||b.getCount()===0){b=this._boundItems=new Ext.util.MixedCollection();b.addAll(this.owner.query("[formBind]"))}return b},hasInvalidField:function(){return !!this.getFields().findBy(function(g){var f=g.preventMark,d;g.preventMark=true;d=g.isValid();g.preventMark=f;return !d})},isValid:function(){var d=this,c;Ext.suspendLayouts();c=d.getFields().filterBy(function(a){return !a.validate()});Ext.resumeLayouts(true);return c.length<1},checkValidity:function(){var c=this,d;if(c.destroyed){return}d=!c.hasInvalidField();if(d!==c.wasValid){c.onValidityChange(d);c.fireEvent("validitychange",c,d);c.wasValid=d}},checkValidityDelay:function(){var b=this.taskDelay;if(b){this.checkValidityTask.delay(b)}else{this.checkValidity()}},checkError:function(){this.fireEvent("errorchange",this)},checkErrorDelay:function(){var b=this.taskDelay;if(b){this.checkErrorTask.delay(b)}else{this.checkError()}},onValidityChange:function(m){var p=this.getBoundItems(),h,q,j,o;if(p){h=p.items;j=h.length;for(q=0;q<j;q++){o=h[q];if(o.disabled===m){o.setDisabled(!m)}}}},isDirty:function(){return !!this.getFields().findBy(function(b){return b.isDirty()})},checkDirtyDelay:function(){var b=this.taskDelay;if(b){this.checkDirtyTask.delay(b)}else{this.checkDirty()}},checkDirty:function(){var c=this,d;if(c.destroyed){return}d=this.isDirty();if(d!==this.wasDirty){this.fireEvent("dirtychange",this,d);this.wasDirty=d}},hasUpload:function(){return !!this.getFields().findBy(function(b){return b.isFileUpload()})},doAction:function(c,d){if(Ext.isString(c)){c=Ext.ClassManager.instantiateByAlias("formaction."+c,Ext.apply({},d,{form:this}))}if(this.fireEvent("beforeaction",this,c)!==false){this.beforeAction(c);Ext.defer(c.run,100,c)}return this},submit:function(f){f=f||{};var d=this,g;if(f.standardSubmit||d.standardSubmit){g="standardsubmit"}else{g=d.api?"directsubmit":"submit"}return d.doAction(g,f)},load:function(b){return this.doAction(this.api?"directload":"load",b)},updateRecord:function(s){s=s||this._record;if(!s){return this}var j=s.self.fields,r=this.getFieldValues(),o={},p=0,m=j.length,q;for(;p<m;++p){q=j[p].name;if(r.hasOwnProperty(q)){o[q]=r[q]}}s.beginEdit();s.set(o);s.endEdit();return this},loadRecord:function(b){this._record=b;return this.setValues(b.getData())},getRecord:function(){return this._record},beforeAction:function(u){var r=this,v=u.waitMsg,f="x-mask-loading",t=r.getFields().items,s,p=t.length,q,w;for(s=0;s<p;s++){q=t[s];if(q.isFormField&&q.syncValue){q.syncValue()}}if(v){w=r.waitMsgTarget;if(w===true){r.owner.el.mask(v,f)}else{if(w){w=r.waitMsgTarget=Ext.get(w);w.mask(v,f)}else{r.floatingAncestor=r.owner.up("[floating]");if(r.floatingAncestor){r.savePreventFocusOnActivate=r.floatingAncestor.preventFocusOnActivate;r.floatingAncestor.preventFocusOnActivate=true}Ext.MessageBox.wait(v,u.waitTitle||r.waitTitle)}}}},afterAction:function(o,j){var h=this;if(o.waitMsg){var g=Ext.MessageBox,m=h.waitMsgTarget;if(m===true){h.owner.el.unmask()}else{if(m){m.unmask()}else{g.hide()}}}if(h.floatingAncestor){h.floatingAncestor.preventFocusOnActivate=h.savePreventFocusOnActivate}if(j){if(o.reset){h.reset()}Ext.callback(o.success,o.scope||o,[h,o]);h.fireEvent("actioncomplete",h,o)}else{Ext.callback(o.failure,o.scope||o,[h,o]);h.fireEvent("actionfailed",h,o)}},findField:function(b){return this.getFields().findBy(function(a){return a.id===b||a.name===b||a.dataIndex===b})},markInvalid:function(p){var t=this,r,o,m,s,u;function q(a,b){var c=t.findField(a);if(c){c.markInvalid(b)}}if(Ext.isArray(p)){o=p.length;for(r=0;r<o;r++){m=p[r];q(m.id||m.field,m.msg||m.message)}}else{if(p instanceof Ext.data.ErrorCollection){o=p.items.length;for(r=0;r<o;r++){m=p.items[r];q(m.field,m.message)}}else{for(u in p){if(p.hasOwnProperty(u)){s=p[u];q(u,s,p)}}}}return this},setValues:function(h){var p=this,j,q,m;function o(c,a){var b=p.findField(c);if(b){b.setValue(a);if(p.trackResetOnLoad){b.resetOriginalValue()}}}Ext.suspendLayouts();if(Ext.isArray(h)){q=h.length;for(j=0;j<q;j++){m=h[j];o(m.id,m.value)}}else{Ext.iterate(h,o)}Ext.resumeLayouts(true);return this},getValues:function(y,w,I,f,E){var J={},A=this.getFields().items,H=A.length,B=Ext.isArray,v,C,D,F,G,z;for(z=0;z<H;z++){v=A[z];if(!w||v.isDirty()){C=v[f?"getModelData":"getSubmitData"](I,E);if(Ext.isObject(C)){for(G in C){if(C.hasOwnProperty(G)){D=C[G];if(I&&D===""){D=v.emptyText||""}if(!v.isRadio){if(J.hasOwnProperty(G)){F=J[G];if(!B(F)){F=J[G]=[F]}if(B(D)){J[G]=F.concat(D)}else{F.push(D)}}else{J[G]=D}}else{J[G]=J[G]||D}}}}}}if(y){J=Ext.Object.toQueryString(J)}return J},getFieldValues:function(b){return this.getValues(false,b,false,true)},clearInvalid:function(){Ext.suspendLayouts();var f=this,g=f.getFields().items,j,h=g.length;for(j=0;j<h;j++){g[j].clearInvalid()}Ext.resumeLayouts(true);return f},reset:function(f){Ext.suspendLayouts();var o=this,h=o.getFields().items,m,j=h.length;for(m=0;m<j;m++){h[m].reset()}Ext.resumeLayouts(true);if(f===true){delete o._record}return o},applyToFields:function(j){var g=this.getFields().items,f,h=g.length;for(f=0;f<h;f++){Ext.apply(g[f],j)}return this},applyIfToFields:function(j){var g=this.getFields().items,f,h=g.length;for(f=0;f<h;f++){Ext.applyIf(g[f],j)}return this}},1,0,0,0,0,0,[Ext.form,"Basic",Ext.form,"BasicForm"],0));(Ext.cmd.derive("Ext.form.FieldAncestor",Ext.Mixin,{mixinConfig:{id:"fieldAncestor",after:{initInheritedState:"initFieldInheritedState"},before:{destroy:"onBeforeDestroy"}},initFieldAncestor:function(){var b=this;b.monitor=new Ext.container.Monitor({scope:b,selector:"[isFormField]:not([excludeForm])",addHandler:b.onChildFieldAdd,removeHandler:b.onChildFieldRemove});b.initFieldDefaults()},initMonitor:function(){this.monitor.bind(this)},initFieldInheritedState:function(d){var f=d.fieldDefaults,g=this.fieldDefaults;if(g){if(f){d.fieldDefaults=Ext.apply(Ext.Object.chain(f),g)}else{d.fieldDefaults=g}}},onChildFieldAdd:function(c){var d=this;d.mon(c,"errorchange",d.handleFieldErrorChange,d);d.mon(c,"validitychange",d.handleFieldValidityChange,d)},onChildFieldRemove:function(c){var d=this;d.mun(c,"errorchange",d.handleFieldErrorChange,d);d.mun(c,"validitychange",d.handleFieldValidityChange,d)},initFieldDefaults:function(){if(!this.fieldDefaults){this.fieldDefaults={}}},handleFieldValidityChange:function(g,d){var f=this;if(g!==f){f.fireEvent("fieldvaliditychange",f,g,d);f.onFieldValidityChange(g,d)}},handleFieldErrorChange:function(d,f){var g=this;if(d!==g){g.fireEvent("fielderrorchange",g,d,f);g.onFieldErrorChange(d,f)}},onFieldValidityChange:Ext.emptyFn,onFieldErrorChange:Ext.emptyFn,onBeforeDestroy:function(){this.monitor.unbind()}},0,0,0,0,0,0,[Ext.form,"FieldAncestor"],0));(Ext.cmd.derive("Ext.layout.component.field.FieldContainer",Ext.layout.component.Auto,{type:"fieldcontainer",waitForOuterHeightInDom:true,waitForOuterWidthInDom:true,beginLayout:function(c){var d=this.owner.containerEl;Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);c.hasRawContent=true;d.setStyle("width","");d.setStyle("height","");c.containerElContext=c.getEl("containerEl")},measureContentHeight:function(b){return b.hasDomProp("containerLayoutDone")?Ext.layout.component.Auto.prototype.measureContentHeight.apply(this,arguments):NaN},measureContentWidth:function(b){return b.hasDomProp("containerLayoutDone")?Ext.layout.component.Auto.prototype.measureContentWidth.apply(this,arguments):NaN},publishInnerHeight:function(g,d){var f=this.owner;if(f.labelAlign==="top"&&f.hasVisibleLabel()){d-=f.labelEl.getHeight()}if(f.msgTarget==="under"&&f.hasActiveError()){d-=f.errorWrapEl.getHeight()}d-=f.bodyEl.getPadding("tb");g.containerElContext.setHeight(d)},publishInnerWidth:function(g,d){var f=this.owner;if(f.labelAlign!=="top"&&f.hasVisibleLabel()){d-=(f.labelWidth+(f.labelPad||0))}if(f.msgTarget==="side"&&f.hasActiveError()){d-=f.errorWrapEl.getWidth()}d-=f.bodyEl.getPadding("lr");g.containerElContext.setWidth(d)}},0,0,0,0,["layout.fieldcontainer"],0,[Ext.layout.component.field,"FieldContainer"],0));(Ext.cmd.derive("Ext.form.FieldContainer",Ext.container.Container,{componentLayout:"fieldcontainer",componentCls:"x-form-fieldcontainer",shrinkWrap:true,autoEl:{tag:"div",role:"presentation"},childEls:["containerEl"],combineLabels:false,labelConnector:", ",combineErrors:false,maskOnDisable:false,invalidCls:"",fieldSubTpl:['<div id="{id}-containerEl" data-ref="containerEl" class="{containerElCls}"','<tpl if="ariaAttributes">','<tpl foreach="ariaAttributes"> {$}="{.}"</tpl>',"<tpl else>",' role="presentation"',"</tpl>",">","{%this.renderContainer(out,values)%}","</div>"],initComponent:function(){var b=this;b.initLabelable();b.initFieldAncestor();Ext.container.Container.prototype.initComponent.call(this);b.initMonitor()},onAdd:function(d){var c=this;if(d.isLabelable&&Ext.isGecko&&Ext.firefoxVersion<37&&c.layout.type==="absolute"&&!c.hideLabel&&c.labelAlign!=="top"){d.x+=(c.labelWidth+c.labelPad)}Ext.container.Container.prototype.onAdd.apply(this,arguments);if(d.isLabelable&&c.combineLabels){d.oldHideLabel=d.hideLabel;d.hideLabel=true}c.updateLabel()},onRemove:function(f,d){var g=this;Ext.container.Container.prototype.onRemove.apply(this,arguments);if(!d){if(f.isLabelable&&g.combineLabels){f.hideLabel=f.oldHideLabel}g.updateLabel()}},initRenderData:function(){var d=this,c=Ext.container.Container.prototype.initRenderData.call(this);c.containerElCls=d.containerElCls;c=Ext.applyIf(c,d.getLabelableRenderData());c.tipAnchorTarget=d.id+"-containerEl";return c},getFieldLabel:function(){var b=this.fieldLabel||"";if(!b&&this.combineLabels){b=Ext.Array.map(this.query("[isFieldLabelable]"),function(a){return a.getFieldLabel()}).join(this.labelConnector)}return b},getSubTplData:function(){var b=this.initRenderData();Ext.apply(b,this.subTplData);return b},getSubTplMarkup:function(f){var h=this,g=h.getTpl("fieldSubTpl"),j;if(!g.renderContent){h.setupRenderTpl(g)}j=g.apply(h.getSubTplData(f));return j},updateLabel:function(){var c=this,d=c.labelEl;if(d){c.setFieldLabel(c.getFieldLabel())}},onFieldErrorChange:function(){if(this.combineErrors){var j=this,h=j.getActiveError(),f=Ext.Array.filter(j.query("[isFormField]"),function(a){return a.hasActiveError()}),g=j.getCombinedErrors(f);if(g){j.setActiveErrors(g)}else{j.unsetActiveError()}if(h!==j.getActiveError()){j.updateLayout()}}},getCombinedErrors:function(v){var f=[],y,a=v.length,s,w,r,z,u,t;for(y=0;y<a;y++){s=v[y];w=s.getActiveErrors();z=w.length;for(r=0;r<z;r++){u=w[r];t=s.getFieldLabel();f.push((t?t+": ":"")+u)}}return f},privates:{applyTargetCls:function(c){var d=this.containerElCls;this.containerElCls=d?d+" "+c:c},getTargetEl:function(){return this.containerEl},initRenderTpl:function(){var b=this;if(!b.hasOwnProperty("renderTpl")){b.renderTpl=b.getTpl("labelableRenderTpl")}return Ext.container.Container.prototype.initRenderTpl.call(this)}}},0,["fieldcontainer"],["component","box","container","fieldcontainer"],{component:true,box:true,container:true,fieldcontainer:true},["widget.fieldcontainer"],[["labelable",Ext.form.Labelable],["fieldAncestor",Ext.form.FieldAncestor]],[Ext.form,"FieldContainer"],0));(Ext.cmd.derive("Ext.form.CheckboxManager",Ext.util.MixedCollection,{singleton:true,getByName:function(d,c){return this.filterBy(function(a){return a.name===d&&a.getFormId()===c})}},0,0,0,0,0,0,[Ext.form,"CheckboxManager"],0));(Ext.cmd.derive("Ext.form.field.Checkbox",Ext.form.field.Base,{alternateClassName:"Ext.form.Checkbox",stretchInputElFixed:false,childEls:["boxLabelEl","innerWrapEl","displayEl"],fieldSubTpl:['<div id="{cmpId}-innerWrapEl" data-ref="innerWrapEl" role="presentation"',' class="{wrapInnerCls}">','<tpl if="labelAlignedBefore">',"{beforeBoxLabelTpl}",'<label id="{cmpId}-boxLabelEl" data-ref="boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} ','{boxLabelCls}-{ui} {boxLabelCls}-{boxLabelAlign} {noBoxLabelCls} {childElCls}" for="{id}">',"{beforeBoxLabelTextTpl}","{boxLabel}","{afterBoxLabelTextTpl}","</label>","{afterBoxLabelTpl}","</tpl>",'<input type="button" id="{id}" name="{inputName}" data-ref="inputEl" {inputAttrTpl}','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{checkboxCls} {clipCls}" autocomplete="off" hidefocus="true" ','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>',"/>",'<span id="{cmpId}-displayEl" data-ref="displayEl" class="{fieldCls} {typeCls} ','{typeCls}-{ui} {inputCls} {inputCls}-{ui} {childElCls} {afterLabelCls}"></span>','<tpl if="!labelAlignedBefore">',"{beforeBoxLabelTpl}",'<label id="{cmpId}-boxLabelEl" data-ref="boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} ','{boxLabelCls}-{ui} {boxLabelCls}-{boxLabelAlign} {noBoxLabelCls} {childElCls}" for="{id}">',"{beforeBoxLabelTextTpl}","{boxLabel}","{afterBoxLabelTextTpl}","</label>","{afterBoxLabelTpl}","</tpl>","</div>",{disableFormats:true,compiled:true}],publishes:{checked:1},subTplInsertions:["beforeBoxLabelTpl","afterBoxLabelTpl","beforeBoxLabelTextTpl","afterBoxLabelTextTpl","boxLabelAttrTpl","inputAttrTpl"],isCheckbox:true,focusCls:"form-checkbox-focus",fieldBodyCls:"x-form-cb-wrap",checked:false,checkedCls:"x-form-cb-checked",boxLabelCls:"x-form-cb-label",boxLabelAlign:"after",afterLabelCls:"x-form-cb-after",wrapInnerCls:"x-form-cb-wrap-inner",noBoxLabelCls:"x-form-cb-no-box-label",inputValue:"on",checkChangeEvents:[],inputType:"checkbox",isTextInput:false,ariaRole:"checkbox",onRe:/^on$/i,inputCls:"x-form-cb",_checkboxCls:"x-form-cb-input",_clipCls:"x-hidden-clip",initComponent:function(){var d=this,c=d.value;if(c!==undefined){d.checked=d.isChecked(c,d.inputValue)}Ext.form.field.Base.prototype.initComponent.call(this);d.getManager().add(d)},initDefaultName:Ext.emptyFn,initValue:function(){var c=this,d=!!c.checked;c.originalValue=c.lastValue=d;c.setValue(d)},getElConfig:function(){var b=this;if(b.isChecked(b.rawValue,b.inputValue)){b.addCls(b.checkedCls)}return Ext.form.field.Base.prototype.getElConfig.call(this)},getSubTplData:function(j){var r=this,s=r.boxLabel,o=r.boxLabelAlign,p=o==="before",q,m;q=Ext.apply(Ext.form.field.Base.prototype.getSubTplData.call(this,j),{clipCls:r._clipCls,checkboxCls:r._checkboxCls,disabled:r.readOnly||r.disabled,wrapInnerCls:r.wrapInnerCls,boxLabel:s,boxLabelCls:r.boxLabelCls,boxLabelAlign:o,labelAlignedBefore:p,afterLabelCls:p?r.afterLabelCls:"",noBoxLabelCls:!s?r.noBoxLabelCls:"",inputName:r.name||r.id});m=q.inputElAriaAttributes;if(m){m["aria-checked"]=!!r.checked;m["aria-labelledby"]=r.id+"-boxLabelEl"}return q},initEvents:function(){var b=this;Ext.form.field.Base.prototype.initEvents.call(this);b.inputEl.on({click:"onBoxClick",scope:b,translate:false});b.displayEl.on({click:"onBoxClick",mousedown:"_onDisplayElMouseDown",scope:b})},setBoxLabel:function(d){var c=this;c.boxLabel=d;if(c.rendered){c.boxLabelEl.setHtml(d);c.boxLabelEl[d?"removeCls":"addCls"](c.noBoxLabelCls);c.updateLayout()}},onBoxClick:function(){var b=this;if(!b.disabled&&!b.readOnly){b.setValue(!b.checked)}},getRawValue:function(){return this.checked},getValue:function(){return this.checked},getSubmitValue:function(){var d=this.uncheckedValue,c=Ext.isDefined(d)?d:null;return this.checked?this.inputValue:c},isChecked:function(c,d){return(c===true||c==="true"||c==="1"||c===1||(((Ext.isString(c)||Ext.isNumber(c))&&d)?c==d:this.onRe.test(c)))},setRawValue:function(o){var g=this,m=g.inputEl,j=g.displayEl,h=g.isChecked(o,g.inputValue);if(m){g[h?"addCls":"removeCls"](g.checkedCls);if(g.ariaRole){g.ariaEl.dom.setAttribute("aria-checked",h)}}if(Ext.isIE8&&j&&h!==g.lastValue){j.repaint()}g.checked=g.rawValue=h;if(!g.duringSetValue){g.lastValue=h}return h},setValue:function(m){var o=this,q,h,j,p;if(Ext.isArray(m)){q=o.getManager().getByName(o.name,o.getFormId()).items;j=q.length;for(h=0;h<j;++h){p=q[h];p.setValue(Ext.Array.contains(m,p.inputValue))}}else{o.duringSetValue=true;Ext.form.field.Base.prototype.setValue.apply(this,arguments);delete o.duringSetValue}return o},valueToRaw:Ext.identityFn,onChange:function(f,g){var h=this,j=h.handler;if(j){Ext.callback(j,h.scope,[h,f],0,h)}Ext.form.field.Base.prototype.onChange.apply(this,arguments);if(h.reference&&h.publishState){h.publishState("checked",f)}},resetOriginalValue:function(h){var m=this,p,o,j,q;if(!h){p=m.getManager().getByName(m.name,m.getFormId()).items;j=p.length;for(q=0;q<j;++q){o=p[q];if(o!==m){p[q].resetOriginalValue(true)}}}Ext.form.field.Base.prototype.resetOriginalValue.call(this)},beforeDestroy:function(){Ext.form.field.Base.prototype.beforeDestroy.call(this);this.getManager().removeAtKey(this.id)},getManager:function(){return Ext.form.CheckboxManager},onEnable:function(){var d=this,c=d.inputEl;Ext.form.field.Base.prototype.onEnable.call(this);if(c){c.dom.disabled=d.readOnly}},setReadOnly:function(g){var f=this,d=f.inputEl;if(d){d.dom.disabled=!!g||f.disabled}Ext.form.field.Base.prototype.setReadOnly.apply(this,arguments)},getFormId:function(){var c=this,d;if(!c.formId){d=c.up("form");if(d){c.formId=d.id}}return c.formId},getFocusClsEl:function(){return this.displayEl},privates:{_onDisplayElMouseDown:function(b){b.preventDefault();this.inputEl.focus(1)}}},0,["checkbox","checkboxfield"],["component","box","field","checkboxfield","checkbox"],{component:true,box:true,field:true,checkboxfield:true,checkbox:true},["widget.checkbox","widget.checkboxfield"],0,[Ext.form.field,"Checkbox",Ext.form,"Checkbox"],0));Ext.define("Ext.theme.triton.form.field.Checkbox",{override:"Ext.form.field.Checkbox",compatibility:Ext.isIE8,initComponent:function(){(arguments.callee.$previous||Ext.form.field.Base.prototype.initComponent).call(this);Ext.on({show:"onGlobalShow",scope:this})},onFocus:function(c){var d;(arguments.callee.$previous||Ext.form.field.Base.prototype.onFocus).call(this,c);d=this.getFocusClsEl();if(d){d.syncRepaint()}},onBlur:function(c){var d;(arguments.callee.$previous||Ext.form.field.Base.prototype.onBlur).call(this,c);d=this.getFocusClsEl();if(d){d.syncRepaint()}},onGlobalShow:function(b){if(b.isAncestor(this)){this.getFocusClsEl().syncRepaint()}}});(Ext.cmd.derive("Ext.form.Label",Ext.Component,{autoEl:"label",maskOnDisable:false,getElConfig:function(){var b=this;b.html=b.text?Ext.util.Format.htmlEncode(b.text):(b.html||"");return Ext.apply(Ext.Component.prototype.getElConfig.call(this),{htmlFor:b.forId||""})},setText:function(g,d){var f=this;d=d!==false;if(d){f.text=g;delete f.html}else{f.html=g;delete f.text}if(f.rendered){f.el.dom.innerHTML=d!==false?Ext.util.Format.htmlEncode(g):g;f.updateLayout()}return f}},0,["label"],["component","box","label"],{component:true,box:true,label:true},["widget.label"],0,[Ext.form,"Label"],0));(Ext.cmd.derive("Ext.form.Panel",Ext.panel.Panel,{alternateClassName:["Ext.FormPanel","Ext.form.FormPanel"],layout:"anchor",bodyAriaRole:"form",basicFormConfigs:["api","baseParams","errorReader","jsonSubmit","method","paramOrder","paramsAsHash","reader","standardSubmit","timeout","trackResetOnLoad","url","waitMsgTarget","waitTitle"],initComponent:function(){var b=this;if(b.frame){b.border=false}b.initFieldAncestor();Ext.panel.Panel.prototype.initComponent.call(this);b.relayEvents(b.form,["beforeaction","actionfailed","actioncomplete","validitychange","dirtychange"]);if(b.pollForChanges){b.startPolling(b.pollInterval||500)}},initItems:function(){Ext.panel.Panel.prototype.initItems.call(this);this.initMonitor();this.form=this.createForm()},afterFirstLayout:function(){Ext.panel.Panel.prototype.afterFirstLayout.apply(this,arguments);this.form.initialize()},createForm:function(){var g={},m=this.basicFormConfigs,h=m.length,o=0,j;for(;o<h;++o){j=m[o];g[j]=this[j]}return new Ext.form.Basic(this,g)},getForm:function(){return this.form},loadRecord:function(b){return this.getForm().loadRecord(b)},getRecord:function(){return this.getForm().getRecord()},updateRecord:function(b){return this.getForm().updateRecord(b)},getValues:function(h,f,j,g){return this.getForm().getValues(h,f,j,g)},isDirty:function(){return this.form.isDirty()},isValid:function(){return this.form.isValid()},reset:function(){this.form.reset()},hasInvalidField:function(){return this.form.hasInvalidField()},beforeDestroy:function(){this.stopPolling();this.form.destroy();Ext.panel.Panel.prototype.beforeDestroy.call(this)},load:function(b){this.form.load(b)},submit:function(b){this.form.submit(b)},startPolling:function(c){this.stopPolling();var d=new Ext.util.TaskRunner(c);d.start({interval:0,run:this.checkChange,scope:this});this.pollTask=d},stopPolling:function(){var b=this.pollTask;if(b){b.stopAll();delete this.pollTask}},checkChange:function(){var f=this.form.getFields().items,d,g=f.length;for(d=0;d<g;d++){f[d].checkChange()}}},0,["form"],["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},["widget.form"],[["fieldAncestor",Ext.form.FieldAncestor]],[Ext.form,"Panel",Ext,"FormPanel",Ext.form,"FormPanel"],0));(Ext.cmd.derive("Ext.form.field.Picker",Ext.form.field.Text,{alternateClassName:"Ext.form.Picker",config:{triggers:{picker:{handler:"onTriggerClick",scope:"this"}}},renderConfig:{editable:true},isPickerField:true,matchFieldWidth:true,pickerAlign:"tl-bl?",openCls:"x-pickerfield-open",isExpanded:false,applyTriggers:function(d){var g=this,f=d.picker;if(!f.cls){f.cls=g.triggerCls}return Ext.form.field.Text.prototype.applyTriggers.call(this,d)},getSubTplData:function(f){var j=this,h,g;h=Ext.form.field.Text.prototype.getSubTplData.call(this,f);if(j.ariaRole){g=h.inputElAriaAttributes;if(g){g["aria-haspopup"]=true;g["aria-expanded"]=false}}return h},initEvents:function(){var b=this;Ext.form.field.Text.prototype.initEvents.call(this);b.keyNav=new Ext.util.KeyNav(b.inputEl,{down:b.onDownArrow,esc:{handler:b.onEsc,scope:b,defaultEventAction:false},scope:b,forceKeyDown:true});if(Ext.isGecko){b.inputEl.dom.setAttribute("autocomplete","off")}},updateEditable:function(f,g){var d=this;if(!f){d.inputEl.on("click",d.onTriggerClick,d)}else{d.inputEl.un("click",d.onTriggerClick,d)}Ext.form.field.Text.prototype.updateEditable.call(this,f,g)},onEsc:function(b){if(Ext.isIE){b.preventDefault()}if(this.isExpanded){this.collapse();b.stopEvent()}},onDownArrow:function(c){var d=this;if((c.time-d.lastDownArrow)>150){delete d.lastDownArrow}if(!d.isExpanded){c.stopEvent();d.onTriggerClick();d.lastDownArrow=c.time}else{if(!c.isStopped&&(c.time-d.lastDownArrow)<150){delete d.lastDownArrow}}},expand:function(){var m=this,g,h,o,j;if(m.rendered&&!m.isExpanded&&!m.destroyed){g=m.bodyEl;o=m.getPicker();j=Ext.getDoc();o.setMaxHeight(o.initialConfig.maxHeight);if(m.matchFieldWidth){o.setWidth(m.bodyEl.getWidth())}o.show();m.isExpanded=true;m.alignPicker();g.addCls(m.openCls);if(m.ariaRole){h=m.ariaEl.dom;h.setAttribute("aria-owns",o.listEl?o.listEl.id:o.el.id);h.setAttribute("aria-expanded",true)}m.touchListeners=j.on({translate:false,touchstart:m.collapseIf,scope:m,delegated:false,destroyable:true});m.scrollListeners=Ext.on({scroll:m.onGlobalScroll,scope:m,destroyable:true});Ext.on("resize",m.alignPicker,m,{buffer:1});m.fireEvent("expand",m);m.onExpand()}},onExpand:Ext.emptyFn,alignPicker:function(){if(!this.destroyed){var b=this.getPicker();if(b.isVisible()&&b.isFloating()){this.doAlign()}}},doAlign:function(){var h=this,j=h.picker,g="-above",f;h.picker.alignTo(h.triggerWrap,h.pickerAlign,h.pickerOffset);f=j.el.getY()<h.inputEl.getY();h.bodyEl[f?"addCls":"removeCls"](h.openCls+g);j[f?"addCls":"removeCls"](j.baseCls+g)},collapse:function(){var h=this;if(h.isExpanded&&!h.destroyed&&!h.destroying){var j=h.openCls,f=h.picker,g="-above";f.hide();h.isExpanded=false;h.bodyEl.removeCls([j,j+g]);f.el.removeCls(f.baseCls+g);if(h.ariaRole){h.ariaEl.dom.setAttribute("aria-expanded",false)}h.touchListeners.destroy();h.scrollListeners.destroy();Ext.un("resize",h.alignPicker,h);h.fireEvent("collapse",h);h.onCollapse()}},onCollapse:Ext.emptyFn,collapseIf:function(c){var d=this;if(!d.destroyed&&!c.within(d.bodyEl,false,true)&&!d.owns(c.target)&&!Ext.fly(c.target).isFocusable()){d.collapse()}},getPicker:function(){var c=this,d=c.picker;if(!d){c.creatingPicker=true;c.picker=d=c.createPicker();d.ownerCmp=c;delete c.creatingPicker}return c.picker},onFocusLeave:function(b){this.collapse();Ext.form.field.Text.prototype.onFocusLeave.call(this,b)},getRefItems:function(){var b=[];if(this.picker){b[0]=this.picker}return b},createPicker:Ext.emptyFn,onTriggerClick:function(c){var d=this;if(!d.readOnly&&!d.disabled){if(d.isExpanded){d.collapse()}else{d.expand()}}},beforeDestroy:function(){var c=this,d=c.picker;Ext.form.field.Text.prototype.beforeDestroy.call(this);Ext.un("resize",c.alignPicker,c);Ext.destroy(c.keyNav,d);if(d){c.picker=d.pickerField=null}},privates:{onGlobalScroll:function(g){var f,h,j=this.el;if(g.getElement().contains(j)){f=g.getPosition();h=j.getScrollIntoViewXY(g.getElement(),f.x,f.y);if(this.up("[fixed]")||h.y!==f.y||h.x!==f.x){this.collapse()}}}}},0,["pickerfield"],["component","box","field","textfield","pickerfield"],{component:true,box:true,field:true,textfield:true,pickerfield:true},["widget.pickerfield"],0,[Ext.form.field,"Picker",Ext.form,"Picker"],0));(Ext.cmd.derive("Ext.selection.Model",Ext.mixin.Observable,{alternateClassName:"Ext.AbstractSelectionModel",factoryConfig:{defaultType:"dataviewmodel"},$configPrefixed:false,$configStrict:false,config:{store:null,selected:{}},isSelectionModel:true,allowDeselect:undefined,toggleOnClick:true,selected:null,pruneRemoved:true,suspendChange:0,ignoreRightMouseSelection:false,constructor:function(d){var c=this;c.modes={SINGLE:true,SIMPLE:true,MULTI:true};Ext.mixin.Observable.prototype.constructor.call(this,d);c.setSelectionMode(c.mode);if(c.selectionMode!=="SINGLE"){c.allowDeselect=true}},updateStore:function(d,c){this.bindStore(d,!c)},applySelected:function(b){if(!b.isCollection){b=new Ext.util.Collection(Ext.apply({rootProperty:"data"},b))}return b},getStoreListeners:function(){var b=this;return{add:b.onStoreAdd,clear:b.onStoreClear,remove:b.onStoreRemove,update:b.onStoreUpdate,idchanged:b.onIdChanged,load:b.onStoreLoad,refresh:b.onStoreRefresh,pageadd:b.onPageAdd,pageremove:b.onPageRemove}},suspendChanges:function(){++this.suspendChange},resumeChanges:function(){if(this.suspendChange){--this.suspendChange}},selectAll:function(g){var j=this,f=j.store.getRange(),h=j.getSelection().length;j.suspendChanges();j.doSelect(f,true,g);j.resumeChanges();if(!g&&!j.destroyed){j.maybeFireSelectionChange(j.getSelection().length!==h)}},deselectAll:function(o){var r=this,v=r.getSelection(),q={},p=r.store,w=v.length,s,u,t;for(s=0,u=v.length;s<u;s++){t=v[s];q[t.id]=p.indexOf(t)}v=Ext.Array.sort(v,function(b,d){var a=q[b.id],c=q[d.id];return a<c?-1:1});r.suspendChanges();r.doDeselect(v,o);r.resumeChanges();if(!o&&!r.destroyed){r.maybeFireSelectionChange(r.getSelection().length!==w)}},getSelectionStart:function(){return this.selectionStart},setSelectionStart:function(b){this.selectionStart=b},selectWithEvent:function(g,j){var m=this,o=m.isSelected(g),h=j.shiftKey;switch(m.selectionMode){case"MULTI":m.selectWithEventMulti(g,j,o);break;case"SIMPLE":m.selectWithEventSimple(g,j,o);break;case"SINGLE":m.selectWithEventSingle(g,j,o);break}if(!h){if(m.isSelected(g)){m.selectionStart=g}else{m.selectionStart=null}}},vetoSelection:function(b){if(b.stopSelection){return true}else{if(b.type!=="keydown"&&b.button!==0){if(this.ignoreRightMouseSelection||this.isSelected(b.record)){return true}}else{return b.type==="mousedown"}}},onNavigate:function(A){if(!A.record||this.vetoSelection(A.keyEvent)){return}this.onBeforeNavigate(A);var y=this,z=A.keyEvent,E=z.ctrlKey||A.ctrlKey,C=A.recordIndex,B=A.record,t=A.previousRecord,D=y.isSelected(B),v=(y.selectionStart&&y.isSelected(A.previousRecord))?y.selectionStart:(y.selectionStart=A.previousRecord),F=A.previousRecordIndex,u=z.getCharCode(),s=u===z.SPACE,w=u===z.UP||u===z.PAGE_UP||u===z.HOME?"up":(u===z.DOWN||u===z.PAGE_DOWN||u===z.END?"down":null);switch(y.selectionMode){case"MULTI":y.setSelectionStart(A.selectionStart);if(u===z.A&&E){y.selected.beginUpdate();y.selectRange(0,y.store.getCount()-1);y.selected.endUpdate()}else{if(s){if(z.shiftKey){y.selectRange(v,B,E)}else{if(D){if(y.allowDeselect){y.doDeselect(B)}}else{y.doSelect(B,E)}}}else{if(z.shiftKey&&v){if(w==="up"&&F<=C){y.deselectRange(t,C+1)}else{if(w==="down"&&F>=C){y.deselectRange(t,C-1)}else{if(v!==B){y.selectRange(v,B,E)}}}y.lastSelected=B}else{if(u){if(!E){y.doSelect(B,false)}}else{y.selectWithEvent(B,z)}}}}break;case"SIMPLE":if(u===z.A&&E){y.selected.beginUpdate();y.selectRange(0,y.store.getCount()-1);y.selected.endUpdate()}else{if(D){y.doDeselect(B)}else{y.doSelect(B,true)}}break;case"SINGLE":if(!E){if(w){y.doSelect(B,false)}else{if(s||!u){y.selectWithEvent(B,z)}}}}if(!z.shiftKey&&!y.destroyed&&y.isSelected(B)){y.selectionStart=B;y.selectionStartIdx=C}},selectRange:function(u,C,t){var y=this,v=y.store,D=y.selected.items,s,A,z,B,F,w,E;if(y.isLocked()){return}s=y.normalizeRowRange(u,C);u=s[0];C=s[1];B=[];for(A=u;A<=C;A++){if(!y.isSelected(v.getAt(A))){B.push(v.getAt(A))}}if(!t){F=[];y.suspendChanges();for(A=0,z=D.length;A<z;++A){E=D[A];w=v.indexOf(E);if(w<u||w>C){F.push(E)}}for(A=0,z=F.length;A<z;++A){y.doDeselect(F[A])}y.resumeChanges()}if(!y.destroyed){if(B.length){y.doMultiSelect(B,true)}else{if(F){y.maybeFireSelectionChange(F.length>0)}}}},deselectRange:function(s,t){var p=this,u=p.store,o,q,r,m;if(p.isLocked()){return}o=p.normalizeRowRange(s,t);s=o[0];t=o[1];r=[];for(q=s;q<=t;q++){m=u.getAt(q);if(p.isSelected(m)){r.push(m)}}if(r.length){p.doDeselect(r)}},normalizeRowRange:function(j,f){var g=this.store,h;if(!Ext.isNumber(j)){j=g.indexOf(j)}j=Math.max(0,j);if(!Ext.isNumber(f)){f=g.indexOf(f)}f=Math.min(f,g.getCount()-1);if(j>f){h=f;f=j;j=h}return[j,f]},select:function(d,g,f){if(Ext.isDefined(d)&&!(Ext.isArray(d)&&!d.length)){this.doSelect(d,g,f)}},deselect:function(c,d){this.doDeselect(c,d)},doSelect:function(o,j,g){var m=this,h;if(m.locked||o==null){return}if(typeof o==="number"){h=m.store.getAt(o);if(!h){return}o=[h]}if(m.selectionMode==="SINGLE"){if(o.isModel){o=[o]}if(o.length){m.doSingleSelect(o[0],g)}}else{m.doMultiSelect(o,j,g)}},doMultiSelect:function(B,r,s){var u=this,A=u.selected,t=false,q,y,v,w,z;if(u.locked){return}B=!Ext.isArray(B)?[B]:B;v=B.length;if(!r&&A.getCount()>0){q=u.deselectDuringSelect(B,s);if(u.destroyed){return}if(q[0]){u.maybeFireSelectionChange(q[1]>0&&!s);return}else{t=q[1]>0}}z=function(){if(!A.getCount()){u.selectionStart=w}A.add(w);t=true};for(y=0;y<v;y++){w=B[y];if(u.isSelected(w)){continue}u.onSelectChange(w,true,s,z);if(u.destroyed){return}}u.lastSelected=w;u.maybeFireSelectionChange(t&&!s)},deselectDuringSelect:function(t,p){var q=this,w=q.selected.getRange(),r=w.length,u=0,s=false,o,v;q.suspendChanges();q.deselectingDuringSelect=true;for(v=0;v<r;++v){o=w[v];if(!Ext.Array.contains(t,o)){if(q.doDeselect(o,p)){++u}else{s=true}}if(q.destroyed){s=true;u=0;break}}q.deselectingDuringSelect=false;q.resumeChanges();return[s,u]},doDeselect:function(z,q){var r=this,y=r.selected,v=0,s,u,p=0,t=0,w;if(r.locked||!r.store){return false}if(typeof z==="number"){u=r.store.getAt(z);if(!u){return false}z=[u]}else{if(!Ext.isArray(z)){z=[z]}}w=function(){++t;y.remove(u);if(u===r.selectionStart){r.selectionStart=null}};s=z.length;r.suspendChanges();for(;v<s;v++){u=z[v];if(r.isSelected(u)){if(r.lastSelected===u){r.lastSelected=y.last()}++p;r.onSelectChange(u,false,q,w);if(r.destroyed){return false}}}r.resumeChanges();r.maybeFireSelectionChange(t>0&&!q);return t===p},doSingleSelect:function(j,h){var p=this,m=false,q=p.selected,o;if(p.locked){return}if(p.isSelected(j)){return}o=function(){if(q.getCount()){p.suspendChanges();var a=p.deselectDuringSelect([j],h);if(p.destroyed){return}p.resumeChanges();if(a[0]){return false}}p.lastSelected=j;if(!q.getCount()){p.selectionStart=j}q.add(j);m=true};p.onSelectChange(j,true,h,o);if(m&&!p.destroyed){p.maybeFireSelectionChange(!h)}},maybeFireSelectionChange:function(d){var c=this;if(d&&!c.suspendChange){c.fireEvent("selectionchange",c,c.getSelection())}},getLastSelected:function(){return this.lastSelected},getSelection:function(){return this.selected.getRange()},getSelectionMode:function(){return this.selectionMode},setSelectionMode:function(b){b=b?b.toUpperCase():"SINGLE";this.selectionMode=this.modes[b]?b:"SINGLE"},isLocked:function(){return this.locked},setLocked:function(b){this.locked=!!b},isRangeSelected:function(p,q){var m=this,h=m.store,o,j;j=m.normalizeRowRange(p,q);p=j[0];q=j[1];for(o=p;o<=q;o++){if(!m.isSelected(h.getAt(o))){return false}}return true},isSelected:function(b){b=Ext.isNumber(b)?this.store.getAt(b):b;return this.selected.contains(b)},hasSelection:function(){var b=this.getSelected();return !!(b&&b.getCount())},refresh:function(){var u=this,F=u.store,z=[],v=[],A=u.getSelection(),y=A.length,C=u.getSelected(),t,w,E,d,D,B;if(!F||!(C.isCollection||C.isRows)||!C.getCount()){return}E=F.getData();if(E.getSource){w=E.getSource();if(w){E=w}}u.refreshing=true;C.beginUpdate();u.suspendChanges();for(B=0;B<y;B++){d=A[B];D=E.get(d.getId());if(D){z.push(D)}else{if(!u.pruneRemoved){v.push(d)}}if(u.mode==="SINGLE"&&v.length){break}}if(C.getCount()!==(z.length+v.length)){t=true}u.clearSelections();if(z.length){u.doSelect(z,false,true)}if(v.length){C.add(v);if(!u.lastSelected){u.lastSelected=v[v.length-1]}}u.resumeChanges();if(t){C.endUpdate()}else{C.updating--}u.refreshing=false;u.maybeFireSelectionChange(t)},clearSelections:function(){var b=this.getSelected();if(b){b.clear()}this.lastSelected=null},onStoreAdd:Ext.emptyFn,onStoreClear:function(){if(!this.store.isLoading()&&this.hasSelection()){this.clearSelections();this.maybeFireSelectionChange(true)}},onStoreRemove:function(q,y,u,p){var r=this,z=y,v,t,w,s;if(r.selectionStart&&Ext.Array.contains(y,r.selectionStart)){r.selectionStart=null}if(p||r.locked||!r.pruneRemoved){return}s=q.isMoving(null,true);if(s){z=null;for(v=0,t=y.length;v<t;++v){w=y[v];if(!s[w.id]){(z||(z=[])).push(w)}}}if(z){r.deselect(z)}},onPageRemove:function(d,f,g){this.onStoreRemove(this.store,g)},onPageAdd:function(p,q,o){var j=o.length,m,h;for(m=0;m<j;m++){h=o[m];if(this.selected.get(h.id)){this.selected.replace(h)}}},getCount:function(){return this.selected.getCount()},onUpdate:Ext.emptyFn,destroy:function(){var b=this;b.clearSelections();b.bindStore(null);b.selected=Ext.destroy(b.selected);Ext.mixin.Observable.prototype.destroy.call(this)},onStoreUpdate:Ext.emptyFn,onIdChanged:function(g,h,j,f){this.selected.updateKey(h,j)},onStoreRefresh:function(){this.updateSelectedInstances(this.selected)},updateSelectedInstances:function(z){var u=this,s=u.getStore(),t=u.lastSelected,D=0,B=u.pruneRemovedOnRefresh(),v,C,y,r,A,w;if(s.isBufferedStore){return}v=z.getRange();C=v.length;if(t){u.lastSelected=s.getById(t.id);w=u.lastSelected!==t}u.refreshing=true;for(y=0;y<C;++y){r=v[y];A=s.getById(r.id);if(A){if(A!==r){z.replace(A)}}else{if(B){z.remove(r);++D}}}u.refreshing=false;u.maybeFireSelectionChange(D>0);if(w){u.fireEvent("lastselectedchanged",u,u.getSelection(),u.lastSelected)}},pruneRemovedOnRefresh:function(){return this.pruneRemoved},onStoreLoad:Ext.emptyFn,onSelectChange:function(j,p,q,m){var o=this,h=p?"select":"deselect";if((q||o.fireEvent("before"+h,o,j))!==false&&m()!==false){if(!q){o.fireEvent(h,o,j)}}},onEditorKey:Ext.emptyFn,beforeViewRender:function(b){Ext.Array.include(this.views||(this.views=[]),b)},onHeaderClick:Ext.emptyFn,resolveListenerScope:function(g){var f=this.view,d;if(f){d=f.resolveSatelliteListenerScope(this,g)}return d||Ext.mixin.Observable.prototype.resolveListenerScope.call(this,g)},bindComponent:Ext.emptyFn,privates:{onBeforeNavigate:Ext.privateFn,selectWithEventMulti:function(v,t,A){var s=this,z=t.shiftKey,D=t.ctrlKey,B=z?(s.getSelectionStart()):null,y=s.getSelection(),u=y.length,C,w,r;if(z&&B){s.selectRange(B,v,D)}else{if(D&&A){if(s.allowDeselect){s.doDeselect(v,false)}}else{if(D){s.doSelect(v,true,false)}else{if(A&&!z&&!D&&u>1){if(s.allowDeselect){C=[];for(w=0;w<u;++w){r=y[w];if(r!==v){C.push(r)}}s.doDeselect(C)}}else{if(!A){s.doSelect(v,false)}}}}}},selectWithEventSimple:function(f,g,d){if(d){this.doDeselect(f)}else{this.doSelect(f,true)}},selectWithEventSingle:function(g,j,o){var m=this,h=m.allowDeselect;if(h&&!j.ctrlKey){h=m.toggleOnClick}if(h&&o){m.doDeselect(g)}else{m.doSelect(g,false)}}}},1,0,0,0,["selection.abstract"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.selection,"Model",Ext,"AbstractSelectionModel"],0));(Ext.cmd.derive("Ext.selection.DataViewModel",Ext.selection.Model,{deselectOnContainerClick:true,bindComponent:function(f){var g=this,d;if(g.view!==f){if(g.view){g.navigationModel=null;Ext.destroy(g.viewListeners,g.navigationListeners)}g.view=f;if(f){d=g.getViewListeners();d.scope=g;d.destroyable=true;g.navigationModel=f.getNavigationModel();g.viewListeners=f.on(d);g.navigationListeners=g.navigationModel.on({navigate:g.onNavigate,scope:g,destroyable:true})}}},getViewListeners:function(){var d=this,c={};c[d.view.triggerCtEvent]=d.onContainerClick;return c},onUpdate:function(c){var d=this.view;if(d&&this.isSelected(c)){d.onItemSelect(c)}},onContainerClick:function(){if(this.deselectOnContainerClick){this.deselectAll()}},onSelectChange:function(m,r,s,p){var q=this,o=q.view,t=r?"select":"deselect",u=q.store.indexOf(m);if((s||q.fireEvent("before"+t,q,m,u))!==false&&p()!==false){if(o){if(r){o.onItemSelect(m)}else{o.onItemDeselect(m)}}if(!s){q.fireEvent(t,q,m,u)}}},destroy:function(){this.bindComponent();Ext.destroy(this.keyNav);Ext.selection.Model.prototype.destroy.call(this)}},0,0,0,0,["selection.dataviewmodel"],0,[Ext.selection,"DataViewModel"],0));(Ext.cmd.derive("Ext.view.NavigationModel",Ext.Base,{config:{store:null},focusCls:"x-view-item-focused",constructor:function(){this.mixins.observable.constructor.call(this)},bindComponent:function(b){if(this.view!==b){this.view=b;this.bindView(b)}},bindView:function(g){var j=this,h=g.dataSource,f;j.initKeyNav(g);if(!h.isEmptyStore){j.setStore(h)}f=j.getViewListeners();f.destroyable=true;j.viewListeners=j.viewListeners||[];j.viewListeners.push(g.on(f))},updateStore:function(b){this.mixins.storeholder.bindStore.apply(this,[b])},getViewListeners:function(){var b=this;return{containermousedown:b.onContainerMouseDown,itemmousedown:b.onItemMouseDown,itemclick:b.onItemClick,itemcontextmenu:b.onItemMouseDown,scope:b}},initKeyNav:function(d){var c=this;c.keyNav=new Ext.util.KeyNav({target:d,ignoreInputFields:true,eventName:"itemkeydown",defaultEventAction:"stopEvent",processEvent:c.processViewEvent,up:c.onKeyUp,down:c.onKeyDown,right:c.onKeyRight,left:c.onKeyLeft,pageDown:c.onKeyPageDown,pageUp:c.onKeyPageUp,home:c.onKeyHome,end:c.onKeyEnd,space:c.onKeySpace,enter:c.onKeyEnter,A:{ctrl:true,handler:c.onSelectAllKeyPress},scope:c})},processViewEvent:function(g,h,j,o,m){return m},addKeyBindings:function(b){this.keyNav.addBindings(b)},enable:function(){this.keyNav.enable();this.disabled=false},disable:function(){this.keyNav.disable();this.disabled=true},onContainerMouseDown:function(d,c){if(c.pointerType==="mouse"&&Ext.getScrollbarSize().width){if(!d.el.getClientRegion().contains(c.getPoint())){c.preventDefault()}}},onItemMouseDown:function(g,h,j,m,o){if(o.pointerType!=="touch"){this.setPosition(m)}},onItemClick:function(o,g,j,m,h){if(this.record===g){this.fireNavigateEvent(h)}else{this.setPosition(m,h)}},setPosition:function(w,s,p,v){var r=this,q=r.view,u=q.getSelectionModel(),z=q.dataSource,t,y;if(w==null||!q.all.getCount()){r.record=r.recordIndex=null}else{if(typeof w==="number"){y=Math.max(Math.min(w,z.getCount()-1),0);t=z.getAt(w)}else{if(w.isEntity){t=z.getById(w.id);y=z.indexOf(t);if(y===-1){t=z.getAt(0);y=0}}else{if(w.tagName){t=q.getRecord(w);y=z.indexOf(t)}else{t=y=null}}}}if(t===r.record){r.recordIndex=y;return r.focusPosition(y)}if(r.item){r.item.removeCls(r.focusCls)}r.previousRecordIndex=r.recordIndex;r.previousRecord=r.record;r.previousItem=r.item;r.recordIndex=y;r.record=t;v=v||r.record===r.lastFocused;if(t){r.focusPosition(r.recordIndex)}else{r.item=null}if(!p){u.fireEvent("focuschange",u,r.previousRecord,r.record)}if(!v&&s){r.fireNavigateEvent(s)}},focusPosition:function(d){var c=this;if(d!=null&&d!==-1){if(d.isEntity){d=c.view.dataSource.indexOf(d)}c.item=c.view.all.item(d);if(c.item){c.lastFocused=c.record;c.lastFocusedIndex=c.recordIndex;c.focusItem(c.item)}else{c.record=null}}else{c.item=null}},focusItem:function(b){b.addCls(this.focusCls);b.focus()},getPosition:function(){return this.record?this.recordIndex:null},getRecordIndex:function(){return this.recordIndex},getItem:function(){return this.item},getRecord:function(){return this.record},getLastFocused:function(){if(this.view.dataSource.indexOf(this.lastFocused)===-1){return null}return this.lastFocused},onKeyUp:function(c){var d=this.recordIndex-1;if(d<0){d=this.view.all.getCount()-1}this.setPosition(d,c)},onKeyDown:function(c){var d=this.recordIndex+1;if(d>this.view.all.getCount()-1){d=0}this.setPosition(d,c)},onKeyRight:function(c){var d=this.recordIndex+1;if(d>this.view.all.getCount()-1){d=0}this.setPosition(d,c)},onKeyLeft:function(c){var d=this.recordIndex-1;if(d<0){d=this.view.all.getCount()-1}this.setPosition(d,c)},onKeyPageDown:Ext.emptyFn,onKeyPageUp:Ext.emptyFn,onKeyHome:function(b){this.setPosition(0,b)},onKeyEnd:function(b){this.setPosition(this.view.all.getCount()-1,b)},onKeySpace:function(b){this.fireNavigateEvent(b)},onKeyEnter:function(b){b.stopEvent();b.view.fireEvent("itemclick",b.view,b.record,b.item,b.recordIndex,b)},onSelectAllKeyPress:function(b){this.fireNavigateEvent(b)},fireNavigateEvent:function(c){var d=this;d.fireEvent("navigate",{navigationModel:d,keyEvent:c,previousRecordIndex:d.previousRecordIndex,previousRecord:d.previousRecord,previousItem:d.previousItem,recordIndex:d.recordIndex,record:d.record,item:d.item})},destroy:function(){var b=this;b.setStore(null);Ext.destroy(b.viewListeners,b.keyNav);b.keyNav=b.viewListeners=b.dataSource=b.lastFocused=null;b.callParent()}},1,0,0,0,["view.navigation.default"],[[Ext.util.Observable.prototype.mixinId||Ext.util.Observable.$className,Ext.util.Observable],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable],[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.view,"NavigationModel"],0));(Ext.cmd.derive("Ext.view.AbstractView",Ext.Component,{inheritableStatics:{getRecord:function(b){return this.getBoundView(b).getRecord(b)},getBoundView:function(b){return Ext.getCmp(b.getAttribute("data-boundView"))}},defaultBindProperty:"store",renderBuffer:document.createElement("div"),statics:{updateDelay:200,queueRecordChange:function(v,J,B,G,F){var w=this,H=w.changeQueue||(w.changeQueue={}),A=B.internalId,y,C,z,E,I,u,D;y=H[A]||(H[A]={operation:G,record:B,data:{},views:[]});C=y.data;Ext.Array.include(y.views,v);if(F&&(z=F.length)){for(E=0;E<z;E++){I=F[E];u=B.data[I];if(C.hasOwnProperty(I)){if(B.isEqual(C[I],u)){delete C[I];D=true}}else{C[I]=u}}if(D&&!Ext.Object.getKeys(C).length){delete H[A]}}else{Ext.apply(C,B.data)}if(!w.flushQueueTask){w.flushQueueTask=Ext.util.TaskManager.newTask({run:Ext.global.requestAnimationFrame?Ext.Function.createAnimationFrame(w.onFlushTick,w):Ext.Function.bind(w.onFlushTick,w),interval:Ext.view.AbstractView.updateDelay,repeat:1})}w.flushQueueTask.start()},onFlushTick:function(){Ext.AnimationQueue.start(this.flushChangeQueue,this)},flushChangeQueue:function(){var s=this,r,o,p,t,q,u,m;if(Ext.isScrolling){s.flushQueueTask.start();return}p=s.changeQueue;this.changeQueue={};for(q in p){t=p[q];r=t.views;o=r.length;for(u=0;u<o;u++){m=r[u];if(!m.destroyed){m.handleUpdate(m.dataSource,t.record,t.operation,Ext.Object.getKeys(t.data))}}}Ext.AnimationQueue.stop(s.flushChangeQueue,s)}},config:{selection:null,store:"ext-empty-store",navigationModel:{type:"default"},selectionModel:{type:"dataviewmodel"}},publishes:["selection"],twoWayBindable:["selection"],throttledUpdate:false,deferInitialRefresh:false,itemCls:"x-dataview-item",loadingText:"Loading...",loadMask:true,loadingUseMsg:true,selectedItemCls:"x-item-selected",emptyText:"",deferEmptyText:true,trackOver:false,blockRefresh:false,preserveScrollOnRefresh:false,preserveScrollOnReload:false,ariaRole:"listbox",itemAriaRole:"option",last:false,focusable:true,tabIndex:0,triggerEvent:"itemclick",triggerCtEvent:"containerclick",refreshNeeded:true,updateSuspendCounter:0,addCmpEvents:Ext.emptyFn,constructor:function(b){if(b&&b.selModel){b.selectionModel=b.selModel}Ext.Component.prototype.constructor.call(this,b)},initComponent:function(){var m=this,g=Ext.isDefined,j=m.itemTpl,o={},h;if(j){if(Ext.isArray(j)){if(typeof j[j.length-1]!=="string"){j=j.slice(0);o=j.pop()}j=j.join("")}else{if(Ext.isObject(j)){o=Ext.apply(o,j.initialConfig);j=j.html}}if(!m.itemSelector){m.itemSelector="."+m.itemCls}j=Ext.String.format('<tpl for="."><div class="{0}" role="{2}">{1}</div></tpl>',m.itemCls,j,m.itemAriaRole);m.tpl=new Ext.XTemplate(j,o)}Ext.Component.prototype.initComponent.call(this);m.tpl=m.getTpl("tpl");if(m.overItemCls){m.trackOver=true}m.addCmpEvents();h=m.store=Ext.data.StoreManager.lookup(m.store||"ext-empty-store");if(!m.dataSource){m.dataSource=h}m.bindStore(h,true);m.getNavigationModel().bindComponent(this);if(!m.all){m.all=new Ext.CompositeElementLite()}m.scrollState={top:0,left:0};m.savedTabIndexAttribute="data-savedtabindex-"+m.id},getElConfig:function(){var b=this.mixins.renderable.getElConfig.call(this);if(this.focusable){b.tabIndex=0}return b},onRender:function(){var b=this.loadMask;Ext.Component.prototype.onRender.apply(this,arguments);if(b){this.createMask(b)}},beforeLayout:function(){var b=this;Ext.Component.prototype.beforeLayout.apply(this,arguments);if(b.refreshNeeded&&!b.pendingRefresh){if(b.refreshCounter){b.refresh()}else{b.doFirstRefresh(b.dataSource)}}},onMaskBeforeShow:function(){var c=this,d=c.loadingHeight;if(d&&d>c.getHeight()){c.hasLoadingHeight=true;c.oldMinHeight=c.minHeight;c.minHeight=d;c.updateLayout()}},onMaskHide:function(){var b=this;if(!b.destroying&&b.hasLoadingHeight){b.minHeight=b.oldMinHeight;b.updateLayout();delete b.hasLoadingHeight}},beforeRender:function(){Ext.Component.prototype.beforeRender.apply(this,arguments);this.getSelectionModel().beforeViewRender(this)},afterRender:function(){Ext.Component.prototype.afterRender.apply(this,arguments);if(this.focusable){this.focusEl=this.el}},getRefItems:function(){var c=this.loadMask,d=[];if(c&&c.isComponent){d.push(c)}return d},getSelection:function(){return this.getSelectionModel().getSelection()},updateSelection:function(f){var d=this,g;if(!d.ignoreNextSelection){d.ignoreNextSelection=true;g=d.getSelectionModel();if(f){g.select(f)}else{g.deselectAll()}d.ignoreNextSelection=false}},updateBindSelection:function(g,j){var h=this,f=null;if(!h.ignoreNextSelection){h.ignoreNextSelection=true;if(j.length){f=g.getLastSelected();h.hasHadSelection=true}if(h.hasHadSelection){h.setSelection(f)}h.ignoreNextSelection=false}},applySelectionModel:function(j,p){var q=this,r=q.grid,o,s,m;if(p){p.un({scope:q,selectionchange:q.updateBindSelection,lastselectedchanged:q.updateBindSelection,select:q.ariaSelect,deselect:q.ariaDeselect});Ext.destroy(q.selModelRelayer);j=Ext.Factory.selection(j)}else{if(j&&j.isSelectionModel){j.locked=q.disableSelection}else{if(q.simpleSelect){o="SIMPLE"}else{if(q.multiSelect){o="MULTI"}else{o="SINGLE"}}if(typeof j==="string"){j={type:j}}j=Ext.Factory.selection(Ext.apply({allowDeselect:q.allowDeselect||q.multiSelect,mode:o,locked:q.disableSelection},j))}}if(j.mode!=="SINGLE"){m=(r||q).ariaEl.dom;if(m){m.setAttribute("aria-multiselectable",true)}else{if(!r){s=q.ariaRenderAttributes||(q.ariaRenderAttributes={});s["aria-multiselectable"]=true}}}q.selModelRelayer=q.relayEvents(j,["selectionchange","beforeselect","beforedeselect","select","deselect","focuschange"]);j.on({scope:q,lastselectedchanged:q.updateBindSelection,selectionchange:q.updateBindSelection,select:q.ariaSelect,deselect:q.ariaDeselect});return j},updateSelectionModel:function(b){this.selModel=b},applyNavigationModel:function(b){return Ext.Factory.viewNavigation(b)},onFocusEnter:function(h){var j=this,f=j.getNavigationModel(),g;j.toggleChildrenTabbability(false);if(!j.itemFocused&&j.all.getCount()){g=f.getLastFocused();f.setPosition(g||0,h.event,null,!g);j.itemFocused=f.getPosition()!=null}if(j.itemFocused){this.el.dom.setAttribute("tabIndex","-1")}Ext.Component.prototype.onFocusEnter.call(this,h)},onFocusLeave:function(c){var d=this;if(d.itemFocused&&!d.refreshing){d.getNavigationModel().setPosition(null,c.event,null,true);d.itemFocused=false;d.el.dom.setAttribute("tabIndex",0)}Ext.Component.prototype.onFocusLeave.call(this,c)},ariaSelect:function(d,f){var g=this.getNode(f);if(g){g.setAttribute("aria-selected",true)}},ariaDeselect:function(d,f){var g=this.getNode(f);if(g){g.removeAttribute("aria-selected")}},onRemoved:function(b){Ext.Component.prototype.onRemoved.call(this,b);if(!b){this.onFocusLeave({})}},refresh:function(){var s=this,t=s.all,q=t.getCount(),u=s.refreshCounter,r,z,A,v=s.getSelectionModel(),w,y=u&&t.getCount()&&s.preserveScrollOnRefresh&&s.getScrollable(),B;if(!s.rendered||s.destroyed){return}if(!s.hasListeners.beforerefresh||s.fireEvent("beforerefresh",s)!==false){s.refreshing=true;w=s.saveFocusState();r=s.getTargetEl();A=s.getViewRange();z=r.dom;if(y){B=y.getPosition();if(!(B.x||B.y)){B=null}}if(u){s.clearViewEl();s.refreshCounter++}else{s.refreshCounter=1}s.tpl.append(r,s.collectData(A,t.startIndex||0));if(A.length<1){s.addEmptyText();t.clear()}else{s.collectNodes(r.dom);s.updateIndexes(0)}w();if(s.refreshSelmodelOnRefresh!==false){v.refresh()}s.refreshNeeded=false;s.refreshSize(t.getCount()!==q);s.fireEvent("refresh",s,A);if(y){y.scrollTo(B)}if(!s.viewReady){s.viewReady=true;s.fireEvent("viewready",s)}s.refreshing=false;s.refreshScroll();s.cleanupData()}},addEmptyText:function(){var c=this,d=c.getStore();if(c.emptyText&&!d.isLoading()&&(!c.deferEmptyText||c.refreshCounter>1||d.isLoaded())){c.emptyEl=Ext.core.DomHelper.insertHtml("beforeEnd",c.getTargetEl().dom,c.emptyText)}},getViewRange:function(){return this.dataSource.getRange()},refreshSize:function(h){var j=this,f=j.getSizeModel(),g=j.getScrollable();if(f.height.shrinkWrap||f.width.shrinkWrap||h){j.updateLayout()}else{if(j.touchScroll&&!j.bufferedRenderer){if(g){g.refresh()}else{j.on({boxready:j.refreshScroll,scope:j,single:true})}}}},afterFirstLayout:function(j,f){var h=this,g=h.getScrollable();if(g){g.on({scroll:h.onViewScroll,scrollend:h.onViewScrollEnd,scope:h,onFrame:!!Ext.global.requestAnimationFrame})}Ext.Component.prototype.afterFirstLayout.call(this,j,f)},clearViewEl:function(){var d=this,g=d.getTargetEl(),f=d.getNodeContainer()===g;d.clearEmptyEl();d.all.clear(!f);if(f){g.dom.innerHTML=""}},clearEmptyEl:function(){var b=this.emptyEl;if(b){Ext.removeNode(b)}this.emptyEl=null},onViewScroll:function(d,f,g){this.fireEvent("scroll",this,f,g)},onViewScrollEnd:function(d,f,g){this.fireEvent("scrollend",this,f,g)},saveScrollState:function(){var d=this,c=d.scrollState;if(d.rendered){c.left=d.getScrollX();c.top=d.getScrollY()}},restoreScrollState:function(){var d=this,c=d.scrollState;if(d.rendered){d.setScrollX(c.left);d.setScrollY(c.top)}},prepareData:function(o,p,q){var h,j,m;if(q){h=q.getAssociatedData();for(j in h){if(h.hasOwnProperty(j)){if(!m){o=Ext.Object.chain(o);m=true}o[j]=h[j]}}}return o},collectData:function(q,m){var o=[],p=0,j=q.length,h;for(;p<j;p++){h=q[p];o[p]=this.prepareData(h.data,m+p,h)}return o},cleanupData:Ext.emptyFn,bufferRender:function(t,s){var q=this,p=q.renderBuffer,m=document.createDocumentFragment(),u,o,r;q.tpl.overwrite(p,q.collectData(t,s));u=Ext.fly(p).query(q.getItemSelector());for(r=0,o=u.length;r<o;r++){m.appendChild(u[r])}return{fragment:m,children:u}},nodeContainerSelector:null,getNodeContainer:function(){var c=this.getTargetEl(),d=this.nodeContainerSelector;return d?c.down(d,true):c},getNodeContainerSelector:function(){return this.nodeContainerSelector},onUpdate:function(r,j,s,o,q){var p=this,m=q&&q.filtered;if(!m&&p.getNode(j)){if(p.throttledUpdate){p.statics().queueRecordChange(p,r,j,s,o)}else{p.handleUpdate.apply(p,arguments)}}},handleUpdate:function(q,j){var m=this,p,o,h=m.getSelectionModel();if(m.viewReady){p=m.dataSource.indexOf(j);if(p>-1){if(m.getNode(j)){o=m.bufferRender([j],p).children[0];m.all.replaceElement(p,o,true);m.updateIndexes(p,p);h.onUpdate(j);m.refreshSizePending=true;if(h.isSelected(j)){m.onItemSelect(j)}if(m.hasListeners.itemupdate){m.fireEvent("itemupdate",j,p,o)}return o}}}},onReplace:function(y,v,G,F){var A=this,z=A.all,C=A.getSelectionModel(),u=v,I,J,B,H,w,E,D;if(A.rendered){I=A.bufferRender(F,v,true);B=I.fragment;H=I.children;J=z.item(v);if(J){z.item(v).insertSibling(B,"before",true)}else{A.appendNodes(B)}z.insert(v,H);if(G.length){D=A.saveFocusState()}v+=F.length;E=v+G.length-1;w=z.removeRange(v,E,true);if(A.refreshSelmodelOnRefresh!==false){C.refresh()}A.updateIndexes(v);if(A.hasListeners.itemremove){A.fireEvent("itemremove",G,u,w,A)}if(A.hasListeners.itemadd){A.fireEvent("itemadd",F,u,H)}D();A.refreshSize()}},onAdd:function(p,q,o){var m=this,h,j=m.getSelectionModel();if(m.rendered){if(m.all.getCount()===0){m.refresh();h=m.all.slice()}else{h=m.doAdd(q,o);if(m.refreshSelmodelOnRefresh!==false){j.refresh()}m.updateIndexes(o);m.refreshSizePending=true}if(m.hasListeners.itemadd){m.fireEvent("itemadd",q,o,h)}}},appendNodes:function(f){var d=this.all,g=d.getCount();if(this.nodeContainerSelector){this.getNodeContainer().appendChild(f)}else{d.item(g-1).insertSibling(f,"after")}},doAdd:function(w,u){var s=this,p=s.bufferRender(w,u,true),t=p.fragment,y=p.children,r=s.all,v=r.getCount(),q=r.startIndex||0,z=r.endIndex||v-1;if(v===0||u>z){s.appendNodes(t)}else{if(u<=q){r.item(q).insertSibling(t,"before",true)}else{r.item(u).insertSibling(y,"before",true)}}r.insert(u,y);return y},onRemove:function(s,A,v){var u=this,r=u.all,C=u.hasListeners.itemremove,t,z,y,D,B,w;if(r.getCount()){if(u.dataSource.getCount()===0){if(C){u.fireEvent("itemremove",A,v,u.getNodes(v,v+A.length-1))}u.refresh()}else{w=u.saveFocusState();if(C){D=[]}for(z=A.length-1;z>=0;--z){y=A[z];t=v+z;if(D){B=r.item(t);D[z]=B?B.dom:undefined}if(r.item(t)){u.doRemove(y,t)}}if(C){u.fireEvent("itemremove",A,v,D,u)}w();u.updateIndexes(v)}u.refreshSizePending=true}},doRemove:function(d,c){this.all.removeElement(c,true)},saveFocusState:function(){var m=this,h=m.dataSource||m.store,g=m.getNavigationModel(),o=g.recordIndex,j=g.record;if(m.el.contains(Ext.Element.getActiveElement())){m.el.dom.focus();return function(){if(h.getCount()){o=Math.min(o,m.all.getCount()-1);g.setPosition(h.contains(j)?j:o,null,null,true)}}}return Ext.emptyFn},refreshNode:function(b){if(Ext.isNumber(b)){b=this.store.getAt(b)}this.onUpdate(this.dataSource,b)},updateIndexes:function(o,p){var j=this.all.elements,q,m=this.getViewRange(),r,s=this.id;o=o||0;p=p||((p===0)?0:(j.length-1));for(r=o;r<=p;r++){q=j[r];q.setAttribute("data-recordIndex",r);q.setAttribute("data-recordId",m[r].internalId);q.setAttribute("data-boundView",s)}},bindStore:function(g,o){var j=this,h=j.getSelectionModel(),m=j.getNavigationModel();h.bindStore(g);h.bindComponent(g?j:null);j.mixins.storeholder.bindStore.apply(j,arguments);m.setStore(g);if(g&&j.componentLayoutCounter){j.doFirstRefresh(g,!o)}},doFirstRefresh:function(f,g){var d=this;if(d.deferInitialRefresh&&!g){Ext.defer(d.doFirstRefresh,1,d,[f,true])}else{if(f&&!f.isLoading()){d.refresh()}}},onUnbindStore:function(b){this.setMaskBind(null);if(this.dataSource===b){this.dataSource=null}},onBindStore:function(f,g){var d=this;if(d.store.isBufferedStore){d.store.preserveScrollOnReload=d.preserveScrollOnReload}if(g&&g.isBufferedStore){delete g.preserveScrollOnReload}d.setMaskBind(f);if(!d.dataSource){d.dataSource=f}},setMaskBind:function(c){var d=this.loadMask;if(this.rendered&&d&&c&&!d.bindStore){d=this.createMask()}if(d&&d.bindStore){d.bindStore(c)}},getStoreListeners:function(){var b=this;return{refresh:b.onDataRefresh,replace:b.onReplace,add:b.onAdd,remove:b.onRemove,update:b.onUpdate,clear:b.onDataRefresh,beginupdate:b.onBeginUpdate,endupdate:b.onEndUpdate}},onBeginUpdate:function(){++this.updateSuspendCounter;Ext.suspendLayouts()},onEndUpdate:function(){var b=this;if(b.updateSuspendCounter){--b.updateSuspendCounter}Ext.resumeLayouts(true);if(b.refreshSizePending){b.refreshSize(true);b.refreshSizePending=false}},onDataRefresh:function(f){var g=this,d=g.preserveScrollOnRefresh;if(f.loadCount>g.lastRefreshLoadCount){g.preserveScrollOnRefresh=g.preserveScrollOnReLoad}g.refreshView();g.preserveScrollOnRefresh=d;g.lastRefreshLoadCount=f.loadCount},refreshView:function(){var c=this,d=c.blockRefresh||!c.rendered||c.up("[collapsed],[isCollapsingOrExpanding],[hidden]");if(d){c.refreshNeeded=true}else{if(c.bufferedRenderer){c.bufferedRenderer.refreshView()}else{c.refresh()}}},findItemByChild:function(b){return Ext.fly(b).findParent(this.getItemSelector(),this.getTargetEl())},findTargetByEvent:function(b){return b.getTarget(this.getItemSelector(),this.getTargetEl())},getSelectedNodes:function(){var f=[],g=this.getSelectionModel().getSelection(),h=g.length,j=0;for(;j<h;j++){f.push(this.getNode(g[j]))}return f},getRecords:function(o){var g=[],m=0,h=o.length,j=this.dataSource.data;for(;m<h;m++){g[g.length]=j.getByKey(o[m].getAttribute("data-recordId"))}return g},getRecord:function(b){return this.dataSource.getByInternalId(Ext.getDom(b).getAttribute("data-recordId"))},isSelected:function(c){var d=this.getRecord(c);return this.getSelectionModel().isSelected(d)},select:function(d,g,f){this.getSelectionModel().select(d,g,f)},deselect:function(c,d){this.getSelectionModel().deselect(c,d)},getNode:function(d){var g=this,f;if(g.rendered&&(d||d===0)){if(Ext.isString(d)){f=document.getElementById(d)}else{if(d.isModel){f=g.getNodeByRecord(d)}else{if(Ext.isNumber(d)){f=g.all.elements[d]}else{if(d.target&&d.target.nodeType){d=d.target}f=Ext.fly(d).findParent(g.itemSelector,g.getTargetEl())}}}}return f||null},getNodeByRecord:function(d){var c=this.store.indexOf(d);return this.all.elements[c]||null},getNodes:function(g,f){var d=this.all;if(f!==undefined){f++}return d.slice(g,f)},indexOf:function(b){b=this.getNode(b);if(!b&&b!==0){return -1}if(b.getAttribute("data-recordIndex")){return Number(b.getAttribute("data-recordIndex"))}return this.all.indexOf(b)},onDestroy:function(){var c=this,d=c.updateSuspendCounter;c.all.clear();c.emptyEl=null;Ext.Component.prototype.onDestroy.call(this);c.bindStore(null);c.store=c.dataSource=c.storeListeners=null;if(c.selModelRelayer){c.selModelRelayer.destroy();c.selModelRelayer=null}Ext.destroy(c.navigationModel,c.selectionModel);c.navigationModel=c.selectionModel=c.selModel=null;c.loadMask=null;while(d--){Ext.resumeLayouts(true)}},onItemSelect:function(d){var c=this.getNode(d);if(c){Ext.fly(c).addCls(this.selectedItemCls)}},onItemDeselect:function(d){var c=this.getNode(d);if(c){Ext.fly(c).removeCls(this.selectedItemCls)}},getItemSelector:function(){return this.itemSelector},addItemCls:function(d,f){var g=this.getNode(d);if(g){Ext.fly(g).addCls(f)}},removeItemCls:function(d,f){var g=this.getNode(d);if(g){Ext.fly(g).removeCls(f)}},setStore:function(d){var c=this;if(c.store!==d){if(c.isConfiguring){c.store=d}else{c.bindStore(d,false)}}},privates:{toggleChildrenTabbability:function(c){var d=this.getTargetEl();if(c){d.restoreTabbableState(true)}else{d.saveTabbableState({skipSelf:true,includeSaved:false})}},collectNodes:function(g){var d=this.all,f={role:this.itemAriaRole};d.fill(Ext.fly(g).query(this.getItemSelector()),d.startIndex||0);if(this.focusable){f.tabindex="-1"}d.set(f)},createMask:function(f){var h=this,j=h.getStore(),g;if(j&&!j.isEmptyStore&&!j.loadsSynchronously()){g={target:h,msg:h.loadingText,useMsg:h.loadingUseMsg,store:j};if(h.loadingCls){g.msgCls=h.loadingCls}if(Ext.isObject(f)){g=Ext.apply(g,f)}h.loadMask=new Ext.LoadMask(g);h.loadMask.on({scope:h,beforeshow:h.onMaskBeforeShow,hide:h.onMaskHide})}return h.loadMask},getOverflowEl:function(){return Ext.Component.prototype.getTargetEl.call(this)},getTargetEl:function(){return this.touchScroll?this.getScrollerEl():Ext.Component.prototype.getTargetEl.call(this)}}},1,0,["component","box"],{component:true,box:true},0,[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.view,"AbstractView"],function(){Ext.deprecate("extjs","4.0",function(){Ext.view.AbstractView.override({getSelectionCount:function(){if(Ext.global.console){Ext.global.console.warn("DataView: getSelectionCount will be removed, please interact with the Ext.selection.DataViewModel")}return this.selModel.getSelection().length},getSelectedRecords:function(){if(Ext.global.console){Ext.global.console.warn("DataView: getSelectedRecords will be removed, please interact with the Ext.selection.DataViewModel")}return this.selModel.getSelection()},select:function(g,f,h){if(Ext.global.console){Ext.global.console.warn("DataView: select will be removed, please access select through a DataView's SelectionModel, ie: view.getSelectionModel().select()")}var j=this.getSelectionModel();return j.select.apply(j,arguments)},clearSelections:function(){if(Ext.global.console){Ext.global.console.warn("DataView: clearSelections will be removed, please access deselectAll through DataView's SelectionModel, ie: view.getSelectionModel().deselectAll()")}var b=this.getSelectionModel();return b.deselectAll()}})})}));(Ext.cmd.derive("Ext.view.View",Ext.view.AbstractView,{alternateClassName:"Ext.DataView",inputTagRe:/^textarea$|^input$/i,keyEventRe:/^key/,inheritableStatics:{EventMap:{longpress:"LongPress",mousedown:"MouseDown",mouseup:"MouseUp",click:"Click",dblclick:"DblClick",contextmenu:"ContextMenu",mouseover:"MouseOver",mouseout:"MouseOut",mouseenter:"MouseEnter",mouseleave:"MouseLeave",keydown:"KeyDown",keyup:"KeyUp",keypress:"KeyPress",focus:"Focus"},TouchEventMap:{touchstart:"mousedown",touchend:"mouseup",tap:"click",doubletap:"dblclick"}},afterRender:function(){var b=this;Ext.view.AbstractView.prototype.afterRender.call(this);b.mon(b.el,{scope:b,click:b.handleEvent,longpress:b.handleEvent,mousedown:b.handleEvent,mouseup:b.handleEvent,dblclick:b.handleEvent,contextmenu:b.handleEvent,keydown:b.handleEvent,keyup:b.handleEvent,keypress:b.handleEvent,mouseover:b.handleMouseOver,mouseout:b.handleMouseOut})},getTargetSelector:function(){return this.dataRowSelector||this.itemSelector},handleMouseOver:function(h){var j=this,g=j.getTargetSelector(),f=h.getTarget(g);if(!j.destroyed){if(f){if(j.mouseOverItem!==f&&j.el.contains(f)){j.mouseOverItem=h.item=f;h.newType="mouseenter";j.handleEvent(h)}}else{j.handleEvent(h)}}},handleMouseOut:function(m){var p=this,h=p.getTargetSelector(),q=m.getTarget(h),o=m.getRelatedTarget(h),j;if((q===o)&&!(q===null&&o===null)){return}if(!p.destroyed){if(q&&(j=p.self.getBoundView(q))){m.item=q;m.newType="mouseleave";j.handleEvent(m);j.mouseOverItem=null}else{p.handleEvent(m)}}},handleEvent:function(g){var d=this,f=d.keyEventRe.test(g.type);g.view=d;g.item=g.getTarget(d.itemSelector);if(g.item){g.record=d.getRecord(g.item)}if(d.processUIEvent(g)!==false){d.processSpecialEvent(g)}if(f&&!Ext.fly(g.target).isInputField()){if(g.getKey()===g.SPACE||g.isNavKeyPress(true)){g.preventDefault()}}g.view=null},processItemEvent:Ext.emptyFn,processContainerEvent:Ext.emptyFn,processSpecialEvent:Ext.emptyFn,processUIEvent:function(u){if(!Ext.getBody().isAncestor(u.target)){return}var r=this,q=u.item,p=r.self,z=p.EventMap,t=p.TouchEventMap,v,w=u.record,s=u.type,y=s;if(u.newType){y=u.newType}if(q){y=t[y]||y;v=u.recordIndex=r.indexInStore?r.indexInStore(w):r.indexOf(q);if(!w||r.processItemEvent(w,q,v,u)===false){return false}if((r["onBeforeItem"+z[y]](w,q,v,u)===false)||(r.fireEvent("beforeitem"+y,r,w,q,v,u)===false)||(r["onItem"+z[y]](w,q,v,u)===false)){return false}r.fireEvent("item"+y,r,w,q,v,u)}else{s=t[s]||s;if((r.processContainerEvent(u)===false)||(r["onBeforeContainer"+z[s]](u)===false)||(r.fireEvent("beforecontainer"+s,r,u)===false)||(r["onContainer"+z[s]](u)===false)){return false}r.fireEvent("container"+s,r,u)}return true},onItemMouseEnter:function(g,j,f,h){if(this.trackOver){this.highlightItem(j)}},onItemMouseLeave:function(g,j,f,h){if(this.trackOver){this.clearHighlight()}},onItemMouseDown:Ext.emptyFn,onItemLongPress:Ext.emptyFn,onItemMouseUp:Ext.emptyFn,onItemFocus:Ext.emptyFn,onItemClick:Ext.emptyFn,onItemDblClick:Ext.emptyFn,onItemContextMenu:Ext.emptyFn,onItemKeyDown:Ext.emptyFn,onItemKeyUp:Ext.emptyFn,onItemKeyPress:Ext.emptyFn,onBeforeItemLongPress:Ext.emptyFn,onBeforeItemMouseDown:Ext.emptyFn,onBeforeItemMouseUp:Ext.emptyFn,onBeforeItemFocus:Ext.emptyFn,onBeforeItemMouseEnter:Ext.emptyFn,onBeforeItemMouseLeave:Ext.emptyFn,onBeforeItemClick:Ext.emptyFn,onBeforeItemDblClick:Ext.emptyFn,onBeforeItemContextMenu:Ext.emptyFn,onBeforeItemKeyDown:Ext.emptyFn,onBeforeItemKeyUp:Ext.emptyFn,onBeforeItemKeyPress:Ext.emptyFn,onContainerMouseDown:Ext.emptyFn,onContainerLongPress:Ext.emptyFn,onContainerMouseUp:Ext.emptyFn,onContainerMouseOver:Ext.emptyFn,onContainerMouseOut:Ext.emptyFn,onContainerClick:Ext.emptyFn,onContainerDblClick:Ext.emptyFn,onContainerContextMenu:Ext.emptyFn,onContainerKeyDown:Ext.emptyFn,onContainerKeyUp:Ext.emptyFn,onContainerKeyPress:Ext.emptyFn,onBeforeContainerMouseDown:Ext.emptyFn,onBeforeContainerLongPress:Ext.emptyFn,onBeforeContainerMouseUp:Ext.emptyFn,onBeforeContainerMouseOver:Ext.emptyFn,onBeforeContainerMouseOut:Ext.emptyFn,onBeforeContainerClick:Ext.emptyFn,onBeforeContainerDblClick:Ext.emptyFn,onBeforeContainerContextMenu:Ext.emptyFn,onBeforeContainerKeyDown:Ext.emptyFn,onBeforeContainerKeyUp:Ext.emptyFn,onBeforeContainerKeyPress:Ext.emptyFn,setHighlightedItem:function(j){var f=this,g=f.highlightedItem,h=f.overItemCls;if(g!==j){if(g){Ext.fly(g).removeCls(h);if(Ext.isIE8){f.repaintBorder(g);f.repaintBorder(g.nextSibling)}if(f.hasListeners.unhighlightitem){f.fireEvent("unhighlightitem",f,g)}}f.highlightedItem=j;if(j){Ext.fly(j).addCls(f.overItemCls);if(Ext.isIE8){f.repaintBorder(j.nextSibling)}if(f.hasListeners.highlightitem){f.fireEvent("highlightitem",f,j)}}}},highlightItem:function(b){this.setHighlightedItem(b)},clearHighlight:function(){this.setHighlightedItem(undefined)},handleUpdate:function(h,j){var m=this,o,q,p;if(m.viewReady){o=m.getNode(j);q=Ext.view.AbstractView.prototype.handleUpdate.apply(this,arguments);p=m.highlightedItem;if(p&&p===o){delete m.highlightedItem;if(q){m.highlightItem(q)}}}},refresh:function(){this.clearHighlight();Ext.view.AbstractView.prototype.refresh.apply(this,arguments)},focusNode:function(p){var r=this,s=Ext.fly(r.getNode(p)),t=r.el,o=0,m=0,q=t.getRegion(),u;q.bottom=q.top+t.dom.clientHeight;q.right=q.left+t.dom.clientWidth;if(s){u=s.getRegion();if(u.top<q.top){o=u.top-q.top}else{if(u.bottom>q.bottom){o=u.bottom-q.bottom}}if(u.left<q.left){m=u.left-q.left}else{if(u.right>q.right){m=u.right-q.right}}if(m||o){r.scrollBy(m,o,false)}s.set({tabIndex:-1});s.focus()}},privates:{repaintBorder:function(c){var d=this.getNode(c);if(d){d.className=d.className}}}},0,["dataview"],["component","box","dataview"],{component:true,box:true,dataview:true},["widget.dataview"],0,[Ext.view,"View",Ext,"DataView"],0));(Ext.cmd.derive("Ext.view.BoundListKeyNav",Ext.view.NavigationModel,{navigateOnSpace:true,initKeyNav:function(f){var d=this,g=f.pickerField;if(!d.keyNav){Ext.view.NavigationModel.prototype.initKeyNav.call(this,f);d.keyNav.map.addBinding({key:Ext.event.Event.ESC,fn:d.onKeyEsc,scope:d})}if(!g){return}if(!g.rendered){g.on("render",Ext.Function.bind(d.initKeyNav,d,[f],0),d,{single:true});return}d.fieldKeyNav=new Ext.util.KeyNav({disabled:true,target:g.inputEl,forceKeyDown:true,up:d.onKeyUp,down:d.onKeyDown,right:d.onKeyRight,left:d.onKeyLeft,pageDown:d.onKeyPageDown,pageUp:d.onKeyPageUp,home:d.onKeyHome,end:d.onKeyEnd,tab:d.onKeyTab,space:d.onKeySpace,enter:d.onKeyEnter,A:{ctrl:true,handler:d.onSelectAllKeyPress},priority:1001,scope:d})},processViewEvent:function(g,h,j,o,m){if(m.within(g.listWrap)){return m}if(m.getKey()===m.ESC){if(Ext.fly(m.target).isInputField()){m.target=m.target.parentNode}return m}},enable:function(){this.fieldKeyNav.enable();Ext.view.NavigationModel.prototype.enable.call(this)},disable:function(){this.fieldKeyNav.disable();Ext.view.NavigationModel.prototype.disable.call(this)},onItemMouseDown:function(g,h,j,o,m){Ext.view.NavigationModel.prototype.onItemMouseDown.call(this,g,h,j,o,m);m.preventDefault()},onKeyUp:function(o){var q=this,j=q.view,r=j.all,p=j.highlightedItem,s=p?j.indexOf(p):-1,m=s>0?s-1:r.getCount()-1;q.setPosition(m);o.preventDefault()},onKeyDown:function(o){var q=this,j=q.view,r=j.all,p=j.highlightedItem,s=p?j.indexOf(p):-1,m=s<r.getCount()-1?s+1:0;q.setPosition(m);o.preventDefault()},onKeyLeft:Ext.returnTrue,onKeyRight:Ext.returnTrue,onKeyTab:function(g){var f=this.view,d=f.pickerField;if(f.isVisible()){if(d.selectOnTab){this.selectHighlighted(g)}if(d.collapse){d.collapse()}}return true},onKeyEnter:function(j){var h=this.view,g=h.getSelectionModel(),m=h.pickerField,o=g.getCount();j.stopEvent();this.selectHighlighted(j);if(!m.multiSelect&&o===g.getCount()&&m.collapse){m.collapse()}return false},onKeySpace:function(){if(this.navigateOnSpace){Ext.view.NavigationModel.prototype.onKeySpace.apply(this,arguments)}return true},onKeyEsc:function(){if(this.view.pickerField){this.view.pickerField.collapse()}},focusItem:function(g){var d=this,f=d.view;if(typeof g==="number"){g=f.all.item(g)}if(g){g=g.dom;f.highlightItem(g);f.getScrollable().scrollIntoView(g,false)}},selectHighlighted:function(m){var o=this,h=o.view,j=h.getSelectionModel(),q,p=o.recordIndex;if(h.all.getCount()){q=o.getRecord();if(q){if(m.getKey()===m.ENTER||!j.isSelected(q)){j.selectWithEvent(q,m);if(!h.store.data.contains(q)){o.setPosition(Math.min(p,h.store.getCount()-1))}}}}},destroy:function(){this.fieldKeyNav=Ext.destroy(this.fieldKeyNav);Ext.view.NavigationModel.prototype.destroy.call(this)}},0,0,0,0,["view.navigation.boundlist"],0,[Ext.view,"BoundListKeyNav"],0));(Ext.cmd.derive("Ext.layout.component.BoundList",Ext.layout.component.Auto,{type:"component",beginLayout:function(h){var j=this,g=j.owner,f=g.pagingToolbar;j.scrollPos=g.listWrap.getScroll();Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);if(g.floating){h.savedXY=g.getXY();g.setXY([0,-9999])}if(f){h.toolbarContext=h.context.getCmp(f)}h.listContext=h.getEl("listWrap")},beginLayoutCycle:function(c){var d=this.owner;Ext.layout.component.Auto.prototype.beginLayoutCycle.apply(this,arguments);if(c.heightModel.auto){d.el.setHeight("auto");d.listWrap.setHeight("auto")}},getLayoutItems:function(){var b=this.owner.pagingToolbar;return b?[b]:[]},isValidParent:function(){return true},finishedLayout:function(p){var q=this,o=p.savedXY,j=q.owner,h=j.listWrap,m=q.scrollPos;Ext.layout.component.Auto.prototype.finishedLayout.apply(this,arguments);if(o){q.owner.setXY(o)}h.setScrollLeft(m.left);h.setScrollTop(m.top)},measureContentWidth:function(b){return this.owner.listWrap.getWidth()},measureContentHeight:function(b){return this.owner.listWrap.getHeight()},publishInnerHeight:function(j,g){var f=j.toolbarContext,h=0;if(f){h=f.getProp("height")}if(h===undefined){this.done=false}else{j.listContext.setHeight(g-j.getFrameInfo().height-h)}},calculateOwnerHeightFromContentHeight:function(g){var f=Ext.layout.component.Auto.prototype.calculateOwnerHeightFromContentHeight.apply(this,arguments),d=g.toolbarContext;if(d){f+=d.getProp("height")}return f}},0,0,0,0,["layout.boundlist"],0,[Ext.layout.component,"BoundList"],0));(Ext.cmd.derive("Ext.toolbar.Item",Ext.Component,{alternateClassName:"Ext.Toolbar.Item",enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn},0,["tbitem"],["component","box","tbitem"],{component:true,box:true,tbitem:true},["widget.tbitem"],0,[Ext.toolbar,"Item",Ext.Toolbar,"Item"],0));(Ext.cmd.derive("Ext.toolbar.TextItem",Ext.toolbar.Item,{alternateClassName:"Ext.Toolbar.TextItem",text:"",baseCls:"x-toolbar-text",ariaRole:null,beforeRender:function(){var b=this.text;Ext.toolbar.Item.prototype.beforeRender.call(this);if(b){this.html=b}},setText:function(b){this.update(b)}},0,["tbtext"],["component","box","tbitem","tbtext"],{component:true,box:true,tbitem:true,tbtext:true},["widget.tbtext"],0,[Ext.toolbar,"TextItem",Ext.Toolbar,"TextItem"],0));(Ext.cmd.derive("Ext.form.trigger.Spinner",Ext.form.trigger.Trigger,{cls:"x-form-trigger-spinner",spinnerCls:"x-form-spinner",spinnerUpCls:"x-form-spinner-up",spinnerDownCls:"x-form-spinner-down",focusCls:"x-form-spinner-focus",overCls:"x-form-spinner-over",clickCls:"x-form-spinner-click",focusFieldOnClick:true,vertical:true,bodyTpl:'<tpl if="vertical"><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerUpCls} {spinnerUpCls}-{ui} {childElCls} {upDisabledCls}"></div></tpl><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerDownCls} {spinnerDownCls}-{ui} {childElCls} {downDisabledCls}"></div><tpl if="!vertical"><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerUpCls} {spinnerUpCls}-{ui} {childElCls} {upDisabledCls}"></div></tpl>',destroy:function(){var b=this;if(b.spinnerEl){b.spinnerEl.destroy();b.spinnerEl=b.upEl=b.downEl=null}Ext.form.trigger.Trigger.prototype.destroy.call(this)},getBodyRenderData:function(){var b=this;return{vertical:b.vertical,upDisabledCls:b.upEnabled?"":(b.spinnerUpCls+"-disabled"),downDisabledCls:b.downEnabled?"":(b.spinnerDownCls+"-disabled"),spinnerCls:b.spinnerCls,spinnerUpCls:b.spinnerUpCls,spinnerDownCls:b.spinnerDownCls}},getStateEl:function(){return this.spinnerEl},onClick:function(){var f=this,g=arguments,h=f.clickRepeater?g[1]:g[0],j=f.field;if(!j.readOnly&&!j.disabled){if(f.upEl.contains(h.target)){Ext.callback(f.upHandler,f.scope,[j,f,h],0,j)}else{if(f.downEl.contains(h.target)){Ext.callback(f.downHandler,f.scope,[j,f,h],0,j)}}}j.inputEl.focus()},onFieldRender:function(){var f=this,g=f.vertical,h,j;Ext.form.trigger.Trigger.prototype.onFieldRender.call(this);h=f.spinnerEl=f.el.select("."+f.spinnerCls,true);j=h.elements;f.upEl=g?j[0]:j[1];f.downEl=g?j[1]:j[0]},setUpEnabled:function(b){this.upEl[b?"removeCls":"addCls"](this.spinnerUpCls+"-disabled")},setDownEnabled:function(b){this.downEl[b?"removeCls":"addCls"](this.spinnerDownCls+"-disabled")}},0,0,0,0,["trigger.spinner"],0,[Ext.form.trigger,"Spinner"],0));(Ext.cmd.derive("Ext.form.field.Spinner",Ext.form.field.Text,{alternateClassName:"Ext.form.Spinner",config:{triggers:{spinner:{type:"spinner",upHandler:"onSpinnerUpClick",downHandler:"onSpinnerDownClick",scope:"this"}}},spinUpEnabled:true,spinDownEnabled:true,keyNavEnabled:true,mouseWheelEnabled:true,repeatTriggerClick:true,onSpinUp:Ext.emptyFn,onSpinDown:Ext.emptyFn,ariaRole:"spinbutton",applyTriggers:function(d){var g=this,f=d.spinner;f.upEnabled=g.spinUpEnabled;f.downEnabled=g.spinDownEnabled;return Ext.form.field.Text.prototype.applyTriggers.call(this,d)},onRender:function(){var c=this,d=c.getTrigger("spinner");(arguments.callee.$previous||Ext.form.field.Text.prototype.onRender).call(this);if(c.keyNavEnabled){c.spinnerKeyNav=new Ext.util.KeyNav(c.inputEl,{scope:c,up:c.spinUp,down:c.spinDown})}if(c.mouseWheelEnabled){c.mon(c.bodyEl,"mousewheel",c.onMouseWheel,c)}c.spinUpEl=d.upEl;c.spinDownEl=d.downEl},onSpinnerUpClick:function(){this.spinUp()},onSpinnerDownClick:function(){this.spinDown()},spinUp:function(){var b=this;if(b.spinUpEnabled&&!b.disabled){b.fireEvent("spin",b,"up");b.fireEvent("spinup",b);b.onSpinUp()}},spinDown:function(){var b=this;if(b.spinDownEnabled&&!b.disabled){b.fireEvent("spin",b,"down");b.fireEvent("spindown",b);b.onSpinDown()}},setSpinUpEnabled:function(f){var d=this,g=d.spinUpEnabled;d.spinUpEnabled=f;if(g!==f&&d.rendered){d.getTrigger("spinner").setUpEnabled(f)}},setSpinDownEnabled:function(f){var d=this,g=d.spinDownEnabled;d.spinDownEnabled=f;if(g!==f&&d.rendered){d.getTrigger("spinner").setDownEnabled(f)}},onMouseWheel:function(d){var f=this,g;if(f.hasFocus){g=d.getWheelDelta();if(g>0){f.spinUp()}else{if(g<0){f.spinDown()}}d.stopEvent()}},onDestroy:function(){Ext.destroyMembers(this,"spinnerKeyNav");Ext.form.field.Text.prototype.onDestroy.call(this)}},0,["spinnerfield"],["component","box","field","textfield","spinnerfield"],{component:true,box:true,field:true,textfield:true,spinnerfield:true},["widget.spinnerfield"],0,[Ext.form.field,"Spinner",Ext.form,"Spinner"],0));(Ext.cmd.derive("Ext.form.field.Number",Ext.form.field.Spinner,{alternateClassName:["Ext.form.NumberField","Ext.form.Number"],allowExponential:true,allowDecimals:true,decimalSeparator:null,submitLocaleSeparator:true,decimalPrecision:2,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,step:1,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number",negativeText:"The value cannot be negative",baseChars:"0123456789",autoStripChars:false,initComponent:function(){var b=this;if(b.decimalSeparator===null){b.decimalSeparator=Ext.util.Format.decimalSeparator}Ext.form.field.Spinner.prototype.initComponent.call(this);b.setMinValue(b.minValue);b.setMaxValue(b.maxValue)},getSubTplData:function(s){var q=this,r=q.minValue,m=q.maxValue,o,j,p;o=Ext.form.field.Spinner.prototype.getSubTplData.call(this,s);j=o.inputElAriaAttributes;if(j){if(r>Number.NEGATIVE_INFINITY){j["aria-valuemin"]=r}if(m<Number.MAX_VALUE){j["aria-valuemax"]=m}p=q.getValue();if(p!=null&&p>=r&&p<=m){j["aria-valuenow"]=p}}return o},setValue:function(j){var f=this,h,g;if(f.hasFocus){h=f.getBind();g=h&&h.value;if(g&&g.syncing&&j===f.value){return f}}return Ext.form.field.Spinner.prototype.setValue.call(this,j)},getErrors:function(o){o=arguments.length>0?o:this.processRawValue(this.getRawValue());var g=this,j=Ext.form.field.Spinner.prototype.getErrors.call(this,o),m=Ext.String.format,h;if(o.length<1){return j}o=String(o).replace(g.decimalSeparator,".");if(isNaN(o)){j.push(m(g.nanText,o))}h=g.parseValue(o);if(g.minValue===0&&h<0){j.push(this.negativeText)}else{if(h<g.minValue){j.push(m(g.minText,g.minValue))}}if(h>g.maxValue){j.push(m(g.maxText,g.maxValue))}return j},rawToValue:function(c){var d=this.fixPrecision(this.parseValue(c));if(d===null){d=c||null}return d},valueToRaw:function(g){var d=this,f=d.decimalSeparator;g=d.parseValue(g);g=d.fixPrecision(g);g=Ext.isNumber(g)?g:parseFloat(String(g).replace(f,"."));g=isNaN(g)?"":String(g).replace(".",f);return g},getSubmitValue:function(){var d=this,c=Ext.form.field.Spinner.prototype.getSubmitValue.call(this);if(!d.submitLocaleSeparator){c=c.replace(d.decimalSeparator,".")}return c},onChange:function(c){var d=this.ariaEl.dom;this.toggleSpinners();Ext.form.field.Spinner.prototype.onChange.apply(this,arguments);if(d){if(Ext.isNumber(c)&&isFinite(c)){d.setAttribute("aria-valuenow",c)}else{d.removeAttribute("aria-valuenow")}}},toggleSpinners:function(){var j=this,h=j.getValue(),f=h===null,g;if(j.spinUpEnabled||j.spinUpDisabledByToggle){g=f||h<j.maxValue;j.setSpinUpEnabled(g,true)}if(j.spinDownEnabled||j.spinDownDisabledByToggle){g=f||h>j.minValue;j.setSpinDownEnabled(g,true)}},setMinValue:function(m){var g=this,h=g.ariaEl.dom,o,j,h;g.minValue=o=Ext.Number.from(m,Number.NEGATIVE_INFINITY);g.toggleSpinners();if(h){if(o>Number.NEGATIVE_INFINITY){h.setAttribute("aria-valuemin",o)}else{h.removeAttribute("aria-valuemin")}}if(g.disableKeyFilter!==true){j=g.baseChars+"";if(g.allowExponential){j+=g.decimalSeparator+"e+-"}else{if(g.allowDecimals){j+=g.decimalSeparator}if(g.minValue<0){j+="-"}}j=Ext.String.escapeRegex(j);g.maskRe=new RegExp("["+j+"]");if(g.autoStripChars){g.stripCharsRe=new RegExp("[^"+j+"]","gi")}}},setMaxValue:function(d){var f=this.ariaEl.dom,g;this.maxValue=g=Ext.Number.from(d,Number.MAX_VALUE);if(f){if(g<Number.MAX_VALUE){f.setAttribute("aria-valuemax",g)}else{f.removeAttribute("aria-valuemax")}}this.toggleSpinners()},parseValue:function(b){b=parseFloat(String(b).replace(this.decimalSeparator,"."));return isNaN(b)?null:b},fixPrecision:function(h){var j=this,f=isNaN(h),g=j.decimalPrecision;if(f||!h){return f?"":h}else{if(!j.allowDecimals||g<=0){g=0}}return parseFloat(Ext.Number.toFixed(parseFloat(h),g))},onBlur:function(g){var d=this,f=d.rawToValue(d.getRawValue());if(!Ext.isEmpty(f)){d.setValue(f)}Ext.form.field.Spinner.prototype.onBlur.call(this,g)},setSpinUpEnabled:function(c,d){Ext.form.field.Spinner.prototype.setSpinUpEnabled.apply(this,arguments);if(!d){delete this.spinUpDisabledByToggle}else{this.spinUpDisabledByToggle=!c}},onSpinUp:function(){var b=this;if(!b.readOnly){b.setSpinValue(Ext.Number.constrain(b.getValue()+b.step,b.minValue,b.maxValue))}},setSpinDownEnabled:function(c,d){Ext.form.field.Spinner.prototype.setSpinDownEnabled.apply(this,arguments);if(!d){delete this.spinDownDisabledByToggle}else{this.spinDownDisabledByToggle=!c}},onSpinDown:function(){var b=this;if(!b.readOnly){b.setSpinValue(Ext.Number.constrain(b.getValue()-b.step,b.minValue,b.maxValue))}},setSpinValue:function(c){var d=this;if(d.enforceMaxLength){if(d.fixPrecision(c).toString().length>d.maxLength){return}}d.setValue(c)}},0,["numberfield"],["component","box","field","textfield","spinnerfield","numberfield"],{component:true,box:true,field:true,textfield:true,spinnerfield:true,numberfield:true},["widget.numberfield"],0,[Ext.form.field,"Number",Ext.form,"NumberField",Ext.form,"Number"],0));(Ext.cmd.derive("Ext.toolbar.Paging",Ext.toolbar.Toolbar,{alternateClassName:"Ext.PagingToolbar",displayInfo:false,prependButtons:false,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",inputItemWidth:30,emptyPageData:{total:0,currentPage:0,pageCount:0,toRecord:0,fromRecord:0},defaultBindProperty:"store",getPagingItems:function(){var c=this,d={scope:c,blur:c.onPagingBlur};d[Ext.supports.SpecialKeyDownRepeat?"keydown":"keypress"]=c.onPagingKeyDown;return[{itemId:"first",tooltip:c.firstText,overflowText:c.firstText,iconCls:"x-tbar-page-first",disabled:true,handler:c.moveFirst,scope:c},{itemId:"prev",tooltip:c.prevText,overflowText:c.prevText,iconCls:"x-tbar-page-prev",disabled:true,handler:c.movePrevious,scope:c},"-",c.beforePageText,{xtype:"numberfield",itemId:"inputItem",name:"inputItem",cls:"x-tbar-page-number",allowDecimals:false,minValue:1,hideTrigger:true,enableKeyEvents:true,keyNavEnabled:false,selectOnFocus:true,submitValue:false,isFormField:false,width:c.inputItemWidth,margin:"-1 2 3 2",listeners:d},{xtype:"tbtext",itemId:"afterTextItem",html:Ext.String.format(c.afterPageText,1)},"-",{itemId:"next",tooltip:c.nextText,overflowText:c.nextText,iconCls:"x-tbar-page-next",disabled:true,handler:c.moveNext,scope:c},{itemId:"last",tooltip:c.lastText,overflowText:c.lastText,iconCls:"x-tbar-page-last",disabled:true,handler:c.moveLast,scope:c},"-",{itemId:"refresh",tooltip:c.refreshText,overflowText:c.refreshText,iconCls:"x-tbar-loading",disabled:c.store.isLoading(),handler:c.doRefresh,scope:c}]},initComponent:function(){var d=this,f=d.items||d.buttons||[],g;d.bindStore(d.store||"ext-empty-store",true);g=d.getPagingItems();if(d.prependButtons){d.items=f.concat(g)}else{d.items=g.concat(f)}delete d.buttons;if(d.displayInfo){d.items.push("->");d.items.push({xtype:"tbtext",itemId:"displayItem"})}Ext.toolbar.Toolbar.prototype.initComponent.call(this)},beforeRender:function(){Ext.toolbar.Toolbar.prototype.beforeRender.apply(this,arguments);this.updateBarInfo()},updateBarInfo:function(){var b=this;if(!b.store.isLoading()){b.calledInternal=true;b.onLoad();b.calledInternal=false}},updateInfo:function(){var o=this,q=o.child("#displayItem"),j=o.store,h=o.getPageData(),p,m;if(q){p=j.getCount();if(p===0){m=o.emptyMsg}else{m=Ext.String.format(o.displayMsg,h.fromRecord,h.toRecord,h.total)}q.setText(m)}},onLoad:function(){var q=this,t,m,u,o,r,p,s;r=q.store.getCount();p=r===0;if(!p){t=q.getPageData();m=t.currentPage;u=t.pageCount;if(m>u){if(u>0){q.store.loadPage(u)}else{q.getInputItem().reset()}return}o=Ext.String.format(q.afterPageText,isNaN(u)?1:u)}else{m=0;u=0;o=Ext.String.format(q.afterPageText,0)}Ext.suspendLayouts();s=q.child("#afterTextItem");if(s){s.update(o)}s=q.getInputItem();if(s){s.setDisabled(p).setValue(m)}q.setChildDisabled("#first",m===1||p);q.setChildDisabled("#prev",m===1||p);q.setChildDisabled("#next",m===u||p);q.setChildDisabled("#last",m===u||p);q.setChildDisabled("#refresh",false);q.updateInfo();Ext.resumeLayouts(true);if(!q.calledInternal){q.fireEvent("change",q,t||q.emptyPageData)}},setChildDisabled:function(f,d){var g=this.child(f);if(g){g.setDisabled(d)}},getPageData:function(){var c=this.store,d=c.getTotalCount();return{total:d,currentPage:c.currentPage,pageCount:Math.ceil(d/c.pageSize),fromRecord:((c.currentPage-1)*c.pageSize)+1,toRecord:Math.min(c.currentPage*c.pageSize,d)}},onLoadError:function(){this.setChildDisabled("#refresh",false)},getInputItem:function(){return this.child("#inputItem")},readPageFromInput:function(f){var j=this.getInputItem(),h=false,g;if(j){g=j.getValue();h=parseInt(g,10);if(!g||isNaN(h)){j.setValue(f.currentPage);return false}}return h},onPagingBlur:function(g){var d=this.getInputItem(),f;if(d){f=this.getPageData().currentPage;d.setValue(f)}},onPagingKeyDown:function(c,d){this.processKeyEvent(c,d)},processKeyEvent:function(o,p){var r=this,s=p.getKey(),j=r.getPageData(),m=p.shiftKey?10:1,q;if(s===p.RETURN){p.stopEvent();q=r.readPageFromInput(j);if(q!==false){q=Math.min(Math.max(1,q),j.pageCount);if(q!==j.currentPage&&r.fireEvent("beforechange",r,q)!==false){r.store.loadPage(q)}}}else{if(s===p.HOME||s===p.END){p.stopEvent();q=s===p.HOME?1:j.pageCount;o.setValue(q)}else{if(s===p.UP||s===p.PAGE_UP||s===p.DOWN||s===p.PAGE_DOWN){p.stopEvent();q=r.readPageFromInput(j);if(q){if(s===p.DOWN||s===p.PAGE_DOWN){m*=-1}q+=m;if(q>=1&&q<=j.pageCount){o.setValue(q)}}}}}},beforeLoad:function(){this.setChildDisabled("#refresh",true)},moveFirst:function(){if(this.fireEvent("beforechange",this,1)!==false){this.store.loadPage(1);return true}return false},movePrevious:function(){var g=this,f=g.store,d=f.currentPage-1;if(d>0){if(g.fireEvent("beforechange",g,d)!==false){f.previousPage();return true}}return false},moveNext:function(){var h=this,g=h.store,j=h.getPageData().pageCount,f=g.currentPage+1;if(f<=j){if(h.fireEvent("beforechange",h,f)!==false){g.nextPage();return true}}return false},moveLast:function(){var c=this,d=c.getPageData().pageCount;if(c.fireEvent("beforechange",c,d)!==false){c.store.loadPage(d);return true}return false},doRefresh:function(){var d=this,f=d.store,g=f.currentPage;if(d.fireEvent("beforechange",d,g)!==false){f.loadPage(g);return true}return false},getStoreListeners:function(){return{beforeload:this.beforeLoad,load:this.onLoad,exception:this.onLoadError}},onBindStore:function(){if(this.rendered){this.updateBarInfo()}},onDestroy:function(){this.bindStore(null);Ext.toolbar.Toolbar.prototype.onDestroy.call(this)}},0,["pagingtoolbar"],["component","box","container","toolbar","pagingtoolbar"],{component:true,box:true,container:true,toolbar:true,pagingtoolbar:true},["widget.pagingtoolbar"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.toolbar,"Paging",Ext,"PagingToolbar"],0));Ext.define("Ext.theme.neptune.toolbar.Paging",{override:"Ext.toolbar.Paging",defaultButtonUI:"plain-toolbar",inputItemWidth:40});Ext.define("Ext.theme.triton.toolbar.Paging",{override:"Ext.toolbar.Paging",inputItemWidth:50});(Ext.cmd.derive("Ext.view.BoundList",Ext.view.View,{alternateClassName:"Ext.BoundList",pageSize:0,baseCls:"x-boundlist",itemCls:"x-boundlist-item",listItemCls:"",shadow:false,trackOver:true,preserveScrollOnRefresh:true,enableInitialSelection:false,refreshSelmodelOnRefresh:true,componentLayout:"boundlist",navigationModel:"boundlist",scrollable:true,ariaEl:"listEl",tabIndex:-1,childEls:["listWrap","listEl"],renderTpl:['<div id="{id}-listWrap" data-ref="listWrap"',' class="{baseCls}-list-ct ',Ext.dom.Element.unselectableCls,'">','<ul id="{id}-listEl" data-ref="listEl" class="',"x-",'list-plain"','<tpl foreach="ariaAttributes"> {$}="{.}"</tpl>',">","</ul>","</div>","{%","var pagingToolbar=values.$comp.pagingToolbar;","if (pagingToolbar) {","Ext.DomHelper.generateMarkup(pagingToolbar.getRenderTree(), out);","}","%}",{disableFormats:true}],focusOnToFront:false,initComponent:function(){var d=this,f=d.baseCls,g=d.itemCls;d.selectedItemCls=f+"-selected";if(d.trackOver){d.overItemCls=f+"-item-over"}d.itemSelector="."+g;d.scrollerSelector="ul.x-list-plain";if(d.floating){d.addCls(f+"-floating")}if(!d.tpl){d.tpl=new Ext.XTemplate('<tpl for=".">','<li role="option" unselectable="on" class="'+g+'">'+d.getInnerTpl(d.displayField)+"</li>","</tpl>")}else{if(!d.tpl.isTemplate){d.tpl=new Ext.XTemplate(d.tpl)}}if(d.pageSize){d.pagingToolbar=d.createPagingToolbar()}Ext.view.View.prototype.initComponent.call(this)},getRefOwner:function(){return this.pickerField||Ext.view.View.prototype.getRefOwner.call(this)},getRefItems:function(){var d=Ext.view.View.prototype.getRefItems.call(this),c=this.pagingToolbar;if(c){d.push(c)}return d},createPagingToolbar:function(){return Ext.widget("pagingtoolbar",{id:this.id+"-paging-toolbar",pageSize:this.pageSize,store:this.dataSource,border:false,ownerCt:this,ownerLayout:this.getComponentLayout()})},getNodeContainer:function(){return this.listEl},refresh:function(){var c=this,d=c.tpl;d.field=c.pickerField;d.store=c.store;Ext.view.View.prototype.refresh.call(this);d.field=d.store=null},bindStore:function(f,d){var g=this.pagingToolbar;Ext.view.View.prototype.bindStore.apply(this,arguments);if(g){g.bindStore(f,d)}},getInnerTpl:function(b){return"{"+b+"}"},onShow:function(){var b=this.pickerField;Ext.view.View.prototype.onShow.call(this);if(b&&b.rendered&&!b.hasFocus){b.focus()}},afterComponentLayout:function(o,h,g,j){var m=this.pickerField;Ext.view.View.prototype.afterComponentLayout.call(this,o,h,g,j);if(m&&m.alignPicker){m.alignPicker()}},onItemClick:function(h){var m=this,j=m.pickerField,g,o;if(!j){return}g=j.valueField;o=m.getSelectionModel().getSelection();if(!j.multiSelect&&o.length){o=o[0];if(o&&j.isEqual(h.get(g),o.get(g))&&j.collapse){j.collapse()}}},onContainerClick:function(c){var d=this.pagingToolbar;if(d&&d.rendered&&c.within(d.el)){return false}},onDestroy:function(){Ext.view.View.prototype.onDestroy.call(this);Ext.destroyMembers(this,"pagingToolbar","listWrap","listEl")},privates:{getTargetEl:function(){return this.listEl},getOverflowEl:function(){return this.listWrap},finishRenderChildren:function(){var b=this.pagingToolbar;Ext.view.View.prototype.finishRenderChildren.apply(this,arguments);if(b){b.finishRender()}}}},0,["boundlist"],["component","box","dataview","boundlist"],{component:true,box:true,dataview:true,boundlist:true},["widget.boundlist"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.view,"BoundList",Ext,"BoundList"],0));(Ext.cmd.derive("Ext.form.field.ComboBox",Ext.form.field.Picker,{alternateClassName:"Ext.form.ComboBox",config:{filters:null,selection:null,valueNotFoundText:null,displayTpl:false,delimiter:", ",displayField:"text"},publishes:["selection"],twoWayBindable:["selection"],triggerCls:"x-form-arrow-trigger",hiddenName:"",collapseOnSelect:false,hiddenDataCls:"x-hidden-display x-form-data-hidden",ariaRole:"combobox",childEls:{hiddenDataEl:true},filtered:false,afterRender:function(){var b=this;Ext.form.field.Picker.prototype.afterRender.apply(this,arguments);b.setHiddenValue(b.value)},multiSelect:false,triggerAction:"all",allQuery:"",queryParam:"query",queryMode:"remote",queryCaching:true,autoLoadOnValue:false,pageSize:0,anyMatch:false,caseSensitive:false,autoSelect:true,typeAhead:false,typeAheadDelay:250,selectOnTab:true,forceSelection:false,growToLongestValue:true,clearFilterOnBlur:true,defaultListConfig:{loadingHeight:70,minWidth:70,maxHeight:300,shadow:"sides"},transformInPlace:true,clearValueOnEmpty:true,getGrowWidth:function(){var t=this,r=t.inputEl.dom.value,s,q,p,u,v,o,w;if(t.growToLongestValue){s=t.displayField;q=t.store;p=q.data.length;u=0;for(v=0;v<p;v++){o=q.getAt(v).data[s];w=o.length;if(w>u){u=w;r=o}}}return r},initComponent:function(){var o=this,q=Ext.isDefined,h=o.store,p=o.transform,j,m;if("pinList" in o){o.collapseOnSelect=!o.pinList}if(p){j=Ext.getDom(p);if(j){if(!o.store){h=Ext.Array.map(Ext.Array.from(j.options),function(a){return[a.value,a.text]})}if(!o.name){o.name=j.name}if(!("value" in o)){o.value=j.value}}}o.bindStore(h||"ext-empty-store",true,true);m=o.queryMode==="local";if(!q(o.queryDelay)){o.queryDelay=m?10:500}if(!q(o.minChars)){o.minChars=m?0:4}Ext.form.field.Picker.prototype.initComponent.call(this);o.doQueryTask=new Ext.util.DelayedTask(o.doRawQuery,o);if(j){if(o.transformInPlace){o.render(j.parentNode,j);delete o.renderTo}Ext.removeNode(j)}},getSubTplData:function(d){var g,f;g=Ext.form.field.Picker.prototype.getSubTplData.call(this,d);f=g.inputElAriaAttributes;if(f){f["aria-autocomplete"]="list"}return g},getSubTplMarkup:function(j){var h=this,g="",f=Ext.form.field.Picker.prototype.getSubTplMarkup.apply(this,arguments);if(h.hiddenName){g='<div id="'+j.id+'-hiddenDataEl" data-ref="hiddenDataEl" class="'+h.hiddenDataCls+'" role="presentation"></div>'}return g+f},applyDisplayTpl:function(c){var d=this;if(!c){c=new Ext.XTemplate('<tpl for=".">{[typeof values === "string" ? values : values["'+d.getDisplayField()+'"]]}<tpl if="xindex < xcount">'+d.getDelimiter()+"</tpl></tpl>");c.auto=true}else{if(!c.isTemplate){c=new Ext.XTemplate(c)}}return c},applyFilters:function(d,g){var f=this;if(d===null||d.isFilterCollection){return d}if(d){if(!g){g=this.getFilters()}g.beginUpdate();g.splice(0,g.length,d);g.each(function(a){a.ownerId=f.id});g.endUpdate()}return g},applyValueNotFoundText:function(f){var d=this,g=d.valueNotFoundRecord||(d.valueNotFoundRecord=new Ext.data.Model());g.set(d.displayField,f);if(d.valueField&&d.displayField!==d.valueField){g.set(d.valueField,f)}return f},getFilters:function(c){var d=this.filters;if(!d&&c!==false){d=new Ext.util.FilterCollection();this.setFilters(d)}return d},updateFilters:function(f,d){var g=this;if(d){d.un("endupdate","onEndUpdateFilters",g)}if(f){f.on("endupdate","onEndUpdateFilters",g)}g.onEndUpdateFilters(f)},onEndUpdateFilters:function(o){var p=this,m=p.filtered,q=!!o&&(o.length>0),j,h;if(m||q){p.filtered=q;j=[];h=p.store.getFilters();h.each(function(a){if(a.ownerId===p.id&&!o.contains(a)){j.push(a)}});h.splice(0,j,o.items)}},completeEdit:function(g){var d=this,f=d.queryFilter;Ext.form.field.Picker.prototype.completeEdit.call(this,g);d.doQueryTask.cancel();d.assertValue();if(f&&d.queryMode==="local"&&d.clearFilterOnBlur){d.getStore().getFilters().remove(f)}},onFocus:function(c){var d=this;Ext.form.field.Picker.prototype.onFocus.call(this,c);if(d.triggerAction!=="all"&&d.queryFilter&&d.queryMode==="local"&&d.clearFilterOnBlur){delete d.lastQuery;d.doRawQuery()}},assertValue:function(){var g=this,o=g.getRawValue(),h=g.getDisplayValue(),m=g.lastSelectedRecords,j;if(g.forceSelection){if(g.multiSelect){if(o!==h){g.setRawValue(h)}}else{j=g.findRecordByDisplay(o);if(j){if(g.getDisplayValue([g.getRecordDisplayData(j)])!==h){g.select(j,true)}}else{if(m&&(!g.allowBlank||g.rawValue)){g.setValue(m)}else{if(m){delete g.lastSelectedRecords}g.setRawValue("")}}}}g.collapse()},onTypeAhead:function(){var q=this,r=q.displayField,j=q.store.findRecord(r,q.getRawValue()),s=q.getPicker(),p,m,o;if(j){p=j.get(r);m=p.length;o=q.getRawValue().length;s.highlightItem(s.getNode(j));if(o!==0&&o!==m){q.setRawValue(p);q.selectText(o,p.length)}}},resetToDefault:Ext.emptyFn,beforeReset:function(){var b=this.queryFilter;Ext.form.field.Picker.prototype.beforeReset.call(this);if(b){this.getStore().getFilters().remove(b)}},onUnbindStore:function(){var g=this,f=g.picker,d=g.queryFilter;if(d&&!g.store.destroyed){g.changingFilters=true;g.getStore().removeFilter(d,true);g.changingFilters=false}g.pickerSelectionModel.destroy();if(f){f.bindStore(null)}},onBindStore:function(j,q){var o=this,h=o.picker,p,m;if(j){if(j.autoCreated){o.queryMode="local";o.valueField=o.displayField="field1";if(!j.expanded){o.displayField="field2"}if(o.getDisplayTpl().auto){o.setDisplayTpl(null)}}if(!Ext.isDefined(o.valueField)){o.valueField=o.displayField}p={byValue:{rootProperty:"data",unique:false}};p.byValue.property=o.valueField;j.setExtraKeys(p);if(o.displayField===o.valueField){j.byText=j.byValue}else{p.byText={rootProperty:"data",unique:false};p.byText.property=o.displayField;j.setExtraKeys(p)}m={rootProperty:"data",extraKeys:{byInternalId:{property:"internalId"},byValue:{property:o.valueField,rootProperty:"data"}},listeners:{beginupdate:o.onValueCollectionBeginUpdate,endupdate:o.onValueCollectionEndUpdate,scope:o}};o.valueCollection=new Ext.util.Collection(m);o.pickerSelectionModel=new Ext.selection.DataViewModel({mode:o.multiSelect?"SIMPLE":"SINGLE",deselectOnContainerClick:false,enableInitialSelection:false,pruneRemoved:false,selected:o.valueCollection,store:j,listeners:{scope:o,lastselectedchanged:o.updateBindSelection}});if(!q){o.resetToDefault()}if(h){h.setSelectionModel(o.pickerSelectionModel);if(h.getStore()!==j){h.bindStore(j)}}}},bindStore:function(h,j,g){var m=this,o=m.queryFilter;m.mixins.storeholder.bindStore.call(m,h,g);h=m.getStore();if(h&&o&&!j){h.getFilters().add(o)}if(!g&&h&&!h.isEmptyStore){m.setValueOnData()}},getStoreListeners:function(d){if(!d.isEmptyStore){var g=this,f={datachanged:g.onDataChanged,load:g.onLoad,exception:g.onException,update:g.onStoreUpdate,remove:g.checkValueOnChange};if(!d.getRemoteFilter()){f.filterchange=g.checkValueOnChange}return f}},onDataChanged:function(){if(this.grow&&this.growToLongestValue){this.autoSize()}},checkValueOnChange:function(){var b=this;if(!b.destroying&&b.getStore().isLoaded()){if(b.multiSelect){}else{if(b.forceSelection&&!b.changingFilters&&!b.findRecordByValue(b.value)){b.setValue(null)}}}},onStoreUpdate:function(c,d){this.updateValue()},onException:function(){this.collapse()},onLoad:function(o,g,j){var m=this,h=!m.valueCollection.byValue.get(m.value);if(j&&h&&!(o.lastOptions&&"rawQuery" in o.lastOptions)){m.setValueOnData()}m.checkValueOnChange()},setValueOnData:function(){var b=this;b.setValue(b.value);if(b.isExpanded&&b.getStore().getCount()){b.doAutoSelect()}},doRawQuery:function(){var d=this,c=d.inputEl.dom.value;if(d.multiSelect){c=c.split(d.delimiter).pop()}d.doQuery(c,false,true)},doQuery:function(o,s,p){var r=this,m=r.getStore(),q=m.filters&&!m.filters.length&&!!o,j=r.beforeQuery({query:o||"",rawQuery:p,forceAll:s,combo:r,cancel:false});if(j!==false&&!j.cancel){if(r.queryCaching&&!q&&j.query===r.lastQuery){r.getPicker().refresh();r.expand()}else{r.lastQuery=j.query;if(r.queryMode==="local"){r.doLocalQuery(j)}else{r.doRemoteQuery(j)}}}return true},beforeQuery:function(d){var c=this;if(c.fireEvent("beforequery",d)===false){d.cancel=true}else{if(!d.cancel){if(d.query.length<c.minChars&&!d.forceAll){d.cancel=true}}}return d},doLocalQuery:function(g){var m=this,j=g.query,h=m.getStore(),o=m.queryFilter;m.queryFilter=null;m.changingFilters=true;if(o){h.removeFilter(o,true)}if(j){o=m.queryFilter=new Ext.util.Filter({id:m.id+"-filter",anyMatch:m.anyMatch,caseSensitive:m.caseSensitive,root:"data",property:m.displayField,value:m.enableRegEx?new RegExp(j):j});h.addFilter(o,true)}m.changingFilters=false;if(m.store.getCount()||m.getPicker().emptyText){m.getPicker().refresh();m.expand()}else{m.collapse()}m.afterQuery(g)},doRemoteQuery:function(d){var g=this,f=function(){if(!g.destroyed){g.afterQuery(d)}};g.expand();if(g.pageSize){g.loadPage(1,{rawQuery:d.rawQuery,callback:f})}else{g.store.load({params:g.getParams(d.query),rawQuery:d.rawQuery,callback:f})}},afterQuery:function(d){var c=this;if(c.store.getCount()){if(c.typeAhead){c.doTypeAhead()}if(d.rawQuery){if(c.picker&&!c.picker.getSelectionModel().hasSelection()){c.doAutoSelect()}}else{c.doAutoSelect()}}c.startCheckChangeTask()},loadPage:function(c,d){this.store.loadPage(c,Ext.apply({params:this.getParams(this.lastQuery)},d))},onPageChange:function(c,d){this.loadPage(d);return false},getParams:function(g){var d={},f=this.queryParam;if(f){d[f]=g}return d},doAutoSelect:function(){var j=this,f=j.picker,g,h=0;if(f&&j.autoSelect&&j.store.getCount()>0){g=j.picker.getSelectionModel();if(g.lastSelected&&g.selected.length){h=g.lastSelected}f.getNavigationModel().setPosition(h)}},doTypeAhead:function(){var c=this,d=Ext.event.Event;if(!c.typeAheadTask){c.typeAheadTask=new Ext.util.DelayedTask(c.onTypeAhead,c)}if(c.lastKey!==d.BACKSPACE&&c.lastKey!==d.DELETE){c.typeAheadTask.delay(c.typeAheadDelay)}},onTriggerClick:function(){var b=this;if(!b.readOnly&&!b.disabled){if(b.isExpanded){b.collapse()}else{if(b.triggerAction==="all"){b.doQuery(b.allQuery,true)}else{if(b.triggerAction==="last"){b.doQuery(b.lastQuery,true)}else{b.doQuery(b.getRawValue(),false,true)}}}}},onFieldMutation:function(m){var p=this,h=m.getKey(),q=h===m.BACKSPACE||h===m.DELETE,o=p.inputEl.dom.value,j=o.length;if(!p.readOnly&&(o!==p.lastMutatedValue||q)&&h!==m.TAB){p.lastMutatedValue=o;p.lastKey=h;if(j&&(m.type!=="keyup"||(!m.isSpecialKey()||q))){p.doQueryTask.delay(p.queryDelay)}else{if(!j&&(!h||q)){++p.suspendCheckChange;if(!p.multiSelect){p.value=null;p.displayTplData=undefined}if(p.clearValueOnEmpty){p.valueCollection.beginUpdate();p.pickerSelectionModel.deselectAll();p.valueCollection.removeAll();p.valueCollection.endUpdate()}p.collapse();if(p.queryFilter){p.changingFilters=true;p.store.removeFilter(p.queryFilter,true);p.changingFilters=false}--p.suspendCheckChange}Ext.form.field.Picker.prototype.onFieldMutation.call(this,m)}}},onDestroy:function(){var b=this;b.doQueryTask.cancel();if(b.typeAheadTask){b.typeAheadTask.cancel();b.typeAheadTask=null}b.bindStore(null);b.valueCollection=Ext.destroy(b.valueCollection);Ext.form.field.Picker.prototype.onDestroy.call(this)},onAdded:function(){var b=this;Ext.form.field.Picker.prototype.onAdded.apply(this,arguments);if(b.picker){b.picker.ownerCt=b.up("[floating]");b.picker.registerWithOwnerCt()}},createPicker:function(){var g=this,d,f=Ext.apply({xtype:"boundlist",id:g.pickerId,pickerField:g,selectionModel:g.pickerSelectionModel,floating:true,hidden:true,store:g.getPickerStore(),displayField:g.displayField,preserveScrollOnRefresh:true,pageSize:g.pageSize,tpl:g.tpl},g.listConfig,g.defaultListConfig);d=g.picker=Ext.widget(f);if(g.pageSize){d.pagingToolbar.on("beforechange",g.onPageChange,g)}if(!d.initialConfig.maxHeight){d.on({beforeshow:g.onBeforePickerShow,scope:g})}d.getSelectionModel().on({beforeselect:g.onBeforeSelect,beforedeselect:g.onBeforeDeselect,focuschange:g.onFocusChange,scope:g});d.getNavigationModel().navigateOnSpace=false;return d},getPickerStore:function(){return this.store},onBeforePickerShow:function(g){var f=this,h=f.getPosition()[1]-Ext.getBody().getScroll().top,j=Ext.Element.getViewportHeight()-h-f.getHeight();g.maxHeight=Math.max(h,j)-5},onBeforeSelect:function(g,f,d){return this.fireEvent("beforeselect",this,f,d)},onBeforeDeselect:function(g,f,d){return this.fireEvent("beforedeselect",this,f,d)},onFocusChange:function(o,h,g){var m=this.picker,j;if(g){j=Ext.get(m.getNodeByRecord(g));if(j){this.ariaEl.dom.setAttribute("aria-activedescendant",j.id)}}},getSelection:function(){var d=this.getPicker().getSelectionModel(),c=d.getSelection();return c.length?d.getLastSelected():null},updateSelection:function(f){var d=this,g;if(!d.ignoreNextSelection){d.ignoreNextSelection=true;g=d.getPicker().getSelectionModel();if(f){g.select(f);d.hasHadSelection=true}else{g.deselectAll()}d.ignoreNextSelection=false}},updateBindSelection:function(g,j){var h=this,f=null;if(!h.ignoreNextSelection){h.ignoreNextSelection=true;if(j.length){f=g.getLastSelected();h.hasHadSelection=true}if(h.hasHadSelection){h.setSelection(f)}h.ignoreNextSelection=false}},onValueCollectionBeginUpdate:Ext.emptyFn,onValueCollectionEndUpdate:function(){var m=this,o=m.store,j=m.valueCollection.getRange(),g=j[0],h=j.length;m.updateBindSelection(m.pickerSelectionModel,j);if(m.isSelectionUpdating()){return}Ext.suspendLayouts();m.lastSelection=j;if(h){m.lastSelectedRecords=j}m.updateValue();if(h&&((!m.multiSelect&&o.contains(g))||m.collapseOnSelect||!o.getCount())){m.updatingValue=true;m.collapse();m.updatingValue=false}Ext.resumeLayouts(true);if(h&&!m.suspendCheckChange){if(!m.multiSelect){j=g}m.fireEvent("select",m,j)}},isSelectionUpdating:function(){var b=this.pickerSelectionModel;return b.deselectingDuringSelect||b.refreshing},onExpand:function(){var b=this.getPicker().getNavigationModel();if(b){b.enable()}this.doAutoSelect()},onCollapse:function(){var b=this.getPicker().getNavigationModel();if(b){b.disable()}if(this.updatingValue){this.doQueryTask.cancel()}},select:function(m,h){var o=this,g=o.picker,j;if(m&&m.isModel&&h===true&&g){j=!g.getSelectionModel().isSelected(m)}if(!j){o.suspendEvent("select")}o.setValue(m);o.resumeEvent("select")},findRecord:function(h,j){var f=this.store,g=f.findExact(h,j);return g!==-1?f.getAt(g):false},getSelectedRecord:function(){return this.findRecordByValue(this.value)||null},findRecordByValue:function(g){var f=this.store.byValue.get(g),d=false;if(f){d=f[0]||f}return d},findRecordByDisplay:function(g){var f=this.store.byText.get(g),d=false;if(f){d=f[0]||f}return d},addValue:function(b){if(b!=null){return this.doSetValue(b,true)}},setValue:function(c){var d=this;if(c!=null){return d.doSetValue(c)}else{d.suspendEvent("select");d.valueCollection.beginUpdate();d.pickerSelectionModel.deselectAll();d.valueCollection.endUpdate();d.lastSelectedRecords=null;d.resumeEvent("select")}},setRawValue:function(b){Ext.form.field.Picker.prototype.setRawValue.call(this,b);this.lastMutatedValue=b},doSetValue:function(H,N){var M=this,R=M.getStore(),Q=R.getModel(),E=[],S=[],F=M.autoLoadOnValue,T=R.getCount()>0||R.isLoaded(),X=R.hasPendingLoad(),L=F&&!T&&!X,O=M.forceSelection,I=M.pickerSelectionModel,W=M.displayField===M.valueField,J=R.isEmptyStore,P=M.lastSelection,D,C,V,G,U,K;if(X||L||!T||J){if(!H.isModel){if(N){M.value=Ext.Array.from(M.value).concat(H)}else{M.value=H}M.setHiddenValue(M.value);M.setRawValue(W?H:"")}if(L&&!J){R.load()}if(!H.isModel||J){return M}}H=N?Ext.Array.from(M.value).concat(H):Ext.Array.from(H);for(D=0,C=H.length;D<C;D++){V=H[D];if(!V||!V.isModel){V=M.findRecordByValue(K=V);if(!V){V=M.valueCollection.find(M.valueField,K)}}if(!V){if(!O){if(!V&&H[D]){G={};G[M.displayField]=H[D];if(M.valueField&&M.displayField!==M.valueField){G[M.valueField]=H[D]}V=new Q(G)}}else{if(M.valueNotFoundRecord){V=M.valueNotFoundRecord}}}if(V){E.push(V);S.push(V.get(M.valueField))}}if(P){C=P.length;if(C===E.length){for(D=0;!U&&D<C;D++){if(Ext.Array.indexOf(M.lastSelection,E[D])===-1){U=true}}}else{U=true}}else{U=E.length}if(U){M.suspendEvent("select");M.valueCollection.beginUpdate();if(E.length){I.select(E,false)}else{I.deselectAll()}M.valueCollection.endUpdate();M.resumeEvent("select")}else{M.updateValue()}if(M.inputEl&&M.emptyText){M.inputEl.removeCls(M.emptyCls);M.valueContainsPlaceholder=false}M.applyEmptyText();return M},updateValue:function(){var s=this,p=s.valueCollection.getRange(),o=p.length,t=[],r=s.displayTplData||(s.displayTplData=[]),q=s.inputEl,u,m;r.length=0;for(u=0;u<o;u++){m=p[u];r.push(s.getRecordDisplayData(m));if(m!==s.valueNotFoundRecord){t.push(m.get(s.valueField))}}s.setHiddenValue(t);s.value=s.multiSelect?t:t[0];if(!Ext.isDefined(s.value)){s.value=undefined}s.displayTplData=r;if(q&&s.emptyText&&!Ext.isEmpty(s.value)){q.removeCls(s.emptyCls)}s.setRawValue(s.getDisplayValue());s.checkChange();s.applyEmptyText()},setHiddenValue:function(p){var s=this,w=s.hiddenName,t,v,o,q,r,u;if(!s.hiddenDataEl||!w){return}p=Ext.Array.from(p);v=s.hiddenDataEl.dom;o=v.childNodes;q=o[0];r=p.length;u=o.length;if(!q&&r>0){s.hiddenDataEl.setHtml(Ext.DomHelper.markup({tag:"input",type:"hidden",name:w}));u=1;q=v.firstChild}while(u>r){v.removeChild(o[0]);--u}while(u<r){v.appendChild(q.cloneNode(true));++u}for(t=0;t<r;t++){o[t].value=p[t]}},getDisplayValue:function(b){b=b||this.displayTplData;return this.getDisplayTpl().apply(b)},getRecordDisplayData:function(b){return b.data},getValue:function(){var o=this,h=o.getStore(),g=o.picker,j=o.getRawValue(),m=o.value;if(!h.isEmptyStore&&o.getDisplayValue()!==j){o.displayTplData=undefined;if(g){o.valueCollection.suspendEvents();g.getSelectionModel().deselectAll();o.valueCollection.resumeEvents();o.lastSelection=null}if(h.isLoaded()&&(o.multiSelect||o.forceSelection)){m=o.value=undefined}else{m=o.value=j}}o.value=m==null?null:m;return o.value},getSubmitValue:function(){var b=this.getValue();if(Ext.isEmpty(b)){b=""}return b},isEqual:function(j,m){var g=Ext.Array.from,o,h;j=g(j);m=g(m);h=j.length;if(h!==m.length){return false}for(o=0;o<h;o++){if(m[o]!==j[o]){return false}}return true},clearValue:function(){this.setValue(null)}},0,["combobox","combo"],["component","box","field","textfield","pickerfield","combobox","combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true},["widget.combo","widget.combobox"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.form.field,"ComboBox",Ext.form,"ComboBox"],0));(Ext.cmd.derive("Ext.form.field.FileButton",Ext.button.Button,{childEls:["fileInputEl"],inputCls:"x-form-file-input",cls:"x-form-file-btn",preventDefault:false,tabIndex:undefined,autoEl:{tag:"div",unselectable:"on"},afterTpl:['<input id="{id}-fileInputEl" data-ref="fileInputEl" class="{childElCls} {inputCls}" ','type="file" size="1" name="{inputName}" role="{role}" ','<tpl if="tabIndex != null">tabindex="{tabIndex}"</tpl>',">"],keyHandlers:null,ariaEl:"fileInputEl",getAfterMarkup:function(b){return this.getTpl("afterTpl").apply(b)},getTemplateArgs:function(){var c=this,d;d=Ext.button.Button.prototype.getTemplateArgs.call(this);d.inputCls=c.inputCls;d.inputName=c.inputName||c.id;d.tabIndex=c.tabIndex||null;d.role=c.ariaRole;return d},afterRender:function(){var b=this;Ext.button.Button.prototype.afterRender.apply(this,arguments);b.fileInputEl.on({scope:b,change:b.fireChange,focus:b.onFileFocus,blur:b.onFileBlur})},fireChange:function(b){this.fireEvent("change",this,b,this.fileInputEl.dom.value)},createFileInput:function(d){var g=this,f=g.fileInputEl=g.el.createChild({name:g.inputName,id:!d?g.id+"-fileInputEl":undefined,cls:g.inputCls,tag:"input",type:"file",size:1,role:"button"});f.dom.setAttribute("data-componentid",g.id);f.on({scope:g,change:g.fireChange,focus:g.onFileFocus,blur:g.onFileBlur})},onFileFocus:function(c){var d=this.ownerCt;if(!this.hasFocus){this.onFocus(c)}if(d&&!d.hasFocus){d.onFocus(c)}},onFileBlur:function(c){var d=this.ownerCt;if(this.hasFocus){this.onBlur(c)}if(d&&d.hasFocus){d.onBlur(c)}},reset:function(d){var c=this;if(d){c.fileInputEl.destroy()}c.createFileInput(!d)},restoreInput:function(d){var c=this;c.fileInputEl.destroy();d=Ext.get(d);c.el.appendChild(d);c.fileInputEl=d},onDisable:function(){Ext.button.Button.prototype.onDisable.call(this);this.fileInputEl.dom.disabled=true},onEnable:function(){Ext.button.Button.prototype.onEnable.call(this);this.fileInputEl.dom.disabled=false},privates:{getFocusEl:function(){return this.fileInputEl},getFocusClsEl:function(){return this.el}}},0,["filebutton"],["component","box","button","filebutton"],{component:true,box:true,button:true,filebutton:true},["widget.filebutton"],0,[Ext.form.field,"FileButton"],0));(Ext.cmd.derive("Ext.form.trigger.Component",Ext.form.trigger.Trigger,{cls:"x-form-trigger-cmp",onFieldRender:function(){var c=this,d=c.component;Ext.form.trigger.Trigger.prototype.onFieldRender.call(this);if(!d.isComponent&&!d.isWidget){d=Ext.widget(d)}c.component=d;d.render(c.el)},destroy:function(){var b=this.component;if(b.isComponent||b.isWidget){b.destroy()}this.component=null;Ext.form.trigger.Trigger.prototype.destroy.call(this)}},0,0,0,0,["trigger.component"],0,[Ext.form.trigger,"Component"],0));(Ext.cmd.derive("Ext.form.field.File",Ext.form.field.Text,{alternateClassName:["Ext.form.FileUploadField","Ext.ux.form.FileUploadField","Ext.form.File"],emptyText:undefined,needArrowKeys:false,triggers:{filebutton:{type:"component",hideOnReadOnly:false,preventMouseDown:false}},buttonText:"Browse...",buttonOnly:false,buttonMargin:3,clearOnSubmit:true,extraFieldBodyCls:"x-form-file-wrap",inputCls:"x-form-text-file",readOnly:true,editable:false,submitValue:false,triggerNoEditCls:"",childEls:["browseButtonWrap"],applyTriggers:function(f){var d=this,g=(f||{}).filebutton;if(g){g.component=Ext.apply({xtype:"filebutton",ownerCt:d,id:d.id+"-button",ui:d.ui,disabled:d.disabled,text:d.buttonText,style:d.buttonOnly?"":d.getButtonMarginProp()+d.buttonMargin+"px",inputName:d.getName(),listeners:{scope:d,change:d.onFileChange}},d.buttonConfig);return Ext.form.field.Text.prototype.applyTriggers.call(this,f)}},getSubTplData:function(d){var c=Ext.form.field.Text.prototype.getSubTplData.call(this,d);c.tabIdx=-1;return c},onRender:function(){var m=this,j,o,h,g;(arguments.callee.$previous||Ext.form.field.Text.prototype.onRender).apply(this,arguments);j=m.inputEl;j.dom.name="";j.on("focus",m.onInputFocus,m);j.on("mousedown",m.onInputMouseDown,m);g=m.getTrigger("filebutton");o=m.button=g.component;m.fileInputEl=o.fileInputEl;h=o.el;if(m.buttonOnly){m.inputWrap.setDisplayed(false);m.shrinkWrap=3}g.el.setWidth(h.getWidth()+h.getMargin("lr"));if(Ext.isIE){m.button.getEl().repaint()}},getTriggerMarkup:function(){return'<td id="'+this.id+'-browseButtonWrap" data-ref="browseButtonWrap" role="presentation"></td>'},onFileChange:function(f,g,d){this.duringFileSelect=true;Ext.form.field.File.superclass.setValue.call(this,d);delete this.duringFileSelect},didValueChange:function(){return !!this.duringFileSelect},setEmptyText:Ext.emptyFn,setValue:Ext.emptyFn,reset:function(){var c=this,d=c.clearOnSubmit;if(c.rendered){c.button.reset(d);c.fileInputEl=c.button.fileInputEl;if(d){c.inputEl.dom.value="";Ext.form.field.File.superclass.setValue.call(this,null)}}Ext.form.field.Text.prototype.reset.call(this)},onShow:function(){Ext.form.field.Text.prototype.onShow.call(this);this.button.updateLayout()},onDisable:function(){Ext.form.field.Text.prototype.onDisable.call(this);this.button.disable()},onEnable:function(){Ext.form.field.Text.prototype.onEnable.call(this);this.button.enable()},isFileUpload:Ext.returnTrue,extractFileInput:function(){var c=this,d;if(c.rendered){d=c.button.fileInputEl.dom;c.reset()}else{d=document.createElement("input");d.type="file";d.className="x-hidden-display";d.name=c.getName()}return d},restoreInput:function(c){if(this.rendered){var d=this.button;d.restoreInput(c);this.fileInputEl=d.fileInputEl}},onDestroy:function(){this.fileInputEl=this.button=null;Ext.form.field.Text.prototype.onDestroy.call(this)},getButtonMarginProp:function(){return"margin-left:"},onInputFocus:function(b){this.focus();if(Ext.isIE9m){this.fileInputEl.addCls("x-position-relative");this.fileInputEl.removeCls("x-position-relative")}},onInputMouseDown:function(b){b.preventDefault();this.focus()},privates:{getFocusEl:function(){return this.button},getFocusClsEl:Ext.privateFn}},0,["fileuploadfield","filefield"],["component","box","field","textfield","filefield","fileuploadfield"],{component:true,box:true,field:true,textfield:true,filefield:true,fileuploadfield:true},["widget.filefield","widget.fileuploadfield"],0,[Ext.form.field,"File",Ext.form,"FileUploadField",Ext.ux.form,"FileUploadField",Ext.form,"File"],0));(Ext.cmd.derive("Ext.form.field.Hidden",Ext.form.field.Base,{alternateClassName:"Ext.form.Hidden",focusable:false,inputType:"hidden",isTextInput:false,hideLabel:true,hidden:true,ariaRole:"presentation",initComponent:function(){this.formItemCls+="-hidden";Ext.form.field.Base.prototype.initComponent.call(this)},isEqual:function(c,d){return this.isEqualAsString(c,d)},initEvents:Ext.emptyFn,setSize:Ext.emptyFn,setWidth:Ext.emptyFn,setHeight:Ext.emptyFn,setPosition:Ext.emptyFn,setPagePosition:Ext.emptyFn,markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn},0,["hidden","hiddenfield"],["component","box","field","hiddenfield","hidden"],{component:true,box:true,field:true,hiddenfield:true,hidden:true},["widget.hidden","widget.hiddenfield"],0,[Ext.form.field,"Hidden",Ext.form,"Hidden"],0));(Ext.cmd.derive("Ext.tip.Tip",Ext.panel.Panel,{alternateClassName:"Ext.Tip",minWidth:40,maxWidth:500,shadow:"sides",defaultAlign:"tl-bl?",constrainPosition:true,autoRender:true,hidden:true,baseCls:"x-tip",focusOnToFront:false,maskOnDisable:false,closeAction:"hide",alwaysFramed:true,frameHeader:false,initComponent:function(){var b=this;b.floating=Ext.apply({},{shadow:b.shadow,constrain:b.constrainPosition},b.self.prototype.floating);Ext.panel.Panel.prototype.initComponent.apply(this,arguments);b.constrain=b.constrain||b.constrainPosition},showAt:function(c){var d=this;Ext.panel.Panel.prototype.showAt.apply(this,arguments);if(d.isVisible()){d.setPagePosition(c[0],c[1]);if(d.constrainPosition||d.constrain){d.doConstrain()}d.toFront(true)}},privates:{initDraggable:function(){var b=this;b.draggable={el:b.getDragEl(),delegate:b.header.el,constrain:b,constrainTo:b.el.dom.parentNode};Ext.Component.prototype.initDraggable.call(b)}},ghost:undefined,unghost:undefined},0,["tip"],["component","box","container","panel","tip"],{component:true,box:true,container:true,panel:true,tip:true},["widget.tip"],0,[Ext.tip,"Tip",Ext,"Tip"],0));(Ext.cmd.derive("Ext.tip.ToolTip",Ext.tip.Tip,{alternateClassName:"Ext.ToolTip",autoHide:true,showDelay:500,hideDelay:200,dismissDelay:5000,trackMouse:false,anchorToTarget:true,anchorOffset:0,targetCounter:0,quickShowInterval:250,hideAction:"hide",fadeOutDuration:1000,ariaRole:"tooltip",initComponent:function(){var b=this;Ext.tip.Tip.prototype.initComponent.apply(this,arguments);b.lastActive=new Date();b.setTarget(b.target);b.origAnchor=b.anchor},onRender:function(d,f){var g=this;Ext.tip.Tip.prototype.onRender.apply(this,arguments);g.anchorCls="x-tip-anchor-"+g.getAnchorPosition();g.anchorEl=g.el.createChild({role:"presentation",cls:"x-tip-anchor "+g.anchorCls})},setTarget:function(h){var f=this,g=Ext.get(h),j;if(f.target){j=Ext.get(f.target);if(Ext.supports.Touch){f.mun(j,"tap",f.onTargetOver,f)}else{f.mun(j,{mouseover:f.onTargetOver,mouseout:f.onTargetOut,mousemove:f.onMouseMove,scope:f})}}f.target=g;if(g){if(Ext.supports.Touch){f.mon(g,{tap:f.onTargetOver,scope:f})}else{f.mon(g,{mouseover:f.onTargetOver,mouseout:f.onTargetOut,mousemove:f.onMouseMove,scope:f})}}if(f.anchor){f.anchorTarget=f.target}},onMouseMove:function(h){var f=this,g,j;if(!f.target||f.target.contains(h.target)){g=f.delegate?h.getTarget(f.delegate):(f.triggerElement=true);if(g){f.targetXY=h.getXY();if(g===f.triggerElement){if(!f.hidden&&f.trackMouse){j=f.getTargetXY();if(f.constrainPosition){j=f.el.adjustForConstraints(j,f.el.parent())}f.setPagePosition(j)}}else{f.hide();f.lastActive=new Date(0);f.onTargetOver(h)}}else{if((!f.closable&&f.isVisible())&&f.autoHide!==false){f.delayHide()}}}},getTargetXY:function(){var w=this,C,D,s,F,y,u,B,t,v,E,z,A;if(w.delegate){w.anchorTarget=w.triggerElement}if(w.anchor){w.targetCounter++;D=w.getOffsets();s=(w.anchorToTarget&&!w.trackMouse)?w.getAlignToXY(w.anchorTarget,w.getAnchorAlign()):w.targetXY;F=Ext.Element.getViewportWidth()-5;y=Ext.Element.getViewportHeight()-5;u=document.documentElement;B=document.body;t=(u.scrollLeft||B.scrollLeft||0)+5;v=(u.scrollTop||B.scrollTop||0)+5;E=[s[0]+D[0],s[1]+D[1]];z=w.getSize();A=w.constrainPosition;w.anchorEl.removeCls(w.anchorCls);if(w.targetCounter<2&&A){if(E[0]<t){if(w.anchorToTarget){w.defaultAlign="l-r";if(w.mouseOffset){w.mouseOffset[0]*=-1}}w.anchor="left";return w.getTargetXY()}if(E[0]+z.width>F){if(w.anchorToTarget){w.defaultAlign="r-l";if(w.mouseOffset){w.mouseOffset[0]*=-1}}w.anchor="right";return w.getTargetXY()}if(E[1]<v){if(w.anchorToTarget){w.defaultAlign="t-b";if(w.mouseOffset){w.mouseOffset[1]*=-1}}w.anchor="top";return w.getTargetXY()}if(E[1]+z.height>y){if(w.anchorToTarget){w.defaultAlign="b-t";if(w.mouseOffset){w.mouseOffset[1]*=-1}}w.anchor="bottom";return w.getTargetXY()}}w.anchorCls="x-tip-anchor-"+w.getAnchorPosition();w.anchorEl.addCls(w.anchorCls);w.targetCounter=0;return E}else{C=w.getMouseOffset();return(w.targetXY)?[w.targetXY[0]+C[0],w.targetXY[1]+C[1]]:C}},calculateConstrainedPosition:function(g){var o=this,j,h,m;if(!g&&o.isContainedFloater()){j=o.isVisible();if(!j){o.el.show()}h=o.getTargetXY();if(!j){o.el.hide()}m=o.floatParent.getTargetEl().getViewRegion();h[0]-=m.left;h[1]-=m.top}else{h=o.callOverridden(arguments)}return h},getMouseOffset:function(){var d=this,c=d.anchor?[0,0]:[15,18];if(d.mouseOffset){c[0]+=d.mouseOffset[0];c[1]+=d.mouseOffset[1]}return c},fadeOut:function(){var b=this;b.el.fadeOut({duration:b.fadeOutDuration,callback:function(){b.hide();b.el.setOpacity("")}})},getAnchorPosition:function(){var c=this,d;if(c.anchor){c.tipAnchor=c.anchor.charAt(0)}else{d=c.defaultAlign.match(/^([a-z]+)-([a-z]+)(\?)?$/);c.tipAnchor=d[1].charAt(0)}switch(c.tipAnchor){case"t":return"top";case"b":return"bottom";case"r":return"right"}return"left"},getAnchorAlign:function(){switch(this.anchor){case"top":return"tl-bl";case"left":return"tl-tr";case"right":return"tr-tl";default:return"bl-tl"}},getOffsets:function(){var j=this,h,f,g=j.getAnchorPosition().charAt(0);if(j.anchorToTarget&&!j.trackMouse){switch(g){case"t":f=[0,9];break;case"b":f=[0,-13];break;case"r":f=[-13,0];break;default:f=[9,0];break}}else{switch(g){case"t":f=[-15-j.anchorOffset,30];break;case"b":f=[-19-j.anchorOffset,-13-j.el.dom.offsetHeight];break;case"r":f=[-15-j.el.dom.offsetWidth,-13-j.anchorOffset];break;default:f=[25,-13-j.anchorOffset];break}}h=j.getMouseOffset();f[0]+=h[0];f[1]+=h[1];return f},onTargetOver:function(h){var j=this,f=j.delegate,g;if(j.disabled||h.within(j.target.dom,true)){return}g=f?h.getTarget(f):true;if(g){j.triggerElement=g;j.triggerEvent=h;j.clearTimer("hide");j.targetXY=h.getXY();j.delayShow()}},delayShow:function(g){var f=this,d=f.el&&(g===false||!f.trackMouse)&&f.getTargetXY();if(f.hidden&&!f.showTimer){if(Ext.Date.getElapsed(f.lastActive)<f.quickShowInterval){f.show()}else{f.showTimer=Ext.defer(f.showFromDelay,f.showDelay,f,[d])}}else{if(!f.hidden&&f.autoHide!==false){f.show(d)}}},showFromDelay:function(c){var d=this;if(d.disabled){return}d.fromDelayShow=true;d.show(c);delete d.fromDelayShow},onShowVeto:function(){Ext.tip.Tip.prototype.onShowVeto.call(this);delete this.triggerElement;this.clearTimer("show")},onTargetOut:function(h){var f=this,g=f.triggerElement,j=g===true?f.target:g;if(f.disabled||!g||h.within(j,true)){return}if(f.showTimer){f.clearTimer("show");f.triggerElement=null}if(f.autoHide!==false){f.delayHide()}},delayHide:function(){var b=this;if(!b.hidden&&!b.hideTimer){b.hideTimer=Ext.defer(b[b.hideAction],b.hideDelay,b)}},hide:function(){var b=this;b.clearTimer("dismiss");b.lastActive=new Date();if(b.anchorEl){b.anchorEl.hide()}Ext.tip.Tip.prototype.hide.apply(this,arguments);delete b.triggerElement},show:function(c){var d=this;Ext.tip.Tip.prototype.show.call(this);if(this.hidden===false){if(d.anchor){d.anchor=d.origAnchor}if(!d.calledFromShowAt){d.showAt(c||d.getTargetXY())}}},showAt:function(c){var d=this;d.lastActive=new Date();d.clearTimers();d.calledFromShowAt=true;if(!d.isVisible()){Ext.tip.Tip.prototype.showAt.apply(this,arguments)}if(d.isVisible()){d.setPagePosition(c[0],c[1]);if(d.constrainPosition||d.constrain){d.doConstrain()}d.toFront(true);d.el.syncUnderlays();if(d.dismissDelay&&d.autoHide!==false){d.dismissTimer=Ext.defer(d.hide,d.dismissDelay,d)}}delete d.calledFromShowAt},syncAnchor:function(){var j=this,g,f,h;switch(j.tipAnchor.charAt(0)){case"t":g="b";f="tl";h=[20+j.anchorOffset,1];break;case"r":g="l";f="tr";h=[-1,12+j.anchorOffset];break;case"b":g="t";f="bl";h=[20+j.anchorOffset,-1];break;default:g="r";f="tl";h=[1,12+j.anchorOffset];break}j.anchorEl.alignTo(j.el,g+"-"+f,h);j.anchorEl.setStyle("z-index",parseInt(j.el.getZIndex(),10)||0+1).setVisibilityMode(Ext.Element.DISPLAY)},afterSetPosition:function(f,g){var d=this;Ext.tip.Tip.prototype.afterSetPosition.apply(this,arguments);if(d.anchor){d.syncAnchor();if(!d.anchorEl.isVisible()){d.anchorEl.show()}}else{d.anchorEl.hide()}},_timerNames:{},clearTimer:function(h){var g=this,m=g._timerNames,o=m[h]||(m[h]=h+"Timer"),j=g[o];if(j){clearTimeout(j);g[o]=null}},clearTimers:function(){var b=this;b.clearTimer("show");b.clearTimer("dismiss");b.clearTimer("hide")},onShow:function(){var b=this;Ext.tip.Tip.prototype.onShow.call(this);b.mon(Ext.getDoc(),"mousedown",b.onDocMouseDown,b)},onHide:function(){var b=this;Ext.tip.Tip.prototype.onHide.call(this);b.mun(Ext.getDoc(),"mousedown",b.onDocMouseDown,b)},onDocMouseDown:function(c){var d=this;if(!d.closable&&!c.within(d.el.dom)){d.disable();Ext.defer(d.doEnable,100,d)}},doEnable:function(){if(!this.destroyed){this.enable()}},onDisable:function(){Ext.tip.Tip.prototype.onDisable.call(this);this.clearTimers();this.hide()},beforeDestroy:function(){var b=this;b.clearTimers();Ext.destroy(b.anchorEl);delete b.anchorEl;delete b.target;delete b.anchorTarget;delete b.triggerElement;Ext.tip.Tip.prototype.beforeDestroy.call(this)},onDestroy:function(){Ext.getDoc().un("mousedown",this.onDocMouseDown,this);Ext.tip.Tip.prototype.onDestroy.call(this)}},0,["tooltip"],["component","box","container","panel","tip","tooltip"],{component:true,box:true,container:true,panel:true,tip:true,tooltip:true},["widget.tooltip"],0,[Ext.tip,"ToolTip",Ext,"ToolTip"],0));(Ext.cmd.derive("Ext.tip.QuickTip",Ext.tip.ToolTip,{alternateClassName:"Ext.QuickTip",interceptTitles:false,title:"&#160;",tagConfig:{namespace:"data-",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign",anchor:"anchor",showDelay:"qshowDelay",hideAction:"hideAction",anchorTarget:"anchorTarget"},isQuickTip:true,shrinkWrapDock:true,initComponent:function(){var b=this;b.target=b.target||Ext.getDoc();b.targets=b.targets||{};Ext.tip.ToolTip.prototype.initComponent.call(this)},setTagConfig:function(b){this.tagConfig=Ext.apply({},b);delete this.tagConfig.attr},text:null,register:function(s){var o=Ext.isArray(s)?s:arguments,r=0,m=o.length,p,j,q;for(;r<m;r++){s=o[r];p=s.target;if(p){if(Ext.isArray(p)){for(j=0,q=p.length;j<q;j++){this.targets[Ext.id(p[j])]=s}}else{this.targets[Ext.id(p)]=s}}}},unregister:function(b){delete this.targets[Ext.id(b)]},cancelShow:function(f){var d=this,g=d.activeTarget;f=Ext.get(f).dom;if(d.isVisible()){if(g&&g.el===f){d.hide()}}else{if(g&&g.el===f){d.clearTimer("show")}}},getTipCfg:function(o,p){var q=o.title,h=this.tagConfig,j=h.attr||(h.attr=h.namespace+h.attribute),m;if(this.interceptTitles&&q&&Ext.isString(q)){o.setAttribute(j,q);o.removeAttribute("title");return{text:q}}else{o=Ext.fly(o).findParent(function(a){return(m=a.getAttribute(j))});if(o){return{target:o,text:m}}}},onTargetOver:function(b){this.doTargetOver(b.getTarget(this.delegate),null,b)},doTargetOver:function(A,J,H){var z=this,I,E,D,G,B,y,F,v,C,K,w,L;if(z.disabled){return}if(typeof A==="string"){A=Ext.getDom(A)}z.targetXY=J||(H?H.getXY():Ext.fly(A).getXY());if(!A||A.nodeType!==1||A===document.documentElement||A===document.body){return}if(z.activeTarget&&((A===z.activeTarget.el)||Ext.fly(z.activeTarget.el).contains(A))){if(z.targetTextEmpty()){z.onShowVeto();delete z.activeTarget}else{z.clearTimer("hide");z.show()}return}if(A){C=z.targets;for(L in C){if(C.hasOwnProperty(L)){w=C[L];K=Ext.fly(w.target);if(K&&(K.dom===A||K.contains(A))){G=K.dom;break}}}if(G){z.activeTarget=z.targets[G.id];z.activeTarget.el=A;z.anchor=z.activeTarget.anchor;if(z.anchor){z.anchorTarget=A}I=parseInt(z.activeTarget.showDelay,10);if(I){D=z.showDelay;z.showDelay=I}z.delayShow();if(I){z.showDelay=D}if(!(E=z.activeTarget.hideAction)){delete z.hideAction}else{z.hideAction=E}return}}G=Ext.fly(A,"_quicktip-target");B=z.tagConfig;y=B.namespace;F=z.getTipCfg(A,H);if(F){if(F.target){A=F.target;G=Ext.fly(A,"_quicktip-target")}v=G.getAttribute(y+B.hide);z.activeTarget={el:A,text:F.text,width:+G.getAttribute(y+B.width)||null,autoHide:v!=="user"&&v!=="false",title:G.getAttribute(y+B.title),cls:G.getAttribute(y+B.cls),align:G.getAttribute(y+B.align),showDelay:parseInt(G.getAttribute(y+B.showDelay)||0,10),hideAction:G.getAttribute(y+B.hideAction),anchorTarget:G.getAttribute(y+B.anchorTarget)};if(!z.initialConfig.hasOwnProperty("anchor")){z.anchor=G.getAttribute(y+B.anchor)}if(z.anchor&&!z.initialConfig.hasOwnProperty("anchorTarget")){z.anchorTarget=z.activeTarget.anchorTarget||A}I=parseInt(z.activeTarget.showDelay,10);if(I){D=z.showDelay;z.showDelay=I}z.delayShow();if(I){z.showDelay=D}}},onTargetOut:function(j){var o=this,m=o.activeTarget,h,g;if(m&&j.within(o.activeTarget.el)&&!o.getTipCfg(j.getTarget(),j)){return}o.clearTimer("show");delete o.activeTarget;if(o.autoHide!==false){h=m&&parseInt(m.hideDelay,10);if(h){g=o.hideDelay;o.hideDelay=h}o.delayHide();if(h){o.hideDelay=g}}},targetTextEmpty:function(){var o=this,m=o.activeTarget,h=o.tagConfig,g,j;if(m){g=m.el;if(g){j=g.getAttribute(h.namespace+h.attribute);if(!j&&!o.targets[Ext.id(m.target)]){return true}}}return false},show:function(){var c=this,d=c.fromDelayShow;if(d&&c.targetTextEmpty()){c.onShowVeto();delete c.activeTarget;return}Ext.tip.ToolTip.prototype.show.apply(this,arguments)},showAt:function(o){var q=this,p=q.activeTarget,m=q.header,h,j;if(p){if(!q.rendered){q.render(Ext.getBody());q.activeTarget=p}q.suspendLayouts();if(p.title){q.setTitle(p.title);m.show()}else{if(m){m.hide()}}q.update(p.text);q.autoHide=p.autoHide;h=p.dismissDelay;q.dismissDelay=Ext.isNumber(h)?h:q.dismissDelay;if(p.mouseOffset){o[0]+=p.mouseOffset[0];o[1]+=p.mouseOffset[1]}j=q.lastCls;if(j){q.removeCls(j);delete q.lastCls}j=p.cls;if(j){q.addCls(j);q.lastCls=j}q.setWidth(p.width);if(q.anchor){q.constrainPosition=false}else{if(p.align){o=q.getAlignToXY(p.el,p.align);q.constrainPosition=false}else{q.constrainPosition=true}}q.resumeLayouts(true)}Ext.tip.ToolTip.prototype.showAt.call(this,o)},showByTarget:function(p){var s=this,q,j,r,m,o;q=s.targets[p.id];if(q){s.activeTarget=q;s.activeTarget.el=Ext.get(p).dom;s.anchor=s.activeTarget.anchor;j=p.getSize();r=p.getXY();s.showAt([r[0],r[1]+j.height])}},hide:function(){delete this.activeTarget;Ext.tip.ToolTip.prototype.hide.call(this)}},0,["quicktip"],["component","box","container","panel","tip","tooltip","quicktip"],{component:true,box:true,container:true,panel:true,tip:true,tooltip:true,quicktip:true},["widget.quicktip"],0,[Ext.tip,"QuickTip",Ext,"QuickTip"],0));(Ext.cmd.derive("Ext.tip.QuickTipManager",Ext.Base,{singleton:true,alternateClassName:"Ext.QuickTips",disabled:false,init:function(o,h){var p=this;if(!p.tip){if(!Ext.isReady){Ext.onInternalReady(function(){Ext.tip.QuickTipManager.init(o,h)});return false}var j=Ext.apply({disabled:p.disabled,id:"ext-quicktips-tip"},h),q=j.className,m=j.xtype;if(q){delete j.className}else{if(m){q="widget."+m;delete j.xtype}}if(o!==false){j.renderTo=document.body}p.tip=Ext.create(q||"Ext.tip.QuickTip",j);Ext.quickTipsActive=true}},destroy:function(){Ext.destroy(this.tip);this.tip=undefined},ddDisable:function(){var d=this,c=d.tip;if(c&&!d.disabled){c.disable()}},ddEnable:function(){var d=this,c=d.tip;if(c&&!d.disabled){c.enable()}},enable:function(){var d=this,c=d.tip;if(c){c.enable()}d.disabled=false},disable:function(){var d=this,c=d.tip;if(c){c.disable()}d.disabled=true},isEnabled:function(){var b=this.tip;return b!==undefined&&!b.disabled},getQuickTip:function(){return this.tip},register:function(){var b=this.tip;b.register.apply(b,arguments)},unregister:function(){var b=this.tip;b.unregister.apply(b,arguments)},tips:function(){var b=this.tip;b.register.apply(b,arguments)}},0,0,0,0,0,0,[Ext.tip,"QuickTipManager",Ext,"QuickTips"],0));(Ext.cmd.derive("Ext.toolbar.Separator",Ext.toolbar.Item,{alternateClassName:"Ext.Toolbar.Separator",baseCls:"x-toolbar-separator",ariaRole:"separator"},0,["tbseparator"],["component","box","tbitem","tbseparator"],{component:true,box:true,tbitem:true,tbseparator:true},["widget.tbseparator"],0,[Ext.toolbar,"Separator",Ext.Toolbar,"Separator"],0));(Ext.cmd.derive("Ext.menu.Item",Ext.Component,{alternateClassName:"Ext.menu.TextItem",isMenuItem:true,activated:false,activeCls:"x-menu-item-active",clickHideDelay:0,destroyMenu:true,disabledCls:"x-menu-item-disabled",hideOnClick:true,menuAlign:"tl-tr?",menuExpandDelay:200,menuHideDelay:200,tooltipType:"qtip",focusable:true,ariaRole:"menuitem",ariaEl:"itemEl",baseCls:"x-menu-item",arrowCls:"x-menu-item-arrow",baseIconCls:"x-menu-item-icon",textCls:"x-menu-item-text",indentCls:"x-menu-item-indent",indentNoSeparatorCls:"x-menu-item-indent-no-separator",indentRightIconCls:"x-menu-item-indent-right-icon",indentRightArrowCls:"x-menu-item-indent-right-arrow",linkCls:"x-menu-item-link",linkHrefCls:"x-menu-item-link-href",childEls:["itemEl","iconEl","textEl","arrowEl"],renderTpl:'<tpl if="plain">{text}<tpl else><a id="{id}-itemEl" data-ref="itemEl" class="{linkCls}<tpl if="hasHref"> {linkHrefCls}</tpl>{childElCls}" href="{href}" <tpl if="hrefTarget"> target="{hrefTarget}"</tpl> hidefocus="true" unselectable="on"<tpl if="tabIndex != null"> tabindex="{tabIndex}"</tpl><tpl foreach="ariaAttributes"> {$}="{.}"</tpl>><span id="{id}-textEl" data-ref="textEl" class="{textCls} {textCls}-{ui} {indentCls}{childElCls}" unselectable="on">{text}</span><tpl if="hasIcon"><div role="presentation" id="{id}-iconEl" data-ref="iconEl" class="{baseIconCls}-{ui} {baseIconCls}{[values.rightIcon ? "-right" : ""]} {iconCls}{childElCls} {glyphCls}" style="<tpl if="icon">background-image:url({icon});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl></div></tpl><tpl if="showCheckbox"><div role="presentation" id="{id}-checkEl" data-ref="checkEl" class="{baseIconCls}-{ui} {baseIconCls}{[(values.hasIcon && !values.rightIcon) ? "-right" : ""]} {groupCls} {checkboxCls}{childElCls}"></div></tpl><tpl if="hasMenu"><div role="presentation" id="{id}-arrowEl" data-ref="arrowEl" class="{arrowCls} {arrowCls}-{ui}{childElCls}"></div></tpl></a></tpl>',maskOnDisable:false,iconAlign:"left",initComponent:function(){var d=this,f=d.cls?[d.cls]:[],g;if(d.hasOwnProperty("canActivate")){d.focusable=d.canActivate}if(d.plain){f.push("x-menu-item-plain")}if(f.length){d.cls=f.join(" ")}if(d.menu){g=d.menu;d.menu=null;d.setMenu(g)}Ext.Component.prototype.initComponent.apply(this,arguments)},canFocus:function(){var b=this;return b.focusable&&b.rendered&&b.canActivate!==false&&!b.destroying&&!b.destroyed&&b.isVisible(true)},onFocus:function(c){var d=this;Ext.Component.prototype.onFocus.call(this,c);if(!d.disabled){if(!d.plain){d.addCls(d.activeCls)}d.activated=true;if(d.hasListeners.activate){d.fireEvent("activate",d)}}},onFocusLeave:function(c){var d=this;Ext.Component.prototype.onFocusLeave.call(this,c);if(d.activated){if(!d.plain){d.removeCls(d.activeCls)}d.doHideMenu();d.activated=false;if(d.hasListeners.deactivate){d.fireEvent("deactivate",d)}}},doHideMenu:function(){var b=this.menu;this.cancelDeferExpand();if(b&&b.isVisible()){b.hide()}},deferHideParentMenus:function(){for(var b=this.getRefOwner();b&&((b.isMenu&&b.floating)||b.isMenuItem);b=b.getRefOwner()){if(b.isMenu){b.hide()}}},expandMenu:function(g,f){var d=this;if(d.activated&&d.menu){d.hideOnClick=false;d.cancelDeferHide();f=f==null?d.menuExpandDelay:f;if(f===0){d.doExpandMenu(g)}else{d.cancelDeferExpand();d.expandMenuTimer=Ext.defer(d.doExpandMenu,f,d,[g])}}},doExpandMenu:function(f){var d=this,g=d.menu;if(!g.isVisible()){d.parentMenu.activeChild=g;g.ownerCmp=d;g.parentMenu=d.parentMenu;g.constrainTo=document.body;g.autoFocus=!f||!f.pointerType;g.showBy(d,d.menuAlign)}},getRefItems:function(f){var g=this.menu,d;if(g){d=g.getRefItems(f);d.unshift(g)}return d||[]},getValue:function(){return this.value},hideMenu:function(d){var c=this;if(c.menu){c.cancelDeferExpand();c.hideMenuTimer=Ext.defer(c.doHideMenu,Ext.isNumber(d)?d:c.menuHideDelay,c)}},onClick:function(o){var p=this,q=p.clickHideDelay,m=o.browserEvent,h,j;if(!p.href||p.disabled){o.stopEvent();if(p.disabled){return false}}if(p.disabled||p.handlingClick){return}if(p.hideOnClick){if(!q){p.deferHideParentMenus()}else{p.deferHideParentMenusTimer=Ext.defer(p.deferHideParentMenus,q,p)}}h=p.fireEvent("click",p,o);if(p.destroyed){return}if(h!==false&&p.handler){Ext.callback(p.handler,p.scope,[p,o],0,p)}if(Ext.isIE9m){j=m.returnValue===false?true:false}else{j=!!m.defaultPrevented}if(p.href&&o.type!=="click"&&!j){p.handlingClick=true;p.itemEl.dom.click();p.handlingClick=false}if(!p.hideOnClick){p.focus()}return h},onRemoved:function(){var b=this;if(b.activated&&b.parentMenu.activeItem===b){b.parentMenu.deactivateActiveItem()}Ext.Component.prototype.onRemoved.apply(this,arguments);b.parentMenu=b.ownerCmp=null},beforeDestroy:function(){var b=this;if(b.rendered){b.clearTip()}Ext.Component.prototype.beforeDestroy.call(this)},onDestroy:function(){var b=this;b.cancelDeferExpand();b.cancelDeferHide();clearTimeout(b.deferHideParentMenusTimer);b.setMenu(null);Ext.Component.prototype.onDestroy.apply(this,arguments)},beforeRender:function(){var s=this,r=s.glyph,t=Ext._glyphFontFamily,w=!!(s.icon||s.iconCls||r),q=!!s.menu,v=((s.iconAlign==="right")&&!q),z=s.isMenuCheckItem,B=[],y=s.ownerCt,u=y.plain,A;if(s.plain){s.ariaEl="el"}Ext.Component.prototype.beforeRender.call(this);if(w){if(q&&s.showCheckbox){w=false}}if(typeof r==="string"){A=r.split("@");r=A[0];t=A[1]}if(!u||(w&&!v)||z){if(y.showSeparator&&!u){B.push(s.indentCls)}else{B.push(s.indentNoSeparatorCls)}}if(q){B.push(s.indentRightArrowCls)}else{if(w&&(v||z)){B.push(s.indentRightIconCls)}}Ext.applyIf(s.renderData,{hasHref:!!s.href,href:s.href||"#",hrefTarget:s.hrefTarget,icon:s.icon,iconCls:s.iconCls,glyph:r,glyphCls:r?"x-menu-item-glyph":undefined,glyphFontFamily:t,hasIcon:w,hasMenu:q,indent:!u||w||z,isCheckItem:z,rightIcon:v,plain:s.plain,text:s.text,arrowCls:s.arrowCls,baseIconCls:s.baseIconCls,textCls:s.textCls,indentCls:B.join(" "),linkCls:s.linkCls,linkHrefCls:s.linkHrefCls,groupCls:s.group?s.groupCls:"",tabIndex:s.tabIndex})},onRender:function(){var b=this;Ext.Component.prototype.onRender.apply(this,arguments);if(b.tooltip){b.setTooltip(b.tooltip,true)}},getMenu:function(){return this.menu||null},setMenu:function(p,q){var r=this,u=r.menu,m=r.arrowEl,o=r.ariaEl.dom,s,t;if(u){u.ownerCmp=u.parentMenu=null;if(q===true||(q!==false&&r.destroyMenu)){Ext.destroy(u)}if(o){o.removeAttribute("aria-haspopup");o.removeAttribute("aria-owns")}else{s=(r.ariaRenderAttributes||(r.ariaRenderAttributes={}));delete s["aria-haspopup"];delete s["aria-owns"]}}if(p){t=p.isMenu;p=r.menu=Ext.menu.Manager.get(p,{ownerCmp:r,focusOnToFront:false});p.setOwnerCmp(r,t);if(o){o.setAttribute("aria-haspopup",true);o.setAttribute("aria-owns",p.id)}else{s=(r.ariaRenderAttributes||(r.ariaRenderAttributes={}));s["aria-haspopup"]=true;s["aria-owns"]=p.id}}else{p=r.menu=null}if(p&&r.rendered&&!r.destroying&&m){m[p?"addCls":"removeCls"](r.arrowCls)}},setHandler:function(c,d){this.handler=c||null;this.scope=d},setIcon:function(d){var f=this.iconEl,g=this.icon;if(f){f.src=d||Ext.BLANK_IMAGE_URL}this.icon=d;this.fireEvent("iconchange",this,g,d)},setIconCls:function(f){var h=this,g=h.iconEl,j=h.iconCls;if(g){if(h.iconCls){g.removeCls(h.iconCls)}if(f){g.addCls(f)}}h.iconCls=f;h.fireEvent("iconchange",h,j,f)},setText:function(h){var j=this,f=j.textEl||j.el,g=j.text;j.text=h;if(j.rendered){f.setHtml(h||"");j.updateLayout()}j.fireEvent("textchange",j,g,h)},getTipAttr:function(){return this.tooltipType==="qtip"?"data-qtip":"title"},clearTip:function(){if(Ext.quickTipsActive&&Ext.isObject(this.tooltip)){Ext.tip.QuickTipManager.unregister(this.itemEl)}},setTooltip:function(g,f){var d=this;if(d.rendered){if(!f){d.clearTip()}if(Ext.quickTipsActive&&Ext.isObject(g)){Ext.tip.QuickTipManager.register(Ext.apply({target:d.itemEl.id},g));d.tooltip=g}else{d.itemEl.dom.setAttribute(d.getTipAttr(),g)}}else{d.tooltip=g}return d},privates:{cancelDeferExpand:function(){window.clearTimeout(this.expandMenuTimer)},cancelDeferHide:function(){window.clearTimeout(this.hideMenuTimer)},getFocusEl:function(){return this.plain?this.el:this.itemEl}}},0,["menuitem"],["component","box","menuitem"],{component:true,box:true,menuitem:true},["widget.menuitem"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.menu,"Item",Ext.menu,"TextItem"],0));Ext.define("Ext.theme.triton.menu.Item",{override:"Ext.menu.Item",compatibility:Ext.isIE8,onFocus:function(b){(arguments.callee.$previous||Ext.Component.prototype.onFocus).call(this,b);this.repaintIcons()},onFocusLeave:function(b){(arguments.callee.$previous||Ext.Component.prototype.onFocusLeave).call(this,b);this.repaintIcons()},privates:{repaintIcons:function(){var g=this.iconEl,d=this.arrowEl,f=this.checkEl;if(g){g.syncRepaint()}if(d){d.syncRepaint()}if(f){f.syncRepaint()}}}});(Ext.cmd.derive("Ext.menu.CheckItem",Ext.menu.Item,{checkedCls:"x-menu-item-checked",uncheckedCls:"x-menu-item-unchecked",groupCls:"x-menu-group-icon",hideOnClick:false,checkChangeDisabled:false,submenuText:"{0} submenu",ariaRole:"menuitemcheckbox",childEls:["checkEl"],showCheckbox:true,isMenuCheckItem:true,checkboxCls:"x-menu-item-checkbox",initComponent:function(){var b=this;b.checked=!!b.checked;Ext.menu.Item.prototype.initComponent.apply(this,arguments);if(b.group){Ext.menu.Manager.registerCheckable(b);if(b.initialConfig.hideOnClick!==false){b.hideOnClick=true}}},beforeRender:function(){var c=this,d;Ext.menu.Item.prototype.beforeRender.call(this);Ext.apply(c.renderData,{checkboxCls:c.checkboxCls,showCheckbox:c.showCheckbox});d=(c.ariaRenderAttributes||(c.ariaRenderAttributes={}));d["aria-checked"]=c.menu?"mixed":c.checked;if(c.menu){d["aria-label"]=Ext.String.formatEncode(c.submenuText,c.text)}},afterRender:function(){var b=this;Ext.menu.Item.prototype.afterRender.call(this);b.checked=!b.checked;b.setChecked(!b.checked,true);if(b.checkChangeDisabled){b.disableCheckChange()}if(Ext.isGecko&&b.checkEl){b.checkEl.on("mousedown",b.onMouseDownCheck)}},disableCheckChange:function(){var c=this,d=c.checkEl;if(d){d.addCls(c.disabledCls)}if(Ext.isIE8&&c.rendered){c.el.repaint()}c.checkChangeDisabled=true},enableCheckChange:function(){var c=this,d=c.checkEl;if(d){d.removeCls(c.disabledCls)}c.checkChangeDisabled=false},onMouseDownCheck:function(b){b.preventDefault()},onClick:function(c){var d=this;if(!(d.disabled||d.checkChangeDisabled||d.checked&&d.group||d.menu&&"touch"===c.pointerType&&!d.checkEl.contains(c.target))){d.setChecked(!d.checked);if(c.type==="keydown"&&d.menu){return false}}Ext.menu.Item.prototype.onClick.call(this,c)},onDestroy:function(){Ext.menu.Manager.unregisterCheckable(this);Ext.menu.Item.prototype.onDestroy.apply(this,arguments)},setText:function(g){var d=this,f=d.ariaEl.dom;Ext.menu.Item.prototype.setText.call(this,g);if(f&&d.menu){f.setAttribute("aria-label",Ext.String.formatEncode(d.submenuText,g))}},setChecked:function(q,s){var r=this,p=r.checkedCls,o=r.uncheckedCls,j=r.el,m=r.ariaEl.dom;if(r.checked!==q&&(s||r.fireEvent("beforecheckchange",r,q)!==false)){if(j){if(q){j.addCls(p);j.removeCls(o)}else{j.addCls(o);j.removeCls(p)}}if(m){m.setAttribute("aria-checked",r.menu?"mixed":!!q)}r.checked=q;Ext.menu.Manager.onCheckChange(r,q);if(!s){Ext.callback(r.checkHandler,r.scope,[r,q],0,r);r.fireEvent("checkchange",r,q)}}}},0,["menucheckitem"],["component","box","menuitem","menucheckitem"],{component:true,box:true,menuitem:true,menucheckitem:true},["widget.menucheckitem"],0,[Ext.menu,"CheckItem"],0));(Ext.cmd.derive("Ext.menu.Separator",Ext.menu.Item,{focusable:false,canActivate:false,hideOnClick:false,plain:true,separatorCls:"x-menu-item-separator",text:"&#160;",ariaRole:"separator",beforeRender:function(){this.addCls(this.separatorCls);Ext.menu.Item.prototype.beforeRender.call(this)}},0,["menuseparator"],["component","box","menuitem","menuseparator"],{component:true,box:true,menuitem:true,menuseparator:true},["widget.menuseparator"],0,[Ext.menu,"Separator"],0));Ext.define("Ext.theme.neptune.menu.Separator",{override:"Ext.menu.Separator",border:true});(Ext.cmd.derive("Ext.menu.Menu",Ext.panel.Panel,{enableKeyNav:true,allowOtherMenus:false,ariaRole:"menu",floating:true,constrain:true,hidden:true,hideMode:"visibility",ignoreParentClicks:false,isMenu:true,showSeparator:true,minWidth:undefined,defaultMinWidth:120,defaultAlign:"tl-bl?",focusOnToFront:false,bringParentToFront:false,defaultFocus:":focusable",menuClickBuffer:0,baseCls:"x-menu",_iconSeparatorCls:"x-menu-icon-separator",_itemCmpCls:"x-menu-item-cmp",layout:{type:"vbox",align:"stretchmax",overflowHandler:"Scroller"},initComponent:function(){var o=this,h=["x-menu"],m=o.bodyCls?[o.bodyCls]:[],j=o.floating!==false,g={element:"el",click:o.onClick,mouseover:o.onMouseOver,scope:o};if(Ext.supports.Touch){g.pointerdown=o.onMouseOver}o.on(g);o.on({beforeshow:o.onBeforeShow,scope:o});if(o.plain){h.push("x-menu-plain")}o.cls=h.join(" ");m.push("x-menu-body",Ext.dom.Element.unselectableCls);o.bodyCls=m.join(" ");if(j){if(o.minWidth===undefined){o.minWidth=o.defaultMinWidth}}else{o.hidden=!!o.initialConfig.hidden;o.constrain=false}Ext.panel.Panel.prototype.initComponent.apply(this,arguments);Ext.override(o.getLayout(),{configureItem:o.configureItem})},initFloatConstrain:Ext.emptyFn,getInherited:function(){var b=Ext.panel.Panel.prototype.getInherited.call(this);b.hidden=this.hidden;return b},beforeRender:function(){var b=this;Ext.panel.Panel.prototype.beforeRender.apply(this,arguments);if(!b.getSizeModel().width.shrinkWrap){b.layout.align="stretch"}if(b.floating){b.ariaRenderAttributes=b.ariaRenderAttributes||{};b.ariaRenderAttributes["aria-expanded"]=!!b.autoShow}},onBoxReady:function(){var d=this,g=d._iconSeparatorCls,f=d.focusableKeyNav;if(f){f.map.processEventScope=d;f.map.processEvent=function(a){if(a.keyCode===a.ESC){a.target=this.el.dom}return a};f.map.addBinding([{key:Ext.event.Event.ESC,handler:d.onEscapeKey,scope:d},{key:/[\w]/,handler:d.onShortcutKey,scope:d,shift:false,ctrl:false,alt:false}])}else{d.escapeKeyNav=new Ext.util.KeyNav(d.el,{eventName:"keydown",scope:d,esc:d.onEscapeKey})}Ext.panel.Panel.prototype.onBoxReady.apply(this,arguments);if(d.showSeparator){d.iconSepEl=d.body.insertFirst({role:"presentation",cls:g+" "+g+"-"+d.ui,html:"&#160;"})}if(Ext.supports.MSPointerEvents||Ext.supports.PointerEvents){d.el.on({scope:d,click:d.preventClick,translate:false})}d.mouseMonitor=d.el.monitorMouseLeave(100,d.onMouseLeave,d)},onFocusLeave:function(c){var d=this;Ext.panel.Panel.prototype.onFocusLeave.call(this,c);d.mixins.focusablecontainer.onFocusLeave.call(d,c);if(d.floating){d.hide()}},canActivateItem:function(b){return b&&b.isFocusable()},deactivateActiveItem:function(){var d=this,c=d.lastFocusedChild;if(c){c.blur()}},getItemFromEvent:function(h){var g=this,j=g.layout.getRenderTarget().dom,f=h.getTarget();while(f.parentNode!==j){f=f.parentNode;if(!f){return}}return Ext.getCmp(f.id)},lookupComponent:function(c){var d=this;if(typeof c==="string"){c=d.lookupItemFromString(c)}else{if(Ext.isObject(c)){c=d.lookupItemFromObject(c)}}if(!c.dock){c.minWidth=c.minWidth||d.minWidth}return c},lookupItemFromObject:function(c){var d=this;if(!c.isComponent){if(!c.xtype){c=Ext.create("Ext.menu."+(Ext.isBoolean(c.checked)?"Check":"")+"Item",c)}else{c=Ext.ComponentManager.create(c,c.xtype)}}if(c.isMenuItem){c.parentMenu=d}return c},lookupItemFromString:function(b){return(b==="separator"||b==="-")?new Ext.menu.Separator():new Ext.menu.Item({canActivate:false,hideOnClick:false,plain:true,text:b})},configureItem:function(q){var h=this.owner,o="x-",p=h.ui,j,m;if(q.isMenuItem){q.setUI(p)}else{if(h.items.getCount()>1&&!q.rendered&&!q.dock){m=h._itemCmpCls;j=[m+" "+m+"-"+p];if(!h.plain&&(q.indent!==false||q.iconCls==="no-icon")){j.push(o+"menu-item-indent-"+p)}if(q.rendered){q.el.addCls(j)}else{q.cls=(q.cls||"")+" "+j.join(" ")}q.$extraMenuCls=j}}this.callParent(arguments)},onRemove:function(b){Ext.panel.Panel.prototype.onRemove.call(this,b);if(!b.destroyed&&b.$extraMenuCls){b.el.removeCls(b.$extraMenuCls)}},onClick:function(m){var o=this,q=m.type,p,h,j=q==="keydown";if(o.disabled){m.stopEvent();return}p=o.getItemFromEvent(m);if(p&&p.isMenuItem){if(!p.menu||!o.ignoreParentClicks){h=p.onClick(m)}else{m.stopEvent()}if(p.menu&&h!==false&&j){p.expandMenu(m,0)}}if(!p||p.disabled){p=undefined}o.fireEvent("click",o,p,m)},onDestroy:function(){var b=this;if(b.escapeKeyNav){b.escapeKeyNav.destroy()}b.parentMenu=b.ownerCmp=b.escapeKeyNav=null;if(b.rendered){b.el.un(b.mouseMonitor);Ext.destroy(b.iconSepEl)}Ext.menu.Manager.onHide(b);Ext.panel.Panel.prototype.onDestroy.apply(this,arguments)},onMouseLeave:function(b){if(this.disabled){return}this.fireEvent("mouseleave",this,b)},onMouseOver:function(p){var q=this,o=p.getRelatedTarget(),j=!q.el.contains(o),r=q.getItemFromEvent(p),s=q.parentMenu,m=q.ownerCmp;if(j&&s){s.setActiveItem(m);m.cancelDeferHide();s.mouseMonitor.mouseenter()}if(q.disabled){return}if(r){if(!r.containsFocus){r.focus()}if(r.expandMenu){r.expandMenu(p)}}if(j){q.fireEvent("mouseenter",q,p)}q.fireEvent("mouseover",q,r,p)},setActiveItem:function(c){var d=this;if(c&&(c!==d.lastFocusedChild)){d.focusChild(c,1)}},onEscapeKey:function(){if(this.floating){this.hide()}},onShortcutKey:function(q,r){var m=String.fromCharCode(r.getCharCode()),u=this.query(">[text]"),o=u.length,s=this.lastFocusedChild,p=Ext.Array.indexOf(u,s),t=p;for(;;){if(++t===o){t=0}s=u[t];if(t===p){return}if(s.text&&s.text[0].toUpperCase()===m){s.focus();return}}},onFocusableContainerTabKey:function(b){if(this.floating){this.hide()}},onFocusableContainerEnterKey:function(b){this.onClick(b)},onFocusableContainerSpaceKey:function(b){this.onClick(b)},onFocusableContainerLeftKey:function(b){b.preventDefault();if(this.parentMenu){this.ownerCmp.focus();this.hide()}},onFocusableContainerRightKey:function(d){var f=this,g=f.lastFocusedChild;d.preventDefault();if(g&&g.expandMenu){g.expandMenu(d,0)}},onBeforeShow:function(){if(Ext.Date.getElapsed(this.lastHide)<this.menuClickBuffer){return false}},beforeShow:function(){var j=this,f,h,g;if(j.floating){f=j.hasFloatMenuParent();if(!f&&!j.allowOtherMenus){Ext.menu.Manager.hideAll()}if(f){j.focusAnchor=f.focusAnchor}else{h=Ext.Element.getActiveElement();if(h===document.body||h===document.documentElement){j.focusAnchor=null}else{j.focusAnchor=h}}j.savedMaxHeight=j.maxHeight;g=j.container.getViewSize().height;j.maxHeight=Math.min(j.maxHeight||g,g)}Ext.panel.Panel.prototype.beforeShow.apply(this,arguments)},afterShow:function(){var c=this,d=c.ariaEl.dom;Ext.panel.Panel.prototype.afterShow.apply(this,arguments);Ext.menu.Manager.onShow(c);if(c.floating&&d){d.setAttribute("aria-expanded",true)}if(c.floating&&c.autoFocus){c.maxHeight=c.savedMaxHeight;c.focus()}},onHide:function(m,q,p){var o=this,h=o.ariaEl.dom,j;if(o.el.contains(Ext.Element.getActiveElement())){j=o.focusAnchor||o.ownerCmp||o.up(":focusable");if(j){o.previousFocus=j}}Ext.panel.Panel.prototype.onHide.call(this,m,q,p);o.lastHide=Ext.Date.now();Ext.menu.Manager.onHide(o);if(o.floating&&h){h.setAttribute("aria-expanded",false)}},preventClick:function(c){var d=this.getItemFromEvent(c);if(d&&d.isMenuItem&&!d.href){c.preventDefault()}},privates:{hasFloatMenuParent:function(){return this.parentMenu||this.up("menu[floating=true]")},setOwnerCmp:function(d,f){var g=this;g.parentMenu=d.isMenuItem?d:null;g.ownerCmp=d;g.registerWithOwnerCt();delete g.hierarchicallyHidden;g.onInheritedAdd(d,f);g.containerOnAdded(d,f)}}},0,["menu"],["component","box","container","panel","menu"],{component:true,box:true,container:true,panel:true,menu:true},["widget.menu"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.menu,"Menu"],0));Ext.define("Ext.theme.neptune.menu.Menu",{override:"Ext.menu.Menu",showSeparator:false});Ext.define("Ext.theme.triton.menu.Menu",{override:"Ext.menu.Menu",compatibility:Ext.isIE8,afterShow:function(){var j=this,g,m,o,h;(arguments.callee.$previous||Ext.panel.Panel.prototype.afterShow).apply(this,arguments);g=j.items.getRange();for(o=0,h=g.length;o<h;o++){m=g[o];if(m&&m.repaintIcons){m.repaintIcons()}}}});(Ext.cmd.derive("Ext.util.Queue",Ext.Base,{constructor:function(){this.clear()},add:function(g){var d=this,f=d.getKey(g);if(!d.map[f]){++d.length;d.items.push(g);d.map[f]=g}return g},clear:function(){var c=this,d=c.items;c.items=[];c.map={};c.length=0;return d},contains:function(c){var d=this.getKey(c);return this.map.hasOwnProperty(d)},getCount:function(){return this.length},getKey:function(b){return b.id},remove:function(j){var m=this,o=m.getKey(j),h=m.items,g;if(m.map[o]){g=Ext.Array.indexOf(h,j);Ext.Array.erase(h,g,1);delete m.map[o];--m.length}return j}},1,0,0,0,0,0,[Ext.util,"Queue"],0));(Ext.cmd.derive("Ext.layout.ContextItem",Ext.Base,{heightModel:null,widthModel:null,sizeModel:null,optOut:false,ownerSizePolicy:null,boxChildren:null,boxParent:null,children:[],dirty:null,dirtyCount:0,hasRawContent:true,isContextItem:true,isTopLevel:false,consumersContentHeight:0,consumersContentWidth:0,consumersContainerHeight:0,consumersContainerWidth:0,consumersHeight:0,consumersWidth:0,ownerCtContext:null,remainingChildDimensions:0,props:null,state:null,wrapsComponent:false,constructor:function(B){var A=this,D=Ext.layout.SizeModel.sizeModels,I=D.configured,J=D.shrinkWrap,Q,C,F,G,M,O,z,N,E,H,P,K,L,R;Ext.apply(A,B);z=A.target;Q=A.el;A.id=z.id;A.flushedProps={};A.props=M={};A.styles={};if(!z.isComponent){C=Q.lastBox}else{A.wrapsComponent=true;A.framing=z.frameSize||null;A.isComponentChild=z.ownerLayout&&z.ownerLayout.isComponentLayout;C=z.lastBox;F=z.ownerCt;if(F&&(G=F.el&&A.context.items[F.el.id])){A.ownerCtContext=G}A.sizeModel=O=z.getSizeModel(G&&G.widthModel.pairsByHeightOrdinal[G.heightModel.ordinal]);A.widthModel=K=O.width;A.heightModel=L=O.height;if(C&&C.invalid===false){H=(z.width===(N=C.width));P=(z.height===(E=C.height));if(K===J&&L===J){R=true}else{if(K===I&&H){R=L===J||(L===I&&P)}}if(R){A.optOut=true;M.width=N;M.height=E}}}A.lastBox=C},init:function(M,R){var D=this,T=D.props,Q=D.dirty,K=D.ownerCtContext,H=D.target.ownerLayout,N=!D.state,C=M||N,P,I,J,G,S,B,A=D.heightModel,O=D.widthModel,L,F,E=0;D.dirty=D.invalid=false;D.props={};D.remainingChildDimensions=0;if(D.boxChildren){D.boxChildren.length=0}if(!N){D.clearAllBlocks("blocks");D.clearAllBlocks("domBlocks")}if(!D.wrapsComponent){return C}B=D.target;D.state={};if(N){if(B.beforeLayout&&B.beforeLayout!==Ext.emptyFn){B.beforeLayout()}if(!K&&(G=B.ownerCt)){K=D.context.items[G.el.id]}if(K){D.ownerCtContext=K;D.isBoxParent=H&&H.isItemBoxParent(D)}else{D.isTopLevel=true}D.frameBodyContext=D.getEl("frameBody")}else{K=D.ownerCtContext;D.isTopLevel=!K;P=D.children;for(I=0,J=P.length;I<J;++I){P[I].init(true)}}D.hasRawContent=!(B.isContainer&&B.items.items.length>0);if(M){D.widthModel=D.heightModel=null;S=B.getSizeModel(K&&K.widthModel.pairsByHeightOrdinal[K.heightModel.ordinal]);if(N){D.sizeModel=S}D.widthModel=S.width;D.heightModel=S.height;if(K&&!D.isComponentChild){if(H.needsItemSize||!B.liquidLayout){K.remainingChildDimensions+=2}else{if(D.widthModel.calculated){++K.remainingChildDimensions}if(D.heightModel.calculated){++K.remainingChildDimensions}}}}else{if(T){D.recoverProp("x",T,Q);D.recoverProp("y",T,Q);if(D.widthModel.calculated){D.recoverProp("width",T,Q)}else{if("width" in T){++E}}if(D.heightModel.calculated){D.recoverProp("height",T,Q)}else{if("height" in T){++E}}if(K&&!D.isComponentChild){K.remainingChildDimensions+=E}}}if(T&&H&&H.manageMargins){D.recoverProp("margin-top",T,Q);D.recoverProp("margin-right",T,Q);D.recoverProp("margin-bottom",T,Q);D.recoverProp("margin-left",T,Q)}if(R){L=R.heightModel;F=R.widthModel;if(F&&L&&O&&A){if(O.shrinkWrap&&A.shrinkWrap){if(F.constrainedMax&&L.constrainedMin){L=null}}}if(F){D.widthModel=F}if(L){D.heightModel=L}if(R.state){Ext.apply(D.state,R.state)}}return C},initContinue:function(q){var o=this,r=o.ownerCtContext,m=o.target,s=o.widthModel,p=m.getInherited(),j;if(s.fixed){p.inShrinkWrapTable=false}else{delete p.inShrinkWrapTable}if(q){if(r&&s.shrinkWrap){j=r.isBoxParent?r:r.boxParent;if(j){j.addBoxChild(o)}}else{if(s.natural){o.boxParent=r}}}return q},initDone:function(h){var f=this,g=f.props,j=f.state;if(f.remainingChildDimensions===0){g.containerChildrenSizeDone=true}if(h){g.containerLayoutDone=true}if(f.boxChildren&&f.boxChildren.length&&f.widthModel.shrinkWrap){f.el.setWidth(10000);j.blocks=(j.blocks||0)+1}},initAnimation:function(){var d=this,g=d.target,f=d.ownerCtContext;if(f&&f.isTopLevel){d.animatePolicy=g.ownerLayout.getAnimatePolicy(d)}else{if(!f&&g.isCollapsingOrExpanding&&g.animCollapse){d.animatePolicy=g.componentLayout.getAnimatePolicy(d)}}if(d.animatePolicy){d.context.queueAnimation(d)}},addBlock:function(h,p,o){var q=this,m=q[h]||(q[h]={}),j=m[o]||(m[o]={});if(!j[p.id]){j[p.id]=p;++p.blockCount;++q.context.blockCount}},addBoxChild:function(h){var j=this,f,g=h.widthModel;h.boxParent=this;h.measuresBox=g.shrinkWrap?h.hasRawContent:g.natural;if(h.measuresBox){f=j.boxChildren;if(f){f.push(h)}else{j.boxChildren=[h]}}},addPositionStyles:function(m,g){var h=g.x,j=g.y,o=0;if(h!==undefined){m.left=h+"px";++o}if(j!==undefined){m.top=j+"px";++o}return o},addTrigger:function(r,q){var s=this,o=q?"domTriggers":"triggers",p=s[o]||(s[o]={}),m=s.context,t=m.currentLayout,u=p[r]||(p[r]={});if(!u[t.id]){u[t.id]=t;++t.triggerCount;u=m.triggers[q?"dom":"data"];(u[t.id]||(u[t.id]=[])).push({item:this,prop:r});if(s.props[r]!==undefined){if(!q||!(s.dirty&&(r in s.dirty))){++t.firedTriggers}}}},boxChildMeasured:function(){var d=this,g=d.state,f=(g.boxesMeasured=(g.boxesMeasured||0)+1);if(f===d.boxChildren.length){g.clearBoxWidth=1;++d.context.progressCount;d.markDirty()}},borderNames:["border-top-width","border-right-width","border-bottom-width","border-left-width"],marginNames:["margin-top","margin-right","margin-bottom","margin-left"],paddingNames:["padding-top","padding-right","padding-bottom","padding-left"],trblNames:["top","right","bottom","left"],cacheMissHandlers:{borderInfo:function(d){var c=d.getStyles(d.borderNames,d.trblNames);c.width=c.left+c.right;c.height=c.top+c.bottom;return c},marginInfo:function(d){var c=d.getStyles(d.marginNames,d.trblNames);c.width=c.left+c.right;c.height=c.top+c.bottom;return c},paddingInfo:function(d){var f=d.frameBodyContext||d,g=f.getStyles(d.paddingNames,d.trblNames);g.width=g.left+g.right;g.height=g.top+g.bottom;return g}},checkCache:function(b){return this.cacheMissHandlers[b](this)},clearAllBlocks:function(f){var g=this[f],d;if(g){for(d in g){this.clearBlocks(f,d)}}},clearBlocks:function(s,p){var o=this[s],j=o&&o[p],r,q,m;if(j){delete o[p];r=this.context;for(m in j){q=j[m];--r.blockCount;if(!--q.blockCount&&!q.pending&&!q.done){r.queueLayout(q)}}}},block:function(d,c){this.addBlock("blocks",d,c)},domBlock:function(d,c){this.addBlock("domBlocks",d,c)},fireTriggers:function(j,p){var o=this[j],r=o&&o[p],s=this.context,q,m;if(r){for(m in r){q=r[m];++q.firedTriggers;if(!q.done&&!q.blockCount&&!q.pending){s.queueLayout(q)}}}},flush:function(){var f=this,g=f.dirty,j=f.state,h=f.el;f.dirtyCount=0;if("attributes" in f){h.set(f.attributes);delete f.attributes}if("innerHTML" in f){h.innerHTML=f.innerHTML;delete f.innerHTML}if(j&&j.clearBoxWidth){j.clearBoxWidth=0;f.el.setStyle("width",null);if(!--j.blocks){f.context.queueItemLayouts(f)}}if(g){delete f.dirty;f.writeProps(g,true)}},flushAnimations:function(){var F=this,C=F.previousSize,u,j,A,y,z,B,w,t,v,E,D;if(C){u=F.target;j=u.getAnimationProps();A=j.duration;y=Ext.Object.getKeys(F.animatePolicy);z=Ext.apply({},{from:{},to:{},duration:A||Ext.fx.Anim.prototype.duration},j);for(B=0,w=0,t=y.length;w<t;w++){v=y[w];E=C[v];D=F.peek(v);if(E!==D){v=F.translateProps[v]||v;z.from[v]=E;z.to[v]=D;++B}}if(B){if(F.isCollapsingOrExpanding===1){u.componentLayout.undoLayout(F)}else{F.writeProps(z.from)}F.el.animate(z);z=Ext.fx.Manager.getFxQueue(F.el.id)[0];u.$layoutAnim=z;z.on({afteranimate:function(){delete u.$layoutAnim;if(u.destroying||u.destroyed){return}if(F.isCollapsingOrExpanding===1){u.componentLayout.redoLayout(F);u.afterCollapse(true)}else{if(F.isCollapsingOrExpanding===2){u.afterExpand(true)}}if(u.hasListeners.afterlayoutanimation){u.fireEvent("afterlayoutanimation",u)}}})}}},getBorderInfo:function(){var d=this,c=d.borderInfo;if(!c){d.borderInfo=c=d.checkCache("borderInfo")}return c},getEl:function(q,j){var o=this,m,p,h;if(q){if(q.dom){p=q}else{m=o.target;if(j){m=j}p=m[q];if(typeof p==="function"){p=p.call(m);if(p===o.el){return this}}}if(p){h=o.context.getEl(o,p)}}return h||null},getFrameInfo:function(){var j=this,h=j.frameInfo,f,g;if(!h){f=j.framing;g=j.getBorderInfo();j.frameInfo=h=f?{top:f.top+g.top,right:f.right+g.right,bottom:f.bottom+g.bottom,left:f.left+g.left,width:f.width+g.width,height:f.height+g.height}:g}return h},getMarginInfo:function(){var p=this,m=p.marginInfo,h,j,o,q;if(!m){if(!p.wrapsComponent){m=p.checkCache("marginInfo")}else{h=p.target;o=h.ownerLayout;q=o?o.id:null;j=o&&o.manageMargins;m=h.margin$;if(m&&m.ownerId!==q){m=null}if(!m){m=p.parseMargins(h,h.margin)||p.checkCache("marginInfo");if(j){p.setProp("margin-top",0);p.setProp("margin-right",0);p.setProp("margin-bottom",0);p.setProp("margin-left",0)}m.ownerId=q;h.margin$=m}m.width=m.left+m.right;m.height=m.top+m.bottom}p.marginInfo=m}return m},clearMarginCache:function(){delete this.marginInfo;delete this.target.margin$},getPaddingInfo:function(){var d=this,c=d.paddingInfo;if(!c){d.paddingInfo=c=d.checkCache("paddingInfo")}return c},getProp:function(g){var d=this,f=d.props[g];d.addTrigger(g);return f},getDomProp:function(g){var d=this,f=(d.dirty&&(g in d.dirty))?undefined:d.props[g];d.addTrigger(g,true);return f},getStyle:function(h){var o=this,g=o.styles,j,m;if(h in g){m=g[h]}else{j=o.styleInfo[h];m=o.el.getStyle(h);if(j&&j.parseInt){m=parseInt(m,10)||0}g[h]=m}return m},getStyles:function(u,G){var w=this,D=w.styles,J={},C=0,E=u.length,z,A,y,H,F,B,I,v;G=G||u;for(z=0;z<E;++z){H=u[z];if(H in D){J[G[z]]=D[H];++C;if(z&&C===1){A=u.slice(0,z);y=G.slice(0,z)}}else{if(C){(A||(A=[])).push(H);(y||(y=[])).push(G[z])}}}if(C<E){A=A||u;y=y||G;B=w.styleInfo;I=w.el.getStyle(A);for(z=A.length;z--;){H=A[z];F=B[H];v=I[H];if(F&&F.parseInt){v=parseInt(v,10)||0}J[y[z]]=v;D[H]=v}}return J},hasProp:function(b){return this.getProp(b)!=null},hasDomProp:function(b){return this.getDomProp(b)!=null},invalidate:function(b){this.context.queueInvalidate(this,b)},markDirty:function(){if(++this.dirtyCount===1){this.context.queueFlush(this)}},onBoxMeasured:function(){var d=this.boxParent,c=this.state;if(d&&d.widthModel.shrinkWrap&&!c.boxMeasured&&this.measuresBox){c.boxMeasured=1;d.boxChildMeasured()}},parseMargins:function(g,h){if(h===true){h=5}var j=typeof h,f;if(j==="string"||j==="number"){f=g.parseBox(h)}else{if(h){f={top:0,right:0,bottom:0,left:0};if(h){h=Ext.apply(f,g.parseBox(h))}}}return f},peek:function(b){return this.props[b]},recalculateSizeModel:function(){var o=this,m=o.target,q=m.componentLayout,h=o.ownerCtContext,j=q.ownerContext,p;q.ownerContext=null;o.sizeModel=p=m.getSizeModel(h&&h.widthModel.pairsByHeightOrdinal[h.heightModel.ordinal]);o.widthModel=p.width;o.heightModel=p.height;if(j){q.ownerContext=o}},recoverProp:function(m,h,j){var o=this,p=o.props,q;if(m in h){p[m]=h[m];if(j&&m in j){q=o.dirty||(o.dirty={});q[m]=j[m]}}},redo:function(g){var j=this,o,h,m;j.revertProps(j.props);if(g&&j.wrapsComponent){if(j.childItems){for(m=0,o=j.childItems,h=o.length;m<h;m++){o[m].redo(g)}}for(m=0,o=j.children,h=o.length;m<h;m++){o[m].redo()}}},removeEl:function(g,h){var m=this,j,o;if(g){if(g.dom){o=g}else{j=m.target;if(h){j=h}o=j[g];if(typeof o==="function"){o=o.call(j);if(o===m.el){return this}}}if(o){m.context.removeEl(o,m)}}},revertProps:function(h){var g,f=this.flushedProps,j={};for(g in h){if(f.hasOwnProperty(g)){j[g]=h[g]}}this.writeProps(j)},setAttribute:function(f,g){var d=this;if(!d.attributes){d.attributes={}}d.attributes[f]=g;d.markDirty()},setBox:function(c){var d=this;if("left" in c){d.setProp("x",c.left)}if("top" in c){d.setProp("y",c.top)}d.setSize(c.width,c.height)},setContentHeight:function(d,c){if(!c&&this.hasRawContent){return 1}return this.setProp("contentHeight",d)},setContentWidth:function(c,d){if(!d&&this.hasRawContent){return 1}return this.setProp("contentWidth",c)},setContentSize:function(g,f,d){return this.setContentWidth(g,d)+this.setContentHeight(f,d)===2},setProp:function(p,q,j){var h=this,m=typeof q,o;if(m==="undefined"||(m==="number"&&isNaN(q))){return 0}if(h.props[p]===q){return 1}h.props[p]=q;++h.context.progressCount;if(j===false){h.fireTriggers("domTriggers",p);h.clearBlocks("domBlocks",p)}else{o=h.styleInfo[p];if(o){if(!h.dirty){h.dirty={}}h.dirty[p]=q;h.markDirty()}}h.fireTriggers("triggers",p);h.clearBlocks("blocks",p);return 1},setHeight:function(p,z){var t=this,v=t.target,w=t.ownerCtContext,s,u,y,q,r;if(p<0){p=0}if(!t.wrapsComponent){if(!t.setProp("height",p,z)){return NaN}}else{y=t.collapsedVert?0:(v.minHeight||0);p=Ext.Number.constrain(p,y,v.maxHeight);q=t.props.height;if(!t.setProp("height",p,z)){return NaN}if(w&&!t.isComponentChild&&isNaN(q)){r=--w.remainingChildDimensions;if(!r){w.setProp("containerChildrenSizeDone",true)}}s=t.frameBodyContext;if(s){u=t.getFrameInfo();s[t.el.vertical?"setWidth":"setHeight"](p-u.height,z)}}return p},setWidth:function(y,z){var r=this,t=r.target,u=r.ownerCtContext,q,s,v,w,p;if(y<0){y=0}if(!r.wrapsComponent){if(!r.setProp("width",y,z)){return NaN}}else{v=r.collapsedHorz?0:(t.minWidth||0);y=Ext.Number.constrain(y,v,t.maxWidth);w=r.props.width;if(!r.setProp("width",y,z)){return NaN}if(u&&!r.isComponentChild&&isNaN(w)){p=--u.remainingChildDimensions;if(!p){u.setProp("containerChildrenSizeDone",true)}}q=r.frameBodyContext;if(q){s=r.getFrameInfo();q.setWidth(y-s.width,z)}}return y},setSize:function(g,f,d){this.setWidth(g,d);this.setHeight(f,d)},translateProps:{x:"left",y:"top"},undo:function(g){var j=this,o,h,m;j.revertProps(j.lastBox);if(g&&j.wrapsComponent){if(j.childItems){for(m=0,o=j.childItems,h=o.length;m<h;m++){o[m].undo(g)}}for(m=0,o=j.children,h=o.length;m<h;m++){o[m].undo()}}},unsetProp:function(c){var d=this.dirty;delete this.props[c];if(d){delete d[c]}},writeProps:function(N,O){if(!(N&&typeof N==="object")){return}var A=this,P=A.el,K={},M=0,Q=A.styleInfo,B,J,G,E=N.width,I=N.height,z=A.target,L,R,F,D,C,H;if("displayed" in N){P.setDisplayed(N.displayed)}for(J in N){if(O){A.fireTriggers("domTriggers",J);A.clearBlocks("domBlocks",J);A.flushedProps[J]=1}B=Q[J];if(B&&B.dom){if(B.suffix&&(G=parseInt(N[J],10))){K[J]=G+B.suffix}else{K[J]=N[J]}++M}}if("x" in N||"y" in N){if(z.isComponent){z.setPosition(N.x,N.y)}else{M+=A.addPositionStyles(K,N)}}if(A.wrapsComponent&&Ext.isIE9){if((L=E!==undefined&&A.hasOverflowY)||(R=I!==undefined&&A.hasOverflowX)){F=A.isAbsolute;if(F===undefined){F=false;H=A.target.getTargetEl();C=H.getStyle("position");A.isAbsolute=F=(C==="absolute")}if(F){D=Ext.getScrollbarSize();if(L){E=parseInt(E,10)+D.width;K.width=E+"px";++M}if(R){I=parseInt(I,10)+D.height;K.height=I+"px";++M}}}}if(M){P.setStyle(K)}}},1,0,0,0,0,0,[Ext.layout,"ContextItem"],function(){var g={dom:true,parseInt:true,suffix:"px"},d={dom:true},f={dom:false};this.prototype.styleInfo={containerChildrenSizeDone:f,containerLayoutDone:f,displayed:f,done:f,x:f,y:f,columnsChanged:f,rowHeights:f,viewOverflowY:f,left:g,top:g,right:g,bottom:g,width:g,height:g,"border-top-width":g,"border-right-width":g,"border-bottom-width":g,"border-left-width":g,"margin-top":g,"margin-right":g,"margin-bottom":g,"margin-left":g,"padding-top":g,"padding-right":g,"padding-bottom":g,"padding-left":g,"line-height":d,display:d,clear:d}}));(Ext.cmd.derive("Ext.layout.Context",Ext.Base,{remainingLayouts:0,state:0,cycleWatchDog:200,constructor:function(d){var c=this;Ext.apply(c,d);c.items={};c.layouts={};c.blockCount=0;c.cycleCount=0;c.flushCount=0;c.calcCount=0;c.animateQueue=c.newQueue();c.completionQueue=c.newQueue();c.finalizeQueue=c.newQueue();c.finishQueue=c.newQueue();c.flushQueue=c.newQueue();c.invalidateData={};c.layoutQueue=c.newQueue();c.invalidQueue=[];c.triggers={data:{},dom:{}}},callLayout:function(c,d){this.currentLayout=c;c[d](this.getCmp(c.owner))},cancelComponent:function(C,J,A){var w=this,D=C,B=!C.isComponent,I=B?D.length:1,G,H,y,z,E,L,N,M,K,F;for(G=0;G<I;++G){if(B){C=D[G]}if(A){if(C.ownerCt){F=this.items[C.ownerCt.el.id];if(F){Ext.Array.remove(F.childItems,w.getCmp(C))}}else{if(C.rendered){w.removeEl(C.el)}}}if(!J){N=w.invalidQueue;y=N.length;if(y){w.invalidQueue=L=[];for(H=0;H<y;++H){M=N[H];K=M.item.target;if(K!==C&&!K.up(C)){L.push(M)}}}}E=C.componentLayout;w.cancelLayout(E);if(E.getLayoutItems){z=E.getLayoutItems();if(z.length){w.cancelComponent(z,true)}}if(C.isContainer&&!C.collapsed){E=C.layout;w.cancelLayout(E);z=E.getVisibleItems();if(z.length){w.cancelComponent(z,true)}}}},cancelLayout:function(c){var d=this;d.completionQueue.remove(c);d.finalizeQueue.remove(c);d.finishQueue.remove(c);d.layoutQueue.remove(c);if(c.running){d.layoutDone(c)}c.ownerContext=null},clearTriggers:function(r,q){var w=r.id,s=this.triggers[q?"dom":"data"],p=s&&s[w],v=(p&&p.length)||0,t,o,u;for(t=0;t<v;++t){u=p[t];o=u.item;s=q?o.domTriggers:o.triggers;delete s[u.prop][w]}},flush:function(){var h=this,g=h.flushQueue.clear(),j=g.length,f;if(j){++h.flushCount;for(f=0;f<j;++f){g[f].flush()}}},flushAnimations:function(){var h=this,f=h.animateQueue.clear(),g=f.length,j;if(g){for(j=0;j<g;j++){if(f[j].target.animate!==false){f[j].flushAnimations()}}Ext.fx.Manager.runner()}},flushInvalidates:function(){var o=this,m=o.invalidQueue,p=m&&m.length,j,q,r,s;o.invalidQueue=[];if(p){q=[];for(s=0;s<p;++s){j=(r=m[s]).item.target;if(!j.container.isDetachedBody){q.push(j);if(r.options){o.invalidateData[j.id]=r.options}}}o.invalidate(q,null)}},flushLayouts:function(q,o,u){var r=this,p=u?r[q].items:r[q].clear(),s=p.length,m,t;if(s){for(m=0;m<s;++m){t=p[m];if(!t.running){r.callLayout(t,o)}}r.currentLayout=null}},getCmp:function(b){return this.getItem(b,b.el)},getEl:function(d,f){var g=this.getItem(f,f);if(!g.parent){g.parent=d;if(d.children.length){d.children.push(g)}else{d.children=[g]}}return g},getItem:function(m,g){var j=g.id,h=this.items,o=h[j]||(h[j]=new Ext.layout.ContextItem({context:this,target:m,el:g}));return o},handleFailure:function(){var g=this.layouts,d,f;Ext.failedLayouts=(Ext.failedLayouts||0)+1;for(f in g){d=g[f];if(g.hasOwnProperty(f)){d.running=false;d.ownerContext=null}}},invalidate:function(A,y){var N=this,z=!A.isComponent,H,M,J,E,B,L,w,I,D,C,F,G,K;for(E=0,I=z?A.length:1;E<I;++E){B=z?A[E]:A;if(B.rendered&&!B.hidden){M=B.ownerLayout;D=B.componentLayout;K=false;if((!M||!M.needsItemSize)&&B.liquidLayout){K=true}if(!K||(M&&M.setsItemSize)){L=N.getCmp(B);J=!L.state;C=(B.isContainer&&!B.collapsed)?B.layout:null;F=N.invalidateData[L.id];delete N.invalidateData[L.id];G=L.init(y,F)}if(K){continue}if(F){N.processInvalidate(F,L,"before")}if(D.beforeLayoutCycle){D.beforeLayoutCycle(L)}if(C&&C.beforeLayoutCycle){C.beforeLayoutCycle(L)}G=L.initContinue(G);H=true;if(D.getLayoutItems){D.renderChildren();w=D.getLayoutItems();if(w.length){N.invalidate(w,true)}}if(C){H=false;C.renderChildren();if(C.needsItemSize||C.activeItemCount){w=C.getVisibleItems();if(w.length){N.invalidate(w,true)}}}L.initDone(H);N.resetLayout(D,L,J);if(C){N.resetLayout(C,L,J)}L.initAnimation();if(F){N.processInvalidate(F,L,"after")}}}N.currentLayout=null},isDescendant:function(f,c){if(f.isContainer){for(var g=c.ownerCt;g;g=g.ownerCt){if(g===f){return true}}}return false},layoutDone:function(d){var c=d.ownerContext;d.running=false;if(d.isComponentLayout){if(c.measuresBox){c.onBoxMeasured()}c.setProp("done",true)}else{c.setProp("containerLayoutDone",true)}--this.remainingLayouts;++this.progressCount},newQueue:function(){return new Ext.util.Queue()},processInvalidate:function(g,j,h){if(g[h]){var m=this,o=m.currentLayout;m.currentLayout=g.layout||null;g[h](j,g);m.currentLayout=o}},queueAnimation:function(b){this.animateQueue.add(b)},queueCompletion:function(b){this.completionQueue.add(b)},queueFinalize:function(b){this.finalizeQueue.add(b)},queueFlush:function(b){this.flushQueue.add(b)},chainFns:function(o,p,r){var t=this,u=o.layout,s=p.layout,m=o[r],q=p[r];return function(a){var b=t.currentLayout;if(m){t.currentLayout=u;m.call(o.scope||o,a,o)}t.currentLayout=s;q.call(p.scope||p,a,p);t.currentLayout=b}},purgeInvalidates:function(){var u=this,r=[],t=u.invalidQueue,w=t.length,s,q,y,z,A,v,B;for(s=0;s<w;++s){A=t[s];v=A.item.target;B=true;for(q=r.length;q--;){y=r[q];z=y.item.target;if(v.isLayoutChild(z)){B=false;break}if(z.isLayoutChild(v)){Ext.Array.erase(r,q,1)}}if(B){r.push(A)}}u.invalidQueue=r},queueInvalidate:function(r,q){var u=this,s=[],t=u.invalidQueue,v=t.length,y,A,w,B,z;if(r.isComponent){y=r;r=u.items[y.el.id];if(r){r.recalculateSizeModel()}else{r=u.getCmp(y)}}else{y=r.target}r.invalid=true;while(v--){A=t[v];w=A.item.target;if(!y.isFloating&&y.up(w)){return}if(w===y){if(!(B=A.options)){A.options=q}else{if(q){if(q.widthModel){B.widthModel=q.widthModel}if(q.heightModel){B.heightModel=q.heightModel}if(!(z=B.state)){B.state=q.state}else{if(q.state){Ext.apply(z,q.state)}}if(q.before){B.before=u.chainFns(B,q,"before")}if(q.after){B.after=u.chainFns(B,q,"after")}}}return}if(!w.isLayoutChild(y)){s.push(A)}}s.push({item:r,options:q});u.invalidQueue=s},queueItemLayouts:function(g){var f=g.isComponent?g:g.target,d=f.componentLayout;if(!d.pending&&!d.invalid&&!d.done){this.queueLayout(d)}d=f.layout;if(d&&!d.pending&&!d.invalid&&!d.done&&!f.collapsed){this.queueLayout(d)}},queueLayout:function(b){this.layoutQueue.add(b);b.pending=true},removeEl:function(m,o){var j=m.id,g=o?o.children:null,h=this.items;if(g){Ext.Array.remove(g,h[j])}delete h[j]},resetLayout:function(f,j,h){var g=this;g.currentLayout=f;f.done=false;f.pending=true;f.firedTriggers=0;g.layoutQueue.add(f);if(h){g.layouts[f.id]=f;f.running=true;if(f.finishedLayout){g.finishQueue.add(f)}++g.remainingLayouts;++f.layoutCount;f.ownerContext=j;f.beginCount=0;f.blockCount=0;f.calcCount=0;f.triggerCount=0;if(!f.initialized){f.initLayout()}f.beginLayout(j)}else{++f.beginCount;if(!f.running){++g.remainingLayouts;f.running=true;f.ownerContext=j;if(f.isComponentLayout){j.unsetProp("done")}g.completionQueue.remove(f);g.finalizeQueue.remove(f)}}f.beginLayoutCycle(j,h)},run:function(){var g=this,d=false,f=g.cycleWatchDog;g.purgeInvalidates();g.flushInvalidates();g.state=1;g.totalCount=g.layoutQueue.getCount();g.flush();while((g.remainingLayouts||g.invalidQueue.length)&&f--){if(g.invalidQueue.length){g.flushInvalidates()}if(g.runCycle()){d=false}else{if(!d){g.flush();d=true;g.flushLayouts("completionQueue","completeLayout")}else{if(!g.invalidQueue.length){g.state=2;break}}}if(!(g.remainingLayouts||g.invalidQueue.length)){g.flush();g.flushLayouts("completionQueue","completeLayout");g.flushLayouts("finalizeQueue","finalizeLayout")}}return g.runComplete()},runComplete:function(){var b=this;b.state=2;if(b.remainingLayouts){b.handleFailure();return false}b.flush();b.flushLayouts("finishQueue","finishedLayout",true);b.flushLayouts("finishQueue","notifyOwner");b.flush();b.flushAnimations();return true},runCycle:function(){var j=this,h=j.layoutQueue.clear(),f=h.length,g;++j.cycleCount;j.progressCount=0;for(g=0;g<f;++g){j.runLayout(j.currentLayout=h[g])}j.currentLayout=null;return j.progressCount>0},runLayout:function(d){var f=this,g=f.getCmp(d.owner);d.pending=false;if(g.state.blocks){return}d.done=true;++d.calcCount;++f.calcCount;d.calculate(g);if(d.done){f.layoutDone(d);if(d.completeLayout){f.queueCompletion(d)}if(d.finalizeLayout){f.queueFinalize(d)}}else{if(!d.pending&&!d.invalid&&!(d.blockCount+d.triggerCount-d.firedTriggers)){f.queueLayout(d)}}},setItemSize:function(o,p,j){var r=o,m=1,s,q;if(o.isComposite){r=o.elements;m=r.length;o=r[0]}else{if(!o.dom&&!o.el){m=r.length;o=r[0]}}for(q=0;q<m;){s=this.get(o);s.setSize(p,j);o=r[++q]}}},1,0,0,0,0,0,[Ext.layout,"Context"],0));(Ext.cmd.derive("Ext.layout.container.Accordion",Ext.layout.container.VBox,{type:"accordion",alternateClassName:"Ext.layout.AccordionLayout",targetCls:"x-accordion-layout-ct",itemCls:["x-box-item","x-accordion-item"],align:"stretch",enableSplitters:false,fill:true,titleCollapse:true,hideCollapseTool:false,collapseFirst:undefined,animate:true,activeOnTop:false,multi:false,wrapOver:true,panelCollapseMode:"header",defaultAnimatePolicy:{y:true,height:true},constructor:function(){var b=this;Ext.layout.container.VBox.prototype.constructor.apply(this,arguments);if(b.animate){b.animatePolicy={};b.animatePolicy[b.names.x]=true;b.animatePolicy[b.names.width]=true}else{b.animatePolicy=null}},beforeRenderItems:function(s){var r=this,t=s.length,y=r.owner,q=r.collapseFirst,z=Ext.isDefined(q),p=r.getExpanded(true)[0],u=r.multi,v,w;for(w=0;w<t;w++){v=s[w];if(!v.rendered){v.isAccordionPanel=true;v.bodyAriaRole="tabpanel";v.accordionWrapOver=r.wrapOver;if(!u||v.collapsible!==false){v.collapsible=true}if(v.collapsible){if(z){v.collapseFirst=q}if(r.hideCollapseTool){v.hideCollapseTool=r.hideCollapseTool;v.titleCollapse=true}else{if(r.titleCollapse&&v.titleCollapse===undefined){v.titleCollapse=r.titleCollapse}}}v.hideHeader=v.width=null;v.title=v.title||"&#160;";v.addBodyCls("x-accordion-body");if(!u){if(p){v.collapsed=p!==v}else{if(v.hasOwnProperty("collapsed")&&v.collapsed===false){p=v}else{v.collapsed=true}}y.mon(v,"show",r.onComponentShow,r)}v.headerOverCls="x-accordion-hd-over"}}if(!r.processing&&!u){if(!p){if(t){s[0].collapsed=false}}else{if(r.activeOnTop){p.collapsed=false;r.configureItem(p);if(y.items.indexOf(p)>0){y.insert(0,p)}}}}},getItemsRenderTree:function(b){this.beforeRenderItems(b);return Ext.layout.container.VBox.prototype.getItemsRenderTree.apply(this,arguments)},renderItems:function(d,c){this.beforeRenderItems(d);Ext.layout.container.VBox.prototype.renderItems.apply(this,arguments)},configureItem:function(b){Ext.layout.container.VBox.prototype.configureItem.apply(this,arguments);b.ignoreHeaderBorderManagement=true;b.animCollapse=false;if(this.fill){b.flex=1}},beginLayout:function(b){Ext.layout.container.VBox.prototype.beginLayout.apply(this,arguments);this.innerCt.dom.setAttribute("role","tablist");this.innerCt.dom.setAttribute("aria-multiselectable",true);this.updatePanelClasses(b)},updatePanelClasses:function(q){var s=q.visibleItems,r=s.length,m=true,j,o,p;for(j=0;j<r;j++){o=s[j];p=o.header;p.addCls("x-accordion-hd");if(m){p.removeCls("x-accordion-hd-sibling-expanded")}else{p.addCls("x-accordion-hd-sibling-expanded")}if(j+1===r&&o.collapsed){p.addCls("x-accordion-hd-last-collapsed")}else{p.removeCls("x-accordion-hd-last-collapsed")}m=o.collapsed}},onBeforeComponentExpand:function(p){var t=this,o=t.owner,q=t.multi,r=!q&&!t.animate&&t.activeOnTop,u,m,s;if(!t.processing){t.processing=true;m=o.deferLayouts;o.deferLayouts=true;if(!q){u=t.getExpanded()[0];if(u&&u!==p){s=u.$layoutAnim;if(s){s.jumpToEnd()}u.collapse()}}if(r){Ext.suspendLayouts();o.insert(0,p);Ext.resumeLayouts()}o.deferLayouts=m;t.processing=false}},onBeforeComponentCollapse:function(p){var o=this,j=o.owner,m,q,h;if(o.owner.items.getCount()===1){return false}if(!o.processing){o.processing=true;h=j.deferLayouts;j.deferLayouts=true;m=p.next()||p.prev();if(o.multi){q=o.getExpanded();if(q.length===1){m.expand()}}else{if(m){m.expand()}}j.deferLayouts=h;o.processing=false}},onComponentShow:function(b){this.onBeforeComponentExpand(b)},onAdd:function(c){var d=this;Ext.layout.container.VBox.prototype.onAdd.apply(this,arguments);if(c.collapseMode==="placeholder"){c.collapseMode=d.panelCollapseMode}c.collapseDirection=c.headerPosition;if(d.layoutCount&&!d.multi&&d.owner.items.getCount()>1){d.processing=true;c.collapse();d.processing=false}},onRemove:function(g,h){var j=this,f;Ext.layout.container.VBox.prototype.onRemove.apply(this,arguments);if(!j.owner.destroying&&!j.multi&&!g.collapsed){f=j.owner.items.first();if(f){f.expand()}}},getExpanded:function(o){var j=this.owner.items.items,m=j.length,r=0,s=[],p,q;for(;r<m;++r){q=j[r];if(!q.hidden){if(o){p=q.hasOwnProperty("collapsed")&&q.collapsed===false}else{p=!q.collapsed}if(p){s.push(q)}}}return s},afterCollapse:Ext.emptyFn,afterExpand:Ext.emptyFn},1,0,0,0,["layout.accordion"],0,[Ext.layout.container,"Accordion",Ext.layout,"AccordionLayout"],0));(Ext.cmd.derive("Ext.resizer.BorderSplitter",Ext.resizer.Splitter,{collapseTarget:null,getTrackerConfig:function(){var b=Ext.resizer.Splitter.prototype.getTrackerConfig.call(this);b.xclass="Ext.resizer.BorderSplitterTracker";return b},onTargetCollapse:function(b){Ext.resizer.Splitter.prototype.onTargetCollapse.call(this,b);if(this.performCollapse!==false&&b.collapseMode=="mini"){b.addCls(b.baseCls+"-"+b.collapsedCls+"-mini")}},onTargetExpand:function(b){Ext.resizer.Splitter.prototype.onTargetExpand.call(this,b);if(this.performCollapse!==false&&b.collapseMode=="mini"){b.removeCls(b.baseCls+"-"+b.collapsedCls+"-mini")}}},0,["bordersplitter"],["component","box","splitter","bordersplitter"],{component:true,box:true,splitter:true,bordersplitter:true},["widget.bordersplitter"],0,[Ext.resizer,"BorderSplitter"],0));(Ext.cmd.derive("Ext.layout.container.Border",Ext.layout.container.Container,{alternateClassName:"Ext.layout.BorderLayout",targetCls:"x-border-layout-ct",itemCls:["x-border-item","x-box-item"],type:"border",isBorderLayout:true,padding:undefined,percentageRe:/(\d+)%/,horzPositionProp:"left",padOnContainerProp:"left",padNotOnContainerProp:"right",axisProps:{horz:{borderBegin:"west",borderEnd:"east",horizontal:true,posProp:"x",sizeProp:"width",sizePropCap:"Width"},vert:{borderBegin:"north",borderEnd:"south",horizontal:false,posProp:"y",sizeProp:"height",sizePropCap:"Height"}},centerRegion:null,manageMargins:true,panelCollapseAnimate:true,panelCollapseMode:"placeholder",regionWeights:{north:20,south:10,center:0,west:-10,east:-20},beginAxis:function(L,U,K){var C=this,T=C.axisProps[K],F=!T.horizontal,M=T.sizeProp,H=0,V=L.childItems,Q=V.length,D,G,I,P,E,R,N,J,S,B,O;for(G=0;G<Q;++G){I=V[G];E=I.target;I.layoutPos={};if(E.region){I.region=R=E.region;I.isCenter=E.isCenter;I.isHorz=E.isHorz;I.isVert=E.isVert;I.weight=E.weight||C.regionWeights[R]||0;E.weight=I.weight;U[E.id]=I;if(E.isCenter){D=I;P=E.flex;L.centerRegion=D;continue}if(F!==I.isVert){continue}I.reverseWeighting=(R===T.borderEnd);J=E[M];S=typeof J;if(!E.collapsed){if(S==="string"&&(N=C.percentageRe.exec(J))){I.percentage=parseInt(N[1],10)}else{if(E.flex){H+=I.flex=E.flex}}}}}if(D){B=D.target;if((O=B.placeholderFor)){if(!P&&F===O.collapsedVertical()){P=0;D.collapseAxis=K}}else{if(B.collapsed&&(F===B.collapsedVertical())){P=0;D.collapseAxis=K}}}if(P==null){P=1}H+=P;return Ext.apply({before:F?"top":"left",totalFlex:H},T)},beginLayout:function(E){var y=this,z=y.getLayoutItems(),D=y.padding,w=typeof D,J=false,I,u,G,B,C,H,F,A,v;if(D){if(w==="string"||w==="number"){D=Ext.util.Format.parseBox(D)}}else{D=E.getEl("getTargetEl").getPaddingInfo();J=true}E.outerPad=D;E.padOnContainer=J;for(B=0,G=z.length;B<G;++B){u=z[B];H=y.getSplitterTarget(u);if(H){F=undefined;A=!!u.hidden;if(!H.split){if(H.isCollapsingOrExpanding){F=!!H.collapsed}}else{if(A!==H.hidden){F=!H.hidden}}if(F){u.show()}else{if(F===false){u.hide()}}}}Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments);z=E.childItems;G=z.length;C={};E.borderAxisHorz=y.beginAxis(E,C,"horz");E.borderAxisVert=y.beginAxis(E,C,"vert");for(B=0;B<G;++B){I=z[B];H=y.getSplitterTarget(I.target);if(H){v=C[H.id];if(!v){v=E.getEl(H.el,y);v.region=H.region}I.collapseTarget=H=v;I.weight=H.weight;I.reverseWeighting=H.reverseWeighting;H.splitter=I;I.isHorz=H.isHorz;I.isVert=H.isVert}}y.sortWeightedItems(z,"reverseWeighting");y.setupSplitterNeighbors(z)},calculate:function(E){var w=this,H=w.getContainerSize(E),A=E.childItems,F=A.length,G=E.borderAxisHorz,z=E.borderAxisVert,D=E.outerPad,u=E.padOnContainer,B,I,y,J,v,C;G.begin=D[w.padOnContainerProp];z.begin=D.top;v=G.end=G.flexSpace=H.width+(u?D[w.padOnContainerProp]:-D[w.padNotOnContainerProp]);C=z.end=z.flexSpace=H.height+(u?D.top:-D.bottom);for(B=0;B<F;++B){I=A[B];y=I.getMarginInfo();if(I.isHorz||I.isCenter){G.addUnflexed(y.width);v-=y.width}if(I.isVert||I.isCenter){z.addUnflexed(y.height);C-=y.height}if(!I.flex&&!I.percentage){if(I.isHorz||(I.isCenter&&I.collapseAxis==="horz")){J=I.getProp("width");G.addUnflexed(J);if(I.collapseTarget){v-=J}}else{if(I.isVert||(I.isCenter&&I.collapseAxis==="vert")){J=I.getProp("height");z.addUnflexed(J);if(I.collapseTarget){C-=J}}}}}for(B=0;B<F;++B){I=A[B];y=I.getMarginInfo();if(I.percentage){if(I.isHorz){J=Math.ceil(v*I.percentage/100);J=I.setWidth(J);G.addUnflexed(J)}else{if(I.isVert){J=Math.ceil(C*I.percentage/100);J=I.setHeight(J);z.addUnflexed(J)}}}}for(B=0;B<F;++B){I=A[B];if(!I.isCenter){w.calculateChildAxis(I,G);w.calculateChildAxis(I,z)}}if(w.finishAxis(E,z)+w.finishAxis(E,G)<2){w.done=false}else{w.finishPositions(A)}},calculateChildAxis:function(q,z){var B=q.collapseTarget,u="set"+z.sizePropCap,w=z.sizeProp,y=q.getMarginInfo()[w],s,A,v,t,r;if(B){s=B.region}else{s=q.region;v=q.flex}A=s===z.borderBegin;if(!A&&s!==z.borderEnd){q[u](z.end-z.begin-y);t=z.begin}else{if(v){r=Math.ceil(z.flexSpace*(v/z.totalFlex));r=q[u](r)}else{if(q.percentage){r=q.peek(w)}else{r=q.getProp(w)}}r+=y;if(A){t=z.begin;z.begin+=r}else{z.end=t=z.end-r}}q.layoutPos[z.posProp]=t},eachItem:function(o,r,s){var p=this,m=p.getLayoutItems(),j=0,q;if(Ext.isFunction(o)){r=o;s=r}for(j;j<m.length;j++){q=m[j];if(!o||q.region===o){if(r.call(s,q)===false){break}}}},finishAxis:function(h,j){var f=j.end-j.begin,g=h.centerRegion;if(g){g["set"+j.sizePropCap](f-g.getMarginInfo()[j.sizeProp]);g.layoutPos[j.posProp]=j.begin}return Ext.isNumber(f)?1:0},finishPositions:function(j){var o=j.length,g,h,m=this.horzPositionProp;for(g=0;g<o;++g){h=j[g];h.setProp("x",h.layoutPos.x+h.marginInfo[m]);h.setProp("y",h.layoutPos.y+h.marginInfo.top)}},getLayoutItems:function(){var m=this.owner,q=(m&&m.items&&m.items.items)||[],r=q.length,j=[],s=0,p,o;for(;s<r;s++){p=q[s];o=p.placeholderFor;if(p.hidden||((!p.floated||p.isCollapsingOrExpanding===2)&&!(o&&o.isCollapsingOrExpanding===2))){j.push(p)}}return j},getPlaceholder:function(b){return b.getPlaceholder&&b.getPlaceholder()},getMaxWeight:function(b){return this.getMinMaxWeight(b)},getMinWeight:function(b){return this.getMinMaxWeight(b,true)},getMinMaxWeight:function(h,g){var f=this,j=null;f.eachItem(h,function(a){if(a.hasOwnProperty("weight")){if(j===null){j=a.weight;return}if((g&&a.weight<j)||a.weight>j){j=a.weight}}},this);return j},getSplitterTarget:function(c){var d=c.collapseTarget;if(d&&d.collapsed){return d.placeholder||d}return d},isItemBoxParent:function(b){return true},isItemShrinkWrap:function(b){return true},insertSplitter:function(r,s,p,j){var o=r.region,q=Ext.apply({xtype:"bordersplitter",collapseTarget:r,id:r.id+"-splitter",hidden:p,canResize:r.splitterResize!==false,splitterFor:r,synthetic:true},j),m=s+((o==="south"||o==="east")?0:1);if(r.collapseMode==="mini"){q.collapsedCls=r.collapsedCls}r.splitter=this.owner.add(m,q)},getMoveAfterIndex:function(c){var d=Ext.layout.container.Container.prototype.getMoveAfterIndex.apply(this,arguments);if(c.splitter){d++}return d},moveItemBefore:function(f,g){var d;if(g&&g.splitter){d=g.region;if(d==="south"||d==="east"){g=g.splitter}}return Ext.layout.container.Container.prototype.moveItemBefore.call(this,f,g)},onAdd:function(o,t){var r=this,u=o.placeholderFor,p=o.region,s,q,w,v;Ext.layout.container.Container.prototype.onAdd.apply(this,arguments);if(p){Ext.apply(o,r.regionFlags[p]);if(r.owner.isViewport){o.isViewportBorderChild=true}if(o.initBorderRegion){o.initBorderRegion()}s=p==="center";if(s){r.centerRegion=o}else{q=o.split;w=!!o.hidden;if(typeof q==="object"){v=q;q=true}if((o.isHorz||o.isVert)&&(q||o.collapseMode==="mini")){r.insertSplitter(o,t,w||!q,v)}}if(!s&&!o.hasOwnProperty("collapseMode")){o.collapseMode=r.panelCollapseMode}if(!o.hasOwnProperty("animCollapse")){if(o.collapseMode!=="placeholder"){o.animCollapse=false}else{o.animCollapse=r.panelCollapseAnimate}}}else{if(u){Ext.apply(o,r.regionFlags[u.region]);o.region=u.region;o.weight=u.weight}}},onDestroy:function(){this.centerRegion=null;Ext.layout.container.Container.prototype.onDestroy.call(this)},onRemove:function(m,t){var s=this,p=m.region,r=m.splitter,o=s.owner,q=o.destroying,u;if(p){if(m.isCenter){s.centerRegion=null}delete m.isCenter;delete m.isHorz;delete m.isVert;if(r&&!o.destroying){o.doRemove(r,true)}delete m.splitter}Ext.layout.container.Container.prototype.onRemove.apply(this,arguments);if(!q&&!t&&m.rendered){u=m.getEl();if(u){u.setStyle("top","");u.setStyle(s.horzPositionProp,"")}}},regionMeta:{center:{splitterDelta:0},north:{splitterDelta:1},south:{splitterDelta:-1},west:{splitterDelta:1},east:{splitterDelta:-1}},regionFlags:{center:{isCenter:true,isHorz:false,isVert:false},north:{isCenter:false,isHorz:false,isVert:true,collapseDirection:"top"},south:{isCenter:false,isHorz:false,isVert:true,collapseDirection:"bottom"},west:{isCenter:false,isHorz:true,isVert:false,collapseDirection:"left"},east:{isCenter:false,isHorz:true,isVert:false,collapseDirection:"right"}},setupSplitterNeighbors:function(u){var F={},A=u.length,j=this.touchedRegions,y,z,E,v,B,w,t,D,C;for(y=0;y<A;++y){w=u[y].target;t=w.region;if(w.isCenter){E=w}else{if(t){C=j[t];for(z=0,v=C.length;z<v;++z){B=F[C[z]];if(B){B.neighbors.push(w)}}if(w.placeholderFor){D=w.placeholderFor.splitter}else{D=w.splitter}if(D){D.neighbors=[]}F[t]=D}}}if(E){C=j.center;for(z=0,v=C.length;z<v;++z){B=F[C[z]];if(B){B.neighbors.push(E)}}}},touchedRegions:{center:["north","south","east","west"],north:["north","east","west"],south:["south","east","west"],east:["east","north","south"],west:["west","north","south"]},sizePolicies:{vert:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},horz:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},flexAll:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}},getItemSizePolicy:function(q){var r=this,m=this.sizePolicies,s,j,p,o;if(q.isCenter){o=q.placeholderFor;if(o){if(o.collapsedVertical()){return m.vert}return m.horz}if(q.collapsed){if(q.collapsedVertical()){return m.vert}return m.horz}return m.flexAll}s=q.collapseTarget;if(s){return s.isVert?m.vert:m.horz}if(q.region){if(q.isVert){j=q.height;p=m.vert}else{j=q.width;p=m.horz}if(q.flex||(typeof j==="string"&&r.percentageRe.test(j))){return m.flexAll}return p}return r.autoSizePolicy}},0,0,0,0,["layout.border"],0,[Ext.layout.container,"Border",Ext.layout,"BorderLayout"],function(){var d={addUnflexed:function(a){this.flexSpace=Math.max(this.flexSpace-a,0)}},c=this.prototype.axisProps;Ext.apply(c.horz,d);Ext.apply(c.vert,d)}));(Ext.cmd.derive("Ext.plugin.Manager",Ext.Base,{alternateClassName:["Ext.PluginManager","Ext.PluginMgr"],singleton:true,typeName:"ptype",create:function(g,j,m){var h,o;if(g.init){h=g}else{if(m){g=Ext.apply({},g);g.cmp=m}else{m=g.cmp}if(g.xclass){h=Ext.create(g)}else{o="plugin."+(g.ptype||j);h=Ext.ClassManager.instantiateByAlias(o,g)}}if(h&&m&&h.setCmp&&!h.setCmpCalled){h.setCmp(m);h.setCmpCalled=true}return h}},0,0,0,0,0,0,[Ext.plugin,"Manager",Ext,"PluginManager",Ext,"PluginMgr"],0));(Ext.cmd.derive("Ext.resizer.BorderSplitterTracker",Ext.resizer.SplitterTracker,{getPrevCmp:null,getNextCmp:null,calculateConstrainRegion:function(){var L=this,ab=L.splitter,N=ab.collapseTarget,Y=ab.defaultSplitMin,V=ab.vertical?"Width":"Height",Z="min"+V,E="max"+V,U="get"+V,F=ab.neighbors,X=F.length,P=N.el.getBox(),W=P.x,K=P.y,M=P.right,T=P.bottom,I=ab.vertical?(M-W):(T-K),O,S,H,R,Q,G,J,aa;R=(N[Z]||Math.min(I,Y))-I;Q=N[E];if(!Q){Q=1000000000}else{Q-=I}aa=I;for(O=0;O<X;++O){S=F[O];I=S[U]();H=S[E];if(H===null){H=undefined}G=I-H;J=I-(S[Z]||Math.min(I,Y));if(!isNaN(G)){if(R<G){R=G}}if(Q>J){Q=J}}if(Q-R<2){return null}P=new Ext.util.Region(K,M,T,W);L.constraintAdjusters[L.getCollapseDirection()](P,R,Q,ab);L.dragInfo={minRange:R,maxRange:Q,targetSize:aa};return P},constraintAdjusters:{left:function(j,g,f,h){j[0]=j.x=j.left=j.right+g;j.right+=f+h.getWidth()},top:function(j,g,f,h){j[1]=j.y=j.top=j.bottom+g;j.bottom+=f+h.getHeight()},bottom:function(j,g,f,h){j.bottom=j.top-g;j.top-=f+h.getHeight()},right:function(j,g,f,h){j.right=j.left-g;j[0]=j.x=j.left=j.x-f+h.getWidth()}},onBeforeStart:function(p){var s=this,r=s.splitter,t=r.collapseTarget,m=r.neighbors,u=m.length,o,q;if(t.collapsed){return false}for(o=0;o<u;++o){q=m[o];if(q.collapsed&&q.isHorz===t.isHorz){return false}}if(!(s.constrainTo=s.calculateConstrainRegion())){return false}return true},performResize:function(r,s){var q=this,y=q.splitter,t=y.getCollapseDirection(),z=y.collapseTarget,u=q.splitAdjusters[y.vertical?"horz":"vert"],p=s[u.index],v=q.dragInfo,w;if(t==="right"||t==="bottom"){p=-p}p=Math.min(Math.max(v.minRange,p),v.maxRange);if(p){(w=y.ownerCt).suspendLayouts();u.adjustTarget(z,v.targetSize,p);w.resumeLayouts(true)}},splitAdjusters:{horz:{index:0,adjustTarget:function(d,f,g){d.flex=null;d.setSize(f+g)}},vert:{index:1,adjustTarget:function(d,f,g){d.flex=null;d.setSize(undefined,f+g)}}},getCollapseDirection:function(){return this.splitter.getCollapseDirection()}},0,0,0,0,0,0,[Ext.resizer,"BorderSplitterTracker"],0));(Ext.cmd.derive("Ext.resizer.ResizeTracker",Ext.dd.DragTracker,{dynamic:true,preserveRatio:false,constrainTo:null,proxyCls:"x-resizable-proxy",constructor:function(g){var m=this,o,h,j;if(!g.el){if(g.target.isComponent){m.el=g.target.getEl()}else{m.el=g.target}}Ext.dd.DragTracker.prototype.constructor.apply(this,arguments);if(m.preserveRatio&&m.minWidth&&m.minHeight){o=m.minWidth/m.el.getWidth();h=m.minHeight/m.el.getHeight();if(h>o){m.minWidth=m.el.getWidth()*h}else{m.minHeight=m.el.getHeight()*o}}if(m.throttle){j=Ext.Function.createThrottled(function(){Ext.resizer.ResizeTracker.prototype.resize.apply(m,arguments)},m.throttle);m.resize=function(b,a,c){if(c){Ext.resizer.ResizeTracker.prototype.resize.apply(m,arguments)}else{j.apply(null,arguments)}}}},onBeforeStart:function(b){this.startBox=this.target.getBox()},getProxy:function(){var b=this;if(!b.dynamic&&!b.proxy){b.proxy=b.createProxy(b.target||b.el);b.hideProxy=true}if(b.proxy){b.proxy.show();return b.proxy}},createProxy:function(g){var d,f=this.proxyCls;if(g.isComponent){d=g.getProxy().addCls(f)}else{d=g.createProxy({tag:"div",role:"presentation",cls:f,id:g.id+"-rzproxy"},Ext.getBody())}d.removeCls("x-proxy-el");return d},onStart:function(b){this.activeResizeHandle=Ext.get(this.getDragTarget().id);if(!this.dynamic){this.resize(this.startBox)}},onMouseDown:function(d,f){var g=Ext.fly(f.parentNode);Ext.dd.DragTracker.prototype.onMouseDown.apply(this,arguments);if(g&&g.shim){g.maskIframes()}},onMouseUp:function(d){var c=Ext.fly(this.dragTarget.parentNode);Ext.dd.DragTracker.prototype.onMouseUp.apply(this,arguments);if(c&&c.shim){c.unmaskIframes()}},onDrag:function(b){if(this.dynamic||this.proxy){this.updateDimensions(b)}},updateDimensions:function(D,H){var C=this,P=C.activeResizeHandle.region,N=C.getOffset(C.constrainTo?"dragTarget":null),J=C.startBox,M,F=0,B=0,K,E,R=0,z=0,A,L,Q,O,G,I;P=C.convertRegionName(P);switch(P){case"south":B=N[1];Q=2;break;case"north":B=-N[1];z=-B;Q=2;break;case"east":F=N[0];Q=1;break;case"west":F=-N[0];R=-F;Q=1;break;case"northeast":B=-N[1];z=-B;F=N[0];L=[J.x,J.y+J.height];Q=3;break;case"southeast":B=N[1];F=N[0];L=[J.x,J.y];Q=3;break;case"southwest":F=-N[0];R=-F;B=N[1];L=[J.x+J.width,J.y];Q=3;break;case"northwest":B=-N[1];z=-B;F=-N[0];R=-F;L=[J.x+J.width,J.y+J.height];Q=3;break}O={width:J.width+F,height:J.height+B,x:J.x+R,y:J.y+z};K=Ext.Number.snap(O.width,C.widthIncrement);E=Ext.Number.snap(O.height,C.heightIncrement);if(K!==O.width||E!==O.height){switch(P){case"northeast":O.y-=E-O.height;break;case"north":O.y-=E-O.height;break;case"southwest":O.x-=K-O.width;break;case"west":O.x-=K-O.width;break;case"northwest":O.x-=K-O.width;O.y-=E-O.height}O.width=K;O.height=E}if(O.width<C.minWidth||O.width>C.maxWidth){O.width=Ext.Number.constrain(O.width,C.minWidth,C.maxWidth);if(R){O.x=J.x+(J.width-O.width)}}else{C.lastX=O.x}if(O.height<C.minHeight||O.height>C.maxHeight){O.height=Ext.Number.constrain(O.height,C.minHeight,C.maxHeight);if(z){O.y=J.y+(J.height-O.height)}}else{C.lastY=O.y}if(C.preserveRatio||D.shiftKey){M=C.startBox.width/C.startBox.height;G=Math.min(Math.max(C.minHeight,O.width/M),C.maxHeight);I=Math.min(Math.max(C.minWidth,O.height*M),C.maxWidth);if(Q===1){O.height=G}else{if(Q===2){O.width=I}else{A=Math.abs(L[0]-this.lastXY[0])/Math.abs(L[1]-this.lastXY[1]);if(A>M){O.height=G}else{O.width=I}if(P==="northeast"){O.y=J.y-(O.height-J.height)}else{if(P==="northwest"){O.y=J.y-(O.height-J.height);O.x=J.x-(O.width-J.width)}else{if(P==="southwest"){O.x=J.x-(O.width-J.width)}}}}}}C.setPosition=O.x!==C.startBox.x||O.y!==C.startBox.y;C.resize(O,H)},resize:function(m,h){var o=this,j,g=o.setPosition;if(o.dynamic||(!o.dynamic&&h)){if(g){o.target.setBox(m)}else{o.target.setSize(m.width,m.height)}}if(!h){j=o.getProxy();if(j&&j!==o.target){if(g||o.hideProxy){j.setBox(m)}else{j.setSize(m.width,m.height)}}}},onEnd:function(b){this.updateDimensions(b,true);if(this.proxy&&this.hideProxy){this.proxy.hide()}},convertRegionName:function(b){return b}},1,0,0,0,0,0,[Ext.resizer,"ResizeTracker"],0));(Ext.cmd.derive("Ext.resizer.Resizer",Ext.Base,{alternateClassName:"Ext.Resizable",handleCls:"x-resizable-handle",overCls:"x-resizable-handle-over",pinnedCls:"x-resizable-pinned",wrapCls:"x-resizable-wrap",wrappedCls:"x-resizable-wrapped",delimiterRe:/(?:\s*[,;]\s*)|\s+/,dynamic:true,handles:"s e se",height:null,width:null,heightIncrement:0,widthIncrement:0,minHeight:20,minWidth:20,maxHeight:10000,maxWidth:10000,pinned:false,preserveRatio:false,transparent:false,possiblePositions:{n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"},ariaRole:"presentation",constructor:function(I){var A=this,M=A.handles,B=Ext.dom.Element.unselectableCls,w=[],N,H,y,K,D,F,z,J,E,G,L,C;if(Ext.isString(I)||Ext.isElement(I)||I.dom){N=I;I=arguments[1]||{};I.target=N}A.mixins.observable.constructor.call(A,I);N=A.target;if(N){if(N.isComponent){N.addClsWithUI("resizable");if(N.minWidth){A.minWidth=N.minWidth}if(N.minHeight){A.minHeight=N.minHeight}if(N.maxWidth){A.maxWidth=N.maxWidth}if(N.maxHeight){A.maxHeight=N.maxHeight}if(N.floating){if(!A.hasOwnProperty("handles")){A.handles="n ne e se s sw w nw"}}A.el=N.getEl()}else{N=A.el=A.target=Ext.get(N)}}else{N=A.target=A.el=Ext.get(A.el)}A.el.addCls(Ext.Component.prototype.borderBoxCls);if(Ext.isNumber(A.width)){A.width=Ext.Number.constrain(A.width,A.minWidth,A.maxWidth)}if(Ext.isNumber(A.height)){A.height=Ext.Number.constrain(A.height,A.minHeight,A.maxHeight)}if(A.width!==null||A.height!==null){A.target.setSize(A.width,A.height)}K=A.el.dom.tagName.toUpperCase();if(K==="TEXTAREA"||K==="IMG"||K==="TABLE"){A.originalTarget=A.target;G=N.isComponent?N.getEl():N;A.el.addCls(A.wrappedCls);A.target=A.el=A.el.wrap({role:"presentation",cls:A.wrapCls,id:A.el.id+"-rzwrap",style:G.getStyle(["margin-top","margin-bottom"])});L=G.getPositioning();A.el.setPositioning(L);G.clearPositioning();E=G.getBox();if(L.position!=="absolute"){E.x=0;E.y=0}A.el.setBox(E);G.setStyle("position","absolute");A.isTargetWrapped=true}A.el.position();if(A.pinned){A.el.addCls(A.pinnedCls)}A.resizeTracker=new Ext.resizer.ResizeTracker({disabled:A.disabled,target:N,el:A.el,constrainTo:A.constrainTo,handleCls:A.handleCls,overCls:A.overCls,throttle:A.throttle,proxy:A.originalTarget?A.el:null,dynamic:A.originalTarget?true:A.dynamic,originalTarget:A.originalTarget,delegate:"."+A.handleCls,preserveRatio:A.preserveRatio,heightIncrement:A.heightIncrement,widthIncrement:A.widthIncrement,minHeight:A.minHeight,maxHeight:A.maxHeight,minWidth:A.minWidth,maxWidth:A.maxWidth});A.resizeTracker.on({mousedown:A.onBeforeResize,drag:A.onResize,dragend:A.onResizeEnd,scope:A});if(A.handles==="all"){A.handles="n s e w ne nw se sw"}M=A.handles=A.handles.split(A.delimiterRe);y=A.possiblePositions;D=M.length;H=A.handleCls+" "+A.handleCls+"-{0}";if(A.target.isComponent){C=A.target.baseCls;H+=" "+C+"-handle "+C+"-handle-{0}";if(Ext.supports.CSS3BorderRadius){H+=" "+C+"-handle-{0}-br"}}for(F=0;F<D;F++){if(M[F]&&y[M[F]]){z=y[M[F]];w.push('<div id="',A.el.id,"-",z,'-handle" class="',Ext.String.format(H,z)," ",B,'" unselectable="on" role="presentation"',"></div>")}}Ext.DomHelper.append(A.el,w.join(""));w.length=0;for(F=0;F<D;F++){if(M[F]&&y[M[F]]){z=y[M[F]];J=A[z]=A.el.getById(A.el.id+"-"+z+"-handle");w.push(J);J.region=z;if(A.transparent){J.setOpacity(0)}}}A.resizeTracker.handleEls=w},disable:function(){this.resizeTracker.disable()},enable:function(){this.resizeTracker.enable()},onBeforeResize:function(d,c){return this.fireResizeEvent("beforeresize",d,c)},onResize:function(d,c){return this.fireResizeEvent("resizedrag",d,c)},onResizeEnd:function(d,c){return this.fireResizeEvent("resize",d,c)},fireResizeEvent:function(h,m,j){var o=this,g;if(o.hasListeners[h]){g=o.el.getBox();return o.fireEvent(h,o,g.width,g.height,j)}},resizeTo:function(d,f){var g=this;g.target.setSize(d,f);g.fireEvent("resize",g,d,f,null)},getEl:function(){return this.el},getTarget:function(){return this.target},destroy:function(){var o=this,p,q=o.handles,j=q.length,h=o.possiblePositions,m;o.resizeTracker.destroy();if(o.isTargetWrapped){o.target.destroy()}for(p=0;p<j;p++){if((m=o[h[q[p]]])){m.destroy()}}o.callParent()}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.resizer,"Resizer",Ext,"Resizable"],0));(Ext.cmd.derive("Ext.toolbar.Fill",Ext.Component,{alternateClassName:"Ext.Toolbar.Fill",ariaRole:"presentation",isFill:true,flex:1},0,["tbfill"],["component","box","tbfill"],{component:true,box:true,tbfill:true},["widget.tbfill"],0,[Ext.toolbar,"Fill",Ext.Toolbar,"Fill"],0));(Ext.cmd.derive("metExploreViz.view.button.buttonImportMapping.ButtonImportMappingController",Ext.app.ViewController,{init:function(){var g=this,d=g.getViewModel(),f=g.getView();f.lookupReference("importMappingHidden").on({change:function(){metExploreD3.GraphUtils.handleFileSelect(f.lookupReference("importMappingHidden").fileInputEl.dom,g.loadData)},scope:g});f.on({reloadMapping:function(){f.reset()},scope:g})},loadData:function(w,q){var t=w;w=w.replace(/\r/g,"");var o=w.split("\n");var p=o.splice(0,1);p=p[0].split("\t");var s=p.splice(0,1);var r=[];if(s[0]=="reactionDBIdentifier"||s[0]=="metaboliteDBIdentifier"||s[0]=="reactionId"||s[0]=="metaboliteId"||s[0]=="inchi"){var v=new Mapping(q,p,s[0],r);_metExploreViz.addMapping(v);for(var u=o.length-1;u>=0;u--){o[u]=o[u].split("\t")}metExploreD3.GraphMapping.mapNodeData(v,o);metExploreD3.fireEventArg("selectMappingVisu","jsonmapping",v)}else{metExploreD3.displayWarning("Syntaxe error",'File have bad syntax. See <a href="http://metexplore.toulouse.inra.fr/metexploreViz/doc/documentation.php#import">MetExploreViz documentation</a>.')}}},0,0,0,0,["controller.buttonImportMapping"],0,[metExploreViz.view.button.buttonImportMapping,"ButtonImportMappingController"],0));(Ext.cmd.derive("metExploreViz.view.button.buttonImportMapping.ButtonImportMapping",Ext.form.Panel,{controller:"buttonImportMapping",hideLabel:true,items:[{xtype:"filefield",name:"fileData",buttonOnly:true,id:"IDimport",reference:"importMappingHidden",buttonConfig:{id:"IDimportMapping"}}]},0,["buttonImportMapping"],["component","box","container","panel","form","buttonImportMapping"],{component:true,box:true,container:true,panel:true,form:true,buttonImportMapping:true},["widget.buttonImportMapping"],0,[metExploreViz.view.button.buttonImportMapping,"ButtonImportMapping"],0));(Ext.cmd.derive("metExploreViz.view.button.buttonImportSideCompounds.ButtonImportSideCompoundsController",Ext.app.ViewController,{init:function(){var g=this,d=g.getViewModel(),f=g.getView();f.lookupReference("importSideCompoundsHidden").on({change:function(){metExploreD3.GraphUtils.handleFileSelect(f.lookupReference("importSideCompoundsHidden").fileInputEl.dom,g.loadData)},scope:g})},loadData:function(f){var d=f.split("\n");var g=metExploreD3.GraphNode.loadSideCompounds(d);if(g){metExploreD3.displayMessage("MetExploreViz","Side compounds are imported!")}else{metExploreD3.displayMessage("MetExploreViz Warning","Side compounds not found!")}}},0,0,0,0,["controller.buttonImportSideCompounds"],0,[metExploreViz.view.button.buttonImportSideCompounds,"ButtonImportSideCompoundsController"],0));(Ext.cmd.derive("metExploreViz.view.button.buttonImportSideCompounds.ButtonImportSideCompounds",Ext.form.Panel,{controller:"buttonImportSideCompounds",hideLabel:true,items:[{xtype:"filefield",name:"fileData",buttonOnly:true,id:"IDimportSC",reference:"importSideCompoundsHidden",buttonConfig:{id:"IDimportSideCompounds"}}]},0,["buttonImportSideCompounds"],["component","box","container","panel","form","buttonImportSideCompounds"],{component:true,box:true,container:true,panel:true,form:true,buttonImportSideCompounds:true},["widget.buttonImportSideCompounds"],0,[metExploreViz.view.button.buttonImportSideCompounds,"ButtonImportSideCompounds"],0));(Ext.cmd.derive("metExploreViz.view.button.buttonImportToNetwork.ButtonImportToNetworkController",Ext.app.ViewController,{init:function(){var g=this,d=g.getViewModel(),f=g.getView();f.lookupReference("importNetwork").on({change:function(){metExploreD3.GraphUtils.handleFileSelect(f.lookupReference("importNetwork").fileInputEl.dom,metExploreD3.GraphPanel.refreshPanel)},scope:g});f.on({reloadMapping:g.reloadMapping,scope:g})},reloadMapping:function(z){if(_metExploreViz.getMappingsLength()!=0){var s=Ext.getCmp("comparisonSidePanel");if(s!=undefined){var w=Ext.getCmp("selectMappingVisu");var q=w.getStore();q.loadData([],false);w.clearValue();var y=[];console.log(z);if(z){var v=_metExploreViz.getMappingsSet();v.forEach(function(a){y.push(new Ext.data.Record({name:a.getName()}));q.each(function(b){y.push(new Ext.data.Record({name:b.getData().name}))})});q.loadData(y,false)}if(q.getCount()==0){w.setDisabled(true)}}}var t=Ext.getCmp("selectCondition");var A=Ext.getCmp("addCondition");var B=Ext.getCmp("selectConditionType");if(A!=undefined&&selectCondition!=undefined&&B!=undefined){t.clearValue();A.setDisabled(true);A.setTooltip("You must choose a condition to add it");t.setDisabled(true);B.setDisabled(true)}var r=_metExploreViz.getSessionById("viz");var u=this}},0,0,0,0,["controller.buttonImportToNetwork"],0,[metExploreViz.view.button.buttonImportToNetwork,"ButtonImportToNetworkController"],0));(Ext.cmd.derive("metExploreViz.view.button.buttonImportToNetwork.ButtonImportToNetwork",Ext.form.Panel,{controller:"buttonImportToNetwork",text:"Import mapping from tab file",items:[{xtype:"filefield",name:"fileData",buttonOnly:true,height:"100%",width:"100px",reference:"importNetwork",buttonConfig:{id:"IDimportNetwork"}}],hideLabel:true},0,["buttonImportToNetwork"],["component","box","container","panel","form","buttonImportToNetwork"],{component:true,box:true,container:true,panel:true,form:true,buttonImportToNetwork:true},["widget.buttonImportToNetwork"],0,[metExploreViz.view.button.buttonImportToNetwork,"ButtonImportToNetwork"],0));(Ext.cmd.derive("metExploreViz.view.form.MappingCaptionForm",Ext.panel.Panel,{region:"north",margins:"0 0 0 0",border:false},0,["mappingCaptionForm"],["component","box","container","panel","mappingCaptionForm"],{component:true,box:true,container:true,panel:true,mappingCaptionForm:true},["widget.mappingCaptionForm"],0,[metExploreViz.view.form,"MappingCaptionForm"],0));(Ext.cmd.derive("metExploreViz.view.form.SelectConditionType",Ext.form.field.ComboBox,{store:{fields:["name"],data:[{name:"Continuous"},{name:"Discrete"},{name:"Flux"}]},listeners:{render:function(b){new Ext.ToolTip({target:b.getEl(),html:"Select a type of data"})},change:function(){console.log("change");var b=Ext.getCmp("selectCondition");b.clearValue()}},displayField:"name",valueField:"name",queryMode:"local",editable:false,emptyText:"-- Type of data --",margin:"5 0 5 0",anyMatch:true},0,["selectConditionType"],["component","box","field","textfield","pickerfield","combobox","combo","selectConditionType"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,selectConditionType:true},["widget.selectConditionType"],0,[metExploreViz.view.form,"SelectConditionType"],0));(Ext.cmd.derive("metExploreViz.view.form.SelectDisplayMetaboliteLabel",Ext.form.ComboBox,{fieldLabel:"Metabolite label",displayField:"name",valueField:"value",queryMode:"local",multiSelect:false,editable:false,margin:"5 5 5 5",width:"100%",store:{fields:["name","value"],data:[{name:"Database identifier",value:"dbIdentifier"},{name:"Name",value:"name"}]},emptyText:"-- Select Display Metabolite Label --"},0,["selectDisplayMetaboliteLabel"],["component","box","field","textfield","pickerfield","combobox","combo","selectDisplayMetaboliteLabel"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,selectDisplayMetaboliteLabel:true},["widget.selectDisplayMetaboliteLabel"],0,[metExploreViz.view.form,"SelectDisplayMetaboliteLabel"],0));(Ext.cmd.derive("metExploreViz.view.form.SelectDisplayReactionLabel",Ext.form.ComboBox,{fieldLabel:"Reaction label",displayField:"name",valueField:"value",queryMode:"local",multiSelect:false,editable:false,margin:"5 5 5 5",width:"100%",store:{fields:["name","value"],data:[{name:"EC",value:"ec"},{name:"Database identifier",value:"dbIdentifier"},{name:"Name",value:"name"}]},emptyText:"-- Select Display Reaction Label --"},0,["selectDisplayReactionLabel"],["component","box","field","textfield","pickerfield","combobox","combo","selectDisplayReactionLabel"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,selectDisplayReactionLabel:true},["widget.selectDisplayReactionLabel"],0,[metExploreViz.view.form,"SelectDisplayReactionLabel"],0));(Ext.cmd.derive("metExploreViz.view.form.generalStyleForm.GeneralStyleFormController",Ext.app.ViewController,{init:function(){var g=this,d=g.getViewModel(),f=g.getView();f.on({setGeneralStyle:function(){var a=_metExploreViz.getGeneralStyle();f.lookupReference("chooseMaxNodes").setValue(a.getReactionThreshold());f.lookupReference("chooseDisplayForOpt").items.get("name").setValue(a.isDisplayedLabelsForOpt());f.lookupReference("chooseDisplayForOpt").items.get("links").setValue(a.isDisplayedLinksForOpt())},scope:g});f.lookupReference("refreshGeneralConf").on({click:function(){var c=metExploreD3.getGeneralStyle();var a=false;var q=f.lookupReference("chooseMaxNodes").getValue();var o=((!isNaN(q)&&q>0)?q:c.getReactionThreshold());var p=f.lookupReference("chooseDisplayForOpt").items.get("name").getValue();var b=f.lookupReference("chooseDisplayForOpt").items.get("links").getValue();if((o!=c.getReactionThreshold())||(p!=c.isDisplayedLabelsForOpt())||(b!=c.isDisplayedLinksForOpt())){a=true;if(b!=c.isDisplayedLinksForOpt()){if(!b){metExploreD3.GraphLink.reloadLinks("viz",_metExploreViz.getSessionById("viz").getD3Data(),metExploreD3.getLinkStyle(),metExploreD3.getMetaboliteStyle())}else{d3.selectAll("path.link").remove()}metExploreD3.GraphLink.tick("viz",metExploreD3.getScaleById("viz"))}c.setReactionThreshold(parseFloat(o));c.setDisplayLabelsForOpt(p);c.setDisplayLinksForOpt(b)}},scope:g});f.lookupReference("chooseMaxNodes").on({afterrender:function(a){var b=metExploreD3.getGeneralStyle();f.lookupReference("chooseMaxNodes").setValue(b.getReactionThreshold())},scope:g});f.lookupReference("chooseDisplayForOpt").items.get("name").on({afterrender:function(a){var b=metExploreD3.getGeneralStyle();f.lookupReference("chooseDisplayForOpt").items.get("name").setValue(b.isDisplayedLabelsForOpt())},scope:g});f.lookupReference("chooseDisplayForOpt").items.get("links").on({afterrender:function(a){var b=metExploreD3.getGeneralStyle();f.lookupReference("chooseDisplayForOpt").items.get("links").setValue(b.isDisplayedLinksForOpt())},scope:g})}},0,0,0,0,["controller.form-generalStyleForm-generalStyleForm"],0,[metExploreViz.view.form.generalStyleForm,"GeneralStyleFormController"],0));(Ext.cmd.derive("metExploreViz.view.form.generalStyleForm.GeneralStyleForm",Ext.panel.Panel,{controller:"form-generalStyleForm-generalStyleForm",region:"north",margin:"0 0 0 0",flex:1,width:"100%",border:false,autoScroll:true,layout:{type:"vbox",align:"stretch"},items:[{xtype:"textfield",reference:"chooseMaxNodes",margin:"5 5 5 5",fieldLabel:"Threshold of reactions for optimization :",displayField:"threshold",editable:true,margin:"5 5 5 5",width:"100%",listeners:{change:function(c,d){this.lastValue=c}}},{xtype:"fieldcontainer",fieldLabel:"Remove on visualisation ",reference:"chooseDisplayForOpt",margin:"5 5 5 5",defaultType:"checkboxfield",items:[{boxLabel:"Name on nodes",name:"display",inputValue:"1",checked:true,id:"name"},{boxLabel:"Links",name:"display",inputValue:"2",checked:true,id:"links"}]},{xtype:"button",iconCls:"refresh",margin:"5 5 5 0",reference:"refreshGeneralConf",action:"refreshGeneralConf"}]},0,["generalStyleForm"],["component","box","container","panel","generalStyleForm"],{component:true,box:true,container:true,panel:true,generalStyleForm:true},["widget.generalStyleForm"],0,[metExploreViz.view.form.generalStyleForm,"GeneralStyleForm"],0));(Ext.cmd.derive("metExploreViz.view.form.metaboliteStyleForm.MetaboliteStyleFormController",Ext.app.ViewController,{init:function(){var g=this,d=g.getViewModel(),f=g.getView();f.on({setMetaboliteStyle:function(){var a=metExploreD3.getMetaboliteStyle();f.lookupReference("chooseHeightMetabolite").setValue(a.getHeight());f.lookupReference("chooseWidthMetabolite").setValue(a.getWidth());f.lookupReference("chooseRxMetabolite").setValue(a.getRX());f.lookupReference("chooseRyMetabolite").setValue(a.getRY());f.lookupReference("chooseStrokeMetabolite").setValue(a.getStrokeWidth());Ext.getCmp("selectDisplayMetaboliteLabel").setValue(a.getLabel())},scope:g});f.lookupReference("refreshMetaboliteStyle").on({click:function(){var b=metExploreD3.getMetaboliteStyle();var F=false;var E=f.lookupReference("chooseHeightMetabolite").getValue();var B=((!isNaN(E)&&E>0&&E<200)?E:b.getHeight());var v=f.lookupReference("chooseWidthMetabolite").getValue();var c=(!isNaN(v)&&v>0&&v<200)?v:b.getWidth();var D=f.lookupReference("chooseStrokeMetabolite").getValue();var a=(!isNaN(D)&&D>0&&D<200)?D:b.getStrokeWidth();var w=f.lookupReference("chooseRxMetabolite").getValue();var y=(!isNaN(w)&&w>=-100&&w<200)?w:b.getRX();var z=f.lookupReference("chooseRyMetabolite").getValue();var C=(!isNaN(z)&&z>=0&&z<200)?z:b.getRY();var A=f.lookupReference("selectDisplayMetaboliteLabel").getValue();if(A!=b.getLabel()||(B!=b.getHeight())||(c!=b.getWidth())||(a!=b.getStrokeWidth())||(y!=b.getRX())||(C!=b.getRY())){console.log("ok");F=true;b.setHeight(parseFloat(B));b.setWidth(parseFloat(c));b.setStrokeWidth(parseFloat(a));b.setRX(parseFloat(y));b.setRY(parseFloat(C));b.setLabel(A)}if(F){metExploreD3.GraphNode.refreshStyleOfMetabolite();metExploreD3.GraphCaption.refreshStyleOfMetabolite()}},scope:g});f.lookupReference("chooseHeightMetabolite").on({afterrender:function(a){var b=metExploreD3.getMetaboliteStyle();f.lookupReference("chooseHeightMetabolite").setValue(b.getHeight())},change:function(b,a,c){if(!isNaN(a)&&a>0&&a<200){g.changeHeight(a)}},scope:g});f.lookupReference("chooseWidthMetabolite").on({afterrender:function(a){var b=metExploreD3.getMetaboliteStyle();f.lookupReference("chooseWidthMetabolite").setValue(b.getWidth())},change:function(b,a,c){if(!isNaN(a)&&a>0&&a<200){g.changeWidth(a)}},scope:g});f.lookupReference("chooseStrokeMetabolite").on({afterrender:function(a){var b=metExploreD3.getMetaboliteStyle();f.lookupReference("chooseStrokeMetabolite").setValue(b.getStrokeWidth())},change:function(b,a,c){if(!isNaN(a)&&a>0&&a<200){g.changeStroke(a)}},scope:g});f.lookupReference("chooseRxMetabolite").on({afterrender:function(a){var b=metExploreD3.getMetaboliteStyle();f.lookupReference("chooseRxMetabolite").setValue(b.getRX())},change:function(b,a,c){if(!isNaN(a)&&a>=0&&a<200){g.changeRx(a)}},scope:g});f.lookupReference("chooseRyMetabolite").on({afterrender:function(a){var b=metExploreD3.getMetaboliteStyle();f.lookupReference("chooseRyMetabolite").setValue(b.getRY())},change:function(b,a,c){if(!isNaN(a)&&a>=0&&a<200){g.changeRy(a)}},scope:g});this.control({metaboliteStyleForm:{show:function(){this.displayNode()}},selectDisplayMetaboliteLabel:{afterrender:function(a){var b=metExploreD3.getMetaboliteStyle();a.setValue(b.getLabel())},change:function(a,b,c){g.changeLabel(b)}}})},changeHeight:function(d){if(d3.select("#vizExempleMetabolite").select("#D3vizExemple")[0][0]!=null){var c=d3.select("#vizExempleMetabolite").select("#D3vizExemple");c.select("g.node").select("rect").attr("height",d);c.select("g.node").select("text").attr("y",d)}},changeWidth:function(d){if(d3.select("#vizExempleMetabolite").select("#D3vizExemple")[0][0]!=null){var c=d3.select("#vizExempleMetabolite").select("#D3vizExemple");c.select("g.node").select("rect").attr("width",d)}},changeStroke:function(c){if(d3.select("#vizExempleMetabolite").select("#D3vizExemple")[0][0]!=null){var d=d3.select("#vizExempleMetabolite").select("#D3vizExemple");d.select("g.node").select("rect").style("stroke-width",c)}},changeRx:function(c){if(d3.select("#vizExempleMetabolite").select("#D3vizExemple")[0][0]!=null){var d=d3.select("#vizExempleMetabolite").select("#D3vizExemple");d.select("g.node").select("rect").attr("rx",c)}},changeRy:function(c){if(d3.select("#vizExempleMetabolite").select("#D3vizExemple")[0][0]!=null){var d=d3.select("#vizExempleMetabolite").select("#D3vizExemple");d.select("g.node").select("rect").attr("ry",c)}},changeLabel:function(f){var g=metExploreD3.getMetaboliteStyle();if(d3.select("#vizExempleMetabolite").select("#D3vizExemple")[0][0]!=null){var d=d3.select("#vizExempleMetabolite").select("#D3vizExemple");d.select("g.node").select("text").text(function(a){var b=$("<div/>").html(f).text();if(b==""){var b=$("<div/>").html(f).text()}return b})}},displayNode:function(){if(d3.select("#vizExempleMetabolite").select("#D3vizExemple")[0][0]!=null){d3.select("#vizExempleMetabolite").select("#D3vizExemple").selectAll("*").remove();var q=d3.select("#vizExempleMetabolite").select("#D3vizExemple")}else{var q=d3.select("#vizExempleMetabolite").append("svg").attr("width","100%").attr("height","100%").attr("class","D3vizExemple").attr("id","D3vizExemple")}var p=metExploreD3.getMetaboliteStyle();var r=this;var s=d3.behavior.zoom().scaleExtent([0.1,20]).on("zoom",function(a){r.zoom()});q=q.call(s).attr("pointer-events","all").append("svg:g").attr("class","graphComponent").attr("id","graphComponent");var h=parseInt(d3.select("#vizExempleMetabolite").style("height"));var m=parseInt(d3.select("#vizExempleMetabolite").style("width"));q.append("svg:g").attr("class","node").style("fill","white").attr("cx",m/2).attr("cy",h/2).attr("transform","translate("+m/2+","+h/2+")").append("rect").attr("width",p.getWidth()).attr("height",p.getHeight()).attr("rx",p.getRX()).attr("ry",p.getRY()).attr("transform","translate(-"+p.getWidth()/2+",-"+p.getHeight()/2+")").style("stroke",p.getStrokeColor()).style("stroke-width",p.getStrokeWidth());var o=Math.min(p.getWidth(),p.getHeight());q.select("g.node").append("svg:text").attr("class","metabolite").attr("id","metabolite").attr("fill","black").text(function(a){var b=$("<div/>").html(p.getLabel()).text();if(b==""){var b=$("<div/>").html(p.getLabel()).text()}return b}).style("font-size",p.getFontSize()).style("paint-order","stroke").style("stroke-width","1").style("stroke","white").style("stroke-opacity","0.7").attr("dy",".4em").style("font-weight","bold").attr("y",p.getHeight())},zoom:function(b){d3.select("#vizExempleMetabolite").select("#D3vizExemple").select("#graphComponent").attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}},0,0,0,0,["controller.form-metaboliteStyleForm-metaboliteStyleForm"],0,[metExploreViz.view.form.metaboliteStyleForm,"MetaboliteStyleFormController"],0));(Ext.cmd.derive("metExploreViz.view.form.metaboliteStyleForm.MetaboliteStyleForm",Ext.panel.Panel,{controller:"form-metaboliteStyleForm-metaboliteStyleForm",region:"north",height:"100%",width:"100%",margin:"0 0 0 0",flex:1,border:false,autoScroll:true,layout:{type:"vbox",align:"stretch"},items:[{id:"selectDisplayMetaboliteLabel",reference:"selectDisplayMetaboliteLabel",xtype:"selectDisplayMetaboliteLabel"},{xtype:"textfield",reference:"chooseStrokeMetabolite",margin:"5 5 5 5",fieldLabel:"Stroke width:",displayField:"stroke",editable:true,margin:"5 5 5 5",width:"100%",listeners:{change:function(c,d){this.lastValue=c}}},{xtype:"textfield",scale:"small",reference:"chooseHeightMetabolite",margin:"5 5 5 5",fieldLabel:"Height :",displayField:"height",editable:true,margin:"5 5 5 5",width:"100%",listeners:{change:function(c,d){this.lastValue=c}}},{xtype:"textfield",reference:"chooseWidthMetabolite",margin:"5 5 5 5",fieldLabel:"Width :",displayField:"width",editable:true,margin:"5 5 5 5",width:"100%",listeners:{change:function(c,d){this.lastValue=c}}},{xtype:"textfield",reference:"chooseRxMetabolite",margin:"5 5 5 5",fieldLabel:"Rx :",displayField:"rx",editable:true,margin:"5 5 5 5",width:"100%",listeners:{change:function(c,d){this.lastValue=c}}},{xtype:"textfield",reference:"chooseRyMetabolite",margin:"5 5 5 5",fieldLabel:"Ry :",displayField:"ry",editable:true,margin:"5 5 5 5",width:"100%",listeners:{change:function(c,d){this.lastValue=c}}},{xtype:"menuseparator"},{layout:{type:"hbox",align:"center",pack:"center"},items:[{id:"vizExempleMetabolite",xtype:"panel",margins:"0 0 0 0",closable:false,region:"center",height:100,width:100,flex:1,split:true}]},{xtype:"button",iconCls:"refresh",margin:"5 5 5 0",reference:"refreshMetaboliteStyle",action:"refreshMetaboliteStyle"}]},0,["metaboliteStyleForm"],["component","box","container","panel","metaboliteStyleForm"],{component:true,box:true,container:true,panel:true,metaboliteStyleForm:true},["widget.metaboliteStyleForm"],0,[metExploreViz.view.form.metaboliteStyleForm,"MetaboliteStyleForm"],0));(Ext.cmd.derive("metExploreViz.view.form.reactionStyleForm.ReactionStyleFormController",Ext.app.ViewController,{init:function(){var g=this,d=g.getViewModel(),f=g.getView();f.on({setReactionStyle:function(){var a=metExploreD3.getReactionStyle();f.lookupReference("chooseHeightReaction").setValue(a.getHeight());f.lookupReference("chooseWidthReaction").setValue(a.getWidth());f.lookupReference("chooseRxReaction").setValue(a.getRX());f.lookupReference("chooseRyReaction").setValue(a.getRY());f.lookupReference("chooseStrokeReaction").setValue(a.getStrokeWidth());f.down("#hiddenColor").lastValue=a.getStrokeColor();metExploreD3.fireEventArg("chooseStrokeColorReactionPicker","change",a.getStrokeColor());Ext.getCmp("selectDisplayReactionLabel").setValue(a.getLabel())},scope:g});f.lookupReference("refreshReactionStyle").on({click:function(){var J=metExploreD3.getReactionStyle();var H=false;var G=f.lookupReference("chooseHeightReaction").getValue();var D=((!isNaN(G)&&G>0&&G<200)?G:J.getHeight());var c=f.down("#hiddenColor").lastValue;var I=(c!="init"?c:J.getStrokeColor());var y=f.lookupReference("chooseWidthReaction").getValue();var b=(!isNaN(y)&&y>0&&y<200)?y:J.getWidth();var F=f.lookupReference("chooseStrokeReaction").getValue();var a=(!isNaN(F)&&F>0&&F<200)?F:J.getStrokeWidth();var z=f.lookupReference("chooseRxReaction").getValue();var A=(!isNaN(z)&&z>=0&&z<200)?z:J.getRX();var B=f.lookupReference("chooseRyReaction").getValue();var E=(!isNaN(B)&&B>=0&&B<200)?B:J.getRY();var C=f.lookupReference("selectDisplayReactionLabel").getValue();if(C!=J.getLabel()||(D!=J.getHeight())||(b!=J.getWidth())||(a!=J.getStrokeWidth())||(A!=J.getRX())||(E!=J.getRY())||(I!=J.getStrokeColor())){H=true;J.setStrokeColor(I);J.setHeight(parseFloat(D));J.setWidth(parseFloat(b));J.setStrokeWidth(parseFloat(a));J.setRX(parseFloat(A));J.setRY(parseFloat(E));J.setLabel(C)}if(H){metExploreD3.GraphNode.refreshStyleOfReaction();metExploreD3.GraphCaption.refreshStyleOfReaction()}},scope:g});f.lookupReference("chooseHeightReaction").on({afterrender:function(b){var a=metExploreD3.getReactionStyle();f.lookupReference("chooseHeightReaction").setValue(a.getHeight())},change:function(b,a,c){if(!isNaN(a)&&a>0&&a<200){g.changeHeight(a)}},scope:g});f.lookupReference("chooseWidthReaction").on({afterrender:function(b){var a=metExploreD3.getReactionStyle();f.lookupReference("chooseWidthReaction").setValue(a.getWidth())},change:function(b,a,c){if(!isNaN(a)&&a>0&&a<200){g.changeWidth(a)}},scope:g});f.lookupReference("chooseRxReaction").on({afterrender:function(b){var a=metExploreD3.getReactionStyle();f.lookupReference("chooseRxReaction").setValue(a.getRX())},change:function(b,a,c){if(!isNaN(a)&&a>=0&&a<200){g.changeRx(a)}},scope:g});f.lookupReference("chooseRyReaction").on({afterrender:function(b){var a=metExploreD3.getReactionStyle();f.lookupReference("chooseRyReaction").setValue(a.getRY())},change:function(b,a,c){if(!isNaN(a)&&a>=0&&a<200){g.changeRy(a)}},scope:g});f.lookupReference("chooseStrokeReaction").on({afterrender:function(b){var a=metExploreD3.getReactionStyle();f.lookupReference("chooseStrokeReaction").setValue(a.getStrokeWidth())},change:function(b,a,c){if(!isNaN(a)&&a>0&&a<200){g.changeStroke(a)}},scope:g});f.down("#hiddenColor").on({change:function(a,b){f.down("#hiddenColor").lastValue=a;g.changeStrokeColor(a)},scope:g});this.control({reactionStyleForm:{beforerender:function(){var c=metExploreD3.getReactionStyle();var a=document.createElement("script");a.setAttribute("src",document.location.href.split("index.html")[0]+"resources/lib/jscolor/jscolor.js");a.setAttribute("src",document.location.href.split("SpecRunner.html")[0]+"resources/lib/jscolor/jscolor.js");document.body.appendChild(a);var b=new Ext.Panel({id:"chooseStrokeColorReactionPicker",border:false,html:"<input size=\"5\" onchange=\"Ext.getCmp('reactionStyleForm').down('#hiddenColor').fireEvent('change', '#'+this.color.valueElement.value, '"+c.getStrokeColor()+"');\" value='"+c.getStrokeColor().split("#")[1]+"'\" class=\"color {pickerFaceColor:'#5FA2DD',pickerPosition:'right', pickerFace:5}\" style=\"border:1px solid #606060; border-radius: 2px;\">"});Ext.getCmp("chooseStrokeColorReaction").add(b)},show:function(){this.displayNode()}},selectDisplayReactionLabel:{afterrender:function(b){var a=metExploreD3.getReactionStyle();b.setValue(a.getLabel())},change:function(a,b,c){g.changeLabel(b)}}})},changeHeight:function(d){if(d3.select("#vizExempleReaction").select("#D3vizExemple")[0][0]!=null){var c=d3.select("#vizExempleReaction").select("#D3vizExemple");c.select("g.node").select("rect").attr("height",d);c.select("g.node").select("text").attr("y",d)}},changeWidth:function(d){if(d3.select("#vizExempleReaction").select("#D3vizExemple")[0][0]!=null){var c=d3.select("#vizExempleReaction").select("#D3vizExemple");c.select("g.node").select("rect").attr("width",d)}},changeStroke:function(c){if(d3.select("#vizExempleReaction").select("#D3vizExemple")[0][0]!=null){var d=d3.select("#vizExempleReaction").select("#D3vizExemple");d.select("g.node").select("rect").style("stroke-width",c)}},changeStrokeColor:function(c){if(d3.select("#vizExempleReaction").select("#D3vizExemple")[0][0]!=null){var d=d3.select("#vizExempleReaction").select("#D3vizExemple");d.select("g.node").select("rect").style("stroke",c)}},changeRx:function(c){if(d3.select("#vizExempleReaction").select("#D3vizExemple")[0][0]!=null){var d=d3.select("#vizExempleReaction").select("#D3vizExemple");d.select("g.node").select("rect").attr("rx",c)}},changeRy:function(c){if(d3.select("#vizExempleReaction").select("#D3vizExemple")[0][0]!=null){var d=d3.select("#vizExempleReaction").select("#D3vizExemple");d.select("g.node").select("rect").attr("ry",c)}},changeLabel:function(f){var g=metExploreD3.getReactionStyle();var h=Math.min(g.getWidth(),g.getHeight());if(d3.select("#vizExempleReaction").select("#D3vizExemple")[0][0]!=null){var j=d3.select("#vizExempleReaction").select("#D3vizExemple");j.select("g.node").select("text").remove();j.select("g.node").append("svg:text").attr("class","reaction").attr("id","reaction").attr("fill","black").text(function(a){var b=$("<div/>").html(f).text();if(b==""){var b=$("<div/>").html(f).text()}return b}).style("font-size",function(a){return Math.min(2*h,(2*h-2)/this.getComputedTextLength()*10)+"px"}).style("font-weight","bold").attr("dy",".3em")}},displayNode:function(){if(d3.select("#vizExempleReaction").select("#D3vizExemple")[0][0]!=null){d3.select("#vizExempleReaction").select("#D3vizExemple").selectAll("*").remove();var m=d3.select("#vizExempleReaction").select("#D3vizExemple")}else{var m=d3.select("#vizExempleReaction").append("svg").attr("width","100%").attr("height","100%").attr("class","D3vizExemple").attr("id","D3vizExemple")}var h=metExploreD3.getReactionStyle();var o=this;var p=d3.behavior.zoom().scaleExtent([0.1,20]).on("zoom",function(a){o.zoom()});m=m.call(p).attr("pointer-events","all").append("svg:g").attr("class","graphComponent").attr("id","graphComponent");var q=parseInt(d3.select("#vizExempleReaction").style("height"));var j=parseInt(d3.select("#vizExempleReaction").style("width"));m.append("svg:g").attr("class","node").style("fill","white").attr("cx",j/2).attr("cy",q/2).attr("transform","translate("+j/2+","+q/2+")").append("rect").attr("class","example").attr("id","example").attr("width",h.getWidth()).attr("height",h.getHeight()).attr("rx",h.getRX()).attr("ry",h.getRY()).attr("transform","translate(-"+h.getWidth()/2+",-"+h.getHeight()/2+")").style("stroke",h.getStrokeColor()).style("stroke-width",1);m.select("g.node").append("svg:text").attr("class","reaction").attr("id","reaction").attr("fill","black").text(function(a){var b=$("<div/>").html(h.getLabel()).text();if(b==""){var b=$("<div/>").html(h.getLabel()).text()}return b}).style("font-size",function(a){return Math.min(h.getWidth(),(h.getWidth()-h.getWidth()/10)/this.getComputedTextLength()*10)+"px"}).style("font-weight","bold").attr("dy",".3em")},zoom:function(b){d3.select("#vizExempleReaction").select("#D3vizExemple").select("#graphComponent").attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}},0,0,0,0,["controller.form-reactionStyleForm-reactionStyleForm"],0,[metExploreViz.view.form.reactionStyleForm,"ReactionStyleFormController"],0));(Ext.cmd.derive("metExploreViz.view.form.reactionStyleForm.ReactionStyleForm",Ext.panel.Panel,{controller:"form-reactionStyleForm-reactionStyleForm",region:"north",height:"100%",width:"100%",margin:"0 0 0 0",flex:1,border:false,autoScroll:true,layout:{type:"vbox",align:"stretch"},items:[{border:false,id:"chooseStrokeColorReaction",reference:"chooseStrokeColorReaction",xtype:"panel",margin:"5 5 5 5",hidden:true,layout:{type:"hbox",align:"stretch"},items:[{xtype:"label",forId:"color",margin:"0 68 0 0",text:"Color :"},{border:false,xtype:"hiddenfield",itemId:"hiddenColor",value:"init"}]},{reference:"selectDisplayReactionLabel",id:"selectDisplayReactionLabel",xtype:"selectDisplayReactionLabel"},{xtype:"textfield",reference:"chooseStrokeReaction",margin:"5 5 5 5",fieldLabel:"Stroke width:",displayField:"stroke",editable:true,width:"100%",width:"100%",listeners:{change:function(c,d){this.lastValue=c}}},{xtype:"textfield",scale:"small",reference:"chooseHeightReaction",margin:"5 5 5 5",fieldLabel:"Height :",displayField:"height",editable:true,width:"100%",listeners:{change:function(c,d){this.lastValue=c}}},{xtype:"textfield",reference:"chooseWidthReaction",margin:"5 5 5 5",fieldLabel:"Width :",displayField:"width",editable:true,width:"100%",listeners:{change:function(c,d){this.lastValue=c}}},{xtype:"textfield",reference:"chooseRxReaction",margin:"5 5 5 5",fieldLabel:"Rx :",displayField:"rx",editable:true,width:"100%",listeners:{change:function(c,d){this.lastValue=c}}},{xtype:"textfield",reference:"chooseRyReaction",margin:"5 5 5 5",fieldLabel:"Ry :",displayField:"ry",editable:true,width:"100%",listeners:{change:function(c,d){this.lastValue=c}}},{xtype:"menuseparator"},{layout:{type:"hbox",align:"center",pack:"center"},items:[{id:"vizExempleReaction",xtype:"panel",margins:"0 0 0 0",closable:false,region:"center",height:100,width:100,flex:1,split:true}]},{xtype:"button",iconCls:"refresh",margin:"5 5 5 0",reference:"refreshReactionStyle",action:"refreshReactionStyle"}]},0,["reactionStyleForm"],["component","box","container","panel","reactionStyleForm"],{component:true,box:true,container:true,panel:true,reactionStyleForm:true},["widget.reactionStyleForm"],0,[metExploreViz.view.form.reactionStyleForm,"ReactionStyleForm"],0));(Ext.cmd.derive("metExploreViz.view.form.selectCondition.SelectConditionController",Ext.app.ViewController,{init:function(){var g=this,d=g.getViewModel(),f=g.getView()}},0,0,0,0,["controller.form-selectCondition-selectCondition"],0,[metExploreViz.view.form.selectCondition,"SelectConditionController"],0));(Ext.cmd.derive("metExploreViz.view.form.selectCondition.SelectCondition",Ext.form.field.ComboBox,{controller:"form-selectCondition-selectCondition",store:{fields:["name"]},listeners:{render:function(b){new Ext.ToolTip({target:b.getEl(),html:"Select a condition"})}},flex:1,multiSelect:true,displayField:"name",valueField:"name",queryMode:"local",editable:false,emptyText:"-- Select a condition --",margin:"5 0 5 0",anyMatch:true},0,["selectCondition"],["component","box","field","textfield","pickerfield","combobox","combo","selectCondition"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,selectCondition:true},["widget.selectCondition"],0,[metExploreViz.view.form.selectCondition,"SelectCondition"],0));(Ext.cmd.derive("metExploreViz.view.form.selectMapping.SelectMappingController",Ext.app.ViewController,{init:function(){var g=this,d=g.getViewModel(),f=g.getView();f.on({jsonmapping:function(a){g.initMapping(a)},removemapping:function(a){g.removeMapping(a)},change:function(c,a,s){var q=Ext.getCmp("selectConditionForm");if(q!=undefined){_metExploreViz.getSessionById("viz").setActiveMapping(a);q.fireEvent("closeMapping",a);var r=_metExploreViz.getMappingsSet();if(_metExploreViz.getMappingsLength()!=0){var b=_metExploreViz.getMappingByName(a);if(b!=null){var p=b.getConditions();if(b!=undefined){g.fillComboSelectCondition(c,b,s)}}}}},collapse:function(b,j){var a=_metExploreViz.getMappingsSet();if(_metExploreViz.getMappingsLength()!=0){var c=_metExploreViz.getMappingByName(b.getValue());if(c!=undefined){metExploreD3.GraphMapping.mapNodes(c.getName())}}},scope:g})},initMapping:function(m){if(_metExploreViz.getMappingsLength()!=0){var o=Ext.getCmp("comparisonSidePanel");if(o!=undefined){if(o.isHidden()){o.setHidden(false)}o.expand();var j=Ext.getCmp("selectMappingVisu");j.setValue(m.getName());var g=j.getStore();var h=[];h.push(new Ext.data.Record({name:m.getName()}));g.each(function(a){h.push(new Ext.data.Record({name:a.getData().name}))});_metExploreViz.getSessionById("viz").setActiveMapping(m.getName());g.loadData(h,false);if(g.getCount()==1){j.setDisabled(false)}}}},removeMapping:function(m){var o=Ext.getCmp("comparisonSidePanel");if(o!=undefined){if(o.isHidden()){o.setHidden(false)}o.expand();var j=Ext.getCmp("selectMappingVisu");var g=j.getStore();var h=[];g.each(function(a){if(a.getData().name!=m.getName()){h.push(new Ext.data.Record({name:a.getData().name}))}});g.loadData(h,false);j.clearValue();if(g.getCount()==0){j.setDisabled(true)}}},fillComboSelectCondition:function(t,B,z){_metExploreViz.getSessionById("viz").setMapped("false");var r=_metExploreViz.getMappingsSet();var q=B.getConditions();var s=Ext.getCmp("selectCondition");var w=s.getStore();var u=[];for(var v=0;v<q.length;v++){u.push({name:q[v]})}w.loadData(u,false);var y=w.getCount();if(y>=1){s.setDisabled(false)}s.setValue(w[0]);var A=Ext.getCmp("selectConditionType");if(selectCondition!=undefined&&A!=undefined){if(y<1||(y==1&&q[0]=="undefined")){s.clearValue();s.setDisabled(true);A.setDisabled(true)}else{A.setValue(A.getStore().first());s.setDisabled(false);A.setDisabled(false)}}}},0,0,0,0,["controller.form-selectMapping-selectMapping"],0,[metExploreViz.view.form.selectMapping,"SelectMappingController"],0));(Ext.cmd.derive("metExploreViz.view.form.selectMapping.SelectMappingModel",Ext.app.ViewModel,{parent:"selectCondiditionForm",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.form-selectMapping-selectMapping"],0,[metExploreViz.view.form.selectMapping,"SelectMappingModel"],0));(Ext.cmd.derive("metExploreViz.view.form.selectMapping.SelectMapping",Ext.form.field.ComboBox,{controller:"form-selectMapping-selectMapping",viewModel:{type:"form-selectMapping-selectMapping"},store:{fields:["name"]},listeners:{render:function(b){new Ext.ToolTip({target:b.getEl(),html:"Select a mapping"})}},displayField:"name",valueField:"name",width:150,queryMode:"local",multiSelect:false,editable:false,emptyText:"-- Select Mapping --",margin:"5 0 5 0"},0,["selectMapping"],["component","box","field","textfield","pickerfield","combobox","combo","selectMapping"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,selectMapping:true},["widget.selectMapping"],0,[metExploreViz.view.form.selectMapping,"SelectMapping"],0));(Ext.cmd.derive("metExploreViz.view.form.selectConditionForm.SelectConditionFormController",Ext.app.ViewController,{init:function(){var g=this,d=g.getViewModel(),f=g.getView();this.regexpPanel=/\.| |=|\(|\)/g;f.on({afterDiscreteMapping:this.addMappingCaptionForm,scope:g});f.on({afterContinuousMapping:this.addMappingCaptionForm,scope:g});f.on({closeMapping:function(a){g.closeMapping(a)},scope:g});f.on({resetMapping:function(){g.resetMapping()},scope:g});f.on({removeMapping:function(a){g.removeMapping(a)},scope:g});f.on({reset:function(a){},scope:g});f.lookupReference("selectConditionType").on({change:function(a,b,c){if(b!="Flux"){f.lookupReference("opacity").setHidden(true);f.lookupReference("valueonarrow").setHidden(true)}else{f.lookupReference("opacity").setHidden(false);f.lookupReference("valueonarrow").setHidden(false)}},scope:g});f.lookupReference("selectCondition").on({change:function(a,m,o){var b=f.lookupReference("selectConditionType").lastValue;if(b!="Flux"){if(o!=null){var c=m.indexOf(o[0]);if(c!=-1){m.splice(c,1)}f.lookupReference("selectCondition").setValue(m[0])}f.lookupReference("selectCondition").collapse()}else{if(m>2){m.splice(0,1);f.lookupReference("selectCondition").setValue(m)}}},collapse:function(a,c){var j=_metExploreViz.getSessionById("viz");var b=this;if(f.lookupReference("selectCondition").getValue().length>0){if(j.isMapped()!="false"){Ext.Msg.show({title:"Are you sure?",msg:"This action will remove previous mapping. <br />Would you like to do this?",buttons:Ext.Msg.OKCANCEL,fn:function(o){if(o=="ok"){var h="true";g.closeMapping(h);b.map()}},icon:Ext.Msg.QUESTION})}else{this.map()}}},scope:g})},removeMapping:function(D){var t=_metExploreViz.getSessionById("viz");var s=Ext.getCmp("selectConditionForm");if(s!=undefined){var r=t.getActiveMapping();if(r==D.getName()){var y=Ext.getStore("S_Condition");var A=t.isMapped();this.removeGraphMapping(A);if(A!=false&&A!="false"&&A!="none"){if(t.getMappingDataType()=="Continuous"){var B=t.getColorMappingsSet();var u=t.getColorMappingsSetLength()==0;if(!u){B=[]}}if(t.getMappingDataType()=="Flux"||Array.isArray(t.isMapped())){var C=Ext.getCmp("panel"+t.isMapped()[0].replace(this.regexpPanel,""))}else{var C=Ext.getCmp("panel"+t.isMapped().replace(this.regexpPanel,""))}if(C!=undefined){C.close();var B=t.getColorMappingsSet();B.forEach(function(b){var a=b.getName().toString().replace(this.regexpPanel,"_");if(Ext.getCmp("selectConditionForm").down("#mappingCaptionForm"+a)!=null){Ext.getCmp("selectConditionForm").down("#mappingCaptionForm"+a).close()}});if(Ext.getCmp("selectConditionForm").down("#undefined")!=null){Ext.getCmp("selectConditionForm").down("#undefined").close()}}}t.setMapped("false");var v=Ext.getCmp("selectCondition");var y=v.getStore();var w=[];y.loadData(w,false);var z=Ext.getCmp("selectConditionType");v.clearValue();v.setDisabled(true);z.setDisabled(true)}metExploreD3.fireEventArg("selectMappingVisu","removemapping",D);_metExploreViz.removeMapping(D.getId())}},resetMapping:function(B){var u=_metExploreViz.getSessionById("viz");var t=Ext.getCmp("selectConditionForm");if(t!=undefined){var A=Ext.getStore("S_Condition");var F=u.isMapped();this.removeGraphMapping(F);if(u.getMappingDataType()=="Continuous"){var G=u.getColorMappingsSet();var v=u.getColorMappingsSetLength()==0;if(!v){G=[]}}if(u.getMappingDataType()=="Flux"||Array.isArray(u.isMapped())){var E=Ext.getCmp("panel"+u.isMapped()[0].replace(this.regexpPanel,""))}else{var E=Ext.getCmp("panel"+u.isMapped().replace(this.regexpPanel,""))}if(E!=undefined){E.close();var G=u.getColorMappingsSet();G.forEach(function(b){var a=b.getName().toString().replace(this.regexpPanel,"_");if(Ext.getCmp("selectConditionForm").down("#mappingCaptionForm"+a)!=null){Ext.getCmp("selectConditionForm").down("#mappingCaptionForm"+a).close()}});if(Ext.getCmp("selectConditionForm").down("#undefined")!=null){Ext.getCmp("selectConditionForm").down("#undefined").close()}}u.setMapped("false");var w=Ext.getCmp("selectCondition");var A=w.getStore();var y=[];A.loadData(y,false);var D=Ext.getCmp("selectConditionType");w.clearValue();w.setDisabled(true);D.setDisabled(true);var z=Ext.getCmp("selectMappingVisu");var H=z.getStore();var C=[];H.loadData(C,false);z.clearValue();z.setDisabled(true)}},closeMapping:function(o){var q=_metExploreViz.getSessionById("viz");if(q.isMapped()!="false"){var r=Ext.getStore("S_Condition");var j=q.isMapped();this.removeGraphMapping(j);if(q.getMappingDataType()=="Continuous"||q.getMappingDataType()=="Flux"){var p=q.getColorMappingsSet();var s=q.getColorMappingsSetLength()==0;if(!s){p=[]}}if(q.getMappingDataType()=="Flux"||Array.isArray(q.isMapped())){var m=Ext.getCmp("panel"+q.isMapped()[0].replace(this.regexpPanel,""))}else{var m=Ext.getCmp("panel"+q.isMapped().replace(this.regexpPanel,""))}if(m!=undefined){m.close();var p=q.getColorMappingsSet();p.forEach(function(b){var a=b.getName().toString().replace(this.regexpPanel,"_");if(Ext.getCmp("selectConditionForm").down("#mappingCaptionForm"+a)!=null){Ext.getCmp("selectConditionForm").down("#mappingCaptionForm"+a).close()}});if(Ext.getCmp("selectConditionForm").down("#undefined")!=null){Ext.getCmp("selectConditionForm").down("#undefined").close()}}q.setMappingDataType(null);q.setMapped("false")}},removeGraphMapping:function(d){metExploreD3.GraphMapping.removeGraphMappingData(d);var g=Ext.getCmp("selectCondition").getStore();var f=Ext.getCmp("selectConditionType")},map:function(){var t=this,p=t.getViewModel(),r=t.getView();var u=Ext.getCmp("selectCondition");var w=Ext.getCmp("selectMappingVisu");var s=u.getValue();var v=w.getValue();var q=Ext.getCmp("selectConditionType").getValue();if(r.lookupReference("selectCondition").value.length==1){var o="Unique"}else{var o="Compare"}this.graphMapping(q,s,v,o)},graphMapping:function(h,g,j,o){var m=_metExploreViz.getSessionById("viz");m.setActiveMapping(j);if(h=="Continuous"){metExploreD3.GraphMapping.graphMappingContinuousData(j,g)}if(h=="Flux"){metExploreD3.GraphMapping.graphMappingFlux(j,g,o,undefined,undefined,Ext.getCmp("opacityCheck").checked,Ext.getCmp("valueonarrowCheck").checked)}if(h=="Discrete"){metExploreD3.GraphMapping.graphMappingDiscreteData(j,g)}m.setMappingDataType(h)},addMappingCaptionForm:function(U){var K=this,S=K.getViewModel(),J=K.getView();var O=Ext.getCmp("selectConditionForm");var P=Ext.getCmp("selectCondition");var W=P.getValue();var M=Ext.getCmp("selectMappingVisu");var L=M.getValue();var R=_metExploreViz.getSessionById("viz");R.setMapped(W);if(U=="flux"||Array.isArray(W)){var N=W[0]}else{var N=W}if(O!=undefined){if(Ext.getCmp("panel"+N)==undefined){var D=[];var V=[];var T=R.getColorMappingsSet();var Q=this;var E=document.createElement("script");E.setAttribute("src",document.location.href.split("index.html")[0]+"resources/lib/jscolor/jscolor.js");document.body.appendChild(E);var F=0;T.forEach(function(d){var f=d.getName();var b=f;if(U=="flux"){b=W[F]}F++;var c=f.toString().replace(this.regexpPanel,"_");var a=Ext.create("metExploreViz.view.form.MappingCaptionForm",{itemId:"mappingCaptionForm"+c,margin:"0 0 0 0",padding:"0 0 0 0",border:false,items:[{itemId:"chooseColorReaction"+c,xtype:"panel",border:false,layout:{type:"hbox",align:"stretch"},items:[{xtype:"label",forId:"color",text:b+" :",margin:"0 0 0 10",flex:1,border:false},{border:false,xtype:"hiddenfield",itemId:"hidden"+c,value:d.getValue(),listeners:{change:function(g,h){this.lastValue=g}}},{border:false,margin:"0 10 0 0",width:"40%",html:"<input size=\"5\" onchange=\"Ext.getCmp('selectConditionForm').down('#hidden"+c+"').fireEvent('change', '#'+this.color.valueElement.value, '"+d.getValue()+"');\" value='"+d.getValue()+";'\" class=\"color {pickerFaceColor:'#5FA2DD',pickerPosition:'right',pickerFace:5}\">"}]}]});V.push(a);D.push(c)});console.log("panel"+N.replace(this.regexpPanel,""));var C=Ext.create("Ext.panel.Panel",{id:"panel"+N.replace(this.regexpPanel,""),border:false,width:"100%",bodyBorder:false,xtype:"panel",layout:{type:"hbox",align:"stretch"},items:[{xtype:"label",forId:"condName",margin:"8 5 5 10",flex:1}]});var X=Ext.create("Ext.Button",{iconCls:"del",tooltip:"You must choose a condition to add it",margin:"5 5 5 0",id:"delCondition"+N.replace(this.regexpPanel,""),action:"delCondition"+N.replace(this.regexpPanel,""),handler:function(){var a=this.findParentBy(function(b){return b instanceof Ext.panel.Panel});Q.closeMapping(L)}});C.add(X);var G=Ext.getCmp("selectConditionType").getValue();var I=L;var H=Ext.create("Ext.Button",{iconCls:"refresh",margin:"5 5 5 0",id:"refreshColor"+N.replace(this.regexpPanel,""),action:"refreshColor"+N.replace(this.regexpPanel,""),handler:function(){var c=I;var a=R.getColorMappingsSet();if(U=="discrete"){a.forEach(function(f){var d=f.getName().toString().replace(this.regexpPanel,"_");if(Ext.getCmp("selectConditionForm").down("#hidden"+d)!=null){if(f.getValue()!=Ext.getCmp("selectConditionForm").down("#hidden"+d).lastValue){metExploreD3.GraphMapping.setDiscreteMappingColor(Ext.getCmp("selectConditionForm").down("#hidden"+d).lastValue,f.getName(),W,I)}}})}else{a.forEach(function(f){var d=f.getName().toString().replace(this.regexpPanel,"_");if(Ext.getCmp("selectConditionForm").down("#hidden"+d)!=null){if(f.getValue()!=Ext.getCmp("selectConditionForm").down("#hidden"+d).lastValue){metExploreD3.GraphMapping.setContinuousMappingColor(Ext.getCmp("selectConditionForm").down("#hidden"+d).lastValue,f.getName(),W,I)}}});if(R.getColorMappingsSet()[1]!=undefined){if(parseFloat(R.getColorMappingsSet()[0].getName())<parseFloat(R.getColorMappingsSet()[1].getName())){maxValue=parseFloat(R.getColorMappingsSet()[1].getName())}else{maxValue=parseFloat(R.getColorMappingsSet()[0].getName());minValue=parseFloat(R.getColorMappingsSet()[1].getName())}}else{color=parseFloat(R.getColorMappingsSet()[0].getName())}if(U=="continuous"){metExploreD3.GraphMapping.graphMappingContinuousData(I,N,R.getColorMappingById(minValue).getValue(),R.getColorMappingById(maxValue).getValue())}else{if(W.length==1){var b="Unique";metExploreD3.GraphMapping.graphMappingFlux(I,W,b,R.getColorMappingById(color).getValue(),undefined,Ext.getCmp("opacityCheck").checked,Ext.getCmp("valueonarrowCheck").checked)}else{var b="Compare";metExploreD3.GraphMapping.graphMappingFlux(I,W,b,R.getColorMappingById(maxValue).getValue(),R.getColorMappingById(minValue).getValue(),Ext.getCmp("opacityCheck").checked,Ext.getCmp("valueonarrowCheck").checked)}}}}});C.add(H);var O=Ext.getCmp("selectConditionForm");if(O!=undefined){O.add(C);V.forEach(function(a){O.add(a)})}}}}},0,0,0,0,["controller.form-selectConditionForm-selectConditionForm"],0,[metExploreViz.view.form.selectConditionForm,"SelectConditionFormController"],0));(Ext.cmd.derive("metExploreViz.view.form.selectConditionForm.SelectConditionFormModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.form-selectConditionForm-selectConditionForm"],0,[metExploreViz.view.form.selectConditionForm,"SelectConditionFormModel"],0));(Ext.cmd.derive("metExploreViz.view.form.selectConditionForm.SelectConditionForm",Ext.panel.Panel,{controller:"form-selectConditionForm-selectConditionForm",viewModel:{type:"form-selectConditionForm-selectConditionForm"},layout:{type:"vbox",align:"stretch"},region:"north",width:"100%",margins:"0 0 0 0",split:true,animation:true,autoScroll:true,autoHeight:true,items:[{id:"selectMappingVisu",xtype:"selectMapping",disabled:true},{xtype:"menuseparator"},{id:"selectConditionType",xtype:"selectConditionType",reference:"selectConditionType",disabled:true},{margin:"10 0 0 5",xtype:"fieldcontainer",defaultType:"checkboxfield",reference:"opacity",hidden:true,items:[{boxLabel:"Opacity",name:"opacity",inputValue:true,id:"opacityCheck"}]},{margin:"10 0 0 5",xtype:"fieldcontainer",defaultType:"checkboxfield",reference:"valueonarrow",hidden:true,items:[{boxLabel:"Show values on arrows",name:"valueonarrow",inputValue:true,id:"valueonarrowCheck"}]},{border:false,id:"chooseCondition",xtype:"panel",autoScroll:true,layout:{type:"hbox",align:"stretch"},items:[{id:"selectCondition",xtype:"selectCondition",reference:"selectCondition",disabled:true}]},{xtype:"menuseparator"}]},0,["selectConditionForm"],["component","box","container","panel","selectConditionForm"],{component:true,box:true,container:true,panel:true,selectConditionForm:true},["widget.selectConditionForm"],0,[metExploreViz.view.form.selectConditionForm,"SelectConditionForm"],0));(Ext.cmd.derive("metExploreViz.view.form.updateStyleForm.UpdateStyleFormController",Ext.app.ViewController,{init:function(){this.control({"updateStyleForm combobox[action=changeObject]":{change:function(o,m,h){var j=Ext.getCmp(m);if(j!=undefined){j.setVisible(true)}if(h!=undefined){var g=Ext.getCmp(h);if(g!=undefined){g.setVisible(false)}}}}})}},0,0,0,0,["controller.form-updateStyleForm-updateStyleForm"],0,[metExploreViz.view.form.updateStyleForm,"UpdateStyleFormController"],0));(Ext.cmd.derive("metExploreViz.view.form.updateStyleForm.UpdateStyleForm",Ext.panel.Panel,{controller:"form-updateStyleForm-updateStyleForm",height:200,width:"100%",margin:"0 0 0 0",split:true,layout:{type:"vbox",align:"stretch"},animation:true,items:[{id:"selectObject",xtype:"combobox",editable:false,margin:"5 5 5 5",action:"changeObject",emptyText:"-- Choose an object --",store:[["reactionStyleForm","Reaction"],["metaboliteStyleForm","Metabolite"],["generalStyleForm","General"]]},{xtype:"menuseparator"},{id:"reactionStyleForm",xtype:"reactionStyleForm",hidden:true},{id:"metaboliteStyleForm",xtype:"metaboliteStyleForm",hidden:true},{id:"generalStyleForm",xtype:"generalStyleForm",hidden:true}]},0,["updateStyleForm"],["component","box","container","panel","updateStyleForm"],{component:true,box:true,container:true,panel:true,updateStyleForm:true},["widget.updateStyleForm"],0,[metExploreViz.view.form.updateStyleForm,"UpdateStyleForm"],0));(Ext.cmd.derive("metExploreViz.view.panel.networkPanel.NetworkPanelController",Ext.app.ViewController,{init:function(){var g=this,d=g.getViewModel(),f=g.getView();f.on({afterrender:g.initParams,scope:g});f.on({afterlunch:function(a){g.myRender(a);Ext.on("resize",function(c,b){document.getElementById("visualisation").style.width=c+"px";document.getElementById("visualisation").style.height=b+"px";f.setSize(c,b)})},scope:g})},initParams:function(){if(Ext.getCmp("networkPanel")!=undefined){var f=new Ext.LoadMask({target:Ext.getCmp("networkPanel"),msg:"This panel allows to visualize metabolic network.",id:"maskInit",msgCls:"msgClsLaunchMask"});f.show();var g=f.getEl().down(".x-mask-msg");var h=g.getFirstChild().appendChild({tag:"div","class":"x-mask-msg-text"});Ext.create("Ext.form.Label",{text:"Load network from : ",id:"textloadnetworkfrom",style:"top : 15px",renderTo:h});Ext.create("Ext.button.Button",{text:"JSON File",id:"butloadnetworkfromjson",style:"margin : 10px 10px 10px 10px",handler:function(){var a=Ext.getCmp("IDimportNetwork");if(a!=undefined){a.fileInputEl.dom.click()}f.hide()},renderTo:h});Ext.create("Ext.button.Button",{text:metExploreD3.getGeneralStyle().getWebsiteName(),id:"buttonImportToNetworkFromWebsite",disabled:true,hidden:false,style:"margin : 10px 10px 10px 10px",handler:function(){metExploreD3.GraphPanel.refreshPanel(_metExploreViz.getDataFromWebSite());f.hide()},listeners:{hideInitialLoadButtons:function(){Ext.getCmp("textloadnetworkfrom").hide();Ext.getCmp("butloadnetworkfromjson").hide();this.hide()},hideMask:function(){f.hide()},setGeneralStyle:function(){this.setText(metExploreD3.getGeneralStyle().getWebsiteName())},cartFilled:function(){this.setDisabled(false)}},renderTo:h})}var j=new NetworkVizSession();j.setVizEngine("D3");j.setId("viz");j.setMapped("false");j.setDisplayNodeName("name");_metExploreViz.addSession(j)},myRender:function(f){var h=this,g=h.getView();var j=document.getElementById(f);g.render(j)}},0,0,0,0,["controller.panel-networkPanel-networkPanel"],0,[metExploreViz.view.panel.networkPanel,"NetworkPanelController"],0));(Ext.cmd.derive("metExploreViz.view.panel.graphPanel.GraphPanelController",Ext.app.ViewController,{init:function(){var g=this,d=g.getViewModel(),f=g.getView();Ext.QuickTips.init();f.on({setLoadButtonHidden:g.changeoption,afterrefresh:function(){var v=f.lookupReference("buttonCopyNetwork");var c=f.lookupReference("buttonSaveNetwork");var a=f.lookupReference("vizMiningMenuID");var b=f.lookupReference("vizImportMenuID");var s=f.lookupReference("vizExportMenuID");var u=f.lookupReference("vizSaveMenuID");var r=f.lookupReference("vizDrawingMenuID");var w=f.lookupReference("vizLoadMenuID");var t=f.lookupReference("searchNode");if(t!=undefined){t.setDisabled(false)}if(v!=undefined){v.setDisabled(false);v.setTooltip("The graph will be copy in other frame")}if(c!=undefined){c.setDisabled(false);c.setTooltip("The graph will be saved in json file")}if(a!=undefined){a.setDisabled(false);a.setTooltip("Sub-network extraction/visualisation")}if(s!=undefined){s.setDisabled(false);s.setTooltip("Export network as an image")}if(b!=undefined){b.setDisabled(false);b.setTooltip("Import data on nodes")}if(u!=undefined){u.setDisabled(false);u.setTooltip("Save drawing")}if(r!=undefined){r.setDisabled(false);r.setTooltip("Change network drawing")}if(w!=undefined){w.setDisabled(false);w.setTooltip("Load a network in the visualisation")}},initSearch:g.initSearch,scope:g});f.on({afterrefresh:g.drawCaption,scope:g});f.lookupReference("searchNodeButton").on({click:g.searchNode,scope:g})},changeoption:function(){var c=this,d=c.getView();if(metExploreD3.getGeneralStyle().loadButtonIsHidden()){metExploreD3.hideInitialLoadButtons();if(!d.lookupReference("vizLoadMenuID").hidden){d.lookupReference("vizLoadMenuID").setHidden(true)}}},drawCaption:function(){metExploreD3.GraphCaption.drawCaption()},initSearch:function(){var g=this,d=g.getViewModel(),f=g.getView();if(f.lookupReference("searchNodeTextField").getValue()!=""){f.lookupReference("searchNodeTextField").reset()}},searchNode:function(){var g=this,d=g.getViewModel(),f=g.getView();if(f.lookupReference("searchNodeTextField").getValue()=="happyfox"){d3.select("#viz").select("#D3viz").style("background-image","url('resources/images/easteregg/foxegg.jpg')").style("background-repeat","round")}if(f.lookupReference("searchNodeTextField").getValue()=="joyeuxnoel"){d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(a){return(a.getBiologicalType()=="reaction")}).append("image").attr("xlink:href","resources/images/easteregg/giftegg.svg").attr("width","50px").attr("height","50px").attr("transform","translate(-25,-25)");d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(a){return(a.getBiologicalType()=="metabolite")}).append("image").attr("xlink:href","resources/images/easteregg/sapinegg.svg").attr("width","70px").attr("height","70px").attr("transform","translate(-35,-35)")}metExploreD3.GraphNode.searchNode(f.lookupReference("searchNodeTextField").getValue())},refresh:function(){var d=Ext.getCmp("viz");if(d!=undefined){var f=new Ext.LoadMask({target:d,msg:"Refresh in process...",msgCls:"msgClsCustomLoadMask"});f.show();var g=this;setTimeout(function(){g.initData();metExploreD3.GraphNetwork.refreshSvg("viz");f.hide();var a=Ext.getCmp("graphPanel");if(a!=undefined){a.fireEvent("afterrefresh")}},100)}},initData:function(){var ab=Ext.getStore("S_NetworkVizSession").getById("viz");ab.reset();var T=Ext.getStore("S_NetworkData");var ac=new NetworkData("viz");var af=ab.getGraph();var O="";var ae="";var J="";var H=Ext.getStore("S_Cart");var K=[];var Q=[];var R=Ext.getStore("S_AnnotationReaction");R.filter("field","reversible");H.each(function(b){O=b.get("dbIdentifier");ae=b.get("id");K.push(ae);J=b.get("name");var a=R.findRecord("id",ae+"_reversible",0,false,true,true);var d=b.get("ec");if(a){var c=a.get("newV")}else{var c=b.get("reversible")}ac.addNode(J,undefined,O,ae,c,"reaction",false,true,undefined,undefined,undefined,undefined,d);af.addNode(ae);if(b.get("reversible")){var f=ae+"_back";af.addNode(f)}});var L=K.length;var N=Ext.getStore("S_LinkReactionMetabolite");N.filterBy(function(b,a){if(Ext.Array.indexOf(K,b.get("idReaction"))!==-1){return true}return false},this);var ah=Ext.getStore("S_Metabolite");var ag=Ext.getStore("S_AnnotationMetabolite");ag.filter("field","sideCompound");var P="";var ae="";var Z="";var S=true;var M="";var I="";var aa="";var V="";var X=0;var ad=0;var U=0;var W=0;var U=0;var Y="";N.each(function(f){P=f.get("idMetabolite");ae=f.get("idReaction");Z=f.get("interaction");var g=R.findRecord("id",ae+"_reversible");if(g){S=g.get("newV")}else{S=f.get("reversible")}g=ag.findRecord("id",P);if(g){sideCompound=g.get("newV")}else{sideCompound=f.get("side")}M=f.get("edgeId");var b=Q.indexOf(P);if(sideCompound==0||sideCompound=="false"){var c=false}else{var c=true}if(b==-1){Q.push(P);var d=ah.getById(P);I=d.get("name");aa=d.get("compartment");V=d.get("dbIdentifier");var a=d.getSvgHW();X=0;ad=0;if(a!="undefined"){X=a.width;ad=a.height}ac.addNode(I,aa,V,P,undefined,"metabolite",false,true,a.svg,X,ad,c,undefined);b=Q.indexOf(P)}W=K.indexOf(ae);b=b+L;if(S){Y=ae+"_back";if(Z=="in"){ac.addLink(M,b,W,Z,"true");af.addEdge(Y,P);af.addEdge(P,ae)}else{ac.addLink(M,W,b,Z,"true");af.addEdge(P,Y);af.addEdge(ae,P)}}else{if(Z=="in"){ac.addLink(M,b,W,Z,"false");af.addEdge(P,ae)}else{ac.addLink(M,W,b,Z,"false");af.addEdge(ae,P)}}});N.clearFilter();ag.clearFilter();R.clearFilter();ac.setId("viz");T.add(ac);ab.setD3Data(ac)},exportJSON:function(){var q=Ext.getStore("S_NetworkData");var s=metExploreD3.getReactionsSet();var p=metExploreD3.getMetabolitesSet();var u=Ext.getStore("S_CompartmentInBioSource");var r="";r+='{"reaction":[';var v=Ext.create("Ext.data.Store",{fields:["id","ec","name","reversible"]});s.each(function(a){q.getStoreById("viz").getNodes().forEach(function(b){if(b.getId()==a.get("id")){v.add({id:b.getId(),ec:a.get("ec"),name:b.getName(),reversible:b.getReactionReversibility()})}})});for(var t=0;t<v.getCount();t++){r+=Ext.JSON.encode(v.getRange()[t].data);if(t!=v.getCount()-1){r+=",\n"}}r+='],\n\n"metabolite":[';var z=Ext.create("Ext.data.Store",{fields:["id","name","chemicalFormula","compartment","inchi"]});q.getStoreById("viz").getNodes().forEach(function(b){p.each(function(f){if(b.getId()==f.get("id")){var g=f.get("mapped")>0;z.add({id:b.getId(),name:f.get("name"),formula:f.get("chemicalFormula"),compartment:f.get("compartment"),inchi:f.get("inchi"),mapped:g})}});if(b.isSideCompound()){var c=b.getId();c=c.split("-");var a=p.getMetaboliteById(c[0]);var d=a.get("mapped")>0;z.add({id:b.getId(),name:a.get("name"),formula:a.get("chemicalFormula"),compartment:a.get("compartment"),inchi:a.get("inchi"),mapped:d})}});for(var t=0;t<z.getCount();t++){r+=Ext.JSON.encode(z.getRange()[t].data);if(t!=z.getCount()-1){r+=",\n"}}r+='],\n\n"link":[';var w=Ext.create("Ext.data.Store",{fields:["source","target","interaction"]});q.getStoreById("viz").getLinks().forEach(function(a){w.add({source:a.source.getId(),target:a.target.getId(),interaction:a.interaction})});for(var t=0;t<w.getCount();t++){r+=Ext.JSON.encode(w.getRange()[t].data);if(t!=w.getCount()-1){r+=",\n"}}r+='],\n\n"compartment":[';var y=Ext.create("Ext.data.Store",{fields:["name","color"]});u.each(function(a){y.add({name:a.get("name"),color:a.get("color")})});for(var t=0;t<y.getCount();t++){r+=Ext.JSON.encode(y.getRange()[t].data);if(t!=y.getCount()-1){r+=",\n"}}r+="]}\n";return r},exportJsonFile:function(){var g=this.exportJSON();var d=document.createElement("a");d.download="data.json";var f=new Blob([g],{type:"text/plain"});d.href=window.URL.createObjectURL(f);d.click()},exportXGMML:function(){if(lib.javascript.metExploreViz.globals.Session.idUser==""||lib.javascript.metExploreViz.globals.Session.idUser==-1){var h=Ext.create("Ext.window.MessageBox",{height:300});h.alert("Warning","You are not connected, the job will be available only during your session. ");h.setPosition(50)}var g=encodeURIComponent(metExploreD3.GraphUtils.exportMainSVG());var j=encodeURIComponent(this.exportJSON().replace(/\n/g,""));var f={analysis_title:"Xgmml Export",java_class:"metexplore.XgmmlExporter",json:j,svg:g};Ext.Ajax.request({url:"src/php/application_binding/launchJavaApplication.php",method:"POST",params:f,success:function(q,b){var d=Ext.decode(q.responseText);if(d.success==false){Ext.Msg.alert("Failed","Problem in getting results from the server (success = false)");return}else{var c=d.message;var r=Ext.create("Ext.window.MessageBox",{height:300});r.show({title:"Application message",msg:c});var a=Ext.ComponentQuery.query("sidePanel")[0];var s=a.down("gridJobs");s.expand();Ext.getStore("S_Analyses").reload()}},failure:function(b,a){Ext.MessageBox.alert("Server-side failure with status code "+b.status)}})}},0,0,0,0,["controller.panel-graphpanel-graphpanel"],0,[metExploreViz.view.panel.graphPanel,"GraphPanelController"],0));(Ext.cmd.derive("metExploreViz.view.panel.graphPanel.GraphPanelModel",Ext.app.ViewModel,{parent:"networkPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.panel-graphpanel-graphpanel"],0,[metExploreViz.view.panel.graphPanel,"GraphPanelModel"],0));(Ext.cmd.derive("metExploreViz.view.panel.comparePanel.ComparePanelController",Ext.app.ViewController,{init:function(){var g=this,d=g.getViewModel(),f=g.getView();f.on({initiateviz:this.initiateViz,scope:g});f.on({copyNetwork:this.saveNetwork,scope:g});f.on({add:function(a){a.expand(true)},scope:g});f.on({remove:function(b,a){if(b.items.length==0){b.collapse(true)}},scope:g});f.on({beforeremove:function(a,b){session=_metExploreViz.getSessionById(b.id+"-body");if(session!=undefined){metExploreD3.GraphNetwork.stopForce(session);var c=_metExploreViz.getComparedPanelById(b.id+"-body");if(c!=undefined){c.setVisible(false);_metExploreViz.removeComparedPanel(c)}_metExploreViz.removeSession(b.id+"-body");metExploreD3.GraphNetwork.looksLinked()}},scope:g})},onSessionStart:function(d){var c=_metExploreViz.cloneSession();c.setId(d);_metExploreViz.addSession(c)},initiateViz:function(g){var j=this;var m=_metExploreViz.getSessionById(g);var o=g.substring(0,g.length-5);var h=Ext.getCmp(o);if(h!=undefined){h.on("resize",function(){metExploreD3.GraphPanel.resizeViz(g);var a=_metExploreViz.getSessionById("viz");if(a.isActive()){metExploreD3.GraphPanel.resizePanels(g)}})}$("#"+g).on("contextmenu",function(a){a.preventDefault();var c=Ext.getCmp("comparePanel");if(a.target.parentNode.parentNode.id=="D3viz"){if(m.getSelectedNodes()!=undefined){if(m.getSelectedNodes().length!=0){c.CtxMenu=new Ext.menu.Menu({items:[{text:"Remove selected nodes",hidden:false,handler:function(){metExploreD3.GraphNetwork.removeSelectedNode(g)}}]})}}}else{if(a.target.id==""){if(a.target.parentNode.textContent!=""){if(a.target.previousSibling.previousSibling==null){var b=a.target.previousSibling}else{var b=a.target.previousSibling.previousSibling}}else{var b=a.target.parentNode.parentNode.firstChild}}else{var b=a.target}c.CtxMenu=new Ext.menu.Menu({items:[{text:"Remove the node",hidden:false,handler:function(){metExploreD3.GraphNetwork.removeSelectedNode(g)}},{text:"Select neighbour",hidden:false,handler:function(){metExploreD3.GraphNode.selectNeighbours(_metExploreViz.getSessionById(g).getD3Data().getNodeById(b.id),g)}},{text:"See more information",hidden:false,handler:function(){var f=b.id;if(b.getAttribute("class")=="metabolite"){var u=Ext.getStore("S_Metabolite");var w=u.getMetaboliteById(f);var t=Ext.create("MetExplore.view.window.V_WindowInfoMetabolite",{rec:w});t.show();t.focus()}else{var v=Ext.getStore("S_Reaction");var w=v.getReactionById(f);var d=Ext.create("MetExplore.view.window.V_WindowInfoReaction",{rec:w});d.show();d.focus()}}}]})}if(c.CtxMenu!=undefined){c.CtxMenu.showAt(a.clientX,a.clientY)}});metExploreD3.GraphNetwork.delayedInitialisation(g)},drawSavedNetwork:function(f){var j=Ext.getCmp(f.substring(0,f.length-5));if(j!=undefined){var g=new Ext.LoadMask({target:j,msg:"Copy in process...",msgCls:"msgClsCustomLoadMask"});g.show();var h=this;setTimeout(function(){h.onSessionStart(f);h.initiateViz(f);metExploreD3.GraphNetwork.setAnimated(f,true);metExploreD3.GraphNetwork.refreshSvg(f);g.hide()},100)}},saveNetwork:function(){if(_metExploreViz.getSessionById("viz").getD3Data()==undefined){console.log("Any network to save.")}else{console.log("Save the network.");var g=this,f=g.getView();f.show();function d(a){Ext.Msg.prompt("Title","Please enter the title of network:",function(q,b){if(q=="ok"){var o=Ext.getCmp("comparePanel");if(b!=""&&o!=undefined){var c="graph"+_metExploreViz.getComparedPanelsLength();var p=[{id:c,title:b,html:'<div id="'+c+'" height="100%" width="100%"></div>',flex:1,cls:"comparedPanel",closable:true,collapsible:true,collapseDirection:"left"}];o.add(p);o.expand();newComparedPanel=new ComparedPanel(c+"-body",true,o.items.keys[o.items.length-1],b);_metExploreViz.addComparedPanel(newComparedPanel);a.drawSavedNetwork(c+"-body")}else{alert("Please enter a valid name");d(a)}}},this,false)}d(this)}}},0,0,0,0,["controller.panel-comparePanel-comparePanel"],0,[metExploreViz.view.panel.comparePanel,"ComparePanelController"],0));(Ext.cmd.derive("metExploreViz.view.panel.comparePanel.ComparePanelModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.panel-comparePanel-comparePanel"],0,[metExploreViz.view.panel.comparePanel,"ComparePanelModel"],0));(Ext.cmd.derive("metExploreViz.view.panel.comparePanel.ComparePanel",Ext.panel.Panel,{controller:"panel-comparePanel-comparePanel",viewModel:{type:"panel-comparePanel-comparePanel"},collapsible:true,collapsed:true,hidden:true,region:"north",height:300,width:"100%",split:true,cls:"comparePanel",resizable:{handles:"n",pinned:true},layout:{type:"hbox",align:"stretch"},animation:true},0,["comparePanel"],["component","box","container","panel","comparePanel"],{component:true,box:true,container:true,panel:true,comparePanel:true},["widget.comparePanel"],0,[metExploreViz.view.panel.comparePanel,"ComparePanel"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_MiningMenu.Viz_MiningMenuController",Ext.app.ViewController,{init:function(){var g=this,d=g.getViewModel(),f=g.getView();f.on({mouseleave:function(a,b,c){a.hide()},scope:g});if(metExploreD3.Features.isEnabled("algorithm")){f.lookupReference("vizAlgorithmMenuID").setHidden(false)}if(metExploreD3.Features.isEnabled("highlightSubnetwork","max")){f.lookupReference("highlightSubnetwork").setHidden(false);f.lookupReference("highlightSubnetwork").on({click:g.highlightSubnetwork,scope:g})}f.lookupReference("keepOnlySubnetwork").on({click:g.keepOnlySubnetwork,scope:g})},highlightSubnetwork:function(){metExploreD3.GraphFunction.highlightSubnetwork()},keepOnlySubnetwork:function(){metExploreD3.GraphFunction.keepOnlySubnetwork()}},0,0,0,0,["controller.menu-vizMiningMenu-vizMiningMenu"],0,[metExploreViz.view.menu.viz_MiningMenu,"Viz_MiningMenuController"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_MiningMenu.Viz_MiningMenuModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.menu-vizMiningMenu-vizMiningMenu"],0,[metExploreViz.view.menu.viz_MiningMenu,"Viz_MiningMenuModel"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_AlgorithmMenu.Viz_AlgorithmMenuController",Ext.app.ViewController,{init:function(){var g=this,d=g.getViewModel(),f=g.getView();f.lookupReference("betweennessCentrality").on({click:metExploreD3.GraphFunction.betweennessCentrality,scope:g})}},0,0,0,0,["controller.menu-vizAlgorithmMenu-vizAlgorithmMenu"],0,[metExploreViz.view.menu.viz_AlgorithmMenu,"Viz_AlgorithmMenuController"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_AlgorithmMenu.Viz_AlgorithmMenuModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.menu-vizAlgorithmMenu-vizAlgorithmMenu"],0,[metExploreViz.view.menu.viz_AlgorithmMenu,"Viz_AlgorithmMenuModel"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_AlgorithmMenu.Viz_AlgorithmMenu",Ext.menu.Menu,{controller:"menu-vizAlgorithmMenu-vizAlgorithmMenu",viewModel:{type:"menu-vizAlgorithmMenu-vizAlgorithmMenu"},items:[{text:"Betweenness Centrality",reference:"betweennessCentrality",iconCls:"betweennessCentrality"}]},0,["vizAlgorithmMenu"],["component","box","container","panel","menu","vizAlgorithmMenu"],{component:true,box:true,container:true,panel:true,menu:true,vizAlgorithmMenu:true},["widget.vizAlgorithmMenu"],0,[metExploreViz.view.menu.viz_AlgorithmMenu,"Viz_AlgorithmMenu"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_MiningMenu.Viz_MiningMenu",Ext.menu.Menu,{controller:"menu-vizMiningMenu-vizMiningMenu",viewModel:{type:"menu-vizMiningMenu-vizMiningMenu"},items:[{text:"Algorithm",scale:"large",menu:{id:"vizIdAlgorithmMenu",xtype:"vizAlgorithmMenu"},id:"vizAlgorithmMenuID",reference:"vizAlgorithmMenuID",padding:"0 0 0 0",hidden:true},{text:"Highlight Subnetwork",reference:"highlightSubnetwork",tooltip:"Highlight sub-network based on node selection or mapped nodes",iconCls:"highlightSubnetwork",hidden:true},{text:"Extract Subnetwork",reference:"keepOnlySubnetwork",tooltip:"Extract sub-network based on node selection",iconCls:"subnetwork"}]},0,["vizMiningMenu"],["component","box","container","panel","menu","vizMiningMenu"],{component:true,box:true,container:true,panel:true,menu:true,vizMiningMenu:true},["widget.vizMiningMenu"],0,[metExploreViz.view.menu.viz_MiningMenu,"Viz_MiningMenu"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_SaveMenu.Viz_SaveMenuController",Ext.app.ViewController,{init:function(){var g=this,d=g.getViewModel(),f=g.getView();f.on({mouseleave:function(a,b,c){a.hide()},scope:g});f.lookupReference("exportJSON").on({click:g.exportJSON,scope:g});f.lookupReference("exportDOT").on({click:g.exportDOT,scope:g});f.lookupReference("exportGML").on({click:g.exportGML,scope:g})},exportDOT:function(){metExploreD3.GraphUtils.saveNetworkDot()},exportGML:function(){metExploreD3.GraphUtils.saveNetworkGml()},exportJSON:function(){metExploreD3.GraphUtils.saveNetworkJSON()}},0,0,0,0,["controller.menu-vizSaveMenu-vizSaveMenu"],0,[metExploreViz.view.menu.viz_SaveMenu,"Viz_SaveMenuController"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_SaveMenu.Viz_SaveMenuModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.menu-vizSaveMenu-vizSaveMenu"],0,[metExploreViz.view.menu.viz_SaveMenu,"Viz_SaveMenuModel"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_SaveMenu.Viz_SaveMenu",Ext.menu.Menu,{controller:"menu-vizSaveMenu-vizSaveMenu",viewModel:{type:"menu-vizSaveMenu-vizSaveMenu"},items:[{text:"Save Viz as json",reference:"exportJSON",tooltip:"Save network viz as a json file",iconCls:"saveNetwork"},{text:"Save Viz as dot",reference:"exportDOT",tooltip:"Save network viz as a dot file",iconCls:"exportDot"},{text:"Save Viz as gml",reference:"exportGML",tooltip:"Save network viz as a gml file",iconCls:"exportGml"},{text:"Save Viz as XGMML",hidden:true,reference:"exportXGMML",tooltip:"Save network viz as a XGMML file with Cytoscape's graphical attibutes",iconCls:"cytoscapeWebStart"}]},0,["vizSaveMenu"],["component","box","container","panel","menu","vizSaveMenu"],{component:true,box:true,container:true,panel:true,menu:true,vizSaveMenu:true},["widget.vizSaveMenu"],0,[metExploreViz.view.menu.viz_SaveMenu,"Viz_SaveMenu"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ExportMenu.Viz_ExportMenuController",Ext.app.ViewController,{init:function(){var g=this,d=g.getViewModel(),f=g.getView();f.on({mouseleave:function(a,b,c){a.hide()},scope:g});f.lookupReference("exportSVG").on({click:g.exportSVG,scope:g});f.lookupReference("exportPNG").on({click:g.exportPNG,scope:g});f.lookupReference("exportJPG").on({click:g.exportJPG,scope:g})},exportSVG:function(){metExploreD3.GraphUtils.exportSVG()},exportPNG:function(){metExploreD3.GraphUtils.exportPNG()},exportJPG:function(){metExploreD3.GraphUtils.exportJPG()}},0,0,0,0,["controller.menu-vizExportMenu-vizExportMenu"],0,[metExploreViz.view.menu.viz_ExportMenu,"Viz_ExportMenuController"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ExportMenu.Viz_ExportMenuModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.menu-vizExportMenu-vizExportMenu"],0,[metExploreViz.view.menu.viz_ExportMenu,"Viz_ExportMenuModel"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ExportMenu.Viz_ExportMenu",Ext.menu.Menu,{controller:"menu-vizExportMenu-vizExportMenu",viewModel:{type:"menu-vizExportMenu-vizExportMenu"},items:[{text:"Export Viz as svg",reference:"exportSVG",tooltip:"Export network viz as a svg file",iconCls:"exportSvg"},{text:"Export Viz as png",reference:"exportPNG",tooltip:"Export network viz as a png file",iconCls:"exportPng"},{text:"Export Viz as jpeg",reference:"exportJPG",tooltip:"Export network viz as a jpeg file",iconCls:"exportJpg"}]},0,["vizExportMenu"],["component","box","container","panel","menu","vizExportMenu"],{component:true,box:true,container:true,panel:true,menu:true,vizExportMenu:true},["widget.vizExportMenu"],0,[metExploreViz.view.menu.viz_ExportMenu,"Viz_ExportMenu"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ImportMenu.Viz_ImportMenuController",Ext.app.ViewController,{init:function(){var g=this,d=g.getViewModel(),f=g.getView();f.on({mouseleave:function(a,b,c){a.hide()},scope:g});f.lookupReference("importMapping").on({click:function(){var a=Ext.getCmp("IDimportMapping");if(a!=undefined){a.fileInputEl.dom.click()}},scope:g});f.lookupReference("importSideCompounds").on({click:function(){var a=Ext.getCmp("IDimportSideCompounds");if(a!=undefined){a.fileInputEl.dom.click()}},scope:g})},importMapping:function(){metExploreD3.GraphMapping.importMapping()}},0,0,0,0,["controller.menu-vizImportMenu-vizImportMenu"],0,[metExploreViz.view.menu.viz_ImportMenu,"Viz_ImportMenuController"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ImportMenu.Viz_ImportMenuModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.menu-vizImportMenu-vizImportMenu"],0,[metExploreViz.view.menu.viz_ImportMenu,"Viz_ImportMenuModel"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ImportMenu.Viz_ImportMenu",Ext.menu.Menu,{controller:"menu-vizImportMenu-vizImportMenu",viewModel:{type:"menu-vizImportMenu-vizImportMenu"},items:[{text:"Import mapping from tab file",reference:"importMapping",tooltip:"Import mapping from tab file",iconCls:"importData"},{hidden:true,id:"buttonMap",xtype:"buttonImportMapping"},{text:"Import side compounds from tab file",reference:"importSideCompounds",tooltip:"Import side compounds from tab file",iconCls:"importData"},{hidden:true,id:"buttonSide",xtype:"buttonImportSideCompounds"}]},0,["vizImportMenu"],["component","box","container","panel","menu","vizImportMenu"],{component:true,box:true,container:true,panel:true,menu:true,vizImportMenu:true},["widget.vizImportMenu"],0,[metExploreViz.view.menu.viz_ImportMenu,"Viz_ImportMenu"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_DrawingMenu.Viz_DrawingMenuController",Ext.app.ViewController,{init:function(){var g=this,d=g.getViewModel(),f=g.getView();f.on({mouseleave:function(a,b,c){a.hide()},scope:g});f.lookupReference("removeSideCompounds").on({click:g.removeSideCompounds,scope:g});f.lookupReference("duplicateSideCompounds").on({click:g.duplicateSideCompounds,scope:g});f.lookupReference("clustMetabolites").on({click:g.clustMetabolites,scope:g});if(metExploreD3.Features.isEnabled("layouts")){f.lookupReference("vizLayoutMenuID").setHidden(false)}f.lookupReference("makeClusters").on({click:g.makeClusters,scope:g});f.on({enableMakeClusters:function(){this.lookupReference("makeClusters").setDisabled(false)},scope:g});f.on({disableMakeClusters:function(){this.lookupReference("makeClusters").setDisabled(true)},scope:g})},duplicateSideCompounds:function(){metExploreD3.GraphNetwork.duplicateSideCompounds("viz")},clustMetabolites:function(){if(!_metExploreViz.isLinkedByTypeOfMetabolite()){metExploreD3.GraphLink.linkTypeOfMetabolite();this.getView().lookupReference("clustMetabolites").setIconCls("metabolitesUnlinkedByType");this.getView().lookupReference("clustMetabolites").setTooltip("Release force between substrates/products")}else{metExploreD3.GraphLink.removeLinkTypeOfMetabolite();this.getView().lookupReference("clustMetabolites").setIconCls("metabolitesLinkedByType");this.getView().lookupReference("clustMetabolites").setTooltip("Draw closer substrates/products")}},makeClusters:function(){var d=metExploreD3.getGeneralStyle().useClusters();metExploreD3.getGeneralStyle().setUseClusters(!d);if(!d){this.getView().lookupReference("makeClusters").setIconCls("unmakeClusters");this.getView().lookupReference("makeClusters").setTooltip("Release force for clusters");this.getView().lookupReference("makeClusters").setText("Unmake clusters")}else{this.getView().lookupReference("makeClusters").setIconCls("makeClusters");this.getView().lookupReference("makeClusters").setTooltip("Make clusters in function of highlighted component");this.getView().lookupReference("makeClusters").setText("Make clusters")}var c=_metExploreViz.getSessionById("viz");if((metExploreD3.GraphNetwork.isAnimated(c.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(c.getId())==null)){c.getForce().resume()}},removeSideCompounds:function(){metExploreD3.GraphNetwork.removeSideCompounds()}},0,0,0,0,["controller.menu-vizDrawingMenu-vizDrawingMenu"],0,[metExploreViz.view.menu.viz_DrawingMenu,"Viz_DrawingMenuController"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_DrawingMenu.Viz_DrawingMenuModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.menu-vizDrawingMenu-vizDrawingMenu"],0,[metExploreViz.view.menu.viz_DrawingMenu,"Viz_DrawingMenuModel"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_LayoutMenu.Viz_LayoutMenuController",Ext.app.ViewController,{init:function(){var g=this,d=g.getViewModel(),f=g.getView();f.lookupReference("hierarchicalTreeLayout").on({click:metExploreD3.GraphFunction.hierarchicalDrawing,scope:g});f.lookupReference("sugiyamaLayout").on({click:metExploreD3.GraphFunction.sugiyamaDrawing,scope:g})}},0,0,0,0,["controller.menu-vizLayoutMenu-vizLayoutMenu"],0,[metExploreViz.view.menu.viz_LayoutMenu,"Viz_LayoutMenuController"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_LayoutMenu.Viz_LayoutMenuModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.menu-vizLayoutMenu-vizLayoutMenu"],0,[metExploreViz.view.menu.viz_LayoutMenu,"Viz_LayoutMenuModel"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_LayoutMenu.Viz_LayoutMenu",Ext.menu.Menu,{controller:"menu-vizLayoutMenu-vizLayoutMenu",viewModel:{type:"menu-vizLayoutMenu-vizLayoutMenu"},items:[{text:"Hierarchical Tree (R-T Extended)",reference:"hierarchicalTreeLayout",iconCls:"drawhierarchicallayout"},{text:"Sugiyama (OGDF)",reference:"sugiyamaLayout",iconCls:"drawhierarchicallayout"}]},0,["vizLayoutMenu"],["component","box","container","panel","menu","vizLayoutMenu"],{component:true,box:true,container:true,panel:true,menu:true,vizLayoutMenu:true},["widget.vizLayoutMenu"],0,[metExploreViz.view.menu.viz_LayoutMenu,"Viz_LayoutMenu"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ColorMenu.Viz_ColorMenuController",Ext.app.ViewController,{init:function(){var g=this,d=g.getViewModel(),f=g.getView();f.on({setGeneralStyle:function(){console.log("vizColorMenusetGeneralStyle",f.lookupReference("highlightCompartments"));var a=_metExploreViz.getGeneralStyle();console.log(a.isDisplayedConvexhulls());console.log(a.useClusters());if(a.isDisplayedConvexhulls()=="Compartments"){f.lookupReference("highlightCompartments").setChecked(true);metExploreD3.fireEvent("vizIdDrawing","enableMakeClusters");if(a.useClusters()){Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setIconCls("unmakeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setTooltip("Release force for clusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setText("Unmake clusters")}else{Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setIconCls("makeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setTooltip("Make clusters in function of highlighted component");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setText("Make clusters")}}else{if(a.isDisplayedConvexhulls()=="Pathways"){f.lookupReference("highlightPathways").setChecked(true);metExploreD3.fireEvent("vizIdDrawing","enableMakeClusters");if(a.useClusters()){Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setIconCls("unmakeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setTooltip("Release force for clusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setText("Unmake clusters")}else{Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setIconCls("makeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setTooltip("Make clusters in function of highlighted component");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setText("Make clusters")}}else{f.lookupReference("highlightCompartments").setChecked(false);f.lookupReference("highlightPathways").setChecked(false);metExploreD3.fireEvent("vizIdDrawing","disableMakeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setIconCls("makeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setTooltip("Make clusters in function of highlighted component");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setText("Make clusters")}}},scope:g});f.lookupReference("invertColors").on({click:g.invertColors,scope:g});f.lookupReference("blackWhite").on({click:g.blackWhite,scope:g})},invertColors:function(g,d){var f=this;if(g.checked){d3.select("#viz").select("#D3viz").classed("invertColorViz",true)}else{d3.select("#viz").select("#D3viz").classed("invertColorViz",false)}},blackWhite:function(g,d){var f=this;if(g.checked){d3.select("#viz").select("#D3viz").classed("blackWhiteViz",true)}else{d3.select("#viz").select("#D3viz").classed("blackWhiteViz",false)}},highlightComponents:function(o){var j=this,g=j.getViewModel(),h=j.getView();var m=_metExploreViz.getGeneralStyle();m.setDisplayConvexhulls(false);metExploreD3.GraphLink.displayConvexhulls("viz");metExploreD3.GraphNetwork.tick("viz");m.setDisplayConvexhulls(o);metExploreD3.GraphLink.displayConvexhulls("viz");metExploreD3.GraphNetwork.tick("viz");metExploreD3.fireEvent("vizIdDrawing","enableMakeClusters")},hideComponents:function(){var h=this,f=h.getViewModel(),g=h.getView();var j=_metExploreViz.getGeneralStyle();j.setDisplayConvexhulls(false);metExploreD3.GraphLink.displayConvexhulls("viz");metExploreD3.GraphNetwork.tick("viz");metExploreD3.fireEvent("generalStyleForm","setGeneralStyle");metExploreD3.fireEvent("vizIdDrawing","disableMakeClusters")}},0,0,0,0,["controller.menu-vizColorMenu-vizColorMenu"],0,[metExploreViz.view.menu.viz_ColorMenu,"Viz_ColorMenuController"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ColorMenu.Viz_ColorMenuModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.menu-vizColorMenu-vizColorMenu"],0,[metExploreViz.view.menu.viz_ColorMenu,"Viz_ColorMenuModel"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ColorMenu.Viz_ColorMenu",Ext.menu.Menu,{controller:"menu-vizColorMenu-vizColorMenu",viewModel:{type:"menu-vizColorMenu-vizColorMenu"},items:[{text:"Invert colors",checked:false,reference:"invertColors",iconCls:"invertColor"},{text:"Display in black and white",checked:false,reference:"blackWhite",iconCls:"blackWhite"}]},0,["vizColorMenu"],["component","box","container","panel","menu","vizColorMenu"],{component:true,box:true,container:true,panel:true,menu:true,vizColorMenu:true},["widget.vizColorMenu"],0,[metExploreViz.view.menu.viz_ColorMenu,"Viz_ColorMenu"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ConvexHullMenu.Viz_ConvexHullMenuController",Ext.app.ViewController,{init:function(){var g=this,d=g.getViewModel(),f=g.getView();f.on({setGeneralStyle:function(){var a=_metExploreViz.getGeneralStyle();if(a.isDisplayedConvexhulls()=="Compartments"){f.lookupReference("highlightCompartments").setChecked(true);metExploreD3.fireEvent("vizIdDrawing","enableMakeClusters");if(a.useClusters()){Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setIconCls("unmakeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setTooltip("Release force for clusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setText("Unmake clusters")}else{Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setIconCls("makeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setTooltip("Make clusters in function of highlighted component");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setText("Make clusters")}}else{if(a.isDisplayedConvexhulls()=="Pathways"){f.lookupReference("highlightPathways").setChecked(true);metExploreD3.fireEvent("vizIdDrawing","enableMakeClusters");if(a.useClusters()){Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setIconCls("unmakeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setTooltip("Release force for clusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setText("Unmake clusters")}else{Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setIconCls("makeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setTooltip("Make clusters in function of highlighted component");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setText("Make clusters")}}else{f.lookupReference("highlightCompartments").setChecked(false);f.lookupReference("highlightPathways").setChecked(false);metExploreD3.fireEvent("vizIdDrawing","disableMakeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setIconCls("makeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setTooltip("Make clusters in function of highlighted component");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setText("Make clusters")}}},scope:g});f.lookupReference("highlightCompartments").on({click:g.checkHandler,scope:g});f.lookupReference("highlightPathways").on({click:g.checkHandler,scope:g})},checkHandler:function(g,d){var f=this;if(g.checked){f.highlightComponents(g.text);g.parentMenu.items.items.filter(function(a){return a!=g}).forEach(function(a){a.setChecked(false)})}else{f.hideComponents()}},highlightComponents:function(o){var j=this,g=j.getViewModel(),h=j.getView();var m=_metExploreViz.getGeneralStyle();m.setDisplayConvexhulls(false);metExploreD3.GraphLink.displayConvexhulls("viz");metExploreD3.GraphNetwork.tick("viz");m.setDisplayConvexhulls(o);metExploreD3.GraphLink.displayConvexhulls("viz");metExploreD3.GraphNetwork.tick("viz");m.setDisplayCaption(o);metExploreD3.GraphCaption.majCaption();metExploreD3.fireEvent("vizIdDrawing","enableMakeClusters")},hideComponents:function(){var h=this,f=h.getViewModel(),g=h.getView();var j=_metExploreViz.getGeneralStyle();j.setDisplayConvexhulls(false);metExploreD3.GraphLink.displayConvexhulls("viz");metExploreD3.GraphNetwork.tick("viz");j.setDisplayCaption(false);metExploreD3.GraphCaption.majCaption();metExploreD3.fireEvent("generalStyleForm","setGeneralStyle");metExploreD3.fireEvent("vizIdDrawing","disableMakeClusters")}},0,0,0,0,["controller.menu-vizConvexHullMenu-vizConvexHullMenu"],0,[metExploreViz.view.menu.viz_ConvexHullMenu,"Viz_ConvexHullMenuController"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ConvexHullMenu.Viz_ConvexHullMenuModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.menu-vizConvexHullMenu-vizConvexHullMenu"],0,[metExploreViz.view.menu.viz_ConvexHullMenu,"Viz_ConvexHullMenuModel"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ConvexHullMenu.Viz_ConvexHullMenu",Ext.menu.Menu,{controller:"menu-vizConvexHullMenu-vizConvexHullMenu",viewModel:{type:"menu-vizConvexHullMenu-vizConvexHullMenu"},items:[{text:"Compartments",checked:false,reference:"highlightCompartments"},{text:"Pathways",checked:false,reference:"highlightPathways"}]},0,["vizConvexHullMenu"],["component","box","container","panel","menu","vizConvexHullMenu"],{component:true,box:true,container:true,panel:true,menu:true,vizConvexHullMenu:true},["widget.vizConvexHullMenu"],0,[metExploreViz.view.menu.viz_ConvexHullMenu,"Viz_ConvexHullMenu"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_DrawingMenu.Viz_DrawingMenu",Ext.menu.Menu,{controller:"menu-vizDrawingMenu-vizDrawingMenu",viewModel:{type:"menu-vizDrawingMenu-vizDrawingMenu"},items:[{text:"Remove side compounds",reference:"removeSideCompounds",tooltip:"Remove metabolites annotated as side compounds",iconCls:"delete-sideCompounds"},{text:"Layout",scale:"large",menu:{id:"vizIdLayoutMenu",xtype:"vizLayoutMenu"},id:"vizLayoutMenuID",reference:"vizLayoutMenuID",padding:"0 0 0 0",iconCls:"drawhierarchicallayout",hidden:true},{text:"Duplicate side compounds",reference:"duplicateSideCompounds",tooltip:"Duplicate metabolites annotated as side compounds",iconCls:"duplicate-sideCompounds"},{text:"Color",scale:"large",menu:{id:"vizIdColorMenu",xtype:"vizColorMenu"},id:"vizColorMenuID",reference:"vizColorMenuID",padding:"0 0 0 0",iconCls:"color"},{text:"Draw closer substrates/products",reference:"clustMetabolites",iconCls:"metabolitesLinkedByType"},{text:"Highlight component",scale:"large",menu:{id:"vizIdConvexHullMenu",xtype:"vizConvexHullMenu"},id:"vizConvexHullMenuID",reference:"vizConvexHullMenuID",padding:"0 0 0 0",iconCls:"highlightCompartments"},{text:"Make clusters",reference:"makeClusters",tooltip:"Make clusters in function of highlighted component",iconCls:"makeClusters",disabled:true}]},0,["vizDrawingMenu"],["component","box","container","panel","menu","vizDrawingMenu"],{component:true,box:true,container:true,panel:true,menu:true,vizDrawingMenu:true},["widget.vizDrawingMenu"],0,[metExploreViz.view.menu.viz_DrawingMenu,"Viz_DrawingMenu"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_LoadMenu.Viz_LoadMenuController",Ext.app.ViewController,{init:function(){var g=this,d=g.getViewModel(),f=g.getView();f.on({mouseleave:function(a,b,c){a.hide()},scope:g});f.on({cartFilled:function(){f.lookupReference("loadNetworkFromWebsite").setDisabled(false)},scope:g});f.lookupReference("loadNetworkFromJSON").on({click:function(){var a=Ext.getCmp("IDimportNetwork");if(a!=undefined){a.fileInputEl.dom.click()}},scope:g});f.lookupReference("loadNetworkFromWebsite").on({click:function(){metExploreD3.GraphPanel.refreshPanel(_metExploreViz.getDataFromWebSite())},scope:g})},loadMapping:function(){metExploreD3.GraphMapping.loadMapping()}},0,0,0,0,["controller.menu-vizLoadMenu-vizLoadMenu"],0,[metExploreViz.view.menu.viz_LoadMenu,"Viz_LoadMenuController"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_LoadMenu.Viz_LoadMenuModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.menu-vizLoadMenu-vizLoadMenu"],0,[metExploreViz.view.menu.viz_LoadMenu,"Viz_LoadMenuModel"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_LoadMenu.Viz_LoadMenu",Ext.menu.Menu,{controller:"menu-vizLoadMenu-vizLoadMenu",viewModel:{type:"menu-vizLoadMenu-vizLoadMenu"},id:"viz_LoadMenu",items:[{text:"Load network from json file",reference:"loadNetworkFromJSON",tooltip:"Load network from json file",iconCls:"importToRsxFromJSON"},{text:"Load network from website",reference:"loadNetworkFromWebsite",tooltip:"Load network from website",iconCls:"importToRsxFromWS",disabled:true,hidden:false}]},0,["vizLoadMenu"],["component","box","container","panel","menu","vizLoadMenu"],{component:true,box:true,container:true,panel:true,menu:true,vizLoadMenu:true},["widget.vizLoadMenu"],0,[metExploreViz.view.menu.viz_LoadMenu,"Viz_LoadMenu"],0));(Ext.cmd.derive("metExploreViz.view.panel.viz.VizController",Ext.app.ViewController,{init:function(){var g=this,d=g.getViewModel(),f=g.getView();f.on({initiateViz:g.initiateViz,scope:g});f.on({resize:function(){metExploreD3.GraphPanel.resizeViz("viz");var a=_metExploreViz.getSessionById("viz");if(a.isActive()){metExploreD3.GraphPanel.resizePanels("viz")}},scope:g})},initiateViz:function(){$("#viz").on("contextmenu",function(h){h.preventDefault();var f=_metExploreViz.getSessionById("viz");var g=Ext.getCmp("viz");if(g!=undefined){if(h.target.id=="D3viz"||h.target.parentNode.parentNode.id=="D3viz"||h.target.parentNode.id=="graphComponent"){if(f.getSelectedNodes().length!=0){g.CtxMenu=new Ext.menu.Menu({items:[{text:"Remove selected nodes",hidden:false,iconCls:"removeNode",handler:function(){metExploreD3.GraphNetwork.removeSelectedNode("viz")}},{text:"Fix selected nodes",hidden:false,iconCls:"lock_font_awesome",handler:function(){metExploreD3.GraphNode.fixSelectedNode("viz")}},{text:"Side compounds (duplicate)",hidden:false,iconCls:"duplicate-sideCompounds",handler:function(){var a=_metExploreViz.getSessionById("viz");metExploreD3.GraphNetwork.duplicateSideCompoundsSelected("viz")}}]})}}else{if(h.target.id==""){if(h.target.parentNode.textContent!=""){if(h.target.previousSibling.previousSibling==null){var j=h.target.previousSibling}else{var j=h.target.previousSibling.previousSibling}}else{var j=h.target.parentNode.parentNode.firstChild}}else{var j=h.target}g.CtxMenu=new Ext.menu.Menu({items:[{text:"Remove the node",hidden:false,iconCls:"removeNode",handler:function(){console.log(j);metExploreD3.GraphNetwork.removeOnlyClickedNode(metExploreD3.GraphNode.selectNodeData(j.parentNode),"viz")}},{text:"Side compound (duplicate)",hidden:false,iconCls:"duplicate-sideCompounds",handler:function(){console.log(j);metExploreD3.GraphNetwork.duplicateASideCompoundSelected(j.parentNode,"viz")}},{text:"Change name",hidden:false,iconCls:"edit",handler:function(){console.log(j);metExploreD3.GraphNode.changeName(j.parentNode)}},{text:"Select neighbours (N+select)",hidden:false,iconCls:"neighbours",handler:function(){console.log(j);metExploreD3.GraphNode.selectNeighbours(metExploreD3.GraphNode.selectNodeData(j.parentNode),"viz")}},{text:"See more information",hidden:!metExploreD3.getGeneralStyle().hasEventForNodeInfo(),iconCls:"info",handler:function(){var a=j.id;var b=_metExploreViz.getSessionById("viz").getD3Data().getNodeById(a);console.log(b);metExploreD3.fireEventParentWebSite("seeMoreInformation",metExploreD3.GraphNode.selectNodeData(j.parentNode))}}]})}}if(g.CtxMenu!=undefined){g.CtxMenu.showAt(h.clientX,h.clientY)}})}},0,0,0,0,["controller.panel-viz-viz"],0,[metExploreViz.view.panel.viz,"VizController"],0));(Ext.cmd.derive("metExploreViz.view.panel.viz.VizModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.panel-viz-viz"],0,[metExploreViz.view.panel.viz,"VizModel"],0));(Ext.cmd.derive("metExploreViz.view.panel.viz.Viz",Ext.panel.Panel,{controller:"panel-viz-viz",viewModel:{type:"panel-viz-viz"},margins:"0 0 0 0",closable:false,region:"center",height:"100%",width:"100%",flex:1,split:true,layout:{type:"vbox",align:"stretch",pack:"center"}},0,["viz"],["component","box","container","panel","viz"],{component:true,box:true,container:true,panel:true,viz:true},["widget.viz"],0,[metExploreViz.view.panel.viz,"Viz"],0));(Ext.cmd.derive("metExploreViz.view.panel.graphPanel.GraphPanel",Ext.panel.Panel,{controller:"panel-graphpanel-graphpanel",viewModel:{type:"panel-graphpanel-graphpanel"},height:"100%",width:"100%",margins:"0 0 0 0",split:true,layout:{type:"vbox",align:"stretch"},items:[{tbar:{id:"tbarGraph",items:[{text:"Load network",scale:"large",menu:{xtype:"vizLoadMenu"},tooltip:"You must create a network to use this menu",id:"vizLoadMenuID",reference:"vizLoadMenuID",padding:"5px 5px 5px 5px",iconCls:"importToRsx",cls:"loadButton",iconAlign:"left"},{text:"Mining",scale:"large",menu:{xtype:"vizMiningMenu"},tooltip:"You must create a network to use this menu",id:"vizMiningMenuID",reference:"vizMiningMenuID",disabled:true,hidden:false,padding:"0 0 0 0"},{text:"Drawing",scale:"large",menu:{id:"vizIdDrawing",xtype:"vizDrawingMenu"},tooltip:"You must create a network to use this menu",id:"vizDrawingMenuID",reference:"vizDrawingMenuID",disabled:true,hidden:false,padding:"0 0 0 0"},{text:"Export",scale:"large",menu:{xtype:"vizExportMenu"},tooltip:"You must create a network to use this menu",id:"vizExportMenuID",reference:"vizExportMenuID",disabled:true,hidden:false,padding:"0 0 0 0"},{text:"Import",scale:"large",menu:{xtype:"vizImportMenu"},tooltip:"You must create a network to use this menu",id:"vizImportMenuID",reference:"vizImportMenuID",disabled:true,hidden:false,padding:"0 0 0 0"},{text:"Save",scale:"large",menu:{xtype:"vizSaveMenu"},tooltip:"You must create a network to use this menu",id:"vizSaveMenuID",reference:"vizSaveMenuID",disabled:true,hidden:false,padding:"0 0 0 0"},"-",{xtype:"button",overflowText:"Copy network",scale:"large",id:"buttonCopyNetwork",reference:"buttonCopyNetwork",tooltip:"You must create a network to copy the network",iconCls:"copyNetwork",disabled:true,border:false,padding:"0 0 0 0",listeners:{click:function(){var b=Ext.getCmp("comparePanel");if(b!=undefined){b.fireEvent("copyNetwork")}}}},"-",{border:false,disabled:true,xtype:"panel",reference:"searchNode",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",tooltip:"Find node by name, id, compartment...",name:"searchNodeTextField",reference:"searchNodeTextField",referenceHolder:true,fieldLabel:"Search Node(s)",scale:"large",listeners:{change:function(o,m,h){var j=this.container.component.items.items;var p=undefined;for(var q=0;q<j.length;q++){if(j[q].reference=="searchNodeButton"){p=j[q]}}if(m.length>0&&h.length==0){p.setDisabled(false)}else{if(h.length>0&&m.length==0){p.setDisabled(true)}}},specialkey:function(m,o){var j=this.container.component.items.items;var p=undefined;for(var q=0;q<j.length;q++){if(j[q].reference=="searchNodeButton"){p=j[q]}}if(o.getKey()==o.ENTER){var h=p;console.log(h);if(h!=undefined){h.fireEvent("click")}}}}},{xtype:"button",reference:"searchNodeButton",iconCls:"search",scale:"large",border:false,disabled:true,tooltip:"Find node by name, id, compartment...",padding:"0 0 0 0"}]}]}},{layout:{type:"border",align:"stretch"},xtype:"panel",width:"100%",margins:"0 0 0 0",closable:false,region:"south",flex:1,items:[{title:"Network Manager",id:"comparisonSidePanel",xtype:"comparisonSidePanel"},{id:"viz",xtype:"viz"}]},{title:"Comparative Network",closable:false,id:"comparePanel",xtype:"comparePanel"}]},0,["graphPanel"],["component","box","container","panel","graphPanel"],{component:true,box:true,container:true,panel:true,graphPanel:true},["widget.graphPanel"],0,[metExploreViz.view.panel.graphPanel,"GraphPanel"],0));(Ext.cmd.derive("metExploreViz.view.panel.comparisonSidePanel.ComparisonSidePanelController",Ext.app.ViewController,{init:function(){var g=this,d=g.getViewModel(),f=g.getView();f.on({newMapping:g.drawCaption,scope:g})},drawCaption:function(){metExploreD3.GraphCaption.drawCaption()}},0,0,0,0,["controller.panel-comparisonSidePanel-comparisonSidePanel"],0,[metExploreViz.view.panel.comparisonSidePanel,"ComparisonSidePanelController"],0));(Ext.cmd.derive("metExploreViz.view.panel.comparisonSidePanel.ComparisonSidePanel",Ext.panel.Panel,{controller:"panel-comparisonSidePanel-comparisonSidePanel",collapsible:true,collapsed:true,width:"20%",height:"100%",margins:"0 0 2 0",split:true,layout:"accordion",closable:false,region:"west",items:[{title:"Omics",id:"selectConditionForm",xtype:"selectConditionForm"},{title:"Style",id:"updateStyleForm",xtype:"updateStyleForm",layout:{type:"vbox",align:"stretch"}}]},0,["comparisonSidePanel"],["component","box","container","panel","comparisonSidePanel"],{component:true,box:true,container:true,panel:true,comparisonSidePanel:true},["widget.comparisonSidePanel"],0,[metExploreViz.view.panel.comparisonSidePanel,"ComparisonSidePanel"],0));(Ext.cmd.derive("metExploreViz.view.panel.networkPanel.NetworkPanel",Ext.panel.Panel,{layout:"border",controller:"panel-networkPanel-networkPanel",id:"NetworkPanel",layout:"border",height:"100%",width:"100%",border:true,items:[{closable:false,id:"graphPanel",xtype:"graphPanel",region:"center"},{hidden:true,id:"buttonLoadNetworkFromJSON",xtype:"buttonImportToNetwork"}]},0,["networkPanel"],["component","box","container","panel","networkPanel"],{component:true,box:true,container:true,panel:true,networkPanel:true},["widget.networkPanel"],0,[metExploreViz.view.panel.networkPanel,"NetworkPanel"],0));Ext.onReady(function(){var b=Ext.create("metExploreViz.view.panel.networkPanel.NetworkPanel",{closable:false,xtype:"networkPanel",id:"networkPanel"})});!function(){function kD(ab){return null!=ab&&!isNaN(ab)}function ja(ab){return ab.length}function at(ab){for(var ad=1;ab*ad%1;){ad*=10}return ad}function iv(af,ad){try{for(var ag in ad){Object.defineProperty(af.prototype,ag,{value:ad[ag],enumerable:!1})}}catch(ab){af.prototype=ad}}function jh(){}function bo(ab){return aa+ab in this}function kF(ab){return ab=aa+ab,ab in this&&delete this[ab]}function N(){var ab=[];return this.forEach(function(ad){ab.push(ad)}),ab}function Z(){var ab=0;for(var ad in this){ad.charCodeAt(0)===T&&++ab}return ab}function iy(){for(var ab in this){if(ab.charCodeAt(0)===T){return !1}}return !0}function ks(){}function a2(af,ad,ab){return function(){var ag=ab.apply(ad,arguments);return ag===ad?af:ag}}function a8(af,ab){if(ab in af){return ab}ab=ab.charAt(0).toUpperCase()+ab.substring(1);for(var ag=0,ah=ng.length;ah>ag;++ag){var ad=ng[ag]+ab;if(ad in af){return ad}}}function a6(){}function ia(){}function jn(af){function ad(){for(var aj,ah=ag,al=-1,ak=ah.length;++al<ak;){(aj=ah[al].on)&&aj.apply(this,arguments)}return af}var ag=[],ab=new jh();return ad.on=function(aj,al){var ak,ah=ab.get(aj);return arguments.length<2?ah&&ah.on:(ah&&(ah.on=null,ag=ag.slice(0,ak=ag.indexOf(ah)).concat(ag.slice(ak+1)),ab.remove(aj)),al&&ag.push(ab.set(aj,{on:al})),af)},ad}function ac(){oS.event.preventDefault()}function ky(){for(var ab,ad=oS.event;ab=ad.sourceEvent;){ad=ab}return ad}function ju(af){for(var ad=new ia(),ag=0,ab=arguments.length;++ag<ab;){ad[arguments[ag]]=jn(ad)}return ad.of=function(ah,aj){return function(al){try{var ak=al.sourceEvent=oS.event;al.target=af,oS.event=al,ad[al.type].apply(ah,aj)}finally{oS.event=ak}}},ad}function jr(ab){return kg(ab,jV),ab}function ce(ab){return"function"==typeof ab?ab:function(){return jw(ab,this)}}function L(ab){return"function"==typeof ab?ab:function(){return kU(ab,this)}}function O(ad,aj){function ag(){this.removeAttribute(ad)}function ah(){this.removeAttributeNS(ad.space,ad.local)}function al(){this.setAttribute(ad,aj)}function ak(){this.setAttributeNS(ad.space,ad.local,aj)}function af(){var am=aj.apply(this,arguments);null==am?this.removeAttribute(ad):this.setAttribute(ad,am)}function ab(){var am=aj.apply(this,arguments);null==am?this.removeAttributeNS(ad.space,ad.local):this.setAttributeNS(ad.space,ad.local,am)}return ad=oS.ns.qualify(ad),null==aj?ad.local?ah:ag:"function"==typeof aj?ad.local?ab:af:ad.local?ak:al}function jq(ab){return ab.trim().replace(/\s+/g," ")}function fe(ab){return new RegExp("(?:^|\\s+)"+oS.requote(ab)+"(?:\\s+|$)","g")}function kq(ab){return ab.trim().split(/^|\s+/)}function J(af,ab){function ag(){for(var aj=-1;++aj<ad;){af[aj](this,ab)}}function ah(){for(var aj=-1,ak=ab.apply(this,arguments);++aj<ad;){af[aj](this,ak)}}af=kq(af).map(D);var ad=af.length;return"function"==typeof ab?ah:ag}function D(ab){var ad=fe(ab);return function(af,ag){if(ah=af.classList){return ag?ah.add(ab):ah.remove(ab)}var ah=af.getAttribute("class")||"";ag?(ad.lastIndex=0,ad.test(ah)||af.setAttribute("class",jq(ah+" "+ab))):af.setAttribute("class",jq(ah.replace(ad," ")))}}function F(af,aj,ag){function ah(){this.style.removeProperty(af)}function ad(){this.style.setProperty(af,aj,ag)}function ab(){var ak=aj.apply(this,arguments);null==ak?this.style.removeProperty(af):this.style.setProperty(af,ak,ag)}return null==aj?ah:"function"==typeof aj?ab:ad}function de(af,ab){function ag(){delete this[af]}function ah(){this[af]=ab}function ad(){var aj=ab.apply(this,arguments);null==aj?delete this[af]:this[af]=aj}return null==ab?ag:"function"==typeof ab?ad:ah}function ca(ab){return"function"==typeof ab?ab:(ab=oS.ns.qualify(ab)).local?function(){return this.ownerDocument.createElementNS(ab.space,ab.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,ab)}}function jx(ab){return{__data__:ab}}function io(ab){return function(){return oi(this,ab)}}function fs(ab){return arguments.length||(ab=oS.ascending),function(ad,af){return ad&&af?ab(ad.__data__,af.__data__):!ad-!af}}function eu(ad,aj){for(var ag=0,ah=ad.length;ah>ag;ag++){for(var al,ak=ad[ag],af=0,ab=ak.length;ab>af;af++){(al=ak[af])&&aj(al,af,ag)}}return ad}function I(ab){return kg(ab,dc),ab}function ea(af){var ad,ab;return function(aj,al,ak){var ah,am=af[ak].update,ag=am.length;for(ak!=ab&&(ab=ak,ad=0),al>=ad&&(ad=al+1);!(ah=am[ad])&&++ad<ag;){}return ah}}function fu(){var ab=this.__transition__;ab&&++ab.active}function kn(ak,ab,ah){function am(){var ap=this[al];ap&&(this.removeEventListener(ak,ap,ap.$),delete this[al])}function ad(){var ap=ag(ab,oC(arguments));am.call(this),this.addEventListener(ak,this[al]=ap,ap.$=ah),ap._=ab}function aj(){var aw,aq=new RegExp("^__on([^.]+)"+oS.requote(ak)+"$");for(var av in this){if(aw=av.match(aq)){var ap=this[av];this.removeEventListener(aw[1],ap,ap.$),delete this[av]}}}var al="__on"+ak,af=ak.indexOf("."),ag=iz;af>0&&(ak=ak.substring(0,af));var an=lq.get(ak);return an&&(ak=an,ag=iq),af?ab?ad:am:ab?a6:aj}function iz(ab,ad){return function(af){var ag=oS.event;oS.event=af,ad[0]=this.__data__;try{ab.apply(this,ad)}finally{oS.event=ag}}}function iq(af,ad){var ab=iz(af,ad);return function(ag){var aj=this,ah=ag.relatedTarget;ah&&(ah===aj||8&ah.compareDocumentPosition(aj))||ab.call(aj,ag)}}function dt(){var af=".dragsuppress-"+ ++H,ab="click"+af,ag=oS.select(ct).on("touchmove"+af,ac).on("dragstart"+af,ac).on("selectstart"+af,ac);if(pP){var ah=bc.style,ad=ah[pP];ah[pP]="none"}return function(ak){function aj(){ag.on(ab,null)}ag.on(af,null),pP&&(ah[pP]=ad),ak&&(ag.on(ab,function(){ac(),aj()},!0),setTimeout(aj,0))}}function hc(af,aj){aj.changedTouches&&(aj=aj.changedTouches[0]);var ag=af.ownerSVGElement||af;if(ag.createSVGPoint){var ah=ag.createSVGPoint();if(0>pq&&(ct.scrollX||ct.scrollY)){ag=oS.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var ad=ag[0][0].getScreenCTM();pq=!(ad.f||ad.e),ag.remove()}return pq?(ah.x=aj.pageX,ah.y=aj.pageY):(ah.x=aj.clientX,ah.y=aj.clientY),ah=ah.matrixTransform(af.getScreenCTM().inverse()),[ah.x,ah.y]}var ab=af.getBoundingClientRect();return[aj.clientX-ab.left-af.clientLeft,aj.clientY-ab.top-af.clientTop]}function jb(ab){return ab>0?1:0>ab?-1:0}function hi(af,ad,ab){return(ad[0]-af[0])*(ab[1]-af[1])-(ad[1]-af[1])*(ab[0]-af[0])}function go(ab){return ab>1?0:-1>ab?lX:Math.acos(ab)}function ha(ab){return ab>1?g:-1>ab?-g:Math.asin(ab)}function X(ab){return((ab=Math.exp(ab))-1/ab)/2}function E(ab){return((ab=Math.exp(ab))+1/ab)/2}function gt(ab){return((ab=Math.exp(2*ab))-1)/(ab+1)}function je(ab){return(ab=Math.sin(ab/2))*ab}function iw(){}function ji(af,ad,ab){return new ee(af,ad,ab)}function ee(af,ad,ab){this.h=af,this.s=ad,this.l=ab}function mX(af,ak,ah){function aj(al){return al>360?al-=360:0>al&&(al+=360),60>al?ab+(ag-ab)*al/60:180>al?ag:240>al?ab+(ag-ab)*(240-al)/60:ab}function ad(al){return Math.round(255*aj(al))}var ab,ag;return af=isNaN(af)?0:(af%=360)<0?af+360:af,ak=isNaN(ak)?0:0>ak?0:ak>1?1:ak,ah=0>ah?0:ah>1?1:ah,ag=0.5>=ah?ah*(1+ak):ah+ak-ah*ak,ab=2*ah-ag,jg(ad(af+120),ad(af),ad(af-120))}function o5(af,ad,ab){return new ll(af,ad,ab)}function ll(af,ad,ab){this.h=af,this.c=ad,this.l=ab}function mM(af,ad,ab){return isNaN(af)&&(af=0),isNaN(ad)&&(ad=0),n7(ab,Math.cos(af*=kN)*ad,Math.sin(af)*ad)}function n7(af,ad,ab){return new lD(af,ad,ab)}function lD(af,ad,ab){this.l=af,this.a=ad,this.b=ab}function nA(af,aj,ag){var ah=(af+16)/116,ad=ah+aj/500,ab=ah-ag/200;return ad=jf(ad)*pH,ah=jf(ah)*jm,ab=jf(ab)*nU,jg(mx(3.2404542*ad-1.5371385*ah-0.4985314*ab),mx(-0.969266*ad+1.8760108*ah+0.041556*ab),mx(0.0556434*ad-0.2040259*ah+1.0572252*ab))}function bt(af,ad,ab){return af>0?o5(Math.atan2(ab,ad)*eo,Math.sqrt(ad*ad+ab*ab),af):o5(0/0,0/0,af)}function jf(ab){return ab>0.206893034?ab*ab*ab:(ab-4/29)/7.787037}function pF(ab){return ab>0.008856?Math.pow(ab,1/3):7.787037*ab+4/29}function mx(ab){return Math.round(255*(0.00304>=ab?12.92*ab:1.055*Math.pow(ab,1/2.4)-0.055))}function kK(ab){return jg(ab>>16,255&ab>>8,255&ab)}function mf(ab){return kK(ab)+""}function jg(af,ad,ab){return new mJ(af,ad,ab)}function mJ(af,ad,ab){this.r=af,this.g=ad,this.b=ab}function o(ab){return 16>ab?"0"+Math.max(0,ab).toString(16):Math.min(255,ab).toString(16)}function da(ak,ab,ah){var am,ad,aj,al=0,af=0,ag=0;if(am=/([a-z]+)\((.*)\)/i.exec(ak)){switch(ad=am[2].split(","),am[1]){case"hsl":return ah(parseFloat(ad[0]),parseFloat(ad[1])/100,parseFloat(ad[2])/100);case"rgb":return ab(kx(ad[0]),kx(ad[1]),kx(ad[2]))}}return(aj=m4.get(ak))?ab(aj.r,aj.g,aj.b):(null!=ak&&"#"===ak.charAt(0)&&(4===ak.length?(al=ak.charAt(1),al+=al,af=ak.charAt(2),af+=af,ag=ak.charAt(3),ag+=ag):7===ak.length&&(al=ak.substring(1,3),af=ak.substring(3,5),ag=ak.substring(5,7)),al=parseInt(al,16),af=parseInt(af,16),ag=parseInt(ag,16)),ab(al,af,ag))}function ly(ak,ab,ah){var am,ad,aj=Math.min(ak/=255,ab/=255,ah/=255),al=Math.max(ak,ab,ah),af=al-aj,ag=(al+aj)/2;return af?(ad=0.5>ag?af/(al+aj):af/(2-al-aj),am=ak==al?(ab-ah)/af+(ah>ab?6:0):ab==al?(ah-ak)/af+2:(ak-ab)/af+4,am*=60):(am=0/0,ad=ag>0&&1>ag?0:am),ji(am,ad,ag)}function U(af,aj,ag){af=q(af),aj=q(aj),ag=q(ag);var ah=pF((0.4124564*af+0.3575761*aj+0.1804375*ag)/pH),ad=pF((0.2126729*af+0.7151522*aj+0.072175*ag)/jm),ab=pF((0.0193339*af+0.119192*aj+0.9503041*ag)/nU);return n7(116*ad-16,500*(ah-ad),200*(ad-ab))}function q(ab){return(ab/=255)<=0.04045?ab/12.92:Math.pow((ab+0.055)/1.055,2.4)}function kx(ab){var ad=parseFloat(ab);return"%"===ab.charAt(ab.length-1)?Math.round(2.55*ad):ad}function o4(ab){return"function"==typeof ab?ab:function(){return ab}}function ge(ab){return ab}function pL(ab){return function(ad,af,ag){return 2===arguments.length&&"function"==typeof af&&(ag=af,af=null),mo(ad,af,ab,ag)}}function mo(ak,ab,ah,am){function ad(){var aq,ap=ag.status;if(!ap&&ag.responseText||ap>=200&&300>ap||304===ap){try{aq=ah.call(aj,ag)}catch(av){return al.error.call(aj,av),void 0}al.load.call(aj,aq)}else{al.error.call(aj,ag)}}var aj={},al=oS.dispatch("beforesend","progress","load","error"),af={},ag=new XMLHttpRequest(),an=null;return !ct.XDomainRequest||"withCredentials" in ag||!/^(http(s)?:)?\/\//.test(ak)||(ag=new XDomainRequest()),"onload" in ag?ag.onload=ag.onerror=ad:ag.onreadystatechange=function(){ag.readyState>3&&ad()},ag.onprogress=function(aq){var ap=oS.event;oS.event=aq;try{al.progress.call(aj,ag)}finally{oS.event=ap}},aj.header=function(aq,ap){return aq=(aq+"").toLowerCase(),arguments.length<2?af[aq]:(null==ap?delete af[aq]:af[aq]=ap+"",aj)},aj.mimeType=function(ap){return arguments.length?(ab=null==ap?null:ap+"",aj):ab},aj.responseType=function(ap){return arguments.length?(an=ap,aj):an},aj.response=function(ap){return ah=ap,aj},["get","post"].forEach(function(ap){aj[ap]=function(){return aj.send.apply(aj,[ap].concat(oC(arguments)))}}),aj.send=function(aq,av,aw){if(2===arguments.length&&"function"==typeof av&&(aw=av,av=null),ag.open(aq,ak,!0),null==ab||"accept" in af||(af.accept=ab+",*/*"),ag.setRequestHeader){for(var ap in af){ag.setRequestHeader(ap,af[ap])}}return null!=ab&&ag.overrideMimeType&&ag.overrideMimeType(ab),null!=an&&(ag.responseType=an),null!=aw&&aj.on("error",aw).on("load",function(ax){aw(null,ax)}),al.beforesend.call(aj,ag),ag.send(null==av?null:av),aj},aj.abort=function(){return ag.abort(),aj},oS.rebind(aj,al,"on"),null==am?aj:aj.get(m6(am))}function m6(ab){return 1===ab.length?function(ad,af){ab(null==ad?af:null)}:ab}function py(){var ab=np(),ad=pj()-ab;ad>24?(isFinite(ad)&&(clearTimeout(lW),lW=setTimeout(py,ad)),px=0):(px=1,pa(py))}function np(){var ab=Date.now();for(hr=oB;hr;){ab>=hr.t&&(hr.f=hr.c(ab-hr.t)),hr=hr.n}return ab}function pj(){for(var af,ad=oB,ab=1/0;ad;){ad.f?ad=af?af.n=ad.n:oB=ad.n:(ad.t<ab&&(ab=ad.t),ad=(af=ad).n)}return nJ=af,ab}function hu(ab,ad){return ad-(ab?Math.ceil(Math.log(ab)/Math.LN10):1)}function lb(af,ad){var ab=Math.pow(10,3*ni(8-ad));return{scale:ad>8?function(ag){return ag/ab}:function(ag){return ag*ab},symbol:af}}function A(af){var aj=af.decimal,ag=af.thousands,ah=af.grouping,ad=af.currency,ab=ah?function(an){for(var ak=an.length,am=[],al=0,ap=ah[0];ak>0&&ap>0;){am.push(an.substring(ak-=ap,ak+ap)),ap=ah[al=(al+1)%ah.length]}return am.reverse().join(ag)}:ge;return function(aB){var ak=lG.exec(aB),aq=ak[1]||" ",aD=ak[2]||">",az=ak[3]||"",aC=ak[4]||"",aw=ak[5],av=+ak[6],am=ak[7],ap=ak[8],an=ak[9],al=1,ay="",aE="",ax=!1;switch(ap&&(ap=+ap.substring(1)),(aw||"0"===aq&&"="===aD)&&(aw=aq="0",aD="=",am&&(av-=Math.floor((av-1)/4))),an){case"n":am=!0,an="g";break;case"%":al=100,aE="%",an="f";break;case"p":al=100,aE="%",an="r";break;case"b":case"o":case"x":case"X":"#"===aC&&(ay="0"+an.toLowerCase());case"c":case"d":ax=!0,ap=0;break;case"s":al=-1,an="r"}"$"===aC&&(ay=ad[0],aE=ad[1]),"r"!=an||ap||(an="g"),null!=ap&&("g"==an?ap=Math.max(1,Math.min(21,ap)):("e"==an||"f"==an)&&(ap=Math.max(0,Math.min(20,ap)))),an=lP.get(an)||nR;var aA=aw&&am;return function(aJ){var aI=aE;if(ax&&aJ%1){return""}var aL=0>aJ||0===aJ&&0>1/aJ?(aJ=-aJ,"-"):az;if(0>al){var aG=oS.formatPrefix(aJ,ap);aJ=aG.scale(aJ),aI=aG.symbol+aE}else{aJ*=al}aJ=an(aJ,ap);var aN=aJ.lastIndexOf("."),aH=0>aN?aJ:aJ.substring(0,aN),aK=0>aN?"":aj+aJ.substring(aN+1);!aw&&am&&(aH=ab(aH));var aF=ay.length+aH.length+aK.length+(aA?0:aL.length),aM=av>aF?new Array(aF=av-aF+1).join(aq):"";return aA&&(aH=ab(aM+aH)),aL+=ay,aJ=aH+aK,("<"===aD?aL+aJ+aM:">"===aD?aM+aL+aJ:"^"===aD?aM.substring(0,aF>>=1)+aL+aJ+aM.substring(aF):aL+(aA?aJ:aM+aJ))+aI}}}function nR(ab){return ab+""}function la(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function mW(ak,ab,ah){function am(an){var ap=ak(an),aq=aj(ap,1);return aq-an>an-ap?ap:aq}function ad(an){return ab(an=ak(new gc(an-1)),1),an}function aj(ap,an){return ab(ap=new gc(+ap),an),ap}function al(an,aq,av){var ap=ad(an),aw=[];if(av>1){for(;aq>ap;){ah(ap)%av||aw.push(new Date(+ap)),ab(ap,1)}}else{for(;aq>ap;){aw.push(new Date(+ap)),ab(ap,1)}}return aw}function af(ap,an,aq){try{gc=la;var av=new la();return av._=ap,al(av,an,aq)}finally{gc=Date}}ak.floor=ak,ak.round=am,ak.ceil=ad,ak.offset=aj,ak.range=al;var ag=ak.utc=a(ak);return ag.floor=ag,ag.round=a(am),ag.ceil=a(ad),ag.offset=a(aj),ag.range=af,ak}function a(ab){return function(ad,af){try{gc=la;var ag=new la();return ag._=ad,ab(ag,af)._}finally{gc=Date}}}function lr(ak){function ax(aP){function aO(aR){for(var aQ,aU,aT,aV=[],aW=-1,aS=0;++aW<aN;){37===aP.charCodeAt(aW)&&(aV.push(aP.substring(aS,aW)),null!=(aU=ph[aQ=aP.charAt(++aW)])&&(aQ=aP.charAt(++aW)),(aT=aq[aQ])&&(aQ=aT(aR,null==aU?"e"===aQ?" ":"0":aU)),aV.push(aQ),aS=aW+1)}return aV.push(aP.substring(aS,aW)),aV.join("")}var aN=aP.length;return aO.parse=function(aS){var aR={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},aU=aL(aR,aP,aS,0);if(aU!=aS.length){return null}"p" in aR&&(aR.H=aR.H%12+12*aR.p);var aT=null!=aR.Z&&gc!==la,aQ=new (aT?la:gc)();return"j" in aR?aQ.setFullYear(aR.y,0,aR.j):"w" in aR&&("W" in aR||"U" in aR)?(aQ.setFullYear(aR.y,0,1),aQ.setFullYear(aR.y,0,"W" in aR?(aR.w+6)%7+7*aR.W-(aQ.getDay()+5)%7:aR.w+7*aR.U-(aQ.getDay()+6)%7)):aQ.setFullYear(aR.y,aR.m,aR.d),aQ.setHours(aR.H+Math.floor(aR.Z/100),aR.M+aR.Z%100,aR.S,aR.L),aT?aQ._:aQ},aO.toString=function(){return aP},aO}function aL(aR,aV,aP,aU){for(var aW,aQ,aS,aN=0,aO=aV.length,aT=aP.length;aO>aN;){if(aU>=aT){return -1}if(aW=aV.charCodeAt(aN++),37===aW){if(aS=aV.charAt(aN++),aQ=aE[aS in ph?aV.charAt(aN++):aS],!aQ||(aU=aQ(aR,aP,aU))<0){return -1}}else{if(aW!=aP.charCodeAt(aU++)){return -1}}}return aU}function ap(aP,aO,aQ){aH.lastIndex=0;var aN=aH.exec(aO.substring(aQ));return aN?(aP.w=aB.get(aN[0].toLowerCase()),aQ+aN[0].length):-1}function az(aP,aO,aQ){av.lastIndex=0;var aN=av.exec(aO.substring(aQ));return aN?(aP.w=aC.get(aN[0].toLowerCase()),aQ+aN[0].length):-1}function af(aP,aO,aQ){ay.lastIndex=0;var aN=ay.exec(aO.substring(aQ));return aN?(aP.m=an.get(aN[0].toLowerCase()),aQ+aN[0].length):-1}function al(aP,aO,aQ){aI.lastIndex=0;var aN=aI.exec(aO.substring(aQ));return aN?(aP.m=ag.get(aN[0].toLowerCase()),aQ+aN[0].length):-1}function aG(aP,aO,aN){return aL(aP,aq.c.toString(),aO,aN)}function aJ(aP,aO,aN){return aL(aP,aq.x.toString(),aO,aN)}function aw(aP,aO,aN){return aL(aP,aq.X.toString(),aO,aN)}function ah(aP,aO,aQ){var aN=aD.get(aO.substring(aQ,aQ+=2).toLowerCase());return null==aN?-1:(aP.p=aN,aQ)}var aM=ak.dateTime,ad=ak.date,ab=ak.time,am=ak.periods,aA=ak.days,aK=ak.shortDays,aj=ak.months,aF=ak.shortMonths;ax.utc=function(aP){function aN(aQ){try{gc=la;var aR=new gc();return aR._=aQ,aO(aR)}finally{gc=Date}}var aO=ax(aP);return aN.parse=function(aQ){try{gc=la;var aR=aO.parse(aQ);return aR&&aR._}finally{gc=Date}},aN.toString=aO.toString,aN},ax.multi=ax.utc.multi=gi;var aD=oS.map(),av=kw(aA),aC=a7(aA),aH=kw(aK),aB=a7(aK),aI=kw(aj),ag=a7(aj),ay=kw(aF),an=a7(aF);am.forEach(function(aN,aO){aD.set(aN.toLowerCase(),aO)});var aq={a:function(aN){return aK[aN.getDay()]},A:function(aN){return aA[aN.getDay()]},b:function(aN){return aF[aN.getMonth()]},B:function(aN){return aj[aN.getMonth()]},c:ax(aM),d:function(aN,aO){return nY(aN.getDate(),aO,2)},e:function(aN,aO){return nY(aN.getDate(),aO,2)},H:function(aN,aO){return nY(aN.getHours(),aO,2)},I:function(aN,aO){return nY(aN.getHours()%12||12,aO,2)},j:function(aN,aO){return nY(1+oI.dayOfYear(aN),aO,3)},L:function(aN,aO){return nY(aN.getMilliseconds(),aO,3)},m:function(aN,aO){return nY(aN.getMonth()+1,aO,2)},M:function(aN,aO){return nY(aN.getMinutes(),aO,2)},p:function(aN){return am[+(aN.getHours()>=12)]},S:function(aN,aO){return nY(aN.getSeconds(),aO,2)},U:function(aN,aO){return nY(oI.sundayOfYear(aN),aO,2)},w:function(aN){return aN.getDay()},W:function(aN,aO){return nY(oI.mondayOfYear(aN),aO,2)},x:ax(ad),X:ax(ab),y:function(aN,aO){return nY(aN.getFullYear()%100,aO,2)},Y:function(aN,aO){return nY(aN.getFullYear()%10000,aO,4)},Z:lS,"%":function(){return"%"}},aE={a:ap,A:az,b:af,B:al,c:aG,d:oL,e:oL,H:kv,I:kv,j:mw,L:kd,m:na,M:du,p:ah,S:bu,U:l5,w:oD,W:oj,x:aJ,X:aw,y:pr,Y:cu,Z:nt,"%":oO};return ax}function nY(af,aj,ag){var ah=0>af?"-":"",ad=(ah?-af:af)+"",ab=ad.length;return ah+(ag>ab?new Array(ag-ab+1).join(aj)+ad:ad)}function kw(ab){return new RegExp("^(?:"+ab.map(oS.requote).join("|")+")","i")}function a7(af){for(var ad=new jh(),ag=-1,ab=af.length;++ag<ab;){ad.set(af[ag].toLowerCase(),ag)}return ad}function oD(af,ad,ag){lc.lastIndex=0;var ab=lc.exec(ad.substring(ag,ag+1));return ab?(af.w=+ab[0],ag+ab[0].length):-1}function l5(af,ad,ag){lc.lastIndex=0;var ab=lc.exec(ad.substring(ag));return ab?(af.U=+ab[0],ag+ab[0].length):-1}function oj(af,ad,ag){lc.lastIndex=0;var ab=lc.exec(ad.substring(ag));return ab?(af.W=+ab[0],ag+ab[0].length):-1}function cu(af,ad,ag){lc.lastIndex=0;var ab=lc.exec(ad.substring(ag,ag+4));return ab?(af.y=+ab[0],ag+ab[0].length):-1}function pr(af,ad,ag){lc.lastIndex=0;var ab=lc.exec(ad.substring(ag,ag+2));return ab?(af.y=nE(+ab[0]),ag+ab[0].length):-1}function nt(af,ad,ab){return/^[+-]\d{4}$/.test(ad=ad.substring(ab,ab+5))?(af.Z=+ad,ab+5):-1}function nE(ab){return ab+(ab>68?1900:2000)}function na(af,ad,ag){lc.lastIndex=0;var ab=lc.exec(ad.substring(ag,ag+2));return ab?(af.m=ab[0]-1,ag+ab[0].length):-1}function oL(af,ad,ag){lc.lastIndex=0;var ab=lc.exec(ad.substring(ag,ag+2));return ab?(af.d=+ab[0],ag+ab[0].length):-1}function mw(af,ad,ag){lc.lastIndex=0;var ab=lc.exec(ad.substring(ag,ag+3));return ab?(af.j=+ab[0],ag+ab[0].length):-1}function kv(af,ad,ag){lc.lastIndex=0;var ab=lc.exec(ad.substring(ag,ag+2));return ab?(af.H=+ab[0],ag+ab[0].length):-1}function du(af,ad,ag){lc.lastIndex=0;var ab=lc.exec(ad.substring(ag,ag+2));return ab?(af.M=+ab[0],ag+ab[0].length):-1}function bu(af,ad,ag){lc.lastIndex=0;var ab=lc.exec(ad.substring(ag,ag+2));return ab?(af.S=+ab[0],ag+ab[0].length):-1}function kd(af,ad,ag){lc.lastIndex=0;var ab=lc.exec(ad.substring(ag,ag+3));return ab?(af.L=+ab[0],ag+ab[0].length):-1}function lS(af){var ab=af.getTimezoneOffset(),ag=ab>0?"-":"+",ah=~~(ni(ab)/60),ad=ni(ab)%60;return ag+nY(ah,"0",2)+nY(ad,"0",2)}function oO(af,ad,ag){nl.lastIndex=0;var ab=nl.exec(ad.substring(ag,ag+1));return ab?ag+ab[0].length:-1}function gi(af){for(var ad=af.length,ab=-1;++ab<ad;){af[ab][0]=this(af[ab][0])}return function(aj){for(var ag=0,ah=af[ag];!ah[1](aj);){ah=af[++ag]}return ah[0](aj)}}function oa(){}function nB(af,aj,ag){var ah=ag.s=af+aj,ad=ah-af,ab=ah-ad;ag.t=af-ab+(aj-ad)}function lg(ab,ad){ab&&l8.hasOwnProperty(ab.type)&&l8[ab.type](ab,ad)}function nm(af,aj,ag){var ah,ad=-1,ab=af.length-ag;for(aj.lineStart();++ad<ab;){ah=af[ad],aj.point(ah[0],ah[1],ah[2])}aj.lineEnd()}function ai(af,ad){var ag=-1,ab=af.length;for(ad.polygonStart();++ag<ab;){nm(af[ag],ad,1)}ad.polygonEnd()}function a1(){function af(an,av){an*=kN,av=av*kN/2+lX/4;var ay=an-ah,ap=ay>=0?1:-1,aw=ap*ay,ax=Math.cos(av),aq=Math.sin(av),am=ab*aq,ak=ad*ax+am*Math.cos(aw),al=am*ap*Math.sin(aw);jz.add(Math.atan2(al,ak)),ah=an,ad=ax,ab=aq}var aj,ag,ah,ad,ab;kW.point=function(ak,al){kW.point=af,ah=(aj=ak)*kN,ad=Math.cos(al=(ag=al)*kN/2+lX/4),ab=Math.sin(al)},kW.lineEnd=function(){af(aj,ag)}}function nr(af){var ad=af[0],ag=af[1],ab=Math.cos(ag);return[ab*Math.cos(ad),ab*Math.sin(ad),Math.sin(ag)]}function ma(ab,ad){return ab[0]*ad[0]+ab[1]*ad[1]+ab[2]*ad[2]}function km(ab,ad){return[ab[1]*ad[2]-ab[2]*ad[1],ab[2]*ad[0]-ab[0]*ad[2],ab[0]*ad[1]-ab[1]*ad[0]]}function jR(ab,ad){ab[0]+=ad[0],ab[1]+=ad[1],ab[2]+=ad[2]}function kY(ab,ad){return[ab[0]*ad,ab[1]*ad,ab[2]*ad]}function mn(ab){var ad=Math.sqrt(ab[0]*ab[0]+ab[1]*ab[1]+ab[2]*ab[2]);ab[0]/=ad,ab[1]/=ad,ab[2]/=ad}function b(ab){return[Math.atan2(ab[1],ab[0]),ha(ab[2])]}function jY(ab,ad){return ni(ab[0]-ad[0])<oo&&ni(ab[1]-ad[1])<oo}function mK(af,ad){af*=kN;var ab=Math.cos(ad*=kN);ec(ab*Math.cos(af),ab*Math.sin(af),Math.sin(ad))}function ec(af,ad,ab){++mh,jW+=(af-jW)/mh,mI+=(ad-mI)/mh,ds+=(ab-ds)/mh}function oN(){function af(an,al){an*=kN;var ak=Math.cos(al*=kN),ah=ak*Math.cos(an),am=ak*Math.sin(an),ap=Math.sin(al),aj=Math.atan2(Math.sqrt((aj=ag*ap-ab*am)*aj+(aj=ab*ah-ad*ap)*aj+(aj=ad*am-ag*ah)*aj),ad*ah+ag*am+ab*ap);om+=aj,ow+=aj*(ad+(ad=ah)),lt+=aj*(ag+(ag=am)),pQ+=aj*(ab+(ab=ap)),ec(ad,ag,ab)}var ad,ag,ab;kQ.point=function(ak,aj){ak*=kN;var ah=Math.cos(aj*=kN);ad=ah*Math.cos(ak),ag=ah*Math.sin(ak),ab=Math.sin(aj),kQ.point=af,ec(ad,ag,ab)}}function lx(){kQ.point=mK}function pR(){function af(an,ak){an*=kN;var ax=Math.cos(ak*=kN),av=ax*Math.cos(an),ap=ax*Math.sin(an),aq=Math.sin(ak),aB=ad*aq-ab*ap,al=ab*av-ah*aq,ay=ah*ap-ad*av,aA=Math.sqrt(aB*aB+al*al+ay*ay),az=ah*av+ad*ap+ab*aq,aw=aA&&-go(az)/aA,am=Math.atan2(aA,az);K+=aw*aB,pu+=aw*al,lZ+=aw*ay,om+=am,ow+=am*(ah+(ah=av)),lt+=am*(ad+(ad=ap)),pQ+=am*(ab+(ab=aq)),ec(ah,ad,ab)}var aj,ag,ah,ad,ab;kQ.point=function(al,am){aj=al,ag=am,kQ.point=af,al*=kN;var ak=Math.cos(am*=kN);ah=ak*Math.cos(al),ad=ak*Math.sin(al),ab=Math.sin(am),ec(ah,ad,ab)},kQ.lineEnd=function(){af(aj,ag),kQ.lineEnd=lx,kQ.point=mK}}function iu(){return !0}function pB(aj,ax,ah,ap,ab){var av=[],ak=[];if(aj.forEach(function(aA){if(!((aB=aA.length-1)<=0)){var aB,aD=aA[0],aE=aA[aB];if(jY(aD,aE)){ab.lineStart();for(var aC=0;aB>aC;++aC){ab.point((aD=aA[aC])[0],aD[1])}return ab.lineEnd(),void 0}var ay=new kT(aD,aA,null,!0),az=new kT(aD,null,ay,!1);ay.o=az,av.push(ay),ak.push(az),ay=new kT(aE,aA,null,!1),az=new kT(aE,null,ay,!0),ay.o=az,av.push(ay),ak.push(az)}}),ak.sort(ax),l1(av),l1(ak),av.length){for(var af=0,ag=ah,aw=ak.length;aw>af;++af){ak[af].e=ag=!ag}for(var ad,am,aq=av[0];;){for(var an=aq,al=!0;an.v;){if((an=an.n)===aq){return}}ad=an.z,ab.lineStart();do{if(an.v=an.o.v=!0,an.e){if(al){for(var af=0,aw=ad.length;aw>af;++af){ab.point((am=ad[af])[0],am[1])}}else{ap(an.x,an.n.x,1,ab)}an=an.n}else{if(al){ad=an.p.z;for(var af=ad.length-1;af>=0;--af){ab.point((am=ad[af])[0],am[1])}}else{ap(an.x,an.p.x,-1,ab)}an=an.p}an=an.o,ad=an.z,al=!al}while(!an.v);ab.lineEnd()}}}function l1(af){if(ab=af.length){for(var ab,ag,ah=0,ad=af[0];++ah<ab;){ad.n=ag=af[ah],ag.p=ad,ad=ag}ad.n=ag=af[0],ag.p=ad}}function kT(af,ad,ag,ab){this.x=af,this.z=ad,this.o=ag,this.e=ab,this.v=!1,this.n=this.p=null}function pk(af,ad,ag,ab){return function(aw,ay){function al(aG,aE){var aF=aw(aG,aE);af(aG=aF[0],aE=aF[1])&&ay.point(aG,aE)}function az(aE,aG){var aF=aw(aE,aG);aj.point(aF[0],aF[1])}function aD(){aB.point=az,aj.lineStart()}function av(){aB.point=al,aj.lineEnd()}function aC(aE,aG){ax.push([aE,aG]);var aF=aw(aE,aG);ak.point(aF[0],aF[1])}function am(){ak.lineStart(),ax=[]}function aq(){aC(ax[0][0],ax[0][1]),ak.lineEnd();var aG,aH=ak.clean(),aE=aA.buffer(),aF=aE.length;if(ax.pop(),ap.push(ax),ax=null,aF){if(1&aH){aG=aE[0];var aI,aF=aG.length-1,aJ=-1;for(ay.lineStart();++aJ<aF;){ay.point((aI=aG[aJ])[0],aI[1])}return ay.lineEnd(),void 0}aF>1&&2&aH&&aE.push(aE.pop().concat(aE.shift())),an.push(aE.filter(mO))}}var an,ap,ax,aj=ad(ay),ah=aw.invert(ab[0],ab[1]),aB={point:al,lineStart:aD,lineEnd:av,polygonStart:function(){aB.point=aC,aB.lineStart=am,aB.lineEnd=aq,an=[],ap=[],ay.polygonStart()},polygonEnd:function(){aB.point=al,aB.lineStart=aD,aB.lineEnd=av,an=oS.merge(an);var aE=fi(ah,ap);an.length?pB(an,kR,aE,ag,ay):aE&&(ay.lineStart(),ag(null,null,1,ay),ay.lineEnd()),ay.polygonEnd(),an=ap=null},sphere:function(){ay.polygonStart(),ay.lineStart(),ag(null,null,1,ay),ay.lineEnd(),ay.polygonEnd()}},aA=o6(),ak=ad(aA);return aB}}function mO(ab){return ab.length>1}function o6(){var ab,ad=[];return{lineStart:function(){ad.push(ab=[])},point:function(ag,af){ab.push([ag,af])},lineEnd:a6,buffer:function(){var af=ad;return ad=[],ab=null,af},rejoin:function(){ad.length>1&&ad.push(ad.pop().concat(ad.shift()))}}}function kR(ab,ad){return((ab=ab.x)[0]<0?ab[1]-g-oo:g-ab[1])-((ad=ad.x)[0]<0?ad[1]-g-oo:g-ad[1])}function fi(am,az){var ab=am[0],av=am[1],aB=[Math.sin(ab),-Math.cos(ab),0],ah=0,an=0;jz.reset();for(var aI=0,aK=az.length;aK>aI;++aI){var ay=az[aI],ak=ay.length;if(ak){for(var ad=ay[0],ag=ad[0],af=ad[1]/2+lX/4,ap=Math.sin(af),aC=Math.cos(af),aL=1;;){aL===ak&&(aL=0),am=ay[aL];var al=am[0],ax=am[1]/2+lX/4,aF=Math.sin(ax),aE=Math.cos(ax),aG=al-ag,aJ=aG>=0?1:-1,aD=aJ*aG,aH=aD>lX,aj=ap*aF;if(jz.add(Math.atan2(aj*aJ*Math.sin(aD),aC*aE+aj*Math.cos(aD))),ah+=aH?aG+aJ*kO:aG,aH^ag>=ab^al>=ab){var aA=km(nr(ad),nr(am));mn(aA);var aq=km(aB,aA);mn(aq);var aw=(aH^aG>=0?-1:1)*ha(aq[2]);(av>aw||av===aw&&(aA[0]||aA[1]))&&(an+=aH^aG>=0?1:-1)}if(!aL++){break}ag=al,ap=aF,aC=aE,ad=am}}}return(-oo>ah||oo>ah&&0>jz)^1&an}function a9(af){var ab,ag=0/0,ah=0/0,ad=0/0;return{lineStart:function(){af.lineStart(),ab=1},point:function(al,ak){var am=al>0?lX:-lX,aj=ni(al-ag);ni(aj-lX)<oo?(af.point(ag,ah=(ah+ak)/2>0?g:-g),af.point(ad,ah),af.lineEnd(),af.lineStart(),af.point(am,ah),af.point(al,ah),ab=0):ad!==am&&aj>=lX&&(ni(ag-ad)<oo&&(ag-=ad*oo),ni(al-am)<oo&&(al-=am*oo),ah=oP(ag,ah,al,ak),af.point(ad,ah),af.lineEnd(),af.lineStart(),af.point(am,ah),ab=0),af.point(ag=al,ah=ak),ad=am},lineEnd:function(){af.lineEnd(),ag=ah=0/0},clean:function(){return 2-ab}}}function oP(af,ak,ah,aj){var ad,ab,ag=Math.sin(af-ah);return ni(ag)>oo?Math.atan((Math.sin(ak)*(ab=Math.cos(aj))*Math.sin(ah)-Math.sin(aj)*(ad=Math.cos(ak))*Math.sin(af))/(ad*ab*ag)):(ak+aj)/2}function mE(af,aj,ag,ah){var ad;if(null==af){ad=ag*g,ah.point(-lX,ad),ah.point(0,ad),ah.point(lX,ad),ah.point(lX,0),ah.point(lX,-ad),ah.point(0,-ad),ah.point(-lX,-ad),ah.point(-lX,0),ah.point(-lX,ad)}else{if(ni(af[0]-aj[0])>oo){var ab=af[0]<aj[0]?lX:-lX;ad=ag*ab/2,ah.point(-ab,ad),ah.point(0,ad),ah.point(ab,ad)}else{ah.point(aj[0],aj[1])}}}function kJ(ak){function ab(ap,an){return Math.cos(ap)*Math.cos(an)>aj}function ah(ap){var av,ax,aq,aw,an;return{lineStart:function(){aw=aq=!1,an=1},point:function(aB,az){var aE,ay=[aB,az],aA=ab(aB,az),aD=al?aA?0:ad(aB,az):aA?ad(aB+(0>aB?lX:-lX),az):0;if(!av&&(aw=aq=aA)&&ap.lineStart(),aA!==aq&&(aE=am(av,ay),(jY(av,aE)||jY(ay,aE))&&(ay[0]+=oo,ay[1]+=oo,aA=ab(ay[0],ay[1]))),aA!==aq){an=0,aA?(ap.lineStart(),aE=am(ay,av),ap.point(aE[0],aE[1])):(aE=am(av,ay),ap.point(aE[0],aE[1]),ap.lineEnd()),av=aE}else{if(af&&av&&al^aA){var aC;aD&ax||!(aC=am(ay,av,!0))||(an=0,al?(ap.lineStart(),ap.point(aC[0][0],aC[0][1]),ap.point(aC[1][0],aC[1][1]),ap.lineEnd()):(ap.point(aC[1][0],aC[1][1]),ap.lineEnd(),ap.lineStart(),ap.point(aC[0][0],aC[0][1])))}}!aA||av&&jY(av,ay)||ap.point(ay[0],ay[1]),av=ay,aq=aA,ax=aD},lineEnd:function(){aq&&ap.lineEnd(),av=null},clean:function(){return an|(aw&&aq)<<1}}}function am(aq,aD,aR){var ay=nr(aq),aG=nr(aD),av=[1,0,0],aC=km(ay,aG),aO=ma(aC,aC),aB=aC[0],an=aO-aB*aB;if(!an){return !aR&&aq}var aS=aj*aO/an,aU=-aj*aB/an,aT=km(av,aC),aw=kY(av,aS),aH=kY(aC,aU);jR(aw,aH);var aQ=aT,ap=ma(aw,aQ),aK=ma(aQ,aQ),aJ=ap*ap-aK*(ma(aw,aw)-1);if(!(0>aJ)){var aN=Math.sqrt(aJ),aA=kY(aQ,(-ap-aN)/aK);if(jR(aA,aw),aA=b(aA),!aR){return aA}var aM,aI=aq[0],aF=aD[0],aV=aq[1],aE=aD[1];aI>aF&&(aM=aI,aI=aF,aF=aM);var ax=aF-aI,az=ni(ax-lX)<oo,aP=az||oo>ax;if(!az&&aV>aE&&(aM=aV,aV=aE,aE=aM),aP?az?aV+aE>0^aA[1]<(ni(aA[0]-aI)<oo?aV:aE):aV<=aA[1]&&aA[1]<=aE:ax>lX^(aI<=aA[0]&&aA[0]<=aF)){var aL=kY(aQ,(-ap+aN)/aK);return jR(aL,aw),[aA,b(aL)]}}}function ad(av,ap){var aq=al?ak:lX-ak,an=0;return -aq>av?an|=1:av>aq&&(an|=2),-aq>ap?an|=4:ap>aq&&(an|=8),an}var aj=Math.cos(ak),al=aj>0,af=ni(aj)>oo,ag=ix(ak,6*kN);return pk(ab,ah,ag,al?[0,-ak]:[-lX,ak-lX])}function n9(af,ad,ag,ab){return function(ak){var aj,ap=ak.a,an=ak.b,av=ap.x,ah=ap.y,al=an.x,aw=an.y,ay=0,ax=1,aq=al-av,am=aw-ah;if(aj=af-av,aq||!(aj>0)){if(aj/=aq,0>aq){if(ay>aj){return}ax>aj&&(ax=aj)}else{if(aq>0){if(aj>ax){return}aj>ay&&(ay=aj)}}if(aj=ag-av,aq||!(0>aj)){if(aj/=aq,0>aq){if(aj>ax){return}aj>ay&&(ay=aj)}else{if(aq>0){if(ay>aj){return}ax>aj&&(ax=aj)}}if(aj=ad-ah,am||!(aj>0)){if(aj/=am,0>am){if(ay>aj){return}ax>aj&&(ax=aj)}else{if(am>0){if(aj>ax){return}aj>ay&&(ay=aj)}}if(aj=ab-ah,am||!(0>aj)){if(aj/=am,0>am){if(aj>ax){return}aj>ay&&(ay=aj)}else{if(am>0){if(ay>aj){return}ax>aj&&(ax=aj)}}return ay>0&&(ak.a={x:av+ay*aq,y:ah+ay*am}),1>ax&&(ak.b={x:av+ax*aq,y:ah+ax*am}),ak}}}}}}function k5(af,ak,ah,aj){function ad(al,am){return ni(al[0]-af)<oo?am>0?0:3:ni(al[0]-ah)<oo?am>0?2:1:ni(al[1]-ak)<oo?am>0?1:0:am>0?3:2}function ab(al,am){return ag(al.x,am.x)}function ag(an,am){var ap=ad(an,1),al=ad(am,1);return ap!==al?ap-al:0===ap?am[1]-an[1]:1===ap?an[0]-am[0]:2===ap?an[1]-am[1]:am[0]-an[0]}return function(am){function ap(aV){for(var aS=0,aT=aq.length,aQ=aV[1],aW=0;aT>aW;++aW){for(var aU,aO=1,aN=aq[aW],aP=aN.length,aR=aN[0];aP>aO;++aO){aU=aN[aO],aR[1]<=aQ?aU[1]>aQ&&hi(aR,aU,aV)>0&&++aS:aU[1]<=aQ&&hi(aR,aU,aV)<0&&--aS,aR=aU}}return 0!==aS}function aH(aQ,aR,aO,aP){var aN=0,aS=0;if(null==aQ||(aN=ad(aQ,aO))!==(aS=ad(aR,aO))||ag(aQ,aR)<0^aO>0){do{aP.point(0===aN||3===aN?af:ah,aN>1?aj:ak)}while((aN=(aN+aO+4)%4)!==aS)}else{aP.point(aR[0],aR[1])}}function aA(aN,aO){return aN>=af&&ah>=aN&&aO>=ak&&aj>=aO}function av(aO,aN){aA(aO,aN)&&am.point(aO,aN)}function ax(){aL.point=aC,aq&&aq.push(aB=[]),aM=!0,aF=!1,al=an=0/0}function aw(){az&&(aC(aI,aG),aK&&aF&&aD.rejoin(),az.push(aD.buffer())),aL.point=av,aF&&am.lineEnd()}function aC(aO,aN){aO=Math.max(-or,Math.min(or,aO)),aN=Math.max(-or,Math.min(or,aN));var aP=aA(aO,aN);if(aq&&aB.push([aO,aN]),aM){aI=aO,aG=aN,aK=aP,aM=!1,aP&&(am.lineStart(),am.point(aO,aN))}else{if(aP&&aF){am.point(aO,aN)}else{var aQ={a:{x:al,y:an},b:{x:aO,y:aN}};aE(aQ)?(aF||(am.lineStart(),am.point(aQ.a.x,aQ.a.y)),am.point(aQ.b.x,aQ.b.y),aP||am.lineEnd(),ay=!1):aP&&(am.lineStart(),am.point(aO,aN),ay=!1)}}al=aO,an=aN,aF=aP}var az,aq,aB,aI,aG,aK,al,an,aF,aM,ay,aJ=am,aD=o6(),aE=n9(af,ak,ah,aj),aL={point:av,lineStart:ax,lineEnd:aw,polygonStart:function(){am=aD,az=[],aq=[],ay=!0},polygonEnd:function(){am=aJ,az=oS.merge(az);var aP=ap([af,aj]),aO=ay&&aP,aN=az.length;(aO||aN)&&(am.polygonStart(),aO&&(am.lineStart(),aH(null,null,1,am),am.lineEnd()),aN&&pB(az,ab,aP,aH,am),am.polygonEnd()),az=aq=aB=null}};return aL}}function lI(af,ad){function ab(ag,ah){return ag=af(ag,ah),ad(ag[0],ag[1])}return af.invert&&ad.invert&&(ab.invert=function(ag,ah){return ag=ad.invert(ag,ah),ag&&af.invert(ag[0],ag[1])}),ab}function lQ(af){var ab=0,ag=lX/3,ah=mT(af),ad=ah(ab,ag);return ad.parallels=function(aj){return arguments.length?ah(ab=aj[0]*lX/180,ag=aj[1]*lX/180):[180*(ab/lX),180*(ag/lX)]},ad}function V(af,ak){function ah(an,am){var al=Math.sqrt(ab-2*ad*Math.sin(am))/ad;return[al*Math.sin(an*=ad),ag-al*Math.cos(an)]}var aj=Math.sin(af),ad=(aj+Math.sin(ak))/2,ab=1+aj*(2*ad-aj),ag=Math.sqrt(ab)/ad;return ah.invert=function(an,am){var al=ag-am;return[Math.atan2(an,al)/ad,ha((ab-(an*an+al*al)*ad*ad)/(2*ad))]},ah}function pM(){function af(aj,ak){kP+=ad*aj-ah*ak,ah=aj,ad=ak}var ab,ag,ah,ad;kI.point=function(ak,aj){kI.point=af,ab=ah=ak,ag=ad=aj},kI.lineEnd=function(){af(ab,ag)}}function js(ab,ad){fa>ab&&(fa=ab),ab>oM&&(oM=ab),a4>ad&&(a4=ad),ad>mC&&(mC=ad)}function nZ(){function ad(an,am){af.push("M",an,",",am,ak)}function aj(an,am){af.push("M",an,",",am),ab.point=ag}function ag(an,am){af.push("L",an,",",am)}function ah(){ab.point=ad}function al(){af.push("Z")}var ak=B(4.5),af=[],ab={point:ad,lineStart:function(){ab.point=aj},lineEnd:ah,polygonStart:function(){ab.lineEnd=al},polygonEnd:function(){ab.lineEnd=ah,ab.point=ad},pointRadius:function(am){return ak=B(am),ab},result:function(){if(af.length){var am=af.join("");return af=[],am}}};return ab}function B(ab){return"m0,"+ab+"a"+ab+","+ab+" 0 1,1 0,"+-2*ab+"a"+ab+","+ab+" 0 1,1 0,"+2*ab+"z"}function m9(ab,ad){jW+=ab,mI+=ad,++ds}function nc(){function af(ag,aj){var al=ag-ad,ak=aj-ab,ah=Math.sqrt(al*al+ak*ak);ow+=ah*(ad+ag)/2,lt+=ah*(ab+aj)/2,pQ+=ah,m9(ad=ag,ab=aj)}var ad,ab;mm.point=function(ag,ah){mm.point=af,m9(ad=ag,ab=ah)}}function oG(){mm.point=m9}function n0(){function af(an,al){var ak=an-ah,am=al-ad,aj=Math.sqrt(ak*ak+am*am);ow+=aj*(ah+an)/2,lt+=aj*(ad+al)/2,pQ+=aj,aj=ad*an-ah*al,K+=aj*(ah+an),pu+=aj*(ad+al),lZ+=3*aj,m9(ah=an,ad=al)}var ab,ag,ah,ad;mm.point=function(ak,aj){mm.point=af,m9(ab=ah=ak,ag=ad=aj)},mm.lineEnd=function(){af(ab,ag)}}function ou(ad){function aj(am,an){ad.moveTo(am,an),ad.arc(am,an,af,0,kO)}function ag(am,an){ad.moveTo(am,an),ab.point=ah}function ah(am,an){ad.lineTo(am,an)}function al(){ab.point=aj}function ak(){ad.closePath()}var af=4.5,ab={point:aj,lineStart:function(){ab.point=ag},lineEnd:al,polygonStart:function(){ab.lineEnd=ak},polygonEnd:function(){ab.lineEnd=al,ab.point=aj},pointRadius:function(am){return af=am,ab},result:a6};return ab}function l2(ad){function aj(am){return(ab?ah:ag)(am)}function ag(am){return jS(am,function(an,ap){an=ad(an,ap),am.point(an[0],an[1])})}function ah(aI){function av(aN,aO){aN=ad(aN,aO),aI.point(aN[0],aN[1])}function aG(){az=0/0,aM.point=aA,aI.lineStart()}function aA(aO,aP){var aQ=nr([aO,aP]),aN=ad(aO,aP);al(az,aJ,aF,am,an,aL,az=aN[0],aJ=aN[1],aF=aO,am=aQ[0],an=aQ[1],aL=aQ[2],ab,aI),aI.point(az,aJ)}function aD(){aM.point=av,aI.lineEnd()}function ap(){aG(),aM.point=aH,aM.lineEnd=aB}function aH(aN,aO){aA(aw=aN,ay=aO),ax=az,aE=aJ,aK=am,aq=an,aC=aL,aM.point=aA}function aB(){al(az,aJ,aF,am,an,aL,ax,aE,aw,aK,aq,aC,ab,aI),aM.lineEnd=aD,aD()}var aw,ay,ax,aE,aK,aq,aC,aF,az,aJ,am,an,aL,aM={point:av,lineStart:aG,lineEnd:aD,polygonStart:function(){aI.polygonStart(),aM.lineStart=ap},polygonEnd:function(){aI.polygonEnd(),aM.lineStart=aG}};return aM}function al(aB,aR,ay,aL,aP,aA,ap,aS,am,aT,av,aD,aQ,aq){var aG=ap-aB,aF=aS-aR,aN=aG*aG+aF*aF;if(aN>4*ak&&aQ--){var aJ=aL+aT,aM=aP+av,aE=aA+aD,aO=Math.sqrt(aJ*aJ+aM*aM+aE*aE),an=Math.asin(aE/=aO),aC=ni(ni(aE)-1)<oo||ni(ay-am)<oo?(ay+am)/2:Math.atan2(aM,aJ),aw=ad(aC,an),az=aw[0],aI=aw[1],aK=az-aB,aH=aI-aR,ax=aF*aK-aG*aH;(ax*ax/aN>ak||ni((aG*aK+aF*aH)/aN-0.5)>0.3||af>aL*aT+aP*av+aA*aD)&&(al(aB,aR,ay,aL,aP,aA,az,aI,aC,aJ/=aO,aM/=aO,aE,aQ,aq),aq.point(az,aI),al(az,aI,aC,aJ,aM,aE,ap,aS,am,aT,av,aD,aQ,aq))}}var ak=0.5,af=Math.cos(30*kN),ab=16;return aj.precision=function(am){return arguments.length?(ab=(ak=am*am)>0&&16,aj):Math.sqrt(ak)},aj}function ht(ab){var ad=l2(function(ag,af){return ab([ag*eo,af*eo])});return function(af){return oZ(ad(af))}}function r(ab){this.stream=ab}function jS(ab,ad){return{point:ad,sphere:function(){ab.sphere()},lineStart:function(){ab.lineStart()},lineEnd:function(){ab.lineEnd()},polygonStart:function(){ab.polygonStart()},polygonEnd:function(){ab.polygonEnd()}}}function lK(ab){return mT(function(){return ab})()}function mT(aw){function aB(aH){return aH=ad(aH[0]*kN,aH[1]*kN),[aH[0]*am+ag,aA-aH[1]*am]}function aj(aH){return aH=ad.invert((aH[0]-ag)/am,(aA-aH[1])/am),aH&&[aH[0]*eo,aH[1]*eo]}function az(){ad=lI(ax=nV(av,aD,ap),an);var aH=an(aE,ah);return ag=al-aH[0]*am,aA=ay+aH[1]*am,aC()}function aC(){return aq&&(aq.valid=!1,aq=null),aB}var an,ax,ad,ag,aA,aq,ak=l2(function(aH,aI){return aH=an(aH,aI),[aH[0]*am+ag,aA-aH[1]*am]}),am=150,al=480,ay=250,aE=0,ah=0,av=0,aD=0,ap=0,aG=j,ab=ge,af=null,aF=null;return aB.stream=function(aH){return aq&&(aq.valid=!1),aq=oZ(aG(ax,ak(ab(aH)))),aq.valid=!0,aq},aB.clipAngle=function(aH){return arguments.length?(aG=null==aH?(af=aH,j):kJ((af=+aH)*kN),aC()):af},aB.clipExtent=function(aH){return arguments.length?(aF=aH,ab=aH?k5(aH[0][0],aH[0][1],aH[1][0],aH[1][1]):ge,aC()):aF},aB.scale=function(aH){return arguments.length?(am=+aH,az()):am},aB.translate=function(aH){return arguments.length?(al=+aH[0],ay=+aH[1],az()):[al,ay]},aB.center=function(aH){return arguments.length?(aE=aH[0]%360*kN,ah=aH[1]%360*kN,az()):[aE*eo,ah*eo]},aB.rotate=function(aH){return arguments.length?(av=aH[0]%360*kN,aD=aH[1]%360*kN,ap=aH.length>2?aH[2]%360*kN:0,az()):[av*eo,aD*eo,ap*eo]},oS.rebind(aB,ak,"precision"),function(){return an=aw.apply(this,arguments),aB.invert=an.invert&&aj,az()}}function oZ(ab){return jS(ab,function(ad,af){ab.point(ad*kN,af*kN)})}function li(ab,ad){return[ab,ad]}function oq(ab,ad){return[ab>lX?ab-kO:-lX>ab?ab+kO:ab,ad]}function nV(af,ad,ab){return af?ad||ab?lI(ny(af),br(ad,ab)):ny(af):ad||ab?br(ad,ab):oq}function lz(ab){return function(ad,af){return ad+=ab,[ad>lX?ad-kO:-lX>ad?ad+kO:ad,af]}}function ny(ab){var ad=lz(ab);return ad.invert=lz(-ab),ad}function br(af,ak){function ah(an,aw){var aq=Math.cos(aw),al=Math.cos(an)*aq,ap=Math.sin(an)*aq,av=Math.sin(aw),am=av*aj+al*ad;return[Math.atan2(ap*ab-am*ag,al*aj-av*ad),ha(am*ab+ap*ag)]}var aj=Math.cos(af),ad=Math.sin(af),ab=Math.cos(ak),ag=Math.sin(ak);return ah.invert=function(an,aw){var aq=Math.cos(aw),al=Math.cos(an)*aq,ap=Math.sin(an)*aq,av=Math.sin(aw),am=av*ab-ap*ag;return[Math.atan2(ap*ab+av*ag,al*aj+am*ad),ha(am*aj-al*ad)]},ah}function ix(af,ad){var ag=Math.cos(af),ab=Math.sin(af);return function(ak,aj,ap,al){var an=ap*ad;null!=ak?(ak=pz(ag,ak),aj=pz(ag,aj),(ap>0?aj>ak:ak>aj)&&(ak+=ap*kO)):(ak=af+ap*kO,aj=af-0.5*an);for(var ah,am=ak;ap>0?am>aj:aj>am;am-=an){al.point((ah=b([ag,-ab*Math.cos(am),-ab*Math.sin(am)]))[0],ah[1])}}}function pz(af,ad){var ag=nr(ad);ag[0]-=af,mn(ag);var ab=go(-ag[1]);return((-ag[2]<0?-ab:ab)+2*Math.PI-oo)%(2*Math.PI)}function mt(af,ad,ag){var ab=oS.range(af,ad-oo,ag).concat(ad);return function(ah){return ab.map(function(aj){return[ah,aj]})}}function kG(af,ad,ag){var ab=oS.range(af,ad-oo,ag).concat(ad);return function(ah){return ab.map(function(aj){return[aj,ah]})}}function mb(ab){return ab.source}function ir(ab){return ab.target}function mD(aj,ax,ah,ap){var ab=Math.cos(ax),av=Math.sin(ax),ak=Math.cos(ap),af=Math.sin(ap),ag=ab*Math.cos(aj),aw=ab*Math.sin(aj),ad=ak*Math.cos(ah),am=ak*Math.sin(ah),aq=2*Math.asin(Math.sqrt(je(ap-ax)+ab*ak*je(ah-aj))),an=1/Math.sin(aq),al=aq?function(aC){var aD=Math.sin(aC*=aq)*an,aA=Math.sin(aq-aC)*an,aB=aA*ag+aD*ad,ay=aA*aw+aD*am,az=aA*av+aD*af;return[Math.atan2(ay,aB)*eo,Math.atan2(az,Math.sqrt(aB*aB+ay*ay))*eo]}:function(){return[aj*eo,ax*eo]};return al.distance=aq,al}function h(){function af(an,al){var ak=Math.sin(al*=kN),aj=Math.cos(al),am=ni((an*=kN)-ad),ah=Math.cos(am);lE+=Math.atan2(Math.sqrt((am=aj*Math.sin(am))*am+(am=ab*ak-ag*aj*ah)*am),ag*ak+ab*aj*ah),ad=an,ag=ak,ab=aj}var ad,ag,ab;lO.point=function(aj,ah){ad=aj*kN,ag=Math.sin(ah*=kN),ab=Math.cos(ah),lO.point=af},lO.lineEnd=function(){lO.point=lO.lineEnd=a6}}function ci(af,ad){function ab(aj,ag){var ah=Math.cos(aj),al=Math.cos(ag),ak=af(ah*al);return[ak*al*Math.sin(aj),ak*Math.sin(ag)]}return ab.invert=function(ag,aj){var ak=Math.sqrt(ag*ag+aj*aj),am=ad(ak),al=Math.sin(am),ah=Math.cos(am);return[Math.atan2(ag*al,ak*ah),Math.asin(ak&&aj*al/ak)]},ab}function ls(af,ak){function ah(an,am){var al=ni(ni(am)-g)<oo?0:ag/Math.pow(ad(am),ab);return[al*Math.sin(ab*an),ag-al*Math.cos(ab*an)]}var aj=Math.cos(af),ad=function(al){return Math.tan(lX/4+al/2)},ab=af===ak?Math.sin(af):Math.log(aj/Math.cos(ak))/Math.log(ad(ak)/ad(af)),ag=aj*Math.pow(ad(af),ab)/ab;return ab?(ah.invert=function(an,am){var ap=ag-am,al=jb(ab)*Math.sqrt(an*an+ap*ap);return[Math.atan2(an,ap)/ab,2*Math.atan(Math.pow(ag/al,1/ab))-g]},ah):pe}function P(af,aj){function ag(ak,am){var al=ab-am;return[al*Math.sin(ad*ak),ab-al*Math.cos(ad*ak)]}var ah=Math.cos(af),ad=af===aj?Math.sin(af):(ah-Math.cos(aj))/(aj-af),ab=ah/ad+af;return ni(ad)<oo?li:(ag.invert=function(ak,am){var al=ab-am;return[Math.atan2(ak,al)/ad,ab-jb(ad)*Math.sqrt(ak*ak+al*al)]},ag)}function pe(ab,ad){return[ab,Math.log(Math.tan(lX/4+ad/2))]}function kt(af){var aj,ag=lK(af),ah=ag.scale,ad=ag.translate,ab=ag.clipExtent;return ag.scale=function(){var ak=ah.apply(ag,arguments);return ak===ag?aj?ag.clipExtent(null):ag:ak},ag.translate=function(){var ak=ad.apply(ag,arguments);return ak===ag?aj?ag.clipExtent(null):ag:ak},ag.clipExtent=function(an){var al=ab.apply(ag,arguments);if(al===ag){if(aj=null==an){var am=lX*ah(),ak=ad();ab([[ak[0]-am,ak[1]-am],[ak[0]+am,ak[1]+am]])}}else{aj&&(al=null)}return al},ag.clipExtent(null)}function o0(ab,ad){return[Math.log(Math.tan(lX/4+ad/2)),-ab]}function fo(ab){return ab[0]}function pI(ab){return ab[1]}function mi(af){for(var ab=af.length,ag=[0,1],ah=2,ad=2;ab>ad;ad++){for(;ah>1&&hi(af[ag[ah-2]],af[ag[ah-1]],af[ad])<=0;){--ah}ag[ah++]=ad}return ag.slice(0,ah)}function m2(ab,ad){return ab[0]-ad[0]||ab[1]-ad[1]}function ps(af,ad,ab){return(ab[0]-ad[0])*(af[1]-ad[1])<(ab[1]-ad[1])*(af[0]-ad[0])}function nj(ak,ag,av,ap){var am=ak[0],ah=av[0],al=ag[0]-am,an=ap[0]-ah,aq=ak[1],af=av[1],aj=ag[1]-aq,ab=ap[1]-af,ad=(an*(aq-af)-ab*(am-ah))/(ab*al-an*aj);return[am+ad*al,aq+ad*aj]}function pf(af){var ad=af[0],ab=af[af.length-1];return !(ad[0]-ab[0]||ad[1]-ab[1])}function k2(){kp(this),this.edge=this.site=this.circle=null}function he(ab){var ad=hs.pop()||new k2();return ad.site=ab,ad}function w(ab){ka(ab),nQ.remove(ab),hs.push(ab),kp(ab)}function nM(aj){var am=aj.circle,ad=am.x,an=am.cy,ap={x:ad,y:an},ag=aj.P,ak=aj.N,aq=[aj];w(aj);for(var ab=ag;ab.circle&&ni(ad-ab.circle.x)<oo&&ni(an-ab.circle.cy)<oo;){ag=ab.P,aq.unshift(ab),w(ab),ab=ag}aq.unshift(ab),ka(ab);for(var al=ak;al.circle&&ni(ad-al.circle.x)<oo&&ni(an-al.circle.cy)<oo;){ak=al.N,aq.push(al),w(al),al=ak}aq.push(al),ka(al);var ah,af=aq.length;for(ah=1;af>ah;++ah){al=aq[ah],ab=aq[ah-1],m7(al.edge,ab.site,al.site,ap)}ab=aq[0],al=aq[af-1],al.edge=ns(ab.site,al.site,null,ap),ov(ab),ov(al)}function k6(av){for(var aB,ag,ay,ak,am=av.x,aw=av.y,ab=nQ._;ab;){if(ay=k0(ab,aw)-am,ay>oo){ab=ab.L}else{if(ak=am-ok(ab,aw),!(ak>oo)){ay>-oo?(aB=ab.P,ag=ab):ak>-oo?(aB=ab,ag=ab.N):aB=ag=ab;break}if(!ab.R){aB=ab;break}ab=ab.R}}var ad=he(av);if(nQ.insert(aB,ad),aB||ag){if(aB===ag){return ka(aB),ag=he(aB.site),nQ.insert(ad,ag),ad.edge=ag.edge=ns(aB.site,ad.site),ov(aB),ov(ag),void 0}if(!ag){return ad.edge=ns(aB.site,ad.site),void 0}ka(aB),ka(ag);var aA=aB.site,an=aA.x,ah=aA.y,al=av.x-an,aj=av.y-ah,ax=ag.site,ap=ax.x-an,af=ax.y-ah,aq=2*(al*af-aj*ap),aC=al*al+aj*aj,az=ap*ap+af*af,aD={x:(af*aC-aj*az)/aq+an,y:(al*az-ap*aC)/aq+ah};m7(ag.edge,aA,ax,aD),ad.edge=ns(aA,av,null,aD),ag.edge=ns(av,ax,null,aD),ov(aB),ov(ag)}}function k0(ak,ag){var av=ak.site,ap=av.x,am=av.y,ah=am-ag;if(!ah){return ap}var al=ak.P;if(!al){return -1/0}av=al.site;var an=av.x,aq=av.y,af=aq-ag;if(!af){return an}var aj=an-ap,ab=1/ah-1/af,ad=aj/af;return ab?(-ad+Math.sqrt(ad*ad-2*ab*(aj*aj/(-2*af)-aq+af/2+am-ah/2)))/ab+ap:(ap+an)/2}function ok(af,ad){var ag=af.N;if(ag){return k0(ag,ad)}var ab=af.site;return ab.y===ad?ab.x:1/0}function lm(ab){this.site=ab,this.edges=[]}function nP(af){for(var av,ad,an,aw,am,aj,ay,az,ap,aq,ag=af[0][0],al=af[1][0],ah=af[0][1],ak=af[1][1],ax=oE,ab=ax.length;ab--;){if(am=ax[ab],am&&am.prepare()){for(ay=am.edges,az=ay.length,aj=0;az>aj;){aq=ay[aj].end(),an=aq.x,aw=aq.y,ap=ay[++aj%az].start(),av=ap.x,ad=ap.y,(ni(an-av)>oo||ni(aw-ad)>oo)&&(ay.splice(aj,0,new oH(nC(am.site,aq,ni(an-ag)<oo&&ak-aw>oo?{x:ag,y:ni(av-ag)<oo?ad:ak}:ni(aw-ak)<oo&&al-an>oo?{x:ni(ad-ak)<oo?av:al,y:ak}:ni(an-al)<oo&&aw-ah>oo?{x:al,y:ni(av-al)<oo?ad:ah}:ni(aw-ah)<oo&&an-ag>oo?{x:ni(ad-ah)<oo?av:ag,y:ah}:null),am.site,null)),++az)}}}}function kj(ab,ad){return ad.angle-ab.angle}function a3(){kp(this),this.x=this.y=this.arc=this.site=this.cy=null}function ov(av){var aj=av.P,ag=av.N;if(aj&&ag){var ay=aj.site,an=av.site,am=ag.site;if(ay!==am){var aw=an.x,ab=an.y,ad=ay.x-aw,aA=ay.y-ab,ap=am.x-aw,ah=am.y-ab,al=2*(ad*ah-aA*ap);if(!(al>=-oX)){var ak=ad*ad+aA*aA,ax=ap*ap+ah*ah,az=(ah*ak-aA*ax)/al,af=(ad*ax-ap*ak)/al,ah=af+ab,aq=pg.pop()||new a3();aq.arc=av,aq.site=an,aq.x=az+aw,aq.y=ah+Math.sqrt(az*az+af*af),aq.cy=ah,av.circle=aq;for(var aC=null,aB=lY._;aB;){if(aq.y<aB.y||aq.y===aB.y&&aq.x<=aB.x){if(!aB.L){aC=aB.P;break}aB=aB.L}else{if(!aB.R){aC=aB;break}aB=aB.R}}lY.insert(aC,aq),aC||(pA=aq)}}}}function ka(ab){var ad=ab.circle;ad&&(ad.P||(pA=ad.N),lY.remove(ad),pg.push(ad),kp(ad),ab.circle=null)}function og(af){for(var ab,ag=m8,ah=n9(af[0][0],af[0][1],af[1][0],af[1][1]),ad=ag.length;ad--;){ab=ag[ad],(!jo(ab,af)||!ah(ab)||ni(ab.a.x-ab.b.x)<oo&&ni(ab.a.y-ab.b.y)<oo)&&(ab.a=ab.b=null,ag.splice(ad,1))}}function jo(aw,ax){var aj=aw.b;if(aj){return !0}var ah,az,ap=aw.a,ay=ax[0][0],ab=ax[1][0],ad=ax[0][1],al=ax[1][1],aq=aw.l,ak=aw.r,an=aq.x,am=aq.y,af=ak.x,aA=ak.y,ag=(an+af)/2,av=(am+aA)/2;if(aA===am){if(ay>ag||ag>=ab){return}if(an>af){if(ap){if(ap.y>=al){return}}else{ap={x:ag,y:ad}}aj={x:ag,y:al}}else{if(ap){if(ap.y<ad){return}}else{ap={x:ag,y:al}}aj={x:ag,y:ad}}}else{if(ah=(an-af)/(aA-am),az=av-ah*ag,-1>ah||ah>1){if(an>af){if(ap){if(ap.y>=al){return}}else{ap={x:(ad-az)/ah,y:ad}}aj={x:(al-az)/ah,y:al}}else{if(ap){if(ap.y<ad){return}}else{ap={x:(al-az)/ah,y:al}}aj={x:(ad-az)/ah,y:ad}}}else{if(aA>am){if(ap){if(ap.x>=ab){return}}else{ap={x:ay,y:ah*ay+az}}aj={x:ab,y:ah*ab+az}}else{if(ap){if(ap.x<ay){return}}else{ap={x:ab,y:ah*ab+az}}aj={x:ay,y:ah*ay+az}}}}return aw.a=ap,aw.b=aj,!0}function pp(ab,ad){this.l=ab,this.r=ad,this.a=this.b=null}function ns(af,ab,ag,ah){var ad=new pp(af,ab);return m8.push(ad),ag&&m7(ad,af,ab,ag),ah&&m7(ad,ab,af,ah),oE[af.i].edges.push(new oH(ad,af,ab)),oE[ab.i].edges.push(new oH(ad,ab,af)),ad}function nC(af,ad,ag){var ab=new pp(af,null);return ab.a=ad,ab.b=ag,m8.push(ab),ab}function m7(af,ad,ag,ab){af.a||af.b?af.l===ag?af.b=ab:af.a=ab:(af.a=ab,af.l=ad,af.r=ag)}function oH(af,ab,ag){var ah=af.a,ad=af.b;this.edge=af,this.site=ab,this.angle=ag?Math.atan2(ag.y-ab.y,ag.x-ab.x):af.l===ab?Math.atan2(ad.x-ah.x,ah.y-ad.y):Math.atan2(ah.x-ad.x,ad.y-ah.y)}function mu(){this._=null}function kp(ab){ab.U=ab.C=ab.L=ab.R=ab.P=ab.N=null}function di(af,ab){var ag=ab,ah=ab.R,ad=ag.U;ad?ad.L===ag?ad.L=ah:ad.R=ah:af._=ah,ah.U=ad,ag.U=ah,ag.R=ah.L,ag.R&&(ag.R.U=ag),ah.L=ag}function kc(af,ab){var ag=ab,ah=ab.L,ad=ag.U;ad?ad.L===ag?ad.L=ah:ad.R=ah:af._=ah,ah.U=ad,ag.U=ah,ag.L=ah.R,ag.L&&(ag.L.U=ag),ah.R=ag}function lU(ab){for(;ab.L;){ab=ab.L}return ab}function m0(af,ak){var ah,aj,ad,ab=af.sort(o9).pop();for(m8=[],oE=new Array(af.length),nQ=new mu(),lY=new mu();;){if(ad=pA,ab&&(!ad||ab.y<ad.y||ab.y===ad.y&&ab.x<ad.x)){(ab.x!==ah||ab.y!==aj)&&(oE[ab.i]=new lm(ab),k6(ab),ah=ab.x,aj=ab.y),ab=af.pop()}else{if(!ad){break}nM(ad.arc)}}ak&&(og(ak),nP(ak));var ag={cells:oE,edges:m8};return nQ=lY=m8=oE=null,ag}function o9(ab,ad){return ad.y-ab.y||ad.x-ab.x}function lp(af,ad,ab){return(af.x-ab.x)*(ad.y-af.y)-(af.x-ad.x)*(ab.y-af.y)}function mQ(ab){return ab.x}function ob(ab){return ab.y}function lF(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function lV(ak,ab,ah,am,ad,aj){if(!ak(ab,ah,am,ad,aj)){var al=0.5*(ah+ad),af=0.5*(am+aj),ag=ab.nodes;ag[0]&&lV(ak,ag[0],ah,am,al,af),ag[1]&&lV(ak,ag[1],al,am,ad,af),ag[2]&&lV(ak,ag[2],ah,af,al,aj),ag[3]&&lV(ak,ag[3],al,af,ad,aj)}}function t(ad,aj){ad=oS.rgb(ad),aj=oS.rgb(aj);var ag=ad.r,ah=ad.g,al=ad.b,ak=aj.r-ag,af=aj.g-ah,ab=aj.b-al;return function(am){return"#"+o(Math.round(ag+ak*am))+o(Math.round(ah+af*am))+o(Math.round(al+ab*am))}}function jl(af,ab){var ag,ah={},ad={};for(ag in af){ag in ab?ah[ag]=kM(af[ag],ab[ag]):ad[ag]=af[ag]}for(ag in ab){ag in af||(ad[ag]=ab[ag])}return function(aj){for(ag in ah){ad[ag]=ah[ag](aj)}return ad}}function ox(ab,ad){return ad-=ab=+ab,function(af){return ab+ad*af}}function my(ak,ap){var ag,am,ab,ah,al,ad=0,af=0,an=[],aj=[];for(ak+="",ap+="",lH.lastIndex=0,am=0;ag=lH.exec(ap);++am){ag.index&&an.push(ap.substring(ad,af=ag.index)),aj.push({i:an.length,x:ag[0]}),an.push(null),ad=lH.lastIndex}for(ad<ap.length&&an.push(ap.substring(ad)),am=0,ah=aj.length;(ag=lH.exec(ak))&&ah>am;++am){if(al=aj[am],al.x==ag[0]){if(al.i){if(null==an[al.i+1]){for(an[al.i-1]+=al.x,an.splice(al.i,1),ab=am+1;ah>ab;++ab){aj[ab].i--}}else{for(an[al.i-1]+=al.x+an[al.i+1],an.splice(al.i,2),ab=am+1;ah>ab;++ab){aj[ab].i-=2}}}else{if(null==an[al.i+1]){an[al.i]=al.x}else{for(an[al.i]=al.x+an[al.i+1],an.splice(al.i+1,1),ab=am+1;ah>ab;++ab){aj[ab].i--}}}aj.splice(am,1),ah--,am--}else{al.x=ox(parseFloat(ag[0]),parseFloat(al.x))}}for(;ah>am;){al=aj.pop(),null==an[al.i+1]?an[al.i]=al.x:(an[al.i]=al.x+an[al.i+1],an.splice(al.i+1,1)),ah--}return 1===an.length?null==an[0]?(al=aj[0].x,function(aq){return al(aq)+""}):function(){return ap}:function(aq){for(am=0;ah>am;++am){an[(al=aj[am]).i]=al.x(aq)}return an.join("")}}function kM(af,ad){for(var ag,ab=oS.interpolators.length;--ab>=0&&!(ag=oS.interpolators[ab](af,ad));){}return ag}function mj(ad,aj){var ag,ah=[],al=[],ak=ad.length,af=aj.length,ab=Math.min(ad.length,aj.length);for(ag=0;ab>ag;++ag){ah.push(kM(ad[ag],aj[ag]))}for(;ak>ag;++ag){al[ag]=ad[ag]}for(;af>ag;++ag){al[ag]=aj[ag]}return function(am){for(ag=0;ab>ag;++ag){al[ag]=ah[ag](am)}return al}}function jj(ab){return function(ad){return 0>=ad?0:ad>=1?1:ab(ad)}}function oA(ab){return function(ad){return 1-ab(1-ad)}}function pl(ab){return function(ad){return 0.5*(0.5>ad?ab(2*ad):2-ab(2-2*ad))}}function ei(ab){return ab*ab}function lB(ab){return ab*ab*ab}function W(af){if(0>=af){return 0}if(af>=1){return 1}var ad=af*af,ab=ad*af;return 4*(0.5>af?ab:3*(af-ad)+ab-0.75)}function s(ab){return function(ad){return Math.pow(ad,ab)}}function kz(ab){return 1-Math.cos(ab*g)}function o7(ab){return Math.pow(2,10*(ab-1))}function gs(ab){return 1-Math.sqrt(1-ab*ab)}function pN(af,ad){var ab;return arguments.length<2&&(ad=0.45),arguments.length?ab=ad/kO*Math.asin(1/af):(af=1,ab=ad/4),function(ag){return 1+af*Math.pow(2,-10*ag)*Math.sin((ag-ab)*kO/ad)}}function mq(ab){return ab||(ab=1.70158),function(ad){return ad*ad*((ab+1)*ad-ab)}}function nd(ab){return 1/2.75>ab?7.5625*ab*ab:2/2.75>ab?7.5625*(ab-=1.5/2.75)*ab+0.75:2.5/2.75>ab?7.5625*(ab-=2.25/2.75)*ab+0.9375:7.5625*(ab-=2.625/2.75)*ab+0.984375}function pD(ad,aj){ad=oS.hcl(ad),aj=oS.hcl(aj);var ag=ad.h,ah=ad.c,al=ad.l,ak=aj.h-ag,af=aj.c-ah,ab=aj.l-al;return isNaN(af)&&(af=0,ah=isNaN(ah)?aj.c:ah),isNaN(ak)?(ak=0,ag=isNaN(ag)?aj.h:ag):ak>180?ak-=360:-180>ak&&(ak+=360),function(am){return mM(ag+ak*am,ah+af*am,al+ab*am)+""}}function nu(ad,aj){ad=oS.hsl(ad),aj=oS.hsl(aj);var ag=ad.h,ah=ad.s,al=ad.l,ak=aj.h-ag,af=aj.s-ah,ab=aj.l-al;return isNaN(af)&&(af=0,ah=isNaN(ah)?aj.s:ah),isNaN(ak)?(ak=0,ag=isNaN(ag)?aj.h:ag):ak>180?ak-=360:-180>ak&&(ak+=360),function(am){return mX(ag+ak*am,ah+af*am,al+ab*am)+""}}function nD(ad,aj){ad=oS.lab(ad),aj=oS.lab(aj);var ag=ad.l,ah=ad.a,al=ad.b,ak=aj.l-ag,af=aj.a-ah,ab=aj.b-al;return function(am){return nA(ag+ak*am,ah+af*am,al+ab*am)+""}}function ic(ab,ad){return ad-=ab,function(af){return Math.round(ab+ad*af)}}function ld(af){var aj=[af.a,af.b],ag=[af.c,af.d],ah=nT(aj),ad=C(aj,ag),ab=nT(le(ag,aj,-ad))||0;aj[0]*ag[1]<ag[0]*aj[1]&&(aj[0]*=-1,aj[1]*=-1,ah*=-1,ad*=-1),this.rotate=(ah?Math.atan2(aj[1],aj[0]):Math.atan2(-ag[0],ag[1]))*eo,this.translate=[af.e,af.f],this.scale=[ah,ab],this.skew=ab?Math.atan2(ad,ab)*eo:0}function C(ab,ad){return ab[0]*ad[0]+ab[1]*ad[1]}function nT(ab){var ad=Math.sqrt(C(ab,ab));return ad&&(ab[0]/=ad,ab[1]/=ad),ad}function le(af,ad,ab){return af[0]+=ab*ad[0],af[1]+=ab*ad[1],af}function mY(aj,ax){var ah,ap=[],ab=[],av=oS.transform(aj),ak=oS.transform(ax),af=av.translate,ag=ak.translate,aw=av.rotate,ad=ak.rotate,am=av.skew,aq=ak.skew,an=av.scale,al=ak.scale;return af[0]!=ag[0]||af[1]!=ag[1]?(ap.push("translate(",null,",",null,")"),ab.push({i:1,x:ox(af[0],ag[0])},{i:3,x:ox(af[1],ag[1])})):ag[0]||ag[1]?ap.push("translate("+ag+")"):ap.push(""),aw!=ad?(aw-ad>180?ad+=360:ad-aw>180&&(aw+=360),ab.push({i:ap.push(ap.pop()+"rotate(",null,")")-2,x:ox(aw,ad)})):ad&&ap.push(ap.pop()+"rotate("+ad+")"),am!=aq?ab.push({i:ap.push(ap.pop()+"skewX(",null,")")-2,x:ox(am,aq)}):aq&&ap.push(ap.pop()+"skewX("+aq+")"),an[0]!=al[0]||an[1]!=al[1]?(ah=ap.push(ap.pop()+"scale(",null,",",null,")"),ab.push({i:ah-4,x:ox(an[0],al[0])},{i:ah-2,x:ox(an[1],al[1])})):(1!=al[0]||1!=al[1])&&ap.push(ap.pop()+"scale("+al+")"),ah=ab.length,function(az){for(var aA,ay=-1;++ay<ah;){ap[(aA=ab[ay]).i]=aA.x(az)}return ap.join("")}}function c(ab,ad){return ad=ad-(ab=+ab)?1/(ad-ab):0,function(af){return(af-ab)*ad}}function lu(ab,ad){return ad=ad-(ab=+ab)?1/(ad-ab):0,function(af){return Math.max(0,Math.min(1,(af-ab)*ad))}}function n5(af){for(var aj=af.source,ag=af.target,ah=ba(aj,ag),ad=[aj];aj!==ah;){aj=aj.parent,ad.push(aj)}for(var ab=ad.length;ag!==ah;){ad.splice(ab,0,ag),ag=ag.parent}return ad}function kA(af){for(var ad=[],ab=af.parent;null!=ab;){ad.push(af),af=ab,ab=ab.parent}return ad.push(af),ad}function ba(af,ak){if(af===ak){return af}for(var ah=kA(af),aj=kA(ak),ad=ah.pop(),ab=aj.pop(),ag=null;ad===ab;){ag=ad,ad=ah.pop(),ab=aj.pop()}return ag}function oQ(ab){ab.fixed|=2}function l7(ab){ab.fixed&=-7}function ol(ab){ab.fixed|=4,ab.px=ab.x,ab.py=ab.y}function dr(ab){ab.fixed&=-5}function pt(ak,ab,ah){var am=0,ad=0;if(ak.charge=0,!ak.leaf){for(var aj,al=ak.nodes,af=al.length,ag=-1;++ag<af;){aj=al[ag],null!=aj&&(pt(aj,ab,ah),ak.charge+=aj.charge,am+=aj.charge*aj.cx,ad+=aj.charge*aj.cy)}}if(ak.point){ak.leaf||(ak.point.x+=Math.random()-0.5,ak.point.y+=Math.random()-0.5);var an=ab*ah[ak.point.index];ak.charge+=ak.pointCharge=an,am+=an*ak.point.x,ad+=an*ak.point.y}ak.cx=am/ak.charge,ak.cy=ad/ak.charge}function nv(ab,ad){return oS.rebind(ab,ad,"sort","children","value"),ab.nodes=ab,ab.links=mz,ab}function nI(ab){return ab.children}function nf(ab){return ab.value}function oR(ab,ad){return ad.value-ab.value}function mz(ab){return oS.merge(ab.map(function(ad){return(ad.children||[]).map(function(af){return{source:ad,target:af}})}))}function kB(ab){return ab.x}function es(ab){return ab.y}function cc(af,ad,ab){af.y0=ad,af.y=ab}function kf(ab){return oS.range(ab.length)}function nN(af){for(var ad=-1,ag=af[0].length,ab=[];++ad<ag;){ab[ad]=0}return ab}function oT(af){for(var aj,ag=1,ah=0,ad=af[0][1],ab=af.length;ab>ag;++ag){(aj=af[ag][1])>ad&&(ah=ag,ad=aj)}return ah}function gu(ab){return ab.reduce(oe,0)}function oe(ab,ad){return ab+ad[1]}function nF(ab,ad){return lk(ab,Math.ceil(Math.log(ad.length)/Math.LN2+1))}function lk(af,aj){for(var ag=-1,ah=+af[0],ad=(af[1]-ah)/aj,ab=[];++ag<=aj;){ab[ag]=ad*ag+ah}return ab}function nq(ab){return[oS.min(ab),oS.max(ab)]}function au(ab,ad){return ab.parent==ad.parent?1:2}function kk(ab){var ad=ab.children;return ad&&ad.length?ad[0]:ab._tree.thread}function pn(af){var ad,ab=af.children;return ab&&(ad=ab.length)?ab[ad-1]:af._tree.thread}function mg(af,aj){var ag=af.children;if(ag&&(ad=ag.length)){for(var ah,ad,ab=-1;++ab<ad;){aj(ah=mg(ag[ab],aj),af)>0&&(af=ah)}}return af}function kr(ab,ad){return ab.x-ad.x}function jX(ab,ad){return ad.x-ab.x}function k1(ab,ad){return ab.depth-ad.depth}function ms(af,ad){function ab(am,aj){var al=am.children;if(al&&(ah=al.length)){for(var ak,ah,an=null,ag=-1;++ag<ah;){ak=al[ag],ab(ak,an),an=ak}}ad(am,aj)}ab(af,null)}function d(af){for(var aj,ag=0,ah=0,ad=af.children,ab=ad.length;--ab>=0;){aj=ad[ab]._tree,aj.prelim+=ag,aj.mod+=ag,ag+=aj.shift+(ah+=aj.change)}}function kb(af,ad,ag){af=af._tree,ad=ad._tree;var ab=ag/(ad.number-af.number);af.change+=ab,ad.change-=ab,ad.shift+=ag,ad.prelim+=ag,ad.mod+=ag}function k4(af,ad,ab){return af._tree.ancestor.parent==ad.parent?af._tree.ancestor:ab}function et(ab,ad){return ab.value-ad.value}function oY(af,ad){var ab=af._pack_next;af._pack_next=ad,ad._pack_prev=af,ad._pack_next=ab,ab._pack_prev=ad}function ke(ab,ad){ab._pack_next=ad,ad._pack_prev=ab}function pT(af,ab){var ag=ab.x-af.x,ah=ab.y-af.y,ad=af.r+ab.r;return 0.999*ad*ad>ag*ag+ah*ah}function jk(av){function aj(aD){ap=Math.min(aD.x-aD.r,ap),ah=Math.max(aD.x+aD.r,ah),al=Math.min(aD.y-aD.r,al),ak=Math.max(aD.y+aD.r,ak)}if((ag=av.children)&&(aA=ag.length)){var ag,ay,an,am,aw,ab,ad,aA,ap=1/0,ah=-1/0,al=1/0,ak=-1/0;if(ag.forEach(pE),ay=ag[0],ay.x=-ay.r,ay.y=0,aj(ay),aA>1&&(an=ag[1],an.x=an.r,an.y=0,aj(an),aA>2)){for(am=ag[2],pm(ay,an,am),aj(am),oY(ay,am),ay._pack_prev=am,oY(am,an),an=ay._pack_next,aw=3;aA>aw;aw++){pm(ay,an,am=ag[aw]);var ax=0,az=1,af=1;for(ab=an._pack_next;ab!==an;ab=ab._pack_next,az++){if(pT(ab,am)){ax=1;break}}if(1==ax){for(ad=ay._pack_prev;ad!==ab._pack_prev&&!pT(ad,am);ad=ad._pack_prev,af++){}}ax?(af>az||az==af&&an.r<ay.r?ke(ay,an=ab):ke(ay=ad,an),aw--):(oY(ay,am),an=am,aj(am))}}var aq=(ap+ah)/2,aC=(al+ak)/2,aB=0;for(aw=0;aA>aw;aw++){am=ag[aw],am.x-=aq,am.y-=aC,aB=Math.max(aB,am.r+Math.sqrt(am.x*am.x+am.y*am.y))}av.r=aB,ag.forEach(l4)}}function pE(ab){ab._pack_next=ab._pack_prev=ab}function l4(ab){delete ab._pack_next,delete ab._pack_prev}function kX(af,ak,ah,aj){var ad=af.children;if(af.x=ak+=aj*af.x,af.y=ah+=aj*af.y,af.r*=aj,ad){for(var ab=-1,ag=ad.length;++ab<ag;){kX(ad[ab],ak,ah,aj)}}}function pm(ak,ab,ah){var am=ak.r+ah.r,ad=ab.x-ak.x,aj=ab.y-ak.y;if(am&&(ad||aj)){var al=ab.r+ah.r,af=ad*ad+aj*aj;al*=al,am*=am;var ag=0.5+(am-al)/(2*af),an=Math.sqrt(Math.max(0,2*al*(am+af)-(am-=af)*am-al*al))/(2*af);ah.x=ak.x+ag*ad+an*aj,ah.y=ak.y+ag*aj-an*ad}else{ah.x=ak.x+am,ah.y=ak.y}}function mS(ab){return 1+oS.max(ab,function(ad){return ad.y})}function pb(ab){return ab.reduce(function(af,ad){return af+ad.x},0)/ab.length}function kS(ab){var ad=ab.children;return ad&&ad.length?kS(ad[0]):ab}function fr(af){var ad,ab=af.children;return ab&&(ad=ab.length)?fr(ab[ad-1]):af}function bi(ab){return{x:ab.x,y:ab.y,dx:ab.dx,dy:ab.dy}}function oW(af,aj){var ag=af.x+aj[3],ah=af.y+aj[0],ad=af.dx-aj[1]-aj[3],ab=af.dy-aj[0]-aj[2];return 0>ad&&(ag+=ad/2,ad=0),0>ab&&(ah+=ab/2,ab=0),{x:ag,y:ah,dx:ad,dy:ab}}function mG(af){var ad=af[0],ab=af[af.length-1];return ab>ad?[ad,ab]:[ab,ad]}function kL(ab){return ab.rangeExtent?ab.rangeExtent():mG(ab.range())}function od(af,aj,ag,ah){var ad=ag(af[0],af[1]),ab=ah(aj[0],aj[1]);return function(ak){return ab(ad(ak))}}function k8(af,ak){var ah,aj=0,ad=af.length-1,ab=af[aj],ag=af[ad];return ab>ag&&(ah=aj,aj=ad,ad=ah,ah=ab,ab=ag,ag=ah),af[aj]=ak.floor(ab),af[ad]=ak.ceil(ag),af}function lJ(ab){return ab?{floor:function(ad){return Math.floor(ad/ab)*ab},ceil:function(ad){return Math.ceil(ad/ab)*ab}}:mv}function lT(ad,aj,ag,ah){var al=[],ak=[],af=0,ab=Math.min(ad.length,aj.length)-1;for(ad[ab]<ad[0]&&(ad=ad.slice().reverse(),aj=aj.slice().reverse());++af<=ab;){al.push(ag(ad[af-1],ad[af])),ak.push(ah(aj[af-1],aj[af]))}return function(am){var an=oS.bisect(ad,am,1,ab)-1;return ak[an](al[an](am))}}function Y(ad,aj,ag,ah){function al(){var am=Math.min(ad.length,aj.length)>2?lT:od,an=ah?lu:c;return af=am(ad,aj,an,ag),ab=am(aj,ad,an,kM),ak}function ak(am){return af(am)}var af,ab;return ak.invert=function(am){return ab(am)},ak.domain=function(am){return arguments.length?(ad=am.map(Number),al()):ad},ak.range=function(am){return arguments.length?(aj=am,al()):aj},ak.rangeRound=function(am){return ak.range(am).interpolate(ic)},ak.clamp=function(am){return arguments.length?(ah=am,al()):ah},ak.interpolate=function(am){return arguments.length?(ag=am,al()):ag},ak.ticks=function(am){return G(ad,am)},ak.tickFormat=function(am,an){return ne(ad,am,an)},ak.nice=function(am){return jt(ad,am),al()},ak.copy=function(){return Y(ad,aj,ag,ah)},al()}function pO(ab,ad){return oS.rebind(ab,ad,"range","rangeRound","interpolate","clamp")}function jt(ab,ad){return k8(ab,lJ(n4(ab,ad)[2]))}function n4(af,aj){null==aj&&(aj=10);var ag=mG(af),ah=ag[1]-ag[0],ad=Math.pow(10,Math.floor(Math.log(ah/aj)/Math.LN10)),ab=aj/ah*ad;return 0.15>=ab?ad*=10:0.35>=ab?ad*=5:0.75>=ab&&(ad*=2),ag[0]=Math.ceil(ag[0]/ad)*ad,ag[1]=Math.floor(ag[1]/ad)*ad+0.5*ad,ag[2]=ad,ag}function G(ab,ad){return oS.range.apply(oS,n4(ab,ad))}function ne(af,ad,ag){var ab=n4(af,ad);return oS.format(ag?ag.replace(lG,function(ap,aw,al,ah,am,aq,aj,ak,av,an){return[aw,al,ah,am,aq,aj,ak,av||"."+oJ(an,ab),an].join("")}):",."+nh(ab[2])+"f")}function nh(ab){return -Math.floor(Math.log(ab)/Math.LN10+0.01)}function oJ(af,ad){var ab=nh(ad[2]);return af in kH?Math.abs(ab-nh(Math.max(Math.abs(ad[0]),Math.abs(ad[1]))))+ +("e"!==af):ab-2*("%"===af)}function mP(af,ak,ah,aj){function ad(al){return(ah?Math.log(0>al?0:al):-Math.log(al>0?0:-al))/Math.log(ak)}function ab(al){return ah?Math.pow(ak,al):-Math.pow(ak,-al)}function ag(al){return af(ad(al))}return ag.invert=function(al){return ab(af.invert(al))},ag.domain=function(al){return arguments.length?(ah=al[0]>=0,af.domain((aj=al.map(Number)).map(ad)),ag):aj},ag.base=function(al){return arguments.length?(ak=+al,af.domain(aj.map(ad)),ag):ak},ag.nice=function(){var al=k8(aj.map(ad),ah?Math:it);return af.domain(al),aj=al.map(ab),ag},ag.ticks=function(){var am=mG(aj),aq=[],al=am[0],ap=am[1],aw=Math.floor(ad(al)),an=Math.ceil(ad(ap)),av=ak%1?2:ak;if(isFinite(an-aw)){if(ah){for(;an>aw;aw++){for(var ax=1;av>ax;ax++){aq.push(ab(aw)*ax)}}aq.push(ab(aw))}else{for(aq.push(ab(aw));aw++<an;){for(var ax=av-1;ax>0;ax--){aq.push(ab(aw)*ax)}}}for(aw=0;aq[aw]<al;aw++){}for(an=aq.length;aq[an-1]>ap;an--){}aq=aq.slice(aw,an)}return aq},ag.tickFormat=function(an,al){if(!arguments.length){return mc}arguments.length<2?al=mc:"function"!=typeof al&&(al=oS.format(al));var aq,am=Math.max(0.1,an/ag.ticks().length),ap=ah?(aq=1e-12,Math.ceil):(aq=-1e-12,Math.floor);return function(av){return av/ab(ap(ad(av)+aq))<=am?al(av):""}},ag.copy=function(){return mP(af.copy(),ak,ah,aj)},pO(ag,af)}function oz(af,aj,ag){function ah(ak){return af(ad(ak))}var ad=l3(aj),ab=l3(1/aj);return ah.invert=function(ak){return ab(af.invert(ak))},ah.domain=function(ak){return arguments.length?(af.domain((ag=ak.map(Number)).map(ad)),ah):ag},ah.ticks=function(ak){return G(ag,ak)},ah.tickFormat=function(ak,al){return ne(ag,ak,al)},ah.nice=function(ak){return ah.domain(jt(ag,ak))},ah.exponent=function(ak){return arguments.length?(ad=l3(aj=ak),ab=l3(1/aj),af.domain(ag.map(ad)),ah):aj},ah.copy=function(){return oz(af.copy(),aj,ag)},pO(ah,af)}function l3(ab){return function(ad){return 0>ad?-Math.pow(-ad,ab):Math.pow(ad,ab)}}function R(ad,aj){function ag(al){return af[((ak.get(al)||"range"===aj.t&&ak.set(al,ad.push(al)))-1)%af.length]}function ah(am,al){return oS.range(ad.length).map(function(an){return am+al*an})}var ak,af,ab;return ag.domain=function(ap){if(!arguments.length){return ad}ad=[],ak=new jh();for(var an,al=-1,am=ap.length;++al<am;){ak.has(an=ap[al])||ak.set(an,ad.push(an))}return ag[aj.t].apply(ag,aj.a)},ag.range=function(al){return arguments.length?(af=al,ab=0,aj={t:"range",a:arguments},ag):af},ag.rangePoints=function(al,aq){arguments.length<2&&(aq=0);var an=al[0],ap=al[1],am=(ap-an)/(Math.max(1,ad.length-1)+aq);return af=ah(ad.length<2?(an+ap)/2:an+am*aq/2,am),ab=0,aj={t:"rangePoints",a:arguments},ag},ag.rangeBands=function(al,aw,an){arguments.length<2&&(aw=0),arguments.length<3&&(an=aw);var aq=al[1]<al[0],am=al[aq-0],ap=al[1-aq],av=(ap-am)/(ad.length-aw+2*an);return af=ah(am+av*an,av),aq&&af.reverse(),ab=av*(1-aw),aj={t:"rangeBands",a:arguments},ag},ag.rangeRoundBands=function(al,ax,an){arguments.length<2&&(ax=0),arguments.length<3&&(an=ax);var av=al[1]<al[0],am=al[av-0],ap=al[1-av],aw=Math.floor((ap-am)/(ad.length-ax+2*an)),aq=ap-am-(ad.length-ax)*aw;return af=ah(am+Math.round(aq/2),aw),av&&af.reverse(),ab=Math.round(aw*(1-ax)),aj={t:"rangeRoundBands",a:arguments},ag},ag.rangeBand=function(){return ab},ag.rangeExtent=function(){return mG(aj.a[0])},ag.copy=function(){return R(ad,aj)},ag.domain(ad)}function cs(af,ab){function ag(){var aj=0,ak=ab.length;for(ad=[];++aj<ak;){ad[aj-1]=oS.quantile(af,aj/ak)}return ah}function ah(aj){return isNaN(aj=+aj)?void 0:ab[oS.bisect(ad,aj)]}var ad;return ah.domain=function(aj){return arguments.length?(af=aj.filter(function(ak){return !isNaN(ak)}).sort(oS.ascending),ag()):af},ah.range=function(aj){return arguments.length?(ab=aj,ag()):ab},ah.quantiles=function(){return ad},ah.invertExtent=function(aj){return aj=ab.indexOf(aj),0>aj?[0/0,0/0]:[aj>0?ad[aj-1]:af[0],aj<ad.length?ad[aj]:af[af.length-1]]},ah.copy=function(){return cs(af,ab)},ag()}function jU(af,ak,ah){function aj(al){return ah[Math.max(0,Math.min(ag,Math.floor(ab*(al-af))))]}function ad(){return ab=ah.length/(ak-af),ag=ah.length-1,aj}var ab,ag;return aj.domain=function(al){return arguments.length?(af=+al[0],ak=+al[al.length-1],ad()):[af,ak]},aj.range=function(al){return arguments.length?(ah=al,ad()):ah},aj.invertExtent=function(al){return al=ah.indexOf(al),al=0>al?0/0:al/ab+af,[al,al+1/ab]},aj.copy=function(){return jU(af,ak,ah)},ad()}function lM(af,ad){function ab(ag){return ag>=ag?ad[oS.bisect(af,ag)]:void 0}return ab.domain=function(ag){return arguments.length?(af=ag,ab):af},ab.range=function(ag){return arguments.length?(ad=ag,ab):ad},ab.invertExtent=function(ag){return ag=ad.indexOf(ag),[af[ag-1],af[ag]]},ab.copy=function(){return lM(af,ad)},ab}function mN(ab){function ad(af){return +af}return ad.invert=ad,ad.domain=ad.range=function(af){return arguments.length?(ab=af.map(ad),ad):ab},ad.ticks=function(af){return G(ab,af)},ad.tickFormat=function(ag,af){return ne(ab,ag,af)},ad.copy=function(){return mN(ab)},ad}function oV(ab){return ab.innerRadius}function lf(ab){return ab.outerRadius}function on(ab){return ab.startAngle}function nH(ab){return ab.endAngle}function lw(ad){function aj(aq){function an(){ap.push("M",ak(ad(am),ab))}for(var av,ap=[],am=[],ax=-1,az=aq.length,ay=o4(ag),aw=o4(ah);++ax<az;){al.call(this,av=aq[ax],ax)?am.push([+ay.call(this,av,ax),+aw.call(this,av,ax)]):am.length&&(an(),am=[])}return am.length&&an(),ap.length?ap.join(""):null}var ag=fo,ah=pI,al=iu,ak=nw,af=ak.key,ab=0.7;return aj.x=function(am){return arguments.length?(ag=am,aj):ag},aj.y=function(am){return arguments.length?(ah=am,aj):ah},aj.defined=function(am){return arguments.length?(al=am,aj):al},aj.interpolate=function(am){return arguments.length?(af="function"==typeof am?ak=am:(ak=ku.get(am)||nw).key,aj):af},aj.tension=function(am){return arguments.length?(ab=am,aj):ab},aj}function nw(ab){return ab.join("L")}function be(ab){return nw(ab)+"Z"}function ii(af){for(var ab=0,ag=af.length,ah=af[0],ad=[ah[0],",",ah[1]];++ab<ag;){ad.push("H",(ah[0]+(ah=af[ab])[0])/2,"V",ah[1])}return ag>1&&ad.push("H",ah[0]),ad.join("")}function pv(af){for(var ab=0,ag=af.length,ah=af[0],ad=[ah[0],",",ah[1]];++ab<ag;){ad.push("V",(ah=af[ab])[1],"H",ah[0])}return ad.join("")}function mr(af){for(var ab=0,ag=af.length,ah=af[0],ad=[ah[0],",",ah[1]];++ab<ag;){ad.push("H",(ah=af[ab])[0],"V",ah[1])}return ad.join("")}function kC(ab,ad){return ab.length<4?nw(ab):ab[1]+mB(ab.slice(1,ab.length-1),f(ab,ad))}function l9(ab,ad){return ab.length<3?nw(ab):ab[0]+mB((ab.push(ab[0]),ab),f([ab[ab.length-2]].concat(ab,[ab[1]]),ad))}function ie(ab,ad){return ab.length<3?nw(ab):ab[0]+mB(ab,f(ab,ad))}function mB(ak,ap){if(ap.length<1||ak.length!=ap.length&&ak.length!=ap.length+2){return nw(ak)}var ag=ak.length!=ap.length,am="",ab=ak[0],ah=ak[1],al=ap[0],ad=al,af=1;if(ag&&(am+="Q"+(ah[0]-2*al[0]/3)+","+(ah[1]-2*al[1]/3)+","+ah[0]+","+ah[1],ab=ak[1],af=2),ap.length>1){ad=ap[1],ah=ak[af],af++,am+="C"+(ab[0]+al[0])+","+(ab[1]+al[1])+","+(ah[0]-ad[0])+","+(ah[1]-ad[1])+","+ah[0]+","+ah[1];for(var an=2;an<ap.length;an++,af++){ah=ak[af],ad=ap[an],am+="S"+(ah[0]-ad[0])+","+(ah[1]-ad[1])+","+ah[0]+","+ah[1]}}if(ag){var aj=ak[af];am+="Q"+(ah[0]+2*ad[0]/3)+","+(ah[1]+2*ad[1]/3)+","+aj[0]+","+aj[1]}return am}function f(ak,ab){for(var ah,am=[],ad=(1-ab)/2,aj=ak[0],al=ak[1],af=1,ag=ak.length;++af<ag;){ah=aj,aj=al,al=ak[af],am.push([ad*(al[0]-ah[0]),ad*(al[1]-ah[1])])}return am}function lo(ak){if(ak.length<3){return nw(ak)}var ab=1,ah=ak.length,am=ak[0],ad=am[0],aj=am[1],al=[ad,ad,ad,(am=ak[1])[0]],af=[aj,aj,aj,am[1]],ag=[ad,",",aj,"L",oU(pK,al),",",oU(pK,af)];for(ak.push(ak[ah-1]);++ab<=ah;){am=ak[ab],al.shift(),al.push(am[0]),af.shift(),af.push(am[1]),er(ag,al,af)}return ak.pop(),ag.push("L",am),ag.join("")}function fc(af){if(af.length<4){return nw(af)}for(var ak,ah=[],aj=-1,ad=af.length,ab=[0],ag=[0];++aj<3;){ak=af[aj],ab.push(ak[0]),ag.push(ak[1])}for(ah.push(oU(pK,ab)+","+oU(pK,ag)),--aj;++aj<ad;){ak=af[aj],ab.shift(),ab.push(ak[0]),ag.shift(),ag.push(ak[1]),er(ah,ab,ag)}return ah.join("")}function o8(ad){for(var aj,ag,ah=-1,al=ad.length,ak=al+4,af=[],ab=[];++ah<4;){ag=ad[ah%al],af.push(ag[0]),ab.push(ag[1])}for(aj=[oU(pK,af),",",oU(pK,ab)],--ah;++ah<ak;){ag=ad[ah%al],af.shift(),af.push(ag[0]),ab.shift(),ab.push(ag[1]),er(aj,af,ab)}return aj.join("")}function ko(ak,ab){var ah=ak.length-1;if(ah){for(var am,ad,aj=ak[0][0],al=ak[0][1],af=ak[ah][0]-aj,ag=ak[ah][1]-al,an=-1;++an<=ah;){am=ak[an],ad=an/ah,am[0]=ab*am[0]+(1-ab)*(aj+ad*af),am[1]=ab*am[1]+(1-ab)*(al+ad*ag)}}return lo(ak)}function oU(ab,ad){return ab[0]*ad[0]+ab[1]*ad[1]+ab[2]*ad[2]+ab[3]*ad[3]}function er(af,ad,ab){af.push("C",oU(o1,ad),",",oU(o1,ab),",",oU(ga,ad),",",oU(ga,ab),",",oU(pK,ad),",",oU(pK,ab))}function pG(ab,ad){return(ad[1]-ab[1])/(ad[0]-ab[0])}function md(af){for(var ak=0,ah=af.length-1,aj=[],ad=af[0],ab=af[1],ag=aj[0]=pG(ad,ab);++ak<ah;){aj[ak]=(ag+(ag=pG(ad=ab,ab=af[ak+1])))/2}return aj[ak]=ag,aj}function mZ(ak){for(var ab,ah,am,ad,aj=[],al=md(ak),af=-1,ag=ak.length-1;++af<ag;){ab=pG(ak[af],ak[af+1]),ni(ab)<oo?al[af]=al[af+1]=0:(ah=al[af]/ab,am=al[af+1]/ab,ad=ah*ah+am*am,ad>9&&(ad=3*ab/Math.sqrt(ad),al[af]=ad*ah,al[af+1]=ad*am))}for(af=-1;++af<=ag;){ad=(ak[Math.min(ag,af+1)][0]-ak[Math.max(0,af-1)][0])/(6*(1+al[af]*al[af])),aj.push([ad||0,al[af]*ad||0])}return aj}function po(ab){return ab.length<3?nw(ab):ab[0]+mB(ab,mZ(ab))}function nb(af){for(var aj,ag,ah,ad=-1,ab=af.length;++ad<ab;){aj=af[ad],ag=aj[0],ah=aj[1]+S,aj[0]=ag*Math.cos(ah),aj[1]=ag*Math.sin(ah)}return af}function pc(aj){function am(aD){function aA(){aE.push("M",aq(aj(aB),af),ah,al(aj(aF.reverse()),af),"Z")}for(var az,aw,aC,aE=[],aF=[],aB=[],ax=-1,av=aD.length,aI=o4(ad),aG=o4(ap),ay=ad===an?function(){return aw}:o4(an),aH=ap===ag?function(){return aC}:o4(ag);++ax<av;){ak.call(this,az=aD[ax],ax)?(aF.push([aw=+aI.call(this,az,ax),aC=+aG.call(this,az,ax)]),aB.push([+ay.call(this,az,ax),+aH.call(this,az,ax)])):aF.length&&(aA(),aF=[],aB=[])}return aF.length&&aA(),aE.length?aE.join(""):null}var ad=fo,an=fo,ap=0,ag=pI,ak=iu,aq=nw,ab=aq.key,al=aq,ah="L",af=0.7;return am.x=function(av){return arguments.length?(ad=an=av,am):an},am.x0=function(av){return arguments.length?(ad=av,am):ad},am.x1=function(av){return arguments.length?(an=av,am):an},am.y=function(av){return arguments.length?(ap=ag=av,am):ag},am.y0=function(av){return arguments.length?(ap=av,am):ap},am.y1=function(av){return arguments.length?(ag=av,am):ag},am.defined=function(av){return arguments.length?(ak=av,am):ak},am.interpolate=function(av){return arguments.length?(ab="function"==typeof av?aq=av:(aq=ku.get(av)||nw).key,al=aq.reverse||aq,ah=aq.closed?"M":"L",am):ab},am.tension=function(av){return arguments.length?(af=av,am):af},am}function kZ(ab){return ab.radius}function gr(ab){return[ab.x,ab.y]}function u(ab){return function(){var ad=ab.apply(this,arguments),af=ad[0],ag=ad[1]+S;return[af*Math.cos(ag),af*Math.sin(ag)]}}function nL(){return 64}function mL(){return"circle"}function kV(ab){var ad=Math.sqrt(ab/lX);return"M0,"+ad+"A"+ad+","+ad+" 0 1,1 0,"+-ad+"A"+ad+","+ad+" 0 1,1 0,"+ad+"Z"}function of(ab,ad){return kg(ab,k3),ab.id=ad,ab}function lh(af,ab,ag,ah){var ad=af.id;return eu(af,"function"==typeof ag?function(aj,al,ak){aj.__transition__[ad].tween.set(ab,ah(ag.call(aj,aj.__data__,al,ak)))}:(ag=ah(ag),function(aj){aj.__transition__[ad].tween.set(ab,ag)}))}function nG(ab){return null==ab&&(ab=""),function(){this.textContent=ab}}function kh(ad,aj,ag,ah){var ak=ad.__transition__||(ad.__transition__={active:0,count:0}),af=ak[ag];if(!af){var ab=ah.time;af=ak[ag]={tween:new jh(),time:ab,ease:ah.ease,delay:ah.delay,duration:ah.duration},++ak.count,oS.timer(function(ax){function ap(aA){return ak.active>ag?am():(ak.active=ag,af.event&&af.event.start.call(ad,an,aj),af.tween.forEach(function(aB,aC){(aC=aC.call(ad,an,aj))&&av.push(aC)}),oS.timer(function(){return aq.c=aw(aA||1)?iu:aw,1},0,ab),void 0)}function aw(aA){if(ak.active!==ag){return am()}for(var aB=aA/az,aC=ay(aB),aD=av.length;aD>0;){av[--aD].call(ad,aC)}return aB>=1?(af.event&&af.event.end.call(ad,an,aj),am()):void 0}function am(){return --ak.count?delete ak[ag]:delete ad.__transition__,1}var an=ad.__data__,ay=af.ease,al=af.delay,az=af.duration,aq=hr,av=[];return aq.t=al+ab,ax>=al?ap(ax-al):(aq.c=ap,void 0)},0,ab)}}function ar(ab,ad){ab.attr("transform",function(af){return"translate("+ad(af)+",0)"})}function pS(ab,ad){ab.attr("transform",function(af){return"translate(0,"+ad(af)+")"})}function jT(ab){return ab.toISOString()}function oc(af,ab,ag){function ah(aj){return af(aj)}function ad(an,aj){var ak=an[1]-an[0],am=ak/aj,al=oS.bisect(kl,am);return al==kl.length?[ab.year,n4(an.map(function(ap){return ap/31536000000}),aj)[2]]:al?ab[am/kl[al-1]<kl[al]/am?al-1:al]:[l0,n4(an,aj)[2]]}return ah.invert=function(aj){return jd(af.invert(aj))},ah.domain=function(aj){return arguments.length?(af.domain(aj),ah):af.domain().map(jd)},ah.nice=function(an,ak){function aj(aq){return !isNaN(aq)&&!an.range(aq,jd(+aq+1),ak).length}var al=ah.domain(),ap=mG(al),am=null==an?ad(ap,10):"number"==typeof an&&ad(ap,an);return am&&(an=am[0],ak=am[1]),ah.domain(k8(al,ak>1?{floor:function(aq){for(;aj(aq=an.floor(aq));){aq=jd(aq-1)}return aq},ceil:function(aq){for(;aj(aq=an.ceil(aq));){aq=jd(+aq+1)}return aq}}:an))},ah.ticks=function(aj,al){var ak=mG(ah.domain()),am=null==aj?ad(ak,10):"number"==typeof aj?ad(ak,aj):!aj.range&&[{range:aj},al];return am&&(aj=am[0],al=am[1]),aj.range(ak[0],jd(+ak[1]+1),1>al?1:al)},ah.tickFormat=function(){return ag},ah.copy=function(){return oc(af.copy(),ab,ag)},pO(ah,af)}function jd(ab){return new Date(ab)}function nx(ab){return JSON.parse(ab.responseText)}function no(ab){var ad=mp.createRange();return ad.selectNode(mp.body),ad.createContextualFragment(ab.responseText)}var oS={version:"3.4.3"};Date.now||(Date.now=function(){return +new Date()});var m1=[].slice,oC=function(ab){return m1.call(ab)},mp=document,bc=mp.documentElement,ct=window;try{oC(bc.childNodes)[0].nodeType}catch(jZ){oC=function(af){for(var ad=af.length,ab=new Array(ad);ad--;){ab[ad]=af[ad]}return ab}}try{mp.createElement("div").style.setProperty("opacity",0,"")}catch(lR){var lL=ct.Element.prototype,oF=lL.setAttribute,ft=lL.setAttributeNS,n6=ct.CSSStyleDeclaration.prototype,pd=n6.setProperty;lL.setAttribute=function(ab,ad){oF.call(this,ab,ad+"")},lL.setAttributeNS=function(af,ad,ab){ft.call(this,af,ad,ab+"")},n6.setProperty=function(af,ad,ab){pd.call(this,af,ad+"",ab)}}oS.ascending=function(ab,ad){return ad>ab?-1:ab>ad?1:ab>=ad?0:0/0},oS.descending=function(ab,ad){return ab>ad?-1:ad>ab?1:ad>=ab?0:0/0},oS.min=function(af,aj){var ag,ah,ad=-1,ab=af.length;if(1===arguments.length){for(;++ad<ab&&!(null!=(ag=af[ad])&&ag>=ag);){ag=void 0}for(;++ad<ab;){null!=(ah=af[ad])&&ag>ah&&(ag=ah)}}else{for(;++ad<ab&&!(null!=(ag=aj.call(af,af[ad],ad))&&ag>=ag);){ag=void 0}for(;++ad<ab;){null!=(ah=aj.call(af,af[ad],ad))&&ag>ah&&(ag=ah)}}return ag},oS.max=function(af,aj){var ag,ah,ad=-1,ab=af.length;if(1===arguments.length){for(;++ad<ab&&!(null!=(ag=af[ad])&&ag>=ag);){ag=void 0}for(;++ad<ab;){null!=(ah=af[ad])&&ah>ag&&(ag=ah)}}else{for(;++ad<ab&&!(null!=(ag=aj.call(af,af[ad],ad))&&ag>=ag);){ag=void 0}for(;++ad<ab;){null!=(ah=aj.call(af,af[ad],ad))&&ah>ag&&(ag=ah)}}return ag},oS.extent=function(af,ak){var ah,aj,ad,ab=-1,ag=af.length;if(1===arguments.length){for(;++ab<ag&&!(null!=(ah=ad=af[ab])&&ah>=ah);){ah=ad=void 0}for(;++ab<ag;){null!=(aj=af[ab])&&(ah>aj&&(ah=aj),aj>ad&&(ad=aj))}}else{for(;++ab<ag&&!(null!=(ah=ad=ak.call(af,af[ab],ab))&&ah>=ah);){ah=void 0}for(;++ab<ag;){null!=(aj=ak.call(af,af[ab],ab))&&(ah>aj&&(ah=aj),aj>ad&&(ad=aj))}}return[ah,ad]},oS.sum=function(af,aj){var ag,ah=0,ad=af.length,ab=-1;if(1===arguments.length){for(;++ab<ad;){isNaN(ag=+af[ab])||(ah+=ag)}}else{for(;++ab<ad;){isNaN(ag=+aj.call(af,af[ab],ab))||(ah+=ag)}}return ah},oS.mean=function(ah,af){var ag,ak=ah.length,aj=0,ad=-1,ab=0;if(1===arguments.length){for(;++ad<ak;){kD(ag=ah[ad])&&(aj+=(ag-aj)/++ab)}}else{for(;++ad<ak;){kD(ag=af.call(ah,ah[ad],ad))&&(aj+=(ag-aj)/++ab)}}return ab?aj:void 0},oS.quantile=function(af,aj){var ag=(af.length-1)*aj+1,ah=Math.floor(ag),ad=+af[ah-1],ab=ag-ah;return ab?ad+ab*(af[ah]-ad):ad},oS.median=function(ad,ab){return arguments.length>1&&(ad=ad.map(ab)),ad=ad.filter(kD),ad.length?oS.quantile(ad.sort(oS.ascending),0.5):void 0},oS.bisector=function(ab){return{left:function(ah,af,ag,ad){for(arguments.length<3&&(ag=0),arguments.length<4&&(ad=ah.length);ad>ag;){var aj=ag+ad>>>1;ab.call(ah,ah[aj],aj)<af?ag=aj+1:ad=aj}return ag},right:function(ah,af,ag,ad){for(arguments.length<3&&(ag=0),arguments.length<4&&(ad=ah.length);ad>ag;){var aj=ag+ad>>>1;af<ab.call(ah,ah[aj],aj)?ad=aj:ag=aj+1}return ag}}};var k9=oS.bisector(function(ab){return ab});oS.bisectLeft=k9.left,oS.bisect=oS.bisectRight=k9.right,oS.shuffle=function(af){for(var ad,ag,ab=af.length;ab;){ag=0|Math.random()*ab--,ad=af[ab],af[ab]=af[ag],af[ag]=ad}return af},oS.permute=function(af,ad){for(var ag=ad.length,ab=new Array(ag);ag--;){ab[ag]=af[ad[ag]]}return ab},oS.pairs=function(af){for(var aj,ag=0,ah=af.length-1,ad=af[0],ab=new Array(0>ah?0:ah);ah>ag;){ab[ag]=[aj=ad,ad=af[++ag]]}return ab},oS.zip=function(){if(!(ad=arguments.length)){return[]}for(var af=-1,ah=oS.min(arguments,ja),aj=new Array(ah);++af<ah;){for(var ad,ab=-1,ag=aj[af]=new Array(ad);++ab<ad;){ag[ab]=arguments[ab][af]}}return aj},oS.transpose=function(ab){return oS.zip.apply(oS,ab)},oS.keys=function(af){var ad=[];for(var ab in af){ad.push(ab)}return ad},oS.values=function(af){var ad=[];for(var ab in af){ad.push(af[ab])}return ad},oS.entries=function(af){var ad=[];for(var ab in af){ad.push({key:ab,value:af[ab]})}return ad},oS.merge=function(af){for(var ak,ah,aj,ad=af.length,ab=-1,ag=0;++ab<ad;){ag+=af[ab].length}for(ah=new Array(ag);--ad>=0;){for(aj=af[ad],ak=aj.length;--ak>=0;){ah[--ag]=aj[ak]}}return ah};var ni=Math.abs;oS.range=function(ad,ah,ag){if(arguments.length<3&&(ag=1,arguments.length<2&&(ah=ad,ad=0)),1/0===(ah-ad)/ag){throw new Error("infinite range")}var ak,aj=[],af=at(ni(ag)),ab=-1;if(ad*=af,ah*=af,ag*=af,0>ag){for(;(ak=ad+ag*++ab)>ah;){aj.push(ak/af)}}else{for(;(ak=ad+ag*++ab)<ah;){aj.push(ak/af)}}return aj},oS.map=function(af){var ad=new jh();if(af instanceof jh){af.forEach(function(ag,ah){ad.set(ag,ah)})}else{for(var ab in af){ad.set(ab,af[ab])}}return ad},iv(jh,{has:bo,get:function(ab){return this[aa+ab]},set:function(ab,ad){return this[aa+ab]=ad},remove:kF,keys:N,values:function(){var ab=[];return this.forEach(function(ad,af){ab.push(af)}),ab},entries:function(){var ab=[];return this.forEach(function(ad,af){ab.push({key:ad,value:af})}),ab},size:Z,empty:iy,forEach:function(ab){for(var ad in this){ad.charCodeAt(0)===T&&ab.call(this,ad.substring(1),this[ad])}}});var aa="\x00",T=aa.charCodeAt(0);oS.nest=function(){function ad(ap,ax,ay){if(ay>=af.length){return ah?ah.call(ak,ax):ag?ax.sort(ag):ax}for(var am,av,aA,an,al=-1,aw=ax.length,aq=af[ay++],az=new jh();++al<aw;){(an=az.get(am=aq(av=ax[al])))?an.push(av):az.set(am,[av])}return ap?(av=ap(),aA=function(aC,aB){av.set(aC,ad(ap,aB,ay))}):(av={},aA=function(aC,aB){av[aC]=ad(ap,aB,ay)}),az.forEach(aA),av}function aj(an,ap){if(ap>=af.length){return an}var al=[],am=ab[ap++];return an.forEach(function(aq,av){al.push({key:aq,values:aj(av,ap)})}),am?al.sort(function(aq,av){return am(aq.key,av.key)}):al}var ag,ah,ak={},af=[],ab=[];return ak.map=function(am,al){return ad(al,am,0)},ak.entries=function(al){return aj(ad(oS.map,al,0),0)},ak.key=function(al){return af.push(al),ak},ak.sortKeys=function(al){return ab[af.length-1]=al,ak},ak.sortValues=function(al){return ag=al,ak},ak.rollup=function(al){return ah=al,ak},ak},oS.set=function(af){var ad=new ks();if(af){for(var ag=0,ab=af.length;ab>ag;++ag){ad.add(af[ag])}}return ad},iv(ks,{has:bo,add:function(ab){return this[aa+ab]=!0,ab},remove:function(ab){return ab=aa+ab,ab in this&&delete this[ab]},values:N,size:Z,empty:iy,forEach:function(ab){for(var ad in this){ad.charCodeAt(0)===T&&ab.call(this,ad.substring(1))}}}),oS.behavior={},oS.rebind=function(af,ab){for(var ag,ah=1,ad=arguments.length;++ah<ad;){af[ag=arguments[ah]]=a2(af,ab,ab[ag])}return af};var ng=["webkit","ms","moz","Moz","o","O"];oS.dispatch=function(){for(var af=new ia(),ad=-1,ab=arguments.length;++ad<ab;){af[arguments[ad]]=jn(af)}return af},ia.prototype.on=function(af,ad){var ag=af.indexOf("."),ab="";if(ag>=0&&(ab=af.substring(ag+1),af=af.substring(0,ag)),af){return arguments.length<2?this[af].on(ab):this[af].on(ab,ad)}if(2===arguments.length){if(null==ad){for(af in this){this.hasOwnProperty(af)&&this[af].on(ab,null)}}return this}},oS.event=null,oS.requote=function(ab){return ab.replace(l6,"\\$&")};var l6=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,kg={}.__proto__?function(ab,ad){ab.__proto__=ad}:function(af,ad){for(var ab in ad){af[ab]=ad[ab]}},jw=function(ab,ad){return ad.querySelector(ab)},kU=function(ab,ad){return ad.querySelectorAll(ab)},me=bc[a8(bc,"matchesSelector")],oi=function(ab,ad){return me.call(ab,ad)};"function"==typeof Sizzle&&(jw=function(ab,ad){return Sizzle(ab,ad)[0]||null},kU=function(ab,ad){return Sizzle.uniqueSort(Sizzle(ab,ad))},oi=Sizzle.matchesSelector),oS.selection=function(){return ot};var jV=oS.selection.prototype=[];jV.select=function(ak){var ab,ah,am,ad,aj=[];ak=ce(ak);for(var al=-1,af=this.length;++al<af;){aj.push(ab=[]),ab.parentNode=(am=this[al]).parentNode;for(var ag=-1,an=am.length;++ag<an;){(ad=am[ag])?(ab.push(ah=ak.call(ad,ad.__data__,ag,al)),ah&&"__data__" in ad&&(ah.__data__=ad.__data__)):ab.push(null)}}return jr(aj)},jV.selectAll=function(ak){var ab,ah,am=[];ak=L(ak);for(var ad=-1,aj=this.length;++ad<aj;){for(var al=this[ad],af=-1,ag=al.length;++af<ag;){(ah=al[af])&&(am.push(ab=oC(ak.call(ah,ah.__data__,af,ad))),ab.parentNode=ah)}}return jr(am)};var mH={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};oS.ns={prefix:mH,qualify:function(af){var ad=af.indexOf(":"),ab=af;return ad>=0&&(ab=af.substring(0,ad),af=af.substring(ad+1)),mH.hasOwnProperty(ab)?{space:mH[ab],local:af}:af}},jV.attr=function(af,ad){if(arguments.length<2){if("string"==typeof af){var ab=this.node();return af=oS.ns.qualify(af),af.local?ab.getAttributeNS(af.space,af.local):ab.getAttribute(af)}for(ad in af){this.each(O(ad,af[ad]))}return this}return this.each(O(af,ad))},jV.classed=function(af,ab){if(arguments.length<2){if("string"==typeof af){var ag=this.node(),ah=(af=kq(af)).length,ad=-1;if(ab=ag.classList){for(;++ad<ah;){if(!ab.contains(af[ad])){return !1}}}else{for(ab=ag.getAttribute("class");++ad<ah;){if(!fe(af[ad]).test(ab)){return !1}}}return !0}for(ab in af){this.each(J(ab,af[ab]))}return this}return this.each(J(af,ab))},jV.style=function(af,ad,ag){var ab=arguments.length;if(3>ab){if("string"!=typeof af){2>ab&&(ad="");for(ag in af){this.each(F(ag,af[ag],ad))}return this}if(2>ab){return ct.getComputedStyle(this.node(),null).getPropertyValue(af)}ag=""}return this.each(F(af,ad,ag))},jV.property=function(ab,ad){if(arguments.length<2){if("string"==typeof ab){return this.node()[ab]}for(ad in ab){this.each(de(ad,ab[ad]))}return this}return this.each(de(ab,ad))},jV.text=function(ab){return arguments.length?this.each("function"==typeof ab?function(){var ad=ab.apply(this,arguments);this.textContent=null==ad?"":ad}:null==ab?function(){this.textContent=""}:function(){this.textContent=ab}):this.node().textContent},jV.html=function(ab){return arguments.length?this.each("function"==typeof ab?function(){var ad=ab.apply(this,arguments);this.innerHTML=null==ad?"":ad}:null==ab?function(){this.innerHTML=""}:function(){this.innerHTML=ab}):this.node().innerHTML},jV.append=function(ab){return ab=ca(ab),this.select(function(){return this.appendChild(ab.apply(this,arguments))})},jV.insert=function(ab,ad){return ab=ca(ab),ad=ce(ad),this.select(function(){return this.insertBefore(ab.apply(this,arguments),ad.apply(this,arguments)||null)})},jV.remove=function(){return this.each(function(){var ab=this.parentNode;ab&&ab.removeChild(this)})},jV.data=function(ak,ab){function ag(aB,aH){var ay,aw,aF,aA=aB.length,ap=aH.length,av=Math.min(aA,ap),aq=new Array(ap),aG=new Array(ap),az=new Array(aA);if(ab){var aE,ax=new jh(),aD=new jh(),aC=[];for(ay=-1;++ay<aA;){aE=ab.call(aw=aB[ay],aw.__data__,ay),ax.has(aE)?az[ay]=aw:ax.set(aE,aw),aC.push(aE)}for(ay=-1;++ay<ap;){aE=ab.call(aH,aF=aH[ay],ay),(aw=ax.get(aE))?(aq[ay]=aw,aw.__data__=aF):aD.has(aE)||(aG[ay]=jx(aF)),aD.set(aE,aF),ax.remove(aE)}for(ay=-1;++ay<aA;){ax.has(aC[ay])&&(az[ay]=aB[ay])}}else{for(ay=-1;++ay<av;){aw=aB[ay],aF=aH[ay],aw?(aw.__data__=aF,aq[ay]=aw):aG[ay]=jx(aF)}for(;ap>ay;++ay){aG[ay]=jx(aH[ay])}for(;aA>ay;++ay){az[ay]=aB[ay]}}aG.update=aq,aG.parentNode=aq.parentNode=az.parentNode=aB.parentNode,af.push(aG),an.push(aq),aj.push(az)}var am,ah,al=-1,ad=this.length;if(!arguments.length){for(ak=new Array(ad=(am=this[0]).length);++al<ad;){(ah=am[al])&&(ak[al]=ah.__data__)}return ak}var af=I([]),an=jr([]),aj=jr([]);if("function"==typeof ak){for(;++al<ad;){ag(am=this[al],ak.call(am,am.parentNode.__data__,al))}}else{for(;++al<ad;){ag(am=this[al],ak)}}return an.enter=function(){return af},an.exit=function(){return aj},an},jV.datum=function(ab){return arguments.length?this.property("__data__",ab):this.property("__data__")},jV.filter=function(ak){var ab,ah,am,ad=[];"function"!=typeof ak&&(ak=io(ak));for(var aj=0,al=this.length;al>aj;aj++){ad.push(ab=[]),ab.parentNode=(ah=this[aj]).parentNode;for(var af=0,ag=ah.length;ag>af;af++){(am=ah[af])&&ak.call(am,am.__data__,af,aj)&&ab.push(am)}}return jr(ad)},jV.order=function(){for(var af=-1,aj=this.length;++af<aj;){for(var ag,ah=this[af],ad=ah.length-1,ab=ah[ad];--ad>=0;){(ag=ah[ad])&&(ab&&ab!==ag.nextSibling&&ab.parentNode.insertBefore(ag,ab),ab=ag)}}return this},jV.sort=function(af){af=fs.apply(this,arguments);for(var ad=-1,ab=this.length;++ad<ab;){this[ad].sort(af)}return this.order()},jV.each=function(ab){return eu(this,function(ad,af,ag){ab.call(ad,ad.__data__,af,ag)})},jV.call=function(ab){var ad=oC(arguments);return ab.apply(ad[0]=this,ad),this},jV.empty=function(){return !this.node()},jV.node=function(){for(var af=0,aj=this.length;aj>af;af++){for(var ag=this[af],ah=0,ad=ag.length;ad>ah;ah++){var ab=ag[ah];if(ab){return ab}}}return null},jV.size=function(){var ab=0;return this.each(function(){++ab}),ab};var dc=[];oS.selection.enter=I,oS.selection.enter.prototype=dc,dc.append=jV.append,dc.empty=jV.empty,dc.node=jV.node,dc.call=jV.call,dc.size=jV.size,dc.select=function(ak){for(var ap,ag,am,ab,ah,al=[],ad=-1,af=this.length;++ad<af;){am=(ab=this[ad]).update,al.push(ap=[]),ap.parentNode=ab.parentNode;for(var an=-1,aj=ab.length;++an<aj;){(ah=ab[an])?(ap.push(am[an]=ag=ak.call(ab.parentNode,ah.__data__,an,ad)),ag.__data__=ah.__data__):ap.push(null)}}return jr(al)},dc.insert=function(ab,ad){return arguments.length<2&&(ad=ea(this)),jV.insert.call(this,ab,ad)},jV.transition=function(){for(var ak,ab,ah=m3||++ho,am=[],ad=pw||{time:Date.now(),ease:W,delay:0,duration:250},aj=-1,al=this.length;++aj<al;){am.push(ak=[]);for(var af=this[aj],ag=-1,an=af.length;++ag<an;){(ab=af[ag])&&kh(ab,ag,ah,ad),ak.push(ab)}}return of(am,ah)},jV.interrupt=function(){return this.each(fu)},oS.select=function(ab){var ad=["string"==typeof ab?jw(ab,mp):ab];return ad.parentNode=bc,jr([ad])},oS.selectAll=function(ab){var ad=oC("string"==typeof ab?kU(ab,mp):ab);return ad.parentNode=bc,jr([ad])};var ot=oS.select(bc);jV.on=function(af,ad,ag){var ab=arguments.length;if(3>ab){if("string"!=typeof af){2>ab&&(ad=!1);for(ag in af){this.each(kn(ag,af[ag],ad))}return this}if(2>ab){return(ab=this.node()["__on"+af])&&ab._}ag=!1}return this.each(kn(af,ad,ag))};var lq=oS.map({mouseenter:"mouseover",mouseleave:"mouseout"});lq.forEach(function(ab){"on"+ab in mp&&lq.remove(ab)});var pP="onselectstart" in mp?null:a8(bc.style,"userSelect"),H=0;oS.mouse=function(ab){return hc(ab,ky())};var pq=/WebKit/.test(ct.navigator.userAgent)?-1:0;oS.touches=function(ab,ad){return arguments.length<2&&(ad=ky().touches),ad?oC(ad).map(function(ag){var af=hc(ab,ag);return af.identifier=ag.identifier,af}):[]},oS.behavior.drag=function(){function ad(){this.on("mousedown.drag",af).on("touchstart.drag",ab)}function aj(){return oS.event.changedTouches[0].identifier}function ag(an,am){return oS.touches(an).filter(function(ap){return ap.identifier===am})[0]}function ah(an,am,ap,aq){return function(){function aG(){var aK=am(aB,az),aI=aK[0]-aE[0],aJ=aK[1]-aE[1];ax|=aI|aJ,aE=aK,ay({type:"drag",x:aK[0]+aw[0],y:aK[1]+aw[1],dx:aI,dy:aJ})}function aF(){aD.on(ap+"."+av,null).on(aq+"."+av,null),aH(ax&&oS.event.target===aA),ay({type:"dragend"})}var aw,aC=this,aB=aC.parentNode,ay=al.of(aC,arguments),aA=oS.event.target,az=an(),av=null==az?"drag":"drag-"+az,aE=am(aB,az),ax=0,aD=oS.select(ct).on(ap+"."+av,aG).on(aq+"."+av,aF),aH=dt();ak?(aw=ak.apply(aC,arguments),aw=[aw.x-aE[0],aw.y-aE[1]]):aw=[0,0],ay({type:"dragstart"})}}var al=ju(ad,"drag","dragstart","dragend"),ak=null,af=ah(a6,oS.mouse,"mousemove","mouseup"),ab=ah(aj,ag,"touchmove","touchend");return ad.origin=function(am){return arguments.length?(ak=am,ad):ak},oS.rebind(ad,al,"on")};var lX=Math.PI,kO=2*lX,g=lX/2,oo=0.000001,oX=oo*oo,kN=lX/180,eo=180/lX,a0=Math.SQRT2,oK=2,mA=4;oS.interpolateZoom=function(av,am){function ag(aD){var aC=aD*aB;if(aq){var aF=E(aA),aE=an/(oK*al)*(aF*gt(a0*aC+aA)-X(aA));return[az+aE*ah,ay+aE*ap,an*aF/E(a0*aC+aA)]}return[az+aD*ah,ay+aD*ap,an*Math.exp(a0*aC)]}var az=av[0],ay=av[1],an=av[2],aw=am[0],ab=am[1],ad=am[2],ah=aw-az,ap=ab-ay,aj=ah*ah+ap*ap,al=Math.sqrt(aj),ak=(ad*ad-an*an+mA*aj)/(2*an*oK*al),ax=(ad*ad-an*an-mA*aj)/(2*ad*oK*al),aA=Math.log(Math.sqrt(ak*ak+1)-ak),af=Math.log(Math.sqrt(ax*ax+1)-ax),aq=af-aA,aB=(aq||Math.log(ad/an))/a0;return ag.duration=1000*aB,ag},oS.behavior.zoom=function(){function aj(aN){aN.on(am,aq).on(ml+".zoom",aL).on(ap,ab).on("dblclick.zoom",aM).on(av,ag)}function aw(aN){return[(aN[0]-aJ.x)/aJ.k,(aN[1]-aJ.y)/aJ.k]}function aK(aN){return[aN[0]*aJ.k+aJ.x,aN[1]*aJ.k+aJ.y]}function an(aN){aJ.k=Math.max(ax[0],Math.min(ax[1],aN))}function ay(aN,aO){aO=aK(aO),aJ.x+=aN[0]-aO[0],aJ.y+=aN[1]-aO[1]}function ad(){aB&&aB.domain(aE.range().map(function(aN){return(aN-aJ.x)/aJ.k}).map(aE.invert)),aA&&aA.domain(aG.range().map(function(aN){return(aN-aJ.y)/aJ.k}).map(aG.invert))}function ak(aN){aN({type:"zoomstart"})}function aF(aN){ad(),aN({type:"zoom",scale:aJ.k,translate:[aJ.x,aJ.y]})}function aI(aN){aN({type:"zoomend"})}function aq(){function aQ(){aP=1,ay(oS.mouse(aS),aN),aF(aO)}function aU(){aV.on(ap,ct===aS?ab:null).on(aH,null),aR(aP&&oS.event.target===aT),aI(aO)}var aS=this,aO=aD.of(aS,arguments),aT=oS.event.target,aP=0,aV=oS.select(ct).on(ap,aQ).on(aH,aU),aN=aw(oS.mouse(aS)),aR=dt();fu.call(aS),ak(aO)}function ag(){function aV(){var bf=oS.touches(aY);return aZ=aJ.k,bf.forEach(function(bg){bg.identifier in aQ&&(aQ[bg.identifier]=aw(bg))}),bf}function aR(){for(var bj=oS.event.changedTouches,bm=0,bf=bj.length;bf>bm;++bm){aQ[bj[bm].identifier]=null}var bn=aV(),bk=Date.now();if(1===bn.length){if(500>bk-aC){var bh=bn[0],bg=aQ[bh.identifier];an(2*aJ.k),ay(bh,bg),ac(),aF(aX)}aC=bk}else{if(bn.length>1){var bh=bn[0],bl=bn[1],bq=bh[0]-bl[0],bp=bh[1]-bl[1];aP=bq*bq+bp*bp}}}function bd(){for(var bj,bk,bp,bg,bm=oS.touches(aY),bn=0,bl=bm.length;bl>bn;++bn,bg=null){if(bp=bm[bn],bg=aQ[bp.identifier]){if(bk){break}bj=bp,bk=bg}}if(bg){var bh=(bh=bp[0]-bj[0])*bh+(bh=bp[1]-bj[1])*bh,bf=aP&&Math.sqrt(bh/aP);bj=[(bj[0]+bp[0])/2,(bj[1]+bp[1])/2],bk=[(bk[0]+bg[0])/2,(bk[1]+bg[1])/2],an(bf*aZ)}aC=null,ay(bj,bk),aF(aX)}function aW(){if(oS.event.touches.length){for(var bj=oS.event.changedTouches,bg=0,bh=bj.length;bh>bg;++bg){delete aQ[bj[bg].identifier]}for(var bf in aQ){return void aV()}}bb.on(aO,null).on(aS,null),aT.on(am,aq).on(av,ag),aN(),aI(aX)}var aZ,aY=this,aX=aD.of(aY,arguments),aQ={},aP=0,aU=oS.event.changedTouches[0].identifier,aO="touchmove.zoom-"+aU,aS="touchend.zoom-"+aU,bb=oS.select(ct).on(aO,bd).on(aS,aW),aT=oS.select(aY).on(am,null).on(av,aR),aN=dt();fu.call(aY),aR(),ak(aX)}function aL(){var aN=aD.of(this,arguments);ah?clearTimeout(ah):(fu.call(this),ak(aN)),ah=setTimeout(function(){ah=null,aI(aN)},50),ac();var aO=az||oS.mouse(this);al||(al=aw(aO)),an(Math.pow(2,0.002*kE())*aJ.k),ay(aO,al),aF(aN)}function ab(){al=null}function aM(){var aP=aD.of(this,arguments),aQ=oS.mouse(this),aO=aw(aQ),aN=Math.log(aJ.k)/Math.LN2;ak(aP),an(Math.pow(2,oS.event.shiftKey?Math.ceil(aN)-1:Math.floor(aN)+1)),ay(aQ,aO),aF(aP),aI(aP)}var al,az,ah,aC,aE,aB,aG,aA,aJ={x:0,y:0,k:1},af=[960,500],ax=nK,am="mousedown.zoom",ap="mousemove.zoom",aH="mouseup.zoom",av="touchstart.zoom",aD=ju(aj,"zoomstart","zoom","zoomend");return aj.event=function(aN){aN.each(function(){var aP=aD.of(this,arguments),aO=aJ;m3?oS.select(this).transition().each("start.zoom",function(){aJ=this.__chart__||{x:0,y:0,k:1},ak(aP)}).tween("zoom:zoom",function(){var aQ=af[0],aR=af[1],aT=aQ/2,aS=aR/2,aU=oS.interpolateZoom([(aT-aJ.x)/aJ.k,(aS-aJ.y)/aJ.k,aQ/aJ.k],[(aT-aO.x)/aO.k,(aS-aO.y)/aO.k,aQ/aO.k]);return function(aX){var aW=aU(aX),aV=aQ/aW[2];this.__chart__=aJ={x:aT-aW[0]*aV,y:aS-aW[1]*aV,k:aV},aF(aP)}}).each("end.zoom",function(){aI(aP)}):(this.__chart__=aJ,ak(aP),aF(aP),aI(aP))})},aj.translate=function(aN){return arguments.length?(aJ={x:+aN[0],y:+aN[1],k:aJ.k},ad(),aj):[aJ.x,aJ.y]},aj.scale=function(aN){return arguments.length?(aJ={x:aJ.x,y:aJ.y,k:+aN},ad(),aj):aJ.k},aj.scaleExtent=function(aN){return arguments.length?(ax=null==aN?nK:[+aN[0],+aN[1]],aj):ax},aj.center=function(aN){return arguments.length?(az=aN&&[+aN[0],+aN[1]],aj):az},aj.size=function(aN){return arguments.length?(af=aN&&[+aN[0],+aN[1]],aj):af},aj.x=function(aN){return arguments.length?(aB=aN,aE=aN.copy(),aJ={x:0,y:0,k:1},aj):aB},aj.y=function(aN){return arguments.length?(aA=aN,aG=aN.copy(),aJ={x:0,y:0,k:1},aj):aA},oS.rebind(aj,aD,"on")};var kE,nK=[0,1/0],ml="onwheel" in mp?(kE=function(){return -oS.event.deltaY*(oS.event.deltaMode?120:1)},"wheel"):"onmousewheel" in mp?(kE=function(){return oS.event.wheelDelta},"mousewheel"):(kE=function(){return -oS.event.detail},"MozMousePixelScroll");iw.prototype.toString=function(){return this.rgb()+""},oS.hsl=function(af,ad,ab){return 1===arguments.length?af instanceof ee?ji(af.h,af.s,af.l):da(""+af,ly,ji):ji(+af,+ad,+ab)};var lC=ee.prototype=new iw();lC.brighter=function(ab){return ab=Math.pow(0.7,arguments.length?ab:1),ji(this.h,this.s,this.l/ab)},lC.darker=function(ab){return ab=Math.pow(0.7,arguments.length?ab:1),ji(this.h,this.s,ab*this.l)},lC.rgb=function(){return mX(this.h,this.s,this.l)},oS.hcl=function(af,ad,ab){return 1===arguments.length?af instanceof ll?o5(af.h,af.c,af.l):af instanceof lD?bt(af.l,af.a,af.b):bt((af=U((af=oS.rgb(af)).r,af.g,af.b)).l,af.a,af.b):o5(+af,+ad,+ab)};var lN=ll.prototype=new iw();lN.brighter=function(ab){return o5(this.h,this.c,Math.min(100,this.l+M*(arguments.length?ab:1)))},lN.darker=function(ab){return o5(this.h,this.c,Math.max(0,this.l-M*(arguments.length?ab:1)))},lN.rgb=function(){return mM(this.h,this.c,this.l).rgb()},oS.lab=function(af,ad,ab){return 1===arguments.length?af instanceof lD?n7(af.l,af.a,af.b):af instanceof ll?mM(af.l,af.c,af.h):U((af=oS.rgb(af)).r,af.g,af.b):n7(+af,+ad,+ab)};var M=18,pH=0.95047,jm=1,nU=1.08883,v=lD.prototype=new iw();v.brighter=function(ab){return n7(Math.min(100,this.l+M*(arguments.length?ab:1)),this.a,this.b)},v.darker=function(ab){return n7(Math.max(0,this.l-M*(arguments.length?ab:1)),this.a,this.b)},v.rgb=function(){return nA(this.l,this.a,this.b)},oS.rgb=function(af,ad,ab){return 1===arguments.length?af instanceof mJ?jg(af.r,af.g,af.b):da(""+af,jg,mX):jg(~~af,~~ad,~~ab)};var mV=mJ.prototype=new iw();mV.brighter=function(af){af=Math.pow(0.7,arguments.length?af:1);var ab=this.r,ag=this.g,ah=this.b,ad=30;return ab||ag||ah?(ab&&ad>ab&&(ab=ad),ag&&ad>ag&&(ag=ad),ah&&ad>ah&&(ah=ad),jg(Math.min(255,~~(ab/af)),Math.min(255,~~(ag/af)),Math.min(255,~~(ah/af)))):jg(ad,ad,ad)},mV.darker=function(ab){return ab=Math.pow(0.7,arguments.length?ab:1),jg(~~(ab*this.r),~~(ab*this.g),~~(ab*this.b))},mV.hsl=function(){return ly(this.r,this.g,this.b)},mV.toString=function(){return"#"+o(this.r)+o(this.g)+o(this.b)};var m4=oS.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});m4.forEach(function(ab,ad){m4.set(ab,kK(ad))}),oS.functor=o4,oS.xhr=pL(ge),oS.dsv=function(ak,ab){function ah(ap,av,an){arguments.length<3&&(an=av,av=null);var aq=mo(ap,ab,null==av?am:ad(av),an);return aq.row=function(aw){return arguments.length?aq.response(null==(av=aw)?am:ad(aw)):av},aq}function am(an){return ah.parse(an.responseText)}function ad(an){return function(ap){return ah.parse(ap.responseText,an)}}function aj(an){return an.map(al).join(ak)}function al(an){return af.test(an)?'"'+an.replace(/\"/g,'""')+'"':an}var af=new RegExp('["'+ak+"\n]"),ag=ak.charCodeAt(0);return ah.parse=function(ap,an){var aq;return ah.parseRows(ap,function(av,aw){if(aq){return aq(av,aw-1)}var ax=new Function("d","return {"+av.map(function(ay,az){return JSON.stringify(ay)+": d["+az+"]"}).join(",")+"}");aq=an?function(ay,az){return an(ax(ay),az)}:ax})},ah.parseRows=function(az,aC){function ap(){if(ay>=aB){return aA}if(aD){return aD=!1,ax}var aG=ay;if(34===az.charCodeAt(aG)){for(var aF=aG;aF++<aB;){if(34===az.charCodeAt(aF)){if(34!==az.charCodeAt(aF+1)){break}++aF}}ay=aF+2;var aE=az.charCodeAt(aF+1);return 13===aE?(aD=!0,10===az.charCodeAt(aF+2)&&++ay):10===aE&&(aD=!0),az.substring(aG+1,aF).replace(/""/g,'"')}for(;aB>ay;){var aE=az.charCodeAt(ay++),aH=1;if(10===aE){aD=!0}else{if(13===aE){aD=!0,10===az.charCodeAt(ay)&&(++ay,++aH)}else{if(aE!==ag){continue}}}return az.substring(aG,ay-aH)}return az.substring(aG)}for(var aw,aD,ax={},aA={},an=[],aB=az.length,ay=0,aq=0;(aw=ap())!==aA;){for(var av=[];aw!==ax&&aw!==aA;){av.push(aw),aw=ap()}(!aC||(av=aC(av,aq++)))&&an.push(av)}return an},ah.format=function(aq){if(Array.isArray(aq[0])){return ah.formatRows(aq)}var ap=new ks(),an=[];return aq.forEach(function(av){for(var aw in av){ap.has(aw)||an.push(ap.add(aw))}}),[an.map(al).join(ak)].concat(aq.map(function(av){return an.map(function(aw){return al(av[aw])}).join(ak)})).join("\n")},ah.formatRows=function(an){return an.map(aj).join("\n")},ah},oS.csv=oS.dsv(",","text/csv"),oS.tsv=oS.dsv("\t","text/tab-separated-values");var oB,nJ,px,lW,hr,pa=ct[a8(ct,"requestAnimationFrame")]||function(ab){setTimeout(ab,17)};oS.timer=function(af,aj,ag){var ah=arguments.length;2>ah&&(aj=0),3>ah&&(ag=Date.now());var ad=ag+aj,ab={c:af,t:ad,f:!1,n:null};nJ?nJ.n=ab:oB=ab,nJ=ab,px||(lW=clearTimeout(lW),px=1,pa(py))},oS.timer.flush=function(){np(),pj()},oS.round=function(ab,ad){return ad?Math.round(ab*(ad=Math.pow(10,ad)))/ad:Math.round(ab)};var jv=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"].map(lb);oS.formatPrefix=function(af,ad){var ab=0;return af&&(0>af&&(af*=-1),ad&&(af=oS.round(af,hu(af,ad))),ab=1+Math.floor(1e-12+Math.log(af)/Math.LN10),ab=Math.max(-24,Math.min(24,3*Math.floor((0>=ab?ab+1:ab-1)/3)))),jv[8+ab/3]};var lG=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,lP=oS.map({b:function(ab){return ab.toString(2)},c:function(ab){return String.fromCharCode(ab)},o:function(ab){return ab.toString(8)},x:function(ab){return ab.toString(16)},X:function(ab){return ab.toString(16).toUpperCase()},g:function(ab,ad){return ab.toPrecision(ad)},e:function(ab,ad){return ab.toExponential(ad)},f:function(ab,ad){return ab.toFixed(ad)},r:function(ab,ad){return(ab=oS.round(ab,hu(ab,ad))).toFixed(Math.max(0,Math.min(20,hu(ab*(1+1e-15),ad))))}}),oI=oS.time={},gc=Date;la.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){n8.setUTCDate.apply(this._,arguments)},setDay:function(){n8.setUTCDay.apply(this._,arguments)},setFullYear:function(){n8.setUTCFullYear.apply(this._,arguments)},setHours:function(){n8.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){n8.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){n8.setUTCMinutes.apply(this._,arguments)},setMonth:function(){n8.setUTCMonth.apply(this._,arguments)},setSeconds:function(){n8.setUTCSeconds.apply(this._,arguments)},setTime:function(){n8.setTime.apply(this._,arguments)}};var n8=Date.prototype;oI.year=mW(function(ab){return ab=oI.day(ab),ab.setMonth(0,1),ab},function(ab,ad){ab.setFullYear(ab.getFullYear()+ad)},function(ab){return ab.getFullYear()}),oI.years=oI.year.range,oI.years.utc=oI.year.utc.range,oI.day=mW(function(ab){var ad=new gc(2000,0);return ad.setFullYear(ab.getFullYear(),ab.getMonth(),ab.getDate()),ad},function(ab,ad){ab.setDate(ab.getDate()+ad)},function(ab){return ab.getDate()-1}),oI.days=oI.day.range,oI.days.utc=oI.day.utc.range,oI.dayOfYear=function(ab){var ad=oI.year(ab);return Math.floor((ab-ad-60000*(ab.getTimezoneOffset()-ad.getTimezoneOffset()))/86400000)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(af,ad){ad=7-ad;var ab=oI[af]=mW(function(ag){return(ag=oI.day(ag)).setDate(ag.getDate()-(ag.getDay()+ad)%7),ag},function(ag,ah){ag.setDate(ag.getDate()+7*Math.floor(ah))},function(ag){var ah=oI.year(ag).getDay();return Math.floor((oI.dayOfYear(ag)+(ah+ad)%7)/7)-(ah!==ad)});oI[af+"s"]=ab.range,oI[af+"s"].utc=ab.utc.range,oI[af+"OfYear"]=function(ag){var ah=oI.year(ag).getDay();return Math.floor((oI.dayOfYear(ag)+(ah+ad)%7)/7)}}),oI.week=oI.sunday,oI.weeks=oI.sunday.range,oI.weeks.utc=oI.sunday.utc.range,oI.weekOfYear=oI.sundayOfYear;var ph={"-":"",_:" ",0:"0"},lc=/^\s*\d+/,nl=/^%/;oS.locale=function(ab){return{numberFormat:A(ab),timeFormat:lr(ab)}};var ae=oS.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});oS.format=ae.numberFormat,oS.geo={},oa.prototype={s:0,t:0,add:function(ab){nB(ab,this.t,ao),nB(ao.s,this.s,this),this.s?this.t+=ao.t:this.s=ao.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ao=new oa();oS.geo.stream=function(ab,ad){ab&&nk.hasOwnProperty(ab.type)?nk[ab.type](ab,ad):lg(ab,ad)};var nk={Feature:function(ab,ad){lg(ab.geometry,ad)},FeatureCollection:function(af,ab){for(var ag=af.features,ah=-1,ad=ag.length;++ah<ad;){lg(ag[ah].geometry,ab)}}},l8={Sphere:function(ab,ad){ad.sphere()},Point:function(ab,ad){ab=ab.coordinates,ad.point(ab[0],ab[1],ab[2])},MultiPoint:function(af,ab){for(var ag=af.coordinates,ah=-1,ad=ag.length;++ah<ad;){af=ag[ah],ab.point(af[0],af[1],af[2])}},LineString:function(ab,ad){nm(ab.coordinates,ad,0)},MultiLineString:function(af,ab){for(var ag=af.coordinates,ah=-1,ad=ag.length;++ah<ad;){nm(ag[ah],ab,0)}},Polygon:function(ab,ad){ai(ab.coordinates,ad)},MultiPolygon:function(af,ab){for(var ag=af.coordinates,ah=-1,ad=ag.length;++ah<ad;){ai(ag[ah],ab)}},GeometryCollection:function(af,ab){for(var ag=af.geometries,ah=-1,ad=ag.length;++ah<ad;){lg(ag[ah],ab)}}};oS.geo.area=function(ab){return ki=0,oS.geo.stream(ab,kW),ki};var ki,jz=new oa(),kW={sphere:function(){ki+=4*lX},point:a6,lineStart:a6,lineEnd:a6,polygonStart:function(){jz.reset(),kW.lineStart=a1},polygonEnd:function(){var ab=2*jz;ki+=0>ab?4*lX+ab:ab,kW.lineStart=kW.lineEnd=kW.point=a6}};oS.geo.bounds=function(){function aw(aG,aF){aA.push(aE=[ap=aG,am=aG]),aj>aF&&(aj=aF),aF>ak&&(ak=aF)}function aC(aI,aL){var aP=nr([aI*kN,aL*kN]);if(av){var aJ=km(av,aP),aM=[aJ[1],-aJ[0],0],aN=km(aM,aJ);mn(aN),aN=b(aN);var aF=aI-ay,aH=aF>0?1:-1,aK=aN[0]*eo*aH,aG=ni(aF)>180;if(aG^(aK>aH*ay&&aH*aI>aK)){var aO=aN[1]*eo;aO>ak&&(ak=aO)}else{if(aK=(aK+360)%360-180,aG^(aK>aH*ay&&aH*aI>aK)){var aO=-aN[1]*eo;aj>aO&&(aj=aO)}else{aj>aL&&(aj=aL),aL>ak&&(ak=aL)}}aG?ay>aI?ad(ap,aI)>ad(ap,am)&&(am=aI):ad(aI,am)>ad(ap,am)&&(ap=aI):am>=ap?(ap>aI&&(ap=aI),aI>am&&(am=aI)):aI>ay?ad(ap,aI)>ad(ap,am)&&(am=aI):ad(aI,am)>ad(ap,am)&&(ap=aI)}else{aw(aI,aL)}av=aP,ay=aI}function ah(){ab.point=aC}function az(){aE[0]=ap,aE[1]=am,ab.point=aw,av=null}function al(aG,aH){if(av){var aF=aG-ay;aD+=ni(aF)>180?aF+(aF>0?360:-360):aF}else{aq=aG,ag=aH}kW.point(aG,aH),aC(aG,aH)}function an(){kW.lineStart()}function ax(){al(aq,ag),kW.lineEnd(),ni(aD)>oo&&(ap=-(am=180)),aE[0]=ap,aE[1]=am,av=null}function ad(aG,aF){return(aF-=aG)<0?aF+360:aF}function af(aG,aF){return aG[0]-aF[0]}function aB(aG,aF){return aF[0]<=aF[1]?aF[0]<=aG&&aG<=aF[1]:aG<aF[0]||aF[1]<aG}var ap,aj,am,ak,ay,aq,ag,av,aD,aA,aE,ab={point:aw,lineStart:ah,lineEnd:az,polygonStart:function(){ab.point=al,ab.lineStart=an,ab.lineEnd=ax,aD=0,kW.polygonStart()},polygonEnd:function(){kW.polygonEnd(),ab.point=aw,ab.lineStart=ah,ab.lineEnd=az,0>jz?(ap=-(am=180),aj=-(ak=90)):aD>oo?ak=90:-oo>aD&&(aj=-90),aE[0]=ap,aE[1]=am}};return function(aI){ak=am=-(ap=aj=1/0),aA=[],oS.geo.stream(aI,ab);var aL=aA.length;if(aL){aA.sort(af);for(var aH,aK=1,aG=aA[0],aM=[aG];aL>aK;++aK){aH=aA[aK],aB(aH[0],aG)||aB(aH[1],aG)?(ad(aG[0],aH[1])>ad(aG[0],aG[1])&&(aG[1]=aH[1]),ad(aH[0],aG[1])>ad(aG[0],aG[1])&&(aG[0]=aH[0])):aM.push(aG=aH)}for(var aF,aH,aJ=-1/0,aL=aM.length-1,aK=0,aG=aM[aL];aL>=aK;aG=aH,++aK){aH=aM[aK],(aF=ad(aG[1],aH[0]))>aJ&&(aJ=aF,ap=aH[0],am=aG[1])}}return aA=aE=null,1/0===ap||1/0===aj?[[0/0,0/0],[0/0,0/0]]:[[ap,aj],[am,ak]]}}(),oS.geo.centroid=function(af){mh=om=jW=mI=ds=ow=lt=pQ=K=pu=lZ=0,oS.geo.stream(af,kQ);var ab=K,ag=pu,ah=lZ,ad=ab*ab+ag*ag+ah*ah;return oX>ad&&(ab=ow,ag=lt,ah=pQ,oo>om&&(ab=jW,ag=mI,ah=ds),ad=ab*ab+ag*ag+ah*ah,oX>ad)?[0/0,0/0]:[Math.atan2(ag,ab)*eo,ha(ah/Math.sqrt(ad))*eo]};var mh,om,jW,mI,ds,ow,lt,pQ,K,pu,lZ,kQ={sphere:a6,point:mK,lineStart:oN,lineEnd:lx,polygonStart:function(){kQ.lineStart=pR},polygonEnd:function(){kQ.lineStart=oN}},j=pk(iu,a9,mE,[-lX,-lX/2]),or=1000000000;oS.geo.clipExtent=function(){var af,ak,ah,aj,ad,ab,ag={stream:function(al){return ad&&(ad.valid=!1),ad=ab(al),ad.valid=!0,ad},extent:function(al){return arguments.length?(ab=k5(af=+al[0][0],ak=+al[0][1],ah=+al[1][0],aj=+al[1][1]),ad&&(ad.valid=!1,ad=null),ag):[[af,ak],[ah,aj]]}};return ag.extent([[0,0],[960,500]])},(oS.geo.conicEqualArea=function(){return lQ(V)}).raw=V,oS.geo.albers=function(){return oS.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)},oS.geo.albersUsa=function(){function ak(ap){var an=ap[0],aq=ap[1];return ab=null,ah(an,aq),ab||(am(an,aq),ab)||ad(an,aq),ab}var ab,ah,am,ad,aj=oS.geo.albers(),al=oS.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),af=oS.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),ag={point:function(ap,an){ab=[ap,an]}};return ak.invert=function(ap){var aw=aj.scale(),aq=aj.translate(),av=(ap[0]-aq[0])/aw,an=(ap[1]-aq[1])/aw;return(an>=0.12&&0.234>an&&av>=-0.425&&-0.214>av?al:an>=0.166&&0.234>an&&av>=-0.214&&-0.115>av?af:aj).invert(ap)},ak.stream=function(ap){var an=aj.stream(ap),aq=al.stream(ap),av=af.stream(ap);return{point:function(aw,ax){an.point(aw,ax),aq.point(aw,ax),av.point(aw,ax)},sphere:function(){an.sphere(),aq.sphere(),av.sphere()},lineStart:function(){an.lineStart(),aq.lineStart(),av.lineStart()},lineEnd:function(){an.lineEnd(),aq.lineEnd(),av.lineEnd()},polygonStart:function(){an.polygonStart(),aq.polygonStart(),av.polygonStart()},polygonEnd:function(){an.polygonEnd(),aq.polygonEnd(),av.polygonEnd()}}},ak.precision=function(an){return arguments.length?(aj.precision(an),al.precision(an),af.precision(an),ak):aj.precision()},ak.scale=function(an){return arguments.length?(aj.scale(an),al.scale(0.35*an),af.scale(an),ak.translate(aj.translate())):aj.scale()},ak.translate=function(av){if(!arguments.length){return aj.translate()}var aq=aj.scale(),an=+av[0],ap=+av[1];return ah=aj.translate(av).clipExtent([[an-0.455*aq,ap-0.238*aq],[an+0.455*aq,ap+0.238*aq]]).stream(ag).point,am=al.translate([an-0.307*aq,ap+0.201*aq]).clipExtent([[an-0.425*aq+oo,ap+0.12*aq+oo],[an-0.214*aq-oo,ap+0.234*aq-oo]]).stream(ag).point,ad=af.translate([an-0.205*aq,ap+0.212*aq]).clipExtent([[an-0.214*aq+oo,ap+0.166*aq+oo],[an-0.115*aq-oo,ap+0.234*aq-oo]]).stream(ag).point,ak},ak.scale(1070)};var o2,kP,fa,a4,oM,mC,kI={point:a6,lineStart:a6,lineEnd:a6,polygonStart:function(){kP=0,kI.lineStart=pM},polygonEnd:function(){kI.lineStart=kI.lineEnd=kI.point=a6,o2+=ni(kP/2)}},nX={point:js,lineStart:a6,lineEnd:a6,polygonStart:a6,polygonEnd:a6},mm={point:m9,lineStart:nc,lineEnd:oG,polygonStart:function(){mm.lineStart=n0},polygonEnd:function(){mm.point=m9,mm.lineStart=nc,mm.lineEnd=oG}};oS.geo.path=function(){function ad(am){return am&&("function"==typeof ab&&ak.pointRadius(+ab.apply(this,arguments)),af&&af.valid||(af=al(ak)),oS.geo.stream(am,af)),ak.result()}function aj(){return af=null,ad}var ag,ah,al,ak,af,ab=4.5;return ad.area=function(am){return o2=0,oS.geo.stream(am,al(kI)),o2},ad.centroid=function(am){return jW=mI=ds=ow=lt=pQ=K=pu=lZ=0,oS.geo.stream(am,al(mm)),lZ?[K/lZ,pu/lZ]:pQ?[ow/pQ,lt/pQ]:ds?[jW/ds,mI/ds]:[0/0,0/0]},ad.bounds=function(am){return oM=mC=-(fa=a4=1/0),oS.geo.stream(am,al(nX)),[[fa,a4],[oM,mC]]},ad.projection=function(am){return arguments.length?(al=(ag=am)?am.stream||ht(am):ge,aj()):ag},ad.context=function(am){return arguments.length?(ak=null==(ah=am)?new nZ():new ou(am),"function"!=typeof ab&&ak.pointRadius(ab),aj()):ah},ad.pointRadius=function(am){return arguments.length?(ab="function"==typeof am?am:(ak.pointRadius(+am),+am),ad):ab},ad.projection(oS.geo.albersUsa()).context(null)},oS.geo.transform=function(ab){return{stream:function(ad){var af=new r(ad);for(var ag in ab){af[ag]=ab[ag]}return af}}},r.prototype={point:function(ab,ad){this.stream.point(ab,ad)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},oS.geo.projection=lK,oS.geo.projectionMutator=mT,(oS.geo.equirectangular=function(){return lK(li)}).raw=li.invert=li,oS.geo.rotation=function(ab){function ad(af){return af=ab(af[0]*kN,af[1]*kN),af[0]*=eo,af[1]*=eo,af}return ab=nV(ab[0]%360*kN,ab[1]*kN,ab.length>2?ab[2]*kN:0),ad.invert=function(af){return af=ab.invert(af[0]*kN,af[1]*kN),af[0]*=eo,af[1]*=eo,af},ad},oq.invert=li,oS.geo.circle=function(){function af(){var aj="function"==typeof ah?ah.apply(this,arguments):ah,ak=nV(-aj[0]*kN,-aj[1]*kN,0).invert,al=[];return ag(null,null,1,{point:function(an,am){al.push(an=ak(an,am)),an[0]*=eo,an[1]*=eo}}),{type:"Polygon",coordinates:[al]}}var ab,ag,ah=[0,0],ad=6;return af.origin=function(aj){return arguments.length?(ah=aj,af):ah},af.angle=function(aj){return arguments.length?(ag=ix((ab=+aj)*kN,ad*kN),af):ab},af.precision=function(aj){return arguments.length?(ag=ix(ab*kN,(ad=+aj)*kN),af):ad},af.angle(90)},oS.geo.distance=function(aj,am){var ad,an=(am[0]-aj[0])*kN,ap=aj[1]*kN,ag=am[1]*kN,ak=Math.sin(an),aq=Math.cos(an),ab=Math.sin(ap),al=Math.cos(ap),ah=Math.sin(ag),af=Math.cos(ag);return Math.atan2(Math.sqrt((ad=af*ak)*ad+(ad=al*ah-ab*af*aq)*ad),ab*ah+al*af*aq)},oS.geo.graticule=function(){function av(){return{type:"MultiLineString",coordinates:am()}}function am(){return oS.range(Math.ceil(an/af)*af,ay,af).map(al).concat(oS.range(Math.ceil(ah/aq)*aq,ad,aq).map(ak)).concat(oS.range(Math.ceil(az/ax)*ax,ag,ax).filter(function(aC){return ni(aC%af)>oo}).map(ap)).concat(oS.range(Math.ceil(ab/aA)*aA,aw,aA).filter(function(aC){return ni(aC%aq)>oo}).map(aj))}var ag,az,ay,an,aw,ab,ad,ah,ap,aj,al,ak,ax=10,aA=ax,af=90,aq=360,aB=2.5;return av.lines=function(){return am().map(function(aC){return{type:"LineString",coordinates:aC}})},av.outline=function(){return{type:"Polygon",coordinates:[al(an).concat(ak(ad).slice(1),al(ay).reverse().slice(1),ak(ah).reverse().slice(1))]}},av.extent=function(aC){return arguments.length?av.majorExtent(aC).minorExtent(aC):av.minorExtent()},av.majorExtent=function(aC){return arguments.length?(an=+aC[0][0],ay=+aC[1][0],ah=+aC[0][1],ad=+aC[1][1],an>ay&&(aC=an,an=ay,ay=aC),ah>ad&&(aC=ah,ah=ad,ad=aC),av.precision(aB)):[[an,ah],[ay,ad]]},av.minorExtent=function(aC){return arguments.length?(az=+aC[0][0],ag=+aC[1][0],ab=+aC[0][1],aw=+aC[1][1],az>ag&&(aC=az,az=ag,ag=aC),ab>aw&&(aC=ab,ab=aw,aw=aC),av.precision(aB)):[[az,ab],[ag,aw]]},av.step=function(aC){return arguments.length?av.majorStep(aC).minorStep(aC):av.minorStep()},av.majorStep=function(aC){return arguments.length?(af=+aC[0],aq=+aC[1],av):[af,aq]},av.minorStep=function(aC){return arguments.length?(ax=+aC[0],aA=+aC[1],av):[ax,aA]},av.precision=function(aC){return arguments.length?(aB=+aC,ap=mt(ab,aw,90),aj=kG(az,ag,aB),al=mt(ah,ad,90),ak=kG(an,ay,aB),av):aB},av.majorExtent([[-180,-90+oo],[180,90-oo]]).minorExtent([[-180,-80-oo],[180,80+oo]])},oS.geo.greatArc=function(){function af(){return{type:"LineString",coordinates:[ab||ah.apply(this,arguments),ag||ad.apply(this,arguments)]}}var ab,ag,ah=mb,ad=ir;return af.distance=function(){return oS.geo.distance(ab||ah.apply(this,arguments),ag||ad.apply(this,arguments))},af.source=function(aj){return arguments.length?(ah=aj,ab="function"==typeof aj?null:aj,af):ah},af.target=function(aj){return arguments.length?(ad=aj,ag="function"==typeof aj?null:aj,af):ad},af.precision=function(){return arguments.length?af:0},af},oS.geo.interpolate=function(ab,ad){return mD(ab[0]*kN,ab[1]*kN,ad[0]*kN,ad[1]*kN)},oS.geo.length=function(ab){return lE=0,oS.geo.stream(ab,lO),lE};var lE,lO={sphere:a6,point:a6,lineStart:h,lineEnd:a6,polygonStart:a6,polygonEnd:a6},Q=ci(function(ab){return Math.sqrt(2/(1+ab))},function(ab){return 2*Math.asin(ab/2)});(oS.geo.azimuthalEqualArea=function(){return lK(Q)}).raw=Q;var pJ=ci(function(ab){var ad=Math.acos(ab);return ad&&ad/Math.sin(ad)},ge);(oS.geo.azimuthalEquidistant=function(){return lK(pJ)}).raw=pJ,(oS.geo.conicConformal=function(){return lQ(ls)}).raw=ls,(oS.geo.conicEquidistant=function(){return lQ(P)}).raw=P;var jp=ci(function(ab){return 1/ab},Math.atan);(oS.geo.gnomonic=function(){return lK(jp)}).raw=jp,pe.invert=function(ab,ad){return[ab,2*Math.atan(Math.exp(ad))-g]},(oS.geo.mercator=function(){return kt(pe)}).raw=pe;var nW=ci(function(){return 1},Math.asin);(oS.geo.orthographic=function(){return lK(nW)}).raw=nW;var y=ci(function(ab){return 1/(1+ab)},function(ab){return 2*Math.atan(ab)});(oS.geo.stereographic=function(){return lK(y)}).raw=y,o0.invert=function(ab,ad){return[-ad,2*Math.atan(Math.exp(ab))-g]},(oS.geo.transverseMercator=function(){var af=kt(o0),ad=af.center,ab=af.rotate;return af.center=function(ag){return ag?ad([-ag[1],ag[0]]):(ag=ad(),[-ag[1],ag[0]])},af.rotate=function(ag){return ag?ab([ag[0],ag[1],ag.length>2?ag[2]+90:90]):(ag=ab(),[ag[0],ag[1],ag[2]-90])},af.rotate([0,0])}).raw=o0,oS.geom={},oS.geom.hull=function(af){function ad(ap){if(ap.length<3){return[]}var am,an=o4(ag),ak=o4(ab),aq=ap.length,av=[],aw=[];for(am=0;aq>am;am++){av.push([+an.call(this,ap[am],am),+ak.call(this,ap[am],am),am])}for(av.sort(m2),am=0;aq>am;am++){aw.push([av[am][0],-av[am][1]])}var aj=mi(av),al=mi(aw),ax=al[0]===aj[0],ah=al[al.length-1]===aj[aj.length-1],ay=[];for(am=aj.length-1;am>=0;--am){ay.push(ap[av[aj[am]][2]])}for(am=+ax;am<al.length-ah;++am){ay.push(ap[av[al[am]][2]])}return ay}var ag=fo,ab=pI;return arguments.length?ad(af):(ad.x=function(ah){return arguments.length?(ag=ah,ad):ag},ad.y=function(ah){return arguments.length?(ab=ah,ad):ab},ad)},oS.geom.polygon=function(ab){return kg(ab,m5),ab};var m5=oS.geom.polygon.prototype=[];m5.area=function(){for(var af,ab=-1,ag=this.length,ah=this[ag-1],ad=0;++ab<ag;){af=ah,ah=this[ab],ad+=af[1]*ah[0]-af[0]*ah[1]}return 0.5*ad},m5.centroid=function(ad){var aj,ag,ah=-1,al=this.length,ak=0,af=0,ab=this[al-1];for(arguments.length||(ad=-1/(6*this.area()));++ah<al;){aj=ab,ab=this[ah],ag=aj[0]*ab[1]-ab[0]*aj[1],ak+=(aj[0]+ab[0])*ag,af+=(aj[1]+ab[1])*ag}return[ak*ad,af*ad]},m5.clip=function(ak){for(var ap,ag,am,ab,ah,al,ad=pf(ak),af=-1,an=this.length-pf(this),aj=this[an-1];++af<an;){for(ap=ak.slice(),ak.length=0,ab=this[af],ah=ap[(am=ap.length-ad)-1],ag=-1;++ag<am;){al=ap[ag],ps(al,aj,ab)?(ps(ah,aj,ab)||ak.push(nj(ah,al,aj,ab)),ak.push(al)):ps(ah,aj,ab)&&ak.push(nj(ah,al,aj,ab)),ah=al}ad&&ak.push(ak[0]),aj=ab}return ak};var m8,oE,nQ,pA,lY,hs=[],pg=[];lm.prototype.prepare=function(){for(var af,ad=this.edges,ab=ad.length;ab--;){af=ad[ab].edge,af.b&&af.a||ad.splice(ab,1)}return ad.sort(kj),ad.length},oH.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},mu.prototype={insert:function(af,ab){var ag,ah,ad;if(af){if(ab.P=af,ab.N=af.N,af.N&&(af.N.P=ab),af.N=ab,af.R){for(af=af.R;af.L;){af=af.L}af.L=ab}else{af.R=ab}ag=af}else{this._?(af=lU(this._),ab.P=null,ab.N=af,af.P=af.L=ab,ag=af):(ab.P=ab.N=null,this._=ab,ag=null)}for(ab.L=ab.R=null,ab.U=ag,ab.C=!0,af=ab;ag&&ag.C;){ah=ag.U,ag===ah.L?(ad=ah.R,ad&&ad.C?(ag.C=ad.C=!1,ah.C=!0,af=ah):(af===ag.R&&(di(this,ag),af=ag,ag=af.U),ag.C=!1,ah.C=!0,kc(this,ah))):(ad=ah.L,ad&&ad.C?(ag.C=ad.C=!1,ah.C=!0,af=ah):(af===ag.L&&(kc(this,ag),af=ag,ag=af.U),ag.C=!1,ah.C=!0,di(this,ah))),ag=af.U}this._.C=!1},remove:function(af){af.N&&(af.N.P=af.P),af.P&&(af.P.N=af.N),af.N=af.P=null;var ak,ah,aj,ad=af.U,ab=af.L,ag=af.R;if(ah=ab?ag?lU(ag):ab:ag,ad?ad.L===af?ad.L=ah:ad.R=ah:this._=ah,ab&&ag?(aj=ah.C,ah.C=af.C,ah.L=ab,ab.U=ah,ah!==ag?(ad=ah.U,ah.U=af.U,af=ah.R,ad.L=af,ah.R=ag,ag.U=ah):(ah.U=ad,ad=ah,af=ah.R)):(aj=af.C,af=ah),af&&(af.U=ad),!aj){if(af&&af.C){return af.C=!1,void 0}do{if(af===this._){break}if(af===ad.L){if(ak=ad.R,ak.C&&(ak.C=!1,ad.C=!0,di(this,ad),ak=ad.R),ak.L&&ak.L.C||ak.R&&ak.R.C){ak.R&&ak.R.C||(ak.L.C=!1,ak.C=!0,kc(this,ak),ak=ad.R),ak.C=ad.C,ad.C=ak.R.C=!1,di(this,ad),af=this._;break}}else{if(ak=ad.L,ak.C&&(ak.C=!1,ad.C=!0,kc(this,ad),ak=ad.L),ak.L&&ak.L.C||ak.R&&ak.R.C){ak.L&&ak.L.C||(ak.R.C=!1,ak.C=!0,di(this,ak),ak=ad.L),ak.C=ad.C,ad.C=ak.L.C=!1,kc(this,ad),af=this._;break}}ak.C=!0,af=ad,ad=ad.U}while(!af.C);af&&(af.C=!1)}}},oS.geom.voronoi=function(ad){function aj(an){var av=new Array(an.length),aq=ab[0][0],am=ab[0][1],aw=ab[1][0],ap=ab[1][1];return m0(ag(an),ab).cells.forEach(function(ax,az){var aB=ax.edges,ay=ax.site,aA=av[az]=aB.length?aB.map(function(aC){var aD=aC.start();return[aD.x,aD.y]}):ay.x>=aq&&ay.x<=aw&&ay.y>=am&&ay.y<=ap?[[aq,ap],[aw,ap],[aw,am],[aq,am]]:[];aA.point=an[az]}),av}function ag(am){return am.map(function(an,ap){return{x:Math.round(ak(an,ap)/oo)*oo,y:Math.round(af(an,ap)/oo)*oo,i:ap}})}var ah=fo,al=pI,ak=ah,af=al,ab=jy;return ad?aj(ad):(aj.links=function(am){return m0(ag(am)).edges.filter(function(an){return an.l&&an.r}).map(function(an){return{source:am[an.l.i],target:am[an.r.i]}})},aj.triangles=function(an){var am=[];return m0(ag(an)).cells.forEach(function(az,aw){for(var av,aB,aq=az.site,ax=az.edges.sort(kj),ay=-1,ap=ax.length,aC=ax[ap-1].edge,aA=aC.l===aq?aC.r:aC.l;++ay<ap;){av=aC,aB=aA,aC=ax[ay].edge,aA=aC.l===aq?aC.r:aC.l,aw<aB.i&&aw<aA.i&&lp(aq,aB,aA)<0&&am.push([an[aw],an[aB.i],an[aA.i]])}}),am},aj.x=function(am){return arguments.length?(ak=o4(ah=am),aj):ah},aj.y=function(am){return arguments.length?(af=o4(al=am),aj):al},aj.clipExtent=function(am){return arguments.length?(ab=null==am?jy:am,aj):ab===jy?null:ab},aj.size=function(am){return arguments.length?aj.clipExtent(am&&[[0,0],am]):ab===jy?null:ab&&ab[1]},aj)};var jy=[[-1000000,-1000000],[1000000,1000000]];oS.geom.delaunay=function(ab){return oS.geom.voronoi().triangles(ab)},oS.geom.quadtree=function(ak,ab,ah,am,ad){function aj(aG){function az(aT,aL,aP,aV,aM,aR,aU,aN){if(!isNaN(aP)&&!isNaN(aV)){if(aT.leaf){var aO=aT.x,aS=aT.y;if(null!=aO){if(ni(aO-aP)+ni(aS-aV)<0.01){aq(aT,aL,aP,aV,aM,aR,aU,aN)}else{var aQ=aT.point;aT.x=aT.y=aT.point=null,aq(aT,aQ,aO,aS,aM,aR,aU,aN),aq(aT,aL,aP,aV,aM,aR,aU,aN)}}else{aT.x=aP,aT.y=aV,aT.point=aL}}else{aq(aT,aL,aP,aV,aM,aR,aU,aN)}}}function aq(aV,aM,aQ,aX,aN,aW,aO,aP){var aL=0.5*(aN+aO),aU=0.5*(aW+aP),aR=aQ>=aL,aT=aX>=aU,aS=(aT<<1)+aR;aV.leaf=!1,aV=aV.nodes[aS]||(aV.nodes[aS]=lF()),aR?aN=aL:aO=aL,aT?aW=aU:aP=aU,az(aV,aM,aQ,aX,aN,aW,aO,aP)}var aD,aw,ay,ax,aH,aA,av,aE,aI,aF=o4(af),aJ=o4(ag);if(null!=ab){aA=ab,av=ah,aE=am,aI=ad}else{if(aE=aI=-(aA=av=1/0),aw=[],ay=[],aH=aG.length,al){for(ax=0;aH>ax;++ax){aD=aG[ax],aD.x<aA&&(aA=aD.x),aD.y<av&&(av=aD.y),aD.x>aE&&(aE=aD.x),aD.y>aI&&(aI=aD.y),aw.push(aD.x),ay.push(aD.y)}}else{for(ax=0;aH>ax;++ax){var an=+aF(aD=aG[ax],ax),ap=+aJ(aD,ax);aA>an&&(aA=an),av>ap&&(av=ap),an>aE&&(aE=an),ap>aI&&(aI=ap),aw.push(an),ay.push(ap)}}}var aC=aE-aA,aK=aI-av;aC>aK?aI=av+aC:aE=aA+aK;var aB=lF();if(aB.add=function(aL){az(aB,aL,+aF(aL,++ax),+aJ(aL,ax),aA,av,aE,aI)},aB.visit=function(aL){lV(aL,aB,aA,av,aE,aI)},ax=-1,null==ab){for(;++ax<aH;){az(aB,aG[ax],aw[ax],ay[ax],aA,av,aE,aI)}--ax}else{aG.forEach(aB.add)}return aw=ay=aG=aD=null,aB}var al,af=fo,ag=pI;return(al=arguments.length)?(af=mQ,ag=ob,3===al&&(ad=ah,am=ab,ah=ab=0),aj(ak)):(aj.x=function(an){return arguments.length?(af=an,aj):af},aj.y=function(an){return arguments.length?(ag=an,aj):ag},aj.extent=function(an){return arguments.length?(null==an?ab=ah=am=ad=null:(ab=+an[0][0],ah=+an[0][1],am=+an[1][0],ad=+an[1][1]),aj):null==ab?null:[[ab,ah],[am,ad]]},aj.size=function(an){return arguments.length?(null==an?ab=ah=am=ad=null:(ab=ah=0,am=+an[0],ad=+an[1]),aj):null==ab?null:[am-ab,ad-ah]},aj)},oS.interpolateRgb=t,oS.interpolateObject=jl,oS.interpolateNumber=ox,oS.interpolateString=my;var lH=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;oS.interpolate=kM,oS.interpolators=[function(af,ad){var ab=typeof ad;return("string"===ab?m4.has(ad)||/^(#|rgb\(|hsl\()/.test(ad)?t:my:ad instanceof iw?t:"object"===ab?Array.isArray(ad)?mj:jl:ox)(af,ad)}],oS.interpolateArray=mj;var mU=function(){return ge},o3=oS.map({linear:mU,poly:s,quad:function(){return ei},cubic:function(){return lB},sin:function(){return kz},exp:function(){return o7},circle:function(){return gs},elastic:pN,back:mq,bounce:function(){return nd}}),lj=oS.map({"in":ge,out:oA,"in-out":pl,"out-in":function(ab){return pl(oA(ab))}});oS.ease=function(af){var ad=af.indexOf("-"),ag=ad>=0?af.substring(0,ad):af,ab=ad>=0?af.substring(ad+1):"in";return ag=o3.get(ag)||mU,ab=lj.get(ab)||ge,jj(ab(ag.apply(null,m1.call(arguments,1))))},oS.interpolateHcl=pD,oS.interpolateHsl=nu,oS.interpolateLab=nD,oS.interpolateRound=ic,oS.transform=function(ab){var ad=mp.createElementNS(oS.ns.prefix.svg,"g");return(oS.transform=function(af){if(null!=af){ad.setAttribute("transform",af);var ag=ad.transform.baseVal.consolidate()}return new ld(ag?ag.matrix:os)})(ab)},ld.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var os={a:1,b:0,c:0,d:1,e:0,f:0};oS.interpolateTransform=mY,oS.layout={},oS.layout.bundle=function(){return function(af){for(var ad=[],ag=-1,ab=af.length;++ag<ab;){ad.push(n5(af[ag]))}return ad}},oS.layout.chord=function(){function ak(){var aA,aD,aB,aI,aG,aC={},aE=[],ax=oS.range(ah),az=[];for(ag=[],am=[],aA=0,aI=-1;++aI<ah;){for(aD=0,aG=-1;++aG<ah;){aD+=ab[aI][aG]}aE.push(aD),az.push(oS.range(ah)),aA+=aD}for(al&&ax.sort(function(aL,aK){return al(aE[aL],aE[aK])}),ad&&az.forEach(function(aL,aK){aL.sort(function(aM,aN){return ad(ab[aK][aM],ab[aK][aN])})}),aA=(kO-aj*ah)/aA,aD=0,aI=-1;++aI<ah;){for(aB=aD,aG=-1;++aG<ah;){var av=ax[aI],aJ=az[av][aG],ay=ab[av][aJ],aF=aD,aw=aD+=ay*aA;aC[av+"-"+aJ]={index:av,subindex:aJ,startAngle:aF,endAngle:aw,value:ay}}am[av]={index:av,startAngle:aB,endAngle:aD,value:(aD-aB)/aA},aD+=aj}for(aI=-1;++aI<ah;){for(aG=aI-1;++aG<ah;){var aH=aC[aI+"-"+aG],aq=aC[aG+"-"+aI];(aH.value||aq.value)&&ag.push(aH.value<aq.value?{source:aq,target:aH}:{source:aH,target:aq})}}af&&ap()}function ap(){ag.sort(function(av,aq){return af((av.source.value+av.target.value)/2,(aq.source.value+aq.target.value)/2)})}var ag,am,ab,ah,al,ad,af,an={},aj=0;return an.matrix=function(aq){return arguments.length?(ah=(ab=aq)&&ab.length,ag=am=null,an):ab},an.padding=function(aq){return arguments.length?(aj=aq,ag=am=null,an):aj},an.sortGroups=function(aq){return arguments.length?(al=aq,ag=am=null,an):al},an.sortSubgroups=function(aq){return arguments.length?(ad=aq,ag=null,an):ad},an.sortChords=function(aq){return arguments.length?(af=aq,ag&&ap(),an):af},an.chords=function(){return ag||ak(),ag},an.groups=function(){return am||ak(),am},an},oS.layout.force=function(){function av(aC){return function(aK,aF,aJ,aL){if(aK.point!==aC){var aG=aK.cx-aC.x,aI=aK.cy-aC.y,aD=aL-aF,aE=aG*aG+aI*aI;if(aE>aD*aD/af){if(ax>aE){var aH=aK.charge/aE;aC.px-=aG*aH,aC.py-=aI*aH}return !0}if(aK.point&&aE&&ax>aE){var aH=aK.pointCharge/aE;aC.px-=aG*aH,aC.py-=aI*aH}}return !aK.charge}}function am(aC){aC.px=oS.event.x,aC.py=oS.event.y,ab.resume()}var ag,az,ay,an,aw,ab={},ad=oS.dispatch("start","tick","end"),ah=[1,1],ap=0.9,aj=n3,al=lA,ak=-30,ax=nz,aA=0.1,af=0.64,aq=[],aB=[];return ab.tick=function(){if((az*=0.99)<0.005){return ad.end({type:"end",alpha:az=0}),!0}var aF,aD,aK,aE,aG,aI,aM,aJ,aC,aH=aq.length,aL=aB.length;for(aD=0;aL>aD;++aD){aK=aB[aD],aE=aK.source,aG=aK.target,aJ=aG.x-aE.x,aC=aG.y-aE.y,(aI=aJ*aJ+aC*aC)&&(aI=az*an[aD]*((aI=Math.sqrt(aI))-ay[aD])/aI,aJ*=aI,aC*=aI,aG.x-=aJ*(aM=aE.weight/(aG.weight+aE.weight)),aG.y-=aC*aM,aE.x+=aJ*(aM=1-aM),aE.y+=aC*aM)}if((aM=az*aA)&&(aJ=ah[0]/2,aC=ah[1]/2,aD=-1,aM)){for(;++aD<aH;){aK=aq[aD],aK.x+=(aJ-aK.x)*aM,aK.y+=(aC-aK.y)*aM}}if(ak){for(pt(aF=oS.geom.quadtree(aq),az,aw),aD=-1;++aD<aH;){(aK=aq[aD]).fixed||aF.visit(av(aK))}}for(aD=-1;++aD<aH;){aK=aq[aD],aK.fixed?(aK.x=aK.px,aK.y=aK.py):(aK.x-=(aK.px-(aK.px=aK.x))*ap,aK.y-=(aK.py-(aK.py=aK.y))*ap)}ad.tick({type:"tick",alpha:az})},ab.nodes=function(aC){return arguments.length?(aq=aC,ab):aq},ab.links=function(aC){return arguments.length?(aB=aC,ab):aB},ab.size=function(aC){return arguments.length?(ah=aC,ab):ah},ab.linkDistance=function(aC){return arguments.length?(aj="function"==typeof aC?aC:+aC,ab):aj},ab.distance=ab.linkDistance,ab.linkStrength=function(aC){return arguments.length?(al="function"==typeof aC?aC:+aC,ab):al},ab.friction=function(aC){return arguments.length?(ap=+aC,ab):ap},ab.charge=function(aC){return arguments.length?(ak="function"==typeof aC?aC:+aC,ab):ak},ab.chargeDistance=function(aC){return arguments.length?(ax=aC*aC,ab):Math.sqrt(ax)},ab.gravity=function(aC){return arguments.length?(aA=+aC,ab):aA},ab.theta=function(aC){return arguments.length?(af=aC*aC,ab):Math.sqrt(af)},ab.alpha=function(aC){return arguments.length?(aC=+aC,az?az=aC>0?aC:0:aC>0&&(ad.start({type:"start",alpha:az=aC}),oS.timer(ab.tick)),ab):az},ab.start=function(){function aF(aM,aQ){if(!aC){for(aC=new Array(aJ),aP=0;aJ>aP;++aP){aC[aP]=[]}for(aP=0;aK>aP;++aP){var aO=aB[aP];aC[aO.source.index].push(aO.target),aC[aO.target.index].push(aO.source)}}for(var aL,aN=aC[aH],aP=-1,aK=aN.length;++aP<aK;){if(!isNaN(aL=aN[aP][aM])){return aL}}return Math.random()*aQ}var aH,aC,aG,aJ=aq.length,aD=aB.length,aE=ah[0],aI=ah[1];for(aH=0;aJ>aH;++aH){(aG=aq[aH]).index=aH,aG.weight=0}for(aH=0;aD>aH;++aH){aG=aB[aH],"number"==typeof aG.source&&(aG.source=aq[aG.source]),"number"==typeof aG.target&&(aG.target=aq[aG.target]),++aG.source.weight,++aG.target.weight}for(aH=0;aJ>aH;++aH){aG=aq[aH],isNaN(aG.x)&&(aG.x=aF("x",aE)),isNaN(aG.y)&&(aG.y=aF("y",aI)),isNaN(aG.px)&&(aG.px=aG.x),isNaN(aG.py)&&(aG.py=aG.y)}if(ay=[],"function"==typeof aj){for(aH=0;aD>aH;++aH){ay[aH]=+aj.call(this,aB[aH],aH)}}else{for(aH=0;aD>aH;++aH){ay[aH]=aj}}if(an=[],"function"==typeof al){for(aH=0;aD>aH;++aH){an[aH]=+al.call(this,aB[aH],aH)}}else{for(aH=0;aD>aH;++aH){an[aH]=al}}if(aw=[],"function"==typeof ak){for(aH=0;aJ>aH;++aH){aw[aH]=+ak.call(this,aq[aH],aH)}}else{for(aH=0;aJ>aH;++aH){aw[aH]=ak}}return ab.resume()},ab.resume=function(){return ab.alpha(0.1)},ab.stop=function(){return ab.alpha(0)},ab.drag=function(){return ag||(ag=oS.behavior.drag().origin(ge).on("dragstart.force",oQ).on("drag.force",am).on("dragend.force",l7)),arguments.length?(this.on("mouseover.force",ol).on("mouseout.force",dr).call(ag),void 0):ag},oS.rebind(ab,ad,"on")};var n3=20,lA=1,nz=1/0;oS.layout.hierarchy=function(){function af(aq,an,av){var aw=ad.call(ag,aq,an);if(aq.depth=an,av.push(aq),aw&&(am=aw.length)){for(var am,al,ax=-1,ak=aq.children=new Array(am),ay=0,ap=an+1;++ax<am;){al=ak[ax]=af(aw[ax],ap,av),al.parent=aq,ay+=al.value}ah&&ak.sort(ah),ab&&(aq.value=ay)}else{delete aq.children,ab&&(aq.value=+ab.call(ag,aq,an)||0)}return aq}function aj(al,av){var am=al.children,aq=0;if(am&&(ap=am.length)){for(var ap,an=-1,ak=av+1;++an<ap;){aq+=aj(am[an],ak)}}else{ab&&(aq=+ab.call(ag,al,av)||0)}return ab&&(al.value=aq),aq}function ag(al){var ak=[];return af(al,0,ak),ak}var ah=oR,ad=nI,ab=nf;return ag.sort=function(ak){return arguments.length?(ah=ak,ag):ah},ag.children=function(ak){return arguments.length?(ad=ak,ag):ad},ag.value=function(ak){return arguments.length?(ab=ak,ag):ab},ag.revalue=function(ak){return aj(ak,0),ak},ag},oS.layout.partition=function(){function af(av,al,ap,aw){var am=av.children;if(av.x=al,av.y=av.depth*aw,av.dx=ap,av.dy=aw,am&&(an=am.length)){var an,aj,ak,aq=-1;for(ap=av.value?ap/av.value:0;++aq<an;){af(aj=am[aq],al,ak=aj.value*ap,aw),al+=ak}}}function ab(an){var aj=an.children,ak=0;if(aj&&(am=aj.length)){for(var am,al=-1;++al<am;){ak=Math.max(ak,ab(aj[al]))}}return 1+ak}function ag(ak,al){var aj=ah.call(this,ak,al);return af(aj[0],0,ad[0],ad[1]/ab(aj[0])),aj}var ah=oS.layout.hierarchy(),ad=[1,1];return ag.size=function(aj){return arguments.length?(ad=aj,ag):ad},nv(ag,ah)},oS.layout.pie=function(){function af(ak){var ap=ak.map(function(aq,av){return +ab.call(af,aq,av)}),al=+("function"==typeof ah?ah.apply(this,arguments):ah),an=(("function"==typeof ad?ad.apply(this,arguments):ad)-al)/oS.sum(ap),aj=oS.range(ak.length);null!=ag&&aj.sort(ag===bs?function(aq,av){return ap[av]-ap[aq]}:function(aq,av){return ag(ak[aq],ak[av])});var am=[];return aj.forEach(function(aq){var av;am[aq]={data:ak[aq],value:av=ap[aq],startAngle:al,endAngle:al+=av*an}}),am}var ab=Number,ag=bs,ah=0,ad=kO;return af.value=function(aj){return arguments.length?(ab=aj,af):ab},af.sort=function(aj){return arguments.length?(ag=aj,af):ag},af.startAngle=function(aj){return arguments.length?(ah=aj,af):ah},af.endAngle=function(aj){return arguments.length?(ad=aj,af):ad},af};var bs={};oS.layout.stack=function(){function af(aw,ax){var an=aw.map(function(aC,aB){return ak.call(af,aC,aB)}),am=an.map(function(aB){return aB.map(function(aD,aC){return[ab.call(af,aD,aC),ag.call(af,aD,aC)]})}),az=ah.call(af,am,ax);an=oS.permute(an,az),am=oS.permute(am,az);var al,aA,av,aq=aj.call(af,am,ax),ay=an.length,ap=an[0].length;for(aA=0;ap>aA;++aA){for(ad.call(af,an[0][aA],av=aq[aA],am[0][aA][1]),al=1;ay>al;++al){ad.call(af,an[al][aA],av+=am[al-1][aA][1],am[al][aA][1])}}return aw}var ak=ge,ah=kf,aj=nN,ad=cc,ab=kB,ag=es;return af.values=function(al){return arguments.length?(ak=al,af):ak},af.order=function(al){return arguments.length?(ah="function"==typeof al?al:jc.get(al)||kf,af):ah},af.offset=function(al){return arguments.length?(aj="function"==typeof al?al:pC.get(al)||nN,af):aj},af.x=function(al){return arguments.length?(ab=al,af):ab},af.y=function(al){return arguments.length?(ag=al,af):ag},af.out=function(al){return arguments.length?(ad=al,af):ad},af};var jc=oS.map({"inside-out":function(ak){var ap,ag,am=ak.length,ab=ak.map(oT),ah=ak.map(gu),al=oS.range(am).sort(function(av,aq){return ab[av]-ab[aq]}),ad=0,af=0,an=[],aj=[];for(ap=0;am>ap;++ap){ag=al[ap],af>ad?(ad+=ah[ag],an.push(ag)):(af+=ah[ag],aj.push(ag))}return aj.reverse().concat(an)},reverse:function(ab){return oS.range(ab.length).reverse()},"default":kf}),pC=oS.map({silhouette:function(ak){var ab,ah,am,ad=ak.length,aj=ak[0].length,al=[],af=0,ag=[];for(ah=0;aj>ah;++ah){for(ab=0,am=0;ad>ab;ab++){am+=ak[ab][ah][1]}am>af&&(af=am),al.push(am)}for(ah=0;aj>ah;++ah){ag[ah]=(af-al[ah])/2}return ag},wiggle:function(al){var af,ap,aq,ag,ah,am,aj,an,ab,ak=al.length,av=al[0],ad=av.length,aw=[];for(aw[0]=an=ab=0,ap=1;ad>ap;++ap){for(af=0,ag=0;ak>af;++af){ag+=al[af][ap][1]}for(af=0,ah=0,aj=av[ap][0]-av[ap-1][0];ak>af;++af){for(aq=0,am=(al[af][ap][1]-al[af][ap-1][1])/(2*aj);af>aq;++aq){am+=(al[aq][ap][1]-al[aq][ap-1][1])/aj}ah+=am*al[af][ap][1]}aw[ap]=an-=ag?ah/ag*aj:0,ab>an&&(ab=an)}for(ap=0;ad>ap;++ap){aw[ap]-=ab}return aw},expand:function(ad){var aj,ag,ah,al=ad.length,ak=ad[0].length,af=1/al,ab=[];for(ag=0;ak>ag;++ag){for(aj=0,ah=0;al>aj;aj++){ah+=ad[aj][ag][1]}if(ah){for(aj=0;al>aj;aj++){ad[aj][ag][1]/=ah}}else{for(aj=0;al>aj;aj++){ad[aj][ag][1]=af}}}for(ag=0;ak>ag;++ag){ab[ag]=0}return ab},zero:nN});oS.layout.histogram=function(){function af(ak,ay){for(var am,ap,aq=[],al=ak.map(ag,this),aj=ah.call(this,al,ay),av=ad.call(this,aj,al,ay),ay=-1,ax=al.length,aw=av.length-1,an=ab?1:1/ax;++ay<aw;){am=aq[ay]=[],am.dx=av[ay+1]-(am.x=av[ay]),am.y=0}if(aw>0){for(ay=-1;++ay<ax;){ap=al[ay],ap>=aj[0]&&ap<=aj[1]&&(am=aq[oS.bisect(av,ap,1,aw)-1],am.y+=an,am.push(ak[ay]))}}return aq}var ab=!0,ag=Number,ah=nq,ad=nF;return af.value=function(aj){return arguments.length?(ag=aj,af):ag},af.range=function(aj){return arguments.length?(ah=o4(aj),af):ah},af.bins=function(aj){return arguments.length?(ad="number"==typeof aj?function(ak){return lk(ak,aj)}:o4(aj),af):ad},af.frequency=function(aj){return arguments.length?(ab=!!aj,af):ab},af},oS.layout.tree=function(){function af(am,aA){function aq(aB,aE){var aC=aB.children,aF=aB._tree;if(aC&&(aL=aC.length)){for(var aL,aG,aD,aI=aC[0],aH=aI,aK=-1;++aK<aL;){aD=aC[aK],aq(aD,aG),aH=ap(aD,aG,aH),aG=aD}d(aB);var aJ=0.5*(aI._tree.prelim+aD._tree.prelim);aE?(aF.prelim=aE._tree.prelim+ag(aB,aE),aF.mod=aF.prelim-aJ):aF.prelim=aJ}else{aE&&(aF.prelim=aE._tree.prelim+ag(aB,aE))}}function an(aC,aB){aC.x=aC._tree.prelim+aB;var aE=aC.children;if(aE&&(aF=aE.length)){var aF,aD=-1;for(aB+=aC._tree.mod;++aD<aF;){an(aE[aD],aB)}}}function ap(aJ,aE,aC){if(aE){for(var aF,aL=aJ,aB=aJ,aG=aE,aH=aJ.parent.children[0],aD=aL._tree.mod,aM=aB._tree.mod,aI=aG._tree.mod,aK=aH._tree.mod;aG=pn(aG),aL=kk(aL),aG&&aL;){aH=kk(aH),aB=pn(aB),aB._tree.ancestor=aJ,aF=aG._tree.prelim+aI-aL._tree.prelim-aD+ag(aG,aL),aF>0&&(kb(k4(aG,aJ,aC),aJ,aF),aD+=aF,aM+=aF),aI+=aG._tree.mod,aD+=aL._tree.mod,aK+=aH._tree.mod,aM+=aB._tree.mod}aG&&!pn(aB)&&(aB._tree.thread=aG,aB._tree.mod+=aI-aM),aL&&!kk(aH)&&(aH._tree.thread=aL,aH._tree.mod+=aD-aK,aC=aJ)}return aC}var aj=ab.call(this,am,aA),ak=aj[0];ms(ak,function(aB,aC){aB._tree={ancestor:aB,prelim:0,mod:0,change:0,shift:0,number:aC?aC._tree.number+1:0}}),aq(ak),an(ak,-ak._tree.prelim);var ax=mg(ak,jX),az=mg(ak,kr),ay=mg(ak,k1),av=ax.x-ag(ax,az)/2,al=az.x+ag(az,ax)/2,aw=ay.depth||1;return ms(ak,ad?function(aB){aB.x*=ah[0],aB.y=aB.depth*ah[1],delete aB._tree}:function(aB){aB.x=(aB.x-av)/(al-av)*ah[0],aB.y=aB.depth/aw*ah[1],delete aB._tree}),aj}var ab=oS.layout.hierarchy().sort(null).value(null),ag=au,ah=[1,1],ad=!1;return af.separation=function(aj){return arguments.length?(ag=aj,af):ag},af.size=function(aj){return arguments.length?(ad=null==(ah=aj),af):ad?null:ah},af.nodeSize=function(aj){return arguments.length?(ad=null!=(ah=aj),af):ad?ah:null},nv(af,ab)},oS.layout.pack=function(){function af(al,ak){var aq=ag.call(this,al,ak),am=aq[0],ap=ad[0],aj=ad[1],an=null==ab?Math.sqrt:"function"==typeof ab?ab:function(){return ab};if(am.x=am.y=0,ms(am,function(aw){aw.r=+an(aw.value)}),ms(am,jk),ah){var av=ah*(ab?1:Math.max(2*am.r/ap,2*am.r/aj))/2;ms(am,function(aw){aw.r+=av}),ms(am,jk),ms(am,function(aw){aw.r-=av})}return kX(am,ap/2,aj/2,ab?1:1/Math.max(2*am.r/ap,2*am.r/aj)),aq}var ab,ag=oS.layout.hierarchy().sort(et),ah=0,ad=[1,1];return af.size=function(aj){return arguments.length?(ad=aj,af):ad},af.radius=function(aj){return arguments.length?(ab=null==aj||"function"==typeof aj?aj:+aj,af):ab},af.padding=function(aj){return arguments.length?(ah=+aj,af):ah},nv(af,ag)},oS.layout.cluster=function(){function af(am,ak){var an,aq=ab.call(this,am,ak),av=aq[0],ap=0;ms(av,function(ay){var az=ay.children;az&&az.length?(ay.x=pb(az),ay.y=mS(az)):(ay.x=an?ap+=ag(ay,an):0,ay.y=0,an=ay)});var al=kS(av),aw=fr(av),aj=al.x-ag(al,aw)/2,ax=aw.x+ag(aw,al)/2;return ms(av,ad?function(ay){ay.x=(ay.x-av.x)*ah[0],ay.y=(av.y-ay.y)*ah[1]}:function(ay){ay.x=(ay.x-aj)/(ax-aj)*ah[0],ay.y=(1-(av.y?ay.y/av.y:1))*ah[1]}),aq}var ab=oS.layout.hierarchy().sort(null).value(null),ag=au,ah=[1,1],ad=!1;return af.separation=function(aj){return arguments.length?(ag=aj,af):ag},af.size=function(aj){return arguments.length?(ad=null==(ah=aj),af):ad?null:ah},af.nodeSize=function(aj){return arguments.length?(ad=null!=(ah=aj),af):ad?ah:null},nv(af,ab)},oS.layout.treemap=function(){function aj(aC,aB){for(var az,aA,ay=-1,aD=aC.length;++ay<aD;){aA=(az=aC[ay]).value*(0>aB?0:aB),az.area=isNaN(aA)||0>=aA?0:aA}}function ax(aF){var aH=aF.children;if(aH&&aH.length){var az,aD,aE,aB=am(aF),ay=[],aG=aH.slice(),aA=1/0,aC="slice"===an?aB.dx:"dice"===an?aB.dy:"slice-dice"===an?1&aF.depth?aB.dy:aB.dx:Math.min(aB.dx,aB.dy);for(aj(aG,aB.dx*aB.dy/aF.value),ay.area=0;(aE=aG.length)>0;){ay.push(az=aG[aE-1]),ay.area+=az.area,"squarify"!==an||(aD=ap(ay,aC))<=aA?(aG.pop(),aA=aD):(ay.area-=ay.pop().area,ab(ay,aC,aB,!1),aC=Math.min(aB.dx,aB.dy),ay.length=ay.area=0,aA=1/0)}ay.length&&(ab(ay,aC,aB,!0),ay.length=ay.area=0),aH.forEach(ax)}}function ah(aA){var aD=aA.children;if(aD&&aD.length){var aB,az=am(aA),aC=aD.slice(),ay=[];for(aj(aC,az.dx*az.dy/aA.value),ay.area=0;aB=aC.pop();){ay.push(aB),ay.area+=aB.area,null!=aB.z&&(ab(ay,aB.z?az.dx:az.dy,az,!aC.length),ay.length=ay.area=0)}aD.forEach(ah)}}function ap(ay,aB){for(var aA,aE=ay.area,aD=0,aC=1/0,az=-1,aF=ay.length;++az<aF;){(aA=ay[az].area)&&(aC>aA&&(aC=aA),aA>aD&&(aD=aA))}return aE*=aE,aB*=aB,aE?Math.max(aB*aD*al/aE,aE/(aB*aC*al)):1/0}function ab(aA,aE,aH,aC){var aF,ay=-1,aB=aA.length,aG=aH.x,aD=aH.y,az=aE?ag(aA.area/aE):0;if(aE==aH.dx){for((aC||az>aH.dy)&&(az=aH.dy);++ay<aB;){aF=aA[ay],aF.x=aG,aF.y=aD,aF.dy=az,aG+=aF.dx=Math.min(aH.x+aH.dx-aG,az?ag(aF.area/az):0)}aF.z=!0,aF.dx+=aH.x+aH.dx-aG,aH.y+=az,aH.dy-=az}else{for((aC||az>aH.dx)&&(az=aH.dx);++ay<aB;){aF=aA[ay],aF.x=aG,aF.y=aD,aF.dx=az,aD+=aF.dy=Math.min(aH.y+aH.dy-aD,az?ag(aF.area/az):0)}aF.z=!1,aF.dy+=aH.y+aH.dy-aD,aH.x+=az,aH.dx-=az}}function av(az){var ay=ak||af(az),aA=ay[0];return aA.x=0,aA.y=0,aA.dx=aw[0],aA.dy=aw[1],ak&&af.revalue(aA),aj([aA],aA.dx*aA.dy/aA.value),(ak?ah:ax)(aA),aq&&(ak=ay),ay}var ak,af=oS.layout.hierarchy(),ag=Math.round,aw=[1,1],ad=null,am=bi,aq=!1,an="squarify",al=0.5*(1+Math.sqrt(5));return av.size=function(ay){return arguments.length?(aw=ay,av):aw},av.padding=function(az){function ay(aC){var aD=az.call(av,aC,aC.depth);return null==aD?bi(aC):oW(aC,"number"==typeof aD?[aD,aD,aD,aD]:aD)}function aA(aC){return oW(aC,az)}if(!arguments.length){return ad}var aB;return am=null==(ad=az)?bi:"function"==(aB=typeof az)?ay:"number"===aB?(az=[az,az,az,az],aA):aA,av},av.round=function(ay){return arguments.length?(ag=ay?Math.round:Number,av):ag!=Number},av.sticky=function(ay){return arguments.length?(aq=ay,ak=null,av):aq},av.ratio=function(ay){return arguments.length?(al=ay,av):al},av.mode=function(ay){return arguments.length?(an=ay+"",av):an},nv(av,af)},oS.random={normal:function(af,ad){var ab=arguments.length;return 2>ab&&(ad=1),1>ab&&(af=0),function(){var ag,ah,aj;do{ag=2*Math.random()-1,ah=2*Math.random()-1,aj=ag*ag+ah*ah}while(!aj||aj>1);return af+ad*ag*Math.sqrt(-2*Math.log(aj)/aj)}},logNormal:function(){var ab=oS.random.normal.apply(oS,arguments);return function(){return Math.exp(ab())}},bates:function(ab){var ad=oS.random.irwinHall(ab);return function(){return ad()/ab}},irwinHall:function(ab){return function(){for(var ad=0,af=0;ab>af;af++){ad+=Math.random()}return ad}}},oS.scale={};var mv={floor:ge,ceil:ge};oS.scale.linear=function(){return Y([0,1],[0,1],kM,!1)};var kH={s:1,g:1,p:1,r:1,e:1};oS.scale.log=function(){return mP(oS.scale.linear().domain([0,1]),10,!0,[1,10])};var mc=oS.format(".0e"),it={floor:function(ab){return -Math.ceil(-ab)},ceil:function(ab){return -Math.floor(-ab)}};oS.scale.pow=function(){return oz(oS.scale.linear(),1,[0,1])},oS.scale.sqrt=function(){return oS.scale.pow().exponent(0.5)},oS.scale.ordinal=function(){return R([],{t:"range",a:[[]]})},oS.scale.category10=function(){return oS.scale.ordinal().range(mF)},oS.scale.category20=function(){return oS.scale.ordinal().range(m)},oS.scale.category20b=function(){return oS.scale.ordinal().range(cr)},oS.scale.category20c=function(){return oS.scale.ordinal().range(lv)};var mF=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(mf),m=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(mf),cr=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(mf),lv=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(mf);oS.scale.quantile=function(){return cs([],[])},oS.scale.quantize=function(){return jU(0,1,[0,1])},oS.scale.threshold=function(){return lM([0.5],[0,1])},oS.scale.identity=function(){return mN([0,1])},oS.svg={},oS.svg.arc=function(){function af(){var am=ab.apply(this,arguments),ak=ag.apply(this,arguments),an=ah.apply(this,arguments)+S,aq=ad.apply(this,arguments)+S,av=(an>aq&&(av=an,an=aq,aq=av),aq-an),ap=lX>av?"0":"1",al=Math.cos(an),aw=Math.sin(an),aj=Math.cos(aq),ax=Math.sin(aq);return av>=p?am?"M0,"+ak+"A"+ak+","+ak+" 0 1,1 0,"+-ak+"A"+ak+","+ak+" 0 1,1 0,"+ak+"M0,"+am+"A"+am+","+am+" 0 1,0 0,"+-am+"A"+am+","+am+" 0 1,0 0,"+am+"Z":"M0,"+ak+"A"+ak+","+ak+" 0 1,1 0,"+-ak+"A"+ak+","+ak+" 0 1,1 0,"+ak+"Z":am?"M"+ak*al+","+ak*aw+"A"+ak+","+ak+" 0 "+ap+",1 "+ak*aj+","+ak*ax+"L"+am*aj+","+am*ax+"A"+am+","+am+" 0 "+ap+",0 "+am*al+","+am*aw+"Z":"M"+ak*al+","+ak*aw+"A"+ak+","+ak+" 0 "+ap+",1 "+ak*aj+","+ak*ax+"L0,0Z"}var ab=oV,ag=lf,ah=on,ad=nH;return af.innerRadius=function(aj){return arguments.length?(ab=o4(aj),af):ab},af.outerRadius=function(aj){return arguments.length?(ag=o4(aj),af):ag},af.startAngle=function(aj){return arguments.length?(ah=o4(aj),af):ah},af.endAngle=function(aj){return arguments.length?(ad=o4(aj),af):ad},af.centroid=function(){var aj=(ab.apply(this,arguments)+ag.apply(this,arguments))/2,ak=(ah.apply(this,arguments)+ad.apply(this,arguments))/2+S;return[Math.cos(ak)*aj,Math.sin(ak)*aj]},af};var S=-g,p=kO-oo;oS.svg.line=function(){return lw(ge)};var ku=oS.map({linear:nw,"linear-closed":be,step:ii,"step-before":pv,"step-after":mr,basis:lo,"basis-open":fc,"basis-closed":o8,bundle:ko,cardinal:ie,"cardinal-open":kC,"cardinal-closed":l9,monotone:po});ku.forEach(function(ab,ad){ad.key=ab,ad.closed=/-closed$/.test(ab)});var o1=[0,2/3,1/3,0],ga=[0,1/3,2/3,0],pK=[0,1/6,2/3,1/6];oS.svg.line.radial=function(){var ab=lw(nb);return ab.radius=ab.x,delete ab.x,ab.angle=ab.y,delete ab.y,ab},pv.reverse=mr,mr.reverse=pv,oS.svg.area=function(){return pc(ge)},oS.svg.area.radial=function(){var ab=pc(nb);return ab.radius=ab.x,delete ab.x,ab.innerRadius=ab.x0,delete ab.x0,ab.outerRadius=ab.x1,delete ab.x1,ab.angle=ab.y,delete ab.y,ab.startAngle=ab.y0,delete ab.y0,ab.endAngle=ab.y1,delete ab.y1,ab},oS.svg.chord=function(){function ak(ap,aw){var aq=ab(this,aj,ap,aw),av=ab(this,al,ap,aw);return"M"+aq.p0+am(aq.r,aq.p1,aq.a1-aq.a0)+(ah(aq,av)?ad(aq.r,aq.p1,aq.r,aq.p0):ad(aq.r,aq.p1,av.r,av.p0)+am(av.r,av.p1,av.a1-av.a0)+ad(av.r,av.p1,aq.r,aq.p0))+"Z"}function ab(aA,av,ax,az){var ay=av.call(aA,ax,az),aw=af.call(aA,ay,az),ap=ag.call(aA,ay,az)+S,aq=an.call(aA,ay,az)+S;return{r:aw,a0:ap,a1:aq,p0:[aw*Math.cos(ap),aw*Math.sin(ap)],p1:[aw*Math.cos(aq),aw*Math.sin(aq)]}}function ah(aq,ap){return aq.a0==ap.a0&&aq.a1==ap.a1}function am(aq,ap,av){return"A"+aq+","+aq+" 0 "+ +(av>lX)+",1 "+ap}function ad(aq,ap,av,aw){return"Q 0,0 "+aw}var aj=mb,al=ir,af=kZ,ag=on,an=nH;return ak.radius=function(ap){return arguments.length?(af=o4(ap),ak):af},ak.source=function(ap){return arguments.length?(aj=o4(ap),ak):aj},ak.target=function(ap){return arguments.length?(al=o4(ap),ak):al},ak.startAngle=function(ap){return arguments.length?(ag=o4(ap),ak):ag},ak.endAngle=function(ap){return arguments.length?(an=o4(ap),ak):an},ak},oS.svg.diagonal=function(){function af(an,al){var ak=ad.call(this,an,al),aj=ag.call(this,an,al),am=(ak.y+aj.y)/2,ah=[ak,{x:ak.x,y:am},{x:aj.x,y:am},aj];return ah=ah.map(ab),"M"+ah[0]+"C"+ah[1]+" "+ah[2]+" "+ah[3]}var ad=mb,ag=ir,ab=gr;return af.source=function(ah){return arguments.length?(ad=o4(ah),af):ad},af.target=function(ah){return arguments.length?(ag=o4(ah),af):ag},af.projection=function(ah){return arguments.length?(ab=ah,af):ab},af},oS.svg.diagonal.radial=function(){var af=oS.svg.diagonal(),ad=gr,ab=af.projection;return af.projection=function(ag){return arguments.length?ab(u(ad=ag)):ad},af},oS.svg.symbol=function(){function af(ag,ah){return(mk.get(ad.call(this,ag,ah))||kV)(ab.call(this,ag,ah))}var ad=mL,ab=nL;return af.type=function(ag){return arguments.length?(ad=o4(ag),af):ad},af.size=function(ag){return arguments.length?(ab=o4(ag),af):ab},af};var mk=oS.map({circle:kV,cross:function(ab){var ad=Math.sqrt(ab/5)/2;return"M"+-3*ad+","+-ad+"H"+-ad+"V"+-3*ad+"H"+ad+"V"+-ad+"H"+3*ad+"V"+ad+"H"+ad+"V"+3*ad+"H"+-ad+"V"+ad+"H"+-3*ad+"Z"},diamond:function(af){var ad=Math.sqrt(af/(2*pi)),ab=ad*pi;return"M0,"+-ad+"L"+ab+",0 0,"+ad+" "+-ab+",0Z"},square:function(ab){var ad=Math.sqrt(ab)/2;return"M"+-ad+","+-ad+"L"+ad+","+-ad+" "+ad+","+ad+" "+-ad+","+ad+"Z"},"triangle-down":function(af){var ad=Math.sqrt(af/nn),ab=ad*nn/2;return"M0,"+ab+"L"+ad+","+-ab+" "+-ad+","+-ab+"Z"},"triangle-up":function(af){var ad=Math.sqrt(af/nn),ab=ad*nn/2;return"M0,"+-ab+"L"+ad+","+ab+" "+-ad+","+ab+"Z"}});oS.svg.symbolTypes=mk.keys();var m3,pw,nn=Math.sqrt(3),pi=Math.tan(30*kN),k3=[],ho=0;k3.call=jV.call,k3.empty=jV.empty,k3.node=jV.node,k3.size=jV.size,oS.transition=function(ab){return arguments.length?m3?ab.transition():ab:ot.transition()},oS.transition.prototype=k3,k3.select=function(ak){var ap,ag,am,ab=this.id,ah=[];ak=ce(ak);for(var al=-1,ad=this.length;++al<ad;){ah.push(ap=[]);for(var af=this[al],an=-1,aj=af.length;++an<aj;){(am=af[an])&&(ag=ak.call(am,am.__data__,an,al))?("__data__" in am&&(ag.__data__=am.__data__),kh(ag,an,ab,am.__transition__[ab]),ap.push(ag)):ap.push(null)}}return of(ah,ab)},k3.selectAll=function(aj){var ax,ah,ap,ab,av,ak=this.id,af=[];aj=L(aj);for(var ag=-1,aw=this.length;++ag<aw;){for(var ad=this[ag],am=-1,aq=ad.length;++am<aq;){if(ap=ad[am]){av=ap.__transition__[ak],ah=aj.call(ap,ap.__data__,am,ag),af.push(ax=[]);for(var an=-1,al=ah.length;++an<al;){(ab=ah[an])&&kh(ab,an,ak,av),ax.push(ab)}}}}return of(af,ak)},k3.filter=function(ak){var ab,ah,am,ad=[];"function"!=typeof ak&&(ak=io(ak));for(var aj=0,al=this.length;al>aj;aj++){ad.push(ab=[]);for(var ah=this[aj],af=0,ag=ah.length;ag>af;af++){(am=ah[af])&&ak.call(am,am.__data__,af,aj)&&ab.push(am)}}return of(ad,this.id)},k3.tween=function(af,ad){var ab=this.id;return arguments.length<2?this.node().__transition__[ab].tween.get(af):eu(this,null==ad?function(ag){ag.__transition__[ab].tween.remove(af)}:function(ag){ag.__transition__[ab].tween.set(af,ad)})},k3.attr=function(ad,aj){function ag(){this.removeAttribute(ab)}function ah(){this.removeAttributeNS(ab.space,ab.local)}function al(am){return null==am?ag:(am+="",function(){var ap,an=this.getAttribute(ab);return an!==am&&(ap=af(an,am),function(aq){this.setAttribute(ab,ap(aq))})})}function ak(am){return null==am?ah:(am+="",function(){var ap,an=this.getAttributeNS(ab.space,ab.local);return an!==am&&(ap=af(an,am),function(aq){this.setAttributeNS(ab.space,ab.local,ap(aq))})})}if(arguments.length<2){for(aj in ad){this.attr(aj,ad[aj])}return this}var af="transform"==ad?mY:kM,ab=oS.ns.qualify(ad);return lh(this,"attr."+ad,aj,ab.local?ak:al)},k3.attrTween=function(af,ab){function ag(aj,ak){var al=ab.call(this,aj,ak,this.getAttribute(ad));return al&&function(am){this.setAttribute(ad,al(am))}}function ah(aj,ak){var al=ab.call(this,aj,ak,this.getAttributeNS(ad.space,ad.local));return al&&function(am){this.setAttributeNS(ad.space,ad.local,al(am))}}var ad=oS.ns.qualify(af);return this.tween("attr."+af,ad.local?ah:ag)},k3.style=function(af,aj,ag){function ah(){this.style.removeProperty(af)}function ad(ak){return null==ak?ah:(ak+="",function(){var al,am=ct.getComputedStyle(this,null).getPropertyValue(af);return am!==ak&&(al=kM(am,ak),function(an){this.style.setProperty(af,al(an),ag)})})}var ab=arguments.length;if(3>ab){if("string"!=typeof af){2>ab&&(aj="");for(ag in af){this.style(ag,af[ag],aj)}return this}ag=""}return lh(this,"style."+af,aj,ad)},k3.styleTween=function(af,ad,ag){function ab(ah,ak){var aj=ad.call(this,ah,ak,ct.getComputedStyle(this,null).getPropertyValue(af));return aj&&function(al){this.style.setProperty(af,aj(al),ag)}}return arguments.length<3&&(ag=""),this.tween("style."+af,ab)},k3.text=function(ab){return lh(this,"text",ab,nG)},k3.remove=function(){return this.each("end.transition",function(){var ab;this.__transition__.count<2&&(ab=this.parentNode)&&ab.removeChild(this)})},k3.ease=function(ab){var ad=this.id;return arguments.length<1?this.node().__transition__[ad].ease:("function"!=typeof ab&&(ab=oS.ease.apply(oS,arguments)),eu(this,function(af){af.__transition__[ad].ease=ab}))},k3.delay=function(ab){var ad=this.id;return eu(this,"function"==typeof ab?function(af,ag,ah){af.__transition__[ad].delay=+ab.call(af,af.__data__,ag,ah)}:(ab=+ab,function(af){af.__transition__[ad].delay=ab}))},k3.duration=function(ab){var ad=this.id;return eu(this,"function"==typeof ab?function(af,ag,ah){af.__transition__[ad].duration=Math.max(1,ab.call(af,af.__data__,ag,ah))}:(ab=Math.max(1,ab),function(af){af.__transition__[ad].duration=ab}))},k3.each=function(af,ab){var ag=this.id;if(arguments.length<2){var ah=pw,ad=m3;m3=ag,eu(this,function(ak,aj,al){pw=ak.__transition__[ag],af.call(ak,ak.__data__,aj,al)}),pw=ah,m3=ad}else{eu(this,function(aj){var ak=aj.__transition__[ag];(ak.event||(ak.event=oS.dispatch("start","end"))).on(af,ab)})}return this},k3.transition=function(){for(var ak,ap,ag,am,ab=this.id,ah=++ho,al=[],ad=0,af=this.length;af>ad;ad++){al.push(ak=[]);for(var ap=this[ad],an=0,aj=ap.length;aj>an;an++){(ag=ap[an])&&(am=Object.create(ag.__transition__[ab]),am.delay+=am.duration,kh(ag,an,ah,am)),ak.push(ag)}}return of(al,ah)},oS.svg.axis=function(){function ak(an){an.each(function(){var aD,aI=oS.select(this),aB=this.__chart__||ah,aw=this.__chart__=ah.copy(),ay=null==ag?aw.ticks?aw.ticks.apply(aw,af):aw.domain():ag,ax=null==ab?aw.tickFormat?aw.tickFormat.apply(aw,af):ge:ab,aE=aI.selectAll(".tick").data(ay,aw),az=aE.enter().insert("g",".domain").attr("class","tick").style("opacity",oo),av=oS.transition(aE.exit()).style("opacity",oo).remove(),aC=oS.transition(aE).style("opacity",1),aJ=kL(aw),aG=aI.selectAll(".domain").data([0]),aL=(aG.enter().append("path").attr("class","domain"),oS.transition(aG));az.append("line"),az.append("text");var ap=az.select("line"),aq=aC.select("line"),aF=aE.select("text").text(ax),aM=az.select("text"),aA=aC.select("text");switch(am){case"bottom":aD=ar,ap.attr("y2",ad),aM.attr("y",Math.max(ad,0)+al),aq.attr("x2",0).attr("y2",ad),aA.attr("x",0).attr("y",Math.max(ad,0)+al),aF.attr("dy",".71em").style("text-anchor","middle"),aL.attr("d","M"+aJ[0]+","+aj+"V0H"+aJ[1]+"V"+aj);break;case"top":aD=ar,ap.attr("y2",-ad),aM.attr("y",-(Math.max(ad,0)+al)),aq.attr("x2",0).attr("y2",-ad),aA.attr("x",0).attr("y",-(Math.max(ad,0)+al)),aF.attr("dy","0em").style("text-anchor","middle"),aL.attr("d","M"+aJ[0]+","+-aj+"V0H"+aJ[1]+"V"+-aj);break;case"left":aD=pS,ap.attr("x2",-ad),aM.attr("x",-(Math.max(ad,0)+al)),aq.attr("x2",-ad).attr("y2",0),aA.attr("x",-(Math.max(ad,0)+al)).attr("y",0),aF.attr("dy",".32em").style("text-anchor","end"),aL.attr("d","M"+-aj+","+aJ[0]+"H0V"+aJ[1]+"H"+-aj);break;case"right":aD=pS,ap.attr("x2",ad),aM.attr("x",Math.max(ad,0)+al),aq.attr("x2",ad).attr("y2",0),aA.attr("x",Math.max(ad,0)+al).attr("y",0),aF.attr("dy",".32em").style("text-anchor","start"),aL.attr("d","M"+aj+","+aJ[0]+"H0V"+aJ[1]+"H"+aj)}if(aw.rangeBand){var aK=aw,aH=aK.rangeBand()/2;aB=aw=function(aN){return aK(aN)+aH}}else{aB.rangeBand?aB=aw:av.call(aD,aw)}az.call(aD,aB),aC.call(aD,aw)})}var ab,ah=oS.scale.linear(),am=z,ad=6,aj=6,al=3,af=[10],ag=null;return ak.scale=function(an){return arguments.length?(ah=an,ak):ah},ak.orient=function(an){return arguments.length?(am=an in nO?an+"":z,ak):am},ak.ticks=function(){return arguments.length?(af=arguments,ak):af},ak.tickValues=function(an){return arguments.length?(ag=an,ak):ag},ak.tickFormat=function(an){return arguments.length?(ab=an,ak):ab},ak.tickSize=function(an){var ap=arguments.length;return ap?(ad=+an,aj=+arguments[ap-1],ak):ad},ak.innerTickSize=function(an){return arguments.length?(ad=+an,ak):ad},ak.outerTickSize=function(an){return arguments.length?(aj=+an,ak):aj},ak.tickPadding=function(an){return arguments.length?(al=+an,ak):al},ak.tickSubdivide=function(){return arguments.length&&ak},ak};var z="bottom",nO={top:1,right:1,bottom:1,left:1};oS.svg.brush=function(){function aj(ay){ay.each(function(){var aD=oS.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",ab).on("touchstart.brush",ab),az=aD.selectAll(".background").data([0]);az.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),aD.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var aC=aD.selectAll(".resize").data(al,ge);aC.exit().remove(),aC.enter().append("g").attr("class",function(aF){return"resize "+aF}).style("cursor",function(aF){return k7[aF]}).append("rect").attr("x",function(aF){return/[ew]$/.test(aF)?-3:null}).attr("y",function(aF){return/^[ns]/.test(aF)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),aC.style("display",aj.empty()?"none":null);var aE,aA=oS.transition(aD),aB=oS.transition(az);ag&&(aE=kL(ag),aB.attr("x",aE[0]).attr("width",aE[1]-aE[0]),ah(aA)),aw&&(aE=kL(aw),aB.attr("y",aE[0]).attr("height",aE[1]-aE[0]),ap(aA)),ax(aA)})}function ax(ay){ay.selectAll(".resize").attr("transform",function(az){return"translate("+ad[+/e$/.test(az)]+","+am[+/^s/.test(az)]+")"})}function ah(ay){ay.select(".extent").attr("x",ad[0]),ay.selectAll(".extent,.n>rect,.s>rect").attr("width",ad[1]-ad[0])}function ap(ay){ay.select(".extent").attr("y",am[0]),ay.selectAll(".extent,.e>rect,.w>rect").attr("height",am[1]-am[0])}function ab(){function aH(){32==oS.event.keyCode&&(aF||(aK=null,aN[0]-=ad[1],aN[1]-=am[1],aF=2),ac())}function aC(){32==oS.event.keyCode&&2==aF&&(aN[0]+=ad[1],aN[1]+=am[1],aF=0,ac())}function aI(){var aS=oS.mouse(ay),aT=!1;aO&&(aS[0]+=aO[0],aS[1]+=aO[1]),aF||(oS.event.altKey?(aK||(aK=[(ad[0]+ad[1])/2,(am[0]+am[1])/2]),aN[0]=ad[+(aS[0]<aK[0])],aN[1]=am[+(aS[1]<aK[1])]):aK=null),aG&&aB(aS,ag,0)&&(ah(aQ),aT=!0),aD&&aB(aS,aw,1)&&(ap(aQ),aT=!0),aT&&(ax(aQ),aJ({type:"brush",mode:aF?"move":"resize"}))}function aB(aZ,aS,aY){var bd,aT,aV=kL(aS),aW=aV[0],bf=aV[1],bb=aN[aY],aU=aY?am:ad,aX=aU[1]-aU[0];return aF&&(aW-=bb,bf-=aX+bb),bd=(aY?an:aq)?Math.max(aW,Math.min(bf,aZ[aY])):aZ[aY],aF?aT=(bd+=bb)+aX:(aK&&(bb=Math.max(aW,Math.min(bf,2*aK[aY]-bd))),bd>bb?(aT=bd,bd=bb):aT=bb),aU[0]!=bd||aU[1]!=aT?(aY?ak=null:av=null,aU[0]=bd,aU[1]=aT,!0):void 0}function aL(){aI(),aQ.style("pointer-events","all").selectAll(".resize").style("display",aj.empty()?"none":null),oS.select("body").style("cursor",null),aM.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),aP(),aJ({type:"brushend"})}var aK,aO,ay=this,az=oS.select(oS.event.target),aJ=af.of(ay,arguments),aQ=oS.select(ay),aA=az.datum(),aG=!/^(n|s)$/.test(aA)&&ag,aD=!/^(e|w)$/.test(aA)&&aw,aF=az.classed("extent"),aP=dt(),aN=oS.mouse(ay),aM=oS.select(ct).on("keydown.brush",aH).on("keyup.brush",aC);if(oS.event.changedTouches?aM.on("touchmove.brush",aI).on("touchend.brush",aL):aM.on("mousemove.brush",aI).on("mouseup.brush",aL),aQ.interrupt().selectAll("*").interrupt(),aF){aN[0]=ad[0]-aN[0],aN[1]=am[0]-aN[1]}else{if(aA){var aE=+/w$/.test(aA),aR=+/^n/.test(aA);aO=[ad[1-aE]-aN[0],am[1-aR]-aN[1]],aN[0]=ad[aE],aN[1]=am[aR]}else{oS.event.altKey&&(aK=aN.slice())}}aQ.style("pointer-events","none").selectAll(".resize").style("display",null),oS.select("body").style("cursor",az.style("cursor")),aJ({type:"brushstart"}),aI()}var av,ak,af=ju(aj,"brushstart","brush","brushend"),ag=null,aw=null,ad=[0,0],am=[0,0],aq=!0,an=!0,al=mR[0];return aj.event=function(ay){ay.each(function(){var az=af.of(this,arguments),aB={x:ad,y:am,i:av,j:ak},aA=this.__chart__||aB;this.__chart__=aB,m3?oS.select(this).transition().each("start.brush",function(){av=aA.i,ak=aA.j,ad=aA.x,am=aA.y,az({type:"brushstart"})}).tween("brush:brush",function(){var aD=mj(ad,aB.x),aC=mj(am,aB.y);return av=ak=null,function(aE){ad=aB.x=aD(aE),am=aB.y=aC(aE),az({type:"brush",mode:"resize"})}}).each("end.brush",function(){av=aB.i,ak=aB.j,az({type:"brush",mode:"resize"}),az({type:"brushend"})}):(az({type:"brushstart"}),az({type:"brush",mode:"resize"}),az({type:"brushend"}))})},aj.x=function(ay){return arguments.length?(ag=ay,al=mR[!ag<<1|!aw],aj):ag},aj.y=function(ay){return arguments.length?(aw=ay,al=mR[!ag<<1|!aw],aj):aw},aj.clamp=function(ay){return arguments.length?(ag&&aw?(aq=!!ay[0],an=!!ay[1]):ag?aq=!!ay:aw&&(an=!!ay),aj):ag&&aw?[aq,an]:ag?aq:aw?an:null},aj.extent=function(az){var ay,aB,aA,aD,aC;return arguments.length?(ag&&(ay=az[0],aB=az[1],aw&&(ay=ay[0],aB=aB[0]),av=[ay,aB],ag.invert&&(ay=ag(ay),aB=ag(aB)),ay>aB&&(aC=ay,ay=aB,aB=aC),(ay!=ad[0]||aB!=ad[1])&&(ad=[ay,aB])),aw&&(aA=az[0],aD=az[1],ag&&(aA=aA[1],aD=aD[1]),ak=[aA,aD],aw.invert&&(aA=aw(aA),aD=aw(aD)),aA>aD&&(aC=aA,aA=aD,aD=aC),(aA!=am[0]||aD!=am[1])&&(am=[aA,aD])),aj):(ag&&(av?(ay=av[0],aB=av[1]):(ay=ad[0],aB=ad[1],ag.invert&&(ay=ag.invert(ay),aB=ag.invert(aB)),ay>aB&&(aC=ay,ay=aB,aB=aC))),aw&&(ak?(aA=ak[0],aD=ak[1]):(aA=am[0],aD=am[1],aw.invert&&(aA=aw.invert(aA),aD=aw.invert(aD)),aA>aD&&(aC=aA,aA=aD,aD=aC))),ag&&aw?[[ay,aA],[aB,aD]]:ag?[ay,aB]:aw&&[aA,aD])},aj.clear=function(){return aj.empty()||(ad=[0,0],am=[0,0],av=ak=null),aj},aj.empty=function(){return !!ag&&ad[0]==ad[1]||!!aw&&am[0]==am[1]},oS.rebind(aj,af,"on")};var k7={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},mR=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],op=oI.format=ae.timeFormat,ln=op.utc,nS=ln("%Y-%m-%dT%H:%M:%S.%LZ");op.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?jT:nS,jT.parse=function(ab){var ad=new Date(ab);return isNaN(ad)?null:ad},jT.toString=nS.toString,oI.second=mW(function(ab){return new gc(1000*Math.floor(ab/1000))},function(ab,ad){ab.setTime(ab.getTime()+1000*Math.floor(ad))},function(ab){return ab.getSeconds()}),oI.seconds=oI.second.range,oI.seconds.utc=oI.second.utc.range,oI.minute=mW(function(ab){return new gc(60000*Math.floor(ab/60000))},function(ab,ad){ab.setTime(ab.getTime()+60000*Math.floor(ad))},function(ab){return ab.getMinutes()}),oI.minutes=oI.minute.range,oI.minutes.utc=oI.minute.utc.range,oI.hour=mW(function(ab){var ad=ab.getTimezoneOffset()/60;return new gc(3600000*(Math.floor(ab/3600000-ad)+ad))},function(ab,ad){ab.setTime(ab.getTime()+3600000*Math.floor(ad))},function(ab){return ab.getHours()}),oI.hours=oI.hour.range,oI.hours.utc=oI.hour.utc.range,oI.month=mW(function(ab){return ab=oI.day(ab),ab.setDate(1),ab},function(ab,ad){ab.setMonth(ab.getMonth()+ad)},function(ab){return ab.getMonth()}),oI.months=oI.month.range,oI.months.utc=oI.month.utc.range;var kl=[1000,5000,15000,30000,60000,300000,900000,1800000,3600000,10800000,21600000,43200000,86400000,172800000,604800000,2592000000,7776000000,31536000000],a5=[[oI.second,1],[oI.second,5],[oI.second,15],[oI.second,30],[oI.minute,1],[oI.minute,5],[oI.minute,15],[oI.minute,30],[oI.hour,1],[oI.hour,3],[oI.hour,6],[oI.hour,12],[oI.day,1],[oI.day,2],[oI.week,1],[oI.month,1],[oI.month,3],[oI.year,1]],oy=op.multi([[".%L",function(ab){return ab.getMilliseconds()}],[":%S",function(ab){return ab.getSeconds()}],["%I:%M",function(ab){return ab.getMinutes()}],["%I %p",function(ab){return ab.getHours()}],["%a %d",function(ab){return ab.getDay()&&1!=ab.getDate()}],["%b %d",function(ab){return 1!=ab.getDate()}],["%B",function(ab){return ab.getMonth()}],["%Y",iu]]),l0={range:function(af,ad,ab){return oS.range(+af,+ad,ab).map(jd)},floor:ge,ceil:ge};a5.year=oI.year,oI.scale=function(){return oc(oS.scale.linear(),a5,oy)};var oh=a5.map(function(ab){return[ab[0].utc,ab[1]]}),co=ln.multi([[".%L",function(ab){return ab.getUTCMilliseconds()}],[":%S",function(ab){return ab.getUTCSeconds()}],["%I:%M",function(ab){return ab.getUTCMinutes()}],["%I %p",function(ab){return ab.getUTCHours()}],["%a %d",function(ab){return ab.getUTCDay()&&1!=ab.getUTCDate()}],["%b %d",function(ab){return 1!=ab.getUTCDate()}],["%B",function(ab){return ab.getUTCMonth()}],["%Y",iu]]);oh.year=oI.year.utc,oI.scale.utc=function(){return oc(oS.scale.linear(),oh,co)},oS.text=pL(function(ab){return ab.responseText}),oS.json=function(ab,ad){return mo(ab,"application/json",nx,ad)},oS.html=function(ab,ad){return mo(ab,"text/html",no,ad)},oS.xml=pL(function(ab){return ab.responseXML}),"function"==typeof define&&define.amd?define(oS):"object"==typeof module&&module.exports?module.exports=oS:this.d3=oS}();var AbstractEdge=function(){};AbstractEdge.prototype={hide:function(){this.connection.fg.hide();this.connection.bg&&this.bg.connection.hide()}};var EdgeFactory=function(){this.template=new AbstractEdge();this.template.style=new Object();this.template.style.directed=false;this.template.weight=1};EdgeFactory.prototype={build:function(f,g){var d=jQuery.extend(true,{},this.template);d.source=f;d.target=g;return d}};var Graph=function(){this.nodes={};this.edges=[];this.edgeFactory=new EdgeFactory()};Graph.prototype={addNode:function(g,d){if(this.nodes[g]==undefined){this.nodes[g]=new Graph.Node(g,d)}var f=this.nodes[g];return f},addEdge:function(o,m,q){var h=this.addNode(o);var j=this.addNode(m);var p=this.edgeFactory.build(h,j);jQuery.extend(p.style,q);h.edges.push(p);this.edges.push(p);j.edges.push(p)},copy:function(){var f=new Graph();for(var j in this.edges){var g=this.edges[j];f.addEdge(g.source.id,g.target.id)}for(var h in this.nodes){if(this.nodes[h].layer!=undefined){f.nodes[h].layer=this.nodes[h].layer}}return f},removeEdge:function(q){for(var m in this.nodes){var h=this.nodes[m];for(var o in h.edges){var j=h.edges[o];if(j.source.id==q.source.id&&j.target.id==q.target.id){h.edges.splice(o,1)}}}var p=this.edges.indexOf(q);this.edges.splice(p,1)},removeEdges:function(b){for(e in b){this.removeEdge(b[e])}},getNode:function(b){return this.nodes[b]},removeNode:function(h){var f=[];for(var g=0;g<h.edges.length;g++){var j=h.edges[g];f.push(j)}for(e in f){this.removeEdge(f[e])}delete this.nodes[h.id]},getLeafs:function(){var f=new Array();for(var g in this.nodes){var d=this.nodes[g];if(this.nodeOutDegree(d)==0){f.push(d)}}return f},nodeInDegree:function(g){var d=0;for(e in g.edges){var f=g.edges[e].source;if(f.id!=g.id){d++}}return d},nodeOutDegree:function(g){var d=0;for(e in g.edges){var f=g.edges[e].source;if(f.id==g.id){d++}}return d},hierarchicalDrawing:function(){var b=this.extractDAG();b.layerAssignment();b.createGraphWithBends();b.vertexOrdering();for(n in this.nodes){this.nodes[n].layer=b.nodes[n].layer;this.nodes[n].xOrder=b.nodes[n].xOrder}},xOrderShift:function(){var p=[];for(var o in this.nodes){var q=this.nodes[o].layer;if(p[q]==undefined){p[q]=new Array()}p[q].push(this.nodes[o])}varMaxLayerSize=0;for(var m in p){if(varMaxLayerSize<p[m].length){varMaxLayerSize=p[m].length}}for(var r=0;r<p.length;r++){var s=p[r].length;for(o in p[r]){var j=p[r][o];j.xOrder=j.xOrder+Math.floor(varMaxLayerSize/s)}}},createGraphWithBends:function(){for(var b in this.edges){if(Math.abs(this.edges[b].source.layer-this.edges[b].target.layer)>1){this.addBendNodes(this.edges[b])}}},addBendNodes:function(j){console.log("---- Add bend nodes for edge "+j.source.id+","+j.target.id);var o=j.source;var p=j.target;var m=o;for(var q=o.layer-1;q>p.layer;q--){var b=this.addNode("b_"+o.id+"-"+p.id+"_"+q);b.layer=q;this.addEdge(m.id,b.id);m=b}this.addEdge(m.id,p.id)},vertexOrdering:function(){var f=[];for(var h in this.nodes){var g=this.nodes[h].layer;if(f[g]==undefined){f[g]=new Array()}f[g].push(this.nodes[h])}for(l in f){var g=f[l];var j=0;for(h in g){g[h].xOrder=j;j++}}for(l in f){var g=f[l];this.greedySwitch(g)}},greedySwitch:function(r){var q=0;if(r.length==1){return q}else{for(var s=0;s<r.length;s++){for(var t=s+1;t<r.length;t++){q=q+this.getCrossingNumber(r[s],r[t])}}var o=q;var j=0;while(o!=j){o=j;j=0;for(var s=0;s<r.length;s++){for(var t=s+1;t<r.length;t++){var u=r[s];var p=r[t];nbij=this.getCrossingNumber(u,p);u.xOrder=t;p.xOrder=s;nbji=this.getCrossingNumber(u,p);if(nbji<nbij){r[s]=p;r[t]=u;j=j+nbji;console.log("swap "+u.id+" and "+p.id)}else{u.xOrder=s;p.xOrder=t;j=j+nbij}}}}return q}},getTotalCrossings:function(){var g=0;for(n1 in this.nodes){var d=this.nodes[n1];for(n2 in this.nodes){var f=this.nodes[n2];g=g+this.getCrossingNumber(d,f)}}return g},getCrossingNumber:function(o,g){var m=0;if((o.xOrder<g.xOrder)&&(o.layer==g.layer)){for(e1 in o.edges){var h;if(o.edges[e1].source.id==o.id){h=o.edges[e1].target}else{h=o.edges[e1].source}for(e2 in g.edges){var j;if(g.edges[e2].source.id==g.id){j=g.edges[e2].target}else{j=g.edges[e2].source}if((h.layer>o.layer)&&(j.layer>o.layer)&&(j.xOrder<h.xOrder)){m++}}}}return m},isAcyclic:function(){var g=this.copy();var f=g.getLeafs();while(f.length!=0&&Object.keys(g.nodes).length!=0){var d=f.pop();g.removeNode(d);f=g.getLeafs()}if(Object.keys(g.nodes).length==0){return true}if(f.length==0){return false}},getMinimalFAS:function(){var f=new Array();var h=new Graph();var g=new Array();for(e in this.edges){var j=this.edges[e];h.addEdge(j.source.id,j.target.id);if(h.isAcyclic()){f.push(j)}else{h.removeEdge(j);g.push(j)}}return g},extractDAG:function(){var c=this.copy();var d=c.getMinimalFAS();c.removeEdges(d);return c},layerAssignment:function(){var m=Number.MAX_VALUE;finalC=-1;finalW=-1;for(var j=1;j<=2;j++){for(var h=1;h<=4;h++){var o=this.copy();var c=o.minWidthLayerAssignment(h,j);if(c<m){finalC=j;finalW=h;m=c}}}this.minWidthLayerAssignment(finalW,finalC);this.vertexPromotion();this.shiftLayers()},shiftLayers:function(){var c=Number.MAX_VALUE;for(n in this.nodes){var d=this.nodes[n].layer;if(d<c){c=d}}for(n in this.nodes){this.nodes[n].layer=this.nodes[n].layer-c}},promoteVertex:function(g){var h=0;var j=this.getInNodesTo(g);for(x in j){var f=j[x];if(f.layer==g.layer+1){h=h+this.promoteVertex(f)}}g.layer=g.layer+1;h=h-this.getInNodesTo(g).length+this.getOutNodesFrom(g).length;return h},vertexPromotion:function(){var j=this.copy();var g=-1;while(g!=0){g=0;for(x in this.nodes){var h=this.nodes[x];if(this.getInNodesTo(h).length>0){var o=this.promoteVertex(h);var m=(o<0);if(m){g=g+1;j=this.copy()}else{for(n in j.nodes){this.nodes[n].layer=j.nodes[n].layer}}}else{console.log("--- in degree is below zero")}}}},minWidthLayerAssignment:function(D,y){var K=0;var C=new Array();for(var E in this.nodes){C.push(this.nodes[E]);this.nodes[E].layer=-1}var B=new Array();var H=new Array();var z=1;var c=0;var J=0;while(!($(B).not(C).length==0&&$(C).not(B).length==0)){var G=$.grep(C,function(a){return $.inArray(a,B)<0});var A=new Array();for(E in G){var v=this.getOutNodesFrom(G[E]);if($(v).not(H).length==0){A.push(G[E])}}var F=false;var I=Number.MAX_VALUE;if(A.length!=0){F=true;var L=this.quickDegreeSort(A).pop();L.layer=z;B.push(L);I=this.getOutNodesFrom(L);c=c-this.getOutNodesFrom(L).length+1;J=J+this.getInNodesTo(L).length}if(!F||(c>=D&&I<1)||J>=y*D){z=z+1;for(E in B){H.push(B[E])}if(c>K){K=c}c=J;J=0}}return K},getOutNodesFrom:function(d){var f=new Array();for(var g in d.edges){if(d.edges[g].target.id!=d.id){f.push(d.edges[g].target)}}return f},getInNodesTo:function(f){var g=new Array();for(var d in f.edges){if(f.edges[d].source.id!=f.id){g.push(f.edges[d].source)}}return g},getStronglyConnectedComponents:function(){var h=new Array();var j=0;var g=new Array();for(n in this.nodes){var f=this.nodes[n];f.index=undefined;f.lowlink=Number.MAX_VALUE}for(n in this.nodes){var f=this.nodes[n];if(f.index==undefined){this.strongconnect(f,j,h,g)}}return g},strongconnect:function(p,o,m,h){p.index=o;p.lowlink=o;o=o+1;m.push(p);for(e in p.edges){var j=p.edges[e].target;if(j.id!=p.id){if(j.index==undefined){this.strongconnect(j,o,m,h);p.lowlink=Math.min(p.lowlink,j.lowlink)}else{if(m.indexOf(j)!=undefined){p.lowlink=Math.min(p.lowlink,j.lowlink)}}}}if(p.lowlink==p.index){var q=new Array();var j=m.pop();while(j.id!=p.id){q.push(j);var j=m.pop()}q.push(j);h.push(q)}},quickDegreeSort:function(r){if(r.length<=1){return r}var s=Math.floor(r.length/2);var o=r[s];var q=[],j=[],m=[];for(var p in r){this.nodeOutDegree(r[p])<this.nodeOutDegree(o)&&q.push(r[p]);this.nodeOutDegree(r[p])==this.nodeOutDegree(o)&&j.push(r[p]);this.nodeOutDegree(r[p])>this.nodeOutDegree(o)&&m.push(r[p])}return this.quickDegreeSort(q).concat(j).concat(this.quickDegreeSort(m))}};Graph.Node=function(c,d){d=d||{};d.id=c;d.edges=[];d.hide=function(){this.hidden=true;this.shape&&this.shape.hide();for(i in this.edges){(this.edges[i].source.id==c||this.edges[i].target==c)&&this.edges[i].hide&&this.edges[i].hide()}};d.show=function(){this.hidden=false;this.shape&&this.shape.show();for(i in this.edges){(this.edges[i].source.id==c||this.edges[i].target==c)&&this.edges[i].show&&this.edges[i].show()}};d.getAdjacents=function(){return this.edges.map(function(a){if(a.source.id==d.id){return a.target}else{return a.source}})};return d};Graph.Node.prototype={};function BinaryMinHeap(p,s){var o=[];var s=s||"key";var r=function(a){return Math.floor((a-1)/2)};var t=function(a){return 2*a+2};var q=function(a){return 2*a+1};function m(a){var b=r(a);while((b>=0)&&(o[a][s]<o[b][s])){o[a]=o.splice(b,1,o[a])[0];a=b;b=r(a)}}function u(d){var a=q(d);var c=t(d);while(o[a]&&(o[d][s]>o[a][s])||o[c]&&(o[d][s]>o[c][s])){var b=o[a]?o[c]?o[a][s]>o[c][s]?c:a:a:a;o[d]=o.splice(b,1,o[d])[0];d=b;a=q(d);c=t(d)}}this.insert=function(a){(a[s]==undefined)&&(a={key:a});o.push(a);m(o.length-1)};this.min=function(){return o.length==1?undefined:o[0]};this.extractMin=function(){var a=this.min();(o.length==1)&&(o=[])||(o[0]=o.pop())&&u(0);return a};this.changeKey=function(a,b){throw"function not implemented"};this.heapify=function(){for(var a=Math.floor((o.length-2)/2);a>=0;a--){u(a)}};for(i in (p||[])){this.insert(p[i])}}var jscolor={dir:"",bindClass:"color",binding:true,preloading:true,install:function(){jscolor.init()},init:function(){if(jscolor.binding){jscolor.bind()}if(jscolor.preloading){jscolor.preload()}},getDir:function(){if(!jscolor.dir){var b=jscolor.detectDir();jscolor.dir=b!==false?b:"jscolor/"}return jscolor.dir},detectDir:function(){var o=location.href;var m=document.getElementsByTagName("base");for(var h=0;h<m.length;h+=1){if(m[h].href){o=m[h].href}}var m=document.getElementsByTagName("script");for(var h=0;h<m.length;h+=1){if(m[h].src&&/(^|\/)jscolor\.js([?#].*)?$/i.test(m[h].src)){var j=new jscolor.URI(m[h].src);var g=j.toAbsolute(o);g.path=g.path.replace(/[^\/]+$/,"");g.query=null;g.fragment=null;return g.toString()}}return false},bind:function(){var p=new RegExp("(^|\\s)("+jscolor.bindClass+")(\\s*(\\{[^}]*\\})|\\s|$)","i");var o=document.getElementsByTagName("input");for(var q=0;q<o.length;q+=1){if(jscolor.isColorAttrSupported&&o[q].type.toLowerCase()=="color"){continue}var h;if(!o[q].color&&o[q].className&&(h=o[q].className.match(p))){var m={};if(h[4]){try{m=(new Function("return ("+h[4]+")"))()}catch(j){}}o[q].color=new jscolor.color(o[q],m)}}},preload:function(){for(var b in jscolor.imgRequire){if(jscolor.imgRequire.hasOwnProperty(b)){jscolor.loadImage(b)}}},images:{pad:[181,101],sld:[16,101],cross:[15,15],arrow:[7,11]},imgRequire:{},imgLoaded:{},requireImage:function(b){jscolor.imgRequire[b]=true},loadImage:function(b){if(!jscolor.imgLoaded[b]){jscolor.imgLoaded[b]=new Image();jscolor.imgLoaded[b].src=jscolor.getDir()+b}},fetchElement:function(b){return typeof b==="string"?document.getElementById(b):b},addEvent:function(f,g,d){if(f.addEventListener){f.addEventListener(g,d,false)}else{if(f.attachEvent){f.attachEvent("on"+g,d)}}},fireEvent:function(f,g){if(!f){return}if(document.createEvent){var d=document.createEvent("HTMLEvents");d.initEvent(g,true,true);f.dispatchEvent(d)}else{if(document.createEventObject){var d=document.createEventObject();f.fireEvent("on"+g,d)}else{if(f["on"+g]){f["on"+g]()}}}},getElementPos:function(o){var m=o,g=o;var h=0,j=0;if(m.offsetParent){do{h+=m.offsetLeft;j+=m.offsetTop}while(m=m.offsetParent)}while((g=g.parentNode)&&g.nodeName.toUpperCase()!=="BODY"){h-=g.scrollLeft;j-=g.scrollTop}return[h,j]},getElementSize:function(b){return[b.offsetWidth,b.offsetHeight]},getRelMousePos:function(d){var f=0,g=0;if(!d){d=window.event}if(typeof d.offsetX==="number"){f=d.offsetX;g=d.offsetY}else{if(typeof d.layerX==="number"){f=d.layerX;g=d.layerY}}return{x:f,y:g}},getViewPos:function(){if(typeof window.pageYOffset==="number"){return[window.pageXOffset,window.pageYOffset]}else{if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){return[document.body.scrollLeft,document.body.scrollTop]}else{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){return[document.documentElement.scrollLeft,document.documentElement.scrollTop]}else{return[0,0]}}}},getViewSize:function(){if(typeof window.innerWidth==="number"){return[window.innerWidth,window.innerHeight]}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){return[document.body.clientWidth,document.body.clientHeight]}else{if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){return[document.documentElement.clientWidth,document.documentElement.clientHeight]}else{return[0,0]}}}},URI:function(d){this.scheme=null;this.authority=null;this.path="";this.query=null;this.fragment=null;this.parse=function(a){var b=a.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/);this.scheme=b[3]?b[2]:null;this.authority=b[5]?b[6]:null;this.path=b[7];this.query=b[9]?b[10]:null;this.fragment=b[12]?b[13]:null;return this};this.toString=function(){var a="";if(this.scheme!==null){a=a+this.scheme+":"}if(this.authority!==null){a=a+"//"+this.authority}if(this.path!==null){a=a+this.path}if(this.query!==null){a=a+"?"+this.query}if(this.fragment!==null){a=a+"#"+this.fragment}return a};this.toAbsolute=function(a){var a=new jscolor.URI(a);var b=this;var g=new jscolor.URI();if(a.scheme===null){return false}if(b.scheme!==null&&b.scheme.toLowerCase()===a.scheme.toLowerCase()){b.scheme=null}if(b.scheme!==null){g.scheme=b.scheme;g.authority=b.authority;g.path=c(b.path);g.query=b.query}else{if(b.authority!==null){g.authority=b.authority;g.path=c(b.path);g.query=b.query}else{if(b.path===""){g.path=a.path;if(b.query!==null){g.query=b.query}else{g.query=a.query}}else{if(b.path.substr(0,1)==="/"){g.path=c(b.path)}else{if(a.authority!==null&&a.path===""){g.path="/"+b.path}else{g.path=a.path.replace(/[^\/]+$/,"")+b.path}g.path=c(g.path)}g.query=b.query}g.authority=a.authority}g.scheme=a.scheme}g.fragment=b.fragment;return g};function c(a){var g="";while(a){if(a.substr(0,3)==="../"||a.substr(0,2)==="./"){a=a.replace(/^\.+/,"").substr(1)}else{if(a.substr(0,3)==="/./"||a==="/."){a="/"+a.substr(3)}else{if(a.substr(0,4)==="/../"||a==="/.."){a="/"+a.substr(4);g=g.replace(/\/?[^\/]*$/,"")}else{if(a==="."||a===".."){a=""}else{var b=a.match(/^\/?[^\/]*/)[0];a=a.substr(b.length);g=g+b}}}}}return g}if(d){this.parse(d)}},color:function(O,aj){this.required=true;this.adjust=true;this.hash=false;this.caps=true;this.slider=true;this.valueElement=O;this.styleElement=O;this.onImmediateChange=null;this.hsv=[0,0,1];this.rgb=[1,1,1];this.minH=0;this.maxH=6;this.minS=0;this.maxS=1;this.minV=0;this.maxV=1;this.pickerOnfocus=true;this.pickerMode="HSV";this.pickerPosition="bottom";this.pickerSmartPosition=true;this.pickerButtonHeight=20;this.pickerClosable=false;this.pickerCloseText="Close";this.pickerButtonColor="ButtonText";this.pickerFace=10;this.pickerFaceColor="ThreeDFace";this.pickerBorder=1;this.pickerBorderColor="ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight";this.pickerInset=1;this.pickerInsetColor="ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow";this.pickerZIndex=10000;for(var L in aj){if(aj.hasOwnProperty(L)){this[L]=aj[L]}}this.hidePicker=function(){if(ac()){ag()}};this.showPicker=function(){if(!ac()){var d=jscolor.getElementPos(O);var h=jscolor.getElementSize(O);var o=jscolor.getViewPos();var b=jscolor.getViewSize();var a=ad(this);var c,f,g;switch(this.pickerPosition.toLowerCase()){case"left":c=1;f=0;g=-1;break;case"right":c=1;f=0;g=1;break;case"top":c=0;f=1;g=-1;break;default:c=0;f=1;g=1;break}var j=(h[f]+a[f])/2;if(!this.pickerSmartPosition){var m=[d[c],d[f]+h[f]-j+j*g]}else{var m=[-o[c]+d[c]+a[c]>b[c]?(-o[c]+d[c]+h[c]/2>b[c]/2&&d[c]+h[c]-a[c]>=0?d[c]+h[c]-a[c]:d[c]):d[c],-o[f]+d[f]+h[f]+a[f]-j+j*g>b[f]?(-o[f]+d[f]+h[f]/2>b[f]/2&&d[f]+h[f]-j-j*g>=0?d[f]+h[f]-j-j*g:d[f]+h[f]-j+j*g):(d[f]+h[f]-j+j*g>=0?d[f]+h[f]-j+j*g:d[f]+h[f]-j-j*g)]}aa(m[c],m[f])}};this.importColor=function(){if(!an){this.exportColor()}else{if(!this.adjust){if(!this.fromString(an.value,V)){p.style.backgroundImage=p.jscStyle.backgroundImage;p.style.backgroundColor=p.jscStyle.backgroundColor;p.style.color=p.jscStyle.color;this.exportColor(V|M)}}else{if(!this.required&&/^\s*$/.test(an.value)){an.value="";p.style.backgroundImage=p.jscStyle.backgroundImage;p.style.backgroundColor=p.jscStyle.backgroundColor;p.style.color=p.jscStyle.color;this.exportColor(V|M)}else{if(this.fromString(an.value)){}else{this.exportColor()}}}}};this.exportColor=function(b){if(!(b&V)&&an){var a=this.toString();if(this.caps){a=a.toUpperCase()}if(this.hash){a="#"+a}an.value=a}if(!(b&M)&&p){p.style.backgroundImage="none";p.style.backgroundColor="#"+this.toString();p.style.color=0.213*this.rgb[0]+0.715*this.rgb[1]+0.072*this.rgb[2]<0.5?"#FFF":"#000"}if(!(b&Z)&&ac()){N()}if(!(b&ai)&&ac()){P()}};this.fromHSV=function(c,d,a,b){if(c!==null){c=Math.max(0,this.minH,Math.min(6,this.maxH,c))}if(d!==null){d=Math.max(0,this.minS,Math.min(1,this.maxS,d))}if(a!==null){a=Math.max(0,this.minV,Math.min(1,this.maxV,a))}this.rgb=af(c===null?this.hsv[0]:(this.hsv[0]=c),d===null?this.hsv[1]:(this.hsv[1]=d),a===null?this.hsv[2]:(this.hsv[2]=a));this.exportColor(b)};this.fromRGB=function(b,d,c,a){if(b!==null){b=Math.max(0,Math.min(1,b))}if(d!==null){d=Math.max(0,Math.min(1,d))}if(c!==null){c=Math.max(0,Math.min(1,c))}var f=U(b===null?this.rgb[0]:b,d===null?this.rgb[1]:d,c===null?this.rgb[2]:c);if(f[0]!==null){this.hsv[0]=Math.max(0,this.minH,Math.min(6,this.maxH,f[0]))}if(f[2]!==0){this.hsv[1]=f[1]===null?null:Math.max(0,this.minS,Math.min(1,this.maxS,f[1]))}this.hsv[2]=f[2]===null?null:Math.max(0,this.minV,Math.min(1,this.maxV,f[2]));var g=af(this.hsv[0],this.hsv[1],this.hsv[2]);this.rgb[0]=g[0];this.rgb[1]=g[1];this.rgb[2]=g[2];this.exportColor(a)};this.fromString=function(c,a){var b=c.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);if(!b){return false}else{if(b[1].length===6){this.fromRGB(parseInt(b[1].substr(0,2),16)/255,parseInt(b[1].substr(2,2),16)/255,parseInt(b[1].substr(4,2),16)/255,a)}else{this.fromRGB(parseInt(b[1].charAt(0)+b[1].charAt(0),16)/255,parseInt(b[1].charAt(1)+b[1].charAt(1),16)/255,parseInt(b[1].charAt(2)+b[1].charAt(2),16)/255,a)}return true}};this.toString=function(){return((256|Math.round(255*this.rgb[0])).toString(16).substr(1)+(256|Math.round(255*this.rgb[1])).toString(16).substr(1)+(256|Math.round(255*this.rgb[2])).toString(16).substr(1))};function U(c,f,a){var b=Math.min(Math.min(c,f),a);var h=Math.max(Math.max(c,f),a);var d=h-b;if(d===0){return[null,0,h]}var g=c===b?3+(a-f)/d:(f===b?5+(c-a)/d:1+(f-c)/d);return[g===6?0:g,d/h,h]}function af(f,g,a){if(f===null){return[a,a,a]}var h=Math.floor(f);var c=h%2?f-h:1-(f-h);var d=a*(1-g);var b=a*(1-g*c);switch(h){case 6:case 0:return[a,b,d];case 1:return[b,a,d];case 2:return[d,a,b];case 3:return[d,b,a];case 4:return[b,d,a];case 5:return[a,d,b]}}function ag(){delete jscolor.picker.owner;document.getElementsByTagName("body")[0].removeChild(jscolor.picker.boxB)}function aa(d,f){if(!jscolor.picker){jscolor.picker={box:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),btn:document.createElement("div"),btnS:document.createElement("span"),btnT:document.createTextNode(X.pickerCloseText)};for(var h=0,g=4;h<jscolor.images.sld[1];h+=g){var j=document.createElement("div");j.style.height=g+"px";j.style.fontSize="1px";j.style.lineHeight="0";jscolor.picker.sld.appendChild(j)}jscolor.picker.sldB.appendChild(jscolor.picker.sld);jscolor.picker.box.appendChild(jscolor.picker.sldB);jscolor.picker.box.appendChild(jscolor.picker.sldM);jscolor.picker.padB.appendChild(jscolor.picker.pad);jscolor.picker.box.appendChild(jscolor.picker.padB);jscolor.picker.box.appendChild(jscolor.picker.padM);jscolor.picker.btnS.appendChild(jscolor.picker.btnT);jscolor.picker.btn.appendChild(jscolor.picker.btnS);jscolor.picker.box.appendChild(jscolor.picker.btn);jscolor.picker.boxB.appendChild(jscolor.picker.box)}var q=jscolor.picker;q.box.onmouseup=q.box.onmouseout=function(){O.focus()};q.box.onmousedown=function(){T=true};q.box.onmousemove=function(r){if(ak||S){ak&&Y(r);S&&ae(r);if(document.selection){document.selection.empty()}else{if(window.getSelection){window.getSelection().removeAllRanges()}}ah()}};if("ontouchstart" in window){var a=function(r){var s={offsetX:r.touches[0].pageX-ab.X,offsetY:r.touches[0].pageY-ab.Y};if(ak||S){ak&&Y(s);S&&ae(s);ah()}r.stopPropagation();r.preventDefault()};q.box.removeEventListener("touchmove",a,false);q.box.addEventListener("touchmove",a,false)}q.padM.onmouseup=q.padM.onmouseout=function(){if(ak){ak=false;jscolor.fireEvent(an,"change")}};q.padM.onmousedown=function(r){switch(am){case 0:if(X.hsv[2]===0){X.fromHSV(null,null,1)}break;case 1:if(X.hsv[1]===0){X.fromHSV(null,1,null)}break}S=false;ak=true;Y(r);ah()};if("ontouchstart" in window){q.padM.addEventListener("touchstart",function(r){ab={X:r.target.offsetParent.offsetLeft,Y:r.target.offsetParent.offsetTop};this.onmousedown({offsetX:r.touches[0].pageX-ab.X,offsetY:r.touches[0].pageY-ab.Y})})}q.sldM.onmouseup=q.sldM.onmouseout=function(){if(S){S=false;jscolor.fireEvent(an,"change")}};q.sldM.onmousedown=function(r){ak=false;S=true;ae(r);ah()};if("ontouchstart" in window){q.sldM.addEventListener("touchstart",function(r){ab={X:r.target.offsetParent.offsetLeft,Y:r.target.offsetParent.offsetTop};this.onmousedown({offsetX:r.touches[0].pageX-ab.X,offsetY:r.touches[0].pageY-ab.Y})})}var b=ad(X);q.box.style.width=b[0]+"px";q.box.style.height=b[1]+"px";q.boxB.style.position="absolute";q.boxB.style.clear="both";q.boxB.style.left=d+"px";q.boxB.style.top=f+"px";q.boxB.style.zIndex=X.pickerZIndex;q.boxB.style.border=X.pickerBorder+"px solid";q.boxB.style.borderColor=X.pickerBorderColor;q.boxB.style.background=X.pickerFaceColor;q.pad.style.width=jscolor.images.pad[0]+"px";q.pad.style.height=jscolor.images.pad[1]+"px";q.padB.style.position="absolute";q.padB.style.left=X.pickerFace+"px";q.padB.style.top=X.pickerFace+"px";q.padB.style.border=X.pickerInset+"px solid";q.padB.style.borderColor=X.pickerInsetColor;q.padM.style.position="absolute";q.padM.style.left="0";q.padM.style.top="0";q.padM.style.width=X.pickerFace+2*X.pickerInset+jscolor.images.pad[0]+jscolor.images.arrow[0]+"px";q.padM.style.height=q.box.style.height;q.padM.style.cursor="crosshair";q.sld.style.overflow="hidden";q.sld.style.width=jscolor.images.sld[0]+"px";q.sld.style.height=jscolor.images.sld[1]+"px";q.sldB.style.display=X.slider?"block":"none";q.sldB.style.position="absolute";q.sldB.style.right=X.pickerFace+"px";q.sldB.style.top=X.pickerFace+"px";q.sldB.style.border=X.pickerInset+"px solid";q.sldB.style.borderColor=X.pickerInsetColor;q.sldM.style.display=X.slider?"block":"none";q.sldM.style.position="absolute";q.sldM.style.right="0";q.sldM.style.top="0";q.sldM.style.width=jscolor.images.sld[0]+jscolor.images.arrow[0]+X.pickerFace+2*X.pickerInset+"px";q.sldM.style.height=q.box.style.height;try{q.sldM.style.cursor="pointer"}catch(m){q.sldM.style.cursor="hand"}function c(){var s=X.pickerInsetColor.split(/\s+/);var r=s.length<2?s[0]:s[1]+" "+s[0]+" "+s[0]+" "+s[1];q.btn.style.borderColor=r}q.btn.style.display=X.pickerClosable?"block":"none";q.btn.style.position="absolute";q.btn.style.left=X.pickerFace+"px";q.btn.style.bottom=X.pickerFace+"px";q.btn.style.padding="0 15px";q.btn.style.height="18px";q.btn.style.border=X.pickerInset+"px solid";c();q.btn.style.color=X.pickerButtonColor;q.btn.style.font="12px sans-serif";q.btn.style.textAlign="center";try{q.btn.style.cursor="pointer"}catch(m){q.btn.style.cursor="hand"}q.btn.onmousedown=function(){X.hidePicker()};q.btnS.style.lineHeight=q.btn.style.height;switch(am){case 0:var o="hs.png";break;case 1:var o="hv.png";break}q.padM.style.backgroundImage="url('"+jscolor.getDir()+"cross.gif')";q.padM.style.backgroundRepeat="no-repeat";q.sldM.style.backgroundImage="url('"+jscolor.getDir()+"arrow.gif')";q.sldM.style.backgroundRepeat="no-repeat";q.pad.style.backgroundImage="url('"+jscolor.getDir()+o+"')";q.pad.style.backgroundRepeat="no-repeat";q.pad.style.backgroundPosition="0 0";N();P();jscolor.picker.owner=X;document.getElementsByTagName("body")[0].appendChild(q.boxB)}function ad(a){var b=[2*a.pickerInset+2*a.pickerFace+jscolor.images.pad[0]+(a.slider?2*a.pickerInset+2*jscolor.images.arrow[0]+jscolor.images.sld[0]:0),a.pickerClosable?4*a.pickerInset+3*a.pickerFace+jscolor.images.pad[1]+a.pickerButtonHeight:2*a.pickerInset+2*a.pickerFace+jscolor.images.pad[1]];return b}function N(){switch(am){case 0:var h=1;break;case 1:var h=2;break}var c=Math.round((X.hsv[0]/6)*(jscolor.images.pad[0]-1));var d=Math.round((1-X.hsv[h])*(jscolor.images.pad[1]-1));jscolor.picker.padM.style.backgroundPosition=(X.pickerFace+X.pickerInset+c-Math.floor(jscolor.images.cross[0]/2))+"px "+(X.pickerFace+X.pickerInset+d-Math.floor(jscolor.images.cross[1]/2))+"px";var a=jscolor.picker.sld.childNodes;switch(am){case 0:var f=af(X.hsv[0],X.hsv[1],1);for(var m=0;m<a.length;m+=1){a[m].style.backgroundColor="rgb("+(f[0]*(1-m/a.length)*100)+"%,"+(f[1]*(1-m/a.length)*100)+"%,"+(f[2]*(1-m/a.length)*100)+"%)"}break;case 1:var f,b,g=[X.hsv[2],0,0];var m=Math.floor(X.hsv[0]);var j=m%2?X.hsv[0]-m:1-(X.hsv[0]-m);switch(m){case 6:case 0:f=[0,1,2];break;case 1:f=[1,0,2];break;case 2:f=[2,0,1];break;case 3:f=[2,1,0];break;case 4:f=[1,2,0];break;case 5:f=[0,2,1];break}for(var m=0;m<a.length;m+=1){b=1-1/(a.length-1)*m;g[1]=g[0]*(1-b*j);g[2]=g[0]*(1-b);a[m].style.backgroundColor="rgb("+(g[f[0]]*100)+"%,"+(g[f[1]]*100)+"%,"+(g[f[2]]*100)+"%)"}break}}function P(){switch(am){case 0:var b=2;break;case 1:var b=1;break}var a=Math.round((1-X.hsv[b])*(jscolor.images.sld[1]-1));jscolor.picker.sldM.style.backgroundPosition="0 "+(X.pickerFace+X.pickerInset+a-Math.floor(jscolor.images.arrow[1]/2))+"px"}function ac(){return jscolor.picker&&jscolor.picker.owner===X}function Q(){if(an===O){X.importColor()}if(X.pickerOnfocus){X.hidePicker()}}function W(){if(an!==O){X.importColor()}}function Y(d){var a=jscolor.getRelMousePos(d);var b=a.x-X.pickerFace-X.pickerInset;var c=a.y-X.pickerFace-X.pickerInset;switch(am){case 0:X.fromHSV(b*(6/(jscolor.images.pad[0]-1)),1-c/(jscolor.images.pad[1]-1),null,ai);break;case 1:X.fromHSV(b*(6/(jscolor.images.pad[0]-1)),null,1-c/(jscolor.images.pad[1]-1),ai);break}}function ae(a){var b=jscolor.getRelMousePos(a);var c=b.y-X.pickerFace-X.pickerInset;switch(am){case 0:X.fromHSV(null,null,1-c/(jscolor.images.sld[1]-1),Z);break;case 1:X.fromHSV(null,1-c/(jscolor.images.sld[1]-1),null,Z);break}}function ah(){if(X.onImmediateChange){var a;if(typeof X.onImmediateChange==="string"){a=new Function(X.onImmediateChange)}else{a=X.onImmediateChange}a.call(X)}}var X=this;var am=this.pickerMode.toLowerCase()==="hvs"?1:0;var T=false;var an=jscolor.fetchElement(this.valueElement),p=jscolor.fetchElement(this.styleElement);var ak=false,S=false,ab={};var V=1<<0,M=1<<1,Z=1<<2,ai=1<<3;jscolor.isColorAttrSupported=false;var al=document.createElement("input");if(al.setAttribute){al.setAttribute("type","color");if(al.type.toLowerCase()=="color"){jscolor.isColorAttrSupported=true}}jscolor.addEvent(O,"focus",function(){if(X.pickerOnfocus){X.showPicker()}});jscolor.addEvent(O,"blur",function(){if(!T){window.setTimeout(function(){T||Q();T=false},0)}else{T=false}});if(an){var R=function(){X.fromString(an.value,V);ah()};jscolor.addEvent(an,"keyup",R);jscolor.addEvent(an,"input",R);jscolor.addEvent(an,"blur",W);an.setAttribute("autocomplete","off")}if(p){p.jscStyle={backgroundImage:p.style.backgroundImage,backgroundColor:p.style.backgroundColor,color:p.style.color}}switch(am){case 0:jscolor.requireImage("hs.png");break;case 1:jscolor.requireImage("hv.png");break}jscolor.requireImage("cross.gif");jscolor.requireImage("arrow.gif");this.importColor()}};jscolor.install();var metExploreD3={GraphUtils:"",GraphCaption:"",GraphNetwork:"",GraphLink:"",GraphFunction:"",GraphMapping:"",GraphPanel:"",GraphPath:"",GraphNode:"",Features:"",testWSMappingGraphToken:function(o,g,h,m){var j={token:o,Content:g,pathways:h};Ext.Ajax.request({method:"POST",url:"http://metexplore.toulouse.inra.fr:8080/metExploreWebService/mapping/launchtokenmapping/inchi/1363/filteredbypathways/",jsonData:j,success:function(c,b){var a=Ext.decode(c.responseText);m(a)},failure:function(b,a){console.log(b)}})},testWSMappingPathways:function(f,d){var g={token:"",Content:f};Ext.Ajax.request({method:"POST",url:"http://metexplore.toulouse.inra.fr:8080/metExploreWebService/mapping/launchtokenmapping/inchi/1363/aspathways/",jsonData:g,success:function(c,b){var a=Ext.decode(c.responseText);d(a)},failure:function(b,a){console.log(b)}})},testWSMappingGraph:function(g,m,o){var h="";m.forEach(function(a){h+=a;if(m.indexOf(a)!=m.length-1){h+=","}});var j={token:"",Content:g,pathways:"("+h+")"};Ext.Ajax.request({method:"POST",url:"http://metexplore.toulouse.inra.fr:8080/metExploreWebService/mapping/launchtokenmapping/inchi/1363/filteredbypathways/",jsonData:j,success:function(c,b){var a=Ext.decode(c.responseText);o(a)},failure:function(b,a){console.log(b)}})},resetMetExploreViz:function(){metExploreD3.fireEvent("selectConditionForm","resetMapping");metExploreD3.fireEvent("graphPanel","initSearch");if(_metExploreViz.getMappingsLength()>0&&m=="viz"){metExploreD3.fireEventArg("buttonMap","reloadMapping",false);metExploreD3.fireEventArg("buttonRefresh","reloadMapping",false);_metExploreViz.resetMappings()}var o=Ext.getCmp("comparisonSidePanel");if(o!=undefined){o.collapse()}if(Ext.getCmp("maskInit")!=undefined){var h=Ext.getCmp("maskInit");h.show();Ext.getCmp("buttonImportToNetworkFromWebsite").setDisabled(true)}var j=_metExploreViz.getSessionsSet();for(var m in j){if(j[m].getForce()!=undefined){j[m].getForce().on("end",null);j[m].getForce().stop()}if(j[m].getId()!="viz"){if(Ext.getCmp(j[m].getId().replace("-body",""))!=null){Ext.getCmp(j[m].getId().replace("-body","")).destroy()}}}d3.select("#viz").select("#D3viz").remove();_metExploreViz.sessions={};_metExploreViz.launched=false;_metExploreViz.dataFromWebSite=null;_metExploreViz.initialData=undefined;_metExploreViz.comparedPanels=[];_metExploreViz.mappings=[];_metExploreViz.linkedByTypeOfMetabolite=false;_metExploreViz.oldCoodinates=[];var g=new NetworkVizSession();g.setVizEngine("D3");g.setId("viz");g.setMapped("false");g.setDisplayNodeName("name");_metExploreViz.addSession(g)},getGlobals:function(){return _metExploreViz},newNetworkData:function(b){return new NetworkData(b)},newGeneralStyle:function(u,s,o,q,p,r,v,t,w){return new GeneralStyle(u,s,o,q,p,r,v,t,w)},getCompartmentInBiosourceSet:function(){return _metExploreViz.getSessionById("viz").getD3Data().getCompartments()},sortCompartmentInBiosource:function(){_metExploreViz.getSessionById("viz").getD3Data().sortCompartments()},getCompartmentInBiosourceLength:function(){return _metExploreViz.getSessionById("viz").getD3Data().getCompartmentsLength()},getCompartmentsGroup:function(){var w=[];var r=Math.ceil(Math.sqrt(metExploreD3.getCompartmentInBiosourceLength()));var u=parseInt(metExploreD3.GraphPanel.getHeight("viz"));var s=parseInt(metExploreD3.GraphPanel.getWidth("viz"));var h=u/r;var y=s/r;var q=h/2;var t=y/2;var v=-1;metExploreD3.getCompartmentInBiosourceSet().forEach(function(d){var f=metExploreD3.getCompartmentInBiosourceSet().indexOf(d)%r;if(f==0){v++}var c=t+(f*y);var a=q+(v*h);var b={key:d.getIdentifier(),center:{x:c,y:a}};w.push(b)});function z(b,a){if(a!=undefined){if(a.values==undefined){a.values=[]}if(a.values.indexOf(b)==-1){a.values.push(b)}}}_metExploreViz.getSessionById("viz").getD3Data().getLinks().forEach(function(b){var a=b.source;var c=b.target;if(a.getBiologicalType()=="metabolite"){z(a,w.find(function(d){return d.key==a.getCompartment()}));z(c,w.find(function(d){return d.key==a.getCompartment()}))}else{z(a,w.find(function(d){return d.key==c.getCompartment()}));z(c,w.find(function(d){return d.key==c.getCompartment()}))}});return w},getPathwaysSet:function(){return _metExploreViz.getSessionById("viz").getD3Data().getPathways()},getPathwaysGroup:function(){var w=[];var r=Math.ceil(Math.sqrt(metExploreD3.getPathwaysLength()));var u=parseInt(metExploreD3.GraphPanel.getHeight("viz"));var s=parseInt(metExploreD3.GraphPanel.getWidth("viz"));var h=u/r;var y=s/r;var q=h/2;var t=y/2;var v=-1;metExploreD3.getPathwaysSet().forEach(function(f){var d=metExploreD3.getPathwaysSet().indexOf(f)%r;if(d==0){v++}var c=t+(d*y);var a=q+(v*h);var b={key:f,center:{x:c,y:a}};w.push(b)});function z(b,a){if(a!=undefined){if(a.values==undefined){a.values=[]}if(a.values.indexOf(b)==-1){a.values.push(b)}}}_metExploreViz.getSessionById("viz").getD3Data().getLinks().forEach(function(b){var a=b.source;var c=b.target;if(a.getBiologicalType()=="reaction"){a.getPathways().forEach(function(d){z(a,w.find(function(f){return f.key==d}));z(c,w.find(function(f){return f.key==d}))})}else{c.getPathways().forEach(function(d){z(a,w.find(function(f){return f.key==d}));z(c,w.find(function(f){return f.key==d}))})}});return w},sortPathways:function(){_metExploreViz.getSessionById("viz").getD3Data().sortPathways()},getPathwaysLength:function(){return _metExploreViz.getSessionById("viz").getD3Data().getPathwaysLength()},setScale:function(c,d){_metExploreViz.getSessionById(d).setScale(c)},getScaleById:function(b){return _metExploreViz.getSessionById(b).getScale()},setMetabolitesSet:function(b){Ext.getStore("S_Metabolite")=b},getMetabolitesSet:function(){return Ext.getStore("S_Metabolite")},getMetaboliteById:function(d,c){return d.getById(c)},setReactionsSet:function(b){Ext.getStore("S_Reaction")=b},getReactionsSet:function(){return Ext.getStore("S_Reaction")},getReactionById:function(d,c){return d.getById(c)},setReactionStyle:function(b){_metExploreViz.reactionStyle=b;metExploreD3.fireEvent("reactionStyleForm","setReactionStyle")},getReactionStyle:function(){return _metExploreViz.reactionStyle},getGeneralStyle:function(){return _metExploreViz.generalStyle},setGeneralStyle:function(b){_metExploreViz.generalStyle=b;metExploreD3.fireEvent("generalStyleForm","setGeneralStyle");metExploreD3.fireEvent("vizIdConvexHullMenu","setGeneralStyle");metExploreD3.fireEvent("buttonImportToNetworkFromWebsite","setGeneralStyle")},setMetaboliteStyle:function(b){_metExploreViz.metaboliteStyle=b;metExploreD3.fireEvent("metaboliteStyleForm","setMetaboliteStyle")},getMetaboliteStyle:function(){return _metExploreViz.metaboliteStyle},setLinkStyle:function(b){_metExploreViz.linkStyle=b},getLinkStyle:function(){return _metExploreViz.linkStyle},setConditionsSet:function(b){Ext.getStore("S_Condition")=b},getConditionsSet:function(){return Ext.getStore("S_Condition")},getConditionById:function(d,c){return d.getById(c)},getConditionsSetLength:function(b){return b.getCount()},getConditionsMapped:function(){return Ext.getCmp("selectConditionForm").lookupReference("selectCondition").lastValue},setMappingInfosSet:function(b){Ext.getStore("S_MappingInfo")=b},getMappingInfosSet:function(){return Ext.getStore("S_MappingInfo")},getMappingInfoById:function(d,c){return d.getById(c)},findMappingInfo:function(d,g,f){return d.findRecord(g,f)},newReactionMapStore:function(b){return Ext.create("Ext.data.Store",{fields:["id","ec","name","reversible"]})},addReactionMap:function(j,g,m,o,h){j.add({id:g,ec:m,name:o,reversible:h})},getReactionMapsSetLength:function(b){return b.getCount()},getMappingSelection:function(){var b=Ext.getCmp("selectMappingVisu");return b.getValue()},showMask:function(b){b.show()},hideMask:function(b){b.hide()},createLoadMask:function(d,f){if(f!="viz"){var g=f.substring(0,f.length-5)}else{var g=f}if(g!=undefined){return new Ext.LoadMask({target:Ext.getCmp(g),msg:d,msgCls:"msgClsCustomLoadMask"})}else{return undefined}},createDelayedTask:function(b){return new Ext.util.DelayedTask(b)},fixDelay:function(d,c){d.delay(c)},stopTask:function(b){b.cancel()},fireEvent2Arg:function(j,m,o,h){var g=Ext.getCmp(j);if(g!=undefined){g.fireEvent(m,o,h)}},fireEventArg:function(h,j,g){var f=Ext.getCmp(h);if(f!=undefined){f.fireEvent(j,g)}},fireEvent:function(g,d){var f=Ext.getCmp(g);if(f!=undefined){f.fireEvent(d)}},hideInitialMask:function(c){var d=Ext.getCmp("buttonImportToNetworkFromWebsite");if(d!=undefined){d.fireEvent("hideMask")}},hideInitialLoadButtons:function(c){var d=Ext.getCmp("buttonImportToNetworkFromWebsite");if(d!=undefined){d.fireEvent("hideInitialLoadButtons")}},cartFilled:function(c){var d=Ext.getCmp("buttonImportToNetworkFromWebsite");if(d!=undefined){d.fireEvent("cartFilled")}d=Ext.getCmp("viz_LoadMenu");if(d!=undefined){d.fireEvent("cartFilled")}_metExploreViz.setDataFromWebSite(c)},fireEventParentWebSite:function(d,f){var g=new Event(d,f);g.value=f;_metExploreViz.getParentWebSite().document.dispatchEvent(g)},displayMessage:function(d,c){Ext.Msg.alert(d,c)},displayWarning:function(d,c){Ext.Msg.show({title:d,msg:c,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})},displayMessageOK:function(f,g,d){Ext.Msg.show({title:f,msg:g,buttons:Ext.Msg.OKCANCEL,fn:d,icon:Ext.Msg.QUESTION})},displayMessageYesNo:function(f,g,d){Ext.Msg.confirm(f,g,d)},displayPrompt:function(f,g,d){Ext.MessageBox.prompt(f,g,d)},deferFunction:function(d,c){return new Ext.defer(d,c)},launchMetexploreFunction:function(b){if(_metExploreViz.getSessionById("viz")!=="undefined"){if(typeof _metExploreViz.getSessionById("viz").getForce()!=="undefined"){b();return}}setTimeout(function(){metExploreD3.launchMetexploreFunction(b)},1000)},onloadSession:function(b){metExploreD3.launchMetexploreFunction(b)},launchMetexploreMapping:function(c,d){if(_metExploreViz.getMappingByName(c)!=null){d();return}setTimeout(function(){metExploreD3.launchMetexploreMapping(c,d)},1000)},onloadMapping:function(c,d){metExploreD3.launchMetexploreMapping(c,d)},bioSourceControled:function(){return _metExploreViz.bioSourceControled()},setControlBioSource:function(b){_metExploreViz.setControlBioSource(b)}};var _metExploreViz;var metExploreViz=function(c,d){_metExploreViz=this;this.sessions={};this.launched=false;this.dataFromWebSite=null;this.panel=c;this.linkStyle=new LinkStyle(25,2,5,5,"red","green","black","0.7","black");this.reactionStyle=new ReactionStyle(15,30,3,3,"ec",9,"black",1);this.metaboliteStyle=new MetaboliteStyle(14,14,7,7,7,1,"name","#b2ae92");this.generalStyle=new GeneralStyle("Website","yellow","blue",500,false,false,false,false,false);this.initialData=undefined;this.biosource=undefined;this.comparedPanels=[];this.mappings=[];this.bioSourceControl=false;this.linkedByTypeOfMetabolite=false;this.parentWebSite=d;this.oldCoodinates=[];metExploreD3.fireEventArg("networkPanel","afterlunch",c);this.generalStyle.setWindowsAlertDisable(true)};metExploreViz.prototype={bioSourceControled:function(){return this.bioSourceControl},setControlBioSource:function(b){this.bioSourceControl=b},getBiosource:function(){return this.biosource},setBiosource:function(b){this.biosource=b},getDataFromWebSite:function(){return this.dataFromWebSite},setDataFromWebSite:function(b){this.dataFromWebSite=b},getParentWebSite:function(){return this.parentWebSite},cloneNetworkData:function(Y){var T=new NetworkData();var J,K,E,F,W,Q,N,Z,j,I,X,R,O,P;for(var H=0;H<Y.nodes.length;H++){J=Y.nodes[H];if(J.getName()!=undefined){K=J.getName().valueOf()}else{K=undefined}if(J.getCompartment()!=undefined){E=J.getCompartment().valueOf()}else{E=undefined}if(J.getDbIdentifier()!=undefined){F=J.getDbIdentifier().valueOf()}else{F=undefined}if(J.getEC()!=undefined){W=J.getEC().valueOf()}else{W=undefined}if(J.getId()!=undefined){Q=J.getId().valueOf()}else{Q=undefined}if(J.getReactionReversibility()!=undefined&&J.getBiologicalType()=="reaction"){N=J.getReactionReversibility().valueOf()}else{N=undefined}if(J.getIsSideCompound()!=undefined){Z=J.getIsSideCompound().valueOf()}else{Z=undefined}if(J.getBiologicalType()!=undefined){j=J.getBiologicalType().valueOf()}else{j=undefined}if(J.isSelected()!=undefined){I=J.isSelected().valueOf()}else{I=undefined}if(J.getLabelVisible()!=undefined){X=J.getLabelVisible().valueOf()}else{X=undefined}if(J.getSvg()!=undefined){R=J.getSvg().valueOf()}else{R=undefined}if(J.getSvgWidth()!=undefined){O=J.getSvgWidth().valueOf()}else{O=undefined}if(J.getSvgHeight()!=undefined){P=J.getSvgHeight().valueOf()}else{P=undefined}T.addNode(K,E,F,Q,N,j,I,X,R,O,P,Z,W)}for(var H=0;H<Y.links.length;H++){var Q=Y.links[H].getId().valueOf();var U=Y.links[H].getSource();var M=T.nodes[U];var G=Y.links[H].getTarget();var L=T.nodes[G];var V=Y.links[H].getInteraction().valueOf();var S=Y.links[H].isReversible().valueOf();T.links[H]=new LinkData(Q,M,L,V,S)}return T},cloneSession:function(){var B=this.getSessionById("viz");var H=new NetworkVizSession();H.reset();var D,G,w,z,v,F,y,K,J,E,C,A,I,L;B.getD3Data().getNodes().forEach(function(c){if(c.getName()!=undefined){G=c.getName().valueOf()}else{G=undefined}if(c.getCompartment()!=undefined){w=c.getCompartment().valueOf()}else{w=undefined}if(c.getDbIdentifier()!=undefined){z=c.getDbIdentifier().valueOf()}else{z=undefined}if(c.getEC()!=undefined){v=c.getEC().valueOf()}else{v=undefined}if(c.getId()!=undefined){F=c.getId().valueOf()}else{F=undefined}if(c.getReactionReversibility()!=undefined&&c.getBiologicalType()=="reaction"){y=c.getReactionReversibility().valueOf()}else{y=undefined}if(c.getIsSideCompound()!=undefined){K=c.getIsSideCompound().valueOf()}else{K=undefined}if(c.getBiologicalType()!=undefined){J=c.getBiologicalType().valueOf()}else{J=undefined}if(c.isSelected()!=undefined){E=c.isSelected().valueOf()}else{E=undefined}if(c.getLabelVisible()!=undefined){C=c.getLabelVisible().valueOf()}else{C=undefined}if(c.getSvg()!=undefined){A=c.getSvg().valueOf()}else{A=undefined}if(c.getSvgWidth()!=undefined){I=c.getSvgWidth().valueOf()}else{I=undefined}if(c.getSvgHeight()!=undefined){L=c.getSvgHeight().valueOf()}else{L=undefined}if(c.getIdentifier()!=undefined){identif=c.getIdentifier().valueOf()}else{identif=undefined}var b=false;if(c.isDuplicated()!=undefined){b=c.isDuplicated().valueOf()}else{b=false}var a=H.d3Data.addNode(G,w,z,F,y,J,E,C,A,I,L,K,v,b,identif)});B.getD3Data().getLinks().forEach(function(b){var d=b.getId().valueOf();var j=b.getSource();var h=H.d3Data.nodes[B.getD3Data().getNodes().indexOf(j)];var g=b.getTarget();var a=H.d3Data.nodes[B.getD3Data().getNodes().indexOf(g)];var c=b.getInteraction().valueOf();var f=b.isReversible().valueOf();H.d3Data.addLink(d,h,a,c,f)});return H},getGeneralStyle:function(){return this.generalStyle},getMetaboliteStyle:function(){return this.metaboliteStyle},addSession:function(b){this.sessions[b.getId()]=b},getSessionsSet:function(){return this.sessions},getSessionById:function(b){return this.sessions[b]},getSessionsLength:function(){return this.sessions.length},removeSession:function(b){if(this.sessions[b]!=undefined){delete this.sessions[b]}},getInitialData:function(){return this.initialData},setInitialData:function(b){this.initialData=b},isLaunched:function(){return this.launched},setLaunched:function(b){this.launched=b},addComparedPanel:function(b){this.comparedPanels.push(b)},removeComparedPanel:function(d){var g=false;var f=0;while(!g){if(this.comparedPanels[f].getPanel()==d.getPanel()){this.comparedPanels.splice(f,1);g=true}f++}},getComparedPanelsLength:function(){return this.comparedPanels.length},getComparedPanelById:function(c){var d=null;this.comparedPanels.forEach(function(a){if(a.getPanel()==c){d=a}});return d},getOldCoodinates:function(){return this.oldCoodinates},addOldCoodinates:function(b){this.oldCoodinates.push(b)},resetOldCoodinates:function(){this.oldCoodinates=[]},getMappingsSet:function(){return this.mappings},addMapping:function(b){if(b.getId()==undefined){b.setId("IdMappingMetExploreViz"+this.mappings.length)}if(this.getMappingById(b.getId())!=null){this.addMapping(b)}else{this.mappings.push(b)}},resetMappings:function(b){this.mappings=[];_metExploreViz.getSessionById("viz").getD3Data().resetMapping()},removeMapping:function(g){var d=false;var f=0;while(!d&&f<this.mappings.length){if(this.mappings[f].getId()==g){this.mappings.splice(f,1);d=true}f++}},getMappingsLength:function(){return this.mappings.length},getMappingById:function(c){var d=null;this.mappings.forEach(function(a){if(a.getId()==c){d=a}});return d},getMappingByName:function(c){var d=null;this.mappings.forEach(function(a){if(a.getName()==c){d=a}});return d},isLinkedByTypeOfMetabolite:function(){return this.linkedByTypeOfMetabolite},setLinkedByTypeOfMetabolite:function(b){this.linkedByTypeOfMetabolite=b}};var NetworkVizSession=function(){this.active=false;this.activeMapping="";this.animated=false;this.colorMappings=[];this.displayNodeName="";this.duplicatedNodes=[];this.d3Data=new NetworkData();this.force=undefined;this.forceCentroids=undefined;this.groups=[];this.id="";this.linked=false;this.mapped="none";this.mappingDataType="";this.metabolites=[];this.nodesMap=[];this.reactions=[];this.resizable=false;this.selectedNodes=[]};NetworkVizSession.prototype={getGroupByKey:function(d){var f=metExploreD3.getGeneralStyle().isDisplayedConvexhulls();var g=null;if(f=="Compartments"){this.groups.forEach(function(a){if(a.key.identifier==d){g=a}})}else{this.groups.forEach(function(a){if(a.key==d){g=a}})}return g},getActiveMapping:function(){return this.activeMapping},setActiveMapping:function(b){this.activeMapping=b},getColorMappingsSet:function(){return this.colorMappings},getColorMappingById:function(c){var d=null;this.colorMappings.forEach(function(a){if(a.getName()==c){d=a}});return d},getColorMappingsSetLength:function(){return this.colorMappings.length},resetColorMapping:function(){this.colorMappings=[]},addColorMapping:function(c,d){this.colorMappings.push(new ColorMapping(c,d))},addSelectedNode:function(b){if(this.selectedNodes==undefined){this.selectedNodes=[]}this.selectedNodes.push(b)},addDuplicatedNode:function(b){if(this.duplicatedNodes==undefined){this.duplicatedNodes=[]}this.duplicatedNodes.push(b)},isAnimated:function(){return this.animated},setAnimated:function(b){this.animated=b},isActive:function(){return this.active},setActivity:function(b){this.active=b},addSelectedNodes:function(b){if(this.selectedNodes==undefined){this.selectedNodes=[]}for(n in b){this.selectedNodes.push(nodeId)}},addDuplicatedNodes:function(b){if(this.duplicatedNodes==undefined){this.duplicatedNodes=[]}for(n in b){this.duplicatedNodes.push(nodeId)}},reset:function(){this.emptyMetabolites();this.emptyReactions();this.selectedNodes=[];this.groups=[];this.nodesMap=[]},getId:function(){return this.id},setId:function(b){this.id=b},getScale:function(){return this.scale},setScale:function(b){this.scale=b},getDisplayNodeName:function(){return this.displayNodeName},setDisplayNodeName:function(b){this.displayNodeName=b},getMetaboliteStyle:function(){return this.metaboliteStyle},setMetaboliteStyle:function(b){this.metaboliteStyle=b},getMappingDataType:function(){return this.mappingDataType},setMappingDataType:function(b){this.mappingDataType=b},isResizable:function(){return this.resizable},setResizable:function(b){this.resizable=b},isMapped:function(){return this.mapped},setMapped:function(b){this.mapped=b},isLinked:function(){return this.linked},setLinked:function(b){this.linked=b},getLinkStyle:function(){return this.linkStyle},setLinkStyle:function(b){this.linkStyle=b},getReactionStyle:function(){return this.reactionStyle},setReactionStyle:function(b){this.reactionStyle=b},getD3Data:function(){return this.d3Data},setD3Data:function(b){this.d3Data=b},getForce:function(){return this.force},setForce:function(b){this.force=b},getForceCentroids:function(){return this.forceCentroids},setForceCentroids:function(b){this.forceCentroids=b},getNodesMap:function(){if(this.nodesMap==undefined){this.nodesMap=new Object()}return this.nodesMap},removeSelectedNode:function(g){var d=false;var f=0;while(!d){if(this.selectedNodes[f]==g){this.selectedNodes.splice(f,1);d=true}f++}},removeAllSelectedNodes:function(){this.selectedNodes=[]},getSelectedNodes:function(){return this.selectedNodes},removeDuplicatedNode:function(g){var d=false;var f=0;while(!d){if(this.duplicatedNodes[f]==g){this.duplicatedNodes.splice(f,1);d=true}f++}},removeAllDuplicatedNodes:function(){while(this.duplicatedNodes.length>0){this.duplicatedNodes.pop()}},getDuplicatedNodes:function(){return this.duplicatedNodes},getDuplicatedNodesCount:function(){return this.duplicatedNodes.length},removeReaction:function(g){var d=false;var f=0;while(!d){if(this.getReactions()[f].id==g){this.getReactions().splice(f,1);d=true}f++}},removeMetabolite:function(d){var g=false;var f=0;while(!g){if(this.getMetabolites()[f].id==d){this.getMetabolites().splice(f,1);g=true}f++}},getReactions:function(){return this.reactions},getMetabolites:function(){return this.metabolites},emptyReactions:function(){this.reactions=[]},emptyMetabolites:function(){this.metabolites=[]},setVizEngine:function(b){this.vizEngine=b},getVizEngine:function(){return this.vizEngine}};var LinkData=function(j,g,m,h,o){this.id=j;this.source=g;this.target=m;this.interaction=h;this.reversible=o};LinkData.prototype={equals:function(b){if(this.id!=b.id){return false}return true},isReversible:function(){return this.reversible},getId:function(){return this.id},setInteraction:function(b){this.interaction=b},getInteraction:function(){return this.interaction},getSource:function(){return this.source},getTarget:function(){return this.target},setSource:function(b){this.source=b},setTarget:function(b){this.target=b}};var NodeData=function(z,G,N,M,H,E,B,A,J,Q,I,F,P,R,C,O,L,D,K){this.name=z;this.dbIdentifier=N;this.ec=M;this.id=H;this.identifier=O;this.reactionReversibility=E;this.isSideCompound=B;this.biologicalType=A;this.selected=J;this.duplicated=C;this.labelVisible=Q;this.svg=I;this.svgWidth=F;this.svgHeight=P;if(L==undefined){this.pathways=[]}else{this.pathways=L}this.compartment=G;if(R==undefined){R=[]}this.mappingDatas=R;if(D==undefined){D=false}this.locked=D;this.label=K};NodeData.prototype={equals:function(d){var c=true;if(this.id!=d.id){c=false}return c},toString:function(){return this.id},isSelected:function(){return this.selected},setIsSelected:function(b){this.selected=b},isLocked:function(){return this.locked},setLocked:function(b){this.locked=b},isDuplicated:function(){return this.duplicated},setIsDuplicated:function(b){this.duplicated=b},getIsSideCompound:function(){return this.isSideCompound},setIsSideCompound:function(b){this.isSideCompound=b},getId:function(){return this.id},getIdentifier:function(){return this.identifier},getDbIdentifier:function(){return this.dbIdentifier},getBiologicalType:function(){return this.biologicalType},getLabelVisible:function(){return this.labelVisible},getReactionReversibility:function(){return this.reactionReversibility},setReactionReversibility:function(b){this.reactionReversibility=b},getName:function(){return this.name},setName:function(b){this.name=b},getLabel:function(){return this.label},setLabel:function(b){this.label=b},getId:function(){return this.id},getSvg:function(){return this.svg},getSvgHeight:function(){return this.svgHeight},getSvgWidth:function(){return this.svgWidth},getCompartment:function(){return this.compartment},getEC:function(){return this.ec},resetMapping:function(){this.mappingDatas=[]},addMappingData:function(b){this.mappingDatas.push(b)},removeMappingData:function(d){var c=[];this.mappingDatas.forEach(function(a){if(a.getMappingName()==d){c.push(a)}});c.forEach(function(a){var b=c.indexOf(a);if(b!=-1){c.splice(b,1)}})},getMappingDatasLength:function(){return this.mappingDatas.length},getMappingDatas:function(){return this.mappingDatas},getMappingDataByNameAndCond:function(f,d){var g=null;this.mappingDatas.forEach(function(a){if(a.getMappingName()==f&&a.getConditionName()==d){g=a}});return g},setMappingDataByNameAndCond:function(g,f,h){var j=null;this.mappingDatas.forEach(function(a){if(a.getMappingName()==g&&a.getConditionName()==f){j=a}});j.setMapValue(h)},getPathways:function(){return this.pathways},setPathways:function(b){this.pathways=b},addPathway:function(b){if(this.pathways.indexOf(b)==-1){this.pathways.push(b)}}};var NetworkData=function(b){this.id=b;this.biosource=undefined;this.nodes=[];this.links=[];this.compartments=[];this.pathways=[]};NetworkData.prototype={resetMapping:function(){this.nodes.forEach(function(b){b.resetMapping()})},removeMapping:function(b){this.nodes.forEach(function(a){a.removeMappingData(b)})},initNodeIndex:function(){tabNodes=this.nodes;this.nodes.forEach(function(b){b.index=tabNodes.indexOf(b)})},getNodes:function(){return this.nodes},setId:function(b){this.id=b},getId:function(){return this.id},copyData:function(b){this.nodes=b.getNodes();this.links=b.getLinks()},getNodesLength:function(){return this.nodes.length},getLinks:function(){return this.links},getCompartments:function(){return this.compartments},getCompartmentsLength:function(){return this.compartments.length},getCompartmentByName:function(d){var g=[];g=this.compartments;var f;for(i=0;i<g.length;i++){if(g[i].getName()==(d)){f=g[i];return f}}return null},sortCompartments:function(){this.compartments.sort(function(a,b){if(a.name>b.name){return 1}if(a.name<b.name){return -1}return 0})},addCompartment:function(c){if(this.compartments==undefined){this.compartments=[]}var d=new Compartment(this.compartments.length,c);this.compartments.push(d)},getPathways:function(){return this.pathways},getPathwaysLength:function(){return this.pathways.length},getPathwayByName:function(d){var g=[];g=this.pathways;var f;for(i=0;i<g.length;i++){if(g[i]==(d)){f=g[i];return f}}return null},sortPathways:function(){this.pathways.sort(function(a,b){if(a>b){return 1}if(a<b){return -1}return 0})},addPathway:function(b){if(this.pathways==undefined){this.pathways=[]}this.pathways.push(b)},containsNode:function(g){var d=[];var f=false;d=this.nodes;for(i=0;i<d.length;i++){if(d[i].getId()==(g)){f=true;break}}return f},getNodeById:function(g){var f=[];f=this.nodes;var d=undefined;for(i=0;i<f.length;i++){if(f[i].getId()==(g)){d=f[i];break}}return d},getNodeByName:function(f){var d=[];d=this.nodes;var g=undefined;for(i=0;i<d.length;i++){if(d[i].getName()==(f)){g=d[i];break}}return g},getNodeByDbIdentifier:function(g){var f=[];f=this.nodes;var d=undefined;for(i=0;i<f.length;i++){if(f[i].getDbIdentifier()==(g)){d=f[i];break}}return d},getNodeByMappedInchi:function(g){var d=[];d=this.nodes;var f=d.filter(function(a){return a.mappedInchi==(g)});if(f.length==0){f=undefined}return f},getLinkById:function(g){var f=[];f=this.links;var d;for(i=0;i<f.length;i++){if(f[i].getId()==(g)){d=f[i];break}}return d},getNode:function(b){return this.nodes[b]},getLink:function(b){return this.links[b]},addLink:function(m,q,o,j,p){if(this.links==undefined){this.links=[]}var h=new LinkData(m,q,o,j,p);this.links.push(h)},getDataNodes:function(){var b=[];this.nodes.forEach(function(a){b.push(a)});return b},addNodeCopy:function(b){this.nodes.push(b)},addNode:function(z,M,O,J,G,A,I,R,K,H,Q,B,N,F,P,D,E,L){if(this.nodes==undefined){this.nodes=[]}var C=new NodeData(z,M,O,N,J,G,B,A,I,R,K,H,Q,undefined,F,P,D,E,L);this.nodes.push(C);return C},getAdjLink:function(r){var m=[];var o=0;for(var j=0;j<this.links.length;j++){var s=this.links[j];var q=s.source;var p=s.target;if(r.id==q.id){m.push(s)}else{if(r.id==p.id){m.push(s)}}}return m},removeLink:function(b){for(k=0;k<this.links.length;k++){if(b.id==this.links[k].id){this.links.splice(k,1)}}},removeNode:function(m){var h=this.getAdjLink(m);if(h.length!=0){for(var o=0;o<h.length;o++){var j=h[o];this.removeLink(j)}}for(var g=0;g<this.nodes.length;g++){if(m.id==this.nodes[g].id){this.nodes.splice(g,1)}}},cloneObject:function(c){var d=this;c.links.forEach(function(a){d.addLink(a.id,a.source,a.target,a.interaction,a.reversible)});c.nodes.forEach(function(a){if(a.biologicalType=="reaction"){d.addNode(a.name,undefined,a.dbIdentifier,a.id,a.reactionReversibility,"reaction",false,true,undefined,undefined,undefined,undefined,a.ec,false,undefined,a.pathways,a.locked,a.label)}else{d.addNode(a.name,a.compartment,a.dbIdentifier,a.id,undefined,"metabolite",false,true,a.svg,a.svgWidth,a.svgHeight,a.isSideCompound,undefined,a.duplicated,a.identifier,a.pathways,a.locked,a.label)}if(a.mappingDatas!=undefined){if(a.mappingDatas.length>0){a.mappingDatas.forEach(function(g){var b=new MappingData(g.node,g.mappingName,g.conditionName,g.mapValue);d.nodes[d.nodes.length-1].addMappingData(b)})}}d.nodes[d.nodes.length-1].x=a.x;d.nodes[d.nodes.length-1].y=a.y})}};var GeneralStyle=function(y,v,r,t,s,u,z,w,D,B,C,A){this.websiteName=y;this.colorMinMappingContinuous=v;this.colorMaxMappingContinuous=r;this.maxReactionThreshold=t;this.displayLabelsForOpt=s;this.displayLinksForOpt=u;this.displayConvexhulls=z;this.displayCaption=D;this.eventForNodeInfo=B;this.loadButtonHidden=false;this.windowsAlertDisable=false;this.clustered=w};GeneralStyle.prototype={loadButtonIsHidden:function(){return this.loadButtonHidden},setLoadButtonIsHidden:function(b){this.loadButtonHidden=b;metExploreD3.fireEvent("graphPanel","setLoadButtonHidden")},windowsAlertIsDisable:function(){return this.windowsAlertDisable},setWindowsAlertDisable:function(b){this.windowsAlertDisable=b},getColorMinMappingContinuous:function(){return this.colorMinMappingContinuous},getColorMaxMappingContinuous:function(){return this.colorMaxMappingContinuous},setMaxColorMappingContinuous:function(b){this.colorMaxMappingContinuous=b},setMinColorMappingContinuous:function(b){this.colorMinMappingContinuous=b},getWebsiteName:function(){return this.websiteName},getReactionThreshold:function(){return this.maxReactionThreshold},setReactionThreshold:function(b){this.maxReactionThreshold=b},hasEventForNodeInfo:function(){return this.eventForNodeInfo},setEventForNodeInfo:function(b){this.eventForNodeInfo=b},isDisplayedLabelsForOpt:function(){return this.displayLabelsForOpt},setDisplayLabelsForOpt:function(b){this.displayLabelsForOpt=b},isDisplayedLinksForOpt:function(){return this.displayLinksForOpt},setDisplayLinksForOpt:function(b){this.displayLinksForOpt=b},isDisplayedConvexhulls:function(){return this.displayConvexhulls},setDisplayConvexhulls:function(b){this.displayConvexhulls=b},isDisplayedCaption:function(){return this.displayCaption},setDisplayCaption:function(b){this.displayCaption=b},useClusters:function(){return this.clustered},setUseClusters:function(b){this.clustered=b}};var LinkStyle=function(o,u,w,r,s,v,q,t,p){this.size=o;this.lineWidth=u;this.markerWidth=w;this.markerHeight=r;this.markerInColor=s;this.markerOutColor=v;this.markerStrokeColor=q;this.markerStrokeWidth=t;this.strokeColor=p};LinkStyle.prototype={getMarkerInColor:function(){return this.markerInColor},getLineWidth:function(){return this.lineWidth},getMarkerOutColor:function(){return this.markerOutColor},getSize:function(){return this.size},getMarkerWidth:function(){return this.markerWidth},getMarkerStrokeWidth:function(){return this.markerStrokeWidth},getMarkerHeight:function(){return this.markerHeight},getMarkerStrokeColor:function(){return this.markerStrokeColor},getStrokeColor:function(){return this.strokeColor},setMarkerInColor:function(b){this.markerInColor=b},setLineWidth:function(b){this.lineWidth=b},setMarkerOutColor:function(b){this.markerOutColor=b},setSize:function(b){this.size=b},setMarkerWidth:function(b){this.markerWidth=b},setMarkerStrokeWidth:function(b){this.markerStrokeWidth=b},setMarkerHeight:function(b){this.markerHeight=b},setMarkerStrokeColor:function(b){this.markerStrokeColor=b},setStrokeColor:function(b){this.strokeColor=b}};var MetaboliteStyle=function(o,u,q,r,s,p,m,t){this.height=o;this.width=u;this.rx=q;this.ry=r;this.strokeWidth=p;this.fontSize=s;this.label=m;this.strokeColor=t};MetaboliteStyle.prototype={getHeight:function(){return this.height},setHeight:function(b){this.height=b},getWidth:function(){return this.width},setWidth:function(b){this.width=b},getRX:function(){return this.rx},setRX:function(b){this.rx=b},getRY:function(){return this.ry},setRY:function(b){this.ry=b},getStrokeColor:function(){return this.strokeColor},setStrokeColor:function(b){this.strokeColor=b},getStrokeWidth:function(){return this.strokeWidth},setStrokeWidth:function(b){this.strokeWidth=b},getFontSize:function(){return this.fontSize},setFontSize:function(b){this.fontSize=b},getLabel:function(){return this.label},setLabel:function(b){this.label=b},getDisplayLabel:function(d,f){var g;if(d.getLabel()!=undefined){g=d.getLabel()}else{switch(f){case"name":g=d.getName();break;case"dbIdentifier":g=d.getDbIdentifier();break;default:g=d.getName()}if(g==undefined){g=d.getName()}}return g}};var ReactionStyle=function(o,u,q,r,m,s,t,p){this.height=o;this.width=u;this.rx=q;this.ry=r;this.label=m;this.strokeColor=t;this.fontSize=s;this.strokeWidth=p};ReactionStyle.prototype={getHeight:function(){return this.height},setHeight:function(b){this.height=b},getStrokeWidth:function(){return this.strokeWidth},setStrokeWidth:function(b){this.strokeWidth=b},getWidth:function(){return this.width},setWidth:function(b){this.width=b},getRX:function(){return this.rx},setRX:function(b){this.rx=b},getRY:function(){return this.ry},setRY:function(b){this.ry=b},getStrokeColor:function(){return this.strokeColor},setStrokeColor:function(b){this.strokeColor=b},getFontSize:function(){return this.fontSize},setFontSize:function(b){this.fontSize=b},getLabel:function(){return this.label},setLabel:function(b){this.label=b},getDisplayLabel:function(d,f){var g;if(d.getLabel()!=undefined){g=d.getLabel()}else{switch(f){case"ec":g=d.getEC();break;case"name":g=d.getName();break;case"dbIdentifier":g=d.getDbIdentifier();break;default:g=d.getName()}if(g==undefined){g=d.getName()}}return g}};var Compartment=function(c,d){this.id=c;this.identifier=d;this.name=d;this.color=""};Compartment.prototype={getIdentifier:function(){return this.identifier},getName:function(){return this.name},getColor:function(){return this.color},setColor:function(b){return this.color=b}};var Mapping=function(j,f,g,h){this.name=j;this.conditions=f;this.targetLabel=g;this.data=[];this.id=h};Mapping.prototype={getId:function(){return this.id},setId:function(b){this.id=b},getName:function(){return this.name},setName:function(b){this.name=b},getConditions:function(){return this.conditions},getTargetLabel:function(){return this.targetLabel},getConditionByName:function(d){var c=null;this.comparedPanels.forEach(function(a){if(a.name==d){c=a}});return c},addMap:function(b){this.data.push(b)},getData:function(){return this.data}};var MappingData=function(j,f,g,h){this.node=j;this.mappingName=f;this.conditionName=g;this.mapValue=h};MappingData.prototype={getNode:function(){return this.node},setNode:function(b){this.node=b},getMappingName:function(){return this.mappingName},getConditionName:function(){return this.conditionName},getMapValue:function(){return this.mapValue},setMapValue:function(b){this.mapValue=b}};var Scale=function(b){this.graphName=b};Scale.prototype={setScale:function(m,o,j,p,s,q,r){this.xScale=m;this.yScale=o;this.zoomScale=j;this.xScaleCompare=p;this.yScaleCompare=s;this.zoomScaleCompare=q;this.zoom=r},getGraphName:function(){return this.graphName},setGraphName:function(b){this.graphName=b},getXScale:function(){return this.xScale},setXScale:function(b){this.xScale=b},getYScale:function(){return this.yScale},setYScale:function(b){this.yScale=b},getZoomScale:function(){return this.zoomScale},setZoomScale:function(b){this.zoomScale=b},getXScaleCompare:function(){return this.xScaleCompare},setXScaleCompare:function(b){this.xScaleCompare=b},getYScaleCompare:function(){return this.yScaleCompare},setYScaleCompare:function(b){this.yScaleCompare=b},getZoomScaleCompare:function(){return this.zoomScaleCompare},setZoomScaleCompare:function(b){this.zoomScaleCompare=b},getZoom:function(){return this.zoom},setZoom:function(b){this.zoom=b}};var ColorMapping=function(d,c){this.name=d;this.value=c};ColorMapping.prototype={getName:function(){return this.name},setName:function(b){this.name=b},getValue:function(){return this.value},setValue:function(b){this.value=b}};var ComparedPanel=function(g,h,f,j){this.panel=g;this.visible=h;this.parent=f;this.title=j};ComparedPanel.prototype={getPanel:function(){return this.panel},setPanel:function(b){this.panel=b},isVisible:function(){return this.visible},setVisible:function(b){this.visible=b},getParent:function(){return this.parent},setParent:function(b){this.parent=b},getTitle:function(){return this.title},setTitle:function(b){this.title=b}};d3.selection.enter.prototype=d3.selection.prototype.addNodeForm=function(q,j,m,p,o,h){this.append("rect").attr("class",function(a){return a.getBiologicalType()}).attr("id",function(a){return a.getId()}).attr("identifier",function(a){return a.getId()}).attr("width",q).attr("height",j).attr("rx",m).attr("ry",p).attr("transform","translate(-"+q/2+",-"+j/2+")").style("stroke",o).style("stroke-width",h);this.append("rect").attr("class","fontSelected").attr("width",q).attr("height",j).attr("rx",m).attr("ry",p).attr("transform","translate(-"+q/2+",-"+j/2+")").style("fill-opacity","0").style("fill","#000")};d3.selection.prototype.setNodeForm=function(q,j,m,p,o,h){this.style("opacity",1).select("rect").attr("width",q).attr("height",j).attr("rx",m).attr("ry",p).attr("transform","translate(-"+q/2+",-"+j/2+")").style("stroke",o).style("stroke-width",h);this.select(".fontSelected").attr("width",q).attr("height",j).attr("rx",m).attr("ry",p).attr("transform","translate(-"+q/2+",-"+j/2+")").style("stroke-width",h)};metExploreD3.GraphLink={link:"",panelParent:"",delayedInitialisation:function(b){metExploreD3.GraphLink.panelParent=b},funcPathForFlux:function(O,L,R){var H,B,J,T;var N=_metExploreViz.getSessionById("viz").getActiveMapping();var P=_metExploreViz.getSessionById(L).isMapped();var A,C;var K=undefined;var F=undefined;d3.select("#"+L).select("#D3viz").select("#graphComponent").selectAll(".linklabel").attr("x",function(a){return(a.source.x+a.target.x)/2}).attr("y",function(a){return(a.source.y+a.target.y)/2});var M=_metExploreViz.getSessionById("viz").getColorMappingsSet();M.forEach(function(a){if(F==undefined|a.getName()>F){F=a.getName()}});var D=d3.scale.linear().domain([-F,0,0,F]).range([-7,-1,1,7]);function E(d,o){var j=metExploreD3.getMetaboliteStyle();var b=metExploreD3.getReactionStyle();A=T.getMappingDataByNameAndCond(N,P[0]);C=T.getMappingDataByNameAndCond(N,P[1]);var m=Math.sqrt(Math.pow(o.x-d.x,2)+Math.pow(o.y-d.y,2));var a=(o.x-d.x);var c=(o.y-d.y);var g=a/Math.abs(a);var h=c/Math.abs(c);if(R=="linkRev"){if(C==null){var f=0}else{if(isNaN(C.getMapValue())){var f=0}else{var f=D(C.getMapValue())}}if(f==-1||f==1){f=0}if(f<0){J=Q(o,d,f)}else{J=G(d,o,f)}}else{if(A==null){var f=0}else{if(isNaN(A.getMapValue())){var f=0}else{var f=D(A.getMapValue())}}if(f==-1||f==1){f=0}if(f<0){J=G(o,d,f)}else{J=Q(d,o,f)}}return J}function G(m,am,j){var ao=metExploreD3.getMetaboliteStyle();var aq=metExploreD3.getReactionStyle();var ar=Math.sqrt(Math.pow(am.x-m.x,2)+Math.pow(am.y-m.y,2));var z=(am.x-m.x);var ag=(am.y-m.y);var o=z/Math.abs(z);var p=ag/Math.abs(ag);if(m.getBiologicalType()=="metabolite"){var b=(Math.abs(ar)*aq.getWidth()/2)/Math.abs(z);var ai=(Math.abs(ar)*aq.getHeight()/2)/Math.abs(ag);var u=(b<ai)?rT=b:rt=ai}else{var b=(Math.abs(ar)*ao.getWidth()/2)/Math.abs(z);var ai=(Math.abs(ar)*ao.getHeight()/2)/Math.abs(ag);var u=(b<ai)?rT=b:rt=ai}var h=m.x+z*((ar-u)/ar);var ak=m.y+ag*((ar-u)/ar);var y=2*Math.abs(j);if(y<3){y=3}var aj=m.x+z*((ar-u-y)/ar);var s=m.y+ag*((ar-u-y)/ar);var w=2.5*Math.abs(j);var a=(2.5*Math.abs(j))*1/2;if(w<2){w=2}var q=aj+ag*(-w/ar);var f=s-z*(-w/ar);var ah=aj+ag*(-a/ar);var t=s-z*(-a/ar);var ap=Math.abs(j);var r=m.x+z*(ap/ar);var al=m.y+ag*(ap/ar);var c=r+ag*(-a/ar);var g=al-z*(-a/ar);var an=Math.sqrt(Math.pow(h-m.x,2)+Math.pow(ak-m.y,2));if(y+ap>an){c=ah;g=t}var v=m.x;var d=m.y;if(R=="linkRev"){return"M"+(v+ag*(-2/ar))+","+(d-z*(-2/ar))+"L"+(h+ag*(-2/ar))+","+(ak-z*(-2/ar))+"L"+(q+ag*(-2/ar))+","+(f-z*(-2/ar))+"L"+(ah+ag*(-2/ar))+","+(t-z*(-2/ar))+"L"+(c+ag*(-2/ar))+","+(g-z*(-2/ar))+"L"+(v+ag*(-2/ar))+","+(d-z*(-2/ar))+"Z"}else{return"M"+v+","+d+"L"+h+","+ak+"L"+q+","+f+"L"+ah+","+t+"L"+c+","+g+"L"+m.x+","+m.y+"Z"}}function Q(m,am,j){var ao=metExploreD3.getMetaboliteStyle();var aq=metExploreD3.getReactionStyle();var ar=Math.sqrt(Math.pow(am.x-m.x,2)+Math.pow(am.y-m.y,2));var z=(am.x-m.x);var ag=(am.y-m.y);var o=z/Math.abs(z);var p=ag/Math.abs(ag);if(m.getBiologicalType()=="metabolite"){var b=(Math.abs(ar)*aq.getWidth()/2)/Math.abs(z);var ai=(Math.abs(ar)*aq.getHeight()/2)/Math.abs(ag);var u=(b<ai)?rT=b:rt=ai}else{var b=(Math.abs(ar)*ao.getWidth()/2)/Math.abs(z);var ai=(Math.abs(ar)*ao.getHeight()/2)/Math.abs(ag);var u=(b<ai)?rT=b:rt=ai}var h=m.x+z*((ar-u)/ar);var ak=m.y+ag*((ar-u)/ar);var y=2*Math.abs(j);if(y<3){y=3}var aj=m.x+z*((ar-u-y)/ar);var s=m.y+ag*((ar-u-y)/ar);var w=2.5*Math.abs(j);var a=(2.5*Math.abs(j))*1/2;if(w<2){w=2}var q=aj+ag*(w/ar);var f=s-z*(w/ar);var ah=aj+ag*(a/ar);var t=s-z*(a/ar);var ap=Math.abs(j);var r=m.x+z*(ap/ar);var al=m.y+ag*(ap/ar);var c=r+ag*(a/ar);var g=al-z*(a/ar);var an=Math.sqrt(Math.pow(h-m.x,2)+Math.pow(ak-m.y,2));if(y+ap>an){c=ah;g=t}var v=m.x;var d=m.y;if(R=="linkRev"){return"M"+(v+ag*(2/ar))+","+(d-z*(2/ar))+"L"+(h+ag*(2/ar))+","+(ak-z*(2/ar))+"L"+(q+ag*(2/ar))+","+(f-z*(2/ar))+"L"+(ah+ag*(2/ar))+","+(t-z*(2/ar))+"L"+(c+ag*(2/ar))+","+(g-z*(2/ar))+"L"+(v+ag*(2/ar))+","+(d-z*(2/ar))+"Z"}else{return"M"+v+","+d+"L"+h+","+ak+"L"+q+","+f+"L"+ah+","+t+"L"+c+","+g+"L"+m.x+","+m.y+"Z"}}if(O.getSource().x==undefined){var S=_metExploreViz.getSessionById(L).getD3Data();var I=S.getNodes();H=I[O.getSource()];B=I[O.getTarget()];if(H.getBiologicalType()=="reaction"){T=H}else{T=B}if(H.x!=undefined&&H.y!=undefined&&B.x!=undefined&&B.y!=undefined){J=E(H,B)}else{J="M0,0L0,0Z"}}else{H=O.getSource();B=O.getTarget();if(H.getBiologicalType()=="reaction"){T=H}else{T=B}if(H.x!=undefined&&H.y!=undefined&&B.x!=undefined&&B.y!=undefined){J=E(H,B)}else{J="M0,0L0,0Z"}}return J},funcPathForFlux3:function(t,y,s,r){var z,u,p;function q(W,a){var b=metExploreD3.getMetaboliteStyle();var d=metExploreD3.getReactionStyle();var f=Math.sqrt(Math.pow(a.x-W.x,2)+Math.pow(a.y-W.y,2));var V=(a.x-W.x);var X=(a.y-W.y);var Z=V/Math.abs(V);var ab=X/Math.abs(X);if(W.getBiologicalType()=="metabolite"){var j=(Math.abs(f)*d.getWidth()/2)/Math.abs(V);var aa=(Math.abs(f)*d.getHeight()/2)/Math.abs(X);var o=(j<aa)?rT=j:rt=aa}else{var j=(Math.abs(f)*b.getWidth()/2)/Math.abs(V);var aa=(Math.abs(f)*b.getHeight()/2)/Math.abs(X);var o=(j<aa)?rT=j:rt=aa}var U=W.x+V*((f-o)/f);var af=W.y+X*((f-o)/f);var T=5*Math.abs(r);var ad=W.x+V*((f-o-T)/f);var ah=W.y+X*((f-o-T)/f);widthArrow=2*Math.abs(r);var ac=ad+X*(widthArrow/f);var R=ah-V*(widthArrow/f);var Y=ad+X*((2*widthArrow/3)/f);var h=ah-V*((2*widthArrow/3)/f);var c=1.5*Math.abs(r);var ae=W.x+V*(c/f);var ag=W.y+X*(c/f);var g=2*Math.abs(r);var m=ae+X*((2*g/3)/f);var S=ag-V*((2*g/3)/f);return"M"+W.x+","+W.y+"L"+U+","+af+"L"+ac+","+R+"L"+Y+","+h+"L"+m+","+S+"L"+W.x+","+W.y+"Z"}if(t.getSource().x==undefined){var v=_metExploreViz.getSessionById(y).getD3Data();var w=v.getNodes();z=w[t.getSource()];u=w[t.getTarget()];if(z.x!=undefined&&z.y!=undefined&&u.x!=undefined&&u.y!=undefined){if(r<0){p=q(u,z)}else{p=q(z,u)}}else{p="M0,0L0,0Z"}}else{z=t.getSource();u=t.getTarget();if(z.x!=undefined&&z.y!=undefined&&u.x!=undefined&&u.y!=undefined){if(r<0){p=q(u,z)}else{p=q(z,u)}}else{p="M0,0L0,0Z"}}return p},funcPath1:function(t,m){var r,p,q;function o(ac,a){var b=metExploreD3.getMetaboliteStyle();var d=metExploreD3.getReactionStyle();var j=Math.sqrt(Math.pow(a.x-ac.x,2)+Math.pow(a.y-ac.y,2));var ab=(a.x-ac.x);var ad=(a.y-ac.y);var f=ab/Math.abs(ab);var h=ad/Math.abs(ad);if(ac.getBiologicalType()=="metabolite"){var O=(Math.abs(j)*b.getWidth()/2)/Math.abs(ab);var ae=(Math.abs(j)*b.getHeight()/2)/Math.abs(ad);var P=(O<ae)?rT=O:rt=ae;var O=(Math.abs(j)*d.getWidth()/2)/Math.abs(ab);var ae=(Math.abs(j)*d.getHeight()/2)/Math.abs(ad);var R=(O<ae)?rT=O:rt=ae}else{var O=(Math.abs(j)*d.getWidth()/2)/Math.abs(ab);var ae=(Math.abs(j)*d.getHeight()/2)/Math.abs(ad);var P=(O<ae)?rT=O:rt=ae;var O=(Math.abs(j)*b.getWidth()/2)/Math.abs(ab);var ae=(Math.abs(j)*b.getHeight()/2)/Math.abs(ad);var R=(O<ae)?rT=O:rt=ae}var X=ac.x+ab*(1-(j-P)/j);var Q=ac.y+ad*(1-(j-P)/j);var aa=ac.x+ab*((j-R)/j);var af=ac.y+ad*((j-R)/j);var Z=5;var W=ac.x+ab*((j-R-Z)/j);var V=ac.y+ad*((j-R-Z)/j);var Y=W+ad*(3/j);var g=V-ab*(3/j);var T=ac.x+ab*(1-(j-P-Z)/j);var S=ac.y+ad*(1-(j-P-Z)/j);var U=T-ad*(3/j);var c=S+ab*(3/j);return"M"+X+","+Q+"L"+aa+","+af+"L"+Y+","+g+"L"+W+","+V+"L"+X+","+Q+"L"+U+","+c+"L"+T+","+S+"Z"}function q(a,f){var g=metExploreD3.getMetaboliteStyle();var j=metExploreD3.getReactionStyle();var J=Math.sqrt(Math.pow(f.x-a.x,2)+Math.pow(f.y-a.y,2));var L=(f.x-a.x);var N=(f.y-a.y);var b=L/Math.abs(L);var c=N/Math.abs(N);if(a.getBiologicalType()=="metabolite"){var K=(Math.abs(J)*j.getWidth()/2)/Math.abs(L);var P=(Math.abs(J)*j.getHeight()/2)/Math.abs(N);var H=(K<P)?rT=K:rt=P}else{var K=(Math.abs(J)*g.getWidth()/2)/Math.abs(L);var P=(Math.abs(J)*g.getHeight()/2)/Math.abs(N);var H=(K<P)?rT=K:rt=P}var O=a.x+L*((J-H)/J);var R=a.y+N*((J-H)/J);var I=5;var Q=a.x+L*((J-H-I)/J);var h=a.y+N*((J-H-I)/J);var d=Q+N*(3/J);var M=h-L*(3/J);return"M"+a.x+","+a.y+"L"+O+","+R+"L"+d+","+M+"L"+Q+","+h+"Z"}if(t.getSource().x==undefined){var s=_metExploreViz.getSessionById(m).getD3Data();var u=s.getNodes();r=u[t.getSource()];p=u[t.getTarget()];if(r.x!=undefined&&r.y!=undefined&&p.x!=undefined&&p.y!=undefined){if(r.getReactionReversibility()||p.getReactionReversibility()){q=o(r,p)}else{q=q(r,p)}}else{q="M0,0L0,0Z"}}else{r=t.getSource();p=t.getTarget();if(r.x!=undefined&&r.y!=undefined&&p.x!=undefined&&p.y!=undefined){if(r.getReactionReversibility()||p.getReactionReversibility()){q=o(r,p)}else{q=q(r,p)}}else{q="M0,0L0,0Z"}}return q},funcPath2:function(t,m){var r,p,q;function o(ad,a){var b=metExploreD3.getMetaboliteStyle();var c=metExploreD3.getReactionStyle();var d=Math.sqrt(Math.pow(a.x-ad.x,2)+Math.pow(a.y-ad.y,2));var ac=(a.x-ad.x);var af=(a.y-ad.y);var ae=ac/Math.abs(ac);var ag=af/Math.abs(af);if(ad.getBiologicalType()=="metabolite"){var j=(Math.abs(d)*c.getWidth()/2)/Math.abs(ac);var ah=(Math.abs(d)*c.getHeight()/2)/Math.abs(af);var S=(j<ah)?rT=j:rt=ah}else{var j=(Math.abs(d)*b.getWidth()/2)/Math.abs(ac);var ah=(Math.abs(d)*b.getHeight()/2)/Math.abs(af);var S=(j<ah)?rT=j:rt=ah}var Z=ad.x+ac*(1-(d-largeurNoeudS)/d);var R=ad.y+af*(1-(d-largeurNoeudS)/d);var Y=ad.x+ac*((d-S)/d);var aj=ad.y+af*((d-S)/d);var ab=5;var V=ad.x+ac*((d-S-ab)/d);var X=ad.y+af*((d-S-ab)/d);var f=V+af*(3/d);var ak=X-ac*(3/d);var g=V-af*(3/d);var al=X+ac*(3/d);var T=ad.x+ac*(1-(d-largeurNoeudS-ab)/d);var U=ad.y+af*(1-(d-largeurNoeudS-ab)/d);var ai=T-af*(3/d);var W=U+ac*(3/d);var h=T+af*(3/d);var aa=U-ac*(3/d);return"M"+Z+","+R+"L"+ai+","+W+"L"+T+","+U+"L"+V+","+X+"L"+f+","+ak+"L"+Y+","+aj+"L"+g+","+al+"L"+V+","+X+"L"+T+","+U+"L"+h+","+aa+"L"+Z+","+R+"Z"}function q(a,c){var f=metExploreD3.getMetaboliteStyle();var h=metExploreD3.getReactionStyle();var L=Math.sqrt(Math.pow(c.x-a.x,2)+Math.pow(c.y-a.y,2));var N=(c.x-a.x);var P=(c.y-a.y);var b=N/Math.abs(N);var d=P/Math.abs(P);if(a.getBiologicalType()=="metabolite"){var j=(h.getWidth()+h.getHeight())/2/2;var g=(f.getHeight()+f.getWidth())/2/2}else{var j=(f.getHeight()+f.getWidth())/2/2;var g=(h.getWidth()+h.getHeight())/2/2}var Q=a.x+N*((L-j)/L);var R=a.y+P*((L-j)/L);var K=5;var O=a.x+N*((L-j-K)/L);var J=a.y+P*((L-j-K)/L);var I=O+P*(3/L);var S=J-N*(3/L);var M=O-P*(3/L);var T=J+N*(3/L);return"M"+a.x+","+a.y+"L"+O+","+J+"L"+I+","+S+"L"+Q+","+R+"L"+M+","+T+"L"+O+","+J+"Z"}if(t.getSource().x==undefined){var s=_metExploreViz.getSessionById(m).getD3Data();var u=s.getNodes();r=u[t.getSource()];p=u[t.getTarget()];if(r.x!=undefined&&r.y!=undefined&&p.x!=undefined&&p.y!=undefined){if(r.getReactionReversibility()||p.getReactionReversibility()){q=o(r,p)}else{q=q(r,p)}}else{q="M0,0L0,0Z"}}else{r=t.getSource();p=t.getTarget();if(r.x!=undefined&&r.y!=undefined&&p.x!=undefined&&p.y!=undefined){if(r.getReactionReversibility()||p.getReactionReversibility()){q=o(r,p)}else{q=q(r,p)}}else{q="M0,0L0,0Z"}}return q},funcPath3:function(t,m){var r,p,q;function o(U,a){var c=metExploreD3.getMetaboliteStyle();var f=metExploreD3.getReactionStyle();var g=Math.sqrt(Math.pow(a.x-U.x,2)+Math.pow(a.y-U.y,2));var Q=(a.x-U.x);var T=(a.y-U.y);var W=Q/Math.abs(Q);var b=T/Math.abs(T);if(U.getBiologicalType()=="metabolite"){var P=(Math.abs(g)*f.getWidth()/2)/Math.abs(Q);var V=(Math.abs(g)*f.getHeight()/2)/Math.abs(T);var d=(P<V)?rT=P:rt=V}else{var P=(Math.abs(g)*c.getWidth()/2)/Math.abs(Q);var V=(Math.abs(g)*c.getHeight()/2)/Math.abs(T);var d=(P<V)?rT=P:rt=V}var N=5;var S=U.x+Q*((g-d)/g);var X=U.y+T*((g-d)/g);var N=5;var R=U.x+Q*((g-d-N)/g);var h=U.y+T*((g-d-N)/g);var O=U.x+Q*((g-d-N-N)/g);var L=U.y+T*((g-d-N-N)/g);var j=R+T*(3/g);var Y=h-Q*(3/g);var M=R-T*(3/g);var Z=h+Q*(3/g);return"M"+U.x+","+U.y+"L"+O+","+L+"L"+j+","+Y+"L"+M+","+Z+"L"+S+","+X+"L"+j+","+Y+"L"+M+","+Z+"L"+O+","+L+"Z"}function q(a,c){var d=metExploreD3.getMetaboliteStyle();var g=metExploreD3.getReactionStyle();var j=Math.sqrt(Math.pow(c.x-a.x,2)+Math.pow(c.y-a.y,2));var N=(c.x-a.x);var P=(c.y-a.y);var b=N/Math.abs(N);var f=P/Math.abs(P);if(a.getBiologicalType()=="metabolite"){var O=(Math.abs(j)*g.getWidth()/2)/Math.abs(N);var R=(Math.abs(j)*g.getHeight()/2)/Math.abs(P);var h=(O<R)?rT=O:rt=R}else{var O=(Math.abs(j)*d.getWidth()/2)/Math.abs(N);var R=(Math.abs(j)*d.getHeight()/2)/Math.abs(P);var h=(O<R)?rT=O:rt=R}var S=a.x+N*((j-h)/j);var T=a.y+P*((j-h)/j);var L=5;var Q=a.x+N*((j-h-L)/j);var J=a.y+P*((j-h-L)/j);var K=Q+P*(3/j);var U=J-N*(3/j);var M=Q-P*(3/j);var V=J+N*(3/j);return"M"+a.x+","+a.y+"L"+Q+","+J+"L"+K+","+U+"L"+S+","+T+"L"+M+","+V+"L"+Q+","+J+"Z"}if(t.getSource().x==undefined){var s=_metExploreViz.getSessionById(m).getD3Data();var u=s.getNodes();r=u[t.getSource()];p=u[t.getTarget()];if(r!=undefined&&p!=undefined){if(r.x!=undefined&&r.y!=undefined&&p.x!=undefined&&p.y!=undefined){if(r.getReactionReversibility()||p.getReactionReversibility()){q=o(r,p)}else{q=q(r,p)}}else{q="M0,0L0,0Z"}}else{q="M0,0L0,0Z"}}else{r=t.getSource();p=t.getTarget();if(r!=undefined&&p!=undefined){if(r.x!=undefined&&r.y!=undefined&&p.x!=undefined&&p.y!=undefined){if(r.getReactionReversibility()||p.getReactionReversibility()){q=o(r,p)}else{q=q(r,p)}}else{q="M0,0L0,0Z"}}else{q="M0,0L0,0Z"}}return q},funcPath4:function(t,m){var r,p,q;function o(aa,a){var b=metExploreD3.getMetaboliteStyle();var c=metExploreD3.getReactionStyle();var d=Math.sqrt(Math.pow(a.x-aa.x,2)+Math.pow(a.y-aa.y,2));var af=(a.x-aa.x);var ah=(a.y-aa.y);var ad=af/Math.abs(af);var ae=ah/Math.abs(ah);if(aa.getBiologicalType()=="metabolite"){var j=(b.getHeight()+b.getWidth())/2/2;var Z=aa.x+af*(1-(d-j)/d);var R=aa.y+ah*(1-(d-j)/d);var ac=5;var h=aa.x+af*(1-(d-j-ac)/d);var S=aa.y+ah*(1-(d-j-ac)/d);var ab=aa.x+af*(1-(d-j-ac-ac)/d);var V=aa.y+ah*(1-(d-j-ac-ac)/d);var ag=h-ah*(3/d);var U=S+af*(3/d);var aj=h+ah*(3/d);var X=S-af*(3/d);q="M"+ab+","+V+"L"+ag+","+U+"L"+aj+","+X+"L"+Z+","+R+"L"+ag+","+U+"L"+aj+","+X+"L"+ab+","+V+"L"+a.x+","+a.y+"Z"}else{var j=(b.getWidth()+b.getHeight())/2/2;var Z=aa.x+af*(1-(d-j)/d);var R=aa.y+ah*(1-(d-j)/d);var ac=5;var Y=aa.x+af*((d-j)/d);var ai=aa.y+ah*((d-j)/d);var ac=5;var T=aa.x+af*((d-j-ac)/d);var W=aa.y+ah*((d-j-ac)/d);var f=T+ah*(3/d);var ak=W-af*(3/d);var g=T-ah*(3/d);var al=W+af*(3/d);var ab=aa.x+af*((d-j-ac-ac)/d);var V=aa.y+ah*((d-j-ac-ac)/d);q="M"+aa.x+","+aa.y+"L"+ab+","+V+"L"+f+","+ak+"L"+g+","+al+"L"+Y+","+ai+"L"+f+","+ak+"L"+g+","+al+"L"+ab+","+V+"Z"}return q}function q(aa,a){var b=metExploreD3.getMetaboliteStyle();var c=metExploreD3.getReactionStyle();var d=Math.sqrt(Math.pow(a.x-aa.x,2)+Math.pow(a.y-aa.y,2));var ab=(a.x-aa.x);var ad=(a.y-aa.y);var ac=ab/Math.abs(ab);var af=ad/Math.abs(ad);if(aa.getBiologicalType()=="metabolite"){var R=(b.getHeight()+b.getWidth())/2/2;var V=aa.x+ab*(1-(d-R)/d);var Q=aa.y+ad*(1-(d-R)/d);var Z=5;var X=aa.x+ab*(1-(d-R-Z)/d);var j=aa.y+ad*(1-(d-R-Z)/d);var g=V-ad*(3/d);var U=Q+ab*(3/d);var h=V+ad*(3/d);var W=Q-ab*(3/d);return"M"+a.x+","+a.y+"L"+X+","+j+"L"+g+","+U+"L"+V+","+Q+"L"+h+","+W+"L"+X+","+j+"Z"}else{var R=(b.getWidth()+b.getHeight())/2/2;var Y=aa.x+ab*((d-R)/d);var ae=aa.y+ad*((d-R)/d);var Z=5;var T=aa.x+ab*((d-R-Z)/d);var S=aa.y+ad*((d-R-Z)/d);var f=T+ad*(3/d);var ag=S-ab*(3/d);var P=T-ad*(3/d);var ah=S+ab*(3/d);return"M"+aa.x+","+aa.y+"L"+T+","+S+"L"+f+","+ag+"L"+Y+","+ae+"L"+P+","+ah+"L"+T+","+S+"Z"}return q}if(t.getSource().x==undefined){var s=_metExploreViz.getSessionById(m).getD3Data();var u=s.getNodes();r=u[t.getSource()];p=u[t.getTarget()];if(r.x!=undefined&&r.y!=undefined&&p.x!=undefined&&p.y!=undefined){if(r.getReactionReversibility()||p.getReactionReversibility()){q=o(r,p)}else{q=q(r,p)}}else{q="M0,0L0,0Z"}}else{r=t.getSource();p=t.getTarget();if(r.x!=undefined&&r.y!=undefined&&p.x!=undefined&&p.y!=undefined){if(r.getReactionReversibility()||p.getReactionReversibility()){q=o(r,p)}else{q=q(r,p)}}else{q="M0,0L0,0Z"}}return q},funcPath5:function(t,m){var r,p,q;function o(ah,a){var b=metExploreD3.getMetaboliteStyle();var c=metExploreD3.getReactionStyle();var d=Math.sqrt(Math.pow(a.x-ah.x,2)+Math.pow(a.y-ah.y,2));var an=(a.x-ah.x);var ap=(a.y-ah.y);var aj=an/Math.abs(an);var ak=ap/Math.abs(ap);if(ah.getBiologicalType()=="metabolite"){var W=(Math.abs(d)*c.getWidth()/2)/Math.abs(an);var ar=(Math.abs(d)*c.getHeight()/2)/Math.abs(ap);var au=(W<ar)?rT=W:rt=ar}else{var W=(Math.abs(d)*b.getWidth()/2)/Math.abs(an);var ar=(Math.abs(d)*b.getHeight()/2)/Math.abs(ap);var au=(W<ar)?rT=W:rt=ar}var aq=(b.getHeight()+b.getWidth())/2/2;var af=ah.x+an*(1-(d-aq)/d);var Y=ah.y+ap*(1-(d-aq)/d);var al=5;var X=ah.x+an*(1-(d-aq-al)/d);var aa=ah.y+ap*(1-(d-aq-al)/d);var g=ah.x+an*(1-(d-aq-al-al)/d);var ag=ah.y+ap*(1-(d-aq-al-al)/d);var am=X-ap*(3/d);var ac=aa+an*(3/d);var ao=X+ap*(3/d);var ad=aa-an*(3/d);var ae=ah.x+an*((d-aq)/d);var at=ah.y+ap*((d-aq)/d);var Z=ah.x+an*((d-aq-al)/d);var ab=ah.y+ap*((d-aq-al)/d);var f=Z+ap*(3/d);var av=ab-an*(3/d);var h=Z-ap*(3/d);var aw=ab+an*(3/d);var j=ah.x+an*((d-aq-al-al)/d);var ai=ah.y+ap*((d-aq-al-al)/d);return"M"+af+","+Y+"L"+am+","+ac+"L"+ao+","+ad+"M"+j+","+ai+"L"+f+","+av+"L"+h+","+aw+"M"+g+","+ag+"L"+am+","+ac+"L"+ao+","+ad+"L"+af+","+Y+"L"+am+","+ac+"L"+ao+","+ad+"L"+g+","+ag+"L"+j+","+ai+"L"+f+","+av+"L"+h+","+aw+"L"+ae+","+at+"L"+f+","+av+"L"+h+","+aw+"L"+j+","+ai+"Z"}function q(ab,a){var b=metExploreD3.getMetaboliteStyle();var c=metExploreD3.getReactionStyle();var d=Math.sqrt(Math.pow(a.x-ab.x,2)+Math.pow(a.y-ab.y,2));var ad=(a.x-ab.x);var af=(a.y-ab.y);var ac=ad/Math.abs(ad);var ae=af/Math.abs(af);if(ab.getBiologicalType()=="metabolite"){var T=(c.getWidth()+c.getHeight())/2/2;var Q=(b.getHeight()+b.getWidth())/2/2}else{var T=(b.getHeight()+b.getWidth())/2/2;var Q=(c.getWidth()+c.getHeight())/2/2}var X=ab.x+ad*(1-(d-Q)/d);var R=ab.y+af*(1-(d-Q)/d);var W=ab.x+ad*((d-T)/d);var ah=ab.y+af*((d-T)/d);var aa=5;var S=ab.x+ad*((d-T-aa)/d);var V=ab.y+af*((d-T-aa)/d);var f=S+af*(3/d);var ai=V-ad*(3/d);var h=S-af*(3/d);var aj=V+ad*(3/d);var Z=ab.x+ad*(1-(d-Q-aa)/d);var j=ab.y+af*(1-(d-Q-aa)/d);var ag=X-af*(3/d);var U=R+ad*(3/d);var g=X+af*(3/d);var Y=R-ad*(3/d);return"M"+Z+","+j+"L"+ag+","+U+"L"+g+","+Y+"L"+Z+","+j+"L"+S+","+V+"L"+f+","+ai+"L"+W+","+ah+"L"+h+","+aj+"L"+S+","+V+"Z"}if(t.getSource().x==undefined){var s=_metExploreViz.getSessionById(m).getD3Data();var u=s.getNodes();r=u[t.getSource()];p=u[t.getTarget()];if(r.x!=undefined&&r.y!=undefined&&p.x!=undefined&&p.y!=undefined){if(r.getReactionReversibility()||p.getReactionReversibility()){q=o(r,p)}else{q=q(r,p)}}else{q="M0,0L0,0Z"}}else{r=t.getSource();p=t.getTarget();if(r.x!=undefined&&r.y!=undefined&&p.x!=undefined&&p.y!=undefined){if(r.getReactionReversibility()||p.getReactionReversibility()){q=o(r,p)}else{q=q(r,p)}}else{q="M0,0L0,0Z"}}return q},funcPath6:function(t,m){var r,p,q;function o(ad,a){var b=metExploreD3.getMetaboliteStyle();var c=metExploreD3.getReactionStyle();var d=Math.sqrt(Math.pow(a.x-ad.x,2)+Math.pow(a.y-ad.y,2));var ac=(a.x-ad.x);var af=(a.y-ad.y);var ae=ac/Math.abs(ac);var ag=af/Math.abs(af);if(ad.getBiologicalType()=="metabolite"){var j=(Math.abs(d)*c.getWidth()/2)/Math.abs(ac);var ah=(Math.abs(d)*c.getHeight()/2)/Math.abs(af);var S=(j<ah)?rT=j:rt=ah}else{var j=(Math.abs(d)*b.getWidth()/2)/Math.abs(ac);var ah=(Math.abs(d)*b.getHeight()/2)/Math.abs(af);var S=(j<ah)?rT=j:rt=ah}var Z=ad.x+ac*(1-(d-largeurNoeudS)/d);var R=ad.y+af*(1-(d-largeurNoeudS)/d);var Y=ad.x+ac*((d-S)/d);var aj=ad.y+af*((d-S)/d);var ab=5;var V=ad.x+ac*((d-S-ab)/d);var X=ad.y+af*((d-S-ab)/d);var f=V+af*(3/d);var ak=X-ac*(3/d);var g=V-af*(3/d);var al=X+ac*(3/d);var T=ad.x+ac*(1-(d-largeurNoeudS-ab)/d);var U=ad.y+af*(1-(d-largeurNoeudS-ab)/d);var ai=T-af*(3/d);var W=U+ac*(3/d);var h=T+af*(3/d);var aa=U-ac*(3/d);return"M"+Z+","+R+"L"+ai+","+W+"L"+h+","+aa+"M"+Z+","+R+"L"+ai+","+W+"L"+T+","+U+"L"+V+","+X+"L"+f+","+ak+"L"+Y+","+aj+"L"+g+","+al+"L"+V+","+X+"L"+T+","+U+"L"+h+","+aa+"L"+Z+","+R+"Z"}function q(a,c){var f=metExploreD3.getMetaboliteStyle();var h=metExploreD3.getReactionStyle();var L=Math.sqrt(Math.pow(c.x-a.x,2)+Math.pow(c.y-a.y,2));var N=(c.x-a.x);var P=(c.y-a.y);var b=N/Math.abs(N);var d=P/Math.abs(P);if(a.getBiologicalType()=="metabolite"){var j=(h.getWidth()+h.getHeight())/2/2;var g=(f.getHeight()+f.getWidth())/2/2}else{var j=(f.getHeight()+f.getWidth())/2/2;var g=(h.getWidth()+h.getHeight())/2/2}var Q=a.x+N*((L-j)/L);var R=a.y+P*((L-j)/L);var K=5;var O=a.x+N*((L-j-K)/L);var J=a.y+P*((L-j-K)/L);var I=O+P*(3/L);var S=J-N*(3/L);var M=O-P*(3/L);var T=J+N*(3/L);return"M"+a.x+","+a.y+"L"+O+","+J+"L"+I+","+S+"L"+Q+","+R+"L"+M+","+T+"L"+O+","+J+"Z"}if(t.getSource().x==undefined){var s=_metExploreViz.getSessionById(m).getD3Data();var u=s.getNodes();r=u[t.getSource()];p=u[t.getTarget()];if(r.x!=undefined&&r.y!=undefined&&p.x!=undefined&&p.y!=undefined){if(r.getReactionReversibility()||p.getReactionReversibility()){q=o(r,p)}else{q=q(r,p)}}else{q="M0,0L0,0Z"}}else{r=t.getSource();p=t.getTarget();if(r.x!=undefined&&r.y!=undefined&&p.x!=undefined&&p.y!=undefined){if(r.getReactionReversibility()||p.getReactionReversibility()){q=o(r,p)}else{q=q(r,p)}}else{q="M0,0L0,0Z"}}return q},refreshLink1:function(s,o,j,p){metExploreD3.GraphLink.panelParent="#"+s;var q=o.getD3Data();var m=20;var r=j.getMarkerWidth()/2;metExploreD3.GraphLink.link=d3.select("#"+s).select("#D3viz").select("#graphComponent").selectAll("path.link").data(q.getLinks()).enter().append("svg:path").attr("class",String).attr("d",function(a){return metExploreD3.GraphLink.funcPath1(a,s)}).attr("class","link").attr("fill-rule","evenodd").attr("fill",function(a){if(a.interaction=="out"){return j.getMarkerOutColor()}else{return j.getMarkerInColor()}}).style("stroke",j.getStrokeColor()).style("stroke-width",0.5).style("stroke-linejoin","bevel")},refreshLink:function(s,o,j,p){metExploreD3.GraphLink.panelParent="#"+s;var q=o.getD3Data();var m=20;var r=j.getMarkerWidth()/2;d3.select("#"+s).select("#D3viz").select("#graphComponent").selectAll(".linkGroup").remove();d3.select("#"+s).select("#D3viz").select("#graphComponent").selectAll("path.link").data(q.getLinks()).enter().insert("svg:g",":first-child").attr("class","linkGroup").append("svg:path").attr("class",String).attr("d",function(a){return metExploreD3.GraphLink.funcPath3(a,s,this.id,3)}).attr("class","link").attr("fill-rule","evenodd").attr("fill",function(a){if(a.interaction=="out"){return j.getMarkerOutColor()}else{return j.getMarkerInColor()}}).style("stroke",j.getStrokeColor()).style("stroke-width",0.5).style("opacity",1).style("stroke-dasharray",null);metExploreD3.GraphLink.link=d3.select("#"+s).select("#D3viz").select("#graphComponent").selectAll("path.link")},loadLinksForFlux:function(r,q,s,p,o,m){d3.select("#"+r).select("#D3viz").select("#graphComponent").selectAll(".linkGroup").remove();_metExploreViz.getSessionById(r).setMappingDataType("Flux");var j=d3.select("#"+r).select("#D3viz").select("#graphComponent").selectAll("path.link").data(q.getLinks()).enter().insert("svg:g",":first-child").attr("class","linkGroup");j.each(function(a){d3.select(this).append("svg:path").attr("class",String).attr("d",function(b){return metExploreD3.GraphLink.funcPathForFlux(b,r,this.id)}).attr("class","link").attr("fill-rule","evenodd").style("stroke",s.getStrokeColor()).style("stroke-width",0.5).on("mouseover",function(D){var E,H,h,F;if(D.getSource().getBiologicalType()=="reaction"){E=D.getSource();H=D.getTarget()}else{E=D.getTarget();H=D.getSource()}h=D.getSource();F=D.getTarget();var B=_metExploreViz.getSessionById("viz").getActiveMapping();var g=_metExploreViz.getMappingByName(B);var C=g.getConditions();var b=E.getMappingDataByNameAndCond(B,C[0]);var c=E.getMappingDataByNameAndCond(B,C[1]);var d=b;if(C[1]==m){d=c}if(d==null){var f=0}else{if(isNaN(d.getMapValue())){var f=0}else{var f=d.getMapValue()}if(f<0){F=D.getSource();h=D.getTarget()}}if(!document.getElementById("tooltip2").classList.contains("fixed")){var G="Name: "+D.id+"<br/><b>Source:</b> "+h.getName()+"<br/><b>Target:</b> "+F.getName()+((f!=undefined)?"<br/>Flux: "+Math.abs(f):"");G+="<br/>";document.getElementById("tooltip2").innerHTML=G;document.getElementById("tooltip2").classList.remove("hide")}}).on("mouseout",function(b){document.getElementById("tooltip2").classList.add("hide")});d3.select(this).append("svg:path").attr("class",String).attr("id","linkRev").attr("d",function(b){return metExploreD3.GraphLink.funcPathForFlux(b,r,this.id)}).attr("class","link").attr("fill-rule","evenodd").style("stroke",s.getStrokeColor()).style("stroke-width",0.5).on("mouseover",function(D){var E,H,h,F;if(D.getSource().getBiologicalType()=="reaction"){E=D.getSource();H=D.getTarget()}else{E=D.getTarget();H=D.getSource()}h=D.getSource();F=D.getTarget();var B=_metExploreViz.getSessionById("viz").getActiveMapping();var g=_metExploreViz.getMappingByName(B);var C=g.getConditions();var b=E.getMappingDataByNameAndCond(B,C[0]);var c=E.getMappingDataByNameAndCond(B,C[1]);var d=c;if(C[0]==m){d=b}if(d==null){var f=0}else{if(isNaN(d.getMapValue())){var f=0}else{var f=d.getMapValue()}if(f<0){F=D.getSource();h=D.getTarget()}}if(!document.getElementById("tooltip2").classList.contains("fixed")){var G="Name: "+D.id+"<br/><b>Source: </b>"+h.getName()+"<br/><b>Target: </b>"+F.getName()+((f!=undefined)?"<br/>Flux: "+Math.abs(f):"");G+="<br/>";document.getElementById("tooltip2").innerHTML=G;document.getElementById("tooltip2").classList.remove("hide")}}).on("mouseout",function(b){document.getElementById("tooltip2").classList.add("hide")})});if(o){d3.select("#"+r).select("#D3viz").select("#graphComponent").selectAll(".linkGroup").append("svg:text").text(function(B){var C,a,g,D;if(B.getSource().getBiologicalType()=="reaction"){C=B.getSource();a=B.getTarget()}else{C=B.getTarget();a=B.getSource()}g=B.getSource();D=B.getTarget();var z=_metExploreViz.getSessionById("viz").getActiveMapping();var f=_metExploreViz.getMappingByName(z);var A=f.getConditions();var b=C.getMappingDataByNameAndCond(z,A[0]);var c=C.getMappingDataByNameAndCond(z,A[1]);var d=b;if(A[1]==m){d=c}if(d==null){var h=0}else{if(isNaN(d.getMapValue())){var h=0}else{var h=d.getMapValue()}if(h<0){D=B.getSource();g=B.getTarget()}}return h}).style("font-size","6px").attr("class","linklabel").attr("transform","translate(-10, -15)").classed("hide",false).style("paint-order","stroke").style("stroke-width",1).style("stroke","77F").style("stroke-opacity","0.7").attr("dy",".4em").style("font-weight","bold").style("pointer-events","none").filter(function(c){var a,d,b,f;if(c.getSource().getBiologicalType()=="reaction"){d=c.getTarget()}else{d=c.getSource()}return d.getIsSideCompound()}).style("opacity",0.1);d3.select("#"+r).select("#D3viz").select("#graphComponent").selectAll(".linkGroup").append("svg:text").text(function(B){var C,a,g,D;if(B.getSource().getBiologicalType()=="reaction"){C=B.getSource();a=B.getTarget()}else{C=B.getTarget();a=B.getSource()}g=B.getSource();D=B.getTarget();var z=_metExploreViz.getSessionById("viz").getActiveMapping();var f=_metExploreViz.getMappingByName(z);var A=f.getConditions();var b=C.getMappingDataByNameAndCond(z,A[0]);var c=C.getMappingDataByNameAndCond(z,A[1]);var d=c;if(A[0]==m){d=b}if(d==null){var h=0}else{if(isNaN(d.getMapValue())){var h=0}else{var h=d.getMapValue()}if(h<0){D=B.getSource();g=B.getTarget()}}return h}).style("font-size","6px").attr("class","linklabel").attr("id","linkRev").attr("transform","translate(-10, 0)").classed("hide",false).style("paint-order","stroke").style("stroke-width",1).style("stroke","#AA0").style("stroke-opacity","0.7").attr("dy",".4em").style("font-weight","bold").style("pointer-events","none").filter(function(c){var a,d,b,f;if(c.getSource().getBiologicalType()=="reaction"){d=c.getTarget()}else{d=c.getSource()}return d.getIsSideCompound()}).style("opacity",0.1)}metExploreD3.GraphNetwork.tick("viz")},reloadLinks:function(g,j,f,h){d3.select("#"+g).select("#D3viz").select("#graphComponent").selectAll("path.link").data(j.getLinks()).enter().insert("path",":first-child").attr("class",String).attr("d",function(a){return metExploreD3.GraphLink.funcPath3(a,parent,this.id,3)}).attr("class","link").attr("fill-rule","evenodd").attr("fill",function(a){if(a.interaction=="out"){return f.getMarkerOutColor()}else{return f.getMarkerInColor()}}).style("stroke",f.getStrokeColor()).style("stroke-width",0.5).style("stroke-linejoin","bevel")},linkTypeOfMetabolite:function(){_metExploreViz.setLinkedByTypeOfMetabolite(true);var f="viz";var h=_metExploreViz.getSessionById("viz");if(h!=undefined){var j=h.getForce();if(j!=undefined){j.stop()}}var g=metExploreD3.createLoadMask("Link in progress...",f);if(g!=undefined){metExploreD3.showMask(g);metExploreD3.deferFunction(function(){var t={};var s={};var a={};var u={};d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(m){return m.getInteraction()!="hiddenForce"}).each(function(m){if(m.getInteraction()=="in"){if(t[m.getTarget()]==null){t[m.getTarget()]=[]}t[m.getTarget()][t[m.getTarget()].length]=m.getSource();if(u[m.getSource()]==null){u[m.getSource()]=[]}u[m.getSource()][u[m.getSource()].length]=m.getTarget()}else{if(s[m.getSource()]==null){s[m.getSource()]=[]}s[m.getSource()][s[m.getSource()].length]=m.getTarget();if(a[m.getTarget()]==null){a[m.getTarget()]=[]}a[m.getTarget()][a[m.getTarget()].length]=m.getSource()}});for(var d in t){var r=-1;t[d].forEach(function(m){r++;t[d].forEach(function(o){if(m!=o&&m!=undefined){metExploreD3.GraphLink.addHiddenLinkInDrawing(m+" -- "+o,m,o,"viz")}});delete t[d][r]})}for(var d in s){var r=-1;s[d].forEach(function(m){r++;s[d].forEach(function(o){if(m!=o&&m!=undefined){metExploreD3.GraphLink.addHiddenLinkInDrawing(m+" -- "+o,m,o,"viz")}});delete s[d][r]})}for(var d in a){var r=-1;a[d].forEach(function(m){r++;a[d].forEach(function(o){if(m!=o&&m!=undefined){metExploreD3.GraphLink.addHiddenLinkInDrawing(m+" -- "+o,m,o,"viz")}});delete a[d][r]})}for(var d in u){var r=-1;u[d].forEach(function(m){r++;u[d].forEach(function(o){if(m!=o&&m!=undefined){metExploreD3.GraphLink.addHiddenLinkInDrawing(m+" -- "+o,m,o,"viz")}});delete u[d][r]})}metExploreD3.hideMask(g);var c=metExploreD3.GraphNetwork.isAnimated(h.getId());if(c=="true"){var b=h.getForce();if(b!=undefined){if((metExploreD3.GraphNetwork.isAnimated(h.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(h.getId())==null)){b.start()}}}},100)}},removeLinkTypeOfMetabolite:function(){_metExploreViz.setLinkedByTypeOfMetabolite(false);var f="viz";var h=_metExploreViz.getSessionById("viz");if(h!=undefined){var j=h.getForce();if(j!=undefined){j.stop()}}var g=metExploreD3.createLoadMask("Remove hidden link in progress...",f);if(g!=undefined){metExploreD3.showMask(g);metExploreD3.deferFunction(function(){metExploreD3.GraphLink.removeHiddenLinkInDrawing("viz");metExploreD3.hideMask(g);var b=metExploreD3.GraphNetwork.isAnimated(h.getId());if(b=="true"){var a=h.getForce();if(a!=undefined){if((metExploreD3.GraphNetwork.isAnimated(h.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(h.getId())==null)){a.start()}}}},100)}},addHiddenLinkInDrawing:function(q,w,r,v){var o=_metExploreViz.getSessionById(v);var t=o.getD3Data();t.addLink(q,w,r,"hiddenForce",false);var p=metExploreD3.getMetaboliteStyle();var s=metExploreD3.getLinkStyle();var u=o.getForce();link=d3.select("#"+v).select("#graphComponent").selectAll("path.link").data(u.links(),function(a){return a.source.id+"-"+a.target.id}).enter().insert("path",":first-child").attr("class","link").style("stroke",s.getStrokeColor()).style("opacity",0)},removeHiddenLinkInDrawing:function(h){var m=_metExploreViz.getSessionById(h);var o=m.getD3Data();var j=[];var p=m.getForce();var q=d3.select("#"+h).select("#graphComponent").selectAll("path.link").filter(function(a){return a.getInteraction()=="hiddenForce"}).each(function(a){j.push(a)}).remove();setTimeout(function(){for(i=0;i<j.length;i++){var a=j[i];o.removeLink(a);var b=p.links().indexOf(a);if(b!=-1){p.links().splice(b,1)}}},100)},tick:function(f,g){var d=_metExploreViz.getSessionById(f).getMappingDataType()=="Flux";if(d){funcPath=metExploreD3.GraphLink.funcPathForFlux}else{funcPath=metExploreD3.GraphLink.funcPath3}d3.select("#"+metExploreD3.GraphNode.panelParent).select("#D3viz").selectAll("path.convexhull").attr("d",metExploreD3.GraphNode.groupPath).attr("transform",d3.select("#"+f).select("#D3viz").select("#graphComponent").attr("transform"));d3.select("#"+f).select("#D3viz").select("#graphComponent").selectAll("path.link").attr("d",function(a){return funcPath(a,f,this.id)}).style("stroke-linejoin","bevel")},displayConvexhulls:function(f){var j=_metExploreViz.getGeneralStyle();var h=d3.select("#"+f).select("#D3viz").selectAll("path.convexhull");var g=j.isDisplayedConvexhulls();if(!g){h.remove()}else{if(h[0].length==0){metExploreD3.GraphNode.loadPath(f,g)}h.attr("d",metExploreD3.GraphNode.groupPath).attr("transform",d3.select("#"+f).select("#D3viz").select("#graphComponent").attr("transform"))}}};metExploreD3.GraphNode={node:"",_MyThisGraphNode:"",panelParent:"",activePanel:"",taskClick:"",charKey:"",ctrlKey:"",groups:"",groupPath:"",groupFill:"",dblClickable:false,delayedInitialisation:function(b){metExploreD3.GraphNode.panelParent=b;_MyThisGraphNode=metExploreD3.GraphNode;activePanel=metExploreD3.GraphNode},selectNeighbours:function(c,d){d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(a){return a.getSource()==c||a.getTarget()==c}).each(function(a){if(a.getSource()==c){if(!a.getTarget().isSelected()){_MyThisGraphNode.selection(a.getTarget(),d)}}else{if(!a.getSource().isSelected()){_MyThisGraphNode.selection(a.getSource(),d)}}})},changeName:function(o){var m=metExploreD3.getMetaboliteStyle();var j=metExploreD3.getReactionStyle();var p;d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").each(function(a){if(o.querySelector("rect.metabolite")!=null){if(a.getId()==o.querySelector("rect.metabolite").id){p=a}}else{if(o.querySelector("rect.reaction")!=null){if(a.getId()==o.querySelector("rect.reaction").id){p=a}}}});if(p){if(p.getBiologicalType()=="metabolite"){var q=m.getDisplayLabel(p,m.getLabel())}else{var q=j.getDisplayLabel(p,j.getLabel())}}if(q){var h=metExploreD3.displayPrompt("New label","Enter new label",function(b,a){if(a!=null&&a!=""&&b=="ok"){d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(c){return p.getId()==c.getId()}).each(function(c){c.setLabel(a);d3.select(this).select("text").remove();metExploreD3.GraphNode.addText(c,"viz")})}})}},dragstart:function(p,s){_MyThisGraphNode.activePanel=d3.event.sourceEvent.target.viewportElement.parentNode.id;if(_MyThisGraphNode.activePanel==""||_MyThisGraphNode.activePanel.search("node")!=-1){_MyThisGraphNode.activePanel=d3.event.sourceEvent.target.parentNode.viewportElement.parentNode.id}d3.event.sourceEvent.stopPropagation();var q=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(q!=undefined){if(d3.event.sourceEvent.target.classList.contains("backgroundlocker")||d3.event.sourceEvent.target.classList.contains("iconlocker")){if(d3.event.sourceEvent.button!=2){p.setLocked(!p.isLocked());p.fixed=p.isLocked();metExploreD3.GraphNode.node.filter(function(a){return a==p}).select(".locker").classed("hide",false).select(".iconlocker").attr("xlink:href",function(a){if(a.isLocked()){return"resources/icons/lock_font_awesome.svg"}else{return"resources/icons/unlock_font_awesome.svg"}})}}else{if(d3.event.sourceEvent.button==2){if(!p.isSelected()){_MyThisGraphNode.selection(p,_MyThisGraphNode.activePanel);if(_MyThisGraphNode.charKey==78&&p.isSelected()){_MyThisGraphNode.selectNeighbours(p,_MyThisGraphNode.activePanel)}}}else{_MyThisGraphNode.selection(p,_MyThisGraphNode.activePanel);if(_MyThisGraphNode.charKey==78&&p.isSelected()){_MyThisGraphNode.selectNeighbours(p,_MyThisGraphNode.activePanel)}}}d3.selectAll("#D3viz").style("cursor","move");var r=q.getForce();r.stop();if(q.isLinked()){var o=_metExploreViz.getSessionsSet();for(var d in o){if(o[d].isLinked()&&_MyThisGraphNode.activePanel!=o[d].getId()){var m=o[d].getForce();m.stop()}}}}},refreshStyleOfReaction:function(){var d=metExploreD3.getReactionStyle();var c=d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(a){return a.getBiologicalType()=="reaction"});c.select("text").remove();c.setNodeForm(d.getWidth(),d.getHeight(),d.getRX(),d.getRY(),d.getStrokeColor(),d.getStrokeWidth());c.each(function(a){metExploreD3.GraphNode.addText(a,"viz")})},refreshStyleOfMetabolite:function(){var q=metExploreD3.getMetaboliteStyle();var v=d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(a){return a.getBiologicalType()=="metabolite"});v.select("text").remove();v.filter(function(a){return !a.getIsSideCompound()}).setNodeForm(q.getWidth(),q.getHeight(),q.getRX(),q.getRY(),undefined,q.getStrokeWidth());v.filter(function(a){return a.getIsSideCompound()}).setNodeForm(q.getWidth()/2,q.getHeight()/2,q.getRX()/2,q.getRY()/2,undefined,q.getStrokeWidth()/2);var z=Math.min(q.getWidth(),q.getHeight());v.each(function(a){metExploreD3.GraphNode.addText(a,"viz")});v.select(".structure_metabolite").attr("viewBox",function(a){console.log(z);return"0 0 "+z+" "+z}).attr("width",z*8/10+"px").attr("height",z*8/10+"px").attr("x",(-z/2)+(z*1/10)).attr("preserveAspectRatio","xMinYMin").attr("y",(-z/2)+(z*1/10));var p=_metExploreViz.getSessionById("viz");var y=p.getForce();var q=metExploreD3.getMetaboliteStyle();var t=metExploreD3.getReactionStyle();var s=Math.max(t.getWidth(),t.getHeight());var r=Math.max(q.getWidth(),q.getHeight());var w=Math.max(s,r);var u=metExploreD3.getLinkStyle();y.linkDistance(function(a){if(a.getSource().getIsSideCompound()||a.getTarget().getIsSideCompound()){return u.getSize()/2+w}else{return u.getSize()+w}})},moveNode:function(c,d){d3.select("#"+d).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(a){if(_MyThisGraphNode.ctrlKey){return a.isSelected()}else{return c.getId()==a.getId()}}).each(function(a){a.px+=d3.event.dx;a.py+=d3.event.dy;a.x+=d3.event.dx;a.y+=d3.event.dy})},dragmove:function(p,s){if(!p.isSelected()&&!(d3.event.sourceEvent.target.classList.contains("backgroundlocker")||d3.event.sourceEvent.target.classList.contains("iconlocker"))){_MyThisGraphNode.selection(p,_MyThisGraphNode.activePanel);if(_MyThisGraphNode.charKey==78&&p.isSelected()){_MyThisGraphNode.selectNeighbours(p,_MyThisGraphNode.activePanel)}}_MyThisGraphNode.moveNode(p,_MyThisGraphNode.activePanel);_MyThisGraphNode.tick(_MyThisGraphNode.activePanel);var q=metExploreD3.getScaleById(_MyThisGraphNode.activePanel);metExploreD3.GraphLink.tick(_MyThisGraphNode.activePanel,q);var r=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(r.isLinked()){var o=_metExploreViz.getSessionsSet();for(var d in o){if(o[d].isLinked()&&_MyThisGraphNode.activePanel!=o[d].getId()){var m=metExploreD3.getScaleById(o[d].getId());_MyThisGraphNode.moveNode(p,o[d].getId());_MyThisGraphNode.tick(o[d].getId());metExploreD3.GraphLink.tick(o[d].getId(),m)}}}},dragend:function(w,A){var v=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);var B=_metExploreViz.getSessionById("viz");if(v!=undefined){if(v.isLinked()){var y=_metExploreViz.getSessionsSet();for(var t in y){if(y[t].isLinked()&&_MyThisGraphNode.activePanel!=y[t].getId()){var u=metExploreD3.GraphNetwork.isAnimated(B.getId());if(u=="true"){var z=B.getForce();if((metExploreD3.GraphNetwork.isAnimated(_MyThisGraphNode.panelParent)=="true")||(metExploreD3.GraphNetwork.isAnimated(_MyThisGraphNode.panelParent)==null)){z.resume()}}_MyThisGraphNode.tick(y[t].getId());var d=metExploreD3.getScaleById(y[t].getId());metExploreD3.GraphLink.tick(y[t].getId(),d)}}}else{var C=metExploreD3.GraphNetwork.isAnimated(_MyThisGraphNode.activePanel);if(C=="true"){var D=v.getForce();if((metExploreD3.GraphNetwork.isAnimated(_MyThisGraphNode.activePanel)=="true")||(metExploreD3.GraphNetwork.isAnimated(_MyThisGraphNode.activePanel)==null)){D.resume()}}_MyThisGraphNode.tick(_MyThisGraphNode.activePanel);var s=metExploreD3.getScaleById(_MyThisGraphNode.activePanel);metExploreD3.GraphLink.tick(_MyThisGraphNode.activePanel,s)}d3.selectAll("#D3viz").style("cursor","default")}},fixNodeOnRefresh:function(g,f){var d=_metExploreViz.getSessionById(f);if(d!=undefined){if(g.isSelected()){_MyThisGraphNode.selectNode(g,f)}else{_MyThisGraphNode.unSelectNode(g,f)}setTimeout(function(){if(d.isLinked()){var a=_metExploreViz.getSessionsSet();for(var b in a){if(a[b].isLinked()&&f!=a[b].getId()){d3.select("#"+a[b].getId()).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(c){return g.getId()==c.getId()}).each(function(c){c.setIsSelected(!c.isSelected())});if(g.isSelected()){_MyThisGraphNode.selectNode(g,a[b].getId())}else{_MyThisGraphNode.unSelectNode(g,a[b].getId())}}}}},200)}},selection:function(g,f){var d=_metExploreViz.getSessionById(f);if(d!=undefined){d3.select("#"+f).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(a){return g.getId()==a.getId()}).each(function(a){a.setIsSelected(!a.isSelected())});if(g.isSelected()){_MyThisGraphNode.selectNode(g,f)}else{_MyThisGraphNode.unSelectNode(g,f)}setTimeout(function(){if(d.isLinked()){var a=_metExploreViz.getSessionsSet();for(var b in a){if(a[b].isLinked()&&f!=a[b].getId()){d3.select("#"+a[b].getId()).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(c){return g.getId()==c.getId()}).each(function(c){c.setIsSelected(!c.isSelected())});if(g.isSelected()){_MyThisGraphNode.selectNode(g,a[b].getId())}else{_MyThisGraphNode.unSelectNode(g,a[b].getId())}}}}},200)}},selectNode:function(o,d){var u=metExploreD3.getReactionStyle();var q=_metExploreViz.getSessionById(d);var r=metExploreD3.getMetabolitesSet();var p=metExploreD3.getReactionsSet();var s="<b>Name:</b> "+o.getName()+"<br/><b>Biological type:</b> "+o.getBiologicalType()+((o.getCompartment()!=undefined)?"<br/><b>Compartment:</b> "+o.getCompartment():"")+((o.getDbIdentifier()!=undefined)?"<br/><b>Database identifier:</b> "+o.getDbIdentifier():"")+((o.getEC()!=undefined)?"<br/><b>EC number:</b> "+o.getEC():"")+((o.getReactionReversibility()!=undefined)?"<br/><b>Reaction reversibility:</b> "+o.getReactionReversibility():"")+((o.getIsSideCompound()!=undefined)?"<br/><b>SideCompound:</b> "+o.getIsSideCompound():"")+((o.getMappingDatasLength()!=0)?((o.getMappingDatasLength()==1)?"<br/><b>Mapping:</b><br/><table style='width:100%; margin-left: 30px; padding-right: 30px;'>":"<br/><b>Mappings:</b><br/><table style='width:100%; margin-left: 30px; padding-right: 30px;'>"):"");o.getMappingDatas().forEach(function(a){s+="<tr><td>"+a.getMappingName()+"</td><td>"+a.getConditionName()+"</td><td>"+a.getMapValue()+"</td></tr>"});s+="</table>";if(o.getSvg()!=""&&o.getSvg()!=undefined&&o.getSvg()!="undefined"){s+='<br/><img src="resources/images/structure_metabolite/'+o.getSvg()+'"/>'}document.getElementById("tooltip2").innerHTML=s;document.getElementById("tooltip2").classList.remove("hide");document.getElementById("tooltip2").classList.add("fixed");d3.select("#"+d).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(a){return o.getId()==a.getId()}).each(function(a){q.addSelectedNode(a.getId());if(a.getBiologicalType()=="reaction"){d3.select(this).select("text").style("fill","white")}});var t=d3.select("#"+d).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(a){return o.getId()==a.getId()}).select(".fontSelected").style("fill-opacity","0.4");_MyThisGraphNode.addText(o,d)},unSelectNode:function(j,d){var m=_metExploreViz.getSessionById(d);var o=metExploreD3.getMetabolitesSet();var h=metExploreD3.getReactionsSet();d3.select("#"+d).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(a){return j.getId()==a.getId()}).select(".fontSelected").style("fill-opacity","0");d3.select("#"+d).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(a){return j.getId()==a.getId()}).each(function(a){m.removeSelectedNode(a.getId());if(a.getBiologicalType()=="reaction"){var b;var c=metExploreD3.GraphUtils.chooseTextColor(this.style.getPropertyValue("fill"));d3.select(this).select("text").style("fill",c)}})},addText:function(p,j){var q=metExploreD3.getMetaboliteStyle();var d=metExploreD3.getReactionStyle();var m=_metExploreViz.getSessionById("viz");if(p.getBiologicalType()=="metabolite"){var o=Math.min(q.getWidth(),q.getHeight());if(d3.select("#"+j).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(a){return p.getId()==a.getId()}).select("text")==""){d3.select("#"+j).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(a){return p.getId()==a.getId()}).append("svg:text").attr("fill","black").attr("class",function(a){return a.getBiologicalType()}).each(function(c){var h=d3.select(this);var b=q.getDisplayLabel(c,q.getLabel());b=b.split(" ");h.text("");for(var a=0;a<b.length;a++){var g=$("<div/>").html(b[a]).text();var f=h.append("tspan").text(g);if(a>0){f.attr("x",0).attr("dy","5")}}}).style("font-size",q.getFontSize()).style("paint-order","stroke").style("stroke-width",1).style("stroke","white").style("stroke-opacity","0.7").attr("dy",".4em").style("font-weight","bold").style("pointer-events","none").attr("y",o/2+3)}if(p.getSvg()!="undefined"&&p.getSvg()!=undefined&&p.getSvg()!=""){if(d3.select("#"+j).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(a){return p.getId()==a.getId()}).select("image").empty()){d3.select("#"+j).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(a){return p.getId()==a.getId()}).append("svg").attr("viewBox",function(a){return"0 0 "+o+" "+o}).attr("width",o*8/10+"px").attr("height",o*8/10+"px").attr("x",(-o/2)+(o*1/10)).attr("preserveAspectRatio","xMinYMin").attr("y",(-o/2)+(o*1/10)).attr("class","structure_metabolite").append("image").attr("xlink:href",function(a){return"resources/images/structure_metabolite/"+a.getSvg()}).attr("width","100%").attr("height","100%")}}}if(p.getLabelVisible()==true&&p.getBiologicalType()=="reaction"){if(d3.select("#"+j).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(a){return p.getId()==a.getId()}).text()==""){d3.select("#"+j).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(a){return p.getId()==a.getId()}).append("svg:text").attr("fill","black").attr("class",function(a){return a.getBiologicalType()}).text(function(a){var b=$("<div/>").html(d.getDisplayLabel(a,d.getLabel())).text();if(b==""){var b=$("<div/>").html(d.getDisplayLabel(a,d.getLabel())).text()}return b}).style("font-size",function(a){if(d.getDisplayLabel(a,d.getLabel())=="NA"){return 6}return Math.min(d.getWidth(),(d.getWidth()-d.getWidth()/10)/this.getComputedTextLength()*10)+"px"}).style("font-weight","bold").attr("dy",".3em")}}},addTextAllPanels:function(){var c=_metExploreViz.getSessionsSet();for(var d in c){d3.select("#"+c[d].getId()).select("#D3viz").select("#graphComponent").selectAll("g.node").each(function(a){metExploreD3.GraphNode.addText(a,c[d].getId())})}},removeText:function(b){d3.select("#"+b).select("#D3viz").select("#graphComponent").selectAll("g.node").select("text").remove()},removeTextAllPanels:function(f){var g=_metExploreViz.getSessionsSet();for(var d in g){metExploreD3.GraphNode.removeText(g[d].getId())}},searchNode:function(h){var g=h.toUpperCase();var f=d3.select("#viz").select("#D3viz").select("#graphComponent");var j=f.selectAll("g.node").filter(function(s,b){var c=false;if(s.getName()!=undefined){c=s.getName().toUpperCase().indexOf(g)>-1}if(s.getLabel()!=undefined){c=s.getLabel().toUpperCase().indexOf(g)>-1}var a=false;if(s.getEC()!=undefined){a=s.getEC().toUpperCase().indexOf(g)>-1}var d=false;if(s.getDbIdentifier()!=undefined){d=s.getDbIdentifier().toUpperCase().indexOf(g)>-1}var q=false;if(s.getCompartment()!=undefined){q=s.getCompartment().toUpperCase().indexOf(g)>-1}var r=false;if(s.getBiologicalType()!=undefined){r=s.getBiologicalType().toUpperCase().indexOf(g)>-1}return c||a||d||q||r});if(j.size()==0){metExploreD3.displayMessage("Warning",'The node "'+h+"\" doesn't exist.")}else{j.each(function(a){if(!a.isSelected()){_MyThisGraphNode.selection(a,"viz")}})}},refreshNode:function(F){var A=metExploreD3.getReactionStyle();var v=metExploreD3.getMetaboliteStyle();var t=metExploreD3.getGeneralStyle();var u=_metExploreViz.getSessionById(F);var w=_metExploreViz.getSessionById("viz");d3.select("body").on("keydown",function(){_MyThisGraphNode.charKey=d3.event.keyCode;_MyThisGraphNode.ctrlKey=d3.event.ctrlKey;if(_MyThisGraphNode.charKey==65&&_MyThisGraphNode.ctrlKey){d3.select("#"+F).select("#D3viz").select("#graphComponent").selectAll("g.node").each(function(a){if(!a.isSelected()){_MyThisGraphNode.selection(a,F)}})}}).on("keyup",function(a){if(_MyThisGraphNode.charKey==46&&u.getSelectedNodes().length>0){metExploreD3.displayMessageYesNo("Selected nodes","Do you want remove selected nodes?",function(b){if(b=="yes"){metExploreD3.GraphNetwork.removeSelectedNode("viz")}})}_MyThisGraphNode.charKey="none";_MyThisGraphNode.ctrlKey=d3.event.ctrlKey});metExploreD3.GraphNode.panelParent=F;_MyThisGraphNode=metExploreD3.GraphNode;var D=d3.behavior.drag().on("dragstart",_MyThisGraphNode.dragstart).on("drag",_MyThisGraphNode.dragmove).on("dragend",_MyThisGraphNode.dragend);var B=u.getD3Data();var y=parseInt(d3.select("#"+_MyThisGraphNode.panelParent).select("#D3viz").style("height"));var h=parseInt(d3.select("#"+_MyThisGraphNode.panelParent).select("#D3viz").style("width"));d3.selectAll("#D3viz").on("mouseup",this.unselectIfDBClick);var C=metExploreD3.getScaleById(F);metExploreD3.GraphNode.node=d3.select("#"+metExploreD3.GraphNode.panelParent).select("#D3viz").select("#graphComponent").selectAll("g.node").data(B.getNodes()).enter().append("svg:g").attr("class","node").attr("id",function(a){return"node"+a.getId()}).call(D).style("fill","white");metExploreD3.GraphNode.node.filter(function(a){return !a.isDuplicated()}).on("mouseenter",function(g){var c=d3.select(this).attr("transform");var a=c.substring(c.indexOf("scale"),c.length);var b=a.substring(6,a.indexOf(")"));if(isNaN(b)){b=1}var d=d3.select("#"+F).select("#D3viz").select("#graphComponent").selectAll("g.node");d3.select(this).attr("transform","translate("+g.x+", "+g.y+") scale("+b*2+")");var f=d3.select("#"+F).select("#D3viz").select("#graphComponent").selectAll("path.link");if(g.getBiologicalType()=="reaction"){f.filter(function(j){return g.getId()==j.getSource().getId()}).style("stroke","green").style("stroke-width","1.5");f.filter(function(j){return g.getId()==j.getTarget().getId()}).style("stroke","red").style("stroke-width","1.5")}else{f.filter(function(j){return g.getId()==j.getSource().getId()}).style("stroke","red").style("stroke-width","1.5");f.filter(function(j){return g.getId()==j.getTarget().getId()}).style("stroke","green").style("stroke-width","1.5")}}).on("mouseover",function(a){var f=d3.select("#"+F).select("#D3viz").select("#graphComponent").selectAll("g.node");d3.select(this).each(function(g){var j=f[0][f.size()-1];this.parentNode.insertBefore(this,j)});a.fixed=true;metExploreD3.GraphNode.node.filter(function(g){return g==a}).select(".locker").classed("hide",false).select(".iconlocker").attr("xlink:href",function(g){if(g.isLocked()){return"resources/icons/lock_font_awesome.svg"}else{return"resources/icons/unlock_font_awesome.svg"}});var b=C.getXScale();var c=C.getYScale();if(!document.getElementById("tooltip2").classList.contains("fixed")){var d="<b>Name:</b> "+a.getName()+"<br/><b>Biological type:</b> "+a.getBiologicalType()+((a.getCompartment()!=undefined)?"<br/><b>Compartment:</b> "+a.getCompartment():"")+((a.getDbIdentifier()!=undefined)?"<br/><b>Database identifier:</b> "+a.getDbIdentifier():"")+((a.getEC()!=undefined)?"<br/><b>EC number: </b>"+a.getEC():"")+((a.getReactionReversibility()!=undefined)?"<br/><b>Reaction reversibility:</b> "+a.getReactionReversibility():"")+((a.getIsSideCompound()!=undefined)?"<br/><b>SideCompound:</b> "+a.getIsSideCompound():"")+((a.getMappingDatasLength()!=0)?((a.getMappingDatasLength()==1)?"<br/><b>Mapping:</b><br/><table style='width:100%; margin-left: 30px; padding-right: 30px;'>":"<br/><b>Mappings:</b><br/><table style='width:100%; margin-left: 30px; padding-right: 30px;'>"):"");a.getMappingDatas().forEach(function(g){d+="<tr><td>"+g.getMappingName()+"</td><td>"+g.getConditionName()+"</td><td>"+g.getMapValue()+"</td></tr>"});d+="</table>";if(a.getSvg()!=undefined&&a.getSvg()!="undefined"&&a.getSvg()!=""){d+='<br/><img src="resources/images/structure_metabolite/'+a.getSvg()+'"/>'}document.getElementById("tooltip2").innerHTML=d;document.getElementById("tooltip2").classList.remove("hide")}}).on("mouseleave",function(g){var d=d3.select(this).attr("transform");var a=d.substring(d.indexOf("scale"),d.length);var b=a.substring(6,a.indexOf(")"));if(isNaN(b)){b=1}metExploreD3.GraphNode.node.filter(function(j){return j==g}).select(".locker").classed("hide",true);var f=d3.select("#"+F).select("#D3viz").select("#graphComponent").selectAll("g.node");d3.select(this).attr("transform","translate("+g.x+", "+g.y+") scale("+b/2+")");if(!g.isLocked()){g.fixed=false}var c=metExploreD3.getLinkStyle();document.getElementById("tooltip2").classList.add("hide");d3.select("#"+F).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(j){return g.getId()==j.getSource().getId()||g.getId()==j.getTarget().getId()}).style("stroke",c.getStrokeColor()).style("stroke-width","0.5");if(g.getBiologicalType()=="reaction"){d3.select(this).selectAll("rect").selectAll(".reaction, .fontSelected").transition().duration(750).attr("width",A.getWidth()).attr("height",A.getHeight()).attr("transform","translate(-"+A.getWidth()/2+",-"+A.getHeight()/2+")")}else{d3.select(this).selectAll("rect").selectAll(".metabolite, .fontSelected").transition().duration(750).attr("width",v.getWidth()).attr("height",v.getHeight()).attr("transform","translate(-"+v.getWidth()/2+",-"+v.getHeight()/2+")")}});metExploreD3.GraphNode.node.filter(function(a){return a.isDuplicated()}).on("mouseenter",function(g){var c=d3.select(this).attr("transform");var a=c.substring(c.indexOf("scale"),c.length);var b=a.substring(6,a.indexOf(")"));if(isNaN(b)){b=1}var d=d3.select("#"+F).select("#D3viz").select("#graphComponent").selectAll("g.node");d3.select(this).attr("transform","translate("+g.x+", "+g.y+") scale("+b*2+")");var f=d3.select("#"+F).select("#D3viz").select("#graphComponent").selectAll("path.link");if(g.getBiologicalType()=="reaction"){f.filter(function(j){return g.getId()==j.getSource().getId()}).style("stroke","green").style("stroke-width","1.5");f.filter(function(j){return g.getId()==j.getTarget().getId()}).style("stroke","red").style("stroke-width","1.5")}else{f.filter(function(j){return g.getId()==j.getSource().getId()}).style("stroke","red").style("stroke-width","1.5");f.filter(function(j){return g.getId()==j.getTarget().getId()}).style("stroke","green").style("stroke-width","1.5")}}).on("mouseover",function(a){var f=d3.select("#"+F).select("#D3viz").select("#graphComponent").selectAll("g.node");d3.select(this).each(function(g){var j=f[0][f.size()-1];this.parentNode.insertBefore(this,j)});a.fixed=true;metExploreD3.GraphNode.node.filter(function(g){return g==a}).select(".locker").classed("hide",false).select(".iconlocker").attr("xlink:href",function(g){if(g.isLocked()){return"resources/icons/lock_font_awesome.svg"}else{return"resources/icons/unlock_font_awesome.svg"}});if(a.getBiologicalType()=="reaction"){d3.select("#"+F).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(g){return a.getId()==g.getSource().getId()}).style("stroke","green");d3.select("#"+F).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(g){return a.getId()==g.getTarget().getId()}).style("stroke","red")}else{d3.select("#"+F).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(g){return a.getId()==g.getSource().getId()}).style("stroke","red");d3.select("#"+F).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(g){return a.getId()==g.getTarget().getId()}).style("stroke","green")}var b=C.getXScale();var c=C.getYScale();if(!document.getElementById("tooltip2").classList.contains("fixed")){var d="<b>Name:</b> "+a.getName()+"<br/><b>Biological type:</b> "+a.getBiologicalType()+((a.getCompartment()!=undefined)?"<br/><b>Compartment:</b> "+a.getCompartment():"")+((a.getDbIdentifier()!=undefined)?"<br/><b>Database identifier:</b> "+a.getDbIdentifier():"")+((a.getEC()!=undefined)?"<br/><b>EC number:</b> "+a.getEC():"")+((a.getReactionReversibility()!=undefined)?"<br/><b>Reaction reversibility:</b> "+a.getReactionReversibility():"")+((a.getIsSideCompound()!=undefined)?"<br/><b>SideCompound:</b> "+a.getIsSideCompound():"")+((a.getMappingDatasLength()!=0)?((a.getMappingDatasLength()==1)?"<br/><b>Mapping:</b><br/><table style='width:100%; margin-left: 30px; padding-right: 30px;'>":"<br/><b>Mappings:</b><br/><table style='width:100%; margin-left: 30px; padding-right: 30px;'>"):"");a.getMappingDatas().forEach(function(g){d+="<tr><td>"+g.getMappingName()+"</td><td>"+g.getConditionName()+"</td><td>"+g.getMapValue()+"</td></tr>"});d+="</table>";if(a.getSvg()!=undefined&&a.getSvg()!="undefined"&&a.getSvg()!=""){d+='<br/><img src="resources/images/structure_metabolite/'+a.getSvg()+'"/>'}document.getElementById("tooltip2").innerHTML=d;document.getElementById("tooltip2").classList.remove("hide")}}).on("mouseleave",function(g){var d=d3.select(this).attr("transform");var a=d.substring(d.indexOf("scale"),d.length);var b=a.substring(6,a.indexOf(")"));if(isNaN(b)){b=1}metExploreD3.GraphNode.node.filter(function(j){return j==g}).select(".locker").classed("hide",true);var f=d3.select("#"+F).select("#D3viz").select("#graphComponent").selectAll("g.node");d3.select(this).attr("transform","translate("+g.x+", "+g.y+") scale("+b/2+")");if(!g.isLocked()){g.fixed=false}var c=metExploreD3.getLinkStyle();document.getElementById("tooltip2").classList.add("hide");d3.select("#"+F).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(j){return g.getId()==j.getSource().getId()||g.getId()==j.getTarget().getId()}).style("stroke",c.getStrokeColor()).style("stroke-width","0.5");if(g.getBiologicalType()=="reaction"){d3.select(this).selectAll("rect").selectAll(".reaction, .fontSelected").transition().duration(750).attr("width",A.getWidth()).attr("height",A.getHeight()).attr("transform","translate(-"+A.getWidth()/2+",-"+A.getHeight()/2+")")}else{d3.select(this).selectAll("rect").selectAll(".reaction, .fontSelected").transition().duration(750).attr("width",v.getWidth()).attr("height",v.getHeight()).attr("transform","translate(-"+v.getWidth()/2+",-"+v.getHeight()/2+")")}});metExploreD3.GraphNode.node.filter(function(a){return a.getBiologicalType()=="metabolite"}).filter(function(a){return !a.isDuplicated()}).addNodeForm(v.getWidth(),v.getHeight(),v.getRX(),v.getRY(),v.getStrokeColor(),v.getStrokeWidth());metExploreD3.GraphNode.node.filter(function(a){return a.getBiologicalType()=="metabolite"}).filter(function(a){return a.isDuplicated()}).style("stroke-opacity",0.5).addNodeForm(v.getWidth()/2,v.getHeight()/2,v.getRX()/2,v.getRY()/2,v.getStrokeColor(),v.getStrokeWidth()/2);metExploreD3.GraphNode.node.filter(function(a){return a.getBiologicalType()=="reaction"}).addNodeForm(A.getWidth(),A.getHeight(),A.getRX(),A.getRY(),A.getStrokeColor(),A.getStrokeWidth());if(B.getNodes().length<t.getReactionThreshold()||!t.isDisplayedLabelsForOpt()){var E=Math.min(v.getWidth(),v.getHeight());metExploreD3.GraphNode.node.filter(function(a){return a.getLabelVisible()==true}).filter(function(a){return a.getBiologicalType()=="metabolite"}).filter(function(a){return a.getSvg()=="undefined"||a.getSvg()==undefined||a.getSvg()==""}).append("svg:text").attr("fill","black").attr("class",function(a){return a.getBiologicalType()}).each(function(g){var c=d3.select(this);var f=v.getDisplayLabel(g,v.getLabel());f=f.split(" ");c.text("");for(var d=0;d<f.length;d++){var b=$("<div/>").html(f[d]).text();var a=c.append("tspan").text(b);if(d>0){a.attr("x",0).attr("dy","5")}}}).style("font-size",v.getFontSize()).style("paint-order","stroke").style("stroke-width",1).style("stroke","white").style("stroke-opacity","0.7").attr("dy",".4em").style("font-weight","bold").style("pointer-events","none").attr("y",E/2+3);metExploreD3.GraphNode.node.filter(function(a){return a.getLabelVisible()==true}).filter(function(a){return a.getBiologicalType()=="metabolite"}).filter(function(a){return a.getSvg()!="undefined"&&a.getSvg()!=undefined&&a.getSvg()!=""}).append("svg:text").attr("fill","black").attr("class",function(a){return a.getBiologicalType()}).each(function(g){var c=d3.select(this);var f=v.getDisplayLabel(g,v.getLabel());f=f.split(" ");c.text("");for(var d=0;d<f.length;d++){var b=$("<div/>").html(f[d]).text();var a=c.append("tspan").text(b);if(d>0){a.attr("x",0).attr("dy","7")}}}).style("font-size",v.getFontSize()).style("paint-order","stroke").style("stroke-width",1).style("stroke","white").style("stroke-opacity","0.7").attr("dy",".4em").style("font-weight","bold").style("pointer-events","none").attr("y",E/2+3);metExploreD3.GraphNode.node.filter(function(a){return(a.getBiologicalType()=="metabolite"&&a.getSvg()!="undefined"&&a.getSvg()!=undefined&&a.getSvg()!="")}).append("svg").attr("viewBox",function(a){return"0 0 "+E+" "+E}).attr("width",E*8/10+"px").attr("height",E*8/10+"px").attr("x",(-E/2)+(E*1/10)).attr("preserveAspectRatio","xMinYMin").attr("y",(-E/2)+(E*1/10)).attr("class","structure_metabolite").append("image").attr("xlink:href",function(a){return"resources/images/structure_metabolite/"+a.getSvg()}).attr("width","100%").attr("height","100%");var z=metExploreD3.GraphNode.node.insert("svg",":first-child").attr("viewBox",function(a){+" "+E}).attr("width",function(a){if(a.getBiologicalType()=="metabolite"){return v.getWidth()}if(a.getBiologicalType()=="reaction"){return A.getWidth()}}).attr("height",function(a){if(a.getBiologicalType()=="metabolite"){return v.getHeight()}if(a.getBiologicalType()=="reaction"){return A.getHeight()}}).attr("preserveAspectRatio","xMinYMin").attr("y",function(a){if(a.getBiologicalType()=="metabolite"){return -v.getHeight()}if(a.getBiologicalType()=="reaction"){return -A.getHeight()}}).attr("x",function(a){if(a.getBiologicalType()=="metabolite"){return -v.getWidth()}if(a.getBiologicalType()=="reaction"){return -A.getWidth()}}).attr("class","locker").classed("hide",true);z.append("svg:path").attr("class","backgroundlocker").attr("d",function(a){if(a.getBiologicalType()=="metabolite"){var b="M"+v.getWidth()+","+v.getHeight()+" L0,"+v.getHeight()+" L0,"+v.getRY()*2+" A"+v.getRX()*2+","+v.getRY()*2+",0 0 1 "+v.getRX()*2+",0 L"+v.getWidth()+",0";return b}if(a.getBiologicalType()=="reaction"){var b="M"+A.getWidth()+","+A.getHeight()+" L0,"+A.getHeight()+" L0,"+A.getRY()*2+" A"+A.getRX()*2+","+A.getRY()*2+",0 0 1 "+A.getRX()*2+",0 L"+A.getWidth()+",0";return b}}).attr("opacity","0.20").attr("fill","black");z.append("image").attr("class","iconlocker").attr("y",function(a){if(a.getBiologicalType()=="metabolite"){return v.getHeight()/4-(v.getHeight()-v.getRY()*2)/8}if(a.getBiologicalType()=="reaction"){return A.getHeight()/4-(A.getHeight()-A.getRY()*2)/8}}).attr("x",function(a){if(a.getBiologicalType()=="metabolite"){return v.getWidth()/4-(v.getWidth()-v.getRX()*2)/8}if(a.getBiologicalType()=="reaction"){return A.getWidth()/4-(A.getWidth()-A.getRX()*2)/8}}).attr("width","40%").attr("height","40%");metExploreD3.GraphNode.node.filter(function(a){return a.getLabelVisible()==true}).filter(function(a){return a.getBiologicalType()=="reaction"}).append("svg:text").attr("fill","black").attr("class",function(a){return a.getBiologicalType()}).text(function(a){var b=$("<div/>").html(A.getDisplayLabel(a,A.getLabel())).text();if(b==""){var b=$("<div/>").html(A.getDisplayLabel(a,A.getLabel())).text()}return b}).style("font-size",function(a){if(A.getDisplayLabel(a,A.getLabel())=="NA"){return 6}return Math.min(A.getWidth(),(A.getWidth()-A.getWidth()/10)/this.getComputedTextLength()*10)+"px"}).style("font-weight","bold").attr("dy",".3em")}metExploreD3.GraphNode.node.filter(function(a){return a.isSelected()}).each(function(a){_MyThisGraphNode.fixNodeOnRefresh(a,"viz")});metExploreD3.GraphNode.node.filter(function(a){return a.isLocked()}).each(function(a){a.fixed=true});metExploreD3.GraphNode.node.filter(function(a){return a.getMappingDatasLength()>0&&u.getActiveMapping()!=""}).filter(function(a){var b=a.getMappingDataByNameAndCond(u.getActiveMapping(),u.isMapped());return(b!=null&&u.getColorMappingById(b.getMapValue())!=null)}).attr("mapped",function(j){var f=j.getMappingDataByNameAndCond(u.getActiveMapping(),u.isMapped());if(u.getMappingDataType()=="Continuous"){if(u.getColorMappingsSet()[0]<u.getColorMappingsSet()[1]){maxValue=u.getColorMappingsSet()[1];minValue=u.getColorMappingsSet()[0]}else{maxValue=u.getColorMappingsSet()[0];minValue=u.getColorMappingsSet()[1]}var c=_metExploreViz.getGeneralStyle();var g=c.getColorMinMappingContinuous();var a=c.getColorMaxMappingContinuous();var b=d3.scale.linear().domain([parseFloat(minValue),parseFloat(maxValue)]).range([g,a]);return b(parseFloat(f.getMapValue()))}var d=u.getColorMappingById(f.getMapValue()).getValue();return d}).style("fill",function(j){var f=j.getMappingDataByNameAndCond(u.getActiveMapping(),u.isMapped());d3.select(this).insert("rect",":first-child").attr("class","stroke").attr("width",parseInt(d3.select(this).select("."+j.getBiologicalType()).attr("width"))+10).attr("height",parseInt(d3.select(this).select("."+j.getBiologicalType()).attr("height"))+10).attr("rx",parseInt(d3.select(this).select("."+j.getBiologicalType()).attr("rx"))+5).attr("ry",parseInt(d3.select(this).select("."+j.getBiologicalType()).attr("ry"))+5).attr("transform","translate(-"+parseInt(parseInt(d3.select(this).select("."+j.getBiologicalType()).attr("width"))+10)/2+",-"+parseInt(parseInt(d3.select(this).select("."+j.getBiologicalType()).attr("height"))+10)/2+")").style("opacity","0.5").style("fill","red");if(u.getMappingDataType()=="Continuous"){if(parseFloat(u.getColorMappingsSet()[0].getName())<parseFloat(u.getColorMappingsSet()[1].getName())){maxValue=parseFloat(u.getColorMappingsSet()[1].getName());minValue=parseFloat(u.getColorMappingsSet()[0].getName())}else{maxValue=parseFloat(u.getColorMappingsSet()[0].getName());minValue=parseFloat(u.getColorMappingsSet()[1].getName())}var c=_metExploreViz.getGeneralStyle();var g=c.getColorMinMappingContinuous();var a=c.getColorMaxMappingContinuous();var b=d3.scale.linear().domain([parseFloat(minValue),parseFloat(maxValue)]).range([g,a]);return b(parseFloat(f.getMapValue()))}var d=u.getColorMappingById(f.getMapValue()).getValue();return d})},tick:function(h){d3.select("#"+h).select("#D3viz").select("#graphComponent").selectAll("g.node").attr("cx",function(a){return a.x}).attr("cy",function(a){return a.y}).attr("transform",function(a){var b=1;if(d3.select(this)!=null){var c=d3.select(this).attr("transform");if(d3.select(this).attr("transform")!=null){var d=c.indexOf("scale(");if(d!=-1){b=parseInt(c.substring(d+6,c.length-1))}}}return"translate("+a.x+","+a.y+") scale("+b+")"});if(h=="viz"){var j=_metExploreViz.getSessionsSet();var o=_metExploreViz.getSessionById(h);if(o.isLinked()){for(var g in j){if(j[g].isLinked()&&h!=j[g].getId()&&d3.select("#"+j[g].getId()).select("#D3viz").select("#graphComponent")[0][0]!=null){d3.select("#"+j[g].getId()).select("#D3viz").select("#graphComponent").selectAll("g.node").each(function(a){d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").each(function(b){if(b.getId()==a.getId()){a.x=b.x;a.y=b.y}})});var m=metExploreD3.getScaleById(j[g].getId());metExploreD3.GraphLink.tick(j[g].getId(),m);_MyThisGraphNode.tick(j[g].getId())}}}}},selectNodeData:function(b){return d3.select(b).datum()},selectNodeFromGrid:function(b){d3.select("#viz").select("#D3viz").selectAll("g.node").filter(function(a){return a.getDbIdentifier()==b||a.getId()==b}).each(function(a){if(!a.isSelected()){_MyThisGraphNode.selection(a,"viz")}})},colorStoreByCompartment:function(c){for(var d=0;d<metExploreD3.getCompartmentInBiosourceLength();d++){c.filter(function(a){return(a.getBiologicalType()=="metabolite"&&a.getCompartment()==metExploreD3.getCompartmentInBiosourceSet()[d].getIdentifier())}).selectAll("rect").style("stroke",metExploreD3.getCompartmentInBiosourceSet()[d].getColor())}},unselectIfDBClick:function(){var j=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(d3.event.target==d3.select("#D3viz")[0][0]){document.getElementById("tooltip2").classList.remove("fixed")}if(_MyThisGraphNode.dblClickable&&d3.event.button==0){_MyThisGraphNode.activePanel=this.parentNode.id;d3.select(this).select("#graphComponent").selectAll("g.node").filter(function(a){return a.isSelected()}).each(function(a){_MyThisGraphNode.selection(a,_MyThisGraphNode.activePanel)});j.removeAllSelectedNodes()}else{if(d3.event.button==0){_MyThisGraphNode.dblClickable=true;_MyThisGraphNode.taskClick=metExploreD3.createDelayedTask(function(){_MyThisGraphNode.dblClickable=false});metExploreD3.fixDelay(_MyThisGraphNode.taskClick,400)}else{}}if(_MyThisGraphNode.dblClickable&&d3.event.button==1){_MyThisGraphNode.activePanel=this.parentNode.id;d3.select(this).select("#graphComponent").selectAll("g.node").filter(function(a){return a.isLocked()}).each(function(a){a.fixed=false})}else{if(d3.event.button==1){_MyThisGraphNode.dblClickable=true;_MyThisGraphNode.taskClick=metExploreD3.createDelayedTask(function(){_MyThisGraphNode.dblClickable=false});metExploreD3.fixDelay(_MyThisGraphNode.taskClick,400)}else{}}if(j!=undefined){if(j.isLinked()){var h=_metExploreViz.getSessionById("viz");if(h!=undefined){var g=metExploreD3.GraphNetwork.isAnimated(h.getId());if(g=="true"){var f=h.getForce();if(f!=undefined){if(metExploreD3.GraphNetwork.isAnimated(h.getId())=="true"||metExploreD3.GraphNetwork.isAnimated(h.getId())==null){f.start()}}}}}else{var f=j.getForce();var g=metExploreD3.GraphNetwork.isAnimated(j.getId());if(g=="true"){var f=j.getForce();if(f!=undefined){if((metExploreD3.GraphNetwork.isAnimated(j.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(j.getId())==null)){f.start()}}}}}},loadNode:function(F){var A=metExploreD3.getReactionStyle();var v=metExploreD3.getMetaboliteStyle();var t=metExploreD3.getGeneralStyle();var u=_metExploreViz.getSessionById(F);var w=_metExploreViz.getSessionById("viz");d3.select("body").on("keydown",function(){_MyThisGraphNode.charKey=d3.event.keyCode;_MyThisGraphNode.ctrlKey=d3.event.ctrlKey;if(_MyThisGraphNode.charKey==65&&_MyThisGraphNode.ctrlKey){d3.select("#"+F).select("#D3viz").select("#graphComponent").selectAll("g.node").each(function(a){if(!a.isSelected()){_MyThisGraphNode.selection(a,F)}})}}).on("keyup",function(a){if(_MyThisGraphNode.charKey==46&&u.getSelectedNodes().length>0){metExploreD3.displayMessageYesNo("Selected nodes","Do you want remove selected nodes?",function(b){if(b=="yes"){metExploreD3.GraphNetwork.removeSelectedNode("viz")}})}_MyThisGraphNode.charKey="none";_MyThisGraphNode.ctrlKey=d3.event.ctrlKey});metExploreD3.GraphNode.panelParent=F;_MyThisGraphNode=metExploreD3.GraphNode;var B=u.getD3Data();var y=parseInt(d3.select("#"+_MyThisGraphNode.panelParent).select("#D3viz").style("height"));var h=parseInt(d3.select("#"+_MyThisGraphNode.panelParent).select("#D3viz").style("width"));d3.selectAll("#D3viz").on("mouseup",this.unselectIfDBClick);var C=metExploreD3.getScaleById(F);var D=d3.behavior.drag().on("dragstart",_MyThisGraphNode.dragstart).on("drag",_MyThisGraphNode.dragmove).on("dragend",_MyThisGraphNode.dragend);metExploreD3.GraphNode.node=d3.select("#"+metExploreD3.GraphNode.panelParent).select("#D3viz").select("#graphComponent").selectAll("g.node").data(B.getNodes()).enter().append("svg:g").attr("class","node").attr("id",function(a){return"node"+a.getId()}).call(D).style("fill",function(a){if(a.isSelected()==false){return"white"}else{return"grey"}}).on("mouseenter",function(g){var c=d3.select(this).attr("transform");var a=c.substring(c.indexOf("scale"),c.length);var b=a.substring(6,a.indexOf(")"));if(isNaN(b)){b=1}var d=d3.select("#"+F).select("#D3viz").select("#graphComponent").selectAll("g.node");d3.select(this).attr("transform","translate("+g.x+", "+g.y+") scale("+b/2+")");var f=d3.select("#"+F).select("#D3viz").select("#graphComponent").selectAll("path.link");if(g.getBiologicalType()=="reaction"){f.filter(function(j){return g.getId()==j.getSource().getId()}).style("stroke","green").style("stroke-width","1.5");f.filter(function(j){return g.getId()==j.getTarget().getId()}).style("stroke","red").style("stroke-width","1.5")}else{f.filter(function(j){return g.getId()==j.getSource().getId()}).style("stroke","red").style("stroke-width","1.5");f.filter(function(j){return g.getId()==j.getTarget().getId()}).style("stroke","green").style("stroke-width","1.5")}}).on("mouseover",function(a){var f=d3.select("#"+F).select("#D3viz").select("#graphComponent").selectAll("g.node");d3.select(this).each(function(g){var j=f[0][f.size()-1];this.parentNode.insertBefore(this,j)});a.fixed=true;metExploreD3.GraphNode.node.filter(function(g){return g==a}).select(".locker").classed("hide",false).select(".iconlocker").attr("xlink:href",function(g){if(g.isLocked()){return"resources/icons/lock_font_awesome.svg"}else{return"resources/icons/unlock_font_awesome.svg"}});var b=C.getXScale();var c=C.getYScale();if(!document.getElementById("tooltip2").classList.contains("fixed")){var d="<b>Name:</b> "+a.getName()+"<br/><b>Biological type:</b> "+a.getBiologicalType()+((a.getCompartment()!=undefined)?"<br/><b>Compartment:</b> "+a.getCompartment():"")+((a.getDbIdentifier()!=undefined)?"<br/><b>Database identifier:</b> "+a.getDbIdentifier():"")+((a.getEC()!=undefined)?"<br/><b>EC number:</b> "+a.getEC():"")+((a.getReactionReversibility()!=undefined)?"<br/><b>Reaction reversibility:</b> "+a.getReactionReversibility():"")+((a.getIsSideCompound()!=undefined)?"<br/><b>SideCompound:</b> "+a.getIsSideCompound():"")+((a.getMappingDatasLength()!=0)?((a.getMappingDatasLength()==1)?"<br/><b>Mapping:</b><br/><table style='width:100%; margin-left: 30px; padding-right: 30px;'>":"<br/><b>Mappings:</b><br/><table style='width:100%; margin-left: 30px; padding-right: 30px;'>"):"");a.getMappingDatas().forEach(function(g){d+="<tr><td>"+g.getMappingName()+"</td><td>"+g.getConditionName()+"</td><td>"+g.getMapValue()+"</td></tr>"});d+="</table>";if(a.getSvg()!=undefined&&a.getSvg()!="undefined"&&a.getSvg()!=""){d+='<br/><img src="resources/images/structure_metabolite/'+a.getSvg()+'"/>'}document.getElementById("tooltip2").innerHTML=d;document.getElementById("tooltip2").classList.remove("hide")}}).on("mouseleave",function(g){var d=d3.select(this).attr("transform");var a=d.substring(d.indexOf("scale"),d.length);var b=a.substring(6,a.indexOf(")"));if(isNaN(b)){b=1}metExploreD3.GraphNode.node.filter(function(j){return j==g}).select(".locker").classed("hide",true);var f=d3.select("#"+F).select("#D3viz").select("#graphComponent").selectAll("g.node");d3.select(this).attr("transform","translate("+g.x+", "+g.y+") scale("+b/2+")");if(!g.isLocked()){g.fixed=false}var c=metExploreD3.getLinkStyle();document.getElementById("tooltip2").classList.add("hide");d3.select("#"+F).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(j){return g.getId()==j.getSource().getId()||g.getId()==j.getTarget().getId()}).style("stroke",c.getStrokeColor()).style("stroke-width","0.5");if(g.getBiologicalType()=="reaction"){d3.select(this).selectAll("rect").selectAll(".reaction, .fontSelected").transition().duration(750).attr("width",A.getWidth()).attr("height",A.getHeight()).attr("transform","translate(-"+A.getWidth()/2+",-"+A.getHeight()/2+")")}else{d3.select(this).selectAll("rect").selectAll(".reaction, .fontSelected").transition().duration(750).attr("width",v.getWidth()).attr("height",v.getHeight()).attr("transform","translate(-"+v.getWidth()/2+",-"+v.getHeight()/2+")")}}).filter(function(a){return a.getMappingDatasLength()>0&&u.getActiveMapping()!=""}).attr("mapped",function(a){var b=a.getMappingDataByNameAndCond(u.getActiveMapping(),u.isMapped());return u.getColorMappingById(b.getMapValue())}).style("fill",function(a){var b=a.getMappingDataByNameAndCond(u.getActiveMapping(),u.isMapped());return u.getColorMappingById(b.getMapValue())});metExploreD3.GraphNode.node.filter(function(a){return a.getBiologicalType()=="metabolite"}).append("rect").attr("class",function(a){return a.getBiologicalType()}).attr("id",function(a){return a.getId()}).attr("identifier",function(a){return a.getId()}).attr("width",v.getWidth()).attr("height",v.getHeight()).attr("rx",v.getRX()).attr("ry",v.getRY()).attr("transform","translate(-"+v.getWidth()/2+",-"+v.getHeight()/2+")").style("stroke",v.getStrokeColor()).style("stroke-width",v.getStrokeWidth());metExploreD3.GraphNode.node.filter(function(a){return a.getBiologicalType()=="metabolite"}).append("rect").attr("class","fontSelected").attr("width",v.getWidth()).attr("height",v.getHeight()).attr("rx",v.getRX()).attr("ry",v.getRY()).attr("transform","translate(-"+v.getWidth()/2+",-"+v.getHeight()/2+")").style("fill-opacity","0").style("fill","#000");metExploreD3.GraphNode.node.filter(function(a){return a.getBiologicalType()=="reaction"}).append("rect").attr("class",function(a){return a.getBiologicalType()}).attr("id",function(a){return a.getId()}).attr("width",A.getWidth()).attr("height",A.getHeight()).attr("rx",A.getRX()).attr("ry",A.getRY()).attr("transform","translate(-"+A.getWidth()/2+",-"+A.getHeight()/2+")").style("stroke",A.getStrokeColor()).style("stroke-width",A.getStrokeWidth());metExploreD3.GraphNode.node.filter(function(a){return a.getBiologicalType()=="reaction"}).append("rect").attr("class","fontSelected").attr("width",A.getWidth()).attr("height",A.getHeight()).attr("rx",A.getRX()).attr("ry",A.getRY()).attr("transform","translate(-"+A.getWidth()/2+",-"+A.getHeight()/2+")").style("fill-opacity","0").style("fill","#000");metExploreD3.sortCompartmentInBiosource();for(var z=0;z<metExploreD3.getCompartmentInBiosourceLength();z++){metExploreD3.GraphNode.node.filter(function(a){return(a.getBiologicalType()=="metabolite"&&a.getCompartment()==metExploreD3.getCompartmentInBiosourceSet()[z].getIdentifier())}).selectAll("rect").style("stroke",metExploreD3.getCompartmentInBiosourceSet()[z].getColor())}if(B.getNodes().length<t.getReactionThreshold()||!t.isDisplayedLabelsForOpt()){var E=Math.min(v.getWidth(),v.getHeight());metExploreD3.GraphNode.node.filter(function(a){return a.getLabelVisible()==true}).filter(function(a){return a.getBiologicalType()=="metabolite"}).filter(function(a){return a.getSvg()=="undefined"||a.getSvg()==undefined||a.getSvg()==""}).append("svg:text").attr("fill","black").attr("class",function(a){return a.getBiologicalType()}).each(function(g){var c=d3.select(this);var f=v.getDisplayLabel(g,v.getLabel());f=f.split(" ");c.text("");for(var d=0;d<f.length;d++){var b=$("<div/>").html(f[d]).text();var a=c.append("tspan").text(b);if(d>0){a.attr("x",0).attr("dy","5")}}}).style("font-size",v.getFontSize()).style("paint-order","stroke").style("stroke-width",1).style("stroke","white").style("stroke-opacity","0.7").attr("dy",".4em").style("font-weight","bold").style("pointer-events","none").attr("y",E/2+3);metExploreD3.GraphNode.node.filter(function(a){return a.getLabelVisible()==true}).filter(function(a){return a.getBiologicalType()=="metabolite"}).filter(function(a){return a.getSvg()!="undefined"&&a.getSvg()!=undefined&&a.getSvg()!=""}).append("svg:text").attr("fill","black").attr("class",function(a){return a.getBiologicalType()}).each(function(g){var c=d3.select(this);var f=v.getDisplayLabel(g,v.getLabel());f=f.split(" ");c.text("");for(var d=0;d<f.length;d++){var b=$("<div/>").html(f[d]).text();var a=c.append("tspan").text(b);if(d>0){a.attr("x",0).attr("dy","7")}}}).style("font-size",v.getFontSize()).style("paint-order","stroke").style("stroke-width",1).style("stroke","white").style("stroke-opacity","0.7").attr("dy",".4em").style("font-weight","bold").style("pointer-events","none").attr("y",E/2+3);metExploreD3.GraphNode.node.filter(function(a){return(a.getBiologicalType()=="metabolite"&&a.getSvg()!="undefined"&&a.getSvg()!=undefined&&a.getSvg()!="")}).append("svg").attr("viewBox",function(a){return"0 0 "+E+" "+E}).attr("width",E*8/10+"px").attr("height",E*8/10+"px").attr("x",(-E/2)+(E*1/10)).attr("preserveAspectRatio","xMinYMin").attr("y",(-E/2)+(E*1/10)).attr("class","structure_metabolite").append("image").attr("xlink:href",function(a){return"resources/images/structure_metabolite/"+a.getSvg()}).attr("width","100%").attr("height","100%");metExploreD3.GraphNode.node.filter(function(a){return a.getLabelVisible()==true}).filter(function(a){return a.getBiologicalType()=="reaction"}).append("svg:text").attr("fill","black").attr("class",function(a){return a.getBiologicalType()}).text(function(a){var b=$("<div/>").html(A.getDisplayLabel(a,A.getLabel())).text();if(b==""){var b=$("<div/>").html(A.getDisplayLabel(a,A.getLabel())).text()}return b}).style("font-size",function(a){if(A.getDisplayLabel(a,A.getLabel())=="NA"){return 6}return Math.min(A.getWidth(),(A.getWidth()-A.getWidth()/10)/this.getComputedTextLength()*10)+"px"}).style("font-weight","bold").attr("dy",".3em")}metExploreD3.GraphNode.loadPath(metExploreD3.GraphNode.panelParent)},loadSideCompounds:function(d,f){var g=[];d.forEach(function(a){var b=_metExploreViz.getSessionById("viz").getD3Data().getNodeByDbIdentifier(a);if(b!=null){if(metExploreD3.getMetabolitesSet()!=undefined){var c=metExploreD3.getMetaboliteById(metExploreD3.getMetabolitesSet(),b.getId());if(c!=null){c.set("sideCompound",true)}}b.setIsSideCompound(true);g.push(b)}});if(f!=undefined){f()}return g.length>0},setIsSideCompoundById:function(p,r){var s=_metExploreViz.getSessionById("viz").getD3Data();var o=s.getNodes();if(o!=undefined){var t=s.getNodeById(p);if(t!=undefined){t.setIsSideCompound(r)}var q=_metExploreViz.getSessionsSet();for(var m in q){if(q[m].getId()!="viz"){var u=q[m].getD3Data().getNodeById(p);u.setIsSideCompound(r);if(u!=undefined){u.setIsSideCompound(r)}}}}},setIsReversibleById:function(u,q){var r=_metExploreViz.getSessionById("viz").getD3Data();var o=r.getNodes();if(o!=undefined){var s=r.getNodeById(u);if(s!=undefined){s.setReactionReversibility(q)}var p=_metExploreViz.getSessionsSet();for(var m in p){if(p[m].getId()!="viz"){var t=p[m].getD3Data().getNodeById(u);t.setReactionReversibility(q);if(t!=undefined){t.setReactionReversibility(q)}}}}},loadPath:function(m,o){var j=_metExploreViz.getSessionById(m);if(o=="Compartments"){var g=d3.select("#"+m).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(a){return a.getBiologicalType()=="metabolite"});j.groups=metExploreD3.getCompartmentsGroup();metExploreD3.GraphNetwork.initCentroids()}else{j.groups=metExploreD3.getPathwaysGroup();metExploreD3.GraphNetwork.initCentroids()}metExploreD3.GraphNode.groupPath=function(f){var q=metExploreD3.getScaleById("viz");if(f.values!=undefined){if(f.values.length>0){if(f.values.length>2){return"M"+d3.geom.hull(f.values.map(function(p){return[p.x,p.y]})).join("L")+"Z"}else{var a=[];f.values.forEach(function(p){a.push([p.x,p.y])});var c,d;for(var b=f.values.length;b<3;b++){c=f.values[0].x*(1+0.00001*b);d=f.values[0].y*(1+0.000011*b);a.push([c,d])}return"M"+d3.geom.hull(a).join("L")+"Z"}}}};metExploreD3.GraphNode.groupFill=function(c,u){var a;if(o=="Compartments"){for(var v=0;v<metExploreD3.getCompartmentInBiosourceLength();v++){if(c.key==metExploreD3.getCompartmentInBiosourceSet()[v].getName()){a=metExploreD3.getCompartmentInBiosourceSet()[v].getColor()}}return a}else{var b=metExploreD3.getPathwaysLength();if(b==undefined){b=0}center=128;width=127;frequency=Math.PI*2*0.95/b;var f=Math.sin(frequency*u+2+b)*width+center;var t=Math.sin(frequency*u+0+b)*width+center;var d=Math.sin(frequency*u+4+b)*width+center;var a=metExploreD3.GraphUtils.RGB2Color(f,t,d);c.color=a;return a}};var h="M0,0L10,10Z";d3.select("#"+m).select("#D3viz").selectAll("path.convexhull").data(j.groups).enter().insert("path",":first-child").attr("class",String).attr("d",function(a){return h}).attr("class",function(a){return a.key}).classed("convexhull",true).attr("id",function(a){return a.key}).style("fill",metExploreD3.GraphNode.groupFill).style("stroke",metExploreD3.GraphNode.groupFill).style("stroke-width",40).style("stroke-linejoin","round").style("opacity",0.15)},fixSelectedNode:function(){metExploreD3.GraphNode.node.filter(function(b){return b.isSelected()}).each(function(b){b.setLocked(true);b.fixed=b.isLocked()})}};metExploreD3.GraphCaption={refreshStyleOfReaction:function(){var f=metExploreD3.getReactionStyle();var d=Math.max(f.getWidth(),f.getHeight());var g=15/d;d3.select("#viz").select("#D3viz").select(".reactionCaption").attr("x",15/2-f.getWidth()*g/2).attr("y",15+15/2-f.getHeight()*g/2).attr("width",f.getWidth()*g).attr("height",f.getHeight()*g).attr("rx",f.getRX()*g).attr("ry",f.getRY()*g).attr("fill","white").attr("transform","translate(15,95)").style("stroke",f.getStrokeColor()).style("stroke-width",2)},refreshStyleOfMetabolite:function(){var d=metExploreD3.getMetaboliteStyle();var g=Math.max(d.getWidth(),d.getHeight());var f=15/g;d3.select("#viz").select("#D3viz").select(".metaboliteCaption").attr("x",15/2-d.getWidth()*f/2).attr("y",15+15/2-d.getHeight()*f/2).attr("width",d.getWidth()*f).attr("height",d.getHeight()*f).attr("rx",d.getRX()*f).attr("ry",d.getRY()*f).attr("fill","white").style("stroke","black").style("stroke-width",2).attr("transform","translate(15,130)")},drawCaption:function(){d3.select("#viz").select("#D3viz").select("#captionComparment").remove();d3.select("#viz").select("#D3viz").select("#captionPathway").remove();d3.select("#viz").select("#D3viz").select(".logoViz").remove();var T=metExploreD3.getReactionStyle();var d=Math.max(T.getWidth(),T.getHeight());var Y=15/d;var O=metExploreD3.getMetaboliteStyle();var ab=Math.max(O.getWidth(),O.getHeight());var ac=15/ab;var U=15/2-T.getWidth()*Y/2;var W=15;var N=20+15/2-T.getWidth()*Y/2;var R=15;var Q=metExploreD3.getLinkStyle();var V=Math.sqrt(Math.pow(N-U,2)+Math.pow(R-W,2));var ak=(N-U);var al=(R-W);var P=ak/Math.abs(ak);var S=al/Math.abs(al);var ae=(Math.abs(V)*10/2)/Math.abs(ak);var am=(Math.abs(V)*10/2)/Math.abs(al);var aa=(ae<am)?rT=ae:rt=am;var ai=5;var M=U+ak*((V-aa)/V);var an=W+al*((V-aa)/V);var ai=5;var ag=U+ak*((V-aa-ai)/V);var ad=W+al*((V-aa-ai)/V);var aj=U+ak*((V-aa-ai-ai)/V);var af=W+al*((V-aa-ai-ai)/V);var X=ag+al*(3/V);var ao=ad-ak*(3/V);var Z=ag-al*(3/V);var ap=ad+ak*(3/V);var ah="M"+U+","+W+"L"+aj+","+af+"L"+X+","+ao+"L"+Z+","+ap+"L"+M+","+an+"L"+X+","+ao+"L"+Z+","+ap+"L"+aj+","+af+"Z";d3.select("#viz").select("#D3viz").append("svg:path").attr("class",String).attr("d",ah).attr("class","linkCaptionRev").attr("fill-rule","evenodd").attr("fill","white").style("stroke",Q.getStrokeColor()).style("stroke-width",1.5).style("stroke-linejoin","bevel").attr("transform","translate(15,65)");d3.select("#viz").select("#D3viz").append("svg:text").text("Reversible link").attr("x",20).attr("y",15).attr("transform","translate(30,70)");Q=metExploreD3.getLinkStyle();var V=Math.sqrt(Math.pow(N-U,2)+Math.pow(R-W,2));var ak=(N-U);var al=(R-W);var P=ak/Math.abs(ak);var S=al/Math.abs(al);var ae=(Math.abs(V)*10/2)/Math.abs(ak);var am=(Math.abs(V)*10/2)/Math.abs(al);var aa=(ae<am)?rT=ae:rt=am;var M=U+ak*((V-aa)/V);var an=W+al*((V-aa)/V);var ai=5;var ag=U+ak*((V-aa-ai)/V);var ad=W+al*((V-aa-ai)/V);var X=ag+al*(3/V);var ao=ad-ak*(3/V);var Z=ag-al*(3/V);var ap=ad+ak*(3/V);ah="M"+U+","+W+"L"+ag+","+ad+"L"+X+","+ao+"L"+M+","+an+"L"+Z+","+ap+"L"+ag+","+ad+"Z";d3.select("#viz").select("#D3viz").append("svg:path").attr("class",String).attr("d",ah).attr("class","linkCaptionRev").attr("fill-rule","evenodd").attr("fill","white").style("stroke",Q.getStrokeColor()).style("stroke-width",1.5).style("stroke-linejoin","bevel").attr("transform","translate(15,40)");d3.select("#viz").select("#D3viz").append("svg:text").text("Link").attr("x",20).attr("y",15).attr("transform","translate(30,45)");d3.select("#viz").select("#D3viz").append("svg:text").attr("id","metexplore").text("MetExploreViz").attr("x",$("#viz").width()-130).attr("y",$("#viz").height()-10);d3.select("#viz").select("#D3viz").append("svg:g").attr("class","logoViz").attr("id","logoViz").append("image").attr("xlink:href","resources/icons/metExploreViz_Logo.svg").attr("width","50").attr("height","50").attr("x",$("#viz").width()-110).attr("y",$("#viz").height()-75);d3.select("#viz").select("#D3viz").append("svg:rect").attr("class","reactionCaption").attr("x",15/2-T.getWidth()*Y/2).attr("y",15).attr("width",T.getWidth()*Y).attr("height",T.getHeight()*Y).attr("rx",T.getRX()*Y).attr("ry",T.getRY()*Y).attr("fill","white").attr("transform","translate(15,95)").style("stroke",T.getStrokeColor()).style("stroke-width",2);d3.select("#viz").select("#D3viz").append("svg:text").text("Reaction").attr("x",20).attr("y",15).attr("transform","translate(30,105)");d3.select("#viz").select("#D3viz").append("svg:rect").attr("class","metaboliteCaption").attr("x",15/2-O.getWidth()*ac/2).attr("y",15+15/2-O.getHeight()*ac/2).attr("width",O.getWidth()*ac).attr("height",O.getHeight()*ac).attr("rx",O.getRX()*ac).attr("ry",O.getRY()*ac).attr("fill","white").style("stroke","black").style("stroke-width",2).attr("transform","translate(15,130)");d3.select("#viz").select("#D3viz").append("svg:text").text("Metabolites").attr("x",20).attr("y",15).attr("transform","translate(30,140)");metExploreD3.GraphCaption.colorPathwayLegend(175);metExploreD3.GraphCaption.colorMetaboliteLegend(175);d3.select("#viz").select("#D3viz").select("#captionComparment").classed("hide",true);d3.select("#viz").select("#D3viz").select("#captionPathway").classed("hide",true);metExploreD3.GraphCaption.majCaption()},majCaption:function(){var c=_metExploreViz.getGeneralStyle();var d=c.isDisplayedCaption();if(d=="Pathways"){d3.select("#viz").select("#D3viz").select("#captionComparment").classed("hide",true);d3.select("#viz").select("#D3viz").select("#captionPathway").classed("hide",false)}else{d3.select("#viz").select("#D3viz").select("#captionComparment").classed("hide",false);d3.select("#viz").select("#D3viz").select("#captionPathway").classed("hide",true)}},colorMetaboliteLegend:function(t){var r=d3.select("#viz").select("#D3viz").append("svg:g").attr("id","captionComparment").attr("x1",0).attr("y1",0).attr("x2",15).attr("y2",0);var A=metExploreD3.getReactionStyle();var w=Math.max(A.getWidth(),A.getHeight());var D=20/w;var u=metExploreD3.getMetaboliteStyle();var v=Math.max(u.getWidth(),u.getHeight());var C=20/v;metExploreD3.sortCompartmentInBiosource();var s=metExploreD3.getCompartmentInBiosourceLength();if(s==undefined){s=0}center=128;width=127;frequency=Math.PI*2*0.95/s;var y=t;y+=20;r.append("svg:text").text("Compartments :").attr("x",0).attr("y",0).attr("transform","translate(15,"+y+")");y+=20;for(var z=0;z<s;z++){red=Math.sin(frequency*z+2+s)*width+center;green=Math.sin(frequency*z+0+s)*width+center;blue=Math.sin(frequency*z+4+s)*width+center;var B=metExploreD3.getCompartmentInBiosourceSet()[z];B.setColor(metExploreD3.GraphUtils.RGB2Color(red,green,blue));r.append("svg:line").attr("class","metabolite").attr("x1",0).attr("y1",0).attr("x2",15).attr("y2",0).style("stroke",B.getColor()).style("stroke-width",2).attr("transform","translate(15,"+y+")");y+=10;r.append("svg:text").html(B.getName()).attr("x",20).attr("y",-6).attr("transform","translate(30,"+y+")");y+=10}},colorPathwayLegend:function(w){var G=metExploreD3.getPathwaysSet();var J=[];G.forEach(function(a){J.push({key:a})});var v=metExploreD3.getPathwaysLength();if(v==undefined){v=0}center=128;width=127;frequency=Math.PI*2*0.95/v;for(var D=0;D<v;D++){red=Math.sin(frequency*D+2+v)*width+center;green=Math.sin(frequency*D+0+v)*width+center;blue=Math.sin(frequency*D+4+v)*width+center;var I=J[D];I.color=metExploreD3.GraphUtils.RGB2Color(red,green,blue)}var K=d3.select("#viz").select("#D3viz").append("svg:g").attr("id","captionPathway").attr("x1",0).attr("y1",0).attr("x2",15).attr("y2",0);var E=metExploreD3.getReactionStyle();var B=Math.max(E.getWidth(),E.getHeight());var H=20/B;var z=metExploreD3.getMetaboliteStyle();var A=Math.max(z.getWidth(),z.getHeight());var F=20/A;var y=_metExploreViz.getSessionById("viz");J.sort(function(a,b){if(a.key<b.key){return -1}if(a.key>b.key){return 1}return 0});var v=J.length;if(v==undefined){v=0}center=128;width=127;frequency=Math.PI*2*0.95/v;var C=w;C+=20;K.append("svg:text").text("Pathways :").attr("x",0).attr("y",0).attr("transform","translate(15,"+C+")");C+=20;for(var D=0;D<v;D++){red=Math.sin(frequency*D+2+v)*width+center;green=Math.sin(frequency*D+0+v)*width+center;blue=Math.sin(frequency*D+4+v)*width+center;var L=J[D];K.append("svg:line").attr("class","metabolite").attr("x1",0).attr("y1",0).attr("x2",15).attr("y2",0).style("stroke",L.color).style("stroke-width",2).attr("transform","translate(15,"+C+")");C+=10;K.append("svg:text").html(L.key).attr("x",20).attr("y",-6).attr("transform","translate(30,"+C+")");C+=10}}};metExploreD3.GraphUtils={decodeJSON:function(g){try{var f=Ext.decode(g)}catch(d){metExploreD3.displayWarning("Invalid JSON String","Unable to parse the JSON")}return f},launchWebService:function(d,c){$.ajax({url:"src/php/metExplore.php",type:"POST",dataType:"text",data:{data:d},success:function(a){c(a)},error:function(a){alert("Bad")}})},parseWebServiceMapping:function(g){var j=Ext.decode(g);var h=j.mappingdata[0].mappings;h.forEach(function(a){var b=a.data;var c=0;var d=false;while(c<b.length&&!d){if(b.value!=undefined){d=true}c++}if(!d){a.name="undefined"}});var f=JSON.stringify(j.mappingdata[0]);return f},handleFileSelect:function(d,g){if(!window.File||!window.FileReader||!window.FileList||!window.Blob){alert("The File APIs are not fully supported in this browser.");return}if(!d){alert("couldn't find the fileinput element.")}else{if(!d.files){alert("This browser doesn't seem to support the `files` property of file inputs.")}else{file=d.files[0];var f=new FileReader();f.onload=function(){g(f.result,file.name)};f.readAsText(file)}}},colorNameToHex:function(c){var d={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};if(typeof d[c.toLowerCase()]!="undefined"){return d[c.toLowerCase()]}return false},RGB2Color:function(f,g,b){return"#"+metExploreD3.GraphUtils.byte2Hex(f)+metExploreD3.GraphUtils.byte2Hex(g)+metExploreD3.GraphUtils.byte2Hex(b)},chooseTextColor:function(q){if(q!=undefined){var h;if(q.slice(0,1)=="#"){var p=metExploreD3.GraphUtils.hexToRGB(q);var m=p.r;var o=p.g;var j=p.b;if((m*0.299+o*0.687+j*0.114)>186){h="black"}else{h="white"}}else{if(q.slice(0,3)=="rgb"){q=q.replace("rgb","");q=q.replace("(","");q=q.replace(")","");p=q.split(",");var m=p[0];var o=p[1];var j=p[2];if((m*0.299+o*0.687+j*0.114)>186){h="black"}else{h="white"}}else{h="black"}}return h}else{return"black"}},byte2Hex:function(c){var d="0123456789ABCDEF";return String(d.substr((c>>4)&15,1))+d.substr(c&15,1)},hexToRGB:function(g){var d=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;g=g.replace(d,function(c,a,b,m){return a+a+b+b+m+m});var f=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(g);return f?{r:parseInt(f[1],16),g:parseInt(f[2],16),b:parseInt(f[3],16)}:null},exportGraphPng:function(){var g=$("#viz").cytoscape("get");var d=g.png();var f=new Blob([String(d)],{type:"image/png",encoding:"utf-8"});saveAs(f,"graph.png")},exportPNG:function(){metExploreD3.GraphUtils.escapeUnExportNode();window.URL=(window.URL||window.webkitURL);metExploreD3.GraphUtils.initialize("png")},exportJPG:function(){metExploreD3.GraphUtils.escapeUnExportNode();window.URL=(window.URL||window.webkitURL);metExploreD3.GraphUtils.initialize("jpeg")},escapeUnExportNode:function(){d3.selectAll("#buttonAnim").style("display","none");var j=d3.selectAll("#brush");if(j!=null){j.style("display","none")}var s=d3.selectAll("#buttonLink");if(s!=null){s.style("display","none")}var q=d3.selectAll("#buttonZoomIn");if(q!=null){q.style("display","none")}var o=d3.selectAll("#buttonHand");if(o!=null){o.style("display","none")}var m=d3.selectAll("#whiteBlack");if(m!=null){m.style("display","none")}var p=d3.selectAll("#invertColor");if(p!=null){p.style("display","none")}var r=d3.selectAll("#buttonZoomOut");if(r!=null){r.style("display","none")}},exportSVG:function(){metExploreD3.GraphUtils.escapeUnExportNode();window.URL=(window.URL||window.webkitURL);var b=metExploreD3.GraphUtils.initialize("svg")},initialize:function(p){var q=_metExploreViz.getSessionById("viz");var w=q.getForce();if(q!=undefined){var w=q.getForce();if(w!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){w.stop()}}}var r={xmlns:"http://www.w3.org/2000/xmlns/",xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};var o=[window.document],v=[];iframes=document.querySelectorAll("iframe"),objects=document.querySelectorAll("object");var u=window.document.createElementNS(r.svg,"svg");window.document.body.appendChild(u);var s=getComputedStyle(u);var t=metExploreD3.createLoadMask("Export initialization...","viz");if(t!=undefined){metExploreD3.showMask(t);metExploreD3.deferFunction(function(){[].forEach.call(iframes,function(c){try{if(c.contentDocument){o.push(c.contentDocument)}}catch(b){console.log(b)}});[].forEach.call(objects,function(c){try{if(c.contentDocument){o.push(c.contentDocument)}}catch(b){console.log(b)}});o.forEach(function(c){var b=metExploreD3.GraphUtils.getSources(c,s,r);for(var d=0;d<b.length;d++){console.log(typeof(b[d].classe));if(b[d].classe.includes("D3viz")){v.push(b[d])}}});metExploreD3.hideMask(t);var a=u.parentNode;a.removeChild(u);if(v.length>1){metExploreD3.GraphUtils.createPopover(v,p)}else{if(v.length>0){return metExploreD3.GraphUtils.download(v[0],p)}else{alert("Couldn\u2019t find any SVG nodes.")}}},100)}},createPopover:function(f,h){metExploreD3.GraphUtils.cleanup();f.forEach(function(a){f.forEach(function(b){if(a!==b){if((Math.abs(a.top-b.top)<38)&&(Math.abs(a.left-b.left)<38)){b.top+=38;b.left+=38}}})});var g=document.createElement("div");document.body.appendChild(g);g.setAttribute("class","svg-crowbar");g.style["z-index"]=10000000;g.style.position="absolute";g.style.top=0;g.style.left=0;var j=document.createElement("div");document.body.appendChild(j);j.setAttribute("class","svg-crowbar");j.style.background="rgba(255, 255, 255, 0.7)";j.style.position="fixed";j.style.left=0;j.style.top=0;j.style.width="100%";j.style.height="100%";f.forEach(function(a,c){var b=document.createElement("div");g.appendChild(b);b.setAttribute("class","svg-crowbar");b.style.position="absolute";b.style.top=(a.top+document.body.scrollTop)+"px";b.style.left=(document.body.scrollLeft+a.left)+"px";b.style.padding="4px";b.style["border-radius"]="3px";b.style.color="white";b.style["text-align"]="center";b.style["font-family"]="'Helvetica Neue'";b.style.background="rgba(0, 0, 0, 0.8)";b.style["box-shadow"]="0px 4px 18px rgba(0, 0, 0, 0.4)";b.style.cursor="move";b.textContent="SVG #"+c+": "+(a.id?"#"+a.id:"")+(a.classe?"."+a.classe:"");var d=document.createElement("button");b.appendChild(d);d.setAttribute("data-source-id",c);d.style.width="150px";d.style["font-size"]="12px";d.style["line-height"]="1.4em";d.style.margin="5px 0 0 0";d.textContent="Download";d.onclick=function(o){metExploreD3.GraphUtils.download(a,h)}})},cleanup:function(){var r=document.querySelectorAll(".svg-crowbar");[].forEach.call(r,function(a){a.parentNode.removeChild(a)});d3.selectAll("#buttonAnim").style("display","inline");var m=d3.selectAll("#brush");if(m!=null){m.style("display","inline")}var u=d3.selectAll("#buttonLink");if(u!=null){u.style("display ","inline")}var s=d3.selectAll("#buttonZoomIn");if(s!=null){s.style("display","inline")}var p=d3.selectAll("#buttonHand");if(p!=null){p.style("display","inline")}var q=d3.selectAll("#invertColor");if(q!=null){q.style("display","inline")}var o=d3.selectAll("#whiteBlack");if(o!=null){o.style("display","inline")}var t=d3.selectAll("#buttonZoomOut");if(t!=null){t.style("display","inline")}},getSources:function(o,m,h){var g=[],j=o.querySelectorAll("svg");[].forEach.call(j,function(M){svg=M;if(svg.id=="D3viz"){function N(q){var p=d3.select(q).node();return d3.select(p.parentNode.insertBefore(p.cloneNode(true),p.nextSibling))[0][0]}var c=N(svg);c.setAttribute("version","1.1");c.removeAttribute("xmlns");c.removeAttribute("xlink");if(!c.hasAttributeNS(h.xmlns,"xmlns")){c.setAttributeNS(h.xmlns,"xmlns",h.svg)}if(!c.hasAttributeNS(h.xmlns,"xmlns:xlink")){c.setAttributeNS(h.xmlns,"xmlns:xlink",h.xlink)}var E=c.getElementById("buttonZoomIn");if(E!=null){E.parentNode.removeChild(E)}var F=c.getElementById("buttonZoomOut");if(F!=null){F.parentNode.removeChild(F)}var J=c.getElementById("buttonHand");if(J!=null){J.parentNode.removeChild(J)}var P=c.getElementById("buttonAnim");if(P!=null){P.parentNode.removeChild(P)}var O=c.getElementById("invertColor");if(O!=null){O.parentNode.removeChild(O)}var a=c.getElementById("whiteBlack");if(a!=null){a.parentNode.removeChild(a)}var Q=c.getElementById("brush");if(Q!=null){Q.parentNode.removeChild(Q)}var K;d3.select(c).select("#graphComponent").selectAll("g.node").select(".structure_metabolite").each(function(){var u=this.firstChild.getAttribute("href");if(window.XDomainRequest){xdr=new XDomainRequest()}else{if(window.XMLHttpRequest){var q=new XMLHttpRequest();q.open("GET",u,false);q.send(null);if(q.responseXML!=null){var s=q.responseXML.getElementsByTagName("svg")[0];if(this.getAttribute("width")!=null){var p=parseFloat(this.getAttribute("width").split("px")[0])/parseFloat(s.getAttribute("width").split("px")[0]);s.setAttribute("x",this.getAttribute("x"));s.setAttribute("y",this.getAttribute("y"));s.setAttribute("width",this.getAttribute("width").split("px")[0]);s.setAttribute("height",this.getAttribute("height").split("px")[0]);s.setAttribute("class","structure_metabolite");var v=s.children;for(var t=0;t<v.length;t++){v[t].setAttribute("transform","scale("+p+")")}var r=this.parentNode;r.removeChild(this);r.appendChild(s)}}}else{alert("Votre navigateur ne gÃ¨re pas l'AJAX cross-domain !")}}});d3.select(c).select(".logoViz").each(function(){var s=this.firstChild.getAttribute("href");if(window.XDomainRequest){xdr=new XDomainRequest()}else{if(window.XMLHttpRequest){var p=new XMLHttpRequest();p.open("GET",s,false);p.send(null);if(p.responseXML!=null){var r=p.responseXML.getElementsByTagName("svg")[0];if(this.firstChild.getAttribute("width")!=null){r.setAttribute("x",this.firstChild.getAttribute("x"));r.setAttribute("y",this.firstChild.getAttribute("y"));r.setAttribute("width",this.firstChild.getAttribute("width").split("px")[0]);r.setAttribute("height",this.firstChild.getAttribute("height").split("px")[0]);r.setAttribute("class","logoViz");var t=r.children;var q=this.parentNode;q.removeChild(this);q.appendChild(r)}}}else{alert("Votre navigateur ne gÃ¨re pas l'AJAX cross-domain !")}}});K=metExploreD3.GraphUtils.setInlineStyles(c,m,K);var d=svg.parentNode.getBoundingClientRect();var I=d3.select(c).select("#graphComponent")[0][0].getBoundingClientRect();var G=d.left+100-I.left;var H=d.top+50-I.top;d3.select(c).select("#graphComponent").attr("transform","translate("+G+","+H+") scale(1)");I=d3.select(c).select("#graphComponent")[0][0].getBoundingClientRect();var b=d.width;if((d.width+I.right-d.right+20)>b){b=d.width+I.right-d.right+20}else{d3.select(c).select("#graphComponent").attr("transform","translate(0,"+H+") scale(1)")}c.setAttribute("width",b);var R=d.height;if((d.height+I.bottom-d.bottom+20)>R){R=d.height+I.bottom-d.bottom+20}c.setAttribute("height",R);d3.select(c).select("#metexplore").text("MetExploreViz").attr("x",c.getAttribute("width")-92).attr("y",c.getAttribute("height")-10);var I=d3.select(c).select("#graphComponent")[0][0].getBoundingClientRect();var G=d.left+100-I.left;var H=d.top+50-I.top;d3.select(c).select("#graphComponent").attr("transform",d3.select(svg).select("#graphComponent").attr("transform"));I=d3.select(c).select("#graphComponent")[0][0].getBoundingClientRect();var b=d.width;c.setAttribute("width",b);var R=d.height;c.setAttribute("height",R);var f=(new XMLSerializer()).serializeToString(c);var L='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">';g.push({top:d.top,left:d.left,width:parseInt(c.getAttribute("width"))*2,height:parseInt(c.getAttribute("height"))*2,classe:c.getAttribute("class"),id:c.getAttribute("id"),parent:svg.parentNode.id,childElementCount:c.childElementCount,source:[L+f]});d3.select(c).remove()}});return g},saveAsSvg:function(o,h){var g=document.createElement("a");if(typeof g.download==="string"){g.href=o;g.download=h;document.body.appendChild(g);g.click();document.body.removeChild(g)}else{window.open(o)}var j=_metExploreViz.getSessionById("viz");var m=j.getForce();if(j!=undefined){if(m!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){m.start()}}}},binaryblob:function(A,t){var y=window.atob(A.toDataURL("image/"+t).replace(/^data:image\/(png|jpeg);base64,/,""));var q=new ArrayBuffer(y.length);var z=new Uint8Array(q);for(var u=0;u<y.length;u++){z[u]=y.charCodeAt(u)}var s=new DataView(q);var B=new Blob([s],{type:"image/"+t});var w=self.URL||self.webkitURL||self;var r=w.createObjectURL(B);var v='<img src="'+r+'">';d3.select("#img").html(v);return r},saveAsBinary:function(q,j,r){var o="data:image/svg+xml;base64,"+window.btoa(decodeURIComponent(encodeURIComponent(q.source)));var s=document.createElement("canvas");s.id="canvas";s.height=q.height*4;s.width=q.width*4;s.style.zIndex=8;s.style.position="absolute";s.style.border="1px solid";var m=document.getElementsByTagName("body")[0];m.appendChild(s);context=s.getContext("2d");var p=new Image();p.onload=function(){var a=metExploreD3.createLoadMask("Export in progress...",q.parent);if(a!=undefined){metExploreD3.showMask(a);metExploreD3.deferFunction(function(){context.drawImage(p,0,0,q.width*4,q.height*4);var b=metExploreD3.GraphUtils.binaryblob(s,r);var f=document.createElement("a");if(typeof f.download==="string"){f.download=j;f.href=b;document.body.appendChild(f);f.click();document.body.removeChild(f)}else{window.open(b)}var g=s.parentNode;g.removeChild(s);metExploreD3.hideMask(a);var c=_metExploreViz.getSessionById("viz");var d=c.getForce();if(c!=undefined){if(d!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){d.start()}}}},100)}};p.src=o},download:function(h,j){if(j=="jpeg"||j=="png"){metExploreD3.GraphUtils.saveAsBinary(h,"metabolicNetwork."+j,j)}if(j=="svg"){var g=new Blob([h.source],{type:"data:image/svg+xml"});var f=URL.createObjectURL(g);metExploreD3.GraphUtils.saveAsSvg(f,"metabolicNetwork.svg")}metExploreD3.GraphUtils.cleanup()},explicitlySetStyle:function(r,p){var m=getComputedStyle(r);var s,o,t,q;var u="";for(s=0,o=m.length;s<o;s++){t=m[s];q=m.getPropertyValue(t);if(q!==p.getPropertyValue(t)){if(r.tagName=="rect"){if(r.getAttribute("class")=="stroke"){if(t!="height"&&t!="width"){u+=t+":"+q+";"}}else{if(t!="fill"&&t!="height"&&t!="width"){u+=t+":"+q+";"}}}else{if(t!="marker-start"||t!="marker-end"){u+=t+":"+q+";"}}}}r.setAttribute("style",u)},traverse:function(g){var f=[];f.push(g);d(g);function d(b){if(b&&b.hasChildNodes()){var a=b.firstChild;if(a.className!=undefined){if(a.tagName!="image"){while(a){if(a.getAttribute!=undefined){if(a.getAttribute("href")!="resources/icons/pause.svg"&&a.getAttribute("href")!="resources/icons/whiteBlack.png"&&a.getAttribute("href")!="resources/icons/invertColor.svg"&&a.getAttribute("href")!="resources/icons/link.svg"&&a.getAttribute("href")!="resources/icons/unlink.svg"){if(a.nodeType===1&&a.nodeName!="SCRIPT"){f.push(a);d(a)}a=a.nextSibling}}else{if(a.nodeType===1&&a.nodeName!="SCRIPT"){d(a)}a=a.nextSibling}}}}else{while(a){if(a.nodeType===1&&a.nodeName!="SCRIPT"){d(a)}a=a.nextSibling}}}}return f},setInlineStyles:function(h,j,m){var o=metExploreD3.GraphUtils.traverse(h);m=o;var g=o.length;while(g--){metExploreD3.GraphUtils.explicitlySetStyle(o[g],j)}return m},exportSVGMain:function(){d3.selectAll("#buttonAnim").style("display","none");var u=d3.selectAll("#buttonLink");if(u!=null){u.style("display","none")}var m=d3.selectAll("#brush");if(m!=null){m.style("display","none")}var r=d3.selectAll("#buttonZoomIn");if(r!=null){r.style("display","none")}var p=d3.selectAll("#buttonHand");if(p!=null){p.style("display","none")}var q=d3.selectAll("#invertColor");if(q!=null){q.style("display","none")}var o=d3.selectAll("#whiteBlack");if(o!=null){o.style("display","none")}var s=d3.selectAll("#buttonZoomOut");if(s!=null){s.style("display","none")}window.URL=(window.URL||window.webkitURL);var t=metExploreD3.GraphUtils.initializeMain();return t},initializeMain:function(){var m={xmlns:"http://www.w3.org/TR/xml-names/",xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};var g=[window.document],h=[];iframes=document.querySelectorAll("iframe"),objects=document.querySelectorAll("object");var o=window.document.createElementNS(m.svg,"svg");window.document.body.appendChild(o);var j=getComputedStyle(o);[].forEach.call(iframes,function(b){try{if(b.contentDocument){g.push(b.contentDocument)}}catch(a){console.log(a)}});[].forEach.call(objects,function(b){try{if(b.contentDocument){g.push(b.contentDocument)}}catch(a){console.log(a)}});g.forEach(function(b){var a=metExploreD3.GraphUtils.getSources(b,j,m);for(var c=0;c<a.length;c++){if(a[c].classe.includes("D3viz")){h.push(a[c])}}});if(h.length>0){return metExploreD3.GraphUtils.downloadMain(h[h.length-1])}else{alert("The Crowbar couldn\u2019t find any SVG nodes.")}},downloadMain:function(g){var f="untitled";if(g.id){f=g.id}else{if(g.classe){f=g.classe}else{if(window.document.title){f=window.document.title.replace(/[^a-z0-9]/gi,"-").toLowerCase()}}}var d=window.URL.createObjectURL(new Blob(g.source,{type:"text/xml"}));metExploreD3.GraphUtils.cleanup();return g.source[0]},saveNetworkDot:function(){var b=metExploreD3.createLoadMask("Export DOT file...","viz");if(b!=undefined){metExploreD3.showMask(b);metExploreD3.deferFunction(function(){var o="digraph dotGraph {";var t=_metExploreViz.getSessionById("viz").getD3Data().getLinks();var r=t.length;var q={};var a=0;t.forEach(function(f){var d=f.getSource().getId();var c=f.getTarget().getId();if(q[d]==undefined){q[d]=i;d=i;i++}else{d=q[d]}if(q[c]==undefined){q[c]=i;c=i;i++}else{c=q[c]}if(f.isReversible()=="true"){o+=d+" -> "+c;o+=",\n";o+=c+" -> "+d}else{o+=d+" -> "+c}if(t.indexOf(f)!=r-1){o+=",\n"}});o+="}";var u=new Blob([o],{type:"text"});var s=URL.createObjectURL(u);var p=document.createElement("a");if(typeof p.download==="string"){p.href=s;p.download="save.dot";document.body.appendChild(p);p.click();document.body.removeChild(p)}else{window.open(uri)}metExploreD3.hideMask(b)},100)}},saveNetworkJSON:function(){var b=metExploreD3.createLoadMask("Saving...","viz");if(b!=undefined){metExploreD3.showMask(b);metExploreD3.deferFunction(function(){var o="{";o+='\n"linkStyle":'+JSON.stringify(metExploreD3.getLinkStyle());o+=',\n"reactionStyle":'+JSON.stringify(metExploreD3.getReactionStyle());o+=',\n"biosource":'+JSON.stringify(_metExploreViz.getBiosource());o+=',\n"generalStyle":'+JSON.stringify(metExploreD3.getGeneralStyle());o+=',\n"metaboliteStyle":'+JSON.stringify(metExploreD3.getMetaboliteStyle());o+=',\n"comparedPanels":'+JSON.stringify(_metExploreViz.comparedPanels);o+=',\n"linkedByTypeOfMetabolite":'+JSON.stringify(_metExploreViz.linkedByTypeOfMetabolite);o+=',\n"sessions":{';var a=_metExploreViz.getSessionsSet();var r=0;for(var s in a){a[s].getD3Data().initNodeIndex();o+="\n"+JSON.stringify(s)+':{\n"id":"'+_metExploreViz.getSessionById(s).getId()+'",';o+='\n"animated": false ,';o+='\n"d3Data":{"id":'+JSON.stringify(s)+",";o+='"nodes":[';_metExploreViz.getSessionById(s).getD3Data().getNodes().forEach(function(c){o+='{"name":'+JSON.stringify(c.getName())+",";if(c.getLabel()!=undefined){o+='"label":'+JSON.stringify(c.getLabel())+","}if(c.getCompartment()!=undefined){o+='"compartment":'+JSON.stringify(c.getCompartment())+","}if(c.getPathways()!=undefined){o+='"pathways":'+JSON.stringify(c.getPathways())+","}o+='"dbIdentifier":'+JSON.stringify(c.getDbIdentifier())+",";if(c.getIdentifier()!=undefined){o+='"identifier":'+JSON.stringify(c.getIdentifier())+","}if(c.getEC()!=undefined){o+='"ec":'+JSON.stringify(c.getEC())+","}o+='"id":'+JSON.stringify(c.getId())+",";if(c.getIdentifier()!=undefined){o+='"identifier":'+JSON.stringify(c.getIdentifier())+","}if(c.getReactionReversibility()!=undefined){o+='"reactionReversibility":'+JSON.stringify(c.getReactionReversibility())+","}if(c.getIsSideCompound()!=undefined){o+='"isSideCompound":'+JSON.stringify(c.getIsSideCompound())+","}o+='"biologicalType":'+JSON.stringify(c.getBiologicalType())+",";o+='"selected":'+JSON.stringify(c.isSelected())+",";o+='"locked":'+JSON.stringify(c.isLocked())+",";if(c.isDuplicated()!=undefined){o+='"duplicated":'+JSON.stringify(c.isDuplicated())+","}else{o+='"duplicated":false,'}o+='"labelVisible":'+JSON.stringify(c.getLabelVisible())+",";if(c.getSvg()!=undefined){o+='"svg":'+JSON.stringify(c.getSvg())+",";o+='"svgWidth":'+JSON.stringify(c.getSvgWidth())+",";o+='"svgHeight":'+JSON.stringify(c.getSvgHeight())+","}if(c.x!=undefined){o+='"x":'+JSON.stringify(c.x)+","}if(c.y!=undefined){o+='"y":'+JSON.stringify(c.y)+","}if(c.px!=undefined){o+='"px":'+JSON.stringify(c.px)+","}if(c.py!=undefined){o+='"py":'+JSON.stringify(c.py)}o+="}";var d=_metExploreViz.getSessionById(s).getD3Data().getNodes().indexOf(c);if(d!=_metExploreViz.getSessionById(s).getD3Data().getNodes().length-1){o+=","}});o+="],";o+='"links":[';var p=_metExploreViz.getSessionById(s).getD3Data().getLinks().filter(function(c){return c.getInteraction()!="hiddenForce"});p.forEach(function(c){o+='{"id":'+JSON.stringify(c.getId())+",";o+='"source":'+JSON.stringify(c.getSource().index)+",";o+='"target":'+JSON.stringify(c.getTarget().index)+",";o+='"interaction":'+JSON.stringify(c.getInteraction())+",";o+='"reversible":'+JSON.stringify(c.isReversible());o+="}";var d=p.indexOf(c);if(d!=p.length-1){o+=","}});o+="]},";o+='\n"colorMappings":'+JSON.stringify(_metExploreViz.getSessionById(s).getColorMappingsSet())+",";o+='\n"linked":'+JSON.stringify(_metExploreViz.getSessionById(s).isLinked())+",";o+='\n"active":'+JSON.stringify(_metExploreViz.getSessionById(s).isActive())+",";o+='\n"duplicatedNodes":'+JSON.stringify(_metExploreViz.getSessionById(s).getDuplicatedNodes())+",";o+='\n"selectedNodes":'+JSON.stringify(_metExploreViz.getSessionById(s).getSelectedNodes())+",";o+='\n"resizable":'+_metExploreViz.getSessionById(s).isResizable();o+="}";if(r<a.length-1){o+=","}r++}o+="}}";var u=new Blob([o],{type:"text/json"});var t=URL.createObjectURL(u);var q=document.createElement("a");if(typeof q.download==="string"){q.href=t;q.download="save.json";document.body.appendChild(q);q.click();document.body.removeChild(q)}else{window.open(uri)}metExploreD3.hideMask(b)},100)}},saveNetworkGml:function(){var b=metExploreD3.createLoadMask("Export GML file...","viz");if(b!=undefined){metExploreD3.showMask(b);metExploreD3.deferFunction(function(){var a="graph [";a+="\ndirected 1\n";var q=0;var o={};var m={};_metExploreViz.getSessionById("viz").getD3Data().getNodes().forEach(function(c){o[c.getId()]=q;a+="node [\n";a+="id "+q+"\n";if(c.getIsSideCompound()){console.log(m[c.getName()]);if(m[c.getName()]!=undefined){console.log(m[c.getName()]);m[c.getName()]++}else{m[c.getName()]=1;console.log(m[c.getName()])}a+='label "'+c.getName()+"("+m[c.getName()]+')"\n';console.log('label "'+c.getName()+m[c.getName()])}else{a+='label "'+c.getName()+'"\n'}a+="graphics [\n";a+="x "+c.x+"\n";a+="y "+c.y+"\n";a+="]\n";a+="]\n";q++});_metExploreViz.getSessionById("viz").getD3Data().getLinks().forEach(function(c){a+="edge [\n";a+="source "+o[c.getSource().getId()]+"\n";a+="target "+o[c.getTarget().getId()]+"\n";a+='label "'+c.getSource().getId().replace("-","")+"-"+c.getTarget().getId().replace("-","")+'"\n';a+="]\n";if(c.isReversible()=="true"){a+="edge [\n";a+="source "+o[c.getTarget().getId()]+"\n";a+="target "+o[c.getSource().getId()]+"\n";a+='label "'+c.getSource().getId().replace("-","")+"-"+c.getTarget().getId().replace("-","")+'"\n';a+="]\n"}});a+="]";var s=new Blob([a],{type:"text"});var r=URL.createObjectURL(s);var p=document.createElement("a");if(typeof p.download==="string"){p.href=r;p.download="save.gml";document.body.appendChild(p);p.click();document.body.removeChild(p)}else{window.open(uri)}metExploreD3.hideMask(b)},100)}}};metExploreD3.GraphNetwork={task:"",delayedInitialisation:function(d){var c={};c.render=function(){var a=d3.select("#"+d);a.append("svg").attr("width","100%").attr("height","100%").attr("class","D3viz").attr("id","D3viz").style("background-color","#fff")};c.render();metExploreD3.GraphLink.delayedInitialisation(d);metExploreD3.GraphNode.delayedInitialisation(d);return c},tick:function(K){if(_metExploreViz.getComparedPanelById(K)!=null||K=="viz"){var A=metExploreD3.getScaleById(K);metExploreD3.GraphLink.tick(K,A);metExploreD3.GraphNode.tick(K);var C=A.getZoomScale();var F=metExploreD3.GraphNetwork.isAnimated(K);var Q=_metExploreViz.getSessionById(K);var H=metExploreD3.getGeneralStyle();if(F&&C>0.05&&Q.isResizable()){var N=document.getElementById(K).getBoundingClientRect();var R=d3.select("#"+K).select("#D3viz")[0][0].getElementById("graphComponent").getBoundingClientRect();var I=parseInt(d3.select("#"+K).select("#D3viz").style("width"));var J=parseInt(d3.select("#"+K).select("#D3viz").style("height"));if(N.top>R.top||N.left>R.left||N.bottom<R.bottom||N.right<R.right){var M=Q.getD3Data().getNodesLength();var B=3000;if(M<H.getReactionThreshold()||!H.isDisplayedLabelsForOpt()){B=3000}metExploreD3.fixDelay(metExploreD3.GraphNetwork.task,B);var O=A.getZoom();var D=0.01*M/100;var E=C-(C*D);O.scale(E);var L=E*I;var G=E*J;var z=(I-L)/2;var P=(J-G)/2;O.translate([z,P]);O.event(d3.select("#"+K).select("#D3viz"));A.setZoomScale(E);A.setXScale(O.x());A.setYScale(O.y())}else{if(!((N.top+J/10>R.top&&N.bottom-J/10<R.bottom)||(N.left+I/10>R.left&&N.right-I/10<R.right))){var M=Q.getD3Data().getNodesLength();var B=3000;if(M<H.getReactionThreshold()||!H.isDisplayedLabelsForOpt()){B=3000}metExploreD3.fixDelay(metExploreD3.GraphNetwork.task,B);var O=A.getZoom();if(D==undefined){D=0.01}else{D=D/2}var E=C+(C*D);O.scale(E);var L=E*I;var G=E*J;var z=(I-L)/2;var P=(J-G)/2;O.translate([z,P]);O.event(d3.select("#"+K).select("#D3viz"));A.setZoomScale(E);A.setXScale(O.x());A.setYScale(O.y())}}}}},zoom:function(f){var g=metExploreD3.getScaleById(f);d3.select("#"+f).select("#D3viz").select("#graphComponent").attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")");var d=g.getZoom();g.setZoomScale(d3.event.scale);g.setXScale(d.x());g.setYScale(d.y());metExploreD3.GraphLink.tick(f,g)},zoomIn:function(){_MyThisGraphNode.dblClickable=false;var m=this.parentNode.parentNode.id;var p=metExploreD3.getScaleById(m);var t=p.getZoom();var s=_metExploreViz.getSessionById(m);var q=document.getElementById(m).getBoundingClientRect();var r=d3.select("#"+m).select("#D3viz")[0][0].getElementById("graphComponent").getBoundingClientRect();var t=p.getZoom();var u=parseInt(d3.select("#"+m).select("#D3viz").style("width"));var o=parseInt(d3.select("#"+m).select("#D3viz").style("height"));t.scale(p.getZoomScale()*1.1);t.event(d3.select("#"+m).select("#D3viz"));p.setXScale(t.x());p.setYScale(t.y());p.setZoomScale(p.getZoomScale()*1.1);metExploreD3.GraphLink.tick(m,p)},zoomOut:function(){_MyThisGraphNode.dblClickable=false;var m=this.parentNode.parentNode.id;var p=metExploreD3.getScaleById(m);var t=p.getZoom();var s=_metExploreViz.getSessionById(m);var q=document.getElementById(m).getBoundingClientRect();var r=d3.select("#"+m).select("#D3viz")[0][0].getElementById("graphComponent").getBoundingClientRect();var t=p.getZoom();var u=parseInt(d3.select("#"+m).select("#D3viz").style("width"));var o=parseInt(d3.select("#"+m).select("#D3viz").style("height"));t.scale(p.getZoomScale()*0.9);t.event(d3.select("#"+m).select("#D3viz"));p.setXScale(t.x());p.setYScale(t.y());p.setZoomScale(p.getZoomScale()*0.9);metExploreD3.GraphLink.tick(m,p)},animationButtonOn:function(b){d3.select("#"+b).select("#buttonAnim").select("image").remove();d3.select("#"+b).select("#buttonAnim").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/pause.svg").attr("width","50").attr("height","50").attr("transform","translate(10,10) scale(.5)");metExploreD3.GraphNetwork.setAnimated(b,true)},animationButtonOff:function(b){d3.select("#"+b).select("#buttonAnim").select("image").remove();d3.select("#"+b).select("#buttonAnim").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/play.svg").attr("width","50").attr("height","50").attr("transform","translate(10,10) scale(.5)");metExploreD3.GraphNetwork.setAnimated(b,false)},play:function(p){var o=_metExploreViz.getSessionsSet();var m=this.parentNode.parentNode.id;var q=_metExploreViz.getSessionById(m);if(q!=undefined){var r=metExploreD3.GraphNetwork.isAnimated(m);if(r=="false"){if(q.isLinked()){for(var d in o){if(o[d].isLinked()){metExploreD3.GraphNetwork.animationButtonOn(o[d].getId())}}var s=_metExploreViz.getSessionById("viz").getForce();s.start()}else{metExploreD3.GraphNetwork.animationButtonOn(m);var s=q.getForce();s.start()}}else{if(q.isLinked()){for(var d in o){if(o[d].isLinked()){metExploreD3.GraphNetwork.animationButtonOff(o[d].getId())}}var s=_metExploreViz.getSessionById("viz").getForce();s.stop()}else{metExploreD3.GraphNetwork.animationButtonOff(m);var s=q.getForce();s.stop()}}}},setLink:function(o){that=this;var j=this.parentNode.parentNode.id;var p=_metExploreViz.getSessionById(j);var d=_metExploreViz.getSessionById("viz");if(p!=undefined){var q=p.getForce();var m=d3.select(this).attr("isLink");d3.select(this).select("image").remove();if(m=="false"){metExploreD3.GraphNetwork.link(that)}else{metExploreD3.GraphNetwork.unLink(that)}}},link:function(r){var m=r.parentNode.parentNode.id;var p=_metExploreViz.getSessionById(m);var s=_metExploreViz.getSessionById("viz");var q=metExploreD3.GraphNetwork.isAnimated("viz");d3.select(r).attr("isLink","true");p.setLinked(true);s.setLinked(true);if(q=="true"){metExploreD3.GraphNetwork.animationButtonOn(m)}else{metExploreD3.GraphNetwork.animationButtonOff(m)}var o=d3.select(r).attr("isLink");d3.select(r).select("image").remove();d3.select(r).append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/link.svg").attr("width","50").attr("height","50").attr("transform","translate(10,50) scale(.5)");if(p!=undefined){if(s.getDuplicatedNodesCount()>0){var j=d3.select("#"+m).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(a){return a.getBiologicalType()=="metabolite"});s.getDuplicatedNodes().forEach(function(a){j.filter(function(b){return b.getId()==a}).each(function(b){b.setIsSideCompound(true)})});metExploreD3.GraphNetwork.duplicateSideCompoundsById(s.getDuplicatedNodes(),m);metExploreD3.GraphNetwork.looksLinked();if(p.isLinked()){metExploreD3.GraphNetwork.graphAlignment(m)}}else{metExploreD3.GraphNetwork.graphAlignment(m)}}metExploreD3.GraphNetwork.initCentroids()},unLink:function(g){var h=g.parentNode.parentNode.id;var j=_metExploreViz.getSessionById(h);d3.select(g).append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/unlink.svg").attr("width","50").attr("height","50").attr("transform","translate(10,50) scale(.5)");d3.select(g).attr("isLink","false");j.setLinked(false);metExploreD3.GraphNetwork.looksLinked();var m=metExploreD3.GraphNetwork.isAnimated(h);if(m=="true"){var o=j.getForce();o.start()}},looksLinked:function(){var g=_metExploreViz.getSessionsSet();var d=_metExploreViz.getSessionById("viz");d.setLinked(false);for(var f in g){if(g[f].isLinked()){d.setLinked(true)}}},refreshSvg:function(U){var Y=_metExploreViz.getSessionById(U).getD3Data();var N=Y.getNodes();metExploreD3.fireEventParentWebSite("refreshCart",N);var Q=[];for(var I=0;I<N.length-1;I++){Q.push(N[I].name)}Q=Q.sort();var w=parseInt(metExploreD3.GraphPanel.getHeight(U));var V=parseInt(metExploreD3.GraphPanel.getWidth(U));var P=metExploreD3.getLinkStyle();var M=metExploreD3.getGeneralStyle();var O=metExploreD3.getMetaboliteStyle();var S=metExploreD3.getReactionStyle();var K=Math.max(S.getWidth(),S.getHeight());var h=Math.max(O.getWidth(),O.getHeight());var Z=Math.max(K,h);var ac=d3.layout.force().friction(0.9).gravity(0.06).charge(-150).linkDistance(function(a){if(a.getSource().getIsSideCompound()||a.getTarget().getIsSideCompound()){return P.getSize()/2+Z}else{return P.getSize()+Z}}).size([V,w]);var ad=_metExploreViz.getSessionById(U);ad.setActivity(true);ad.setForce(ac);var H=d3.scale.linear().domain([0,V]).range([0,V]);var aa=d3.scale.linear().domain([w,0]).range([w,0]);if(U=="viz"){metExploreD3.GraphCaption.drawCaption()}if(ad.getScale()==undefined){var W=metExploreD3.GraphNetwork;metExploreD3.GraphNetwork.zoomListener=d3.behavior.zoom().x(H).y(aa).scaleExtent([0.01,30]).on("zoom",function(a){if(metExploreD3.GraphNetwork.zoomListener.scale()<0.8){d3.select("#"+U).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",true)}else{d3.select("#"+U).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",false)}var b=_metExploreViz.getSessionById(U);if(d3.event.sourceEvent!=null){if(d3.event.sourceEvent.type=="wheel"){b.setResizable(false)}}if(b.isActive()){W.zoom(U)}});var L=new Scale(U);L.setScale(H,aa,1,1,1,metExploreD3.GraphNetwork.zoomListener.scale(),metExploreD3.GraphNetwork.zoomListener);metExploreD3.setScale(L,U)}else{var W=metExploreD3.GraphNetwork;metExploreD3.GraphNetwork.zoomListener=d3.behavior.zoom().x(H).y(aa).scaleExtent([0.01,30]).on("zoom",function(a){if(metExploreD3.GraphNetwork.zoomListener.scale()<0.8){d3.select("#"+U).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",true)}else{d3.select("#"+U).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",false)}var b=_metExploreViz.getSessionById(this.parentNode.id);if(d3.event.sourceEvent!=null){if(d3.event.sourceEvent.type=="wheel"){b.setResizable(false)}}if(b.isActive()){W.zoom(this.parentNode.id)}});var L=new Scale(U);L.setScale(H,aa,1,1,1,metExploreD3.GraphNetwork.zoomListener.scale(),metExploreD3.GraphNetwork.zoomListener);metExploreD3.setScale(L,U)}ac.on("start",function(){if(Y.getNodes().length>M.getReactionThreshold()&&M.isDisplayedLinksForOpt()){d3.selectAll("path.link").remove()}});ac.on("end",function(){var a=metExploreD3.getScaleById(U);if((Y.getNodes().length>M.getReactionThreshold()&&M.isDisplayedLinksForOpt())){metExploreD3.GraphLink.reloadLinks(U,Y,P,O)}metExploreD3.GraphLink.tick(U,a)});var R=d3.select("#"+U);R.svg=R.select("#D3viz").selectAll("*").remove();_metExploreViz.setLinkedByTypeOfMetabolite(false);var T;var X=false;var ab=d3.select("#"+U).select("#D3viz").append("g").datum(function(){return{selected:false,previouslySelected:false}}).attr("id","brush").attr("class","brush").call(d3.svg.brush().x(H).y(aa).on("brushstart",function(c){document.addEventListener("mousedown",function(g){if(g.button===1){g.stopPropagation();g.preventDefault();g.stopImmediatePropagation()}});var a=d3.select("#"+U).select("#buttonHand").attr("scrollable");_MyThisGraphNode.activePanel=this.parentNode.parentNode.id;var d=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(d3.event.sourceEvent.button!=1&&a!="true"){if(d!=undefined){if(d.isLinked()){var b=_metExploreViz.getSessionById("viz");if(b!=undefined){var f=b.getForce();if(f!=undefined){f.stop()}}}else{var f=d.getForce();if(f!=undefined){f.stop()}}}X=true;d3.select("#"+U).select("#brush").classed("hide",false);d3.select("#"+U).select("#D3viz").on("mousedown.zoom",null);T=d3.select("#"+U).select("#graphComponent").selectAll("g.node");T.each(function(g){g.previouslySelected=g.isSelected()})}else{var f=d.getForce();if(f!=undefined){f.stop()}d3.select("#"+U).selectAll("#D3viz").style("cursor","all-scroll");d3.selectAll("#brush").classed("hide",true)}}).on("brushend",function(){if(d3.event.sourceEvent.button!=1&&X){var b=d3.event.target.extent();if(b[1][0]-b[0][0]>20||b[1][1]-b[0][1]>20){var f;var b=d3.event.target.extent();var o=metExploreD3.getScaleById(U);var g=o.getZoomScale();var m=metExploreD3.createLoadMask("Selection in progress...",U);if(m!=undefined){metExploreD3.showMask(m);metExploreD3.deferFunction(function(){T.classed("selected",function(t){var u=o.getXScale();var v=o.getYScale();f=(u(b[0][0])<=u(t.x)&&u(t.x)<u(b[1][0]))&&(v(b[0][1])<=v(t.y)&&v(t.y)<v(b[1][1]));if((t.isSelected()==false&&f==true)||(t.isSelected()==true&&f==false&&!t.previouslySelected)){_MyThisGraphNode.selection(t,U)}return f});metExploreD3.hideMask(m);var q=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(q!=undefined){if(q.isLinked()){var p=_metExploreViz.getSessionById("viz");if(p!=undefined){var s=metExploreD3.GraphNetwork.isAnimated(p.getId());if(s=="true"){var r=p.getForce();if(r!=undefined){if((metExploreD3.GraphNetwork.isAnimated(p.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(p.getId())==null)){r.start()}}}}}else{var r=q.getForce();var s=metExploreD3.GraphNetwork.isAnimated(q.getId());if(s=="true"){var r=q.getForce();if(r!=undefined){if((metExploreD3.GraphNetwork.isAnimated(q.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(q.getId())==null)){r.start()}}}}}X=false},100)}}}else{var d=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(d!=undefined){if(d.isLinked()){var j=_metExploreViz.getSessionById("viz");if(j!=undefined){var c=metExploreD3.GraphNetwork.isAnimated(j.getId());if(c=="true"){var a=j.getForce();if(a!=undefined){if((metExploreD3.GraphNetwork.isAnimated(j.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(j.getId())==null)){a.start()}}}}}else{var a=d.getForce();var c=metExploreD3.GraphNetwork.isAnimated(d.getId());if(c=="true"){var a=d.getForce();if(a!=undefined){if(d3.select(metExploreD3.GraphNetwork.isAnimated(d.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(d.getId())==null)){a.start()}}}}}}d3.event.target.clear();d3.select(this).call(d3.event.target);var o=metExploreD3.getScaleById(U);d3.select("#"+U).selectAll("#D3viz").style("cursor","default");d3.select("#"+U).selectAll("#D3viz").call(o.getZoom()).on("dblclick.zoom",null).on("mousedown",null);d3.event.target.extent();d3.selectAll("#brush").classed("hide",false)}));var w=parseInt(metExploreD3.GraphPanel.getHeight(U));var V=parseInt(metExploreD3.GraphPanel.getWidth(U));d3.select("#"+U).select("#D3viz").append("foreignObject").attr("x",V-300).attr("y",100).attr("width","500").attr("height","500").append("xhtml:div").attr("id","tooltip2").classed("tooltip2",true).classed("hide",true);R.svg=d3.select("#"+U).select("#D3viz").call(metExploreD3.GraphNetwork.zoomListener).on("dblclick.zoom",null).attr("pointer-events","all").append("svg:g").attr("class","graphComponent").attr("id","graphComponent");if(ad!=undefined){var ac=ad.getForce();if(ad.isResizable()!=undefined&&ad.isResizable()!=false){metExploreD3.GraphNetwork.task.cancel()}ad.setResizable(true);metExploreD3.GraphNetwork.task=metExploreD3.createDelayedTask(function(){ad.setResizable(false)})}d3.select("#"+U).select("#D3viz").attr("animation",function(){if(ad.isAnimated()){return true}else{return false}}).append("svg:g").attr("class","buttonAnim").attr("id","buttonAnim").on("click",metExploreD3.GraphNetwork.play).style("cursor","hand").append("image").attr("xlink:href",function(){if(ad.isAnimated()){return document.location.href.split("index.html")[0]+"resources/icons/pause.svg"}else{return document.location.href.split("index.html")[0]+"resources/icons/play.svg"}}).attr("width","50").attr("height","50").attr("transform","translate(10,10) scale(.5)");d3.select("#"+U).select("#D3viz").append("svg:g").attr("class","buttonRescale").attr("id","buttonRescale").on("click",function(){metExploreD3.GraphNetwork.rescale(U)}).style("cursor","hand").append("image").attr("xlink:href",function(){return document.location.href.split("index.html")[0]+"resources/icons/rescale.png"}).attr("width","50").attr("height","50").attr("transform","translate(80,10) scale(.5)");d3.select("#"+U).select("#D3viz").append("svg:g").attr("class","whiteBlack").attr("id","whiteBlack").attr("x",(V-100)).attr("y",100).on("click",function(){if(d3.select("#"+U).style("-webkit-filter").search("grayscale")==-1&&d3.select("#"+U).style("filter").search("grayscale")==-1){d3.select("#"+U).style("filter","grayscale(100%)").style("-webkit-filter","grayscale(100%)")}else{d3.select("#"+U).style("filter","").style("-webkit-filter","")}}).style("cursor","hand").style("visibility","hidden").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/blackWhite.png").attr("width","50").attr("height","50").attr("transform","translate("+(V-100)+",100) scale(0.5)");d3.select("#"+U).select("#D3viz").append("svg:g").attr("class","invertColor").attr("id","invertColor").attr("x",(V-100)).attr("y",150).on("click",function(){if(d3.select("#"+U).style("-webkit-filter").search("invert")==-1&&d3.select("#"+U).style("filter").search("invert")==-1){d3.select("#"+U).style("filter","invert(100%)").style("-webkit-filter","invert(100%)")}else{d3.select("#"+U).style("filter","").style("-webkit-filter","")}}).style("cursor","hand").style("visibility","hidden").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/invertColor.svg").attr("width","50").attr("height","50").attr("transform","translate("+(V-100)+",150) scale(0.5)");d3.select("#"+U).select("#D3viz").append("svg:g").attr("class","buttonZoomIn").attr("id","buttonZoomIn").attr("x",(V-60)).attr("y",10).on("click",metExploreD3.GraphNetwork.zoomIn).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/zoomin.svg").attr("width","50").attr("height","50").style("opacity",0.2).attr("transform","translate("+(V-60)+",10) scale(1)").on("mouseover",function(a){d3.select(this).transition().duration(500).style("opacity",1)}).on("mouseout",function(a){d3.select(this).transition().duration(500).style("opacity",0.2)});d3.select("#"+U).select("#D3viz").append("svg:g").attr("class","buttonZoomOut").attr("id","buttonZoomOut").attr("x",(V-110)).attr("y",10).on("click",metExploreD3.GraphNetwork.zoomOut).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/zoomout.svg").attr("width","50").attr("height","50").style("opacity",0.2).attr("transform","translate("+(V-110)+",10) scale(1)").on("mouseover",function(a){d3.select(this).transition().duration(500).style("opacity",1)}).on("mouseout",function(a){d3.select(this).transition().duration(500).style("opacity",0.2)});d3.select("#"+U).select("#D3viz").append("svg:g").attr("class","buttonHand").attr("id","buttonHand").attr("x",(V-160)).attr("y",10).attr("scrollable","false").on("click",metExploreD3.GraphNetwork.moveGraph).style("opacity",1).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/handcursor.svg").attr("width","50").attr("height","50").attr("transform","translate("+(V-160)+",10) scale(1)");d3.select("#"+U).select("#D3viz").select("buttonHand").style("opacity",0);d3.select("#"+U).on("mouseover",function(){d3.select("#"+U).select("#D3viz").select("#buttonZoomOut").transition().duration(500).style("opacity",1);d3.select("#"+U).select("#D3viz").select("#buttonZoomIn").transition().duration(500).style("opacity",1);var a=_metExploreViz.getSessionById(U);if(a.isActive()){var b=d3.select("#"+U).select("#buttonHand").attr("scrollable");if(b=="false"){d3.select("#"+U).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",0.2)}else{d3.select("#"+U).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",1)}}}).on("mouseout",function(){d3.select("#"+U).select("#D3viz").select("#buttonZoomOut").transition().duration(500).style("opacity",0);d3.select("#"+U).select("#D3viz").select("#buttonZoomIn").transition().duration(500).style("opacity",0);d3.select("#"+U).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",0)});if(ad.isAnimated()){metExploreD3.GraphNetwork.setAnimated(U,true)}else{metExploreD3.GraphNetwork.setAnimated(U,false)}var P=metExploreD3.getLinkStyle();var O=metExploreD3.getMetaboliteStyle();metExploreD3.GraphLink.refreshLink(U,ad,P,O);metExploreD3.GraphNode.refreshNode(U);if(U!="viz"){d3.select("#"+U).select("#D3viz").append("svg:g").attr("class","buttonLink").attr("id","buttonLink").attr("isLink","false").on("click",metExploreD3.GraphNetwork.setLink).style("cursor","hand").append("image").attr("xlink:href",function(){if(ad.isLinked()){return document.location.href.split("index.html")[0]+"resources/icons/link.svg"}else{return document.location.href.split("index.html")[0]+"resources/icons/unlink.svg"}}).attr("width","50").attr("height","50").attr("transform","translate(10,50) scale(.5)")}else{metExploreD3.GraphNetwork.looksLinked();if(ad.isLinked()){metExploreD3.GraphNetwork.graphAlignment(U)}}var Y=ad.getD3Data();var ac=ad.getForce();ac.nodes(Y.getNodes()).links(Y.getLinks()).on("tick",function(b){var a=metExploreD3.getGeneralStyle().useClusters();var c=metExploreD3.getGeneralStyle().isDisplayedConvexhulls();if(a&&c!=false){var d=b.alpha*0.1;Y.getNodes().forEach(function(o){if(c=="Compartments"){var m=null;if(o.getBiologicalType()=="metabolite"){m=o.getCompartment()}else{var p=[];for(var q in ad.groups){if(ad.groups.hasOwnProperty(q)){var g=ad.groups[q].values.indexOf(o);if(g!=-1){p.push(ad.groups[q].key)}}}if(p.length<2){m=p[0]}}if(m!=null){var f=_metExploreViz.getSessionById(U).getForceCentroids();var j=f.nodes().find(function(r){return r.id==m});o.x+=(j.x-o.x)*d;o.y+=(j.y-o.y)*d}}else{if(c=="Pathways"&&o.getPathways().length<2){var m=ad.getGroupByKey(o.getPathways()[0]);if(m!=null){var f=_metExploreViz.getSessionById(U).getForceCentroids();var j=f.nodes().find(function(r){return r.id==o.getPathways()[0]});o.x+=(j.x-o.x)*d;o.y+=(j.y-o.y)*d}}}})}if(ac.alpha()>=0.005){setTimeout(metExploreD3.GraphNetwork.tick(U),0)}});if(ad.isAnimated()){ac.start()}else{ac.start();ac.stop();metExploreD3.GraphNetwork.tick(U)}var J=M.isDisplayedConvexhulls();if(J&&U=="viz"){metExploreD3.GraphLink.displayConvexhulls(U)}ad.setForce(ac);metExploreD3.sortCompartmentInBiosource();metExploreD3.GraphNode.colorStoreByCompartment(metExploreD3.GraphNode.node)},rescale:function(E){var y=d3.select("#"+E).select("#D3viz")[0][0].getElementById("graphComponent").getBoundingClientRect();var w=document.getElementById(E).getBoundingClientRect();var z=w.bottom-w.top-20;var s=y.bottom-y.top;var B=metExploreD3.getScaleById(E);var v=B.getZoom();var A=z*v.scale()/s;B.setZoomScale(A);var C=y.right-y.left;var s=y.bottom-y.top;var z=w.bottom-w.top-20;var u=w.right-w.left-20;d3.select("#"+E).select("#D3viz").select("#graphComponent");var t=B.getZoom();t.scale(A);var D=(u/2-((u/2)*t.scale()));var F=(z/2-((z/2)*t.scale()));t.translate([D,F]);d3.select("#"+E).select("#D3viz").select("#graphComponent").attr("transform","translate("+D+","+F+")scale("+A+")");metExploreD3.GraphLink.tick(E,B);metExploreD3.GraphNode.tick(E)},initCentroids:function(){var B="viz";var v=parseInt(metExploreD3.GraphPanel.getHeight(B));var r=parseInt(metExploreD3.GraphPanel.getWidth(B));var w=metExploreD3.getLinkStyle();var s=metExploreD3.getGeneralStyle();var t=_metExploreViz.getSessionById(B);var y=t.getD3Data();var A=d3.layout.force().friction(0.9).gravity(0.08).charge(-4000).theta(0.2).linkDistance(600).size([r,v]);t.setForceCentroids(A);var z=metExploreD3.getGeneralStyle().isDisplayedConvexhulls();var u=[];if(z=="Compartments"){y.getCompartments().forEach(function(a){u.push({id:a.identifier,x:2,y:2})});var h=[];d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(a){return a.getBiologicalType()=="reaction"}).filter(function(a){var c=0;for(var d in t.groups){if(t.groups.hasOwnProperty(d)){if(t.groups[d].values!=undefined){return false}var b=t.groups[d].values.indexOf(a);if(b!=-1){c++}}}return c.length>1}).each(function(a){a.getCompartment().forEach(function(b){a.getCompartment().forEach(function(d){if(b!=d){var g=u.findIndex(function(j){return j.id==b});var f=u.findIndex(function(j){return j.id==d});var c=h.find(function(j){return j.source==g&&j.target==f});if(c==undefined){h.push({source:g,target:f})}}})})})}else{y.getPathways().forEach(function(a){u.push({id:a,x:2,y:2})});var h=[];d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(a){return a.getPathways().length>1}).each(function(a){a.getPathways().forEach(function(b){a.getPathways().forEach(function(f){if(b!=f){var g=u.findIndex(function(j){return j.id==b});var d=u.findIndex(function(j){return j.id==f});var c=h.find(function(j){return j.source==g&&j.target==d});if(c==undefined){h.push({source:g,target:d})}}})})})}A.nodes(u).links(h).start()},moveGraph:function(){_MyThisGraphNode.dblClickable=false;var d=this.parentNode.parentNode.id;var c=d3.select("#"+d).select("#buttonHand").attr("scrollable");if(c=="false"){d3.select("#"+d).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",1);d3.select("#"+d).select("#buttonHand").attr("scrollable",true)}else{d3.select("#"+d).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",0.2);d3.select("#"+d).select("#buttonHand").attr("scrollable",false)}},graphAlignment:function(h){var m=_metExploreViz.getSessionById(h);if(h!="viz"){var g=_metExploreViz.getSessionById("viz");d3.select("#"+h).select("#D3viz").select("#graphComponent").selectAll("g.node").each(function(a){var b=this;var c=d3.select(b).select("rect").style("fill");d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").each(function(f){if(f.getId()==a.getId()){a.x=f.x;a.y=f.y;if(f.getMappingDatasLength()>0){f.getMappingDatas().forEach(function(p){if(p.getMapValue()==undefined){a.addMappingData(new MappingData(a,p.getMappingName().valueOf(),p.getConditionName().valueOf(),undefined))}else{a.addMappingData(new MappingData(a,p.getMappingName().valueOf(),p.getConditionName().valueOf(),p.getMapValue().valueOf()))}})}if(a.selected&&!f.isSelected()){_MyThisGraphNode.selection(f,"viz")}if(!a.selected&&f.isSelected()){_MyThisGraphNode.selection(a,h)}var u=d3.select(this).select("rect."+f.getBiologicalType()).style("fill");if(c!=u){d3.select(b).select("rect."+f.getBiologicalType()).style("fill",u);if(f.getBiologicalType()=="metabolite"){var w=metExploreD3.getMetaboliteStyle()}else{var w=metExploreD3.getReactionStyle();var v=metExploreD3.GraphUtils.chooseTextColor(u);d3.select(b).select("text").style("fill",v)}var d=d3.select(this).select("rect."+f.getBiologicalType()).attr("mapped");if(d>0){d3.select(b).insert("rect",":first-child").attr("class","stroke").attr("width",w.getWidth()+4).attr("height",w.getHeight()+4).attr("rx",w.getRX()).attr("ry",w.getRY()).attr("transform","translate(-"+parseInt(w.getWidth()+4)/2+",-"+parseInt(w.getHeight()+4)/2+")").style("opacity","0.5").style("fill","red")}m.setMappingDataType(g.getMappingDataType());m.setMapped(g.isMapped())}else{if(d3.select(this).select("rect.stroke")[0][0]!=null){var t=d3.select(this).select("rect.stroke").style("fill");if(f.getBiologicalType()=="reaction"){d3.select(b).attr("mapped","true").insert("rect",":first-child").attr("class","stroke").attr("width",parseInt(d3.select(this).select(".reaction").attr("width"))+10).attr("height",parseInt(d3.select(this).select(".reaction").attr("height"))+10).attr("rx",parseInt(d3.select(this).select(".reaction").attr("rx"))+5).attr("ry",parseInt(d3.select(this).select(".reaction").attr("ry"))+5).attr("transform","translate(-"+parseInt(parseInt(d3.select(this).select(".reaction").attr("width"))+10)/2+",-"+parseInt(parseInt(d3.select(this).select(".reaction").attr("height"))+10)/2+")").style("opacity","0.5").style("fill","red")}else{if(f.getBiologicalType()=="metabolite"){d3.select(b).attr("mapped","true").insert("rect",":first-child").attr("class","stroke").attr("width",parseInt(d3.select(this).select(".metabolite").attr("width"))+10).attr("height",parseInt(d3.select(this).select(".metabolite").attr("height"))+10).attr("rx",parseInt(d3.select(this).select(".metabolite").attr("rx"))+5).attr("ry",parseInt(d3.select(this).select(".metabolite").attr("ry"))+5).attr("transform","translate(-"+parseInt(parseInt(d3.select(this).select(".metabolite").attr("width"))+10)/2+",-"+parseInt(parseInt(d3.select(this).select(".metabolite").attr("height"))+10)/2+")").style("opacity","0.5").style("fill","red")}}m.setMappingDataType(g.getMappingDataType());m.setMapped(g.isMapped())}}}})});m.setActiveMapping(g.getActiveMapping().valueOf());m.resetColorMapping();g.getColorMappingsSet().forEach(function(a){m.addColorMapping(a.getName().valueOf(),a.getValue().valueOf())});var o=m.getForce();o.stop();var j=metExploreD3.getScaleById(h);metExploreD3.GraphLink.tick(h,j);metExploreD3.GraphNode.tick(h)}},scaledX:function(o,m){var p=metExploreD3.getSessionsSet();var q;if(m=="viz"){var r;for(var t in sessions){if(sessions[t].getId()=="viz"){r=sessions[t].getId()}}var s=parseInt(d3.select("#"+r).select("#D3viz").style("width"));var u=parseInt(d3.select("#viz").select("#D3viz").style("width"));q=(o*s)/u}else{var r;for(var t in sessions){if(sessions[t].getId()=="viz"){r=sessions[t].getId()}}var s=parseInt(d3.select("#"+m).select("#D3viz").style("width"));var u=parseInt(d3.select("#viz").select("#D3viz").style("width"));q=(o*u)/s}return q},scaledY:function(p,o){var q=metExploreD3.getSessionsSet();var m;if(o=="viz"){var r;for(var t in sessions){if(sessions[t].getId()=="viz"){r=sessions[t].getId()}}var s=parseInt(d3.select("#"+r).select("#D3viz").style("height"));var u=parseInt(d3.select("#viz").select("#D3viz").style("height"));m=(p*s)/u}else{var r;for(var t in sessions){if(sessions[t].getId()=="viz"){r=sessions[t].getId()}}var s=parseInt(d3.select("#"+o).select("#D3viz").style("height"));var u=parseInt(d3.select("#viz").select("#D3viz").style("height"));m=(p*u)/s}return Scaled},addLinkInDrawing:function(y,F,z,t,G,E){var u=_metExploreViz.getSessionById(E);var A=u.getD3Data();A.addLink(y,F,z,t,G);var w=metExploreD3.getMetaboliteStyle();var B=metExploreD3.getLinkStyle();var C=u.getForce();var H=_metExploreViz.getSessionById(E).getMappingDataType()=="Flux";var D={};if(H){d3.select("#"+E).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(a){if(F.getBiologicalType()=="metabolite"){return(a.getSource().getId()==F.getIdentifier()||a.getSource().getId()==z.getId())&&(a.getTarget().getId()==F.getIdentifier()||a.getTarget().getId()==z.getId())}else{return(a.getSource().getId()==F.getId()||a.getSource().getId()==z.getIdentifier())&&(a.getTarget().getId()==F.getId()||a.getTarget().getId()==z.getIdentifier())}}).each(function(a){var c;if(F.getBiologicalType()=="reaction"){c=F.getId()}else{c=z.getId()}var b;if(this.id=="linkRev"){b="linkRev"}else{b="link"}if(D[c]==undefined){D[c]={}}D[c][b]={fill:d3.select(this).style("fill"),strokeDasharray:d3.select(this).style("stroke-dasharray")}});var v=d3.select("#"+E).select("#D3viz").select("#graphComponent").selectAll("path.link").data(C.links(),function(a){return a.source.id+"-"+a.target.id}).enter().insert("svg:g",":first-child");v.each(function(a){d3.select(this).filter(function(b){var c;if(F.getBiologicalType()=="reaction"){c=F.getId()}else{c=z.getId()}return D[c].link!=undefined}).append("svg:path").attr("class",String).attr("d",function(b){return metExploreD3.GraphLink.funcPathForFlux(b,E,this.id)}).attr("class","link").attr("fill-rule","evenodd").style("stroke",B.getStrokeColor()).style("stroke-width",0.5).style("opacity",0.1).style("stroke-dasharray",function(b){var c;if(F.getBiologicalType()=="reaction"){c=F.getId()}else{c=z.getId()}return D[c].link.strokeDasharray}).style("fill",function(b){var c;if(F.getBiologicalType()=="reaction"){c=F.getId()}else{c=z.getId()}return D[c].link.fill}).on("mouseover",function(d){var f,j,o,g;if(d.getSource().getBiologicalType()=="reaction"){f=d.getSource();j=d.getTarget()}else{f=d.getTarget();j=d.getSource()}o=d.getSource();g=d.getTarget();var q=_metExploreViz.getSessionById("viz").getActiveMapping();var m=_metExploreViz.getMappingByName(q);var b=m.getConditions();var c=f.getMappingDataByNameAndCond(q,b[0]);if(c!=null){var p=c.getMapValue();if(p<0){g=d.getSource();o=d.getTarget()}}if(!document.getElementById("tooltip2").classList.contains("fixed")){var h="Name: "+d.id+"<br/><b>Source:</b> "+o.getName()+"<br/><b>Target:</b> "+g.getName()+((p!=undefined)?"<br/>Flux: "+Math.abs(p):"");h+="<br/>";document.getElementById("tooltip2").innerHTML=h;document.getElementById("tooltip2").classList.remove("hide")}}).on("mouseout",function(b){document.getElementById("tooltip2").classList.add("hide")});d3.select(this).filter(function(b){var c;if(F.getBiologicalType()=="reaction"){c=F.getId()}else{c=z.getId()}return D[c].linkRev!=undefined}).append("svg:path").attr("class",String).attr("id","linkRev").attr("d",function(b){return metExploreD3.GraphLink.funcPathForFlux(b,E,this.id)}).attr("class","link").attr("fill-rule","evenodd").style("stroke",B.getStrokeColor()).style("stroke-width",0.5).style("opacity",0.1).style("stroke-dasharray",function(b){var c;if(F.getBiologicalType()=="reaction"){c=F.getId()}else{c=z.getId()}return D[c].linkRev.strokeDasharray}).style("fill",function(b){var c;if(F.getBiologicalType()=="reaction"){c=F.getId()}else{c=z.getId()}return D[c].linkRev.fill}).on("mouseover",function(d){var f,j,o,g;if(d.getSource().getBiologicalType()=="reaction"){f=d.getSource();j=d.getTarget()}else{f=d.getTarget();j=d.getSource()}o=d.getSource();g=d.getTarget();var q=_metExploreViz.getSessionById("viz").getActiveMapping();var m=_metExploreViz.getMappingByName(q);var b=m.getConditions();var c=f.getMappingDataByNameAndCond(q,b[1]);if(c!=null){var p=c.getMapValue();if(p<0){g=d.getSource();o=d.getTarget()}}if(!document.getElementById("tooltip2").classList.contains("fixed")){var h="Name: "+d.id+"<br/><b>Source: </b>"+o.getName()+"<br/><b>Target: </b>"+g.getName()+((p!=undefined)?"<br/>Flux: "+Math.abs(p):"");h+="<br/>";document.getElementById("tooltip2").innerHTML=h;document.getElementById("tooltip2").classList.remove("hide")}}).on("mouseout",function(b){document.getElementById("tooltip2").classList.add("hide")})})}else{link=d3.select("#"+E).select("#graphComponent").selectAll("path.link").data(C.links(),function(a){return a.source.id+"-"+a.target.id}).enter().insert("path",":first-child").attr("class",String).attr("d",function(a){return metExploreD3.GraphLink.funcPath4(a,E)}).attr("class","link").attr("fill-rule","evenodd").attr("fill",function(a){if(a.interaction=="out"){return B.getMarkerOutColor()}else{return B.getMarkerInColor()}}).style("stroke",B.getStrokeColor()).style("stroke-width",0.5).style("opacity",0.5).attr("x1",F.x).attr("y1",F.y).attr("x2",z.x).attr("y2",z.y)}},addMetaboliteInDrawing:function(P,I,S,N){var W=I+"-"+S;var Z=_metExploreViz.getSessionById(N);var V=Z.getD3Data();var Y=Z.getForce();var O=metExploreD3.getMetaboliteStyle();var E=metExploreD3.getGeneralStyle();var H=d3.behavior.drag().on("dragstart",_MyThisGraphNode.dragstart).on("drag",_MyThisGraphNode.dragmove).on("dragend",_MyThisGraphNode.dragend);var M=metExploreD3.getScaleById(N);metExploreD3.fireEventParentWebSite("sideCompound",P);var X=V.addNode(P.getName(),P.getCompartment(),P.getDbIdentifier(),W,P.getReactionReversibility(),P.getBiologicalType(),false,P.getLabelVisible(),P.getSvg(),P.getSvgWidth(),P.getSvgHeight(),P.getIsSideCompound(),undefined,true,I,V.getNodeById(S).getPathways(),undefined,P.getLabel());if(P.getMappingDatasLength()!=0){P.getMappingDatas().forEach(function(a){V.getNodeById(W).addMappingData(new MappingData(P,a.getMappingName(),a.getConditionName(),a.getMapValue()))})}var F=d3.select("#"+N).select("#D3viz").select("#graphComponent").selectAll("g.node");var J=false;var G=F.filter(function(a){return a.getId()==I});G.each(function(){J=this.getAttribute("mapped")});F=F.data(Y.nodes(),function(a){return a.getId()});F.enter().append("svg:g").attr("class","node").attr("duplicated",function(a){return"true"}).call(H).style("fill","white");F.filter(function(a){return a.getBiologicalType()=="metabolite"}).filter(function(a){return a.getId()==W}).style("stroke-opacity",0.5).addNodeForm(O.getWidth()/2,O.getHeight()/2,O.getRX()/2,O.getRY()/2,O.getStrokeColor(),O.getStrokeWidth()/2);F.filter(function(a){return a.getBiologicalType()=="metabolite"}).filter(function(a){return a.getId()==W}).on("mouseenter",function(a){var b=d3.select("#"+N).select("#D3viz").select("#graphComponent").selectAll("g.node");d3.select(this).each(function(c){var d=b[0][b.size()-1];this.parentNode.insertBefore(this,d)}).attr("transform","translate("+a.x+", "+a.y+") scale(2)")}).on("mouseover",function(a){a.fixed=true;F.filter(function(f){return f==a}).select(".locker").classed("hide",false).select(".iconlocker").attr("xlink:href",function(f){if(f.isLocked()){return"resources/icons/lock_font_awesome.svg"}else{return"resources/icons/unlock_font_awesome.svg"}});if(a.getBiologicalType()=="reaction"){d3.select("#"+N).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(f){return a.getId()==f.getSource().getId()}).style("stroke","green");d3.select("#"+N).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(f){return a.getId()==f.getTarget().getId()}).style("stroke","red")}else{d3.select("#"+N).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(f){return a.getId()==f.getSource().getId()}).style("stroke","red");d3.select("#"+N).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(f){return a.getId()==f.getTarget().getId()}).style("stroke","green")}var b=M.getXScale();var c=M.getYScale();if(!document.getElementById("tooltip2").classList.contains("fixed")){var d="<b>Name:</b> "+a.getName()+"<br/><b>Biological type:</b> "+a.getBiologicalType()+((a.getCompartment()!=undefined)?"<br/><b>Compartment:</b> "+a.getCompartment():"")+((a.getDbIdentifier()!=undefined)?"<br/><b>Database identifier:</b> "+a.getDbIdentifier():"")+((a.getEC()!=undefined)?"<br/><b>EC number:</b> "+a.getEC():"")+((a.getReactionReversibility()!=undefined)?"<br/><b>Reaction reversibility:</b> "+a.getReactionReversibility():"")+((a.getIsSideCompound()!=undefined)?"<br/><b>SideCompound:</b> "+a.getIsSideCompound():"")+((a.getMappingDatasLength()!=0)?((a.getMappingDatasLength()==1)?"<br/><b>Mapping:</b><br/><table style='width:100%; margin-left: 30px; padding-right: 30px;'>":"<br/><b>Mappings:</b><br/><table style='width:100%; margin-left: 30px; padding-right: 30px;'>"):"");a.getMappingDatas().forEach(function(f){d+="<tr><td>"+f.getMappingName()+"</td><td>"+f.getConditionName()+"</td><td>"+f.getMapValue()+"</td></tr>"});d+="</table>";if(a.getSvg()!=undefined&&a.getSvg()!="undefined"&&a.getSvg()!=""){d+='<br/><img src="resources/images/structure_metabolite/'+a.getSvg()+'"/>'}document.getElementById("tooltip2").innerHTML=d;document.getElementById("tooltip2").classList.remove("hide")}}).on("mouseleave",function(a){d3.select(this).attr("transform","translate("+a.x+", "+a.y+") scale(1)");if(!a.isLocked()){a.fixed=false}F.filter(function(c){return c==a}).select(".locker").classed("hide",true);var b=metExploreD3.getLinkStyle();document.getElementById("tooltip2").classList.add("hide");d3.select("#"+N).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(c){return a.getId()==c.getSource().getId()||a.getId()==c.getTarget().getId()}).style("stroke",b.getStrokeColor());if(a.getBiologicalType()=="reaction"){d3.select(this).selectAll("rect").selectAll(".reaction, .fontSelected").transition().duration(750).attr("width",reactionStyle.getWidth()).attr("height",reactionStyle.getHeight()).attr("transform","translate(-"+reactionStyle.getWidth()/2+",-"+reactionStyle.getHeight()/2+")")}else{d3.select(this).selectAll("rect").selectAll(".reaction, .fontSelected").transition().duration(750).attr("width",O.getWidth()).attr("height",O.getHeight()).attr("transform","translate(-"+O.getWidth()/2+",-"+O.getHeight()/2+")")}});var L=F.filter(function(a){return a.getId()==W});metExploreD3.GraphNode.colorStoreByCompartment(L);if(V.getNodes().length<E.getReactionThreshold()||!E.isDisplayedLabelsForOpt()){var K=Math.min(O.getWidth()/2,O.getHeight()/2);F.filter(function(a){return a.getId()==W}).filter(function(a){return a.getLabelVisible()==true}).filter(function(a){return a.getBiologicalType()=="metabolite"}).filter(function(a){return a.getSvg()=="undefined"||a.getSvg()==undefined||a.getSvg()==""}).append("svg:text").attr("fill","black").attr("class",function(a){return a.getBiologicalType()}).text(function(a){var b=a.getName();if(a.getLabel()!=undefined){b=a.getLabel()}return $("<div/>").html(b).text()}).style("font-size",function(a){return Math.min((2*K/2),(2*K/2-3)/this.getComputedTextLength()*10)+"px"}).attr("dy",".3em").style("pointer-events","none").style("opacity",0.5);F.filter(function(a){return a.getId()==W}).filter(function(a){return a.getLabelVisible()==true}).filter(function(a){return a.getBiologicalType()=="metabolite"}).filter(function(a){return a.getSvg()!="undefined"&&a.getSvg()!=undefined&&a.getSvg()!=""}).append("svg:text").attr("fill","black").attr("class",function(a){return a.getBiologicalType()}).text(function(a){var b=a.getName();if(a.getLabel()!=undefined){b=a.getLabel()}return $("<div/>").html(b).text()}).style("font-size",function(a){return Math.min((K)/2,((K-3)/this.getComputedTextLength()*10)/2)+"px"}).attr("dy",".3em").style("pointer-events","none").attr("y",+(3/4*(K/2)));F.filter(function(a){return a.getId()==W}).filter(function(a){return(a.getBiologicalType()=="metabolite"&&a.getSvg()!="undefined"&&a.getSvg()!=undefined&&a.getSvg()!="")}).append("svg").attr("viewBox",function(a){return"0 0 "+K+" "+K}).attr("width",K*8/10+"px").attr("height",K*8/10+"px").attr("x",(-K/2)+(K*1/10)).attr("preserveAspectRatio","xMinYMin").attr("y",(-K/2)+(K*1/10)).attr("class","structure_metabolite").append("image").style("opacity",0.5).attr("xlink:href",function(a){return"resources/images/structure_metabolite/"+a.getSvg()}).attr("width","100%").attr("height","100%");var R=F.filter(function(a){return a.getId()==W}).insert("svg",":first-child").attr("viewBox",function(a){+" "+K}).attr("width",O.getWidth()/2).attr("height",O.getHeight()/2).attr("preserveAspectRatio","xMinYMin").attr("y",-O.getHeight()/2).attr("x",-O.getWidth()/2).attr("class","locker").classed("hide",true);R.append("svg:path").attr("class","backgroundlocker").attr("d",function(a){var b="M"+O.getWidth()/2+","+O.getHeight()/2+" L0,"+O.getHeight()/2+" L0,"+O.getRY()*2/2+" A"+O.getRX()*2/2+","+O.getRY()*2/2+",0 0 1 "+O.getRX()*2/2+",0 L"+O.getWidth()/2+",0";return b}).attr("opacity","0.20").attr("fill","black");R.append("image").attr("class","iconlocker").attr("y",O.getHeight()/4/2-(O.getHeight()/2-O.getRY()*2/2)/8).attr("x",O.getWidth()/4/2-(O.getWidth()/2-O.getRX()*2/2)/8).attr("width","40%").attr("height","40%");F.filter(function(a){return a.getId()==W}).filter(function(a){return a.getLabelVisible()==true}).filter(function(a){return a.getBiologicalType()=="reaction"}).append("svg:text").attr("fill","black").attr("class",function(a){return a.getBiologicalType()}).text(function(a){var b=a.getName();if(a.getLabel()!=undefined){b=a.getLabel()}return $("<div/>").html(b).text()}).style("font-size",function(a){return Math.min(2*K,(K-2)/this.getComputedTextLength()*10)+"px"}).attr("dy",".3em")}if(J!=undefined&&J!=false&&J!="false"){if(J==true||J=="true"){F.filter(function(a){return a.getId()==W}).attr("mapped","true").insert("rect",":first-child").attr("class","stroke").attr("width",O.getWidth()/2+10).attr("height",O.getHeight()/2+10).attr("rx",O.getRX()/2+5).attr("ry",O.getRY()/2+5).attr("transform","translate(-"+parseInt(O.getWidth()/2+10)/2+",-"+parseInt(O.getWidth()/2+10)/2+")").style("opacity","0.5").style("fill","red")}else{var D=J;F.filter(function(a){return a.getId()==W}).attr("mapped",D).style("fill",D)}}var T=100;var U=100;F.filter(function(a){return a.getBiologicalType()=="reaction"}).filter(function(a){return a.getId()==S}).each(function(b){var c=b.x-P.x;var d=b.y-P.y;var a=Math.sqrt(Math.pow(c,2)+Math.pow(d,2));T=b.x-(40*c)/a;U=b.y-(40*d)/a});F.filter(function(a){return a.getBiologicalType()=="metabolite"}).filter(function(a){return a.getId()==W}).attr("transform",function(a){return"translate("+T+","+U+")"}).each(function(a){a.px=T;a.py=U;a.x=T;a.y=U});var Q=undefined;Z.groups.forEach(function(a){if(Q=="compartment"){if(a.key==X.getCompartment()){a.values.push(X)}}else{var b=X.getPathways().find(function(c){return a.key==c});if(b!=undefined){a.values.push(X)}}});if(metExploreD3.GraphNetwork.isAnimated(N)==true||metExploreD3.GraphNetwork.isAnimated(N)=="true"){Y.start()}return X},duplicateANode:function(L,H){var K=_metExploreViz.getSessionById(H);K.addDuplicatedNode(L.getId());var G=K.getForce();var A=K.getD3Data();var I,J;J=[];I=[];var F=d3.select("#"+H).select("#D3viz");var E=d3.behavior.drag().on("dragstart",function(a){_MyThisGraphNode.dragstart(a)}).on("drag",function(a){_MyThisGraphNode.dragmove(a)}).on("dragend",_MyThisGraphNode.dragend);var B=metExploreD3.getScaleById(H);F.selectAll("path.link").filter(function(a){return a.getInteraction()!="hiddenForce"}).each(function(c){var b=c.source;var a=c.target;if(b==L){if(I.indexOf(a)==-1){I.push(a)}}else{if(a==L){if(J.indexOf(b)==-1){J.push(b)}}}});I.forEach(function(c){var b=L.getId()+"-"+c.getId();var a=metExploreD3.GraphNetwork.addMetaboliteInDrawing(L,L.getId(),c.getId(),H);metExploreD3.GraphNetwork.addLinkInDrawing(b+"-"+c.getId(),a,c,"in",c.getReactionReversibility(),H)});J.forEach(function(c){var b=L.getId()+"-"+c.getId();var a=metExploreD3.GraphNetwork.addMetaboliteInDrawing(L,L.getId(),c.getId(),H);metExploreD3.GraphNetwork.addLinkInDrawing(c.getId()+"-"+b,c,a,"out",c.getReactionReversibility(),H)});var v=metExploreD3.getMetaboliteStyle();var z=metExploreD3.getReactionStyle();var y=Math.max(z.getWidth(),z.getHeight());var w=Math.max(v.getWidth(),v.getHeight());var D=Math.max(y,w);var C=metExploreD3.getLinkStyle();G.linkDistance(function(a){if(a.getSource().getIsSideCompound()||a.getTarget().getIsSideCompound()){return C.getSize()/2+D}else{return C.getSize()+D}})},duplicateSideCompounds:function(g,o){if(g==undefined){g="viz"}var j=d3.select("#"+g).select("#D3viz");var m=[];var h=metExploreD3.createLoadMask("Duplicate in progress...",g);if(h!=undefined){metExploreD3.showMask(h);metExploreD3.deferFunction(function(){j.selectAll("g.node").filter(function(d){return d.getIsSideCompound()&&d.getBiologicalType()=="metabolite"}).filter(function(d){if(this.getAttribute("duplicated")==undefined){return true}else{return !this.getAttribute("duplicated")}}).each(function(d){metExploreD3.GraphNetwork.duplicateSideCompound(d,g);m.push(d)});metExploreD3.hideMask(h);m.forEach(function(d){metExploreD3.GraphNetwork.removeANode(d,g)});if(_metExploreViz.isLinkedByTypeOfMetabolite()){metExploreD3.GraphLink.linkTypeOfMetabolite()}var a=_metExploreViz.getSessionsSet();var c=_metExploreViz.getSessionById(g);if(o!=undefined){o()}if(g!="viz"&&c.isLinked()){metExploreD3.fireEvent("graphPanel","afterDuplicate")}else{for(var b in a){if(a[b].isLinked()&&a[b].getId()!="viz"){metExploreD3.deferFunction(function(){a[b].setLinked(false);metExploreD3.GraphNetwork.looksLinked();var f=a[b].getForce();var d=_metExploreViz.getSessionById("viz");if(a[b]!=undefined){if(d.getDuplicatedNodesCount()>0){var f=a[b].getForce();a[b].setLinked(true);d.setLinked(true);metExploreD3.GraphNetwork.duplicateSideCompounds(a[b].getId());metExploreD3.GraphNetwork.looksLinked();if(a[b].isLinked()){metExploreD3.GraphNetwork.graphAlignment(a[b].getId())}}else{metExploreD3.GraphNetwork.graphAlignment(a[b].getId());a[b].setLinked(true);d.setLinked(true)}}},100)}}}},1)}metExploreD3.GraphNetwork.initCentroids()},duplicateSideCompoundsById:function(o,g){var j=d3.select("#"+g).select("#D3viz");var m=[];var h=metExploreD3.createLoadMask("Duplicate in progress...",g);if(h!=undefined){metExploreD3.showMask(h);metExploreD3.deferFunction(function(){j.selectAll("g.node").filter(function(a){return o.indexOf(a.getId())!=-1}).filter(function(a){if(this.getAttribute("duplicated")==undefined){return true}else{return !this.getAttribute("duplicated")}}).each(function(a){metExploreD3.GraphNetwork.duplicateSideCompound(a,g);m.push(a)});metExploreD3.hideMask(h);m.forEach(function(a){metExploreD3.GraphNetwork.removeANode(a,g)});if(_metExploreViz.isLinkedByTypeOfMetabolite()){metExploreD3.GraphLink.linkTypeOfMetabolite()}},0)}metExploreD3.GraphNetwork.initCentroids()},duplicateSideCompoundsSelected:function(f){var h=d3.select("#"+f).select("#D3viz");var j=[];var g=metExploreD3.createLoadMask("Duplicate in progress...",f);if(g!=undefined){metExploreD3.showMask(g);metExploreD3.deferFunction(function(){h.selectAll("g.node").filter(function(d){return d.isSelected()&&d.getBiologicalType()=="metabolite"}).filter(function(d){if(this.getAttribute("duplicated")==undefined){return true}else{return !this.getAttribute("duplicated")}}).each(function(d){if(metExploreD3.getMetabolitesSet()!=undefined){var o=metExploreD3.getMetaboliteById(metExploreD3.getMetabolitesSet(),d.getId());o.set("sideCompound",true)}d.setIsSideCompound(true);metExploreD3.GraphNetwork.duplicateSideCompound(d,f);j.push(d)});metExploreD3.hideMask(g);j.forEach(function(d){metExploreD3.GraphNetwork.removeANode(d,f)});if(_metExploreViz.isLinkedByTypeOfMetabolite()){metExploreD3.GraphLink.linkTypeOfMetabolite()}var a=_metExploreViz.getSessionsSet();var c=_metExploreViz.getSessionById(f);if(f!="viz"&&c.isLinked()){metExploreD3.fireEvent("graphPanel","afterDuplicate")}else{for(var b in a){if(a[b].isLinked()&&a[b].getId()!="viz"){metExploreD3.deferFunction(function(){a[b].setLinked(false);metExploreD3.GraphNetwork.looksLinked();var d=a[b].getForce();var o=_metExploreViz.getSessionById("viz");if(a[b]!=undefined){if(o.getDuplicatedNodesCount()>0){var d=a[b].getForce();a[b].setLinked(true);o.setLinked(true);metExploreD3.GraphNetwork.duplicateSideCompoundsSelected(a[b].getId());metExploreD3.GraphNetwork.looksLinked();if(a[b].isLinked()){metExploreD3.GraphNetwork.graphAlignment(a[b].getId())}}else{metExploreD3.GraphNetwork.graphAlignment(a[b].getId());a[b].setLinked(true);o.setLinked(true)}}},100)}}}},0)}metExploreD3.GraphNetwork.initCentroids()},duplicateASideCompoundSelected:function(j,g){var m=d3.select("#"+g).select("#D3viz");var o=[];var h=metExploreD3.createLoadMask("Duplicate in progress...",g);if(h!=undefined){metExploreD3.showMask(h);metExploreD3.deferFunction(function(){m.selectAll("g.node").filter(function(d){if(j.querySelector("rect.metabolite")!=null){return d.getId()==j.querySelector("rect.metabolite").id&&d.isSelected()&&d.getBiologicalType()=="metabolite"}else{return false}}).filter(function(d){if(this.getAttribute("duplicated")==undefined){return true}else{return !this.getAttribute("duplicated")}}).each(function(f){if(metExploreD3.getMetabolitesSet()!=undefined){var d=metExploreD3.getMetaboliteById(metExploreD3.getMetabolitesSet(),f.getId());d.set("sideCompound",true)}f.setIsSideCompound(true);metExploreD3.GraphNetwork.duplicateSideCompound(f,g);o.push(f)});metExploreD3.hideMask(h);o.forEach(function(d){metExploreD3.GraphNetwork.removeANode(d,g)});if(_metExploreViz.isLinkedByTypeOfMetabolite()){metExploreD3.GraphLink.linkTypeOfMetabolite()}var a=_metExploreViz.getSessionsSet();var c=_metExploreViz.getSessionById(g);if(g!="viz"&&c.isLinked()){metExploreD3.fireEvent("graphPanel","afterDuplicate")}else{for(var b in a){if(a[b].isLinked()&&a[b].getId()!="viz"){metExploreD3.deferFunction(function(){a[b].setLinked(false);metExploreD3.GraphNetwork.looksLinked();var f=a[b].getForce();var d=_metExploreViz.getSessionById("viz");if(a[b]!=undefined){if(d.getDuplicatedNodesCount()>0){var f=a[b].getForce();a[b].setLinked(true);d.setLinked(true);metExploreD3.GraphNetwork.duplicateASideCompoundSelected(j,a[b].getId());metExploreD3.GraphNetwork.looksLinked();if(a[b].isLinked()){metExploreD3.GraphNetwork.graphAlignment(a[b].getId())}}else{metExploreD3.GraphNetwork.graphAlignment(a[b].getId());a[b].setLinked(true);d.setLinked(true)}}},100)}}}},0)}metExploreD3.GraphNetwork.initCentroids()},duplicateSideCompound:function(m,h){var j=_metExploreViz.getSessionById(h);var o=d3.select("#"+h).select("#D3viz");if(j!=undefined){if(j.isLinked()){var j=_metExploreViz.getSessionById("viz");if(j!=undefined){var g=j.getForce();if(g!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"||metExploreD3.GraphNetwork.isAnimated("viz")==true){g.resume()}}}}else{var g=j.getForce();if(g!=undefined){if(metExploreD3.GraphNetwork.isAnimated(h)=="true"||metExploreD3.GraphNetwork.isAnimated(h)==true){g.resume()}}}}metExploreD3.GraphNetwork.duplicateANode(m,h);if(j!=undefined){if(g!=undefined){if(metExploreD3.GraphNetwork.isAnimated(h)=="true"||metExploreD3.GraphNetwork.isAnimated(h)==true){g.start()}}}metExploreD3.GraphNetwork.initCentroids()},removeSelectedNode:function(g){var j=_metExploreViz.getSessionById(g);var m=j.getForce();var o=j.getD3Data();var h=metExploreD3.createLoadMask("Remove in process...",g);if(h!=undefined){metExploreD3.showMask(h);metExploreD3.deferFunction(function(){var b=d3.select("#"+g).select("#D3viz");if(a!=undefined){if(a.isLinked()){var a=_metExploreViz.getSessionById("viz");if(a!=undefined){var c=a.getForce();if(c!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){c.stop()}}}}else{var c=a.getForce();if(c!=undefined){if(metExploreD3.GraphNetwork.isAnimated(g)=="true"){c.stop()}}}}b.selectAll("g.node").filter(function(d){return d.isSelected()}).each(function(d){metExploreD3.GraphNetwork.removeANode(d,g)});metExploreD3.hideMask(h);metExploreD3.GraphNetwork.removeIsolatedNode(g);if(a!=undefined){if(c!=undefined){if(metExploreD3.GraphNetwork.isAnimated(g)=="true"){c.start()}}}},1)}metExploreD3.GraphNetwork.initCentroids()},removeOnlyClickedNode:function(m,h){var o=_metExploreViz.getSessionById(h);var p=o.getForce();var q=o.getD3Data();var j=metExploreD3.createLoadMask("Remove in process...",h);if(j!=undefined){metExploreD3.showMask(j);metExploreD3.deferFunction(function(){var b=d3.select("#"+h).select("#D3viz");if(a!=undefined){if(a.isLinked()){var a=metExploreD3.getSessionById(sessionsStore,"viz");if(a!=undefined){var c=a.getForce();if(c!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){c.resume()}}}}else{var c=a.getForce();if(c!=undefined){if(metExploreD3.GraphNetwork.isAnimated(h)=="true"){c.resume()}}}}metExploreD3.GraphNetwork.removeASelectedNode(m,h);metExploreD3.GraphNetwork.removeIsolatedNode(h);if(a!=undefined){if(c!=undefined){if(metExploreD3.GraphNetwork.isAnimated(h)=="true"){c.start()}}}metExploreD3.hideMask(j)},100)}},removeASelectedNode:function(o,h){var m=_metExploreViz.getSessionById(h);var j=metExploreD3.createLoadMask("Remove in process...",h);if(j!=undefined){metExploreD3.showMask(j);var p=d3.select("#"+h).select("#D3viz");if(m!=undefined){if(m.isLinked()){var m=metExploreD3.getSessionById(sessionsStore,"viz");if(m!=undefined){var q=m.getForce();if(q!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){q.resume()}}}}else{var q=m.getForce();if(q!=undefined){if(metExploreD3.GraphNetwork.isAnimated(h)=="true"){q.resume()}}}}metExploreD3.GraphNetwork.removeANode(o,h);if(m!=undefined){if(q!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){q.start()}}}metExploreD3.hideMask(j)}metExploreD3.GraphNetwork.initCentroids()},removeANode:function(p,m){var q=_metExploreViz.getSessionById(m);var r=q.getForce();var s=q.getD3Data();var o=[];var t=d3.select("#"+m).select("#D3viz");t.selectAll("path.link").filter(function(b){var a=b.source;var c=b.target;if(a==p||c==p){o.push(b)}return(a==p||c==p)}).remove();var u=t.selectAll("g.node");u.filter(function(a){return p==a}).transition().duration(1000).style("opacity",0).remove();setTimeout(function(){var b=q.getSelectedNodes();var a=b.indexOf(p.getId());if(a!=-1){b.splice(a,1)}q.groups.forEach(function(d){if(d.key==p.getCompartment()){var f=d.values.indexOf(p);if(f!=-1){d.values.splice(f,1)}if(d.values.length==0){f=q.groups.indexOf(d);if(f!=-1){q.groups.splice(f,1);d3.select("#"+m).select("#D3viz").select("path#"+d.key).remove()}}}p.getPathways().forEach(function(g){if(d.key==g){var h=d.values.indexOf(p);if(h!=-1){d.values.splice(h,1)}if(d.values.length==0){h=q.groups.indexOf(d);if(h!=-1){q.groups.splice(h,1);d3.select("#"+m).select("#D3viz").select("path#"+d.key).remove()}}}})});var a=r.nodes().indexOf(p);if(a!=-1){r.nodes().splice(a,1)}for(i=0;i<o.length;i++){var c=o[i];var a=r.links().indexOf(c);if(a!=-1){r.links().splice(a,1)}}},1)},removeIsolatedNode:function(v){var q=_metExploreViz.getSessionById(v);var t=q.getForce();var r=q.getD3Data();var p=[];var s=d3.select("#"+v).select("#D3viz");var o=[];var u=r.getNodes().map(function(a){return a.getId()});var w=false;s.selectAll("path.link").each(function(f){var b=f.source;var a=f.target;var d=u.indexOf(b.getId());if(d!=-1){u.splice(d,1)}var c=u.indexOf(a.getId());if(c!=-1){u.splice(c,1)}});s.selectAll("g.node").filter(function(a){return u.indexOf(a.getId())!=-1}).each(function(a){p.push(a)}).transition().duration(1000).style("opacity",0).remove();setTimeout(function(){for(i=0;i<p.length;i++){var a=p[i];q.groups.forEach(function(c){if(c.key==a.getCompartment()){var d=c.values.indexOf(a);if(d!=-1){c.values.splice(d,1)}if(c.values.length==0){d=q.groups.indexOf(c);if(d!=-1){q.groups.splice(d,1);d3.select("#"+v).select("#D3viz").select("path#"+c.key).remove()}}}a.getPathways().forEach(function(f){if(c.key==f){var g=c.values.indexOf(a);if(g!=-1){c.values.splice(g,1)}if(c.values.length==0){g=q.groups.indexOf(c);if(g!=-1){q.groups.splice(g,1);d3.select("#"+v).select("#D3viz").select("path#"+c.key).remove()}}}})});var b=t.nodes().indexOf(a);if(b!=-1){t.nodes().splice(b,1)}}for(i=0;i<p.length;i++){var a=p[i];var b=t.nodes().indexOf(a);if(b!=-1){t.nodes().splice(b,1)}}},10)},removeSideCompounds:function(){var b=d3.select("#viz").select("#D3viz");b.selectAll("g.node").filter(function(a){return a.getBiologicalType()=="metabolite"&&a.getIsSideCompound()}).each(function(a){metExploreD3.GraphNetwork.removeASelectedNode(a,"viz")});metExploreD3.GraphNetwork.removeIsolatedNode("viz");metExploreD3.GraphNetwork.initCentroids()},setAnimated:function(d,c){if(c){d3.select("#"+d).select("#D3viz").attr("animation","true");_metExploreViz.getSessionById(d).setAnimated(true)}else{d3.select("#"+d).select("#D3viz").attr("animation","false");_metExploreViz.getSessionById(d).setAnimated(false)}},isAnimated:function(b){return d3.select("#"+b).select("#D3viz").attr("animation")},selectAllNodes:function(b){return d3.select("#"+b).select("#D3viz").selectAll("g.node")},stopForce:function(c){var d=c.getForce();if(d!=undefined){d.stop();metExploreD3.GraphNetwork.setAnimated(c.getId(),false)}},loadSvg:function(J,G){var E=parseInt(metExploreD3.GraphPanel.getHeight(G));var I=parseInt(metExploreD3.GraphPanel.getWidth(G));var B=metExploreD3.getLinkStyle();var O=J.getForce();var w=metExploreD3.getScaleById(G);if(G=="viz"){metExploreD3.GraphCaption.drawCaption()}if(w==undefined){var K=metExploreD3.GraphNetwork;metExploreD3.GraphNetwork.zoomListener=d3.behavior.zoom().x(h).y(M).scaleExtent([0.01,30]).on("zoom",function(a){if(metExploreD3.GraphNetwork.zoomListener.scale()<0.8){d3.select("#"+G).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",true)}else{d3.select("#"+G).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",false)}var b=_metExploreViz.getSessionById(G);if(d3.event.sourceEvent!=null){if(d3.event.sourceEvent.type=="wheel"){b.setResizable(false)}}if(b.isActive()){K.zoom(G)}});w.add({graphName:G,xScale:h,yScale:M,zoomScale:1,xScaleCompare:1,yScaleCompare:1,zoomScaleCompare:metExploreD3.GraphNetwork.zoomListener.scale(),zoom:metExploreD3.GraphNetwork.zoomListener})}else{var K=metExploreD3.GraphNetwork;var h=d3.scale.linear().domain([0,I]).range([0,I]);var M=d3.scale.linear().domain([E,0]).range([E,0]);metExploreD3.GraphNetwork.zoomListener=d3.behavior.zoom().x(h).y(M).scaleExtent([0.01,30]).on("zoom",function(a){if(metExploreD3.GraphNetwork.zoomListener.scale()<0.8){d3.select("#"+G).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",true)}else{d3.select("#"+G).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",false)}var b=_metExploreViz.getSessionById(this.parentNode.id);if(d3.event.sourceEvent!=null){if(d3.event.sourceEvent.type=="wheel"){b.setResizable(false)}}if(b.isActive()){K.zoom(this.parentNode.id)}});w.setScale(h,M,1,1,1,metExploreD3.GraphNetwork.zoomListener.scale(),metExploreD3.GraphNetwork.zoomListener)}var F=d3.select("#"+G);F.svg=F.select("#D3viz").selectAll("*").remove();var C;var L=false;var N=d3.select("#"+G).select("#D3viz").append("g").datum(function(){return{selected:false,previouslySelected:false}}).attr("id","brush").attr("class","brush").call(d3.svg.brush().x(h).y(M).on("brushstart",function(f){var b=d3.select("#"+G).select("#buttonHand").attr("scrollable");_MyThisGraphNode.activePanel=this.parentNode.parentNode.id;var a=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(d3.event.sourceEvent.button!=1&&b!="true"){if(a!=undefined){if(a.isLinked()){var d=_metExploreViz.getSessionById("viz");if(d!=undefined){var c=d.getForce();if(c!=undefined){c.stop()}}}else{var c=a.getForce();if(c!=undefined){c.stop()}}}L=true;d3.select("#"+G).select("#brush").classed("hide",false);d3.select("#"+G).select("#D3viz").on("mousedown.zoom",null);C=d3.select("#"+G).select("#graphComponent").selectAll("g.node");C.each(function(g){g.previouslySelected=g.isSelected()})}else{var c=a.getForce();if(c!=undefined){c.stop()}d3.select("#"+G).selectAll("#D3viz").style("cursor","all-scroll");d3.selectAll("#brush").classed("hide",true)}}).on("brushend",function(){if(d3.event.sourceEvent.button!=1&&L){var j=d3.event.target.extent();if(j[1][0]-j[0][0]>20||j[1][1]-j[0][1]>20){var a;var j=d3.event.target.extent();var d=metExploreD3.getScaleById(G);var b=d.getZoomScale();var g=metExploreD3.createLoadMask("Selection in progress...",G);if(g!=undefined){metExploreD3.showMask(g);metExploreD3.deferFunction(function(){C.classed("selected",function(u){var v=d.getXScale();var t=d.getYScale();a=(v(j[0][0])<=v(u.x)&&v(u.x)<v(j[1][0]))&&(t(j[0][1])<=t(u.y)&&t(u.y)<t(j[1][1]));if((u.isSelected()==false&&a==true)||(u.isSelected()==true&&a==false&&!u.previouslySelected)){_MyThisGraphNode.selection(u,G)}return a});metExploreD3.hideMask(g);var q=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(q!=undefined){if(q.isLinked()){var p=_metExploreViz.getSessionById("viz");if(p!=undefined){var s=metExploreD3.GraphNetwork.isAnimated(p.getId());if(s=="true"){var r=p.getForce();if(r!=undefined){if((metExploreD3.GraphNetwork.isAnimated(p.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(p.getId())==null)){r.start()}}}}}else{var r=q.getForce();var s=metExploreD3.GraphNetwork.isAnimated(q.getId());if(s=="true"){var r=q.getForce();if(r!=undefined){if((metExploreD3.GraphNetwork.isAnimated(q.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(q.getId())==null)){r.start()}}}}}L=false},100)}}d3.event.target.clear();d3.select(this).call(d3.event.target);var d=metExploreD3.getScaleById(G);d3.select("#"+G).selectAll("#D3viz").style("cursor","default");d3.select("#"+G).selectAll("#D3viz").call(d.getZoom()).on("dblclick.zoom",null).on("mousedown",null)}else{var o=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(o!=undefined){if(o.isLinked()){var c=_metExploreViz.getSessionById("viz");if(c!=undefined){var m=metExploreD3.GraphNetwork.isAnimated(c.getId());if(m=="true"){var f=c.getForce();if(f!=undefined){if((metExploreD3.GraphNetwork.isAnimated(c.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(c.getId())==null)){f.start()}}}}}else{var f=o.getForce();var m=metExploreD3.GraphNetwork.isAnimated(o.getId());if(m=="true"){var f=o.getForce();if(f!=undefined){if(d3.select(metExploreD3.GraphNetwork.isAnimated(o.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(o.getId())==null)){f.start()}}}}}}d3.event.target.clear();d3.select(this).call(d3.event.target);var d=metExploreD3.getScaleById(G);d3.select("#"+G).selectAll("#D3viz").style("cursor","default");d3.select("#"+G).selectAll("#D3viz").call(d.getZoom()).on("dblclick.zoom",null).on("mousedown",null);d3.event.target.extent();d3.selectAll("#brush").classed("hide",false)}));F.svg=d3.select("#"+G).select("#D3viz").call(metExploreD3.GraphNetwork.zoomListener).on("dblclick.zoom",null).attr("pointer-events","all").append("svg:g").attr("class","graphComponent").attr("id","graphComponent");var P=_metExploreViz.getSessionById(G);if(P!=undefined){var O=P.getForce();if(O!=undefined){O.stop();metExploreD3.GraphNetwork.setAnimated(G,false)}if(P.isResizable()!=undefined){metExploreD3.GraphNetwork.task.cancel()}P.setResizable(true);metExploreD3.GraphNetwork.task=metExploreD3.createDelayedTask(function(){P.setResizable(false)})}var D=false;d3.select("#"+G).select("#D3viz").attr("animation",function(){if(D){return"true"}else{return"false"}}).append("svg:g").attr("class","buttonAnim").attr("id","buttonAnim").on("click",metExploreD3.GraphNetwork.play).style("cursor","hand").append("image").attr("xlink:href",function(){if(D){return document.location.href.split("index.html")[0]+"resources/icons/pause.svg"}else{return document.location.href.split("index.html")[0]+"resources/icons/play.svg"}}).attr("width","50").attr("height","50").attr("transform","translate(10,10) scale(.5)");d3.select("#"+G).select("#D3viz").append("svg:g").attr("class","buttonRescale").attr("id","buttonRescale").on("click",function(){metExploreD3.GraphNetwork.rescale(G)}).style("cursor","hand").append("image").attr("xlink:href",function(){return document.location.href.split("index.html")[0]+"resources/icons/rescale.png"}).attr("width","50").attr("height","50").attr("transform","translate(80,10) scale(.5)");d3.select("#"+G).select("#D3viz").append("svg:g").attr("class","buttonZoomIn").attr("id","buttonZoomIn").attr("x",(I-60)).attr("y",10).on("click",metExploreD3.GraphNetwork.zoomIn).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/zoomin.svg").attr("width","50").attr("height","50").style("opacity",0.2).attr("transform","translate("+(I-60)+",10) scale(1)").on("mouseover",function(a){d3.select(this).transition().duration(500).style("opacity",1)}).on("mouseout",function(a){d3.select(this).transition().duration(500).style("opacity",0.2)});d3.select("#"+G).select("#D3viz").append("svg:g").attr("class","buttonZoomOut").attr("id","buttonZoomOut").attr("x",(I-110)).attr("y",10).on("click",metExploreD3.GraphNetwork.zoomOut).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/zoomout.svg").attr("width","50").attr("height","50").style("opacity",0.2).attr("transform","translate("+(I-110)+",10) scale(1)").on("mouseover",function(a){d3.select(this).transition().duration(500).style("opacity",1)}).on("mouseout",function(a){d3.select(this).transition().duration(500).style("opacity",0.2)});d3.select("#"+G).select("#D3viz").append("svg:g").attr("class","buttonHand").attr("id","buttonHand").attr("x",(I-160)).attr("y",10).attr("scrollable","false").on("click",metExploreD3.GraphNetwork.moveGraph).style("opacity",1).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/handcursor.svg").attr("width","50").attr("height","50").attr("transform","translate("+(I-160)+",10) scale(1)");d3.select("#"+G).select("#D3viz").select("buttonHand").style("opacity",0);d3.select("#"+G).on("mouseover",function(){d3.select("#"+G).select("#D3viz").select("#buttonZoomOut").transition().duration(500).style("opacity",1);d3.select("#"+G).select("#D3viz").select("#buttonZoomIn").transition().duration(500).style("opacity",1);var a=_metExploreViz.getSessionById(G);if(a.isActive()){var b=d3.select("#"+G).select("#buttonHand").attr("scrollable");if(b=="false"){d3.select("#"+G).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",0.2)}else{d3.select("#"+G).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",1)}}}).on("mouseout",function(){d3.select("#"+G).select("#D3viz").select("#buttonZoomOut").transition().duration(500).style("opacity",0);d3.select("#"+G).select("#D3viz").select("#buttonZoomIn").transition().duration(500).style("opacity",0);d3.select("#"+G).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",0)});var P=_metExploreViz.getSessionById(G);var B=metExploreD3.getLinkStyle();var A=metExploreD3.getMetaboliteStyle();metExploreD3.GraphLink.loadLink(G,P,B,A);metExploreD3.GraphNode.loadNode(G);var H=document.createElement("div");H.id="tooltip2";H.className="tooltip2";metExploreD3.GraphNetwork.looksLinked();if(P.isLinked()){metExploreD3.GraphNetwork.graphAlignment(G)}metExploreD3.GraphNetwork.tick(G);metExploreD3.sortCompartmentInBiosource();metExploreD3.GraphNode.colorStoreByCompartment(metExploreD3.GraphNode.node)},loadSvgFromJSON:function(G){var E=parseInt(metExploreD3.GraphPanel.getHeight(G));var J=parseInt(metExploreD3.GraphPanel.getWidth(G));var B=metExploreD3.getLinkStyle();var Q=d3.layout.force().friction(0.9).gravity(0.06).charge(-150).linkDistance(B.getSize()).size([J,E]);var R=metExploreD3.getSessionById(G);R.setActivity(true);R.setForce(Q);if(G=="viz"){metExploreD3.GraphCaption.drawCaption()}var H=d3.scale.linear().domain([0,J]).range([0,J]);var O=d3.scale.linear().domain([E,0]).range([E,0]);if(metExploreD3.getScaleById(G)==undefined){var K=metExploreD3.GraphNetwork;var h=metExploreD3.getScaleById(G);var M=h.getZoom();M=d3.behavior.zoom().x(H).y(O).scaleExtent([0.01,30]).on("zoom",function(a){if(metExploreD3.GraphNetwork.zoomListener.scale()<0.8){d3.select("#"+G).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",true)}else{d3.select("#"+G).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",false)}var b=metExploreD3.getSessionById(G);if(d3.event.sourceEvent!=null){if(d3.event.sourceEvent.type=="wheel"){b.setResizable(false)}}if(b.isActive()){K.zoom(G)}});h.add({graphName:G,xScale:H,yScale:O,zoomScale:1,xScaleCompare:1,yScaleCompare:1,zoomScaleCompare:M.scale(),zoom:M})}else{var K=metExploreD3.GraphNetwork;var h=metExploreD3.getScaleById(G);var M=h.getZoom();M=d3.behavior.zoom().x(H).y(O).scaleExtent([0.01,30]).on("zoom",function(a){if(M.scale()<0.8){d3.select("#"+G).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",true)}else{d3.select("#"+G).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",false)}var b=metExploreD3.getSessionById(this.parentNode.id);if(d3.event.sourceEvent!=null){if(d3.event.sourceEvent.type=="wheel"){b.setResizable(false)}}if(b.isActive()){K.zoom(this.parentNode.id)}});h.getStoreByGraphName(G).setScale(H,O,1,1,1,M.scale(),M)}var F=d3.select("#"+G);F.svg=F.select("#D3viz").selectAll("*").remove();var C;var L=false;var P=d3.select("#"+G).select("#D3viz").append("g").datum(function(){return{selected:false,previouslySelected:false}}).attr("id","brush").attr("class","brush").call(d3.svg.brush().x(H).y(O).on("brushstart",function(d){var a=d3.select("#"+G).select("#buttonHand").attr("scrollable");_MyThisGraphNode.activePanel=this.parentNode.parentNode.id;var f=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(d3.event.sourceEvent.button!=1&&a!="true"){if(f!=undefined){if(f.isLinked()){var c=_metExploreViz.getSessionById("viz");if(c!=undefined){var b=c.getForce();if(b!=undefined){b.stop()}}}else{var b=f.getForce();if(b!=undefined){b.stop()}}}L=true;d3.select("#"+G).select("#brush").classed("hide",false);d3.select("#"+G).select("#D3viz").on("mousedown.zoom",null);C=d3.select("#"+G).select("#graphComponent").selectAll("g.node");C.each(function(g){g.previouslySelected=g.isSelected()})}else{var b=f.getForce();if(b!=undefined){b.stop()}d3.select("#"+G).selectAll("#D3viz").style("cursor","all-scroll");d3.selectAll("#brush").classed("hide",true)}}).on("brushend",function(){if(d3.event.sourceEvent.button!=1&&L){var g=d3.event.target.extent();if(g[1][0]-g[0][0]>20||g[1][1]-g[0][1]>20){var o;var g=d3.event.target.extent();var c=metExploreD3.getScaleById(G);var a=c.getZoomScale();var f=metExploreD3.createLoadMask("Selection in progress...",G);if(f!=undefined){metExploreD3.showMask(f);metExploreD3.deferFunction(function(){C.classed("selected",function(t){var u=c.getXScale();var v=c.getYScale();o=(u(g[0][0])<=u(t.x)&&u(t.x)<u(g[1][0]))&&(v(g[0][1])<=v(t.y)&&v(t.y)<v(g[1][1]));if((t.isSelected()==false&&o==true)||(t.isSelected()==true&&o==false&&!t.previouslySelected)){_MyThisGraphNode.selection(t,G)}return o});metExploreD3.hideMask(f);var q=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(q!=undefined){if(q.isLinked()){var p=_metExploreViz.getSessionById("viz");if(p!=undefined){var s=metExploreD3.GraphNetwork.isAnimated(p.getId());if(s=="true"){var r=p.getForce();if(r!=undefined){if((metExploreD3.GraphNetwork.isAnimated(p.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(p.getId())==null)){r.start()}}}}}else{var r=q.getForce();var s=metExploreD3.GraphNetwork.isAnimated(q.getId());if(s=="true"){var r=q.getForce();if(r!=undefined){if((metExploreD3.GraphNetwork.isAnimated(q.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(q.getId())==null)){r.start()}}}}}L=false},100)}}d3.event.target.clear();d3.select(this).call(d3.event.target);var c=metExploreD3.getScaleById(G);d3.select("#"+G).selectAll("#D3viz").style("cursor","default");d3.select("#"+G).selectAll("#D3viz").call(c.getZoom()).on("dblclick.zoom",null).on("mousedown",null)}else{var m=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(m!=undefined){if(m.isLinked()){var b=_metExploreViz.getSessionById("viz");if(b!=undefined){var j=metExploreD3.GraphNetwork.isAnimated(b.getId());if(j=="true"){var d=b.getForce();if(d!=undefined){if((metExploreD3.GraphNetwork.isAnimated(b.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(b.getId())==null)){d.start()}}}}}else{var d=m.getForce();var j=metExploreD3.GraphNetwork.isAnimated(m.getId());if(j=="true"){var d=m.getForce();if(d!=undefined){if(d3.select(metExploreD3.GraphNetwork.isAnimated(m.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(m.getId())==null)){d.start()}}}}}}d3.event.target.clear();d3.select(this).call(d3.event.target);var c=metExploreD3.getScaleById(G);d3.select("#"+G).selectAll("#D3viz").style("cursor","default");d3.select("#"+G).selectAll("#D3viz").call(c.getZoom()).on("dblclick.zoom",null).on("mousedown",null);d3.event.target.extent();d3.selectAll("#brush").classed("hide",false)}));var h=metExploreD3.getScaleById(G);var M=h.getZoom();F.svg=d3.select("#"+G).select("#D3viz").call(M).on("dblclick.zoom",null).attr("pointer-events","all").append("svg:g").attr("class","graphComponent").attr("id","graphComponent");var R=_metExploreViz.getSessionById(G);if(R!=undefined){var Q=R.getForce();if(Q!=undefined){Q.stop();metExploreD3.GraphNetwork.setAnimated(G,false)}if(R.isResizable()!=undefined&&R.isResizable()!=false){metExploreD3.GraphNetwork.task.cancel()}R.setResizable(true);metExploreD3.GraphNetwork.task=metExploreD3.createDelayedTask(function(){R.setResizable(false)})}d3.select("#"+G).select("#D3viz").attr("animation","true").append("svg:g").attr("class","buttonAnim").attr("id","buttonAnim").on("click",metExploreD3.GraphNetwork.play).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/pause.svg").attr("width","50").attr("height","50").attr("transform","translate(10,10) scale(.5)");d3.select("#"+G).select("#D3viz").append("svg:g").attr("class","whiteBlack").attr("id","whiteBlack").attr("x",(J-100)).attr("y",100).on("click",function(){if(d3.select("#"+G).style("-webkit-filter").search("grayscale")==-1&&d3.select("#"+G).style("filter").search("grayscale")==-1){d3.select("#"+G).style("filter","grayscale(100%)").style("-webkit-filter","grayscale(100%)")}else{d3.select("#"+G).style("filter","").style("-webkit-filter","")}}).style("cursor","hand").style("visibility","hidden").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/blackWhite.png").attr("width","50").attr("height","50").attr("transform","translate("+(J-100)+",100) scale(0.5)");d3.select("#"+G).select("#D3viz").append("svg:g").attr("class","invertColor").attr("id","invertColor").attr("x",(J-100)).attr("y",150).on("click",function(){if(d3.select("#"+G).style("-webkit-filter").search("invert")==-1&&d3.select("#"+G).style("filter").search("invert")==-1){d3.select("#"+G).style("filter","invert(100%)").style("-webkit-filter","invert(100%)")}else{d3.select("#"+G).style("filter","").style("-webkit-filter","")}}).style("cursor","hand").style("visibility","hidden").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/invertColor.svg").attr("width","50").attr("height","50").attr("transform","translate("+(J-100)+",150) scale(0.5)");d3.select("#"+G).select("#D3viz").append("svg:g").attr("class","buttonZoomIn").attr("id","buttonZoomIn").attr("x",(J-60)).attr("y",10).on("click",metExploreD3.GraphNetwork.zoomIn).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/zoomin.svg").attr("width","50").attr("height","50").style("opacity",0.2).attr("transform","translate("+(J-60)+",10) scale(1)").on("mouseover",function(a){d3.select(this).transition().duration(500).style("opacity",1)}).on("mouseout",function(a){d3.select(this).transition().duration(500).style("opacity",0.2)});d3.select("#"+G).select("#D3viz").append("svg:g").attr("class","buttonZoomOut").attr("id","buttonZoomOut").attr("x",(J-110)).attr("y",10).on("click",metExploreD3.GraphNetwork.zoomOut).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/zoomout.svg").attr("width","50").attr("height","50").style("opacity",0.2).attr("transform","translate("+(J-110)+",10) scale(1)").on("mouseover",function(a){d3.select(this).transition().duration(500).style("opacity",1)}).on("mouseout",function(a){d3.select(this).transition().duration(500).style("opacity",0.2)});d3.select("#"+G).select("#D3viz").append("svg:g").attr("class","buttonHand").attr("id","buttonHand").attr("x",(J-160)).attr("y",10).attr("scrollable","false").on("click",metExploreD3.GraphNetwork.moveGraph).style("opacity",1).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/handcursor.svg").attr("width","50").attr("height","50").attr("transform","translate("+(J-160)+",10) scale(1)");d3.select("#"+G).select("#D3viz").select("buttonHand").style("opacity",0);d3.select("#"+G).on("mouseover",function(){d3.select("#"+G).select("#D3viz").select("#buttonZoomOut").transition().duration(500).style("opacity",1);d3.select("#"+G).select("#D3viz").select("#buttonZoomIn").transition().duration(500).style("opacity",1);var a=_metExploreViz.getSessionById(G);if(a.isActive()){var b=d3.select("#"+G).select("#buttonHand").attr("scrollable");if(b=="false"){d3.select("#"+G).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",0.2)}else{d3.select("#"+G).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",1)}}}).on("mouseout",function(){d3.select("#"+G).select("#D3viz").select("#buttonZoomOut").transition().duration(500).style("opacity",0);d3.select("#"+G).select("#D3viz").select("#buttonZoomIn").transition().duration(500).style("opacity",0);d3.select("#"+G).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",0)});metExploreD3.GraphNetwork.setAnimated(G,true);var R=_metExploreViz.getSessionById(G);var B=metExploreD3.getLinkStyle();var w=metExploreD3.getMetaboliteStyle();metExploreD3.GraphLink.refreshLink(G,R,B,w);metExploreD3.GraphNode.refreshNode(G);var I=document.createElement("div");I.id="tooltip2";I.className="tooltip2";document.getElementById("viz").appendChild(I);var D=d3.select(K).attr("isLink");d3.select(K).select("image").remove();d3.select(K).append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/link.svg").attr("width","50").attr("height","50").attr("transform","translate(10,50) scale(.5)");R.setLinked(false);if(G!="viz"){d3.select("#"+G).select("#D3viz").append("svg:g").attr("class","buttonLink").attr("id","buttonLink").attr("isLink","false").on("click",metExploreD3.GraphNetwork.setLink).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/unlink.svg").attr("width","50").attr("height","50").attr("transform","translate(10,50) scale(.5)")}else{metExploreD3.GraphNetwork.looksLinked();if(R.isLinked()){metExploreD3.GraphNetwork.graphAlignment(G)}}var R=metExploreD3.getSessionById(G);var N=R.getD3Data();var Q=R.getForce();Q.nodes(N.getNodes()).links(N.getLinks()).on("tick",function(){if(Q.alpha()>=0.005){setTimeout(metExploreD3.GraphNetwork.tick(G),0)}}).start();R.setForce(Q);metExploreD3.sortCompartmentInBiosource();metExploreD3.GraphNode.colorStoreByCompartment(metExploreD3.GraphNode.node)}};metExploreD3.Features={features:{highlightSubnetwork:{description:"highlightSubnetwork",enabledTo:["lcottret","npoupin"]},layouts:{description:"layouts",enabledTo:["fjourdan"]},algorithm:{description:"layouts",enabledTo:["cfrainay"]}},isEnabled:function(c,d){if(this.features[c]!=undefined){return this.isEnabledForUser(c,d)||this.isEnabledForAll(c)}return false},isEnabledForUser:function(c,d){if(this.features[c]!=undefined){return this.features[c].enabledTo.indexOf(d)!=-1}return false},isEnabledForAll:function(b){if(this.features[b]!=undefined){return this.features[b].enabledTo.indexOf("all")!=-1}return false}};metExploreD3.GraphFunction={bfs:function(p){var o=metExploreD3.GraphFunction.getGraphNotDirected();var h=o.getNode(p.getId());for(var q in o.nodes){o.nodes[q].distance="INFINITY";o.nodes[q].parent=null}var j=[];h.distance=0;j.push(h);while(j.length!=0){var m=j.pop();m.getAdjacents().forEach(function(a){if(a.distance=="INFINITY"){a.distance=m.distance+1;a.parent=m;j.push(a)}})}return o},colorDistanceOnNode:function(q,s){var r=_metExploreViz.getSessionById("viz").getD3Data();var p=0;for(var j in q.nodes){var o=q.nodes[j].distance;if(p<o){p=o}r.getNodeById(j).distance=o}var m=d3.scale.category20();var m=d3.scale.linear().domain([0,4]).range(["blue","yellow"]);d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").style("fill",function(a){return m(a.distance)});if(s!=undefined){s()}},test3:function(){var c=_metExploreViz.getSessionById("viz").getD3Data();d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").on("click",function(j){var a=[];_metExploreViz.getSessionById("viz").getSelectedNodes().forEach(function(g){var h=c.getNodeById(g);var f=metExploreD3.GraphFunction.bfs(h);a.push(f)});var b=a[0];for(var m in b.nodes){var o=a.filter(function(f){return f.nodes[m].distance!="INFINITY"}).map(function(f){return f.nodes[m].distance});b.nodes[m].distance=Math.min.apply(Math,o);if(b.nodes[m].distance=="Infinity"){b.nodes[m].distance=10000}}metExploreD3.GraphFunction.colorDistanceOnNode(b,d)});function d(){var a=d3.scale.linear().domain([0,1,2,3]).range([-600,-500,-400,-30]);metExploreD3.getGlobals().getSessionById("viz").getForce().charge(function(j){var h=j.distance;if(j.distance>3){h=3}var b=a(h);return b})}},testFlux:function(){var c=_metExploreViz.getSessionById("viz").getD3Data();var d=d3.scale.linear().domain([0,0.1,0.2,0.5,1]).range([-30,-50,-60,-500-600]);metExploreD3.getGlobals().getSessionById("viz").getForce().charge(function(g){var b=d3.select("g#node"+g.getId()+".node").attr("opacity");var a=d(b);return a})},test:function(){var c=_metExploreViz.getSessionById("viz").getD3Data();d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").on("click",function(a){metExploreD3.GraphFunction.colorDistanceOnNode(metExploreD3.GraphFunction.bfs(a),d)});function d(){var a=d3.scale.linear().domain([0,1,2,3]).range([-600,-500,-400,-30]);metExploreD3.getGlobals().getSessionById("viz").getForce().charge(function(j){var h=j.distance;if(j.distance>3){h=3}var b=a(h);return b})}},test2:function(){var c=_metExploreViz.getSessionById("viz").getD3Data();d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").on("click",function(a){metExploreD3.GraphFunction.colorDistanceOnNode(metExploreD3.GraphFunction.bfs(a),d)});function d(){var a=metExploreD3.getLinkStyle();var b=d3.scale.linear().domain([0,1,2,3]).range([5*a.getSize(),4*a.getSize(),3*a.getSize(),a.getSize()]);var g=d3.scale.linear().domain([0,1,2,3]).range([-600,-500,-400,-30]);metExploreD3.getGlobals().getSessionById("viz").getForce().linkDistance(function(o){var m=Math.max(o.getSource().distance,o.getTarget().distance);if(m>3){m=3}var f=b(m);return f}).gravity(0.04).charge(function(o){var m=o.distance;if(o.distance>3){m=3}var f=g(m);return f})}},hierarchicalDrawing:function(){var c="Hierarchical Tree (R-T Extended)";var d=[];d.push({name:"node spacing",value:50});metExploreD3.GraphFunction.applyTulipLayoutAlgorithmInWorker(c,d)},sugiyamaDrawing:function(){var c="Sugiyama (OGDF)";var d=[];d.push({name:"node spacing",value:50});d.push({name:"node distance",value:50});d.push({name:"layer distance",value:50});metExploreD3.GraphFunction.applyTulipLayoutAlgorithmInWorker(c,d)},betweennessCentrality:function(){var c="Betweenness Centrality";var d=[];d.push({name:"directed",value:true});metExploreD3.GraphFunction.applyTulipDoubleAlgorithmInWorker(c,d)},applyTulipLayoutAlgorithmInWorker:function(h,j){var f="viz";var g=metExploreD3.createLoadMask("Selection in progress...",f);if(g!=undefined){metExploreD3.showMask(g);metExploreD3.deferFunction(function(){var b=_metExploreViz.getSessionsSet();var d=_metExploreViz.getSessionById(f);var w=d.getD3Data();if(d!=undefined){if(d.isLinked()){for(var a in b){if(b[a].isLinked()){metExploreD3.GraphNetwork.animationButtonOff(b[a].getId())}}var z=_metExploreViz.getSessionById("viz").getForce();z.stop()}else{metExploreD3.GraphNetwork.animationButtonOff(f);var z=d.getForce();z.stop()}}var B=null;var v=null;var A=100;var y={};function c(){tulip.holdObservers();var q=B.getLayoutProperty("viewLayout");var p=B.getColorProperty("viewColor");var o=B.getStringProperty("viewLabel");tulip.unholdObservers();var m=tulip.getDefaultAlgorithmParameters(h,B);console.log(m);if(j!=undefined){j.forEach(function(r){m[r.name]=r.value})}B.applyLayoutAlgorithmInWorker(h,B.getLocalLayoutProperty("viewLayout"),m,function(){d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").each(function(r){r.px=q.getNodeValue(y[r.getId()]).x;r.py=q.getNodeValue(y[r.getId()]).y;r.x=q.getNodeValue(y[r.getId()]).x;r.y=q.getNodeValue(y[r.getId()]).y});metExploreD3.GraphNetwork.tick("viz");metExploreD3.hideMask(g)})}function u(m){if(typeof tulip=="undefined"||!tulip.isLoaded()){setTimeout(u,1000)}else{B=new tulip.Graph();console.log("tulip.getLayoutAlgorithmPluginsList() ",tulip.getLayoutAlgorithmPluginsList());console.log("tulip.getAlgorithmPluginsList() ",tulip.getAlgorithmPluginsList());console.log("tulip.getDoubleAlgorithmPluginsList() ",tulip.getDoubleAlgorithmPluginsList());tulip.holdObservers();B.setName("Test Javascript Graph");var p=B.getStringProperty("viewLabel");w.getNodes().forEach(function(s){var t=B.addNode();var r=B.getLayoutProperty("viewLayout");r.setNodeValue(t,new tulip.Coord(s.x,s.y,0));p.setNodeValue(t,"node 1");y[s.getId()]=t});var q=B.getLayoutProperty("viewLayout");w.getLinks().forEach(function(r){B.addEdge(y[r.getSource()],y[r.getTarget()])});var o=new Array();o.push(new tulip.Coord(0,0,0));q.setAllEdgeValue(o);tulip.unholdObservers()}if(m!=undefined){m()}}u(c)},100)}},applyTulipDoubleAlgorithmInWorker:function(h,j){var f="viz";var g=metExploreD3.createLoadMask("Selection in progress...",f);if(g!=undefined){metExploreD3.showMask(g);metExploreD3.deferFunction(function(){var b=_metExploreViz.getSessionsSet();var d=_metExploreViz.getSessionById(f);var w=d.getD3Data();if(d!=undefined){if(d.isLinked()){for(var a in b){if(b[a].isLinked()){metExploreD3.GraphNetwork.animationButtonOff(b[a].getId())}}var z=_metExploreViz.getSessionById("viz").getForce();z.stop()}else{metExploreD3.GraphNetwork.animationButtonOff(f);var z=d.getForce();z.stop()}}var B=null;var v=null;var A=100;var y={};function c(){tulip.holdObservers();var q=B.getLayoutProperty("viewLayout");var p=B.getColorProperty("viewColor");var o=B.getStringProperty("viewLabel");var m=B.getDoubleProperty("viewMetric");tulip.unholdObservers();var r=tulip.getDefaultAlgorithmParameters(h,B);if(j!=undefined){j.forEach(function(s){r[s.name]=s.value})}console.log("params :",r);B.applyDoubleAlgorithmInWorker(h,B.getDoubleProperty("viewMetric"),r,function(){var s=[];d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").each(function(C){s.push(m.getNodeValue(y[C.getId()]))});var D=d3.scale.linear().domain([Math.min.apply(null,s),Math.max.apply(null,s)]).range(["yellow","blue"]);var t=d3.scale.linear().domain([Math.min.apply(null,s),Math.max.apply(null,s)]).range([1,3]);d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").style("fill",function(C){return D(m.getNodeValue(y[C.getId()]))}).attr("transform",function(C){return"translate("+C.x+", "+C.y+") scale("+t(m.getNodeValue(y[C.getId()]))+")"}).transition().duration(2000);metExploreD3.hideMask(g)})}function u(m){if(typeof tulip=="undefined"||!tulip.isLoaded()){setTimeout(u,1000)}else{B=new tulip.Graph();console.log("tulip.getLayoutAlgorithmPluginsList() ",tulip.getLayoutAlgorithmPluginsList());console.log("tulip.getAlgorithmPluginsList() ",tulip.getAlgorithmPluginsList());console.log("tulip.getDoubleAlgorithmPluginsList() ",tulip.getDoubleAlgorithmPluginsList());tulip.holdObservers();B.setName("Test Javascript Graph");var p=B.getStringProperty("viewLabel");w.getNodes().forEach(function(s){var t=B.addNode();var r=B.getLayoutProperty("viewLayout");r.setNodeValue(t,new tulip.Coord(s.x,s.y,0));p.setNodeValue(t,"node 1");y[s.getId()]=t});var q=B.getLayoutProperty("viewLayout");w.getLinks().forEach(function(r){B.addEdge(y[r.getSource()],y[r.getTarget()])});var o=new Array();o.push(new tulip.Coord(0,0,0));q.setAllEdgeValue(o);tulip.unholdObservers()}if(m!=undefined){m()}}u(c)},100)}},drawNetwork:function(){},randomDrawing:function(){},stopSpringDrawing:function(){},extractSubNetwork:function(R){var S=_metExploreViz.getSessionById("viz");var C=[];if(S.getVizEngine()=="D3"){var N=d3.select("#viz").select("#D3viz");C=S.getSelectedNodes();if(C.length<2){metExploreD3.displayMessage("Warning","At least two nodes have to be selected or mapped.");return null}else{var q={};for(E=0;E<C.length;E++){q[C[E]]=E}var H=[];for(E=0;E<C.length;E++){H[E]=[];for(F=0;F<C.length;F++){H[E][F]=null}}for(var L in R.nodes){R.nodes[L].inSubNet=false}for(var E=0;E<R.edges.length;E++){R.edges[E].inSubNet=false}for(var E=0;E<C.length;E++){var T=C[E];var j=new Array();for(var F=0;F<C.length;F++){if(F!=E){if(H[E][F]==null){var I=new Array();var Q=C[F];for(var L in R.nodes){R.nodes[L].distance=Infinity;R.nodes[L].predecessor=null;R.nodes[L].optimized=false}var K=R.nodes[T];K.distance=0;var M=new BinaryMinHeap(R.nodes,"distance");var G;var P=false;while((M.min()!=undefined)&&(!P)){G=M.extractMin();G.optimized=true;for(e in G.edges){var O=G.edges[e].target;if(O.optimized){continue}var J=G.distance+(G.edges.length)*(G.edges.length);if((J<O.distance)&&I.indexOf(metExploreD3.GraphFunction.getReactionIdWithoutBack(O.id))==-1){I.push(metExploreD3.GraphFunction.getReactionIdWithoutBack(O.id));O.distance=J;M.heapify();O.predecessor=G}if(O.id==Q){P=true;H[E][F]=metExploreD3.GraphFunction.getPathBasedOnPredecessors(R,Q)}else{var D=q[O.id];if((D!=undefined)&&(H[E][D]==null)){H[E][D]=metExploreD3.GraphFunction.getPathBasedOnPredecessors(R,O.id)}}}}}}}}}return R}},getGraph:function(){var g=_metExploreViz.getSessionById("viz");var d=new Graph();var f=d3.select("#viz").select("#D3viz");f.selectAll("g.node").each(function(a){if(a.getBiologicalType()=="reaction"&&a.getReactionReversibility()){d.addNode(a.getId()+"_back")}d.addNode(a.getId())});f.selectAll("path.link").each(function(m){var b=m.source;var a=m.target;var c=b.getId();var o=a.getId();if(b.getBiologicalType()=="reaction"&&b.getReactionReversibility()){d.addEdge(o,c+"_back")}if(a.getBiologicalType()=="reaction"&&a.getReactionReversibility()){d.addEdge(o+"_back",c)}d.addEdge(c,o)});return d},getGraphNotDirected:function(){var g=_metExploreViz.getSessionById("viz");var d=new Graph();var f=d3.select("#viz").select("#D3viz");f.selectAll("g.node").each(function(a){d.addNode(a.getId())});f.selectAll("path.link").each(function(m){var b=m.source;var a=m.target;var c=b.getId();var o=a.getId();d.addEdge(c,o)});return d},getPathBasedOnPredecessors:function(q,t){var p=new Array();var s=q.nodes[t].predecessor;if(s==null){return p}else{var u=new Array();var m=q.nodes[t];m.inSubNet=true;while(m!=null){u.push(m);m.inSubNet=true;for(e in m.edges){var r=m.edges[e];if(m.predecessor!=null){if(r.source.id==m.predecessor.id){r.inSubNet=true}}}m=m.predecessor}for(var o=u.length-1;o>=0;o--){p.push(u[o].id)}return p}},keepOnlySubnetwork:function(){var j=_metExploreViz.getSessionById("viz");var m=j.getForce();var o=j.getD3Data();var g=metExploreD3.GraphFunction.getGraph();var h=metExploreD3.createLoadMask("Remove elements not in path...","viz");if(h!=undefined){metExploreD3.showMask(h);metExploreD3.deferFunction(function(){var q=d3.select("#viz").select("#D3viz");if(j!=undefined){var a=j.getForce();if(a!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){a.stop()}}}var b=metExploreD3.GraphFunction.extractSubNetwork(g);console.log("graph after extraction ",b);if(b!=null){var c=true;for(var d in j.getSelectedNodes()){var f=j.getSelectedNodes()[d];if(b.nodes[f].inSubNet){c=false}}if(c){metExploreD3.displayMessage("Warning","There is no path between the selected nodes !!")}else{var q=d3.select("#viz").select("#D3viz");q.selectAll("g.node").filter(function(t){if(t.getBiologicalType()=="metabolite"){var p=t.getId();return !b.nodes[p].inSubNet}else{if(t.getBiologicalType()=="reaction"){var p=t.getId();var u=t.getId()+"_back";if(b.nodes[u]==undefined){return !b.nodes[p].inSubNet}else{return !(b.nodes[p].inSubNet||b.nodes[u].inSubNet)}}}}).each(function(p){metExploreD3.GraphNetwork.removeANode(p,"viz")})}}if(j!=undefined){if(a!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){a.start()}}}metExploreD3.hideMask(h)},10)}},highlightSubnetwork:function(){var c=_metExploreViz.getSessionById("viz");var d=metExploreD3.createLoadMask("Highlight Subnetwork...","viz");if(d!=undefined){metExploreD3.showMask(d);metExploreD3.deferFunction(function(){var b=d3.select("#viz").select("#D3viz");if(c!=undefined){var o=c.getForce();if(o!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){o.stop()}}}var s=metExploreD3.GraphFunction.getGraph();var p=metExploreD3.GraphFunction.extractSubNetwork(s);console.log("graph after extraction in highlight subnetwork ",p);if(p!=null){var q=true;for(var r in c.getSelectedNodes()){var a=c.getSelectedNodes()[r];if(p.nodes[a].inSubNet){q=false}}if(q){metExploreD3.displayMessage("Warning","There is no path between the selected nodes !!")}else{var b=d3.select("#viz").select("#D3viz");b.selectAll("g.node").filter(function(f){return f.getBiologicalType()=="metabolite"}).filter(function(g){var f=g.getId();return p.nodes[f].inSubNet}).selectAll(".metabolite").transition().duration(4000).style("opacity",1);b.selectAll("g.node").filter(function(f){return f.getBiologicalType()=="metabolite"}).filter(function(g){var f=g.getId();return !p.nodes[f].inSubNet}).selectAll(".metabolite").transition().duration(4000).style("stroke","gray").style("opacity",0.25);b.selectAll("g.node").filter(function(f){return f.getBiologicalType()=="metabolite"}).filter(function(g){var f=g.getId();return p.nodes[f].inSubNet}).selectAll("text").transition().duration(4000).style("opacity",1);b.selectAll("g.node").filter(function(f){return f.getBiologicalType()=="metabolite"}).filter(function(g){var f=g.getId();return !p.nodes[f].inSubNet}).selectAll("text").transition().duration(4000).style("opacity",0.25);b.selectAll("g.node").filter(function(f){return f.getBiologicalType()=="reaction"}).filter(function(g){var f=g.getId();var h=g.getId()+"_back";if(p.nodes[h]==undefined){return p.nodes[f].inSubNet}else{return(p.nodes[f].inSubNet||p.nodes[h].inSubNet)}}).selectAll(".reaction").transition().duration(4000).style("opacity",1);b.selectAll("g.node").filter(function(f){return f.getBiologicalType()=="reaction"}).filter(function(g){var f=g.getId();var h=g.getId()+"_back";if(p.nodes[h]==undefined){return !p.nodes[f].inSubNet}else{return !(p.nodes[f].inSubNet||p.nodes[h].inSubNet)}}).selectAll(".reaction").transition().duration(4000).style("stroke","gray").style("opacity",0.25);b.selectAll("g.node").filter(function(f){return f.getBiologicalType()=="reaction"}).filter(function(g){var f=g.getId();var h=g.getId()+"_back";if(p.nodes[h]==undefined){return p.nodes[f].inSubNet}else{return(p.nodes[f].inSubNet||p.nodes[h].inSubNet)}}).selectAll("text").transition().duration(4000).style("opacity",1);b.selectAll("g.node").filter(function(f){return f.getBiologicalType()=="reaction"}).filter(function(g){var f=g.getId();var h=g.getId()+"_back";if(p.nodes[h]==undefined){return !p.nodes[f].inSubNet}else{return !(p.nodes[f].inSubNet||p.nodes[h].inSubNet)}}).selectAll("text").transition().duration(4000).style("opacity",0.25);b.selectAll("path.link").filter(function(f){var h=f.source.getId();var g=f.target.getId();if(f.source.getBiologicalType()=="reaction"){var j=h+"_back";if(p.nodes[j]==undefined){return(p.nodes[h].inSubNet&&p.nodes[g].inSubNet)}else{return(p.nodes[h].inSubNet&&p.nodes[g].inSubNet)||(p.nodes[j].inSubNet&&p.nodes[g].inSubNet)}}else{var j=g+"_back";if(p.nodes[j]==undefined){return(p.nodes[h].inSubNet&&p.nodes[g].inSubNet)}else{return(p.nodes[h].inSubNet&&p.nodes[g].inSubNet)||(p.nodes[h].inSubNet&&p.nodes[j].inSubNet)}}}).transition().duration(4000).style("opacity",1);b.selectAll("path.link").filter(function(f){var h=f.source.getId();var g=f.target.getId();if(f.source.getBiologicalType()=="reaction"){var j=h+"_back";if(p.nodes[j]==undefined){return !(p.nodes[h].inSubNet&&p.nodes[g].inSubNet)}else{return !(p.nodes[h].inSubNet&&p.nodes[g].inSubNet)&&!(p.nodes[j].inSubNet&&p.nodes[g].inSubNet)}}else{var j=g+"_back";if(p.nodes[j]==undefined){return !(p.nodes[h].inSubNet&&p.nodes[g].inSubNet)}else{return !(p.nodes[h].inSubNet&&p.nodes[g].inSubNet)&&!(p.nodes[h].inSubNet&&p.nodes[j].inSubNet)}}}).transition().duration(4000).style("stroke","gray").style("opacity",0.25)}}if(c!=undefined){if(o!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){o.start()}}}metExploreD3.hideMask(d)},10)}},isBackReaction:function(b){if(b.indexOf("_back")!=-1){return true}else{return false}},getReactionIdWithoutBack:function(b){if(metExploreD3.GraphFunction.isBackReaction(b)){b=b.replace("_back","")}return b},nodeInDegree:function(g){var d=0;for(e in g.edges){var f=g.edges[e].source;if(f.id!=g.id){d++}}return d},nodeOutDegree:function(g){var d=0;for(e in g.edges){var f=g.edges[e].source;if(f.id==g.id){d++}}return d},getLeafs:function(j){var g=new Array();for(var h in j.nodes){var f=j.nodes[h];if(metExploreD3.GraphFunction.nodeOutDegree(f)==0){g.push(f)}}return g},isAcyclic:function(h){var o=new Graph();for(var m in h.edges){var p=h.edges[m];o.addEdge(p.source.id,p.target.id)}var j=metExploreD3.GraphFunction.getLeafs(o);while(j.length!=0&&Object.keys(o.nodes).length!=0){var q=j.pop();o.removeNode(q);j=metExploreD3.GraphFunction.getLeafs(o)}if(Object.keys(o.nodes).length==0){return true}if(j.length==0){return false}},getMinimalFAS:function(j){var g=new Array();var m=new Graph();var h=new Array();for(e in j.edges){var o=j.edges[e];m.addEdge(o.source.id,o.target.id);if(metExploreD3.GraphFunction.isAcyclic(m)){g.push(o)}else{m.removeEdge(o);h.push(o)}}return h},getStronglyConnectedComponents:function(j){if(j==null){j=this.createGraph(false)}var m=new Array();var o=0;var h=new Array();for(n in j.nodes){var g=j.nodes[n];g.index=undefined;g.lowlink=Number.MAX_VALUE}for(n in j.nodes){var g=j.nodes[n];if(g.index==undefined){metExploreD3.GraphFunction.strongconnect(g,j,o,m,h)}}return h},strongconnect:function(r,o,q,p,j){r.index=q;r.lowlink=q;q=q+1;p.push(r);for(e in r.edges){var m=r.edges[e].target;if(m.id!=r.id){if(m.index==undefined){metExploreD3.GraphFunction.strongconnect(m,o,q,p,j);r.lowlink=Math.min(r.lowlink,m.lowlink)}else{if(p.indexOf(m)!=undefined){r.lowlink=Math.min(r.lowlink,m.lowlink)}}}}if(r.lowlink==r.index){var s=new Array();var m=p.pop();while(m.id!=r.id){s.push(m);var m=p.pop()}s.push(m);j.push(s)}},getMinimalFASstory:function(q,o){var u=new Array();var r=new Graph();var m=new Array();var p=q.edges.length;for(e in q.edges){var t=q.edges[e];var s=0;if(o.length>0){if(o.indexOf(t.source.id)==-1){s=s+p}if(o.indexOf(t.target.id)==-1){s=s+p}}s=s-Math.max(t.source.edges.length,s+t.target.edges.length);t.weight=s}q.edges.sort(function(b,a){return b.weight-a.weight});for(e in q.edges){var t=q.edges[e];r.addEdge(t.source.id,t.target.id);if(metExploreD3.GraphFunction.isAcyclic(r)){u.push(t)}else{r.removeEdge(t);m.push(t)}}return m}};metExploreD3.GraphMapping={compareMappingConditionChart:function(){var w=_metExploreViz.getSessionsSet();var D=[];var u=[];var v=[];for(var s in w){u.push(w[s].getActiveMapping());v.push(w[s].isMapped());if(s!="viz"){D=w[s].getD3Data().getNodes().concat(D)}}var C=[];D.forEach(function(a){var b=D.filter(function(c){return c.getIdentifier()==a.getIdentifier()});if(b.length>1&&C.indexOf(a)==-1&&a.getMappingDataByNameAndCond(u[0],v[0])!=undefined){C.push(a)}});var t=C.map(function(a){return a.getName()});var F=_metExploreViz.getMappingByName(u);var z=C.map(function(a){return -Math.abs(parseInt(a.getMappingDataByNameAndCond(u[0],v[0]).getMapValue()))});var A=C.map(function(a){return Math.abs(parseInt(a.getMappingDataByNameAndCond(u[1],v[1]).getMapValue()))});var B=[{name:v[0],data:z},{name:v[1],data:A}];var E={categories:t,conditions:B};var y=new MetXCompareBar(E,1300,t.length*15,"xaxis","yaxis",u[0]+" analysis");return y},mapNodeDataFile:function(g,m){var j=_metExploreViz.getSessionById("viz");var o=j.getForce();o.stop();var h=metExploreD3.createLoadMask("Mapping in progress...","viz");if(h!=undefined){metExploreD3.showMask(h);setTimeout(function(){var r=j.getD3Data();var f=g.getConditions();var d=d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node");var b=undefined;switch(g.getTargetLabel()){case"reactionDBIdentifier":for(var c=f.length-1;c>=0;c--){m.forEach(function(p){var q=new MappingData(p[g.getTargetLabel()],g.getName(),f[c],p[f[c]]);g.addMap(q);b=r.getNodeByDbIdentifier(p[g.getTargetLabel()]);if(b!=undefined){var u=new MappingData(b,g.getName(),f[c],p[f[c]]);b.addMappingData(u)}})}break;case"reactionId":for(var c=f.length-1;c>=0;c--){m.forEach(function(p){var q=new MappingData(p[g.getTargetLabel()],g.getName(),f[c],p[f[c]]);g.addMap(q);b=r.getNodeByDbIdentifier(p[g.getTargetLabel()]);if(b!=undefined){var u=new MappingData(b,g.getName(),f[c],p[f[c]]);b.addMappingData(u)}})}break;case"metaboliteId":for(var c=f.length-1;c>=0;c--){m.forEach(function(p){var q=new MappingData(p[g.getTargetLabel()],g.getName(),f[c],p[f[c]]);g.addMap(q);b=r.getNodeByDbIdentifier(p[g.getTargetLabel()]);if(b!=undefined){var u=new MappingData(b,g.getName(),f[c],p[f[c]]);b.addMappingData(u)}})}break;case"metaboliteDBIdentifier":for(var c=f.length-1;c>=0;c--){m.forEach(function(p){var q=new MappingData(p[g.getTargetLabel()],g.getName(),f[c],p[f[c]]);g.addMap(q);b=r.getNodeByDbIdentifier(p[g.getTargetLabel()]);if(b!=undefined){var u=new MappingData(b,g.getName(),f[c],p[f[c]]);b.addMappingData(u)}})}break;case"inchi":for(var c=f.length-1;c>=0;c--){m.forEach(function(p){var q=new MappingData(p[g.getTargetLabel()],g.getName(),f[c],p[f[c]]);g.addMap(q);b=r.getNodeByMappedInchi(p[g.getTargetLabel()]);if(b!=undefined){b.forEach(function(v){var w=new MappingData(v,g.getName(),f[c],p[f[c]]);v.addMappingData(w)})}})}break;default:metExploreD3.displayMessage("Warning",'The type of node "'+g.getTargetLabel()+"\" isn't know.")}metExploreD3.hideMask(h);var s=metExploreD3.GraphNetwork.isAnimated("viz");if(s=="true"){var a=j.getForce();if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){a.resume()}}},1)}},mapNodeData:function(o,g){console.log(g);var j=_metExploreViz.getSessionById("viz");var m=j.getForce();m.stop();var h=metExploreD3.createLoadMask("Mapping in progress...","viz");if(h!=undefined){metExploreD3.showMask(h);setTimeout(function(){var r=j.getD3Data();var f=o.getConditions();var d=d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node");var b=undefined;switch(o.getTargetLabel()){case"reactionDBIdentifier":for(var c=f.length-1;c>=0;c--){g.forEach(function(u){var p=new MappingData(u[0],o.getName(),f[c],u[c+1]);o.addMap(p);b=r.getNodeByDbIdentifier(u[0]);if(b!=undefined){var q=new MappingData(b,o.getName(),f[c],u[c+1]);b.addMappingData(q)}})}break;case"reactionId":for(var c=f.length-1;c>=0;c--){g.forEach(function(u){var p=new MappingData(u[0],o.getName(),f[c],u[c+1]);o.addMap(p);b=r.getNodeById(u[0]);if(b!=undefined){var q=new MappingData(b,o.getName(),f[c],u[c+1]);b.addMappingData(q)}})}break;case"metaboliteId":for(var c=f.length-1;c>=0;c--){g.forEach(function(u){var p=new MappingData(u[0],o.getName(),f[c],u[c+1]);o.addMap(p);b=r.getNodeById(u[0]);if(b!=undefined){var q=new MappingData(b,o.getName(),f[c],u[c+1]);b.addMappingData(q)}})}break;case"metaboliteDBIdentifier":for(var c=f.length-1;c>=0;c--){g.forEach(function(u){var p=new MappingData(u[0],o.getName(),f[c],u[c+1]);o.addMap(p);b=r.getNodeByDbIdentifier(u[0]);if(b!=undefined){var q=new MappingData(b,o.getName(),f[c],u[c+1]);b.addMappingData(q)}})}break;case"inchi":break;default:metExploreD3.displayMessage("Warning",'The type of node "'+o.getTargetLabel()+"\" isn't know.")}metExploreD3.hideMask(h);var s=metExploreD3.GraphNetwork.isAnimated("viz");if(s=="true"){var a=j.getForce();if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){a.resume()}}},1)}},mapNodes:function(c,d){metExploreD3.onloadMapping(c,function(){d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(g){if(this.getAttribute("mapped")==undefined||this.getAttribute("mapped")==false||this.getAttribute("mapped")=="false"){return false}else{return true}}).attr("mapped","false").selectAll("rect.stroke").remove();var b=metExploreD3.createLoadMask("Mapping in progress...","viz");var a=_metExploreViz.getMappingByName(c);if(b!=undefined){metExploreD3.showMask(b);setTimeout(function(){var m=_metExploreViz.getSessionById("viz");var p=m.getForce();p.stop();var o=a.getConditions();o.forEach(function(f){d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(g){if(this.getAttribute("mapped")==undefined||this.getAttribute("mapped")==false||this.getAttribute("mapped")=="false"){return true}else{return false}}).each(function(h){if(h.getBiologicalType()=="reaction"){if(h.getMappingDataByNameAndCond(a.getName(),f)!=null){var s=metExploreD3.getReactionStyle();_MyThisGraphNode.addText(h,"viz",s);d3.select(this).attr("mapped","true").insert("rect",":first-child").attr("class","stroke").attr("width",parseInt(d3.select(this).select(".reaction").attr("width"))+10).attr("height",parseInt(d3.select(this).select(".reaction").attr("height"))+10).attr("rx",parseInt(d3.select(this).select(".reaction").attr("rx"))+5).attr("ry",parseInt(d3.select(this).select(".reaction").attr("ry"))+5).attr("transform","translate(-"+parseInt(parseInt(d3.select(this).select(".reaction").attr("width"))+10)/2+",-"+parseInt(parseInt(d3.select(this).select(".reaction").attr("height"))+10)/2+")").style("opacity","0.5").style("fill","red");m.addSelectedNode(h.getId())}}else{if(h.getBiologicalType()=="metabolite"){var g=d3.select(this).select(".metabolite").attr("identifier");if(h.getMappingDataByNameAndCond(a.getName(),f)!=null){var j=metExploreD3.getReactionStyle();_MyThisGraphNode.addText(h,"viz",j);d3.select(this).attr("mapped","true").insert("rect",":first-child").attr("class","stroke").attr("width",parseInt(d3.select(this).select(".metabolite").attr("width"))+10).attr("height",parseInt(d3.select(this).select(".metabolite").attr("height"))+10).attr("rx",parseInt(d3.select(this).select(".metabolite").attr("rx"))+5).attr("ry",parseInt(d3.select(this).select(".metabolite").attr("ry"))+5).attr("transform","translate(-"+parseInt(parseInt(d3.select(this).select(".metabolite").attr("width"))+10)/2+",-"+parseInt(parseInt(d3.select(this).select(".metabolite").attr("height"))+10)/2+")").style("opacity","0.5").style("fill","red");m.addSelectedNode(h.getId())}}}}).each(function(h){if(d3.select(this).select(".stroke")[0][0]==null){if(h.getBiologicalType()=="reaction"){if(h.getMappingDataByNameAndCond(a.getName(),f)!=null){var s=metExploreD3.getReactionStyle();_MyThisGraphNode.addText(h,"viz",s);d3.select(this).insert("rect",":first-child").attr("class","stroke").attr("width",parseInt(d3.select(this).select(".reaction").attr("width"))+10).attr("height",parseInt(d3.select(this).select(".reaction").attr("height"))+10).attr("rx",parseInt(d3.select(this).select(".reaction").attr("rx"))+5).attr("ry",parseInt(d3.select(this).select(".reaction").attr("ry"))+5).attr("transform","translate(-"+parseInt(parseInt(d3.select(this).select(".reaction").attr("width"))+10)/2+",-"+parseInt(parseInt(d3.select(this).select(".reaction").attr("height"))+10)/2+")").style("opacity","0.5").style("fill","red");m.addSelectedNode(h.getId());return true}else{return false}}else{if(h.getBiologicalType()=="metabolite"){var g=d3.select(this).select(".metabolite").attr("identifier");if(h.getMappingDataByNameAndCond(a.getName(),f)!=null){var j=metExploreD3.getReactionStyle();_MyThisGraphNode.addText(h,"viz",j);d3.select(this).insert("rect",":first-child").attr("class","stroke").attr("width",parseInt(d3.select(this).select(".metabolite").attr("width"))+10).attr("height",parseInt(d3.select(this).select(".metabolite").attr("height"))+10).attr("rx",parseInt(d3.select(this).select(".metabolite").attr("rx"))+5).attr("ry",parseInt(d3.select(this).select(".metabolite").attr("ry"))+5).attr("transform","translate(-"+parseInt(parseInt(d3.select(this).select(".metabolite").attr("width"))+10)/2+",-"+parseInt(parseInt(d3.select(this).select(".metabolite").attr("height"))+10)/2+")").style("opacity","0.5").style("fill","red");m.addSelectedNode(h.getId());return true}else{return false}}}}})});metExploreD3.hideMask(b);if(d!=undefined){d()}var q=metExploreD3.GraphNetwork.isAnimated("viz");if(q=="true"){var m=_metExploreViz.getSessionById("viz");var p=m.getForce();if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){p.resume()}}},1)}})},mapFluxes:function(q,t,r,p,m,s){var u=_metExploreViz.getMappingByName(q);var o=metExploreD3.createLoadMask("Mapping in progress...","viz");if(o!=undefined){metExploreD3.showMask(o);setTimeout(function(){var j=_metExploreViz.getGeneralStyle();var N=d3.select("#viz").select("#D3viz");var H=_metExploreViz.getSessionById("viz");var g=_metExploreViz.getSessionById("viz").getD3Data().getNodes();var f=metExploreD3.getConditionsMapped();var I=undefined;var d=undefined;var b=u.getName();var L=metExploreD3.getLinkStyle();var a=H.getForce();a.linkDistance(function(v){if(v.getSource().getIsSideCompound()||v.getTarget().getIsSideCompound()){return L.getSize()}else{return L.getSize()*2}});N.selectAll("g.node").filter(function(v){if(this.getAttribute("mapped")==undefined||this.getAttribute("mapped")==false||this.getAttribute("mapped")=="false"){return false}else{return true}}).selectAll("rect.stroke").remove();f.forEach(function(v){g.forEach(function(y){var w=y.getMappingDataByNameAndCond(b,v);if(w!=null){var z=Math.abs(w.getMapValue())}else{var z=0}if(!isNaN(z)){if(I==undefined){d=parseFloat(z);I=parseFloat(z)}else{if(d>parseFloat(z)){d=parseFloat(z)}if(I<parseFloat(z)){I=parseFloat(z)}}}})});if(p==undefined){p=metExploreD3.GraphUtils.colorNameToHex(j.getColorMinMappingContinuous());if(p==false){p=j.getColorMinMappingContinuous()}}else{j.setMinColorMappingContinuous(p)}if(r==undefined){r=metExploreD3.GraphUtils.colorNameToHex(j.getColorMaxMappingContinuous());if(r==false){r=j.getColorMaxMappingContinuous()}}else{j.setMaxColorMappingContinuous(r)}var N=d3.select("#viz").select("#D3viz");var h=H.getColorMappingsSet();H.resetColorMapping();var c=r;if(f[1]==t){c=p}if(m){var F=0.5;var M=0.2}else{var F=1;var M=1}var J=d3.scale.linear().domain([-4,-1,0,1,4]).range([1,F,M,F,1]);var G=d3.scale.linear().domain([-I,0,I]).range([-7,0,7]);H.addColorMapping(I,r);H.addColorMapping(-I,p);N.selectAll("g.node").each(function(v){if(v.getMappingDatasLength()!=0){if(v.getBiologicalType()=="reaction"){var w=v.getMappingDataByNameAndCond(b,f[0]);var y=v.getMappingDataByNameAndCond(b,f[1]);var z=w;if(f[1]==t){z=y}if(z==null){var B=0}else{if(isNaN(z.getMapValue())){var B=0}else{var B=z.getMapValue()}}var A=metExploreD3.getReactionStyle();_MyThisGraphNode.addText(v,"viz",A);d3.select(this).transition().duration(2000).style("opacity",J(G(parseFloat(B))));H.addSelectedNode(v.getId())}}});metExploreD3.hideMask(o);d3.select("#viz").select("#D3viz").selectAll("path.link").style("fill",function(A){var z,w;if(A.getSource().getBiologicalType()=="reaction"){z=A.getSource();w=A.getTarget()}else{w=A.getSource();z=A.getTarget()}var v=z.getMappingDataByNameAndCond(b,f[0]);var y=z.getMappingDataByNameAndCond(b,f[1]);N.selectAll("g#node"+w.getId()+".node").each(function(E){var D=v;if(f[1]==t){D=y}if(D==null){var P=0}else{if(isNaN(D.getMapValue())){var P=0}else{var P=D.getMapValue()}}if(E.flux==undefined){E.flux=G(P)}else{if(Math.abs(E.flux)<Math.abs(G(P))){E.flux=G(P)}}});N.selectAll("g#node"+w.getId()+".node").style("opacity",function(D){if(D.getIsSideCompound()){return 0.2}return J(D.flux)});if(this.id!="linkRev"){if(v==null){var C=0}else{if(isNaN(v.getMapValue())){var C=0}else{var C=v.getMapValue()}}if(G(C)==0){var B=d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("path:link");d3.select(this).style("opacity",0.5).style("stroke","black").style("stroke-width",0.5).style("stroke-dasharray","2,3").each(function(E){var D=B[0][0];this.parentNode.insertBefore(this,D)})}else{d3.select(this).style("opacity",J(G(parseFloat(C))))}if(w.getIsSideCompound()){d3.select(this).style("opacity",0.1)}return r}else{if(y==null){var C=0}else{if(isNaN(y.getMapValue())){var C=0}else{var C=y.getMapValue()}}if(G(C)==0){var B=d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("path:link");d3.select(this).style("opacity",0.5).style("stroke","black").style("stroke-width",0.5).style("stroke-dasharray","2,3").each(function(E){var D=B[0][0];this.parentNode.insertBefore(this,D)})}else{d3.select(this).style("opacity",J(G(parseFloat(C))))}if(w.getIsSideCompound()){d3.select(this).style("opacity",0.1)}return p}});if(d!=undefined){metExploreD3.fireEventArg("selectConditionForm","afterContinuousMapping","flux")}else{metExploreD3.displayMessage("Warning","No mapped node on network.")}if(s!=undefined){s()}var K=metExploreD3.GraphNetwork.isAnimated("viz");if(K=="true"){var H=_metExploreViz.getSessionById("viz");if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){a.start()}}metExploreD3.GraphNetwork.tick("viz")},1)}},mapUniqueFlux:function(o,r,p,j,q){var s=_metExploreViz.getMappingByName(o);var m=metExploreD3.createLoadMask("Mapping in progress...","viz");if(m!=undefined){metExploreD3.showMask(m);setTimeout(function(){var L=_metExploreViz.getGeneralStyle();var b=d3.select("#viz").select("#D3viz");var O=_metExploreViz.getSessionById("viz");var a=_metExploreViz.getSessionById("viz").getD3Data().getNodes();var F=s.getConditions();var H=undefined;var c=undefined;var h=s.getName();var G=metExploreD3.getLinkStyle();var N=O.getForce();N.linkDistance(function(t){if(t.getSource().getIsSideCompound()||t.getTarget().getIsSideCompound()){return G.getSize()}else{return G.getSize()*2}});b.selectAll("g.node").filter(function(t){if(this.getAttribute("mapped")==undefined||this.getAttribute("mapped")==false||this.getAttribute("mapped")=="false"){return false}else{return true}}).selectAll("rect.stroke").remove();F.forEach(function(t){a.forEach(function(v){var u=v.getMappingDataByNameAndCond(h,t);if(u!=null){var w=u.getMapValue();if(!isNaN(w)){if(H==undefined){c=parseFloat(w);H=parseFloat(w)}else{if(c>parseFloat(w)){c=parseFloat(w)}if(H<parseFloat(w)){H=parseFloat(w)}}}}})});if(p==undefined){p=L.getColorMaxMappingContinuous()}else{L.setMaxColorMappingContinuous(p)}var b=d3.select("#viz").select("#D3viz");var I=O.getColorMappingsSet();O.resetColorMapping();var f=d3.scale.linear().domain([-4,-1,1,4]).range([p,p,p,p]);if(j){var M=0.5;var P=0.2}else{var M=1;var P=1}var K=d3.scale.linear().domain([-4,-1,0,1,4]).range([1,M,P,M,1]);var d=d3.scale.linear().domain([-4,-1,1,4]).range([p,p,p,p]);var g=d3.scale.linear().domain([c,0,H]).range([-7,0,7]);O.addColorMapping(H,f(parseFloat(H)));b.selectAll("g.node").each(function(u){if(u.getMappingDatasLength()!=0){if(u.getBiologicalType()=="reaction"){var t=metExploreD3.getConditionsMapped()[0];var v=u.getMappingDataByNameAndCond(h,t);if(v!=null){if(!isNaN(v.getMapValue())){var w=metExploreD3.getReactionStyle();_MyThisGraphNode.addText(u,"viz",w);d3.select(this).transition().duration(2000).style("opacity",K(g(parseFloat(v.getMapValue()))));O.addSelectedNode(u.getId())}}}}});metExploreD3.hideMask(m);d3.select("#viz").select("#D3viz").selectAll("path.link").style("fill",function(y){var w,u;if(y.getSource().getBiologicalType()=="reaction"){w=y.getSource();u=y.getTarget()}else{u=y.getSource();w=y.getTarget()}var t=metExploreD3.getConditionsMapped()[0];var v=w.getMappingDataByNameAndCond(h,t);b.selectAll("g#node"+u.getId()+".node").each(function(B){if(v==null){var C=0}if(B.flux==undefined){B.flux=g(C)}else{if(Math.abs(B.flux)<Math.abs(g(C))){B.flux=g(C)}}});b.selectAll("g#node"+u.getId()+".node").style("opacity",function(B){if(B.getIsSideCompound()){return 0.2}return K(B.flux)});if(v==null){var A=0}else{if(isNaN(v.getMapValue())){var A=0}else{var A=v.getMapValue()}}if(g(A)==0){var z=d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("path:link");d3.select(this).style("opacity",0.5).style("stroke","black").style("stroke-width",0.5).style("stroke-dasharray","2,3").each(function(C){var B=z[0][0];this.parentNode.insertBefore(this,B)})}else{d3.select(this).style("opacity",K(g(parseFloat(A))))}if(u.getIsSideCompound()){d3.select(this).style("opacity",0.1)}return f(g(A))}).filter(function(t){return this.id=="linkRev"}).remove();d3.select("#viz").select("#D3viz").selectAll(".linklabel").filter(function(t){return this.id=="linkRev"}).remove();if(c!=undefined){metExploreD3.fireEventArg("selectConditionForm","afterContinuousMapping","flux")}else{metExploreD3.displayMessage("Warning","No mapped node on network.")}if(q!=undefined){q()}var J=metExploreD3.GraphNetwork.isAnimated("viz");if(J=="true"){var O=_metExploreViz.getSessionById("viz");if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){N.start()}}metExploreD3.GraphNetwork.tick("viz")},1)}},parseFluxValues:function(g){var d=_metExploreViz.getMappingByName(g);var f=metExploreD3.createLoadMask("Mapping in progress...","viz");if(f!=undefined){metExploreD3.showMask(f);setTimeout(function(){var u=_metExploreViz.getSessionById("viz");var r=_metExploreViz.getSessionById("viz").getD3Data().getNodes();var a=d.getConditions();var b=undefined;var q=undefined;var c=d.getName();var s=[];a.forEach(function(h){r.forEach(function(m){var j=m.getMappingDataByNameAndCond(c,h);if(j!=null){var o=j.getMapValue()}else{var o=0}if(!isNaN(o)){if(parseFloat(o)!=0&(999999-Math.abs(parseFloat(o)))*100/999999<0.001){s.push(m)}else{if(b==undefined){q=parseFloat(o);b=parseFloat(o)}else{if(q>parseFloat(o)){q=parseFloat(o)}if(b<parseFloat(o)){b=parseFloat(o)}}}}})});if(s.length>0){b=b+b/2;var t=_metExploreViz.getSessionById("viz").getColorMappingsSet();s.forEach(function(h){a.forEach(function(j){if((999999-Math.abs(parseFloat(h.getMappingDataByNameAndCond(c,j).getMapValue())))*100/999999<0.001){t.forEach(function(m){if(m.getName()==parseFloat(h.getMappingDataByNameAndCond(c,j).getMapValue())){m.setName(q)}if(m.getName()==parseFloat(h.getMappingDataByNameAndCond(c,j).getMapValue())){m.setName(b)}});h.setMappingDataByNameAndCond(c,j,b)}})})}metExploreD3.hideMask(f)},1)}},graphMappingFlux:function(q,m,s,j,o,r,p){metExploreD3.onloadMapping(q,function(){var a=_metExploreViz.getSessionById("viz");metExploreD3.GraphMapping.parseFluxValues(q);metExploreD3.GraphLink.loadLinksForFlux("viz",a.getD3Data(),metExploreD3.getLinkStyle(),metExploreD3.getMetaboliteStyle(),p,m);if(s=="Compare"){metExploreD3.GraphMapping.mapFluxes(q,m,j,o,r)}else{metExploreD3.GraphMapping.mapUniqueFlux(q,m,j,r)}})},reloadMapping:function(f){var h=_metExploreViz.getSessionById("viz");var j=h.getForce();j.stop();var g=metExploreD3.createLoadMask("Mapping in progress...","viz");if(g!=undefined){metExploreD3.showMask(g);setTimeout(function(){var b=h.getD3Data();var a=f.getConditions();var o=undefined;switch(f.getTargetLabel()){case"reactionDBIdentifier":f.getData().forEach(function(m){if(typeof m.getNode()=="object"){var s=b.getNodeByDbIdentifier(m.getNode().getDbIdentifier())}else{var s=b.getNodeByDbIdentifier(m.getNode())}console.log(s);if(s!=undefined){var r=new MappingData(s,f.getName(),m.getConditionName(),m.getMapValue());s.addMappingData(r)}});break;case"reactionId":f.getData().forEach(function(m){if(typeof m.getNode()=="object"){var s=b.getNodeById(m.getNode().getId())}else{var s=b.getNodeById(m.getNode())}if(s!=undefined){var r=new MappingData(s,f.getName(),m.getConditionName(),m.getMapValue());s.addMappingData(r)}});break;case"metaboliteId":f.getData().forEach(function(m){if(typeof m.getNode()=="object"){var s=b.getNodeById(m.getNode().getId())}else{var s=b.getNodeById(m.getNode())}if(s!=undefined){var r=new MappingData(s,f.getName(),m.getConditionName(),m.getMapValue());s.addMappingData(r)}});break;case"metaboliteDBIdentifier":f.getData().forEach(function(m){if(typeof m.getNode()=="object"){var s=b.getNodeByDbIdentifier(m.getNode().getDbIdentifier())}else{var s=b.getNodeByDbIdentifier(m.getNode())}if(s!=undefined){var r=new MappingData(s,f.getName(),m.getConditionName(),m.getMapValue());s.addMappingData(r)}});break;case"inchi":break;default:metExploreD3.displayMessage("Warning",'The type of node "'+f.getTargetLabel()+"\" isn't know.")}metExploreD3.hideMask(g);var c=metExploreD3.GraphNetwork.isAnimated("viz");if(c=="true"){var d=h.getForce();if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){d.resume()}}},1)}},graphMappingDiscreteData:function(g,f,d){metExploreD3.onloadMapping(g,function(){var a=_metExploreViz.getMappingByName(g);var b=metExploreD3.createLoadMask("Mapping in progress...","viz");if(b!=undefined){metExploreD3.showMask(b);setTimeout(function(){var N=_metExploreViz.getSessionById("viz");var H=N.getForce();H.stop();var M=a.getConditions();var I=N.getD3Data().getNodes();var E=[];var G=d3.select("#viz").select("#D3viz");G.selectAll("g.node").filter(function(h){if(this.getAttribute("mapped")==undefined||this.getAttribute("mapped")==false||this.getAttribute("mapped")=="false"){return false}else{return true}}).selectAll("rect.stroke").remove();M.forEach(function(h){I.forEach(function(m){var j=m.getMappingDataByNameAndCond(a.getName(),h);if(j!=null){var o=false;var p=j.getMapValue().valueOf();E.forEach(function(q){if(q.valueOf()==p.valueOf()){o=true}});if(!o){E.push(p)}}})});function K(h,j){if(parseFloat(h)<parseFloat(j)){return -1}if(parseFloat(h)>parseFloat(j)){return 1}return 0}function P(h,j){if(h<j){return -1}if(h>j){return 1}return 0}var O=[];var F=[];E.forEach(function(h){if(isNaN(h)){F.push(h)}else{O.push(h)}});O.sort(K);F.sort(P);E=O.concat(F);if(E.length==undefined){E.length=0}center=128;width=127;frequency=Math.PI*2*0.95/E.length;var Q=top;var J=N.getColorMappingsSet();N.resetColorMapping();for(var R=0;R<E.length;R++){var D=Math.sin(frequency*R+2+E.length)*width+center;var c=Math.sin(frequency*R+0+E.length)*width+center;var L=Math.sin(frequency*R+4+E.length)*width+center;color=metExploreD3.GraphUtils.RGB2Color(D,c,L);N.addColorMapping(E[R],color);metExploreD3.GraphMapping.fixMappingColorOnNodeData(color,E[R],f,a.getName())}metExploreD3.hideMask(b);if(d!=undefined){d()}if(E.length!=0){metExploreD3.fireEventArg("selectConditionForm","afterDiscreteMapping","discrete")}else{metExploreD3.displayMessage("Warning","No mapped node on network.")}var C=metExploreD3.GraphNetwork.isAnimated("viz");if(C=="true"){var N=_metExploreViz.getSessionById("viz");var H=N.getForce();if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){H.resume()}}},1)}})},fixMappingColorOnNodeData:function(m,q,s,o){var r=d3.select("#viz").select("#D3viz");var p=_metExploreViz.getSessionById("viz");var j=m;r.selectAll("g.node").filter(function(c){if(c.getBiologicalType()=="reaction"){if(c.getMappingDatasLength()==0){return false}else{var d=c.getMappingDataByNameAndCond(o,s);if(d!=null){if(d.getMapValue()==q){var b=metExploreD3.getReactionStyle();_MyThisGraphNode.addText(c,"viz",b);p.addSelectedNode(c.getId());return true}else{return false}}else{return false}}}else{if(c.getBiologicalType()=="metabolite"){if(c.getMappingDatasLength()==0){return false}else{var d=c.getMappingDataByNameAndCond(o,s);if(d!=null){if(d.getMapValue()==q){var a=metExploreD3.getMetaboliteStyle();_MyThisGraphNode.addText(c,"viz",a);p.addSelectedNode(c.getId());return true}else{return false}}else{return false}}}}}).transition().duration(3000).attr("mapped",m).style("fill",m).each(function(a){if(a.getBiologicalType()=="reaction"){var b=metExploreD3.GraphUtils.chooseTextColor(j);d3.select(this).select("text").style("fill",b)}})},graphMappingContinuousData:function(m,h,j,o,g){metExploreD3.onloadMapping(m,function(){var a=_metExploreViz.getMappingByName(m);var b=metExploreD3.createLoadMask("Mapping in progress...","viz");if(b!=undefined){metExploreD3.showMask(b);setTimeout(function(){var I=_metExploreViz.getGeneralStyle();var C=d3.select("#viz").select("#D3viz");var J=_metExploreViz.getSessionById("viz");var F=_metExploreViz.getSessionById("viz").getD3Data().getNodes();var H=a.getConditions();var M=undefined;var E=undefined;var f=a.getName();var K='{"mapping":[';var L=metExploreD3.getMetaboliteStyle();var c=metExploreD3.getReactionStyle();C.selectAll("g.node").filter(function(p){if(this.getAttribute("mapped")==undefined||this.getAttribute("mapped")==false||this.getAttribute("mapped")=="false"){return false}else{return true}}).selectAll("rect.stroke").remove();H.forEach(function(p){K+='\n{"'+p+'":[';F.forEach(function(r){var q=r.getMappingDataByNameAndCond(f,p);if(q!=null){K+="\n{";var s=q.getMapValue();K+='"node" : "'+r.getName();K+='", "value" : "'+s;if(!isNaN(s)){if(M==undefined){E=parseFloat(s);M=parseFloat(s)}else{if(E>parseFloat(s)){E=parseFloat(s)}if(M<parseFloat(s)){M=parseFloat(s)}}}K+='"},\n'}});K+="]}\n"});K+="]}\n";if(j==undefined){j=I.getColorMinMappingContinuous()}else{I.setMinColorMappingContinuous(j)}if(o==undefined){o=I.getColorMaxMappingContinuous()}else{I.setMaxColorMappingContinuous(o)}var C=d3.select("#viz").select("#D3viz");var G=J.getColorMappingsSet();J.resetColorMapping();var N=d3.scale.linear().domain([parseFloat(E),parseFloat(M)]).range([j,o]);if(E==M){J.addColorMapping(M,N(parseFloat(M)))}else{J.addColorMapping(M,N(parseFloat(M)));J.addColorMapping(E,N(parseFloat(E)))}C.selectAll("g.node").each(function(p){if(p.getMappingDatasLength()!=0){if(p.getBiologicalType()=="reaction"){var q=p.getMappingDataByNameAndCond(f,h);if(q!=null){if(!isNaN(q.getMapValue())){_MyThisGraphNode.addText(p,"viz",c);d3.select(this).transition().duration(2000).attr("mapped",N(parseFloat(parseFloat(q.getMapValue())))).style("fill",N(parseFloat(q.getMapValue())));var s=metExploreD3.GraphUtils.chooseTextColor(N(parseFloat(q.getMapValue())));d3.select(this).select("text").style("fill",s);J.addSelectedNode(p.getId())}}}else{var q=p.getMappingDataByNameAndCond(f,h);if(q!=null){if(!isNaN(q.getMapValue())){var r=metExploreD3.getMetaboliteStyle();_MyThisGraphNode.addText(p,"viz",r);d3.select(this).transition().duration(2000).attr("mapped",N(parseFloat(parseFloat(q.getMapValue())))).style("fill",N(parseFloat(q.getMapValue())));J.addSelectedNode(p.getId())}}}}});metExploreD3.hideMask(b);if(E!=undefined){metExploreD3.fireEventArg("selectConditionForm","afterContinuousMapping","continuous")}else{metExploreD3.displayMessage("Warning","No mapped node on network.")}if(g!=undefined){g()}var d=metExploreD3.GraphNetwork.isAnimated("viz");if(d=="true"){var J=_metExploreViz.getSessionById("viz");var D=J.getForce();if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){D.resume()}}},1)}})},graphMappingBinary:function(g){var o=metExploreD3.getSessionsSet();var j=metExploreD3.getSessionById(o,"viz");var m=j.getForce();m.stop();var h=metExploreD3.createLoadMask("Mapping in progress...","viz");if(h!=undefined){metExploreD3.showMask(h);setTimeout(function(){metExploreD3.GraphMapping.fixMappingColorOnNode("#056da1",1,g);metExploreD3.hideMask(h);var b=metExploreD3.GraphNetwork.isAnimated("viz");if(b=="true"){var d=metExploreD3.getSessionsSet();var a=metExploreD3.getSessionById(d,"viz");var c=a.getForce();if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){c.resume()}}},1)}},fixMappingColorOnNode:function(h,o,q){var p=d3.select("#viz").select("#D3viz");var m=metExploreD3.getMetabolitesSet();var j=metExploreD3.getReactionsSet();p.selectAll("g.node").filter(function(a){if(a.getBiologicalType()=="reaction"){if(metExploreD3.getReactionById(j,a.getId()).get("mapped")==undefined){return false}else{if((metExploreD3.getReactionById(j,a.getId()).get("mapped")!=0)&&metExploreD3.getReactionById(j,a.getId()).get(q)==o){var d=metExploreD3.getSessionsSet();var c=metExploreD3.getReactionStyle();_MyThisGraphNode.addText(a,"viz",c,d);return true}else{return false}}}else{if(a.getBiologicalType()=="metabolite"&&!a.isSideCompound()){if(metExploreD3.getMetaboliteById(m,a.getId())==null){return false}if(metExploreD3.getMetaboliteById(m,a.getId()).get("mapped")==undefined){return false}else{if((metExploreD3.getMetaboliteById(m,a.getId()).get("mapped")!=0)&&metExploreD3.getMetaboliteById(m,a.getId()).get(q)==o){var d=metExploreD3.getSessionsSet();var b=metExploreD3.getMetaboliteStyle();_MyThisGraphNode.addText(a,"viz",b,d);return true}else{return false}}}}}).transition().duration(4000).attr("mapped",h).style("fill",h)},setDiscreteMappingColor:function(j,q,s,o){var p=_metExploreViz.getSessionById("viz");var r=p.getForce();r.stop();var m=metExploreD3.createLoadMask("Mapping in progress...","viz");if(m!=undefined){metExploreD3.showMask(m);setTimeout(function(){var a=d3.select("#viz").select("#D3viz");var c=p.getColorMappingsSet();var b=p.getColorMappingById(q);b.setValue(j);metExploreD3.GraphMapping.fixMappingColorOnNodeData(j,q,s,o);metExploreD3.hideMask(m)},1)}},setContinuousMappingColor:function(t,q,p,u){var r=_metExploreViz.getSessionById("viz");var y=r.getForce();y.stop();var v=metExploreD3.createLoadMask("Mapping in progress...","viz");if(v!=undefined){metExploreD3.showMask(v);var w=d3.select("#viz").select("#D3viz");var z=r.getColorMappingsSet();var s=r.getColorMappingById(q);s.setValue(t);metExploreD3.hideMask(v)}},removeGraphMapping:function(g){var j=_metExploreViz.getSessionById("viz");var o=d3.select("#viz").select("#D3viz");var m=metExploreD3.getMetabolitesSet();var h=metExploreD3.getReactionsSet();o.selectAll("g.node").filter(function(a){if(a.getBiologicalType()=="reaction"){if(metExploreD3.getReactionById(h,a.getId()).get("mapped")==undefined){return false}else{return metExploreD3.getReactionById(h,a.getId()).get("mapped")!=0}}else{if(a.getBiologicalType()=="metabolite"){if(metExploreD3.getMetaboliteById(m,a.getId()).get("mapped")==undefined){return false}else{return metExploreD3.getMetaboliteById(m,a.getId()).get("mapped")!=0}}}}).transition().duration(1000).attr("transform",function(a){return"translate("+a.x+", "+a.y+") scale(1)"}).style("fill","white");o.selectAll("g.node").filter(function(a){if(this.getAttribute("mapped")==undefined||this.getAttribute("mapped")==false||this.getAttribute("mapped")=="false"){return false}else{return true}}).attr("mapped","false").selectAll("rect.stroke").remove()},removeGraphMappingData:function(h){var j=_metExploreViz.getSessionById("viz");var o=d3.select("#viz").select("#D3viz");o.selectAll("g.node").transition().duration(1000).attr("transform",function(a){return"translate("+a.x+", "+a.y+") scale(1)"}).style("fill","white").style("opacity",1).each(function(a){if(a.getBiologicalType()=="reaction"){if(a.isSelected()){d3.select(this).select("text").transition().duration(4000).style("fill","white")}else{d3.select(this).select("text").transition().duration(4000).style("fill","black")}}});o.selectAll("g.node").filter(function(a){if(this.getAttribute("mapped")==undefined||this.getAttribute("mapped")==false||this.getAttribute("mapped")=="false"){return false}else{return true}}).attr("mapped","false").selectAll("rect.stroke").remove();var m=metExploreD3.getMetaboliteStyle();var g=metExploreD3.getLinkStyle();metExploreD3.GraphLink.refreshLink("viz",j,g,m)},launchAfterMappingFunction:function(h,j){var g=_metExploreViz.getMappingById(h);if(g!==null){j(g);return}var f=this;setTimeout(function(){f.launchAfterMappingFunction(h,j)},100)},onloadMapping:function(d,c){this.launchAfterMappingFunction(d,c)},removeMappingData:function(b){this.onloadMapping(b.get("id"),function(a){metExploreD3.fireEventArg("selectConditionForm","removeMapping",a)})},loadDataFromJSON:function(g){var o=metExploreD3.GraphUtils.decodeJSON(g);if(o){var j=_metExploreViz.getSessionById("viz");var m=j.getForce();m.stop();var h=metExploreD3.createLoadMask("Mapping in progress...","viz");if(h!=undefined){metExploreD3.showMask(h);setTimeout(function(){var c=[];o.mappings.forEach(function(f){c.push(f.name)});var d=new Mapping(o.name,c,o.targetLabel,o.id);_metExploreViz.addMapping(d);metExploreD3.GraphMapping.generateMapping(d,o.mappings);metExploreD3.hideMask(h);metExploreD3.fireEventArg("selectMappingVisu","jsonmapping",d);var a=metExploreD3.GraphNetwork.isAnimated("viz");if(a=="true"){var b=j.getForce();if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){b.resume()}}},1)}}},loadDataTSV:function(g,o){var j=_metExploreViz.getSessionById("viz");var m=j.getForce();m.stop();var h=metExploreD3.createLoadMask("Mapping in progress...","viz");if(h!=undefined){metExploreD3.showMask(h);d3.tsv(g,function(f){var d=g.split("/");var z=g.split("/")[d.length-1];var c=Object.keys(f[0])[0];var y=Object.keys(f[0]).indexOf(c);var b=Object.keys(f[0]);if(y>-1){b.splice(y,1)}var a=[];var w=new Mapping(z,b,c,a);_metExploreViz.addMapping(w);metExploreD3.GraphMapping.mapNodeDataFile(w,f);metExploreD3.fireEventArg("selectMappingVisu","jsonmapping",w);metExploreD3.hideMask(h);if(o!=undefined){o()}var u=metExploreD3.GraphNetwork.isAnimated("viz");if(u=="true"){var v=j.getForce();if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){v.resume()}}})}},generateMapping:function(g,f){var h=_metExploreViz.getSessionById("viz");var j=h.getD3Data();switch(g.getTargetLabel()){case"reactionDBIdentifier":if(!(f.length==1&&f[0].name=="undefined")){f.forEach(function(a){a.data.forEach(function(c){var b=new MappingData(c.node,g.getName(),a.name,c.value);g.addMap(b);var o=j.getNodeByDbIdentifier(c.node);if(o!=undefined){var d=new MappingData(o,g.getName(),a.name,c.value);o.addMappingData(d)}})})}else{f[0].data.forEach(function(b){var a=new MappingData(b.node,g.getName(),f[0].name,b.value);g.addMap(a);var d=j.getNodeByDbIdentifier(b.node);if(d!=undefined){var c=new MappingData(d,g.getName(),f[0].name,b.value);d.addMappingData(c)}})}break;case"metaboliteDBIdentifier":f.forEach(function(a){a.data.forEach(function(c){var b=new MappingData(c.node,g.getName(),a.name,c.value);g.addMap(b);var o=j.getNodeByDbIdentifier(c.node);if(o!=undefined){var d=new MappingData(o,g.getName(),a.name,c.value);o.addMappingData(d)}})});break;case"reactionId":if(!(f.length==1&&f[0].name=="undefined")){f.forEach(function(a){a.data.forEach(function(c){var b=new MappingData(c.node,g.getName(),a.name,c.value);g.addMap(b);var o=j.getNodeById(c.node);if(o!=undefined){var d=new MappingData(o,g.getName(),a.name,c.value);o.addMappingData(d)}})})}else{f[0].data.forEach(function(b){var a=new MappingData(b.node,g.getName(),f[0].name,b.value);g.addMap(a);var d=j.getNodeById(b.node);if(d!=undefined){var c=new MappingData(d,g.getName(),f[0].name,b.value);d.addMappingData(c)}})}break;case"metaboliteId":f.forEach(function(a){a.data.forEach(function(c){var b=new MappingData(c.node,g.getName(),a.name,c.value);g.addMap(b);var o=j.getNodeById(c.node);if(o!=undefined){var d=new MappingData(o,g.getName(),a.name,c.value);if(c.inchi!=undefined){o.mappedInchi=c.inchi}o.addMappingData(d)}})});break;case"inchi":break;default:metExploreD3.displayMessage("Warning",'The type of node "'+g.getTargetLabel()+"\" isn't know.")}}};metExploreD3.GraphPanel={getHeight:function(b){return d3.select("#"+b).select("#D3viz").style("height")},getWidth:function(b){return d3.select("#"+b).select("#D3viz").style("width")},resizeViz:function(h){var m=metExploreD3.getScaleById(h);if(m!=undefined){d3.select("#metexplore").text("");d3.select("#"+h).select("#D3viz").attr("width",$("#"+h).width());d3.select("#"+h).select("#D3viz").attr("height",$("#"+h).height());d3.select("#"+h).select("#D3viz").select("#foreignObject").attr("transform","translate("+($("#"+h).width()-300)+",100) scale(1)");var j=m.getZoomScale();var o=d3.scale.linear().domain([0,$("#"+h).width()]).range([0,$("#"+h).width()]);var p=d3.scale.linear().domain([$("#"+h).height(),0]).range([$("#"+h).height(),0]);var q=m.getZoom().translate();m.getZoom().x(o).y(p).translate(q).scale(j);d3.select("#"+h).select("#D3viz").select("#brush").call(d3.svg.brush().x(o).y(p).on("brushstart",function(f){document.addEventListener("mousedown",function(g){if(g.button===1){g.stopPropagation();g.preventDefault();g.stopImmediatePropagation()}});var b=d3.select("#"+h).select("#buttonHand").attr("scrollable");_MyThisGraphNode.activePanel=this.parentNode.parentNode.id;var a=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(d3.event.sourceEvent.button!=1&&b!="true"){if(a!=undefined){if(a.isLinked()){var d=_metExploreViz.getSessionById("viz");if(d!=undefined){var c=d.getForce();if(c!=undefined){c.stop()}}}else{var c=a.getForce();if(c!=undefined){c.stop()}}}brushing=true;d3.select("#"+h).select("#brush").classed("hide",false);d3.select("#"+h).select("#D3viz").on("mousedown.zoom",null);nodeBrushed=d3.select("#"+h).select("#graphComponent").selectAll("g.node");nodeBrushed.each(function(g){g.previouslySelected=g.isSelected()})}else{var c=a.getForce();if(c!=undefined){c.stop()}d3.select("#"+h).selectAll("#D3viz").style("cursor","all-scroll");d3.selectAll("#brush").classed("hide",true)}}).on("brushend",function(){if(d3.event.sourceEvent.button!=1&&brushing){var v=d3.event.target.extent();if(v[1][0]-v[0][0]>20||v[1][1]-v[0][1]>20){var b;var v=d3.event.target.extent();var f=metExploreD3.getScaleById(h);var c=f.getZoomScale();var g=metExploreD3.createLoadMask("Selection in progress...",h);if(g!=undefined){metExploreD3.showMask(g);metExploreD3.deferFunction(function(){nodeBrushed.classed("selected",function(D){var y=f.getZoom().x();var C=f.getZoom().y();b=(y(v[0][0])<=y(D.x)&&y(D.x)<y(v[1][0]))&&(C(v[0][1])<=C(D.y)&&C(D.y)<C(v[1][1]));if((D.isSelected()==false&&b==true)||(D.isSelected()==true&&b==false&&!D.previouslySelected)){_MyThisGraphNode.selection(D,h)}return b});metExploreD3.hideMask(g);var r=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(r!=undefined){if(r.isLinked()){var z=_metExploreViz.getSessionById("viz");if(z!=undefined){var t=metExploreD3.GraphNetwork.isAnimated(z.getId());if(t=="true"){var s=z.getForce();if(s!=undefined){if((metExploreD3.GraphNetwork.isAnimated(z.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(z.getId())==null)){s.start()}}}}}else{var s=r.getForce();var t=metExploreD3.GraphNetwork.isAnimated(r.getId());if(t=="true"){var s=r.getForce();if(s!=undefined){if((metExploreD3.GraphNetwork.isAnimated(r.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(r.getId())==null)){s.start()}}}}}brushing=false},100)}}}else{var a=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(a!=undefined){if(a.isLinked()){var d=_metExploreViz.getSessionById("viz");if(d!=undefined){var w=metExploreD3.GraphNetwork.isAnimated(d.getId());if(w=="true"){var u=d.getForce();if(u!=undefined){if((metExploreD3.GraphNetwork.isAnimated(d.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(d.getId())==null)){u.start()}}}}}else{var u=a.getForce();var w=metExploreD3.GraphNetwork.isAnimated(a.getId());if(w=="true"){var u=a.getForce();if(u!=undefined){if(d3.select(metExploreD3.GraphNetwork.isAnimated(a.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(a.getId())==null)){u.start()}}}}}}d3.event.target.clear();d3.select(this).call(d3.event.target);var f=metExploreD3.getScaleById(h);d3.select("#"+h).selectAll("#D3viz").style("cursor","default");d3.select("#"+h).selectAll("#D3viz").call(f.getZoom()).on("dblclick.zoom",null).on("mousedown",null);d3.event.target.extent();d3.selectAll("#brush").classed("hide",false)}));d3.select("#viz").select("#D3viz").select("#logoViz").select("image").attr("x",$("#viz").width()-88).attr("y",$("#viz").height()-70);d3.select("#metexplore").text("MetExploreViz").attr("x",$("#viz").width()-112).attr("y",$("#viz").height()-10)}},resizePanels:function(D){var w=_metExploreViz.getSessionsSet();var v=_metExploreViz.getSessionById(D);var z=$("#"+D).height();var t=$("#"+D).width();d3.select("#"+D).select("#D3viz").select("foreignObject").attr("x",t-300);if(d3.select("#"+D).select("#D3viz").select("#buttonZoomIn")[0][0]!=null&&d3.select("#"+D).select("#D3viz").select("#buttonZoomOut")[0][0]!=null&&d3.select("#"+D).select("#D3viz").select("#buttonHand")[0][0]!=null){var u=d3.select("#"+D).select("#D3viz").select("#buttonZoomIn").attr("x");var A=t-60-u;d3.select("#"+D).select("#D3viz").select("#buttonZoomIn").attr("transform","translate("+A+",0) scale(1)");u=d3.select("#"+D).select("#D3viz").select("#buttonZoomOut").attr("x");A=t-110-u;d3.select("#"+D).select("#D3viz").select("#buttonZoomOut").attr("transform","translate("+A+",0) scale(1)");u=d3.select("#"+D).select("#D3viz").select("#buttonHand").attr("x");A=t-160-u;d3.select("#"+D).select("#D3viz").select("#buttonHand").attr("transform","translate("+A+",0) scale(1)");u=d3.select("#"+D).select("#D3viz").select("#whiteBlack").attr("x");A=t-100-u;d3.select("#"+D).select("#D3viz").select("#whiteBlack").attr("transform","translate("+A+",0) scale(1)");u=d3.select("#"+D).select("#D3viz").select("#invertColor").attr("x");A=t-100-u;d3.select("#"+D).select("#D3viz").select("#invertColor").attr("transform","translate("+A+",0) scale(1)")}if(v!=undefined){if(v.isLinked()){var y=_metExploreViz.getSessionById("viz");var C=y.getForce();if(C!=undefined){var z=$("#viz").height();var t=$("#viz").width();C.size([t,z]);var B=d3.select("#viz").select("#buttonAnim").attr("animation");if(B=="true"){C.resume()}}}else{var C=v.getForce();if(C!=undefined){var z=$("#"+D).height();var t=$("#"+D).width();C.size([t,z]);var B=d3.select("#"+D).select("#buttonAnim").attr("animation");if(B=="true"){C.resume()}}}}var h=_metExploreViz.getSessionsSet();var v=_metExploreViz.getSessionById(D);if(v!=undefined){var B=metExploreD3.GraphNetwork.isAnimated(D);if(B=="true"){if(v.isLinked()){for(var s in h){if(h[s].isLinked()){metExploreD3.GraphNetwork.animationButtonOn(h[s].getId())}}var C=_metExploreViz.getSessionById("viz").getForce();C.resume()}else{metExploreD3.GraphNetwork.animationButtonOn(D);var C=v.getForce();C.resume()}}}},removeSvgComponents:function(b){d3.select("#"+b).select("#D3viz").selectAll("*").remove()},refreshJSON:function(o){var g=metExploreD3.GraphUtils.decodeJSON(o);if(g){if(!_metExploreViz.isLaunched()){metExploreD3.GraphPanel.initiateViz("D3")}var m=Ext.getCmp("viz");if(m!=undefined){var h=metExploreD3.createLoadMask("Refresh in process...","viz");if(h!=undefined){metExploreD3.showMask(h);var j=this;setTimeout(function(){metExploreD3.fireEvent("selectConditionForm","resetMapping");if(g.sessions!=undefined){metExploreD3.GraphPanel.loadDataJSON(o,a)}else{metExploreD3.GraphPanel.initDataJSON(o,a)}function a(){metExploreD3.hideMask(h);metExploreD3.fireEvent("graphPanel","afterrefresh")}},100)}}}},refreshPanel:function(f,g){var d=this;metExploreD3.hideInitialMask();if(metExploreD3.GraphUtils.decodeJSON(f).nodes||metExploreD3.GraphUtils.decodeJSON(f).sessions){if(!_metExploreViz.isLaunched()||metExploreD3.getGeneralStyle().windowsAlertIsDisable()){metExploreD3.GraphPanel.refreshJSON(f);if(typeof g==="function"){g()}}else{Ext.Msg.show({title:"Are you sure?",msg:"This action will remove previous network. <br />Would you like to do this?",buttons:Ext.Msg.OKCANCEL,fn:function(a){if(a=="ok"){metExploreD3.GraphPanel.refreshJSON(f);if(g!=undefined&&typeof g==="function"){g()}}},icon:Ext.Msg.QUESTION})}}else{metExploreD3.displayWarning("Syntaxe error",'File have bad syntax. Use a saved file from MetExploreViz or see <a href="http://metexplore.toulouse.inra.fr/metexploreViz/doc/documentation.php#generalfunctioning">MetExploreViz documentation</a>.')}},loadDataJSON:function(j,g){var f=metExploreD3.GraphUtils.decodeJSON(j);if(f){if(metExploreD3.bioSourceControled()){_metExploreViz.setBiosource(f.biosource);metExploreD3.fireEventParentWebSite("loadNetworkBiosource",{biosource:f.biosource,func:h,endFunc:g,json:j})}else{h();g()}function h(){var a=_metExploreViz.getSessionById("viz");var c=a.getForce();if(c!=undefined){c.nodes([]);c.links([]);c.on("start",null);c.on("end",null);c.on("tick",null)}a.reset();if(f.comparedPanels){f.comparedPanels.forEach(function(m){_metExploreViz.addComparedPanel(new ComparedPanel(m.panel,m.visible,m.parent,m.title))})}if(f.mappings){f.mappings.forEach(function(m){var m=new Mapping(m.name,m.conditions,m.targetLabel);_metExploreViz.addMapping(m)})}if(f.generalStyle){var y=metExploreD3.getGeneralStyle();var z=new GeneralStyle(y.getWebsiteName(),f.generalStyle.colorMinMappingContinuous,f.generalStyle.colorMaxMappingContinuous,f.generalStyle.maxReactionThreshold,f.generalStyle.displayLabelsForOpt,f.generalStyle.displayLinksForOpt,f.generalStyle.displayConvexhulls,f.generalStyle.clustered,f.generalStyle.displayCaption,y.hasEventForNodeInfo(),y.loadButtonIsHidden(),y.windowsAlertIsDisable());metExploreD3.setGeneralStyle(z)}var D=f.sessions;for(var C in D){if(C!="viz"){var a=new NetworkVizSession();a.setVizEngine("D3");a.setId(C);a.setLinked(D[C].linked);_metExploreViz.addSession(a);var b=Ext.getCmp("comparePanel");var v=_metExploreViz.getComparedPanelById(C);var B=[{id:v.getParent(),title:v.getTitle(),html:'<div id="'+v.getParent()+'" height="100%" width="100%"></div>',flex:1,closable:true,collapsible:true,collapseDirection:"left"}];b.add(B);b.expand();metExploreD3.fireEventArg("comparePanel","initiateviz",C)}if(D[C].colorMappings){D[C].colorMappings.forEach(function(m){a.addColorMapping(m.name,m.value)})}var d=D[C].animated;if(!d){d=false}a.setAnimated(d);var w=new NetworkData(C);w.cloneObject(D[C].d3Data);var A=w.getNodes();A.forEach(function(m){if(m.getBiologicalType()=="metabolite"){if(w.getCompartmentByName(m.getCompartment())==null){w.addCompartment(m.getCompartment())}}else{m.getPathways().forEach(function(o){if(w.getPathwayByName(o)==null){w.addPathway(o)}})}if(m.getMappingDatasLength()>0){m.getMappingDatas().forEach(function(o){o.setNode(m);if(_metExploreViz.getMappingByName(o.getMappingName())!=null){var p=_metExploreViz.getMappingByName(o.getMappingName());p.addMap(o)}})}});w.setId(C);if(C=="viz"){_metExploreViz.setInitialData(_metExploreViz.cloneNetworkData(w))}a.setD3Data(w);if(D[C].selectedNodes){D[C].selectedNodes.forEach(function(m){a.addSelectedNode(m)})}if(_metExploreViz.getMappingsLength()>0&&C=="viz"&&!metExploreD3.getGeneralStyle().windowsAlertIsDisable()){metExploreD3.displayMessageYesNo("Mapping","Do you want keep mappings.",function(m){if(m=="yes"){_metExploreViz.getMappingsSet().forEach(function(o){metExploreD3.GraphMapping.reloadMapping(o);metExploreD3.fireEventArg("selectMappingVisu","jsonmapping",o)});metExploreD3.fireEventArg("buttonRefresh","reloadMapping",true)}else{metExploreD3.fireEventArg("buttonMap","reloadMapping",false);metExploreD3.fireEventArg("buttonRefresh","reloadMapping",false);metExploreD3.fireEventArg("selectConditionForm","closeMapping",_metExploreViz.getActiveMapping);_metExploreViz.resetMappings()}})}if(D[C].mapped){a.setMapped(D[C].mapped)}if(D[C].mappingDataType){a.setMappingDataType(D[C].mappingDataType)}if(D[C].activeMapping){a.setActiveMapping(D[C].activeMapping)}}if(f.linkStyle){var z=new LinkStyle(f.linkStyle.size,f.linkStyle.lineWidth,f.linkStyle.markerWidth,f.linkStyle.markerHeight,f.linkStyle.markerInColor,f.linkStyle.markerOutColor,f.linkStyle.markerStrokeColor,f.linkStyle.markerStrokeWidth,f.linkStyle.strokeColor);metExploreD3.setLinkStyle(z)}if(f.metaboliteStyle){var z=new MetaboliteStyle(f.metaboliteStyle.height,f.metaboliteStyle.width,f.metaboliteStyle.rx,f.metaboliteStyle.ry,f.metaboliteStyle.fontSize,f.metaboliteStyle.strokeWidth,f.metaboliteStyle.label,f.metaboliteStyle.strokeColor);metExploreD3.setMetaboliteStyle(z)}if(f.reactionStyle){var z=new ReactionStyle(f.reactionStyle.height,f.reactionStyle.width,f.reactionStyle.rx,f.reactionStyle.ry,f.reactionStyle.label,f.reactionStyle.fontSize,f.reactionStyle.strokeColor,f.reactionStyle.strokeWidth);metExploreD3.setReactionStyle(z)}for(var C in D){metExploreD3.GraphNetwork.refreshSvg(C)}g()}}},initDataJSON:function(q,y){var p=metExploreD3.GraphUtils.decodeJSON(q);if(p){var r=_metExploreViz.getSessionById("viz");var w=r.getD3Data();_metExploreViz.resetOldCoodinates();w.getNodes().forEach(function(a){_metExploreViz.addOldCoodinates({id:a.getId(),x:a.x,px:a.px,y:a.y,py:a.py})});var v=r.getForce();if(v!=undefined){v.nodes([]);v.links([]);v.on("start",null);v.on("end",null);v.on("tick",null)}r.reset();r.setAnimated(true);var w=new NetworkData("viz");w.cloneObject(p);var z=w.getNodes();z.forEach(function(a){if(a.getBiologicalType()=="metabolite"){if(w.getCompartmentByName(a.getCompartment())==null){w.addCompartment(a.getCompartment())}}else{a.getPathways().forEach(function(b){if(w.getPathwayByName(b)==null){w.addPathway(b)}})}});w.setId("viz");_metExploreViz.setInitialData(_metExploreViz.cloneNetworkData(w));r.setD3Data(w);metExploreD3.GraphNetwork.refreshSvg("viz");var t=_metExploreViz.getOldCoodinates();if(t.length>0){var s=false;var u=0;while(u<t.length-1&&!s){if(w.getNodeById(t[u].id)!=undefined){s=true}u++}if(s&&!metExploreD3.getGeneralStyle().windowsAlertIsDisable()){metExploreD3.displayMessageYesNo("Coodinates","Do you want keep node coordinates.",function(b){if(b=="yes"){var a=[];t.forEach(function(d){var c=w.getNodeById(d.id);if(c!=undefined){c.x=d.x;c.y=d.y;c.px=d.px;c.py=d.py;a.push(d.id)}});d3.select("#viz").select("#graphComponent").selectAll("g.node").filter(function(c){return a.indexOf(c.id)!=-1}).each(function(c){c.setLocked(!c.isLocked());c.fixed=c.isLocked()});d3.select("#viz").select("#graphComponent").selectAll("g.node").filter(function(c){return a.indexOf(c.id)!=-1}).each(function(c){_MyThisGraphNode.selection(c,"viz")})}})}}if(_metExploreViz.getMappingsLength()>0){_metExploreViz.getMappingsSet().forEach(function(a){metExploreD3.GraphMapping.reloadMapping(a);metExploreD3.fireEventArg("selectMappingVisu","jsonmapping",a)});metExploreD3.fireEventArg("buttonRefresh","reloadMapping",true)}}y()},initiateViz:function(b){d3.select("#viz").selectAll("#presentationViz, #presentationLogoViz").classed("hide",true);metExploreD3.fireEvent("viz","initiateviz");_metExploreViz.setLaunched(true);if(b=="D3"){metExploreD3.GraphNetwork.delayedInitialisation("viz")}},loadData:function(d){var c=_metExploreViz.getSessionById(d);return c}};metExploreD3.GraphPath={panelParent:"",delayedInitialisation:function(b){metExploreD3.GraphLink.panelParent=b},refreshLink:function(s,o,j,p){metExploreD3.GraphLink.panelParent="#"+s;var q=o.getD3Data();var m=20;var r=j.getMarkerWidth()/2;d3.select("#"+s).select("#D3viz").select("#graphComponent").append("svg:defs").selectAll("marker").data(["in","out"]).enter().append("svg:marker").attr("id",String).attr("viewBox","0 0 "+j.getMarkerWidth()+" "+j.getMarkerHeight()).attr("refY",r).attr("markerWidth",j.getMarkerWidth()).attr("markerHeight",j.getMarkerHeight()).attr("orient","auto").append("svg:path").attr("class",String).attr("d","M0,0L"+j.getMarkerWidth()+","+j.getMarkerHeight()/2+"L0,"+j.getMarkerWidth()+"Z").style("visibility","hidden");metExploreD3.GraphLink.link=d3.select("#"+s).select("#D3viz").select("#graphComponent").selectAll("line").data(q.getLinks()).enter().append("line").attr("class","link").attr("marker-end",function(a){if(a.interaction=="out"){d3.select("#"+s).select("#D3viz").select("#graphComponent").select("#"+a.interaction).attr("refX",(p.getWidth()+p.getHeight())/2/2+(j.getMarkerWidth())).style("fill",j.getMarkerOutColor()).style("stroke",j.getMarkerStrokeColor()).style("stroke-width",j.getMarkerStrokeWidth());return"url(#"+a.interaction+")"}else{return"none"}}).attr("marker-start",function(a){if(a.interaction=="out"){return"none"}else{d3.select("#"+s).select("#D3viz").select("#graphComponent").select("#"+a.interaction).attr("refX",-((p.getWidth()+p.getHeight())/2/2)).style("fill",j.getMarkerInColor()).style("stroke",j.getMarkerStrokeColor()).style("stroke-width",j.getMarkerStrokeWidth());return"url(#"+a.interaction+")"}}).style("stroke",j.getStrokeColor())},tick:function(d,c){d3.select("#"+d).select("#D3viz").selectAll("path").filter(function(a){return a!="linkCaptionRev"}).attr("d",metExploreD3.GraphPath.groupPath).attr("transform",d3.select("#"+d).select("#D3viz").select("#graphComponent").attr("transform"))},loadPath:function(g){d3.select("#"+g).select("#D3viz").select("#graphComponent").selectAll("g.node");var d=metExploreD3.GraphPath.node.filter(function(a){return a.getBiologicalType()=="metabolite"});session.groups=d3.nest().key(function(a){return a.getCompartment()}).entries(d.data());metExploreD3.GraphPath.groupPath=function(r){var a=metExploreD3.getScaleById("viz");if(r.values.length>0){if(r.values.length>2){return"M"+d3.geom.hull(r.values.map(function(h){return[h.x,h.y]})).join("L")+"Z"}else{var b=[];r.values.forEach(function(h){b.push([h.x,h.y])});var p,q;for(var c=r.values.length;c<3;c++){p=r.values[0].x*(1+0.00001*c);q=r.values[0].y*(1+0.000011*c);b.push([p,q])}return"M"+d3.geom.hull(b).join("L")+"Z"}}};metExploreD3.GraphPath.groupFill=function(a,b){metExploreD3.sortCompartmentInBiosource();var j;for(var c=0;c<metExploreD3.getCompartmentInBiosourceLength();c++){if(a.key==metExploreD3.getCompartmentInBiosourceSet()[c].getIdentifier()){j=metExploreD3.getCompartmentInBiosourceSet()[c].getColor()}}return j};var f="M0,0L10,10Z";d3.select("#"+g).select("#D3viz").selectAll("path").filter(function(a){return a!="linkCaptionRev"}).data(session.groups).attr("d",function(a){return f}).enter().insert("path",":first-child").attr("class",function(a){return a.key}).attr("id",function(a){return a.key}).style("fill",metExploreD3.GraphPath.groupFill).style("stroke",metExploreD3.GraphPath.groupFill).style("stroke-width",40).style("stroke-linejoin","round").style("opacity",0.15)}};