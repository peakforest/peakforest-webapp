var Ext=Ext||{};if(!Ext.Toolbar){Ext.Toolbar={}}if(!Ext.app){Ext.app={}}if(!Ext.app.bind){Ext.app.bind={}}if(!Ext.app.domain){Ext.app.domain={}}if(!Ext.app.route){Ext.app.route={}}if(!Ext.button){Ext.button={}}if(!Ext.container){Ext.container={}}if(!Ext.core){Ext.core={}}if(!Ext.data){Ext.data={}}if(!Ext.data.field){Ext.data.field={}}if(!Ext.data.flash){Ext.data.flash={}}if(!Ext.data.identifier){Ext.data.identifier={}}if(!Ext.data.matrix){Ext.data.matrix={}}if(!Ext.data.operation){Ext.data.operation={}}if(!Ext.data.proxy){Ext.data.proxy={}}if(!Ext.data.reader){Ext.data.reader={}}if(!Ext.data.request){Ext.data.request={}}if(!Ext.data.schema){Ext.data.schema={}}if(!Ext.data.session){Ext.data.session={}}if(!Ext.data.validator){Ext.data.validator={}}if(!Ext.data.writer){Ext.data.writer={}}if(!Ext.dd){Ext.dd={}}if(!Ext.dom){Ext.dom={}}if(!Ext.dom.Element){Ext.dom.Element={}}if(!Ext.event){Ext.event={}}if(!Ext.event.gesture){Ext.event.gesture={}}if(!Ext.event.publisher){Ext.event.publisher={}}if(!Ext.form){Ext.form={}}if(!Ext.form.Action){Ext.form.Action={}}if(!Ext.form.action){Ext.form.action={}}if(!Ext.form.field){Ext.form.field={}}if(!Ext.form.trigger){Ext.form.trigger={}}if(!Ext.fx){Ext.fx={}}if(!Ext.fx.animation){Ext.fx.animation={}}if(!Ext.fx.easing){Ext.fx.easing={}}if(!Ext.fx.runner){Ext.fx.runner={}}if(!Ext.fx.target){Ext.fx.target={}}if(!Ext.layout){Ext.layout={}}if(!Ext.layout.boxOverflow){Ext.layout.boxOverflow={}}if(!Ext.layout.component){Ext.layout.component={}}if(!Ext.layout.component.field){Ext.layout.component.field={}}if(!Ext.layout.container){Ext.layout.container={}}if(!Ext.layout.container.border){Ext.layout.container.border={}}if(!Ext.layout.container.boxOverflow){Ext.layout.container.boxOverflow={}}if(!Ext.menu){Ext.menu={}}if(!Ext.mixin){Ext.mixin={}}if(!Ext.overrides){Ext.overrides={}}if(!Ext.overrides.app){Ext.overrides.app={}}if(!Ext.overrides.app.domain){Ext.overrides.app.domain={}}if(!Ext.overrides.dom){Ext.overrides.dom={}}if(!Ext.overrides.event){Ext.overrides.event={}}if(!Ext.overrides.event.publisher){Ext.overrides.event.publisher={}}if(!Ext.overrides.util){Ext.overrides.util={}}if(!Ext.panel){Ext.panel={}}if(!Ext.perf){Ext.perf={}}if(!Ext.plugin){Ext.plugin={}}if(!Ext.promise){Ext.promise={}}if(!Ext.resizer){Ext.resizer={}}if(!Ext.scroll){Ext.scroll={}}if(!Ext.selection){Ext.selection={}}if(!Ext.state){Ext.state={}}if(!Ext.theme){Ext.theme={}}if(!Ext.theme.neptune){Ext.theme.neptune={}}if(!Ext.theme.neptune.layout){Ext.theme.neptune.layout={}}if(!Ext.theme.neptune.layout.component){Ext.theme.neptune.layout.component={}}if(!Ext.theme.neptune.menu){Ext.theme.neptune.menu={}}if(!Ext.theme.neptune.panel){Ext.theme.neptune.panel={}}if(!Ext.theme.neptune.resizer){Ext.theme.neptune.resizer={}}if(!Ext.theme.neptune.toolbar){Ext.theme.neptune.toolbar={}}if(!Ext.theme.triton){Ext.theme.triton={}}if(!Ext.theme.triton.form){Ext.theme.triton.form={}}if(!Ext.theme.triton.form.field){Ext.theme.triton.form.field={}}if(!Ext.theme.triton.menu){Ext.theme.triton.menu={}}if(!Ext.theme.triton.resizer){Ext.theme.triton.resizer={}}if(!Ext.theme.triton.toolbar){Ext.theme.triton.toolbar={}}if(!Ext.tip){Ext.tip={}}if(!Ext.toolbar){Ext.toolbar={}}if(!Ext.util){Ext.util={}}if(!Ext.util.paintmonitor){Ext.util.paintmonitor={}}if(!Ext.util.sizemonitor){Ext.util.sizemonitor={}}if(!Ext.util.translatable){Ext.util.translatable={}}if(!Ext.ux){Ext.ux={}}if(!Ext.ux.form){Ext.ux.form={}}if(!Ext.view){Ext.view={}}if(!Ext.window){Ext.window={}}var metExploreViz=metExploreViz||{};if(!metExploreViz.view){metExploreViz.view={}}if(!metExploreViz.view.button){metExploreViz.view.button={}}if(!metExploreViz.view.button.buttonImportMapping){metExploreViz.view.button.buttonImportMapping={}}if(!metExploreViz.view.button.buttonImportSideCompounds){metExploreViz.view.button.buttonImportSideCompounds={}}if(!metExploreViz.view.button.buttonImportToNetwork){metExploreViz.view.button.buttonImportToNetwork={}}if(!metExploreViz.view.form){metExploreViz.view.form={}}if(!metExploreViz.view.form.generalStyleForm){metExploreViz.view.form.generalStyleForm={}}if(!metExploreViz.view.form.metaboliteStyleForm){metExploreViz.view.form.metaboliteStyleForm={}}if(!metExploreViz.view.form.reactionStyleForm){metExploreViz.view.form.reactionStyleForm={}}if(!metExploreViz.view.form.selectCondition){metExploreViz.view.form.selectCondition={}}if(!metExploreViz.view.form.selectConditionForm){metExploreViz.view.form.selectConditionForm={}}if(!metExploreViz.view.form.selectMapping){metExploreViz.view.form.selectMapping={}}if(!metExploreViz.view.form.updateStyleForm){metExploreViz.view.form.updateStyleForm={}}if(!metExploreViz.view.menu){metExploreViz.view.menu={}}if(!metExploreViz.view.menu.viz_AlgorithmMenu){metExploreViz.view.menu.viz_AlgorithmMenu={}}if(!metExploreViz.view.menu.viz_ColorMenu){metExploreViz.view.menu.viz_ColorMenu={}}if(!metExploreViz.view.menu.viz_ConvexHullMenu){metExploreViz.view.menu.viz_ConvexHullMenu={}}if(!metExploreViz.view.menu.viz_DrawingMenu){metExploreViz.view.menu.viz_DrawingMenu={}}if(!metExploreViz.view.menu.viz_ExportMenu){metExploreViz.view.menu.viz_ExportMenu={}}if(!metExploreViz.view.menu.viz_ImportMenu){metExploreViz.view.menu.viz_ImportMenu={}}if(!metExploreViz.view.menu.viz_LayoutMenu){metExploreViz.view.menu.viz_LayoutMenu={}}if(!metExploreViz.view.menu.viz_LoadMenu){metExploreViz.view.menu.viz_LoadMenu={}}if(!metExploreViz.view.menu.viz_MiningMenu){metExploreViz.view.menu.viz_MiningMenu={}}if(!metExploreViz.view.menu.viz_SaveMenu){metExploreViz.view.menu.viz_SaveMenu={}}if(!metExploreViz.view.panel){metExploreViz.view.panel={}}if(!metExploreViz.view.panel.comparePanel){metExploreViz.view.panel.comparePanel={}}if(!metExploreViz.view.panel.comparisonSidePanel){metExploreViz.view.panel.comparisonSidePanel={}}if(!metExploreViz.view.panel.graphPanel){metExploreViz.view.panel.graphPanel={}}if(!metExploreViz.view.panel.networkPanel){metExploreViz.view.panel.networkPanel={}}if(!metExploreViz.view.panel.viz){metExploreViz.view.panel.viz={}}(function(f){var b,r=["constructor","toString","valueOf","toLocaleString"],g={},v={},d=0,s,p,y,j,a,h,t,c,o,w=function(){var A,z;p=Ext.Base;y=Ext.ClassManager;for(A=r.length;A-->0;){z=(1<<A);v[g[z]=r[A]]=z}for(A in v){d|=v[A]}d=~d;Function.prototype.$isFunction=1;o=!!(y&&y.addAlias);j=Ext.Class.getPreprocessor("config").fn;a=Ext.Class.getPreprocessor("cachedConfig")&&Ext.Class.getPreprocessor("cachedConfig").fn;h=Ext.Class.getPreprocessor("platformConfig")&&Ext.Class.getPreprocessor("platformConfig").fn;c=Ext.Class.getPreprocessor("privates")&&Ext.Class.getPreprocessor("privates").fn;t=Ext.ClassManager.postprocessors.deprecated&&Ext.ClassManager.postprocessors.deprecated.fn;b=p.$staticMembers;if(!b){b=[];for(s in p){if(p.hasOwnProperty(s)){b.push(s)}}}f.derive=q;return q.apply(this,arguments)},m=function(D,z,C){var G=C.enumerableMembers,A=D.prototype,I,B,H,F,E;if(!z){return}if(o){D.addMembers(z)}else{for(I in z){F=z[I];if(F&&F.$isFunction&&!F.$isClass&&F!==Ext.emptyFn&&F!==Ext.identityFn){E=A.hasOwnProperty(I)&&A[I];if(E){F.$previous=E}A[I]=B=F;B.$owner=D;B.$name=I}else{A[I]=F}}for(H=1;G;H<<=1){if(G&H){G&=~H;I=g[H];A[I]=B=z[I];B.$owner=D;B.$name=I}}}},u=function(z){var C=function D(){return z.apply(this,arguments)||null},B,A;C.prototype=Ext.Object.chain(z.prototype);for(B=b.length;B-->0;){A=b[B];C[A]=p[A]}return C},q=function(V,ab,I,B,Z,N,X,af,S,U,E){var Q=function C(){return this.constructor.apply(this,arguments)||null},G=Q,R={enumerableMembers:B&d,onCreated:E,onBeforeCreated:m,aliases:af},J=I.alternateClassName||[],ad=Ext.global,W,ac,ae,H,aa,O,M,T,Y,A,D,P,F,L,K=y.alternateToName||y.maps.alternateToName,z=y.nameToAlternates||y.maps.nameToAlternates;for(ae=b.length;ae-->0;){M=b[ae];Q[M]=p[M]}if(I.$isFunction){I=I(Q)}R.data=I;A=I.statics;delete I.statics;I.$className=V;if("$className" in I){Q.$className=I.$className}Q.extend(ab);Y=Q.prototype;Q.xtype=I.xtype=Z[0];if(Z){Y.xtypes=Z}Y.xtypesChain=N;Y.xtypesMap=X;I.alias=af;G.triggerExtended(Q,I,R);if(I.onClassExtended){Q.onExtended(I.onClassExtended,Q);delete I.onClassExtended}if(I.privates&&c){c.call(Ext.Class,Q,I)}if(A){if(o){Q.addStatics(A)}else{for(D in A){if(A.hasOwnProperty(D)){L=A[D];if(L&&L.$isFunction&&!L.$isClass&&L!==Ext.emptyFn&&L!==Ext.identityFn){Q[D]=F=L;F.$owner=Q;F.$name=D}Q[D]=L}}}}if(I.inheritableStatics){Q.addInheritableStatics(I.inheritableStatics);delete I.inheritableStatics}if(Y.onClassExtended){G.onExtended(Y.onClassExtended,G);delete Y.onClassExtended}if(I.platformConfig&&h){h.call(Ext.Class,Q,I);delete I.platformConfig}if(I.config){j.call(Ext.Class,Q,I)}if(I.cachedConfig&&a){a.call(Ext.Class,Q,I);delete I.cachedConfig}if(I.deprecated&&t){t.call(Ext.ClassManager,V,Q,I)}R.onBeforeCreated(Q,R.data,R);for(ae=0,aa=S&&S.length;ae<aa;++ae){Q.mixin.apply(Q,S[ae])}for(ae=0,aa=af.length;ae<aa;ae++){W=af[ae];y.setAlias?y.setAlias(Q,W):y.addAlias(Q,W)}if(I.singleton){G=new Q()}if(!(J instanceof Array)){J=[J]}P=y.getName(G);for(ae=0,H=J.length;ae<H;ae++){ac=J[ae];y.classes[ac]=G;if(o){y.addAlternate(Q,ac)}else{if(P){K[ac]=P;J=z[P]||(z[P]=[]);J.push(ac)}}}for(ae=0,aa=U.length;ae<aa;ae+=2){O=U[ae];if(!O){O=ad}O[U[ae+1]]=G}y.classes[V]=G;if(!o){if(P&&P!==V){K[V]=P;J=z[P]||(z[P]=[]);J.push(V)}}delete Y.alternateClassName;if(R.onCreated){R.onCreated.call(G,G)}if(V){y.triggerCreated(V)}return G};f.derive=w}(Ext.cmd={}));var Ext=Ext||{};(function(){var q=this,f=Object.prototype,a=f.toString,r=["valueOf","toLocaleString","toString","constructor"],j=function(){},d=function(){},g=function(s){return s},p=function(){var s=p.caller.caller;return s.$owner.prototype[s.$name].apply(this,arguments)},o=Ext.manifest||{},h,b=/\[object\s*(?:Array|Arguments|\w*Collection|\w*List|HTML\s+document\.all\s+class)\]/,c=/^\\?\/Date\(([-+])?(\d+)(?:[+-]\d{4})?\)\\?\/$/;Ext.global=q;Ext.now=Date.now||(Date.now=function(){return +new Date()});Ext.ticks=(q.performance&&q.performance.now)?function(){return performance.now()}:Ext.now;Ext._startTime=Ext.ticks();j.$nullFn=g.$nullFn=j.$emptyFn=g.$identityFn=d.$nullFn=true;d.$privacy="framework";Ext.suspendLayouts=Ext.resumeLayouts=j;for(h in {toString:1}){r=null}Ext.enumerables=r;Ext.apply=function(s,y,u){if(u){Ext.apply(s,u)}if(s&&y&&typeof y==="object"){var t,w,v;for(t in y){s[t]=y[t]}if(r){for(w=r.length;w--;){v=r[w];if(y.hasOwnProperty(v)){s[v]=y[v]}}}}return s};function m(s,u,t){var v,w;for(v in t){if(t.hasOwnProperty(v)){w=t[v];if(typeof w==="function"){w.$name=v;w.$owner=u;w.$previous=s.hasOwnProperty(v)?s[v]:p}s[v]=w}}}Ext.buildSettings=Ext.apply({baseCSSPrefix:"x-"},Ext.buildSettings||{});Ext.apply(Ext,{idSeed:0,idPrefix:"ext-",isSecure:/^https/i.test(window.location.protocol),enableGarbageCollector:false,enableListenerCollection:true,name:Ext.sandboxName||"Ext",privateFn:d,emptyFn:j,identityFn:g,frameStartTime:Ext.now(),manifest:o,enableAria:true,enableAriaButtons:true,enableAriaPanels:true,startsWithHashRe:/^#/,validIdRe:/^[a-z_][a-z0-9\-_]*$/i,BLANK_IMAGE_URL:"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",makeIdSelector:function(s){return"#"+s},id:function(s,u){if(s&&s.id){return s.id}var t=(u||Ext.idPrefix)+(++Ext.idSeed);if(s){s.id=t}return t},returnId:function(s){return s.getId()},returnTrue:function(){return true},emptyString:new String(),baseCSSPrefix:Ext.buildSettings.baseCSSPrefix,$eventNameMap:{},$vendorEventRe:/^(Moz.+|MS.+|webkit.+)/,canonicalEventName:function(s){return Ext.$eventNameMap[s]||(Ext.$eventNameMap[s]=(Ext.$vendorEventRe.test(s)?s:s.toLowerCase()))},applyIf:function(s,u){var t;if(s){for(t in u){if(s[t]===undefined){s[t]=u[t]}}}return s},destroy:function(){var t=arguments.length,s,u;for(s=0;s<t;s++){u=arguments[s];if(u){if(Ext.isArray(u)){this.destroy.apply(this,u)}else{if(Ext.isFunction(u.destroy)){u.destroy()}}}}return null},destroyMembers:function(s){for(var u,y,t=1,w=arguments,v=w.length;t<v;t++){u=s[y=w[t]];if(u!=null){s[y]=Ext.destroy(u)}}},override:function(s,t){if(s.$isClass){s.override(t)}else{if(typeof s==="function"){Ext.apply(s.prototype,t)}else{var u=s.self,v;if(u&&u.$isClass){v=t.privates;if(v){t=Ext.apply({},t);delete t.privates;m(s,u,v)}m(s,u,t)}else{Ext.apply(s,t)}}}return s},valueFrom:function(t,u,s){return Ext.isEmpty(t,s)?u:t},isEmpty:function(s,t){return(s==null)||(!t?s==="":false)||(Ext.isArray(s)&&s.length===0)},isArray:("isArray" in Array)?Array.isArray:function(s){return a.call(s)==="[object Array]"},isDate:function(s){return a.call(s)==="[object Date]"},isMSDate:function(s){if(!Ext.isString(s)){return false}return c.test(s)},isObject:(a.call(null)==="[object Object]")?function(s){return s!==null&&s!==undefined&&a.call(s)==="[object Object]"&&s.ownerDocument===undefined}:function(s){return a.call(s)==="[object Object]"},isSimpleObject:function(s){return s instanceof Object&&s.constructor===Object},isPrimitive:function(t){var s=typeof t;return s==="string"||s==="number"||s==="boolean"},isFunction:(typeof document!=="undefined"&&typeof document.getElementsByTagName("body")==="function")?function(s){return !!s&&a.call(s)==="[object Function]"}:function(s){return !!s&&typeof s==="function"},isNumber:function(s){return typeof s==="number"&&isFinite(s)},isNumeric:function(s){return !isNaN(parseFloat(s))&&isFinite(s)},isString:function(s){return typeof s==="string"},isBoolean:function(s){return typeof s==="boolean"},isElement:function(s){return s?s.nodeType===1:false},isTextNode:function(s){return s?s.nodeName==="#text":false},isDefined:function(s){return typeof s!=="undefined"},isIterable:function(s){if(!s||typeof s.length!=="number"||typeof s==="string"||Ext.isFunction(s)){return false}if(!s.propertyIsEnumerable){return !!s.item}if(s.hasOwnProperty("length")&&!s.propertyIsEnumerable("length")){return true}return b.test(a.call(s))},isDebugEnabled:j,clone:function(u){if(u===null||u===undefined){return u}if(u.nodeType&&u.cloneNode){return u.cloneNode(true)}var t=a.call(u),s,y,w,v,z;if(t==="[object Date]"){return new Date(u.getTime())}if(t==="[object Array]"){s=u.length;v=[];while(s--){v[s]=Ext.clone(u[s])}}else{if(t==="[object Object]"&&u.constructor===Object){v={};for(z in u){v[z]=Ext.clone(u[z])}if(r){for(y=r.length;y--;){w=r[y];if(u.hasOwnProperty(w)){v[w]=u[w]}}}}}return v||u},getUniqueGlobalNamespace:function(){var t=this.uniqueGlobalNamespace,s;if(t===undefined){s=0;do{t="ExtBox"+(++s)}while(q[t]!==undefined);q[t]=Ext;this.uniqueGlobalNamespace=t}return t},functionFactoryCache:{},cacheableFunctionFactory:function(){var u=this,y=Array.prototype.slice.call(arguments),w=u.functionFactoryCache,v,s,t;if(Ext.isSandboxed){t=y.length;if(t>0){t--;y[t]="var Ext=window."+Ext.name+";"+y[t]}}v=y.join("");s=w[v];if(!s){s=Function.prototype.constructor.apply(Function.prototype,y);w[v]=s}return s},functionFactory:function(){var s=Array.prototype.slice.call(arguments),t;if(Ext.isSandboxed){t=s.length;if(t>0){t--;s[t]="var Ext=window."+Ext.name+";"+s[t]}}return Function.prototype.constructor.apply(Function.prototype,s)},Logger:{verbose:j,log:j,info:j,warn:j,error:function(s){throw new Error(s)},deprecate:j},getElementById:function(s){return document.getElementById(s)},splitAndUnescape:(function(){var s={};return function(z,y){if(!z){return[]}else{if(!y){return[z]}}var u=s[y]||(s[y]=new RegExp("\\\\"+y,"g")),w=[],v,t;v=z.split(y);while((t=v.shift())!==undefined){while(t.charAt(t.length-1)==="\\"&&v.length>0){t=t+y+v.shift()}t=t.replace(u,y);w.push(t)}return w}})()});Ext.returnTrue.$nullFn=Ext.returnId.$nullFn=true}());Ext.platformTags.modern=!(Ext.platformTags.classic=Ext.isClassic=true);(function(){function a(){var c=this,b=c.sourceClass,f=c.sourceMethod,d=c.msg;if(f){if(d){f+="(): ";f+=d}else{f+="()"}}if(b){f=f?(b+"."+f):b}return f||d||""}Ext.Error=function(c){if(Ext.isString(c)){c={msg:c}}var b=new Error();Ext.apply(b,c);b.message=b.message||b.msg;b.toString=a;return b};Ext.apply(Ext.Error,{ignore:false,raise:function(b){b=b||{};if(Ext.isString(b)){b={msg:b}}var g=this,f=g.raise.caller,d,c;if(f===Ext.raise){f=f.caller}if(f){if(!b.sourceMethod&&(c=f.$name)){b.sourceMethod=c}if(!b.sourceClass&&(c=f.$owner)&&(c=c.$className)){b.sourceClass=c}}if(g.handle(b)!==true){d=a.call(b);throw new Ext.Error(b)}},handle:function(){return this.ignore}})})();Ext.deprecated=function(a){return Ext.emptyFn};Ext.raise=function(){Ext.Error.raise.apply(Ext.Error,arguments)};Ext.Array=(function(){var c=Array.prototype,q=c.slice,s=(function(){var z=[],A,y=20;if(!z.splice){return false}while(y--){z.push("A")}z.splice(15,0,"F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F");A=z.length;z.splice(13,0,"XXX");if(A+1!==z.length){return false}return true}()),r="indexOf" in c,g=true;function p(C,y){var A=C.length,B=new Array(A),z;for(z=0;z<A;z++){B[z]=z}B.sort(function(E,D){return y(C[E],C[D])||(E-D)});for(z=0;z<A;z++){B[z]=C[B[z]]}for(z=0;z<A;z++){C[z]=B[z]}return C}try{if(typeof document!=="undefined"){q.call(document.getElementsByTagName("body"))}}catch(u){g=false}var o=function(z,y){return(y<0)?Math.max(0,z.length+y):Math.min(z.length,y)},m=function(A,z,G,D){var E=D?D.length:0,I=A.length,B=o(A,z);if(B===I){if(E){A.push.apply(A,D)}}else{var y=Math.min(G,I-B),C=B+y,H=C+E-y,F=I-C,J=I-y,K;if(H<C){for(K=0;K<F;++K){A[H+K]=A[C+K]}}else{if(H>C){for(K=F;K--;){A[H+K]=A[C+K]}}}if(E&&B===J){A.length=J;A.push.apply(A,D)}else{A.length=J+E;for(K=0;K<E;++K){A[B+K]=D[K]}}}return A},f=function(A,B,z,y){if(y&&y.length){if(B===0&&!z){A.unshift.apply(A,y)}else{if(B<A.length){A.splice.apply(A,[B,z].concat(y))}else{A.push.apply(A,y)}}}else{A.splice(B,z)}return A},b=function(z,A,y){return m(z,A,y)},t=function(z,A,y){z.splice(A,y);return z},j=function(C,A,z){var B=o(C,A),y=C.slice(A,o(C,B+z));if(arguments.length<4){m(C,B,z)}else{m(C,B,z,q.call(arguments,3))}return y},d=function(y){return y.splice.apply(y,q.call(arguments,1))},h=s?t:b,v=s?f:m,w=s?d:j,a={binarySearch:function(y,C,z,A,F){var B=y.length,D,E;if(z instanceof Function){F=z;z=0;A=B}else{if(A instanceof Function){F=A;A=B}else{if(z===undefined){z=0}if(A===undefined){A=B}F=F||a.lexicalCompare}}--A;while(z<=A){D=(z+A)>>1;E=F(C,y[D]);if(E>=0){z=D+1}else{if(E<0){A=D-1}}}return z},defaultCompare:function(y,z){return(y<z)?-1:((y>z)?1:0)},lexicalCompare:function(y,z){y=String(y);z=String(z);return(y<z)?-1:((y>z)?1:0)},each:function(y,A,z,B){y=a.from(y);var C,D=y.length;if(B!==true){for(C=0;C<D;C++){if(A.call(z||y[C],y[C],C,y)===false){return C}}}else{for(C=D-1;C>-1;C--){if(A.call(z||y[C],y[C],C,y)===false){return C}}}return true},forEach:("forEach" in c)?function(z,y,A){return z.forEach(y,A)}:function(C,z,y){for(var A=0,B=C.length;A<B;A++){z.call(y,C[A],A,C)}},indexOf:r?function(z,A,y){return c.indexOf.call(z,A,y)}:function(C,z,A){var B,y=C.length;for(B=(A<0)?Math.max(0,y+A):A||0;B<y;B++){if(C[B]===z){return B}}return -1},contains:r?function(z,y){return c.indexOf.call(z,y)!==-1}:function(A,z){var B,y;for(B=0,y=A.length;B<y;B++){if(A[B]===z){return true}}return false},toArray:function(z,C,A){if(!z||!z.length){return[]}if(typeof z==="string"){z=z.split("")}if(g){return q.call(z,C||0,A||z.length)}var B=[],y;C=C||0;A=A?((A<0)?z.length+A:A):z.length;for(y=C;y<A;y++){B.push(z[y])}return B},pluck:function(y,A){var C=[],z,D,B;for(z=0,D=y.length;z<D;z++){B=y[z];C.push(B[A])}return C},map:("map" in c)?function(z,y,A){return z.map(y,A)}:function(y,C,A){var z=[],B=y.length,D;for(D=0;D<B;D++){z[D]=C.call(A,y[D],D,y)}return z},every:("every" in c)?function(z,y,A){return z.every(y,A)}:function(C,z,y){var A=0,B=C.length;for(;A<B;++A){if(!z.call(y,C[A],A,C)){return false}}return true},some:("some" in c)?function(z,y,A){return z.some(y,A)}:function(C,z,y){var A=0,B=C.length;for(;A<B;++A){if(z.call(y,C[A],A,C)){return true}}return false},equals:function(C,A){var y=C.length,B=A.length,z;if(C===A){return true}if(y!==B){return false}for(z=0;z<y;++z){if(C[z]!==A[z]){return false}}return true},clean:function(C){var y=[],A=0,B=C.length,z;for(;A<B;A++){z=C[A];if(!Ext.isEmpty(z)){y.push(z)}}return y},unique:function(C){var A=[],B=0,z=C.length,y;for(;B<z;B++){y=C[B];if(a.indexOf(A,y)===-1){A.push(y)}}return A},filter:("filter" in c)?function(z,y,A){return z.filter(y,A)}:function(y,A,z){var C=[],B=0,D=y.length;for(;B<D;B++){if(A.call(z,y[B],B,y)){C.push(y[B])}}return C},findBy:function(C,A,z){var y=0,B=C.length;for(;y<B;y++){if(A.call(z||C,C[y],y)){return C[y]}}return null},from:function(z,y){if(z===undefined||z===null){return[]}if(Ext.isArray(z)){return(y)?q.call(z):z}var A=typeof z;if(z&&z.length!==undefined&&A!=="string"&&(A!=="function"||!z.apply)){return a.toArray(z)}return[z]},remove:function(z,y){var A=a.indexOf(z,y);if(A!==-1){h(z,A,1)}return z},removeAt:function(A,y,z){var B=A.length;if(y>=0&&y<B){z=z||1;z=Math.min(z,B-y);h(A,y,z)}return A},include:function(z,y){if(!a.contains(z,y)){z.push(y)}},clone:function(y){return q.call(y)},merge:function(){var A=q.call(arguments),B=[],y,z;for(y=0,z=A.length;y<z;y++){B=B.concat(A[y])}return a.unique(B)},intersect:function(){var C=[],H=q.call(arguments),E,B,M,A,G,I,F,z,D,J,y,L,K;if(!H.length){return C}E=H.length;for(y=G=0;y<E;y++){I=H[y];if(!A||I.length<A.length){A=I;G=y}}A=a.unique(A);h(H,G,1);F=A.length;E=H.length;for(y=0;y<F;y++){z=A[y];J=0;for(L=0;L<E;L++){B=H[L];M=B.length;for(K=0;K<M;K++){D=B[K];if(z===D){J++;break}}}if(J===E){C.push(z)}}return C},difference:function(C,A){var y=q.call(C),D=y.length,B,z,E;for(B=0,E=A.length;B<E;B++){for(z=0;z<D;z++){if(y[z]===A[B]){h(y,z,1);z--;D--}}}return y},reduce:Array.prototype.reduce?function(z,y,A){if(arguments.length===3){return Array.prototype.reduce.call(z,y,A)}return Array.prototype.reduce.call(z,y)}:function(y,C,A){y=Object(y);var z=0,B=y.length>>>0,D=A;if(arguments.length<3){while(true){if(z in y){D=y[z++];break}if(++z>=B){throw new TypeError("Reduce of empty array with no initial value")}}}for(;z<B;++z){if(z in y){D=C(D,y[z],z,y)}}return D},slice:([1,2].slice(1,undefined).length?function(z,y,A){return q.call(z,y,A)}:function(z,y,A){if(typeof y==="undefined"){return q.call(z)}if(typeof A==="undefined"){return q.call(z,y)}return q.call(z,y,A)}),sort:function(z,y){return p(z,y||a.lexicalCompare)},flatten:function(z){var y=[];function A(B){var D,E,C;for(D=0,E=B.length;D<E;D++){C=B[D];if(Ext.isArray(C)){A(C)}else{y.push(C)}}return y}return A(z)},min:function(y,C){var D=y[0],A,B,z;for(A=0,B=y.length;A<B;A++){z=y[A];if(C){if(C(D,z)===1){D=z}}else{if(z<D){D=z}}}return D},max:function(y,C){var A=y[0],D,B,z;for(D=0,B=y.length;D<B;D++){z=y[D];if(C){if(C(A,z)===-1){A=z}}else{if(z>A){A=z}}}return A},mean:function(y){return y.length>0?a.sum(y)/y.length:undefined},sum:function(C){var y=0,A,B,z;for(A=0,B=C.length;A<B;A++){z=C[A];y+=z}return y},toMap:function(C,A,z){var B={},y=C.length;if(!A){while(y--){B[C[y]]=y+1}}else{if(typeof A==="string"){while(y--){B[C[y][A]]=y+1}}else{while(y--){B[A.call(z,C[y])]=y+1}}}return B},toValueMap:function(y,H,D,J){var E={},G=y.length,F,I,B,z,C,A;if(!H){while(G--){A=y[G];E[A]=A}}else{if(!(z=(typeof H!=="string"))){J=D}I=J===1;F=J===2;while(G--){A=y[G];C=z?H.call(D,A):A[H];if(I){if(C in E){E[C].push(A)}else{E[C]=[A]}}else{if(F&&(C in E)){if((B=E[C]) instanceof Array){B.push(A)}else{E[C]=[B,A]}}else{E[C]=A}}}}return E},erase:h,insert:function(z,y,A){return v(z,y,0,A)},move:function(y,C,A){if(A===C){return}var z=y[C],D=A>C?1:-1,B;for(B=C;B!=A;B+=D){y[B]=y[B+D]}y[A]=z},replace:v,splice:w,push:function(A){var B=arguments.length,z=1,y;if(A===undefined){A=[]}else{if(!Ext.isArray(A)){A=[A]}}for(;z<B;z++){y=arguments[z];Array.prototype.push[Ext.isIterable(y)?"apply":"call"](A,y)}return A},numericSortFn:function(z,y){return z-y}};Ext.each=a.each;a.union=a.merge;Ext.min=a.min;Ext.max=a.max;Ext.sum=a.sum;Ext.mean=a.mean;Ext.flatten=a.flatten;Ext.clean=a.clean;Ext.unique=a.unique;Ext.pluck=a.pluck;Ext.toArray=function(){return a.toArray.apply(a,arguments)};return a}());Ext.String=(function(){var f=/^[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+|[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+$/g,p=/('|\\)/g,r=/([-.*+?\^${}()|\[\]\/\\])/g,j=/^\s+|\s+$/g,g=/\s+/,m=/(^[^a-z]*|[^\w])/gi,b,o,d,a,c=function(u,t){return b[t]},h=function(u,t){return(t in o)?o[t]:String.fromCharCode(parseInt(t.substr(2),10))},s=function(u,t){if(u===null||u===undefined||t===null||t===undefined){return false}return t.length<=u.length},q;return q={insert:function(t,u,w){if(!t){return u}if(!u){return t}var v=t.length;if(!w&&w!==0){w=v}if(w<0){w*=-1;if(w>=v){w=0}else{w=v-w}}if(w===0){t=u+t}else{if(w>=t.length){t+=u}else{t=t.substr(0,w)+u+t.substr(w)}}return t},startsWith:function(t,u,w){var v=s(t,u);if(v){if(w){t=t.toLowerCase();u=u.toLowerCase()}v=t.lastIndexOf(u,0)===0}return v},endsWith:function(u,w,t){var v=s(u,w);if(v){if(t){u=u.toLowerCase();w=w.toLowerCase()}v=u.indexOf(w,u.length-w.length)!==-1}return v},createVarName:function(t){return t.replace(m,"")},htmlEncode:function(t){return(!t)?t:String(t).replace(d,c)},htmlDecode:function(t){return(!t)?t:String(t).replace(a,h)},hasHtmlCharacters:function(t){return d.test(t)},addCharacterEntities:function(y){var w=[],v=[],t,u;for(t in y){u=y[t];o[t]=u;b[u]=t;w.push(u);v.push(t)}d=new RegExp("("+w.join("|")+")","g");a=new RegExp("("+v.join("|")+"|&#[0-9]{1,5};)","g")},resetCharacterEntities:function(){b={};o={};this.addCharacterEntities({"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&#39;":"'"})},urlAppend:function(u,t){if(!Ext.isEmpty(t)){return u+(u.indexOf("?")===-1?"?":"&")+t}return u},trim:function(t){if(t){t=t.replace(f,"")}return t||""},capitalize:function(t){if(t){t=t.charAt(0).toUpperCase()+t.substr(1)}return t||""},uncapitalize:function(t){if(t){t=t.charAt(0).toLowerCase()+t.substr(1)}return t||""},ellipsis:function(t,y,u){if(t&&t.length>y){if(u){var v=t.substr(0,y-2),w=Math.max(v.lastIndexOf(" "),v.lastIndexOf("."),v.lastIndexOf("!"),v.lastIndexOf("?"));if(w!==-1&&w>=(y-15)){return v.substr(0,w)+"..."}}return t.substr(0,y-3)+"..."}return t},escapeRegex:function(t){return t.replace(r,"\\$1")},createRegex:function(v,u,y,w){var t=v;if(v!=null&&!v.exec){t=q.escapeRegex(String(v));if(u!==false){t="^"+t}if(y!==false){t+="$"}t=new RegExp(t,(w!==false)?"i":"")}return t},escape:function(t){return t.replace(p,"\\$1")},toggle:function(t,u,v){return t===u?v:u},leftPad:function(w,t,u){var v=String(w);u=u||" ";while(v.length<t){v=u+v}return v},repeat:function(v,u,y){if(u<1){u=0}for(var w=[],t=u;t--;){w.push(v)}return w.join(y||"")},splitWords:function(t){if(t&&typeof t=="string"){return t.replace(j,"").split(g)}return t||[]}}}());Ext.String.resetCharacterEntities();Ext.htmlEncode=Ext.String.htmlEncode;Ext.htmlDecode=Ext.String.htmlDecode;Ext.urlAppend=Ext.String.urlAppend;Ext.Date=(function(){var j,h=Date,b=/(\\.)/g,c=/([gGhHisucUOPZ]|MS)/,m=/([djzmnYycU]|MS)/,a=/\\/gi,f=/\{(\d+)\}/g,o=new RegExp("\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/"),g=Ext.String.leftPad,d=["var me = this, dt, y, m, d, h, i, s, ms, o, O, z, zz, u, v, W, year, jan4, week1monday, daysInMonth, dayMatched,","def = me.defaults,","from = Ext.Number.from,","results = String(input).match(me.parseRegexes[{0}]);","if(results){","{1}","if(u != null){","v = new Date(u * 1000);","}else{","dt = me.clearTime(new Date);","y = from(y, from(def.y, dt.getFullYear()));","m = from(m, from(def.m - 1, dt.getMonth()));","dayMatched = d !== undefined;","d = from(d, from(def.d, dt.getDate()));","if (!dayMatched) {","dt.setDate(1);","dt.setMonth(m);","dt.setFullYear(y);","daysInMonth = me.getDaysInMonth(dt);","if (d > daysInMonth) {","d = daysInMonth;","}","}","h  = from(h, from(def.h, dt.getHours()));","i  = from(i, from(def.i, dt.getMinutes()));","s  = from(s, from(def.s, dt.getSeconds()));","ms = from(ms, from(def.ms, dt.getMilliseconds()));","if(z >= 0 && y >= 0){","v = me.add(new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);","v = !strict? v : (strict === true && (z <= 364 || (me.isLeapYear(v) && z <= 365))? me.add(v, me.DAY, z) : null);","}else if(strict === true && !me.isValid(y, m + 1, d, h, i, s, ms)){","v = null;","}else{","if (W) {","year = y || (new Date()).getFullYear();","jan4 = new Date(year, 0, 4, 0, 0, 0);","d = jan4.getDay();","week1monday = new Date(jan4.getTime() - ((d === 0 ? 6 : d - 1) * 86400000));","v = Ext.Date.clearTime(new Date(week1monday.getTime() + ((W - 1) * 604800000 + 43200000)));","} else {","v = me.add(new Date(y < 100 ? 100 : y, m, d, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);","}","}","}","}","if(v){","if(zz != null){","v = me.add(v, me.SECOND, -v.getTimezoneOffset() * 60 - zz);","}else if(o){","v = me.add(v, me.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));","}","}","return (v != null) ? v : null;"].join("\n");if(!Date.prototype.toISOString){Date.prototype.toISOString=function(){var q=this;return g(q.getUTCFullYear(),4,"0")+"-"+g(q.getUTCMonth()+1,2,"0")+"-"+g(q.getUTCDate(),2,"0")+"T"+g(q.getUTCHours(),2,"0")+":"+g(q.getUTCMinutes(),2,"0")+":"+g(q.getUTCSeconds(),2,"0")+"."+g(q.getUTCMilliseconds(),3,"0")+"Z"}}function p(r){var q=Array.prototype.slice.call(arguments,1);return r.replace(f,function(s,t){return q[t]})}return j={now:h.now,toString:function(q){if(!q){q=new h()}return q.getFullYear()+"-"+g(q.getMonth()+1,2,"0")+"-"+g(q.getDate(),2,"0")+"T"+g(q.getHours(),2,"0")+":"+g(q.getMinutes(),2,"0")+":"+g(q.getSeconds(),2,"0")},getElapsed:function(r,q){return Math.abs(r-(q||j.now()))},useStrict:false,formatCodeToRegex:function(q,s){var r=j.parseCodes[q];if(r){r=typeof r==="function"?r():r;j.parseCodes[q]=r}return r?Ext.applyIf({c:r.c?p(r.c,s||"{0}"):r.c},r):{g:0,c:null,s:Ext.String.escapeRegex(q)}},parseFunctions:{MS:function(q,s){var r=(q||"").match(o);return r?new h(((r[1]||"")+r[2])*1):null},time:function(q,s){var r=parseInt(q,10);if(r||r===0){return new h(r)}return null},timestamp:function(q,s){var r=parseInt(q,10);if(r||r===0){return new h(r*1000)}return null}},parseRegexes:[],formatFunctions:{MS:function(){return"\\/Date("+this.getTime()+")\\/"},time:function(){return this.getTime().toString()},timestamp:function(){return j.format(this,"U")}},y2kYear:50,MILLI:"ms",SECOND:"s",MINUTE:"mi",HOUR:"h",DAY:"d",MONTH:"mo",YEAR:"y",defaults:{},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNumbers:{January:0,Jan:0,February:1,Feb:1,March:2,Mar:2,April:3,Apr:3,May:4,June:5,Jun:5,July:6,Jul:6,August:7,Aug:7,September:8,Sep:8,October:9,Oct:9,November:10,Nov:10,December:11,Dec:11},defaultFormat:"m/d/Y",getShortMonthName:function(q){return j.monthNames[q].substring(0,3)},getShortDayName:function(q){return j.dayNames[q].substring(0,3)},getMonthNumber:function(q){return j.monthNumbers[q.substring(0,1).toUpperCase()+q.substring(1,3).toLowerCase()]},formatContainsHourInfo:function(q){return c.test(q.replace(b,""))},formatContainsDateInfo:function(q){return m.test(q.replace(b,""))},unescapeFormat:function(q){return q.replace(a,"")},formatCodes:{d:"Ext.String.leftPad(m.getDate(), 2, '0')",D:"Ext.Date.getShortDayName(m.getDay())",j:"m.getDate()",l:"Ext.Date.dayNames[m.getDay()]",N:"(m.getDay() ? m.getDay() : 7)",S:"Ext.Date.getSuffix(m)",w:"m.getDay()",z:"Ext.Date.getDayOfYear(m)",W:"Ext.String.leftPad(Ext.Date.getWeekOfYear(m), 2, '0')",F:"Ext.Date.monthNames[m.getMonth()]",m:"Ext.String.leftPad(m.getMonth() + 1, 2, '0')",M:"Ext.Date.getShortMonthName(m.getMonth())",n:"(m.getMonth() + 1)",t:"Ext.Date.getDaysInMonth(m)",L:"(Ext.Date.isLeapYear(m) ? 1 : 0)",o:"(m.getFullYear() + (Ext.Date.getWeekOfYear(m) == 1 && m.getMonth() > 0 ? +1 : (Ext.Date.getWeekOfYear(m) >= 52 && m.getMonth() < 11 ? -1 : 0)))",Y:"Ext.String.leftPad(m.getFullYear(), 4, '0')",y:"('' + m.getFullYear()).substring(2, 4)",a:"(m.getHours() < 12 ? 'am' : 'pm')",A:"(m.getHours() < 12 ? 'AM' : 'PM')",g:"((m.getHours() % 12) ? m.getHours() % 12 : 12)",G:"m.getHours()",h:"Ext.String.leftPad((m.getHours() % 12) ? m.getHours() % 12 : 12, 2, '0')",H:"Ext.String.leftPad(m.getHours(), 2, '0')",i:"Ext.String.leftPad(m.getMinutes(), 2, '0')",s:"Ext.String.leftPad(m.getSeconds(), 2, '0')",u:"Ext.String.leftPad(m.getMilliseconds(), 3, '0')",O:"Ext.Date.getGMTOffset(m)",P:"Ext.Date.getGMTOffset(m, true)",T:"Ext.Date.getTimezone(m)",Z:"(m.getTimezoneOffset() * -60)",c:function(){var r="Y-m-dTH:i:sP",u=[],t,s=r.length,q;for(t=0;t<s;++t){q=r.charAt(t);u.push(q==="T"?"'T'":j.getFormatCode(q))}return u.join(" + ")},C:function(){return"m.toISOString()"},U:"Math.round(m.getTime() / 1000)"},isValid:function(r,t,s,y,v,w,u){y=y||0;v=v||0;w=w||0;u=u||0;var q=j.add(new h(r<100?100:r,t-1,s,y,v,w,u),j.YEAR,r<100?r-100:0);return r===q.getFullYear()&&t===q.getMonth()+1&&s===q.getDate()&&y===q.getHours()&&v===q.getMinutes()&&w===q.getSeconds()&&u===q.getMilliseconds()},parse:function(t,r,s){var q=j.parseFunctions;if(q[r]==null){j.createParser(r)}return q[r].call(j,t,Ext.isDefined(s)?s:j.useStrict)},parseDate:function(q,r,s){return j.parse(q,r,s)},getFormatCode:function(r){var q=j.formatCodes[r];if(q){q=typeof q==="function"?q():q;j.formatCodes[r]=q}return q||("'"+Ext.String.escape(r)+"'")},createFormat:function(r){var q=[],s=false,u="",t;for(t=0;t<r.length;++t){u=r.charAt(t);if(!s&&u==="\\"){s=true}else{if(s){s=false;q.push("'"+Ext.String.escape(u)+"'")}else{if(u==="\n"){q.push("'\\n'")}else{q.push(j.getFormatCode(u))}}}}j.formatFunctions[r]=Ext.functionFactory("var m=this;return "+q.join("+"))},createParser:function(y){var B=j.parseRegexes.length,z=1,q=[],w=[],u=false,A="",s=0,t=y.length,v=[],r;for(;s<t;++s){A=y.charAt(s);if(!u&&A==="\\"){u=true}else{if(u){u=false;w.push(Ext.String.escape(A))}else{r=j.formatCodeToRegex(A,z);z+=r.g;w.push(r.s);if(r.g&&r.c){if(r.calcAtEnd){v.push(r.c)}else{q.push(r.c)}}}}}q=q.concat(v);j.parseRegexes[B]=new RegExp("^"+w.join("")+"$","i");j.parseFunctions[y]=Ext.functionFactory("input","strict",p(d,B,q.join("")))},parseCodes:{d:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(3[0-1]|[1-2][0-9]|0[1-9])"},j:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(3[0-1]|[1-2][0-9]|[1-9])"},D:function(){for(var q=[],r=0;r<7;q.push(j.getShortDayName(r)),++r){}return{g:0,c:null,s:"(?:"+q.join("|")+")"}},l:function(){return{g:0,c:null,s:"(?:"+j.dayNames.join("|")+")"}},N:{g:0,c:null,s:"[1-7]"},S:{g:0,c:null,s:"(?:st|nd|rd|th)"},w:{g:0,c:null,s:"[0-6]"},z:{g:1,c:"z = parseInt(results[{0}], 10);\n",s:"(\\d{1,3})"},W:{g:1,c:"W = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},F:function(){return{g:1,c:"m = parseInt(me.getMonthNumber(results[{0}]), 10);\n",s:"("+j.monthNames.join("|")+")"}},M:function(){for(var q=[],r=0;r<12;q.push(j.getShortMonthName(r)),++r){}return Ext.applyIf({s:"("+q.join("|")+")"},j.formatCodeToRegex("F"))},m:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(1[0-2]|0[1-9])"},n:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(1[0-2]|[1-9])"},t:{g:0,c:null,s:"(?:\\d{2})"},L:{g:0,c:null,s:"(?:1|0)"},o:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},Y:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},y:{g:1,c:"var ty = parseInt(results[{0}], 10);\ny = ty > me.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{2})"},a:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(am|pm|AM|PM)",calcAtEnd:true},A:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(AM|PM|am|pm)",calcAtEnd:true},g:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(1[0-2]|[0-9])"},G:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(2[0-3]|1[0-9]|[0-9])"},h:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(1[0-2]|0[1-9])"},H:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(2[0-3]|[0-1][0-9])"},i:{g:1,c:"i = parseInt(results[{0}], 10);\n",s:"([0-5][0-9])"},s:{g:1,c:"s = parseInt(results[{0}], 10);\n",s:"([0-5][0-9])"},u:{g:1,c:"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n",s:"(\\d+)"},O:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),","mn = o.substring(3,5) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{4})"},P:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),","mn = o.substring(4,6) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{2}:\\d{2})"},T:{g:0,c:null,s:"[A-Z]{1,5}"},Z:{g:1,c:"zz = results[{0}] * 1;\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\n",s:"([+-]?\\d{1,5})"},c:function(){var q=[],s=[j.formatCodeToRegex("Y",1),j.formatCodeToRegex("m",2),j.formatCodeToRegex("d",3),j.formatCodeToRegex("H",4),j.formatCodeToRegex("i",5),j.formatCodeToRegex("s",6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:["if(results[8]) {","if(results[8] == 'Z'){","zz = 0;","}else if (results[8].indexOf(':') > -1){",j.formatCodeToRegex("P",8).c,"}else{",j.formatCodeToRegex("O",8).c,"}","}"].join("\n")}],r,t;for(r=0,t=s.length;r<t;++r){q.push(s[r].c)}return{g:1,c:q.join(""),s:[s[0].s,"(?:","-",s[1].s,"(?:","-",s[2].s,"(?:","(?:T| )?",s[3].s,":",s[4].s,"(?::",s[5].s,")?","(?:(?:\\.|,)(\\d+))?","(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?",")?",")?",")?"].join("")}},U:{g:1,c:"u = parseInt(results[{0}], 10);\n",s:"(-?\\d+)"}},dateFormat:function(q,r){return j.format(q,r)},isEqual:function(r,q){if(r&&q){return(r.getTime()===q.getTime())}return !(r||q)},format:function(q,r){var s=j.formatFunctions;if(!Ext.isDate(q)){return""}if(s[r]==null){j.createFormat(r)}return s[r].call(q)+""},getTimezone:function(q){return q.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,5})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},getGMTOffset:function(s,q){var r=s.getTimezoneOffset();return(r>0?"-":"+")+Ext.String.leftPad(Math.floor(Math.abs(r)/60),2,"0")+(q?":":"")+Ext.String.leftPad(Math.abs(r%60),2,"0")},getDayOfYear:function(u){var t=0,r=j.clone(u),s=u.getMonth(),q;for(q=0,r.setDate(1),r.setMonth(0);q<s;r.setMonth(++q)){t+=j.getDaysInMonth(r)}return t+u.getDate()-1},getWeekOfYear:(function(){var q=86400000,r=7*q;return function(t){var u=h.UTC(t.getFullYear(),t.getMonth(),t.getDate()+3)/q,s=Math.floor(u/7),v=new h(s*r).getUTCFullYear();return s-Math.floor(h.UTC(v,0,7)/r)+1}}()),isLeapYear:function(q){var r=q.getFullYear();return !!((r&3)===0&&(r%100||(r%400===0&&r)))},getFirstDayOfMonth:function(r){var q=(r.getDay()-(r.getDate()-1))%7;return(q<0)?(q+7):q},getLastDayOfMonth:function(q){return j.getLastDateOfMonth(q).getDay()},getFirstDateOfMonth:function(q){return new h(q.getFullYear(),q.getMonth(),1)},getLastDateOfMonth:function(q){return new h(q.getFullYear(),q.getMonth(),j.getDaysInMonth(q))},getDaysInMonth:(function(){var q=[31,28,31,30,31,30,31,31,30,31,30,31];return function(r){var s=r.getMonth();return s===1&&j.isLeapYear(r)?29:q[s]}}()),getSuffix:function(q){switch(q.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},clone:function(q){return new h(q.getTime())},isDST:function(q){return new h(q.getFullYear(),0,1).getTimezoneOffset()!==q.getTimezoneOffset()},clearTime:function(s,r){if(isNaN(s.getTime())){return s}if(r){return j.clearTime(j.clone(s))}var u=s.getDate(),t,q;s.setHours(0);s.setMinutes(0);s.setSeconds(0);s.setMilliseconds(0);if(s.getDate()!==u){for(t=1,q=j.add(s,j.HOUR,t);q.getDate()!==u;t++,q=j.add(s,j.HOUR,t)){}s.setDate(u);s.setHours(q.getHours())}return s},add:function(u,t,q){var r=j.clone(u),s,w,v=0;if(!t||q===0){return r}w=q-parseInt(q,10);q=parseInt(q,10);if(q){switch(t.toLowerCase()){case j.MILLI:r.setTime(r.getTime()+q);break;case j.SECOND:r.setTime(r.getTime()+q*1000);break;case j.MINUTE:r.setTime(r.getTime()+q*60*1000);break;case j.HOUR:r.setTime(r.getTime()+q*60*60*1000);break;case j.DAY:r.setDate(r.getDate()+q);break;case j.MONTH:s=u.getDate();if(s>28){s=Math.min(s,j.getLastDateOfMonth(j.add(j.getFirstDateOfMonth(u),j.MONTH,q)).getDate())}r.setDate(s);r.setMonth(u.getMonth()+q);break;case j.YEAR:s=u.getDate();if(s>28){s=Math.min(s,j.getLastDateOfMonth(j.add(j.getFirstDateOfMonth(u),j.YEAR,q)).getDate())}r.setDate(s);r.setFullYear(u.getFullYear()+q);break}}if(w){switch(t.toLowerCase()){case j.MILLI:v=1;break;case j.SECOND:v=1000;break;case j.MINUTE:v=1000*60;break;case j.HOUR:v=1000*60*60;break;case j.DAY:v=1000*60*60*24;break;case j.MONTH:s=j.getDaysInMonth(r);v=1000*60*60*24*s;break;case j.YEAR:s=(j.isLeapYear(r)?366:365);v=1000*60*60*24*s;break}if(v){r.setTime(r.getTime()+v*w)}}return r},subtract:function(q,s,r){return j.add(q,s,-r)},between:function(t,r,s){var q=t.getTime();return r.getTime()<=q&&q<=s.getTime()},compat:function(){var s,t=["useStrict","formatCodeToRegex","parseFunctions","parseRegexes","formatFunctions","y2kYear","MILLI","SECOND","MINUTE","HOUR","DAY","MONTH","YEAR","defaults","dayNames","monthNames","monthNumbers","getShortMonthName","getShortDayName","getMonthNumber","formatCodes","isValid","parseDate","getFormatCode","createFormat","createParser","parseCodes"],r=["dateFormat","format","getTimezone","getGMTOffset","getDayOfYear","getWeekOfYear","isLeapYear","getFirstDayOfMonth","getLastDayOfMonth","getDaysInMonth","getSuffix","clone","isDST","clearTime","add","between"],v=t.length,u=r.length,y,q,w;for(w=0;w<v;w++){y=t[w];h[y]=j[y]}for(s=0;s<u;s++){q=r[s];h.prototype[q]=function(){var z=Array.prototype.slice.call(arguments);z.unshift(this);return j[q].apply(j,z)}}},diff:function(t,s,q){var u,r=+s-t;switch(q){case j.MILLI:return r;case j.SECOND:return Math.floor(r/1000);case j.MINUTE:return Math.floor(r/60000);case j.HOUR:return Math.floor(r/3600000);case j.DAY:return Math.floor(r/86400000);case"w":return Math.floor(r/604800000);case j.MONTH:u=(s.getFullYear()*12+s.getMonth())-(t.getFullYear()*12+t.getMonth());if(j.add(t,q,u)>s){return u-1}return u;case j.YEAR:u=s.getFullYear()-t.getFullYear();if(j.add(t,q,u)>s){return u-1}else{return u}}},align:function(t,r,q){var s=new h(+t);switch(r.toLowerCase()){case j.MILLI:return s;case j.SECOND:s.setUTCSeconds(s.getUTCSeconds()-s.getUTCSeconds()%q);s.setUTCMilliseconds(0);return s;case j.MINUTE:s.setUTCMinutes(s.getUTCMinutes()-s.getUTCMinutes()%q);s.setUTCSeconds(0);s.setUTCMilliseconds(0);return s;case j.HOUR:s.setUTCHours(s.getUTCHours()-s.getUTCHours()%q);s.setUTCMinutes(0);s.setUTCSeconds(0);s.setUTCMilliseconds(0);return s;case j.DAY:if(q===7||q===14){s.setUTCDate(s.getUTCDate()-s.getUTCDay()+1)}s.setUTCHours(0);s.setUTCMinutes(0);s.setUTCSeconds(0);s.setUTCMilliseconds(0);return s;case j.MONTH:s.setUTCMonth(s.getUTCMonth()-(s.getUTCMonth()-1)%q,1);s.setUTCHours(0);s.setUTCMinutes(0);s.setUTCSeconds(0);s.setUTCMilliseconds(0);return s;case j.YEAR:s.setUTCFullYear(s.getUTCFullYear()-s.getUTCFullYear()%q,1,1);s.setUTCHours(0);s.setUTCMinutes(0);s.setUTCSeconds(0);s.setUTCMilliseconds(0);return t}}}}());Ext.Function=(function(){var q=0,p,c=[],r=[],g=0,h={},f=window,b=Ext.global,d=!!(b.setImmediate&&b.clearImmediate),m=f.requestAnimationFrame||f.webkitRequestAnimationFrame||f.mozRequestAnimationFrame||f.oRequestAnimationFrame||function(t){var u=Ext.now(),v=Math.max(0,16-(u-q)),s=f.setTimeout(function(){t(u+v)},v);q=u+v;return s},a=function(){var u=c.length,t,v,s;p=null;for(v=0;v<u;v++){s=c[v];t=s[3];if(h[t]){s[0].apply(s[1]||b,s[2]||r);delete h[t]}}c=c.slice(u)},o=function(){Ext.elevateFunction(a)},j={flexSetter:function(s){return function(v,t){var u,w;if(v!==null){if(typeof v!=="string"){for(u in v){if(v.hasOwnProperty(u)){s.call(this,u,v[u])}}if(Ext.enumerables){for(w=Ext.enumerables.length;w--;){u=Ext.enumerables[w];if(v.hasOwnProperty(u)){s.call(this,u,v[u])}}}}else{s.call(this,v,t)}}return this}},bind:function(s,y,w,v){if(arguments.length===2){return function(){return s.apply(y,arguments)}}var u=s,t=Array.prototype.slice;return function(){var z=w||arguments;if(v===true){z=t.call(arguments,0);z=z.concat(w)}else{if(typeof v==="number"){z=t.call(arguments,0);Ext.Array.insert(z,v,w)}}return u.apply(y||b,z)}},bindCallback:function(t,s,w,v,u){return function(){var y=Ext.Array.slice(arguments);return Ext.callback(t,s,w?w.concat(y):y,v,u)}},pass:function(t,u,s){if(!Ext.isArray(u)){if(Ext.isIterable(u)){u=Ext.Array.clone(u)}else{u=u!==undefined?[u]:[]}}return function(){var v=u.slice();v.push.apply(v,arguments);return t.apply(s||this,v)}},alias:function(t,s){return function(){return t[s].apply(t,arguments)}},clone:function(s){return function(){return s.apply(this,arguments)}},createInterceptor:function(t,s,v,u){if(!Ext.isFunction(s)){return t}else{u=Ext.isDefined(u)?u:null;return function(){var w=this,y=arguments;return(s.apply(v||w||b,y)!==false)?t.apply(w||b,y):u}}},createDelayed:function(t,w,s,v,u){if(s||v){t=Ext.Function.bind(t,s,v,u)}return function(){var z=this,y=Array.prototype.slice.call(arguments);setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(t,z,y)}else{t.apply(z,y)}},w)}},defer:function(t,w,s,v,u){t=Ext.Function.bind(t,s,v,u);if(w>0){return setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(t)}else{t()}},w)}t();return 0},interval:function(t,w,s,v,u){t=Ext.Function.bind(t,s,v,u);return setInterval(function(){if(Ext.elevateFunction){Ext.elevateFunction(t)}else{t()}},w)},createSequence:function(s,t,u){if(!t){return s}else{return function(){var v=s.apply(this,arguments);t.apply(u||this,arguments);return v}}},createBuffered:function(t,v,s,w){var u;return function(){var z=w||Array.prototype.slice.call(arguments,0),y=s||this;if(u){clearTimeout(u)}u=setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(t,y,z)}else{t.apply(y,z)}},v)}},createAnimationFrame:function(s,w,v,t){var u;t=t||3;return function(){var y=v||Array.prototype.slice.call(arguments,0);w=w||this;if(t===3&&u){j.cancelAnimationFrame(u)}if((t&1)||!u){u=j.requestAnimationFrame(function(){u=null;s.apply(w,y)})}}},requestAnimationFrame:function(s,w,u){var t=++g,v=Array.prototype.slice.call(arguments,0);v[3]=t;h[t]=1;c.push(v);if(!p){p=m(Ext.elevateFunction?o:a)}return t},cancelAnimationFrame:function(s){delete h[s]},createThrottled:function(s,y,A){var u=0,w,z,t,v=function(){if(Ext.elevateFunction){Ext.elevateFunction(s,A,z)}else{s.apply(A,z)}u=Ext.now();t=null};return function(){if(!A){A=this}w=Ext.now()-u;z=arguments;if(w>=y){clearTimeout(t);v()}else{if(!t){t=Ext.defer(v,y-w)}}}},createBarrier:function(t,s,u){return function(){if(!--t){s.apply(u,arguments)}}},interceptBefore:function(v,u,s,w){var t=v[u]||Ext.emptyFn;return(v[u]=function(){var y=s.apply(w||this,arguments);t.apply(this,arguments);return y})},interceptAfter:function(v,u,s,w){var t=v[u]||Ext.emptyFn;return(v[u]=function(){t.apply(this,arguments);return s.apply(w||this,arguments)})},makeCallback:function(t,s){return function(){return s[t].apply(s,arguments)}},memoize:function(s,w,u){var v={},t=u&&Ext.isFunction(u);return function(z){var y=t?u.apply(w,arguments):z;if(!(y in v)){v[y]=s.apply(w,arguments)}return v[y]}}};Ext.asap=d?function(s,u,t){if(u!=null||t!=null){s=j.bind(s,u,t)}return setImmediate(function(){if(Ext.elevateFunction){Ext.elevateFunction(s)}else{s()}})}:function(s,u,t){if(u!=null||t!=null){s=j.bind(s,u,t)}return setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(s)}else{s()}},0,true)},Ext.asapCancel=d?function(s){clearImmediate(s)}:function(s){clearTimeout(s)};Ext.defer=j.defer;Ext.interval=j.interval;Ext.pass=j.pass;Ext.bind=j.bind;Ext.deferCallback=j.requestAnimationFrame;return j})();Ext.Number=(new function(){var b=this,a=(0.9).toFixed()!=="1",d=Math,c={count:false,inclusive:false,wrap:true};Ext.apply(b,{Clip:{DEFAULT:c,COUNT:Ext.applyIf({count:true},c),INCLUSIVE:Ext.applyIf({inclusive:true},c),NOWRAP:Ext.applyIf({wrap:false},c)},clipIndices:function(j,m,q){q=q||c;var p=0,h=q.wrap,g,o,f;m=m||[];for(f=0;f<2;++f){g=o;o=m[f];if(o==null){o=p}else{if(f&&q.count){o+=g;o=(o>j)?j:o}else{if(h){o=(o<0)?(j+o):o}if(f&&q.inclusive){++o}o=(o<0)?0:((o>j)?j:o)}}p=j}m[0]=g;m[1]=(o<g)?g:o;return m},constrain:function(g,f,j){var h=parseFloat(g);if(f===null){f=g}if(j===null){j=g}return(h<f)?f:((h>j)?j:h)},snap:function(h,o,g,f){var j;if(h===undefined||h<g){return g||0}if(o){j=h%o;if(j!==0){h-=j;if(j*2>=o){h+=o}else{if(j*2<-o){h-=o}}}}return b.constrain(h,g,f)},snapInRange:function(f,j,m,g){var h;m=(m||0);if(f===undefined||f<m){return m}if(j&&(h=((f-m)%j))){f-=h;h*=2;if(h>=j){f+=j}}if(g!==undefined){if(f>(g=b.snapInRange(g,j,m))){f=g}}return f},sign:function(f){f=+f;if(f===0||isNaN(f)){return f}return(f>0)?1:-1},toFixed:a?function(g,h){h=h||0;var f=d.pow(10,h);return(d.round(g*f)/f).toFixed(h)}:function(g,f){return g.toFixed(f)},from:function(g,f){if(isFinite(g)){g=parseFloat(g)}return !isNaN(g)?g:f},randomInt:function(g,f){return d.floor(d.random()*(f-g+1)+g)},correctFloat:function(f){return parseFloat(f.toPrecision(14))}});Ext.num=function(){return b.from.apply(this,arguments)}}());(function(){var f=function(){},c=/^\?/,d=/(\[):?([^\]]*)\]/g,b=/^([^\[]+)/,a=/\+/g,g=Ext.Object={chain:Object.create||function(j){f.prototype=j;var h=new f();f.prototype=null;return h},clear:function(h){for(var j in h){delete h[j]}return h},freeze:Object.freeze?function(j,m){if(j&&typeof j==="object"&&!Object.isFrozen(j)){Object.freeze(j);if(m){for(var h in j){g.freeze(j[h],m)}}}return j}:Ext.identityFn,toQueryObjects:function(j,q,h){var r=g.toQueryObjects,p=[],m,o;if(Ext.isArray(q)){for(m=0,o=q.length;m<o;m++){if(h){p=p.concat(r(j+"["+m+"]",q[m],true))}else{p.push({name:j,value:q[m]})}}}else{if(Ext.isObject(q)){for(m in q){if(q.hasOwnProperty(m)){if(h){p=p.concat(r(j+"["+m+"]",q[m],true))}else{p.push({name:j,value:q[m]})}}}}else{p.push({name:j,value:q})}}return p},toQueryString:function(o,j){var q=[],m=[],p,r,s,h,t;for(p in o){if(o.hasOwnProperty(p)){q=q.concat(g.toQueryObjects(p,o[p],j))}}for(r=0,s=q.length;r<s;r++){h=q[r];t=h.value;if(Ext.isEmpty(t)){t=""}else{if(Ext.isDate(t)){t=Ext.Date.toString(t)}}m.push(encodeURIComponent(h.name)+"="+encodeURIComponent(String(t)))}return m.join("&")},fromQueryString:function(j,D){var w=j.replace(c,"").split("&"),t={},p,s,y,z,C,o,A,B,h,q,r,v,u,m;for(C=0,o=w.length;C<o;C++){A=w[C];if(A.length>0){s=A.split("=");y=s[0];y=y.replace(a,"%20");y=decodeURIComponent(y);z=s[1];if(z!==undefined){z=z.replace(a,"%20");z=decodeURIComponent(z)}else{z=""}if(!D){if(t.hasOwnProperty(y)){if(!Ext.isArray(t[y])){t[y]=[t[y]]}t[y].push(z)}else{t[y]=z}}else{q=y.match(d);r=y.match(b);y=r[0];v=[];if(q===null){t[y]=z;continue}for(B=0,h=q.length;B<h;B++){u=q[B];u=(u.length===2)?"":u.substring(1,u.length-1);v.push(u)}v.unshift(y);p=t;for(B=0,h=v.length;B<h;B++){u=v[B];if(B===h-1){if(Ext.isArray(p)&&u===""){p.push(z)}else{p[u]=z}}else{if(p[u]===undefined||typeof p[u]==="string"){m=v[B+1];p[u]=(Ext.isNumeric(m)||m==="")?[]:{}}p=p[u]}}}}}return t},each:function(h,o,m){var q=Ext.enumerables,j,p;if(h){m=m||h;for(p in h){if(h.hasOwnProperty(p)){if(o.call(m,p,h[p],h)===false){return}}}if(q){for(j=q.length;j--;){if(h.hasOwnProperty(p=q[j])){if(o.call(m,p,h[p],h)===false){return}}}}}},eachValue:function(h,o,m){var q=Ext.enumerables,j,p;m=m||h;for(p in h){if(h.hasOwnProperty(p)){if(o.call(m,h[p])===false){return}}}if(q){for(j=q.length;j--;){if(h.hasOwnProperty(p=q[j])){if(o.call(m,h[p])===false){return}}}}},merge:function(q){var o=1,p=arguments.length,t=g.merge,j=Ext.clone,m,s,r,h;for(;o<p;o++){m=arguments[o];for(s in m){r=m[s];if(r&&r.constructor===Object){h=q[s];if(h&&h.constructor===Object){t(h,r)}else{q[s]=j(r)}}else{q[s]=r}}}return q},mergeIf:function(r){var o=1,p=arguments.length,j=Ext.clone,h,m,q;for(;o<p;o++){h=arguments[o];for(m in h){if(!(m in r)){q=h[m];if(q&&q.constructor===Object){r[m]=j(q)}else{r[m]=q}}}}return r},getAllKeys:function(m){var h=[],j;for(j in m){h.push(j)}return h},getKey:function(m,j){for(var h in m){if(m.hasOwnProperty(h)&&m[h]===j){return h}}return null},getValues:function(h){var m=[],j;for(j in h){if(h.hasOwnProperty(j)){m.push(h[j])}}return m},getKeys:(typeof Object.keys=="function")?function(h){if(!h){return[]}return Object.keys(h)}:function(m){var h=[],j;for(j in m){if(m.hasOwnProperty(j)){h.push(j)}}return h},getSize:function(m){var h=0,j;for(j in m){if(m.hasOwnProperty(j)){h++}}return h},isEmpty:function(h){for(var j in h){if(h.hasOwnProperty(j)){return false}}return true},equals:(function(){var h=function(m,j){var o;for(o in m){if(m.hasOwnProperty(o)){if(m[o]!==j[o]){return false}}}return true};return function(j,m){if(j===m){return true}if(j&&m){return h(j,m)&&h(m,j)}else{if(!j&&!m){return j===m}else{return false}}}})(),fork:function(m){var o,h,j;if(m&&m.constructor===Object){o=g.chain(m);for(h in m){j=m[h];if(j){if(j.constructor===Object){o[h]=g.fork(j)}else{if(j instanceof Array){o[h]=Ext.Array.clone(j)}}}}}else{o=m}return o},defineProperty:("defineProperty" in Object)?Object.defineProperty:function(h,m,j){if(!Object.prototype.__defineGetter__){return}if(j.get){h.__defineGetter__(m,j.get)}if(j.set){h.__defineSetter__(m,j.set)}},classify:function(m){var j=m,p=[],h={},r=function(){var s=0,t=p.length,u;for(;s<t;s++){u=p[s];this[u]=new h[u]()}},o,q;for(o in m){if(m.hasOwnProperty(o)){q=m[o];if(q&&q.constructor===Object){p.push(o);h[o]=g.classify(q)}}}r.prototype=j;return r}};Ext.merge=Ext.Object.merge;Ext.mergeIf=Ext.Object.mergeIf}());Ext.apply(Ext,{_namedScopes:{"this":{isThis:1},controller:{isController:1},self:{isSelf:1},"self.controller":{isSelf:1,isController:1}},escapeId:(function(){var f=/^[a-zA-Z_][a-zA-Z0-9_\-]*$/i,a=/([\W]{1})/g,d=/^(\d)/g,c=function(h,g){return"\\"+g},b=function(h,g){return"\\00"+g.charCodeAt(0).toString(16)+" "};return function(g){return f.test(g)?g:g.replace(a,c).replace(d,b)}}()),callback:function(h,f,c,b,a,g){if(!h){return}var d=(f in Ext._namedScopes);if(h.charAt){if((!f||d)&&a){f=a.resolveListenerScope(d?f:g)}h=f[h]}else{if(d){f=g||a}else{if(!f){f=a}}}var j;if(h&&Ext.isFunction(h)){f=f||Ext.global;if(b){Ext.defer(h,b,f,c)}else{if(Ext.elevateFunction){j=Ext.elevateFunction(h,f,c)}else{if(c){j=h.apply(f,c)}else{j=h.call(f)}}}}return j},coerce:function(b,a){var f=Ext.typeOf(b),d=Ext.typeOf(a),c=typeof b==="string";if(f!==d){switch(d){case"string":return String(b);case"number":return Number(b);case"boolean":return c&&(!b||b==="false")?false:Boolean(b);case"null":return c&&(!b||b==="null")?null:b;case"undefined":return c&&(!b||b==="undefined")?undefined:b;case"date":return c&&isNaN(b)?Ext.Date.parse(b,Ext.Date.defaultFormat):Date(Number(b))}}return b},copyTo:function(b,d,g,f){if(typeof g==="string"){g=g.split(Ext.propertyNameSplitRe)}for(var a,c=0,h=g?g.length:0;c<h;c++){a=g[c];if(f||d.hasOwnProperty(a)){b[a]=d[a]}}return b},copy:function(b,d,g,f){if(typeof g==="string"){g=g.split(Ext.propertyNameSplitRe)}for(var a,c=0,h=g?g.length:0;c<h;c++){a=g[c];if(d.hasOwnProperty(a)||(f&&a in d)){b[a]=d[a]}}return b},propertyNameSplitRe:/[,;\s]+/,copyToIf:function(b,f,g){if(typeof g==="string"){g=g.split(Ext.propertyNameSplitRe)}for(var c,d=0,a=g?g.length:0;d<a;d++){c=g[d];if(b[c]===undefined){b[c]=f[c]}}return b},copyIf:function(b,f,g){if(typeof g==="string"){g=g.split(Ext.propertyNameSplitRe)}for(var c,d=0,a=g?g.length:0;d<a;d++){c=g[d];if(!(c in b)&&(c in f)){b[c]=f[c]}}return b},extend:(function(){var a=Object.prototype.constructor,b=function(d){for(var c in d){if(!d.hasOwnProperty(c)){continue}this[c]=d[c]}};return function(g,f,d){if(Ext.isObject(f)){d=f;f=g;g=d.constructor!==a?d.constructor:function(){f.apply(this,arguments)}}var j=function(){},h,c=f.prototype;j.prototype=c;h=g.prototype=new j();h.constructor=g;g.superclass=c;if(c.constructor===a){c.constructor=f}g.override=function(m){Ext.override(g,m)};h.override=b;h.proto=h;g.override(d);g.extend=function(m){return Ext.extend(g,m)};return g}}()),iterate:function(b,a,c){if(Ext.isEmpty(b)){return}if(c===undefined){c=b}if(Ext.isIterable(b)){Ext.Array.each.call(Ext.Array,b,a,c)}else{Ext.Object.each.call(Ext.Object,b,a,c)}},_resourcePoolRe:/^[<]([^<>@:]*)(?:[@]([^<>@:]+))?[>](.+)$/,resolveResource:function(a){var c=a,b;if(a&&a.charAt(0)==="<"){b=Ext._resourcePoolRe.exec(a);if(b){c=Ext.getResourcePath(b[3],b[1],b[2])}}return c},urlEncode:function(){var a=Ext.Array.from(arguments),b="";if(Ext.isString(a[1])){b=a[1]+"&";a[1]=false}return b+Ext.Object.toQueryString.apply(Ext.Object,a)},urlDecode:function(){return Ext.Object.fromQueryString.apply(Ext.Object,arguments)},getScrollbarSize:function(a){var d=Ext._scrollbarSize;if(a||!d){var c=document.body,b=document.createElement("div");b.style.width=b.style.height="100px";b.style.overflow="scroll";b.style.position="absolute";c.appendChild(b);Ext._scrollbarSize=d={width:b.offsetWidth-b.clientWidth,height:b.offsetHeight-b.clientHeight};c.removeChild(b)}return d},typeOf:(function(){var c=/\S/,a=Object.prototype.toString,b={number:1,string:1,"boolean":1,"undefined":1},d={"[object Array]":"array","[object Date]":"date","[object Boolean]":"boolean","[object Number]":"number","[object RegExp]":"regexp"};return function(f){if(f===null){return"null"}var j=typeof f,h,g;if(b[j]){return j}h=d[g=a.call(f)];if(h){return h}if(j==="function"){return"function"}if(j==="object"){if(f.nodeType!==undefined){if(f.nodeType===3){return c.test(f.nodeValue)?"textnode":"whitespace"}else{return"element"}}return"object"}return g}}()),factory:function(c,g,b,a){var f=Ext.ClassManager,d;if(!c||c.isInstance){if(b&&b!==c){b.destroy()}return c}if(a){if(typeof c==="string"){return f.instantiateByAlias(a+"."+c)}else{if(Ext.isObject(c)&&"type" in c){return f.instantiateByAlias(a+"."+c.type,c)}}}if(c===true){return b||Ext.create(g)}if("xtype" in c){d=f.instantiateByAlias("widget."+c.xtype,c)}else{if("xclass" in c){d=Ext.create(c.xclass,c)}}if(d){if(b){b.destroy()}return d}if(b){return b.setConfig(c)}return Ext.create(g,c)},log:(function(){var a=function(){};a.info=a.warn=a.error=Ext.emptyFn;return a}())});(function(){var c=[""],h=/([^\d\.])/,a=/[^\d]/g,j=/[\-+]/g,g=/\s/g,b=/_/g,f={classic:1,modern:1},d;Ext.Version=d=function(p,y){var q=this,v=q.padModes,s,o,w,m,r,t,u;if(p.isVersion){p=p.version}q.version=u=String(p).toLowerCase().replace(b,".").replace(j,"");s=u.charAt(0);if(s in v){u=u.substring(1);w=v[s]}else{w=y?v[y]:0}q.pad=w;t=u.search(h);q.shortVersion=u;if(t!==-1){q.release=r=u.substr(t,p.length);q.shortVersion=u.substr(0,t);r=d.releaseValueMap[r]||r}q.releaseValue=r||w;q.shortVersion=q.shortVersion.replace(a,"");q.parts=m=u.split(".");for(o=m.length;o--;){m[o]=parseInt(m[o],10)}if(w===Infinity){m.push(w)}q.major=m[0]||w;q.minor=m[1]||w;q.patch=m[2]||w;q.build=m[3]||w;return q};d.prototype={isVersion:true,padModes:{"~":NaN,"^":Infinity},release:"",compareTo:function(q){var r=this,y=r.pad,o=r.parts,t=o.length,w=q.isVersion?q:new d(q),u=w.pad,m=w.parts,A=m.length,s=Math.max(t,A),z,v,p;for(z=0;z<s;z++){v=(z<t)?o[z]:y;p=(z<A)?m[z]:u;if(v<p){return -1}if(v>p){return 1}}v=r.releaseValue;p=w.releaseValue;if(v<p){return -1}if(v>p){return 1}return 0},toString:function(){return this.version},valueOf:function(){return this.version},getMajor:function(){return this.major},getMinor:function(){return this.minor},getPatch:function(){return this.patch},getBuild:function(){return this.build},getRelease:function(){return this.release},getReleaseValue:function(){return this.releaseValue},isGreaterThan:function(m){return this.compareTo(m)>0},isGreaterThanOrEqual:function(m){return this.compareTo(m)>=0},isLessThan:function(m){return this.compareTo(m)<0},isLessThanOrEqual:function(m){return this.compareTo(m)<=0},equals:function(m){return this.compareTo(m)===0},match:function(m){m=String(m);return this.version.substr(0,m.length)===m},toArray:function(){var m=this;return[m.getMajor(),m.getMinor(),m.getPatch(),m.getBuild(),m.getRelease()]},getShortVersion:function(){return this.shortVersion},gt:function(m){return this.compareTo(m)>0},lt:function(m){return this.compareTo(m)<0},gtEq:function(m){return this.compareTo(m)>=0},ltEq:function(m){return this.compareTo(m)<=0}};Ext.apply(d,{aliases:{from:{extjs:"ext",core:"core",touch:"modern"},to:{ext:["extjs"],core:["core"],modern:["touch"]}},releaseValueMap:{dev:-6,alpha:-5,a:-5,beta:-4,b:-4,rc:-3,"#":-2,p:-1,pl:-1},getComponentValue:function(m){return !m?0:(isNaN(m)?this.releaseValueMap[m]||m:parseInt(m,10))},compare:function(m,p){var o=m.isVersion?m:new d(m);return o.compareTo(p)},set:function(m,r,q){var p=d.aliases.to[r],o=q.isVersion?q:new d(q),s;m[r]=o;if(p){for(s=p.length;s-->0;){m[p[s]]=o}}return o}});Ext.apply(Ext,{compatVersions:{},versions:{},lastRegisteredVersion:null,getCompatVersion:function(p){var o=Ext.compatVersions,m;if(!p){m=o.ext||o.touch||o.core}else{m=o[d.aliases.from[p]||p]}return m||Ext.getVersion(p)},setCompatVersion:function(m,o){d.set(Ext.compatVersions,m,o)},setVersion:function(m,o){if(m in f){Ext.toolkit=m}Ext.lastRegisteredVersion=d.set(Ext.versions,m,o);return this},getVersion:function(m){var o=Ext.versions;if(!m){return o.ext||o.touch||o.core}return o[d.aliases.from[m]||m]},checkVersion:function(v,u){var C=Ext.isArray(v),p=d.aliases.from,y=C?v:c,m=y.length,t=Ext.versions,q=t.ext||t.touch,w,o,B,A,r,E,s,z,D;if(!C){c[0]=v}for(w=0;w<m;++w){if(!Ext.isString(s=y[w])){B=Ext.checkVersion(s.and||s.or,!s.or);if(s.not){B=!B}}else{if(s.indexOf(" ")>=0){s=s.replace(g,"")}o=s.indexOf("@");if(o<0){z=s;D=q}else{E=s.substring(0,o);if(!(D=t[p[E]||E])){if(u){return false}continue}z=s.substring(o+1)}o=z.indexOf("-");if(o<0){if(z.charAt(o=z.length-1)==="+"){A=z.substring(0,o);r=null}else{A=r=z}}else{if(o>0){A=z.substring(0,o);r=z.substring(o+1)}else{A=null;r=z.substring(o+1)}}B=true;if(A){A=new d(A,"~");B=A.ltEq(D)}if(B&&r){r=new d(r,"~");B=r.gtEq(D)}}if(B){if(!u){return true}}else{if(u){return false}}}return !!u},deprecate:function(o,q,m,p){if(d.compare(Ext.getVersion(o),q)<1){m.call(p)}}})}());(function(a){var b=(a&&a.packages)||{},f=a&&a.compatibility,d,c;for(d in b){c=b[d];Ext.setVersion(d,c.version)}if(f){if(Ext.isString(f)){Ext.setCompatVersion("core",f)}else{for(d in f){Ext.setCompatVersion(d,f[d])}}}if(!b.ext&&!b.touch){Ext.setVersion("ext","6.0.1.250");Ext.setVersion("core","6.0.1.250")}})(Ext.manifest);Ext.Config=function(c){var a=this,b=c.charAt(0).toUpperCase()+c.substr(1);a.name=c;a.names={internal:"_"+c,initializing:"is"+b+"Initializing",apply:"apply"+b,update:"update"+b,get:"get"+b,set:"set"+b,initGet:"initGet"+b,changeEvent:c.toLowerCase()+"change"};a.root=a};Ext.Config.map={};Ext.Config.get=function(c){var a=Ext.Config.map,b=a[c]||(a[c]=new Ext.Config(c));return b};Ext.Config.prototype={self:Ext.Config,isConfig:true,getGetter:function(){return this.getter||(this.root.getter=this.makeGetter())},getInitGetter:function(){return this.initGetter||(this.root.initGetter=this.makeInitGetter())},getSetter:function(){return this.setter||(this.root.setter=this.makeSetter())},getEventedSetter:function(){return this.eventedSetter||(this.root.eventedSetter=this.makeEventedSetter())},getInternalName:function(a){return a.$configPrefixed?this.names.internal:this.name},mergeNew:function(a,c,g,f){var b,d;if(!c){b=a}else{if(!a){b=c}else{b=Ext.Object.chain(c);for(d in a){if(!f||!(d in b)){b[d]=a[d]}}}}return b},mergeSets:function(g,d,b){var c=d?Ext.Object.chain(d):{},f,a;if(g instanceof Array){for(f=g.length;f--;){a=g[f];if(!b||!(a in c)){c[a]=true}}}else{if(g){if(g.constructor===Object){for(f in g){a=g[f];if(!b||!(f in c)){c[f]=a}}}else{if(!b||!(g in c)){c[g]=true}}}}return c},makeGetter:function(){var a=this.name,b=this.names.internal;return function(){var c=this.$configPrefixed?b:a;return this[c]}},makeInitGetter:function(){var c=this.name,b=this.names,a=b.set,d=b.get,f=b.initializing;return function(){var g=this;g[f]=true;delete g[d];g[a](g.config[c]);delete g[f];return g[d].apply(g,arguments)}},makeSetter:function(){var a=this.name,f=this.names,c=f.internal,d=f.get,b=f.apply,h=f.update,g;g=function(p){var o=this,m=o.$configPrefixed?c:a,j=o[m];delete o[d];if(!o[b]||(p=o[b](p,j))!==undefined){if(p!==(j=o[m])){o[m]=p;if(o[h]){o[h](p,j)}}}return o};g.$isDefault=true;return g},makeEventedSetter:function(){var g=this.name,b=this.names,d=b.internal,f=b.get,c=b.apply,j=b.update,a=b.changeEvent,m=function(o,p,q,r){o[r]=p;if(o[j]){o[j](p,q)}},h;h=function(p){var o=this,r=o.$configPrefixed?d:g,q=o[r];delete o[f];if(!o[c]||(p=o[c](p,q))!==undefined){if(p!==(q=o[r])){if(o.isConfiguring){o[r]=p;if(o[j]){o[j](p,q)}}else{o.fireEventedAction(a,[o,p,q],m,o,[o,p,q,r])}}}return o};h.$isDefault=true;return h}};(function(){var c=Ext.Config,a=c.map,b=Ext.Object;Ext.Configurator=function(g){var d=this,h=g.prototype,f=g.superclass?g.superclass.self.$config:null;d.cls=g;d.superCfg=f;if(f){d.configs=b.chain(f.configs);d.cachedConfigs=b.chain(f.cachedConfigs);d.initMap=b.chain(f.initMap);d.values=b.chain(f.values);d.needsFork=f.needsFork}else{d.configs={};d.cachedConfigs={};d.initMap={};d.values={}}h.config=h.defaultConfig=d.values;g.$config=d};Ext.Configurator.prototype={self:Ext.Configurator,needsFork:false,initList:null,add:function(D,d){var q=this,j=q.cls,p=q.configs,t=q.cachedConfigs,u=q.initMap,A=j.prototype,v=d&&d.$config.configs,f=q.values,o,r,C,g,h,m,w,z,y,B;for(w in D){B=D[w];o=B&&B.constructor===Object;r=o&&"$value" in B?B:null;if(r){C=!!r.cached;B=r.$value;o=B&&B.constructor===Object}g=r&&r.merge;h=p[w];if(h){if(d){g=h.merge;if(!g){continue}r=null}else{g=g||h.merge}m=f[w];if(g){B=g.call(h,B,m,j,d)}else{if(o){if(m&&m.constructor===Object){B=b.merge({},m,B)}}}}else{if(v){h=v[w];r=null}else{h=c.get(w)}p[w]=h;if(h.cached||C){t[w]=true}z=h.names;if(!A[y=z.get]){A[y]=h.getter||h.getGetter()}if(!A[y=z.set]){A[y]=(r&&r.evented)?(h.eventedSetter||h.getEventedSetter()):(h.setter||h.getSetter())}}if(r){if(h.owner!==j){p[w]=h=Ext.Object.chain(h);h.owner=j}Ext.apply(h,r);delete h.$value}if(!q.needsFork&&B&&(B.constructor===Object||B instanceof Array)){q.needsFork=true}if(B!==null){u[w]=true}else{if(A.$configPrefixed){A[p[w].names.internal]=null}else{A[p[w].name]=null}if(w in u){u[w]=false}}f[w]=B}},configure:function(r,m){var w=this,j=w.configs,p=w.initMap,t=w.initListMap,o=w.initList,v=w.cls.prototype,G=w.values,y=0,C=!o,d,f,g,A,F,D,h,s,z,B,u,q,E;G=w.needsFork?b.fork(G):b.chain(G);r.isConfiguring=true;if(C){w.initList=o=[];w.initListMap=t={};r.isFirstInstance=true;for(z in p){A=p[z];f=j[z];u=f.cached;if(A){s=f.names;B=G[z];if(!v[s.set].$isDefault||v[s.apply]||v[s.update]||typeof B==="object"){if(u){(d||(d=[])).push(f)}else{o.push(f);t[z]=true}r[s.get]=f.initGetter||f.getInitGetter()}else{v[f.getInternalName(v)]=B}}else{if(u){v[f.getInternalName(v)]=undefined}}}}h=d&&d.length;if(h){for(F=0;F<h;++F){D=d[F].getInternalName(v);r[D]=null}for(F=0;F<h;++F){s=(f=d[F]).names;g=s.get;if(r.hasOwnProperty(g)){r[s.set](G[f.name]);delete r[g]}}for(F=0;F<h;++F){D=d[F].getInternalName(v);v[D]=r[D];delete r[D]}}if(m&&m.platformConfig){m=w.resolvePlatformConfig(r,m)}if(C){if(r.afterCachedConfig&&!r.afterCachedConfig.$nullFn){r.afterCachedConfig(m)}}r.config=G;for(F=0,h=o.length;F<h;++F){f=o[F];r[f.names.get]=f.initGetter||f.getInitGetter()}if(r.transformInstanceConfig){m=r.transformInstanceConfig(m)}if(m){for(z in m){B=m[z];f=j[z];if(!f){r[z]=B}else{if(!f.lazy){++y}if(!t[z]){r[f.names.get]=f.initGetter||f.getInitGetter()}if(f.merge){B=f.merge(B,G[z],r)}else{if(B&&B.constructor===Object){q=G[z];if(q&&q.constructor===Object){B=b.merge(G[z],B)}else{B=Ext.clone(B)}}}}G[z]=B}}if(r.beforeInitConfig&&!r.beforeInitConfig.$nullFn){if(r.beforeInitConfig(m)===false){return}}if(m){for(z in m){if(!y){break}f=j[z];if(f&&!f.lazy){--y;s=f.names;g=s.get;if(r.hasOwnProperty(g)){r[s.set](G[z]);delete r[s.get]}}}}for(F=0,h=o.length;F<h;++F){f=o[F];s=f.names;g=s.get;if(!f.lazy&&r.hasOwnProperty(g)){r[s.set](G[f.name]);delete r[g]}}delete r.isConfiguring},getCurrentConfig:function(h){var g=h.defaultConfig,f={},d;for(d in g){f[d]=h[a[d].names.get]()}return f},merge:function(g,f,p){var j=this.configs,o,h,d,m;for(o in p){h=p[o];m=j[o];if(m){if(m.merge){h=m.merge(h,f[o],g)}else{if(h&&h.constructor===Object){d=f[o];if(d&&d.constructor===Object){h=Ext.Object.merge(d,h)}else{h=Ext.clone(h)}}}}f[o]=h}return f},reconfigure:function(u,p,v){var h=u.config,m=[],t=u.$configStrict&&!(v&&v.strict===false),r=this.configs,f=v&&v.defaults,j,s,g,o,d,q,w;for(d in p){if(f&&u.hasOwnProperty(d)){continue}h[d]=p[d];j=r[d];if(j){u[j.names.get]=j.initGetter||j.getInitGetter()}else{w=u.self.prototype[d];if(t){if((typeof w==="function")&&!w.$nullFn){continue}}}m.push(d)}for(g=0,o=m.length;g<o;g++){d=m[g];j=r[d];if(j){q=j.names;s=q.get;if(u.hasOwnProperty(s)){u[q.set](p[d]);delete u[s]}}else{j=a[d]||Ext.Config.get(d);q=j.names;if(u[q.set]){u[q.set](p[d])}else{u[d]=p[d]}}}},resolvePlatformConfig:function(g,h){var d=h&&h.platformConfig,j=h,m,o,f;if(d){o=Ext.getPlatformConfigKeys(d);f=o.length;if(f){j=Ext.merge({},j);for(m=0,f=o.length;m<f;++m){this.merge(g,j,d[o[m]])}}}return j}}}());Ext.Base=(function(d){var c=[],o,q=[],b=function(w,v){var s=this,u,t,r;if(w){t=Ext.Config.map[w];r=t.names.get;if(v&&s.hasOwnProperty(r)){u=s.config[w]}else{u=s[r]()}}else{u=s.getCurrentConfig()}return u},h=function(r){return function(){return this[r].apply(this,arguments)}},a=Ext.Version,m=/^\d/,p={},g={},j=function(){},f=j.prototype;Ext.apply(j,{$className:"Ext.Base",$isClass:true,create:function(){return Ext.create.apply(Ext,[this].concat(Array.prototype.slice.call(arguments,0)))},addDeprecations:function(H){var F=this,w=[],A=Ext.getCompatVersion(H.name),D,u,E,v,G,r,B,J,y,I,s,t,C,z;for(u in H){if(m.test(u)){z=new Ext.Version(u);z.deprecations=H[u];w.push(z)}}w.sort(a.compare);for(E=w.length;E--;){D=(z=w[E]).deprecations;G=F.prototype;C=D.statics;r=A&&A.lt(z);if(!r){break}while(D){y=D.methods;if(y){for(I in y){t=y[I];J=null;if(!t){}else{if(Ext.isString(t)){if(r){J=h(t)}}else{v="";if(t.message||t.fn){t=t.fn}B=G.hasOwnProperty(I)&&G[I];if(r&&t){t.$owner=F;t.$name=I;if(B){t.$previous=B}J=t}}}if(J){G[I]=J}}}D=C;C=null;G=F}}},extend:function(r){var t=this,v=r.prototype,y,z,s,w,u;y=t.prototype=Ext.Object.chain(v);y.self=t;t.superclass=y.superclass=v;if(!r.$isClass){for(z in f){if(z in y){y[z]=f[z]}}}u=v.$inheritableStatics;if(u){for(z=0,s=u.length;z<s;z++){w=u[z];if(!t.hasOwnProperty(w)){t[w]=r[w]}}}if(r.$onExtended){t.$onExtended=r.$onExtended.slice()}t.getConfigurator()},$onExtended:[],triggerExtended:function(){var r=this.$onExtended,u=r.length,t,s;if(u>0){for(t=0;t<u;t++){s=r[t];s.fn.apply(s.scope||this,arguments)}}},onExtended:function(s,r){this.$onExtended.push({fn:s,scope:r});return this},addStatics:function(r){this.addMembers(r,true);return this},addInheritableStatics:function(u){var r,t,w=this.prototype,v,s;r=w.$inheritableStatics;t=w.$hasInheritableStatics;if(!r){r=w.$inheritableStatics=[];t=w.$hasInheritableStatics={}}for(v in u){if(u.hasOwnProperty(v)){s=u[v];this[v]=s;if(!t[v]){t[v]=true;r.push(v)}}}return this},addMembers:function(t,u,C){var G=this,z=Ext.Function.clone,E=u?G:G.prototype,v=!u&&E.defaultConfig,r=Ext.enumerables,A=t.privates,B,y,D,w,F,H,s;if(A){delete t.privates;if(!u){s=A.statics;delete A.statics}G.addMembers(A,u,H);if(s){G.addMembers(s,true,H)}}for(F in t){if(t.hasOwnProperty(F)){w=t[F];if(typeof w==="function"&&!w.$isClass&&!w.$nullFn){if(w.$owner){w=z(w)}if(E.hasOwnProperty(F)){w.$previous=E[F]}w.$owner=G;w.$name=F}else{if(v&&(F in v)&&!E.config.hasOwnProperty(F)){(B||(B={}))[F]=w;continue}}E[F]=w}}if(B){G.addConfig(B)}if(r){for(y=0,D=r.length;y<D;++y){if(t.hasOwnProperty(F=r[y])){w=t[F];if(w&&!w.$nullFn){if(w.$owner){w=z(w)}w.$owner=G;w.$name=F;if(E.hasOwnProperty(F)){w.$previous=E[F]}}E[F]=w}}}return this},addMember:function(r,s){p[r]=s;this.addMembers(p);delete p[r];return this},borrow:function(t,u){var w=t.prototype,r={},y,s,v;u=Ext.Array.from(u);for(y=0,s=u.length;y<s;y++){v=u[y];r[v]=w[v]}return this.addMembers(r)},override:function(v){var y=this,t=v.statics,s=v.inheritableStatics,w=v.config,u=v.mixins,r=v.cachedConfig;if(t||s||w){v=Ext.apply({},v)}if(t){y.addMembers(t,true);delete v.statics}if(s){y.addInheritableStatics(s);delete v.inheritableStatics}if(w){y.addConfig(w);delete v.config}if(r){y.addCachedConfig(r);delete v.cachedConfig}delete v.mixins;y.addMembers(v);if(u){y.mixin(u)}return y},callParent:function(r){var s;return(s=this.callParent.caller)&&(s.$previous||((s=s.$owner?s:s.caller)&&s.$owner.superclass.self[s.$name])).apply(this,r||c)},callSuper:function(r){var s;return(s=this.callSuper.caller)&&((s=s.$owner?s:s.caller)&&s.$owner.superclass.self[s.$name]).apply(this,r||c)},mixin:function(C,E){var w=this,r,z,D,y,s,v,B,A,u;if(typeof C!=="string"){u=C;if(u instanceof Array){for(s=0,v=u.length;s<v;s++){r=u[s];w.mixin(r.prototype.mixinId||r.$className,r)}}else{for(var t in u){w.mixin(t,u[t])}}return}r=E.prototype;z=w.prototype;if(r.onClassMixedIn){r.onClassMixedIn.call(E,w)}if(!z.hasOwnProperty("mixins")){if("mixins" in z){z.mixins=Ext.Object.chain(z.mixins)}else{z.mixins={}}}for(D in r){A=r[D];if(D==="mixins"){Ext.applyIf(z.mixins,A)}else{if(!(D==="mixinId"||D==="config")&&(z[D]===undefined)){z[D]=A}}}y=r.$inheritableStatics;if(y){for(s=0,v=y.length;s<v;s++){B=y[s];if(!w.hasOwnProperty(B)){w[B]=E[B]}}}if("config" in r){w.addConfig(r.config,E)}z.mixins[C]=r;if(r.afterClassMixedIn){r.afterClassMixedIn.call(E,w)}return w},addConfig:function(r,s){var t=this.$config||this.getConfigurator();t.add(r,s)},addCachedConfig:function(t,r){var s={},u;for(u in t){s[u]={cached:true,$value:t[u]}}this.addConfig(s,r)},getConfigurator:function(){return this.$config||new Ext.Configurator(this)},getName:function(){return Ext.getClassName(this)},createAlias:d(function(s,r){g[s]=function(){return this[r].apply(this,arguments)};this.override(g);delete g[s]})});for(o in j){if(j.hasOwnProperty(o)){q.push(o)}}j.$staticMembers=q;j.getConfigurator();j.addMembers({$className:"Ext.Base",isInstance:true,$configPrefixed:true,$configStrict:true,isConfiguring:false,isFirstInstance:false,destroyed:false,statics:function(){var s=this.statics.caller,r=this.self;if(!s){return r}return s.$owner},callParent:function(r){var s,t=(s=this.callParent.caller)&&(s.$previous||((s=s.$owner?s:s.caller)&&s.$owner.superclass[s.$name]));return t.apply(this,r||c)},callSuper:function(r){var s,t=(s=this.callSuper.caller)&&((s=s.$owner?s:s.caller)&&s.$owner.superclass[s.$name]);return t.apply(this,r||c)},self:j,constructor:function(){return this},getConfigurator:function(){return this.$config||this.self.getConfigurator()},initConfig:function(s){var r=this,t=r.getConfigurator();r.initConfig=Ext.emptyFn;r.initialConfig=s||{};t.configure(r,s);return r},beforeInitConfig:Ext.emptyFn,getConfig:b,setConfig:function(v,s,u){var r=this,t;if(v){if(typeof v==="string"){t={};t[v]=s}else{t=v}r.getConfigurator().reconfigure(r,t,u)}return r},getCurrentConfig:function(){var r=this.getConfigurator();return r.getCurrentConfig(this)},hasConfig:function(r){return r in this.defaultConfig},getInitialConfig:function(s){var r=this.config;if(!s){return r}return r[s]},$links:null,link:function(u,s){var r=this,t=r.$links||(r.$links={});t[u]=true;r[u]=s;return s},unlink:function(s){var w=this,t,v,u,r;for(t=0,v=s.length;t<v;t++){u=s[t];r=w[u];if(r){if(r.isInstance&&!r.destroyed){r.destroy()}else{if(r.parentNode&&"nodeType" in r){r.parentNode.removeChild(r)}}}w[u]=null}return w},destroy:function(){var s=this,r=s.$links;s.initialConfig=s.config=null;s.destroy=Ext.emptyFn;s.isDestroyed=s.destroyed=true;if(r){s.$links=null;s.unlink(Ext.Object.getKeys(r))}}});f.callOverridden=f.callParent;return j}(Ext.Function.flexSetter));(function(b,a){(Ext.util||(Ext.util={})).Cache=b=function(f){var d=this,c;if(f){Ext.apply(d,f)}d.head=c={key:null,value:null};d.map={};c.next=c.prev=c};b.prototype=a={maxSize:100,count:0,clear:function(){var d=this,f=d.head,c=f.next;f.next=f.prev=f;if(!d.evict.$nullFn){for(;c!==f;c=c.next){d.evict(c.key,c.value)}}d.count=0},each:function(c,g){g=g||this;for(var f=this.head,d=f.next;d!==f;d=d.next){if(c.call(g,d.key,d.value)){break}}},get:function(d){var c=this,h=c.head,f=c.map,g=f[d];if(g){if(g.prev!==h){c.unlinkEntry(g);c.linkEntry(g)}}else{f[d]=g={key:d,value:c.miss.apply(c,arguments)};c.linkEntry(g);++c.count;while(c.count>c.maxSize){c.unlinkEntry(h.prev,true);--c.count}}return g.value},evict:Ext.emptyFn,linkEntry:function(c){var f=this.head,d=f.next;c.next=d;c.prev=f;f.next=c;d.prev=c},unlinkEntry:function(c,d){var f=c.next,g=c.prev;g.next=f;f.prev=g;if(d){this.evict(c.key,c.value)}}};a.destroy=a.clear}());(function(){var a,f=Ext.Base,b=f.$staticMembers,d=function(h,g){return(h.length-g.length)||((h<g)?-1:((h>g)?1:0))};function c(h){function g(){return this.constructor.apply(this,arguments)||null}return g}Ext.Class=a=function(g,h,j){if(typeof g!="function"){j=h;h=g;g=null}if(!h){h={}}g=a.create(g,h);a.process(g,h,j);return g};Ext.apply(a,{makeCtor:c,onBeforeCreated:function(g,h,j){g.addMembers(h);j.onCreated.call(g,g)},create:function(j,h){var g=b.length,m;if(!j){j=c()}while(g--){m=b[g];j[m]=f[m]}return j},process:function(j,s,o){var m=s.preprocessors||a.defaultPreprocessors,v=this.preprocessors,g={onBeforeCreated:this.onBeforeCreated},y=[],h,r,q,w,p,u,t;delete s.preprocessors;j._classHooks=g;for(q=0,w=m.length;q<w;q++){h=m[q];if(typeof h=="string"){h=v[h];r=h.properties;if(r===true){y.push(h.fn)}else{if(r){for(p=0,u=r.length;p<u;p++){t=r[p];if(s.hasOwnProperty(t)){y.push(h.fn);break}}}}}else{y.push(h)}}g.onCreated=o?o:Ext.emptyFn;g.preprocessors=y;this.doProcess(j,s,g)},doProcess:function(q,m,p){var j=this,o=p.preprocessors,g=o.shift(),h=j.doProcess;for(;g;g=o.shift()){if(g.call(j,q,m,p,h)===false){return}}p.onBeforeCreated.apply(j,arguments)},preprocessors:{},registerPreprocessor:function(o,j,g,m,h){if(!m){m="last"}if(!g){g=[o]}this.preprocessors[o]={name:o,properties:g||false,fn:j};this.setDefaultPreprocessorPosition(o,m,h);return this},getPreprocessor:function(g){return this.preprocessors[g]},getPreprocessors:function(){return this.preprocessors},defaultPreprocessors:[],getDefaultPreprocessors:function(){return this.defaultPreprocessors},setDefaultPreprocessors:function(g){this.defaultPreprocessors=Ext.Array.from(g);return this},setDefaultPreprocessorPosition:function(g,j,h){var m=this.defaultPreprocessors,o;if(typeof j=="string"){if(j==="first"){m.unshift(g);return this}else{if(j==="last"){m.push(g);return this}}j=(j==="after")?1:-1}o=Ext.Array.indexOf(m,h);if(o!==-1){Ext.Array.splice(m,Math.max(0,o+j),0,g)}return this}});a.registerPreprocessor("extend",function(r,g,p){var h=Ext.Base,j=h.prototype,m=g.extend,q,o,s;delete g.extend;if(m&&m!==Object){q=m}else{q=h}o=q.prototype;if(!q.$isClass){for(s in j){if(!o[s]){o[s]=j[s]}}}r.extend(q);r.triggerExtended.apply(r,arguments);if(g.onClassExtended){r.onExtended(g.onClassExtended,r);delete g.onClassExtended}},true);a.registerPreprocessor("privates",function(m,h){var g=h.privates,j=g.statics,o=g.privacy||true;delete h.privates;delete g.statics;m.addMembers(g,false,o);if(j){m.addMembers(j,true,o)}});a.registerPreprocessor("statics",function(g,h){g.addStatics(h.statics);delete h.statics});a.registerPreprocessor("inheritableStatics",function(g,h){g.addInheritableStatics(h.inheritableStatics);delete h.inheritableStatics});Ext.createRuleFn=function(g){return new Function("$c","with($c) { return ("+g+"); }")};Ext.expressionCache=new Ext.util.Cache({miss:Ext.createRuleFn});Ext.ruleKeySortFn=d;Ext.getPlatformConfigKeys=function(g){var m=[],j,h;for(j in g){h=Ext.expressionCache.get(j);if(h(Ext.platformTags)){m.push(j)}}m.sort(d);return m};a.registerPreprocessor("platformConfig",function(m,r,z){var t=r.platformConfig,o=r.config,w,s,u,p,j,g,h,y,q,v;delete r.platformConfig;p=m.getConfigurator();s=p.configs;g=Ext.getPlatformConfigKeys(t);for(q=0,v=g.length;q<v;++q){u=t[g[q]];j=w=null;for(h in u){y=u[h];if(o&&h in o){(w||(w={}))[h]=y;(j||(j={}))[h]=o[h];delete o[h]}else{if(h in s){(w||(w={}))[h]=y}else{r[h]=y}}}if(j){p.add(j)}if(w){p.add(w)}}});a.registerPreprocessor("config",function(g,h){if(h.hasOwnProperty("$configPrefixed")){g.prototype.$configPrefixed=h.$configPrefixed}g.addConfig(h.config);delete h.config});a.registerPreprocessor("cachedConfig",function(g,h){if(h.hasOwnProperty("$configPrefixed")){g.prototype.$configPrefixed=h.$configPrefixed}g.addCachedConfig(h.cachedConfig);delete h.cachedConfig});a.registerPreprocessor("mixins",function(h,j,m){var g=j.mixins,o=m.onCreated;delete j.mixins;m.onCreated=function(){m.onCreated=o;h.mixin(g);return m.onCreated.apply(this,arguments)}});Ext.extend=function(g,h,m){if(arguments.length===2&&Ext.isObject(h)){m=h;h=g;g=null}var j;if(!h){throw new Error("[Ext.extend] Attempting to extend from a class which has not been loaded on the page.")}m.extend=h;m.preprocessors=["extend","statics","inheritableStatics","mixins","platformConfig","config"];if(g){j=new a(g,m);j.prototype.constructor=g}else{j=new a(m)}j.prototype.override=function(p){for(var o in p){if(p.hasOwnProperty(o)){this[o]=p[o]}}};return j}}());Ext.Inventory=function(){var a=this;a.names=[];a.paths={};a.alternateToName={};a.aliasToName={};a.nameToAliases={};a.nameToAlternates={}};Ext.Inventory.prototype={_array1:[0],prefixes:null,dotRe:/\./g,wildcardRe:/\*/g,addAlias:function(c,b,a){return this.addMapping(c,b,this.aliasToName,this.nameToAliases,a)},addAlternate:function(a,b){return this.addMapping(a,b,this.alternateToName,this.nameToAlternates)},addMapping:function(p,c,d,o,f){var s=p.$className||p,h=s,m=this._array1,j,b,r,g,t,q;if(Ext.isString(s)){h={};h[s]=c}for(r in h){b=h[r];if(Ext.isString(b)){m[0]=b;b=m}t=b.length;q=o[r]||(o[r]=[]);for(g=0;g<t;++g){if(!(j=b[g])){continue}if(d[j]!==r){d[j]=r;q.push(j)}}}},getAliasesByName:function(a){return this.nameToAliases[a]||null},getAlternatesByName:function(a){return this.nameToAlternates[a]||null},getNameByAlias:function(a){return this.aliasToName[a]||""},getNameByAlternate:function(a){return this.alternateToName[a]||""},getNamesByExpression:function(p,a,j){var y=this,u=y.aliasToName,r=y.alternateToName,b=y.nameToAliases,d=y.nameToAlternates,w=j?a:{},o=[],v=Ext.isString(p)?[p]:p,h=v.length,f=y.wildcardRe,c,s,t,m,q,z,g;for(s=0;s<h;++s){if((c=v[s]).indexOf("*")<0){if(!(z=u[c])){if(!(z=r[c])){z=c}}if(!(z in w)&&!(a&&(z in a))){w[z]=1;o.push(z)}}else{g=new RegExp("^"+c.replace(f,"(.*?)")+"$");for(z in b){if(!(z in w)&&!(a&&(z in a))){if(!(m=g.test(z))){q=(t=b[z]).length;while(!m&&q-->0){m=g.test(t[q])}t=d[z];if(t&&!m){q=t.length;while(!m&&q-->0){m=g.test(t[q])}}}if(m){w[z]=1;o.push(z)}}}}}return o},getPath:function(d){var f=this,b=f.paths,c="",a;if(d in b){c=b[d]}else{a=f.getPrefix(d);if(a){d=d.substring(a.length+1);c=b[a];if(c){c+="/"}}c+=d.replace(f.dotRe,"/")+".js"}return c},getPrefix:function(d){if(d in this.paths){return d}var b=this.getPrefixes(),c=b.length,f,a;while(c-->0){f=(a=b[c]).length;if(f<d.length&&d.charAt(f)==="."&&a===d.substring(0,f)){return a}}return""},getPrefixes:function(){var a=this,b=a.prefixes;if(!b){a.prefixes=b=a.names.slice(0);b.sort(a._compareNames)}return b},removeName:function(d){var m=this,b=m.aliasToName,g=m.alternateToName,c=m.nameToAliases,j=m.nameToAlternates,f=c[d],o=j[d],h,p;delete c[d];delete j[d];if(f){for(h=f.length;h--;){if(d===(p=f[h])){delete b[p]}}}if(o){for(h=o.length;h--;){if(d===(p=o[h])){delete g[p]}}}},resolveName:function(b){var c=this,a;if(!(b in c.nameToAliases)){if(!(a=c.aliasToName[b])){a=c.alternateToName[b]}}return a||b},select:function(g,d){var f=this,a={},c={excludes:a,exclude:function(){f.getNamesByExpression(arguments,a,true);return this}},b;for(b in g){c[b]=f.selectMethod(a,g[b],d||g)}return c},selectMethod:function(b,d,c){var a=this;return function(f){var g=Ext.Array.slice(arguments,1);g.unshift(a.getNamesByExpression(f,b));return d.apply(c,g)}},setPath:Ext.Function.flexSetter(function(b,a){var c=this;c.paths[b]=a;c.names.push(b);c.prefixes=null;return c}),_compareNames:function(b,a){var c=b.length-a.length;if(!c){c=(b<a)?-1:1}return c}};Ext.ClassManager=(function(v,q,y,f,t){var b=Ext.Class.makeCtor,h=[],j={Ext:{name:"Ext",value:Ext}},c=Ext.apply(new Ext.Inventory(),{classes:{},classState:{},existCache:{},instantiators:[],isCreated:function(z){if(c.classes[z]||c.existCache[z]){return true}if(!c.lookupName(z,false)){return false}c.triggerCreated(z);return true},createdListeners:[],nameCreatedListeners:{},existsListeners:[],nameExistsListeners:{},overrideMap:{},triggerCreated:function(z,A){c.existCache[z]=A||1;c.classState[z]+=40;c.notify(z,c.createdListeners,c.nameCreatedListeners)},onCreated:function(B,A,z){c.addListener(B,A,z,c.createdListeners,c.nameCreatedListeners)},notify:function(C,E,H){var I=c.getAlternatesByName(C),D=[C],z,B,J,A,G,F;for(z=0,B=E.length;z<B;z++){G=E[z];G.fn.call(G.scope,C)}while(D){for(z=0,B=D.length;z<B;z++){F=D[z];E=H[F];if(E){for(J=0,A=E.length;J<A;J++){G=E[J];G.fn.call(G.scope,F)}delete H[F]}}D=I;I=null}},addListener:function(F,E,C,B,A){if(Ext.isArray(C)){F=Ext.Function.createBarrier(C.length,F,E);for(D=0;D<C.length;D++){this.addListener(F,null,C[D],B,A)}return}var D,z={fn:F,scope:E};if(C){if(this.isCreated(C)){F.call(E,C);return}if(!A[C]){A[C]=[]}A[C].push(z)}else{B.push(z)}},$namespaceCache:j,addRootNamespaces:function(A){for(var z in A){j[z]={name:z,value:A[z]}}},clearNamespaceCache:function(){h.length=0;for(var z in j){if(!j[z].value){delete j[z]}}},getNamespaceEntry:function(A){if(typeof A!=="string"){return A}var B=j[A],z;if(!B){z=A.lastIndexOf(".");if(z<0){B={name:A}}else{B={name:A.substring(z+1),parent:c.getNamespaceEntry(A.substring(0,z))}}j[A]=B}return B},lookupName:function(C,F){var E=c.getNamespaceEntry(C),B=Ext.global,D=0,z,A;for(z=E;z;z=z.parent){h[D++]=z}while(B&&D-->0){z=h[D];A=B;B=z.value||B[z.name];if(!B&&F){A[z.name]=B={}}}return B},setNamespace:function(A,C){var B=c.getNamespaceEntry(A),z=Ext.global;if(B.parent){z=c.lookupName(B.parent,true)}z[B.name]=C;return C},setXType:function(C,z){var B=C.$className,G=B?C:c.get(B=C),D=G.prototype,E=D.xtypes,A=D.xtypesChain,F=D.xtypesMap;if(!D.hasOwnProperty("xtypes")){D.xtypes=E=[];D.xtypesChain=A=A?A.slice(0):[];D.xtypesMap=F=Ext.apply({},F)}c.addAlias(B,"widget."+z,true);E.push(z);A.push(z);F[z]=true},set:function(z,B){var A=c.getName(B);c.classes[z]=c.setNamespace(z,B);if(A&&A!==z){c.addAlternate(A,z)}return c},get:function(z){return c.classes[z]||c.lookupName(z,false)},addNameAliasMappings:function(z){c.addAlias(z)},addNameAlternateMappings:function(z){c.addAlternate(z)},getByAlias:function(z){return c.get(c.getNameByAlias(z))},getByConfig:function(A,B){var C=A.xclass,z;if(C){z=C}else{z=A.xtype;if(z){B="widget."}else{z=A.type}z=c.getNameByAlias(B+z)}return c.get(z)},getName:function(z){return z&&z.$className||""},getClass:function(z){return z&&z.self||null},create:function(A,C,z){var B=b(A);if(typeof C==="function"){C=C(B)}C.$className=A;return new v(B,C,function(){var L=C.postprocessors||c.defaultPostprocessors,I=c.postprocessors,J=[],H,D,G,M,F,E,K;delete C.postprocessors;for(D=0,G=L.length;D<G;D++){H=L[D];if(typeof H==="string"){H=I[H];E=H.properties;if(E===true){J.push(H.fn)}else{if(E){for(M=0,F=E.length;M<F;M++){K=E[M];if(C.hasOwnProperty(K)){J.push(H.fn);break}}}}}else{J.push(H)}}C.postprocessors=J;C.createdFn=z;c.processCreate(A,this,C)})},processCreate:function(C,A,z){var E=this,D=z.postprocessors.shift(),B=z.createdFn;if(!D){if(C){E.set(C,A)}delete A._classHooks;if(B){B.call(A,A)}if(C){E.triggerCreated(C)}return}if(D.call(E,C,A,z,E.processCreate)!==false){E.processCreate(C,A,z)}},createOverride:function(A,K,I){var C=this,D=K.override,F=K.requires,J=K.uses,z=K.mixins,G,E=1,B,H=function(){var P,O,N,M,L;if(!B){O=F?F.slice(0):[];if(z){if(!(G=z instanceof Array)){for(M in z){if(Ext.isString(P=z[M])){O.push(P)}}}else{for(N=0,L=z.length;N<L;++N){if(Ext.isString(P=z[N])){O.push(P)}}}}B=true;if(O.length){Ext.require(O,H);return}}if(G){for(N=0,L=z.length;N<L;++N){if(Ext.isString(P=z[N])){z[N]=Ext.ClassManager.get(P)}}}else{if(z){for(M in z){if(Ext.isString(P=z[M])){z[M]=Ext.ClassManager.get(P)}}}}P=C.get(D);delete K.override;delete K.compatibility;delete K.requires;delete K.uses;Ext.override(P,K);Ext.Loader.history.push(A);if(J){Ext.Loader.addUsedClasses(J)}if(I){I.call(P,P)}};c.overrideMap[A]=true;if("compatibility" in K&&Ext.isString(E=K.compatibility)){E=Ext.checkVersion(E)}if(E){C.onCreated(H,C,D)}C.triggerCreated(A,2);return C},instantiateByAlias:function(){var A=arguments[0],z=y.call(arguments),B=this.getNameByAlias(A);z[0]=B;return Ext.create.apply(Ext,z)},instantiate:function(){return Ext.create.apply(Ext,arguments)},dynInstantiate:function(A,z){z=f(z,true);z.unshift(A);return Ext.create.apply(Ext,z)},getInstantiator:function(C){var B=this.instantiators,z,A,D;z=B[C];if(!z){A=C;D=[];for(A=0;A<C;A++){D.push("a["+A+"]")}z=B[C]=new Function("c","a","return new c("+D.join(",")+")")}return z},postprocessors:{},defaultPostprocessors:[],registerPostprocessor:function(A,z,B,C,D){if(!C){C="last"}if(!B){B=[A]}this.postprocessors[A]={name:A,properties:B||false,fn:z};this.setDefaultPostprocessorPosition(A,C,D);return this},setDefaultPostprocessors:function(z){this.defaultPostprocessors=f(z);return this},setDefaultPostprocessorPosition:function(A,z,C){var B=this.defaultPostprocessors,D;if(typeof z==="string"){if(z==="first"){B.unshift(A);return this}else{if(z==="last"){B.push(A);return this}}z=(z==="after")?1:-1}D=Ext.Array.indexOf(B,C);if(D!==-1){Ext.Array.splice(B,Math.max(0,D+z),0,A)}return this}});c.registerPostprocessor("alias",function(B,A,z){var C=Ext.Array.from(z.alias),D,E;for(D=0,E=C.length;D<E;D++){q=C[D];this.addAlias(A,q)}},["xtype","alias"]);c.registerPostprocessor("singleton",function(A,C,z,B){if(z.singleton){B.call(this,A,new C(),z)}else{return true}return false});c.registerPostprocessor("alternateClassName",function(A,C,F){var D=F.alternateClassName,B,E,z;if(!(D instanceof Array)){D=[D]}for(B=0,E=D.length;B<E;B++){z=D[B];this.set(z,C)}});c.registerPostprocessor("debugHooks",function(A,C,B){var z=C.isInstance?C.self:C;delete z.prototype.debugHooks});c.registerPostprocessor("deprecated",function(A,C,B){var z=C.isInstance?C.self:C;z.addDeprecations(B.deprecated);delete z.prototype.deprecated});Ext.apply(Ext,{create:function(){var B=arguments[0],C=typeof B,A=y.call(arguments,1),z;if(C==="function"){z=B}else{if(C!=="string"&&A.length===0){A=[B];if(!(B=B.xclass)){B=A[0].xtype;if(B){B="widget."+B}}}B=c.resolveName(B);z=c.get(B)}if(!z){Ext.syncRequire(B);z=c.get(B)}return c.getInstantiator(A.length)(z,A)},widget:function(B,A){var z=B,C,E,D;if(typeof z!=="string"){A=B;z=A.xtype;E=A.xclass}else{A=A||{}}if(A.isComponent){return A}if(!E){C="widget."+z;E=c.getNameByAlias(C)}if(E){D=c.get(E)}if(!D){return Ext.create(E||C,A)}return new D(A)},createByAlias:q(c,"instantiateByAlias"),define:function(A,B,z){if(B.override){c.classState[A]=20;return c.createOverride.apply(c,arguments)}c.classState[A]=10;return c.create.apply(c,arguments)},undefine:function(B){var C=c.classes;delete C[B];delete c.existCache[B];delete c.classState[B];c.removeName(B);var D=c.getNamespaceEntry(B),A=D.parent?c.lookupName(D.parent,false):Ext.global;if(A){try{delete A[D.name]}catch(z){A[D.name]=undefined}}},getClassName:q(c,"getName"),getDisplayName:function(z){if(z){if(z.displayName){return z.displayName}if(z.$name&&z.$class){return Ext.getClassName(z.$class)+"#"+z.$name}if(z.$className){return z.$className}}return"Anonymous"},getClass:q(c,"getClass"),namespace:function(){var z=t,A;for(A=arguments.length;A-->0;){z=c.lookupName(arguments[A],true)}return z}});Ext.addRootNamespaces=c.addRootNamespaces;Ext.createWidget=Ext.widget;Ext.ns=Ext.namespace;v.registerPreprocessor("className",function(z,A){if("$className" in A){z.$className=A.$className}},true,"first");v.registerPreprocessor("alias",function(F,z){var D=F.prototype,J=f(z.xtype),H=f(z.alias),G="widget.",E=G.length,A=Array.prototype.slice.call(D.xtypesChain||[]),K=Ext.merge({},D.xtypesMap||{}),L,C,B,I;for(L=0,C=H.length;L<C;L++){B=H[L];if(B.substring(0,E)===G){I=B.substring(E);Ext.Array.include(J,I)}}F.xtype=z.xtype=J[0];z.xtypes=J;for(L=0,C=J.length;L<C;L++){I=J[L];if(!K[I]){K[I]=true;A.push(I)}}z.xtypesChain=A;z.xtypesMap=K;Ext.Function.interceptAfter(z,"onClassCreated",function(){var M=D.mixins,O,N;for(O in M){if(M.hasOwnProperty(O)){N=M[O];J=N.xtypes;if(J){for(L=0,C=J.length;L<C;L++){I=J[L];if(!K[I]){K[I]=true;A.push(I)}}}}}});for(L=0,C=J.length;L<C;L++){I=J[L];Ext.Array.include(H,G+I)}z.alias=H},["xtype","alias"]);if(Ext.manifest){var g=Ext.manifest,w=g.classes,s=g.paths,u={},o={},d,p,m,r,a;if(s){if(g.bootRelative){a=Ext.Boot.baseUrl;for(r in s){if(s.hasOwnProperty(r)){s[r]=a+s[r]}}}c.setPath(s)}if(w){for(d in w){o[d]=[];u[d]=[];p=w[d];if(p.alias){u[d]=p.alias}if(p.alternates){o[d]=p.alternates}}}c.addAlias(u);c.addAlternate(o)}return c}(Ext.Class,Ext.Function.alias,Array.prototype.slice,Ext.Array.from,Ext.global));(Ext.env||(Ext.env={})).Browser=function(z,s){var A=this,a=Ext.Boot.browserPrefixes,c=Ext.Boot.browserNames,b=A.enginePrefixes,m=A.engineNames,v=z.match(new RegExp("((?:"+Ext.Object.getValues(a).join(")|(?:")+"))([\\w\\._]+)")),h=z.match(new RegExp("((?:"+Ext.Object.getValues(b).join(")|(?:")+"))([\\w\\._]+)")),u=c.other,y=m.other,p="",g="",d="",j=false,t,r,o,q,w;A.userAgent=z;if(/Edge\//.test(z)){v=z.match(/(Edge\/)([\w.]+)/)}if(v){u=c[Ext.Object.getKey(a,v[1])];if(u==="Safari"&&/^Opera/.test(z)){u="Opera"}p=new Ext.Version(v[2])}if(h){y=m[Ext.Object.getKey(b,h[1])];g=new Ext.Version(h[2])}if(y==="Trident"&&u!=="IE"){u="IE";var f=z.match(/.*rv:(\d+.\d+)/);if(f&&f.length){f=f[1];p=new Ext.Version(f)}}if(u&&p){Ext.setVersion(u,p)}if(z.match(/FB/)&&u==="Other"){u=c.safari;y=m.webkit}if(z.match(/Android.*Chrome/g)){u="ChromeMobile"}if(z.match(/OPR/)){u="Opera";v=z.match(/OPR\/(\d+.\d+)/);p=new Ext.Version(v[1])}Ext.apply(this,{engineName:y,engineVersion:g,name:u,version:p});this.setFlag(u,true,s);if(p){d=p.getMajor()||"";if(A.is.IE){d=parseInt(d,10);o=document.documentMode;if(o===7||(d===7&&o!==8&&o!==9&&o!==10)){d=7}else{if(o===8||(d===8&&o!==8&&o!==9&&o!==10)){d=8}else{if(o===9||(d===9&&o!==7&&o!==8&&o!==10)){d=9}else{if(o===10||(d===10&&o!==7&&o!==8&&o!==9)){d=10}else{if(o===11||(d===11&&o!==7&&o!==8&&o!==9&&o!==10)){d=11}}}}}w=Math.max(d,Ext.Boot.maxIEVersion);for(t=7;t<=w;++t){r="isIE"+t;if(d<=t){Ext[r+"m"]=true}if(d===t){Ext[r]=true}if(d>=t){Ext[r+"p"]=true}}}if(A.is.Opera&&parseInt(d,10)<=12){Ext.isOpera12m=true}Ext.chromeVersion=Ext.isChrome?d:0;Ext.firefoxVersion=Ext.isFirefox?d:0;Ext.ieVersion=Ext.isIE?d:0;Ext.operaVersion=Ext.isOpera?d:0;Ext.safariVersion=Ext.isSafari?d:0;Ext.webKitVersion=Ext.isWebKit?d:0;this.setFlag(u+d,true,s);this.setFlag(u+p.getShortVersion())}for(t in c){if(c.hasOwnProperty(t)){q=c[t];this.setFlag(q,u===q)}}this.setFlag(q);if(g){this.setFlag(y+(g.getMajor()||""));this.setFlag(y+g.getShortVersion())}for(t in m){if(m.hasOwnProperty(t)){q=m[t];this.setFlag(q,y===q,s)}}this.setFlag("Standalone",!!navigator.standalone);this.setFlag("Ripple",!!document.getElementById("tinyhippos-injected")&&!Ext.isEmpty(window.top.ripple));this.setFlag("WebWorks",!!window.blackberry);if(window.PhoneGap!==undefined||window.Cordova!==undefined||window.cordova!==undefined){j=true;this.setFlag("PhoneGap");this.setFlag("Cordova")}if(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)(?!.*FBAN)/i.test(z)){j=true}this.setFlag("WebView",j);this.isStrict=Ext.isStrict=document.compatMode==="CSS1Compat";this.isSecure=Ext.isSecure;this.identity=u+d+(this.isStrict?"Strict":"Quirks")};Ext.env.Browser.prototype={constructor:Ext.env.Browser,engineNames:{webkit:"WebKit",gecko:"Gecko",presto:"Presto",trident:"Trident",other:"Other"},enginePrefixes:{webkit:"AppleWebKit/",gecko:"Gecko/",presto:"Presto/",trident:"Trident/"},styleDashPrefixes:{WebKit:"-webkit-",Gecko:"-moz-",Trident:"-ms-",Presto:"-o-",Other:""},stylePrefixes:{WebKit:"Webkit",Gecko:"Moz",Trident:"ms",Presto:"O",Other:""},propertyPrefixes:{WebKit:"webkit",Gecko:"moz",Trident:"ms",Presto:"o",Other:""},is:function(a){return !!this.is[a]},name:null,version:null,engineName:null,engineVersion:null,setFlag:function(b,a,c){if(a===undefined){a=true}this.is[b]=a;this.is[b.toLowerCase()]=a;if(c){Ext["is"+b]=a}return this},getStyleDashPrefix:function(){return this.styleDashPrefixes[this.engineName]},getStylePrefix:function(){return this.stylePrefixes[this.engineName]},getVendorProperyName:function(a){var b=this.propertyPrefixes[this.engineName];if(b.length>0){return b+Ext.String.capitalize(a)}return a},getPreferredTranslationMethod:function(a){if(typeof a==="object"&&"translationMethod" in a&&a.translationMethod!=="auto"){return a.translationMethod}else{return"csstransform"}}};(function(a){Ext.browser=new Ext.env.Browser(a,true);Ext.userAgent=a.toLowerCase();Ext.SSL_SECURE_URL=Ext.isSecure&&Ext.isIE?"javascript:''":"about:blank"}(Ext.global.navigator.userAgent));Ext.env.OS=function(j,r,m){var h=this,g=Ext.Boot.osNames,a=Ext.Boot.osPrefixes,p,f="",c=h.is,s,d,b,q,o;m=m||Ext.browser;for(s in a){if(a.hasOwnProperty(s)){d=a[s];b=j.match(new RegExp("(?:"+d+")([^\\s;]+)"));if(b){p=g[s];o=b[1];if(o&&o==="HTC_"){f=new Ext.Version("2.3")}else{if(o&&o==="Silk/"){f=new Ext.Version("2.3")}else{f=new Ext.Version(b[b.length-1])}}break}}}if(!p){p=g[(j.toLowerCase().match(/mac|win|linux/)||["other"])[0]];f=new Ext.Version("")}this.name=p;this.version=f;if(r){this.setFlag(r.replace(/ simulator$/i,""))}this.setFlag(p);if(f){this.setFlag(p+(f.getMajor()||""));this.setFlag(p+f.getShortVersion())}for(s in g){if(g.hasOwnProperty(s)){q=g[s];if(!c.hasOwnProperty(p)){this.setFlag(q,(p===q))}}}if(this.name==="iOS"&&window.screen.height===568){this.setFlag("iPhone5")}if(m.is.Safari||m.is.Silk){if(this.is.Android2||this.is.Android3||m.version.shortVersion===501){m.setFlag("AndroidStock")}if(this.is.Android4){m.setFlag("AndroidStock");m.setFlag("AndroidStock4")}}};Ext.env.OS.prototype={constructor:Ext.env.OS,is:function(a){return !!this[a]},name:null,version:null,setFlag:function(a,b){if(b===undefined){b=true}if(this.flags){this.flags[a]=b}this.is[a]=b;this.is[a.toLowerCase()]=b;return this}};(function(){var f=Ext.global.navigator,b=f.userAgent,a=Ext.env.OS,m=(Ext.is||(Ext.is={})),c,j,g;a.prototype.flags=m;Ext.os=c=new a(b,f.platform);j=c.name;Ext["is"+j]=true;Ext.isMac=m.Mac=m.MacOS;var d=window.location.search.match(/deviceType=(Tablet|Phone)/),h=window.deviceType;if(d&&d[1]){g=d[1]}else{if(h==="iPhone"){g="Phone"}else{if(h==="iPad"){g="Tablet"}else{if(!c.is.Android&&!c.is.iOS&&!c.is.WindowsPhone&&/Windows|Linux|MacOS/.test(j)){g="Desktop";Ext.browser.is.WebView=!!Ext.browser.is.Ripple}else{if(c.is.iPad||c.is.RIMTablet||c.is.Android3||Ext.browser.is.Silk||(c.is.Android&&b.search(/mobile/i)===-1)){g="Tablet"}else{g="Phone"}}}}}c.setFlag(g,true);c.deviceType=g;delete a.prototype.flags}());Ext.feature={has:function(a){return !!this.has[a]},testElements:{},getTestElement:function(a,b){if(a===undefined){a="div"}else{if(typeof a!=="string"){return a}}if(b){return document.createElement(a)}if(!this.testElements[a]){this.testElements[a]=document.createElement(a)}return this.testElements[a]},isStyleSupported:function(a,d){var b=this.getTestElement(d).style,c=Ext.String.capitalize(a);if(typeof b[a]!=="undefined"||typeof b[Ext.browser.getStylePrefix(a)+c]!=="undefined"){return true}return false},isStyleSupportedWithoutPrefix:function(c,b){var a=this.getTestElement(b).style;if(typeof a[c]!=="undefined"){return true}return false},isEventSupported:function(f,c){if(c===undefined){c=window}var b=this.getTestElement(c),d="on"+f.toLowerCase(),a=(d in b);if(!a){if(b.setAttribute&&b.removeAttribute){b.setAttribute(d,"");a=typeof b[d]==="function";if(typeof b[d]!=="undefined"){b[d]=undefined}b.removeAttribute(d)}}return a},getStyle:function(a,d){var c=a.ownerDocument.defaultView,b=(c?c.getComputedStyle(a,null):a.currentStyle);return(b||a.style)[d]},getSupportedPropertyName:function(c,b){var a=Ext.browser.getVendorProperyName(b);if(a in c){return a}else{if(b in c){return b}}return null},detect:function(g){var h=this,p=document,c=h.toRun||h.tests,b=c.length,r=p.createElement("div"),s=[],m=Ext.supports,q=h.has,o,f,d,a,j;r.innerHTML='<div style="height:30px;width:50px;"><div style="height:20px;width:20px;"></div></div><div style="width: 200px; height: 200px; position: relative; padding: 5px;"><div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></div></div><div style="position: absolute; left: 10%; top: 10%;"></div><div style="float:left; background-color:transparent;"></div>';if(g){p.body.appendChild(r)}a=h.preDetected[Ext.browser.identity]||[];while(b--){d=c[b];j=a[b];o=d.name;f=d.names;if(j===undefined){if(!g&&d.ready){s.push(d);continue}j=d.fn.call(h,p,r)}if(o){m[o]=q[o]=j}else{if(f){while(f.length){o=f.pop();m[o]=q[o]=j}}}}if(g){p.body.removeChild(r)}h.toRun=s},report:function(){var c=[],b=this.tests.length,a;for(a=0;a<b;++a){c.push(this.has[this.tests[a].name]?1:0)}Ext.log(Ext.browser.identity+": ["+c.join(",")+"]")},preDetected:{},tests:[{name:"CloneNodeCopiesExpando",fn:function(){var a=document.createElement("div");a.expandoProp={};return a.cloneNode().expandoProp===a.expandoProp}},{name:"CSSPointerEvents",fn:function(a){return"pointerEvents" in a.documentElement.style}},{name:"CSS3BoxShadow",fn:function(a){return"boxShadow" in a.documentElement.style||"WebkitBoxShadow" in a.documentElement.style||"MozBoxShadow" in a.documentElement.style}},{name:"CSS3NegationSelector",fn:function(b){try{b.querySelectorAll("foo:not(bar)")}catch(a){return false}return true}},{name:"ClassList",fn:function(a){return !!a.documentElement.classList}},{name:"Canvas",fn:function(){var a=this.getTestElement("canvas");return !!(a&&a.getContext&&a.getContext("2d"))}},{name:"Svg",fn:function(a){return !!(a.createElementNS&&!!a.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)}},{name:"Vml",fn:function(){var b=this.getTestElement(),a=false;b.innerHTML="<!--[if vml]><br><![endif]-->";a=(b.childNodes.length===1);b.innerHTML="";return a}},{name:"touchScroll",fn:function(){var a=0;if(Ext.os.is.Desktop&&(navigator.maxTouchPoints||navigator.msMaxTouchPoints)){a=1}else{if(Ext.supports.Touch){a=2}}return a}},{name:"Touch",fn:function(){var a=navigator.msMaxTouchPoints||navigator.maxTouchPoints;if(Ext.browser.is.Chrome&&Ext.browser.version.isLessThanOrEqual(39)){return(Ext.supports.TouchEvents&&a!==1)||a>1}else{return Ext.supports.TouchEvents||a>0}}},{name:"TouchEvents",fn:function(){return this.isEventSupported("touchend")}},{name:"PointerEvents",fn:function(){return navigator.pointerEnabled}},{name:"MSPointerEvents",fn:function(){return navigator.msPointerEnabled}},{name:"Orientation",fn:function(){return("orientation" in window)&&this.isEventSupported("orientationchange")}},{name:"OrientationChange",fn:function(){return this.isEventSupported("orientationchange")}},{name:"DeviceMotion",fn:function(){return this.isEventSupported("devicemotion")}},{names:["Geolocation","GeoLocation"],fn:function(){return"geolocation" in window.navigator}},{name:"SqlDatabase",fn:function(){return"openDatabase" in window}},{name:"WebSockets",fn:function(){return"WebSocket" in window}},{name:"Range",fn:function(){return !!document.createRange}},{name:"CreateContextualFragment",fn:function(){var a=!!document.createRange?document.createRange():false;return a&&!!a.createContextualFragment}},{name:"History",fn:function(){return("history" in window&&"pushState" in window.history)}},{name:"Css3dTransforms",fn:function(){return this.has("CssTransforms")&&this.isStyleSupported("perspective")}},{name:"CssTransforms",fn:function(){return this.isStyleSupported("transform")}},{name:"CssTransformNoPrefix",fn:function(){return this.isStyleSupportedWithoutPrefix("transform")}},{name:"CssAnimations",fn:function(){return this.isStyleSupported("animationName")}},{names:["CssTransitions","Transitions"],fn:function(){return this.isStyleSupported("transitionProperty")}},{names:["Audio","AudioTag"],fn:function(){return !!this.getTestElement("audio").canPlayType}},{name:"Video",fn:function(){return !!this.getTestElement("video").canPlayType}},{name:"LocalStorage",fn:function(){try{if("localStorage" in window&&window.localStorage!==null){localStorage.setItem("sencha-localstorage-test","test success");localStorage.removeItem("sencha-localstorage-test");return true}}catch(a){}return false}},{name:"XHR2",fn:function(){return window.ProgressEvent&&window.FormData&&window.XMLHttpRequest&&("withCredentials" in new XMLHttpRequest())}},{name:"XHRUploadProgress",fn:function(){if(window.XMLHttpRequest&&!Ext.browser.is.AndroidStock){var a=new XMLHttpRequest();return a&&("upload" in a)&&("onprogress" in a.upload)}return false}},{name:"NumericInputPlaceHolder",fn:function(){return !(Ext.browser.is.AndroidStock4&&Ext.os.version.getMinor()<2)}},{name:"matchesSelector",fn:function(){var d=document.documentElement,b="matches",a="webkitMatchesSelector",c="msMatchesSelector",f="mozMatchesSelector";return d[b]?b:d[a]?a:d[c]?c:d[f]?f:null}},{name:"RightMargin",ready:true,fn:function(c,a){var b=c.defaultView;return !(b&&b.getComputedStyle(a.firstChild.firstChild,null).marginRight!=="0px")}},{name:"DisplayChangeInputSelectionBug",fn:function(){var a=Ext.webKitVersion;return 0<a&&a<533}},{name:"DisplayChangeTextAreaSelectionBug",fn:function(){var a=Ext.webKitVersion;return 0<a&&a<534.24}},{name:"TransparentColor",ready:true,fn:function(c,a,b){b=c.defaultView;return !(b&&b.getComputedStyle(a.lastChild,null).backgroundColor!=="transparent")}},{name:"ComputedStyle",ready:true,fn:function(c,a,b){b=c.defaultView;return b&&b.getComputedStyle}},{name:"Float",fn:function(a){return"cssFloat" in a.documentElement.style}},{name:"CSS3BorderRadius",ready:true,fn:function(b){var d=["borderRadius","BorderRadius","MozBorderRadius","WebkitBorderRadius","OBorderRadius","KhtmlBorderRadius"],a=false,c;for(c=0;c<d.length;c++){if(b.documentElement.style[d[c]]!==undefined){a=true}}return a&&!Ext.isIE9}},{name:"CSS3LinearGradient",fn:function(a,f){var c="background-image:",b="-webkit-gradient(linear, left top, right bottom, from(black), to(white))",m="linear-gradient(left top, black, white)",j="-moz-"+m,g="-ms-"+m,h="-o-"+m,d=[c+b,c+m,c+j,c+g,c+h];f.style.cssText=d.join(";");return((""+f.style.backgroundImage).indexOf("gradient")!==-1)&&!Ext.isIE9}},{name:"MouseEnterLeave",fn:function(a){return("onmouseenter" in a.documentElement&&"onmouseleave" in a.documentElement)}},{name:"MouseWheel",fn:function(a){return("onmousewheel" in a.documentElement)}},{name:"Opacity",fn:function(a,b){if(Ext.isIE8){return false}b.firstChild.style.cssText="opacity:0.73";return b.firstChild.style.opacity=="0.73"}},{name:"Placeholder",fn:function(a){return"placeholder" in a.createElement("input")}},{name:"Direct2DBug",fn:function(a){return Ext.isString(a.documentElement.style.msTransformOrigin)&&Ext.isIE9m}},{name:"BoundingClientRect",fn:function(a){return"getBoundingClientRect" in a.documentElement}},{name:"RotatedBoundingClientRect",ready:true,fn:function(b){var c=b.body,d=false,a=b.createElement("div"),f=a.style;if(a.getBoundingClientRect){f.position="absolute";f.top="0";f.WebkitTransform=f.MozTransform=f.msTransform=f.OTransform=f.transform="rotate(90deg)";f.width="100px";f.height="30px";c.appendChild(a);d=a.getBoundingClientRect().height!==100;c.removeChild(a)}return d}},{name:"ChildContentClearedWhenSettingInnerHTML",ready:true,fn:function(){var a=this.getTestElement(),b;a.innerHTML="<div>a</div>";b=a.firstChild;a.innerHTML="<div>b</div>";return b.innerHTML!=="a"}},{name:"IncludePaddingInWidthCalculation",ready:true,fn:function(a,b){return b.childNodes[1].firstChild.offsetWidth===210}},{name:"IncludePaddingInHeightCalculation",ready:true,fn:function(a,b){return b.childNodes[1].firstChild.offsetHeight===210}},{name:"TextAreaMaxLength",fn:function(a){return("maxlength" in a.createElement("textarea"))}},{name:"GetPositionPercentage",ready:true,fn:function(a,b){return Ext.feature.getStyle(b.childNodes[2],"left")==="10%"}},{name:"PercentageHeightOverflowBug",ready:true,fn:function(b){var c=false,a,d;if(Ext.getScrollbarSize().height){d=this.getTestElement();a=d.style;a.height="50px";a.width="50px";a.overflow="auto";a.position="absolute";d.innerHTML=['<div style="display:table;height:100%;">','<div style="width:51px;"></div>',"</div>"].join("");b.body.appendChild(d);if(d.firstChild.offsetHeight===50){c=true}b.body.removeChild(d)}return c}},{name:"xOriginBug",ready:true,fn:function(a,b){b.innerHTML='<div id="b1" style="height:100px;width:100px;direction:rtl;position:relative;overflow:scroll"><div id="b2" style="position:relative;width:100%;height:20px;"></div><div id="b3" style="position:absolute;width:20px;height:20px;top:0px;right:0px"></div></div>';var f=document.getElementById("b1").getBoundingClientRect(),d=document.getElementById("b2").getBoundingClientRect(),c=document.getElementById("b3").getBoundingClientRect();return(d.left!==f.left&&c.right!==f.right)}},{name:"ScrollWidthInlinePaddingBug",ready:true,fn:function(b){var c=false,a,d;d=b.createElement("div");a=d.style;a.height="50px";a.width="50px";a.padding="10px";a.overflow="hidden";a.position="absolute";d.innerHTML='<span style="display:inline-block;zoom:1;height:60px;width:60px;"></span>';b.body.appendChild(d);if(d.scrollWidth===70){c=true}b.body.removeChild(d);return c}},{name:"rtlVertScrollbarOnRight",ready:true,fn:function(a,b){b.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:scroll"><div style="width:20px;height:200px;"></div></div>';var d=b.firstChild,c=d.firstChild;return(c.offsetLeft+c.offsetWidth!==d.offsetLeft+d.offsetWidth)}},{name:"rtlVertScrollbarOverflowBug",ready:true,fn:function(c,a){a.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:auto"><div style="width:95px;height:200px;"></div></div>';var b=a.firstChild;return b.clientHeight===b.offsetHeight}},{identity:"defineProperty",fn:function(){if(Ext.isIE8m){Ext.Object.defineProperty=Ext.emptyFn;return false}return true}},{identify:"nativeXhr",fn:function(){if(typeof XMLHttpRequest!=="undefined"){return true}XMLHttpRequest=function(){try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(a){return null}};return false}},{name:"SpecialKeyDownRepeat",fn:function(){return Ext.isWebKit?parseInt(navigator.userAgent.match(/AppleWebKit\/(\d+)/)[1],10)>=525:!((Ext.isGecko&&!Ext.isWindows)||(Ext.isOpera&&Ext.operaVersion<12))}},{name:"EmulatedMouseOver",fn:function(){return Ext.os.is.iOS}},{name:"Hashchange",fn:function(){var a=document.documentMode;return"onhashchange" in window&&(a===undefined||a>7)}},{name:"FixedTableWidthBug",ready:true,fn:function(){if(Ext.isIE8){return false}var c=document.createElement("div"),b=document.createElement("div"),a;c.setAttribute("style","display:table;table-layout:fixed;");b.setAttribute("style","display:table-cell;min-width:50px;");c.appendChild(b);document.body.appendChild(c);c.offsetWidth;c.style.width="25px";a=c.offsetWidth;document.body.removeChild(c);return a===50}},{name:"FocusinFocusoutEvents",fn:function(){return !Ext.isGecko}},{name:"AsyncFocusEvents",fn:function(){return Ext.asyncFocus=!!Ext.isIE}},{name:"accessibility",ready:true,fn:function(g){var j=g.body,h,c,d,a,b;function f(m){var o=[],q=0,s,p;if(m.indexOf("rgb(")!==-1){o=m.replace("rgb(","").replace(")","").split(", ")}else{if(m.indexOf("#")!==-1){s=m.length===7?/^#(\S\S)(\S\S)(\S\S)$/:/^#(\S)(\S)(\S)$/;p=m.match(s);if(p){o=["0x"+p[1],"0x"+p[2],"0x"+p[3]]}}}for(var r=0;r<o.length;r++){q+=parseInt(o[r])}return q}h=g.createElement("div");c=g.createElement("img");d=h.style;Ext.apply(d,{width:"2px",position:"absolute",clip:"rect(1px,1px,1px,1px)",borderWidth:"1px",borderStyle:"solid",borderTopTolor:"#f00",borderRightColor:"#ff0",backgroundColor:"#fff",backgroundImage:"url("+Ext.BLANK_IMAGE_URL+")"});c.alt="";c.src=Ext.BLANK_IMAGE_URL;h.appendChild(c);j.appendChild(h);d=h.currentStyle||h.style;b=d.backgroundImage;a={Images:c.offsetWidth===1&&c.readyState!=="uninitialized",BackgroundImages:!(b!==null&&(b==="none"||b==="url(invalid-url:)")),BorderColors:d.borderTopColor!==d.borderRightColor,LightOnDark:f(d.color)-f(d.backgroundColor)>0};Ext.supports.HighContrastMode=!a.BackgroundImages;j.removeChild(h);h=c=null;return a}},0]};Ext.feature.tests.pop();Ext.supports={};Ext.feature.detect();Ext.env.Ready={blocks:(location.search||"").indexOf("ext-pauseReadyFire")>0?1:0,bound:0,delay:1,firing:false,generation:0,listeners:[],nextId:0,sortGeneration:0,state:0,timer:null,bind:function(){var a=Ext.env.Ready,b=document;if(!a.bound){if(b.readyState==="complete"){a.onReadyEvent({type:b.readyState||"body"})}else{a.bound=1;if(Ext.browser.is.PhoneGap&&!Ext.os.is.Desktop){a.bound=2;b.addEventListener("deviceready",a.onReadyEvent,false)}b.addEventListener("DOMContentLoaded",a.onReadyEvent,false);window.addEventListener("load",a.onReadyEvent,false)}}},block:function(){++this.blocks;Ext.isReady=false},fireReady:function(){var a=Ext.env.Ready;if(!a.state){Ext._readyTime=Ext.ticks();Ext.isDomReady=true;a.state=1;Ext.feature.detect(true);if(!a.delay){a.handleReady()}else{if(navigator.standalone){a.timer=Ext.defer(function(){a.timer=null;a.handleReadySoon()},1)}else{a.handleReadySoon()}}}},handleReady:function(){var a=this;if(a.state===1){a.state=2;Ext._beforeReadyTime=Ext.ticks();a.invokeAll();Ext._afterReadyTime=Ext.ticks()}},handleReadySoon:function(a){var b=this;if(!b.timer){b.timer=Ext.defer(function(){b.timer=null;b.handleReady()},a||b.delay)}},invoke:function(b){var a=b.delay;if(a){Ext.defer(b.fn,a,b.scope)}else{if(Ext.elevateFunction){Ext.elevateFunction(b.fn,b.scope)}else{b.fn.call(b.scope)}}},invokeAll:function(){if(Ext.elevateFunction){Ext.elevateFunction(this.doInvokeAll,this)}else{this.doInvokeAll()}},doInvokeAll:function(){var c=this,b=c.listeners,a;if(!c.blocks){Ext.isReady=true}c.firing=true;while(b.length){if(c.sortGeneration!==c.generation){c.sortGeneration=c.generation;b.sort(c.sortFn)}a=b.pop();if(c.blocks&&!a.dom){b.push(a);break}c.invoke(a)}c.firing=false},makeListener:function(b,a,d){var c={fn:b,id:++this.nextId,scope:a,dom:false,priority:0};if(d){Ext.apply(c,d)}c.phase=c.dom?0:1;return c},on:function(f,d,c){var a=Ext.env.Ready,b=a.makeListener(f,d,c);if(a.state===2&&!a.firing&&(b.dom||!a.blocks)){a.invoke(b)}else{a.listeners.push(b);++a.generation;if(!a.bound){a.bind()}}},onReadyEvent:function(b){var a=Ext.env.Ready;if(Ext.elevateFunction){Ext.elevateFunction(a.doReadyEvent,a,arguments)}else{a.doReadyEvent(b)}},doReadyEvent:function(b){var a=this;if(a.bound>0){a.unbind();a.bound=-1}if(!a.state){a.fireReady()}},sortFn:function(d,c){return -((d.phase-c.phase)||(c.priority-d.priority)||(d.id-c.id))},unblock:function(){var a=this;if(a.blocks){if(!--a.blocks){if(a.state===2&&!a.firing){a.invokeAll()}}}},unbind:function(){var a=this,b=document;if(a.bound>1){b.removeEventListener("deviceready",a.onReadyEvent,false)}b.removeEventListener("DOMContentLoaded",a.onReadyEvent,false);window.removeEventListener("load",a.onReadyEvent,false)}};(function(){var a=Ext.env.Ready;if(Ext.isIE9m){Ext.apply(a,{scrollTimer:null,readyStatesRe:/complete/i,pollScroll:function(){var b=true;try{document.documentElement.doScroll("left")}catch(c){b=false}if(b&&document.body){a.onReadyEvent({type:"doScroll"})}else{a.scrollTimer=Ext.defer(a.pollScroll,20)}return b},bind:function(){if(a.bound){return}var d=document,b;try{b=window.frameElement===undefined}catch(c){}if(!b||!d.documentElement.doScroll){a.pollScroll=Ext.emptyFn}else{if(a.pollScroll()){return}}if(d.readyState==="complete"){a.onReadyEvent({type:"already "+(d.readyState||"body")})}else{d.attachEvent("onreadystatechange",a.onReadyStateChange);window.attachEvent("onload",a.onReadyEvent);a.bound=1}},unbind:function(){document.detachEvent("onreadystatechange",a.onReadyStateChange);window.detachEvent("onload",a.onReadyEvent);if(Ext.isNumber(a.scrollTimer)){clearTimeout(a.scrollTimer);a.scrollTimer=null}},onReadyStateChange:function(){var b=document.readyState;if(a.readyStatesRe.test(b)){a.onReadyEvent({type:b})}}})}Ext.onDocumentReady=function(f,d,b){var c={dom:true};if(b){Ext.apply(c,b)}a.on(f,d,c)};Ext.onReady=function(d,c,b){a.on(d,c,b)};Ext.onInternalReady=function(d,c,b){a.on(d,c,Ext.apply({priority:1000},b))};a.bind()}());Ext.Loader=(new function(){var s=this,p=Ext.ClassManager,c=Ext.Boot,t=Ext.Class,f=Ext.env.Ready,d=Ext.Function.alias,b=["extend","mixins","requires"],r={},g=[],q=[],a=[],h={},o={},m={enabled:true,scriptChainDelay:false,disableCaching:true,disableCachingParam:"_dc",paths:p.paths,preserveScripts:true,scriptCharset:undefined},j={disableCaching:true,disableCachingParam:true,preserveScripts:true,scriptChainDelay:"loadDelay"};Ext.apply(s,{isInHistory:r,isLoading:false,history:g,config:m,readyListeners:q,optionalRequires:a,requiresMap:h,hasFileLoadError:false,scriptsLoading:0,syncModeEnabled:false,missingQueue:o,init:function(){var C=document.getElementsByTagName("script"),w=C[C.length-1].src,v=w.substring(0,w.lastIndexOf("/")+1),F=Ext._classPathMetadata,u=Ext.Microloader,z=Ext.manifest,A,D,E,B,y;if(!p.getPath("Ext")){p.setPath("Ext",v+"src")}if(F){Ext._classPathMetadata=null;s.addClassPathMappings(F)}if(z){A=z.loadOrder;D=Ext.Boot.baseUrl;if(A&&z.bootRelative){for(E=A.length,B=0;B<E;B++){y=A[B];y.path=D+y.path}}}if(u){f.block();u.onMicroloaderReady(function(){f.unblock()})}},setConfig:Ext.Function.flexSetter(function(w,u){if(w==="paths"){s.setPath(u)}else{m[w]=u;var v=j[w];if(v){c.setConfig((v===true)?w:v,u)}}return s}),getConfig:function(u){return u?m[u]:m},setPath:function(){p.setPath.apply(p,arguments);return s},addClassPathMappings:function(u){p.setPath(u);return s},addBaseUrlClassPathMappings:function(u){for(var v in u){u[v]=c.baseUrl+u[v]}Ext.Loader.addClassPathMappings(u)},getPath:function(u){return p.getPath(u)},require:function(v,u,z,y){if(y){return s.exclude(y).require(v,u,z)}var w=p.getNamesByExpression(v);return s.load(w,u,z)},syncRequire:function(){var v=s.syncModeEnabled;s.syncModeEnabled=true;var u=s.require.apply(s,arguments);s.syncModeEnabled=v;return u},exclude:function(v){var u=p.select({require:function(y,w,z){return s.load(y,w,z)},syncRequire:function(w,z,y){var B=s.syncModeEnabled;s.syncModeEnabled=true;var A=s.load(w,z,y);s.syncModeEnabled=B;return A}});u.exclude(v);return u},load:function(v,E,u){if(E){if(E.length){E=s.makeLoadCallback(v,E)}E=E.bind(u||Ext.global)}var z=[],y=v.length,C,B,A,D=[],w=p.classState;for(B=0;B<y;++B){C=p.resolveName(v[B]);if(!p.isCreated(C)){z.push(C);o[C]=s.getPath(C);if(!w[C]){D.push(o[C])}}}A=z.length;if(A){s.missingCount+=A;p.onCreated(function(){if(E){Ext.callback(E,u,arguments)}s.checkReady()},s,z);if(!m.enabled){Ext.raise("Ext.Loader is not enabled, so dependencies cannot be resolved dynamically. Missing required class"+((z.length>1)?"es":"")+": "+z.join(", "))}if(D.length){s.loadScripts({url:D,_classNames:z})}else{s.checkReady()}}else{if(E){E.call(u)}s.checkReady()}if(s.syncModeEnabled){if(y===1){return p.get(v[0])}}return s},makeLoadCallback:function(u,v){return function(){var w=[],y=u.length;while(y-->0){w[y]=p.get(u[y])}return v.apply(this,w)}},onLoadFailure:function(){var u=this,v=u.onError;s.hasFileLoadError=true;--s.scriptsLoading;if(v){v.call(u.userScope,u)}s.checkReady()},onLoadSuccess:function(){var u=this,v=u.onLoad;--s.scriptsLoading;if(v){v.call(u.userScope,u)}s.checkReady()},onReady:function(v,u,y,z){if(y){f.on(v,u,z)}else{var w=f.makeListener(v,u,z);if(s.isLoading){q.push(w)}else{f.invoke(w)}}},addUsedClasses:function(v){var y,u,w;if(v){v=(typeof v==="string")?[v]:v;for(u=0,w=v.length;u<w;u++){y=v[u];if(typeof y==="string"&&!Ext.Array.contains(a,y)){a.push(y)}}}return s},triggerReady:function(){var u,v=a;if(s.isLoading&&v.length){a=[];s.require(v)}else{s.isLoading=false;q.sort(f.sortFn);while(q.length&&!s.isLoading){u=q.pop();f.invoke(u)}f.unblock()}},historyPush:function(u){if(u&&!r[u]&&!p.overrideMap[u]){r[u]=true;g.push(u)}return s},loadScripts:function(y){var w=Ext.manifest,z=w&&w.loadOrder,u=w&&w.loadOrderMap,v;++s.scriptsLoading;if(z&&!u){w.loadOrderMap=u=c.createLoadOrderMap(z)}s.checkReady();v=Ext.apply({loadOrder:z,loadOrderMap:u,charset:m.scriptCharset,success:s.onLoadSuccess,failure:s.onLoadFailure,sync:s.syncModeEnabled,_classNames:[]},y);v.userScope=v.scope;v.scope=v;c.load(v)},loadScriptsSync:function(v){var u=s.syncModeEnabled;s.syncModeEnabled=true;s.loadScripts({url:v});s.syncModeEnabled=u},loadScriptsSyncBasePrefix:function(v){var u=s.syncModeEnabled;s.syncModeEnabled=true;s.loadScripts({url:v,prependBaseUrl:true});s.syncModeEnabled=u},loadScript:function(D){var v=typeof D==="string",z=D instanceof Array,C=!z&&!v,u=C?D.url:D,y=C&&D.onError,A=C&&D.onLoad,B=C&&D.scope,w={url:u,scope:B,onLoad:A,onError:y,_classNames:[]};s.loadScripts(w)},flushMissingQueue:function(){var y,w,v=0,u=0;for(y in o){v++;w=o[y];if(p.isCreated(y)){delete o[y]}else{if(p.existCache[y]===2){delete o[y]}else{++u}}}this.missingCount=u},checkReady:function(){var v=s.isLoading,u;s.flushMissingQueue();u=s.missingCount+s.scriptsLoading;if(u&&!v){f.block();s.isLoading=!!u}else{if(!u&&v){s.triggerReady()}}}});Ext.require=d(s,"require");Ext.syncRequire=d(s,"syncRequire");Ext.exclude=d(s,"exclude");t.registerPreprocessor("loader",function(B,D,A,y){var J=this,I=[],K,G=p.getName(B),C,z,H,F,v,E,w,u;for(C=0,H=b.length;C<H;C++){E=b[C];if(D.hasOwnProperty(E)){w=D[E];if(typeof w==="string"){I.push(w)}else{if(w instanceof Array){for(z=0,F=w.length;z<F;z++){v=w[z];if(typeof v==="string"){I.push(v)}}}else{if(typeof w!=="function"){for(z in w){if(w.hasOwnProperty(z)){v=w[z];if(typeof v==="string"){I.push(v)}}}}}}}}if(I.length===0){return}if(G){h[G]=I}(G?s.exclude(G):s).require(I,function(){for(C=0,H=b.length;C<H;C++){E=b[C];if(D.hasOwnProperty(E)){w=D[E];if(typeof w==="string"){D[E]=p.get(w)}else{if(w instanceof Array){for(z=0,F=w.length;z<F;z++){v=w[z];if(typeof v==="string"){D[E][z]=p.get(v)}}}else{if(typeof w!=="function"){for(var L in w){if(w.hasOwnProperty(L)){v=w[L];if(typeof v==="string"){D[E][L]=p.get(v)}}}}}}}}y.call(J,B,D,A)});return false},true,"after","className");p.registerPostprocessor("uses",function(z,y,E){var w=Ext.manifest,A=w&&w.loadOrder,B=w&&w.classes,C,G,v,F,D,u;if(A){G=B[z];if(G&&!isNaN(D=G.idx)){v=A[D];C=v.uses;u={};for(F=C.length,D=0;D<F;D++){u[C[D]]=true}C=Ext.Boot.getPathsFromIndexes(u,A,true);if(C.length>0){s.loadScripts({url:C,sequential:true})}}}if(E.uses){C=E.uses;s.addUsedClasses(C)}});p.onCreated(s.historyPush);s.init()}());Ext._endTime=Ext.ticks();if(Ext._beforereadyhandler){Ext._beforereadyhandler()}(Ext.cmd.derive("Ext.Mixin",Ext.Base,function(a){return{statics:{addHook:function(b,g,d,f){var j=Ext.isFunction(b),h=function(){var m=arguments,o=j?b:f[b],p=this.callParent(m);o.apply(this,m);return p},c=g.hasOwnProperty(d)&&g[d];if(j){b.$previous=Ext.emptyFn}h.$name=d;h.$owner=g.self;if(c){h.$previous=c.$previous;c.$previous=h}else{g[d]=h}}},onClassExtended:function(g,h){var m=h.mixinConfig,b=h.xhooks,p=g.superclass,j=h.onClassMixedIn,d,o,c,f;if(b){delete h.xhooks;(m||(h.mixinConfig=m={})).on=b}if(m){d=p.mixinConfig;if(d){h.mixinConfig=m=Ext.merge({},d,m)}h.mixinId=m.id;o=m.before;c=m.after;b=m.on;f=m.extended}if(o||c||b||f){h.onClassMixedIn=function(t){var q=this.prototype,s=t.prototype,r;if(o){Ext.Object.each(o,function(u,v){t.addMember(u,function(){if(q[v].apply(this,arguments)!==false){return this.callParent(arguments)}})})}if(c){Ext.Object.each(c,function(u,v){t.addMember(u,function(){var w=this.callParent(arguments);q[v].apply(this,arguments);return w})})}if(b){for(r in b){a.addHook(b[r],s,r,q)}}if(f){t.onExtended(function(){var u=Ext.Array.slice(arguments,0);u.unshift(t);return f.apply(this,u)},this)}if(j){j.apply(this,arguments)}}}}}},0,0,0,0,0,0,[Ext,"Mixin"],0));Ext.util=Ext.util||{};Ext.util.DelayedTask=function(d,c,a,h,g){var f=this,j,b=function(){var m=Ext.GlobalEvents;clearInterval(f.id);f.id=null;d.apply(c,a||[]);if(g!==false&&m.hasListeners.idle){m.fireEvent("idle")}};h=typeof h==="boolean"?h:true;f.id=null;f.delay=function(p,m,q,o){if(h){f.cancel()}if(typeof p==="number"){j=p}d=m||d;c=q||c;a=o||a;if(!f.id){f.id=Ext.interval(b,j)}};f.cancel=function(){if(f.id){clearInterval(f.id);f.id=null}}};(Ext.cmd.derive("Ext.util.Event",Ext.Base,function(){var b=Array.prototype.slice,c=Ext.Array.insert,a=Ext.Array.toArray,d={};return{isEvent:true,suspended:0,noOptions:{},constructor:function(g,f){this.name=f;this.observable=g;this.listeners=[]},addListener:function(r,f,g,B,w){var s=this,o=false,v=s.observable,m=s.name,y,j,q,A,t,z,h,p,C,u;if(s.findListener(r,f)===-1){j=s.createListener(r,f,g,B,w);if(s.firing){s.listeners=s.listeners.slice(0)}y=s.listeners;p=h=y.length;q=g&&g.priority;t=s._highestNegativePriorityIndex;z=t!==undefined;if(q){A=(q<0);if(!A||z){for(C=(A?t:0);C<h;C++){u=y[C].o?y[C].o.priority||0:0;if(u<q){p=C;break}}}else{s._highestNegativePriorityIndex=p}}else{if(z){p=t}}if(!A&&p<=t){s._highestNegativePriorityIndex++}if(p===h){y[h]=j}else{c(y,p,[j])}if(v.isElement){v._getPublisher(m).subscribe(v,m,g.delegated!==false,g.capture)}o=true}return o},createListener:function(f,p,q,t,h){var r=this,s=Ext._namedScopes[p],u={fn:f,scope:p,ev:r,caller:t,manager:h,namedScope:s,defaultScope:s?(p||r.observable):undefined,lateBound:typeof f==="string"},g=f,m=false,j;if(q){u.o=q;if(q.single){g=r.createSingle(g,u,q,p);m=true}if(q.target){g=r.createTargeted(g,u,q,p,m);m=true}if(q.delay){g=r.createDelayed(g,u,q,p,m);m=true}if(q.buffer){g=r.createBuffered(g,u,q,p,m);m=true}if(r.observable.isElement){j=q.type;if(j){u.type=j}}}u.fireFn=g;u.wrapped=m;return u},findListener:function(f,m){var j=this.listeners,h=j.length,g;while(h--){g=j[h];if(g){if(g.fn===f&&g.scope==m){return h}}}return -1},removeListener:function(t,v,s){var r=this,q=false,f=r.observable,p=r.name,h,y,w,o,j,u,g,m;s=s||r.findListener(t,v);if(s!=-1){h=r.listeners[s];w=h.o;y=r._highestNegativePriorityIndex;if(r.firing){r.listeners=r.listeners.slice(0)}if(h.task){h.task.cancel();delete h.task}o=h.tasks&&h.tasks.length;if(o){while(o--){h.tasks[o].cancel()}delete h.tasks}r.listeners.splice(s,1);j=h.manager;if(j){u=j.managedListeners;if(u){for(m=u.length;m--;){g=u[m];if(g.item===r.observable&&g.ename===p&&g.fn===t&&g.scope===v){u.splice(m,1)}}}}if(y){if(s<y){r._highestNegativePriorityIndex--}else{if(s===y&&s===r.listeners.length){delete r._highestNegativePriorityIndex}}}if(f.isElement){f._getPublisher(p).unsubscribe(f,p,w.delegated!==false,w.capture)}q=true}return q},clearListeners:function(){var f=this.listeners,h=f.length,g;while(h--){g=f[h];this.removeListener(g.fn,g.scope)}},suspend:function(){++this.suspended},resume:function(){if(this.suspended){--this.suspended}},isSuspended:function(){return this.suspended>0},fireDelegated:function(g,f){this.firingObservable=g;return this.fire.apply(this,f)},fire:function(){var y=this,A=y.listeners,o=A.length,t=y.observable,C=t.isElement,v=t.isComponent,r=y.firingObservable,g,p,w,E,f,j,F,D,B,h,s,m,u,z,q;if(!y.suspended&&o>0){y.firing=true;f=arguments.length?b.call(arguments,0):[];F=f.length;if(C){u=f[0]}for(E=0;E<o;E++){j=A[E];g=j.o;if(C){if(B){u.setCurrentTarget(B)}h=j.type;if(h){s=u;u=f[0]=s.chain({type:h})}Ext.EventObject=u}m=f;if(g){p=g.delegate;if(p){if(C){D=u.getTarget("#"+u.currentTarget.id+" "+p);if(D){f[1]=D;B=u.currentTarget;u.setCurrentTarget(D)}else{continue}}else{if(v&&!r.is("#"+t.id+" "+g.delegate)){continue}}}if(C){if(g.preventDefault){u.preventDefault()}if(g.stopPropagation){u.stopPropagation()}if(g.stopEvent){u.stopEvent()}}f[F]=g;if(g.args){m=g.args.concat(f)}}w=y.getFireInfo(j);z=w.fn;q=w.scope;w.fn=w.scope=null;if(z.apply(q,m)===false){Ext.EventObject=null;return(y.firing=false)}if(s){u=f[0]=s;s=null}Ext.EventObject=null}}y.firing=false;return true},getFireInfo:function(h,g){var j=this.observable,m=h.fireFn,f=h.scope,o=h.namedScope,p;if(!g&&h.wrapped){d.fn=m;return d}p=g?h.fn:m;if(h.lateBound){if(!f||o){f=(h.caller||j).resolveListenerScope(h.defaultScope)}p=f[p]}else{if(o&&o.isController){f=(h.caller||j).resolveListenerScope(h.defaultScope)}else{if(!f||o){f=j}}}d.fn=p;d.scope=f;return d},createTargeted:function(m,f,g,j,h){return function(){if(g.target===arguments[0]){var o;if(!h){o=f.ev.getFireInfo(f,true);m=o.fn;j=o.scope;o.fn=o.scope=null}return m.apply(j,arguments)}}},createBuffered:function(m,f,g,j,h){f.task=new Ext.util.DelayedTask();return function(){var o;if(!h){o=f.ev.getFireInfo(f,true);m=o.fn;j=o.scope;o.fn=o.scope=null}f.task.delay(g.buffer,m,j,a(arguments))}},createDelayed:function(m,f,g,j,h){return function(){var p=new Ext.util.DelayedTask(),o;if(!h){o=f.ev.getFireInfo(f,true);m=o.fn;j=o.scope;o.fn=o.scope=null}if(!f.tasks){f.tasks=[]}f.tasks.push(p);p.delay(g.delay||10,m,j,a(arguments))}},createSingle:function(m,f,g,j,h){return function(){var p=f.ev,o;if(p.removeListener(f.fn,j)&&p.observable){p.observable.hasListeners[p.name]--}if(!h){o=p.getFireInfo(f,true);m=o.fn;j=o.scope;o.fn=o.scope=null}return m.apply(j,arguments)}}}},1,0,0,0,0,0,[Ext.util,"Event"],0));(Ext.cmd.derive("Ext.mixin.Identifiable",Ext.Base,{statics:{uniqueIds:{}},isIdentifiable:true,mixinId:"identifiable",idCleanRegex:/\.|[^\w\-]/g,defaultIdPrefix:"ext-",defaultIdSeparator:"-",getOptimizedId:function(){return this.id},getUniqueId:function(){var a=this.id,c,f,g,b,d;if(!(a||a===0)){c=this.self.prototype;f=this.defaultIdSeparator;b=Ext.mixin.Identifiable.uniqueIds;if(!c.hasOwnProperty("identifiablePrefix")){g=this.xtype;if(g){d=this.defaultIdPrefix+g.replace(this.idCleanRegex,f)+f}else{if(!(d=c.$className)){d=this.defaultIdPrefix+"anonymous"+f}else{d=d.replace(this.idCleanRegex,f).toLowerCase()+f}}c.identifiablePrefix=d}d=this.identifiablePrefix;if(!b.hasOwnProperty(d)){b[d]=0}a=this.id=this.id=d+(++b[d])}this.getUniqueId=this.getOptimizedId;return a},setId:function(a){this.id=this.id=a},getId:function(){var a=this.id;if(!a){a=this.getUniqueId()}this.getId=this.getOptimizedId;return a}},0,0,0,0,0,0,[Ext.mixin,"Identifiable"],0));(Ext.cmd.derive("Ext.mixin.Observable",Ext.Mixin,function(b){var f=Ext.emptyFn,d=[],g=Array.prototype,a=g.slice,c=function(h){if(h instanceof c){return h}this.observable=h;if(arguments[1].isObservable){this.managedListeners=true}this.args=a.call(arguments,1)};c.prototype.destroy=function(){this.destroy=Ext.emptyFn;var h=this.observable;h[this.managedListeners?"mun":"un"].apply(h,this.args)};return{mixinConfig:{id:"observable",after:{destroy:"clearListeners"}},statics:{releaseCapture:function(h){h.fireEventArgs=this.prototype.fireEventArgs},capture:function(m,h,o){var j=function(p,q){return h.apply(o,[p].concat(q))};this.captureArgs(m,j,o)},captureArgs:function(j,h,m){j.fireEventArgs=Ext.Function.createInterceptor(j.fireEventArgs,h,m)},observe:function(h,j){if(h){if(!h.isObservable){Ext.applyIf(h,new this());this.captureArgs(h.prototype,h.fireEventArgs,h)}if(Ext.isObject(j)){h.on(j)}}return h},prepareClass:function(t,o,v){var m=t.listeners=[],h=v||t.prototype,u=h.listeners,r=o?o.listeners:t.superclass.self.listeners,p,s,j;if(r){m.push(r)}if(u){s=u.scope;if(!s){u.scope="self"}else{j=Ext._namedScopes[s];if(j&&j.isController){u.scope="self.controller"}}m.push(u);h.listeners=null}if(!t.HasListeners){var w=function(){},q=t.superclass.HasListeners||(o&&o.HasListeners)||b.HasListeners;t.prototype.HasListeners=t.HasListeners=w;w.prototype=t.hasListeners=new q()}}},isObservable:true,eventsSuspended:0,constructor:function(m){var q=this,j=q.self,h,p,r,s,o;if(q.$observableInitialized){return}q.$observableInitialized=true;q.hasListeners=new q.HasListeners();q.eventedBeforeEventNames={};q.events=q.events||{};h=j.listeners;if(h&&!q._addDeclaredListeners(h)){j.listeners=null}p=(m&&m.listeners)||q.listeners;if(p){if(p instanceof Array){for(o=0,s=p.length;o<s;++o){q.addListener(p[o])}}else{q.addListener(p)}}r=(m&&m.bubbleEvents)||q.bubbleEvents;if(r){q.enableBubble(r)}if(q.$applyConfigs){if(m){Ext.apply(q,m)}}else{q.initConfig(m)}if(p){q.listeners=null}},onClassExtended:function(h,j){if(!h.HasListeners){b.prepareClass(h,h.prototype.$observableMixedIn?undefined:j)}},$eventOptions:{scope:1,delay:1,buffer:1,onFrame:1,single:1,args:1,destroyable:1,priority:1,order:1},$orderToPriority:{before:100,current:0,after:-100},_addDeclaredListeners:function(h){var j=this;if(h instanceof Array){Ext.each(h,j._addDeclaredListeners,j)}else{j._addedDeclaredListeners=true;j.addListener(h)}return j._addedDeclaredListeners},addManagedListener:function(p,m,r,q,t,j){var o=this,s=o.managedListeners=o.managedListeners||[],h,u;if(typeof m!=="string"){u=arguments.length>4?t:m;t=m;for(m in t){if(t.hasOwnProperty(m)){h=t[m];if(!p.$eventOptions[m]){o.addManagedListener(p,m,h.fn||h,h.scope||t.scope||q,h.fn?h:u,true)}}}if(t&&t.destroyable){return new c(o,p,t)}}else{if(r!==f){p.doAddListener(m,r,q,t,null,o,o);if(!j&&t&&t.destroyable){return new c(o,p,m,r,q)}}}},removeManagedListener:function(p,j,r,q){var o=this,t,h,s,u,m;if(typeof j!=="string"){t=j;for(j in t){if(t.hasOwnProperty(j)){h=t[j];if(!p.$eventOptions[j]){o.removeManagedListener(p,j,h.fn||h,h.scope||t.scope||q)}}}}else{s=o.managedListeners?o.managedListeners.slice():[];j=Ext.canonicalEventName(j);for(m=0,u=s.length;m<u;m++){o.removeManagedListenerItem(false,s[m],p,j,r,q)}}},fireEvent:function(h){return this.fireEventArgs(h,a.call(arguments,1))},resolveListenerScope:function(j){var h=Ext._namedScopes[j];if(h){if(h.isSelf||h.isThis){j=null}}return j||this},fireEventArgs:function(q,j){q=Ext.canonicalEventName(q);var p=this,m=p.events,o=m&&m[q],h=true;if(p.hasListeners[q]){h=p.doFireEvent(q,j||d,o?o.bubble:false)}return h},fireAction:function(h,m,p,o,j,q){if(typeof p==="string"&&!o){p=this[p]}j=j?Ext.Object.chain(j):{};j.single=true;j.priority=((q==="after")?-99.5:99.5);this.doAddListener(h,p,o,j);this.fireEventArgs(h,m)},$eventedController:{_paused:1,pause:function(){++this._paused},resume:function(){var p=this,o=p.fn,m=p.scope,q=p.fnArgs,r=p.owner,j,h;if(!--p._paused){if(o){j=Ext.Array.slice(q||p.args);if(q===false){j.shift()}p.fn=null;j.push(p);if(Ext.isFunction(o)){h=o.apply(m,j)}else{if(m&&Ext.isString(o)&&Ext.isFunction(m[o])){h=m[o].apply(m,j)}}if(h===false){return false}}if(!p._paused){return p.owner.fireEventArgs(p.eventName,p.args)}}}},fireEventedAction:function(h,m,s,t,r){var p=this,q=p.eventedBeforeEventNames,j=q[h]||(q[h]="before"+h),u=Ext.apply({owner:p,eventName:h,fn:s,scope:t,fnArgs:r,args:m},p.$eventedController),o;m.push(u);o=p.fireEventArgs(j,m);m.pop();if(o===false){return false}return u.resume()},doFireEvent:function(j,o,h){var q=this,r,p,m=true;do{if(q.eventsSuspended){if((r=q.eventQueue)){r.push([j,o])}return m}else{p=q.events&&q.events[j];if(p&&p!==true){if((m=p.fire.apply(p,o))===false){break}}}}while(h&&(q=q.getBubbleParent()));return m},getBubbleParent:function(){var j=this,h=j.getBubbleTarget&&j.getBubbleTarget();if(h&&h.isObservable){return h}return null},addListener:function(s,j,m,o,q,t){var h=this,u=Ext._namedScopes,p,y,v,w,r;if(typeof s!=="string"){o=s;m=o.scope;y=m&&u[m];v=y&&y.isSelf;r=((h.isComponent||h.isWidget)&&o.element)?h.$elementEventOptions:h.$eventOptions;for(s in o){p=o[s];if(!r[s]){w=p.scope;if(w&&v){y=u[w];if(y&&y.isController){w="self.controller"}}h.doAddListener(s,p.fn||p,w||m,p.fn?p:o,q,t)}}if(o&&o.destroyable){return new c(h,o)}}else{h.doAddListener(s,j,m,o,q,t);if(o&&o.destroyable){return new c(h,s,j,m,o)}}return h},removeListener:function(m,p,o,r){var q=this,j,h;if(typeof m!=="string"){h=m;r=r||q.$eventOptions;for(m in h){if(h.hasOwnProperty(m)){j=h[m];if(!q.$eventOptions[m]){q.doRemoveListener(m,j.fn||j,j.scope||h.scope)}}}}else{q.doRemoveListener(m,p,o)}return q},onBefore:function(o,m,j,h){return this.addListener(o,m,j,h,"before")},onAfter:function(o,m,j,h){return this.addListener(o,m,j,h,"after")},unBefore:function(o,m,j,h){return this.removeListener(o,m,j,h,"before")},unAfter:function(o,m,j,h){return this.removeListener(o,m,j,h,"after")},addBeforeListener:function(){return this.onBefore.apply(this,arguments)},addAfterListener:function(){return this.onAfter.apply(this,arguments)},removeBeforeListener:function(){return this.unBefore.apply(this,arguments)},removeAfterListener:function(){return this.unAfter.apply(this,arguments)},clearListeners:function(){var o=this,j=o.events,p=o.hasListeners,m,h;if(j){for(h in j){if(j.hasOwnProperty(h)){m=j[h];if(m.isEvent){delete p[h];m.clearListeners()}}}o.events=null}o.clearManagedListeners()},clearManagedListeners:function(){var m=this,h=m.managedListeners?m.managedListeners.slice():[],j=0,o=h.length;for(;j<o;j++){m.removeManagedListenerItem(true,h[j])}m.managedListeners=[]},removeManagedListenerItem:function(h,q,p,j,o,m){if(h||(q.item===p&&q.ename===j&&(!o||q.fn===o)&&(!m||q.scope===m))){q.item.doRemoveListener(q.ename,q.fn,q.scope,q.options);if(!h){Ext.Array.remove(this.managedListeners,q)}}},hasListener:function(h){h=Ext.canonicalEventName(h);return !!this.hasListeners[h]},isSuspended:function(j){var h=this.eventsSuspended>0,m=this.events;if(!h&&j&&m){j=m[j];if(j&&j.isEvent){return j.isSuspended()}}return h},suspendEvents:function(h){++this.eventsSuspended;if(h&&!this.eventQueue){this.eventQueue=[]}},suspendEvent:function(){var p=this,m=p.events,q=arguments.length,j,o,h;for(j=0;j<q;j++){h=arguments[j];h=Ext.canonicalEventName(h);o=m[h];if(!o||!o.isEvent){o=p._initEvent(h)}o.suspend()}},resumeEvent:function(){var j=this.events||0,o=j&&arguments.length,h,m;for(h=0;h<o;h++){m=j[arguments[h]];if(m&&m.resume){m.resume()}}},resumeEvents:function(p){var h=this,o=h.eventQueue,m,j;if(h.eventsSuspended&&!--h.eventsSuspended){delete h.eventQueue;if(!p&&o){m=o.length;for(j=0;j<m;j++){h.fireEventArgs.apply(h,o[j])}}}},relayEvents:function(r,s,j){var q=this,m=s.length,h=0,t,o,p={};if(Ext.isObject(s)){for(h in s){o=s[h];p[h]=q.createRelayer(o)}}else{for(;h<m;h++){t=s[h];p[t]=q.createRelayer(j?j+t:t)}}q.mon(r,p,null,null,undefined);return new c(q,r,p)},createRelayer:function(m,h){var j=this;return function(){return j.fireEventArgs.call(j,m,h?a.apply(arguments,h):arguments)}},enableBubble:function(r){if(r){var p=this,q=(typeof r=="string")?arguments:r,j=p.events,o=j&&q.length,h,m,s;for(s=0;s<o;++s){h=q[s];h=Ext.canonicalEventName(h);m=j[h];if(!m||!m.isEvent){m=p._initEvent(h)}p.hasListeners._incr_(h);m.bubble=true}}},destroy:function(){this.clearListeners();this.callParent()},privates:{doAddListener:function(p,u,r,s,o,m,q){var t=this,v,j,h;o=o||(s&&s.order);if(o){h=(s&&s.priority);if(!h){s=s?Ext.Object.chain(s):{};s.priority=t.$orderToPriority[o]}}p=Ext.canonicalEventName(p);if(!q&&(r&&r.isObservable&&(r!==t))){q=r}if(q){j=q.managedListeners=q.managedListeners||[];j.push({item:t,ename:p,fn:u,scope:r,options:s})}v=(t.events||(t.events={}))[p];if(!v||!v.isEvent){v=t._initEvent(p)}if(u!==f){if(v.addListener(u,r,s,m,q)){t.hasListeners._incr_(p)}}},doRemoveListener:function(h,m,j){var p=this,q=p.events,o;h=Ext.canonicalEventName(h);o=q&&q[h];if(o&&o.isEvent){if(o.removeListener(m,j)){p.hasListeners._decr_(h)}}},_initEvent:function(h){return(this.events[h]=new Ext.util.Event(this,h))}},deprecated:{"5.0":{methods:{addEvents:null}}}}},1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.mixin,"Observable"],function(){var c=this,g=c.prototype,d=function(){},a=function(h){if(!h.HasListeners){var j=h.prototype;j.$observableMixedIn=1;c.prepareClass(h,this);h.onExtended(function(o,m){c.prepareClass(o,null,m)});if(j.onClassMixedIn){Ext.override(h,{onClassMixedIn:function(m){a.call(this,m);this.callParent(arguments)}})}else{j.onClassMixedIn=function(m){a.call(this,m)}}}b.call(this,h)},b=g.onClassMixedIn;d.prototype={_decr_:function(j,h){if(h==null){h=1}if(!(this[j]-=h)){delete this[j]}},_incr_:function(h){if(this.hasOwnProperty(h)){++this[h]}else{this[h]=1}}};g.HasListeners=c.HasListeners=d;c.createAlias({on:"addListener",un:"removeListener",mon:"addManagedListener",mun:"removeManagedListener",setListeners:"addListener"});c.observeClass=c.observe;function f(q){var p=(this.methodEvents=this.methodEvents||{})[q],j,h,m,o=this,r;if(!p){this.methodEvents[q]=p={};p.originalFn=this[q];p.methodName=q;p.before=[];p.after=[];r=function(u,t,s){if((h=u.apply(t||o,s))!==undefined){if(typeof h=="object"){if(h.returnValue!==undefined){j=h.returnValue}else{j=h}m=!!h.cancel}else{if(h===false){m=true}else{j=h}}}};this[q]=function(){var s=Array.prototype.slice.call(arguments,0),v,t,u;j=h=undefined;m=false;for(t=0,u=p.before.length;t<u;t++){v=p.before[t];r(v.fn,v.scope,s);if(m){return j}}if((h=p.originalFn.apply(o,s))!==undefined){j=h}for(t=0,u=p.after.length;t<u;t++){v=p.after[t];r(v.fn,v.scope,s);if(m){return j}}return j}}return p}Ext.apply(g,{onClassMixedIn:a,beforeMethod:function(j,h,m){f.call(this,j).before.push({fn:h,scope:m})},afterMethod:function(j,h,m){f.call(this,j).after.push({fn:h,scope:m})},removeMethodListener:function(p,m,j){var o=this.getMethodEvent(p),h,q;for(h=0,q=o.before.length;h<q;h++){if(o.before[h].fn==m&&o.before[h].scope==j){Ext.Array.erase(o.before,h,1);return}}for(h=0,q=o.after.length;h<q;h++){if(o.after[h].fn==m&&o.after[h].scope==j){Ext.Array.erase(o.after,h,1);return}}},toggleEventLogging:function(h){Ext.util.Observable[h?"capture":"releaseCapture"](this,function(j){if(Ext.isDefined(Ext.global.console)){Ext.global.console.log(j,arguments)}})}})}));(Ext.cmd.derive("Ext.util.HashMap",Ext.Base,{generation:0,config:{keyFn:null},constructor:function(b){var a=this,c;a.mixins.observable.constructor.call(a,b);a.clear(true);c=a.getKeyFn();if(c){a.getKey=c}},getCount:function(){return this.length},getData:function(a,b){if(b===undefined){b=a;a=this.getKey(b)}return[a,b]},getKey:function(a){return a.id},add:function(b,a){var c=this;if(arguments.length===1){a=b;b=c.getKey(a)}if(c.containsKey(b)){return c.replace(b,a)}c.map[b]=a;++c.length;c.generation++;if(c.hasListeners.add){c.fireEvent("add",c,b,a)}return a},replace:function(d,a){var f=this,b=f.map,c;if(arguments.length===1){a=d;d=f.getKey(a)}if(!f.containsKey(d)){f.add(d,a)}c=b[d];b[d]=a;f.generation++;if(f.hasListeners.replace){f.fireEvent("replace",f,d,a,c)}return a},remove:function(b){var a=this.findKey(b);if(a!==undefined){return this.removeAtKey(a)}return false},removeAtKey:function(b){var c=this,a;if(c.containsKey(b)){a=c.map[b];delete c.map[b];--c.length;c.generation++;if(c.hasListeners.remove){c.fireEvent("remove",c,b,a)}return true}return false},get:function(a){var b=this.map;return b.hasOwnProperty(a)?b[a]:undefined},clear:function(a){var b=this;if(a||b.generation){b.map={};b.length=0;b.generation=a?0:b.generation+1}if(a!==true&&b.hasListeners.clear){b.fireEvent("clear",b)}return b},containsKey:function(a){var b=this.map;return b.hasOwnProperty(a)&&b[a]!==undefined},contains:function(a){return this.containsKey(this.findKey(a))},getKeys:function(){return this.getArray(true)},getValues:function(){return this.getArray(false)},getArray:function(b){var c=[],d,a=this.map;for(d in a){if(a.hasOwnProperty(d)){c.push(b?d:a[d])}}return c},each:function(a,f){var c=Ext.apply({},this.map),d,b=this.length;f=f||this;for(d in c){if(c.hasOwnProperty(d)){if(a.call(f,d,c[d],b)===false){break}}}return this},clone:function(){var a=new this.self(this.initialConfig),c=this.map,b;a.suspendEvents();for(b in c){if(c.hasOwnProperty(b)){a.add(b,c[b])}}a.resumeEvents();return a},findKey:function(c){var b,a=this.map;for(b in a){if(a.hasOwnProperty(b)&&a[b]===c){return b}}return undefined},destroy:function(){this.callParent();this.map=null}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.util,"HashMap"],function(b){var a=b.prototype;a.removeByKey=a.removeAtKey}));(Ext.cmd.derive("Ext.promise.Consequence",Ext.Base,function(a){return{promise:null,deferred:null,onFulfilled:null,onRejected:null,onProgress:null,constructor:function(f,b,d){var c=this;c.onFulfilled=f;c.onRejected=b;c.onProgress=d;c.deferred=new Ext.promise.Deferred();c.promise=c.deferred.promise},trigger:function(f,d){var c=this,b=c.deferred;switch(f){case"fulfill":c.propagate(d,c.onFulfilled,b,b.resolve);break;case"reject":c.propagate(d,c.onRejected,b,b.reject);break}},update:function(b){if(Ext.isFunction(this.onProgress)){b=this.onProgress(b)}this.deferred.update(b)},propagate:function(d,f,b,c){if(Ext.isFunction(f)){this.schedule(function(){try{b.resolve(f(d))}catch(g){b.reject(g)}})}else{c.call(this.deferred,d)}},schedule:function(c){var b=a.queueSize++;a.queue[b]=c;if(!b){Ext.asap(a.dispatch)}},statics:{queue:new Array(10000),queueSize:0,dispatch:function(){var b=a.queue,d,c;for(c=0;c<a.queueSize;++c){d=b[c];b[c]=null;d()}a.queueSize=0}}}},1,0,0,0,0,0,[Ext.promise,"Consequence"],0));(Ext.cmd.derive("Ext.promise.Deferred",Ext.Base,{promise:null,consequences:[],completed:false,completionAction:null,completionValue:null,constructor:function(){var a=this;a.promise=new Ext.promise.Promise(a);a.consequences=[];a.completed=false;a.completionAction=null;a.completionValue=null},then:function(b,c,a){var f=this,d=new Ext.promise.Consequence(b,c,a);if(f.completed){d.trigger(f.completionAction,f.completionValue)}else{f.consequences.push(d)}return d.promise},resolve:function(a){var f=this,c,d;if(f.completed){return}try{if(a===f.promise){throw new TypeError("A Promise cannot be resolved with itself.")}if((Ext.isObject(a)||Ext.isFunction(a))&&Ext.isFunction(d=a.then)){c=false;try{d.call(a,function(g){if(!c){c=true;f.resolve(g)}},function(g){if(!c){c=true;f.reject(g)}})}catch(b){if(!c){f.reject(b)}}}else{f.complete("fulfill",a)}}catch(b){f.reject(b)}},reject:function(a){if(this.completed){return}this.complete("reject",a)},update:function(d){var b=this.consequences,a,f,c;if(this.completed){return}for(f=0,c=b.length;f<c;f++){a=b[f];a.update(d)}},complete:function(g,f){var d=this,h=d.consequences,c,b,a;d.completionAction=g;d.completionValue=f;d.completed=true;for(b=0,a=h.length;b<a;b++){c=h[b];c.trigger(d.completionAction,d.completionValue)}d.consequences=null}},1,0,0,0,0,0,[Ext.promise,"Deferred"],0));(Ext.cmd.derive("Ext.promise.Promise",Ext.Base,function(b){var a;return{statics:{CancellationError:Ext.global.CancellationError||Error,_ready:function(){a=Ext.promise.Deferred},all:function(c){return b.when(c).then(function(g){var h=new a(),o=g.length,j=new Array(o),q,f,d,m,p;if(!o){h.resolve(j)}else{d=function(s,r){return b.when(s).then(function(t){j[r]=t;if(!--o){h.resolve(j)}return t},function(t){return h.reject(t)})};for(q=m=0,p=g.length;m<p;q=++m){f=g[q];if(q in g){d(f,q)}else{o--}}}return h.promise})},is:function(c){return(Ext.isObject(c)||Ext.isFunction(c))&&Ext.isFunction(c.then)},rethrowError:function(c){Ext.asap(function(){throw c})},when:function(d){var c=new Ext.promise.Deferred();c.resolve(d);return c.promise}},owner:null,constructor:function(c){this.owner=c},then:function(f,h,d,c){var g;if(arguments.length===1&&Ext.isObject(arguments[0])){g=arguments[0];f=g.success;h=g.failure;d=g.progress;c=g.scope}if(c){if(f){f=Ext.Function.bind(f,c)}if(h){h=Ext.Function.bind(h,c)}if(d){d=Ext.Function.bind(d,c)}}return this.owner.then(f,h,d)},otherwise:function(f,c){var d;if(arguments.length===1&&Ext.isObject(arguments[0])){d=arguments[0];f=d.fn;c=d.scope}if(c!=null){f=Ext.Function.bind(f,c)}return this.owner.then(null,f)},always:function(f,c){var d;if(arguments.length===1&&Ext.isObject(arguments[0])){d=arguments[0];f=d.fn;c=d.scope}if(c!=null){f=Ext.Function.bind(f,c)}return this.owner.then(function(g){try{f()}catch(h){b.rethrowError(h)}return g},function(h){try{f()}catch(g){b.rethrowError(g)}throw h})},done:function(){this.owner.then(null,b.rethrowError)},cancel:function(c){if(c==null){c=null}this.owner.reject(new this.self.CancellationError(c))},log:function(c){if(c==null){c=""}return this._owner.then(function(d){Ext.log(""+(c||"Promise")+" resolved with value: "+d);return d},function(d){Ext.log(""+(c||"Promise")+" rejected with reason: "+d);throw d})}}},1,0,0,0,0,0,[Ext.promise,"Promise"],function(a){a._ready()}));(Ext.cmd.derive("Ext.Promise",Ext.Base,function(){var a;return{statics:{_ready:function(){a=Ext.promise.Promise},all:function(){return a.all.apply(a,arguments)},race:function(){},reject:function(c){var b=new Ext.promise.Deferred();b.reject(c);return b.promise},resolve:function(c){var b=new Ext.promise.Deferred();b.resolve(c);return b.promise}},constructor:function(c){var b=new Ext.promise.Deferred();c(b.resolve.bind(b),b.reject.bind(b));return b.promise}}},1,0,0,0,0,0,[Ext,"Promise"],function(a){var b=Ext.global.Promise;if(b&&b.resolve){Ext.Promise=b}else{a._ready()}}));(Ext.cmd.derive("Ext.Deferred",Ext.promise.Deferred,function(c){var a,b;return{statics:{_ready:function(){a=Ext.promise.Promise;b=Ext.Promise.resolve},all:function(){return a.all.apply(a,arguments)},any:function(d){return c.some(d,1).then(function(f){return f[0]},function(f){if(f instanceof Error&&f.message==="Too few Promises were resolved."){Ext.raise("No Promises were resolved.")}else{throw f}})},delay:function(g,f){var d;if(arguments.length===1){f=g;g=undefined}f=Math.max(f,0);d=new c();setTimeout(function(){d.resolve(g)},f);return d.promise},map:function(d,f){return c.resolved(d).then(function(m){var g,s,h,q,j,o,p,r;q=m.length;o=new Array(m.length);g=new c();if(!q){g.resolve(o)}else{j=function(u,t){return c.resolved(u).then(function(v){return f(v,t,o)}).then(function(v){o[t]=v;if(!--q){g.resolve(o)}return v},function(v){return g.reject(v)})};for(s=p=0,r=m.length;p<r;s=++p){h=m[s];if(s in m){j(h,s)}else{q--}}}return g.promise})},memoize:function(f,d,g){var h=Ext.Function.memoize(f,d,g);return function(){return c.all(Ext.Array.slice(arguments)).then(function(j){return h.apply(d,j)})}},parallel:function(d,f){if(f==null){f=null}var g=Ext.Array.slice(arguments,2);return c.map(d,function(h){if(!Ext.isFunction(h)){throw new Error("Invalid parameter: expected a function.")}return h.apply(f,g)})},pipeline:function(d,g,f){if(f==null){f=null}return c.reduce(d,function(h,j){if(!Ext.isFunction(j)){throw new Error("Invalid parameter: expected a function.")}return j.call(f,h)},g)},reduce:function(h,d,g){var f=arguments.length===3;return c.resolved(h).then(function(j){var m=[j,function(q,o,p){return c.resolved(q).then(function(r){return c.resolved(o).then(function(s){return d(r,s,p,j)})})}];if(f){m.push(g)}return Ext.Array.reduce.apply(Ext.Array,m)})},rejected:function(f){var d=new Ext.Deferred();d.reject(f);return d.promise},resolved:function(f){var d=new Ext.Deferred();d.resolve(f);return d.promise},sequence:function(d,f){if(f==null){f=null}var g=Ext.Array.slice(arguments,2);return c.reduce(d,function(j,h){if(!Ext.isFunction(h)){throw new Error("Invalid parameter: expected a function.")}return c.resolved(h.apply(f,g)).then(function(m){j.push(m);return j})},[])},some:function(f,d){return c.resolved(f).then(function(m){var g,s,t,u,j,h,q,p,o,r;p=[];q=d;h=(m.length-q)+1;g=new c();if(m.length<d){g.reject(new Error("Too few Promises were resolved."))}else{u=function(v){if(q>0){p.push(v)}q--;if(q===0){g.resolve(p)}return v};t=function(v){h--;if(h===0){g.reject(new Error("Too few Promises were resolved."))}return v};for(s=o=0,r=m.length;o<r;s=++o){j=m[s];if(s in m){c.resolved(j).then(u,t)}}}return g.promise})},timeout:function(g,d){var h=new c(),f;f=setTimeout(function(){if(f){h.reject(new Error("Promise timed out."))}},d);c.resolved(g).then(function(j){clearTimeout(f);f=null;h.resolve(j)},function(j){clearTimeout(f);f=null;h.reject(j)});return h.promise}}}},0,0,0,0,0,0,[Ext,"Deferred"],function(a){a._ready()}));Ext.Factory=function(a){var b=this;b.aliasPrefix=a+".";b.cache={};b.name=a.replace(b.fixNameRe,b.fixNameFn);b.type=a};Ext.Factory.prototype={defaultProperty:"type",instanceProp:"isInstance",create:function(h,m){var c=this,f=Ext.ClassManager,g=c.cache,j,b,a,d;if(h){if(h[c.instanceProp]){return h}if(typeof h==="string"){d=h;h={};h[c.defaultProperty]=d}b=h.xclass;d=h.type}if(b){if(!(a=f.get(b))){return f.instantiate(b,h)}}else{if(!(d=d||m||c.defaultType)){a=c.defaultClass}if(!a&&!(a=g[d])){j=c.aliasPrefix+d;b=f.getNameByAlias(j);if(!(a=b&&f.get(b))){return f.instantiateByAlias(j,h)}g[d]=a}}return a.isInstance?a:new a(h)},fixNameRe:/\.[a-z]/ig,fixNameFn:function(a){return a.substring(1).toUpperCase()},clearCache:function(){this.cache={}}};Ext.Factory.define=function(a,f){var b=Ext.Factory,c,d,g;if(a.constructor===Object){Ext.Object.each(a,b.define,b)}else{d=new Ext.Factory(a);if(f){if(f.constructor===Object){Ext.apply(d,f);if(typeof(c=d.xclass)==="string"){d.defaultClass=Ext.ClassManager.get(c)}}else{d.defaultType=f}}b[d.name]=g=d.create.bind(d);g.instance=d}return g};(Ext.cmd.derive("Ext.mixin.Factoryable",Ext.Base,{mixinId:"factoryable",onClassMixedIn:function(g){var f=g.prototype,h=f.factoryConfig,d=f.alias,c={},b,a;d=d&&d.length&&d[0];if(d&&(b=d.lastIndexOf("."))>0){c.type=d.substring(0,b);c.defaultType=d.substring(b+1)}if(h){delete f.factoryConfig;Ext.apply(c,h)}a=Ext.Factory.define(c.type,c);if(g.create===Ext.Base.create){g.create=a}}},0,0,0,0,0,0,[Ext.mixin,"Factoryable"],0));(Ext.cmd.derive("Ext.data.request.Base",Ext.Base,{factoryConfig:{type:"request",defaultType:"ajax"},result:null,success:null,timer:null,constructor:function(a){var b=this;Ext.apply(b,a.options||{},a.ownerConfig);b.id=++Ext.data.Connection.requestId;b.owner=a.owner;b.options=a.options;b.requestOptions=a.requestOptions},start:function(){var a=this,b=a.getTimeout();if(b&&a.async){a.timer=Ext.defer(a.onTimeout,b,a)}},abort:function(){var a=this;a.clearTimer();if(!a.timedout){a.aborted=true}a.abort=Ext.emptyFn},createDeferred:function(){return(this.deferred=new Ext.Deferred())},getDeferred:function(){return this.deferred||this.createDeferred()},getPromise:function(){return this.getDeferred().promise},then:function(){var a=this.getPromise();return a.then.apply(a,arguments)},onComplete:function(){var a=this,c=a.deferred,b=a.result;a.clearTimer();if(c){if(a.success){c.resolve(b)}else{c.reject(b)}}},onTimeout:function(){var a=this;a.timedout=true;a.timer=null;a.abort(true)},getTimeout:function(){return this.timeout},clearTimer:function(){var a=this.timer;if(a){clearTimeout(a);this.timer=null}},destroy:function(){var a=this;a.abort();a.owner=a.options=a.requestOptions=a.result=null;a.callParent()},privates:{createException:function(){var b=this,a;a={request:b,requestId:b.id,status:b.aborted?-1:0,statusText:b.aborted?"transaction aborted":"communication failure",getResponseHeader:b._getHeader,getAllResponseHeaders:b._getHeaders};if(b.aborted){a.aborted=true}if(b.timedout){a.timedout=true}return a},_getHeader:function(a){var b=this.headers;return b&&b[a.toLowerCase()]},_getHeaders:function(){return this.headers}}},1,0,0,0,0,[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.request,"Base"],0));(Ext.cmd.derive("Ext.data.flash.BinaryXhr",Ext.Base,{statics:{flashPluginActivated:function(){Ext.data.flash.BinaryXhr.flashPluginActive=true;Ext.data.flash.BinaryXhr.flashPlugin=document.getElementById("ext-flash-polyfill");Ext.GlobalEvents.fireEvent("flashready")},flashPluginActive:false,flashPluginInjected:false,connectionIndex:1,liveConnections:{},flashPlugin:null,onFlashStateChange:function(b,a,d){var c;c=this.liveConnections[Number(b)];if(c){c.onFlashStateChange(a,d)}},registerConnection:function(b){var a=this.connectionIndex;this.conectionIndex=this.connectionIndex+1;this.liveConnections[a]=b;return a},injectFlashPlugin:function(){var c=this,b,a;c.flashPolyfillEl=Ext.getBody().appendChild({id:"ext-flash-polyfill",cn:[{tag:"p",html:"To view this page ensure that Adobe Flash Player version 11.1.0 or greater is installed."},{tag:"a",href:"http://www.adobe.com/go/getflashplayer",cn:[{tag:"img",src:window.location.protocol+"//www.adobe.com/images/shared/download_buttons/get_flash_player.gif",alt:"Get Adobe Flash player"}]}]});b=[Ext.Loader.getPath("Ext.data.Connection"),"../../../plugins/flash/swfobject.js"].join("/");a="/plugins/flash/FlashPlugin.swf";if(Ext.flashPluginPath){a=Ext.flashPluginPath}Ext.Loader.loadScript({url:b,onLoad:function(){var f="11.4.0";var d="playerProductInstall.swf";var h={};var g={};g.quality="high";g.bgcolor="#ffffff";g.allowscriptaccess="sameDomain";g.allowfullscreen="true";var j={};j.id="ext-flash-polyfill";j.name="polyfill";j.align="middle";swfobject.embedSWF(a,"ext-flash-polyfill","0","0",f,d,h,g,j)},onError:function(){},scope:c});Ext.data.flash.BinaryXhr.flashPluginInjected=true}},readyState:0,status:0,statusText:"",responseBytes:null,javascriptId:null,constructor:function(a){if(!Ext.data.flash.BinaryXhr.flashPluginInjected){Ext.data.flash.BinaryXhr.injectFlashPlugin()}var b=this;Ext.apply(b,a);b.requestHeaders={}},abort:function(){var a=this;if(a.readyState==4){return}a.aborted=true;if(!Ext.data.flash.BinaryXhr.flashPluginActive){Ext.GlobalEvents.removeListener("flashready",a.onFlashReady,a);return}Ext.data.flash.BinaryXhr.flashPlugin.abortRequest(a.javascriptId);delete Ext.data.flash.BinaryXhr.liveConnections[a.javascriptId]},getAllResponseHeaders:function(){var a=[];Ext.Object.each(this.responseHeaders,function(b,c){a.push(b+": "+c)});return a.join("\r\n")},getResponseHeader:function(b){var a=this.responseHeaders;return(a&&a[b])||null},open:function(a,d,f,b,c){var g=this;g.method=a;g.url=d;g.async=f!==false;g.user=b;g.password=c},overrideMimeType:function(a){this.mimeType=a},send:function(a){var b=this;b.body=a;if(!Ext.data.flash.BinaryXhr.flashPluginActive){Ext.GlobalEvents.addListener("flashready",b.onFlashReady,b)}else{this.onFlashReady()}},onFlashReady:function(){var a=this,c,b;a.javascriptId=Ext.data.flash.BinaryXhr.registerConnection(a);c={method:a.method,url:a.url,user:a.user,password:a.password,mimeType:a.mimeType,requestHeaders:a.requestHeaders,body:a.body,javascriptId:a.javascriptId};b=Ext.data.flash.BinaryXhr.flashPlugin.postBinary(c)},setReadyState:function(b){var a=this;if(a.readyState!=b){a.readyState=b;a.onreadystatechange()}},setRequestHeader:function(b,a){this.requestHeaders[b]=a},onreadystatechange:Ext.emptyFn,parseData:function(b){var a=this;this.status=b.status||0;a.responseHeaders={};if(a.mimeType){a.responseHeaders["content-type"]=a.mimeType}if(b.reason=="complete"){this.responseBytes=b.data;a.responseHeaders["content-length"]=b.data.length}else{if(b.reason=="error"||b.reason=="securityError"){this.statusText=b.text;a.responseHeaders["content-length"]=0}}},onFlashStateChange:function(a,c){var b=this;if(a==4){b.parseData(c);delete Ext.data.flash.BinaryXhr.liveConnections[b.javascriptId]}b.setReadyState(a)}},1,0,0,0,0,0,[Ext.data.flash,"BinaryXhr"],0));(Ext.cmd.derive("Ext.data.request.Ajax",Ext.data.request.Base,{statics:{parseStatus:function(b){b=b==1223?204:b;var a=(b>=200&&b<300)||b==304,c=false;if(!a){switch(b){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:c=true;break}}return{success:a,isException:c}}},start:function(f){var c=this,b=c.options,a=c.requestOptions,d=c.isXdr,h,g;h=c.xhr=c.openRequest(b,a,c.async,c.username,c.password);if(!d){g=c.setupHeaders(h,b,a.data,a.params)}if(c.async){if(!d){h.onreadystatechange=Ext.Function.bind(c.onStateChange,c)}}if(d){c.processXdrRequest(c,h)}Ext.data.request.Base.prototype.start.call(this,f);h.send(f);if(!c.async){return c.onComplete()}return c},abort:function(d){var c=this,b=c.xhr;if(d||c.isLoading()){try{b.onreadystatechange=null}catch(a){b.onreadystatechange=Ext.emptyFn}b.abort();Ext.data.request.Base.prototype.abort.call(this,d);c.onComplete();c.cleanup()}},cleanup:function(){this.xhr=null;delete this.xhr},isLoading:function(){var c=this,b=c.xhr,d=b&&b.readyState,a=Ext.data.flash&&Ext.data.flash.BinaryXhr;if(!b||c.aborted||c.timedout){return false}if(a&&b instanceof a){return d!==4}return d!==0&&d!==4},openRequest:function(c,a,d,h,b){var f=this,g=f.newRequest(c);if(h){g.open(a.method,a.url,d,h,b)}else{if(f.isXdr){g.open(a.method,a.url)}else{g.open(a.method,a.url,d)}}if(c.binary||f.binary){if(window.Uint8Array){g.responseType="arraybuffer"}else{if(g.overrideMimeType){g.overrideMimeType("text/plain; charset=x-user-defined")}}}if(c.withCredentials||f.withCredentials){g.withCredentials=true}return g},newRequest:function(b){var c=this,a;if(b.binaryData){if(window.Uint8Array){a=c.getXhrInstance()}else{a=new Ext.data.flash.BinaryXhr()}}else{if(c.cors&&Ext.isIE9m){a=c.getXdrInstance();c.isXdr=true}else{a=c.getXhrInstance();c.isXdr=false}}return a},setupHeaders:function(r,m,b,a){var g=this,q=Ext.apply({},m.headers||{},g.defaultHeaders),p=g.defaultPostHeader,h=m.jsonData,o=m.xmlData,f="Content-Type",s=g.useDefaultXhrHeader,j,c;if(!q.hasOwnProperty(f)&&(b||a)){if(b){if(m.rawData){p="text/plain"}else{if(o&&Ext.isDefined(o)){p="text/xml"}else{if(h&&Ext.isDefined(h)){p="application/json"}}}}q[f]=p}if(s&&!q["X-Requested-With"]){q["X-Requested-With"]=g.defaultXhrHeader}if(q[f]===undefined||q[f]===null){delete q[f]}try{for(j in q){if(q.hasOwnProperty(j)){c=q[j];r.setRequestHeader(j,c)}}}catch(d){g.owner.fireEvent("exception",j,c)}return q},getXdrInstance:function(){var a;if(Ext.ieVersion>=8){a=new XDomainRequest()}else{Ext.raise({msg:"Your browser does not support CORS"})}return a},getXhrInstance:(function(){var d=[function(){return new XMLHttpRequest()},function(){return new ActiveXObject("MSXML2.XMLHTTP.3.0")},function(){return new ActiveXObject("MSXML2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],f=0,c=d.length,b;for(;f<c;++f){try{b=d[f];b();break}catch(a){}}return b}()),processXdrRequest:function(c,a){var b=this;delete c.headers;c.contentType=c.options.contentType||b.defaultXdrContentType;a.onload=Ext.Function.bind(b.onStateChange,b,[true]);a.onerror=a.ontimeout=Ext.Function.bind(b.onStateChange,b,[false])},processXdrResponse:function(a,b){a.getAllResponseHeaders=function(){return[]};a.getResponseHeader=function(){return""};a.contentType=b.contentType||this.defaultXdrContentType},onStateChange:function(d){var a=this,b=a.xhr,c=Ext.GlobalEvents;if((b&&b.readyState==4)||a.isXdr){a.clearTimer();a.onComplete(d);a.cleanup();if(c.hasListeners.idle){c.fireEvent("idle")}}},onComplete:function(a){var j=this,d=j.owner,b=j.options,o=j.xhr,f={success:false,isException:false},c,m,g;if(!o||j.destroyed){return j.result=f}try{c=Ext.data.request.Ajax.parseStatus(o.status);if(c.success){c.success=o.readyState===4}}catch(h){c=f}m=j.success=j.isXdr?a:c.success;if(m){g=j.createResponse(o);d.fireEvent("requestcomplete",d,g,b);Ext.callback(b.success,b.scope,[g,b])}else{if(c.isException||j.aborted||j.timedout){g=j.createException(o)}else{g=j.createResponse(o)}d.fireEvent("requestexception",d,g,b);Ext.callback(b.failure,b.scope,[g,b])}j.result=g;Ext.callback(b.callback,b.scope,[b,m,g]);d.onRequestComplete(j);Ext.data.request.Base.prototype.onComplete.call(this,a);return g},createResponse:function(p){var m=this,f=m.isXdr,d={},a=f?[]:p.getAllResponseHeaders().replace(/\r\n/g,"\n").split("\n"),h=a.length,b,j,o,g,c;while(h--){b=a[h];j=b.indexOf(":");if(j>=0){o=b.substr(0,j).toLowerCase();if(b.charAt(j+1)==" "){++j}d[o]=b.substr(j+1)}}g={request:m,requestId:m.id,status:p.status,statusText:p.statusText,getResponseHeader:function(q){return d[q.toLowerCase()]},getAllResponseHeaders:function(){return d}};if(f){m.processXdrResponse(g,p)}if(m.binary){g.responseBytes=m.getByteArray(p)}else{g.responseText=p.responseText;g.responseXML=p.responseXML}return g},destroy:function(){this.xhr=null;Ext.data.request.Base.prototype.destroy.call(this)},privates:{getByteArray:function(c){var h=c.response,g=c.responseBody,d=Ext.data.flash&&Ext.data.flash.BinaryXhr,f,b,m,j;if(c instanceof d){f=c.responseBytes}else{if(window.Uint8Array){f=h?new Uint8Array(h):[]}else{if(Ext.isIE9p){try{f=new VBArray(g).toArray()}catch(a){f=[]}}else{if(Ext.isIE){if(!this.self.vbScriptInjected){this.injectVBScript()}getIEByteArray(c.responseBody,f=[])}else{f=[];b=c.responseText;m=b.length;for(j=0;j<m;j++){f.push(b.charCodeAt(j)&255)}}}}}return f},injectVBScript:function(){var a=document.createElement("script");a.type="text/vbscript";a.text=["Function getIEByteArray(byteArray, out)","Dim len, i","len = LenB(byteArray)","For i = 1 to len","out.push(AscB(MidB(byteArray, i, 1)))","Next","End Function"].join("\n");Ext.getHead().dom.appendChild(a);this.self.vbScriptInjected=true}}},0,0,0,0,["request.ajax"],0,[Ext.data.request,"Ajax"],0));(Ext.cmd.derive("Ext.data.request.Form",Ext.data.request.Base,{start:function(b){var a=this,d=a.options,c=a.requestOptions;Ext.data.request.Base.prototype.start.call(this,b);a.form=a.upload(d.form,c.url,c.data,d);return a},abort:function(d){var c=this,b;if(c.isLoading()){try{b=c.frame.dom;if(b.stop){b.stop()}else{b.document.execCommand("Stop")}}catch(a){}}Ext.data.request.Base.prototype.abort.call(this,d);c.onComplete();c.cleanup()},cleanup:function(){var a=this,b=a.frame;if(b){b.un("load",a.onComplete,a);Ext.removeNode(b)}a.frame=a.form=null},isLoading:function(){return !!this.frame},upload:function(b,j,q,g){b=Ext.getDom(b);g=g||{};var u=document.createElement("iframe"),r=Ext.get(u),w=r.id,c=[],d="multipart/form-data",B={target:b.target,method:b.method,encoding:b.encoding,enctype:b.enctype,action:b.action},a=function(h,v){m=document.createElement("input");Ext.fly(m).set({type:"hidden",value:v,name:h});b.appendChild(m);c.push(m)},m,p,z,s,y,o,t,A,f;r.set({name:w,cls:"x-hidden-display",src:Ext.SSL_SECURE_URL,tabIndex:-1});document.body.appendChild(u);if(document.frames){document.frames[w].name=w}Ext.fly(b).set({target:w,method:"POST",enctype:d,encoding:d,action:j||B.action});if(q){p=Ext.Object.fromQueryString(q)||{};for(s in p){if(p.hasOwnProperty(s)){z=p[s];if(Ext.isArray(z)){y=z.length;for(o=0;o<y;o++){a(s,z[o])}}else{a(s,z)}}}}this.frame=r;r.on({load:this.onComplete,scope:this,single:!Ext.isOpera});b.submit();Ext.fly(b).set(B);for(t=c.length,A=0;A<t;A++){Ext.removeNode(c[A])}return b},getDoc:function(){var a=this.frame.dom;return(a&&(a.contentWindow.document||a.contentDocument))||(window.frames[a.id]||{}).document},getTimeout:function(){return this.options.timeout},onComplete:function(){var m=this,f=m.frame,d=m.owner,c=m.options,a,o,b,h,g;if(!f){return}if(m.aborted||m.timedout){m.result=g=m.createException();g.responseXML=null;g.responseText='{success:false,message:"'+Ext.String.trim(g.statusText)+'"}';a=c.failure;b=false}else{try{o=m.getDoc();m.result=g={responseText:"",responseXML:null};if(o){if(Ext.isOpera&&o.location==Ext.SSL_SECURE_URL){return}if(o.body){if((h=o.body.firstChild)&&/pre/i.test(h.tagName)){g.responseText=h.textContent||h.innerText}else{if((h=o.getElementsByTagName("textarea")[0])){g.responseText=h.value}else{g.responseText=o.body.textContent||o.body.innerText}}}g.responseXML=o.XMLDocument||o;a=c.success;b=true;g.status=200}else{Ext.raise("Could not acquire a suitable connection for the file upload service.")}}catch(j){m.result=g=m.createException();g.status=400;g.statusText=(j.message||j.description)+"";g.responseText='{success:false,message:"'+Ext.String.trim(g.statusText)+'"}';g.responseXML=null;a=c.failure;b=false}}m.frame=null;m.success=b;d.fireEvent(b?"requestcomplete":"requestexception",d,g,c);Ext.callback(a,c.scope,[g,c]);Ext.callback(c.callback,c.scope,[c,b,g]);d.onRequestComplete(m);Ext.asap(f.destroy,f);Ext.data.request.Base.prototype.onComplete.call(this)},destroy:function(){this.cleanup();Ext.data.request.Base.prototype.destroy.call(this)}},0,0,0,0,["request.form"],0,[Ext.data.request,"Form"],0));(Ext.cmd.derive("Ext.data.Connection",Ext.Base,{statics:{requestId:0},enctypeRe:/multipart\/form-data/i,config:{url:null,async:true,username:"",password:"",disableCaching:true,withCredentials:false,binary:false,cors:false,isXdr:false,defaultXdrContentType:"text/plain",disableCachingParam:"_dc",timeout:30000,extraParams:null,autoAbort:false,method:null,defaultHeaders:null,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:true,defaultXhrHeader:"XMLHttpRequest"},constructor:function(a){this.mixins.observable.constructor.call(this,a);this.requests={}},request:function(d){d=d||{};var b=this,c,a;if(b.fireEvent("beforerequest",b,d)!==false){c=b.setOptions(d,d.scope||Ext.global);a=b.createRequest(d,c);return a.start(c.data)}Ext.callback(d.callback,d.scope,[d,undefined,undefined]);return Ext.Deferred.rejected([d,undefined,undefined])},createRequest:function(d,c){var b=this,f=d.type||c.type,a;if(!f){f=b.isFormUpload(d)?"form":"ajax"}if(d.autoAbort||b.getAutoAbort()){b.abort()}a=Ext.Factory.request({type:f,owner:b,options:d,requestOptions:c,ownerConfig:b.getConfig()});b.requests[a.id]=a;b.latestId=a.id;return a},isFormUpload:function(a){var b=this.getForm(a);if(b){return a.isUpload||this.enctypeRe.test(b.getAttribute("enctype"))}return false},getForm:function(a){return Ext.getDom(a.form)},setOptions:function(b,q){var o=this,g=b.params||{},m=o.getExtraParams(),f=b.urlParams,d=b.url||o.getUrl(),j=b.cors,p=b.jsonData,c,a,h;if(j!==undefined){o.setCors(j)}if(Ext.isFunction(g)){g=g.call(q,b)}if(Ext.isFunction(d)){d=d.call(q,b)}d=this.setupUrl(b,d);h=b.rawData||b.binaryData||b.xmlData||p||null;if(p&&!Ext.isPrimitive(p)){h=Ext.encode(h)}if(b.binaryData){if(o.nativeBinaryPostSupport()){h=(new Uint8Array(b.binaryData));if((Ext.isChrome&&Ext.chromeVersion<22)||Ext.isSafari||Ext.isGecko){h=h.buffer}}}if(Ext.isObject(g)){g=Ext.Object.toQueryString(g)}if(Ext.isObject(m)){m=Ext.Object.toQueryString(m)}g=g+((m)?((g)?"&":"")+m:"");f=Ext.isObject(f)?Ext.Object.toQueryString(f):f;g=this.setupParams(b,g);c=(b.method||o.getMethod()||((g||h)?"POST":"GET")).toUpperCase();this.setupMethod(b,c);a=b.disableCaching!==false?(b.disableCaching||o.getDisableCaching()):false;if(c==="GET"&&a){d=Ext.urlAppend(d,(b.disableCachingParam||o.getDisableCachingParam())+"="+(new Date().getTime()))}if((c=="GET"||h)&&g){d=Ext.urlAppend(d,g);g=null}if(f){d=Ext.urlAppend(d,f)}return{url:d,method:c,data:h||g||null}},setupUrl:function(c,b){var a=this.getForm(c);if(a){b=b||a.action}return b},setupParams:function(c,b){var a=this.getForm(c),d;if(a&&!this.isFormUpload(c)){d=Ext.Element.serializeForm(a);b=b?(b+"&"+d):d}return b},setupMethod:function(a,b){if(this.isFormUpload(a)){return"POST"}return b},isLoading:function(a){if(!a){a=this.getLatest()}return a?a.isLoading():false},abort:function(a){if(!a){a=this.getLatest()}if(a&&a.isLoading()){a.abort()}},abortAll:function(){var b=this.requests,a;for(a in b){this.abort(b[a])}},getLatest:function(){var b=this.latestId,a;if(b){a=this.requests[b]}return a||null},clearTimeout:function(a){if(!a){a=this.getLatest()}if(a){a.clearTimer()}},onRequestComplete:function(a){delete this.requests[a.id]},nativeBinaryPostSupport:function(){return Ext.isChrome||(Ext.isSafari&&Ext.isDefined(window.Uint8Array))||(Ext.isGecko&&Ext.isDefined(window.Uint8Array))}},1,0,0,0,0,[["observable",Ext.mixin.Observable]],[Ext.data,"Connection"],0));(Ext.cmd.derive("Ext.Ajax",Ext.data.Connection,{singleton:true,autoAbort:false},0,0,0,0,0,0,[Ext,"Ajax"],0));(Ext.cmd.derive("Ext.AnimationQueue",Ext.Base,{singleton:true,constructor:function(){var a=this;a.queue=[];a.taskQueue=[];a.runningQueue=[];a.idleQueue=[];a.isRunning=false;a.isIdle=true;a.run=Ext.Function.bind(a.run,a);if(Ext.os.is.iOS){Ext.interval(a.watch,500,a)}},start:function(a,d,c){var b=this;b.queue.push(arguments);if(!b.isRunning){if(b.hasOwnProperty("idleTimer")){clearTimeout(b.idleTimer);delete b.idleTimer}if(b.hasOwnProperty("idleQueueTimer")){clearTimeout(b.idleQueueTimer);delete b.idleQueueTimer}b.isIdle=false;b.isRunning=true;b.doStart()}},watch:function(){if(this.isRunning&&Ext.now()-this.lastRunTime>=500){this.run()}},run:function(){var b=this;if(!b.isRunning){return}var c=b.runningQueue,d=Ext.now(),f,a;b.lastRunTime=d;b.frameStartTime=d;c.push.apply(c,b.queue);for(f=0,a=c.length;f<a;f++){b.invoke(c[f])}c.length=0;b.doIterate()},doStart:function(){this.animationFrameId=Ext.Function.requestAnimationFrame(this.run);this.lastRunTime=Ext.now()},doIterate:function(){this.animationFrameId=Ext.Function.requestAnimationFrame(this.run)},doStop:function(){Ext.Function.cancelAnimationFrame(this.animationFrameId)},stop:function(d,c,a){var h=this;if(!h.isRunning){return}var j=h.queue,g=j.length,b,f;for(b=0;b<g;b++){f=j[b];if(f[0]===d&&f[1]===c&&f[2]===a){j.splice(b,1);b--;g--}}if(g===0){h.doStop();h.isRunning=false;h.idleTimer=Ext.defer(h.whenIdle,100,h)}},onIdle:function(f,d,a){var c=this.idleQueue,b,g,h;for(b=0,g=c.length;b<g;b++){h=c[b];if(f===h[0]&&d===h[1]&&a===h[2]){return}}c.push(arguments);if(this.isIdle){this.processIdleQueue()}},unIdle:function(f,d,a){var c=this.idleQueue,b,g,h;for(b=0,g=c.length;b<g;b++){h=c[b];if(f===h[0]&&d===h[1]&&a===h[2]){c.splice(b,1);return true}}return false},queueTask:function(a,c,b){this.taskQueue.push(arguments);this.processTaskQueue()},dequeueTask:function(f,d,a){var c=this.taskQueue,b,g,h;for(b=0,g=c.length;b<g;b++){h=c[b];if(f===h[0]&&d===h[1]&&a===h[2]){c.splice(b,1);b--;g--}}},invoke:function(b){var a=b[0],d=b[1],c=b[2];a=(typeof a=="string"?d[a]:a);if(Ext.isArray(c)){a.apply(d,c)}else{a.call(d,c)}},whenIdle:function(){this.isIdle=true;this.processIdleQueue()},processIdleQueue:function(){if(!this.hasOwnProperty("idleQueueTimer")){this.idleQueueTimer=Ext.defer(this.processIdleQueueItem,1,this)}},processIdleQueueItem:function(){delete this.idleQueueTimer;if(!this.isIdle){return}var a=this.idleQueue,b;if(a.length>0){b=a.shift();this.invoke(b);this.processIdleQueue()}},processTaskQueue:function(){if(!this.hasOwnProperty("taskQueueTimer")){this.taskQueueTimer=Ext.defer(this.processTaskQueueItem,15,this)}},processTaskQueueItem:function(){delete this.taskQueueTimer;var a=this.taskQueue,b;if(a.length>0){b=a.shift();this.invoke(b);this.processTaskQueue()}}},1,0,0,0,0,0,[Ext,"AnimationQueue"],0));(Ext.cmd.derive("Ext.ComponentManager",Ext.Base,{alternateClassName:"Ext.ComponentMgr",singleton:true,count:0,typeName:"xtype",constructor:function(a){var b=this;Ext.apply(b,a||{});b.all={};b.references={};b.onAvailableCallbacks={}},create:function(a,b){if(typeof a==="string"){return Ext.widget(a)}if(a.isComponent){return a}if("xclass" in a){return Ext.create(a.xclass,a)}return Ext.widget(a.xtype||b,a)},get:function(a){return this.all[a]},register:function(c){var b=this,a=b.all,f=c.getId(),d=b.onAvailableCallbacks;a[f]=c;if(c.getReference&&c.getReference()){b.references[f]=c}++b.count;if(!b.hasFocusListener){Ext.on("focus",b.onGlobalFocus,b);b.hasFocusListener=true}d=d&&d[f];if(d&&d.length){b.notifyAvailable(c)}},unregister:function(a){var b=a.getId();if(a.getReference&&a.getReference()){this.references[b]=null;delete this.references[b]}this.all[b]=null;delete this.all[b];this.count--},markReferencesDirty:function(){this.referencesDirty=true},fixReferences:function(){var a=this,c=a.references,b;if(a.referencesDirty){for(b in c){if(c.hasOwnProperty(b)){c[b].fixReference()}}a.referencesDirty=false}},onAvailable:function(h,c,b){var g=this,f=g.onAvailableCallbacks,a=g.all,d;if(h in a){d=a[h];c.call(b||d,d)}else{if(h){if(!Ext.isArray(f[h])){f[h]=[]}f[h].push(function(j){c.call(b||j,j)})}}},notifyAvailable:function(b){var a=this.onAvailableCallbacks[b&&b.getId()]||[];while(a.length){(a.shift())(b)}},each:function(b,a){return Ext.Object.each(this.all,b,a)},getCount:function(){return this.count},getAll:function(){return Ext.Object.getValues(this.all)},getActiveComponent:function(){return Ext.Component.fromElement(Ext.dom.Element.getActiveElement())},onGlobalFocus:function(g){var c=this,a=g.toElement,h=g.fromElement,f=Ext.Component.fromElement(a),j=Ext.Component.fromElement(h),b,d;if(f===j){return}b=c.getCommonAncestor(j,f);if(j&&!(j.destroyed||j.destroying)){if(j.handleBlurEvent){j.handleBlurEvent(g)}for(d=j;d&&d!==b;d=d.getRefOwner()){if(!(d.destroyed||d.destroying)){d.onFocusLeave({event:g.event,type:"focusleave",target:h,relatedTarget:a,fromComponent:j,toComponent:f})}}}if(f&&!f.destroyed){if(f.handleFocusEvent){f.handleFocusEvent(g)}for(d=f;d&&d!==b;d=d.getRefOwner()){d.onFocusEnter({event:g.event,type:"focusenter",relatedTarget:h,target:a,fromComponent:j,toComponent:f})}}},getCommonAncestor:function(b,a){if(b===a){return b}while(b&&!(b.isAncestor(a)||b===a)){b=b.getRefOwner()}return b},privates:{clearAll:function(){this.all={};this.references={};this.onAvailableCallbacks={}},fromElement:function(g,j,h){var b=Ext.getDom(g),f=this.all,m=0,d,a,c;if(typeof j!=="number"){d=Ext.getDom(j);j=Number.MAX_VALUE}while(b&&b.nodeType===1&&m<j&&b!==d){a=b.getAttribute("data-componentid")||b.id;if(a){c=f[a];if(c&&(!h||Ext.ComponentQuery.is(c,h))){return c}m++}b=b.parentNode}return null}},deprecated:{5:{methods:{isRegistered:null,registerType:null}}}},1,0,0,0,0,0,[Ext,"ComponentManager",Ext,"ComponentMgr"],function(){Ext.getCmp=function(a){return Ext.ComponentManager.get(a)}}));Ext.ns("Ext.util").Operators={"=":function(b,c){return b==c},"!=":function(b,c){return b!=c},"^=":function(b,c){return b&&b.substr(0,c.length)==c},"$=":function(b,c){return b&&b.substr(b.length-c.length)==c},"*=":function(b,c){return b&&b.indexOf(c)!==-1},"%=":function(b,c){return(b%c)===0},"|=":function(b,c){return b&&(b==c||b.substr(0,c.length+1)==c+"-")},"~=":function(b,c){return b&&(" "+b+" ").indexOf(" "+c+" ")!=-1}};(Ext.cmd.derive("Ext.util.LruCache",Ext.util.HashMap,{config:{maxSize:null},add:function(c,b){var a=this,f,d;a.removeAtKey(c);d=a.last;f={prev:d,next:null,key:c,value:b};if(d){d.next=f}else{a.first=f}a.last=f;Ext.util.HashMap.prototype.add.call(this,c,f);a.prune();return b},insertBefore:function(c,a,d){var g=this,b,f;if(d=this.map[this.findKey(d)]){b=g.findKey(a);if(b){g.unlinkEntry(f=g.map[b])}else{f={prev:d.prev,next:d,key:c,value:a}}if(d.prev){f.prev.next=f}else{g.first=f}f.next=d;d.prev=f;g.prune();return a}else{return g.add(c,a)}},get:function(a){var b=this.map[a];if(b){if(b.next){this.moveToEnd(b)}return b.value}},removeAtKey:function(a){this.unlinkEntry(this.map[a]);return Ext.util.HashMap.prototype.removeAtKey.apply(this,arguments)},clear:function(a){this.first=this.last=null;return Ext.util.HashMap.prototype.clear.call(this,a)},unlinkEntry:function(a){if(a){if(a.next){a.next.prev=a.prev}else{this.last=a.prev}if(a.prev){a.prev.next=a.next}else{this.first=a.next}a.prev=a.next=null}},moveToEnd:function(a){this.unlinkEntry(a);if(a.prev=this.last){this.last.next=a}else{this.first=a}this.last=a},getArray:function(a){var b=[],c=this.first;while(c){b.push(a?c.key:c.value);c=c.next}return b},each:function(d,c,b){var a=this,g=b?a.last:a.first,f=a.length;c=c||a;while(g){if(d.call(c,g.key,g.value,f)===false){break}g=b?g.prev:g.next}return a},findKey:function(c){var b,a=this.map;for(b in a){if(a.hasOwnProperty(b)&&a[b].value===c){return b}}return undefined},clone:function(){var b=new this.self(this.initialConfig),a=this.map,c;b.suspendEvents();for(c in a){if(a.hasOwnProperty(c)){b.add(c,a[c].value)}}b.resumeEvents();return b},prune:function(){var c=this,b=c.getMaxSize(),a=b?(c.length-b):0;if(a>0){for(;c.first&&a;a--){c.removeAtKey(c.first.key)}}},destroy:function(){this.first=this.last=null;Ext.util.HashMap.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.util,"LruCache"],0));(Ext.cmd.derive("Ext.ComponentQuery",Ext.Base,{singleton:true},0,0,0,0,0,0,[Ext,"ComponentQuery"],function(){var g=this,m=Ext.util.Operators,q=/(\d*)n\+?(\d*)/,f=/\D/,s=/^(\s)+/,r=/\\(.)/g,t=new Ext.util.LruCache({maxSize:100}),u=["var r = [],","i = 0,","it = items,","l = it.length,","c;","for (; i < l; i++) {","c = it[i];","if (c.{0}) {","r.push(c);","}","}","return r;"].join(""),v=function(z,y){return y.method.apply(this,[z].concat(y.args))},a=function(z,y){var A=[],B=0,E=z.length,C,D=y!==">";for(;B<E;B++){C=z[B];if(C.getRefItems){A=A.concat(C.getRefItems(D))}}return A},j=function(C){var A=[],z=0,y=C.length,B;for(;z<y;z++){B=C[z];while(!!(B=B.getRefOwner())){A.push(B)}}return A},d=function(C,y,E){if(y==="*"){return C.slice()}else{var A=[],z=0,D=C.length,B;for(;z<D;z++){B=C[z];if(B.isXType(y,E)){A.push(B)}}return A}},b=function(A,B,I,H){var F=[],z=0,G=A.length,D,K,C,E,y,L,J;if(B.charAt(0)==="@"){D=true;B=B.substr(1)}if(B.charAt(0)==="?"){D=true;K=true;B=B.substr(1)}for(;z<G;z++){C=A[z];J=C.getConfigurator&&C.self.$config.configs[B];if(J){E=C[J.names.get]()}else{if(D&&!C.hasOwnProperty(B)){continue}else{E=C[B]}}if(K){F.push(C)}else{if(I==="~="){if(E){if(!Ext.isArray(E)){E=E.split(" ")}for(y=0,L=E.length;y<L;y++){if(m[I](Ext.coerce(E[y],H),H)){F.push(C);break}}}}else{if(I==="/="){if(E!=null&&H.test(E)){F.push(C)}}else{if(!H?!!C[B]:m[I](Ext.coerce(E,H),H)){F.push(C)}}}}}return F},o=function(C,y){var A=[],z=0,D=C.length,B;for(;z<D;z++){B=C[z];if(B.getItemId()===y){A.push(B)}}return A},h=function(A,y,z){return g.pseudos[y](A,z)},p=/^(\s?([>\^])\s?|\s|$)/,w=/^(#)?((?:\\\.|[\w\-])+|\*)(?:\((true|false)\))?/,c=[{re:/^\.((?:\\\.|[\w\-])+)(?:\((true|false)\))?/,method:d,argTransform:function(y){if(y[1]!==undefined){y[1]=y[1].replace(r,"$1")}return y.slice(1)}},{re:/^(?:\[((?:[@?$])?[\w\-]*)\s*(?:([\^$*~%!\/]?=)\s*(['"])?((?:\\\]|.)*?)\3)?(?!\\)\])/,method:b,argTransform:function(A){var B=A[0],C=A[1],D=A[2],z=A[4],y;if(z!==undefined){z=z.replace(r,"$1")}if(D==="/="){y=t.get(z);if(y){z=y}else{z=t.add(z,new RegExp(z))}}return[C,D,z]}},{re:/^#((?:\\\.|[\w\-])+)/,method:o},{re:/^\:([\w\-]+)(?:\(((?:\{[^\}]+\})|(?:(?!\{)[^\s>\/]*?(?!\})))\))?/,method:h,argTransform:function(y){if(y[2]!==undefined){y[2]=y[2].replace(r,"$1")}return y.slice(1)}},{re:/^(?:\{([^\}]+)\})/,method:u}];g.Query=Ext.extend(Object,{constructor:function(y){y=y||{};Ext.apply(this,y)},execute:function(z){var A=this.operations,C=[],y,D,B;for(D=0,B=A.length;D<B;D++){y=A[D];C=C.concat(this._execute(z,y))}return C},_execute:function(C,A){var D=0,y=A.length,z,B;if(!C){B=Ext.ComponentManager.getAll()}else{if(Ext.isIterable(C)){B=C}else{if(C.isMixedCollection){B=C.items}}}for(;D<y;D++){z=A[D];if(z.mode==="^"){B=j(B||[C])}else{if(z.mode){B=a(B||[C],z.mode)}else{B=v(B||a([C]),z)}}if(D===y-1){return B}}return[]},is:function(A){var z=this.operations,C=false,B=z.length,y,D;if(B===0){return true}for(D=0;D<B;D++){y=z[D];C=this._is(A,y);if(C){return C}}return false},_is:function(A,C){var y=C.length,D=[A],E,G,F,H,z,B;for(G=y-1;G>=0;--G){E=C[G];H=E.mode;if(H){if(H==="^"){D=a(D," ")}else{if(H===">"){z=[];for(F=0,y=D.length;F<y;++F){B=D[F].getRefOwner();if(B){z.push(B)}}D=z}else{D=j(D)}}if(D.length===0){return false}}else{D=v(D,E);if(D.length===0){return false}}}return true},getMatches:function(A,y){var B=y.length,z;for(z=0;z<B;++z){A=v(A,y[z]);if(A.length===0){break}}return A},isMultiMatch:function(){return this.operations.length>1}});Ext.apply(g,{cache:new Ext.util.LruCache({maxSize:100}),pseudos:{not:function(y,A){var C=0,E=y.length,B=[],z=-1,D;for(;C<E;++C){D=y[C];if(!g.is(D,A)){B[++z]=D}}return B},first:function(z){var y=[];if(z.length>0){y.push(z[0])}return y},last:function(z){var A=z.length,y=[];if(A>0){y.push(z[A-1])}return y},focusable:function(C){var A=C.length,B=[],z=0,y;for(;z<A;z++){y=C[z];if(y.isFocusable&&y.isFocusable()){B.push(y)}}return B},"nth-child":function(y,z){var A=[],C=q.exec(z==="even"&&"2n"||z==="odd"&&"2n+1"||!f.test(z)&&"n+"+z||z),F=(C[1]||1)-0,G=C[2]-0,E,B,D;for(E=0;B=y[E];E++){D=E+1;if(F===1){if(G===0||D===G){A.push(B)}}else{if((D+G)%F===0){A.push(B)}}}return A},scrollable:function(C){var A=C.length,B=[],z=0,y;for(;z<A;z++){y=C[z];if(y.scrollable||y._scrollable){B.push(y)}}return B}},query:function(B,z){if(!B){return Ext.ComponentManager.all.getArray()}var D=[],A=[],G={},F=g.cache.get(B),E,y,C;if(!F){F=g.cache.add(B,g.parse(B))}D=F.execute(z);if(F.isMultiMatch()){E=D.length;for(C=0;C<E;C++){y=D[C];if(!G[y.id]){A.push(y);G[y.id]=true}}D=A}return D},visitPreOrder:function(A,z,C,B,y){g._visit(true,A,z,C,B,y)},visitPostOrder:function(A,z,C,B,y){g._visit(false,A,z,C,B,y)},_visit:function(C,F,B,A,D,J){var z=g.cache.get(F),I=[B],E,y=0,H,G;if(!z){z=g.cache.add(F,g.parse(F))}G=z.is(B);if(B.getRefItems){E=B.getRefItems();y=E.length}if(J){Ext.Array.push(I,J)}if(C){if(G){if(A.apply(D||B,I)===false){return false}}}for(H=0;H<y;H++){if(g._visit.call(g,C,F,E[H],A,D,J)===false){return false}}if(!C){if(G){if(A.apply(D||B,I)===false){return false}}}},is:function(y,A){if(!A){return true}var z=g.cache.get(A);if(!z){z=g.cache.add(A,g.parse(A))}return z.is(y)},parse:function(C){var z=[],D,y,A,B;D=Ext.splitAndUnescape(C,",");for(A=0,B=D.length;A<B;A++){y=Ext.String.trim(D[A]);z.push(g._parse(y))}return new g.Query({operations:z})},_parse:function(L){var E=[],J=Ext.String.trim,H=c.length,B,M,K,C,F,G,I,y,z,D,A;while(L&&B!==L){B=L;M=L.match(w);if(M){C=M[1];K=J(M[2]).replace(r,"$1");if(C==="#"){E.push({method:o,args:[K]})}else{E.push({method:d,args:[K,Boolean(M[3])]})}L=L.replace(M[0],"").replace(s,"$1")}while(!(F=L.match(p))){for(y=0;L&&y<H;y++){z=c[y];G=L.match(z.re);D=z.method;I=z.argTransform;if(G){if(I){A=I(G)}else{A=G.slice(1)}E.push({method:Ext.isString(z.method)?Ext.functionFactory("items",Ext.String.format.apply(Ext.String,[D].concat(G.slice(1)))):z.method,args:A});L=L.replace(G[0],"").replace(s,"$1");break}if(y===(H-1)){Ext.raise('Invalid ComponentQuery selector: "'+arguments[0]+'"')}}}if(F[1]){E.push({mode:F[2]||F[1]});L=L.replace(F[0],"").replace(s,"")}}return E}});Ext.all=function(){return g.query.apply(g,arguments)};Ext.first=function(){var y=g.query.apply(g,arguments);return(y&&y[0])||null}}));(Ext.cmd.derive("Ext.Evented",Ext.Base,{alternateClassName:"Ext.EventedBase",initialized:false,constructor:function(a){this.mixins.observable.constructor.call(this,a);this.initialized=true},onClassExtended:function(c,g){if(!g.hasOwnProperty("eventedConfig")){return}var f=g.config,a=g.eventedConfig,d,b;if(f){Ext.applyIf(f,a)}else{c.addConfig(a)}for(d in a){if(a.hasOwnProperty(d)){b=Ext.Config.get(d);g[b.names.set]=b.eventedSetter||b.getEventedSetter()}}}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext,"Evented",Ext,"EventedBase"],0));(Ext.cmd.derive("Ext.util.Positionable",Ext.Base,{mixinId:"positionable",_positionTopLeft:["position","top","left"],_alignRe:/^([a-z]+)-([a-z]+)([?!])?$/,afterSetPosition:Ext.emptyFn,adjustForConstraints:function(a,c){var b=this.getConstrainVector(c,a);if(b){a[0]+=b[0];a[1]+=b[1]}return a},alignTo:function(d,b,a,c){var g=this,f=g.el;return g.setXY(g.getAlignToXY(d,b,a),f.anim&&!!c?f.anim(c):false)},calculateAnchorXY:function(h,m,j,f){var o=this,d=o.el,p=document,g=(d.dom===p.body||d.dom===p),q=Math.round,b,c,a;h=(h||"tl").toLowerCase();f=f||{};c=f.width||(g?Ext.Element.getViewportWidth():o.getWidth());a=f.height||(g?Ext.Element.getViewportHeight():o.getHeight());switch(h){case"tl":b=[0,0];break;case"bl":b=[0,a];break;case"tr":b=[c,0];break;case"c":b=[q(c*0.5),q(a*0.5)];break;case"t":b=[q(c*0.5),0];break;case"l":b=[0,q(a*0.5)];break;case"r":b=[c,q(a*0.5)];break;case"b":b=[q(c*0.5),a];break;case"tc":b=[q(c*0.5),0];break;case"bc":b=[q(c*0.5),a];break;case"br":b=[c,a]}return[b[0]+m,b[1]+j]},convertPositionSpec:Ext.identityFn,getAlignToXY:function(m,u,f){var v=this,d,r,a,h,C,g,D,w,A,B,p,z,t,b,c,j,q,s,o;m=Ext.get(m.el||m);if(!m||!m.dom){}f=f||[0,0];u=(!u||u==="?"?"tl-bl?":(!(/-/).test(u)&&u!==""?"tl-"+u:u||"tl-bl")).toLowerCase();u=v.convertPositionSpec(u);a=u.match(v._alignRe);z=a[1];t=a[2];p=!!a[3];h=v.getAnchorXY(z,true);C=v.getAnchorToXY(m,t,false);s=C[0]-h[0]+f[0];o=C[1]-h[1]+f[1];if(p){if(a[3]==="!"){d=m}else{d=v.constrainTo||v.container||v.el.parent()}d=Ext.get(d.el||d);r=d.getConstrainRegion();r.right=r.left+d.el.dom.clientWidth;g=v.getWidth();D=v.getHeight();w=m.getRegion();b=z.charAt(0);c=z.charAt(z.length-1);j=t.charAt(0);q=t.charAt(t.length-1);A=(s<w.right&&s+g>=w.left)&&((b=="t"&&j=="b")||(b=="b"&&j=="t"));B=(o<w.bottom&&o+D>=w.top)&&((c=="r"&&q=="l")||(c=="l"&&q=="r"));if(s+g>r.right){if(B){s=w.left-g;B=false}else{s=r.right-g}}if(s<r.left){s=B?w.right:r.left}if(o+D>r.bottom){if(A){o=w.top-D;A=false}else{o=r.bottom-D}}if(o<r.top){o=A?w.bottom:r.top}}return[s,o]},getAnchorXY:function(g,o,d){var m=this,p=m.getXY(),c=m.el,b=document,f=c.dom==b.body||c.dom==b,a=c.getScroll(),j=f?a.left:o?0:p[0],h=f?a.top:o?0:p[1];return m.calculateAnchorXY(g,j,h,d)},getBox:function(g,o){var j=this,d=o?j.getLocalXY():j.getXY(),p=d[0],m=d[1],q=j.getWidth(),c=j.getHeight(),f,b,a;if(g){f=j.getBorderPadding();b=f.beforeX;a=f.beforeY;p+=b;m+=a;q-=(b+f.afterX);c-=(a+f.afterY)}return{x:p,left:p,0:p,y:m,top:m,1:m,width:q,height:c,right:p+q,bottom:m+c}},calculateConstrainedPosition:function(f,r,m,b){var j=this,a,g=j.floatParent,c=g?g.getTargetEl():null,p,d,h,q=false,o;if(m&&g){p=c.getXY();d=c.getBorderPadding();p[0]+=d.beforeX;p[1]+=d.beforeY;if(r){h=[r[0]+p[0],r[1]+p[1]]}}else{h=r}f=f||j.constrainTo||c||j.container||j.el.parent();if(m&&h){h=j.reverseTranslateXY(h)}a=((j.constrainHeader&&j.header.rendered)?j.header:j).getConstrainVector(f,h,b);if(a){q=r||j.getPosition(m);q[0]+=a[0];q[1]+=a[1]}return q},getConstrainRegion:function(){var m=this,f=m.el,c=f.dom.nodeName==="BODY",h=f.dom,j=f.getBorders(),o=f.getXY(),g=o[0]+j.beforeX,p=o[1]+j.beforeY,a,d,b;if(c){a=f.getScroll();g=a.left;p=a.top;d=Ext.Element.getViewportWidth();b=Ext.Element.getViewportHeight()}else{d=h.clientWidth;b=h.clientHeight}return new Ext.util.Region(p,g+d,p+b,g)},getConstrainVector:function(b,h,m){var f=this.getRegion(),j=[0,0],g=(this.shadow&&this.constrainShadow&&!this.shadowDisabled)?this.shadow.getShadowSize():undefined,d=false,c,a=this.constraintInsets;if(!(b instanceof Ext.util.Region)){b=Ext.get(b.el||b);c=b.getViewSize();b=b.getConstrainRegion();b.right=b.left+c.width;b.bottom=b.top+c.height}if(a){a=Ext.isObject(a)?a:Ext.Element.parseBox(a);b.adjust(a.top,a.right,a.bottom,a.left)}if(h){f.translateBy(h[0]-f.x,h[1]-f.y)}if(m){f.right=f.left+m[0];f.bottom=f.top+m[1]}if(g){b.adjust(g[0],-g[1],-g[2],g[3])}if(f.right>b.right){d=true;j[0]=(b.right-f.right)}if(f.left+j[0]<b.left){d=true;j[0]=(b.left-f.left)}if(f.bottom>b.bottom){d=true;j[1]=(b.bottom-f.bottom)}if(f.top+j[1]<b.top){d=true;j[1]=(b.top-f.top)}return d?j:false},getOffsetsTo:function(b){var a=this.getXY(),c=Ext.fly(b.el||b).getXY();return[a[0]-c[0],a[1]-c[1]]},getRegion:function(){var a=this.getBox();return new Ext.util.Region(a.top,a.right,a.bottom,a.left)},getClientRegion:function(){var d=this,c,a=d.getBox(),b=d.dom;c=b.offsetWidth-b.clientWidth;if(c){if(d.getStyle("direction")==="rtl"){a.left+=c}else{a.right-=c}}c=b.offsetHeight-b.clientHeight;if(c){a.bottom-=c}return new Ext.util.Region(a.top,a.right,a.bottom,a.left)},getViewRegion:function(){var m=this,g=m.el,d=g.dom.nodeName==="BODY",j,b,o,a,h,f,c;if(d){b=g.getScroll();h=b.left;a=b.top;f=Ext.Element.getViewportWidth();c=Ext.Element.getViewportHeight()}else{j=m.getBorderPadding();o=m.getXY();h=o[0]+j.beforeX;a=o[1]+j.beforeY;f=m.getWidth(true);c=m.getHeight(true)}return new Ext.util.Region(a,h+f,a+c,h)},move:function(o,c,d){var h=this,b=h.getXY(),p=b[0],m=b[1],f=[p-c,m],q=[p+c,m],j=[p,m-c],a=[p,m+c],g={l:f,left:f,r:q,right:q,t:j,top:j,up:j,b:a,bottom:a,down:a};o=o.toLowerCase();h.setXY([g[o][0],g[o][1]],d)},setBox:function(a){var d=this,c,b;if(a.isRegion){a={x:a.left,y:a.top,width:a.right-a.left,height:a.bottom-a.top}}d.constrainBox(a);c=a.x;b=a.y;d.setXY([c,b]);d.setSize(a.width,a.height);d.afterSetPosition(c,b);return d},constrainBox:function(a){var f=this,d,c,b;if(f.constrain||f.constrainHeader){c=("x" in a)?a.x:a.left;b=("y" in a)?a.y:a.top;d=f.calculateConstrainedPosition(null,[c,b],false,[a.width,a.height]);if(d){a.x=d[0];a.y=d[1]}}},translatePoints:function(b,a){var c=this.translateXY(b,a);return{left:c.x,top:c.y}},translateXY:function(b,m){var j=this,g=j.el,c=g.getStyle(j._positionTopLeft),f=c.position==="relative",h=parseFloat(c.left),a=parseFloat(c.top),d=j.getXY();if(Ext.isArray(b)){m=b[1];b=b[0]}if(isNaN(h)){h=f?0:g.dom.offsetLeft}if(isNaN(a)){a=f?0:g.dom.offsetTop}h=(typeof b==="number")?b-d[0]+h:undefined;a=(typeof m==="number")?m-d[1]+a:undefined;return{x:h,y:a}},reverseTranslateXY:function(c){var a=c,g=this.el,b=[],h=g.dom,f=h.offsetParent,d,j,o,m;if(f){d=g.isStyle("position","relative"),j=Ext.fly(f).getXY(),o=c[0]+j[0]+f.clientLeft;m=c[1]+j[1]+f.clientTop;if(d){o+=g.getPadding("l");m+=g.getPadding("t")}a=[o,m]}return a}},0,0,0,0,0,0,[Ext.util,"Positionable"],0));Ext.define("Ext.overrides.util.Positionable",{override:"Ext.util.Positionable",anchorTo:function(o,j,f,d,b,c){var m=this,a=!Ext.isEmpty(b),g=function(){m.alignTo(o,j,f,d);Ext.callback(c,m)},h=m.getAnchor();m.removeAnchor();Ext.apply(h,{fn:g,scroll:a});Ext.on("resize",g,null);if(a){Ext.getWin().on("scroll",g,null,{buffer:!isNaN(b)?b:50})}g();return m},getAnchor:function(){var c=this.el,a,b;if(!c.dom){return}a=c.getData();b=a._anchor;if(!b){b=a._anchor={}}return b},removeAnchor:function(){var a=this.getAnchor();if(a&&a.fn){Ext.un("resize",a.fn);if(a.scroll){Ext.getWin().on("scroll",a.fn)}delete a.fn}return this},setBox:function(a,b){var c=this;if(a.isRegion){a={x:a.left,y:a.top,width:a.right-a.left,height:a.bottom-a.top}}if(b){c.constrainBox(a);c.animate(Ext.applyIf({to:a,listeners:{afteranimate:Ext.Function.bind(c.afterSetPosition,c,[a.x,a.y])}},b))}else{arguments.callee.$previous.call(this,a)}return c}});(Ext.cmd.derive("Ext.dom.UnderlayPool",Ext.Base,{constructor:function(a){this.elementConfig=a;this.cache=[]},checkOut:function(){var a=this.cache.shift();if(!a){a=Ext.Element.create(this.elementConfig);a.setVisibilityMode(2)}return a},checkIn:function(a){this.cache.push(a)},reset:function(){var a=this.cache,b=a.length;while(b--){a[b].destroy()}this.cache=[]}},1,0,0,0,0,0,[Ext.dom,"UnderlayPool"],0));(Ext.cmd.derive("Ext.dom.Underlay",Ext.Base,{constructor:function(a){Ext.apply(this,a)},beforeShow:Ext.emptyFn,getInsertionTarget:function(){return this.target},getPool:function(){return this.pool||(this.self.prototype.pool=new Ext.dom.UnderlayPool(this.elementConfig))},hide:function(){var b=this,a=b.el;if(a){a.hide();b.getPool().checkIn(a);b.el=null;b.hidden=true}},realign:function(c,b,f,d){var m=this,g=m.el,j=m.target,h=m.offsets,a=Math.max;if(g){if(c==null){c=j.getX()}if(b==null){b=j.getY()}if(f==null){f=j.getWidth()}if(d==null){d=j.getHeight()}if(h){c=c+h.x;b=b+h.y;f=a(f+h.w,0);d=a(d+h.h,0)}g.setXY([c,b]);g.setSize(f,d)}},setZIndex:function(a){this.zIndex=a;if(this.el){this.el.setStyle("z-index",a)}},show:function(){var c=this,f=c.target,a=c.zIndex,b=c.el,d=c.getInsertionTarget().dom,g;if(!b){b=c.el=c.getPool().checkOut()}c.beforeShow();if(a==null){a=(parseInt(f.getStyle("z-index"),10))}if(a){b.setStyle("z-index",a)}b.setStyle("position",c.fixed?"fixed":"");g=b.dom;if(g.nextSibling!==d){f.dom.parentNode.insertBefore(g,d)}b.show();c.realign();c.hidden=false}},1,0,0,0,0,0,[Ext.dom,"Underlay"],0));(Ext.cmd.derive("Ext.dom.Shadow",Ext.dom.Underlay,{alternateClassName:"Ext.Shadow",mode:"drop",offset:4,cls:"x-"+(!Ext.supports.CSS3BoxShadow?"ie":"css")+"-shadow",constructor:function(c){var f=this,g,d,a,b;Ext.dom.Underlay.prototype.constructor.call(this,c);f.elementConfig={cls:f.cls,role:"presentation"};a=f.offset;b=Math.floor(a/2);f.opacity=50;switch(f.mode.toLowerCase()){case"drop":g={x:0,y:0,w:a,h:a};if(Ext.supports.CSS3BoxShadow){d={x:a,y:a,h:-a,w:-a}}else{d={x:-b,y:-b,h:-b,w:-b}}break;case"sides":g={x:-a,y:0,w:a*2,h:a};if(Ext.supports.CSS3BoxShadow){d={x:0,y:a,h:-a,w:0}}else{d={x:1+b-2*a,y:-(1+b),h:-1,w:b-1}}break;case"frame":g={x:-a,y:-a,w:a*2,h:a*2};if(Ext.supports.CSS3BoxShadow){d={x:0,y:0,h:0,w:0}}else{d={x:1+b-2*a,y:1+b-2*a,h:a-b-1,w:a-b-1}}break;case"bottom":g={x:-a,y:0,w:a*2,h:a};if(Ext.supports.CSS3BoxShadow){d={x:0,y:a,h:-a,w:0}}else{d={x:0,y:a,h:0,w:0}}break}f.offsets=d;f.outerOffsets=g},getShadowSize:function(){var d=this,b=d.el?d.offset:0,c=[b,b,b,b],a=d.mode.toLowerCase();if(d.el&&a!=="frame"){c[0]=0;if(a=="drop"){c[3]=0}}return c},boxShadowProperty:(function(){var b="boxShadow",a=document.documentElement.style;if(!("boxShadow" in a)){if("WebkitBoxShadow" in a){b="WebkitBoxShadow"}else{if("MozBoxShadow" in a){b="MozBoxShadow"}}}return b}()),beforeShow:function(){var c=this,b=c.el.dom.style,a=c.shim;if(Ext.supports.CSS3BoxShadow){b[c.boxShadowProperty]="0 0 "+(c.offset+2)+"px #888"}else{b.filter="progid:DXImageTransform.Microsoft.alpha(opacity="+c.opacity+") progid:DXImageTransform.Microsoft.Blur(pixelradius="+(c.offset)+")"}if(a){a.realign()}},setOpacity:function(a){var b=this.el;if(b){if(Ext.isIE&&!Ext.supports.CSS3BoxShadow){a=Math.floor(a*100/2)/100}this.opacity=a;b.setOpacity(a)}}},1,0,0,0,0,0,[Ext.dom,"Shadow",Ext,"Shadow"],0));(Ext.cmd.derive("Ext.dom.Shim",Ext.dom.Underlay,{cls:"x-shim",constructor:function(a){Ext.dom.Underlay.prototype.constructor.call(this,a);this.elementConfig={tag:"iframe",cls:this.cls,role:"presentation",frameBorder:"0",src:Ext.SSL_SECURE_URL,tabindex:"-1"}},getInsertionTarget:function(){var a=this.shadow;return(a&&a.el)||this.target}},1,0,0,0,0,0,[Ext.dom,"Shim"],0));(Ext.cmd.derive("Ext.dom.ElementEvent",Ext.util.Event,{addListener:function(m,a,b,f,h){var j=this,o=false,c=j.name,d,g,p;b=b||{};if(b.delegated===false||Ext.event.publisher.Dom.instance.directEvents[c]){if(b.capture){p=j.directCaptures||(j.directCaptures=new Ext.util.Event(j.observable,c));o=p.addListener(m,a,b,f,h)}else{g=j.directs||(j.directs=new Ext.util.Event(j.observable,c));o=g.addListener(m,a,b,f,h)}}else{if(b.capture){d=j.captures||(j.captures=new Ext.util.Event(j.observable,c));o=d.addListener(m,a,b,f,h)}else{o=Ext.util.Event.prototype.addListener.call(this,m,a,b,f,h)}}return o},removeListener:function(d,c){var f=this,j=f.captures,b=f.directs,g=f.directCaptures,h=false,a=f.findListener(d,c);if(a!==-1){h=Ext.util.Event.prototype.removeListener.call(this,d,c,a)}else{if(b){a=b.findListener(d,c)}if(a!==-1){h=b.removeListener(d,c,a)}else{if(j){a=j.findListener(d,c)}if(a!==-1){h=j.removeListener(d,c,a)}else{if(g){a=g.findListener(d,c);if(a!==-1){h=g.removeListener(d,c,a)}}}}}return h},clearListeners:function(){var a=this,b=a.directCaptures,d=a.directs,c=a.captures;if(b){b.clearListeners()}if(d){d.clearListeners()}if(c){c.clearListeners()}Ext.util.Event.prototype.clearListeners.call(this)},suspend:function(){var a=this,b=a.directCaptures,d=a.directs,c=a.captures;if(b){b.suspend()}if(d){d.suspend()}if(c){c.suspend()}Ext.util.Event.prototype.suspend.call(this)},resume:function(){var a=this,b=a.directCaptures,d=a.directs,c=a.captures;if(b){b.resume()}if(d){d.resume()}if(c){c.resume()}Ext.util.Event.prototype.resume.call(this)}},0,0,0,0,0,0,[Ext.dom,"ElementEvent"],0));(Ext.cmd.derive("Ext.event.publisher.Publisher",Ext.Base,{handledEvents:[],statics:{publishers:{},publishersByEvent:{}},constructor:function(){var b=this,a=b.type;b.handles={};b.registerEvents();Ext.event.publisher.Publisher.publishers[a]=b},registerEvents:function(f){var h=this,d=Ext.event.publisher.Publisher.publishersByEvent,b=f||h.handledEvents,g=b.length,a,c;for(c=0;c<g;c++){a=b[c];h.handles[a]=1;d[a]=h}},fire:function(a,c,d){var b;if(a.hasListeners[c]){b=a.events[c];if(b){b.fire.apply(b,d)}}}},1,0,0,0,0,0,[Ext.event.publisher,"Publisher"],0));(Ext.cmd.derive("Ext.util.Offset",Ext.Base,{statics:{fromObject:function(a){return new this(a.x,a.y)}},constructor:function(a,b){this.x=(a!=null&&!isNaN(a))?a:0;this.y=(b!=null&&!isNaN(b))?b:0;return this},copy:function(){return new Ext.util.Offset(this.x,this.y)},copyFrom:function(a){this.x=a.x;this.y=a.y},toString:function(){return"Offset["+this.x+","+this.y+"]"},equals:function(a){return(this.x==a.x&&this.y==a.y)},round:function(b){if(!isNaN(b)){var a=Math.pow(10,b);this.x=Math.round(this.x*a)/a;this.y=Math.round(this.y*a)/a}else{this.x=Math.round(this.x);this.y=Math.round(this.y)}},isZero:function(){return this.x==0&&this.y==0}},3,0,0,0,0,0,[Ext.util,"Offset"],0));(Ext.cmd.derive("Ext.util.Region",Ext.Base,{isRegion:true,statics:{getRegion:function(a){return Ext.fly(a).getRegion()},from:function(a){return new this(a.top,a.right,a.bottom,a.left)}},constructor:function(b,d,c,a){var f=this;f.y=f.top=f[1]=b;f.right=d;f.bottom=c;f.x=f.left=f[0]=a},contains:function(b){var a=this;return(b.x>=a.x&&b.right<=a.right&&b.y>=a.y&&b.bottom<=a.bottom)},intersect:function(d){var c=this,g=Math.max(c.y,d.y),h=Math.min(c.right,d.right),a=Math.min(c.bottom,d.bottom),f=Math.max(c.x,d.x);if(a>g&&h>f){return new this.self(g,h,a,f)}else{return false}},union:function(d){var c=this,g=Math.min(c.y,d.y),h=Math.max(c.right,d.right),a=Math.max(c.bottom,d.bottom),f=Math.min(c.x,d.x);return new this.self(g,h,a,f)},constrainTo:function(c){var b=this,a=Ext.Number.constrain;b.top=b.y=a(b.top,c.y,c.bottom);b.bottom=a(b.bottom,c.y,c.bottom);b.left=b.x=a(b.left,c.x,c.right);b.right=a(b.right,c.x,c.right);return b},adjust:function(b,d,c,a){var f=this;f.top=f.y+=b;f.left=f.x+=a;f.right+=d;f.bottom+=c;return f},getOutOfBoundOffset:function(b,c){if(!Ext.isObject(b)){if(b=="x"){return this.getOutOfBoundOffsetX(c)}else{return this.getOutOfBoundOffsetY(c)}}else{c=b;var a=new Ext.util.Offset();a.x=this.getOutOfBoundOffsetX(c.x);a.y=this.getOutOfBoundOffsetY(c.y);return a}},getOutOfBoundOffsetX:function(a){if(a<=this.x){return this.x-a}else{if(a>=this.right){return this.right-a}}return 0},getOutOfBoundOffsetY:function(a){if(a<=this.y){return this.y-a}else{if(a>=this.bottom){return this.bottom-a}}return 0},isOutOfBound:function(a,b){if(!Ext.isObject(a)){if(a=="x"){return this.isOutOfBoundX(b)}else{return this.isOutOfBoundY(b)}}else{b=a;return(this.isOutOfBoundX(b.x)||this.isOutOfBoundY(b.y))}},isOutOfBoundX:function(a){return(a<this.x||a>this.right)},isOutOfBoundY:function(a){return(a<this.y||a>this.bottom)},restrict:function(d,b,c){if(Ext.isObject(d)){var a;c=b;b=d;if(b.copy){a=b.copy()}else{a={x:b.x,y:b.y}}a.x=this.restrictX(b.x,c);a.y=this.restrictY(b.y,c);return a}else{if(d=="x"){return this.restrictX(b,c)}else{return this.restrictY(b,c)}}},restrictX:function(b,a){if(!a){a=1}if(b<=this.x){b-=(b-this.x)*a}else{if(b>=this.right){b-=(b-this.right)*a}}return b},restrictY:function(b,a){if(!a){a=1}if(b<=this.y){b-=(b-this.y)*a}else{if(b>=this.bottom){b-=(b-this.bottom)*a}}return b},getSize:function(){return{width:this.right-this.x,height:this.bottom-this.y}},copy:function(){return new this.self(this.y,this.right,this.bottom,this.x)},copyFrom:function(b){var a=this;a.top=a.y=a[1]=b.y;a.right=b.right;a.bottom=b.bottom;a.left=a.x=a[0]=b.x;return this},toString:function(){return"Region["+this.top+","+this.right+","+this.bottom+","+this.left+"]"},translateBy:function(b,a){if(arguments.length==1){a=b.y;b=b.x}var c=this;c.top=c.y+=a;c.right+=b;c.bottom+=a;c.left=c.x+=b;return c},round:function(){var a=this;a.top=a.y=Math.round(a.y);a.right=Math.round(a.right);a.bottom=Math.round(a.bottom);a.left=a.x=Math.round(a.x);return a},equals:function(a){return(this.top===a.top&&this.right===a.right&&this.bottom===a.bottom&&this.left===a.left)}},3,0,0,0,0,0,[Ext.util,"Region"],0));(Ext.cmd.derive("Ext.util.Point",Ext.util.Region,{radianToDegreeConstant:180/Math.PI,origin:{x:0,y:0},statics:{fromEvent:function(c){var b=c.changedTouches,a=(b&&b.length>0)?b[0]:c;return this.fromTouch(a)},fromTouch:function(a){return new this(a.pageX,a.pageY)},from:function(a){if(!a){return new this(0,0)}if(!(a instanceof this)){return new this(a.x,a.y)}return a}},constructor:function(a,b){if(a==null){a=0}if(b==null){b=0}Ext.util.Region.prototype.constructor.call(this,b,a,b,a)},clone:function(){return new this.self(this.x,this.y)},copy:function(){return this.clone.apply(this,arguments)},copyFrom:function(a){this.x=a.x;this.y=a.y;return this},toString:function(){return"Point["+this.x+","+this.y+"]"},equals:function(a){return(this.x===a.x&&this.y===a.y)},isCloseTo:function(d,c){if(typeof c=="number"){return this.getDistanceTo(d)<=c}var b=d.x,a=d.y,g=c.x,f=c.y;return(this.x<=b+g&&this.x>=b-g&&this.y<=a+f&&this.y>=a-f)},isWithin:function(){return this.isCloseTo.apply(this,arguments)},isContainedBy:function(a){if(!(a instanceof Ext.util.Region)){a=Ext.get(a.el||a).getRegion()}return a.contains(this)},roundedEquals:function(a){if(!a||typeof a!=="object"){a=this.origin}return(Math.round(this.x)===Math.round(a.x)&&Math.round(this.y)===Math.round(a.y))},getDistanceTo:function(c){if(!c||typeof c!=="object"){c=this.origin}var a=this.x-c.x,b=this.y-c.y;return Math.sqrt(a*a+b*b)},getAngleTo:function(c){if(!c||typeof c!=="object"){c=this.origin}var a=this.x-c.x,b=this.y-c.y;return Math.atan2(b,a)*this.radianToDegreeConstant}},3,0,0,0,0,0,[Ext.util,"Point"],function(){this.prototype.translate=this.prototype.translateBy}));(Ext.cmd.derive("Ext.event.Event",Ext.Base,{alternateClassName:"Ext.EventObjectImpl",isStopped:false,defaultPrevented:false,isEvent:true,statics:{resolveTextNode:function(a){return(a&&a.nodeType===3)?a.parentNode:a},pointerEvents:{pointerdown:1,pointermove:1,pointerup:1,pointercancel:1,pointerover:1,pointerout:1,pointerenter:1,pointerleave:1,MSPointerDown:1,MSPointerMove:1,MSPointerUp:1,MSPointerOver:1,MSPointerOut:1,MSPointerCancel:1,MSPointerEnter:1,MSPointerLeave:1},mouseEvents:{mousedown:1,mousemove:1,mouseup:1,mouseover:1,mouseout:1,mouseenter:1,mouseleave:1},clickEvents:{click:1,dblclick:1},touchEvents:{touchstart:1,touchmove:1,touchend:1,touchcancel:1},focusEvents:{focus:1,blur:1,focusin:1,focusout:1,focusenter:1,focusleave:1},pointerTypes:{2:"touch",3:"pen",4:"mouse",touch:"touch",pen:"pen",mouse:"mouse"}},constructor:function(g){var a=this,d=a.self,m=a.self.resolveTextNode,c=g.changedTouches,h=c?c[0]:g,b=g.type,f,j;a.pageX=h.pageX;a.pageY=h.pageY;a.target=a.delegatedTarget=m(g.target);j=g.relatedTarget;if(j){a.relatedTarget=m(j)}a.browserEvent=a.event=g;a.type=b;a.button=g.button||0;a.shiftKey=g.shiftKey;a.ctrlKey=g.ctrlKey||g.metaKey||false;a.altKey=g.altKey;a.charCode=g.charCode;a.keyCode=g.keyCode;a.buttons=g.buttons;if(a.button===0&&a.buttons===0){a.buttons=1}if(d.forwardTab!==undefined&&d.focusEvents[b]){a.forwardTab=d.forwardTab}if(d.mouseEvents[b]||d.clickEvents[b]){f="mouse"}else{if(d.pointerEvents[b]){f=d.pointerTypes[g.pointerType]}else{if(d.touchEvents[b]){f="touch"}}}if(f){a.pointerType=f}a.timeStamp=a.time=+(g.timeStamp||new Date())},chain:function(a){var b=Ext.Object.chain(this);b.parentEvent=this;return Ext.apply(b,a)},correctWheelDelta:function(a){var c=this.WHEEL_SCALE,b=Math.round(a/c);if(!b&&a){b=(a<0)?-1:1}return b},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){return this.keyCode||this.charCode},getKeyName:function(){return this.keyCodes[this.keyCode]},getPoint:function(){var a=this.getXY();return new Ext.util.Point(a[0],a[1])},getRelatedTarget:function(d,b,c){var f=this.relatedTarget,a=null;if(f){if(d){a=Ext.fly(f).findParent(d,b,c)}else{a=c?Ext.get(f):f}}return a},getTarget:function(c,a,b){return c?Ext.fly(this.target).findParent(c,a,b):(b?Ext.get(this.target):this.target)},getTime:function(){return this.time},getWheelDelta:function(){var a=this.getWheelDeltas();return a.y},getWheelDeltas:function(){var b=this,a=b.browserEvent,d=0,c=0;if(Ext.isDefined(a.wheelDeltaX)){d=a.wheelDeltaX;c=a.wheelDeltaY}else{if(a.wheelDelta){c=a.wheelDelta}else{if(a.detail){c=-a.detail;if(c>100){c=3}else{if(c<-100){c=-3}}if(Ext.isDefined(a.axis)&&a.axis===a.HORIZONTAL_AXIS){d=c;c=0}}}}return{x:b.correctWheelDelta(d),y:b.correctWheelDelta(c)}},getX:function(){return this.getXY()[0]},getXY:function(){var c=this,f=c.xy;if(!f){f=c.xy=[c.pageX,c.pageY];var b=f[0],h,d,g,a;if(!b&&b!==0){h=c.browserEvent;d=document;g=d.documentElement;a=d.body;f[0]=h.clientX+(g&&g.scrollLeft||a&&a.scrollLeft||0)-(g&&g.clientLeft||a&&a.clientLeft||0);f[1]=h.clientY+(g&&g.scrollTop||a&&a.scrollTop||0)-(g&&g.clientTop||a&&a.clientTop||0)}}return f},getY:function(){return this.getXY()[1]},hasModifier:function(){var a=this;return !!(a.ctrlKey||a.altKey||a.shiftKey||a.metaKey)},isNavKeyPress:function(b){var a=this,c=a.keyCode,d=a.type==="keypress";return((!d||Ext.isGecko)&&c>=33&&c<=40)||(!b&&(c===a.RETURN||c===a.TAB||c===a.ESC))},isSpecialKey:function(){var b=this,d=b.keyCode,c=Ext.isGecko,a=b.type==="keypress";return(c&&a&&b.charCode===0)||(this.isNavKeyPress())||(d===b.BACKSPACE)||(d===b.ENTER)||(d>=16&&d<=20)||((!a||c)&&d>=44&&d<=46)},makeUnpreventable:function(){this.browserEvent.preventDefault=Ext.emptyFn},preventDefault:function(){var b=this,a=b.parentEvent;b.defaultPrevented=true;if(a){a.defaultPrevented=true}b.browserEvent.preventDefault();return b},setCurrentTarget:function(a){this.currentTarget=this.delegatedTarget=a},stopEvent:function(){return this.preventDefault().stopPropagation()},stopPropagation:function(){var c=this,a=c.browserEvent,b=c.parentEvent;c.isStopped=true;if(b){b.isStopped=true}if(!a.stopPropagation){a.cancelBubble=true;return c}a.stopPropagation();return c},within:function(a,b,c){var d;if(a){d=b?this.getRelatedTarget():this.getTarget()}return d?Ext.fly(a).contains(d)||!!(c&&d===Ext.getDom(a)):false},deprecated:{"4.0":{methods:{getPageX:"getX",getPageY:"getY"}}}},1,0,0,0,0,0,[Ext.event,"Event",Ext,"EventObjectImpl"],function(b){var d=b.prototype,f={BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,WHEEL_SCALE:(function(){var h;if(Ext.isGecko){h=3}else{if(Ext.isMac){if(Ext.isSafari&&Ext.webKitVersion>=532){h=120}else{h=12}h*=3}else{h=120}}return h}())},c={},g,a;Ext.apply(b,f);Ext.apply(d,f);delete f.WHEEL_SCALE;delete f.RETURN;for(g in f){a=f[g];c[a]=g}d.keyCodes=c;d.getTrueXY=d.getXY}));Ext.define("Ext.overrides.event.Event",{override:"Ext.event.Event",mousedownEvents:{mousedown:1,pointerdown:1,touchstart:1},injectEvent:(function(){var a,b={},f;if(!Ext.isIE9m&&document.createEvent){a={createHtmlEvent:function(j,g,o,m){var h=j.createEvent("HTMLEvents");h.initEvent(g,o,m);return h},createMouseEvent:function(g,y,r,q,t,p,m,o,h,w,v,s,u){var j=g.createEvent("MouseEvents"),z=g.defaultView||window;if(j.initMouseEvent){j.initMouseEvent(y,r,q,z,t,p,m,p,m,o,h,w,v,s,u)}else{j=g.createEvent("UIEvents");j.initEvent(y,r,q);j.view=z;j.detail=t;j.screenX=p;j.screenY=m;j.clientX=p;j.clientY=m;j.ctrlKey=o;j.altKey=h;j.metaKey=v;j.shiftKey=w;j.button=s;j.relatedTarget=u}return j},createUIEvent:function(o,j,g,q,h){var m=o.createEvent("UIEvents"),p=o.defaultView||window;m.initUIEvent(j,g,q,p,h);return m},fireEvent:function(h,j,g){h.dispatchEvent(g)}}}else{if(document.createEventObject){f={0:1,1:4,2:2};a={createHtmlEvent:function(j,g,o,m){var h=j.createEventObject();h.bubbles=o;h.cancelable=m;return h},createMouseEvent:function(h,g,s,q,u,p,r,o,j,y,w,t,v){var m=h.createEventObject();m.bubbles=s;m.cancelable=q;m.detail=u;m.screenX=p;m.screenY=r;m.clientX=p;m.clientY=r;m.ctrlKey=o;m.altKey=j;m.shiftKey=y;m.metaKey=w;m.button=f[t]||t;m.relatedTarget=v;return m},createUIEvent:function(m,h,p,o,g){var j=m.createEventObject();j.bubbles=p;j.cancelable=o;return j},fireEvent:function(h,j,g){h.fireEvent("on"+j,g)}}}}Ext.Object.each({load:[false,false],unload:[false,false],select:[true,false],change:[true,false],submit:[true,true],reset:[true,false],resize:[true,false],scroll:[true,false]},function(g,h){var m=h[0],j=h[1];b[g]=function(q,o){var p=a.createHtmlEvent(g,m,j);a.fireEvent(q,g,p)}});function d(h,g){var j=(h!=="mousemove");return function(p,q){var o=q.getXY(),m=a.createMouseEvent(p.ownerDocument,h,true,j,g,o[0],o[1],q.ctrlKey,q.altKey,q.shiftKey,q.metaKey,q.button,q.relatedTarget);a.fireEvent(p,h,m)}}Ext.each(["click","dblclick","mousedown","mouseup","mouseover","mousemove","mouseout"],function(g){b[g]=d(g,1)});Ext.Object.each({focusin:[true,false],focusout:[true,false],activate:[true,true],focus:[false,false],blur:[false,false]},function(g,h){var m=h[0],j=h[1];b[g]=function(q,o){var p=a.createUIEvent(q.ownerDocument,g,m,j,1);a.fireEvent(q,g,p)}});if(!a){b={};a={}}function c(h,g){}return function(h){var g=this,m=b[g.type]||c,j=h?(h.dom||h):g.getTarget();m(j,g)}}()),preventDefault:function(){var a=this,f=a.browserEvent,d=a.parentEvent,c,b;if(typeof f.type!=="unknown"){a.defaultPrevented=true;if(d){d.defaultPrevented=true}if(f.preventDefault){f.preventDefault()}else{if(f.type==="mousedown"){b=f.target;c=b.getAttribute("unselectable");if(c!=="on"){b.setAttribute("unselectable","on");Ext.defer(function(){b.setAttribute("unselectable",c)},1)}}f.returnValue=false;if(f.ctrlKey||f.keyCode>111&&f.keyCode<124){f.keyCode=-1}}}return a},stopPropagation:function(){var b=this,a=b.browserEvent;if(typeof a.type!=="unknown"){if(b.mousedownEvents[b.type]){Ext.GlobalEvents.fireMouseDown(b)}arguments.callee.$previous.call(this)}return b},deprecated:{"5.0":{methods:{clone:function(){return new this.self(this.browserEvent,this)}}}}},function(){var c=this,b,a=function(f){if(f.keyCode===9){c.forwardTab=!f.shiftKey}},d=function(f){if(f.keyCode===9){delete c.forwardTab}};if(Ext.isIE9m){b={0:0,1:0,4:1,2:2};c.override({statics:{enableIEAsync:function(g){var h,f={};for(h in g){f[h]=g[h]}return f}},constructor:function(f,g,j,h){var m=this;m.callParent([f,g,j,h]);m.button=b[f.button];if(f.type==="contextmenu"){m.button=2}m.toElement=f.toElement;m.fromElement=f.fromElement},mouseLeaveRe:/(mouseout|mouseleave)/,mouseEnterRe:/(mouseover|mouseenter)/,enableIEAsync:function(f){this.browserEvent=this.self.enableIEAsync(f)},getRelatedTarget:function(m,h,j){var f=this,o,g;if(!f.relatedTarget){o=f.type;if(f.mouseLeaveRe.test(o)){g=f.toElement}else{if(f.mouseEnterRe.test(o)){g=f.fromElement}}if(g){f.relatedTarget=f.self.resolveTextNode(g)}}return f.callParent([m,h,j])}});document.attachEvent("onkeydown",a);document.attachEvent("onkeyup",d);window.attachEvent("onunload",function(){document.detachEvent("onkeydown",a);document.detachEvent("onkeyup",d)})}else{if(document.addEventListener){document.addEventListener("keydown",a,true);document.addEventListener("keyup",d,true)}}});(Ext.cmd.derive("Ext.event.publisher.Dom",Ext.event.publisher.Publisher,{type:"dom",handledDomEvents:[],reEnterCount:0,captureEvents:{animationstart:1,animationend:1,resize:1,focus:1,blur:1,scroll:1},directEvents:{mouseenter:1,mouseleave:1,pointerenter:1,pointerleave:1,MSPointerEnter:1,MSPointerLeave:1,load:1,unload:1,beforeunload:1,error:1,DOMContentLoaded:1,DOMFrameContentLoaded:1,hashchange:1},blockedPointerEvents:{pointerover:1,pointerout:1,pointerenter:1,pointerleave:1,MSPointerOver:1,MSPointerOut:1,MSPointerEnter:1,MSPointerLeave:1},blockedCompatibilityMouseEvents:{mouseenter:1,mouseleave:1},constructor:function(){var a=this;a.bubbleSubscribers={};a.captureSubscribers={};a.directSubscribers={};a.directCaptureSubscribers={};a.delegatedListeners={};a.initHandlers();Ext.onInternalReady(a.onReady,a);Ext.event.publisher.Publisher.prototype.constructor.call(this)},registerEvents:function(){var a=this,f=Ext.event.publisher.Publisher.publishersByEvent,b=a.handledDomEvents,g=b.length,d=0,c;for(;d<g;d++){c=b[d];a.handles[c]=1;f[c]=a}Ext.event.publisher.Publisher.prototype.registerEvents.call(this)},onReady:function(){var b=this,c=b.handledDomEvents,a,d;if(c){for(d=0,a=c.length;d<a;d++){b.addDelegatedListener(c[d])}}Ext.getWin().on("unload",b.destroy,b)},initHandlers:function(){var a=this;a.onDelegatedEvent=Ext.bind(a.onDelegatedEvent,a);a.onDirectEvent=Ext.bind(a.onDirectEvent,a);a.onDirectCaptureEvent=Ext.bind(a.onDirectCaptureEvent,a)},addDelegatedListener:function(a){this.delegatedListeners[a]=1;this.target.addEventListener(a,this.onDelegatedEvent,!!this.captureEvents[a])},removeDelegatedListener:function(a){delete this.delegatedListeners[a];this.target.removeEventListener(a,this.onDelegatedEvent,!!this.captureEvents[a])},addDirectListener:function(c,a,b){a.dom.addEventListener(c,b?this.onDirectCaptureEvent:this.onDirectEvent,b)},removeDirectListener:function(c,a,b){a.dom.removeEventListener(c,b?this.onDirectCaptureEvent:this.onDirectEvent,b)},subscribe:function(c,b,g,a){var d=this,f,h;if(g&&!d.directEvents[b]){f=a?d.captureSubscribers:d.bubbleSubscribers;if(!d.handles[b]&&!d.delegatedListeners[b]){d.addDelegatedListener(b)}if(f[b]){++f[b]}else{f[b]=1}}else{f=a?d.directCaptureSubscribers:d.directSubscribers;h=c.id;f=f[b]||(f[b]={});if(f[h]){++f[h]}else{f[h]=1;d.addDirectListener(b,c,a)}}},unsubscribe:function(m,a,g,d){var c=this,b,j,f,h;if(g&&!c.directEvents[a]){b=c.captureSubscribers;j=c.bubbleSubscribers;f=d?b:j;if(f[a]){--f[a]}if(!c.handles[a]&&!j[a]&&!b[a]){this.removeDelegatedListener(a)}}else{f=d?c.directCaptureSubscribers:c.directSubscribers;h=m.id;f=f[a];if(f[h]){--f[h]}if(!f[h]){delete f[h];c.removeDirectListener(a,m,d)}}},getPropagatingTargets:function(b){var a=b,d=[],c;while(a){d.push(a);c=a.parentNode;if(!c){c=a.defaultView}a=c}return d},publish:function(a,h,g){var f=this,j,c,b,d;if(Ext.isArray(h)){j=h}else{if(f.captureEvents[a]){c=Ext.cache[h.id];j=c?[c]:[]}else{j=f.getPropagatingTargets(h)}}d=j.length;if(f.captureSubscribers[a]){for(b=d;b--;){c=Ext.cache[j[b].id];if(c){f.fire(c,a,g,false,true);if(g.isStopped){break}}}}if(!g.isStopped&&f.bubbleSubscribers[a]){for(b=0;b<d;b++){c=Ext.cache[j[b].id];if(c){f.fire(c,a,g,false,false);if(g.isStopped){break}}}}},fire:function(d,c,g,a,b){var f;if(d.hasListeners[c]){f=d.events[c];if(f){if(b&&a){f=f.directCaptures}else{if(b){f=f.captures}else{if(a){f=f.directs}}}if(f){g.setCurrentTarget(d.dom);f.fire(g,g.target)}}}},onDelegatedEvent:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doDelegatedEvent,this,[a])}else{this.doDelegatedEvent(a)}},doDelegatedEvent:function(b,a){var d=this,c=b.timeStamp;b=new Ext.event.Event(b);if(d.isEventBlocked(b)){return false}d.beforeEvent(b);Ext.frameStartTime=c;d.reEnterCount++;d.publish(b.type,b.target,b);d.reEnterCount--;if(a!==false){d.afterEvent(b)}return b},onDirectEvent:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doDirectEvent,this,[a,false])}else{this.doDirectEvent(a,false)}},onDirectCaptureEvent:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doDirectEvent,this,[a,true])}else{this.doDirectEvent(a,true)}},doDirectEvent:function(a,c){var f=this,g=a.currentTarget,b=a.timeStamp,d;a=new Ext.event.Event(a);if(f.isEventBlocked(a)){return}f.beforeEvent(a);Ext.frameStartTime=b;d=Ext.cache[g.id];if(d){f.reEnterCount++;f.fire(d,a.type,a,true,c);f.reEnterCount--}f.afterEvent(a)},beforeEvent:function(f){var b=f.browserEvent,c=Ext.event.publisher.Dom,d,a;if(b.type==="touchstart"){d=b.touches;if(d.length===1){a=d[0];c.lastTouchStartX=a.pageX;c.lastTouchStartY=a.pageY}}},afterEvent:function(a){var b=a.browserEvent,f=b.type,d=Ext.event.publisher.Dom,c=Ext.GlobalEvents;if(a.self.pointerEvents[f]&&a.pointerType!=="mouse"){d.lastScreenPointerEventTime=Ext.now()}if(f==="touchend"){d.lastTouchEndTime=Ext.now()}if(!this.reEnterCount&&c.hasListeners.idle&&!c.idleEventMask[f]){c.fireEvent("idle")}},isEventBlocked:function(b){var a=this,f=b.type,c=Ext.event.publisher.Dom,d=Ext.now();if(Ext.isGecko&&b.type==="click"&&b.button===2){return true}return(a.blockedPointerEvents[f]&&b.pointerType!=="mouse")||(a.blockedCompatibilityMouseEvents[f]&&(d-c.lastScreenPointerEventTime<1000))||(Ext.supports.TouchEvents&&b.self.mouseEvents[b.type]&&Math.abs(b.pageX-c.lastTouchStartX)<15&&Math.abs(b.pageY-c.lastTouchStartY)<15&&(Ext.now()-c.lastTouchEndTime)<1000)},destroy:function(){var a;for(a in this.delegatedListeners){this.removeDelegatedListener(a)}this.callParent()},reset:function(){var a=Ext.event.publisher.Dom;a.lastScreenPointerEventTime=a.lastTouchEndTime=a.lastTouchStartX=a.lastTouchStartY=undefined}},1,0,0,0,0,0,[Ext.event.publisher,"Dom"],function(d){var b=document,a=b.defaultView,c=d.prototype;if((Ext.os.is.iOS&&Ext.os.version.getMajor()<5)||Ext.browser.is.AndroidStock||!(a&&a.addEventListener)){c.target=b}else{c.target=a}d.instance=new d()}));Ext.define("Ext.overrides.event.publisher.Dom",{override:"Ext.event.publisher.Dom"},function(a){if(Ext.isIE9m){var c=document.documentElement,g=document.body,f=a.prototype,b,d;f.target=document;f.directBoundListeners={};b=function(j,h,m){j.target=j.srcElement||window;j.currentTarget=this;if(m){h.onDirectCaptureEvent(j)}else{h.onDirectEvent(j)}};d=function(j,h){j.target=j.srcElement||window;j.currentTarget=this;h.onDirectCaptureEvent(j)};a.override({addDelegatedListener:function(h){this.delegatedListeners[h]=1;this.target.attachEvent("on"+h,this.onDelegatedEvent)},removeDelegatedListener:function(h){delete this.delegatedListeners[h];this.target.detachEvent("on"+h,this.onDelegatedEvent)},addDirectListener:function(m,o,j){var q=this,r=o.dom,p=Ext.Function.bind(b,r,[q,j],true),s=q.directBoundListeners,h=s[m]||(s[m]={});h[r.id]=p;if(r.attachEvent){r.attachEvent("on"+m,p)}else{q.callParent(arguments)}},removeDirectListener:function(m,h){var j=h.dom;if(j.detachEvent){j.detachEvent("on"+m,this.directBoundListeners[m][j.id])}else{this.callParent(arguments)}},doDelegatedEvent:function(j,h){j.target=j.srcElement||window;if(j.type==="focusin"){j.relatedTarget=j.fromElement===g||j.fromElement===c?null:j.fromElement}else{if(j.type==="focusout"){j.relatedTarget=j.toElement===g||j.toElement===c?null:j.toElement}}return this.callParent([j,h])}});Ext.apply(f.directEvents,f.captureEvents);Ext.apply(f.directEvents,{change:1,input:1,paste:1});f.captureEvents={}}});(Ext.cmd.derive("Ext.event.publisher.Gesture",Ext.event.publisher.Dom,{type:"gesture",config:{async:true},isCancelEvent:{touchcancel:1,pointercancel:1,MSPointerCancel:1},handledEvents:[],handledDomEvents:[],constructor:function(c){var j=this,d=j.handledDomEvents,b=Ext.supports,p=b.TouchEvents,q=Ext.Function,f=j.onTouchStart,a=j.onTouchMove,o=j.onTouchEnd,h=q.createAnimationFrame(j.onTouchStart,j,null,1),g=q.createAnimationFrame(j.onTouchMove,j),m=q.createAnimationFrame(j.onTouchEnd,j,null,1);j._handlers={touchstart:f,touchmove:a,touchend:o,touchcancel:o,pointerdown:f,pointermove:a,pointerup:o,pointercancel:o,MSPointerDown:f,MSPointerMove:a,MSPointerUp:o,MSPointerCancel:o,mousedown:f,mousemove:a,mouseup:o};j._asyncHandlers={touchstart:h,touchmove:g,touchend:m,touchcancel:m,pointerdown:h,pointermove:g,pointerup:m,pointercancel:m,MSPointerDown:h,MSPointerMove:g,MSPointerUp:m,MSPointerCancel:m,mousedown:h,mousemove:g,mouseup:m};j.activeTouchesMap={};j.activeTouches=[];j.changedTouches=[];j.recognizers=[];if(p){j.onTargetTouchMove=j.onTargetTouchMove.bind(j);j.onTargetTouchEnd=j.onTargetTouchEnd.bind(j)}if(b.PointerEvents){d.push("pointerdown","pointermove","pointerup","pointercancel");j.mousePointerType="mouse"}else{if(b.MSPointerEvents){d.push("MSPointerDown","MSPointerMove","MSPointerUp","MSPointerCancel");j.mousePointerType=4}else{if(p){d.push("touchstart","touchmove","touchend","touchcancel")}}}if(!d.length||(p&&Ext.isWebKit&&Ext.os.is.Desktop)){d.push("mousedown","mousemove","mouseup")}j.initConfig(c);return Ext.event.publisher.Dom.prototype.constructor.call(this)},onReady:function(){Ext.event.publisher.Dom.prototype.onReady.call(this);Ext.Array.sort(this.recognizers,function(d,c){var g=d.priority,f=c.priority;return(g>f)?1:(g<f)?-1:0})},registerRecognizer:function(c){var b=this,d=c.handledEvents,a=d.length,f;c.setOnRecognized(b.onRecognized);c.setCallbackScope(b);for(f=0;f<a;f++){b.handledEvents.push(d[f])}b.registerEvents(d);b.recognizers.push(c)},onRecognized:function(h,m,d){var a=this,b=m.changedTouches,o=b.length,c,j,g,f;d=d||{};d.type=h;d.target=b[0].target;d.isStopped=false;m=m.chain(d);if(o>1){c=[];for(g=0;g<o;g++){f=b[g];c.push(f.targets)}j=a.getCommonTargets(c)}else{j=b[0].targets}a.publish(h,j,m)},getCommonTargets:function(h){var m=h[0],f=h.length;if(f===1){return m}var c=[],d=1,g,b,a;while(true){g=m[m.length-d];if(!g){return c}for(a=1;a<f;a++){b=h[a];if(b[b.length-d]!==g){return c}}c.unshift(g);d++}return c},invokeRecognizers:function(d,a){var c=this.recognizers,g=c.length,f,b;if(d==="onStart"){for(f=0;f<g;f++){c[f].isActive=true}}for(f=0;f<g;f++){b=c[f];if(b.isActive&&b[d].call(b,a)===false){b.isActive=false}}},updateTouches:function(c,r){var p=this,m=c.browserEvent,u=m.changedTouches||[m],o=p.activeTouches,d=p.activeTouchesMap,g=[],j,b,t,a,s,f,h,q;for(s=0,f=u.length;s<f;s++){j=u[s];if("identifier" in j){b=j.identifier}else{if("pointerId" in j){b=j.pointerId}else{b=1}}t=d[b];if(!t){a=Ext.event.Event.resolveTextNode(j.target);t=d[b]={identifier:b,target:a,targets:p.getPropagatingTargets(a)};o.push(t)}if(r){delete d[b];Ext.Array.remove(o,t)}h=j.pageX;q=j.pageY;t.pageX=h;t.pageY=q;t.point=new Ext.util.Point(h,q);g.push(t)}c.touches=Ext.Array.clone(o);c.changedTouches=g},doDelegatedEvent:function(b){var a=this;b=Ext.event.publisher.Dom.prototype.doDelegatedEvent.call(this,b,false);if(b){if(!b.button||b.button<1){a.handlers[b.type].call(a,b)}a.afterEvent(b)}},onTouchStart:function(b){var c=this,a=b.target,d=b.browserEvent.touches;if(b.browserEvent.type==="touchstart"){a.addEventListener("touchmove",c.onTargetTouchMove);a.addEventListener("touchend",c.onTargetTouchEnd);a.addEventListener("touchcancel",c.onTargetTouchEnd)}if(d&&d.length<=c.activeTouches.length){c.removeGhostTouches(d)}c.updateTouches(b);if(!c.isStarted){c.isStarted=true;c.invokeRecognizers("onStart",b);if(Ext.enableGarbageCollector){Ext.dom.GarbageCollector.pause()}}c.invokeRecognizers("onTouchStart",b)},onTouchMove:function(a){var c=this,b=c.mousePointerType;if(c.isStarted){if(b&&a.browserEvent.pointerType===b&&a.buttons===0){a.type=Ext.dom.Element.prototype.eventMap.touchend;a.button=0;c.onTouchEnd(a);return}c.updateTouches(a);if(a.changedTouches.length>0){c.invokeRecognizers("onTouchMove",a)}}},onTouchEnd:function(b){var a=this;if(!a.isStarted){return}a.updateTouches(b,true);a.invokeRecognizers(a.isCancelEvent[b.type]?"onTouchCancel":"onTouchEnd",b);if(!a.activeTouches.length){a.isStarted=false;a.invokeRecognizers("onEnd",b);if(Ext.enableGarbageCollector){Ext.dom.GarbageCollector.resume()}}},onTargetTouchMove:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doTargetTouchMove,this,[a])}else{this.doTargetTouchMove(a)}},doTargetTouchMove:function(a){if(!Ext.getBody().contains(a.target)){this.onTouchMove(new Ext.event.Event(a))}},onTargetTouchEnd:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doTargetTouchEnd,this,[a])}else{this.doTargetTouchEnd(a)}},doTargetTouchEnd:function(a){var b=this,c=a.target;c.removeEventListener("touchmove",b.onTargetTouchMove);c.removeEventListener("touchend",b.onTargetTouchEnd);c.removeEventListener("touchcancel",b.onTargetTouchEnd);if(!Ext.getBody().contains(c)){b.onTouchEnd(new Ext.event.Event(a))}},updateAsync:function(a){this.handlers=a?this._asyncHandlers:this._handlers},reset:function(){var b=this,d=b.recognizers,a=d.length,f,c;b.activeTouchesMap={};b.activeTouches=[];b.changedTouches=[];b.isStarted=false;for(f=0;f<a;f++){c=d[f];c.reset();c.isActive=false}Ext.event.publisher.Dom.prototype.reset.call(this)},privates:{removeGhostTouches:function(d){var b={},j=d.length,h=this.activeTouches,c=this.activeTouchesMap,a,g,f;for(a=0;a<j;++a){b[d[a].identifier]=true}a=h.length;while(a--){f=h[a];g=f.identifier;if(!d[g]){Ext.Array.remove(h,f);delete c[g]}}}}},1,0,0,0,0,0,[Ext.event.publisher,"Gesture"],function(a){a.instance=new a()}));Ext.define("Ext.overrides.event.publisher.Gesture",{override:"Ext.event.publisher.Gesture"},function(){if(Ext.isIE9m){this.override({updateTouches:function(a,c){var b=a.browserEvent,d=a.getXY();b.pageX=d[0];b.pageY=d[1];this.callParent([a,c])},doDelegatedEvent:function(a){this.callParent([Ext.event.Event.enableIEAsync(a)])}})}});(Ext.cmd.derive("Ext.mixin.Templatable",Ext.Mixin,{mixinConfig:{id:"templatable"},referenceAttributeName:"reference",referenceSelector:"[reference]",getElementConfig:function(){return{reference:"element"}},getElementTemplate:function(){var a=document.createDocumentFragment();a.appendChild(Ext.Element.create(this.getElementConfig(),true));return a},initElement:function(){var a=this.self.prototype;a.elementTemplate=this.getElementTemplate();a.initElement=a.doInitElement;this.initElement.apply(this,arguments)},linkElement:function(a,b){this.link(a,b)},doInitElement:function(){var h=this.referenceAttributeName,c,d,f,g,b,a;c=this.elementTemplate.cloneNode(true);d=c.querySelectorAll(this.referenceSelector);for(f=0,g=d.length;f<g;f++){b=d[f];a=b.getAttribute(h);b.removeAttribute(h);this.linkElement(a,b)}}},0,0,0,0,0,0,[Ext.mixin,"Templatable"],0));(Ext.cmd.derive("Ext.TaskQueue",Ext.Base,{singleton:true,pending:false,mode:true,constructor:function(){this.readQueue=[];this.writeQueue=[];this.run=Ext.Function.bind(this.run,this);if(Ext.os.is.iOS){Ext.interval(this.watch,500,this)}},requestRead:function(a,c,b){this.request(true);this.readQueue.push(arguments)},requestWrite:function(a,c,b){this.request(false);this.writeQueue.push(arguments)},request:function(a){if(!this.pending){this.pendingTime=Date.now();this.pending=true;this.mode=a;if(a){Ext.defer(this.run,1,this)}else{Ext.Function.requestAnimationFrame(this.run)}}},watch:function(){if(this.pending&&Date.now()-this.pendingTime>=500){this.run()}},run:function(){this.pending=false;var b=this.readQueue,j=this.writeQueue,g=null,m;if(this.mode){m=b;if(j.length>0){g=false}}else{m=j;if(b.length>0){g=true}}var f=m.slice(),h,o,d,a,c;m.length=0;for(h=0,o=f.length;h<o;h++){d=f[h];a=d[0];c=d[1];if(typeof a==="string"){a=c[a]}if(d.length>2){a.apply(c,d[2])}else{a.call(c)}}f.length=0;if(g!==null){this.request(g)}}},1,0,0,0,0,0,[Ext,"TaskQueue"],0));(Ext.cmd.derive("Ext.util.sizemonitor.Abstract",Ext.Base,{config:{element:null,callback:Ext.emptyFn,scope:null,args:[]},width:0,height:0,contentWidth:0,contentHeight:0,constructor:function(a){this.refresh=Ext.Function.bind(this.refresh,this);this.info={width:0,height:0,contentWidth:0,contentHeight:0,flag:0};this.initElement();this.initConfig(a);this.bindListeners(true)},bindListeners:Ext.emptyFn,applyElement:function(a){if(a){return Ext.get(a)}},updateElement:function(a){a.append(this.detectorsContainer);a.addCls("x-size-monitored")},applyArgs:function(a){return a.concat([this.info])},refreshMonitors:Ext.emptyFn,forceRefresh:function(){Ext.TaskQueue.requestRead("refresh",this)},getContentBounds:function(){return this.detectorsContainer.getBoundingClientRect()},getContentWidth:function(){return this.detectorsContainer.offsetWidth},getContentHeight:function(){return this.detectorsContainer.offsetHeight},refreshSize:function(){var h=this.getElement();if(!h||h.destroyed){return false}var f=h.getWidth(),c=h.getHeight(),d=this.getContentWidth(),b=this.getContentHeight(),a=this.contentWidth,m=this.contentHeight,g=this.info,j=false,o;this.width=f;this.height=c;this.contentWidth=d;this.contentHeight=b;o=((a!==d?1:0)+(m!==b?2:0));if(o>0){g.width=f;g.height=c;g.contentWidth=d;g.contentHeight=b;g.flag=o;j=true;this.getCallback().apply(this.getScope(),this.getArgs())}return j},refresh:function(a){if(this.refreshSize()||a){Ext.TaskQueue.requestWrite("refreshMonitors",this)}},destroy:function(){var b=this,a=b.getElement();b.bindListeners(false);if(a&&!a.destroyed){a.removeCls("x-size-monitored")}delete b._element;b.callParent()}},1,0,0,0,0,[[Ext.mixin.Templatable.prototype.mixinId||Ext.mixin.Templatable.$className,Ext.mixin.Templatable]],[Ext.util.sizemonitor,"Abstract"],0));(Ext.cmd.derive("Ext.util.sizemonitor.Scroll",Ext.util.sizemonitor.Abstract,{getElementConfig:function(){return{reference:"detectorsContainer",classList:["x-size-monitors","scroll"],children:[{reference:"expandMonitor",className:"expand"},{reference:"shrinkMonitor",className:"shrink"}]}},constructor:function(a){this.onScroll=Ext.Function.bind(this.onScroll,this);Ext.util.sizemonitor.Abstract.prototype.constructor.apply(this,arguments)},bindListeners:function(b){var a=b?"addEventListener":"removeEventListener";this.expandMonitor[a]("scroll",this.onScroll,true);this.shrinkMonitor[a]("scroll",this.onScroll,true)},forceRefresh:function(){Ext.TaskQueue.requestRead("refresh",this,[true])},onScroll:function(){Ext.TaskQueue.requestRead("refresh",this)},refreshMonitors:function(){var c=this.expandMonitor,a=this.shrinkMonitor,b=1000000;if(c&&!c.destroyed){c.scrollLeft=b;c.scrollTop=b}if(a&&!a.destroyed){a.scrollLeft=b;a.scrollTop=b}}},1,0,0,0,0,0,[Ext.util.sizemonitor,"Scroll"],0));(Ext.cmd.derive("Ext.util.sizemonitor.OverflowChange",Ext.util.sizemonitor.Abstract,{constructor:function(a){this.onExpand=Ext.Function.bind(this.onExpand,this);this.onShrink=Ext.Function.bind(this.onShrink,this);Ext.util.sizemonitor.Abstract.prototype.constructor.apply(this,arguments)},getElementConfig:function(){return{reference:"detectorsContainer",classList:["x-size-monitors","overflowchanged"],children:[{reference:"expandMonitor",className:"expand",children:[{reference:"expandHelper"}]},{reference:"shrinkMonitor",className:"shrink",children:[{reference:"shrinkHelper"}]}]}},bindListeners:function(b){var a=b?"addEventListener":"removeEventListener";this.expandMonitor[a](Ext.browser.is.Firefox?"underflow":"overflowchanged",this.onExpand,true);this.shrinkMonitor[a](Ext.browser.is.Firefox?"overflow":"overflowchanged",this.onShrink,true)},onExpand:function(a){if(Ext.browser.is.Webkit&&a.horizontalOverflow&&a.verticalOverflow){return}Ext.TaskQueue.requestRead("refresh",this)},onShrink:function(a){if(Ext.browser.is.Webkit&&!a.horizontalOverflow&&!a.verticalOverflow){return}Ext.TaskQueue.requestRead("refresh",this)},refreshMonitors:function(){if(this.destroyed){return}var a=this.expandHelper,g=this.shrinkHelper,c=this.getContentBounds(),f=c.width,b=c.height,d;if(a&&!a.destroyed){d=a.style;d.width=(f+1)+"px";d.height=(b+1)+"px"}if(g&&!g.destroyed){d=g.style;d.width=f+"px";d.height=b+"px"}Ext.TaskQueue.requestRead("refresh",this)}},1,0,0,0,0,0,[Ext.util.sizemonitor,"OverflowChange"],0));(Ext.cmd.derive("Ext.util.SizeMonitor",Ext.Base,{constructor:function(a){var b=Ext.util.sizemonitor;if(Ext.browser.is.Firefox){return new b.OverflowChange(a)}else{return new b.Scroll(a)}}},1,0,0,0,0,0,[Ext.util,"SizeMonitor"],0));(Ext.cmd.derive("Ext.event.publisher.ElementSize",Ext.event.publisher.Publisher,{type:"size",handledEvents:["resize"],constructor:function(){this.monitors={};this.subscribers={};Ext.event.publisher.Publisher.prototype.constructor.apply(this,arguments)},subscribe:function(d){var b=d.id,a=this.subscribers,c=this.monitors;if(a[b]){++a[b]}else{a[b]=1;c[b]=new Ext.util.SizeMonitor({element:d,callback:this.onElementResize,scope:this,args:[d]})}d.on("painted","forceRefresh",c[b]);return true},unsubscribe:function(f){var b=f.id,a=this.subscribers,d=this.monitors,c;if(a[b]&&!--a[b]){delete a[b];c=d[b];f.un("painted","forceRefresh",c);c.destroy();delete d[b]}},onElementResize:function(a,b){Ext.TaskQueue.requestRead("fire",this,[a,"resize",[a,b]])}},1,0,0,0,0,0,[Ext.event.publisher,"ElementSize"],function(a){a.instance=new a()}));(Ext.cmd.derive("Ext.util.paintmonitor.Abstract",Ext.Base,{config:{element:null,callback:Ext.emptyFn,scope:null,args:[]},eventName:"",monitorClass:"",constructor:function(a){this.onElementPainted=Ext.Function.bind(this.onElementPainted,this);this.initConfig(a)},bindListeners:function(a){this.monitorElement[a?"addEventListener":"removeEventListener"](this.eventName,this.onElementPainted,true)},applyElement:function(a){if(a){return Ext.get(a)}},updateElement:function(a){this.monitorElement=Ext.Element.create({classList:["x-paint-monitor",this.monitorClass]},true);a.appendChild(this.monitorElement);a.addCls("x-paint-monitored");this.bindListeners(true)},onElementPainted:function(){},destroy:function(){var b=this,d=b.monitorElement,c=d.parentNode,a=b.getElement();b.bindListeners(false);delete b.monitorElement;if(a&&!a.destroyed){a.removeCls("x-paint-monitored");delete b._element}if(c){c.removeChild(d)}b.callParent()}},1,0,0,0,0,0,[Ext.util.paintmonitor,"Abstract"],0));(Ext.cmd.derive("Ext.util.paintmonitor.CssAnimation",Ext.util.paintmonitor.Abstract,{eventName:Ext.browser.is.WebKit?"webkitAnimationEnd":"animationend",monitorClass:"cssanimation",onElementPainted:function(a){if(a.animationName==="x-paint-monitor-helper"){this.getCallback().apply(this.getScope(),this.getArgs())}}},0,0,0,0,0,0,[Ext.util.paintmonitor,"CssAnimation"],0));(Ext.cmd.derive("Ext.util.PaintMonitor",Ext.Base,{constructor:function(a){return new Ext.util.paintmonitor.CssAnimation(a)}},1,0,0,0,0,0,[Ext.util,"PaintMonitor"],0));(Ext.cmd.derive("Ext.event.publisher.ElementPaint",Ext.event.publisher.Publisher,{type:"paint",handledEvents:["painted"],constructor:function(){this.monitors={};this.subscribers={};Ext.event.publisher.Publisher.prototype.constructor.apply(this,arguments)},subscribe:function(c){var d=this,b=c.id,a=d.subscribers;if(a[b]){++a[b]}else{a[b]=1;d.monitors[b]=new Ext.util.PaintMonitor({element:c,callback:d.onElementPainted,scope:d,args:[c]})}},unsubscribe:function(d){var b=d.id,a=this.subscribers,c=this.monitors;if(a[b]&&!--a[b]){delete a[b];c[b].destroy();delete c[b]}},onElementPainted:function(a){Ext.TaskQueue.requestRead("fire",this,[a,"painted",[a]])}},1,0,0,0,0,0,[Ext.event.publisher,"ElementPaint"],function(a){a.instance=new a()}));(Ext.cmd.derive("Ext.dom.Element",Ext.Base,function(Q){var W=window,m=document,I="ext-window",c="ext-document",ai="width",h="height",C="min-width",ae="min-height",R="max-width",E="max-height",o="top",L="right",d="bottom",M="left",ak="visibility",F="hidden",ad="display",X="none",an="z-index",q="position",T="relative",U="static",v="-",r=/\w/g,b=/\s+/,G=/[\s]+/,ab=/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,P=/table-row|table-.*-group/,ac=/top/i,p={t:"border-top-width",r:"border-right-width",b:"border-bottom-width",l:"border-left-width"},A={t:"padding-top",r:"padding-right",b:"padding-bottom",l:"padding-left"},am={t:"margin-top",r:"margin-right",b:"margin-bottom",l:"margin-left"},K=[A.l,A.r,A.t,A.b],ag=[p.l,p.r,p.t,p.b],w=/\d+$/,aj=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,j="px",g=/(-[a-z])/gi,N=/([a-z0-9\-]+)\s*:\s*([^;\s]+(?:\s*[^;\s]+)*);?/gi,S=/^\d+(?:\.\d*)?px$/i,t={},Y="originalDisplay",Z=function(ap,aq){return aq.charAt(1).toUpperCase()},a=function(aq,au){var ar,ap,at;if(aq.nodeType===1){aq._extData=null;if(au){ar=aq.childNodes;for(ap=0,at=ar.length;ap<at;++ap){a(ar[ap],au)}}}},H="x-hidden-visibility",D="x-hidden-display",al="x-hidden-offsets",aa="x-hidden-clip",B="x-sized",f="x-unsized",O="x-stretched",u="x-no-touch-scroll",ao={style:"style",className:"className",cls:"cls",classList:"classList",text:"text",hidden:"hidden",html:"html",children:"children"},V=0,y=0,z=false,af=false,s,J,ah;return{alternateClassName:["Ext.Element"],observableType:"element",isElement:true,skipGarbageCollection:true,$applyConfigs:true,identifiablePrefix:"ext-element-",styleHooks:{},validIdRe:Ext.validIdRe,blockedEvents:Ext.supports.EmulatedMouseOver?{mouseover:1}:{},longpressEvents:{longpress:1,taphold:1},constructor:function(ap){var ar=this,aq;if(typeof ap==="string"){ap=m.getElementById(ap)}if(!ap){return null}ar.dom=ap;aq=ap.id;if(aq){ar.id=aq}else{aq=ap.id=ar.getUniqueId()}ar.el=ar;Ext.cache[aq]=ar;ar.mixins.observable.constructor.call(ar)},inheritableStatics:{cache:Ext.cache={},editableSelector:'input,textarea,[contenteditable="true"]',VISIBILITY:1,DISPLAY:2,OFFSETS:3,CLIP:4,minKeyboardHeight:100,unitRe:aj,useDelegatedEvents:true,validNodeTypes:{1:1,9:1},addUnits:function(aq,ap){if(typeof aq==="number"){return aq+(ap||j)}if(aq===""||aq==="auto"||aq==null){return aq||""}if(w.test(aq)){return aq+(ap||j)}if(!aj.test(aq)){return aq||""}return aq},create:function(aw,av){var ap=this,az=ao.hidden,ay,aq,at,ar,au,ax,aB,aA;if(!aw){aw={}}if(aw.isElement){return av?aw.dom:aw}else{if("nodeType" in aw){return av?aw:Ext.get(aw)}}if(typeof aw==="string"){return m.createTextNode(aw)}at=aw.tag;if(!at){at="div"}if(aw.namespace){ay=m.createElementNS(aw.namespace,at)}else{ay=m.createElement(at)}aq=ay.style;if(aw[az]){aA=aw.className;aA=(aA==null)?"":aA+" ";aw.className=aA+D;delete aw[az]}for(au in aw){if(au!=="tag"){ar=aw[au];switch(au){case ao.style:if(typeof ar==="string"){ay.setAttribute(au,ar)}else{for(ax in ar){if(ar.hasOwnProperty(ax)){aq[ax]=ar[ax]}}}break;case ao.className:case ao.cls:ay.className=ar;break;case ao.classList:ay.className=ar.join(" ");break;case ao.text:ay.textContent=ar;break;case ao.html:ay.innerHTML=ar;break;case ao.children:for(ax=0,aB=ar.length;ax<aB;ax++){ay.appendChild(ap.create(ar[ax],true))}break;default:if(ar!=null){ay.setAttribute(au,ar)}}}}if(av){return ay}else{return ap.get(ay)}},detach:function(){var ap=this.dom;if(ap&&ap.parentNode&&ap.tagName!=="BODY"){ap.parentNode.removeChild(ap)}return this},fly:function(aq,ap){return Ext.fly(aq,ap)},fromPoint:function(ap,aq){return Ext.get(m.elementFromPoint(ap,aq))},get:function(au){var ay=this,ar=Ext.cache,aw,av,at,aq,ap,ax,az;if(!au){return null}if(au.isFly){au=au.dom}if(typeof au==="string"){at=au;if(ar.hasOwnProperty(at)){aq=ar[at];if(aq.skipGarbageCollection||!Ext.isGarbage(aq.dom)){return aq}else{aq.destroy()}}if(at===I){return Q.get(W)}else{if(at===c){return Q.get(m)}}av=Ext.getElementById?Ext.getElementById(at):m.getElementById(at);if(av){return new Q(av)}}aw=au.nodeType;if(aw){ap=(aw===9);az=ay.validNodeTypes[aw]}else{ax=(au.window==au)}if(az||ax){at=au.id;if(ar.hasOwnProperty(at)){aq=ar[at];if(aq.skipGarbageCollection||au===aq.dom||!Ext.isGarbage(aq.dom)){return aq}else{aq.destroy()}}if(au===m){au.id=c}if(au==W){au.id=I}au=new Q(au);if(ax||ap){au.skipGarbageCollection=true}return au}if(au.isElement){return au}if(au.isComposite){return au}if(Ext.isIterable(au)){return ay.select(au)}return null},getActiveElement:function(ap){var aq=m.activeElement;if(!aq||!aq.focus){aq=m.body}return ap?Ext.get(aq):aq},getDocumentHeight:function(){return Math.max(!Ext.isStrict?m.body.scrollHeight:m.documentElement.scrollHeight,this.getViewportHeight())},getDocumentWidth:function(){return Math.max(!Ext.isStrict?m.body.scrollWidth:m.documentElement.scrollWidth,this.getViewportWidth())},getOrientation:function(){if(Ext.supports.OrientationChange){return(W.orientation==0)?"portrait":"landscape"}return(W.innerHeight>W.innerWidth)?"portrait":"landscape"},getViewportHeight:function(){var ap=Q._viewportHeight;if(Ext.isIE9m){return m.documentElement.clientHeight}return(ap!=null)?ap:W.innerHeight},getViewportWidth:function(){var ap=Q._viewportWidth;if(Ext.isIE9m){return m.documentElement.clientWidth}return(ap!=null)?ap:W.innerWidth},getViewSize:function(){return{width:Q.getViewportWidth(),height:Q.getViewportHeight()}},normalize:function(ap){return t[ap]||(t[ap]=ap.replace(g,Z))},_onWindowFocusChange:function(ap){if(Ext.fly(ap.target).is(Q.editableSelector)){V=new Date();z=(ap.type==="focusin"||ap.type==="pointerup")}},_onWindowResize:function(){var ar=window.innerWidth,at=window.innerHeight,aq=new Date(),av=1000,ap,au;ap=ar-Q._windowWidth;au=at-Q._windowHeight;Q._windowWidth=ar;Q._windowHeight=at;if(((aq-V)<av)||((aq-y)<av)){if(ap===0&&(z&&(au<=-Q.minKeyboardHeight))){af=true;return}}if(af&&(ap===0)&&(au>=Q.minKeyboardHeight)){af=false;y=new Date()}if(af){return}Q._viewportWidth=ar;Q._viewportHeight=at},parseBox:function(ap){ap=ap||0;var ar=typeof ap,aq,at;if(ar==="number"){return{top:ap,right:ap,bottom:ap,left:ap}}else{if(ar!=="string"){return ap}}aq=ap.split(" ");at=aq.length;if(at===1){aq[1]=aq[2]=aq[3]=aq[0]}else{if(at===2){aq[2]=aq[0];aq[3]=aq[1]}else{if(at===3){aq[3]=aq[1]}}}return{top:parseFloat(aq[0])||0,right:parseFloat(aq[1])||0,bottom:parseFloat(aq[2])||0,left:parseFloat(aq[3])||0}},parseStyles:function(ap){var ar={},aq;if(ap){N.lastIndex=0;while((aq=N.exec(ap))){ar[aq[1]]=aq[2]||""}}return ar},select:function(ar,aq,ap){return Ext.fly(ap||m).select(ar,aq)},query:function(ap,ar,aq){return Ext.fly(aq||m).query(ap,ar)},unitizeBox:function(aq,ar){var ap=this;aq=ap.parseBox(aq);return ap.addUnits(aq.top,ar)+" "+ap.addUnits(aq.right,ar)+" "+ap.addUnits(aq.bottom,ar)+" "+ap.addUnits(aq.left,ar)},serializeForm:function(av){var ay=av.elements||(m.forms[av]||Ext.getDom(av)).elements,at=false,ar=encodeURIComponent,aB="",aA=ay.length,aC,aq,ap,ax,aw,aD,az,aE,au;for(aD=0;aD<aA;aD++){aC=ay[aD];aq=aC.name;ap=aC.type;ax=aC.options;if(!aC.disabled&&aq){if(/select-(one|multiple)/i.test(ap)){aE=ax.length;for(az=0;az<aE;az++){au=ax[az];if(au.selected){aw=au.hasAttribute("value");aB+=Ext.String.format("{0}={1}&",ar(aq),ar(aw?au.value:au.text))}}}else{if(!(/file|undefined|reset|button/i.test(ap))){if(!(/radio|checkbox/i.test(ap)&&!aC.checked)&&!(ap=="submit"&&at)){aB+=ar(aq)+"="+ar(aC.value)+"&";at=/submit/i.test(ap)}}}}}return aB.substr(0,aB.length-1)},getCommonAncestor:function(aq,ap,ar){ah=ah||new Ext.dom.Fly();ah.attach(Ext.getDom(aq));while(!ah.isAncestor(ap)){if(ah.dom.parentNode){ah.attach(ah.dom.parentNode)}else{ah.attach(document.body);break}}return ar?ah.dom:Ext.get(ah)}},addCls:function(ap,aA,ar){var aq=this,ax=aq.getData(),at,ay,av,aw,az,aB,au;if(!ap){return aq}if(!ax.isSynchronized){aq.synchronize()}ay=aq.dom;av=ax.classMap;aw=ax.classList;aA=aA?aA+v:"";ar=ar?v+ar:"";if(typeof ap==="string"){ap=ap.split(b)}for(az=0,aB=ap.length;az<aB;az++){au=ap[az];if(au){au=aA+au+ar;if(!av[au]){av[au]=true;aw.push(au);at=true}}}if(at){ay.className=aw.join(" ")}return aq},addStyles:function(av,au){var ap=0,at=(av||"").match(r),ar,aw=at.length,aq,ax=[];if(aw===1){ap=Math.abs(parseFloat(this.getStyle(au[at[0]]))||0)}else{if(aw){for(ar=0;ar<aw;ar++){aq=at[ar];ax.push(au[aq])}ax=this.getStyle(ax);for(ar=0;ar<aw;ar++){aq=at[ar];ap+=parseFloat(ax[au[aq]])||0}}}return ap},addUnits:function(aq,ap){return Q.addUnits(aq,ap)},adjustDirect2DDimension:function(at){var ay=this,ar=ay.dom,aw=ay.getStyle("display"),av=ar.style.display,ap=ar.style.position,ax=at===ai?0:1,aq=ar.currentStyle,au;if(aw==="inline"){ar.style.display="inline-block"}ar.style.position=aw.match(P)?"absolute":"static";au=(parseFloat(aq[at])||parseFloat(aq.msTransformOrigin.split(" ")[ax])*2)%1;ar.style.position=ap;if(aw==="inline"){ar.style.display=av}return au},animate:function(ap){ap=new Ext.fx.Animation(ap);ap.setElement(this);this._activeAnimation=ap;ap.on({animationend:this._onAnimationEnd});Ext.Animator.run(ap);return ap},_onAnimationEnd:function(){this._activeAnimation=null},getActiveAnimation:function(){return this._activeAnimation},append:function(){this.appendChild.apply(this,arguments)},appendChild:function(ap,av){var aq=this,at,au,ar;if(ap.nodeType||ap.dom||typeof ap==="string"){ap=Ext.getDom(ap);aq.dom.appendChild(ap);return !av?Ext.get(ap):ap}else{if(ap.length){at=Ext.fly(document.createDocumentFragment());au=ap.length;for(ar=0;ar<au;ar++){at.appendChild(ap[ar],av)}aq.dom.appendChild(at.dom);return av?at.dom:at}else{return aq.createChild(ap,null,av)}}},appendTo:function(ap){Ext.getDom(ap).appendChild(this.dom);return this},applyStyles:function(ap){if(ap){if(typeof ap==="function"){ap=ap.call()}if(typeof ap==="string"){ap=Q.parseStyles(ap)}if(typeof ap==="object"){this.setStyle(ap)}}return this},blur:function(){var ar=this,aq=ar.dom;if(aq!==m.body){try{aq.blur()}catch(ap){}return ar}else{return ar.focus(undefined,aq)}},cacheScrollValues:function(){var ar=this,at=[],aq=[],au,ap,aw,av;J=J||new Ext.dom.Fly();au=ar.query("*");for(aw=0,av=au.length;aw<av;aw++){ap=au[aw];if(ap.scrollTop>0||ap.scrollLeft!==0){aq.push(ap);at.push(J.attach(ap).getScroll())}}return function(){var ax,ay,az;for(ay=0,az=aq.length;ay<az;ay++){ax=at[ay];J.attach(aq[ay]);J.setScrollLeft(ax.left);J.setScrollTop(ax.top)}}},center:function(ap){return this.alignTo(ap||m,"c-c")},child:function(ar,at){var ap=this,aq=Ext.get(ap).id;return ap.selectNode(Ext.makeIdSelector(aq)+" > "+ar,!!at)},clone:function(ar,ap){var aq=this.dom.cloneNode(ar);if(Ext.supports.CloneNodeCopiesExpando){a(aq,ar)}return ap?aq:Ext.get(aq)},constrainScrollLeft:function(ap){var aq=this.dom;return Math.max(Math.min(ap,aq.scrollWidth-aq.clientWidth),0)},constrainScrollTop:function(ap){var aq=this.dom;return Math.max(Math.min(ap,aq.scrollHeight-aq.clientHeight),0)},createChild:function(ap,ar,aq){ap=ap||{tag:"div"};if(ar){return Ext.DomHelper.insertBefore(ar,ap,aq!==true)}else{return Ext.DomHelper.append(this.dom,ap,aq!==true)}},contains:function(ar){if(!ar){return false}var ap=this,aq=Ext.getDom(ar);return(aq===ap.dom)||ap.isAncestor(aq)},destroy:function(){var ap=this,aq=ap.dom;if(aq&&aq.parentNode){aq.parentNode.removeChild(aq)}ap.collect();if(!ap.isFly){ap.callParent()}},detach:function(){var ap=this.dom;if(ap&&ap.parentNode&&ap.tagName!=="BODY"){ap.parentNode.removeChild(ap)}return this},disableShadow:function(){var ap=this.shadow;if(ap){ap.hide();ap.disabled=true}},disableShim:function(){var ap=this.shim;if(ap){ap.hide();ap.disabled=true}},disableTouchContextMenu:function(){this._contextMenuListenerRemover=this.on({MSHoldVisual:function(ap){ap.preventDefault()},destroyable:true,delegated:false})},disableTouchScroll:function(){this.addCls(u);this.on({touchmove:function(ap){ap.preventDefault()},translate:false})},doReplaceWith:function(ap){var aq=this.dom;aq.parentNode.replaceChild(Ext.getDom(ap),aq)},doScrollIntoView:function(at,az,av,aA,au,ap){J=J||new Ext.dom.Fly();var aq=this,aB=aq.dom,aw=J.attach(at)[au](),ar=at.scrollTop,aC=aq.getScrollIntoViewXY(at,aw,ar),ay=aC.x,ax=aC.y;if(aA){if(av){av=Ext.apply({listeners:{afteranimate:function(){J.attach(aB).highlight()}}},av)}else{J.attach(aB).highlight()}}if(ax!==ar){J.attach(at).scrollTo("top",ax,av)}if(az!==false&&(ay!==aw)){J.attach(at)[ap]("left",ay,av)}return aq},down:function(ap,aq){return this.selectNode(ap,!!aq)},enableShadow:function(au,at){var ap=this,ar=ap.shadow||(ap.shadow=new Ext.dom.Shadow(Ext.apply({target:ap},au))),aq=ap.shim;if(aq){aq.offsets=ar.outerOffsets;aq.shadow=ar;ar.shim=aq}if(at===true||(at!==false&&ap.isVisible())){ar.show()}else{ar.hide()}ar.disabled=false},enableShim:function(au,at){var ap=this,ar=ap.shim||(ap.shim=new Ext.dom.Shim(Ext.apply({target:ap},au))),aq=ap.shadow;if(aq){ar.offsets=aq.outerOffsets;ar.shadow=aq;aq.shim=ar}if(at===true||(at!==false&&ap.isVisible())){ar.show()}else{ar.hide()}ar.disabled=false},findParent:function(au,aw,av){var aq=this,ar=aq.dom,ap=m.documentElement,at=0;if(aw||aw===0){if(typeof aw!=="number"){ap=Ext.getDom(aw);aw=Number.MAX_VALUE}}else{aw=50}while(ar&&ar.nodeType===1&&at<aw&&ar!==ap){if(Ext.fly(ar).is(au)){return av?Ext.get(ar):ar}at++;ar=ar.parentNode}return null},findParentNode:function(aq,at,ar){var ap=Ext.fly(this.dom.parentNode);return ap?ap.findParent(aq,at,ar):null},first:function(ap,aq){return this.matchNode("nextSibling","firstChild",ap,aq)},focus:function(aq,ap){var ar=this;ap=ap||ar.dom;if(Number(aq)){Ext.defer(ar.focus,aq,ar,[null,ap])}else{Ext.GlobalEvents.fireEvent("beforefocus",ap);ap.focus()}return ar},collect:function(){var ar=this,at=ar.dom,aq=ar.shadow,ap=ar.shim;if(!ar.isFly){ar.mixins.observable.destroy.call(ar);delete Ext.cache[ar.id];ar.destroyed=true;ar.el=null}if(at){at._extData=ar.dom=null}if(aq){aq.hide();ar.shadow=null}if(ap){ap.hide();ar.shim=null}},getAnchorToXY:function(aq,ar,ap,at){return aq.getAnchorXY(ar,ap,at)},getAttribute:function(ar,ap){var aq=this.dom;return ap?(aq.getAttributeNS(ap,ar)||aq.getAttribute(ap+":"+ar)):(aq.getAttribute(ar)||aq[ar]||null)},getAttributes:function(){var aq=this.dom.attributes,ap={},au,ar,at;for(ar=0,at=aq.length;ar<at;ar++){au=aq[ar];ap[au.name]=au.value}return ap},getBottom:function(ap){return(ap?this.getLocalY():this.getY())+this.getHeight()},getById:function(aq,ar){var ap=m.getElementById(aq)||this.dom.querySelector(Ext.makeIdSelector(aq));return ar?ap:(ap?Ext.get(ap):null)},getBorderPadding:function(){var ap=this.getStyle(K),aq=this.getStyle(ag);return{beforeX:(parseFloat(aq[p.l])||0)+(parseFloat(ap[A.l])||0),afterX:(parseFloat(aq[p.r])||0)+(parseFloat(ap[A.r])||0),beforeY:(parseFloat(aq[p.t])||0)+(parseFloat(ap[A.t])||0),afterY:(parseFloat(aq[p.b])||0)+(parseFloat(ap[A.b])||0)}},getBorders:function(){var ap=this.getStyle(ag);return{beforeX:(parseFloat(ap[p.l])||0),afterX:(parseFloat(ap[p.r])||0),beforeY:(parseFloat(ap[p.t])||0),afterY:(parseFloat(ap[p.b])||0)}},getBorderWidth:function(ap){return this.addStyles(ap,p)},getData:function(ar){var aq=this.dom,ap;if(aq){ap=aq._extData;if(!ap&&!ar){aq._extData=ap={}}}return ap},getFirstChild:function(){return Ext.get(this.dom.firstElementChild)},getHeight:function(aq,av){var ap=this,ar=ap.isStyle("display","none"),au,at;if(ar){return 0}au=ap.dom.offsetHeight;if(Ext.supports.Direct2DBug){at=ap.adjustDirect2DDimension(h);if(av){au+=at}else{if(at>0&&at<0.5){au++}}}if(aq){au-=ap.getBorderWidth("tb")+ap.getPadding("tb")}return(au<0)?0:au},getHtml:function(){return this.dom?this.dom.innerHTML:""},getLeft:function(ap){return ap?this.getLocalX():this.getX()},getLocalX:function(){var aq=this,ap,ar=aq.getStyle("left");if(!ar||ar==="auto"){ar=0}else{if(S.test(ar)){ar=parseFloat(ar)}else{ar=aq.getX();ap=aq.dom.offsetParent;if(ap){ar-=Ext.fly(ap).getX()}}}return ar},getLocalXY:function(){var aq=this,ap,au=aq.getStyle(["left","top"]),at=au.left,ar=au.top;if(!at||at==="auto"){at=0}else{if(S.test(at)){at=parseFloat(at)}else{at=aq.getX();ap=aq.dom.offsetParent;if(ap){at-=Ext.fly(ap).getX()}}}if(!ar||ar==="auto"){ar=0}else{if(S.test(ar)){ar=parseFloat(ar)}else{ar=aq.getY();ap=aq.dom.offsetParent;if(ap){ar-=Ext.fly(ap).getY()}}}return[at,ar]},getLocalY:function(){var ap=this,ar,aq=ap.getStyle("top");if(!aq||aq==="auto"){aq=0}else{if(S.test(aq)){aq=parseFloat(aq)}else{aq=ap.getY();ar=ap.dom.offsetParent;if(ar){aq-=Ext.fly(ar).getY()}}}return aq},getMargin:(function(){var aq={t:"top",l:"left",r:"right",b:"bottom"},ap=["margin-top","margin-left","margin-right","margin-bottom"];return function(aw){var at=this,ar,av,au;if(!aw){ar=at.getStyle(ap);au={};if(ar&&typeof ar==="object"){au={};for(av in am){au[av]=au[aq[av]]=parseFloat(ar[am[av]])||0}}}else{au=at.addStyles(aw,am)}return au}})(),getPadding:function(ap){return this.addStyles(ap,A)},getParent:function(){return Ext.get(this.dom.parentNode)},getRight:function(ap){return(ap?this.getLocalX():this.getX())+this.getWidth()},getScroll:function(){var ap=this,at=ap.dom,av=m.documentElement,ar,aq,au=document.body;if(at===m||at===au){ar=av.scrollLeft||(au?au.scrollLeft:0);aq=av.scrollTop||(au?au.scrollTop:0)}else{ar=at.scrollLeft;aq=at.scrollTop}return{left:ar,top:aq}},getScrollIntoViewXY:function(aB,av,at){var ay=this.dom,ar=Ext.getDom(aB),au=this.getOffsetsTo(ar),aq=ay.offsetWidth,aF=ay.offsetHeight,ap=au[0]+av,aD=au[1]+at,az=aD+aF,aC=ap+aq,aG=ar.clientHeight,aw=ar.clientWidth,aA=av,aH=at,ax=aH+aG,aE=aA+aw;if(aF>aG||aD<aH){at=aD}else{if(az>ax){at=az-aG}}if(aq>aw||ap<aA){av=ap}else{if(aC>aE){av=aC-aw}}return{x:av,y:at}},getScrollLeft:function(){var ap=this.dom;if(ap===m||ap===document.body){return this.getScroll().left}else{return ap.scrollLeft}},getScrollTop:function(){var ap=this.dom;if(ap===m||ap===document.body){return this.getScroll().top}else{return ap.scrollTop}},getSize:function(ap){return{width:this.getWidth(ap),height:this.getHeight(ap)}},getStyle:function(at,aC){var aD=this,ax=aD.dom,ay=typeof at!=="string",au=aD.styleHooks,ar=at,aE=ar,aB=1,aA,aw,ap,aF,av,aq,az;if(ay){ap={};ar=aE[0];az=0;if(!(aB=aE.length)){return ap}}if(!ax||ax.documentElement){return ap||""}aA=ax.style;if(aC){aq=aA}else{aq=ax.ownerDocument.defaultView.getComputedStyle(ax,null);if(!aq){aC=true;aq=aA}}do{aF=au[ar];if(!aF){au[ar]=aF={name:Q.normalize(ar)}}if(aF.get){av=aF.get(ax,aD,aC,aq)}else{aw=aF.name;av=aq[aw]}if(!ay){return av}ap[ar]=av;ar=aE[++az]}while(az<aB);return ap},getStyleValue:function(ap){return this.dom.style.getPropertyValue(ap)},getTop:function(ap){return ap?this.getLocalY():this.getY()},getValue:function(aq){var ap=this.dom.value;return aq?parseInt(ap,10):ap},getViewSize:function(){var ap=this.dom;if(ap===m||ap===m.body){return{width:Q.getViewportWidth(),height:Q.getViewportHeight()}}else{return{width:ap.clientWidth,height:ap.clientHeight}}},getVisibilityMode:function(){var ar=this,ap=ar.getData(),aq=ap.visibilityMode;if(aq===undefined){ap.visibilityMode=aq=Q.DISPLAY}return aq},getWidth:function(aw,at){var aq=this,au=aq.dom,ar=aq.isStyle("display","none"),ap,ax,av;if(ar){return 0}if(Ext.supports.BoundingClientRect){ap=au.getBoundingClientRect();ax=(aq.vertical&&!Ext.supports.RotatedBoundingClientRect)?(ap.bottom-ap.top):(ap.right-ap.left);ax=at?ax:Math.ceil(ax)}else{ax=au.offsetWidth}if(Ext.supports.Direct2DBug&&!aq.vertical){av=aq.adjustDirect2DDimension(ai);if(at){ax+=av}else{if(av>0&&av<0.5){ax++}}}if(aw){ax-=aq.getBorderWidth("lr")+aq.getPadding("lr")}return(ax<0)?0:ax},getX:function(){return this.getXY()[0]},getXY:function(){var ap=Math.round,at=this.dom,aw=0,au=0,ar,av;if(at!==m&&at!==m.body){try{ar=at.getBoundingClientRect()}catch(aq){ar={left:0,top:0}}aw=ap(ar.left);au=ap(ar.top);av=Ext.getDoc().getScroll();aw+=av.left;au+=av.top}return[aw,au]},getY:function(){return this.getXY()[1]},getZIndex:function(){return parseInt(this.getStyle("z-index"),10)},hasCls:function(ap){var aq=this.getData();if(!aq.isSynchronized){this.synchronize()}return aq.classMap.hasOwnProperty(ap)},hide:function(){this.setVisible(false);return this},insertAfter:function(ap){ap=Ext.getDom(ap);ap.parentNode.insertBefore(this.dom,ap.nextSibling);return this},insertBefore:function(ap){ap=Ext.getDom(ap);ap.parentNode.insertBefore(this.dom,ap);return this},insertFirst:function(aq,ap){aq=aq||{};if(aq.nodeType||aq.dom||typeof aq==="string"){aq=Ext.getDom(aq);this.dom.insertBefore(aq,this.dom.firstChild);return !ap?Ext.get(aq):aq}else{return this.createChild(aq,this.dom.firstChild,ap)}},insertHtml:function(at,ap,ar){var aq=Ext.DomHelper.insertHtml(at,this.dom,ap);return ar?Ext.get(aq):aq},insertSibling:function(at,aw,az){var ay=this,ap=Ext.DomHelper,aq=(aw||"before").toLowerCase()==="after",av,ar,au,ax;if(Ext.isIterable(at)){au=at.length;ar=Ext.fly(document.createDocumentFragment());if(Ext.isArray(at)){for(ax=0;ax<au;ax++){av=ar.appendChild(at[ax],az)}}else{for(ax=0;ax<au;ax++){ar.dom.appendChild(av=at[0])}if(az===false){av=Ext.get(av)}}ay.dom.parentNode.insertBefore(ar.dom,aq?ay.dom.nextSibling:ay.dom);return av}at=at||{};if(at.nodeType||at.dom){av=ay.dom.parentNode.insertBefore(Ext.getDom(at),aq?ay.dom.nextSibling:ay.dom);if(!az){av=Ext.get(av)}}else{if(aq&&!ay.dom.nextSibling){av=ap.append(ay.dom.parentNode,at,!az)}else{av=ap[aq?"insertAfter":"insertBefore"](ay.dom,at,!az)}}return av},is:function(ar){var aq=this.dom,ap;if(!ar){ap=true}else{if(!aq.tagName){ap=false}else{if(Ext.isFunction(ar)){ap=ar(aq)}else{ap=aq[Ext.supports.matchesSelector](ar)}}}return ap},isAncestor:function(at){var ar=false,ap=this.dom,aq=Ext.getDom(at);if(ap&&aq){if(ap.contains){return ap.contains(aq)}else{if(ap.compareDocumentPosition){return !!(ap.compareDocumentPosition(aq)&16)}else{while((aq=aq.parentNode)){ar=aq===ap||ar}}}}return ar},isPainted:(function(){return !Ext.browser.is.IE?function(){var ap=this.dom;return Boolean(ap&&ap.offsetParent)}:function(){var ap=this.dom;return Boolean(ap&&(ap.offsetHeight!==0&&ap.offsetWidth!==0))}})(),isScrollable:function(){var ap=this.dom;return ap.scrollHeight>ap.clientHeight||ap.scrollWidth>ap.clientWidth},isStyle:function(ap,aq){return this.getStyle(ap)===aq},isVisible:function(ap){var aq=this.dom,ar;if(!aq){return false}if(!s){s=new Ext.dom.Fly()}for(ar=aq.ownerDocument.documentElement;aq!==ar;aq=aq.parentNode){if(!aq||aq.nodeType===11||(s.attach(aq)).isStyle(ak,F)||s.isStyle(ad,X)){return false}if(!ap){break}}return true},last:function(ap,aq){return this.matchNode("previousSibling","lastChild",ap,aq)},maskIframes:function(){var ap=document.getElementsByTagName("iframe");Ext.each(ap,function(aq){var at=Ext.fly(aq.parentNode),ar=at.mask();ar.setStyle("background-color","transparent")})},matchNode:function(av,at,au,ap){var aq=this.dom,ar;if(!aq){return null}ar=aq[at];while(ar){if(ar.nodeType===1&&(!au||Ext.fly(ar,"_matchNode").is(au))){return !ap?Ext.get(ar):ar}ar=ar[av]}return null},next:function(ap,aq){return this.matchNode("nextSibling","nextSibling",ap,aq)},parent:function(ap,aq){return this.matchNode("parentNode","parentNode",ap,aq)},position:function(ar,aq,at,ap){var au=this;if(au.dom.tagName!=="BODY"){if(!ar&&au.isStyle(q,U)){au.setStyle(q,T)}else{if(ar){au.setStyle(q,ar)}}if(aq){au.setStyle(an,aq)}if(at||ap){au.setXY([at||false,ap||false])}}},prev:function(ap,aq){return this.matchNode("previousSibling","previousSibling",ap,aq)},query:function(av,ar,ap){var ax=this.dom,az,aA,aq,au,at,ay,aw;if(!ax){return null}ar=(ar!==false);av=av.split(",");if(!ap){az=[]}for(ay=0,aA=av.length;ay<aA;ay++){if(typeof av[ay]==="string"){if(ap){au=ax.querySelector(av[ay]);return ar?au:Ext.get(au)}at=ax.querySelectorAll(av[ay]);for(aw=0,aq=at.length;aw<aq;aw++){az.push(ar?at[aw]:Ext.get(at[aw]))}}}return az},radioCls:function(aq){var ar=this.dom.parentNode.childNodes,au;aq=Ext.isArray(aq)?aq:[aq];for(var ap=0,at=ar.length;ap<at;ap++){au=ar[ap];if(au&&au.nodeType===1){Ext.fly(au).removeCls(aq)}}return this.addCls(aq)},redraw:function(){var aq=this.dom,ap=aq.style;ap.display="none";aq.offsetHeight;ap.display=""},remove:function(){this.destroy()},removeChild:function(ap){this.dom.removeChild(Ext.getDom(ap));return this},removeCls:function(ap,aA,ar){var aq=this,ax=aq.getData(),at,ay,av,aw,az,aB,au;if(!ap){return aq}if(!ax.isSynchronized){aq.synchronize()}ay=aq.dom;av=ax.classMap;aw=ax.classList;aA=aA?aA+v:"";ar=ar?v+ar:"";if(typeof ap==="string"){ap=ap.split(b)}for(az=0,aB=ap.length;az<aB;az++){au=ap[az];if(au){au=aA+au+ar;if(av[au]){delete av[au];Ext.Array.remove(aw,au);at=true}}}if(at){ay.className=aw.join(" ")}return aq},repaint:function(){var ap=this;ap.addCls("x-repaint");Ext.defer(function(){if(ap.dom){Ext.fly(ap.dom).removeCls("x-repaint")}},1);return ap},replace:function(ap,au){ap=Ext.getDom(ap);var at=ap.parentNode,ar=ap.id,aq=this.dom;if(au!==false&&ar&&Ext.cache[ar]){at.insertBefore(aq,ap);Ext.get(ap).destroy()}else{at.replaceChild(aq,ap)}return this},replaceCls:function(ax,aq,aC,aw){var ar=this,aA,av,ay,aB,ap,at,az=ar.getData(),au;if(!ax&&!aq){return ar}ax=ax||[];aq=aq||[];if(!az.isSynchronized){ar.synchronize()}if(!aw){aw=""}aA=ar.dom;av=az.classMap;ay=az.classList;aC=aC?aC+v:"";aw=aw?v+aw:"";if(typeof ax==="string"){ax=ax.split(b)}if(typeof aq==="string"){aq=aq.split(b)}for(aB=0,ap=ax.length;aB<ap;aB++){at=aC+ax[aB]+aw;if(av[at]){delete av[at];au=true}}for(aB=0,ap=aq.length;aB<ap;aB++){at=aC+aq[aB]+aw;if(!av[at]){av[at]=true;au=true}}if(au){az.classList=ay=Ext.Object.getKeys(av);aA.className=ay.join(" ")}return ar},replaceWith:function(aq){var ar=this,at=ar.dom,ap=at.parentNode,au=Ext.cache,av;ar.clearListeners();if(aq.nodeType||aq.dom||typeof aq==="string"){aq=Ext.get(aq);av=ap.insertBefore(aq.dom,at)}else{av=Ext.DomHelper.insertBefore(at,aq)}ap.removeChild(at);ar.dom=av;if(!ar.isFly){delete au[ar.id];au[ar.id=Ext.id(av)]=ar}return ar},resolveListenerScope:function(aq){var ap=this.component;return ap?ap.resolveListenerScope(aq):this},scroll:function(ap,aq,at){if(!this.isScrollable()){return false}ap=ap.charAt(0);var ay=this,av=ay.dom,ax=ap==="r"||ap==="l"?"left":"top",ar=false,au,aw;if(ap==="l"||ap==="t"||ap==="u"){aq=-aq}if(ax==="left"){au=av.scrollLeft;aw=ay.constrainScrollLeft(au+aq)}else{au=av.scrollTop;aw=ay.constrainScrollTop(au+aq)}if(aw!==au){this.scrollTo(ax,aw,at);ar=true}return ar},scrollBy:function(au,at,ap){var aq=this,ar=aq.dom;if(au.length){ap=at;at=au[1];au=au[0]}else{if(typeof au!="number"){ap=at;at=au.y;au=au.x}}if(au){aq.scrollTo("left",aq.constrainScrollLeft(ar.scrollLeft+au),ap)}if(at){aq.scrollTo("top",aq.constrainScrollTop(ar.scrollTop+at),ap)}return aq},scrollChildIntoView:function(aq,ap){Ext.fly(aq).scrollIntoView(this,ap)},scrollIntoView:function(ar,aq,ap,at){ar=Ext.getDom(ar)||Ext.getBody().dom;return this.doScrollIntoView(ar,aq,ap,at,"getScrollLeft","scrollTo")},scrollTo:function(ap,ar,aw){var at=ac.test(ap),aq=this,av=at?"scrollTop":"scrollLeft",au=aq.dom,ax;if(!aw||!aq.anim){au[av]=ar;au[av]=ar}else{ax={to:{}};ax.to[av]=ar;if(Ext.isObject(aw)){Ext.applyIf(ax,aw)}aq.animate(ax)}return aq},select:function(at,aq){var ar,ap;if(typeof at==="string"){ap=this.query(at,!aq)}else{ap=at;ar=true}return aq?new Ext.CompositeElement(ap,!ar):new Ext.CompositeElementLite(ap,true)},selectNode:function(aq,ap){return this.query(aq,ap,true)},set:function(au,av){var aq=this,at=aq.dom,ap,ar;for(ap in au){if(au.hasOwnProperty(ap)){ar=au[ap];if(ap==="style"){aq.applyStyles(ar)}else{if(ap==="cls"){at.className=ar}else{if(av!==false){if(ar===undefined){at.removeAttribute(ap)}else{at.setAttribute(ap,ar)}}else{at[ap]=ar}}}}}return aq},setBottom:function(ap){this.dom.style[d]=Q.addUnits(ap);return this},setCls:function(aq){var at=this,ap=at.getData(),ax,ar,aw,au,av;if(!ap.isSynchronized){at.synchronize()}if(typeof aq==="string"){aq=aq.split(b)}ap.classList=av=aq.slice();ap.classMap=au={};for(ax=0,ar=av.length;ax<ar;ax++){au[av[ax]]=true}at.dom.className=av.join(" ")},setDisplayed:function(aq){var ap=this;if(typeof aq==="boolean"){aq=aq?ap._getDisplay():X}ap.setStyle(ad,aq);if(ap.shadow||ap.shim){ap.setUnderlaysVisible(aq!==X)}return ap},setHeight:function(ap){var aq=this;aq.dom.style[h]=Q.addUnits(ap);if(aq.shadow||aq.shim){aq.syncUnderlays()}return aq},setHtml:function(ap){if(this.dom){this.dom.innerHTML=ap}return this},setId:function(aq){var ap=this,ar=ap.id,at=Ext.cache;if(ar){delete at[ar]}ap.dom.id=aq;ap.id=aq;at[aq]=ap;return ap},setLeft:function(aq){var ap=this;ap.dom.style[M]=Q.addUnits(aq);if(ap.shadow||ap.shim){ap.syncUnderlays()}return ap},setLocalX:function(ar){var aq=this,ap=aq.dom.style;ap.right="auto";ap.left=(ar===null)?"auto":ar+"px";if(aq.shadow||aq.shim){aq.syncUnderlays()}return aq},setLocalXY:function(ar,aq){var ap=this,at=ap.dom.style;at.right="auto";if(ar&&ar.length){aq=ar[1];ar=ar[0]}if(ar===null){at.left="auto"}else{if(ar!==undefined){at.left=ar+"px"}}if(aq===null){at.top="auto"}else{if(aq!==undefined){at.top=aq+"px"}}if(ap.shadow||ap.shim){ap.syncUnderlays()}return ap},setLocalY:function(aq){var ap=this;ap.dom.style.top=(aq===null)?"auto":aq+"px";if(ap.shadow||ap.shim){ap.syncUnderlays()}return ap},setMargin:function(aq){var ap=this,ar=ap.dom.style;if(aq||aq===0){aq=ap.self.unitizeBox((aq===true)?5:aq);ar.setProperty("margin",aq,"important")}else{ar.removeProperty("margin-top");ar.removeProperty("margin-right");ar.removeProperty("margin-bottom");ar.removeProperty("margin-left")}},setMaxHeight:function(ap){this.dom.style[E]=Q.addUnits(ap);return this},setMaxWidth:function(ap){this.dom.style[R]=Q.addUnits(ap);return this},setMinHeight:function(ap){this.dom.style[ae]=Q.addUnits(ap);return this},setMinWidth:function(ap){this.dom.style[C]=Q.addUnits(ap);return this},setOpacity:function(ap){var aq=this;if(aq.dom){aq.setStyle("opacity",ap)}return aq},setPadding:function(aq){var ap=this,ar=ap.dom.style;if(aq||aq===0){aq=ap.self.unitizeBox((aq===true)?5:aq);ar.setProperty("padding",aq,"important")}else{ar.removeProperty("padding-top");ar.removeProperty("padding-right");ar.removeProperty("padding-bottom");ar.removeProperty("padding-left")}},setRight:function(ap){this.dom.style[L]=Q.addUnits(ap);return this},setScrollLeft:function(ap){this.dom.scrollLeft=ap;return this},setScrollTop:function(ap){this.dom.scrollTop=ap;return this},setSize:function(ap,ar){var aq=this,at=aq.dom.style;if(Ext.isObject(ap)){ar=ap.height;ap=ap.width}at.width=Q.addUnits(ap);at.height=Q.addUnits(ar);if(aq.shadow||aq.shim){aq.syncUnderlays()}return aq},setSizeState:function(ap){var at=this,aq,ar;if(ap===true){aq=B;ar=[f,O]}else{if(ap===false){aq=f;ar=[B,O]}else{if(ap===null){aq=O;ar=[B,f]}else{ar=[B,f,O]}}}if(aq){at.addCls(aq)}at.removeCls(ar);return at},setStyle:function(av,at){var aq=this,au=aq.dom,aw=aq.styleHooks,ap=au.style,ax=av,ar;if(typeof ax==="string"){ar=aw[ax];if(!ar){aw[ax]=ar={name:Q.normalize(ax)}}at=(at==null)?"":at;if(ar.set){ar.set(au,at,aq)}else{ap[ar.name]=at}if(ar.afterSet){ar.afterSet(au,at,aq)}}else{for(ax in av){if(av.hasOwnProperty(ax)){ar=aw[ax];if(!ar){aw[ax]=ar={name:Q.normalize(ax)}}at=av[ax];at=(at==null)?"":at;if(ar.set){ar.set(au,at,aq)}else{ap[ar.name]=at}if(ar.afterSet){ar.afterSet(au,at,aq)}}}}return aq},setText:function(ap){this.dom.textContent=ap},setTop:function(aq){var ap=this;ap.dom.style[o]=Q.addUnits(aq);if(ap.shadow||ap.shim){ap.syncUnderlays()}return ap},setUnderlaysVisible:function(ar){var aq=this.shadow,ap=this.shim;if(aq&&!aq.disabled){if(ar){aq.show()}else{aq.hide()}}if(ap&&!ap.disabled){if(ar){ap.show()}else{ap.hide()}}},setVisibility:function(ap){var aq=this.dom.style;if(ap){aq.removeProperty("visibility")}else{aq.setProperty("visibility","hidden","important")}},setVisibilityMode:function(ap){this.getData().visibilityMode=ap;return this},setVisible:function(ap){var ar=this,at=ar.getVisibilityMode(),aq=ap?"removeCls":"addCls";switch(at){case Q.DISPLAY:ar.removeCls([H,al,aa]);ar[aq](D);break;case Q.VISIBILITY:ar.removeCls([D,al,aa]);ar[aq](H);break;case Q.OFFSETS:ar.removeCls([H,D,aa]);ar[aq](al);break;case Q.CLIP:ar.removeCls([H,D,al]);ar[aq](aa);break}if(ar.shadow||ar.shim){ar.setUnderlaysVisible(ap)}return ar},setWidth:function(ap){var aq=this;aq.dom.style[ai]=Q.addUnits(ap);if(aq.shadow||aq.shim){aq.syncUnderlays()}return aq},setX:function(ap){return this.setXY([ap,false])},setXY:function(ap){var au=this,aq=au.translatePoints(ap),at=au.dom.style,ar;au.position();at.right="auto";for(ar in aq){if(!isNaN(aq[ar])){at[ar]=aq[ar]+"px"}}if(au.shadow||au.shim){au.syncUnderlays()}return au},setY:function(ap){return this.setXY([false,ap])},setZIndex:function(ap){var aq=this;if(aq.shadow){aq.shadow.setZIndex(ap)}if(aq.shim){aq.shim.setZIndex(ap)}return aq.setStyle("z-index",ap)},show:function(){this.setVisible(true);return this},swapCls:function(aw,au,av,ar){if(av===undefined){av=true}var aq=this,at=av?aw:au,ap=av?au:aw;if(ap){aq.removeCls(ar?ar+"-"+ap:ap)}if(at){aq.addCls(ar?ar+"-"+at:at)}return aq},synchronize:function(){var ay=this,au=ay.dom,ap={},ax=au.className,ar,av,aw,aq,at=ay.getData();if(ax&&ax.length>0){ar=au.className.split(G);for(av=0,aw=ar.length;av<aw;av++){aq=ar[av];ap[aq]=true}}else{ar=[]}at.classList=ar;at.classMap=ap;at.isSynchronized=true;return ay},syncUnderlays:function(){var au=this,ay=au.shadow,aq=au.shim,ar=au.dom,ap,aw,av,ax,at;if(au.isVisible()){ap=au.getXY();aw=ap[0];av=ap[1];ax=ar.offsetWidth;at=ar.offsetHeight;if(ay&&!ay.hidden){ay.realign(aw,av,ax,at)}if(aq&&!aq.hidden){aq.realign(aw,av,ax,at)}}},toggleCls:function(ap,aq){if(typeof aq!=="boolean"){aq=!this.hasCls(ap)}return aq?this.addCls(ap):this.removeCls(ap)},toggle:function(){this.setVisible(!this.isVisible());return this},translate:function(){var ap="webkitTransform" in m.createElement("div").style?"webkitTransform":"transform";return function(ar,aq,at){this.dom.style[ap]="translate3d("+(ar||0)+"px, "+(aq||0)+"px, "+(at||0)+"px)"}}(),unmaskIframes:function(){var ap=document.getElementsByTagName("iframe");Ext.each(ap,function(aq){var ar=Ext.fly(aq.parentNode);ar.unmask()})},unwrap:function(){var au=this.dom,ax=au.parentNode,aq,at=Ext.fly(Ext.Element.getActiveElement()),ar,ap,av,aw;ar=Ext.cache[at.id];if(ar){at=ar}if(this.contains(at)){if(ar){ar.suspendFocusEvents()}ap=true}if(ax){aq=ax.parentNode;if(ap){aw=aq.getAttribute("tabIndex");av=Ext.fly(aq);av.set({tabIndex:-1});av.suspendFocusEvents();av.focus()}aq.insertBefore(au,ax);aq.removeChild(ax)}else{aq=document.createDocumentFragment();aq.appendChild(au)}if(ap){if(ar){ar.focus();ar.resumeFocusEvents()}else{Ext.fly(at).focus()}if(av){av.resumeFocusEvents();av.set({tabIndex:aw})}}return this},up:function(aq,ar,ap){return this.findParentNode(aq,ar,!ap)},update:function(ap){return this.setHtml(ap)},wrap:function(aw,ar,az){var aq=this,aA=aq.dom,ay=Ext.DomHelper.insertBefore(aA,aw||{tag:"div"},!ar),ap=ay,av=Ext.Element.getActiveElement(),ax,au,at;ax=Ext.cache[av.id];if(ax){av=ax}if(az){ap=ay.selectNode(az,ar)}if(aq.contains(av)){if(ax){ax.suspendFocusEvents()}at=ay.dom.getAttribute("tabIndex");ay.set({tabIndex:-1});ay.suspendFocusEvents();ay.focus();au=true}ap.appendChild(aA);if(au){if(ax){ax.focus();ax.resumeFocusEvents()}else{Ext.fly(av).focus()}ay.resumeFocusEvents();ay.set({tabIndex:at})}return ay},privates:{doAddListener:function(ay,ap,aq,ar,au,at,av){var aA=this,aw,ax,az;ay=Ext.canonicalEventName(ay);if(!aA.blockedEvents[ay]){aw=aA.mixins.observable.doAddListener;ar=ar||{};if(aA.longpressEvents[ay]){aA.disableTouchContextMenu()}if(Q.useDelegatedEvents===false){ar.delegated=ar.delegated||false}if(ar.translate!==false){ax=aA.additiveEvents[ay];if(ax){ar.type=ay;ay=ax;aw.call(aA,ay,ap,aq,ar,au,at,av)}az=aA.eventMap[ay];if(az){ar.type=ar.type||ay;ay=az}}aw.call(aA,ay,ap,aq,ar,au,at,av);delete ar.type}},doRemoveListener:function(aw,ar,aq){var at=this,ap,av,au,ax;if(!at.blockedEvents[aw]){ap=at.mixins.observable.doRemoveListener;if(at.longpressEvents[aw]){ax=this._contextMenuListenerRemover;if(ax){ax.destroy()}}au=at.additiveEvents[aw];if(au){aw=au;ap.call(at,aw,ar,aq)}av=at.eventMap[aw];if(av){ap.call(at,av,ar,aq)}ap.call(at,aw,ar,aq)}},_initEvent:function(ap){return(this.events[ap]=new Ext.dom.ElementEvent(this,ap))},_getDisplay:function(){var ap=this.getData(),aq=ap[Y];if(aq===undefined){ap[Y]=aq=""}return aq},_getPublisher:function(ar){var aq=Ext.event.publisher.Publisher,ap=aq.publishersByEvent[ar];if(!ap||(this.dom===window&&ar==="resize")){ap=aq.publishers.dom}return ap},isFocusSuspended:function(){return !!this.getData().suspendFocusEvents},suspendFocusEvents:function(){if(!this.isFly){this.suspendEvent("focus","blur")}this.getData().suspendFocusEvents=true},resumeFocusEvents:function(){function ap(){var aq;if(!this.destroyed){aq=this.getData();if(aq){aq.suspendFocusEvents=false}if(!this.isFly){this.resumeEvent("focus","blur")}}}if(!this.destroyed&&this.getData().suspendFocusEvents){if(Ext.isIE){Ext.asap(ap,this)}else{ap.call(this)}}}},deprecated:{"5.0":{methods:{cssTranslate:null,getHTML:"getHtml",getOuterHeight:null,getOuterWidth:null,getPageBox:function(av){var ay=this,aw=ay.dom,aA=aw.nodeName==="BODY",ap=aA?Q.getViewportWidth():aw.offsetWidth,ax=aA?Q.getViewportHeight():aw.offsetHeight,ar=ay.getXY(),aq=ar[1],at=ar[0]+ap,az=ar[1]+ax,au=ar[0];if(av){return new Ext.util.Region(aq,at,az,au)}else{return{left:au,top:aq,width:ap,height:ax,right:at,bottom:az}}},getScrollParent:null,isDescendent:null,isTransparent:function(aq){var ap=this.getStyle(aq);return ap?ab.test(ap):false},purgeAllListeners:"clearListeners",removeAllListeners:"clearListeners",setHTML:"setHtml",setTopLeft:null}}}}},1,0,0,0,0,[[Ext.util.Positionable.prototype.mixinId||Ext.util.Positionable.$className,Ext.util.Positionable],[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.dom,"Element",Ext,"Element"],function(f){var v=document,H=f.prototype,K=Ext.supports,r="pointerdown",z="pointermove",w="pointerup",y="pointercancel",C="MSPointerDown",J="MSPointerMove",g="MSPointerUp",u="MSPointerCancel",q="mousedown",c="mousemove",s="mouseup",t="mouseover",p="mouseout",d="mouseenter",A="mouseleave",I="touchstart",F="touchmove",h="touchend",B="touchcancel",j="click",D="dblclick",G="tap",m="doubletap",E=H.eventMap={},o=H.additiveEvents={},a=Ext.id,b;Ext.id=function(O,N){var M=Ext.getDom(O,true),P,L;if(!M){L=a(O,N)}else{if(!(L=M.id)){L=a(null,N||f.prototype.identifiablePrefix);if(Ext.isSandboxed){P=Ext.sandboxPrefix||(Ext.sandboxPrefix=Ext.sandboxName.toLowerCase()+"-");L=P+L}M.id=L}}return L};if(K.PointerEvents){E[q]=r;E[c]=z;E[s]=w;E[I]=r;E[F]=z;E[h]=w;E[B]=y;E[j]=G;E[D]=m;E[t]="pointerover";E[p]="pointerout";E[d]="pointerenter";E[A]="pointerleave"}else{if(K.MSPointerEvents){E[r]=C;E[z]=J;E[w]=g;E[y]=u;E[q]=C;E[c]=J;E[s]=g;E[I]=C;E[F]=J;E[h]=g;E[B]=u;E[j]=G;E[D]=m;E[t]="MSPointerOver";E[p]="MSPointerOut"}else{if(K.TouchEvents){E[r]=I;E[z]=F;E[w]=h;E[y]=B;E[q]=I;E[c]=F;E[s]=h;E[j]=G;E[D]=m;if(Ext.isWebKit&&Ext.os.is.Desktop){E[I]=q;E[F]=c;E[h]=s;E[B]=s;o[q]=q;o[c]=c;o[s]=s;o[I]=I;o[F]=F;o[h]=h;o[B]=B;o[r]=q;o[z]=c;o[w]=s;o[y]=s}}else{E[r]=q;E[z]=c;E[w]=s;E[y]=s;E[I]=q;E[F]=c;E[h]=s;E[B]=s}}}if(Ext.isWebKit){E.transitionend=Ext.browser.getVendorProperyName("transitionEnd");E.animationstart=Ext.browser.getVendorProperyName("animationStart");E.animationend=Ext.browser.getVendorProperyName("animationEnd")}if(!Ext.supports.MouseWheel&&!Ext.isOpera){E.mousewheel="DOMMouseScroll"}b=H.$eventOptions=Ext.Object.chain(H.$eventOptions);b.translate=b.capture=b.delegate=b.delegated=b.stopEvent=b.preventDefault=b.stopPropagation=b.element=1;H.styleHooks.opacity={name:"opacity",afterSet:function(O,N,M){var L=M.shadow;if(L){L.setOpacity(N)}}};H.getTrueXY=H.getXY;Ext.select=f.select;Ext.query=f.query;Ext.apply(Ext,{get:function(L){return f.get(L)},getDom:function(L){if(!L||!v){return null}return typeof L==="string"?Ext.getElementById(L):"dom" in L?L.dom:L},getBody:function(){if(!Ext._bodyEl){if(!v.body){throw new Error("[Ext.getBody] document.body does not yet exist")}Ext._bodyEl=Ext.get(v.body)}return Ext._bodyEl},getHead:function(){if(!Ext._headEl){Ext._headEl=Ext.get(v.head||v.getElementsByTagName("head")[0])}return Ext._headEl},getDoc:function(){if(!Ext._docEl){Ext._docEl=Ext.get(v)}return Ext._docEl},getWin:function(){if(!Ext._winEl){Ext._winEl=Ext.get(window)}return Ext._winEl},removeNode:function(O){O=O.dom||O;var L=O&&O.id,N=Ext.cache[L],M;if(N){N.destroy()}else{if(O&&(O.nodeType===3||O.tagName.toUpperCase()!=="BODY")){M=O.parentNode;if(M){M.removeChild(O)}}}}});Ext.isGarbage=function(L){return L&&L.nodeType===1&&L.tagName!=="BODY"&&L.tagName!=="HTML"&&(!L.parentNode||(!L.offsetParent&&((Ext.isIE8?v.all[L.id]:v.getElementById(L.id))!==L)&&!(Ext.detachedBodyEl&&Ext.detachedBodyEl.isAncestor(L))))};if(Ext.os.is.Android||(Ext.os.is.Windows&&Ext.supports.Touch)){Ext.onReady(function(){var L=Ext.getWin();f._windowWidth=f._viewportWidth=window.innerWidth;f._windowHeight=f._viewportHeight=window.innerHeight;L.on({focusin:"_onWindowFocusChange",focusout:"_onWindowFocusChange",pointerup:"_onWindowFocusChange",capture:true,delegated:false,delay:1,scope:f});L.on({resize:"_onWindowResize",priority:2000,scope:f})})}}));(Ext.cmd.derive("Ext.util.Filter",Ext.Base,{isFilter:true,config:{property:null,value:null,filterFn:null,id:null,anyMatch:false,exactMatch:false,caseSensitive:false,disabled:false,disableOnEmpty:false,operator:null,root:null,serializer:null,convert:null},scope:null,$configStrict:false,statics:{createFilterFn:function(a){if(!a){return Ext.returnTrue}return function(b){var c=a.isCollection?a.items:a,d=c.length,f=true,g,h;for(g=0;f&&g<d;g++){h=c[g];if(!h.getDisabled()){f=h.filter(b)}}return f}},isInvalid:function(a){if(!a.filterFn){if(!a.property){return"A Filter requires either a property or a filterFn to be set"}if(!a.hasOwnProperty("value")&&!a.operator){return"A Filter requires either a property and value, or a filterFn to be set"}}return false}},constructor:function(a){this.initConfig(a)},preventConvert:{"in":1,notin:1},filter:function(d){var c=this,b=c._filterFn||c.getFilterFn(),a=c.getConvert(),f=c._value;c._filterValue=f;c.isDateValue=Ext.isDate(f);if(c.isDateValue){c.dateValue=f.getTime()}if(a&&!c.preventConvert[c.getOperator()]){c._filterValue=a.call(c.scope||c,f)}return b.call(c.scope||c,d)},getId:function(){var a=this._id;if(!a){a=this.getProperty();if(!a){a=Ext.id(null,"ext-filter-")}this._id=a}return a},getFilterFn:function(){var c=this,a=c._filterFn,b;if(!a){b=c.getOperator();if(b){a=c.operatorFns[b]}else{a=c.createRegexFilter()}c._filterFn=a}return a},createRegexFilter:function(){var d=this,b=!!d.getAnyMatch(),c=!!d.getExactMatch(),f=d.getValue(),a=Ext.String.createRegex(f,!b,!b&&c,!d.getCaseSensitive());return function(g){var h=d.getPropertyValue(g);return a?a.test(h):(h==null)}},getPropertyValue:function(c){var b=this._root,a=(b==null)?c:c[b];return a[this._property]},getState:function(){var a=this.getInitialConfig(),b={},c;for(c in a){if(a.hasOwnProperty(c)){b[c]=a[c]}}delete b.root;b.value=this.getValue();return b},getScope:function(){return this.scope},serialize:function(){var a=this.getState(),b=this.getSerializer();delete a.id;delete a.serializer;if(b){b.call(this,a)}return a},updateOperator:function(){this._filterFn=null},updateValue:function(a){this._filterFn=null;if(this.getDisableOnEmpty()){this.setDisabled(Ext.isEmpty(a))}},updateDisableOnEmpty:function(a){var b=false;if(a){b=Ext.isEmpty(this.getValue())}this.setDisabled(b)},privates:{getCandidateValue:function(d,c,g){var f=this,a=f._convert,b=f.getPropertyValue(d);if(a){b=a.call(f.scope||f,b)}else{if(!g){b=Ext.coerce(b,c)}}return b}}},1,0,0,0,0,0,[Ext.util,"Filter"],function(){var a=this.prototype,b=(a.operatorFns={"<":function(d){var c=this._filterValue;return this.getCandidateValue(d,c)<c},"<=":function(d){var c=this._filterValue;return this.getCandidateValue(d,c)<=c},"=":function(c){var d=this,f=d._filterValue;c=d.getCandidateValue(c,f);if(d.isDateValue&&c instanceof Date){c=c.getTime();f=d.dateValue}return c==f},"===":function(c){var d=this,f=d._filterValue;c=d.getCandidateValue(c,f,true);if(d.isDateValue&&c instanceof Date){c=c.getTime();f=d.dateValue}return c===f},">=":function(d){var c=this._filterValue;return this.getCandidateValue(d,c)>=c},">":function(d){var c=this._filterValue;return this.getCandidateValue(d,c)>c},"!=":function(c){var d=this,f=d._filterValue;c=d.getCandidateValue(c,f);if(d.isDateValue&&c instanceof Date){c=c.getTime();f=d.dateValue}return c!=f},"!==":function(c){var d=this,f=d._filterValue;c=d.getCandidateValue(c,f,true);if(d.isDateValue&&c instanceof Date){c=c.getTime();f=d.dateValue}return c!==f},"in":function(d){var c=this._filterValue;return Ext.Array.contains(c,this.getCandidateValue(d,c))},notin:function(d){var c=this._filterValue;return !Ext.Array.contains(c,this.getCandidateValue(d,c))},like:function(d){var c=this._filterValue;return c&&this.getCandidateValue(d,c).toLowerCase().indexOf(c.toLowerCase())>-1}});b["=="]=b["="];b.gt=b[">"];b.ge=b[">="];b.lt=b["<"];b.le=b["<="];b.eq=b["="];b.ne=b["!="]}));(Ext.cmd.derive("Ext.util.Observable",Ext.mixin.Observable,{$applyConfigs:true},0,0,0,0,0,0,[Ext.util,"Observable"],function(a){var b=Ext.mixin.Observable;a.releaseCapture=b.releaseCapture;a.capture=b.capture;a.captureArgs=b.captureArgs;a.observe=a.observeClass=b.observe}));(Ext.cmd.derive("Ext.util.AbstractMixedCollection",Ext.Base,{isMixedCollection:true,generation:0,indexGeneration:0,constructor:function(c,b){var a=this;if(arguments.length===1&&Ext.isObject(c)){a.initialConfig=c;Ext.apply(a,c)}else{a.allowFunctions=c===true;if(b){a.getKey=b}a.initialConfig={allowFunctions:a.allowFunctions,getKey:a.getKey}}a.items=[];a.map={};a.keys=[];a.indexMap={};a.length=0;a.mixins.observable.constructor.call(a)},destroy:function(){var a=this;a.items=a.map=a.keys=a.indexMap=null;a.callParent()},allowFunctions:false,add:function(a,b){var c=this.length,d;if(arguments.length===1){d=this.insert(c,a)}else{d=this.insert(c,a,b)}return d},getKey:function(a){return a.id},replace:function(f,b){var a=this,c,d;if(arguments.length==1){b=arguments[0];f=a.getKey(b)}c=a.map[f];if(typeof f=="undefined"||f===null||typeof c=="undefined"){return a.add(f,b)}a.generation++;d=a.indexOfKey(f);a.items[d]=b;a.map[f]=b;if(a.hasListeners.replace){a.fireEvent("replace",f,c,b)}return b},reorder:function(c){var g=this,a=g.items,b=0,f=a.length,j=[],d=[],h;g.suspendEvents();for(h in c){j[c[h]]=a[h]}for(b=0;b<f;b++){if(c[b]==undefined){d.push(a[b])}}for(b=0;b<f;b++){if(j[b]==undefined){j[b]=d.shift()}}g.clear();g.addAll(j);g.resumeEvents()},updateKey:function(g,h){var d=this,f=d.map,a=d.indexOfKey(g),c=d.indexMap,b;if(a>-1){b=f[g];delete f[g];delete c[g];f[h]=b;c[h]=a;d.keys[a]=h;d.indexGeneration=++d.generation}},addAll:function(a){var c=this,b;if(arguments.length>1||Ext.isArray(a)){c.insert(c.length,arguments.length>1?arguments:a)}else{for(b in a){if(a.hasOwnProperty(b)){if(c.allowFunctions||typeof a[b]!="function"){c.add(b,a[b])}}}}},each:function(g,f){var c=Ext.Array.push([],this.items),d=0,b=c.length,a;for(;d<b;d++){a=c[d];if(g.call(f||a,a,d,b)===false){break}}},eachKey:function(g,f){var a=this.keys,c=this.items,d=0,b=a.length;for(;d<b;d++){g.call(f||window,a[d],c[d],d,b)}},findBy:function(g,f){var a=this.keys,c=this.items,d=0,b=c.length;for(;d<b;d++){if(g.call(f||window,c[d],a[d])){return c[d]}}return null},insert:function(d,a,b){var c;if(Ext.isIterable(a)){c=this.doInsert(d,a,b)}else{if(arguments.length>2){c=this.doInsert(d,[a],[b])}else{c=this.doInsert(d,[a])}c=c[0]}return c},doInsert:function(d,r,p){var g=this,q,s,b,f=r.length,o=f,a=g.hasListeners.add,t,c={},m,j,h;if(p!=null){g.useLinearSearch=true}else{p=r;r=new Array(f);for(b=0;b<f;b++){r[b]=this.getKey(p[b])}}g.suspendEvents();for(b=0;b<f;b++){q=r[b];s=g.indexOfKey(q);if(s!==-1){if(s<d){d--}g.removeAt(s)}if(q!=null){if(c[q]!=null){m=true;o--}c[q]=b}}g.resumeEvents();if(m){j=r;h=p;r=new Array(o);p=new Array(o);b=0;for(q in c){r[b]=j[c[q]];p[b]=h[c[q]];b++}f=o}t=d===g.length&&g.indexGeneration===g.generation;Ext.Array.insert(g.items,d,p);Ext.Array.insert(g.keys,d,r);g.length+=f;g.generation++;if(t){g.indexGeneration=g.generation}for(b=0;b<f;b++,d++){q=r[b];if(q!=null){g.map[q]=p[b];if(t){g.indexMap[q]=d}}if(a){g.fireEvent("add",d,p[b],q)}}return p},remove:function(b){var a=this,d,c;if(!a.useLinearSearch&&(d=a.getKey(b))){c=a.indexOfKey(d)}else{c=Ext.Array.indexOf(a.items,b)}return(c===-1)?false:a.removeAt(c)},removeAll:function(b){var a=this,c;if(b||a.hasListeners.remove){if(b){for(c=b.length-1;c>=0;--c){a.remove(b[c])}}else{while(a.length){a.removeAt(0)}}}else{a.length=a.items.length=a.keys.length=0;a.map={};a.indexMap={};a.generation++;a.indexGeneration=a.generation}},removeAt:function(c){var a=this,b,d;if(c<a.length&&c>=0){a.length--;b=a.items[c];Ext.Array.erase(a.items,c,1);d=a.keys[c];if(typeof d!="undefined"){delete a.map[d]}Ext.Array.erase(a.keys,c,1);if(a.hasListeners.remove){a.fireEvent("remove",b,d)}a.generation++;return b}return false},removeRange:function(b,f){var c=this,g,d,a,m,h,j;if(b<c.length&&b>=0){if(!f){f=1}m=Math.min(b+f,c.length);f=m-b;j=m===c.length;h=j&&c.indexGeneration===c.generation;for(a=b;a<m;a++){d=c.keys[a];if(d!=null){delete c.map[d];if(h){delete c.indexMap[d]}}}g=c.items[a-1];c.length-=f;c.generation++;if(h){c.indexGeneration=c.generation}if(j){c.items.length=c.keys.length=c.length}else{c.items.splice(b,f);c.keys.splice(b,f)}return g}return false},removeAtKey:function(d){var b=this,a=b.keys,c;if(d==null){for(c=a.length-1;c>=0;c--){if(a[c]==null){b.removeAt(c)}}}else{return b.removeAt(b.indexOfKey(d))}},getCount:function(){return this.length},indexOf:function(a){var c=this,b;if(a!=null){if(!c.useLinearSearch&&(b=c.getKey(a))){return this.indexOfKey(b)}return Ext.Array.indexOf(c.items,a)}return -1},indexOfKey:function(a){if(!this.map.hasOwnProperty(a)){return -1}if(this.indexGeneration!==this.generation){this.rebuildIndexMap()}return this.indexMap[a]},rebuildIndexMap:function(){var b=this,a=b.indexMap={},f=b.keys,c=f.length,d;for(d=0;d<c;d++){a[f[d]]=d}b.indexGeneration=b.generation},get:function(d){var b=this,c=b.map[d],a=c!==undefined?c:(typeof d=="number")?b.items[d]:undefined;return typeof a!="function"||b.allowFunctions?a:null},getAt:function(a){return this.items[a]},getByKey:function(a){return this.map[a]},contains:function(a){var c=this,b;if(a!=null){if(!c.useLinearSearch&&(b=c.getKey(a))){return this.map[b]!=null}return Ext.Array.indexOf(this.items,a)!==-1}return false},containsKey:function(a){return this.map.hasOwnProperty(a)},clear:function(){var a=this;if(a.generation){a.length=0;a.items=[];a.keys=[];a.map={};a.indexMap={};a.generation++;a.indexGeneration=a.generation}if(a.hasListeners.clear){a.fireEvent("clear")}},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},sum:function(g,a,h,j){var b=this.extractValues(g,a),f=b.length,d=0,c;h=h||0;j=(j||j===0)?j:f-1;for(c=h;c<=j;c++){d+=b[c]}return d},collect:function(b,j,o){var c=this.extractValues(b,j),d=c.length,f={},g=[],a,m,h;for(h=0;h<d;h++){a=c[h];m=String(a);if((o||!Ext.isEmpty(a))&&!f[m]){f[m]=true;g.push(a)}}return g},extractValues:function(a,b){var c=this.items;if(b){c=Ext.Array.pluck(c,b)}return Ext.Array.pluck(c,a)},hasRange:function(b,a){return(a<this.length)},getRange:function(h,a){var g=this,c=g.items,b=[],j=c.length,f,d;if(j<1){return b}if(h>a){d=true;f=h;h=a;a=f}if(h<0){h=0}if(a==null||a>=j){a=j-1}b=c.slice(h,a+1);if(d&&b.length){b.reverse()}return b},filter:function(a,f,b,c){var d=[];if(Ext.isString(a)){d.push(new Ext.util.Filter({property:a,value:f,anyMatch:b,caseSensitive:c}))}else{if(Ext.isArray(a)||a instanceof Ext.util.Filter){d=d.concat(a)}}return this.filterBy(Ext.util.Filter.createFilterFn(d))},filterBy:function(d,c){var h=this,j=new h.self(h.initialConfig),g=h.keys,a=h.items,f=a.length,b;j.getKey=h.getKey;for(b=0;b<f;b++){if(d.call(c||h,a[b],g[b])){j.add(g[b],a[b])}}j.useLinearSearch=h.useLinearSearch;return j},findIndex:function(f,d,b,a,c){if(Ext.isEmpty(d,false)){return -1}d=this.createValueMatcher(d,a,c);return this.findIndexBy(function(g){return g&&d.test(g[f])},null,b)},findIndexBy:function(d,c,h){var g=this,f=g.keys,a=g.items,b=h||0,j=a.length;for(;b<j;b++){if(d.call(c||g,a[b],f[b])){return b}}return -1},createValueMatcher:function(f,b,c,d){if(!f.exec){var a=Ext.String.escapeRegex;f=String(f);if(b===true){f=a(f)}else{f="^"+a(f);if(d===true){f+="$"}}f=new RegExp(f,c?"":"i")}return f},clone:function(){var a=this,b=new a.self(a.initialConfig);b.add(a.keys,a.items);b.useLinearSearch=a.useLinearSearch;return b}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.util,"AbstractMixedCollection"],0));(Ext.cmd.derive("Ext.util.Sorter",Ext.Base,{isSorter:true,config:{property:null,sorterFn:null,root:null,transform:null,direction:"ASC",id:undefined},statics:{createComparator:function(b,a){a=a||0;return function(g,f){var j=b.isCollection?b.items:b,d=j.length,h,c;for(c=0;c<d;++c){h=j[c].sort(g,f);if(h){return h}}return a&&a(g,f)}}},multiplier:1,constructor:function(a){this.initConfig(a)},getId:function(){var a=this._id;if(!a){a=this.getProperty();if(!a){a=Ext.id(null,"ext-sorter-")}this._id=a}return a},sort:function(a,b){return this.multiplier*this.sortFn(a,b)},sortFn:function(c,b){var f=this,d=f._transform,a=f._root,g=f._property,j,h;if(a){c=c[a];b=b[a]}j=c[g];h=b[g];if(d){j=d(j);h=d(h)}return(j>h)?1:(j<h?-1:0)},applyDirection:function(a){return a?a:"ASC"},updateDirection:function(a){this.multiplier=(a.toUpperCase()==="DESC")?-1:1},updateProperty:function(a){if(a){delete this.sortFn}},updateSorterFn:function(a){this.sortFn=a},toggle:function(){this.setDirection(Ext.String.toggle(this.getDirection(),"ASC","DESC"))},getState:function(){var b=this,a={root:b.getRoot(),property:b.getProperty(),direction:b.getDirection()};if(b._id){a.id=b._id}return a},serialize:function(){return{property:this.getProperty(),direction:this.getDirection()}}},1,0,0,0,0,0,[Ext.util,"Sorter"],0));(Ext.cmd.derive("Ext.util.Sortable",Ext.Base,{isSortable:true,$configPrefixed:false,$configStrict:false,config:{sorters:null},defaultSortDirection:"ASC",multiSortLimit:3,statics:{createComparator:function(a){return a&&a.length?function(b,g){var c=a[0].sort(b,g),f=a.length,d=1;for(;!c&&d<f;d++){c=a[d].sort.call(a[d],b,g)}return c}:function(){return 0}}},applySorters:function(a){var c=this,b=c.getSorters()||new Ext.util.MixedCollection(false,Ext.returnId);if(a){b.addAll(c.decodeSorters(a))}return b},sort:function(g,f,j,d){var a=this,h,c,b=a.getSorters();if(!b){a.setSorters(null);b=a.getSorters()}if(Ext.isArray(g)){d=j;j=f}else{if(Ext.isObject(g)){g=[g];d=j;j=f}else{if(Ext.isString(g)){h=b.get(g);if(!h){h={property:g,direction:f}}else{if(f==null){h.toggle()}else{h.setDirection(f)}}g=[h]}}}if(g&&g.length){g=a.decodeSorters(g);switch(j){case"multi":b.insert(0,g[0]);c=b.getCount()-a.multiSortLimit;if(c>0){b.removeRange(a.multiSortLimit,c)}break;case"prepend":b.insert(0,g);break;case"append":b.addAll(g);break;case undefined:case null:case"replace":b.clear();b.addAll(g);break;default:}}if(d!==false){a.fireEvent("beforesort",a,g);a.onBeforeSort(g);if(a.getSorterCount()){a.doSort(a.generateComparator())}}return g},getSorterCount:function(){return this.getSorters().items.length},generateComparator:function(){var a=this.getSorters().getRange();return a.length?this.createComparator(a):this.emptyComparator},emptyComparator:function(){return 0},onBeforeSort:Ext.emptyFn,decodeSorters:function(g){if(!Ext.isArray(g)){if(g===undefined){g=[]}else{g=[g]}}var d=g.length,h=Ext.util.Sorter,b=this.getModel?this.getModel():this.model,f,a,c;for(c=0;c<d;c++){a=g[c];if(!(a instanceof h)){if(Ext.isString(a)){a={property:a}}Ext.applyIf(a,{root:this.sortRoot,direction:"ASC"});if(a.fn){a.sorterFn=a.fn}if(typeof a=="function"){a={sorterFn:a}}if(b&&!a.transform){f=b.getField(a.property);a.transform=f&&f.sortType!==Ext.identityFn?f.sortType:undefined}g[c]=new Ext.util.Sorter(a)}}return g},getFirstSorter:function(){var a=this.getSorters().items,c=a.length,d=0,b;for(;d<c;++d){b=a[d];if(!b.isGrouper){return b}}return null}},0,0,0,0,0,0,[Ext.util,"Sortable"],function(){this.prototype.createComparator=this.createComparator}));(Ext.cmd.derive("Ext.util.MixedCollection",Ext.util.AbstractMixedCollection,{constructor:function(){this.initConfig();Ext.util.AbstractMixedCollection.prototype.constructor.apply(this,arguments)},doSort:function(a){this.sortBy(a)},_sort:function(b,d,r){var q=this,h,j,g=String(d).toUpperCase()=="DESC"?-1:1,p=[],f=q.keys,m=q.items,a;r=r||function(o,c){return o-c};for(h=0,j=m.length;h<j;h++){p[p.length]={key:f[h],value:m[h],index:h}}Ext.Array.sort(p,function(o,c){return r(o[b],c[b])*g||(o.index<c.index?-1:1)});for(h=0,j=p.length;h<j;h++){a=p[h];m[h]=a.value;f[h]=a.key;q.indexMap[a.key]=h}q.generation++;q.indexGeneration=q.generation;q.fireEvent("sort",q)},sortBy:function(a){var h=this,j=h.items,g,f=h.keys,c,d=j.length,b;for(b=0;b<d;b++){j[b].$extCollectionIndex=b}Ext.Array.sort(j,function(m,o){return a(m,o)||(m.$extCollectionIndex<o.$extCollectionIndex?-1:1)});for(b=0;b<d;b++){g=j[b];c=h.getKey(g);f[b]=c;h.indexMap[c]=b;delete j.$extCollectionIndex}h.generation++;h.indexGeneration=h.generation;h.fireEvent("sort",h,j,f)},findInsertionIndex:function(d,c){var f=this,a=f.items,h=0,j=a.length-1,b,g;if(!c){c=f.generateComparator()}while(h<=j){b=(h+j)>>1;g=c(d,a[b]);if(g>=0){h=b+1}else{if(g<0){j=b-1}}}return h},reorder:function(a){Ext.util.AbstractMixedCollection.prototype.reorder.call(this,a);this.fireEvent("sort",this)},sortByKey:function(a,b){this._sort("key",a,b||function(g,f){var d=String(g).toUpperCase(),c=String(f).toUpperCase();return d>c?1:(d<c?-1:0)})}},1,0,0,0,0,[["sortable",Ext.util.Sortable]],[Ext.util,"MixedCollection"],0));(Ext.cmd.derive("Ext.util.TaskRunner",Ext.Base,{interval:10,timerId:null,constructor:function(a){var b=this;if(typeof a=="number"){b.interval=a}else{if(a){Ext.apply(b,a)}}b.tasks=[];b.timerFn=Ext.Function.bind(b.onTick,b)},newTask:function(b){var a=new Ext.util.TaskRunner.Task(b);a.manager=this;return a},start:function(b){var a=this,c=Ext.Date.now();if(!b.pending){a.tasks.push(b);b.pending=true}b.stopped=false;b.taskStartTime=c;b.taskRunTime=b.fireOnStart!==false?0:b.taskStartTime;b.taskRunCount=0;if(!a.firing){if(b.fireOnStart!==false){a.startTimer(0,c)}else{a.startTimer(b.interval,c)}}return b},stop:function(a){if(!a.stopped){a.stopped=true;if(a.onStop){a.onStop.call(a.scope||a,a)}}return a},stopAll:function(){Ext.each(this.tasks,this.stop,this)},firing:false,nextExpires:1e+99,onTick:function(){var p=this,b=p.tasks,o=Ext.Date.now(),r=1e+99,g=b.length,t=Ext.GlobalEvents,s,h,d,q,a,c,m;p.timerId=null;p.firing=true;for(d=0;d<g||d<(g=b.length);++d){q=b[d];if(!(c=q.stopped)){s=q.taskRunTime+q.interval;if(s<=o){a=1;if(q.hasOwnProperty("fireIdleEvent")){m=q.fireIdleEvent}else{m=p.fireIdleEvent}try{a=q.run.apply(q.scope||q,q.args||[++q.taskRunCount])}catch(f){try{if(q.onError){a=q.onError.call(q.scope||q,q,f)}}catch(j){}}q.taskRunTime=o;if(a===false||q.taskRunCount===q.repeat){p.stop(q);c=true}else{c=q.stopped;s=o+q.interval}}if(!c&&q.duration&&q.duration<=(o-q.taskStartTime)){p.stop(q);c=true}}if(c){q.pending=false;if(!h){h=b.slice(0,d)}}else{if(h){h.push(q)}if(r>s){r=s}}}if(h){p.tasks=h}p.firing=false;if(p.tasks.length){p.startTimer(r-o,Ext.Date.now())}if(m!==false&&t.hasListeners.idle){t.fireEvent("idle")}},startTimer:function(b,f){var a=this,d=f+b,c=a.timerId;if(c&&a.nextExpires-d>a.interval){clearTimeout(c);c=null}if(!c){if(b<a.interval){b=a.interval}a.timerId=Ext.defer(a.timerFn,b);a.nextExpires=d}}},1,0,0,0,0,0,[Ext.util,"TaskRunner"],function(){var b=this,a=b.prototype;a.destroy=a.stopAll;b.Task=new Ext.Class({isTask:true,stopped:true,fireOnStart:false,constructor:function(c){Ext.apply(this,c)},restart:function(c){if(c!==undefined){this.interval=c}this.manager.start(this)},start:function(c){if(this.stopped){this.restart(c)}},stop:function(){this.manager.stop(this)}});a=b.Task.prototype;a.destroy=a.stop}));(Ext.cmd.derive("Ext.fx.target.Target",Ext.Base,{isAnimTarget:true,constructor:function(a){this.target=a;this.id=this.getId()},getId:function(){return this.target.id},remove:function(){Ext.destroy(this.target)}},1,0,0,0,0,0,[Ext.fx.target,"Target"],0));(Ext.cmd.derive("Ext.fx.target.Element",Ext.fx.target.Target,{type:"element",getElVal:function(c,b,a){if(a===undefined){if(b==="x"){a=c.getX()}else{if(b==="y"){a=c.getY()}else{if(b==="scrollTop"){a=c.getScroll().top}else{if(b==="scrollLeft"){a=c.getScroll().left}else{if(b==="height"){a=c.getHeight()}else{if(b==="width"){a=c.getWidth()}else{a=c.getStyle(b)}}}}}}}return a},getAttr:function(b,a){var c=this.target;return[[c,this.getElVal(c,b,a)]]},setAttr:function(m){var f=m.length,c,h,g,d,b,a;for(d=0;d<f;d++){c=m[d].attrs;for(h in c){if(c.hasOwnProperty(h)){a=c[h].length;for(b=0;b<a;b++){g=c[h][b];this.setElVal(g[0],h,g[1])}}}}},setElVal:function(c,b,a){if(b==="x"){c.setX(a)}else{if(b==="y"){c.setY(a)}else{if(b==="scrollTop"){c.scrollTo("top",a)}else{if(b==="scrollLeft"){c.scrollTo("left",a)}else{if(b==="width"){c.setWidth(a)}else{if(b==="height"){c.setHeight(a)}else{c.setStyle(b,a)}}}}}}}},0,0,0,0,0,0,[Ext.fx.target,"Element"],0));(Ext.cmd.derive("Ext.fx.target.ElementCSS",Ext.fx.target.Element,{setAttr:function(p,c){var t={attrs:[],duration:[],easing:[]},d=p.length,g=function(){this.setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",null);this.setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",null);this.setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",null)},r={single:true},f,s,m,q,a,v,h,b,u;for(h=0;h<d;h++){s=p[h];a=s.duration;q=s.easing;s=s.attrs;for(m in s){if(Ext.Array.indexOf(t.attrs,m)==-1){t.attrs.push(m.replace(/[A-Z]/g,function(j){return"-"+j.toLowerCase()}));t.duration.push(a+"ms");t.easing.push(q)}}}f=t.attrs.join(",");a=t.duration.join(",");q=t.easing.join(", ");for(h=0;h<d;h++){s=p[h].attrs;for(m in s){u=s[m].length;for(b=0;b<u;b++){v=s[m][b];v[0].setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",c?"":f);v[0].setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",c?"":a);v[0].setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",c?"":q);v[0].setStyle(m,v[1]);if(c){v=v[0].dom.offsetWidth}else{v[0].on(Ext.supports.CSS3TransitionEnd,g,v[0],r)}}}}}},0,0,0,0,0,0,[Ext.fx.target,"ElementCSS"],0));(Ext.cmd.derive("Ext.fx.target.CompositeElement",Ext.fx.target.Element,{isComposite:true,constructor:function(a){a.id=a.id||Ext.id(null,"ext-composite-");Ext.fx.target.Element.prototype.constructor.call(this,a)},getAttr:function(j,h){var a=[],g=this.target,f=g.elements,d=f.length,b,c;for(b=0;b<d;b++){c=f[b];if(c){c=g.getElement(c);a.push([c,this.getElVal(c,j,h)])}}return a},setAttr:function(p){var m=this.target,o=p.length,a=m.elements,q=a.length,r,c,f,h,b,g,d,s;for(g=0;g<o;g++){f=p[g].attrs;for(h in f){if(f.hasOwnProperty(h)){s=f[h].length;for(d=0;d<s;d++){r=f[h][d][1];for(c=0;c<q;++c){b=a[c];if(b){b=m.getElement(b);this.setElVal(b,h,r)}}}}}}},remove:function(){this.target.destroy()}},1,0,0,0,0,0,[Ext.fx.target,"CompositeElement"],0));(Ext.cmd.derive("Ext.fx.target.CompositeElementCSS",Ext.fx.target.CompositeElement,{setAttr:function(){return Ext.fx.target.ElementCSS.prototype.setAttr.apply(this,arguments)}},0,0,0,0,0,0,[Ext.fx.target,"CompositeElementCSS"],0));(Ext.cmd.derive("Ext.fx.target.Sprite",Ext.fx.target.Target,{type:"draw",getFromPrim:function(c,b){var a;switch(b){case"rotate":case"rotation":a=c.attr.rotation;return{x:a.x||0,y:a.y||0,degrees:a.degrees||0};case"scale":case"scaling":a=c.attr.scaling;return{x:a.x||1,y:a.y||1,cx:a.cx||0,cy:a.cy||0};case"translate":case"translation":a=c.attr.translation;return{x:a.x||0,y:a.y||0};default:return c.attr[b]}},getAttr:function(a,b){return[[this.target,b!==undefined?b:this.getFromPrim(this.target,a)]]},setAttr:function(p){var c=p.length,g=[],t,b,m,r,o,f,q,a,u,h,d,s;for(a=0;a<c;a++){t=p[a].attrs;for(b in t){m=t[b];s=m.length;for(u=0;u<s;u++){o=m[u][0];r=m[u][1];if(b==="translate"||b==="translation"){q={x:r.x,y:r.y}}else{if(b==="rotate"||b==="rotation"){h=r.x;if(isNaN(h)){h=null}d=r.y;if(isNaN(d)){d=null}q={degrees:r.degrees,x:h,y:d}}else{if(b==="scale"||b==="scaling"){h=r.x;if(isNaN(h)){h=null}d=r.y;if(isNaN(d)){d=null}q={x:h,y:d,cx:r.cx,cy:r.cy}}else{if(b==="width"||b==="height"||b==="x"||b==="y"){q=parseFloat(r)}else{q=r}}}}f=Ext.Array.indexOf(g,o);if(f===-1){g.push([o,{}]);f=g.length-1}g[f][1][b]=q}}}c=g.length;for(a=0;a<c;a++){g[a][0].setAttributes(g[a][1])}this.target.redraw()}},0,0,0,0,0,0,[Ext.fx.target,"Sprite"],0));(Ext.cmd.derive("Ext.fx.target.CompositeSprite",Ext.fx.target.Sprite,{getAttr:function(a,h){var b=[],g=[].concat(this.target.items),f=g.length,d,c;for(d=0;d<f;d++){c=g[d];b.push([c,h!==undefined?h:this.getFromPrim(c,a)])}return b}},0,0,0,0,0,0,[Ext.fx.target,"CompositeSprite"],0));(Ext.cmd.derive("Ext.fx.target.Component",Ext.fx.target.Target,{type:"component",getPropMethod:{top:function(){return this.getPosition(true)[1]},left:function(){return this.getPosition(true)[0]},x:function(){return this.getPosition()[0]},y:function(){return this.getPosition()[1]},height:function(){return this.getHeight()},width:function(){return this.getWidth()},opacity:function(){return this.el.getStyle("opacity")}},setMethods:{top:"setPosition",left:"setPosition",x:"setPagePosition",y:"setPagePosition",height:"setSize",width:"setSize",opacity:"setOpacity"},getAttr:function(a,b){return[[this.target,b!==undefined?b:this.getPropMethod[a].call(this.target)]]},setAttr:function(r,b,t){var p=this,m=r.length,u,g,y,c,a,f,A,q,z,d,s={},v;for(c=0;c<m;c++){u=r[c].attrs;for(g in u){f=u[g].length;for(a=0;a<f;a++){y=u[g][a];v=s[p.setMethods[g]]||(s[p.setMethods[g]]={});v.target=y[0];v[g]=y[1]}}if(s.setPosition){y=s.setPosition;A=(y.left===undefined)?undefined:parseFloat(y.left);q=(y.top===undefined)?undefined:parseFloat(y.top);y.target.setPosition(A,q)}if(s.setPagePosition){y=s.setPagePosition;y.target.setPagePosition(y.x,y.y)}if(s.setSize){y=s.setSize;z=(y.width===undefined)?y.target.getWidth():parseFloat(y.width);d=(y.height===undefined)?y.target.getHeight():parseFloat(y.height);y.target.el.setSize(z,d);if(t||p.dynamic){Ext.GlobalEvents.on({idle:Ext.Function.bind(y.target.setSize,y.target,[z,d]),single:true})}}if(s.setOpacity){y=s.setOpacity;y.target.el.setStyle("opacity",y.opacity)}}}},0,0,0,0,0,0,[Ext.fx.target,"Component"],0));(Ext.cmd.derive("Ext.fx.Queue",Ext.Base,{constructor:function(){this.targets=new Ext.util.HashMap();this.fxQueue={}},getFxDefaults:function(a){var b=this.targets.get(a);if(b){return b.fxDefaults}return{}},setFxDefaults:function(b,a){var c=this.targets.get(b);if(c){c.fxDefaults=Ext.apply(c.fxDefaults||{},a)}},stopAnimation:function(d){var b=this,c=b.getFxQueue(d),a=c.length,f;while(a){f=c[a-1];if(f){f.end()}a--}},getActiveAnimation:function(b){var a=this.getFxQueue(b);return(a&&!!a.length)?a[0]:false},hasFxBlock:function(b){var a=this.getFxQueue(b);return a&&a[0]&&a[0].block},getFxQueue:function(d){if(!d){return false}var a=this,c=a.fxQueue[d],b=a.targets.get(d);if(!b){return false}if(!c){a.fxQueue[d]=[];if(b.type!=="element"){b.target.on("destroy",function(){a.fxQueue[d]=[]})}}return a.fxQueue[d]},queueFx:function(a){var f=this,b=a.target,c,d;if(!b){return}c=f.getFxQueue(b.getId());d=c.length;if(d){if(a.concurrent){a.paused=false}else{c[d-1].on("afteranimate",function(){a.paused=false})}}else{a.paused=false}a.on("afteranimate",function(){Ext.Array.remove(c,a);if(c.length===0){f.targets.remove(a.target)}if(a.remove){if(b.type==="element"){var g=Ext.get(b.id);if(g){g.destroy()}}}},f,{single:true});c.push(a)}},1,0,0,0,0,0,[Ext.fx,"Queue"],0));(Ext.cmd.derive("Ext.fx.Manager",Ext.Base,{singleton:true,constructor:function(){var a=this;a.items=new Ext.util.MixedCollection();a.targetArr={};a.mixins.queue.constructor.call(a);a.taskRunner=new Ext.util.TaskRunner()},interval:16,forceJS:true,createTarget:function(b){var d=this,a=!d.forceJS&&Ext.supports.Transitions,c;d.useCSS3=a;if(b){if(b.tagName||Ext.isString(b)||b.isFly){b=Ext.get(b);c=new Ext.fx.target["Element"+(a?"CSS":"")](b)}else{if(b.dom){c=new Ext.fx.target["Element"+(a?"CSS":"")](b)}else{if(b.isComposite){c=new Ext.fx.target["CompositeElement"+(a?"CSS":"")](b)}else{if(b.isSprite){c=new Ext.fx.target.Sprite(b)}else{if(b.isCompositeSprite){c=new Ext.fx.target.CompositeSprite(b)}else{if(b.isComponent){c=new Ext.fx.target.Component(b)}else{if(b.isAnimTarget){return b}else{return null}}}}}}}d.targets.add(c);return c}else{return null}},addAnim:function(b){var a=this,d=a.items,c=a.task;d.add(b.id,b);if(!c&&d.length){c=a.task={run:a.runner,interval:a.interval,scope:a};a.taskRunner.start(c)}},removeAnim:function(b){var a=this,d=a.items,c=a.task;d.removeAtKey(b.id);if(c&&!d.length){a.taskRunner.stop(c);delete a.task}},runner:function(){var a=this,d=a.items.getRange(),f=0,c=d.length,b;a.targetArr={};a.timestamp=new Date();for(;f<c;f++){b=d[f];if(b.isReady()){a.startAnim(b)}}for(f=0;f<c;f++){b=d[f];if(b.isRunning()){a.runAnim(b)}}a.applyPendingAttrs();a.targetArr=null},startAnim:function(a){a.start(this.timestamp)},runAnim:function(d,j){if(!d){return}var c=this,g=c.useCSS3&&d.target.type==="element",a=c.timestamp-d.startTime,b=(a>=d.duration),f,h;if(j){a=d.duration;b=true}f=this.collectTargetData(d,a,g,b);if(g){d.target.setAttr(f.anims[d.id].attributes,true);c.collectTargetData(d,d.duration,g,b);d.paused=true;f=d.target.target;if(d.target.isComposite){f=d.target.target.last()}h={};h[Ext.supports.CSS3TransitionEnd]=d.lastFrame;h.scope=d;h.single=true;f.on(h)}return f},jumpToEnd:function(a){var d=this,b,c;if(!d.targetArr){d.targetArr={};c=true}b=d.runAnim(a,true);d.applyAnimAttrs(b,b.anims[a.id]);if(c){d.targetArr=null}},collectTargetData:function(d,b,g,a){var c=d.target.getId(),f=this.targetArr[c];if(!f){f=this.targetArr[c]={id:c,el:d.target,anims:{}}}f.anims[d.id]={id:d.id,anim:d,elapsed:b,isLastFrame:a,attributes:[{duration:d.duration,easing:(g&&d.reverse)?d.easingFn.reverse().toCSS3():d.easing,attrs:d.runAnim(b)}]};return f},applyAnimAttrs:function(a,b){var c=b.anim;if(b.attributes&&c.isRunning()){a.el.setAttr(b.attributes,false,b.isLastFrame);if(b.isLastFrame){c.lastFrame()}}},applyPendingAttrs:function(){var g=this.targetArr,a,d,c,f,b;for(d in g){if(g.hasOwnProperty(d)){a=g[d];for(b in a.anims){if(a.anims.hasOwnProperty(b)){c=a.anims[b];f=c.anim;if(c.attributes&&f.isRunning()){a.el.setAttr(c.attributes,false,c.isLastFrame);if(c.isLastFrame){f.lastFrame()}}}}}}}},1,0,0,0,0,[["queue",Ext.fx.Queue]],[Ext.fx,"Manager"],0));(Ext.cmd.derive("Ext.fx.Animator",Ext.Base,{isAnimator:true,duration:250,delay:0,delayStart:0,dynamic:false,easing:"ease",running:false,paused:false,damper:1,iterations:1,currentIteration:0,keyframeStep:0,animKeyFramesRE:/^(from|to|\d+%?)$/,constructor:function(a){var b=this;a=Ext.apply(b,a||{});b.config=a;b.id=Ext.id(null,"ext-animator-");b.mixins.observable.constructor.call(b,a);b.timeline=[];b.createTimeline(b.keyframes);if(b.target){b.applyAnimator(b.target);Ext.fx.Manager.addAnim(b)}},sorter:function(d,c){return d.pct-c.pct},createTimeline:function(g){var m=this,a=[],o=m.to||{},d=m.duration,b,c,f,j,p,h;for(p in g){if(g.hasOwnProperty(p)&&m.animKeyFramesRE.test(p)){h={attrs:Ext.apply(g[p],o)};if(p==="from"){p=0}else{if(p==="to"){p=100}}h.pct=parseInt(p,10);a.push(h)}}Ext.Array.sort(a,m.sorter);j=a.length;for(f=0;f<j;f++){b=(a[f-1])?d*(a[f-1].pct/100):0;c=d*(a[f].pct/100);m.timeline.push({duration:c-b,attrs:a[f].attrs})}},applyAnimator:function(h){var o=this,a=[],c=o.timeline,m=c.length,f,j,d,b,g;if(o.fireEvent("beforeanimate",o)!==false){for(g=0;g<m;g++){f=c[g];b=f.attrs;j=b.easing||o.easing;d=b.damper||o.damper;delete b.easing;delete b.damper;f=new Ext.fx.Anim({target:h,easing:j,damper:d,duration:f.duration,paused:true,to:b});a.push(f)}o.animations=a;o.target=f.target;for(g=0;g<m-1;g++){f=a[g];f.nextAnim=a[g+1];f.on("afteranimate",function(){this.nextAnim.paused=false});f.on("afteranimate",function(){this.fireEvent("keyframe",this,++this.keyframeStep)},o)}a[m-1].on("afteranimate",function(){this.lastFrame()},o)}},start:function(a){var b=this,f=b.delay,d=b.delayStart,c;if(f){if(!d){b.delayStart=a;return}else{c=a-d;if(c<f){return}else{a=new Date(d.getTime()+f)}}}if(b.fireEvent("beforeanimate",b)!==false){b.startTime=a;b.running=true;b.animations[b.keyframeStep].paused=false}},lastFrame:function(){var a=this,b=a.iterations,c=a.currentIteration;c++;if(c<b){a.startTime=new Date();a.currentIteration=c;a.keyframeStep=0;a.applyAnimator(a.target);a.animations[a.keyframeStep].paused=false}else{a.currentIteration=0;a.end()}},end:function(){var a=this;a.fireEvent("afteranimate",a,a.startTime,new Date()-a.startTime)},isReady:function(){return this.paused===false&&this.running===false&&this.iterations>0},isRunning:function(){return false}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.fx,"Animator"],0));(Ext.cmd.derive("Ext.fx.CubicBezier",Ext.Base,{singleton:true,cubicBezierAtTime:function(h,u,q,s,p,d){var f=3*u,m=3*(s-u)-f,o=1-f-m,c=3*q,g=3*(p-q)-c,j=1-c-g;function b(t){return((o*t+m)*t+f)*t}function r(t,w){var v=a(t,w);return((j*v+g)*v+c)*v}function a(B,z){var w,v,y,C,A,t;for(y=B,t=0;t<8;t++){C=b(y)-B;if(Math.abs(C)<z){return y}A=(3*o*y+2*m)*y+f;if(Math.abs(A)<0.000001){break}y=y-C/A}w=0;v=1;y=B;if(y<w){return w}if(y>v){return v}while(w<v){C=b(y);if(Math.abs(C-B)<z){return y}if(B>C){w=y}else{v=y}y=(v-w)/2+w}return y}return r(h,1/(200*d))},cubicBezier:function(d,b,c,f){var a=function(g){return Ext.fx.CubicBezier.cubicBezierAtTime(g,d,b,c,f,1)};a.toCSS3=function(){return"cubic-bezier("+[d,b,c,f].join(",")+")"};a.reverse=function(){return Ext.fx.CubicBezier.cubicBezier(1-c,1-f,1-d,1-b)};return a}},0,0,0,0,0,0,[Ext.fx,"CubicBezier"],0));(Ext.cmd.derive("Ext.fx.Easing",Ext.Base,function(){var f=Math,h=f.PI,d=f.pow,b=f.sin,g=f.sqrt,a=f.abs,c=1.70158;return{singleton:true,linear:Ext.identityFn,ease:function(j){var p=0.07813-j/2,o=g(0.0066+p*p),s=o-p,u=d(a(s),1/3)*(s<0?-1:1),r=-o-p,q=d(a(r),1/3)*(r<0?-1:1),m=u+q+0.25;return d(1-m,2)*3*m*0.1+(1-m)*3*m*m+m*m*m},easeIn:function(j){return d(j,1.7)},easeOut:function(j){return d(j,0.48)},easeInOut:function(j){var p=0.48-j/1.04,o=g(0.1734+p*p),s=o-p,u=d(a(s),1/3)*(s<0?-1:1),r=-o-p,q=d(a(r),1/3)*(r<0?-1:1),m=u+q+0.5;return(1-m)*3*m*m+m*m*m},backIn:function(j){return j*j*((c+1)*j-c)},backOut:function(j){j=j-1;return j*j*((c+1)*j+c)+1},elasticIn:function(o){if(o===0||o===1){return o}var m=0.3,j=m/4;return d(2,-10*o)*b((o-j)*(2*h)/m)+1},elasticOut:function(j){return 1-Ext.fx.Easing.elasticIn(1-j)},bounceIn:function(j){return 1-Ext.fx.Easing.bounceOut(1-j)},bounceOut:function(p){var m=7.5625,o=2.75,j;if(p<(1/o)){j=m*p*p}else{if(p<(2/o)){p-=(1.5/o);j=m*p*p+0.75}else{if(p<(2.5/o)){p-=(2.25/o);j=m*p*p+0.9375}else{p-=(2.625/o);j=m*p*p+0.984375}}}return j}}},0,0,0,0,0,0,[Ext.fx,"Easing"],function(c){var a=c.self,b=a.prototype;a.addMembers({"back-in":b.backIn,"back-out":b.backOut,"ease-in":b.easeIn,"ease-out":b.easeOut,"elastic-in":b.elasticIn,"elastic-out":b.elasticOut,"bounce-in":b.bounceIn,"bounce-out":b.bounceOut,"ease-in-out":b.easeInOut})}));(Ext.cmd.derive("Ext.fx.DrawPath",Ext.Base,{singleton:true,pathToStringRE:/,?([achlmqrstvxz]),?/gi,pathCommandRE:/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,pathValuesRE:/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,stopsRE:/^(\d+%?)$/,radian:Math.PI/180,is:function(b,a){a=String(a).toLowerCase();return(a=="object"&&b===Object(b))||(a=="undefined"&&typeof b==a)||(a=="null"&&b===null)||(a=="array"&&Array.isArray&&Array.isArray(b))||(Object.prototype.toString.call(b).toLowerCase().slice(8,-1))==a},path2string:function(){return this.join(",").replace(Ext.fx.DrawPath.pathToStringRE,"$1")},pathToString:function(a){return a.join(",").replace(Ext.fx.DrawPath.pathToStringRE,"$1")},parsePathString:function(c){if(!c){return null}var b={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},a=[],d=this;if(d.is(c,"array")&&d.is(c[0],"array")){a=d.pathClone(c)}if(!a.length){String(c).replace(d.pathCommandRE,function(j,h,g){var f=[],m=h.toLowerCase();g.replace(d.pathValuesRE,function(o,p){if(p){f.push(+p)}});if(m=="m"&&f.length>2){a.push([h].concat(Ext.Array.splice(f,0,2)));m="l";h=(h=="m")?"l":"L"}while(f.length>=b[m]){a.push([h].concat(Ext.Array.splice(f,0,b[m])));if(!b[m]){break}}})}a.toString=d.path2string;return a},pathClone:function(a){var d=[],b,g,c,f;if(!this.is(a,"array")||!this.is(a&&a[0],"array")){a=this.parsePathString(a)}for(c=0,f=a.length;c<f;c++){d[c]=[];for(b=0,g=a[c].length;b<g;b++){d[c][b]=a[c][b]}}d.toString=this.path2string;return d},pathToAbsolute:function(f){if(!this.is(f,"array")||!this.is(f&&f[0],"array")){f=this.parsePathString(f)}var q=[],b=0,s=0,a=0,g=0,o=0,p=f.length,d,h,m,c;if(p&&f[0][0]=="M"){b=+f[0][1];s=+f[0][2];a=b;g=s;o++;q[0]=["M",b,s]}for(;o<p;o++){d=q[o]=[];h=f[o];if(h[0]!=h[0].toUpperCase()){d[0]=h[0].toUpperCase();switch(d[0]){case"A":d[1]=h[1];d[2]=h[2];d[3]=h[3];d[4]=h[4];d[5]=h[5];d[6]=+(h[6]+b);d[7]=+(h[7]+s);break;case"V":d[1]=+h[1]+s;break;case"H":d[1]=+h[1]+b;break;case"M":a=+h[1]+b;g=+h[2]+s;default:m=1;c=h.length;for(;m<c;m++){d[m]=+h[m]+((m%2)?b:s)}}}else{m=0;c=h.length;for(;m<c;m++){q[o][m]=h[m]}}switch(d[0]){case"Z":b=a;s=g;break;case"H":b=d[1];break;case"V":s=d[1];break;case"M":h=q[o];c=h.length;a=h[c-2];g=h[c-1];default:h=q[o];c=h.length;b=h[c-2];s=h[c-1]}}q.toString=this.path2string;return q},interpolatePaths:function(q,o){var g=this,a=g.pathToAbsolute(q),r=g.pathToAbsolute(o),d={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},t=function(w,p){if(w[p].length>7){w[p].shift();var v=w[p];while(v.length){Ext.Array.splice(w,p++,0,["C"].concat(Ext.Array.splice(v,0,6)))}Ext.Array.erase(w,p,1);j=Math.max(a.length,r.length||0)}},u=function(y,w,p,z,v){if(y&&w&&y[v][0]=="M"&&w[v][0]!="M"){Ext.Array.splice(w,v,0,["M",z.x,z.y]);p.bx=0;p.by=0;p.x=y[v][1];p.y=y[v][2];j=Math.max(a.length,r.length||0)}},f,j,c,m,b,h;for(f=0,j=Math.max(a.length,r.length||0);f<j;f++){a[f]=g.command2curve(a[f],d);t(a,f);(r[f]=g.command2curve(r[f],s));t(r,f);u(a,r,d,s,f);u(r,a,s,d,f);c=a[f];m=r[f];b=c.length;h=m.length;d.x=c[b-2];d.y=c[b-1];d.bx=parseFloat(c[b-4])||d.x;d.by=parseFloat(c[b-3])||d.y;s.bx=(parseFloat(m[h-4])||s.x);s.by=(parseFloat(m[h-3])||s.y);s.x=m[h-2];s.y=m[h-1]}return[a,r]},command2curve:function(a,c){var b=this;if(!a){return["C",c.x,c.y,c.x,c.y,c.x,c.y]}if(a[0]!="T"&&a[0]!="Q"){c.qx=c.qy=null}switch(a[0]){case"M":c.X=a[1];c.Y=a[2];break;case"A":a=["C"].concat(b.arc2curve.apply(b,[c.x,c.y].concat(a.slice(1))));break;case"S":a=["C",c.x+(c.x-(c.bx||c.x)),c.y+(c.y-(c.by||c.y))].concat(a.slice(1));break;case"T":c.qx=c.x+(c.x-(c.qx||c.x));c.qy=c.y+(c.y-(c.qy||c.y));a=["C"].concat(b.quadratic2curve(c.x,c.y,c.qx,c.qy,a[1],a[2]));break;case"Q":c.qx=a[1];c.qy=a[2];a=["C"].concat(b.quadratic2curve(c.x,c.y,a[1],a[2],a[3],a[4]));break;case"L":a=["C"].concat(c.x,c.y,a[1],a[2],a[1],a[2]);break;case"H":a=["C"].concat(c.x,c.y,a[1],c.y,a[1],c.y);break;case"V":a=["C"].concat(c.x,c.y,c.x,a[1],c.x,a[1]);break;case"Z":a=["C"].concat(c.x,c.y,c.X,c.Y,c.X,c.Y);break}return a},quadratic2curve:function(a,c,g,d,j,b){var f=1/3,h=2/3;return[f*a+h*g,f*c+h*d,f*j+h*g,f*b+h*d,j,b]},rotate:function(b,h,a){var d=Math.cos(a),c=Math.sin(a),g=b*d-h*c,f=b*c+h*d;return{x:g,y:f}},arc2curve:function(J,a,d,b,P,E,A,I,X,R){var L=this,af=Math.PI,N=L.radian,Z=af*120/180,ad=N*(+P||0),o=[],g=Math,w=g.cos,ac=g.sin,aa=g.sqrt,K=g.abs,F=g.asin,f,q,p,Q,ae,u,z,V,T,D,C,H,B,W,ag,U,r,v,s,S,O,M,ab,m,ah,j,Y,c,G;if(!R){f=L.rotate(J,a,-ad);J=f.x;a=f.y;f=L.rotate(I,X,-ad);I=f.x;X=f.y;q=(J-I)/2;p=(a-X)/2;Q=(q*q)/(d*d)+(p*p)/(b*b);if(Q>1){Q=aa(Q);d=Q*d;b=Q*b}ae=d*d;u=b*b;z=(E==A?-1:1)*aa(K((ae*u-ae*p*p-u*q*q)/(ae*p*p+u*q*q)));V=z*d*p/b+(J+I)/2;T=z*-b*q/d+(a+X)/2;D=F(((a-T)/b).toFixed(7));C=F(((X-T)/b).toFixed(7));D=J<V?af-D:D;C=I<V?af-C:C;if(D<0){D=af*2+D}if(C<0){C=af*2+C}if(A&&D>C){D=D-af*2}if(!A&&C>D){C=C-af*2}}else{D=R[0];C=R[1];V=R[2];T=R[3]}H=C-D;if(K(H)>Z){Y=C;c=I;G=X;C=D+Z*(A&&C>D?1:-1);I=V+d*w(C);X=T+b*ac(C);o=L.arc2curve(I,X,d,b,P,0,A,c,G,[C,Y,V,T])}H=C-D;B=w(D);W=ac(D);ag=w(C);U=ac(C);r=g.tan(H/4);v=4/3*d*r;s=4/3*b*r;S=[J,a];O=[J+v*W,a-s*B];M=[I+v*U,X-s*ag];ab=[I,X];O[0]=2*S[0]-O[0];O[1]=2*S[1]-O[1];if(R){return[O,M,ab].concat(o)}else{o=[O,M,ab].concat(o).join().split(",");m=[];j=o.length;for(ah=0;ah<j;ah++){m[ah]=ah%2?L.rotate(o[ah-1],o[ah],ad).y:L.rotate(o[ah],o[ah+1],ad).x}return m}}},0,0,0,0,0,0,[Ext.fx,"DrawPath"],0));(Ext.cmd.derive("Ext.fx.PropertyHandler",Ext.Base,{statics:{defaultHandler:{pixelDefaultsRE:/width|height|top$|bottom$|left$|right$/i,unitRE:/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/,scrollRE:/^scroll/i,computeDelta:function(d,h,f,a,c){f=(typeof f=="number")?f:1;var b=this.unitRE,j=b.exec(d),g,m;if(j){d=j[1];m=j[2];if(!this.scrollRE.test(c)&&!m&&this.pixelDefaultsRE.test(c)){m="px"}}d=+d||0;j=b.exec(h);if(j){h=j[1];m=j[2]||m}h=+h||0;g=(a!=null)?a:d;return{from:d,delta:(h-g)*f,units:m}},get:function(f,b,a,r,o){var q=f.length,d=[],g,m,p,c,h;for(g=0;g<q;g++){if(r){m=r[g][1].from}if(Ext.isArray(f[g][1])&&Ext.isArray(b)){p=[];c=0;h=f[g][1].length;for(;c<h;c++){p.push(this.computeDelta(f[g][1][c],b[c],a,m,o))}d.push([f[g][0],p])}else{d.push([f[g][0],this.computeDelta(f[g][1],b,a,m,o)])}}return d},set:function(d,a){var b=d.length,h=[],m,f,c,o,g;for(m=0;m<b;m++){f=d[m][1];if(Ext.isArray(f)){c=[];g=0;o=f.length;for(;g<o;g++){c.push(f[g].from+f[g].delta*a+(f[g].units||0))}h.push([d[m][0],c])}else{h.push([d[m][0],f.from+f.delta*a+(f.units||0)])}}return h}},stringHandler:{computeDelta:function(b,d,a,f,c){return{from:b,delta:d}},get:function(d,g,f,c,a){var b=d.length,h=[],j,m;for(j=0;j<b;j++){h.push([d[j][0],this.computeDelta(d[j][1],g,f,m,a)])}return h},set:function(b,a){var f=b.length,c=[],d,g;for(d=0;d<f;d++){g=b[d][1];c.push([b[d][0],g.delta])}return c}},color:{rgbRE:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,hexRE:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,hex3RE:/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,parseColor:function(m,f){f=(typeof f=="number")?f:1;var a=false,h=[this.hexRE,this.rgbRE,this.hex3RE],j=h.length,c,g,d,b;for(b=0;b<j;b++){d=h[b];g=(b%2===0)?16:10;c=d.exec(m);if(c&&c.length===4){if(b===2){c[1]+=c[1];c[2]+=c[2];c[3]+=c[3]}a={red:parseInt(c[1],g),green:parseInt(c[2],g),blue:parseInt(c[3],g)};break}}return a||m},computeDelta:function(h,a,f,c){h=this.parseColor(h);a=this.parseColor(a,f);var g=c?c:h,b=typeof g,d=typeof a;if(b==="string"||b==="undefined"||d==="string"||d==="undefined"){return a||g}return{from:h,delta:{red:Math.round((a.red-g.red)*f),green:Math.round((a.green-g.green)*f),blue:Math.round((a.blue-g.blue)*f)}}},get:function(h,j,f,c){var g=h.length,b=[],d,a;for(d=0;d<g;d++){if(c){a=c[d][1].from}b.push([h[d][0],this.computeDelta(h[d][1],j,f,a)])}return b},set:function(d,m){var a=d.length,h=[],j,g,f,b,c;for(j=0;j<a;j++){g=d[j][1];if(g){b=g.from;c=g.delta;g=(typeof g==="object"&&"red" in g)?"rgb("+g.red+", "+g.green+", "+g.blue+")":g;g=(typeof g==="object"&&g.length)?g[0]:g;if(typeof g==="undefined"){return[]}f=typeof g==="string"?g:"rgb("+[(b.red+Math.round(c.red*m))%256,(b.green+Math.round(c.green*m))%256,(b.blue+Math.round(c.blue*m))%256].join(",")+")";h.push([d[j][0],f])}}return h}},object:{interpolate:function(b,d){d=(typeof d==="number")?d:1;var c={},a;for(a in b){c[a]=parseFloat(b[a])*d}return c},computeDelta:function(h,a,c,b){h=this.interpolate(h);a=this.interpolate(a,c);var g=b?b:h,f={},d;for(d in a){f[d]=a[d]-g[d]}return{from:h,delta:f}},get:function(h,j,f,c){var g=h.length,b=[],d,a;for(d=0;d<g;d++){if(c){a=c[d][1].from}b.push([h[d][0],this.computeDelta(h[d][1],j,f,a)])}return b},set:function(c,m){var o=c.length,g=[],j={},h,a,b,f,d;for(h=0;h<o;h++){f=c[h][1];a=f.from;b=f.delta;for(d in a){j[d]=a[d]+b[d]*m}g.push([c[h][0],j])}return g}},path:{computeDelta:function(b,c,f,d){f=(typeof f==="number")?f:1;var a;b=+b||0;c=+c||0;a=(d!=null)?d:b;return{from:b,delta:(c-a)*f}},forcePath:function(a){if(!Ext.isArray(a)&&!Ext.isArray(a[0])){a=Ext.fx.DrawPath.parsePathString(a)}return a},get:function(t,d,s,h){var u=this.forcePath(d),o=[],p=t.length,v,c,r,b,f,g,a,q,m;for(r=0;r<p;r++){m=this.forcePath(t[r][1]);b=Ext.fx.DrawPath.interpolatePaths(m,u);m=b[0];u=b[1];v=m.length;q=[];for(g=0;g<v;g++){b=[m[g][0]];c=m[g].length;for(a=1;a<c;a++){f=h&&h[0][1][g][a].from;b.push(this.computeDelta(m[g][a],u[g][a],s,f))}q.push(b)}o.push([t[r][0],q])}return o},set:function(f,q){var r=f.length,g=[],m,h,d,o,p,c,a,b;for(m=0;m<r;m++){c=f[m][1];o=[];a=c.length;for(h=0;h<a;h++){p=[c[h][0]];b=c[h].length;for(d=1;d<b;d++){p.push(c[h][d].from+c[h][d].delta*q)}o.push(p.join(","))}g.push([f[m][0],o.join(",")])}return g}}}},0,0,0,0,0,0,[Ext.fx,"PropertyHandler"],function(){var d=["outlineColor","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","fill","stroke"],a=d.length,c=0,b;for(;c<a;c++){b=d[c];this[b]=this.color}d=["cursor"];a=d.length;c=0;for(;c<a;c++){b=d[c];this[b]=this.stringHandler}}));(Ext.cmd.derive("Ext.fx.Anim",Ext.Base,{isAnimation:true,duration:250,delay:0,delayStart:0,dynamic:false,easing:"ease",damper:1,bezierRE:/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,reverse:false,running:false,paused:false,iterations:1,autoEnd:false,alternate:false,currentIteration:0,startTime:0,frameCount:0,constructor:function(b){var c=this,a;b=b||{};if(b.keyframes){return new Ext.fx.Animator(b)}Ext.apply(c,b);if(c.from===undefined){c.from={}}c.propHandlers={};c.config=b;c.target=Ext.fx.Manager.createTarget(c.target);c.easingFn=Ext.fx.Easing[c.easing];c.target.dynamic=c.dynamic;if(!c.easingFn){c.easingFn=String(c.easing).match(c.bezierRE);if(c.easingFn&&c.easingFn.length===5){a=c.easingFn;c.easingFn=Ext.fx.CubicBezier.cubicBezier(+a[1],+a[2],+a[3],+a[4])}}c.id=Ext.id(null,"ext-anim-");c.mixins.observable.constructor.call(c);Ext.fx.Manager.addAnim(c);if(b.autoEnd){c.running=true;c.jumpToEnd()}},setAttr:function(a,b){return Ext.fx.Manager.items.get(this.id).setAttr(this.target,a,b)},initAttrs:function(){var m=this,b=m.from,c=m.to,a=m.initialFrom||{},h={},f,g,d,j;for(j in c){if(c.hasOwnProperty(j)){f=m.target.getAttr(j,b[j]);g=c[j];if(!Ext.fx.PropertyHandler[j]){if(Ext.isObject(g)){d=m.propHandlers[j]=Ext.fx.PropertyHandler.object}else{d=m.propHandlers[j]=Ext.fx.PropertyHandler.defaultHandler}}else{d=m.propHandlers[j]=Ext.fx.PropertyHandler[j]}h[j]=d.get(f,g,m.damper,a[j],j)}}m.currentAttrs=h},start:function(a){var b=this,f=b.delay,d=b.delayStart,c;if(f){if(!d){b.delayStart=a;return}else{c=a-d;if(c<f){return}else{a=new Date(d.getTime()+f)}}}if(b.fireEvent("beforeanimate",b)!==false){b.startTime=a;if(!b.paused&&!b.currentAttrs){b.initAttrs()}b.running=true;b.frameCount=0}},jumpToEnd:function(){var a=this;if(!a.endWasCalled){if(!a.currentAttrs){a.initAttrs()}Ext.fx.Manager.jumpToEnd(a);a.end()}},runAnim:function(b){var o=this,a=o.currentAttrs,g=o.duration,f=o.easingFn,d=o.propHandlers,j={},m,p,h,c;if(b>=g){b=g;c=true}if(o.reverse){b=g-b}for(h in a){if(a.hasOwnProperty(h)){p=a[h];m=c?1:f(b/g);j[h]=d[h].set(p,m)}}o.frameCount++;return j},lastFrame:function(){var a=this,b=a.iterations,c=a.currentIteration;c++;if(c<b){if(a.alternate){a.reverse=!a.reverse}a.startTime=new Date();a.currentIteration=c;a.paused=false}else{a.currentIteration=0;a.end();a.fireEvent("lastframe",a,a.startTime)}},endWasCalled:0,end:function(){var a=this;if(a.endWasCalled++){return}a.startTime=0;a.paused=false;a.running=false;Ext.fx.Manager.removeAnim(a);a.fireEvent("afteranimate",a,a.startTime);Ext.callback(a.callback,a.scope,[a,a.startTime]);if(a.remove){a.target.destroy()}},isReady:function(){return this.paused===false&&this.running===false&&this.iterations>0},isRunning:function(){return this.paused===false&&this.running===true&&this.isAnimator!==true}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.fx,"Anim"],0));Ext.enableFx=true;(Ext.cmd.derive("Ext.util.Animate",Ext.Base,{mixinId:"animate",isAnimate:true,animate:function(a){var b=this;if(Ext.fx.Manager.hasFxBlock(b.id)){return b}Ext.fx.Manager.queueFx(new Ext.fx.Anim(b.anim(a)));return this},anim:function(a){if(!Ext.isObject(a)){return(a)?{}:false}var b=this;if(a.stopAnimation){b.stopAnimation()}Ext.applyIf(a,Ext.fx.Manager.getFxDefaults(b.id));return Ext.apply({target:b,paused:true},a)},getAnimationProps:function(){var b=this,a=b.layout;return a&&a.animate?a.animate:{}},stopFx:Ext.Function.alias(Ext.util.Animate,"stopAnimation"),stopAnimation:function(){Ext.fx.Manager.stopAnimation(this.id);return this},syncFx:function(){Ext.fx.Manager.setFxDefaults(this.id,{concurrent:true});return this},sequenceFx:function(){Ext.fx.Manager.setFxDefaults(this.id,{concurrent:false});return this},hasActiveFx:Ext.Function.alias(Ext.util.Animate,"getActiveAnimation"),getActiveAnimation:function(){return Ext.fx.Manager.getActiveAnimation(this.id)}},0,0,0,0,0,0,[Ext.util,"Animate"],0));(Ext.cmd.derive("Ext.dom.Fly",Ext.dom.Element,{alternateClassName:"Ext.dom.Element.Fly",validNodeTypes:{1:1,9:1,11:1},isFly:true,constructor:function(a){this.dom=a;this.el=this},attach:function(b){var a=this;if(!b){return a.detach()}a.dom=b;if(!Ext.cache[b.id]){a.getData().isSynchronized=false}return a},detach:function(){this.dom=null},addListener:null,removeListener:null},1,0,0,0,0,0,[Ext.dom,"Fly",Ext.dom.Element,"Fly"],function(a){var b={};a.cache=b;Ext.fly=function(f,h){var d=null,j=Ext.fly,g,c;h=h||(j.caller&&j.caller.$name)||"_global";f=Ext.getDom(f);if(f){g=f.nodeType;if(a.prototype.validNodeTypes[g]||(!g&&(f.window==f))){d=Ext.cache[f.id];if(!d||d.dom!==f){d=b[h]||(b[h]=new a());d.dom=f;c=d.getData(true);if(c){c.isSynchronized=false}}}}return d}}));(Ext.cmd.derive("Ext.dom.CompositeElementLite",Ext.Base,{alternateClassName:["Ext.CompositeElementLite"],isComposite:true,isLite:true,statics:{importElementMethods:function(){var a=Ext.dom.Element,b=this.prototype;Ext.Object.each(a.prototype,function(c,d){if(typeof d==="function"&&!b[c]){b[c]=function(){return this.invoke(c,arguments)}}})}},constructor:function(b,a){if(a){this.elements=b||[]}else{this.elements=[];this.add(b)}},getElement:function(b){var a=this._fly||(this._fly=new Ext.dom.Fly());return a.attach(b)},transformElement:function(a){return Ext.getDom(a)},getCount:function(){return this.elements.length},add:function(f,c){var b=this.elements,d,a;if(!f){return this}if(typeof f=="string"){f=Ext.fly(c||document).query(f)}else{if(f.isComposite){f=f.elements}else{if(!Ext.isIterable(f)){f=[f]}}}for(d=0,a=f.length;d<a;++d){b.push(this.transformElement(f[d]))}return this},invoke:function(d,a){var g=this,h=g.elements,f=h.length,j,c,b;if(b!==0){j=(g.isLite?Ext.dom.Fly:Ext.dom.Element).prototype;for(b=0;b<f;b++){c=h[b];if(c){j[d].apply(g.getElement(c),a)}}}return g},item:function(c){var a=this.elements[c],b=null;if(a){b=this.getElement(a)}return b},slice:function(b,a){return Ext.Array.slice(this.elements,b,a)},each:function(f,d){var g=this,c=g.elements,a=c.length,b,h;for(b=0;b<a;b++){h=c[b];if(h){h=this.getElement(h);if(f.call(d||h,h,g,b)===false){break}}}return g},fill:function(a){var b=this;b.elements=[];b.add(a);return b},insert:function(b,a){Ext.Array.insert(this.elements,b,a)},filter:function(g){var b=this,h=b.elements,a=h.length,j=[],m=0,c=typeof g=="function",d,f;for(;m<a;m++){f=h[m];d=false;if(f){f=b.getElement(f);if(c){d=g.call(f,f,b,m)!==false}else{d=f.is(g)}if(d){j.push(b.transformElement(f))}}}b.elements=j;return b},indexOf:function(a){return Ext.Array.indexOf(this.elements,this.transformElement(a))},replaceElement:function(a,g,c){var f=!isNaN(a)?a:this.indexOf(a),b;if(f>-1){g=Ext.getDom(g);if(c){b=this.elements[f];b.parentNode.insertBefore(g,b);Ext.removeNode(b)}Ext.Array.splice(this.elements,f,1,g)}return this},clear:function(b){var a=this,d=a.elements,c=d.length-1;if(b){for(;c>=0;c--){Ext.removeNode(d[c])}}this.elements=[]},addElements:function(a,d){if(!a){return this}if(typeof a==="string"){a=Ext.dom.Element.selectorFunction(a,d)}var f=this.elements,c=a.length,b;for(b=0;b<c;b++){f.push(Ext.get(a[b]))}return this},first:function(){return this.item(0)},last:function(){return this.item(this.getCount()-1)},contains:function(a){return this.indexOf(a)!=-1},removeElement:function(d,h){d=[].concat(d);var c=this,f=c.elements,b=d.length,g,a,j;for(j=0;j<b;j++){g=d[j];if((a=(f[g]||f[g=c.indexOf(g)]))){if(h){if(a.dom){a.destroy()}else{Ext.removeNode(a)}}Ext.Array.erase(f,g,1)}}return c},destroy:function(){return this.invoke("destroy",arguments);this.callParent()}},1,0,0,0,0,0,[Ext.dom,"CompositeElementLite",Ext,"CompositeElementLite"],function(b){var a=b.prototype;b.importElementMethods();a.on=a.addListener}));Ext.define("Ext.overrides.dom.Element",(function(){var S,U=window,D=document,c="hidden",o="isClipped",J="overflow",s="overflow-x",r="overflow-y",v="originalClip",B="height",O="width",P="visibility",K="display",F="none",h="offsets",M="clip",b="originalDisplay",G="visibilityMode",w="isVisible",T="x-hidden-offsets",j="x-hidden-clip",m=['<div class="{0}-tl" role="presentation">','<div class="{0}-tr" role="presentation">','<div class="{0}-tc" role="presentation"></div>',"</div>","</div>",'<div class="{0}-ml" role="presentation">','<div class="{0}-mr" role="presentation">','<div class="{0}-mc" role="presentation"></div>',"</div>","</div>",'<div class="{0}-bl" role="presentation">','<div class="{0}-br" role="presentation">','<div class="{0}-bc" role="presentation"></div>',"</div>","</div>"].join(""),I=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/ig,C=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,L=/\ssrc=([\'\"])(.*?)\1/i,g=/\S/,R=/\stype=([\'\"])(.*?)\1/i,z=/^-ms-/,A=/(-[a-z])/gi,H=function(V,W){return W.charAt(1).toUpperCase()},f="x-masked",y="x-masked-relative",t="x-mask-msg",q=/^body/i,p={},u=function(W){var X=W.getData(),V=X[G];if(V===undefined){X[G]=V=S.VISIBILITY}return V},d=D.createRange?D.createRange():null,E={INPUT:true,TEXTAREA:true};if(Ext.isIE8){var Q=D.createElement("div"),a=[],N=Ext.Function.createBuffered(function(){var V=a.length,W;for(W=0;W<V;W++){Q.appendChild(a[W])}Q.innerHTML="";a.length=0},10)}return{override:"Ext.dom.Element",mixins:[Ext.util.Animate],skipGarbageCollection:false,_init:function(V){S=V;V.tabbableSelector+=",["+V.tabbableSavedCounterAttribute+"]"},statics:{selectableCls:"x-selectable",unselectableCls:"x-unselectable",tabbableSelector:Ext.supports.CSS3NegationSelector?'a[href],button,iframe,input,select,textarea,[tabindex]:not([tabindex="-1"]),[contenteditable="true"]':'a[href],button,iframe,input,select,textarea,[tabindex],[contenteditable="true"]',naturallyFocusableTags:{BUTTON:true,IFRAME:true,EMBED:true,INPUT:true,OBJECT:true,SELECT:true,TEXTAREA:true,HTML:Ext.isIE?true:false},naturallyTabbableTags:{BUTTON:true,IFRAME:true,INPUT:true,SELECT:true,TEXTAREA:true,OBJECT:Ext.isIE8m?true:false},tabbableSavedCounterAttribute:"data-tabindex-counter",tabbableSavedValueAttribute:"data-tabindex-value",normalize:function(V){if(V==="float"){V=Ext.supports.Float?"cssFloat":"styleFloat"}return p[V]||(p[V]=V.replace(z,"ms-").replace(A,H))}},addClsOnClick:function(X,Z,W){var Y=this,aa=Y.dom,V=Ext.isFunction(Z);Y.on("mousedown",function(){if(V&&Z.call(W||Y,Y)===false){return false}Ext.fly(aa).addCls(X);var ac=Ext.getDoc(),ab=function(){Ext.fly(aa).removeCls(X);ac.removeListener("mouseup",ab)};ac.on("mouseup",ab)});return Y},addClsOnFocus:function(X,Z,W){var Y=this,aa=Y.dom,V=Ext.isFunction(Z);Y.on("focus",function(){if(V&&Z.call(W||Y,Y)===false){return false}Ext.fly(aa).addCls(X)});Y.on("blur",function(){Ext.fly(aa).removeCls(X)});return Y},addClsOnOver:function(X,Z,W){var Y=this,aa=Y.dom,V=Ext.isFunction(Z);Y.hover(function(){if(V&&Z.call(W||Y,Y)===false){return}Ext.fly(aa).addCls(X)},function(){Ext.fly(aa).removeCls(X)});return Y},addKeyListener:function(W,Y,X){var V;if(typeof W!=="object"||Ext.isArray(W)){V={target:this,key:W,fn:Y,scope:X}}else{V={target:this,key:W.key,shift:W.shift,ctrl:W.ctrl,alt:W.alt,fn:Y,scope:X}}return new Ext.util.KeyMap(V)},addKeyMap:function(V){return new Ext.util.KeyMap(Ext.apply({target:this},V))},afterAnimate:function(){var V=this.shadow;if(V&&!V.disabled&&!V.animate){V.show()}},anchorAnimX:function(V){var W=(V==="l")?"right":"left";this.dom.style[W]="0px"},anim:function(V){if(!Ext.isObject(V)){return(V)?{}:false}var W=this,X=V.duration||Ext.fx.Anim.prototype.duration,Z=V.easing||"ease",Y;if(V.stopAnimation){W.stopAnimation()}Ext.applyIf(V,Ext.fx.Manager.getFxDefaults(W.id));Ext.fx.Manager.setFxDefaults(W.id,{delay:0});Y={target:W.dom,remove:V.remove,alternate:V.alternate||false,duration:X,easing:Z,callback:V.callback,listeners:V.listeners,iterations:V.iterations||1,scope:V.scope,block:V.block,concurrent:V.concurrent,delay:V.delay||0,paused:true,keyframes:V.keyframes,from:V.from||{},to:Ext.apply({},V),userConfig:V};Ext.apply(Y.to,V.to);delete Y.to.to;delete Y.to.from;delete Y.to.remove;delete Y.to.alternate;delete Y.to.keyframes;delete Y.to.iterations;delete Y.to.listeners;delete Y.to.target;delete Y.to.paused;delete Y.to.callback;delete Y.to.scope;delete Y.to.duration;delete Y.to.easing;delete Y.to.concurrent;delete Y.to.block;delete Y.to.stopAnimation;delete Y.to.delay;return Y},animate:function(V){this.addAnimation(V);return this},addAnimation:function(X){var Z=this,W=Z.dom.id||Ext.id(Z.dom),Y,aa,V;if(!Ext.fx.Manager.hasFxBlock(W)){if(X.listeners){Y=X.listeners;delete X.listeners}if(X.internalListeners){X.listeners=X.internalListeners;delete X.internalListeners}V=X.autoEnd;delete X.autoEnd;aa=new Ext.fx.Anim(Z.anim(X));aa.on({afteranimate:"afterAnimate",beforeanimate:"beforeAnimate",scope:Z,single:true});if(Y){aa.on(Y)}Ext.fx.Manager.queueFx(aa);if(V){aa.jumpToEnd()}}return aa},beforeAnimate:function(){var V=this.shadow;if(V&&!V.disabled&&!V.animate){V.hide()}},boxWrap:function(V){V=V||"x-box";var W=Ext.get(this.insertHtml("beforeBegin","<div class='"+V+"' role='presentation'>"+Ext.String.format(m,V)+"</div>"));W.selectNode("."+V+"-mc").appendChild(this.dom);return W},clean:function(W){var Y=this,Z=Y.dom,aa=Y.getData(),ab=Z.firstChild,X=-1,V;if(aa.isCleaned&&W!==true){return Y}while(ab){V=ab.nextSibling;if(ab.nodeType===3){if(!(g.test(ab.nodeValue))){Z.removeChild(ab)}else{if(V&&V.nodeType===3){ab.appendData(Ext.String.trim(V.data));Z.removeChild(V);V=ab.nextSibling;ab.nodeIndex=++X}}}else{Ext.fly(ab,"_clean").clean();ab.nodeIndex=++X}ab=V}aa.isCleaned=true;return Y},empty:d?function(){var V=this.dom;if(V.firstChild){d.setStartBefore(V.firstChild);d.setEndAfter(V.lastChild);d.deleteContents()}}:function(){var V=this.dom;while(V.lastChild){V.removeChild(V.lastChild)}},clearListeners:function(){this.removeAnchor();arguments.callee.$previous.call(this)},clearPositioning:function(V){V=V||"";return this.setStyle({left:V,right:V,top:V,bottom:V,"z-index":"",position:"static"})},createProxy:function(V,Z,Y){V=(typeof V==="object")?V:{tag:"div",role:"presentation",cls:V};var X=this,W=Z?Ext.DomHelper.append(Z,V,true):Ext.DomHelper.insertBefore(X.dom,V,true);W.setVisibilityMode(S.DISPLAY);W.hide();if(Y&&X.setBox&&X.getBox){W.setBox(X.getBox())}return W},clearOpacity:function(){return this.setOpacity("")},clip:function(){var W=this,X=W.getData(),V;if(!X[o]){X[o]=true;V=W.getStyle([J,s,r]);X[v]={o:V[J],x:V[s],y:V[r]};W.setStyle(J,c);W.setStyle(s,c);W.setStyle(r,c)}return W},destroy:function(){var X=this,Z=X.dom,Y=X.getData(),W,V;if(Z&&X.isAnimate){X.stopAnimation()}arguments.callee.$previous.call(this);if(Z&&Ext.isIE8&&(Z.window!=Z)&&(Z.nodeType!==9)&&(Z.tagName!=="BODY")&&(Z.tagName!=="HTML")){a[a.length]=Z;N()}if(Y){W=Y.maskEl;V=Y.maskMsg;if(W){W.destroy()}if(V){V.destroy()}}},enableDisplayMode:function(W){var V=this;V.setVisibilityMode(S.DISPLAY);if(W!==undefined){V.getData()[b]=W}return V},fadeIn:function(X){var V=this,W=V.dom;V.animate(Ext.apply({},X,{opacity:1,internalListeners:{beforeanimate:function(Z){var Y=Ext.fly(W,"_anim");if(Y.isStyle("display","none")){Y.setDisplayed("")}else{Y.show()}}}}));return this},fadeOut:function(X){var V=this,W=V.dom;X=Ext.apply({opacity:0,internalListeners:{afteranimate:function(Z){if(W&&Z.to.opacity===0){var Y=Ext.fly(W,"_anim");if(X.useDisplay){Y.setDisplayed(false)}else{Y.hide()}}}}},X);V.animate(X);return V},fixDisplay:function(){var V=this;if(V.isStyle(K,F)){V.setStyle(P,c);V.setStyle(K,V._getDisplay());if(V.isStyle(K,F)){V.setStyle(K,"block")}}},frame:function(V,Y,Z){var X=this,aa=X.dom,W;V=V||"#C3DAF9";Y=Y||1;Z=Z||{};W=function(){var ac=Ext.fly(aa,"_anim"),ab=this,ad,af,ae;ac.show();ad=ac.getBox();af=Ext.getBody().createChild({role:"presentation",id:ac.dom.id+"-anim-proxy",style:{position:"absolute","pointer-events":"none","z-index":35000,border:"0px solid "+V}});ae=new Ext.fx.Anim({target:af,duration:Z.duration||1000,iterations:Y,from:{top:ad.y,left:ad.x,borderWidth:0,opacity:1,height:ad.height,width:ad.width},to:{top:ad.y-20,left:ad.x-20,borderWidth:10,opacity:0,height:ad.height+40,width:ad.width+40}});ae.on("afteranimate",function(){af.destroy();ab.end()})};X.animate({duration:(Math.max(Z.duration,500)*2)||2000,listeners:{beforeanimate:{fn:W}},callback:Z.callback,scope:Z.scope});return X},getColor:function(W,X,ac){var Z=this.getStyle(W),Y=ac||ac===""?ac:"#",ab,V,aa=0;if(!Z||(/transparent|inherit/.test(Z))){return X}if(/^r/.test(Z)){Z=Z.slice(4,Z.length-1).split(",");V=Z.length;for(;aa<V;aa++){ab=parseInt(Z[aa],10);Y+=(ab<16?"0":"")+ab.toString(16)}}else{Z=Z.replace("#","");Y+=Z.length===3?Z.replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"):Z}return(Y.length>5?Y.toLowerCase():X)},getLoader:function(){var W=this,X=W.getData(),V=X.loader;if(!V){X.loader=V=new Ext.ElementLoader({target:W})}return V},getPositioning:function(W){var V=this.getStyle(["left","top","position","z-index"]),X=this.dom;if(W){if(V.left==="auto"){V.left=X.offsetLeft+"px"}if(V.top==="auto"){V.top=X.offsetTop+"px"}}return V},ghost:function(V,Y){var X=this,Z=X.dom,W;V=V||"b";W=function(){var ab=Ext.fly(Z,"_anim"),aa=ab.getWidth(),af=ab.getHeight(),ac=ab.getXY(),ae=ab.getPositioning(),ad={opacity:0};switch(V){case"t":ad.y=ac[1]-af;break;case"l":ad.x=ac[0]-aa;break;case"r":ad.x=ac[0]+aa;break;case"b":ad.y=ac[1]+af;break;case"tl":ad.x=ac[0]-aa;ad.y=ac[1]-af;break;case"bl":ad.x=ac[0]-aa;ad.y=ac[1]+af;break;case"br":ad.x=ac[0]+aa;ad.y=ac[1]+af;break;case"tr":ad.x=ac[0]+aa;ad.y=ac[1]-af;break}this.to=ad;this.on("afteranimate",function(){var ag=Ext.fly(Z,"_anim");if(ag){ag.hide();ag.clearOpacity();ag.setPositioning(ae)}})};X.animate(Ext.applyIf(Y||{},{duration:500,easing:"ease-out",listeners:{beforeanimate:W}}));return X},hide:function(V){if(typeof V==="string"){this.setVisible(false,V);return this}this.setVisible(false,this.anim(V));return this},highlight:function(ad,ab){var W=this,ae=W.dom,Y={},V,Z,af,ac,aa,X;ab=ab||{};ac=ab.listeners||{};af=ab.attr||"backgroundColor";Y[af]=ad||"ffff9c";if(!ab.to){Z={};Z[af]=ab.endColor||W.getColor(af,"ffffff","")}else{Z=ab.to}ab.listeners=Ext.apply(Ext.apply({},ac),{beforeanimate:function(){V=ae.style[af];var ag=Ext.fly(ae,"_anim");ag.clearOpacity();ag.show();aa=ac.beforeanimate;if(aa){X=aa.fn||aa;return X.apply(aa.scope||ac.scope||U,arguments)}},afteranimate:function(){if(ae){ae.style[af]=V}aa=ac.afteranimate;if(aa){X=aa.fn||aa;X.apply(aa.scope||ac.scope||U,arguments)}}});W.animate(Ext.apply({},ab,{duration:1000,easing:"ease-in",from:Y,to:Z}));return W},hover:function(W,V,Y,X){var Z=this;Z.on("mouseenter",W,Y||Z.dom,X);Z.on("mouseleave",V,Y||Z.dom,X);return Z},initDD:function(X,W,Y){var V=new Ext.dd.DD(Ext.id(this.dom),X,W);return Ext.apply(V,Y)},initDDProxy:function(X,W,Y){var V=new Ext.dd.DDProxy(Ext.id(this.dom),X,W);return Ext.apply(V,Y)},initDDTarget:function(X,W,Y){var V=new Ext.dd.DDTarget(Ext.id(this.dom),X,W);return Ext.apply(V,Y)},isFocusable:function(){var W=this.dom,V=false,X;if(W&&!W.disabled){X=W.nodeName;V=!!Ext.Element.naturallyFocusableTags[X]||((X==="A"||X==="LINK")&&!!W.href)||W.getAttribute("tabIndex")!=null||W.contentEditable==="true";if(Ext.isIE8&&X==="INPUT"&&W.type==="hidden"){V=false}V=V&&this.isVisible(true)}return V},isInputField:function(){var W=this.dom,V=W.contentEditable;if((E[W.tagName]&&W.type!=="button")||(V===""||V==="true")){return true}return false},isTabbable:function(X){var Y=this.dom,Z=false,aa,W,V;if(Y&&!Y.disabled){aa=Y.nodeName;V=Y.getAttribute("tabIndex");W=V!=null;V-=0;if(aa==="A"||aa==="LINK"){if(Y.href){Z=W&&V<0?false:true}else{if(Y.contentEditable==="true"){Z=!W||(W&&V>=0)?true:false}else{Z=W&&V>=0?true:false}}}else{if(Y.contentEditable==="true"||Ext.Element.naturallyTabbableTags[aa]){Z=W&&V<0?false:true}else{if(W&&V>=0){Z=true}}}if(Ext.isIE8&&aa==="INPUT"&&Y.type==="hidden"){Z=false}Z=Z&&(X||((!this.component||this.component.isVisible(true))&&this.isVisible(true)))}return Z},isMasked:function(V){var Z=this,ab=Z.getData(),Y=ab.maskEl,W=ab.maskMsg,aa=false,X;if(Y&&Y.isVisible()){if(W){W.center(Z)}aa=true}else{if(V){X=Z.findParentNode();if(X){return Ext.fly(X).isMasked(V)}}}return aa},load:function(V){this.getLoader().load(V);return this},mask:function(ac,Z,V){var Y=this,ab=Y.dom,aa=Y.getData(),X=aa.maskEl,W;if(!(q.test(ab.tagName)&&Y.getStyle("position")==="static")){Y.addCls(y)}if(X){X.destroy()}X=Ext.DomHelper.append(ab,{role:"presentation",cls:"x-mask x-border-box",children:{role:"presentation",cls:Z?t+" "+Z:t,cn:{tag:"div",role:"presentation",cls:"x-mask-msg-inner",cn:{tag:"div",role:"presentation",cls:"x-mask-msg-text",html:ac||""}}}},true);W=Ext.get(X.dom.firstChild);aa.maskEl=X;Y.addCls(f);X.setDisplayed(true);if(typeof ac==="string"){W.setDisplayed(true);W.center(Y)}else{W.setDisplayed(false)}if(ab===D.body){X.addCls("x-mask-fixed")}Y.saveTabbableState({skipSelf:ab===D.body});if(Ext.isIE9m&&ab!==D.body&&Y.isStyle("height","auto")){X.setSize(undefined,V||Y.getHeight())}return X},monitorMouseLeave:function(V,Y,X){var Z=this,aa,W={mouseleave:function(ab){if(Ext.isIE9m){ab.enableIEAsync()}aa=Ext.defer(Y,V,X||Z,[ab])},mouseenter:function(){clearTimeout(aa)}};Z.on(W);return W},puff:function(Z){var Y=this,aa=Y.dom,W,X=Y.getBox(),V=Y.getStyle(["width","height","left","right","top","bottom","position","z-index","font-size","opacity"],true);Z=Ext.applyIf(Z||{},{easing:"ease-out",duration:500,useDisplay:false});W=function(){var ab=Ext.fly(aa,"_anim");ab.clearOpacity();ab.show();this.to={width:X.width*2,height:X.height*2,x:X.x-(X.width/2),y:X.y-(X.height/2),opacity:0,fontSize:"200%"};this.on("afteranimate",function(){var ac=Ext.fly(aa,"_anim");if(ac){if(Z.useDisplay){ac.setDisplayed(false)}else{ac.hide()}ac.setStyle(V);Ext.callback(Z.callback,Z.scope)}})};Y.animate({duration:Z.duration,easing:Z.easing,listeners:{beforeanimate:{fn:W}}});return Y},selectable:function(){var V=this;V.dom.unselectable="";V.removeCls(S.unselectableCls);V.addCls(S.selectableCls);return V},setCapture:function(){var V=this.dom;if(Ext.isIE9m&&V.setCapture){V.setCapture()}},setHeight:function(V,W){var X=this;if(!W||!X.anim){arguments.callee.$previous.apply(this,arguments)}else{if(!Ext.isObject(W)){W={}}X.animate(Ext.applyIf({to:{height:V}},W))}return X},setHorizontal:function(){var W=this,V=W.verticalCls;delete W.vertical;if(V){delete W.verticalCls;W.removeCls(V)}delete W.setWidth;delete W.setHeight;if(!Ext.isIE8){delete W.getWidth;delete W.getHeight}delete W.styleHooks},updateText:function(Y){var V=this,X,W;if(X){W=X.firstChild;if(!W||(W.nodeType!==3||W.nextSibling)){W=D.createTextNode();V.empty();X.appendChild(W)}if(Y){W.data=Y}}},setHtml:function(X,W,ac,Y){var Z=this,ab,aa,V;if(!Z.dom){return Z}X=X||"";aa=Z.dom;if(W!==true){aa.innerHTML=X;Ext.callback(ac,Z);return Z}ab=Ext.id();X+='<span id="'+ab+'" role="presentation"></span>';V=Ext.interval(function(){var ae,ai,ah,ag,af,ad,aj;if(!(ad=D.getElementById(ab))){return false}clearInterval(V);Ext.removeNode(ad);ae=Ext.getHead().dom;while((ai=I.exec(X))){ah=ai[1];ag=ah?ah.match(L):false;if(ag&&ag[2]){aj=D.createElement("script");aj.src=ag[2];af=ah.match(R);if(af&&af[2]){aj.type=af[2]}ae.appendChild(aj)}else{if(ai[2]&&ai[2].length>0){if(Y){Ext.functionFactory(ai[2]).call(Y)}else{Ext.globalEval(ai[2])}}}}Ext.callback(ac,Y||Z)},20);aa.innerHTML=X.replace(C,"");return Z},setOpacity:function(W,V){var X=this;if(!X.dom){return X}if(!V||!X.anim){X.setStyle("opacity",W)}else{if(typeof V!="object"){V={duration:350,easing:"ease-in"}}X.animate(Ext.applyIf({to:{opacity:W}},V))}return X},setPositioning:function(V){return this.setStyle(V)},setVertical:function(Y,V){var X=this,W=S.prototype;X.vertical=true;if(V){X.addCls(X.verticalCls=V)}X.setWidth=W.setHeight;X.setHeight=W.setWidth;if(!Ext.isIE8){X.getWidth=W.getHeight;X.getHeight=W.getWidth}X.styleHooks=(Y===270)?W.verticalStyleHooks270:W.verticalStyleHooks90},setSize:function(X,V,W){var Y=this;if(Ext.isObject(X)){W=V;V=X.height;X=X.width}if(!W||!Y.anim){Y.dom.style.width=S.addUnits(X);Y.dom.style.height=S.addUnits(V);if(Y.shadow||Y.shim){Y.syncUnderlays()}}else{if(W===true){W={}}Y.animate(Ext.applyIf({to:{width:X,height:V}},W))}return Y},setVisible:function(Z,V){var X=this,Y=X.dom,W=u(X);if(typeof V==="string"){switch(V){case K:W=S.DISPLAY;break;case P:W=S.VISIBILITY;break;case h:W=S.OFFSETS;break;case M:W=S.CLIP;break}X.setVisibilityMode(W);V=false}if(!V||!X.anim){if(W===S.DISPLAY){return X.setDisplayed(Z)}else{if(W===S.OFFSETS){X[Z?"removeCls":"addCls"](T)}else{if(W===S.CLIP){X[Z?"removeCls":"addCls"](j)}else{if(W===S.VISIBILITY){X.fixDisplay();Y.style.visibility=Z?"":c}}}}}else{if(Z){X.setOpacity(0.01);X.setVisible(true)}if(!Ext.isObject(V)){V={duration:350,easing:"ease-in"}}X.animate(Ext.applyIf({callback:function(){if(!Z){Ext.fly(Y).setVisible(false).setOpacity(1)}},to:{opacity:(Z)?1:0}},V))}X.getData()[w]=Z;if(X.shadow||X.shim){X.setUnderlaysVisible(Z)}return X},setWidth:function(W,V){var X=this;if(!V||!X.anim){arguments.callee.$previous.apply(this,arguments)}else{if(!Ext.isObject(V)){V={}}X.animate(Ext.applyIf({to:{width:W}},V))}return X},setX:function(V,W){return this.setXY([V,this.getY()],W)},setXY:function(X,V){var W=this;if(!V||!W.anim){arguments.callee.$previous.call(this,X)}else{if(!Ext.isObject(V)){V={}}W.animate(Ext.applyIf({to:{x:X[0],y:X[1]}},V))}return this},setY:function(W,V){return this.setXY([this.getX(),W],V)},show:function(V){if(typeof V==="string"){this.setVisible(true,V);return this}this.setVisible(true,this.anim(V));return this},slideIn:function(ac,ab,ad){var V=this,aa=V.dom,Y=aa.style,X,Z,ae,W;ac=ac||"t";ab=ab||{};X=function(){var af=this,al=ab.listeners,ak=Ext.fly(aa,"_anim"),ag,ai,ah,aj;if(!ad){ak.fixDisplay()}ag=ak.getBox();if((ac=="t"||ac=="b")&&ag.height===0){ag.height=aa.scrollHeight}else{if((ac=="l"||ac=="r")&&ag.width===0){ag.width=aa.scrollWidth}}ai=ak.getStyle(["width","height","left","right","top","bottom","position","z-index"],true);ak.setSize(ag.width,ag.height);if(ab.preserveScroll){ae=ak.cacheScrollValues()}aj=ak.wrap({role:"presentation",id:Ext.id()+"-anim-wrap-for-"+ak.dom.id,style:{visibility:ad?"visible":"hidden"}});W=aj.dom.parentNode;aj.setPositioning(ak.getPositioning());if(aj.isStyle("position","static")){aj.position("relative")}ak.clearPositioning("auto");aj.clip();if(ae){ae()}ak.setStyle({visibility:"",position:"absolute"});if(ad){aj.setSize(ag.width,ag.height)}switch(ac){case"t":ah={from:{width:ag.width+"px",height:"0px"},to:{width:ag.width+"px",height:ag.height+"px"}};Y.bottom="0px";break;case"l":ah={from:{width:"0px",height:ag.height+"px"},to:{width:ag.width+"px",height:ag.height+"px"}};V.anchorAnimX(ac);break;case"r":ah={from:{x:ag.x+ag.width,width:"0px",height:ag.height+"px"},to:{x:ag.x,width:ag.width+"px",height:ag.height+"px"}};V.anchorAnimX(ac);break;case"b":ah={from:{y:ag.y+ag.height,width:ag.width+"px",height:"0px"},to:{y:ag.y,width:ag.width+"px",height:ag.height+"px"}};break;case"tl":ah={from:{x:ag.x,y:ag.y,width:"0px",height:"0px"},to:{width:ag.width+"px",height:ag.height+"px"}};Y.bottom="0px";V.anchorAnimX("l");break;case"bl":ah={from:{y:ag.y+ag.height,width:"0px",height:"0px"},to:{y:ag.y,width:ag.width+"px",height:ag.height+"px"}};V.anchorAnimX("l");break;case"br":ah={from:{x:ag.x+ag.width,y:ag.y+ag.height,width:"0px",height:"0px"},to:{x:ag.x,y:ag.y,width:ag.width+"px",height:ag.height+"px"}};V.anchorAnimX("r");break;case"tr":ah={from:{x:ag.x+ag.width,width:"0px",height:"0px"},to:{x:ag.x,width:ag.width+"px",height:ag.height+"px"}};Y.bottom="0px";V.anchorAnimX("r");break}aj.show();Z=Ext.apply({},ab);delete Z.listeners;Z=new Ext.fx.Anim(Ext.applyIf(Z,{target:aj,duration:500,easing:"ease-out",from:ad?ah.to:ah.from,to:ad?ah.from:ah.to}));Z.on("afteranimate",function(){var am=Ext.fly(aa,"_anim");am.setStyle(ai);if(ad){if(ab.useDisplay){am.setDisplayed(false)}else{am.hide()}}if(aj.dom){if(aj.dom.parentNode){aj.dom.parentNode.insertBefore(am.dom,aj.dom)}else{W.appendChild(am.dom)}aj.destroy()}if(ae){ae()}af.end()});if(al){Z.on(al)}};V.animate({duration:ab.duration?Math.max(ab.duration,500)*2:1000,listeners:{beforeanimate:X}});return V},slideOut:function(V,W){return this.slideIn(V,W,true)},swallowEvent:function(W,X){var Z=this,aa,V,Y=function(ab){ab.stopPropagation();if(X){ab.preventDefault()}};if(Ext.isArray(W)){V=W.length;for(aa=0;aa<V;aa++){Z.on(W[aa],Y)}return Z}Z.on(W,Y);return Z},switchOff:function(X){var W=this,Y=W.dom,V;X=Ext.applyIf(X||{},{easing:"ease-in",duration:500,remove:false,useDisplay:false});V=function(){var ac=Ext.fly(Y,"_anim"),ab=this,aa=ac.getSize(),ad=ac.getXY(),ae,Z;ac.clearOpacity();ac.clip();Z=ac.getPositioning();ae=new Ext.fx.Animator({target:Y,duration:X.duration,easing:X.easing,keyframes:{33:{opacity:0.3},66:{height:1,y:ad[1]+aa.height/2},100:{width:1,x:ad[0]+aa.width/2}}});ae.on("afteranimate",function(){var af=Ext.fly(Y,"_anim");if(X.useDisplay){af.setDisplayed(false)}else{af.hide()}af.clearOpacity();af.setPositioning(Z);af.setSize(aa);ab.end()})};W.animate({duration:(Math.max(X.duration,500)*2),listeners:{beforeanimate:{fn:V}},callback:X.callback,scope:X.scope});return W},syncContent:function(ad){ad=Ext.getDom(ad);var ae=ad.childNodes,ab=ae.length,Z=this.dom,aa=Z.childNodes,X=aa.length,V,Y,ag,ai,af,ac,W,ah=Z._extData;if(Ext.isIE9m&&Z.mergeAttributes){Z.mergeAttributes(ad,true);Z.src=ad.src}else{af=ad.attributes;ac=af.length;for(V=0;V<ac;V++){W=af[V].name;if(W!=="id"){Z.setAttribute(W,af[V].value)}}}if(ah){ah.isSynchronized=false}if(ab!==X){Z.innerHTML=ad.innerHTML;return}for(V=0;V<ab;V++){ag=ae[V];Y=aa[V];ai=ag.nodeType;if(ai!==Y.nodeType||(ai===1&&ag.tagName!==Y.tagName)){Z.innerHTML=ad.innerHTML;return}if(ai===3){Y.data=ag.data}else{if(ag.id&&Y.id!==ag.id){Y.id=ag.id}Y.style.cssText=ag.style.cssText;Y.className=ag.className;Ext.fly(Y,"_syncContent").syncContent(ag)}}},toggle:function(V){var W=this;W.setVisible(!W.isVisible(),W.anim(V));return W},unmask:function(){var X=this,Y=X.getData(),W=Y.maskEl,V;if(W){V=W.dom.style;if(V.clearExpression){V.clearExpression("width");V.clearExpression("height")}if(W){W.destroy();delete Y.maskEl}X.removeCls([f,y])}X.restoreTabbableState(X.dom===D.body)},unclip:function(){var W=this,X=W.getData(),V;if(X[o]){X[o]=false;V=X[v];if(V.o){W.setStyle(J,V.o)}if(V.x){W.setStyle(s,V.x)}if(V.y){W.setStyle(r,V.y)}}return W},translate:function(V,X,W){if(Ext.supports.CssTransforms&&!Ext.isIE9m){arguments.callee.$previous.apply(this,arguments)}else{if(V!=null){this.dom.style.left=V+"px"}if(X!=null){this.dom.style.top=X+"px"}}},unselectable:function(){var V=this;if(Ext.isOpera){V.dom.unselectable="on"}V.removeCls(S.selectableCls);V.addCls(S.unselectableCls);return V},privates:{findTabbableElements:function(ab){var ac,W,Y,ag,ah,ak=this.dom,aj=Ext.Element.tabbableSavedCounterAttribute,aa=[],Z=0,ad,af,ai,V,X,ae;if(!ak){return aa}if(ab){ac=ab.skipSelf;W=ab.skipChildren;Y=ab.excludeRoot;ag=ab.includeSaved;ah=ab.includeHidden}Y=Y&&Ext.getDom(Y);if(Y&&Y.contains(ak)){return aa}if(!ac&&((ag&&ak.hasAttribute(aj))||this.isTabbable(ah))){aa[Z++]=ak}if(W){return aa}ad=ak.querySelectorAll(Ext.Element.tabbableSelector);X=ad.length;if(!X){return aa}ai=new Ext.dom.Fly();for(V=0;V<X;V++){af=ad[V];ae=+af.getAttribute("tabIndex");if(((ag&&af.hasAttribute(aj))||(!(ae<0)&&ai.attach(af).isTabbable(ah)))&&!(Y&&(Y===af||Y.contains(af)))){aa[Z++]=af}}return aa},saveTabbableState:function(Z){var ac=Ext.Element.tabbableSavedCounterAttribute,Y=Ext.Element.tabbableSavedValueAttribute,W,X,ab,aa,V;if(!Z||Z.includeSaved==null){Z=Ext.Object.chain(Z||null);Z.includeSaved=true}X=this.findTabbableElements(Z);for(aa=0,V=X.length;aa<V;aa++){ab=X[aa];W=+ab.getAttribute(ac);if(W>0){ab.setAttribute(ac,++W)}else{if(ab.hasAttribute("tabIndex")){ab.setAttribute(Y,ab.getAttribute("tabIndex"))}else{ab.setAttribute(Y,"none")}ab.setAttribute("tabIndex","-1");ab.setAttribute(ac,"1")}}return X},restoreTabbableState:function(aa,V){var ae=this.dom,X=Ext.Element.tabbableSavedCounterAttribute,Y=Ext.Element.tabbableSavedValueAttribute,ac=[],Z,ab,ac,ad,af,W;if(!ae){return this}if(!V){ac=Ext.Array.from(ae.querySelectorAll("["+X+"]"))}if(!aa){ac.unshift(ae)}for(af=0,W=ac.length;af<W;af++){ad=ac[af];if(!ad.hasAttribute(X)||!ad.hasAttribute(Y)){continue}ab=+ad.getAttribute(X);if(ab>1){ad.setAttribute(X,--ab);continue}Z=ad.getAttribute(Y);if(Z==="none"){ad.removeAttribute("tabIndex")}else{ad.setAttribute("tabIndex",Z)}ad.removeAttribute(Y);ad.removeAttribute(X)}return ac}},deprecated:{"4.0":{methods:{pause:function(V){var W=this;Ext.fx.Manager.setFxDefaults(W.id,{delay:V});return W},scale:function(V,W,X){this.animate(Ext.apply({},X,{width:V,height:W}));return this},shift:function(V){this.animate(V);return this}}},"4.2":{methods:{moveTo:function(V,X,W){return this.setXY([V,X],W)},setBounds:function(W,Z,Y,V,X){return this.setBox({x:W,y:Z,width:Y,height:V},X)},setLeftTop:function(Y,X){var W=this,V=W.dom.style;V.left=S.addUnits(Y);V.top=S.addUnits(X);if(W.shadow||W.shim){W.syncUnderlays()}return W},setLocation:function(V,X,W){return this.setXY([V,X],W)}}},"5.0":{methods:{getAttributeNS:function(W,V){return this.getAttribute(V,W)},getCenterXY:function(){return this.getAlignToXY(D,"c-c")},getComputedHeight:function(){return Math.max(this.dom.offsetHeight,this.dom.clientHeight)||parseFloat(this.getStyle(B))||0},getComputedWidth:function(){return Math.max(this.dom.offsetWidth,this.dom.clientWidth)||parseFloat(this.getStyle(O))||0},getStyleSize:function(){var Z=this,aa=this.dom,W=(aa===D||aa===D.body),Y,V,X;if(W){return{width:S.getViewportWidth(),height:S.getViewportHeight()}}Y=Z.getStyle(["height","width"],true);if(Y.width&&Y.width!=="auto"){V=parseFloat(Y.width)}if(Y.height&&Y.height!=="auto"){X=parseFloat(Y.height)}return{width:V||Z.getWidth(true),height:X||Z.getHeight(true)}},isBorderBox:function(){return true},isDisplayed:function(){return !this.isStyle("display","none")},focusable:"isFocusable"}}}}})(),function(){var w=Ext.dom.Element,v=w.prototype,q=!Ext.isIE8,b=document,p=b.defaultView,C=/alpha\(opacity=(.*)\)/i,h=/^\s+|\s+$/g,r=v.styleHooks,A=Ext.supports,f,t,d,z,g,u,c;v._init(w);delete v._init;Ext.plainTableCls="x-table-plain";Ext.plainListCls="x-list-plain";if(Ext.CompositeElementLite){Ext.CompositeElementLite.importElementMethods()}if(!A.Opacity&&Ext.isIE){Ext.apply(r.opacity,{get:function(E){var D=E.style.filter,G,F;if(D.match){G=D.match(C);if(G){F=parseFloat(G[1]);if(!isNaN(F)){return F?F/100:0}}}return 1},set:function(E,G){var F=E.style,D=F.filter.replace(C,"").replace(h,"");F.zoom=1;if(typeof(G)==="number"&&G>=0&&G<1){G*=100;F.filter=D+(D.length?" ":"")+"alpha(opacity="+G+")"}else{F.filter=D}}})}if(!A.matchesSelector){var m=/^([a-z]+|\*)?(?:\.([a-z][a-z\-_0-9]*))?$/i,o=/\-/g,a,B=function(F,D){var E=new RegExp("(?:^|\\s+)"+D.replace(o,"\\-")+"(?:\\s+|$)");if(F&&F!=="*"){F=F.toUpperCase();return function(G){return G.tagName===F&&E.test(G.className)}}return function(G){return E.test(G.className)}},y=function(D){D=D.toUpperCase();return function(E){return E.tagName===D}},s={};v.matcherCache=s;v.is=function(L){if(!L){return true}var D=this.dom,J,F,I,H,G,E,K;if(D.nodeType!==1){return false}if(!(I=Ext.isFunction(L)?L:s[L])){if(!(F=L.match(m))){H=D.parentNode;if(!H){G=true;H=a||(a=b.createDocumentFragment());a.appendChild(D)}E=Ext.Array.indexOf(Ext.fly(H,"_is").query(L),D)!==-1;if(G){a.removeChild(D)}return E}K=F[1];J=F[2];s[L]=I=J?B(K,J):y(K)}return I(D)}}if(!p||!p.getComputedStyle){v.getStyle=function(M,H){var I=this,D=I.dom,O=typeof M!=="string",R=M,J=R,G=1,S=H,Q=I.styleHooks,N,F,L,K,T,P,E;if(O){L={};R=J[0];E=0;if(!(G=J.length)){return L}}if(!D||D.documentElement){return L||""}F=D.style;if(H){P=F}else{P=D.currentStyle;if(!P){S=true;P=F}}do{K=Q[R];if(!K){Q[R]=K={name:w.normalize(R)}}if(K.get){T=K.get(D,I,S,P)}else{N=K.name;T=P[N]}if(!O){return T}L[R]=T;R=J[++E]}while(E<G);return L}}if(Ext.isIE8){c=function(E,G,D,F){if(F[this.styleName]==="none"){return"0px"}return F[this.name]};d=["Top","Right","Bottom","Left"];z=d.length;while(z--){g=d[z];u="border"+g+"Width";r["border-"+g.toLowerCase()+"-width"]=r[u]={name:u,styleName:"border"+g+"Style",get:c}}var j="x-sync-repaint";v.syncRepaint=function(){this.addCls(j);this.getWidth();this.removeCls(j)}}if(Ext.isIE10m){Ext.override(w,{focus:function(E,D){var H=this,G;D=D||H.dom;if(Number(E)){Ext.defer(H.focus,E,H,[null,D])}else{Ext.GlobalEvents.fireEvent("beforefocus",D);if(D&&(D.tagName==="INPUT"||D.tagname==="TEXTAREA")){Ext.synchronouslyFocusing=document.activeElement}try{D.focus()}catch(F){G=F}if(Ext.synchronouslyFocusing&&document.activeElement!==D&&!G){D.focus()}Ext.synchronouslyFocusing=null}return H}})}Ext.apply(Ext,{enableGarbageCollector:true,isBorderBox:true,useShims:false,getDetachedBody:function(){var D=Ext.detachedBodyEl;if(!D){D=b.createElement("div");Ext.detachedBodyEl=D=new Ext.dom.Fly(D);D.isDetachedBody=true}return D},getElementById:function(E){var D=b.getElementById(E),F;if(!D&&(F=Ext.detachedBodyEl)){D=F.dom.querySelector(Ext.makeIdSelector(E))}return D},addBehaviors:function(E){if(!Ext.isReady){Ext.onInternalReady(function(){Ext.addBehaviors(E)})}else{var G={},D,F,H;for(F in E){if((D=F.split("@"))[1]){H=D[0];if(!G[H]){G[H]=Ext.fly(document).select(H,true)}G[H].on(D[1],E[F])}}G=null}}});if(Ext.isIE9m){Ext.getElementById=function(E){var D=b.getElementById(E),F;if(!D&&(F=Ext.detachedBodyEl)){D=F.dom.all[E]}return D};v.getById=function(E,F){var D=this.dom,G=null,I,H;if(D){H=(q&&b.getElementById(E))||D.all[E];if(H){if(F){G=H}else{I=Ext.cache[E];if(I){if(I.skipGarbageCollection||!Ext.isGarbage(I.dom)){G=I}else{I.destroy()}}G=G||new Ext.Element(H)}}}return G}}else{if(!b.querySelector){Ext.getDetachedBody=Ext.getBody;Ext.getElementById=function(D){return b.getElementById(D)};v.getById=function(E,F){var D=b.getElementById(E);return F?D:(D?Ext.get(D):null)}}}if(Ext.isIE&&!(Ext.isIE9p&&b.documentMode>=9)){v.getAttribute=function(F,D){var E=this.dom,G;if(D){G=typeof E[D+":"+F];if(G!=="undefined"&&G!=="unknown"){return E[D+":"+F]||null}return null}if(F==="for"){F="htmlFor"}return E[F]||null}}Ext.onInternalReady(function(){var D=/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,Q=[],I=v.setWidth,J=v.setHeight,N=v.setSize,O=/^\d+(?:\.\d*)?px$/i,H,F,P,M;if(A.FixedTableWidthBug){r.width={name:"width",set:function(S,V,T){var X=S.style,W=T._needsTableWidthFix,U=X.display;if(W){X.display="none"}X.width=V;if(W){S.scrollWidth;X.display=U}}};v.setWidth=function(U,Y){var X=this,S=X.dom,T=S.style,W=X._needsTableWidthFix,V=T.display;if(W&&!Y){T.display="none"}I.call(X,U,Y);if(W&&!Y){S.scrollWidth;T.display=V}return X};v.setSize=function(V,Z,T){var Y=this,S=Y.dom,U=S.style,X=Y._needsTableWidthFix,W=U.display;if(X&&!T){U.display="none"}N.call(Y,V,Z,T);if(X&&!T){S.scrollWidth;U.display=W}return Y}}if(Ext.isIE8){r.height={name:"height",set:function(S,V,T){var X=T.component,U,W;if(X&&X._syncFrameHeight&&T===X.el){W=X.frameBody.dom.style;if(O.test(V)){U=X.getFrameInfo();if(U){W.height=(parseInt(V,10)-U.height)+"px"}}else{if(!V||V==="auto"){W.height=""}}}S.style.height=V}};v.setHeight=function(V,S){var T=this.component,U,W;if(T&&T._syncFrameHeight&&this===T.el){W=T.frameBody.dom.style;if(!V||V==="auto"){W.height=""}else{U=T.getFrameInfo();if(U){W.height=(V-U.height)+"px"}}}return J.call(this,V,S)};v.setSize=function(V,W,T){var U=this.component,S,X;if(U&&U._syncFrameHeight&&this===U.el){X=U.frameBody.dom.style;if(!W||W==="auto"){X.height=""}else{S=U.getFrameInfo();if(S){X.height=(W-S.height)+"px"}}}return N.call(this,V,W,T)}}Ext.getDoc().on("selectstart",function(V,S){var U=w.selectableCls,T=w.unselectableCls,W=S&&S.tagName;W=W&&W.toLowerCase();if(W==="input"||W==="textarea"){return}while(S&&S.nodeType===1&&S!==b.documentElement){var X=Ext.fly(S);if(X.hasCls(U)){return}if(X.hasCls(T)){V.stopEvent();return}S=S.parentNode}});function G(U,W,T,V){var S=V[this.name]||"";return D.test(S)?"transparent":S}function L(T,U,S){return function(){T.selectionStart=U;T.selectionEnd=S}}function K(V){var T=A.DisplayChangeInputSelectionBug,U=A.DisplayChangeTextAreaSelectionBug,Y,W,S,X;if(T||U){Y=w.getActiveElement();W=Y&&Y.tagName;if((U&&W==="TEXTAREA")||(T&&W==="INPUT"&&Y.type==="text")){if(Ext.fly(V).isAncestor(Y)){S=Y.selectionStart;X=Y.selectionEnd;if(Ext.isNumber(S)&&Ext.isNumber(X)){return L(Y,S,X)}}}}return Ext.emptyFn}function E(S,U,Y,T){var W=T.marginRight,X,V;if(W!=="0px"){X=S.style;V=X.display;X.display="inline-block";W=(Y?T:S.ownerDocument.defaultView.getComputedStyle(S,null)).marginRight;X.display=V}return W}function R(S,V,Z,U){var X=U.marginRight,T,Y,W;if(X!=="0px"){T=S.style;Y=K(S);W=T.display;T.display="inline-block";X=(Z?U:S.ownerDocument.defaultView.getComputedStyle(S,"")).marginRight;T.display=W;Y()}return X}if(!A.RightMargin){r.marginRight=r["margin-right"]={name:"marginRight",get:(A.DisplayChangeInputSelectionBug||A.DisplayChangeTextAreaSelectionBug)?R:E}}if(!A.TransparentColor){H=["background-color","border-color","color","outline-color"];for(F=H.length;F--;){P=H[F];M=w.normalize(P);r[P]=r[M]={name:M,get:G}}}v.verticalStyleHooks90=f=Ext.Object.chain(r);v.verticalStyleHooks270=t=Ext.Object.chain(r);f.width=r.height||{name:"height"};f.height=r.width||{name:"width"};f["margin-top"]={name:"marginLeft"};f["margin-right"]={name:"marginTop"};f["margin-bottom"]={name:"marginRight"};f["margin-left"]={name:"marginBottom"};f["padding-top"]={name:"paddingLeft"};f["padding-right"]={name:"paddingTop"};f["padding-bottom"]={name:"paddingRight"};f["padding-left"]={name:"paddingBottom"};f["border-top"]={name:"borderLeft"};f["border-right"]={name:"borderTop"};f["border-bottom"]={name:"borderRight"};f["border-left"]={name:"borderBottom"};t.width=r.height||{name:"height"};t.height=r.width||{name:"width"};t["margin-top"]={name:"marginRight"};t["margin-right"]={name:"marginBottom"};t["margin-bottom"]={name:"marginLeft"};t["margin-left"]={name:"marginTop"};t["padding-top"]={name:"paddingRight"};t["padding-right"]={name:"paddingBottom"};t["padding-bottom"]={name:"paddingLeft"};t["padding-left"]={name:"paddingTop"};t["border-top"]={name:"borderRight"};t["border-right"]={name:"borderBottom"};t["border-bottom"]={name:"borderLeft"};t["border-left"]={name:"borderTop"};if(!Ext.scopeCss){Q.push("x-body")}if(A.Touch){Q.push("x-touch")}if(Ext.isIE&&Ext.isIE9m){Q.push("x-ie","x-ie9m");Q.push("x-ie8p");if(Ext.isIE8){Q.push("x-ie8")}else{Q.push("x-ie9","x-ie9p")}if(Ext.isIE8m){Q.push("x-ie8m")}}if(Ext.isIE10){Q.push("x-ie10")}if(Ext.isIE10p){Q.push("x-ie10p")}if(Ext.isIE11){Q.push("x-ie11")}if(Ext.isGecko){Q.push("x-gecko")}if(Ext.isOpera){Q.push("x-opera")}if(Ext.isOpera12m){Q.push("x-opera12m")}if(Ext.isWebKit){Q.push("x-webkit")}if(Ext.isSafari){Q.push("x-safari")}if(Ext.isChrome){Q.push("x-chrome")}if(Ext.isMac){Q.push("x-mac")}if(Ext.isLinux){Q.push("x-linux")}if(!A.CSS3BorderRadius){Q.push("x-nbr")}if(!A.CSS3LinearGradient){Q.push("x-nlg")}if(A.Touch){Q.push("x-touch")}Ext.getBody().addCls(Q)},null,{priority:1500})});(Ext.cmd.derive("Ext.GlobalEvents",Ext.mixin.Observable,{alternateClassName:"Ext.globalEvents",observableType:"global",singleton:true,resizeBuffer:100,idleEventMask:{mousemove:1,touchmove:1,pointermove:1,MSPointerMove:1,unload:1},constructor:function(){var a=this;a.callParent();Ext.onInternalReady(function(){a.attachListeners()})},attachListeners:function(){Ext.get(window).on("resize",this.fireResize,this,{buffer:this.resizeBuffer});Ext.getDoc().on("mousedown",this.fireMouseDown,this)},fireMouseDown:function(a){this.fireEvent("mousedown",a)},fireResize:function(){var b=this,d=Ext.Element,c=d.getViewportWidth(),a=d.getViewportHeight();if(b.curHeight!==a||b.curWidth!==c){b.curHeight=a;b.curWidth=c;b.fireEvent("resize",c,a)}}},1,0,0,0,0,0,[Ext,"GlobalEvents",Ext,"globalEvents"],function(a){Ext.on=function(){return a.addListener.apply(a,arguments)};Ext.un=function(){return a.removeListener.apply(a,arguments)}}));Ext.define("Ext.overrides.GlobalEvents",{override:"Ext.GlobalEvents",deprecated:{5:{methods:{addListener:function(j,b,c,d,h,g,m){var f,a;if(j==="ready"){a=b}else{if(typeof j!=="string"){for(f in j){if(f==="ready"){a=j[f]}}}}if(a){Ext.onReady(a)}this.callParent([j,b,c,d,h,g,m])}}}}});Ext.USE_NATIVE_JSON=false;Ext.JSON=(new (function(){var me=this,hasNative=window.JSON&&JSON.toString()==="[object JSON]",useHasOwn=!!{}.hasOwnProperty,pad=function(n){return n<10?"0"+n:n},doDecode=function(json){return eval("("+json+")")},doEncode=function(o,newline){if(o===null||o===undefined){return"null"}else{if(Ext.isDate(o)){return me.encodeDate(o)}else{if(Ext.isString(o)){if(Ext.isMSDate(o)){return me.encodeMSDate(o)}else{return me.encodeString(o)}}else{if(typeof o==="number"){return isFinite(o)?String(o):"null"}else{if(Ext.isBoolean(o)){return String(o)}else{if(o.toJSON){return o.toJSON()}else{if(Ext.isArray(o)){return encodeArray(o,newline)}else{if(Ext.isObject(o)){return encodeObject(o,newline)}else{if(typeof o==="function"){return"null"}}}}}}}}}return"undefined"},m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\","\v":"\\u000b"},charToReplace=/[\\\"\x00-\x1f\x7f-\uffff]/g,encodeString=function(s){return'"'+s.replace(charToReplace,function(a){var c=m[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"'},encodeMSDate=function(o){return'"'+o+'"'},encodeArrayPretty=function(o,newline){var len=o.length,cnewline=newline+"   ",sep=","+cnewline,a=["[",cnewline],i;for(i=0;i<len;i+=1){a.push(me.encodeValue(o[i],cnewline),sep)}a[a.length-1]=newline+"]";return a.join("")},encodeObjectPretty=function(o,newline){var cnewline=newline+"   ",sep=","+cnewline,a=["{",cnewline],i,val;for(i in o){val=o[i];if(!useHasOwn||o.hasOwnProperty(i)){if(typeof val==="function"||val===undefined){continue}a.push(me.encodeValue(i)+": "+me.encodeValue(val,cnewline),sep)}}a[a.length-1]=newline+"}";return a.join("")},encodeArray=function(o,newline){if(newline){return encodeArrayPretty(o,newline)}var a=["[",""],len=o.length,i;for(i=0;i<len;i+=1){a.push(me.encodeValue(o[i]),",")}a[a.length-1]="]";return a.join("")},encodeObject=function(o,newline){if(newline){return encodeObjectPretty(o,newline)}var a=["{",""],i,val;for(i in o){val=o[i];if(!useHasOwn||o.hasOwnProperty(i)){if(typeof val==="function"||val===undefined){continue}a.push(me.encodeValue(i),":",me.encodeValue(val),",")}}a[a.length-1]="}";return a.join("")};me.encodeString=encodeString;me.encodeValue=doEncode;me.encodeDate=function(o){return'"'+o.getFullYear()+"-"+pad(o.getMonth()+1)+"-"+pad(o.getDate())+"T"+pad(o.getHours())+":"+pad(o.getMinutes())+":"+pad(o.getSeconds())+'"'};me.encode=function(o){if(hasNative&&Ext.USE_NATIVE_JSON){return JSON.stringify(o)}return me.encodeValue(o)};me.decode=function(json,safe){try{if(hasNative&&Ext.USE_NATIVE_JSON){return JSON.parse(json)}return doDecode(json)}catch(e){if(safe){return null}Ext.raise({sourceClass:"Ext.JSON",sourceMethod:"decode",msg:"You're trying to decode an invalid JSON String: "+json})}};me.encodeMSDate=encodeMSDate;if(!Ext.util){Ext.util={}}Ext.util.JSON=me;Ext.encode=me.encode;Ext.decode=me.decode})());(Ext.cmd.derive("Ext.mixin.Inheritable",Ext.Mixin,{mixinConfig:{id:"inheritable"},getInherited:function(d){var m=this,b=(d&&m.inheritedStateInner)||m.inheritedState,g=m.getRefOwner(),f=m.isContainer,c,h,j,a;if(!b||b.invalid){c=m.getRefOwner();a=m.ownerLayout;if(g){j=a?a===g.layout:true}m.inheritedState=b=Ext.Object.chain(c?c.getInherited(j):Ext.rootInheritedState);if(f){m.inheritedStateInner=h=Ext.Object.chain(b)}m.initInheritedState(b,h);b=(f&&d)?m.inheritedStateInner:m.inheritedState}return b},getInheritedConfig:function(b,c){var a=this.inheritedState,d,f;if(!a||a.invalid){a=this.getInherited()}f=a[b];if(c&&a.hasOwnProperty(b)){d=f;delete a[b];f=a[b];a[b]=d}return f},resolveListenerScope:function(a,b){var f=this,g=(typeof b==="boolean"),d=Ext._namedScopes[a],c;if(!d){c=f.getInheritedConfig("defaultListenerScope",g?b:true)||a||f}else{if(d.isController){c=f.getInheritedConfig("controller",g?b:!d.isSelf)}else{if(d.isSelf){c=f.getInheritedConfig("defaultListenerScope",g&&b)||f}else{if(d.isThis){c=f}}}}return c||null},resolveSatelliteListenerScope:function(f,b){var a=this,d=Ext._namedScopes[b],c;if(!d){c=a.getInheritedConfig("defaultListenerScope")||b||a}else{if(d.isController){c=a.getInheritedConfig("controller")}else{if(d.isSelf){c=a.getInheritedConfig("defaultListenerScope")||f}else{if(d.isThis){c=f}}}}return c||null},lookupReferenceHolder:function(a){return this.getInheritedConfig("referenceHolder",a!==false)||null},getRefOwner:function(){var a=this;return a.ownerCt||a.parent||a.$initParent||a.ownerCmp||a.floatParent},invalidateInheritedState:function(){var a=this.inheritedState;if(a){a.invalid=true;delete this.inheritedState}},privates:{fixReference:function(){var a=this,b;if(a.getReference()){b=a.lookupReferenceHolder();if(b){b.attachReference(a)}}},onInheritedAdd:function(c,b){var a=this;if(a.inheritedState&&b){a.invalidateInheritedState()}if(a.getReference()){Ext.ComponentManager.markReferencesDirty()}},onInheritedRemove:function(c){var b=this,a;if(b.getReference()){a=b.lookupReferenceHolder();if(a){a.clearReference(b)}}if(b.inheritedState&&!c){b.invalidateInheritedState()}}}},0,0,0,0,0,0,[Ext.mixin,"Inheritable"],function(){Ext.rootInheritedState={}}));(Ext.cmd.derive("Ext.mixin.Bindable",Ext.Base,{mixinId:"bindable",config:{bind:{$value:null,lazy:true},controller:null,defaultListenerScope:false,publishes:{$value:null,lazy:true,merge:function(b,a){return this.mergeSets(b,a)}},reference:null,session:{$value:null,lazy:true},twoWayBindable:{$value:null,lazy:true,merge:function(b,a){return this.mergeSets(b,a)}},viewModel:{$value:null,lazy:true}},defaultBindProperty:null,validRefRe:/^[a-z_][a-z0-9_]*$/i,initInheritedState:function(d){var f=this,a=f.getReference(),b=f.getController(),c=f.getConfig("viewModel",true),h=f.getConfig("session",true),g=f.getDefaultListenerScope();if(b){d.controller=b}if(g){d.defaultListenerScope=f}else{if(b){d.defaultListenerScope=b}}if(c){if(!c.isViewModel){c=f}d.viewModel=c}if(h){if(!h.isSession){h=f}d.session=h}if(a){f.referenceKey=(d.referencePath||"")+a;f.viewModelKey=(d.viewModelPath||"")+a}},lookupController:function(a){return this.getInheritedConfig("controller",a)||null},lookupSession:function(a){var b=a?null:this.getSession();if(!b){b=this.getInheritedConfig("session",a);if(b&&!b.isSession){b=b.getInherited().session=b.getSession()}}return b||null},lookupViewModel:function(a){var b=a?null:this.getViewModel();if(!b){b=this.getInheritedConfig("viewModel",a);if(b&&!b.isViewModel){b=b.getInherited().viewModel=b.getViewModel()}}return b||null},publishState:function(a,p){var o=this,d=o.publishedState,h=o.getBind(),m=h&&a&&h[a],j=0,f,c,g,b;if(m&&!m.syncing&&!m.isReadOnly()){if(!(m.calls===0&&(p==null||p===o.getInitialConfig()[a]))){m.setValue(p)}}if(!(c=o.getPublishes())){return}if(!(g=o.lookupViewModel())){return}if(!(b=o.viewModelKey)){return}if(a&&d){if(!c[a]){return}if(!(p&&p.constructor===Object)&&!(p instanceof Array)){if(d[a]===p){return}}b+=".";b+=a}else{d=d||(o.publishedState={});for(f in c){++j;if(f===a){d[f]=p}else{d[f]=o[f]}}if(!j){return}p=d}g.set(b,p)},privates:{addBindableUpdater:function(f){var d=this,a=d.self.$config.configs,c=a[f],b;if(c&&!d.hasOwnProperty(b=c.names.update)){d[b]=c.bindableUpdater||(c.root.bindableUpdater=d.makeBindableUpdater(c))}},applyBind:function(j,f){if(!j){return j}var o=this,c=o.lookupViewModel(),m=o.getTwoWayBindable(),g=o._getBindTemplateScope,a,d,h;if(!f||typeof f==="string"){f={}}if(Ext.isString(j)){a=j;j={};j[o.defaultBindProperty]=a}for(d in j){h=j[d];a=f[d];if(a&&typeof a!=="string"){a.destroy();a=null}if(h){a=c.bind(h,o.onBindNotify,o);a._config=Ext.Config.get(d);a.getTemplateScope=g}f[d]=a;if(m&&m[d]&&!a.isReadOnly()){o.addBindableUpdater(d)}}return f},applyController:function(a){if(a){a=Ext.Factory.controller(a);a.setView(this)}return a},applyPublishes:function(a){if(this.lookupViewModel()){for(var b in a){this.addBindableUpdater(b)}}return a},applySession:function(a){if(!a){return null}if(!a.isSession){var c=this.lookupSession(true),b=(a===true)?{}:a;if(c){a=c.spawn(b)}else{a=new Ext.data.Session(b)}}return a},applyViewModel:function(d){var a=this,c,b;if(!d){return null}if(!d.isViewModel){c={parent:a.lookupViewModel(true)};c.session=a.getSession();if(!b&&!c.parent){c.session=a.lookupSession()}if(d){if(d.constructor===Object){Ext.apply(c,d)}else{if(typeof d==="string"){c.type=d}}}d=Ext.Factory.viewModel(c)}return d},_getBindTemplateScope:function(){return this.scope.resolveListenerScope()},destroyBindable:function(){var a=this,d=a.getConfig("viewModel",true),b=a.getConfig("session",true),c=a.getController();if(d&&d.isViewModel){d.destroy();a.setViewModel(null)}if(b&&b.isSession){if(b.getAutoDestroy()){b.destroy()}a.setSession(null)}if(c){a.setController(null);c.destroy()}},initBindable:function(){this.initBindable=Ext.emptyFn;this.getBind();this.getPublishes()},makeBindableUpdater:function(a){var b=a.names.update;return function(c,f){var g=this,d=g.self.prototype[b];if(d){d.call(g,c,f)}g.publishState(a.name,c)}},isSyncing:function(d){var b=this.getBind(),c=false,a;if(b){a=b[d];if(a){c=a.syncing>0}}return c},onBindNotify:function(c,b,a){a.syncing=(a.syncing+1)||1;this[a._config.names.set](c);--a.syncing},removeBindings:function(){var d=this,b,c,a;if(!d.destroying){b=d.getBind();if(b&&typeof b!=="string"){for(c in b){a=b[c];a.destroy();a._config=a.getTemplateScope=null}}}d.setBind(null)},updateSession:function(b){var a=this.getInherited();if(b){a.session=b}else{delete a.session}},updateViewModel:function(c){var a=this.getInherited(),b=this.getController();if(c){a.viewModel=c;c.setView(this);if(b){b.initViewModel(c)}}else{delete a.viewModel}}}},0,0,0,0,0,0,[Ext.mixin,"Bindable"],0));(Ext.cmd.derive("Ext.mixin.ComponentDelegation",Ext.Mixin,{mixinConfig:{id:"componentDelegation"},privates:{addDelegatedListener:function(j,o,a,b,g,f,h){var m=this,d,c,p;g=g||b.order;if(g){p=(b&&b.priority);if(!p){b=b?Ext.Object.chain(b):{};b.priority=m.$orderToPriority[g]}}d=m.$delegatedEvents||(m.$delegatedEvents={});c=d[j]||(d[j]=new Ext.util.Event(m,j));if(c.addListener(o,a,b,f,h)){m.$hasDelegatedListeners._incr_(j)}},clearDelegatedListeners:function(){var a=this,d=a.$delegatedEvents,c,f,b;if(d){for(c in d){f=d[c];b=f.listeners.length;f.clearListeners();a.$hasDelegatedListeners._decr_(c,b);delete d[c]}}},doFireDelegatedEvent:function(b,d){var h=this,c=true,a,f,g;if(h.$hasDelegatedListeners[b]){a=h.getRefOwner();while(a){f=a.$delegatedEvents;if(f){g=f[b];if(g){c=g.fireDelegated(h,d);if(c===false){break}}}a=a.getRefOwner()}}return c},removeDelegatedListener:function(b,f,d){var a=this,c=a.$delegatedEvents,g;if(c){g=c[b];if(g&&g.removeListener(f,d)){a.$hasDelegatedListeners._decr_(b);if(g.listeners.length===0){delete c[b]}}}}},onClassMixedIn:function(a){function b(){}a.prototype.HasListeners=a.HasListeners=b;b.prototype=a.hasListeners=new Ext.mixin.ComponentDelegation.HasDelegatedListeners()}},0,0,0,0,0,0,[Ext.mixin,"ComponentDelegation"],function(b){function a(){}b.HasDelegatedListeners=a;a.prototype=b.prototype.$hasDelegatedListeners=new Ext.mixin.Observable.HasListeners()}));(Ext.cmd.derive("Ext.Widget",Ext.Evented,{isWidget:true,element:{reference:"element"},observableType:"component",cachedConfig:{style:null},config:{userCls:null},eventedConfig:{width:null,height:null},template:[],constructor:function(c){var a=this,b;a.initId(c);a.initElement();a.mixins.observable.constructor.call(a,c);Ext.ComponentManager.register(a);b=a.getController();if(b){b.init(a)}},afterCachedConfig:function(){var a=this,b=a.self.prototype,c=a.referenceList,g=a.renderElement,m,h,j,o,f,d;b.renderTemplate=m=document.createDocumentFragment();m.appendChild(g.clone(true,true));d=m.querySelectorAll("[id]");for(j=0,o=d.length;j<o;j++){h=d[j];h.removeAttribute("id")}for(j=0,o=c.length;j<o;j++){f=c[j];a[f].dom.removeAttribute("reference")}},addCls:function(a){this.el.addCls(a)},applyWidth:function(a){return this.filterLengthValue(a)},applyHeight:function(a){return this.filterLengthValue(a)},clearListeners:function(){var a=this;a.mixins.observable.clearListeners.call(a);a.mixins.componentDelegation.clearDelegatedListeners.call(a)},destroy:function(){var b=this,d=b.referenceList,f,a,c;for(f=0,a=d.length;f<a;f++){c=d[f];if(b.hasOwnProperty(c)){b[c].destroy();b[c]=null}}b.destroyBindable();Ext.Evented.prototype.destroy.call(this);Ext.ComponentManager.unregister(b)},doFireEvent:function(d,a,c){var b=this,f=b.mixins.observable.doFireEvent.call(b,d,a,c);if(f!==false){f=b.mixins.componentDelegation.doFireDelegatedEvent.call(b,d,a)}return f},getElementConfig:function(){var b=this,a=b.element;if(!("children" in a)){a=Ext.apply({children:b.getTemplate()},a)}return a},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getTemplate:function(){return this.template},initElement:function(){var m=this,p=m.self.prototype,o=m.getId(),r=m.referenceList=m.referenceList=[],a=true,g,c,f,q,d,j,h,b;if(p.hasOwnProperty("renderTemplate")){g=m.renderTemplate.cloneNode(true);c=g.firstChild}else{a=false;g=document.createDocumentFragment();c=Ext.Element.create(m.processElementConfig.call(p),true);g.appendChild(c)}q=g.querySelectorAll("[reference]");for(d=0,j=q.length;d<j;d++){h=q[d];b=h.getAttribute("reference");if(a){h.removeAttribute("reference")}if(b==="element"){h.id=o;f=m.el=m.addElementReference(b,h);f.dom.setAttribute("data-componentid",o)}else{m.addElementReferenceOnDemand(b,h)}r.push(b)}if(c===f.dom){m.renderElement=f}else{m.addElementReferenceOnDemand("renderElement",c)}},is:function(a){return Ext.ComponentQuery.is(this,a)},isXType:function(b,a){return a?(Ext.Array.indexOf(this.xtypes,b)!==-1):!!this.xtypesMap[b]},removeCls:function(a){this.el.removeCls(a)},toggleCls:function(a,b){this.element.toggleCls(a,b)},resolveListenerScope:function(b,a){return this.mixins.inheritable.resolveListenerScope.call(this,b,a)},setSize:function(b,a){if(b!==undefined){this.setWidth(b)}if(a!==undefined){this.setHeight(a)}},applyStyle:function(b,a){if(a&&b===a&&Ext.isObject(a)){b=Ext.apply({},b)}return b},updateStyle:function(a){this.element.applyStyles(a)},updateWidth:function(a){this.element.setWidth(a)},updateHeight:function(a){this.element.setHeight(a)},onFocusEnter:Ext.emptyFn,onFocusLeave:Ext.emptyFn,isAncestor:function(){return false},privates:{addElementReferenceOnDemand:function(a,b){if(this._elementListeners[a]){this.addElementReference(a,b)}else{Ext.Object.defineProperty(this,a,{get:function(){delete this[a];return this.addElementReference(a,b)},configurable:true})}},addElementReference:function(c,f){var g=this,b=g[c]=Ext.get(f),d=g._elementListeners[c],a,h;b.skipGarbageCollection=true;b.component=g;if(d){d=Ext.clone(d);for(a in d){h=d[a];if(typeof h==="object"){h.scope=g}}d.scope=g;b.on(d)}return b},detachFromBody:function(){Ext.getDetachedBody().appendChild(this.element);this.isDetached=true},doAddListener:function(f,b,c,d,h,g,j){var a=this,m;if(d&&"element" in d){a[d.element].doAddListener(f,b,c||a,d,h)}if(d){m=d.delegate;if(m){a.mixins.componentDelegation.addDelegatedListener.call(a,f,b,c,d,h,g,j);return}}Ext.Evented.prototype.doAddListener.call(this,f,b,c,d,h,g,j)},doRemoveListener:function(c,a,d){var b=this;b.mixins.observable.doRemoveListener.call(b,c,a,d);b.mixins.componentDelegation.removeDelegatedListener.call(b,c,a,d)},filterLengthValue:function(a){if(a==="auto"||(!a&&a!==0)){return null}return a},getFocusEl:function(){return this.element},initElementListeners:function(b){var a=this,g=a.self.superclass,f=g._elementListeners,h=b.reference,c=b.children,m,p,d,o,j;if(a.hasOwnProperty("_elementListeners")){m=a._elementListeners}else{m=a._elementListeners=(f?Ext.Object.chain(f):{})}if(h){p=b.listeners;if(p){if(f){d=f[h];if(d){p=Ext.Object.chain(d);Ext.apply(p,b.listeners)}}m[h]=p;b.listeners=null}}if(c){for(j=0,o=c.length;j<o;j++){a.initElementListeners(c[j])}}},initId:function(d){var a=this,c=a.config,b=(d&&d.id)||(c&&c.id);if(b){a.setId(b);a.id=b}else{a.getId()}},processElementConfig:function(){var b=this,a=b.self.superclass,c;if(b.hasOwnProperty("_elementConfig")){c=b._elementConfig}else{c=b._elementConfig=b.getElementConfig();if(a.isWidget){b.processElementConfig.call(a)}b.initElementListeners(c)}return c},reattachToBody:function(){this.isDetached=false},updateUserCls:function(b,a){this.element.replaceCls(a,b)}}},1,["widget"],["widget"],{widget:true},["widget.widget"],[[Ext.mixin.Inheritable.prototype.mixinId||Ext.mixin.Inheritable.$className,Ext.mixin.Inheritable],[Ext.mixin.Bindable.prototype.mixinId||Ext.mixin.Bindable.$className,Ext.mixin.Bindable],[Ext.mixin.ComponentDelegation.prototype.mixinId||Ext.mixin.ComponentDelegation.$className,Ext.mixin.ComponentDelegation]],[Ext,"Widget"],function(b){var a=b.prototype;(a.$elementEventOptions=Ext.Object.chain(Ext.Element.prototype.$eventOptions)).element=1;(a.$eventOptions=Ext.Object.chain(a.$eventOptions)).delegate=1}));Ext.define("Ext.overrides.Widget",{override:"Ext.Widget",$configStrict:false,isComponent:true,liquidLayout:true,rendered:true,rendering:true,config:{renderTo:null},cachedConfig:{baseCls:"x-widget"},constructor:function(b){var c=this,a;(arguments.callee.$previous||Ext.Evented.prototype.constructor).call(this,b);c.getComponentLayout();a=c.getRenderTo();if(a){c.render(a)}},addClsWithUI:function(a){this.el.addCls(a)},afterComponentLayout:Ext.emptyFn,updateLayout:function(){var a=this.getRefOwner();if(a){a.updateLayout()}},destroy:function(){var b=this,a=b.ownerCt;if(a&&a.remove){a.remove(b,false)}(arguments.callee.$previous||Ext.Evented.prototype.destroy).call(this)},finishRender:function(){this.rendering=false;this.initBindable()},getAnimationProps:function(){return{}},getComponentLayout:function(){var b=this,a=b.componentLayout;if(!a){a=b.componentLayout=new Ext.layout.component.Auto();a.setOwner(b)}return a},getEl:function(){return this.element},getTdCls:function(){return"x-"+this.getTdType()+"-"+(this.ui||"default")+"-cell"},getTdType:function(){return this.xtype},getItemId:function(){return this.itemId||this.id},getSizeModel:function(){return Ext.Component.prototype.getSizeModel.apply(this,arguments)},onAdded:function(d,b,c){var a=this,f=a.inheritedState;a.ownerCt=d;a.onInheritedAdd(a,c)},onRemoved:function(b){var a=this;if(!b){a.removeBindings()}a.onInheritedRemove(b);a.ownerCt=a.ownerLayout=null},parseBox:function(a){return Ext.Element.parseBox(a)},removeClsWithUI:function(a){this.el.removeCls(a)},render:function(c,b){var g=this,d=g.element,f=Ext.Component.prototype,a;if(!g.ownerCt||g.floating){if(Ext.scopeCss){d.addCls(f.rootCls)}d.addCls(f.borderBoxCls)}if(b){a=c.childNodes[b];if(a){Ext.fly(c).insertBefore(d,a);return}}Ext.fly(c).appendChild(d)},setPosition:function(a,b){this.el.setLocalXY(a,b)},up:function(){return Ext.Component.prototype.up.apply(this,arguments)},isAncestor:function(){return Ext.Component.prototype.isAncestor.apply(this,arguments)},onFocusEnter:function(){return Ext.Component.prototype.onFocusEnter.apply(this,arguments)},onFocusLeave:function(){return Ext.Component.prototype.onFocusLeave.apply(this,arguments)},isLayoutChild:function(b){var a=this.ownerCt;return a?(a===b||a.isLayoutChild(b)):false}},function(b){var a=b.prototype;if(Ext.isIE9m){a.addElementReferenceOnDemand=a.addElementReference}});(Ext.cmd.derive("Ext.ProgressBase",Ext.Base,{mixinId:"progressbase",config:{value:0,textTpl:null},applyTextTpl:function(a){if(!a.isTemplate){a=new Ext.XTemplate(a)}return a},applyValue:function(a){return a||0}},0,0,0,0,0,0,[Ext,"ProgressBase"],0));(Ext.cmd.derive("Ext.util.Format",Ext.Base,function(){var a;return{singleton:true,defaultDateFormat:"m/d/Y",thousandSeparator:",",decimalSeparator:".",currencyPrecision:2,currencySign:"$",percentSign:"%",currencyAtEnd:false,stripTagsRe:/<\/?[^>]+>/gi,stripScriptsRe:/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,nl2brRe:/\r?\n/g,hashRe:/#+$/,allHashes:/^#+$/,formatPattern:/[\d,\.#]+/,formatCleanRe:/[^\d\.#]/g,I18NFormatCleanRe:null,formatFns:{},constructor:function(){a=this},undef:function(b){return b!==undefined?b:""},defaultValue:function(c,b){return c!==undefined&&c!==""?c:b},substr:"ab".substr(-1)!="b"?function(c,f,b){var d=String(c);return(f<0)?d.substr(Math.max(d.length+f,0),b):d.substr(f,b)}:function(c,d,b){return String(c).substr(d,b)},lowercase:function(b){return String(b).toLowerCase()},uppercase:function(b){return String(b).toUpperCase()},usMoney:function(b){return a.currency(b,"$",2)},currency:function(f,h,d,c){var b="",j=",0",g=0;f=f-0;if(f<0){f=-f;b="-"}d=Ext.isDefined(d)?d:a.currencyPrecision;j+=(d>0?".":"");for(;g<d;g++){j+="0"}f=a.number(f,j);if((c||a.currencyAtEnd)===true){return Ext.String.format("{0}{1}{2}",b,f,h||a.currencySign)}else{return Ext.String.format("{0}{1}{2}",b,h||a.currencySign,f)}},date:function(b,c){if(!b){return""}if(!Ext.isDate(b)){b=new Date(Date.parse(b))}return Ext.Date.dateFormat(b,c||Ext.Date.defaultFormat)},dateRenderer:function(b){return function(c){return a.date(c,b)}},hex:function(d,c){var b=parseInt(d||0,10).toString(16);if(c){if(c<0){c=-c;if(b.length>c){b=b.substring(b.length-c)}}while(b.length<c){b="0"+b}}return b},or:function(c,b){return c||b},pick:function(d,c,f){if(Ext.isNumber(d)){var b=arguments[d+1];if(b){return b}}return d?f:c},stripTags:function(b){return !b?b:String(b).replace(a.stripTagsRe,"")},stripScripts:function(b){return !b?b:String(b).replace(a.stripScriptsRe,"")},fileSize:(function(){var b=1024,c=1048576,d=1073741824;return function(g){var f;if(g<b){if(g===1){f="1 byte"}else{f=g+" bytes"}}else{if(g<c){f=(Math.round(((g*10)/b))/10)+" KB"}else{if(g<d){f=(Math.round(((g*10)/c))/10)+" MB"}else{f=(Math.round(((g*10)/d))/10)+" GB"}}}return f}})(),math:(function(){var b={};return function(d,c){if(!b[c]){b[c]=Ext.functionFactory("v","return v "+c+";")}return b[c](d)}}()),round:function(d,c){var b=Number(d);if(typeof c==="number"){c=Math.pow(10,c);b=Math.round(d*c)/c}else{if(c===undefined){b=Math.round(b)}}return b},number:function(r,d){if(!d){return r}if(isNaN(r)){return""}var c=a.formatFns[d];if(!c){var h=d,q=a.thousandSeparator,j=a.decimalSeparator,f=0,b="",t,m,p,o,s,g;if(d.substr(d.length-2)==="/i"){if(!a.I18NFormatCleanRe||a.lastDecimalSeparator!==j){a.I18NFormatCleanRe=new RegExp("[^\\d\\"+j+"#]","g");a.lastDecimalSeparator=j}d=d.substr(0,d.length-2);t=d.indexOf(q)!==-1;m=d.replace(a.I18NFormatCleanRe,"").split(j)}else{t=d.indexOf(",")!==-1;m=d.replace(a.formatCleanRe,"").split(".")}p=d.replace(a.formatPattern,"");if(m.length>2){}else{if(m.length===2){f=m[1].length;o=m[1].match(a.hashRe);if(o){g=o[0].length;b='trailingZeroes=new RegExp(Ext.String.escapeRegex(utilFormat.decimalSeparator) + "*0{0,'+g+'}$")'}}}s=["var utilFormat=Ext.util.Format,extNumber=Ext.Number,neg,absVal,fnum,parts"+(t?",thousandSeparator,thousands=[],j,n,i":"")+(p?',formatString="'+d+'",formatPattern=/[\\d,\\.#]+/':"")+',trailingZeroes;return function(v){if(typeof v!=="number"&&isNaN(v=extNumber.from(v,NaN)))return"";neg=v<0;',"absVal=Math.abs(v);","fnum=Ext.Number.toFixed(absVal, "+f+");",b,";"];if(t){if(f){s[s.length]='parts=fnum.split(".");';s[s.length]="fnum=parts[0];"}s[s.length]="if(absVal>=1000) {";s[s.length]="thousandSeparator=utilFormat.thousandSeparator;thousands.length=0;j=fnum.length;n=fnum.length%3||3;for(i=0;i<j;i+=n){if(i!==0){n=3;}thousands[thousands.length]=fnum.substr(i,n);}fnum=thousands.join(thousandSeparator);}";if(f){s[s.length]="fnum += utilFormat.decimalSeparator+parts[1];"}}else{if(f){s[s.length]='if(utilFormat.decimalSeparator!=="."){parts=fnum.split(".");fnum=parts[0]+utilFormat.decimalSeparator+parts[1];}'}}s[s.length]='if(neg&&fnum!=="'+(f?"0."+Ext.String.repeat("0",f):"0")+'") { fnum="-"+fnum; }';if(o){s[s.length]='fnum=fnum.replace(trailingZeroes,"");'}s[s.length]="return ";if(p){s[s.length]="formatString.replace(formatPattern, fnum);"}else{s[s.length]="fnum;"}s[s.length]="};";c=a.formatFns[h]=Ext.functionFactory("Ext",s.join(""))(Ext)}return c(r)},numberRenderer:function(b){return function(c){return a.number(c,b)}},percent:function(c,b){return a.number(c*100,b||"0")+a.percentSign},attributes:function(c){if(typeof c==="object"){var b=[],d;for(d in c){if(c.hasOwnProperty(d)){b.push(d,'="',d==="style"?Ext.DomHelper.generateStyles(c[d],null,true):Ext.htmlEncode(c[d]),'" ')}}c=b.join("")}return c||""},plural:function(b,c,d){return b+" "+(b===1?c:(d?d:c+"s"))},nl2br:function(b){return Ext.isEmpty(b)?"":b.replace(a.nl2brRe,"<br/>")},capitalize:Ext.String.capitalize,uncapitalize:Ext.String.uncapitalize,ellipsis:Ext.String.ellipsis,escape:Ext.String.escape,escapeRegex:Ext.String.escapeRegex,htmlDecode:Ext.String.htmlDecode,htmlEncode:Ext.String.htmlEncode,leftPad:Ext.String.leftPad,toggle:Ext.String.toggle,trim:Ext.String.trim,parseBox:function(c){c=c||0;if(typeof c==="number"){return{top:c,right:c,bottom:c,left:c}}var d=c.split(" "),b=d.length;if(b===1){d[1]=d[2]=d[3]=d[0]}else{if(b===2){d[2]=d[0];d[3]=d[1]}else{if(b===3){d[3]=d[1]}}}return{top:parseInt(d[0],10)||0,right:parseInt(d[1],10)||0,bottom:parseInt(d[2],10)||0,left:parseInt(d[3],10)||0}}}},1,0,0,0,0,0,[Ext.util,"Format"],0));(Ext.cmd.derive("Ext.Template",Ext.Base,{inheritableStatics:{from:function(b,a){b=Ext.getDom(b);return new this(b.value||b.innerHTML,a||"")}},useEval:Ext.isGecko,constructor:function(d){var g=this,b=arguments,a=[],c,f=b.length,h;g.initialConfig={};if(f===1&&Ext.isArray(d)){b=d;f=b.length}if(f>1){for(c=0;c<f;c++){h=b[c];if(typeof h==="object"){Ext.apply(g.initialConfig,h);Ext.apply(g,h)}else{a.push(h)}}}else{a.push(d)}g.html=a.join("")},isTemplate:true,disableFormats:false,tokenRe:/\{(?:(?:(\d+)|([a-z_][\w\-]*))(?::([a-z_\.]+)(?:\(([^\)]*?)?\))?)?)\}/gi,apply:function(a){var b=this;if(b.compiled){if(!b.fn){b.compile()}return b.fn(a).join("")}return b.evaluate(a)},evaluate:function(b){var a=this,d=!a.disableFormats,g=Ext.util.Format,c=a;function f(m,j,h,o,p){if(h==null||h===""){h=j}if(o&&d){if(p){p=[b[h]].concat(Ext.functionFactory("return ["+p+"];")())}else{p=[b[h]]}if(o.substr(0,5)==="this."){return c[o.substr(5)].apply(c,p)}else{if(g[o]){return g[o].apply(g,p)}else{return m}}}else{return b[h]!==undefined?b[h]:""}}return a.html.replace(a.tokenRe,f)},applyOut:function(b,c){var a=this;if(a.compiled){if(!a.fn){a.compile()}c.push.apply(c,a.fn(b))}else{c.push(a.apply(b))}return c},applyTemplate:function(){return this.apply.apply(this,arguments)},set:function(b,a){var c=this;c.html=b;c.compiled=!!a;c.fn=null;return c},compileARe:/\\/g,compileBRe:/(\r\n|\n)/g,compileCRe:/'/g,compile:function(){var b=this,a;a=b.html.replace(b.compileARe,"\\\\").replace(b.compileBRe,"\\n").replace(b.compileCRe,"\\'").replace(b.tokenRe,b.regexReplaceFn.bind(b));a=(this.disableFormats!==true?"var fm=Ext.util.Format;":"")+(b.useEval?"$=":"return")+" function(v){return ['"+a+"'];};";b.fn=b.useEval?b.evalCompiled(a):(new Function("Ext",a))(Ext);b.compiled=true;return b},evalCompiled:function($){eval($);return $},regexReplaceFn:function(a,f,d,b,c){if(f==null||f===""){f='"'+d+'"'}else{if(this.stringFormat){f=parseInt(f)+1}}if(b&&this.disableFormats!==true){c=c?","+c:"";if(b.substr(0,5)==="this."){b=b+"("}else{if(Ext.util.Format[b]){b="fm."+b+"("}else{return a}}return"',"+b+"v["+f+"]"+c+"),'"}else{return"',v["+f+"] == undefined ? '' : v["+f+"],'"}},insertFirst:function(c,b,a){return this.doInsert("afterBegin",c,b,a)},insertBefore:function(c,b,a){return this.doInsert("beforeBegin",c,b,a)},insertAfter:function(c,b,a){return this.doInsert("afterEnd",c,b,a)},append:function(c,b,a){return this.doInsert("beforeEnd",c,b,a)},doInsert:function(d,a,c,b){var f=Ext.DomHelper.insertHtml(d,Ext.getDom(a),this.apply(c));return b?Ext.get(f):f},overwrite:function(a,c,b){var d=Ext.DomHelper.overwrite(Ext.getDom(a),this.apply(c));return b?Ext.get(d):d}},1,0,0,0,0,0,[Ext,"Template"],function(a){var f=/\{\d+\}/,c=function(g){if(f.test(g)){g=new a(g,d);return function(){return g.apply(arguments)}}else{return function(){return g}}},d={useFormat:false,compiled:true,stringFormat:true},b={};Ext.String.format=Ext.util.Format.format=function(h){var g=b[h]||(b[h]=c(h));return g.apply(this,arguments)};Ext.String.formatEncode=function(){return Ext.String.htmlEncode(Ext.String.format.apply(this,arguments))}}));(Ext.cmd.derive("Ext.util.XTemplateParser",Ext.Base,{constructor:function(a){Ext.apply(this,a)},doTpl:Ext.emptyFn,parse:function(v){var r=this,w=v.length,A={elseif:"elif"},y=r.topRe,c=r.actionsRe,f,d,o,z,h,p,j,q,B,b,g,a,u;r.level=0;r.stack=d=[];for(f=0;f<w;f=b){y.lastIndex=f;z=y.exec(v);if(!z){r.doText(v.substring(f,w));break}B=z.index;b=y.lastIndex;if(f<B){o=v.substring(f,B);if(!(u&&Ext.String.trim(o)==="")){r.doText(o)}}u=false;if(z[1]){b=v.indexOf("%}",B+2);r.doEval(v.substring(B+2,b));b+=2}else{if(z[2]){b=v.indexOf("]}",B+2);r.doExpr(v.substring(B+2,b));b+=2}else{if(z[3]){r.doTag(z[3])}else{if(z[4]){g=null;while((q=c.exec(z[4]))!==null){o=q[2]||q[3];if(o){o=Ext.String.htmlDecode(o);h=q[1];h=A[h]||h;g=g||{};p=g[h];if(typeof p=="string"){g[h]=[p,o]}else{if(p){g[h].push(o)}else{g[h]=o}}}}if(!g){if(r.elseRe.test(z[4])){r.doElse()}else{if(r.defaultRe.test(z[4])){r.doDefault()}else{r.doTpl();d.push({type:"tpl"})}}}else{if(g["if"]){r.doIf(g["if"],g);d.push({type:"if"})}else{if(g["switch"]){r.doSwitch(g["switch"],g);d.push({type:"switch"});u=true}else{if(g["case"]){r.doCase(g["case"],g)}else{if(g.elif){r.doElseIf(g.elif,g)}else{if(g["for"]){++r.level;if(a=r.propRe.exec(z[4])){g.propName=a[1]||a[2]}r.doFor(g["for"],g);d.push({type:"for",actions:g})}else{if(g.foreach){++r.level;if(a=r.propRe.exec(z[4])){g.propName=a[1]||a[2]}r.doForEach(g.foreach,g);d.push({type:"foreach",actions:g})}else{if(g.exec){r.doExec(g.exec,g);d.push({type:"exec",actions:g})}}}}}}}}}else{if(z[0].length===5){d.push({type:"tpl"})}else{j=d.pop();r.doEnd(j.type,j.actions);if(j.type=="for"||j.type=="foreach"){--r.level}}}}}}}},topRe:/(?:(\{\%)|(\{\[)|\{([^{}]+)\})|(?:<tpl([^>]*)\>)|(?:<\/tpl>)/g,actionsRe:/\s*(elif|elseif|if|for|foreach|exec|switch|case|eval|between)\s*\=\s*(?:(?:"([^"]*)")|(?:'([^']*)'))\s*/g,propRe:/prop=(?:(?:"([^"]*)")|(?:'([^']*)'))/,defaultRe:/^\s*default\s*$/,elseRe:/^\s*else\s*$/},1,0,0,0,0,0,[Ext.util,"XTemplateParser"],0));(Ext.cmd.derive("Ext.util.XTemplateCompiler",Ext.util.XTemplateParser,{useEval:Ext.isGecko,useIndex:Ext.isIE8m,useFormat:true,propNameRe:/^[\w\d\$]*$/,compile:function(b){var a=this,c=a.generate(b);return a.useEval?a.evalTpl(c):(new Function("Ext",c))(Ext)},generate:function(c){var b=this,d="var fm=Ext.util.Format,ts=Object.prototype.toString;",a;b.maxLevel=0;b.body=["var c0=values, a0="+b.createArrayTest(0)+", p0=parent, n0=xcount, i0=xindex, k0, v;\n"];if(b.definitions){if(typeof b.definitions==="string"){b.definitions=[b.definitions,d]}else{b.definitions.push(d)}}else{b.definitions=[d]}b.switches=[];b.parse(c);b.definitions.push((b.useEval?"$=":"return")+" function ("+b.fnArgs+") {",b.body.join(""),"}");a=b.definitions.join("\n");b.definitions.length=b.body.length=b.switches.length=0;delete b.definitions;delete b.body;delete b.switches;return a},doText:function(a){var c=this,b=c.body;a=a.replace(c.aposRe,"\\'").replace(c.newLineRe,"\\n");if(c.useIndex){b.push("out[out.length]='",a,"'\n")}else{b.push("out.push('",a,"')\n")}},doExpr:function(b){var a=this.body;a.push("if ((v="+b+") != null) out");if(this.useIndex){a.push("[out.length]=v+''\n")}else{a.push(".push(v+'')\n")}},doTag:function(a){var b=this.parseTag(a);if(b){this.doExpr(b)}else{this.doText("{"+a+"}")}},doElse:function(){this.body.push("} else {\n")},doEval:function(a){this.body.push(a,"\n")},doIf:function(c,a){var b=this;if(c==="."){b.body.push("if (values) {\n")}else{if(b.propNameRe.test(c)){b.body.push("if (",b.parseTag(c),") {\n")}else{b.body.push("if (",b.addFn(c),b.callFn,") {\n")}}if(a.exec){b.doExec(a.exec)}},doElseIf:function(c,a){var b=this;if(c==="."){b.body.push("else if (values) {\n")}else{if(b.propNameRe.test(c)){b.body.push("} else if (",b.parseTag(c),") {\n")}else{b.body.push("} else if (",b.addFn(c),b.callFn,") {\n")}}if(a.exec){b.doExec(a.exec)}},doSwitch:function(a){var c=this,b;if(a==="."||a==="#"){b=a==="."?"values":"xindex";c.body.push("switch (",b,") {\n")}else{if(c.propNameRe.test(a)){c.body.push("switch (",c.parseTag(a),") {\n")}else{c.body.push("switch (",c.addFn(a),c.callFn,") {\n")}}c.switches.push(0)},doCase:function(g){var f=this,d=Ext.isArray(g)?g:[g],a=f.switches.length-1,b,c;if(f.switches[a]){f.body.push("break;\n")}else{f.switches[a]++}for(c=0,a=d.length;c<a;++c){b=f.intRe.exec(d[c]);d[c]=b?b[1]:("'"+d[c].replace(f.aposRe,"\\'")+"'")}f.body.push("case ",d.join(": case "),":\n")},doDefault:function(){var a=this,b=a.switches.length-1;if(a.switches[b]){a.body.push("break;\n")}else{a.switches[b]++}a.body.push("default:\n")},doEnd:function(d,b){var a=this,c=a.level-1;if(d=="for"||d=="foreach"){if(b.exec){a.doExec(b.exec)}a.body.push("}\n");a.body.push("parent=p",c,";values=r",c+1,";xcount=n"+c+";xindex=i",c,"+1;xkey=k",c,";\n")}else{if(d=="if"||d=="switch"){a.body.push("}\n")}}},doFor:function(f,h){var d=this,c,b=d.level,a=b-1,g;if(f==="."){c="values"}else{if(d.propNameRe.test(f)){c=d.parseTag(f)}else{c=d.addFn(f)+d.callFn}}if(d.maxLevel<b){d.maxLevel=b;d.body.push("var ")}if(f=="."){g="c"+b}else{g="a"+a+"?c"+a+"[i"+a+"]:c"+a}d.body.push("i",b,"=0,n",b,"=0,c",b,"=",c,",a",b,"=",d.createArrayTest(b),",r",b,"=values,p",b,",k",b,";\n","p",b,"=parent=",g,"\n","if (c",b,"){if(a",b,"){n",b,"=c",b,".length;}else if (c",b,".isMixedCollection){c",b,"=c",b,".items;n",b,"=c",b,".length;}else if(c",b,".isStore){c",b,"=c",b,".data.items;n",b,"=c",b,".length;}else{c",b,"=[c",b,"];n",b,"=1;}}\n","for (xcount=n",b,";i",b,"<n"+b+";++i",b,"){\n","values=c",b,"[i",b,"]");if(h.propName){d.body.push(".",h.propName)}d.body.push("\n","xindex=i",b,"+1\n");if(h.between){d.body.push('if(xindex>1){ out.push("',h.between,'"); } \n')}},doForEach:function(f,h){var d=this,c,b=d.level,a=b-1,g;if(f==="."){c="values"}else{if(d.propNameRe.test(f)){c=d.parseTag(f)}else{c=d.addFn(f)+d.callFn}}if(d.maxLevel<b){d.maxLevel=b;d.body.push("var ")}if(f=="."){g="c"+b}else{g="a"+a+"?c"+a+"[i"+a+"]:c"+a}d.body.push("i",b,"=-1,n",b,"=0,c",b,"=",c,",a",b,"=",d.createArrayTest(b),",r",b,"=values,p",b,",k",b,";\n","p",b,"=parent=",g,"\n","for(k",b," in c",b,"){\n","xindex=++i",b,"+1;\n","xkey=k",b,";\n","values=c",b,"[k",b,"];");if(h.propName){d.body.push(".",h.propName)}if(h.between){d.body.push('if(xindex>1){ out.push("',h.between,'"); } \n')}},createArrayTest:("isArray" in Array)?function(a){return"Array.isArray(c"+a+")"}:function(a){return"ts.call(c"+a+')==="[object Array]"'},doExec:function(a,b){var f=this,c="f"+f.definitions.length,d=f.guards[f.strict?0:1];f.definitions.push("function "+c+"("+f.fnArgs+") {",d.doTry," var $v = values; with($v) {","  "+a," }",d.doCatch,"}");f.body.push(c+f.callFn+"\n")},guards:[{doTry:"",doCatch:""},{doTry:"try { ",doCatch:" } catch(e) {\n}"}],addFn:function(c){var b=this,d="f"+b.definitions.length,a=b.guards[b.strict?0:1];if(c==="."){b.definitions.push("function "+d+"("+b.fnArgs+") {"," return values","}")}else{if(c===".."){b.definitions.push("function "+d+"("+b.fnArgs+") {"," return parent","}")}else{b.definitions.push("function "+d+"("+b.fnArgs+") {",a.doTry," var $v = values; with($v) {","  return("+c+")"," }",a.doCatch,"}")}}return d},parseTag:function(a){var g=this,j=g.tagRe.exec(a),d,h,c,f,b;if(!j){return null}d=j[1];h=j[2];c=j[3];f=j[4];if(d=="."){if(!g.validTypes){g.definitions.push("var validTypes={string:1,number:1,boolean:1};");g.validTypes=true}b='validTypes[typeof values] || ts.call(values) === "[object Date]" ? values : ""'}else{if(d=="#"){b="xindex"}else{if(d=="$"){b="xkey"}else{if(d.substr(0,7)=="parent."){b=d}else{if(isNaN(d)&&d.indexOf("-")==-1&&d.indexOf(".")!=-1){b="values."+d}else{b="values['"+d+"']"}}}}}if(f){b="("+b+f+")"}if(h&&g.useFormat){c=c?","+c:"";if(h.substr(0,5)!="this."){h="fm."+h+"("}else{h+="("}}else{return b}return h+b+c+")"},evalTpl:function($){eval($);return $},newLineRe:/\r\n|\r|\n/g,aposRe:/[']/g,intRe:/^\s*(\d+)\s*$/,tagRe:/^([\w-\.\#\$]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\/]\s?[\d\.\+\-\*\/\(\)]+)?$/},0,0,0,0,0,0,[Ext.util,"XTemplateCompiler"],function(){var a=this.prototype;a.fnArgs="out,values,parent,xindex,xcount,xkey";a.callFn=".call(this,"+a.fnArgs+")"}));(Ext.cmd.derive("Ext.XTemplate",Ext.Template,{isXTemplate:true,emptyObj:{},fn:null,strict:false,apply:function(c,d,a,b){return this.applyOut(c,[],d,a,b).join("")},applyOut:function(j,a,c,f,h){var d=this,b;if(!d.fn){b=new Ext.util.XTemplateCompiler({useFormat:d.disableFormats!==true,definitions:d.definitions,strict:d.strict});d.fn=b.compile(d.html)}f=f||1;h=h||1;if(d.strict){d.fn(a,j,c||d.emptyObj,f,h)}else{try{d.fn(a,j,c||d.emptyObj,f,h)}catch(g){}}return a},compile:function(){return this},statics:{getTpl:function(d,b){var a=d[b],c;if(a&&!a.isTemplate){a=Ext.ClassManager.dynInstantiate("Ext.XTemplate",a);if(d.hasOwnProperty(b)){c=d}else{for(c=d.self.prototype;c&&!c.hasOwnProperty(b);c=c.superclass){}}c[b]=a;a.owner=c}return a||null}}},0,0,0,0,0,0,[Ext,"XTemplate"],0));(Ext.cmd.derive("Ext.app.EventDomain",Ext.Base,{statics:{instances:{}},isEventDomain:true,isInstance:false,constructor:function(){var a=this;if(!a.isInstance){Ext.app.EventDomain.instances[a.type]=a}a.bus={};a.monitoredClasses=[]},dispatch:function(f,p,h){p=Ext.canonicalEventName(p);var m=this,g=m.bus,r=g[p],b,s,q,a,j,d,c,o;if(!r){return true}for(b in r){if(r.hasOwnProperty(b)&&m.match(f,b,m.controller)){s=r[b];for(q in s){if(s.hasOwnProperty(q)){a=s[q];if(a.controller.isActive()){j=a.list;d=j.length;for(c=0;c<d;c++){o=j[c];if(o.fire.apply(o,h)===false){return false}}}}}}}return true},listen:function(d,r){var q=this,p=q.bus,h=q.idProperty,j=q.monitoredClasses,f=j.length,o=r.getId(),A=(q.type==="component"),u=A?r.getRefMap():null,w,m,y,v,b,c,a,t,s,z,g;for(v in d){s=d[v];if(A){v=u[v]||v}if(s){if(h){v=v==="*"?v:v.substring(1)}for(z in s){b=null;c=s[z];a=r;z=Ext.canonicalEventName(z);t=new Ext.util.Event(r,z);if(Ext.isObject(c)){b=c;c=b.fn;a=b.scope||r;delete b.fn;delete b.scope}if(typeof c==="string"){c=a[c]}t.addListener(c,a,b);for(w=0;w<f;++w){g=j[w].hasListeners;if(g){g._incr_(z)}}m=p[z]||(p[z]={});m=m[v]||(m[v]={});y=m[o]||(m[o]={controller:r,list:[]});y.list.push(t)}}}},match:function(a,b){var c=this.idProperty;if(c){return b==="*"||a[c]===b}return false},monitor:function(a){var d=this,c=a.isInstance?a:a.prototype,b=c.doFireEvent;d.monitoredClasses.push(a);c.doFireEvent=function(g,f){var h=b.apply(this,arguments);if(h!==false&&!this.isSuspended(g)){h=d.dispatch(this,g,f)}return h}},unlisten:function(v){var r=this.bus,s=v,p=this.monitoredClasses,h=p.length,t,f,q,o,m,a,g,d,c,u,b;if(v.isController){s=v.getId()}for(f in r){f=Ext.canonicalEventName(f);if(r.hasOwnProperty(f)&&(g=r[f])){for(a in g){t=g[a];u=t[s];if(u){q=u.list;if(q){for(d=0,o=q.length;d<o;++d){m=q[d];m.clearListeners();for(c=0;c<h;++c){b=p[c].hasListeners;if(b){b._decr_(m.name)}}}delete t[s]}}}}}},destroy:function(){this.monitoredClasses=this.bus=null;this.callParent()}},1,0,0,0,0,0,[Ext.app,"EventDomain"],0));(Ext.cmd.derive("Ext.app.domain.Component",Ext.app.EventDomain,{singleton:true,type:"component",constructor:function(){this.callParent();this.monitor(Ext.Widget)},dispatch:function(a,f,d){var c=a.lookupController(false),g,b;while(c){g=c.compDomain;if(g){if(g.dispatch(a,f,d)===false){return false}}b=c.getView();c=b?b.lookupController(true):null}return this.callParent(arguments)},match:function(b,a){return b.is(a)}},1,0,0,0,0,0,[Ext.app.domain,"Component"],0));(Ext.cmd.derive("Ext.util.ProtoElement",Ext.Base,function(){var b=Ext.String.splitWords,a=Ext.Array.toMap;return{isProtoEl:true,clsProp:"cls",styleProp:"style",removedProp:"removed",styleIsText:false,constructor:function(g){var d=this,f,c;if(g){Ext.apply(d,g);f=d.cls;c=d.style;delete d.cls}d.classList=f?b(f):[];d.classMap=f?a(d.classList):{};if(c){if(typeof c==="string"){d.style=Ext.Element.parseStyles(c)}else{if(Ext.isFunction(c)){d.styleFn=c;delete d.style}else{d.style=Ext.apply({},c)}}}},flush:function(){this.flushClassList=[];this.removedClasses={};delete this.style;delete this.unselectableAttr},addCls:function(g){if(!g){return this}var c=this,f=(typeof g==="string")?b(g):g,h=f.length,o=c.classList,d=c.classMap,j=c.flushClassList,m=0,p;for(;m<h;++m){p=f[m];if(!d[p]){d[p]=true;o.push(p);if(j){j.push(p);delete c.removedClasses[p]}}}return c},hasCls:function(c){return c in this.classMap},removeCls:function(h){var g=this,p=g.classList,f=(g.classList=[]),m=a(b(h)),d=p.length,c=g.classMap,o=g.removedClasses,j,q;for(j=0;j<d;++j){q=p[j];if(m[q]){if(o){if(c[q]){o[q]=true;Ext.Array.remove(g.flushClassList,q)}}delete c[q]}else{f.push(q)}}return g},setStyle:function(d,c){var g=this,f=g.style||(g.style={});if(typeof d==="string"){if(arguments.length===1){g.setStyle(Ext.Element.parseStyles(d))}else{f[d]=c}}else{Ext.apply(f,d)}return g},unselectable:function(){this.addCls(Ext.dom.Element.unselectableCls);if(Ext.isOpera){this.unselectableAttr=true}},writeTo:function(f){var g=this,d=g.flushClassList||g.classList,c=g.removedClasses,h;if(g.styleFn){h=Ext.apply({},g.styleFn());Ext.apply(h,g.style)}else{h=g.style}f[g.clsProp]=d.join(" ");if(h){f[g.styleProp]=g.styleIsText?Ext.DomHelper.generateStyles(h,null,true):h}if(c){c=Ext.Object.getKeys(c);if(c.length){f[g.removedProp]=c.join(" ")}}if(g.unselectableAttr){f.unselectable="on"}return f}}},1,0,0,0,0,0,[Ext.util,"ProtoElement"],0));(Ext.cmd.derive("Ext.dom.CompositeElement",Ext.dom.CompositeElementLite,{alternateClassName:"Ext.CompositeElement",isLite:false,getElement:function(a){return a},transformElement:function(a){return Ext.get(a)}},0,0,0,0,0,0,[Ext.dom,"CompositeElement",Ext,"CompositeElement"],0));(Ext.cmd.derive("Ext.scroll.Scroller",Ext.Evented,{factoryConfig:{defaultType:"dom"},isScroller:true,_spacerCls:"x-domscroller-spacer",config:{direction:undefined,directionLock:false,disabled:null,element:undefined,indicators:null,maxPosition:{x:0,y:0},maxUserPosition:{x:0,y:0},minPosition:{x:0,y:0},minUserPosition:{x:0,y:0},momentumEasing:null,size:null,slotSnapSize:{x:0,y:0},x:true,y:true,spacerXY:null},statics:{create:function(a){return Ext.Factory.scroller(a,Ext.supports.Touch?"touch":"dom")}},constructor:function(a){var b=this;b.position={x:0,y:0};Ext.Evented.prototype.constructor.call(this,a);b.onDomScrollEnd=Ext.Function.createBuffered(b.onDomScrollEnd,100,b)},destroy:function(){var a=this;a.setX(Ext.emptyString);a.setY(Ext.emptyString);a.setElement(null);a.onDomScrollEnd=a._partners=a.component=null;Ext.Evented.prototype.destroy.call(this)},addPartner:function(a,d){var f=this,b=f._partners||(f._partners={}),c=a._partners||(a._partners={});b[a.getId()]={scroller:a,axis:d};c[f.getId()]={scroller:f,axis:d}},applyElement:function(d,c){var a=this,f,b;if(c){a.scrollListener.destroy()}if(d){if(d.isElement){f=d}else{f=Ext.get(d)}if(f.dom===document.body){f=Ext.get(document.scrollingElement||(Ext.isWebKit?document.body:document.documentElement));b=Ext.get(Ext.isIE9m?window:document)}else{b=f}a.scrollListener=b.on({scroll:a.onDomScroll,scope:a,destroyable:true});return f}},getClientSize:function(){var a=this.getElement().dom;return{x:a.clientWidth,y:a.clientHeight}},getScrollbarSize:function(){var m=this,f=0,c=0,j,h,b,a,o,g,d;if(m.isDomScroller||Ext.supports.touchScroll===1){j=m.getElement();if(j&&!j.destroyed){b=m.getX();a=m.getY();h=j.dom;if(b||a){d=Ext.getScrollbarSize()}if(b==="scroll"){o=true}else{if(b){o=h.scrollWidth>h.clientWidth}}if(a==="scroll"){g=true}else{if(a){g=h.scrollHeight>h.clientHeight}}if(o){c=d.height}if(g){f=d.width}}}return{width:f,height:c}},getPosition:function(){return this.position},updateDirectionLock:Ext.emptyFn,updateDisabled:Ext.emptyFn,updateIndicators:Ext.emptyFn,updateMaxPosition:Ext.emptyFn,updateMaxUserPosition:Ext.emptyFn,updateMinPosition:Ext.emptyFn,updateMinUserPosition:Ext.emptyFn,updateMomenumEasing:Ext.emptyFn,updateX:Ext.emptyFn,updateY:Ext.emptyFn,onPartnerScrollStart:Ext.emptyFn,onPartnerScrollEnd:Ext.emptyFn,refresh:function(){this.fireEvent("refresh",this);return this},removePartner:function(c){var a=this._partners,b=c._partners;if(a){delete a[c.getId()]}if(b){delete (b[this.getId()])}},scrollBy:function(a,d,b){var c=this.getPosition();if(a){if(a.length){b=d;d=a[1];a=a[0]}else{if(typeof a!=="number"){b=d;d=a.y;a=a.x}}}a=(typeof a==="number")?a+c.x:null;d=(typeof d==="number")?d+c.y:null;return this.doScrollTo(a,d,b)},scrollIntoView:function(h,j,f,o){var b=this,a=b.getPosition(),m,d,c,g=b.getElement();if(h){m=Ext.fly(h).getScrollIntoViewXY(g,a.x,a.y);d=(j===false)?a.x:m.x;c=m.y;if(o){b.on({scrollend:"doHighlight",scope:b,single:true,args:[h,o]})}b.doScrollTo(d,c,f)}},isInView:function(d){var f=this,b={x:false,y:false},g,a=f.getElement(),c;if(d&&a.contains(d)){c=a.getRegion();g=Ext.fly(d).getRegion();b.x=g.right>c.left&&g.left<c.right;b.y=g.bottom>c.top&&g.top<c.bottom}return b},scrollTo:function(c,b,d){var a;if(c){if(c.length){d=b;b=c[1];c=c[0]}else{if(typeof c!=="number"){d=b;b=c.y;c=c.x}}}if(c<0||b<0){a=this.getMaxPosition();if(c<0){c+=a.x}if(b<0){b+=a.y}}this.doScrollTo(c,b,d)},updateDirection:function(a){var d=this,c,b;if(!a){c=d.getX();b=d.getY();if(c&&b){a=(b==="scroll"&&c==="scroll")?"both":"auto"}else{if(b){a="vertical"}else{if(c){a="horizontal"}}}d._direction=a}else{if(a==="auto"){c=true;b=true}else{if(a==="vertical"){c=false;b=true}else{if(a==="horizontal"){c=true;b=false}else{if(a==="both"){c="scroll";b="scroll"}}}}d.setX(c);d.setY(b)}},updateSize:function(f){var g=this,d=g.getElement(),c,b,a;if(d){c=g.getSpacer();if(f==null){c.hide()}else{if(typeof f==="number"){b=f;a=f}else{b=f.x||0;a=f.y||0}if(b>0){b-=1}if(a>0){a-=1}g.setSpacerXY({x:b,y:a});c.show()}}},deprecated:{"5":{methods:{getScroller:function(){return this}}},"5.1.0":{methods:{scrollToTop:function(a){return this.scrollTo(0,0,a)},scrollToEnd:function(a){return this.scrollTo(Infinity,Infinity,a)}}}},privates:{getSpacer:function(){var a=this,b=a._spacer,c;if(!b){c=a.getElement();b=a._spacer=c.createChild({cls:a._spacerCls,role:"presentation"});b.setVisibilityMode(2);c.position()}return b},applySpacerXY:function(b,a){if(a&&b.x===a.x&&b.y===a.y){b=undefined}return b},updateSpacerXY:function(a){this.getSpacer().setLocalXY(a.x,a.y)},convertX:function(a){return a},doHighlight:function(b,a){if(a!==true){Ext.fly(b).highlight(a)}else{Ext.fly(b).highlight()}},fireScrollStart:function(c,b){var a=this,d=a.component;a.invokePartners("onPartnerScrollStart",c,b);if(a.hasListeners.scrollstart){a.fireEvent("scrollstart",a,c,b)}if(d&&d.onScrollStart){d.onScrollStart(c,b)}Ext.GlobalEvents.fireEvent("scrollstart",a,c,b)},fireScroll:function(c,b){var a=this,d=a.component;a.invokePartners("onPartnerScroll",c,b);if(a.hasListeners.scroll){a.fireEvent("scroll",a,c,b)}if(d&&d.onScrollMove){d.onScrollMove(c,b)}Ext.GlobalEvents.fireEvent("scroll",a,c,b)},fireScrollEnd:function(c,b){var a=this,d=a.component;a.invokePartners("onPartnerScrollEnd",c,b);if(a.hasListeners.scrollend){a.fireEvent("scrollend",a,c,b)}if(d&&d.onScrollEnd){d.onScrollEnd(c,b)}Ext.GlobalEvents.fireEvent("scrollend",a,c,b)},initXStyle:function(){var b=this.getElement(),a=this.getX();if(b&&b.dom){if(!a){a="hidden"}else{if(a===true){a="auto"}}b.setStyle("overflow-x",a)}},initYStyle:function(){var a=this.getElement(),b=this.getY();if(a&&a.dom){if(!b){b="hidden"}else{if(b===true){b="auto"}}a.setStyle("overflow-y",b)}},invokePartners:function(h,j,g){var b=this,d=b._partners,a,f,c=h==="onPartnerScrollEnd";if(!b.suspendSync&!b.isReflecting){for(f in d){a=d[f].scroller;a.isReflecting=true;a[h](b,j,g);if(c){a.isReflecting=false}}}},clearReflecting:function(){this.isReflecting=false},suspendPartnerSync:function(){this.suspendSync=(this.suspendSync||0)+1},resumePartnerSync:function(){if(this.suspendSync){this.suspendSync--}},updateDomScrollPosition:function(){var b=this,a=b.getElement(),d,c=b.position;if(a&&!a.destroyed){d=b.getElementScroll(a);c.x=d.left;c.y=d.top}b.positionDirty=false;return c},getElementScroll:function(a){return a.getScroll()},onDomScroll:function(){var a=this,d,c,b,f;if(a.isTouchScroller&&Ext.supports.touchScroll===2){f=a.getElement().dom;f.scrollTop=f.scrollLeft=0;return}d=a.updateDomScrollPosition();c=d.x;b=d.y;if(!a.isScrolling){a.isScrolling=Ext.isScrolling=true;a.fireScrollStart(c,b)}a.fireScroll(c,b);a.onDomScrollEnd()},onDomScrollEnd:function(){var a=this,d=a.getPosition(),c=d.x,b=d.y;a.isScrolling=Ext.isScrolling=false;a.trackingScrollLeft=c;a.trackingScrollTop=b;a.fireScrollEnd(c,b)},onPartnerScroll:function(a,c,b){var d=a._partners[this.getId()].axis;if(d){if(d==="x"){b=null}else{if(d==="y"){c=null}}}this.doScrollTo(c,b,false,true)},restoreState:function(){var c=this,b=c.getElement(),a;if(b){a=b.dom;if(c.trackingScrollTop!==undefined){a.scrollTop=c.trackingScrollTop;a.scrollLeft=c.trackingScrollLeft}}}}},1,0,0,0,["scroller.scroller"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.scroll,"Scroller"],0));(Ext.cmd.derive("Ext.fx.easing.Abstract",Ext.Base,{config:{startTime:0,startValue:0},isEasing:true,isEnded:false,constructor:function(a){this.initConfig(a);return this},applyStartTime:function(a){if(!a){a=Ext.Date.now()}return a},updateStartTime:function(a){this.reset()},reset:function(){this.isEnded=false},getValue:Ext.emptyFn},1,0,0,0,0,0,[Ext.fx.easing,"Abstract"],0));(Ext.cmd.derive("Ext.fx.easing.Momentum",Ext.fx.easing.Abstract,{config:{acceleration:30,friction:0,startVelocity:0},alpha:0,updateFriction:function(b){var a=Math.log(1-(b/10));this.theta=a;this.alpha=a/this.getAcceleration()},updateStartVelocity:function(a){this.velocity=a*this.getAcceleration()},updateAcceleration:function(a){this.velocity=this.getStartVelocity()*a;this.alpha=this.theta/a},getValue:function(){return this.getStartValue()-this.velocity*(1-this.getFrictionFactor())/this.theta},getFrictionFactor:function(){var a=Ext.Date.now()-this.getStartTime();return Math.exp(a*this.alpha)},getVelocity:function(){return this.getFrictionFactor()*this.velocity}},0,0,0,0,0,0,[Ext.fx.easing,"Momentum"],0));(Ext.cmd.derive("Ext.fx.easing.Bounce",Ext.fx.easing.Abstract,{config:{springTension:0.3,acceleration:30,startVelocity:0},getValue:function(){var c=Ext.Date.now()-this.getStartTime(),a=(c/this.getAcceleration()),b=a*Math.pow(Math.E,-this.getSpringTension()*a);return this.getStartValue()+(this.getStartVelocity()*b)}},0,0,0,0,0,0,[Ext.fx.easing,"Bounce"],0));(Ext.cmd.derive("Ext.fx.easing.BoundMomentum",Ext.fx.easing.Abstract,{config:{momentum:null,bounce:null,minMomentumValue:0,maxMomentumValue:0,minVelocity:0.01,startVelocity:0},applyMomentum:function(a,b){return Ext.factory(a,Ext.fx.easing.Momentum,b)},applyBounce:function(a,b){return Ext.factory(a,Ext.fx.easing.Bounce,b)},updateStartTime:function(a){this.getMomentum().setStartTime(a);Ext.fx.easing.Abstract.prototype.updateStartTime.apply(this,arguments)},updateStartVelocity:function(a){this.getMomentum().setStartVelocity(a)},updateStartValue:function(a){this.getMomentum().setStartValue(a)},reset:function(){this.lastValue=null;this.isBouncingBack=false;this.isOutOfBound=false;return Ext.fx.easing.Abstract.prototype.reset.apply(this,arguments)},getValue:function(){var d=this.getMomentum(),c=this.getBounce(),j=d.getStartVelocity(),m=j>0?1:-1,o=this.getMinMomentumValue(),h=this.getMaxMomentumValue(),g=(m==1)?h:o,a=this.lastValue,b,f;if(j===0){return this.getStartValue()}if(!this.isOutOfBound){b=d.getValue();f=d.getVelocity();if(Math.abs(f)<this.getMinVelocity()){this.isEnded=true}if(b>=o&&b<=h){return b}this.isOutOfBound=true;c.setStartTime(Ext.Date.now()).setStartVelocity(f).setStartValue(g)}b=c.getValue();if(!this.isEnded){if(!this.isBouncingBack){if(a!==null){if((m==1&&b<a)||(m==-1&&b>a)){this.isBouncingBack=true}}}else{if(Math.round(b)==g){this.isEnded=true}}}this.lastValue=b;return b}},0,0,0,0,0,0,[Ext.fx.easing,"BoundMomentum"],0));(Ext.cmd.derive("Ext.fx.easing.Linear",Ext.fx.easing.Abstract,{config:{duration:0,endValue:0},updateStartValue:function(a){this.distance=this.getEndValue()-a},updateEndValue:function(a){this.distance=a-this.getStartValue()},getValue:function(){var a=Ext.Date.now()-this.getStartTime(),b=this.getDuration();if(a>b){this.isEnded=true;return this.getEndValue()}else{return this.getStartValue()+((a/b)*this.distance)}}},0,0,0,0,["easing.linear"],0,[Ext.fx.easing,"Linear"],0));(Ext.cmd.derive("Ext.fx.easing.EaseOut",Ext.fx.easing.Linear,{config:{exponent:4,duration:1500},getValue:function(){var a=Ext.Date.now()-this.getStartTime(),j=this.getDuration(),g=this.getStartValue(),c=this.getEndValue(),f=this.distance,h=a/j,b=1-h,m=1-Math.pow(b,this.getExponent()),d=g+(m*f);if(a>=j){this.isEnded=true;return c}return d}},0,0,0,0,["easing.ease-out"],0,[Ext.fx.easing,"EaseOut"],0));(Ext.cmd.derive("Ext.util.translatable.Abstract",Ext.Evented,{config:{useWrapper:null,easing:null,easingX:null,easingY:null},x:0,y:0,activeEasingX:null,activeEasingY:null,isAnimating:false,isTranslatable:true,constructor:function(a){this.mixins.observable.constructor.call(this,a);this.position={x:0,y:0}},factoryEasing:function(a){return Ext.factory(a,Ext.fx.easing.Linear,null,"easing")},applyEasing:function(a){if(!this.getEasingX()){this.setEasingX(this.factoryEasing(a))}if(!this.getEasingY()){this.setEasingY(this.factoryEasing(a))}},applyEasingX:function(a){return this.factoryEasing(a)},applyEasingY:function(a){return this.factoryEasing(a)},doTranslate:Ext.emptyFn,translate:function(b,a,c){if(c){return this.translateAnimated(b,a,c)}if(this.isAnimating){this.stopAnimation()}if(!isNaN(b)&&typeof b=="number"){this.x=b}if(!isNaN(a)&&typeof a=="number"){this.y=a}this.doTranslate(b,a)},translateAxis:function(d,a,f){var c,b;if(d=="x"){c=a}else{b=a}return this.translate(c,b,f)},getPosition:function(){var b=this,a=b.position;a.x=-b.x;a.y=-b.y;return a},animate:function(b,a){this.activeEasingX=b;this.activeEasingY=a;this.isAnimating=true;this.lastX=null;this.lastY=null;Ext.AnimationQueue.start(this.doAnimationFrame,this);this.fireEvent("animationstart",this,this.x,this.y);return this},translateAnimated:function(a,h,f){var d=this;if(!Ext.isObject(f)){f={}}if(d.isAnimating){d.stopAnimation()}d.callback=f.callback;d.callbackScope=f.scope;var c=Ext.Date.now(),g=f.easing,b=(typeof a=="number")?(f.easingX||g||d.getEasingX()||true):null,j=(typeof h=="number")?(f.easingY||g||d.getEasingY()||true):null;if(b){b=d.factoryEasing(b);b.setStartTime(c);b.setStartValue(d.x);b.setEndValue(a);if("duration" in f){b.setDuration(f.duration)}}if(j){j=d.factoryEasing(j);j.setStartTime(c);j.setStartValue(d.y);j.setEndValue(h);if("duration" in f){j.setDuration(f.duration)}}return d.animate(b,j)},doAnimationFrame:function(){var g=this,d=g.activeEasingX,c=g.activeEasingY,f=Date.now(),b,a;if(!g.isAnimating){return}g.lastRun=f;if(d===null&&c===null){g.stopAnimation();return}if(d!==null){g.x=b=Math.round(d.getValue());if(d.isEnded){g.activeEasingX=null;g.fireEvent("axisanimationend",g,"x",b)}}else{b=g.x}if(c!==null){g.y=a=Math.round(c.getValue());if(c.isEnded){g.activeEasingY=null;g.fireEvent("axisanimationend",g,"y",a)}}else{a=g.y}if(g.lastX!==b||g.lastY!==a){g.doTranslate(b,a);g.lastX=b;g.lastY=a}g.fireEvent("animationframe",g,b,a)},stopAnimation:function(){var a=this;if(!a.isAnimating){return}a.activeEasingX=null;a.activeEasingY=null;a.isAnimating=false;Ext.AnimationQueue.stop(a.doAnimationFrame,a);a.fireEvent("animationend",a,a.x,a.y);if(a.callback){a.callback.call(a.callbackScope);a.callback=null}},refresh:function(){this.translate(this.x,this.y)},destroy:function(){if(this.isAnimating){this.stopAnimation()}Ext.Evented.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.util.translatable,"Abstract"],0));(Ext.cmd.derive("Ext.util.translatable.Dom",Ext.util.translatable.Abstract,{config:{element:null},applyElement:function(a){if(!a){return}return Ext.get(a)},updateElement:function(){this.refresh()}},0,0,0,0,0,0,[Ext.util.translatable,"Dom"],0));(Ext.cmd.derive("Ext.util.translatable.CssTransform",Ext.util.translatable.Dom,{doTranslate:function(b,a){var c=this.getElement();if(!this.destroyed&&!c.destroyed){c.translate(b,a)}},destroy:function(){var a=this.getElement();if(a&&!a.destroyed){a.dom.style.webkitTransform=null}Ext.util.translatable.Dom.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.util.translatable,"CssTransform"],0));(Ext.cmd.derive("Ext.util.translatable.ScrollPosition",Ext.util.translatable.Dom,{type:"scrollposition",config:{useWrapper:true},getWrapper:function(){var a=this.wrapper,c=this.getElement(),b;if(!a){b=c.getParent();if(!b){return null}if(b.hasCls("x-translatable-hboxfix")){b=b.getParent()}if(this.getUseWrapper()){a=c.wrap()}else{a=b}c.addCls("x-translatable");a.addCls("x-translatable-container");this.wrapper=a;a.on("painted",function(){if(!this.isAnimating){this.refresh()}},this);this.refresh()}return a},doTranslate:function(c,b){var a=this.getWrapper(),d;if(a){d=a.dom;if(typeof c=="number"){d.scrollLeft=500000-c}if(typeof b=="number"){d.scrollTop=500000-b}}},destroy:function(){var c=this,b=c.getElement(),a=c.wrapper;if(a){if(!b.destroyed){if(c.getUseWrapper()){a.doReplaceWith(b)}b.removeCls("x-translatable")}if(!a.destroyed){a.removeCls("x-translatable-container");a.un("painted","refresh",c)}delete c.wrapper;delete c._element}Ext.util.translatable.Dom.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.util.translatable,"ScrollPosition"],0));(Ext.cmd.derive("Ext.util.translatable.ScrollParent",Ext.util.translatable.Dom,{isScrollParent:true,applyElement:function(a){var b=Ext.get(a);if(b){this.parent=b.parent()}return b},doTranslate:function(b,a){var c=this.parent;c.setScrollLeft(Math.round(-b));c.setScrollTop(Math.round(-a))},getPosition:function(){var a=this,b=a.position,c=a.parent;b.x=c.getScrollLeft();b.y=c.getScrollTop();return b}},0,0,0,0,0,0,[Ext.util.translatable,"ScrollParent"],0));(Ext.cmd.derive("Ext.util.translatable.CssPosition",Ext.util.translatable.Dom,{doTranslate:function(b,a){var c=this.getElement().dom.style;if(typeof b=="number"){c.left=b+"px"}if(typeof a=="number"){c.top=a+"px"}},destroy:function(){var a=this.getElement().dom.style;a.left=null;a.top=null;Ext.util.translatable.Dom.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.util.translatable,"CssPosition"],0));(Ext.cmd.derive("Ext.util.Translatable",Ext.Base,{constructor:function(a){var b=Ext.util.translatable;switch(Ext.browser.getPreferredTranslationMethod(a)){case"scrollposition":return new b.ScrollPosition(a);case"scrollparent":return new b.ScrollParent(a);case"csstransform":return new b.CssTransform(a);case"cssposition":return new b.CssPosition(a)}}},1,0,0,0,0,0,[Ext.util,"Translatable"],0));(Ext.cmd.derive("Ext.scroll.Indicator",Ext.Widget,{config:{axis:null,hideAnimation:true,hideDelay:0,scroller:null,minLength:24},defaultHideAnimation:{to:{opacity:0},duration:300},names:{x:{side:"l",getSize:"getHeight",setLength:"setWidth",translate:"translateX"},y:{side:"t",getSize:"getWidth",setLength:"setHeight",translate:"translateY"}},oppositeAxis:{x:"y",y:"x"},cls:"x-scroll-indicator",applyHideAnimation:function(a){if(a){a=Ext.mergeIf({onEnd:this.onHideAnimationEnd,scope:this},this.defaultHideAnimation,a)}return a},constructor:function(b){var a=this,c;Ext.Widget.prototype.constructor.call(this,b);c=a.getAxis();a.names=a.names[c];a.element.addCls(a.cls+" "+a.cls+"-"+c)},hide:function(){var b=this,a=b.getHideDelay();if(a){b._hideTimer=Ext.defer(b.doHide,a,b)}else{b.doHide()}},setValue:function(r){var m=this,s=m.element,g=m.names,t=m.getAxis(),d=m.getScroller(),c=d.getMaxUserPosition()[t],h=d.getElementSize()[t],f=m.length,q=m.getMinLength(),p=f,b=h-f-m.sizeAdjust,j=Math.round,o=Math.max,a;if(r<0){p=j(o(f+(f*r/h),q));a=0}else{if(r>c){p=j(o(f-(f*(r-c)/h),q));a=b+f-p}else{a=j(r/c*b)}}m[g.translate](a);s[g.setLength](p)},show:function(){var c=this,b=c.element,a=b.getActiveAnimation();if(a){a.end()}if(!c._inDom){c.getScroller().getElement().appendChild(b);c._inDom=true;if(!c.size){c.cacheStyles()}}c.refreshLength();clearTimeout(c._hideTimer);b.setStyle("opacity","")},privates:{cacheStyles:function(){var c=this,b=c.element,a=c.names;c.size=b[a.getSize]();c.margin=b.getMargin(a.side)},doHide:function(){var b=this.getHideAnimation(),a=this.element;if(b){a.animate(b)}else{a.setStyle("opacity",0)}},hasOpposite:function(){return this.getScroller().isAxisEnabled(this.oppositeAxis[this.getAxis()])},onHideAnimationEnd:function(){this.element.setStyle("opacity","0")},refreshLength:function(){var b=this,a=b.names,h=b.getAxis(),m=b.getScroller(),d=m.getSize()[h],c=m.getElementSize()[h],o=c/d,g=b.margin*2,j=b.hasOpposite()?(g+b.size):g,f=Math.max(Math.round((c-j)*o),b.getMinLength());b.sizeAdjust=j;b.length=f;b.element[a.setLength](f)},translateX:function(a){this.element.translate(a)},translateY:function(a){this.element.translate(0,a)}}},1,["scrollindicator"],["widget","scrollindicator"],{widget:true,scrollindicator:true},["widget.scrollindicator"],0,[Ext.scroll,"Indicator"],0));(Ext.cmd.derive("Ext.scroll.TouchScroller",Ext.scroll.Scroller,{isTouchScroller:true,config:{autoRefresh:true,bounceEasing:{duration:400},elementSize:undefined,indicators:true,fps:"auto",maxAbsoluteVelocity:6,momentumEasing:{momentum:{acceleration:30,friction:0.5},bounce:{acceleration:30,springTension:0.3},minVelocity:1},outOfBoundRestrictFactor:0.5,innerElement:null,size:undefined,slotSnapEasing:{duration:150},slotSnapOffset:{x:0,y:0},startMomentumResetTime:300,translatable:{translationMethod:"auto",useWrapper:false}},cls:"x-scroll-container",scrollerCls:"x-scroll-scroller",dragStartTime:0,dragEndTime:0,isDragging:false,isAnimating:false,isMouseEvent:{mousedown:1,mousemove:1,mouseup:1},listenerMap:{touchstart:"onTouchStart",touchmove:"onTouchMove",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd"},refreshCounter:0,constructor:function(b){var c=this,a="onEvent";c.elementListeners={touchstart:a,touchmove:a,dragstart:a,drag:a,dragend:a,scope:c};c.minPosition={x:0,y:0};c.startPosition={x:0,y:0};c.velocity={x:0,y:0};c.isAxisEnabledFlags={x:false,y:false};c.flickStartPosition={x:0,y:0};c.flickStartTime={x:0,y:0};c.lastDragPosition={x:0,y:0};c.dragDirection={x:0,y:0};Ext.scroll.Scroller.prototype.constructor.call(this,b);c.refreshAxes();c.scheduleRefresh={idle:c.doRefresh,scope:c,single:true,destroyable:true}},applyBounceEasing:function(b){var a=Ext.fx.easing.EaseOut;return{x:Ext.factory(b,a),y:Ext.factory(b,a)}},applyElementSize:function(d){var f=this.getElement(),a,c,b;if(!f){return null}a=f.dom;if(!a){return}if(d==null){c=a.clientWidth;b=a.clientHeight}else{c=d.x;b=d.y}return{x:c,y:b}},applyIndicators:function(g,c){var f=this,b,d,a,h;if(g){if(g===true){b=d={}}else{a=g.x;h=g.y;if(a||h){b=(a==null||a===true)?{}:a;d=(a==null||h===true)?{}:h}else{b=d=g}}if(c){if(b){c.x.setConfig(b)}else{c.x.destroy();c.x=null}if(d){c.y.setConfig(d)}else{c.y.destroy();c.y=null}g=c}else{g={x:null,y:null};if(b){g.x=new Ext.scroll.Indicator(Ext.applyIf({axis:"x",scroller:f},b))}if(d){g.y=new Ext.scroll.Indicator(Ext.applyIf({axis:"y",scroller:f},d))}}}else{if(c){if(c.x){c.x.destroy()}if(c.y){c.y.destroy()}c.x=c.y=null}}return g},applyMomentumEasing:function(b){var a=Ext.fx.easing.BoundMomentum;return{x:Ext.factory(b,a),y:Ext.factory(b,a)}},applyInnerElement:function(a){if(a&&!a.isElement){a=Ext.get(a)}return a},applyMaxPosition:function(a,b){if(b&&a.x===b.x&&a.y===b.y){return}var c=this.getTranslatable(),d;if(c.isAnimating){d=c.activeEasingY;if(d&&d.getStartVelocity&&d.getStartVelocity()<0&&a.y<b.y){d.setMinMomentumValue(-a.y)}}return a},applyMaxUserPosition:function(b,a){if(a&&b.x===a.x&&b.y===a.y){return}return b},applySize:function(c){var d=this.getElement(),g,f,b,a;if(typeof c==="number"){b=c;a=c}else{if(c){b=c.x;a=c.y}}if(d&&(b==null||a==null)){g=d.dom;f=this.getInnerElement().dom;if(b==null){b=Math.max(f.scrollWidth,g.clientWidth)}if(a==null){a=Math.max(f.scrollHeight,g.clientHeight)}}return{x:b,y:a}},applySlotSnapOffset:function(a){if(typeof a==="number"){a={x:a,y:a}}return a},applySlotSnapSize:function(a){if(typeof a==="number"){a={x:a,y:a}}return a},applySlotSnapEasing:function(b){var a=Ext.fx.easing.EaseOut;return{x:Ext.factory(b,a),y:Ext.factory(b,a)}},applyTranslatable:function(b,a){return Ext.factory(b,Ext.util.Translatable,a)},destroy:function(){var a=this,d=a.getElement(),b=a.getInnerElement(),c=a.sizeMonitors;if(c){c.element.destroy();c.container.destroy()}if(d&&!d.destroyed){d.removeCls(a.cls)}if(b&&!b.destroyed){b.removeCls(a.scrollerCls)}if(a._isWrapped){if(!d.destroyed){a.unwrapContent()}b.destroy()}a.setElement(null);a.setInnerElement(null);a.setIndicators(null);Ext.destroy(a.getTranslatable());Ext.scroll.Scroller.prototype.destroy.call(this)},refresh:function(b,c){var a=this;++a.refreshCounter;if(b){a.doRefresh(c)}else{if(!a.refreshScheduled){a.scheduleRefresh.args=[c];a.refreshScheduled=Ext.on(a.scheduleRefresh)}}},updateAutoRefresh:function(a){this.toggleResizeListeners(a)},updateBounceEasing:function(a){this.getTranslatable().setEasingX(a.x).setEasingY(a.y)},updateElementSize:function(){if(!this.isConfiguring){this.refreshAxes()}},updateDisabled:function(a){if(!this.isConfiguring){if(a){this.detachListeners()}else{this.attachListeners()}}},updateElement:function(d,c){var g=this,a=g.getInnerElement(),f,b;if(!a){a=d.dom.firstChild;if(!a||a.nodeType!==1||!Ext.fly(a).hasCls(g.scrollerCls)){a=g.wrapContent(d)}g.setInnerElement(a)}d.addCls(g.cls);if(g.isConfiguring){if(!g.getTranslatable().isScrollParent){d.dom.style.overflowX=d.dom.style.overflowY="";f=g.elementListeners;f.mousewheel="onMouseWheel";f.scroll={fn:"onElementScroll",delegated:false,scope:g}}}if(!g.getDisabled()){g.attachListeners()}if(!g.isConfiguring){b=g.getAutoRefresh();if(b!==false){g.toggleResizeListeners(b);if(b){g.refresh()}else{if(b===null){g.setElementSize(null)}}}}},updateFps:function(a){if(a!=="auto"){this.getTranslatable().setFps(a)}},updateMaxUserPosition:function(){this.snapToBoundary()},updateMinUserPosition:function(){this.snapToBoundary()},updateInnerElement:function(a){if(a){a.addCls(this.scrollerCls)}this.getTranslatable().setElement(a)},updateSize:function(a){if(!this.isConfiguring){if(Ext.supports.touchScroll===1){Ext.scroll.Scroller.prototype.updateSize.call(this,a)}this.refreshAxes()}},updateTranslatable:function(a){a.setElement(this.getInnerElement());if(!a.isScrollParent){a.on({animationframe:"onAnimationFrame",animationend:"onAnimationEnd",scope:this})}},updateX:function(){if(!this.isConfiguring){this.refreshAxes()}},updateY:function(){if(!this.isConfiguring){this.refreshAxes()}},privates:{attachListeners:function(){this.getElement().on(this.elementListeners)},constrainX:function(a){return Math.min(this.getMaxPosition().x,Math.max(a,0))},constrainY:function(a){return Math.min(this.getMaxPosition().y,Math.max(a,0))},convertEasingConfig:function(a){return a},detachListeners:function(){this.getElement().un(this.elementListeners)},doRefresh:function(d){var b=this,a,c;if(b.refreshScheduled){b.refreshScheduled=b.refreshScheduled.destroy()}if(b.refreshCounter&&b.getElement()){b.stopAnimation();b.getTranslatable().refresh();if(d){a=d.size;c=d.elementSize}b.setSize(a);b.setElementSize(c);b.fireEvent("refresh",b);b.refreshCounter=0}},doScrollTo:function(j,h,r,d){var g=this,f=g.isDragging,m=g.getTranslatable().isScrollParent,p=!g.isReflecting&&!m;if(g.destroyed||!g.getElement()){return g}d=d||g.isDragging;var o=g.getTranslatable(),a=g.position,q=false,c,b;if(!f||g.isAxisEnabled("x")){if(isNaN(j)||typeof j!=="number"){j=a.x}else{if(!d){j=g.constrainX(j)}if(a.x!==j){a.x=j;q=true}}c=g.convertX(-j)}if(!f||g.isAxisEnabled("y")){if(isNaN(h)||typeof h!=="number"){h=a.y}else{if(!d){h=g.constrainY(h)}if(a.y!==h){a.y=h;q=true}}b=-h}if(q){if(p){g.onScrollStart()}if(r){o.translateAnimated(c,b,r)}else{if(!m){g.onScroll()}o.translate(c,b);if(p){g.onScrollEnd()}}}else{if(r&&r.callback){r.callback()}}return g},getAnimationEasing:function(f,j){if(!this.isAxisEnabled(f)){return null}var p=this,d=p.position[f],b=p.getMinUserPosition()[f],h=p.getMaxUserPosition()[f],r=p.getMaxAbsoluteVelocity(),c=null,a=p.dragEndTime,g=j.flick.velocity[f],q=f==="x",o,m;if(d<b){c=b}else{if(d>h){c=h}}if(q){d=p.convertX(d);c=p.convertX(c)}if(c!==null){m=p.getBounceEasing()[f];m.setConfig({startTime:a,startValue:-d,endValue:-c});return m}if(g===0){return null}if(g<-r){g=-r}else{if(g>r){g=r}}m=p.getMomentumEasing()[f];o={startTime:a,startValue:-d,startVelocity:g*1.5,minMomentumValue:-h,maxMomentumValue:0};if(q){p.convertEasingConfig(o)}m.setConfig(o);return m},getSnapPosition:function(b){var c=this,h=c.getSlotSnapSize()[b],d=null,j,g,f,a;if(h!==0&&c.isAxisEnabled(b)){j=c.position[b];g=c.getSlotSnapOffset()[b];f=c.getMaxUserPosition()[b];a=Math.floor((j-g)%h);if(a!==0){if(j!==f){if(Math.abs(a)>h/2){d=Math.min(f,j+((a>0)?h-a:a-h))}else{d=j-a}}else{d=j-a}}}return d},hideIndicators:function(){var a=this,b=a.getIndicators(),c,d;if(b){if(a.isAxisEnabled("x")){c=b.x;if(c){c.hide()}}if(a.isAxisEnabled("y")){d=b.y;if(d){d.hide()}}}},isAxisEnabled:function(a){this.getX();this.getY();return this.isAxisEnabledFlags[a]},onAnimationEnd:function(){this.snapToBoundary();this.onScrollEnd()},onAnimationFrame:function(a,d,b){var c=this.position;c.x=this.convertX(-d);c.y=-b;this.onScroll()},onAxisDrag:function(d,w){if(w&&this.isAxisEnabled(d)){var h=this,r=h.flickStartPosition,m=h.flickStartTime,p=h.lastDragPosition,t=h.dragDirection,a=h.position[d],u=h.getMinUserPosition()[d],v=h.getMaxUserPosition()[d],j=h.startPosition[d],q=p[d],s=j-w,o=t[d],g=h.getOutOfBoundRestrictFactor(),b=h.getStartMomentumResetTime(),c=Ext.Date.now(),f;if(s<u){s*=g}else{if(s>v){f=s-v;s=v+f*g}}if(s>q){t[d]=1}else{if(s<q){t[d]=-1}}if((o!==0&&(t[d]!==o))||(c-m[d])>b){r[d]=a;m[d]=c}p[d]=s;return true}},onDomScroll:function(){var c=this,a,b;if(c.getTranslatable().isScrollParent){a=c.getElement().dom;b=c.position;b.x=a.scrollLeft;b.y=a.scrollTop}Ext.scroll.Scroller.prototype.onDomScroll.call(this)},onDrag:function(a){var b=this,c=b.lastDragPosition;if(!b.isDragging){return}if(b.onAxisDrag("x",b.convertX(a.deltaX))|b.onAxisDrag("y",a.deltaY)){b.doScrollTo(c.x,c.y)}},onDragEnd:function(b){var a=this,d,c;if(!a.isDragging){return}a.dragEndTime=Ext.Date.now();a.onDrag(b);a.isDragging=false;d=a.getAnimationEasing("x",b);c=a.getAnimationEasing("y",b);if(d||c){a.getTranslatable().animate(d,c)}else{a.onScrollEnd()}},onDragStart:function(m){var p=this,j=p.getDirection(),b=m.absDeltaX,a=m.absDeltaY,g=p.getDirectionLock(),d=p.startPosition,t=p.flickStartPosition,f=p.flickStartTime,c=p.lastDragPosition,s=p.position,r=p.dragDirection,h=s.x,q=s.y,o=Ext.Date.now();if(g&&j!=="both"){if((j==="horizontal"&&b>a)||(j==="vertical"&&a>b)){m.stopPropagation()}else{return}}c.x=h;c.y=q;t.x=h;t.y=q;d.x=h;d.y=q;f.x=o;f.y=o;r.x=0;r.y=0;p.dragStartTime=o;p.isDragging=true;if(!p.isScrolling){p.onScrollStart()}},onElementResize:function(a,b){this.refresh(true,{elementSize:{x:b.contentWidth,y:b.contentHeight},size:this.getAutoRefresh()?null:this.getSize()})},onElementScroll:function(a,b){b.scrollTop=b.scrollLeft=0},onEvent:function(c){var b=this,a=c.browserEvent;if((!b.self.isTouching||b.isTouching)&&((!b.getTranslatable().isScrollParent)||(!b.isMouseEvent[a.type]&&a.pointerType!=="mouse"))&&(b.getY()||b.getX())){b[b.listenerMap[c.type]](c)}},onInnerElementResize:function(a,b){this.refresh(true,{size:{x:b.width,y:b.height}})},onMouseWheel:function(o){var p=this,b=o.getWheelDeltas(),f=-b.x,c=-b.y,h=p.position,g=p.getMaxUserPosition(),a=p.getMinUserPosition(),q=Math.max,d=Math.min,m=q(d(h.x+f,g.x),a.x),j=q(d(h.y+c,g.y),a.y);f=m-h.x;c=j-h.y;if(!f&&!c){return}o.stopEvent();p.onScrollStart();p.scrollBy(f,c);p.onScroll();p.onScrollEnd()},onPartnerScrollEnd:function(b,a){var c=this;if(!c.getTranslatable().isScrollParent){c.fireScrollEnd(b,a)}Ext.scroll.Scroller.prototype.onPartnerScrollEnd.call(this,b,a);c.isScrolling=false;c.hideIndicators()},onPartnerScrollStart:function(b,a){var c=this;c.isScrolling=true;if(!c.getTranslatable().isScrollParent){c.fireScrollStart(b,a)}c.showIndicators()},onScroll:function(){var f=this,c=f.position,b=c.x,h=c.y,g=f.getIndicators(),a,d;if(g){if(f.isAxisEnabled("x")){a=g.x;if(a){a.setValue(b)}}if(f.isAxisEnabled("y")){d=g.y;if(d){d.setValue(h)}}}f.fireScroll(b,h)},onScrollEnd:function(){var b=this,a=b.position;if(b.isScrolling&&!b.isTouching&&!b.snapToSlot()){b.hideIndicators();b.isScrolling=Ext.isScrolling=false;b.fireScrollEnd(a.x,a.y)}},onScrollStart:function(){var b=this,a=b.position;if(!b.isScrolling){b.showIndicators();b.isScrolling=Ext.isScrolling=true;b.fireScrollStart(a.x,a.y)}},onTouchEnd:function(){var a=this;a.isTouching=a.self.isTouching=false;if(!a.isDragging&&a.snapToSlot()){a.onScrollStart()}},onTouchMove:function(a){a.preventDefault()},onTouchStart:function(){var a=this;a.isTouching=a.self.isTouching=true;Ext.getDoc().on({touchend:"onTouchEnd",scope:a,single:true});a.stopAnimation()},refreshAxes:function(){var h=this,f=h.isAxisEnabledFlags,b=h.getSize(),a=h.getElementSize(),p=h.getIndicators(),d,c,o,m,g,j;if(!b||!a){return}d=Math.max(0,b.x-a.x);c=Math.max(0,b.y-a.y);o=h.getX();m=h.getY();h.setMaxPosition({x:d,y:c});if(o===true||o==="auto"){f.x=!!d}else{if(o===false){f.x=false;g=p&&p.x;if(g){g.hide()}}else{if(o==="scroll"){f.x=true}}}if(m===true||m==="auto"){f.y=!!c}else{if(m===false){f.y=false;j=p&&p.y;if(j){j.hide()}}else{if(m==="scroll"){f.y=true}}}h.setMaxUserPosition({x:f.x?d:0,y:f.y?c:0});if(Ext.supports.touchScroll===1){h.initXStyle();h.initYStyle()}},showIndicators:function(){var a=this,b=a.getIndicators(),c,d;if(b){if(a.isAxisEnabled("x")){c=b.x;if(c){c.show()}}if(a.isAxisEnabled("y")){d=b.y;if(d){d.show()}}}},snapToBoundary:function(){var a=this,o=a.getPosition();if(a.isConfiguring||!(o.x||o.y)){return}var g=a.getMinUserPosition(),m=a.getMaxUserPosition(),j=g.x,h=g.y,f=m.x,d=m.y,c=Math.round(o.x),b=Math.round(o.y);if(c<j){c=j}else{if(c>f){c=f}}if(b<h){b=h}else{if(b>d){b=d}}a.doScrollTo(c,b)},snapToSlot:function(){var c=this,a=c.getSnapPosition("x"),d=c.getSnapPosition("y"),b=c.getSlotSnapEasing();if(a!==null||d!==null){c.doScrollTo(a,d,{easingX:b.x,easingY:b.y});return true}return false},stopAnimation:function(){this.getTranslatable().stopAnimation()},toggleResizeListeners:function(b){var d=this,c=d.getElement(),a,g,f;if(c){f=d.getInnerElement();if(b){a=g="on"}else{if(b===null){a="on";g="un"}else{a=g="un"}}c[a]("resize","onElementResize",d);f[g]("resize","onInnerElementResize",d)}},unwrapContent:function(){var b=this.getInnerElement().dom,c=this.getElement().dom,a;while((a=b.firstChild)){c.insertBefore(a,b)}},wrapContent:function(c){var d=document.createElement("div"),a=c.dom,b;while(b=a.lastChild){d.insertBefore(b,d.firstChild)}a.appendChild(d);this.setInnerElement(d);this._isWrapped=true;return this.getInnerElement()}}},1,0,0,0,["scroller.touch"],0,[Ext.scroll,"TouchScroller"],0));(Ext.cmd.derive("Ext.scroll.DomScroller",Ext.scroll.Scroller,{isDomScroller:true,getMaxPosition:function(){var d=this.getElement(),c=0,b=0,a;if(d&&!d.destroyed){a=d.dom;c=a.scrollWidth-a.clientWidth;b=a.scrollHeight-a.clientHeight}return{x:c,y:b}},getMaxUserPosition:function(){var f=this,d=f.getElement(),c=0,b=0,a;if(d&&!d.destroyed){a=d.dom;if(f.getX()){c=a.scrollWidth-a.clientWidth}if(f.getY()){b=a.scrollHeight-a.clientHeight}}return{x:c,y:b}},getPosition:function(){var a=this;if(a.positionDirty){a.updateDomScrollPosition()}return a.position},getSize:function(){var c=this.getElement(),b,a;if(c&&!c.destroyed){a=c.dom;b={x:a.scrollWidth,y:a.scrollHeight}}else{b={x:0,y:0}}return b},updateElement:function(b,a){this.initXStyle();this.initYStyle()},updateX:function(a){this.initXStyle()},updateY:function(a){this.initYStyle()},privates:{doScrollTo:function(p,o,c){var m=this,g=m.getElement(),h,d,a,b,j,f;if(g&&!g.destroyed){d=g.dom;b=(p===Infinity);j=(o===Infinity);if(b||j){h=m.getMaxPosition();if(b){p=h.x}if(j){o=h.y}}p=m.convertX(p);if(c){a={};if(o!=null){a.scrollTop=o}if(p!=null){a.scrollLeft=p}g.animate(Ext.mergeIf({to:{scrollTop:o,scrollLeft:p}},c))}else{if(o!=null){d.scrollTop=o}if(p!=null){d.scrollLeft=p;if(Ext.isIE8){f=d.scrollLeft;d.scrollLeft=p}}}m.positionDirty=true}},getElementScroll:function(a){return a.getScroll()},stopAnimation:function(){var a=this.getElement().getActiveAnimation();if(a){a.end()}}}},0,0,0,0,["scroller.dom"],0,[Ext.scroll,"DomScroller"],function(a){Ext.onDocumentReady(function(){a.document=new a({x:true,y:true,element:document.body})})}));(Ext.cmd.derive("Ext.util.Floating",Ext.Base,{mixinId:"floating",focusOnToFront:true,shadow:"sides",animateShadow:false,constrain:false,config:{activeCounter:0,alwaysOnTop:false},preventDefaultAlign:false,_visModeMap:{visibility:1,display:2,offsets:3},constructor:function(){var a=this,f=a.el,b=a.shadow,c,d;if(b){d={mode:(b===true)?"sides":b};c=a.shadowOffset;if(c){d.offset=c}d.animate=a.animateShadow;d.fixed=a.fixed;f.enableShadow(d,false)}if(a.shim||Ext.useShims){f.enableShim({fixed:a.fixed},false)}f.setVisibilityMode(a._visModeMap[a.hideMode]);a.el.on({mousedown:a.onMouseDown,scope:a,capture:true});a.registerWithOwnerCt();a.initHierarchyEvents()},alignTo:function(d,b,a,f){var g=this,c;Ext.un("scroll",g.onAlignToScroll,g);if(d.isComponent){c=d.el}else{if(d.nodeType){c=Ext.fly(d)}else{c=d}}if(!c.contains(g.el)){Ext.on("scroll",g.onAlignToScroll,g)}g._lastAlignTarget=d;g._lastAlignToPos=b;g.mixins.positionable.alignTo.call(g,c,b,a,f)},initFloatConstrain:function(){var a=this,b=a.floatParent;if((a.constrain||a.constrainHeader)&&!a.constrainTo){a.constrainTo=b?b.getTargetEl():a.container}},initHierarchyEvents:function(){var b=this,a=this.syncHidden;if(!b.hasHierarchyEventListeners){b.mon(Ext.GlobalEvents,{hide:a,collapse:a,show:a,expand:a,added:a,scope:b});b.hasHierarchyEventListeners=true}},registerWithOwnerCt:function(){var a=this,c=a.ownerCt,b=a.zIndexParent;if(b){b.unregisterFloatingItem(a)}b=a.zIndexParent=a.up("[floating]");a.floatParent=c||b;a.initFloatConstrain();delete a.ownerCt;if(b){b.registerFloatingItem(a)}else{Ext.WindowManager.register(a)}},onMouseDown:function(f){var b=this,a=b.focusTask,c=f.pointerType==="touch",d,g,h;if(b.floating&&(!a||!a.id)){d=f.target;g=b.el.dom;while(!c&&d&&d!==g){if(Ext.fly(d).isFocusable()){c=true}d=d.parentNode}h=Ext.WindowManager.getActive()===b&&(d===g||c);if(!h){b.toFront(c)}}},onBeforeFloatLayout:function(){this.el.preventSync=true},onAfterFloatLayout:function(){var a=this.el;if(a.shadow||a.shim){a.setUnderlaysVisible(true);a.syncUnderlays()}},syncHidden:function(){var a=this,b=a.hidden||!a.rendered,c=a.hierarchicallyHidden=a.isHierarchicallyHidden(),d=a.pendingShow;if(b!==c){if(c){a.hide();a.pendingShow=true}else{if(d){delete a.pendingShow;if(d.length){a.show.apply(a,d)}else{a.show()}}}}},setZIndex:function(a){var b=this;b.el.setZIndex(a);a+=10;if(b.floatingDescendants){a=Math.floor(b.floatingDescendants.setBase(a)/100)*100+10000}return a},doConstrain:function(b){var c=this,a=c.calculateConstrainedPosition(b,null,true);if(a){c.setPosition(a)}},updateActiveCounter:function(a){var b=this.zIndexParent;if(b&&this.bringParentToFront!==false){b.setActiveCounter(++Ext.ZIndexManager.activeCounter)}b=this.zIndexManager;if(b){b.onComponentUpdate(this)}},updateAlwaysOnTop:function(a){var b=this.zIndexManager;if(b){b.onComponentUpdate(this)}},toFront:function(b){var a=this;if(a.zIndexManager.bringToFront(a,b||!a.focusOnToFront)){if(a.hasListeners.tofront){a.fireEvent("tofront",a,a.el.getZIndex())}}return a},setActive:function(b,d){var a=this,c;if(b){if(a.el.shadow&&!a.maximized){a.el.enableShadow(null,true)}if(d){c=Ext.ComponentManager.getActiveComponent();if(!c||!c.up(a)){a.focus()}}a.fireEvent("activate",a)}else{a.fireEvent("deactivate",a)}},toBack:function(){this.zIndexManager.sendToBack(this);return this},center:function(){var a=this,b;if(a.isVisible()){b=a.getAlignToXY(a.container,"c-c");a.setPagePosition(b)}else{a.needsCenter=true}return a},onFloatShow:function(){if(this.needsCenter){this.center()}delete this.needsCenter;if(this.toFrontOnShow){this.toFront()}},fitContainer:function(d){var a=this,g=a.floatParent,c=g?g.getTargetEl():a.container,b=c.getViewSize(),f=g||(c.dom!==document.body)?[0,0]:c.getXY();b.x=f[0];b.y=f[1];a.setBox(b,d)},privates:{onFloatDestroy:function(){this.clearAlignEl()},clearAlignEl:function(){var a=this;if(a._lastAlignTarget){Ext.un("scroll",a.onAlignToScroll,a);a._lastAlignPos=a._lastAlignTarget=null}},onAlignToScroll:function(b){var g=this,c=g._lastAlignTarget,d=c.isFloating,f,a;if(c){if(c.isComponent){f=c.destroyed;c=c.el}else{if(c.nodeType){c=Ext.fly(c)}a=c.dom;f=!a||Ext.isGarbage(a)}if(f){g.clearAlignEl()}else{if((b.getElement().contains(c)||d)&&!b.getElement().contains(g.el)){g.alignTo(c,g._lastAlignToPos)}}}}}},1,0,0,0,0,0,[Ext.util,"Floating"],0));(Ext.cmd.derive("Ext.util.ElementContainer",Ext.Base,{mixinId:"elementCt",config:{childEls:{$value:{},cached:true,lazy:true,merge:function(g,a,f,d){var c=a?Ext.Object.chain(a):{},b,h;if(g instanceof Array){for(b=g.length;b--;){h=g[b];if(!d||!(h in c)){if(typeof h==="string"){c[h]={name:h,itemId:h}}else{c[h.name]=h}}}}else{if(g){if(g.constructor===Object){for(b in g){if(!d||!(b in c)){h=g[b];if(h===true){c[b]={itemId:b}}else{if(typeof h==="string"){c[b]={itemId:h}}else{c[b]=h;if(!("itemId" in h)){h.itemId=b}}}c[b].name=b}}}else{if(!d||!(g in c)){c[g]={name:g,itemId:g}}}}}return c}}},destroy:function(){var a=this,d=a.getChildEls(),b,c;for(c in d){b=a[c];if(b){if(b.destroy){b.component=null;b.destroy()}a[c]=null}}},privates:{addChildEl:function(b){var a=this,c=a.getChildEls();if(!a.hasOwnProperty("childEls")){a.childEls=c=Ext.Object.chain(c)}if(typeof b==="string"){b={name:b,itemId:b}}c[b.name]=b},afterClassMixedIn:function(a){var c=a.prototype,b=c.childEls;if(b){delete c.childEls;a.getConfigurator().add({childEls:b})}},attachChildEls:function(a,s){var f=this,g=f.getChildEls(),d=s||f,r=d.id+"-",p=!d.frame,m,o,j,c,b,h,q;for(m in g){j=g[m];if(p&&j.frame){continue}b=j.select;if(b){h=a.select(b,true)}else{if(!(b=j.selectNode)){if(!(q=j.id)){q=r+j.itemId;h=Ext.cache[q]}else{h=Ext.cache[q]||a.getById(q)}}else{h=a.selectNode(b,false)}}if(h){if(h.isElement){h.component=d}else{if(h.isComposite&&!h.isLite){o=h.elements;for(c=o.length;c--;){o[c].component=d}}}}f[m]=h||null}}}},0,0,0,0,0,0,[Ext.util,"ElementContainer"],0));(Ext.cmd.derive("Ext.util.Renderable",Ext.Base,{mixinId:"renderable",frameCls:"x-frame",frameIdRegex:/[\-]frame\d+[TMB][LCR]$/,frameElNames:["TL","TC","TR","ML","MC","MR","BL","BC","BR","Table"],frameTpl:["{%this.renderDockedItems(out,values,0);%}",'<tpl if="top">','<tpl if="left"><div id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>",'<tpl if="left"><div id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}Body" data-ref="frameBody" class="{frameBodyCls} {frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</div>",'<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>','<tpl if="bottom">','<tpl if="left"><div id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>","{%this.renderDockedItems(out,values,1);%}"],frameTableTpl:["{%this.renderDockedItems(out,values,0);%}",'<table id="{fgid}Table" data-ref="frameTable" class="{frameCls} ','x-table-plain" cellpadding="0" role="presentation">','<tpl if="top">','<tr role="presentation">','<tpl if="left"><td id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>",'<tr role="presentation">','<tpl if="left"><td id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}Body" data-ref="frameBody" class="{frameBodyCls} {frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" style="{mcStyle}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</td>",'<tpl if="right"><td id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>",'<tpl if="bottom">','<tr role="presentation">','<tpl if="left"><td id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>","</table>","{%this.renderDockedItems(out,values,1);%}"],_renderState:0,ariaEl:"el",_layerCls:"x-layer",_fixedLayerCls:"x-fixed-layer",ariaStaticRoles:{presentation:true,article:true,definition:true,directory:true,document:true,img:true,heading:true,math:true,note:true,banner:true,complementary:true,contentinfo:true,navigation:true,search:true,"undefined":true,"null":true},statics:{makeRenderSetter:function(b,a){var c=b.name;return function(h){var g=this,f=(g.renderConfigs||(g.renderConfigs={})),d=f[a];if(g._renderState>=a){(b.setter||b.getSetter()).call(g,h)}else{if(!d){f[a]=d={}}if(!(c in d)){d[c]=g[c]}g[c]=h}return g}},processRenderConfig:function(a,q,d){var j=this.prototype,g=this.getConfigurator(),b=Ext.util.Renderable,p=b.makeRenderSetter,f=a[q],m,o,c,h;for(c in f){o=Ext.Config.get(c);if(!j[h=o.names.set]){m=(o.renderSetter||(o.renderSetter={}));j[h]=m[d]||(m[d]=p(o,d))}}delete a[q];g.add(f)}},onClassMixedIn:function(f){var c=f.override,b=this.processRenderConfig,a=function(g){if(g.beforeRenderConfig){this.processRenderConfig(g,"beforeRenderConfig",1)}if(g.renderConfig){this.processRenderConfig(g,"renderConfig",3)}c.call(this,g)},d=function(h,g){h.override=a;h.processRenderConfig=b;if(g.beforeRenderConfig){h.processRenderConfig(g,"beforeRenderConfig",1)}if(g.renderConfig){h.processRenderConfig(g,"renderConfig",3)}};d(f,f.prototype);f.onExtended(d)},afterRender:function(){var c=this,j={},g=c.protoEl,b=c.el,m,d,h,a,f;c.finishRenderChildren();c._renderState=4;if(c.contentEl){h="x-";a=h+"hidden-";f=c.contentEl=Ext.get(c.contentEl);f.component=c;f.removeCls([h+"hidden",a+"display",a+"offsets"]);c.getContentTarget().appendChild(f.dom)}g.writeTo(j);d=j.removed;if(d){b.removeCls(d)}d=j.cls;if(d.length){b.addCls(d)}d=j.style;if(j.style){b.setStyle(d)}c.protoEl=null;if(!c.ownerCt&&!c.skipLayout){c.updateLayout()}if(!(c.x&&c.y)&&(c.pageX||c.pageY)){c.setPagePosition(c.pageX,c.pageY)}if(c.disableOnRender){c.onDisable()}m=c.controller;if(m&&m.afterRender){m.afterRender(c)}},afterFirstLayout:function(f,q){var h=this,p=h.x,m=h.y,o=h.defaultAlign,c=h.alignOffset,g,d,b,j,a;if(!h.ownerLayout){d=p!==undefined;b=m!==undefined}if(h.floating&&!h.preventDefaultAlign&&(!d||!b)){if(h.floatParent){j=h.floatParent.getTargetEl().getViewRegion();a=h.el.getAlignToXY(h.alignTarget||h.floatParent.getTargetEl(),o,c);j.x=a[0]-j.x;j.y=a[1]-j.y}else{a=h.el.getAlignToXY(h.alignTarget||h.container,o,c);j=h.el.translateXY(a[0],a[1])}p=d?p:j.x;m=b?m:j.y;d=b=true}if(d||b){h.setPosition(p,m)}h.onBoxReady(f,q);g=h.controller;if(g&&g.boxReady){g.boxReady(h)}},beforeRender:function(){var a=this,b=a.floating,f=a.getComponentLayout(),d=a.userCls,c;a._renderState=1;a.ariaUsesMainElement=a.ariaEl==="el";c=a.controller;if(c&&c.beforeRender){c.beforeRender(a)}a.initBindable();if(a.renderConfigs){a.flushRenderConfigs()}if(a.reference){a.publishState()}if(d){a.addCls(d)}if(b){a.addCls(a.fixed?a._fixedLayerCls:a._layerCls);d=b.cls;if(d){a.addCls(d)}}a.frame=a.frame||a.alwaysFramed;if(!f.initialized){f.initLayout()}a.initOverflow();a.setUI(a.ui)},doApplyRenderTpl:function(a,c){var b=c.$comp,d;if(!b.rendered){d=b.initRenderTpl();d.applyOut(c.renderData,a)}},getElConfig:function(){var d=this,g=d.autoEl,c=d.getFrameInfo(),a={tag:"div",tpl:c?d.initFramingTpl(c.table):d.initRenderTpl()},h=d.layoutTargetCls,f=d.protoEl,j=d.ariaRole,b;d.initStyles(f);if(h&&!c){f.addCls(h)}f.writeTo(a);f.flush();if(g){if(Ext.isString(g)){a.tag=g}else{Ext.apply(a,g)}}if(j&&d.ariaUsesMainElement){a.role=j;if(!d.ariaStaticRoles[j]){a["aria-hidden"]=!!d.hidden;a["aria-disabled"]=!!d.disabled;if(d.ariaLabel&&!d.ariaLabelledBy){a["aria-label"]=d.ariaLabel}if(d.collapsible){a["aria-expanded"]=!d.collapsed}if(d.ariaRenderAttributes){Ext.apply(a,d.ariaRenderAttributes)}if(d.config.ariaAttributes){Ext.apply(a,d.getAriaAttributes())}}}a.id=d.id;if(a.tpl){if(c){a.tplData=b=d.getFrameRenderData();b.renderData=d.initRenderData()}else{a.tplData=d.initRenderData()}}d.ariaRenderAttributes=null;return a},getInsertPosition:function(a){if(a!==undefined){if(Ext.isNumber(a)){a=this.container.dom.childNodes[a]}else{a=Ext.getDom(a)}}return a},getRenderTree:function(){var b=this,a=null;if(!b.hasListeners.beforerender||b.fireEvent("beforerender",b)!==false){b._renderState=1;b.beforeRender();b.rendering=true;b._renderState=2;a=b.getElConfig();if(b.el){a.id=b.$pid=Ext.id(null,b.el.identifiablePrefix)}}return a},initRenderData:function(){var a=this,c=a.ariaRole,b,d;b=Ext.apply({$comp:a,id:a.id,ui:a.ui,uiCls:a.uiCls,baseCls:a.baseCls,componentCls:a.componentCls,frame:a.frame,renderScroller:a.touchScroll,scrollerCls:a.scrollerCls,childElCls:""},a.renderData);if(c&&!a.ariaUsesMainElement){d={role:c};if(!a.ariaStaticRoles[c]){d["aria-hidden"]=!!a.hidden;d["aria-disabled"]=!!a.disabled;if(a.ariaLabel&&!a.ariaLabelledBy){d["aria-label"]=a.ariaLabel}if(a.collapsible){d["aria-expanded"]=!a.collapsed}if(a.ariaRenderAttributes){Ext.apply(d,a.ariaRenderAttributes)}if(a.config.ariaAttributes){Ext.apply(d,a.getAriaAttributes())}}b.ariaAttributes=d}return b},onRender:function(j,m){var a=this,c=a.x,b=a.y,h=null,g=a.el,f,d;a.applyRenderSelectors();a.rendering=null;a.rendered=true;a._renderState=3;if(a.renderConfigs){a.flushRenderConfigs()}if(c!=null){h={x:c}}if(b!=null){(h=h||{}).y=b}if(!a.getFrameInfo()){f=a.width;d=a.height;if(typeof f==="number"){h=h||{};h.width=f}if(typeof d==="number"){h=h||{};h.height=d}}if(a.touchScroll===1){a.getOverflowEl().disableTouchScroll()}a.lastBox=g.lastBox=h},render:function(b,a){var d=this,c=d.el,h=d.ownerLayout,g,j,f;if(c&&!c.isElement){d.wrapPrimaryEl(c);c=d.el}if(!d.skipLayout){Ext.suspendLayouts()}b=d.initContainer(b);f=d.getInsertPosition(a);if(!c){j=d.getRenderTree();if(h&&h.transformItemRenderTree){j=h.transformItemRenderTree(j)}if(j){if(f){c=Ext.DomHelper.insertBefore(f,j)}else{c=Ext.DomHelper.append(b,j)}d.wrapPrimaryEl(c);d.cacheRefEls(c)}}else{if(!d.hasListeners.beforerender||d.fireEvent("beforerender",d)!==false){d.beforeRender();d.needsRenderTpl=d.rendering=true;d._renderState=2;d.initStyles(c);if(d.allowDomMove!==false){if(f){b.dom.insertBefore(c.dom,f)}else{b.dom.appendChild(c.dom)}}}else{g=true}}if(c&&!g){d.finishRender(a)}if(!d.skipLayout){Ext.resumeLayouts(!d.hidden&&!b.isDetachedBody)}},ensureAttachedToBody:function(a){var c=this,b;while(c.ownerCt){c=c.ownerCt}if(c.container.isDetachedBody){c.container=b=Ext.getBody();b.appendChild(c.el.dom);if(a){c.updateLayout()}if(typeof c.x==="number"||typeof c.y==="number"){c.setPosition(c.x,c.y)}}},privates:{applyRenderSelectors:function(){var a=this,d=a.renderSelectors,f=a.el,b,c;a.attachChildEls(f);a.ariaEl=a[a.ariaEl]||a.el;if(d){for(c in d){b=d[c];if(b){a[c]=f.selectNode(b,false)}}}},cacheRefEls:function(d){d=d||this.el;var b=Ext.cache,g=Ext.dom.Element,h=d.isElement?d.dom:d,a=h.querySelectorAll("[data-ref]"),j=a.length,f,c;for(c=0;c<j;c++){f=a[c];if(!b[f.id]){new g(f)}}},doAutoRender:function(){var a=this;if(!a.rendered){if(a.floating){a.render(a.renderTo||document.body)}else{a.render(Ext.isBoolean(a.autoRender)?Ext.getBody():a.autoRender)}}},doRenderContent:function(c,b){var d=b.$comp,a=d.data;if(d.html){Ext.DomHelper.generateMarkup(d.html,c);delete d.html}if(d.tpl){if(!d.tpl.isTemplate){d.tpl=new Ext.XTemplate(d.tpl)}if(a){d.data=a=a.isEntity?a.getData(true):a;d.tpl.applyOut(a,c)}}},doRenderFramingDockedItems:function(c,a,b){var d=a.$comp;if(!d.rendered&&d.doRenderDockedItems){a.renderData.$skipDockedItems=true;d.doRenderDockedItems.call(this,c,a,b)}},flushRenderConfigs:function(){var c=this,g=c.renderConfigs,f=c._renderState,h,b,a,j,d;if(g){for(b=0;b<=f;++b){h=g[b];if(h){g[b]=null;for(a in h){d=h[a];(j||(j={}))[a]=c[a];c[a]=d}}}if(j){c.setConfig(j)}}},finishRender:function(o){var c=this,d=Ext.cache,b,m,f,a,j,h,g;if(!c.el||c.$pid){if(c.container){g=d[c.id];h=g?g.dom:c.container.getById(c.id,true)}else{f=c.$pid||c.id;g=d[f];h=g?g.dom:Ext.getDom(f)}if(!c.el){c.wrapPrimaryEl(h)}else{delete c.$pid;if(!c.el.dom){c.wrapPrimaryEl(c.el)}h.parentNode.insertBefore(c.el.dom,h);b=h;h=c.el.dom;m=h.firstChild;while(b.firstChild){h.insertBefore(b.firstChild,m)}c.el.addCls(b.className);Ext.removeNode(b)}}else{if(c.needsRenderTpl){a=c.initRenderTpl();if(a){j=c.initRenderData();a.insertFirst(c.getTargetEl(),j)}c.cacheRefEls()}}c.el.component=c;if(!c.container){c.container=Ext.get(c.el.dom.parentNode)}if(c.ctCls){c.container.addCls(c.ctCls)}c.onRender(c.container,o);if(!c.overflowInited){c.initOverflow()}c.el.setVisibilityMode(Ext.Element[c.hideMode.toUpperCase()]);if(c.overCls){c.el.hover(c.addOverCls,c.removeOverCls,c)}if(c.hasListeners.render){c.fireEvent("render",c)}c.afterRender();if(c.hasListeners.afterrender){c.fireEvent("afterrender",c)}c.initEvents();if(c.hidden){c.el.hide()}},finishRenderChildren:function(){var a=this.getComponentLayout();a.finishRender()},getFrameRenderData:function(){var a=this,c=a.frameSize,b="";if(a._syncFrameHeight&&a.height){b="height:"+(a.height-c.height)+"px"}return{$comp:a,id:a.id,fgid:a.id+"-frame",ui:a.ui,uiCls:a.uiCls,frameCls:a.frameCls,frameBodyCls:a.layoutTargetCls||"",baseCls:a.baseCls,top:!!c.top,left:!!c.left,right:!!c.right,bottom:!!c.bottom,mcStyle:b,frameElCls:""}},getFrameInfo:function(){if(Ext.supports.CSS3BorderRadius||!this.frame){return false}var v=this,p=v.frameInfoCache,c=v.getFramingInfoCls()+"-frameInfo",w=p[c],o,r,j,h,d,f,q,m,u,b,s,a,g,t;if(w==null){o=Ext.fly(v.getStyleProxy(c),"frame-style-el");r=o.getStyle("font-family");if(r){r=r.split("-");j=parseInt(r[1],10);h=parseInt(r[2],10);d=parseInt(r[3],10);f=parseInt(r[4],10);q=parseInt(r[5],10);m=parseInt(r[6],10);u=parseInt(r[7],10);b=parseInt(r[8],10);s=parseInt(r[9],10);a=parseInt(r[10],10);g=parseInt(r[11],10);t=parseInt(r[12],10);w={table:r[0].charAt(0)==="t",vertical:r[0].charAt(1)==="v",top:j,right:h,bottom:d,left:f,width:f+h,height:j+d,border:{top:q,right:m,bottom:u,left:b,width:b+m,height:q+u},padding:{top:s,right:a,bottom:g,left:t,width:t+a,height:s+g}}}else{w=false}p[c]=w}v.frame=!!w;v.frameSize=w;return w},getFramingInfoCls:function(){return this.baseCls+"-"+this.ui},getStyleProxy:function(b){var a=this.styleProxyEl||(Ext.Component.prototype.styleProxyEl=Ext.getBody().createChild({role:"presentation",style:{position:"absolute",top:"-10000px"}},null,true));a.className=b;return a},getFrameTpl:function(a){return this.getTpl(a?"frameTableTpl":"frameTpl")},initContainer:function(a){var b=this;if(!a&&b.el){a=b.el.dom.parentNode;b.allowDomMove=false}b.container=a.dom?a:Ext.get(a);return b.container},initOverflow:function(){var f=this,b=f.getOverflowStyle(),a=f.scrollFlags,g=f.getOverflowEl(),d=(a.y||a.x),c=f.touchScroll=(d&&Ext.supports.touchScroll);if(!d||!g||!g.isElement){return}f.overflowInited=true;if(c===2){g.setStyle("overflow","hidden")}else{g.setStyle(b)}},doRenderPadding:function(b,a){var c=a.$comp;if(c.touchScroll){b.push("padding:",c.unitizeBox(c.padding))}},initFramingTpl:function(b){var a=this.getFrameTpl(b);if(a&&!a.applyRenderTpl){this.setupFramingTpl(a)}return a},initRenderTpl:function(){var a=this.getTpl("renderTpl");if(a&&!a.renderContent){this.setupRenderTpl(a)}return a},setupFramingTpl:function(a){a.applyRenderTpl=this.doApplyRenderTpl;a.renderDockedItems=this.doRenderFramingDockedItems},setupRenderTpl:function(a){a.renderBody=a.renderContent=this.doRenderContent;a.renderPadding=this.doRenderPadding},updateFrame:function(){if(Ext.supports.CSS3BorderRadius||!this.frame){return}var o=this,a=o.el.dom,j=o.frameTable,s=o.frameBody,f=s.dom,d=o.getFrameInfo(),g,v,r,u,c,h,m,t,b,p,q;r=document.createElement("div");h=o.getFrameRenderData();t=o.getFrameTpl(d.table);t.insertFirst(r,h);q=r.querySelectorAll("[data-ref]");p=r.querySelector('[data-ref="frameBody"]');for(c=f;c.parentNode!==a;){c=c.parentNode}while(r.firstChild){a.insertBefore(r.firstChild,c)}p.parentNode.replaceChild(f,p);f.className=p.className;s.setSize();g=o.getChildEls();if(j){j.destroy();o.frameTable=null}for(v in g){if(g[v].frame){u=o[v];if(u&&u!==s){u.destroy();o[v]=null}}}for(b=q.length;b--;){v=(m=q[b]).getAttribute("data-ref");if(v!=="frameBody"){o[v]=new Ext.dom.Element(m)}}},frameInfoCache:{}}},0,0,0,0,0,0,[Ext.util,"Renderable"],0));(Ext.cmd.derive("Ext.state.Provider",Ext.Base,{prefix:"ext-",constructor:function(a){var b=this;Ext.apply(b,a);b.state={};b.mixins.observable.constructor.call(b)},get:function(a,b){var c=this.state[a];return c===undefined?b:c},clear:function(a){var b=this;delete b.state[a];b.fireEvent("statechange",b,a,null)},set:function(b,a){var c=this;c.state[b]=a;c.fireEvent("statechange",c,b,a)},decodeValue:function(m){var g=this,c=/^(a|n|d|b|s|o|e)\:(.*)$/,f=c.exec(unescape(m)),o,h,d,b,j,a;if(!f||!f[1]){return}h=f[1];m=f[2];switch(h){case"e":return null;case"n":return parseFloat(m);case"d":return new Date(Date.parse(m));case"b":return(m==="1");case"a":o=[];if(m){b=m.split("^");j=b.length;for(a=0;a<j;a++){m=b[a];o.push(g.decodeValue(m))}}return o;case"o":o={};if(m){b=m.split("^");j=b.length;for(a=0;a<j;a++){m=b[a];d=m.split("=");o[d[0]]=g.decodeValue(d[1])}}return o;default:return m}},encodeValue:function(g){var a="",f=0,c,b,d;if(g==null){return"e:1"}else{if(typeof g==="number"){c="n:"+g}else{if(typeof g==="boolean"){c="b:"+(g?"1":"0")}else{if(Ext.isDate(g)){c="d:"+g.toUTCString()}else{if(Ext.isArray(g)){for(b=g.length;f<b;f++){a+=this.encodeValue(g[f]);if(f!==b-1){a+="^"}}c="a:"+a}else{if(typeof g==="object"){for(d in g){if(typeof g[d]!=="function"&&g[d]!==undefined){a+=d+"="+this.encodeValue(g[d])+"^"}}c="o:"+a.substring(0,a.length-1)}else{c="s:"+g}}}}}}return escape(c)}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.state,"Provider"],0));(Ext.cmd.derive("Ext.state.Manager",Ext.Base,{singleton:true,constructor:function(){this.provider=new Ext.state.Provider()},setProvider:function(a){this.provider=a},get:function(b,a){return this.provider.get(b,a)},set:function(a,b){this.provider.set(a,b)},clear:function(a){this.provider.clear(a)},getProvider:function(){return this.provider}},1,0,0,0,0,0,[Ext.state,"Manager"],0));(Ext.cmd.derive("Ext.state.Stateful",Ext.Base,{mixinId:"state",stateful:false,saveDelay:100,constructor:function(){var a=this;if(!a.stateEvents){a.stateEvents=[]}if(a.stateful!==false){a.addStateEvents(a.stateEvents);a.initState()}},addStateEvents:function(f){var a=this,d,g,c,b;if(a.stateful&&a.getStateId()){b=(typeof f==="string")?arguments:f;c=a.stateEventsByName||(a.stateEventsByName={});for(d=b.length;d--;){g=b[d];if(g&&!c[g]){c[g]=1;a.on(g,a.onStateChange,a)}}}},onStateChange:function(){var a=this,c=a.saveDelay,b,d;if(!a.stateful){return}if(c){if(!a.stateTask){b=Ext.state.Stateful;d=b.runner||(b.runner=new Ext.util.TaskRunner());a.stateTask=d.newTask({run:a.saveState,scope:a,interval:c,repeat:1,fireIdleEvent:false})}a.stateTask.start()}else{a.saveState()}},saveState:function(){var c=this,g=c.stateful&&c.getStateId(),b=c.hasListeners,h,m,j,a,f,d;if(g){f=c.getState()||{};h=c.getPlugins()||[];for(j=0,a=h.length;j<a;j++){m=h[j];if(m&&m.getState){d=m.getState(f);if(d&&!f[m.ptype]){f[m.ptype]=d}}}if(!b.beforestatesave||c.fireEvent("beforestatesave",c,f)!==false){Ext.state.Manager.set(g,f);if(b.statesave){c.fireEvent("statesave",c,f)}}}},getState:function(){return null},applyState:function(a){if(a){Ext.apply(this,a)}},getStateId:function(){var a=this;return a.stateId||(a.autoGenId?null:a.id)},initState:function(){var b=this,f=b.stateful&&b.getStateId(),a=b.hasListeners,d,c,j,o,h,m,g;if(f){c=Ext.state.Manager.get(f);if(c){d=Ext.apply({},c);if(!a.beforestaterestore||b.fireEvent("beforestaterestore",b,c)!==false){h=b.getPlugins()||[];for(j=0,o=h.length;j<o;j++){m=h[j];if(m){g=m.ptype;if(m.applyState){m.applyState(d[g],c)}delete d[g]}}b.applyState(d);if(a.staterestore){b.fireEvent("staterestore",b,c)}}}}},savePropToState:function(a,g,f){var c=this,d=c[a],b=c.initialConfig;if(c.hasOwnProperty(a)){if(!b||b[a]!==d){if(g){g[f||a]=d}return true}}return false},savePropsToState:function(b,f){var d=this,c,a;if(typeof b==="string"){d.savePropToState(b,f)}else{for(c=0,a=b.length;c<a;++c){d.savePropToState(b[c],f)}}return f},destroy:function(){var b=this,a=b.stateTask;if(a){a.destroy();b.stateTask=null}b.clearListeners()}},1,0,0,0,0,0,[Ext.state,"Stateful"],0));(Ext.cmd.derive("Ext.util.Focusable",Ext.Base,{mixinId:"focusable",hasFocus:false,focusable:false,focusCls:"focus",initFocusable:Ext.emptyFn,initFocusableEvents:function(){this.initFocusableElement()},getFocusClsEl:function(){return this.getFocusEl()},getFocusEl:function(){return this.element||this.el},destroyFocusable:function(){var a=this;Ext.destroy(a.focusListeners);a.focusListeners=a.focusEnterEvent=a.focusTask=null;a.focusEl=a.ariaEl=null},enableFocusable:Ext.emptyFn,disableFocusable:function(){var b=this,d,a=b.focusCls,c;if(b.hasFocus){d=b.findFocusTarget();if(d){d.focus()}}c=b.getFocusClsEl();if(a&&c){c.removeCls(b.removeClsWithUI(a,true))}},isFocusable:function(b){var a=this,c;if(!a.focusable&&(!a.isContainer||!b)){return false}c=a.getFocusEl();if(c&&a.canFocus()){return c.isFocusable(b)}return false},canFocus:function(d,b){var a=this,c;c=(a.isContainer||a.focusable)&&a.rendered&&!a.destroying&&!a.destroyed&&!a.disabled&&(d||a.isVisible(true));return c||(b&&!!a.findFocusTarget())},focus:function(f,b,h,c){var d=this,j,g,a;if((!d.focusable&&!d.isContainer)||d.destroyed||d.destroying){return}if(b){d.getFocusTask().delay(Ext.isNumber(b)?b:10,d.focus,d,[f,false,h,c]);return d}d.cancelFocus();if(d.canFocus()){if(j=d.getFocusEl()){if(j.isComponent){return j.focus(f,b,h,c)}g=j.dom;if(g){if(d.floating){a=d.container.dom.scrollTop}j.focus();if(f){if(Ext.isArray(f)){if(d.selectText){d.selectText.apply(d,f)}}else{if(g.select){g.select()}else{if(d.selectText){d.selectText()}}}}Ext.callback(h,c)}if(d.floating){if(a!==undefined){d.container.dom.scrollTop=a}}}}else{j=d.findFocusTarget();if(j){return j.focus(f,b,h,c)}}return d},cancelFocus:function(){var a=this.getFocusTask();if(a){a.cancel()}},beforeBlur:Ext.emptyFn,onBlur:function(b){var a=this,d=a.focusableContainer,f=a.focusCls,c;if(!a.focusable||a.destroying){return}a.beforeBlur(b);if(d){d.beforeFocusableChildBlur(a,b)}c=a.getFocusClsEl();if(f&&c){c.removeCls(a.removeClsWithUI(f,true))}if(a.validateOnBlur){a.validate()}a.hasFocus=false;a.fireEvent("blur",a,b);a.postBlur(b);if(d){d.afterFocusableChildBlur(a,b)}},postBlur:Ext.emptyFn,beforeFocus:Ext.emptyFn,onFocus:function(b){var a=this,d=a.focusableContainer,f=a.focusCls,c;if(!a.focusable){return}if(a.canFocus()){a.beforeFocus(b);if(d){d.beforeFocusableChildFocus(a,b)}c=a.getFocusClsEl();if(f&&c){c.addCls(a.addClsWithUI(f,true))}if(!a.hasFocus){a.hasFocus=true;a.fireEvent("focus",a,b)}a.postFocus(b);if(d){d.afterFocusableChildFocus(a,b)}}},postFocus:Ext.emptyFn,getTabIndex:function(){var a=this,c,b;if(!a.focusable){return}c=a.rendered&&a.getFocusEl();if(c){if(c.isComponent){b=c.getTabIndex()}else{if(c.isElement){b=c.getAttribute("tabIndex")}else{return}}a.tabIndex=b}else{b=a.tabIndex}return b-0},setTabIndex:function(b,c){var a=this,d;if(!a.focusable){return}a.tabIndex=b;if(!a.rendered){return}d=c||a.getFocusEl();if(d){if(d.isComponent){d.setTabIndex(b)}else{if(d.isElement){d.set({tabIndex:b})}}}},onFocusEnter:function(b){var a=this;if(a.floating&&a!==a.zIndexManager.getActive()){a.toFront(true)}a.focusEnterEvent=b;a.containsFocus=true;a.fireEvent("focusenter",a,b)},onFocusLeave:function(b){var a=this;a.focusEnterEvent=null;a.containsFocus=false;a.fireEvent("focusleave",a,b)},privates:{revertFocus:function(){var b=this,a=b.previousFocus,d=b.focusEnterEvent,c;b.previousFocus=null;if(b.preventRefocus||!b.el.contains(Ext.Element.getActiveElement())){return}c=a||(d&&d.fromComponent);if(c){if(c.canFocus&&c.canFocus(false,true)){c.focus();return}else{if(c.nodeType){c=Ext.fly(c)}if(c.isFocusable&&c.isFocusable()){c.focus();return}}}if(d){c=Ext.fly(d.relatedTarget);if(Ext.isIE8||(c.isFocusable&&c.isFocusable())){c.focus()}}},findFocusTarget:function(){var c=this,b,a;for(b=c.up(":not([disabled])");b;b=b.up(":not([disabled])")){a=Ext.ComponentQuery.query(":focusable:not([hasFocus])",b);if(a.length){return a[0]}if(b.isFocusable&&b.isFocusable()){return b}}},initFocusableElement:function(){var a=this,b=a.tabIndex,c=a.getFocusEl();if(c&&!c.isComponent){a.focusEl=c;if(b!=null&&a.canFocus(true)){a.setTabIndex(b,c)}c.dom.setAttribute("data-componentid",a.id);if(a.config.keyHandlers){a.initKeyHandlers(c)}}},getFocusTask:function(){if(!this.focusTask){this.focusTask=Ext.focusTask}return this.focusTask},handleFocusEvent:function(b){var a;if(this.isFocusing(b)){a=new Ext.event.Event(b.event);a.type="focus";a.relatedTarget=b.fromElement;a.target=b.toElement;this.onFocus(a)}},handleBlurEvent:function(b){var a;if(this.isBlurring(b)){a=new Ext.event.Event(b.event);a.type="blur";a.target=b.fromElement;a.relatedTarget=b.toElement;this.onBlur(a)}},isFocusing:function(d){var b=d.fromElement,a=d.toElement,c;if(this.focusable){c=this.getFocusEl();if(c){if(c.isComponent){return c.isFocusing(b,a)}else{return a===c.dom&&b!==a}}}return false},isBlurring:function(d){var b=d.fromElement,a=d.toElement,c;if(this.focusable){c=this.getFocusEl();if(c){if(c.isComponent){return c.isBlurring(b,a)}else{return b===c.dom&&b!==a}}}return false},blur:function(){var b=this,a;if(!b.focusable||!b.canFocus()){return}a=b.getFocusEl();if(a){b.blurring=true;a.blur();delete b.blurring}return b},disableTabbing:function(){var a=this,c=a.el,b;if(c){c.saveTabbableState()}b=a.getFocusEl();if(b){if(b.isComponent){b.disableTabbing()}else{if(b.isElement&&c&&!c.contains(b)){b.saveTabbableState()}}}},enableTabbing:function(){var a=this,c=a.el,b;b=a.getFocusEl();if(b){if(b.isComponent){b.enableTabbing()}else{if(b.isElement&&c&&!c.contains(b)){b.restoreTabbableState()}}}if(c){c.restoreTabbableState()}}}},0,0,0,0,0,0,[Ext.util,"Focusable"],function(){if(!Ext.focusTask){Ext.focusTask=new Ext.util.DelayedTask()}}));(Ext.cmd.derive("Ext.mixin.Accessible",Ext.Mixin,{mixinConfig:{id:"accessible"},config:{ariaAttributes:{$value:null,lazy:true}},privates:{getAriaLabelEl:function(c){var f=[],h,d,b,g,a;if(c){if(Ext.isFunction(c)){return c.call(this)}else{if(!Ext.isArray(c)){c=[c]}h=this.lookupReferenceHolder();if(h){for(d=0,b=c.length;d<b;d++){g=h.lookupReference(c[d]);if(g){f.push(g.ariaEl.id)}}}}}return f.length?f.join(" "):null}}},0,0,0,0,0,0,[Ext.mixin,"Accessible"],0));(Ext.cmd.derive("Ext.util.KeyboardInteractive",Ext.Mixin,{mixinConfig:{id:"keyboardinteractive"},config:{keyHandlers:{$value:null,lazy:true}},initKeyHandlers:function(d){var b=this,c=b.getKeyHandlers(),a;for(a in c){d.on("keydown",b.handleKeydown,b);b.keydownListenerAttached=true;break}},applyKeyHandlers:function(d){var g=this,b={},a,f,h,c,j;if(d){for(f in d){c=d[f];if(typeof c==="function"){b[f]=c}else{b[f]=g[c]}}if(g.focusable&&g.rendered&&!g.destroyed&&!g.destroying){a=g.getFocusEl();if(a&&!g.keydownListenerAttached){a.on("keydown",g.handleKeydown,g);g.keydownListenerAttached=true}}}return b},handleKeydown:function(b){var a=this,d,c;d=b.getKeyName();if(d){c=a.getKeyHandlers()[d];if(c){c.call(a,b)}}}},0,0,0,0,0,0,[Ext.util,"KeyboardInteractive"],0));(Ext.cmd.derive("Ext.Component",Ext.Base,{alternateClassName:"Ext.AbstractComponent",statics:{AUTO_ID:1000,pendingLayouts:null,layoutSuspendCount:0,DIRECTION_TOP:"top",DIRECTION_RIGHT:"right",DIRECTION_BOTTOM:"bottom",DIRECTION_LEFT:"left",VERTICAL_DIRECTION_Re:/^(?:top|bottom)$/,INVALID_ID_CHARS_Re:/[\.,\s]/g,ariaHighContrastModeCls:"x-aria-highcontrast",cancelLayout:function(b,a){var c=this.runningLayoutContext||this.pendingLayouts;if(c){c.cancelComponent(b,false,a)}},fromElement:function(a,c,b){return Ext.ComponentManager.fromElement(a,c,b)},flushLayouts:function(){var b=this,a=b.pendingLayouts;if(a&&a.invalidQueue.length){b.pendingLayouts=null;b.runningLayoutContext=a;Ext.override(a,{runComplete:function(){b.runningLayoutContext=null;var c=this.callParent();if(Ext.GlobalEvents.hasListeners.afterlayout){Ext.GlobalEvents.fireEvent("afterlayout")}return c}});a.run()}},resumeLayouts:function(a){if(this.layoutSuspendCount&&!--this.layoutSuspendCount){if(a){this.flushLayouts()}if(Ext.GlobalEvents.hasListeners.resumelayouts){Ext.GlobalEvents.fireEvent("resumelayouts")}}},suspendLayouts:function(){++this.layoutSuspendCount},updateLayout:function(d,b){var f=this,c=f.runningLayoutContext,a;if(c){c.queueInvalidate(d)}else{a=f.pendingLayouts||(f.pendingLayouts=new Ext.layout.Context());a.queueInvalidate(d);if(!b&&!f.layoutSuspendCount&&!d.isLayoutSuspended()){f.flushLayouts()}}}},$configPrefixed:false,$configStrict:false,config:{data:null,maxHeight:null,maxWidth:null,minHeight:null,minWidth:null,scrollable:null},defaultBindProperty:"html",alignTarget:null,autoRender:false,autoShow:false,baseCls:"x-component",childEls:{frameTable:{frame:true},frameTL:{frame:"tl"},frameTC:{frame:"tc"},frameTR:{frame:"tr"},frameML:{frame:"ml"},frameBody:{frame:"mc"},frameMR:{frame:"mr"},frameBL:{frame:"bl"},frameBC:{frame:"bc"},frameBR:{frame:"br"}},componentLayout:"autocomponent",defaultAlign:"c-c",disabled:false,disabledRe:/^(?:button|input|select|textarea|optgroup|option|fieldset)$/i,nonMaskableRe:(function(){var a=["input","select","textarea","optgroup","option","table"];if(Ext.isIE9m&&!(Ext.isIE9&&!Ext.isIEQuirks)){a.push("p")}return new RegExp("^(?:"+a.join("|")+")$","i")}()),disabledCls:"x-item-disabled",draggable:false,floating:false,hidden:false,hideMode:"display",maskElement:null,renderTpl:['<tpl if="renderScroller">','<div class="{scrollerCls}" style="{%this.renderPadding(out, values)%}">',"</tpl>","{%this.renderContent(out,values)%}",'<tpl if="renderScroller"></div></tpl>'],resizeHandles:"all",shrinkWrap:2,toFrontOnShow:true,synthetic:false,tplWriteMode:"overwrite",ui:"default",uiCls:[],userCls:null,weight:null,allowDomMove:true,autoGenId:false,borderBoxCls:"x-border-box",componentLayoutCounter:0,contentPaddingProperty:"padding",deferLayouts:false,frameSize:null,horizontalPosProp:"left",isComponent:true,_isLayoutRoot:false,layoutSuspendCount:0,liquidLayout:false,maskOnDisable:true,offsetsCls:"x-hidden-offsets",rendered:false,rootCls:"x-body",scrollerCls:"x-scroll-scroller",scrollerSelector:".x-scroll-scroller",_scrollFlags:{auto:{auto:{overflowX:"auto",overflowY:"auto",x:true,y:true,both:true},"false":{overflowX:"auto",overflowY:"hidden",x:true,y:false,both:false},scroll:{overflowX:"auto",overflowY:"scroll",x:true,y:true,both:true}},"false":{auto:{overflowX:"hidden",overflowY:"auto",x:false,y:true,both:false},"false":{overflowX:"hidden",overflowY:"hidden",x:false,y:false,both:false},scroll:{overflowX:"hidden",overflowY:"scroll",x:false,y:true,both:false}},scroll:{auto:{overflowX:"scroll",overflowY:"auto",x:true,y:true,both:true},"false":{overflowX:"scroll",overflowY:"hidden",x:true,y:false,both:false},scroll:{overflowX:"scroll",overflowY:"scroll",x:true,y:true,both:true}},none:{overflowX:"",overflowY:"",x:false,y:false,both:false}},_scrollableCfg:{x:{x:true,y:false},y:{x:false,y:true},horizontal:{x:true,y:false},vertical:{x:false,y:true},both:{x:true,y:true},"true":{x:true,y:true}},validIdRe:Ext.validIdRe,constructor:function(d){var o=this,g,m,a,j,c,h,f,b;d=d||{};if(d.initialConfig){if(d.isAction){o.baseAction=d}d=d.initialConfig}else{if(d.tagName||d.dom||Ext.isString(d)){d={applyTo:d,id:d.id||d}}}o.initialConfig=d;o.getId();o.protoEl=new Ext.util.ProtoElement();o.initConfig(d);if(o.scrollable==null){c=o.autoScroll;if(c){b=!!c}else{h=o.overflowX;f=o.overflowY;if(h||f){b={x:(h&&h!=="hidden")?h:false,y:(f&&f!=="hidden")?f:false}}}if(b){o.setScrollable(b)}}a=o.xhooks;if(a){delete o.xhooks;Ext.override(o,a)}o.mixins.elementCt.constructor.call(o);o.setupProtoEl();if(o.cls){o.initialCls=o.cls;o.protoEl.addCls(o.cls)}if(o.style){o.initialStyle=o.style;o.protoEl.setStyle(o.style)}o.renderData=o.renderData||{};o.initComponent();if(!o.preventRegister){Ext.ComponentManager.register(o)}o.mixins.state.constructor.call(o);o.addStateEvents("resize");j=o.getController();if(j){j.init(o)}if(o.plugins){for(g=0,m=o.plugins.length;g<m;g++){o.plugins[g]=o.initPlugin(o.plugins[g])}}o.loader=o.getLoader();if(o.disabled){o.disabled=false;o.disable(true)}if(o.renderTo){o.render(o.renderTo)}if(o.autoShow&&!o.$initParent){o.show()}if(o.baseAction){o.baseAction.addComponent(o)}},beforeInitConfig:function(){this.mixins.observable.constructor.call(this)},addCls:function(b){var a=this,c=a.rendered?a.el:a.protoEl;c.addCls.apply(c,arguments);return a},addClsWithUI:function(h,c){var b=this,a=[],m=0,j=b.uiCls=Ext.Array.clone(b.uiCls),g=b.activeUI,f,d;if(typeof h==="string"){h=(h.indexOf(" ")<0)?[h]:Ext.String.splitWords(h)}f=h.length;for(;m<f;m++){d=h[m];if(d&&!b.hasUICls(d)){j.push(d);if(g){a=a.concat(b.addUIClsToElement(d))}}}if(c!==true&&g){b.addCls(a)}return a},afterComponentLayout:function(f,c,d,a){var g=this,b;if(++g.componentLayoutCounter===1){b=g.scrollable;if(b){if(g.touchScroll&&b.isTouchScroller){b.setInnerElement(g.getScrollerEl())}b.setElement(g.getOverflowEl());if(Ext.isIE){Ext.on("show",g.onGlobalShow,g)}}g.afterFirstLayout(f,c)}if(f!==d||c!==a){g.onResize(f,c,d,a)}if(g.floating){g.onAfterFloatLayout()}},addPlugin:function(b){var a=this;b=a.constructPlugin(b);if(a.plugins){a.plugins.push(b)}else{a.plugins=[b]}if(a.pluginsInitialized){a.initPlugin(b)}return b},addPropertyToState:function(b,a,f){var d=this,c=arguments.length;if(c===3||d.hasOwnProperty(a)){if(c<3){f=d[a]}if(f!==d.initialConfig[a]){(b||(b={}))[a]=f}}return b},addUIClsToElement:function(h){var d=this,a=d.baseCls+"-"+d.ui+"-"+h,j=["x-"+h,d.baseCls+"-"+h,a],c,g,b,f;if(d.rendered&&d.frame&&!Ext.supports.CSS3BorderRadius){a+="-";c=d.getChildEls();for(g in c){f=c[g].frame;if(f&&f!==true){b=d[g];if(b){b.addCls(a+f)}}}}return j},removeUIClsFromElement:function(h){var d=this,a=d.baseCls+"-"+d.ui+"-"+h,j=["x-"+h,d.baseCls+"-"+h,a],c,g,b,f;if(d.rendered&&d.frame&&!Ext.supports.CSS3BorderRadius){a+="-";c=d.getChildEls();for(g in c){f=c[g].frame;if(f&&f!==true){b=d[g];if(b){b.removeCls(a+f)}}}}return j},adjustPosition:function(c,b){var d=this,a;if(d.isContainedFloater()){a=d.floatParent.getTargetEl().getViewRegion();c+=a.left;b+=a.top}return{x:c,y:b}},afterHide:function(c,a){var b=this,d=b.focusableContainer;b.hiddenByLayout=null;if(this.ownerLayout){this.updateLayout({isRoot:false})}Ext.callback(c,a||b);b.fireHierarchyEvent("hide");b.fireEvent("hide",b);if(d){d.onFocusableChildHide(b)}},afterSetPosition:function(b,a){var c=this;c.onPosition(b,a);if(c.hasListeners.move){c.fireEvent("move",c,b,a)}},afterShow:function(g,a,d){var f=this,h=f.el,j,b,c;g=f.getAnimateTarget(g);if(!f.ghost){g=null}if(g){b={x:h.getX(),y:h.getY(),width:h.dom.offsetWidth,height:h.dom.offsetHeight};j={x:g.getX(),y:g.getY(),width:g.dom.offsetWidth,height:g.dom.offsetHeight};h.addCls(f.offsetsCls);c=f.ghost();c.el.stopAnimation();c.setX(-10000);f.ghostBox=b;c.el.animate({from:j,to:b,listeners:{afteranimate:function(){delete c.componentLayout.lastComponentSize;f.unghost();delete f.ghostBox;h.removeCls(f.offsetsCls);f.onShowComplete(a,d)}}})}else{f.onShowComplete(a,d)}f.fireHierarchyEvent("show")},animate:function(c){var z=this,g,q,o,a,d,b,p,u,r,f,v,s,j,t,y,m;c=c||{};d=c.to||{};if(Ext.fx.Manager.hasFxBlock(z.id)){return z}g=Ext.isDefined(d.width);if(g){a=Ext.Number.constrain(d.width,z.minWidth,z.maxWidth)}q=Ext.isDefined(d.height);if(q){o=Ext.Number.constrain(d.height,z.minHeight,z.maxHeight)}if(!c.dynamic&&(g||q)){u=(c.from?c.from.width:undefined)||z.getWidth();r=u;f=(c.from?c.from.height:undefined)||z.getHeight();v=f;s=false;if(q&&o>f){v=o;s=true}if(g&&a>u){r=a;s=true}if(q||g){m=z.el.getStyle("overflow");if(m!=="hidden"){z.el.setStyle("overflow","hidden")}}if(s){b=!Ext.isNumber(z.width);p=!Ext.isNumber(z.height);z.setSize(r,v);z.el.setSize(u,f);if(b){delete z.width}if(p){delete z.height}}if(g){d.width=a}if(q){d.height=o}}j=z.constrain;t=z.constrainHeader;if(j||t){z.constrain=z.constrainHeader=false;y=c.callback;c.callback=function(){z.constrain=j;z.constrainHeader=t;if(y){y.call(c.scope||z,arguments)}if(m!=="hidden"){z.el.setStyle("overflow",m)}}}return z.mixins.animate.animate.apply(z,arguments)},applyScrollable:function(c,f){var b=this,a=b.rendered,g,d;if(c){if(c===true||typeof c==="string"){g=b._scrollableCfg[c];c=g}if(f){f.setConfig(c);c=f}else{c=Ext.Object.chain(c);if(a){c.element=b.getOverflowEl();d=b.getScrollerEl();if(d){c.innerElement=d}}c.autoRefresh=false;if(Ext.supports.touchScroll===1){c.translatable={translationMethod:"scrollparent"};c.indicators=false}c=Ext.scroll.Scroller.create(c);c.component=b}}else{if(f){f.setConfig({x:false,y:false});f.destroy();c=null}}if(b.rendered&&!b.destroying&&!b.destroyed){if(c){b.getOverflowStyle()}else{b.scrollFlags=b._scrollFlags.none}b.updateLayout()}return c},beforeComponentLayout:function(){return true},beforeDestroy:Ext.emptyFn,beforeLayout:function(){if(this.floating){this.onBeforeFloatLayout()}},beforeSetPosition:function(d,b,g){var a=this,c=null,j,h,f,m;if(d){if(Ext.isNumber(j=d[0])){g=b;b=d[1];d=j}else{if((j=d.x)!==undefined){g=b;b=d.y;d=j}}}if(a.constrain||a.constrainHeader){c=a.calculateConstrainedPosition(null,[d,b],true);if(c){d=c[0];b=c[1]}}h=(d!==undefined);f=(b!==undefined);if(h||f){a.x=d;a.y=b;m=a.adjustPosition(d,b);c={x:m.x,y:m.y,anim:g,hasX:h,hasY:f}}return c},beforeShow:Ext.emptyFn,bubble:function(a,d,c){var b=this;while(b){if(a.apply(d||b,c||[b])===false){break}b=b.getBubbleTarget()}return this},clearListeners:function(){var a=this;a.mixins.observable.clearListeners.call(a);a.mixins.componentDelegation.clearDelegatedListeners.call(a)},cloneConfig:function(a){a=a||{};var b=a.id||Ext.id(),c=Ext.applyIf(a,this.initialConfig),d;c.id=b;d=Ext.getClass(this);return new d(c)},destroy:function(){var g=this,c=g.renderSelectors,b=g.getConfig("viewModel",true),h=g.getConfig("session",true),a,f,d;if(!g.hasListeners.beforedestroy||g.fireEvent("beforedestroy",g)!==false){g.isDestroying=g.destroying=true;f=g.floatParent||g.ownerCt;if(g.floating){delete g.floatParent;if(g.zIndexManager){g.zIndexManager.unregister(g);g.zIndexManager=null}}g.removeBindings();g.beforeDestroy();g.destroyBindable();if(f&&f.remove){f.remove(g,false)}g.stopAnimation();g.onDestroy();Ext.destroy(g.plugins);if(g.rendered){Ext.Component.cancelLayout(g,true)}g.componentLayout=null;if(g.hasListeners.destroy){g.fireEvent("destroy",g)}if(!g.preventRegister){Ext.ComponentManager.unregister(g)}g.mixins.state.destroy.call(g);if(g.floating){g.onFloatDestroy()}g.clearListeners();if(g.rendered){if(!g.preserveElOnDestroy){g.el.destroy()}g.el.component=null;g.mixins.elementCt.destroy.call(g);if(c){for(a in c){if(c.hasOwnProperty(a)){d=g[a];if(d){delete g[a];d.destroy()}}}}g.data=g.el=g.frameBody=g.rendered=g.afterRenderEvents=null;g.tpl=g.renderTpl=g.renderData=null;g.focusableContainer=g.container=g.scrollable=null}g.isDestroying=g.destroying=false;g.callParent()}},disable:function(f,b){var a=this,d=a.focusableContainer,c=a.getInherited();if(!b){c.disabled=true;a.savedDisabled=true}if(a.maskOnDisable){c.disableMask=true}if(!a.disabled){if(d){d.beforeFocusableChildDisable(a)}a.addCls(a.disabledCls);if(a.rendered){a.onDisable()}else{a.disableOnRender=true}a.disabled=true;if(f!==true){a.fireEvent("disable",a)}if(d){d.onFocusableChildDisable(a)}}return a},doFireEvent:function(d,a,c){var b=this,f=b.mixins.observable.doFireEvent.call(b,d,a,c);if(f!==false){f=b.mixins.componentDelegation.doFireDelegatedEvent.call(b,d,a)}return f},enable:function(f,b){var a=this,d=a.focusableContainer,c=a.getInherited();if(!b){delete a.getInherited().disabled;a.savedDisabled=false}if(a.maskOnDisable){delete c.disableMask}if(a.disabled){if(!(b&&c.hasOwnProperty("disabled"))){if(d){d.beforeFocusableChildEnable(a)}a.disableOnRender=false;a.removeCls(a.disabledCls);if(a.rendered){a.onEnable()}a.disabled=false;if(f!==true){a.fireEvent("enable",a)}if(d){d.onFocusableChildEnable(a)}}}return a},findParentBy:function(a){var b;for(b=this.getRefOwner();b&&!a(b,this);b=b.getRefOwner()){}return b||null},findParentByType:function(a){return Ext.isFunction(a)?this.findParentBy(function(b){return b.constructor===a}):this.up(a)},findPlugin:function(b){var d,c=this.plugins,a=c&&c.length;for(d=0;d<a;d++){if(c[d].ptype===b){return c[d]}}},getAnimateTarget:function(a){a=a||this.animateTarget;if(a){a=a.isComponent?a.getEl():Ext.get(a)}return a||null},getBubbleTarget:function(){return this.getRefOwner()},getComponentLayout:function(){var a=this;if(!a.componentLayout||!a.componentLayout.isLayout){a.setComponentLayout(Ext.layout.Layout.create(a.componentLayout,"autocomponent"))}return a.componentLayout},getEl:function(){return this.el},getHeight:function(){return this.el.getHeight()},initInheritedState:function(b){var a=this,c=a.componentLayout;if(a.hidden){b.hidden=true}if(a.collapseImmune){b.collapseImmune=true}if(a.modelValidation!==undefined){b.modelValidation=a.modelValidation}if(a.savedDisabled){b.disabled=true}a.mixins.bindable.initInheritedState.call(a,b);if(c&&c.initInheritedState){c.initInheritedState(b)}},getId:function(){var a=this,b;if(!(a.id||(a.id=a.initialConfig.id))){b=a.getXType();if(b){b=b.replace(Ext.Component.INVALID_ID_CHARS_Re,"-")}else{b=Ext.name.toLowerCase()+"-comp"}a.id=b+"-"+a.getAutoId()}return a.id},getItemId:function(){return this.itemId||this.id},getLoader:function(){var b=this,a=b.loader;if(a){if(!a.isLoader){b.loader=new Ext.ComponentLoader(Ext.apply({target:b},a))}else{a.setTarget(b)}return b.loader}return null},getMaskTarget:function(){return this.maskElement?this[this.maskElement]:null},getPlugin:function(d){var a,c=this.plugins,b=c&&c.length;for(a=0;a<b;a++){if(c[a].pluginId===d){return c[a]}}return null},getPosition:function(c){var d=this,a,f=d.isContainedFloater(),b;if((c===true)&&!f){return[d.getLocalX(),d.getLocalY()]}a=d.getXY();if((c===true)&&f){b=d.floatParent.getTargetEl().getViewRegion();a[0]-=b.left;a[1]-=b.top}return a},getScrollX:function(){var a=this.getScrollable();return a?a.getPosition().x:0},getScrollY:function(){var a=this.getScrollable();return a?a.getPosition().y:0},getSize:function(a){return this.el.getSize(a)},getSizeModel:function(d){var f=this,p=Ext.layout.SizeModel,t=f.componentLayout.ownerContext,r=f.width,j=f.height,o,s,a,v,b,g,m,q,h,c,u=f.floating||f.floated;if(t){c=t.widthModel;b=t.heightModel}if(!c||!b){a=((o=typeof r)==="number");v=((s=typeof j)==="number");h=u||!(g=f.ownerLayout);if(h){m=Ext.layout.Layout.prototype.autoSizePolicy;q=u?3:f.shrinkWrap;if(a){c=p.configured}if(v){b=p.configured}}else{m=g.getItemSizePolicy(f,d);q=g.isItemShrinkWrap(f)}if(t){t.ownerSizePolicy=m}q=(q===true)?3:(q||0);if(h&&q){if(r&&o==="string"){q&=2}if(j&&s==="string"){q&=1}}if(q!==3){if(!d){d=f.ownerCt&&f.ownerCt.getSizeModel()}if(d){q|=(d.width.shrinkWrap?1:0)|(d.height.shrinkWrap?2:0)}}if(!c){if(!m.setsWidth){if(a){c=p.configured}else{c=(q&1)?p.shrinkWrap:p.natural}}else{if(m.readsWidth){if(a){c=p.calculatedFromConfigured}else{c=(q&1)?p.calculatedFromShrinkWrap:p.calculatedFromNatural}}else{c=p.calculated}}}if(!b){if(!m.setsHeight){if(v){b=p.configured}else{b=(q&2)?p.shrinkWrap:p.natural}}else{if(m.readsHeight){if(v){b=p.calculatedFromConfigured}else{b=(q&2)?p.calculatedFromShrinkWrap:p.calculatedFromNatural}}else{b=p.calculated}}}}return c.pairsByHeightOrdinal[b.ordinal]},getState:function(){var c=this,a=null,b=c.getSizeModel();if(b.width.configured){a=c.addPropertyToState(a,"width")}if(b.height.configured){a=c.addPropertyToState(a,"height")}return a},getUserCls:function(){return this.userCls},setUserCls:function(b){var c=this,a=c.userCls;if(b!==a){c.userCls=b;if(c.rendered){c.el.replaceCls(a,b)}}return a},getWidth:function(){return this.el.getWidth()},getXType:function(){return this.self.xtype},getXTypes:function(){var a=this.self,b,d,c;if(!a.xtypes){b=[];d=this;while(d){c=d.xtypes;if(c!==undefined){b.unshift.apply(b,c)}d=d.superclass}a.xtypeChain=b;a.xtypes=b.join("/")}return a.xtypes},hasCls:function(a){var b=this.rendered?this.el:this.protoEl;return b.hasCls.apply(b,arguments)},hasUICls:function(b){var c=this,a=c.uiCls||[];return Ext.Array.contains(a,b)},hide:function(b,c,d){var a=this;if(a.pendingShow){a.pendingShow=false}if(!(a.rendered&&!a.isVisible())){if(!a.hasListeners.beforehide||a.fireEvent("beforehide",a)!==false||a.hierarchicallyHidden){a.getInherited().hidden=a.hidden=true;a.fireHierarchyEvent("beforehide");if(a.rendered){a.onHide.apply(a,arguments)}}}return a},initComponent:function(){var a=this,c=a.width,b=a.height;if(a.plugins&&!a.plugins.processed){a.plugins=a.constructPlugins()}a.pluginsInitialized=true;if(c!=null||b!=null){a.setSize(c,b)}if(a.listeners){a.on(a.listeners);a.listeners=null}if(a.focusable){a.initFocusable()}},initEvents:function(){var f=this,h=f.afterRenderEvents,b,d,g,c,a;if(h){for(g in h){d=f[g];if(d&&d.on){b=h[g];for(c=0,a=b.length;c<a;++c){f.mon(d,b[c])}}}}if(f.focusable){f.initFocusableEvents()}},is:function(a){return Ext.ComponentQuery.is(this,a)},isDescendantOf:function(a){var b;for(b=this.getRefOwner();b&&b!==a;b=b.getRefOwner()){}return b||null},isAncestor:function(a){while(a){if(a.getRefOwner()===this){return true}a=a.getRefOwner()}},isDisabled:function(){return this.disabled},isDraggable:function(){return !!this.draggable},isDroppable:function(){return !!this.droppable},isFloating:function(){return this.floating},isHidden:function(){return this.hidden},isHierarchicallyHidden:function(){var b=this,a=false,c,d;for(;(c=b.ownerCt||b.floatParent);b=c){d=c.getInherited();if(d.hidden){a=true;break}if(b.getInherited().collapseImmune){if(c.collapsed&&!b.collapseImmune){a=true;break}}else{a=!!d.collapsed;break}}return a},isLayoutChild:function(a){return !this.floating&&!!this.up(a)},isLayoutRoot:function(){var a=this,b=a.ownerLayout;if(!b||a._isLayoutRoot||a.floating){return true}return b.isItemLayoutRoot(a)},isLayoutSuspended:function(){var a=this,b;while(a){if(a.layoutSuspendCount||a.suspendLayout){return true}b=a.ownerLayout;if(!b){break}a=b.owner}return false},isVisible:function(b){var c=this,a;if(c.hidden||!c.rendered||c.destroyed){a=true}else{if(b){a=c.isHierarchicallyHidden()}}return !a},isXType:function(b,a){return a?(Ext.Array.indexOf(this.xtypes,b)!==-1):!!this.xtypesMap[b]},isMasked:function(a){var b=this;return !!(b.masked||(b.loadMask&&b.loadMask.isVisible())||(a&&b.getInherited().masked))},setMasked:function(a){var c=this,b=c.focusableContainer;if(a){c.masked=true;c.getInherited().masked=a}else{c.masked=false;delete c.getInherited().masked}if(b){b.onFocusableChildMasked(c,a)}return c},mask:function(b,f,c){var d=this.lastBox,a=this.getMaskTarget()||this.el;if(d){c=d.height}a.mask(b,f,c);this.setMasked(true)},nextNode:function(j,c){var g=this,h=g.ownerCt,d,m,b,a,f;if(c&&g.is(j)){return g}if(h){for(m=h.items.items,a=Ext.Array.indexOf(m,g)+1,b=m.length;a<b;a++){f=m[a];if(f.is(j)){return f}if(f.down){d=f.down(j);if(d){return d}}}return h.nextNode(j)}return null},nextSibling:function(h){var g=this.ownerCt,d,f,b,a;if(g){d=g.items;b=d.indexOf(this)+1;if(b){if(h){for(f=d.getCount();b<f;b++){if((a=d.getAt(b)).is(h)){return a}}}else{if(b<d.getCount()){return d.getAt(b)}}}}return null},onAdded:function(d,b,c){var a=this;a.ownerCt=d;a.onInheritedAdd(a,c);if(a.hasListeners&&a.hasListeners.added){a.fireEvent("added",a,d,b)}if(Ext.GlobalEvents.hasListeners.added){a.fireHierarchyEvent("added")}},onRemoved:function(c){var b=this,a;if(Ext.GlobalEvents.hasListeners.removed){b.fireHierarchyEvent("removed")}if(b.hasListeners.removed){b.fireEvent("removed",b,b.ownerCt)}if(!c){b.removeBindings()}b.onInheritedRemove(c);b.ownerCt=b.ownerLayout=null},onBoxReady:function(a,c){var b=this,d;if(b.ariaLabelledBy||b.ariaDescribedBy){if(b.ariaLabelledBy){d=b.getAriaLabelEl(b.ariaLabelledBy);if(d){b.ariaEl.dom.setAttribute("aria-labelledby",d)}}if(b.ariaDescribedBy){d=b.getAriaLabelEl(b.ariaDescribedBy);if(d){b.ariaEl.dom.setAttribute("aria-describedby",d)}}}if(b.resizable){b.initResizable(b.resizable)}if(b.draggable){b.initDraggable()}if(b.hasListeners.boxready){b.fireEvent("boxready",b,a,c)}},onDestroy:function(){var b=this,a=b.focusableContainer;if(b.rendered){Ext.destroy(b.dd,b.resizer,b.proxy,b.proxyWrap,b.resizerComponent,b.scrollable,b.contentEl)}if(a){a.onFocusableChildDestroy(b)}if(b.focusable){b.destroyFocusable()}Ext.destroy(b.componentLayout,b.loadMask,b.floatingDescendants)},onDisable:function(){var b=this,c,a;if(b.focusable){b.disableFocusable()}if(!b.ariaStaticRoles[b.ariaRole]){b.ariaEl.dom.setAttribute("aria-disabled",true)}if(b.maskOnDisable&&!b.getInheritedConfig("disableMask",true)){c=b.el.dom;a=c.nodeName;if(b.disabledRe.test(a)){c.disabled=true}if(!b.nonMaskableRe.test(a)){b.mask()}}},onEnable:function(){var b=this,c,a;if(b.focusable){b.enableFocusable()}if(!b.ariaStaticRoles[b.ariaRole]){b.ariaEl.dom.setAttribute("aria-disabled",false)}if(b.maskOnDisable&&b.getInherited().hasOwnProperty("masked")){c=b.el.dom;a=c.nodeName;if(b.disabledRe.test(a)){c.disabled=false}if(!b.nonMaskableRe.test(a)){b.unmask()}}},onGlobalShow:function(a){if(this.up(a)){this.getScrollable().restoreState()}},onHide:function(h,a,f){var g=this,c,d,b;if(!g.ariaStaticRoles[g.ariaRole]){g.ariaEl.dom.setAttribute("aria-hidden",true)}g.revertFocus();h=g.getAnimateTarget(h);if(!g.ghost){h=null}if(h){b={x:h.getX(),y:h.getY(),width:h.dom.offsetWidth,height:h.dom.offsetHeight};c=g.ghost();c.el.stopAnimation();d=g.getSize();c.el.animate({to:b,listeners:{afteranimate:function(){delete c.componentLayout.lastComponentSize;c.el.hide();c.setHiddenState(true);c.el.setSize(d);g.afterHide(a,f)}}})}g.el.hide();if(!h){g.afterHide(a,f)}},onPosition:Ext.emptyFn,onResize:function(f,c,d,b){var a=this;if(a.floating&&a.constrain){a.doConstrain()}a.refreshScroll();if(a.hasListeners.resize){a.fireEvent("resize",a,f,c,d,b)}},onShow:function(){var a=this;if(!a.ariaStaticRoles[a.ariaRole]){a.ariaEl.dom.setAttribute("aria-hidden",false)}a.el.show();a.updateLayout({isRoot:false});if(a.floating){if(a.maximized){a.fitContainer()}else{if(a.constrain){a.doConstrain()}}}},onShowComplete:function(c,a){var b=this,d=b.focusableContainer;if(b.floating){b.onFloatShow()}Ext.callback(c,a||b);b.fireEvent("show",b);if(d){d.onFocusableChildShow(b)}delete b.hiddenByLayout},onShowVeto:Ext.emptyFn,previousNode:function(a,c){var h=this,g=h.ownerCt,j,f,d,b;if(c&&h.is(a)){return h}if(g){for(f=g.items.items,d=Ext.Array.indexOf(f,h)-1;d>-1;d--){b=f[d];if(b.query){j=b.query(a);j=j[j.length-1];if(j){return j}}if(b.is(a)){return b}}return g.previousNode(a,true)}return null},previousSibling:function(g){var a=this.ownerCt,f,d,b;if(a){f=a.items;d=f.indexOf(this);if(d!==-1){if(g){for(--d;d>=0;d--){if((b=f.getAt(d)).is(g)){return b}}}else{if(d){return f.getAt(--d)}}}}return null},registerFloatingItem:function(b){var a=this;if(!a.floatingDescendants){a.floatingDescendants=new Ext.ZIndexManager(a)}a.floatingDescendants.register(b)},removeCls:function(b){var a=this,c=a.rendered?a.el:a.protoEl;c.removeCls.apply(c,arguments);return a},removeClsWithUI:function(g,a){var p=this,o=[],j=0,c=Ext.Array,m=c.remove,h=p.uiCls=c.clone(p.uiCls),f=p.activeUI,d,b;if(typeof g==="string"){g=(g.indexOf(" ")<0)?[g]:Ext.String.splitWords(g)}d=g.length;for(j=0;j<d;j++){b=g[j];if(b&&p.hasUICls(b)){m(h,b);if(f){o=o.concat(p.removeUIClsFromElement(b))}}}if(a!==true&&f){p.removeCls(o)}return o},resumeLayouts:function(b){var a=this;if(!a.rendered){return}if(a.layoutSuspendCount&&!--a.layoutSuspendCount){a.suspendLayout=false;if(b&&!a.isLayoutSuspended()){a.updateLayout(b)}}},scrollBy:function(a,d,b){var c=this.getScrollable();if(c){c.scrollBy(a,d,b)}},scrollTo:function(d,b,a){var c=this.getScrollable();if(c){c.scrollTo(d,b,a)}},setAutoScroll:function(a){this.setScrollable(!!a);return this},setBorder:function(d,b){var a=this,c=!!b;if(a.rendered||c){if(!c){b=a.el}if(!d){d=0}else{if(d===true){d="1px"}else{d=this.unitizeBox(d)}}b.setStyle("border-width",d);if(!c){a.updateLayout()}}a.border=d},setDock:function(a){var c=this,b=c.ownerCt;if(a!==c.dock){if(b&&b.moveDocked){b.moveDocked(c,a)}else{c.dock=a}}return c},setDisabled:function(a){return this[a?"disable":"enable"]()},setFlex:function(a){this.flex=a},setHeight:function(a){return this.setSize(undefined,a)},setLoading:function(a,b){var d=this,c={target:d};if(d.rendered){if(a!==false){if(Ext.isString(a)){c.msg=a}else{Ext.apply(c,a)}if(!d.loadMask||!d.loadMask.isLoadMask){if(b&&c.useTargetEl==null){c.useTargetEl=true}d.loadMask=new Ext.LoadMask(c)}else{Ext.apply(d.loadMask,c)}if(d.loadMask.isVisible()){d.loadMask.syncMaskState()}else{d.loadMask.show()}}else{if(d.loadMask&&d.loadMask.isLoadMask){d.loadMask.hide()}}}return d.loadMask},setMargin:function(a,c){var b=this;if(b.rendered){if(!a&&a!==0){a=""}else{if(a===true){a=5}a=this.unitizeBox(a)}b.margin=a;b.margin$=null;b.getEl().setStyle("margin",a);if(!c){b.updateLayout(b._notAsLayoutRoot)}}else{b.margin=a}},setOverflowXY:function(b,a){this.setScrollable({x:(b&&b!=="hidden")?b:false,y:(a&&a!=="hidden")?a:false});return this},setPagePosition:function(b,a,c){var d=this,f,g;if(Ext.isArray(b)){a=b[1];b=b[0]}d.pageX=b;d.pageY=a;if(d.floating){if(d.isContainedFloater()){g=d.floatParent.getTargetEl().getViewRegion();if(Ext.isNumber(b)&&Ext.isNumber(g.left)){b-=g.left}if(Ext.isNumber(a)&&Ext.isNumber(g.top)){a-=g.top}}else{f=d.el.translateXY(b,a);b=f.x;a=f.y}d.setPosition(b,a,c)}else{f=d.el.translateXY(b,a);d.setPosition(f.x,f.y,c)}return d},setPosition:function(c,b,d){var f=this,a=f.beforeSetPosition.apply(f,arguments);if(a&&f.rendered){c=a.x;b=a.y;if(d){if(c!==f.getLocalX()||b!==f.getLocalY()){f.stopAnimation();f.animate(Ext.apply({duration:1000,listeners:{afteranimate:Ext.Function.bind(f.afterSetPosition,f,[c,b])},to:{left:c,top:b}},d))}}else{f.setLocalXY(c,b);f.afterSetPosition(c,b)}}return f},setScrollX:function(c,a){var b=this.getScrollable();if(b){b.scrollTo(c,null,a)}},setScrollY:function(a,c){var b=this.getScrollable();if(b){b.scrollTo(null,a,c)}},setSize:function(d,a){var f=this,b=f.width,h=f.height,g,c;if(d&&typeof d==="object"){a=d.height;d=d.width}if(typeof d==="number"){f.width=Ext.Number.constrain(d,f.minWidth,f.maxWidth)}else{if(d===null){delete f.width}else{if(typeof d==="string"){g=true;f.width=d}}}if(typeof a==="number"){f.height=Ext.Number.constrain(a,f.minHeight,f.maxHeight)}else{if(a===null){delete f.height}else{if(typeof a==="string"){c=true;f.height=a}}}if(f.rendered&&f.isVisible()){if(b!==f.width||h!==f.height){if(f.liquidLayout||g||c){f.el.setSize(f.width,f.height)}f.updateLayout(f._notAsLayoutRoot)}}return f},setStyle:function(a,c){var b=this.el||this.protoEl;b.setStyle(a,c);return this},setUI:function(f){var d=this,b=d.uiCls,a=d.activeUI,c;if(f===a){return}if(a){c=d.removeClsWithUI(b,true);if(c.length){d.removeCls(c)}d.removeUIFromElement()}else{d.uiCls=[]}d.ui=f;d.activeUI=f;d.addUIToElement();c=d.addClsWithUI(b,true);if(c.length){d.addCls(c)}if(d.rendered){d.updateLayout()}},setVisible:function(a){return this[a?"show":"hide"]()},setHidden:function(a){return this.setVisible(!a)},setWidth:function(a){return this.setSize(a)},show:function(a,c,d){var f=this,b=f.rendered;if(f.hierarchicallyHidden||(f.floating&&!b&&f.isHierarchicallyHidden())){if(!b){f.initHierarchyEvents()}if(arguments.length>1){arguments[0]=null;f.pendingShow=arguments}else{f.pendingShow=true}}else{if(b&&f.isVisible()){if(f.floating){f.onFloatShow()}}else{if(f.fireEvent("beforeshow",f)!==false){f.hidden=false;delete this.getInherited().hidden;Ext.suspendLayouts();if(!b&&(f.autoRender||f.floating)){f.doAutoRender();b=f.rendered}if(b){f.beforeShow();Ext.resumeLayouts();f.onShow.apply(f,arguments);f.afterShow.apply(f,arguments)}else{Ext.resumeLayouts(true)}}else{f.onShowVeto()}}}return f},showAt:function(c,b,d){var a=this;if(!a.rendered&&(a.autoRender||a.floating)){a.x=c;a.y=b;return a.show()}if(a.floating){a.setPosition(c,b,d)}else{a.setPagePosition(c,b,d)}return a.show()},showBy:function(d,b,a){var c=this;if(c.floating&&d){c.alignTarget=d;if(b){c.defaultAlign=b}if(a){c.alignOffset=a}c.show();if(!c.hidden){c.alignTo(d,b||c.defaultAlign,a||c.alignOffset)}}return c},suspendLayouts:function(){var a=this;if(!a.rendered){return}if(++a.layoutSuspendCount===1){a.suspendLayout=true}},unitizeBox:function(a){return Ext.Element.unitizeBox(a)},unmask:function(){(this.getMaskTarget()||this.el).unmask();this.setMasked(false)},unregisterFloatingItem:function(b){var a=this;if(a.floatingDescendants){a.floatingDescendants.unregister(b)}},up:function(d,f){var c=this.getRefOwner(),b=typeof f==="string",h=typeof f==="number",a=f&&f.isComponent,g=0;if(d){for(;c;c=c.getRefOwner()){g++;if(d.isComponent){if(c===d){return c}}else{if(Ext.ComponentQuery.is(c,d)){return c}}if(b&&c.is(f)){return}if(h&&g===f){return}if(a&&c===f){return}}}return c},update:function(g,m,a,d){var p=this,b=(p.tpl&&!Ext.isString(g)),o=p.getScrollable(),f=p.focusableContainer,j,c,h;if(b){p.data=(g&&g.isEntity)?g.getData(true):g}else{p.html=Ext.isObject(g)?Ext.DomHelper.markup(g):g}if(p.rendered){j=p.getSizeModel();c=j.width.shrinkWrap||j.height.shrinkWrap;if(p.isContainer){h=p.layout.getRenderTarget();c=c||p.items.items.length>0}else{h=p.touchScroll?p.getScrollerEl():p.getTargetEl()}if(b){p.tpl[p.tplWriteMode](h,p.data||{})}else{h.setHtml(p.html,m,a,d||p)}if(c){p.updateLayout()}if(o){o.refresh(true)}if(f){f.onFocusableChildUpdate(p)}}},setHtml:function(c,b,a){this.update(c,b,null,a)},applyData:function(a){this.update(a)},updateBox:function(a){this.setSize(a.width,a.height);this.setPagePosition(a.x,a.y);return this},_asLayoutRoot:{isRoot:true},_notAsLayoutRoot:{isRoot:false},updateLayout:function(f){var a=this,b,d=a.lastBox,c=f&&f.isRoot;if(d){d.invalid=true}if(!a.rendered||a.layoutSuspendCount||a.suspendLayout){return}if(a.hidden){Ext.Component.cancelLayout(a)}else{if(typeof c!=="boolean"){c=a.isLayoutRoot()}}if(c||!a.ownerLayout||!a.ownerLayout.onContentChange(a)){if(!a.isLayoutSuspended()){b=(f&&f.hasOwnProperty("defer"))?f.defer:a.deferLayouts;Ext.Component.updateLayout(a,b)}}},updateMaxHeight:function(b,a){this.changeConstraint(b,a,"min","max-height","height")},updateMaxWidth:function(b,a){this.changeConstraint(b,a,"min","max-width","width")},updateMinHeight:function(b,a){this.changeConstraint(b,a,"max","min-height","height")},updateMinWidth:function(a,b){this.changeConstraint(a,b,"max","min-width","width")},getAnchorToXY:function(b,c,a,d){return b.getAnchorXY(c,a,d)},getBorderPadding:function(){return this.el.getBorderPadding()},getLocalX:function(){return this.el.getLocalX()},getLocalXY:function(){return this.el.getLocalXY()},getLocalY:function(){return this.el.getLocalY()},getX:function(){return this.el.getX()},getXY:function(){return this.el.getXY()},getY:function(){return this.el.getY()},setLocalX:function(a){this.el.setLocalX(a)},setLocalXY:function(a,b){this.el.setLocalXY(a,b)},setLocalY:function(a){this.el.setLocalY(a)},setX:function(a,b){this.el.setX(a,b)},setXY:function(b,a){this.el.setXY(b,a)},setY:function(b,a){this.el.setY(b,a)},privates:{addOverCls:function(){var a=this;if(!a.disabled){a.el.addCls(a.overCls)}},addUIToElement:function(){var f=this,b=f.baseCls+"-"+f.ui,d,a,c,g;f.addCls(b);if(f.rendered&&f.frame&&!Ext.supports.CSS3BorderRadius){b+="-";d=f.getChildEls();for(a in d){g=d[a].frame;if(g&&g!==true){c=f[a];if(c){c.addCls(b+g)}}}}},changeConstraint:function(h,c,a,f,b){var g=this,d=g[b];if(h!=null&&typeof d==="number"){g[b]=Math[a](d,h)}if(g.liquidLayout){if(h!=null){g.setStyle(f,h+"px")}else{if(c){g.setStyle(f,"")}}}if(g.rendered){g.updateLayout()}},constructPlugin:function(b){var a=this;if(typeof b==="string"){b=Ext.PluginManager.create({},b,a)}else{b=Ext.PluginManager.create(b,null,a)}return b},constructPlugins:function(){var b=this,f=b.plugins,d,a,c;if(f){d=[];d.processed=true;if(!Ext.isArray(f)){f=[f]}for(a=0,c=f.length;a<c;a++){d[a]=b.constructPlugin(f[a])}}b.pluginsInitialized=true;return d},detachFromBody:function(){Ext.getDetachedBody().appendChild(this.el);Ext.Component.cancelLayout(this);this.isDetached=true},doAddListener:function(a,m,p,j,r,o,b){var h=this,g,d,s,q,c,f;if(Ext.isObject(m)||(j&&j.element)){if(j.element){q=j.element;g={};g[a]=m;if(p){g.scope=p}s=h.$elementEventOptions;for(d in j){if(s[d]){g[d]=j[d]}}}else{g=m;q=a}c=h[q];if(c&&c.isObservable){h.mon(c,g)}else{h.afterRenderEvents=h.afterRenderEvents||{};if(!h.afterRenderEvents[q]){h.afterRenderEvents[q]=[]}h.afterRenderEvents[q].push(g)}return}if(j){f=j.delegate;if(f){h.mixins.componentDelegation.addDelegatedListener.call(h,a,m,p,j,r,o,b);return}}h.mixins.observable.doAddListener.call(h,a,m,p,j,r,o,b)},doRemoveListener:function(c,a,d){var b=this;b.mixins.observable.doRemoveListener.call(b,c,a,d);b.mixins.componentDelegation.removeDelegatedListener.call(b,c,a,d)},fireHierarchyEvent:function(b){var a=Ext.GlobalEvents;if(a.hasListeners[b]){a.fireEvent(b,this)}},getActionEl:function(){return this.el},getAutoId:function(){this.autoGenId=true;return ++Ext.Component.AUTO_ID},getContentTarget:function(){return this.el},getDragEl:function(){return this.el},getOverflowEl:function(){return this.getTargetEl()},getOverflowStyle:function(){var f=this,c=f.getScrollable(),d=f._scrollFlags,b,a,g;if(c){b=c.getX();if(b===true){b="auto"}a=c.getY();if(a===true){a="auto"}g=d[b][a]}else{g=d.none}f.scrollFlags=g;return{overflowX:g.overflowX,overflowY:g.overflowY}},getPlugins:function(){var a=this.plugins;a=(a&&a.processed)?a:this.constructPlugins();return a||null},getProxy:function(){var a=this,b;if(!a.proxy){b=Ext.getBody();a.proxy=a.el.createProxy("x-proxy-el",b,true)}return a.proxy},getScrollerEl:function(){var a=this;return a.scrollerEl||(a.scrollerEl=a.componentLayout.getScrollerEl()||a.getOverflowEl().child(a.scrollerSelector))},getTargetEl:function(){return this.frameBody||this.el},getTdCls:function(){return"x-"+this.getTdType()+"-"+this.ui+"-cell"},getTdType:function(){return this.xtype},getTpl:function(a){return Ext.XTemplate.getTpl(this,a)},initCls:function(){var c=this,b=[c.baseCls],a=c.getComponentLayout().targetCls;if(a){b.push(a)}if(c.componentCls){b.push(c.componentCls)}else{c.componentCls=c.baseCls}return b},initDraggable:function(){var a=this,b=(a.resizer&&a.resizer.el!==a.el)?a.resizerComponent=new Ext.Component({el:a.resizer.el,rendered:true,container:a.container}):a,c=Ext.applyIf({el:b.getDragEl(),constrainTo:(a.constrain||a.draggable.constrain)?(a.constrainTo||(a.floatParent?a.floatParent.getTargetEl():a.container)):undefined},a.draggable);if(a.constrain||a.constrainDelegate){c.constrain=a.constrain;c.constrainDelegate=a.constrainDelegate}a.dd=new Ext.util.ComponentDragger(b,c)},initPadding:function(a){var b=this,c=b.padding;if(c!=null){if(b.touchScroll||(b.layout&&b.layout.managePadding&&b.contentPaddingProperty==="padding")){a.setStyle("padding",0)}else{a.setStyle("padding",this.unitizeBox((c===true)?5:c))}}},initPlugin:function(a){a.init(this);return a},initResizable:function(a){var b=this;a=Ext.apply({target:b,dynamic:false,constrainTo:(b.constrain||(a&&a.constrain))?(b.constrainTo||(b.floatParent?b.floatParent.getTargetEl():b.container)):undefined,handles:b.resizeHandles},a);a.target=b;b.resizer=new Ext.resizer.Resizer(a)},initStyles:function(a){var j=this,g=j.margin,h=j.border,b=j.cls,c=j.style,o=j.x,m=j.y,f=j.liquidLayout,d,p;j.initPadding(a);if(g!=null){a.setStyle("margin",this.unitizeBox((g===true)?5:g))}if(h!=null){j.setBorder(h,a)}if(b&&b!==j.initialCls){a.addCls(b);j.cls=j.initialCls=null}if(c&&c!==j.initialStyle){a.setStyle(c);j.style=j.initialStyle=null}if(o!=null){a.setStyle(j.horizontalPosProp,(typeof o==="number")?(o+"px"):o)}if(m!=null){a.setStyle("top",(typeof m==="number")?(m+"px"):m)}if(!j.ownerCt||j.floating){if(Ext.scopeCss){a.addCls(j.rootCls)}a.addCls(j.borderBoxCls)}if(f||!j.getFrameInfo()){d=j.width;p=j.height;if(d!=null){if(typeof d==="number"){a.setStyle("width",d+"px")}else{a.setStyle("width",d)}}if(p!=null){if(typeof p==="number"){a.setStyle("height",p+"px")}else{a.setStyle("height",p)}}}},isContainedFloater:function(){return(this.floating&&this.floatParent)},isDescendant:function(a){if(a.isContainer){for(var b=this.ownerCt;b;b=b.ownerCt){if(b===a){return true}}}return false},owns:function(c){var b=false,a;if(c.isEvent){c=c.target}else{if(c.isElement){c=c.dom}}a=Ext.Component.fromElement(c);if(a){b=(a===this)||(!!a.up(this))}return b},parseBox:function(a){return Ext.Element.parseBox(a)},reattachToBody:function(){this.isDetached=false},refreshScroll:function(){var a=this.getScrollable();if(a){a.refresh()}},removeManagedListenerItem:function(a,j,h,c,f,d){var g=this,b=j.options?j.options.element:null;if(b){b=g[b];if(b&&b.un){if(a||(j.item===h&&j.ename===c&&(!f||j.fn===f)&&(!d||j.scope===d))){b.un(j.ename,j.fn,j.scope);if(!a){Ext.Array.remove(g.managedListeners,j)}}}}else{return g.mixins.observable.removeManagedListenerItem.apply(g,arguments)}},removeOverCls:function(){this.el.removeCls(this.overCls)},removePlugin:function(a){Ext.Array.remove(this.plugins,a);a.destroy()},removeUIFromElement:function(){var f=this,b=f.baseCls+"-"+f.ui,d,a,c,g;f.removeCls(b);if(f.rendered&&f.frame&&!Ext.supports.CSS3BorderRadius){b+="-";d=f.getChildEls();for(a in d){g=d[a].frame;if(g&&g!==true){c=f[a];if(c){c.removeCls(b+g)}}}}},setComponentLayout:function(b){var a=this.componentLayout;if(a&&a.isLayout&&a!==b){a.setOwner(null)}this.componentLayout=b;b.setOwner(this)},setHiddenState:function(b){var a=this,d=a.getInherited(),c=a.zIndexManager;a.hidden=b;if(b){d.hidden=true}else{delete d.hidden}if(c){c.onComponentShowHide(a)}},setupProtoEl:function(){var a=this.initCls();this.protoEl.addCls(a)},wrapPrimaryEl:function(a){var c=this,b=c.el;if(!b||!b.isElement){c.el=Ext.get(a)}if(c.floating){this.mixins.floating.constructor.call(this)}}},deprecated:{5:{methods:{addClass:"addCls",doComponentLayout:function(){this.updateLayout();return this},removeClass:"removeCls",forceComponentLayout:"updateLayout",setDocked:"setDock"}}}},1,["component","box"],["component","box"],{component:true,box:true},["widget.box","widget.component"],[[Ext.mixin.Inheritable.prototype.mixinId||Ext.mixin.Inheritable.$className,Ext.mixin.Inheritable],[Ext.util.Floating.prototype.mixinId||Ext.util.Floating.$className,Ext.util.Floating],[Ext.util.Positionable.prototype.mixinId||Ext.util.Positionable.$className,Ext.util.Positionable],[Ext.util.Observable.prototype.mixinId||Ext.util.Observable.$className,Ext.util.Observable],[Ext.mixin.ComponentDelegation.prototype.mixinId||Ext.mixin.ComponentDelegation.$className,Ext.mixin.ComponentDelegation],[Ext.mixin.Bindable.prototype.mixinId||Ext.mixin.Bindable.$className,Ext.mixin.Bindable],[Ext.util.Animate.prototype.mixinId||Ext.util.Animate.$className,Ext.util.Animate],[Ext.util.ElementContainer.prototype.mixinId||Ext.util.ElementContainer.$className,Ext.util.ElementContainer],[Ext.util.Renderable.prototype.mixinId||Ext.util.Renderable.$className,Ext.util.Renderable],[Ext.state.Stateful.prototype.mixinId||Ext.state.Stateful.$className,Ext.state.Stateful],[Ext.util.Focusable.prototype.mixinId||Ext.util.Focusable.$className,Ext.util.Focusable],[Ext.mixin.Accessible.prototype.mixinId||Ext.mixin.Accessible.$className,Ext.mixin.Accessible],[Ext.util.KeyboardInteractive.prototype.mixinId||Ext.util.KeyboardInteractive.$className,Ext.util.KeyboardInteractive]],[Ext,"Component",Ext,"AbstractComponent"],function(b){var a=b.prototype;(a.$elementEventOptions=Ext.Object.chain(Ext.Element.prototype.$eventOptions)).element=1;(a.$eventOptions=Ext.Object.chain(a.$eventOptions)).delegate=1;b.createAlias({on:"addListener",prev:"previousSibling",next:"nextSibling"});Ext.resumeLayouts=function(c){b.resumeLayouts(c)};Ext.suspendLayouts=function(){b.suspendLayouts()};Ext.batchLayouts=function(d,c){b.suspendLayouts();d.call(c);b.resumeLayouts(true)};Ext.setGlyphFontFamily=function(c){Ext._glyphFontFamily=c};b.hierarchyEventSource=a.hierarchyEventSource=Ext.GlobalEvents;Ext.onReady(function(){if(Ext.supports.HighContrastMode){Ext.getBody().addCls(b.ariaHighContrastModeCls)}})}));Ext.define("Ext.layout.container.border.Region",{override:"Ext.Component",initBorderRegion:function(){var a=this;if(!a._borderRegionInited){a._borderRegionInited=true;a.addStateEvents(["changeregion","changeweight"]);Ext.override(a,{getState:function(){var b=a.callParent();b=a.addPropertyToState(b,"region");b=a.addPropertyToState(b,"weight");return b}})}},getOwningBorderContainer:function(){var a=this.getOwningBorderLayout();return a&&a.owner},getOwningBorderLayout:function(){var a=this.ownerLayout;return(a&&a.isBorderLayout)?a:null},setRegion:function(j){var h=this,a,b=h.region;if(j!==b){a=h.getOwningBorderLayout();if(a){var d=a.regionFlags[j],m=h.placeholder,p=h.splitter,r=a.owner,q=a.regionMeta,c=h.collapsed||h.floated,o,g,f;if(h.fireEventArgs("beforechangeregion",[h,j])===false){return b}Ext.suspendLayouts();h.region=j;Ext.apply(h,d);if(h.updateCollapseTool){h.updateCollapseTool()}if(p){Ext.apply(p,d);p.updateOrientation();g=r.items;f=g.indexOf(h);if(f>=0){o=q[j].splitterDelta;if(g.getAt(f+o)!==p){g.remove(p);f=g.indexOf(h);if(o>0){++f}g.insert(f,p)}}}if(m){if(c){h.expand(false)}r.remove(m);h.placeholder=null;if(c){h.collapse(null,false)}}r.updateLayout();Ext.resumeLayouts(true);h.fireEventArgs("changeregion",[h,b])}else{h.region=j}}return b},setWeight:function(a){var f=this,d=f.getOwningBorderContainer(),b=f.placeholder,c=f.weight;if(a!==c){if(f.fireEventArgs("beforechangeweight",[f,a])!==false){f.weight=a;if(b){b.weight=a}if(d){d.updateLayout()}f.fireEventArgs("changeweight",[f,c])}}return c}},function(a){var b=a.prototype;b.setBorderRegion=b.setRegion;b.setRegionWeight=b.setWeight});Ext.define("Ext.theme.neptune.Component",{override:"Ext.Component",initComponent:function(){arguments.callee.$previous.call(this);if(this.dock&&this.border===undefined){this.border=false}},privates:{initStyles:function(){var a=this,c=a.hasOwnProperty("border"),b=a.border;if(a.dock){a.border=null}arguments.callee.$previous.apply(this,arguments);if(c){a.border=b}else{delete a.border}}}},function(){Ext.namespace("Ext.theme.is").Neptune=true;Ext.theme.name="Neptune"});Ext.define("Ext.theme.triton.Component",{override:"Ext.Component"},function(){Ext.namespace("Ext.theme.is").Triton=true;Ext.theme.name="Triton"});Ext.define("Ext.overrides.app.domain.Component",{override:"Ext.app.domain.Component"},function(a){a.monitor(Ext.Component)});(Ext.cmd.derive("Ext.app.EventBus",Ext.Base,{singleton:true,constructor:function(){var b=this,a=Ext.app.EventDomain.instances;b.callParent();b.domains=a;b.bus=a.component.bus},control:function(b,a){return this.domains.component.listen(b,a)},listen:function(b,d){var c=this.domains,a;for(a in b){if(b.hasOwnProperty(a)){c[a].listen(b[a],d)}}},unlisten:function(a){var b=Ext.app.EventDomain.instances,c;for(c in b){b[c].unlisten(a)}}},1,0,0,0,0,0,[Ext.app,"EventBus"],0));(Ext.cmd.derive("Ext.app.domain.Global",Ext.app.EventDomain,{singleton:true,type:"global",constructor:function(){var a=this;a.callParent();a.monitor(Ext.GlobalEvents)},listen:function(b,a){this.callParent([{global:b},a])},match:Ext.returnTrue},1,0,0,0,0,0,[Ext.app.domain,"Global"],0));(Ext.cmd.derive("Ext.app.BaseController",Ext.Base,{isController:true,config:{id:null,control:null,listen:null,routes:null,before:null},constructor:function(a){var b=this;Ext.apply(b,a);delete b.control;delete b.listen;b.eventbus=Ext.app.EventBus;b.mixins.observable.constructor.call(b,a);b.ensureId()},applyListen:function(a){if(Ext.isObject(a)){a=Ext.clone(a)}return a},applyControl:function(a){if(Ext.isObject(a)){a=Ext.clone(a)}return a},updateControl:function(a){this.ensureId();if(a){this.control(a)}},updateListen:function(a){this.ensureId();if(a){this.listen(a)}},updateRoutes:function(b){if(b){var f=this,g=f.getBefore()||{},a=Ext.app.route.Router,d,c,h;for(d in b){c=b[d];if(Ext.isString(c)){c={action:c}}h=c.action;if(!c.before){c.before=g[h]}a.connect(d,c,f)}}},isActive:function(){return true},control:function(c,d,b){var f=this,g=b,a;if(Ext.isString(c)){a={};a[c]=d}else{a=c;g=d}f.eventbus.control(a,g||f)},listen:function(b,a){this.eventbus.listen(b,a||this)},destroy:function(){var b=this,a=b.eventbus;Ext.app.route.Router.disconnectAll(b);if(a){a.unlisten(b);b.eventbus=null}b.callParent()},redirectTo:function(c,a){if(c.isModel){c=c.toUrl()}if(!a){var b=Ext.util.History.getToken();if(b===c){return false}}else{Ext.app.route.Router.onStateChange(c)}Ext.util.History.add(c);return true}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.app,"BaseController"],0));(Ext.cmd.derive("Ext.app.Util",Ext.Base,{},0,0,0,0,0,0,[Ext.app,"Util"],function(){Ext.apply(Ext.app,{namespaces:{Ext:{}},addNamespaces:function(a){var b=Ext.app.namespaces,d,c;if(!Ext.isArray(a)){a=[a]}for(d=0,c=a.length;d<c;d++){b[a[d]]=true}},clearNamespaces:function(){Ext.app.namespaces={}},getNamespace:function(d){var b=Ext.apply({},Ext.ClassManager.paths,Ext.app.namespaces),c="",a;for(a in b){if(b.hasOwnProperty(a)&&a.length>c.length&&(a+"."===d.substring(0,a.length+1))){c=a}}return c===""?undefined:c},setupPaths:function(c,d,b){var a=Ext.manifest,f;if(c&&d!==null){a=a&&a.paths;if(!a||d!==undefined){Ext.Loader.setPath(c,(d===undefined)?"app":d)}}if(b){for(f in b){if(b.hasOwnProperty(f)){Ext.Loader.setPath(f,b[f])}}}}});Ext.getNamespace=Ext.app.getNamespace}));(Ext.cmd.derive("Ext.util.CollectionKey",Ext.Base,{isCollectionKey:true,observerPriority:-200,config:{collection:null,keyFn:null,property:null,rootProperty:null,unique:true},generation:0,map:null,mapRebuilds:0,constructor:function(a){this.initConfig(a)},get:function(a){var b=this.map||this.getMap();return b[a]||null},clear:function(){this.map=null},getRootProperty:function(){var b=this,a=(arguments.callee.$previous||Ext.Base.prototype.getRootProperty).call(this);return a!==null?a:b.getCollection().getRootProperty()},indexOf:function(b,j){var d=this.map||this.getMap(),c=d[b],m=this.getCollection(),f=m.length,h,o,a,g;if(!c){return -1}if(j===undefined){j=-1}if(c instanceof Array){a=c;o=f;for(g=a.length;g-->0;){h=m.indexOf(a[g]);if(h<o&&h>j){o=h}}if(o===f){return -1}}else{o=m.indexOf(c)}return(o>j)?o:-1},updateKey:function(d,g){var c=this,f=c.map,a,b;if(f){a=f[g];if(a instanceof Array){b=Ext.Array.indexOf(a,d);if(b>=0){if(a.length>2){a.splice(b,1)}else{f[g]=a[1-b]}}}else{if(a){delete f[g]}}c.add([d])}},onCollectionAdd:function(b,a){if(this.map){this.add(a.items)}},onCollectionItemChange:function(b,a){this.map=null},onCollectionRefresh:function(){this.map=null},onCollectionRemove:function(m,j){var b=this,f=b.map,a=j.items,g=a.length,h,d,c;if(f){if(b.getUnique()&&g<m.length/2){for(h=0;h<g;++h){c=b.getKey(d=a[h]);delete f[c]}}else{b.map=null}}},add:function(a){var b=this,f=b.map,g,m,d,c,h,j;h=a.length;j=b.getUnique();for(m=0;m<h;++m){c=b.getKey(d=a[m]);if(j||!(c in f)){f[c]=d}else{if(!((g=f[c]) instanceof Array)){f[c]=g=[g]}g.push(d)}}},applyKeyFn:function(a){if(Ext.isString(a)){this.getKey=function(b){return b[a]()}}else{this.getKey=a}},updateProperty:function(b){var a=this.getRootProperty();this.getKey=function(c){return(a?c[a]:c)[b]}},getMap:function(){var a=this,b=a.map;if(!b){a.map=b={};a.keysByItemKey={};++a.mapRebuilds;a.add(a.getCollection().items)}return b},updateCollection:function(a){a.addObserver(this)},clone:function(){return new Ext.util.CollectionKey(this.getCurrentConfig())}},1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.util,"CollectionKey"],0));(Ext.cmd.derive("Ext.util.Grouper",Ext.util.Sorter,{isGrouper:true,config:{groupFn:null,sortProperty:null},constructor:function(a){Ext.util.Sorter.prototype.constructor.apply(this,arguments)},getGroupString:function(a){var b=this._groupFn(a);return(b!=null)?String(b):""},sortFn:function(j,h){var a=this,g=a._groupFn(j),m=a._groupFn(h),d=a._sortProperty,c=a._root,b=a._sorterFn,f=a._transform;if(g===m){return 0}if(d||b){if(b){return b.call(this,j,h)}if(c){j=j[c];h=h[c]}g=j[d];m=h[d];if(f){g=f(g);m=f(m)}}return(g>m)?1:(g<m?-1:0)},standardGroupFn:function(b){var a=this._root;return(a?b[a]:b)[this._property]},updateSorterFn:function(){},updateProperty:function(){if(!this.getGroupFn()){this.setGroupFn(this.standardGroupFn)}}},1,0,0,0,0,0,[Ext.util,"Grouper"],0));(Ext.cmd.derive("Ext.util.Collection",Ext.Base,{isCollection:true,config:{autoFilter:true,autoSort:true,autoGroup:true,decoder:null,extraKeys:null,filters:null,grouper:null,groups:null,rootProperty:null,sorters:null,multiSortLimit:3,defaultSortDirection:"ASC",source:null,trackGroups:true},generation:0,indices:null,indexRebuilds:0,updating:0,grouped:false,sorted:false,filtered:false,$endUpdatePriority:1001,constructor:function(a){var b=this;b.items=[];b.map={};b.length=0;if(a&&a.keyFn){b.getKey=a.keyFn}b.mixins.observable.constructor.call(b,a)},destroy:function(){var a=this,d=a._filters,b=a._sorters,c=a._groups;if(d){d.destroy();a._filters=null}if(b){b.destroy();a._sorters=null}if(c){c.destroy();a._groups=null}a.setSource(null);a.observers=a.items=a.map=null;a.callParent()},add:function(b){var a=this,c=a.decodeItems(arguments,0),d=c;if(c.length){a.requestedIndex=a.length;a.splice(a.length,0,c);delete a.requestedIndex;d=(c.length===1)?c[0]:c}return d},replaceAll:function(){var a=this,c,b;b=a.decodeItems(arguments,0);c=b;if(b.length){a.splice(0,a.length,b);c=(b.length===1)?b[0]:b}else{a.removeAll()}return c},aggregate:function(h,b,f,a,d){var g=this,c=Ext.Array.slice(arguments);c.unshift(g.items);return g.aggregateItems.apply(g,c)},aggregateByGroup:function(b,d,a){var c=this.getGroups();return this.aggregateGroups(c,b,d,a)},aggregateItems:function(h,p,v,s,a,r){var o=this,d=Ext.Number.clipIndices(h.length,[s,a]),t=(s!==0&&a!==h.length),c,b,u,q,g,m,f;s=d[0];a=d[1];if(!Ext.isFunction(v)){v=o._aggregators[v];return v.call(o,h,s,a,p,o.getRootProperty())}q=o.getRootProperty();m=new Array(u);f=t?new Array(u):h;for(c=s,b=0;c<a;++c,b++){if(t){f[b]=g=h[c]}m[b]=(q?g[q]:g)[p]}return v.call(r||o,h,m,0)},aggregateGroups:function(c,p,f,a){var m=c.items,j=m.length,d=!Ext.isFunction(f),g={},h,o,b;for(h=0;h<j;++h){o=m[h];if(!d){b=this.aggregateItems(o.items,p,f,null,null,a)}else{b=o[f](p)}g[o.getGroupKey()]=b}return g},beginUpdate:function(){if(!this.updating++){this.notify("beginupdate")}},clear:function(){var f=this,a=f.generation,c=a?f.items:[],d,b;if(a){f.items=[];f.length=0;f.map={};f.indices={};f.generation++;d=f.getExtraKeys();if(d){for(b in d){d[b].clear()}}}return c},clone:function(){var a=this,b=new a.self(a.initialConfig);b.add(a.items);return b},collect:function(c,m,a){var j=this.items,f=j.length,d={},h=[],g,o,b;for(g=0;g<f;++g){b=j[g];b=(m?b[m]:b)[c];o=String(b);if((a||!Ext.isEmpty(b))&&!d[o]){d[o]=1;h.push(b)}}return h},contains:function(a){var b=false,c;if(a!=null){c=this.getKey(a);b=this.map[c]===a}return b},containsKey:function(a){return a in this.map},createFiltered:function(r,p,b,g,a){var f=this,c=new f.self(f.initialConfig),m=f.getRootProperty(),d=f.items,q,s,o,h,j;if(Ext.isFunction(r)){h=r;j=p}else{if(Ext.isString(r)){o=[new Ext.util.Filter({property:r,value:p,root:m,anyMatch:b,caseSensitive:g,exactMatch:a})]}else{if(r instanceof Ext.util.Filter){o=[r];r.setRoot(m)}else{if(Ext.isArray(r)){o=r.slice(0);for(s=0,q=o.length;s<q;++s){o[s].setRoot(m)}}}}h=Ext.util.Filter.createFilterFn(o)}j=j||f;for(s=0,q=d.length;s<q;s++){if(h.call(j,d[s])){c.add(d[s])}}return c},filterBy:function(b,a){return this.createFiltered(b,a)},each:function(a,g){var c=this.items,b=c.length,f,d;if(b){g=g||this;c=c.slice(0);for(f=0;f<b;f++){d=a.call(g,c[f],f,b);if(d===false){break}}}return d},eachKey:function(a,d){var m=this,j=m.items,g=j.length,f,c,b,h;if(g){d=d||m;j=j.slice(0);for(f=0;f<g;f++){b=m.getKey(c=j[f]);h=a.call(d,b,c,f,g);if(h===false){break}}}return h},endUpdate:function(){if(!--this.updating){this.notify("endupdate")}},find:function(g,f,h,c,b,a){if(Ext.isEmpty(f,false)){return null}var d=Ext.String.createRegex(f,c,b,a),j=this.getRootProperty();return this.findBy(function(m){return m&&d.test((j?m[j]:m)[g])},null,h)},findBy:function(a,d,f){var m=this,j=m.items,h=j.length,g,c,b;d=d||m;for(g=f||0;g<h;g++){b=m.getKey(c=j[g]);if(a.call(d,c,b)){return j[g]}}return null},findIndex:function(g,f,h,c,b,a){var d=this.find(g,f,h,c,b,a);return d?this.indexOf(d):-1},findIndexBy:function(d,c,b){var a=this.findBy(d,c,b);return a?this.indexOf(a):-1},first:function(b){var a=b?this.getGroups():undefined;return a?this.aggregateGroups(a,null,"first"):this.items[0]},last:function(b){var a=b?this.getGroups():undefined;return a?this.aggregateGroups(a,null,"last"):this.items[this.length-1]},get:function(a){return this.map[a]},getAt:function(a){return this.items[a]},getByKey:function(a){return this.map[a]},getCount:function(){return this.length},getKey:function(a){var b=a.id;return(b===0||b)?b:((b=a._id)===0||b)?b:a.getId()},getRange:function(a,c){var f=this.items,b=f.length,d;if(!b){d=[]}else{d=Ext.Number.clipIndices(b,[a,c]);d=f.slice(d[0],d[1])}return d},getValues:function(d,b,f,g){var a=this.items,j=Ext.Number.clipIndices(a.length,[f,g]),m=[],h,c;for(h=j[0],g=j[1];h<g;++h){c=a[h];c=(b?c[b]:c)[d];m.push(c)}return m},indexOf:function(b){if(!b){return -1}var a=this.getKey(b);return this.indexOfKey(a)},indexOfKey:function(b){var c=this,a=c.indices;if(b in c.map){if(!a){a=c.getIndices()}return a[b]}return -1},insert:function(f,b){var a=this,c=a.decodeItems(arguments,1),d=c;if(c.length){a.requestedIndex=f;a.splice(f,0,c);delete a.requestedIndex;d=(c.length===1)?c[0]:c}return d},itemChanged:function(B,j,r,t){var q=this,c=r===0||!!r,m=q.filtered&&q.getAutoFilter(),f=false,d=0,v=q.items,p=q.length-1,a=q.sorted&&p>0&&q.getAutoSort(),y=q.getSource(),w=0,o=false,u=false,A,z,g,s,h,b;if(y&&!y.updating){y.itemChanged(B,j,r,t)}else{z=q.getKey(B);if(m){h=q.indexOfKey(c?r:z);u=(h<0);o=q.isItemFiltered(B);f=(u!==o)}if(f){if(o){w=[B];b=-1}else{s=[B];b=q.length}}else{if(a&&!o){if(!m){h=q.indexOfKey(c?r:z)}g=q.getSortFn();if(h!==-1){if(h&&g(v[h-1],v[h])>0){d=-1;b=Ext.Array.binarySearch(v,B,0,h,g)}else{if(h<p&&g(v[h],v[h+1])>0){d=1;b=Ext.Array.binarySearch(v,B,h+1,g)}}if(d){s=[B]}}}}A={item:B,key:z,index:b,filterChanged:f,keyChanged:c,indexChanged:!!d,filtered:o,oldIndex:h,newIndex:b,wasFiltered:u,meta:t};if(c){A.oldKey=r}if(j){A.modified=j}q.beginUpdate();q.notify("beforeitemchange",[A]);if(c){q.updateKey(B,r)}if(s||w){q.splice(b,w,s)}if(d>0){A.newIndex--}else{if(d<0){A.oldIndex++}}q.notify(o?"filtereditemchange":"itemchange",[A]);q.endUpdate()}},remove:function(b){var a=this,c=a.decodeRemoveItems(arguments,0),d=a.length;a.splice(0,c);return d-a.length},removeAll:function(){var b=this,a=b.length;if(b.generation&&a){b.splice(0,a)}return b},removeAt:function(a,o){var b=this,f=b.length,j=Ext.Number,h=j.clipIndices(f,[a,(o===undefined)?1:o],j.Clip.COUNT),g=h[0],d=h[1]-g,c=(d===1)&&b.getAt(g),m;b.splice(g,d);m=b.length-f;return(c&&m)?c:m},removeByKey:function(a){var b=this.getByKey(a);if(!b||!this.remove(b)){return false}return b},replace:function(b){var a=this.indexOf(b);if(a===-1){this.add(b)}else{this.insert(a,b)}},splice:function(J,r,H){var o=this,Q=o.sorted&&o.getAutoSort(),F=o.map,w=o.items,u=o.length,B=(r instanceof Array)?o.decodeRemoveItems(r):null,C=!B,K=Ext.Number,R=K.clipIndices(u,[J,C?r:0],K.Clip.COUNT),d=R[0],j=R[1],h=j-d,z=o.decodeItems(arguments,2),f=z?z.length:0,I,D,A,P=d,O=o.indices||((f||B)?o.getIndices():null),v=null,g=h?[d]:null,c=null,y=o.getSource(),N,M,a,p,G,L,m,t,E,b,s,q,j;if(y&&!y.updating){if(C){B=[];for(p=0;p<h;++p){B.push(w[d+p])}}if(d<u){p=y.indexOf(w[d])}else{p=y.length}y.splice(p,B,z);return o}if(f){I=z;c=[];D={};if(Q){q=o.getSorters();if(f>1){if(!I.$cloned){z=I=I.slice(0)}o.sortData(I)}}for(p=0;p<f;++p){t=o.getKey(G=z[p]);if((m=D[t])!==undefined){(s||(s={}))[m]=1}else{L=O[t];if(L<d||j<=L){(g||(g=[])).push(L)}}D[t]=p;c.push(t)}if(s){E=c;I=[];c=[];I.$cloned=true;for(p=0;p<f;++p){if(!s[p]){G=z[p];I.push(G);c.push(E[p])}}f=I.length}v={items:I,keys:c}}for(p=B?B.length:0;p-->0;){t=o.getKey(B[p]);if((L=O[t])!==undefined){(g||(g=[])).push(L)}}if(!v&&!g){return o}o.beginUpdate();if(g){N=null;a=[];A={};if(g.length>1){g.sort(Ext.Array.numericSortFn)}for(p=0,b=g.length;p<b;++p){t=o.getKey(G=w[L=g[p]]);if(!(t in F)){continue}delete F[t];if(!N||L>(N.at+M.length)){a.push(N={at:L,items:(M=[]),keys:(E=[]),map:A,next:N,replacement:v});if(v){v.replaced=N}}M.push(A[t]=G);E.push(t);if(L<P){--P}if(h>1&&L===d){--h;g[p--]=++d}}if(v){v.at=P}for(m=a.length;m-->0;){N=a[m];p=N.at;b=N.items.length;if(p+b<u){o.indices=O=null}o.length=u-=b;w.splice(p,b);if(O){E=N.keys;for(p=0;p<b;++p){delete O[E[p]]}}++o.generation;o.notify("remove",[N])}}if(v){if(Q&&f>1&&u){o.spliceMerge(I,c)}else{if(Q){if(f>1){P=0;o.indices=O=null}else{P=q.findInsertionIndex(v.items[0],w,o.getSortFn())}}if(P===u){j=P;for(p=I.length-1;p>=0;--p){w[j+p]=I[p]}O=o.indices;if(O){for(p=0;p<f;++p){O[c[p]]=P+p}}}else{o.indices=null;Ext.Array.insert(w,P,I)}for(p=0;p<f;++p){F[c[p]]=I[p]}o.length+=f;v.at=P;v.atItem=P===0?null:w[P-1];++o.generation;o.notify("add",[v])}}o.endUpdate();return o},update:function(d,c){var a=this;a.beginUpdate();try{return d.call(c||a,a)}catch(b){throw b}finally{a.endUpdate()}},updateKey:function(b,f){var a=this,d=a.map,h=a.indices,c=a.getSource(),g;if(c&&!c.updating){c.updateKey(b,f)}else{if((g=a.getKey(b))!==f){if(d[f]===b&&!(g in d)){delete d[f];a.updating++;a.generation++;d[g]=b;if(h){h[g]=h[f];delete h[f]}a.notify("updatekey",[{item:b,newKey:g,oldKey:f}]);a.updating--}}}},findInsertIndex:function(f){var g=this.getSource(),a=g.items,c=g.indexOf(f)-1,d,b;while(c>-1){d=a[c];b=this.indexOf(d);if(b>-1){return b+1}--c}return 0},onCollectionAdd:function(a,c){var p=this,b=c.atItem,o=c.items,h=p.requestedIndex,m,j,d,g,q,f;if(!p.sorted){if(h!==undefined){j=h}else{if(b){j=p.indexOf(b);if(j===-1){j=p.findInsertIndex(o[0])}else{++j}}else{j=0}}}if(p.getAutoFilter()&&p.filtered){for(g=0,f=o.length;g<f;++g){q=o[g];if(p.isItemFiltered(q)){if(!d){d=o.slice(0,g)}if(!m){m=[]}m.push(q)}else{if(d){d.push(q)}}}}p.splice((j<0)?p.length:j,0,d||o);if(m){p.notify("filteradd",[m])}},onCollectionBeforeItemChange:function(b,a){this.onCollectionUpdateKey=null},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionItemChange:function(b,a){delete this.onCollectionUpdateKey;this.itemChanged(a.item,a.modified,a.oldKey,a.meta)},onCollectionFilteredItemChange:null,onCollectionRefresh:function(f){var a=this,g={},c={},j,d,m,b,h;m=f.items;m=a.filtered&&a.getAutoFilter()?Ext.Array.filter(m,a.getFilterFn()):m.slice(0);if(a.sorted){a.sortData(m)}a.items=m;a.length=h=m.length;a.map=g;a.indices=c;for(j=0;j<h;++j){b=a.getKey(d=m[j]);g[b]=d;c[b]=j}a.notify("refresh")},onCollectionRemove:function(b,a){this.splice(0,a.items)},onCollectionUpdateKey:function(b,a){this.updateKey(a.item,a.oldKey)},_aggregators:{average:function(d,f,c,g,b){var a=c-f;return a&&this._aggregators.sum.call(this,d,f,c,g,b)/a},bounds:function(m,f,g,d,a){for(var c,b,h,j=f;j<g;++j){c=m[j];c=(a?c[a]:c)[d];if(!(c<b)){b=c}if(!(c>h)){h=c}}return[h,b]},count:function(a){return a.length},extremes:function(h,b,d,q,o){var j=null,c=null,g,a,m,f,p;for(g=b;g<d;++g){a=h[g];p=(o?a[o]:a)[q];if(!(p<m)){m=p;j=a}if(!(p>f)){f=p;c=a}}return[c,j]},max:function(h,c,g,d,f){var a=this._aggregators.bounds.call(this,h,c,g,d,f);return a[1]},maxItem:function(h,c,g,d,f){var a=this._aggregators.extremes.call(this,h,c,g,d,f);return a[1]},min:function(h,c,g,d,f){var a=this._aggregators.bounds.call(this,h,c,g,d,f);return a[0]},minItem:function(h,c,g,d,f){var a=this._aggregators.extremes.call(this,h,c,g,d,f);return a[0]},sum:function(b,f,a,h,j){for(var g,d=0,c=f;c<a;++c){g=b[c];g=(j?g[j]:g)[h];d+=g}return d}},_eventToMethodMap:{add:"onCollectionAdd",beforeitemchange:"onCollectionBeforeItemChange",beginupdate:"onCollectionBeginUpdate",endupdate:"onCollectionEndUpdate",itemchange:"onCollectionItemChange",filtereditemchange:"onCollectionFilteredItemChange",refresh:"onCollectionRefresh",remove:"onCollectionRemove",beforesort:"beforeCollectionSort",sort:"onCollectionSort",filter:"onCollectionFilter",filteradd:"onCollectionFilterAdd",updatekey:"onCollectionUpdateKey"},addObserver:function(b){var c=this,a=c.observers;if(!a){c.observers=a=[]}a.push(b);if(a.length>1){Ext.Array.sort(a,c.prioritySortFn)}},prioritySortFn:function(d,c){var g=d.observerPriority||0,f=c.observerPriority||0;return g-f},applyExtraKeys:function(f,a){var g=this,d=a||{},c,b,h;for(b in f){h=f[b];if(!h.isCollectionKey){c={collection:g};if(Ext.isString(h)){c.property=h}else{c=Ext.apply(c,h)}h=new Ext.util.CollectionKey(c)}else{h.setCollection(g)}d[b]=g[b]=h;h.name=b}return d},applyGrouper:function(a){if(a){a=this.getSorters().decodeSorter(a,"Ext.util.Grouper")}return a},decodeItems:function(d,c){var g=this,b=(c===undefined)?d:d[c],a,h,f;if(!b||!b.$cloned){a=d.length>c+1||!Ext.isIterable(b);if(a){b=Ext.Array.slice(d,c);if(b.length===1&&b[0]===undefined){b.length=0}}h=g.getDecoder();if(h){if(!a){b=b.slice(0);a=true}for(f=b.length;f-->0;){if((b[f]=h.call(g,b[f]))===false){b.splice(f,1)}}}if(a){b.$cloned=true}}return b},getIndices:function(){var f=this,g=f.indices,b=f.items,a=b.length,d,c;if(!g){f.indices=g={};++f.indexRebuilds;for(d=0;d<a;++d){c=f.getKey(b[d]);g[c]=d}}return g},notify:function(h,o){var a=this,g=a.observers,c=a._eventToMethodMap[h],b=0,j,f,d,m;o=o||[];if(g&&c){for(j=0,f=g.length;j<f;++j){d=(m=g[j])[c];if(d){if(!b++){o.unshift(a)}d.apply(m,o)}}}if(!a.hasListeners){return}if(a.hasListeners[h]){if(!b){o.unshift(a)}a.fireEventArgs(h,o)}},getFilterFn:function(){return this.getFilters().getFilterFn()},getFilters:function(b){var a=this._filters;if(!a&&b!==false){a=new Ext.util.FilterCollection();this.setFilters(a)}return a},isItemFiltered:function(a){return !this.getFilters().filterFn(a)},onFilterChange:function(g){var f=this,a=f.getSource(),d,c,b;if(!a){d=f.getExtraKeys();if(d){c={};for(b in d){c[b]=d[b].clone(f)}}a=new Ext.util.Collection({keyFn:f.getKey,extraKeys:c,rootProperty:f.getRootProperty()});if(f.length){a.add(f.items)}f.setSource(a);f.autoSource=a}else{if(a.length||f.length){f.onCollectionRefresh(a)}}f.notify("filter")},applyFilters:function(a,b){if(a==null||(a&&a.isFilterCollection)){return a}if(a){if(!b){b=this.getFilters()}b.splice(0,b.length,a)}return b},updateFilters:function(b,c){var a=this;if(c){c.un("endupdate","onEndUpdateFilters",a)}if(b){b.on({endupdate:"onEndUpdateFilters",scope:a,priority:a.$endUpdatePriority});b.$filterable=a}a.onEndUpdateFilters(b)},onEndUpdateFilters:function(a){var d=this,b=d.filtered,c=!!a&&(a.length>0);if(b||c){d.filtered=c;d.onFilterChange(a)}},getSortFn:function(){return this._sortFn||this.createSortFn()},getSorters:function(b){var a=this._sorters;if(!a&&b!==false){a=new Ext.util.SorterCollection();this.setSorters(a)}return a},onSortChange:function(){if(this.sorted){this.sortItems()}},sort:function(c,a,b){var d=this.getSorters();d.addSort.apply(d,arguments);return this},sortData:function(a){Ext.Array.sort(a,this.getSortFn());return a},sortItems:function(b){var a=this;if(a.sorted){b=a.getSortFn()}a.indices=null;a.notify("beforesort",[a.getSorters(false)]);if(a.length){Ext.Array.sort(a.items,b)}a.notify("sort")},sortBy:function(a){return this.sortItems(a)},findInsertionIndex:function(a,b,c){if(!b){b=this.items}if(!c){c=this.getSortFn()}return Ext.Array.binarySearch(b,a,c)},applySorters:function(a,b){if(a==null||(a&&a.isSorterCollection)){return a}if(a){if(!b){b=this.getSorters()}b.splice(0,b.length,a)}return b},createSortFn:function(){var a=this,c=a.getGrouper(),b=a.getSorters(false),d=b?b.getSortFn():null;if(!c){return d}return function(h,g){var f=c.sort(h,g);if(!f&&d){f=d(h,g)}return f}},updateGrouper:function(d){var f=this,c=f.getGroups(),b=f.getSorters(),a;f.onSorterChange();f.grouped=!!d;if(d){if(f.getTrackGroups()){if(!c){c=new Ext.util.GroupCollection({itemRoot:f.getRootProperty()});c.$groupable=f;f.setGroups(c)}c.setGrouper(d);a=true}}else{if(c){f.removeObserver(c);c.destroy()}f.setGroups(null)}if(!b.updating){f.onEndUpdateSorters(b)}if(a){c.onCollectionRefresh(f)}},updateSorters:function(b,c){var a=this;if(c){c.un("endupdate","onEndUpdateSorters",a)}if(b){b.on({endupdate:"onEndUpdateSorters",scope:a,priority:a.$endUpdatePriority});b.$sortable=a}a.onSorterChange();a.onEndUpdateSorters(b)},onSorterChange:function(){this._sortFn=null},onEndUpdateSorters:function(a){var d=this,b=d.sorted,c=(d.grouped&&d.getAutoGroup())||(a&&a.length>0);if(b||c){d.sorted=!!c;d.onSortChange(a)}},removeObserver:function(a){var b=this.observers;if(b){Ext.Array.remove(b,a)}},spliceMerge:function(p,h){var w=this,v=w.map,g=p.length,c=0,q=w.items,m=q.length,o=[],j=0,s=[],d=w.getSortFn(),r,b,t,f,u,a;w.items=s;for(a=0;a<g;a=b){f=p[a];for(;c<m;++c){if(d(f,u=q[c])<0){break}s.push(u)}if(c===m){o[j++]={at:s.length,itemAt:s[s.length-1],items:(r=[])};if(j>1){o[j-2].next=o[j-1]}for(;a<g;++a){r.push(f=p[a]);s.push(f)}break}o[j++]={at:s.length,itemAt:s[s.length-1],items:(r=[f])};if(j>1){o[j-2].next=o[j-1]}s.push(f);for(b=a+1;b<g;++b){if(d(f=p[b],u)>=0){break}s.push(f);r.push(f)}}for(;c<m;++c){s.push(q[c])}for(t=0;t<g;++t){v[h[t]]=p[t]}w.length=s.length;++w.generation;w.indices=null;for(t=0;t<j;++t){w.notify("add",[o[t]])}},getGroups:function(){return(arguments.callee.$previous||Ext.Base.prototype.getGroups).call(this)||null},updateAutoGroup:function(b){var a=this.getGroups();if(a){a.setAutoGroup(b)}this.onEndUpdateSorters(this._sorters)},updateGroups:function(a,b){if(b){this.removeObserver(b)}if(a){this.addObserver(a)}},updateSource:function(c,b){var a=this.autoSource;if(b){b.removeObserver(this);if(b===a){a.destroy();this.autoSource=null}}if(c){c.addObserver(this);if(c.length||this.length){this.onCollectionRefresh(c)}}}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.util,"Collection"],function(){var a=this.prototype;a.removeAtKey=a.removeByKey;a.decodeRemoveItems=a.decodeItems;Ext.Object.each(a._aggregators,function(b){a[b]=function(f,d,c){return this.aggregate(f,b,d,c)};a[b+"ByGroup"]=function(c){return this.aggregateByGroup(c,b)}})}));(Ext.cmd.derive("Ext.util.ObjectTemplate",Ext.Base,{isObjectTemplate:true,excludeProperties:{},valueRe:/^[{][a-z\.]+[}]$/i,statics:{create:function(b,a){return b.isObjectTemplate?b:new Ext.util.ObjectTemplate(b,a)}},constructor:function(b,a){Ext.apply(this,a);this.template=b},apply:function(a){var b=this;delete b.apply;b.apply=b.compile(b.template);return b.apply(a)},privates:{compile:function(f){var g=this,b=g.excludeProperties,h,c,a,d;if(Ext.isString(f)){if(f.indexOf("{")<0){d=function(){return f}}else{if(g.valueRe.test(f)){f=f.substring(1,f.length-1).split(".");d=function(o){for(var j=o,m=0;j&&m<f.length;++m){j=j[f[m]]}return j}}else{f=new Ext.XTemplate(f);d=function(j){return f.apply(j)}}}}else{if(!f||Ext.isPrimitive(f)||Ext.isFunction(f)){d=function(){return f}}else{if(f instanceof Array){h=[];for(c=0,a=f.length;c<a;++c){h[c]=g.compile(f[c])}d=function(o){var j=[],m;for(m=0;m<a;++m){j[m]=h[m](o)}return j}}else{h={};for(c in f){if(!b[c]){h[c]=g.compile(f[c])}}d=function(p){var m={},o,j;for(o in f){j=b[o]?f[o]:h[o](p);if(j!==undefined){m[o]=j}}return m}}}}return d}}},1,0,0,0,0,0,[Ext.util,"ObjectTemplate"],0));(Ext.cmd.derive("Ext.data.schema.Role",Ext.Base,{isRole:true,left:true,owner:false,side:"left",isMany:false,defaultReaderType:"json",_internalReadOptions:{recordsOnly:true,asRoot:true},constructor:function(d,a){var b=this,c=a.extra;Ext.apply(b,a);if(c){delete c.type;Ext.apply(b,c);delete b.extra}b.association=d;if(d.owner===b.side){d.owner=b;b.owner=true}},processUpdate:function(){Ext.raise('Only the "many" for an association may be processed. "'+this.role+'" is not valid.')},processLoad:function(d,a,c,b){return c},checkMembership:Ext.emptyFn,adoptAssociated:function(c,a){var b=this.getAssociatedItem(c);if(b){a.adopt(b)}},createAssociationStore:function(h,q,g,b){var m=this,f=m.association,j=f.getFieldName(),o=f.isManyToMany,c=m.storeConfig,a=q.getId(),d={asynchronousLoad:false,model:m.cls,role:m,session:h,associatedEntity:q,disableMetaChangeEvent:true,pageSize:null,remoteFilter:true,trackRemoved:!h},p;if(o){d.filters=[{property:m.inverse.field,value:a,exactMatch:true}]}else{if(j){d.filters=[{property:j,value:a,exactMatch:true}];d.foreignKeyName=j}}if(c){Ext.apply(d,c)}p=Ext.Factory.store(d);m.onStoreCreate(p,h,a);if(j||(o&&h)){p.on({scope:m,add:"onAddToMany",remove:"onRemoveFromMany",clear:"onRemoveFromMany"})}if(g){p.loadData(g);p.complete=!!b}return p},onStoreCreate:Ext.emptyFn,getAssociatedStore:function(s,g,b,u,w){var z=this,q=z.getStoreName(),h=s[q],a=s.session,o=g&&g.reload,r=s.$source,j=false,c,d,t,v,p,m,f,y;if(!h){if(a){if(!u&&r){r=r[q];if(r&&!r.isLoading()){f=r;u=[];p=r.getData().items;for(t=0,v=p.length;t<v;++t){m=p[t];u.push(a.getRecord(m.self,m.id))}j=!!r.complete;c=true}}if(!c){y=!!u;u=z.findRecords(a,s,u,w);if(!y&&(!u||!u.length)){u=null}j=y}}else{j=!!(u&&u.length>0)}h=z.createAssociationStore(a,s,u,j);h.$source=f;if(!u&&(z.autoLoad||g)){o=true}s[q]=h}if(g){if(o||h.isLoading()){h.on("load",function(D,C,A,B){d=[D,B];b=b||g.scope||s;if(A){Ext.callback(g.success,b,d)}else{Ext.callback(g.failure,b,d)}d.push(A);Ext.callback(g,b,d);Ext.callback(g.callback,b,d)},null,{single:true})}else{d=[h,null];b=b||g.scope||s;Ext.callback(g.success,b,d);d.push(true);Ext.callback(g,b,d);Ext.callback(g.callback,b,d)}}if(o&&!h.isLoading()){h.load()}return h},getAssociatedItem:function(b){var a=this.isMany?this.getStoreName():this.getInstanceName();return b[a]||null},onDrop:Ext.emptyFn,getReaderRoot:function(){var a=this;return a.associationKey||(a.associationKey=a.association.schema.getNamer().readerRoot(a.role))},getReader:function(){var f=this,c=f.reader,a=f.cls,b=!f.associationKey,d=this.getReaderRoot();if(c&&!c.isReader){if(Ext.isString(c)){c={type:c}}Ext.applyIf(c,{model:a,rootProperty:d,useSimpleAccessors:b,type:f.defaultReaderType});c=f.reader=Ext.createByAlias("reader."+c.type,c)}return c},getInstanceName:function(){var a=this;return a.instanceName||(a.instanceName=a.association.schema.getNamer().instanceName(a.role))},getOldInstanceName:function(){return this.oldInstanceName||(this.oldInstanceName="$old"+this.getInstanceName())},getStoreName:function(){var a=this;return a.storeName||(a.storeName=a.association.schema.getNamer().storeName(a.role))},constructReader:function(d){var f=this,j=f.getReader(),g=f.cls,h=!f.associationKey,a=f.getReaderRoot(),b,c;if(!j){c=g.getProxy();if(c){b=c.getReader();j=new b.self();j.copyFrom(b);j.setRootProperty(a)}else{j=new d.self({model:g,useSimpleAccessors:h,rootProperty:a})}f.reader=j}return j},read:function(d,a,f,g){var b=this.constructReader(f),c=b.getRoot(a);if(c){return b.readRecords(c,g,this._internalReadOptions)}},getCallbackOptions:function(b,c,a){if(typeof b==="function"){b={callback:b,scope:c||a}}else{if(b){b=Ext.apply({},b);b.scope=c||b.scope||a}}return b},doGetFK:function(q,r,m){var g=this,p=g.cls,c=g.association.getFieldName(),j=g.getInstanceName(),h=q[j],o=r&&r.reload,b=h!==undefined&&!o,f=q.session,a,d;if(!b){if(f){a=q.get(c);if(a||a===0){b=f.peekRecord(p,a,true)&&!o;h=f.getRecord(p,a,false)}else{b=true;q[j]=h=null}}else{if(c){a=q.get(c);if(!a&&a!==0){b=true;q[j]=h=null}else{if(!h){h=p.createWithId(a)}}}else{b=true}}}else{if(h){b=!h.isLoading()}}if(b){if(r){d=[h,null];m=m||r.scope||q;Ext.callback(r.success,m,d);d.push(true);Ext.callback(r,m,d);Ext.callback(r.callback,m,d)}}else{q[j]=h;r=g.getCallbackOptions(r,m,q);h.load(r)}return h},doSetFK:function(o,h,r,p){var g=this,d=g.association.getFieldName(),j=g.getInstanceName(),c=o[j],a=g.inverse,b=a.setterName,f=o.session,m,q;if(h&&h.isEntity){if(c!==h){q=g.getOldInstanceName();o[q]=c;o[j]=h;if(c&&c.isEntity){c[a.getInstanceName()]=undefined}if(d){o.set(d,h.getId())}delete o[q];if(b){h[b](o)}}}else{m=(o.changingKey&&!a.isMany)||o.set(d,h);if(m&&c&&c.isEntity&&!c.isEqual(c.getId(),h)){o[j]=undefined;if(!a.isMany){c[a.getInstanceName()]=undefined}}}if(r){if(Ext.isFunction(r)){r={callback:r,scope:p||o}}return o.save(r)}}},1,0,0,0,0,0,[Ext.data.schema,"Role"],0));(Ext.cmd.derive("Ext.data.schema.Association",Ext.Base,{isOneToOne:false,isManyToOne:false,isManyToMany:false,owner:null,field:null,constructor:function(c){var a=this,b,d;Ext.apply(a,c);a.left=b=new a.Left(a,a.left);a.right=d=new a.Right(a,a.right);b.inverse=d;d.inverse=b},hasField:function(){return !!this.field},getFieldName:function(){var a=this.field;return a?a.name:""}},1,0,0,0,0,0,[Ext.data.schema,"Association"],0));(Ext.cmd.derive("Ext.data.schema.OneToOne",Ext.data.schema.Association,{isOneToOne:true,isToOne:true,kind:"one-to-one",Left:Ext.define(null,{extend:"Ext.data.schema.Role",onDrop:function(b,c){var a=this.getAssociatedItem(b);b[this.getInstanceName()]=null;if(a){a[this.inverse.getInstanceName()]=null}},createGetter:function(){var a=this;return function(){return a.doGet(this)}},createSetter:function(){var a=this;return function(b){return a.doSet(this,b)}},doGet:function(c){var d=this.getInstanceName(),a=c[d],b=c.session;if(!a&&b){}return a||null},doSet:function(c,b){var d=this.getInstanceName(),a=c[d],f=this.inverse.setterName;if(a!==b){c[d]=b;if(f){b[f](c)}}return a},read:function(a,d,b,f){var c=this,g=c.callParent([a,d,b,f]),h;if(g){h=g[0];if(h){h[c.inverse.getInstanceName()]=a;a[c.getInstanceName()]=h;delete a.data[c.role]}}}}),Right:Ext.define(null,{extend:"Ext.data.schema.Role",left:false,side:"right",createGetter:function(){var a=this;return function(b,c){return a.doGetFK(this,b,c)}},createSetter:function(){var a=this;return function(d,b,c){return a.doSetFK(this,d,b,c)}},onDrop:function(a,f){var c=this,d=c.association.field,b=c.getAssociatedItem(a),g;if(c.inverse.owner){if(f){g=a.get(d.name);if(g||g===0){b=f.getEntry(c.cls,g).record;if(b){b.drop()}}}else{if(b){b.drop()}}}if(d){a.set(d.name,null)}a[c.getInstanceName()]=null;if(b){b[c.inverse.getInstanceName()]=null}},onValueChange:function(h,g,f){var d=this,j=h[d.getOldInstanceName()]||d.getAssociatedItem(h),c=f||f===0,b=d.getInstanceName(),a=d.cls;h.changingKey=true;d.doSetFK(h,f);if(!c){h[b]=null}else{if(g&&a){h[b]=g.peekRecord(a,f)||undefined}}if(d.inverse.owner&&j){d.association.schema.queueKeyCheck(j,d)}h.changingKey=false},checkKeyForDrop:function(a){var b=this.inverse.getAssociatedItem(a);if(!b){a.drop()}},read:function(t,a,m,b){var f=this,r=f.callParent([t,a,m,b]),g,p,h,d,j,q,s,o,c;if(r){g=r[0];p=f.association.field;if(p){h=p.name}d=t.session;c=t.data;if(g){if(d){j=d.getRefs(g,this.inverse,true);o=(j&&j[t.id])||(c[h]===undefined)}else{o=true}if(o){if(p){s=c[h];q=g.id;if(s!==q){c[h]=q;if(d){d.updateReference(t,p,q,s)}}}g[f.inverse.getInstanceName()]=t;t[f.getInstanceName()]=g}delete c[f.role]}}}})},0,0,0,0,0,0,[Ext.data.schema,"OneToOne"],0));(Ext.cmd.derive("Ext.data.schema.ManyToOne",Ext.data.schema.Association,{isManyToOne:true,isToOne:true,kind:"many-to-one",Left:Ext.define(null,{extend:"Ext.data.schema.Role",isMany:true,onDrop:function(b,m){var a=this,d=a.getAssociatedItem(b),g,j,h,c,f;if(d){g=d.removeAll();if(g&&a.inverse.owner){for(h=0,j=g.length;h<j;++h){g[h].drop()}}d.destroy();b[a.getStoreName()]=null}else{if(m){g=m.getRefs(b,a);if(g){for(f in g){g[f].drop()}}}}},processUpdate:function(a,g){var b=this,j=b.inverse.cls,m=g.R,f,c,d,h;if(m){for(f in m){c=a.peekRecord(j,f);if(c){h=a.getEntityList(b.cls,m[f]);d=b.getAssociatedItem(c);if(d){d.loadData(h);d.complete=true}else{c[b.getterName](null,null,h)}}else{a.onInvalidAssociationEntity(j,f)}}}},findRecords:function(g,h,b,r){var f=b,j=g.getRefs(h,this,true),m=this.association.field,p=m.name,a,q,c,d,o;if(!h.phantom){f=[];if(j||r){if(b){o={};for(c=0,d=b.length;c<d;++c){a=b[c];q=a.id;if(j&&j[q]){f.push(a)}else{if(r&&a.data[p]===undefined){f.push(a);a.data[p]=h.id;g.updateReference(a,m,h.id,undefined)}}o[q]=true}}if(j){for(q in j){if(!o||!o[q]){f.push(j[q])}}}}}return f},processLoad:function(d,c,b,a){var f=b;if(a){f=this.findRecords(a,c,b,true)}this.onLoadMany(c,f,a);return f},adoptAssociated:function(c,a){var d=this.getAssociatedItem(c),g,f,b;if(d){d.setSession(a);g=d.getData().items;for(f=0,b=g.length;f<b;++f){a.adopt(g[f])}}},createGetter:function(){var a=this;return function(b,c,d){return a.getAssociatedStore(this,b,c,d,a,true)}},createSetter:null,onAddToMany:function(a,b){this.syncFK(b,a.getAssociatedEntity(),false)},onLoadMany:function(p,g,o){var b=this.inverse.getInstanceName(),c=p.getId(),q=this.association.field,j,m,f,d,h,a;if(q){for(j=0,m=g.length;j<m;++j){f=g[j];f[b]=p;if(q){a=q.name;h=f.data;d=h[a];if(d!==c){h[a]=c;if(o){o.updateReference(f,q,c,d)}}}}}},onRemoveFromMany:function(a,b){this.syncFK(b,a.getAssociatedEntity(),true)},read:function(o,d,c,g){var m=this,b=m.inverse.getInstanceName(),f=m.callParent([o,d,c,g]),a,j,h;if(f){a=o[m.getterName](null,null,f);delete o.data[m.role];f=a.getData().items;for(h=0,j=f.length;h<j;++h){f[h][b]=o}}},syncFK:function(g,p,q){var o=this.association.getFieldName(),j=this.inverse,h=j.setterName,b=j.getInstanceName(),m=g.length,c=p.getId(),a,f,d;while(m-->0){f=g[m];a=!f.isEqual(c,f.get(o));d=q?null:p;if(a!==q){f.changingKey=true;f[h](d);f.changingKey=false}else{f[b]=d}}}}),Right:Ext.define(null,{extend:"Ext.data.schema.Role",left:false,side:"right",onDrop:function(a,c){var b=this.association.field;if(b){a.set(b.name,null)}a[this.getInstanceName()]=null},createGetter:function(){var a=this;return function(b,c){return a.doGetFK(this,b,c)}},createSetter:function(){var a=this;return function(b,c,d){return a.doSetFK(this,b,c,d)}},checkMembership:function(a,b){var d=this.association.field,c;c=this.getSessionStore(a,b.get(d.name));if(c&&!c.contains(b)){c.add(b)}},onValueChange:function(a,f,r,o){var g=this,p=g.getInstanceName(),m=g.cls,s,q,j,b,c,h,d;if(!a.changingKey){s=r||r===0;if(!s){a[p]=null}if(f){j=g.getSessionStore(f,o);if(j){j.remove(a)}if(s){j=g.getSessionStore(f,r);if(j&&!j.isLoading()){j.add(a)}if(m){d=f.peekRecord(m,r)}a[p]=d||undefined}}else{q=a.joined;if(q){for(b=0,c=q.length;b<c;++b){j=q[b];if(j.isStore){h=j.getAssociatedEntity();if(h&&h.self===g.cls&&h.getId()===o){j.remove(a)}}}}}}if(g.owner&&r===null){g.association.schema.queueKeyCheck(a,g)}},checkKeyForDrop:function(b){var a=this.association.field;if(b.get(a.name)===null){b.drop()}},getSessionStore:function(a,d){var c=this.cls,b;if(c){b=a.peekRecord(c,d);if(b){return this.inverse.getAssociatedItem(b)}}},read:function(a,d,c,g){var f=this.callParent([a,d,c,g]),b;if(f){b=f[0];if(b){a[this.getInstanceName()]=b;delete a.data[this.role]}}}})},0,0,0,0,0,0,[Ext.data.schema,"ManyToOne"],0));(Ext.cmd.derive("Ext.data.schema.ManyToMany",Ext.data.schema.Association,{isManyToMany:true,isToMany:true,kind:"many-to-many",Left:Ext.define(null,{extend:"Ext.data.schema.Role",isMany:true,digitRe:/^\d+$/,findRecords:function(j,m,b){var p=j.getMatrixSlice(this.inverse,m.id),c=p.members,h=[],r=this.cls,o,f,g,q,d,a;if(b){o={};for(f=0,g=b.length;f<g;++f){a=b[f];q=a.id;d=c[q];if(!(d&&d[2]===-1)){h.push(a)}o[q]=true}}for(q in c){d=c[q];if(!o||!o[q]&&(d&&d[2]!==-1)){a=j.peekRecord(r,q);if(a){h.push(a)}}}return h},processLoad:function(d,c,b,a){var f=b;if(a){f=this.findRecords(a,c,b);this.onAddToMany(d,f,true)}return f},processUpdate:function(a,g){var b=this,j=b.inverse.cls,m=g.R,f,c,d,h;if(m){for(f in m){c=a.peekRecord(j,f);if(c){h=a.getEntityList(b.cls,m[f]);d=b.getAssociatedItem(c);if(d){d.loadData(h);d.complete=true}else{c[b.getterName](null,null,h)}}else{a.onInvalidAssociationEntity(j,f)}}}b.processMatrixBlock(a,g.C,1);b.processMatrixBlock(a,g.D,-1)},checkMembership:function(g,h){var j=g.getMatrix(this.association,true),f,b,c,p,r,o,a,d,q,m;if(!j){return}f=this.left?j.right:j.left;b=f.inverse.role.cls;c=this.inverse;r=f.slices;if(r){p=r[h.id];if(p){a=p.members;for(o in a){d=a[o];if(d[2]!==-1){q=g.peekRecord(b,o);if(q){m=c.getAssociatedItem(q);if(m){m.matrixUpdate=1;m.add(h);m.matrixUpdate=0}}}}}}},onStoreCreate:function(d,a,b){var f=this,c;if(a){c=a.getMatrixSlice(f.inverse,b);c.attach(d);c.notify=f.onMatrixUpdate;c.scope=f}},processMatrixBlock:function(f,d,c){var a=this.inverse,b=this.digitRe,g,h;if(d){for(h in d){if(b.test(h)){h=parseInt(h,10)}g=f.getMatrixSlice(a,h);g.update(d[h],c)}}},createGetter:function(){var a=this;return function(b,c,d){return a.getAssociatedStore(this,b,c,d,false)}},onAddToMany:function(b,a,c){if(!b.matrixUpdate){b.matrixUpdate=1;b.matrix.update(a,c===true?0:1);b.matrixUpdate=0}},onRemoveFromMany:function(b,a){if(!b.matrixUpdate){b.matrixUpdate=1;b.matrix.update(a,-1);b.matrixUpdate=0}},read:function(b,f,c,g){var d=this,a=d.callParent([b,f,c,g]);if(a){b[d.getterName](null,null,a);delete b.data[d.role]}},onMatrixUpdate:function(f,h,d){var a=f.store,b,g,c;if(a&&!a.loading&&!a.matrixUpdate){a.matrixUpdate=1;b=a.indexOfId(h);if(d<0){if(b>=0){a.remove([b])}}else{if(b<0){c=a.getSession().getEntry(this.type,h);g=c&&c.record;if(g){a.add(g)}}}a.matrixUpdate=0}},adoptAssociated:function(c,a){var f=this.getAssociatedItem(c),d,g,b;if(f){f.setSession(a);this.onStoreCreate(f,a,c.getId());d=f.getData().items;for(g=0,b=d.length;g<b;++g){a.adopt(d[g])}}}},function(){var a=this;Ext.ClassManager.onCreated(function(){Ext.data.schema.ManyToMany.prototype.Right=Ext.define(null,{extend:a,left:false,side:"right"})},null,"Ext.data.schema.ManyToMany")})},0,0,0,0,0,0,[Ext.data.schema,"ManyToMany"],0));(Ext.cmd.derive("Ext.util.Inflector",Ext.Base,{singleton:true,plurals:[[(/(quiz)$/i),"$1zes"],[(/^(ox)$/i),"$1en"],[(/([m|l])ouse$/i),"$1ice"],[(/(matr|vert|ind)ix|ex$/i),"$1ices"],[(/(x|ch|ss|sh)$/i),"$1es"],[(/([^aeiouy]|qu)y$/i),"$1ies"],[(/(hive)$/i),"$1s"],[(/(?:([^f])fe|([lr])f)$/i),"$1$2ves"],[(/sis$/i),"ses"],[(/([ti])um$/i),"$1a"],[(/(buffal|tomat|potat)o$/i),"$1oes"],[(/(bu)s$/i),"$1ses"],[(/(alias|status|sex)$/i),"$1es"],[(/(octop|vir)us$/i),"$1i"],[(/(ax|test)is$/i),"$1es"],[(/^(p)erson$/i),"$1eople"],[(/^(m)an$/i),"$1en"],[(/(.*)(child)(ren)?$/i),"$1$2ren"],[(/s$/i),"s"],[(/$/),"s"]],singulars:[[(/(address)$/i),"$1"],[(/(quiz)zes$/i),"$1"],[(/(matr)ices$/i),"$1ix"],[(/(vert|ind)ices$/i),"$1ex"],[(/^(ox)en/i),"$1"],[(/(alias|status)es$/i),"$1"],[(/(octop|vir)i$/i),"$1us"],[(/(cris|ax|test)es$/i),"$1is"],[(/(shoe)s$/i),"$1"],[(/(o)es$/i),"$1"],[(/(bus)es$/i),"$1"],[(/([m|l])ice$/i),"$1ouse"],[(/(x|ch|ss|sh)es$/i),"$1"],[(/(m)ovies$/i),"$1ovie"],[(/(s)eries$/i),"$1eries"],[(/([^aeiouy]|qu)ies$/i),"$1y"],[(/([lr])ves$/i),"$1f"],[(/(tive)s$/i),"$1"],[(/(hive)s$/i),"$1"],[(/([^f])ves$/i),"$1fe"],[(/(^analy)ses$/i),"$1sis"],[(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i),"$1$2sis"],[(/([ti])a$/i),"$1um"],[(/(n)ews$/i),"$1ews"],[(/(p)eople$/i),"$1erson"],[(/s$/i),""]],uncountable:["sheep","fish","series","species","money","rice","information","equipment","grass","mud","offspring","deer","means"],singular:function(b,a){this.singulars.unshift([b,a])},plural:function(b,a){this.plurals.unshift([b,a])},clearSingulars:function(){this.singulars=[]},clearPlurals:function(){this.plurals=[]},isTransnumeral:function(a){return Ext.Array.indexOf(this.uncountable,a)!=-1},pluralize:function(a){if(this.isTransnumeral(a)){return a}var g=this.plurals,f=g.length,b,d,c;for(c=0;c<f;c++){b=g[c];d=b[0];if(d==a||(d.test&&d.test(a))){return a.replace(d,b[1])}}return a},singularize:function(a){if(this.isTransnumeral(a)){return a}var g=this.singulars,f=g.length,b,d,c;for(c=0;c<f;c++){b=g[c];d=b[0];if(d==a||(d.test&&d.test(a))){return a.replace(d,b[1])}}return a},classify:function(a){return Ext.String.capitalize(this.singularize(a))},ordinalize:function(b){var d=parseInt(b,10),a=d%10,c=d%100;if(11<=c&&c<=13){return b+"th"}else{switch(a){case 1:return b+"st";case 2:return b+"nd";case 3:return b+"rd";default:return b+"th"}}}},0,0,0,0,0,0,[Ext.util,"Inflector"],function(){var b={alumnus:"alumni",cactus:"cacti",focus:"foci",nucleus:"nuclei",radius:"radii",stimulus:"stimuli",ellipsis:"ellipses",paralysis:"paralyses",oasis:"oases",appendix:"appendices",index:"indexes",beau:"beaux",bureau:"bureaux",tableau:"tableaux",woman:"women",child:"children",man:"men",corpus:"corpora",criterion:"criteria",curriculum:"curricula",genus:"genera",memorandum:"memoranda",phenomenon:"phenomena",foot:"feet",goose:"geese",tooth:"teeth",antenna:"antennae",formula:"formulae",nebula:"nebulae",vertebra:"vertebrae",vita:"vitae"},a;for(a in b){if(b.hasOwnProperty(a)){this.plural(a,b[a]);this.singular(b[a],a)}}}));(Ext.cmd.derive("Ext.data.schema.Namer",Ext.Base,{isNamer:true,capitalize:function(a){return Ext.String.capitalize(a)},fieldRole:function(b){var a=b.match(this.endsWithIdRe,"");if(a){b=b.substr(0,b.length-(a[1]||a[2]).length)}return this.apply("uncapitalize",b)},idField:function(a){return this.apply("uncapitalize,singularize",a)+"Id"},instanceName:function(a){return this.apply("underscore",a)},multiRole:function(a){return this.apply("undotted,uncapitalize,pluralize",a)},pluralize:function(a){return Ext.util.Inflector.pluralize(a)},readerRoot:function(a){return this.apply("uncapitalize",a)},singularize:function(a){return Ext.util.Inflector.singularize(a)},storeName:function(a){return this.apply("underscore",a)},uncapitalize:function(a){return Ext.String.uncapitalize(a)},underscore:function(a){return"_"+a},uniRole:function(a){return this.apply("undotted,uncapitalize,singularize",a)},undotted:function(c){if(c.indexOf(".")<0){return c}var a=c.split("."),b=a.length;while(b-->1){a[b]=this.apply("capitalize",a[b])}return a.join("")},getterName:function(b){var a=b.role;if(b&&b.isMany){return a}return"get"+this.apply("capitalize",a)},inverseFieldRole:function(g,h,d,a){var f=this,j=f.apply(h?"uniRole":"multiRole",g),c=f.apply("pluralize",d),b=f.apply("undotted,pluralize",a);if(c.toLowerCase()!==b.toLowerCase()){j=d+f.apply("capitalize",j)}return j},manyToMany:function(b,a,c){var f=this,d=f.apply("undotted,capitalize,singularize",a)+f.apply("undotted,capitalize,pluralize",c);if(b){d=f.apply("capitalize",b+d)}return d},manyToOne:function(b,d,c,a){return this.apply("capitalize,singularize",c)+this.apply("capitalize",d)},matrixRole:function(a,c){var b=this.apply(a?"multiRole,capitalize":"multiRole",c);return a?a+b:b},oneToOne:function(b,d,c,a){return this.apply("undotted,capitalize,singularize",c)+this.apply("capitalize",d)},setterName:function(a){return"set"+this.apply("capitalize",a.role)},endsWithIdRe:/(?:(_id)|[^A-Z](Id))$/,cache:{},apply:function(m,h){var c=this,g=c.cache,d=g[h]||(g[h]={}),b=d[m],a,j,f;if(!b){if(m.indexOf(",")<0){b=c[m](h)}else{j=(f=m.split(",")).length;b=h;for(a=0;a<j;++a){b=c.apply(f[a],b)}}d[m]=b}return b}},0,0,0,0,["namer.default"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.schema,"Namer"],0));(Ext.cmd.derive("Ext.data.schema.Schema",Ext.Base,{aliasPrefix:"schema.",isSchema:true,type:"default",statics:{instances:{},get:function(d){var g=this,c=g.instances,h="default",b=d&&Ext.isString(d),a,f;if(d){if(d.isSchema){return d}h=b?d:(d.id||h)}if(!(a=c[h])){c[h]=a=g.create(d);a.id=h}else{if(d&&!b){f=Ext.merge({},a.config);Ext.merge(f,d);a.setConfig(f);a.config=f}}return a},lookupEntity:function(b){var f=null,a=this.instances,d,c,g;if(b){if(b.isEntity){f=b.self}else{if(Ext.isFunction(b)){f=b}else{if(Ext.isString(b)){f=Ext.ClassManager.get(b);if(f&&(!f.prototype||!f.prototype.isEntity)){f=null}if(!f){for(c in a){g=a[c];d=g.getEntity(b);if(d){if(f){Ext.raise('Ambiguous entity name "'+b+'". Defined by schema "'+f.schema.type+'" and "'+c+'"')}f=d}}}if(!f){Ext.raise('No such Entity "'+b+'".')}}}}}return f}},assocCount:0,entityCount:0,config:{defaultIdentifier:null,keyCheckDelay:10,namer:"default",namespace:null,proxy:{type:"ajax",url:"{prefix}/{entityName}"},urlPrefix:""},onClassExtended:function(b,a){var c=a.alias;if(c&&!a.type){if(!Ext.isString(c)){c=c[0]}b.prototype.type=c.substring(this.prototype.aliasPrefix.length)}},constructor:function(a){this.initConfig(a);this.clear()},applyDefaultIdentifier:function(a){return a&&Ext.Factory.dataIdentifier(a)},applyNamer:function(b){var a=Ext.data.schema.Namer.create(b);a.schema=this;return a},applyNamespace:function(b){if(b){var a=b.length-1;if(b.charAt(a)!=="."){b+="."}}return b},applyProxy:function(a){return Ext.util.ObjectTemplate.create(a)},eachAssociation:function(b,a){var d=this.associations,c;for(c in d){if(d.hasOwnProperty(c)){if(b.call(a,c,d[c])===false){break}}}},eachEntity:function(a,d){var b=this.entities,c;for(c in b){if(b.hasOwnProperty(c)){if(a.call(d,c,b[c].cls)===false){break}}}},getAssociation:function(a){var b=this.associations[a];return b||null},getEntity:function(a){var b=this.entityClasses[a]||this.entities[a];return(b&&b.cls)||null},getEntityName:function(c){var b=this.getNamespace(),a,d;if(typeof c==="string"){d=c}else{d=c.$className||null}if(d){if(b){a=b.length;if(d.substring(0,a)!==b){return d}}if(a){d=d.substring(a)}}return d},hasAssociations:function(a){a=a.entityName||a;return !!this.associationEntityMap[a]},hasEntity:function(a){var b=this.getEntityName(a);return !!(this.entities[b]||this.entityClasses[b])},addMatrix:function(t,j,d,c,h){var m=this,r=m.getNamer(),v=m.associations,a=m.entities,g=c.type,w=h.type,f=c.field||r.apply("idField",g),p=h.field||r.apply("idField",w),b=c.role||r.matrixRole(d,g),s=h.role||r.matrixRole(d,w),u,o,q;o=a[g]||(a[g]={cls:null,name:g,associations:{}});q=a[w]||(a[w]={cls:null,name:w,associations:{}});++m.assocCount;v[j]=u=new Ext.data.schema.ManyToMany({name:j,schema:m,definedBy:t,left:{cls:o.cls,type:g,role:b,field:f,associationKey:c.associationKey},right:{cls:q.cls,type:w,role:s,field:p,associationKey:h.associationKey}});o.associations[u.right.role]=u.right;q.associations[u.left.role]=u.left;if(o.cls){m.associationEntityMap[o.cls.entityName]=true}if(q.cls){m.associationEntityMap[q.cls.entityName]=true}m.decorateModel(u)},addReference:function(v,a,t,b){var z=this,r=z.getNamer(),d=z.entities,w=z.associations,q=v.entityName,f=t.association,u=!!t.legacy,m=t.child,p=t.parent,s=t.role,y=t.type||p||m,o=t.inverse,j=Ext.isString(o)?{role:o}:o,h=j&&j.role,c,g;if(!s){if(u){s=r.apply("uncapitalize",y)}else{s=r.apply("fieldRole",a.name)}}if(!h){h=r.inverseFieldRole(q,b,s,y)}if(!f){if(b){f=r.oneToOne(v,h,y,s)}else{f=r.manyToOne(v,h,y,s)}}c=d[y]||(d[y]={cls:null,name:y,associations:{}});g=b?Ext.data.schema.OneToOne:Ext.data.schema.ManyToOne;f=new g({name:f,owner:m?"left":(p?"right":null),definedBy:v,schema:z,field:a,nullable:a?!!a.allowBlank:true,legacy:t.legacy,left:{cls:v,type:q,role:h,extra:j},right:{cls:c.cls,type:y,role:s,extra:t}});v.associations[s]=f.right;c.associations[h]=f.left;if(a){a.reference=f.right;v.references.push(a)}++z.assocCount;z.associationEntityMap[q]=true;if(c.cls){z.associationEntityMap[c.cls.entityName]=true}w[f.name]=f;if(f.right.cls){z.decorateModel(f)}},privates:{addEntity:function(g){var o=this,m=o.entities,a=g.entityName,b=m[a],j=g.fields,f,p,h,d,c;if(!b){m[a]=b={name:a,associations:{}}}else{f=b.associations;for(c in f){f[c].inverse.cls=g;o.associationEntityMap[a]=true;o.decorateModel(f[c].association)}}b.cls=g;g.prototype.associations=g.associations=b.associations;o.entityClasses[g.$className]=b;++o.entityCount;for(h=0,d=j.length;h<d;++h){p=j[h];if(p.reference){o.addReferenceDescr(g,p)}}},addMatrices:function(a,b){var g=this,c,f,d;if(Ext.isString(b)){g.addMatrixDescr(a,null,b)}else{if(b[0]){for(c=0,f=b.length;c<f;++c){g.addMatrixDescr(a,null,b[c])}}else{for(d in b){g.addMatrixDescr(a,d,b[d])}}}},addMatrixDescr:function(h,c,j){var m=this,p=h.entityName,g=m.associations,o=m.getNamer(),f=j.left,b=j.right,a,d;if(Ext.isString(j)){if(j.charAt(0)==="#"){f={type:p};b={type:j.substring(1)}}else{if(j.charAt(a=j.length-1)==="#"){f={type:j.substring(0,a)};b={type:p}}else{if(o.apply("multiRole",p)<o.apply("multiRole",j)){f={type:p};b={type:j}}else{f={type:j};b={type:p}}}}}else{d=j.relation;if(f||(!b&&o.apply("multiRole",p)<o.apply("multiRole",j.type))){if(!f||f===true){f={type:p}}else{f=Ext.apply({type:p},f)}b=j}else{if(!b||b===true){b={type:p}}else{b=Ext.apply({type:p},b)}f=j}}if(!c){c=o.manyToMany(d,f.type,b.type)}if(!(c in g)){m.addMatrix(h,c,d,f,b)}},addReferenceDescr:function(d,b){var c=this,a=b.$reference;if(Ext.isString(a)){a={type:a}}else{a=Ext.apply({},a)}if(a.legacy){if(a.single){c.addLegacySingle(d,a)}else{c.addLegacyHasMany(d,a)}}else{c.addReference(d,b,a,b.unique)}},addPending:function(c,f,b,d){var a=this.pending;if(!a[c]){a[c]=[]}a[c].push([f,b,d])},addLegacyBelongsTo:function(a,b){this.addLegacySingle(a,b)},addLegacyHasOne:function(a,b){this.addLegacySingle(a,b)},addLegacySingle:function(f,b){var d,c,a;b=this.constructLegacyAssociation(f,b);b.single=true;c=b.type;d=b.foreignKey||(c.toLowerCase()+"_id");a=f.getField(d);if(a){a.$reference=b}this.addReference(f,a,b,true)},addLegacyHasMany:function(f,o){var p=this,h=p.entities,d=p.pending,a=o.associationKey,b,c,q,m,j,g;o=this.constructLegacyAssociation(f,o);c=o.type;m=h[c];if(m&&m.cls){o.type=f.entityName;j=o.foreignKey||(o.type.toLowerCase()+"_id");b=m.cls;q=b.getField(j);o.inverse=o||{};g=o.name;if(g||a){if(g){o.inverse.role=g}if(a){o.inverse.associationKey=a}}if(q){q.$reference=o}p.addReference(b,q,o,false)}else{if(!d[c]){d[c]=[]}d[c].push([f,o])}},constructLegacyAssociation:function(c,a){if(Ext.isString(a)){a={model:a}}a.legacy=true;a.type=this.getEntityName(a.model);var b=a.associatedName||a.name;if(b){a.role=b}return a},afterLegacyAssociations:function(c){var a=this.pending,d=c.entityName,g=a[d],f,b;if(g){for(f=0,b=g.length;f<b;++f){this.addLegacyHasMany.apply(this,g[f])}delete a[d]}},clear:function(c){var b=this,a=b.timer;delete b.setConfig;if(a){window.clearTimeout(a);b.timer=null}b.associations={};b.associationEntityMap={};b.entities={};b.entityClasses={};b.pending={};b.assocCount=b.entityCount=0;if(c){b.setNamespace(null)}},constructProxy:function(b){var d=this,a=Ext.Object.chain(b),c=d.getProxy();a.schema=d;a.prefix=d.getUrlPrefix();return c.apply(a)},applyDecoration:function(h){var f=this,a=h.inverse.cls,g=f.getNamer(),c,b,d;if(a&&!h.decorated){h.decorated=true;d=a.prototype;if(!(c=h.getterName)){h.getterName=c=g.getterName(h)}d[c]=h.createGetter();if(h.createSetter){if(!(b=h.setterName)){h.setterName=b=g.setterName(h)}d[b]=h.createSetter()}}},decorateModel:function(a){this.applyDecoration(a.left);this.applyDecoration(a.right)},processKeyChecks:function(d){var g=this,b=g.keyCheckQueue,h=g.timer,a,c,f;if(h){window.clearTimeout(h);g.timer=null}if(!b){return}do{b=g.keyCheckQueue;g.keyCheckQueue=[];for(c=0,a=b.length;c<a;++c){f=b[c];f.role.checkKeyForDrop(f.record)}}while(d&&g.keyCheckQueue.length)},queueKeyCheck:function(c,b){var f=this,d=f.keyCheckQueue,a=f.timer;if(!d){f.keyCheckQueue=d=[]}d.push({record:c,role:b});if(!a){f.timer=a=Ext.Function.defer(f.processKeyChecks,f.getKeyCheckDelay(),f)}},rankEntities:function(){var g=this,a=g.entities,b=Ext.Object.getKeys(a),f=b.length,d,c;g.nextRank=1;b.sort();for(c=0;c<f;++c){d=a[b[c]].cls;if(!d.rank){g.rankEntity(d)}}},rankEntity:function(f){var d=f.associations,b,a,c;for(c in d){a=d[c];if(!a.left&&a.association.field){b=a.cls;if(!b.rank){this.rankEntity(b)}}}f.rank=this.nextRank++}}},1,0,0,0,["schema.default"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.schema,"Schema"],0));(Ext.cmd.derive("Ext.data.AbstractStore",Ext.Base,{factoryConfig:{defaultType:"store",type:"store"},$configPrefixed:false,$configStrict:false,config:{filters:null,autoDestroy:undefined,storeId:null,statefulFilters:false,sorters:null,remoteSort:{lazy:true,$value:false},remoteFilter:{lazy:true,$value:false},groupField:undefined,groupDir:"ASC",grouper:null,pageSize:25},currentPage:1,loading:false,isStore:true,updating:0,constructor:function(c){var a=this,b;a.isInitializing=true;a.mixins.observable.constructor.call(a,c);a.isInitializing=false;b=a.getStoreId();if(!b&&(c&&c.id)){a.setStoreId(b=c.id)}if(b){Ext.data.StoreManager.register(a)}},getCount:function(){return this.getData().getCount()},rangeCached:function(b,a){return this.getData().getCount()>=Math.max(b,a)},find:function(f,d,g,h,j,c){var b=!h,a=!!(b&&c);return this.getData().findIndex(f,d,g,b,a,!j)},findRecord:function(){var b=this,a=b.find.apply(b,arguments);return a!==-1?b.getAt(a):null},findExact:function(c,b,a){return this.getData().findIndexBy(function(d){return d.isEqual(d.get(c),b)},this,a)},findBy:function(c,b,a){return this.getData().findIndexBy(c,b,a)},getAt:function(a){return this.getData().getAt(a)||null},getRange:function(b,d,a){var c=this.getData().getRange(b,Ext.isNumber(d)?d+1:d);if(a&&a.callback){a.callback.call(a.scope||this,c,b,d,a)}return c},getFilters:function(b){var a=(arguments.callee.$previous||Ext.Base.prototype.getFilters).call(this);if(!a&&b!==false){this.setFilters([]);a=(arguments.callee.$previous||Ext.Base.prototype.getFilters).call(this)}return a},applyFilters:function(c,b){var a;if(!b){b=this.createFiltersCollection();a=true}b.add(c);if(a){this.onRemoteFilterSet(b,this.getRemoteFilter())}return b},getSorters:function(b){var a=(arguments.callee.$previous||Ext.Base.prototype.getSorters).call(this);if(!a&&b!==false){this.setSorters([]);a=(arguments.callee.$previous||Ext.Base.prototype.getSorters).call(this)}return a},applySorters:function(c,b){var a;if(!b){b=this.createSortersCollection();a=true}b.add(c);if(a){this.onRemoteSortSet(b,this.getRemoteSort())}return b},filter:function(c,a,b){if(Ext.isString(c)){c={property:c,value:a}}this.suppressNextFilter=!!b;this.getFilters().add(c);this.suppressNextFilter=false},removeFilter:function(c,b){var a=this,d=a.getFilters();a.suppressNextFilter=!!b;if(c instanceof Ext.util.Filter){d.remove(c)}else{d.removeByKey(c)}a.suppressNextFilter=false},updateRemoteSort:function(a){this.onRemoteSortSet(this.getSorters(false),a)},updateRemoteFilter:function(a){this.onRemoteFilterSet(this.getFilters(false),a)},addFilter:function(b,a){this.suppressNextFilter=!!a;this.getFilters().add(b);this.suppressNextFilter=false},filterBy:function(b,a){this.getFilters().add({filterFn:b,scope:a||this})},clearFilter:function(a){var c=this,b=c.getFilters(false);if(!b||b.getCount()===0){return}c.suppressNextFilter=!!a;b.removeAll();c.suppressNextFilter=false},isFiltered:function(){return this.getFilters().getCount()>0},isSorted:function(){var a=this.getSorters(false);return !!(a&&a.length>0)||this.isGrouped()},addFieldTransform:function(b){if(b.getTransform()){return}var a=b.getProperty(),f=this.getModel(),c,d;if(f){c=f.getField(a);d=c?c.getSortType():null}if(d&&d!==Ext.identityFn){b.setTransform(d)}},beginUpdate:function(){if(!this.updating++){this.fireEvent("beginupdate")}},endUpdate:function(){if(this.updating&&!--this.updating){this.fireEvent("endupdate");this.onEndUpdate()}},getState:function(){var f=this,g=[],d=f.getFilters(),b=f.getGrouper(),h,c,a;f.getSorters().each(function(j){g[g.length]=j.getState();c=true});if(f.statefulFilters&&f.saveStatefulFilters){c=true;h=[];d.each(function(j){h[h.length]=j.getState()})}if(b){c=true}if(c){a={};if(g.length){a.sorters=g}if(h){a.filters=h}if(b){a.grouper=b.getState()}}return a},applyState:function(b){var f=this,d=b.sorters,c=b.filters,a=b.grouper;if(d){f.getSorters().replaceAll(d)}if(c){f.saveStatefulFilters=true;f.getFilters().replaceAll(c)}if(a){f.setGrouper(a)}},hasPendingLoad:Ext.emptyFn,isLoaded:Ext.emptyFn,isLoading:Ext.emptyFn,destroy:function(){var a=this;if(a.getStoreId()){Ext.data.StoreManager.unregister(a)}a.callParent();a.onDestroy()},sort:function(a,d,b){var c=this;if(arguments.length===0){if(c.getRemoteSort()){c.load()}else{c.forceLocalSort()}}else{c.getSorters().addSort(a,d,b)}},onBeforeCollectionSort:function(a,b){if(b){this.fireEvent("beforesort",this,b.getRange())}},onSorterEndUpdate:function(){var a=this,b;b=a.getSorters(false);if(a.settingGroups||!b){return}b=b.getRange();if(b.length){if(a.getRemoteSort()){a.load({callback:function(){a.fireEvent("sort",a,b)}})}else{a.fireEvent("datachanged",a);a.fireEvent("refresh",a);a.fireEvent("sort",a,b)}}else{a.fireEvent("sort",a,b)}},onFilterEndUpdate:function(){var b=this,a=b.suppressNextFilter;if(b.getRemoteFilter()){b.currentPage=1;if(!a){b.load()}}else{if(!a){b.fireEvent("datachanged",b);b.fireEvent("refresh",b)}}if(b.trackStateChanges){b.saveStatefulFilters=true}b.fireEvent("filterchange",b,b.getFilters().getRange())},updateGroupField:function(a){if(a){this.setGrouper({property:a,direction:this.getGroupDir()})}else{this.setGrouper(null)}},getGrouper:function(){return this.getData().getGrouper()},group:function(c,a){var d=this,f=d.getSorters(false),b=c||(f&&f.length);if(c&&typeof c==="string"){c={property:c,direction:a||d.getGroupDir()}}d.settingGroups=true;d.getData().setGrouper(c);delete d.settingGroups;if(b){if(d.getRemoteSort()){d.load({scope:d,callback:d.fireGroupChange})}else{d.fireEvent("datachanged",d);d.fireEvent("refresh",d);d.fireGroupChange()}}else{d.fireGroupChange()}},fireGroupChange:function(){if(!this.destroyed){this.fireEvent("groupchange",this,this.getGrouper())}},clearGrouping:function(){this.group(null)},getGroupField:function(){var a=this.getGrouper(),b="";if(a){b=a.getProperty()}return b},isGrouped:function(){return !!this.getGrouper()},applyGrouper:function(a){this.group(a);return this.getData().getGrouper()},getGroups:function(){return this.getData().getGroups()},onEndUpdate:Ext.emptyFn,privates:{loadsSynchronously:Ext.privateFn,onRemoteFilterSet:function(a,b){if(a){a[b?"on":"un"]("endupdate",this.onFilterEndUpdate,this)}},onRemoteSortSet:function(c,a){var b=this;if(c){c[a?"on":"un"]("endupdate",b.onSorterEndUpdate,b);b.getData()[a?"un":"on"]("beforesort",b.onBeforeCollectionSort,b)}}},deprecated:{5:{methods:{destroyStore:function(){this.destroy()}}}}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data,"AbstractStore"],0));(Ext.cmd.derive("Ext.data.Error",Ext.Base,{isError:true,$configPrefixed:false,config:{field:null,message:""},constructor:function(a){this.initConfig(a);this.msg=this.message}},1,0,0,0,0,0,[Ext.data,"Error"],0));(Ext.cmd.derive("Ext.data.ErrorCollection",Ext.util.MixedCollection,{alternateClassName:"Ext.data.Errors",init:function(h){var o=this,j=h.fields,f=h.data,q,p,b,g,m,d,c,a;for(g=0,m=j.length;g<m;++g){p=j[g];a=p.name;c=f[a];if(p.validate&&!p.validate.$nullFn){q=o.length;d=p.validate(c,null,o,h);if(q===o.length&&d!==true){o.add(a,d)}}}return o},add:function(c,f){var d=this,b=Ext.data.field.Field.defaultInvalidMessage,a=c,g;if(Ext.isString(c)){a=new Ext.data.Error({field:c,message:f||b})}else{if(!(a.isError)){a=new Ext.data.Error({field:a.field||a.name,message:a.error||a.message||a.msg||b})}c=a.field}g=d.get(c);if(g){if(Ext.isArray(g)){g.push(a);return g}d.removeAtKey(c);a=[g,a];a.field=c;a=[a]}return Ext.util.MixedCollection.prototype.add.call(this,a)},getKey:function(a){return a.field},isValid:function(){return this.length===0},getByField:function(b){var a=this.get(b);if(a&&!Ext.isArray(a)){a=[a]}return a||[]}},0,0,0,0,0,0,[Ext.data,"ErrorCollection",Ext.data,"Errors"],0));(Ext.cmd.derive("Ext.data.operation.Operation",Ext.Base,{alternateClassName:"Ext.data.Operation",isOperation:true,config:{synchronous:false,url:"",params:undefined,callback:undefined,scope:undefined,resultSet:null,response:null,request:null,records:null,id:undefined,proxy:null,batch:null,recordCreator:null,internalCallback:null,internalScope:null},order:0,foreignKeyDirection:1,started:false,running:false,complete:false,success:undefined,exception:false,error:undefined,idPrefix:"ext-operation-",constructor:function(a){var b=a&&a.scope;this.initConfig(a);if(a){a.scope=b}if(b){this.setScope(b);this.initialConfig.scope=b}this._internalId=Ext.id(this,this.idPrefix)},getAction:function(){return this.action},execute:function(){var b=this,a;delete b.error;delete b.success;b.complete=b.exception=false;b.setStarted();b.request=a=b.doExecute();if(a){a.setOperation(b)}return a},doExecute:Ext.emptyFn,abort:function(){var b=this,a=b.request;if(b.running&&a){b.getProxy().abort(a);b.request=null}},process:function(d,a,c,b){var f=this;b=b!==false;f.setResponse(c);f.setResultSet(d);if(d.getSuccess()){f.doProcess(d,a,c);f.setSuccessful(b)}else{if(b){f.setException(d.getMessage())}}},_commitSetOptions:{convert:true,commit:true},doProcess:function(p,c,b){var h=this,a=h._commitSetOptions,o=h.getRecords(),s=o.length,r=o[0].clientIdProperty,m=p.getRecords(),g=m?m.length:0,j,f,q,d;if(g&&r){j=Ext.Array.toValueMap(o,"id");for(d=0;d<g;++d){f=m[d];q=j[f[r]];if(q){delete j[q.id];delete f[r];q.set(f,a)}}for(d in j){j[d].commit()}}else{for(d=0;d<s;++d){q=o[d];if(g===0||!(f=m[d])){q.commit()}else{q.set(f,a)}}}},setStarted:function(){this.started=this.running=true},setCompleted:function(){var b=this,a=b.getProxy();b.complete=true;b.running=false;b.triggerCallbacks();if(a){a.completeOperation(b)}},setSuccessful:function(a){this.success=true;if(a){this.setCompleted()}},setException:function(a){var b=this;b.exception=true;b.success=b.running=false;b.error=a;b.setCompleted()},triggerCallbacks:function(){var a=this,b=a.getInternalCallback();if(b){b.call(a.getInternalScope()||a,a);a.setInternalCallback(null);a.setInternalScope(null)}if(b=a.getCallback()){b.call(a.getScope()||a,a.getRecords(),a,a.wasSuccessful());a.setCallback(null);a.setScope(null)}},hasException:function(){return this.exception},getError:function(){return this.error},getRecords:function(){var a;return this._records||((a=this.getResultSet())?a.getRecords():null)},isStarted:function(){return this.started},isRunning:function(){return this.running},isComplete:function(){return this.complete},wasSuccessful:function(){return this.isComplete()&&this.success===true},allowWrite:function(){return true}},1,0,0,0,0,0,[Ext.data.operation,"Operation",Ext.data,"Operation"],0));(Ext.cmd.derive("Ext.data.operation.Create",Ext.data.operation.Operation,{action:"create",isCreateOperation:true,order:10,config:{recordCreator:Ext.identityFn},doExecute:function(){return this.getProxy().create(this)}},0,0,0,0,["data.operation.create"],0,[Ext.data.operation,"Create"],0));(Ext.cmd.derive("Ext.data.operation.Destroy",Ext.data.operation.Operation,{action:"destroy",isDestroyOperation:true,order:30,foreignKeyDirection:-1,doProcess:function(){var a=this.getRecords(),b=a.length,c;for(c=0;c<b;++c){a[c].setErased()}},doExecute:function(){return this.getProxy().erase(this)},getRecordData:function(c,f){var b={},a=c.idField,d=this.getNameProperty()||"name";b[a[d]]=c.id;return b}},0,0,0,0,["data.operation.destroy"],0,[Ext.data.operation,"Destroy"],0));(Ext.cmd.derive("Ext.data.operation.Read",Ext.data.operation.Operation,{action:"read",isReadOperation:true,config:{filters:undefined,sorters:undefined,grouper:undefined,start:undefined,limit:undefined,page:undefined,addRecords:false},doExecute:function(){return this.getProxy().read(this)},doProcess:Ext.emptyFn,allowWrite:function(){return false}},0,0,0,0,["data.operation.read"],0,[Ext.data.operation,"Read"],0));(Ext.cmd.derive("Ext.data.operation.Update",Ext.data.operation.Operation,{action:"update",isUpdateOperation:true,order:20,config:{recordCreator:Ext.identityFn},doExecute:function(){return this.getProxy().update(this)}},0,0,0,0,["data.operation.update"],0,[Ext.data.operation,"Update"],0));(Ext.cmd.derive("Ext.data.SortTypes",Ext.Base,{singleton:true,none:Ext.identityFn,stripCommasRe:/,/g,stripTagsRE:/<\/?[^>]+>/gi,asText:function(a){return(a!=null)?String(a).replace(this.stripTagsRe,""):"\x00"},asUCText:function(a){return(a!=null)?String(a).toUpperCase().replace(this.stripTagsRe,""):"\x00"},asUCString:function(a){return(a!=null)?String(a).toUpperCase():"\x00"},asDate:function(a){if(!a){return 0}if(Ext.isDate(a)){return a.getTime()}return Date.parse(String(a))},asFloat:function(a){var b=parseFloat(String(a).replace(this.stripCommasRe,""));return isNaN(b)?0:b},asInt:function(a){var b=parseInt(String(a).replace(this.stripCommasRe,""),10);return isNaN(b)?0:b}},0,0,0,0,0,0,[Ext.data,"SortTypes"],0));(Ext.cmd.derive("Ext.data.validator.Validator",Ext.Base,{isValidator:true,type:"base",statics:{all:{},register:function(c,b){var a=this.all;a[c.toUpperCase()]=a[c.toLowerCase()]=a[c]=b.prototype}},onClassExtended:function(a,b){if(b.type){Ext.data.validator.Validator.register(b.type,a)}},constructor:function(a){if(typeof a==="function"){this.fnOnly=true;this.validate=a}else{this.initConfig(a)}},validate:function(){return true},clone:function(){var a=this;if(a.fnOnly){return new Ext.data.validator.Validator(a.validate)}return new a.self(a.getCurrentConfig())}},1,0,0,0,["data.validator.base"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.validator,"Validator"],function(){this.register(this.prototype.type,this)}));(Ext.cmd.derive("Ext.data.field.Field",Ext.Base,{alternateClassName:"Ext.data.Field",aliasPrefix:"data.field.",type:"auto",factoryConfig:{defaultProperty:"name"},isDataField:true,isField:true,allowBlank:true,allowNull:false,critical:false,defaultInvalidMessage:"This field is invalid",defaultValue:undefined,definedBy:null,depends:null,dependents:null,mapping:null,name:null,ordinal:undefined,persist:null,reference:null,unique:false,rank:null,stripRe:/[\$,%]/g,calculated:false,evil:false,identifier:false,onClassExtended:function(d,g){var a=g.sortType,f=d.prototype,b=f.validators,c=g.validators;if(a&&Ext.isString(a)){f.sortType=Ext.data.SortTypes[a]}if(c){if(!Ext.isArray(c)){c=[c]}delete g.validators;if(b){c=b.concat(c)}f.validators=c}},argumentNamesRe:/^function\s*\(\s*([^,\)\s]+)/,calculateRe:/[^\.a-z0-9_]([a-z_][a-z_0-9]*)\.([a-z_][a-z_0-9]*)/gi,constructor:function(a){var m=this,r=m.calculateRe,d,j,p,f,s,o,g,q,h,b,c;if(a){if(Ext.isString(a)){m.name=a}else{c=a.validators;if(c){delete a.validators;m.instanceValidators=c}Ext.apply(m,a)}}if(!m.allowNull){m.allowNull=!!m.reference}d=m.calculate;s=m.depends;if(d){m.convert=m.doCalculate;if(!s){if(!(s=d.$depends)){o={};h=d.toString();d.$depends=s=[];g=m.argumentNamesRe.exec(h);q=g?g[1]:"data";while((g=r.exec(h))){if(q===g[1]&&!o[b=g[2]]){o[b]=1;s.push(b)}}}m.depends=s}}p=m.defaultValue;if(m.convert){m.calculated=j=m.convert.length>1;m.evil=j&&!s}if(m.persist===null){m.persist=!d}f=m.sortType;if(!m.sortType){m.sortType=Ext.data.SortTypes.none}else{if(Ext.isString(f)){m.sortType=Ext.data.SortTypes[f]}}if(s&&typeof s==="string"){m.depends=[s]}m.cloneDefaultValue=p!==undefined&&(Ext.isDate(p)||Ext.isArray(p)||Ext.isObject(p))},setModelValidators:function(a){this._validators=null;this.modelValidators=a},compileValidators:function(){var a=this;a._validators=[];a.constructValidators(a.validators);a.constructValidators(a.modelValidators);a.constructValidators(a.instanceValidators)},constructValidators:function(c){if(c){if(!(c instanceof Array)){c=[c]}var b=c.length,f=this._validators,d,a;for(d=0;d<b;++d){a=c[d];if(a.fn){a=a.fn}f.push(Ext.Factory.dataValidator(a))}}},collate:function(f,d){var a=this,c=f,b=d;if(a.sortType){c=a.sortType(c);b=a.sortType(b)}return(c===b)?0:((c<b)?-1:1)},compare:function(b,a){return(b===a)?0:((b<a)?-1:1)},isEqual:function(b,a){return this.compare(b,a)===0},convert:null,serialize:null,validate:function(a,h,p,j){var o=this,m="",b,c,f,d,g;if(!o._validators){o.compileValidators()}f=o._validators;for(g=0,d=f.length;g<d;++g){c=f[g];b=c.validate(a,j);if(b!==true){b=b||o.defaultInvalidMessage;if(p){p.add(o.name,b);m=m||b}else{if(h){if(m){m+=h}m+=b}else{m=b;break}}}}return m||true},doCalculate:function(a,b){return b?this.calculate(b.data):a},getName:function(){return this.name},getAllowBlank:function(){return this.allowBlank},getAllowNull:function(){return this.allowNull},getConvert:function(){return this.convert},getDefaultValue:function(){return this.defaultValue},getDepends:function(){return this.depends},getMapping:function(){return this.mapping},hasMapping:function(){var a=this.mapping;return !!(a||a===0)},getPersist:function(){return this.persist},getSortType:function(){return this.sortType},getType:function(){return"auto"},deprecated:{5.1:{methods:{getSortDir:function(){return this.sortDir}}}}},1,0,0,0,["data.field.auto"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.field,"Field",Ext.data,"Field"],0));(Ext.cmd.derive("Ext.data.field.Boolean",Ext.data.field.Field,{isBooleanField:true,trueRe:/^\s*(?:true|yes|on|1)\s*$/i,convert:function(a){if(typeof a==="boolean"){return a}if(this.allowNull&&(a===undefined||a===null||a==="")){return null}return this.trueRe.test(String(a))},getType:function(){return"bool"}},0,0,0,0,["data.field.bool","data.field.boolean"],0,[Ext.data.field,"Boolean"],0));(Ext.cmd.derive("Ext.data.field.Date",Ext.data.field.Field,{sortType:"asDate",isDateField:true,dateFormat:null,dateReadFormat:null,dateWriteFormat:null,compare:function(d,b){var a=d instanceof Date,f=b instanceof Date,c;if(f&&a){c=d.getTime()-b.getTime();if(c===0){c=0}else{c=c<0?-1:1}}else{if(a===f){c=0}else{c=a?1:-1}}return c},convert:function(a){if(!a){return null}if(a instanceof Date){return a}var b=this.dateReadFormat||this.dateFormat,c;if(b){return Ext.Date.parse(a,b)}c=Date.parse(a);return c?new Date(c):null},serialize:function(c){var b=null,a;if(Ext.isDate(c)){a=this.getDateWriteFormat();b=a?Ext.Date.format(c,a):c}return b},getDateFormat:function(){return this.dateFormat},getDateReadFormat:function(){return this.dateReadFormat},getDateWriteFormat:function(){var a=this;if(a.hasOwnProperty("dateWriteFormat")){return a.dateWriteFormat}if(a.hasOwnProperty("dateFormat")){return a.dateFormat}return a.dateWriteFormat||a.dateFormat||"timestamp"},getType:function(){return"date"}},0,0,0,0,["data.field.date"],0,[Ext.data.field,"Date"],0));(Ext.cmd.derive("Ext.data.field.Integer",Ext.data.field.Field,{isNumeric:true,isIntegerField:true,numericType:"int",convert:function(d){if(typeof d==="number"){return this.getNumber(d)}var b=d===undefined||d===null||d==="",c=this.allowNull,a;if(b){a=c?null:0}else{a=this.parse(d);if(c&&isNaN(a)){a=null}}return a},getNumber:function(a){return parseInt(a,10)},getType:function(){return this.numericType},parse:function(a){return parseInt(String(a).replace(this.stripRe,""),10)},sortType:function(a){if(a==null){a=Infinity}return a}},0,0,0,0,["data.field.int","data.field.integer"],0,[Ext.data.field,"Integer"],0));(Ext.cmd.derive("Ext.data.field.Number",Ext.data.field.Integer,{isIntegerField:false,isNumberField:true,numericType:"float",getNumber:Ext.identityFn,parse:function(a){return parseFloat(String(a).replace(this.stripRe,""))}},0,0,0,0,["data.field.float","data.field.number"],0,[Ext.data.field,"Number"],0));(Ext.cmd.derive("Ext.data.field.String",Ext.data.field.Field,{sortType:"asUCString",isStringField:true,convert:function(b){var a=this.allowNull?null:"";return(b===undefined||b===null)?a:String(b)},getType:function(){return"string"}},0,0,0,0,["data.field.string"],0,[Ext.data.field,"String"],0));(Ext.cmd.derive("Ext.data.identifier.Generator",Ext.Base,{"abstract":true,factoryConfig:{defaultType:"sequential"},isGenerator:true,config:{id:null},constructor:function(d){var a=this,c,b;a.initConfig(d);b=a.getId();if(b){c=(d&&d.cache)||Ext.data.identifier.Generator.all;c[b]=a}},privates:{clone:function(b){var a=this.getInitialConfig();a=b?Ext.apply({},b,a):a;return new this.self(a)},statics:{all:{}}}},1,0,0,0,["data.identifier.default"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.identifier,"Generator"],function(){var a=this,b=Ext.Factory,c=b.dataIdentifier;b.dataIdentifier=function(g){var f=Ext.isString(g)?g:(g&&g.id),d=f&&((g&&g.cache)||a.all)[f];return d||c(g)}}));(Ext.cmd.derive("Ext.data.identifier.Sequential",Ext.data.identifier.Generator,{config:{increment:1,prefix:null,seed:1},generate:function(){var c=this,b=c._seed,a=c._prefix;c._seed+=c._increment;return(a!==null)?a+b:b}},0,0,0,0,["data.identifier.sequential"],0,[Ext.data.identifier,"Sequential"],0));(Ext.cmd.derive("Ext.data.Model",Ext.Base,{alternateClassName:"Ext.data.Record",isEntity:true,isModel:true,validIdRe:null,erasing:false,observableType:"record",constructor:function(a,m){var p=this,j=p.self,g=j.identifier,s=Ext.data.Model,r=s.identifier,h=p.idField.name,f,o,q,d,c,t,b;p.data=p.data=a||(a={});p.session=m||null;p.internalId=d=r.generate();if((f=a) instanceof Array){p.data=a={};b=p.getFields();c=Math.min(b.length,f.length);for(t=0;t<c;++t){a[b[t].name]=f[t]}}if(!(q=j.initializeFn)){j.initializeFn=q=s.makeInitializeFn(j)}if(!q.$nullFn){j.initializeFn(p)}if(!(p.id=o=a[h])&&o!==0){if(m){g=m.getIdentifier(j);o=g.generate()}else{if(r===g){o=d}else{o=g.generate()}}a[h]=p.id=o;p.phantom=true}if(m){m.add(p)}if(p.init&&Ext.isFunction(p.init)){p.init()}},editing:false,dirty:false,session:null,dropped:false,erased:false,clientIdProperty:null,evented:false,phantom:false,idProperty:"id",manyToMany:null,identifier:null,previousValues:undefined,proxy:undefined,schema:"default",versionProperty:null,generation:1,validationSeparator:null,convertOnSet:true,beginEdit:function(){var a=this,c=a.modified,b=a.previousValues;if(!a.editing){a.editing=true;a.editMemento={dirty:a.dirty,data:Ext.apply({},a.data),generation:a.generation,modified:c&&Ext.apply({},c),previousValues:b&&Ext.apply({},b)}}},cancelEdit:function(){var b=this,a=b.editMemento;if(a){b.editing=false;Ext.apply(b,a);b.editMemento=null}},endEdit:function(d,b){var a=this,c=a.editMemento;if(c){a.editing=false;a.editMemento=null;a.previousValues=c.previousValues;if(!d){if(!b){b=a.getModifiedFieldNames(c.data)}if(a.dirty||(b&&b.length)){a.callJoined("afterEdit",[b])}}}},getField:function(a){return this.self.getField(a)},getFields:function(){return this.self.getFields()},getFieldsMap:function(){return this.fieldsMap},getIdProperty:function(){return this.idProperty},getId:function(){return this.id},getObservableId:function(){return this.internalId},setId:function(b,a){this.set(this.idProperty,b,a)},getPrevious:function(b){var a=this.previousValues;return a&&a[b]},isModified:function(b){var a=this.modified;return !!(a&&a.hasOwnProperty(b))},getModified:function(b){var a;if(this.isModified(b)){a=this.modified[b]}return a},get:function(a){return this.data[a]},_singleProp:{},_rejectOptions:{convert:false,silent:true},set:function(v,g,w){var j=this,t=j.self,m=j.data,F=j.modified,B=j.previousValues,q=j.session,h=Ext.isString(v),r=(h?w:g),L=r?r.convert!==false:j.convertOnSet,z=j.fieldsMap,c=r&&r.silent,N=r&&r.commit,J=!(r&&r.refs===false)&&q,H=!(r&&r.dirty===false&&!N),M=null,a,s,b,p,o,G,y,D,E,O,I=0,d,f,C,A,K,u;if(h){u=j._singleProp;u[v]=g}else{u=v}if(!(C=t.rankedFields)){C=t.rankFields()}d=C.length;do{for(o in u){K=u[o];a=m[o];y=j;s=z[o];if(s){if(L&&s.convert){K=s.convert(K,j)}y=s;A=s.reference}else{A=null}if(y.isEqual(a,K)){continue}m[o]=K;(M||(M=[])).push(o);(B||(j.previousValues=B={}))[o]=a;if(A&&A.cls){if(J){q.updateReference(j,s,K,a)}A.onValueChange(j,q,K,a)}O=(E=s&&s.dependents)&&E.length;while(O-->0){(D=E[O]).dirty=true;I=I?Math.min(I,D.rank):D.rank}if(!s||s.persist){if(F&&F.hasOwnProperty(o)){if(!H||y.isEqual(F[o],K)){delete F[o];j.dirty=-1}}else{if(H){if(!F){j.modified=F={}}j.dirty=true;F[o]=a}}}if(o===j.idField.name){b=true;G=a;f=K}}if(!I){break}s=C[I-1];s.dirty=false;if(h){delete u[v]}else{u=j._singleProp;h=true}v=s.name;u[v]=m[v];L=true;for(;I<d;++I){if(C[I].dirty){break}}if(I<d){++I}else{I=0}}while(1);if(j.dirty<0){j.dirty=false;for(p in F){if(F.hasOwnProperty(p)){j.dirty=true;break}}}if(h){delete u[v]}++j.generation;if(b){j.id=f;j.callJoined("onIdChanged",[G,f])}if(N){j.commit(c,M)}else{if(!c&&!j.editing&&M){j.callJoined("afterEdit",[M])}}return M},reject:function(b){var a=this,c=a.modified;if(c){a.set(c,a._rejectOptions)}a.dropped=false;a.clearState();if(!b){a.callJoined("afterReject")}},commit:function(c,f){var d=this,a=d.versionProperty,g=d.data,b;d.clearState();if(a&&!d.phantom&&!isNaN(g[a])){++g[a]}d.phantom=false;if(d.dropped){d.erased=b=true}if(!c){if(b){d.callJoined("afterErase")}else{d.callJoined("afterCommit",[f])}}},clearState:function(){var a=this;a.dirty=a.editing=false;a.editMemento=a.modified=null},drop:function(d){var a=this,f=a.associations,b=a.session,c;if(a.erased||a.dropped){return}a.dropped=true;if(f&&d!==false){for(c in f){f[c].onDrop(a,b)}}a.callJoined("afterDrop");if(a.phantom){a.setErased()}},join:function(c){var b=this,a=b.joined;if(!a){a=b.joined=[c]}else{if(!a.length){a[0]=c}else{Ext.Array.include(a,c)}}if(c.isStore&&!b.store){b.store=c}},unjoin:function(g){var f=this,a=f.joined,b=a&&a.length,c=f.store,d;if(b===1&&a[0]===g){a.length=0}else{if(b){Ext.Array.remove(a,g)}}if(c===g){c=null;if(a){for(d=0,b=a.length;d<b;++d){g=a[d];if(g.isStore){c=g;break}}}f.store=c}},clone:function(b){var a=this,d=a.modified,c=a.copy(a.id,b);if(d){c.modified=Ext.apply({},d)}c.dirty=a.dirty;c.dropped=a.dropped;c.phantom=a.phantom;return c},copy:function(d,a){var f=this,g=Ext.apply({},f.data),c=f.idProperty,b=f.self;if(d||d===0){g[c]=d}else{if(d===null){delete g[c]}}return new b(g,a)},getProxy:function(){return this.self.getProxy()},getValidation:function(c){var a=this,b=a.validation;if(!b){a.validation=b=new Ext.data.Validation();b.attach(a)}if(c===true||(c!==false&&b.syncGeneration!==a.generation)){b.refresh(c)}return b},validate:function(){return new Ext.data.ErrorCollection().init(this)},isValid:function(){return this.getValidation().isValid()},toUrl:function(){var b=this.$className.split("."),a=b[b.length-1].toLowerCase();return a+"/"+this.getId()},erase:function(a){var b=this;b.erasing=true;b.drop();b.erasing=false;return b.save(a)},setErased:function(){this.erased=true;this.callJoined("afterErase")},getChanges:function(){return this.getData(this._getChangesOptions)},getCriticalFields:function(){var a=this.self,b=a.criticalFields;if(!b){a.rankFields();b=a.criticalFields}return b},getAssociatedData:function(m,j){var h=this,s=h.associations,r,b,g,f,t,q,d,a,u,p,c,o;m=m||{};h.$gathering=1;if(j){j=Ext.Object.chain(j)}for(u in s){a=s[u];g=a.getAssociatedItem(h);if(!g||g.$gathering){continue}if(g.isStore){g.$gathering=1;f=g.getData().items;q=f.length;t=[];for(b=0;b<q;++b){d=f[b];r=!d.$gathering;d.$gathering=1;if(j){o=j.associated;if(o===undefined){j.associated=r;c=true}else{if(!r){j.associated=false;c=true}}p=j}else{p=r?h._getAssociatedOptions:h._getNotAssociatedOptions}t.push(d.getData(p));if(c){j.associated=o;c=false}delete d.$gathering}delete g.$gathering}else{p=j||h._getAssociatedOptions;if(j&&j.associated===undefined){p.associated=true}t=g.getData(p)}m[u]=t}delete h.$gathering;return m},getData:function(o){var d=this,c={},p=(o===true)?d._getAssociatedOptions:(o||c),u=d.data,j=p.associated,f=p.changes,r=f&&p.critical,b=f?d.modified:u,a=d.fieldsMap,v=p.persist,h=p.serialize,s,m,t,q,g;if(b){for(q in b){g=u[q];m=a[q];if(m){if(v&&!m.persist){continue}if(h&&m.serialize){g=m.serialize(g,d)}}c[q]=g}}if(r){s=d.self.criticalFields||d.getCriticalFields();for(t=s.length;t-->0;){q=(m=s[t]).name;if(!(q in c)){g=u[q];if(h&&m.serialize){g=m.serialize(g,d)}c[q]=g}}}if(j){d.getAssociatedData(c,p)}return c},getTransientFields:function(){var a=this.self,b=a.transientFields;if(!b){a.rankFields();b=a.transientFields}return b},isLoading:function(){return !!this.loadOperation},abort:function(){var a=this.loadOperation;if(a){a.abort()}},load:function(a){a=Ext.apply({},a);var f=this,d=a.scope||f,b=f.getProxy(),h=a.callback,j=f.loadOperation,g=f.getId(),c;if(j){c=j.extraCalls;if(!c){c=j.extraCalls=[]}c.push(a);return j}a.id=g;a.recordCreator=function(q,o,p){var m=f.session;if(p){p.recordCreator=m?m.recordCreator:null}f.set(q,f._commitOptions);return f};a.internalCallback=function(q){var u=q.wasSuccessful()&&q.getRecords().length>0,m=f.loadOperation,s=m.extraCalls,p=[f,q],t=[f,q,u],r,o;f.loadOperation=null;if(u){Ext.callback(a.success,d,p)}else{Ext.callback(a.failure,d,p)}Ext.callback(h,d,t);if(s){for(r=0,o=s.length;r<o;++r){a=s[r];if(u){Ext.callback(a.success,d,p)}else{Ext.callback(a.failure,d,p)}Ext.callback(a.callback,d,t)}}f.callJoined("afterLoad")};delete a.callback;f.loadOperation=j=b.createOperation("read",a);j.execute();return j},save:function(d){d=Ext.apply({},d);var a=this,j=a.phantom,f=a.dropped,h=f?"destroy":(j?"create":"update"),c=d.scope||a,b=d.callback,m=a.getProxy(),g;d.records=[a];d.internalCallback=function(q){var o=[a,q],p=q.wasSuccessful();if(p){Ext.callback(d.success,c,o)}else{Ext.callback(d.failure,c,o)}o.push(p);Ext.callback(b,c,o)};delete d.callback;g=m.createOperation(h,d);if(f&&j){g.setResultSet(Ext.data.reader.Reader.prototype.nullResultSet);a.setErased();g.setSuccessful(true)}else{g.execute()}return g},inheritableStatics:{addFields:function(a){this.replaceFields(a)},replaceFields:function(p,g){var r=this,b=r.prototype,f=Ext.data.field.Field,c=r.fields,m=r.fieldsMap,s=r.fieldOrdinals,j,a,q,d,o,h;if(g===true){c.length=0;r.fieldsMap=m={};r.fieldOrdinals=s={}}else{if(g){for(a=g.length;a-->0;){o=g[a];if(o in s){delete s[o];delete m[o]}}for(a=0,d=c.length;a<d;++a){o=(j=c[a]).name;if(o in s){s[o]=a}else{c.splice(a,1);--a;--d}}}}for(a=0,d=p?p.length:0;a<d;a++){o=(j=p[a]).name;if(!(o in s)){s[o]=h=c.length;c.push(j=f.create(j));m[o]=j;j.ordinal=h;j.definedBy=j.owner=this}}r.idField=b.idField=q=m[b.idProperty];q.allowNull=q.critical=q.identifier=true;q.defaultValue=null;r.initializeFn=r.rankedFields=r.transientFields=r.criticalFields=null},removeFields:function(a){this.replaceFields(null,a)},getIdFromData:function(a){var d=this,c=d.idField,b=c.calculated?(new d(a)).id:a[c.name];return b},createWithId:function(b,g,f){var a=g,c=this;if(b||b===0){a={};if(g){Ext.apply(a,g)}a[c.idField.name]=b}return new c(a,f)},getFields:function(){return this.fields},getFieldsMap:function(){return this.fieldsMap},getField:function(a){return this.fieldsMap[a]||null},getProxy:function(){var d=this,c=d.proxy,b=d.defaultProxy,a;if(!c){c=d.proxyConfig;if(!c&&b){c=b}if(!c||!c.isProxy){if(typeof c==="string"){c={type:c}}a=d.schema.constructProxy(d);c=c?Ext.merge(a,c):a}c=d.setProxy(c)}return c},setProxy:function(c){var a=this,b;if(c){if(!c.isProxy){c=Ext.Factory.proxy(c)}else{b=c.getModel();if(b&&b!==a){c=c.clone()}}c.setModel(a)}return(a.prototype.proxy=a.proxy=c)},load:function(b,c,f){var d={},a;d[this.prototype.idProperty]=b;a=new this(d,f);a.load(c);return a}},deprecated:{5:{methods:{hasId:null,markDirty:null,setDirty:null,eachStore:function(a,f){var g=this,c=g.stores,b=c.length,d;for(d=0;d<b;++d){a.call(f,c[d])}},join:function(a){var d=this,c=d.stores,b=d.joined;if(!b){b=d.joined=[a]}else{b.push(a)}if(a.isStore){d.store=d.store||a;if(!c){c=d.stores=[]}c.push(a)}},unjoin:function(a){var d=this,c=d.stores,b=d.joined;if(b.length===1){b.length=0}else{Ext.Array.remove(b,a)}if(a.isStore){Ext.Array.remove(c,a);d.store=c[0]||null}}},properties:{persistenceProperty:null},inheritableStatics:{methods:{setFields:null}}}},privates:{_commitOptions:{commit:true},_getChangesOptions:{changes:true},_getAssociatedOptions:{associated:true},_getNotAssociatedOptions:{associated:false},copyFrom:function(m){var j=this,g=j.fields,q=g.length,c=[],o,d=0,h,f,b=j.idProperty,a,p;if(m){h=j.data;f=m.data;for(;d<q;d++){o=g[d];a=o.name;if(a!==b){p=f[a];if(p!==undefined&&!j.isEqual(h[a],p)){h[a]=p;c.push(a)}}}if(j.phantom&&!m.phantom){j.beginEdit();j.setId(m.getId());j.endEdit(true);j.commit(true)}}return c},callJoined:function(j,h){var a=this,c=a.joined,m=a.session,f,g,b,d;if(!c&&!m){return}if(h){h.unshift(a)}else{h=[a]}if(c){for(f=0,g=c.length;f<g;++f){d=c[f];if(d&&(b=d[j])){b.apply(d,h)}}}b=m&&m[j];if(b){b.apply(m,h)}},setSession:function(a){this.session=a;if(a){a.add(this)}},getModifiedFieldNames:function(b){var f=this,g=f.data,c=[],a=b||f.editMemento.data,d;for(d in g){if(g.hasOwnProperty(d)){if(!f.isEqual(g[d],a[d],d)){c.push(d)}}}return c},isEqual:function(c,b,a){var d;if(a){d=a.isField?a:this.fieldsMap[a];if(d){return d.isEqual(c,b)}}if(c instanceof Date&&b instanceof Date){return c.getTime()===b.getTime()}return c===b},statics:{EDIT:"edit",REJECT:"reject",COMMIT:"commit",defaultProxy:"memory",rankFields:function(){var b=this,a=b.prototype,h=b.fields,f=h.length,m=[],d=[],j=[],c,o,g;b.rankedFields=a.rankedFields=m;b.criticalFields=a.criticalFields=d;b.transientFields=a.transientFields=j;for(g=0;g<f;++g){o=h[g];if(o.critical){d.push(o)}if(!o.persist){j.push(o)}if(o.evil){(c||(c=[])).push(o)}else{if(!o.depends){m.push(o);o.rank=m.length}}}for(g=0;g<f;++g){if(!(o=h[g]).rank&&!o.evil){b.topoAdd(o)}}if(c){for(g=0,f=c.length;g<f;++g){m.push(o=c[g]);o.rank=m.length}}return m},topoAdd:function(h){var b=this,g=h.depends,a=g?g.length:0,d=b.rankedFields,c,f;for(c=0;c<a;++c){f=b.fieldsMap[g[c]];(f.dependents||(f.dependents=[])).push(h);if(!f.rank){b.topoAdd(f)}}d.push(h);h.rank=d.length},initFields:function(q,b,u){var m=Ext.data.field.Field,d=q.fields,v=[],o={},g={},a=[],B=u.fields,p=q.versionProperty||u.versionProperty,r=b.idProperty,h,c,z,f,s,y,j,A,w,t;b.fields=u.fields=v;b.fieldOrdinals=u.fieldOrdinals=o;b.fieldsMap=u.fieldsMap=g;b.references=u.references=a;if(B){for(z=0,f=B.length;z<f;++z){v[z]=c=Ext.Object.chain(B[z]);c.dependents=null;c.owner=b;o[s=c.name]=z;g[s]=c;c.rank=null;if(c.generated){A=c;w=c.name}}}if(d){delete q.fields;for(z=0,f=d.length;z<f;++z){c=d[z];j=c.reference;if(j&&typeof j!=="string"){j=Ext.merge({},j)}c.$reference=j;c=m.create(d[z]);s=c.name;y=o[s];if(y===undefined){o[s]=y=v.length}g[s]=c;v[y]=c;c.definedBy=c.owner=b;c.ordinal=y;if(s===r){t=c}}}h=g[r];if(!h){if(A&&A.generated){y=A.ordinal}else{y=v.length}delete g[w];delete o[w];h=new m(r);v[y]=h;o[r]=y;g[r]=h;h.definedBy=b;h.ordinal=y;h.generated=true}else{if(t&&A&&A.generated){Ext.Array.remove(v,A);delete g[w];delete o[w];g[r]=t;for(z=0,f=v.length;z<f;++z){c=v[z];v.ordinal=z;o[c.name]=z}}}h.allowNull=h.critical=h.identifier=true;h.defaultValue=null;b.idField=u.idField=h;if(p){c=g[p];if(!c){y=v.length;c=new m({name:p,type:"int"});v[y]=c;o[p]=y;g[p]=c;c.definedBy=b;c.ordinal=y;c.generated=true}c.defaultValue=1;c.critical=true}},initValidators:function(d,j,g){var p=g.validators,b,m,s,h,c,a,f,r,o,q;if(p){b={};for(m in p){b[m]=Ext.Array.clone(p[m])}}h=d.validators||d.validations;if(h){delete d.validators;b=b||{};if(Ext.isArray(h)){s={};for(c=0,a=h.length;c<a;++c){q=h[c];r=q.field;if(!s[r]){s[r]=[]}q=q.fn||q;s[r].push(q)}h=s}for(r in h){f=h[r];if(!Ext.isArray(f)){f=[f]}o=b[r];if(b[r]){Ext.Array.push(o,f)}else{b[r]=f}}}if(b){for(r in b){m=j.getField(r);if(m){m.setModelValidators(b[r])}}}j.validators=g.validators=b},initAssociations:function(f,j,a){var d=j.associations,g=j.belongsTo,o=j.hasMany,b=j.hasOne,p=j.manyToMany,h,c,m;delete j.manyToMany;if(p){f.addMatrices(a,p)}delete j.associations;delete j.belongsTo;delete j.hasMany;delete j.hasOne;if(d){d=Ext.isArray(d)?d:[d];for(h=0,c=d.length;h<c;++h){m=d[h];switch(m.type){case"belongsTo":f.addLegacyBelongsTo(a,m);break;case"hasMany":f.addLegacyHasMany(a,m);break;case"hasOne":f.addLegacyHasOne(a,m);break}}}if(g){g=Ext.isArray(g)?g:[g];for(h=0,c=g.length;h<c;++h){f.addLegacyBelongsTo(a,g[h])}}if(o){o=Ext.isArray(o)?o:[o];for(h=0,c=o.length;h<c;++h){f.addLegacyHasMany(a,o[h])}}if(b){b=Ext.isArray(b)?b:[b];for(h=0,c=b.length;h<c;++h){f.addLegacyHasOne(a,b[h])}}f.afterLegacyAssociations(a)},initIdentifier:function(a,b,g){var c=a.identifier||a.idgen,f=g.identifier||b.schema._defaultIdentifier,d;if(c){delete a.identifier;delete a.idgen;c=Ext.Factory.dataIdentifier(c)}else{if(f){if(f.clone&&!f.getId()){c=f.clone()}else{if(f.isGenerator){c=f}else{c=Ext.Factory.dataIdentifier(f)}}}}b.identifier=g.identifier=c;if(!c){d=b.entityName;if(!d){d=Ext.id(null,"extModel")}b.identifier=Ext.Factory.dataIdentifier({type:"sequential",prefix:d+"-"})}},findValidator:function(b,c,a){var f=a.type||a,h=b[c],j,d,g;if(h){for(d=0,j=h.length;d<j;++d){g=h[d];if(g.type===f){return g}}}return null},makeInitializeFn:function(m){var p=["var "],c=["\nreturn function (e) {\n    var data = e.data, v;\n"],u=[],r=0,g,d,j,h,t,o,b,a,f,s,q;if(!(b=m.rankedFields)){b=m.rankFields()}for(s=0,q=b.length;s<q;++s){o=b[s];u[s]=a="f"+s;j=o.convert;if(s){p.push(",  \n    ")}p.push(a," = $fields["+s+"]");if((f=(o.defaultValue!==undefined))||j){h='data["'+o.name+'"]';++r;g=d="";if(o.cloneDefaultValue){g="Ext.clone(";d=")"}c.push("\n");if(j&&f){c.push("    v = ",h,";\n    if (v !== undefined) {\n        v = ",a,".convert(v, e);\n    }\n    if (v === undefined) {\n        v = ",g,a,".defaultValue",d,";\n    }\n    ",h," = v;")}else{if(j){c.push("    v = ",a,".convert(",h,",e);\n    if (v !== undefined) {\n        ",h," = v;\n    }\n")}else{if(f){c.push("    if (",h," === undefined) {\n        ",h," = ",g,a,".defaultValue",d,";\n    }\n")}}}}}if(!r){return Ext.emptyFn}p.push(";\n");p.push.apply(p,c);p.push("}");p=p.join("");t=new Function("$fields","Ext",p);return t(b,Ext)}}}},1,0,0,0,0,0,[Ext.data,"Model",Ext.data,"Record"],function(){var b=this,a=b.prototype,d=Ext.data.schema.Schema,c;b.proxyConfig=a.proxy;delete a.proxy;b.fields=[];b.fieldsMap=a.fieldsMap={};b.schema=a.schema=d.get(a.schema);a.idField=new Ext.data.field.Field(a.idProperty);b.identifier=new Ext.data.identifier.Sequential();b.onExtended(function(m,h){var g=m.prototype,o=h.schema,j=g.superclass.self,f,q,p;m.idProperty=h.idProperty||g.idProperty;if(o){delete h.schema;f=d.get(o)}else{if(!(f=g.schema)){f=c||(c=d.get("default"))}}m.rankFields=b.rankFields;m.topoAdd=b.topoAdd;g.schema=m.schema=f;if(!(q=h.entityName)){g.entityName=q=f.getEntityName(m)}m.entityName=q;m.fieldExtractors={};b.initIdentifier(h,m,g);b.initFields(h,m,g);b.initValidators(h,m,g);m.fields.items=m.fields;if(q){f.addEntity(m);b.initAssociations(f,h,m)}p=h.proxy;if(p){delete h.proxy}else{if(j!==b){p=j.proxyConfig||j.proxy}}m.proxyConfig=p})}));(Ext.cmd.derive("Ext.data.ResultSet",Ext.Base,{isResultSet:true,$configPrefixed:false,config:{loaded:true,count:null,total:null,success:false,records:null,message:null},constructor:function(a){this.initConfig(a)},getCount:function(){var b=(arguments.callee.$previous||Ext.Base.prototype.getCount).call(this),a;if(!b){a=this.getRecords();if(a){b=a.length}}return b}},1,0,0,0,0,0,[Ext.data,"ResultSet"],0));(Ext.cmd.derive("Ext.data.reader.Reader",Ext.Base,{alternateClassName:["Ext.data.Reader","Ext.data.DataReader"],factoryConfig:{defaultType:null},config:{totalProperty:"total",successProperty:"success",rootProperty:"",messageProperty:"",typeProperty:"",implicitIncludes:true,readRecordsOnFailure:true,model:null,proxy:null,transform:null,keepRawData:null},isReader:true,constructor:function(a){if(a&&a.hasOwnProperty("root")){a=Ext.apply({},a);a.rootProperty=a.root;delete a.root}var b=this;b.duringInit=1;b.mixins.observable.constructor.call(b,a);--b.duringInit;b.buildExtractors()},applyModel:function(a){return Ext.data.schema.Schema.lookupEntity(a)},applyTransform:function(a){if(a){if(Ext.isFunction(a)){a={fn:a}}else{if(a.charAt){a={fn:this[a]}}}return a.fn.bind(a.scope||this)}return a},forceBuildExtractors:function(){if(!this.duringInit){this.buildExtractors(true)}},updateTotalProperty:function(){this.forceBuildExtractors()},updateMessageProperty:function(){this.forceBuildExtractors()},updateSuccessProperty:function(){this.forceBuildExtractors()},read:function(d,b){var a,c;if(d){if(d.responseText){c=this.getResponseData(d);if(c&&c.__$isError){return new Ext.data.ResultSet({total:0,count:0,records:[],success:false,message:c.msg})}else{a=this.readRecords(c,b)}}else{a=this.readRecords(d,b)}}return a||this.nullResultSet},getNullResultSet:function(){return this.nullResultSet},createReadError:function(a){return{__$isError:true,msg:a}},readRecords:function(b,s,d){var f=this,c=d&&d.recordsOnly,p=d&&d.asRoot,r,a,q,h,g,m,j,o;o=this.getTransform();if(o){b=o(b)}f.buildExtractors();if(f.getKeepRawData()){f.rawData=b}if(f.hasListeners.rawdata){f.fireEventArgs("rawdata",[b])}b=f.getData(b);r=true;a=0;q=[];if(f.getSuccessProperty()){m=f.getSuccess(b);if(m===false||m==="false"){r=false}}if(f.getMessageProperty()){j=f.getMessage(b)}if(r||f.getReadRecordsOnFailure()){h=(p||Ext.isArray(b))?b:f.getRoot(b);if(h){g=h.length}if(f.getTotalProperty()){m=parseInt(f.getTotal(b),10);if(!isNaN(m)){g=m}}if(h){q=f.extractData(h,s);a=q.length}}return c?q:new Ext.data.ResultSet({total:g||a,count:a,records:q,success:r,message:j})},extractData:function(h,b){var p=this,c=b&&b.model?Ext.data.schema.Schema.lookupEntity(b.model):p.getModel(),t=c.schema,m=t.hasAssociations(c)&&p.getImplicitIncludes(),r=p.getFieldExtractorInfo(c.fieldExtractors),o=h.length,s=new Array(o),g=p.getTypeProperty(),j,q,a,f,d;if(!o&&Ext.isObject(h)){h=[h];o=1}for(d=0;d<o;d++){f=h[d];if(!f.isModel){q=f;if(g&&(a=p.getChildType(t,q,g))){j=a.getProxy().getReader();f=j.extractRecord(q,b,a,t.hasAssociations(a)&&j.getImplicitIncludes(),j.getFieldExtractorInfo(a.fieldExtractors))}else{f=p.extractRecord(q,b,c,m,r)}if(f.isModel&&f.isNode){f.raw=q}}if(f.onLoad){f.onLoad()}s[d]=f}return s},getChildType:function(d,a,b){var c;switch(typeof b){case"string":return d.getEntity(a[b]);case"object":c=b.namespace;return d.getEntity((c?c+".":"")+a[b.name]);case"function":return d.getEntity(b(a))}},extractRecordData:function(a,b){var d=b&&b.model?Ext.data.schema.Schema.lookupEntity(b.model):this.getModel(),c=this.getFieldExtractorInfo(d.fieldExtractors);return this.extractRecord(a,b,d,false,c)},extractRecord:function(f,g,h,d,b){var a=this,m=(g&&g.recordCreator)||a.defaultRecordCreator,c,j;c=a.extractModelData(f,b);j=m.call(a,c,h||a.getModel(),g);if(d&&j.isModel){a.readAssociated(j,f,g)}return j},getFieldExtractorInfo:function(a){if(!a){return}var b=this.$className,c=a[b];if(c===undefined){a[b]=c=this.buildFieldExtractors()}return c},buildFieldExtractors:function(){var o=this.getFields(),a=o.length,j=[],c=[],h=null,f=0,b,d,m,g;for(m=0;m<a;++m){b=o[m];g=this.createFieldAccessor(b);if(g){d=b.name;j.push("val = extractors["+f+"](raw); if (val !== undefined) { data['"+d+"'] = val; }");c.push(g);++f}}if(j.length){h={extractors:c,fn:new Function("raw","data","extractors","var val;"+j.join(""))}}return h},defaultRecordCreator:function(c,a){var b=new a(c);b.phantom=false;return b},getModelData:function(a){return{}},extractModelData:function(d,c){var b=this.getModelData(d),a;if(c){a=c.fn;a(d,b,c.extractors)}return b},readAssociated:function(b,g,f){var d=b.associations,c,a;for(c in d){if(d.hasOwnProperty(c)){a=d[c];if(a.cls){a.read(b,g,this,f)}}}},getFields:function(){return this.getModel().fields},getData:Ext.identityFn,getRoot:Ext.identityFn,getResponseData:function(a){},onMetaChange:function(h){var g=this,b=h.fields,c,f,a,d;g.metaData=h;if(h.root){g.setRootProperty(h.root)}if(h.totalProperty){g.setTotalProperty(h.totalProperty)}if(h.successProperty){g.setSuccessProperty(h.successProperty)}if(h.messageProperty){g.setMessageProperty(h.messageProperty)}a=h.clientIdProperty;if(b){f=Ext.define(null,{extend:"Ext.data.Model",fields:b,clientIdProperty:a});g.setModel(f);d=g.getProxy();if(d){d.setModel(f)}}else{if(a){c=g.getModel();if(c){c.self.prototype.clientIdProperty=a}}}},buildExtractors:function(a){var d=this,f,c,b;if(a||!d.hasExtractors){f=d.getTotalProperty();c=d.getSuccessProperty();b=d.getMessageProperty();if(f){d.getTotal=d.getAccessor(f)}if(c){d.getSuccess=d.getAccessor(c)}if(b){d.getMessage=d.getAccessor(b)}d.hasExtractors=true;return true}},getAccessor:function(b){var a=this,c=a.extractorCache,d,f;if(typeof b==="string"){f=a.getAccessorKey(b);d=c.get(f);if(!d){d=a.createAccessor(b);c.add(f,d)}}else{d=a.createAccessor(b)}return d},getAccessorKey:function(a){return this.$className+a},createAccessor:Ext.emptyFn,createFieldAccessor:Ext.emptyFn,destroy:function(){var a=this;a.model=a.getTotal=a.getSuccess=a.getMessage=a.rawData=null;a.onMetaChange=null;a.transform=null;a.callParent()},privates:{copyFrom:function(a){var b=this;a.buildExtractors();b.getTotal=a.getTotal;b.getSuccess=a.getSuccess;b.getMessage=a.getMessage;++b.duringInit;b.setConfig(a.getConfig());--b.duringInit;b.hasExtractors=true}}},1,0,0,0,["reader.base"],[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.reader,"Reader",Ext.data,"Reader",Ext.data,"DataReader"],function(b){var a=b.prototype;Ext.apply(a,{nullResultSet:new Ext.data.ResultSet({total:0,count:0,records:[],success:true,message:""})});a.extractorCache=new Ext.util.LruCache()}));(Ext.cmd.derive("Ext.data.writer.Writer",Ext.Base,{factoryConfig:{defaultType:null},alternateClassName:["Ext.data.DataWriter","Ext.data.Writer"],config:{clientIdProperty:null,allDataOptions:{persist:true},partialDataOptions:{changes:true,critical:true},writeAllFields:false,dateFormat:null,nameProperty:"name",writeRecordId:true,transform:null},isWriter:true,constructor:function(a){this.initConfig(a)},applyTransform:function(a){if(a){if(Ext.isFunction(a)){a={fn:a}}return a.fn.bind(a.scope||this)}return a},write:function(g){var d=g.getOperation(),c=d.getRecords()||[],b=c.length,a=[],f;for(f=0;f<b;f++){a.push(this.getRecordData(c[f],d))}return this.writeRecords(g,a)},writeRecords:Ext.emptyFn,getRecordData:function(c,a){var o=this,u=o.getNameProperty(),p=u!=="name",s=c.self.idField,j=s[u]||s.name,g=c.id,t=o.getWriteAllFields(),h,r,v,m,f,d,b,q;if(s.serialize){g=s.serialize(g)}if(!t&&a&&a.isDestroyOperation){h={};h[j]=g}else{r=o.getDateFormat();v=c.phantom;m=(v||t)?o.getAllDataOptions():o.getPartialDataOptions();f=v&&o.getClientIdProperty();d=c.getFieldsMap();m.serialize=false;b=c.getData(m);h=p?{}:b;if(f){h[f]=g;delete b[j]}else{if(!o.getWriteRecordId()){delete b[j]}}for(j in b){g=b[j];if(!(q=d[j])){if(p){h[j]=g}}else{if(q.isDateField&&r&&Ext.isDate(g)){g=Ext.Date.format(g,r)}else{if(q.serialize){g=q.serialize(g,c)}}if(p){j=q[u]||j}h[j]=g}}}return h}},1,0,0,0,["writer.base"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.writer,"Writer",Ext.data,"DataWriter",Ext.data,"Writer"],0));(Ext.cmd.derive("Ext.data.proxy.Proxy",Ext.Base,{$configPrefixed:false,alternateClassName:["Ext.data.DataProxy","Ext.data.Proxy"],config:{batchOrder:"create,update,destroy",batchActions:true,model:undefined,reader:{type:"json"},writer:{type:"json"}},isProxy:true,isSynchronous:false,constructor:function(a){this.mixins.observable.constructor.call(this,a);this.pendingOperations={}},applyModel:function(a){return Ext.data.schema.Schema.lookupEntity(a)},updateModel:function(b){if(b){var a=this.getReader();if(a&&!a.getModel()){a.setModel(b)}}},applyReader:function(a){if(this.isSynchronous){a=a||{};a.keepRawData=true}return Ext.Factory.reader(a)},updateReader:function(b){if(b){var a=this,c=a.getModel();if(!c){c=b.getModel();if(c){a.setModel(c)}}else{b.setModel(c)}if(b.onMetaChange){b.onMetaChange=Ext.Function.createSequence(b.onMetaChange,a.onMetaChange,a)}}},applyWriter:function(b){var a=this.getReader();b=Ext.Factory.writer(b);if(b.getRecord&&!b.getRecord()&&a&&a.getRecord){a=a.getRecord();if(a){b.setRecord(a)}}return b},abort:Ext.emptyFn,onMetaChange:function(a){this.fireEvent("metachange",this,a)},create:Ext.emptyFn,read:Ext.emptyFn,update:Ext.emptyFn,erase:Ext.emptyFn,batch:function(t,c){var q=this,p=q.getBatchActions(),j,d,h,f,g,m,b,s,o;if(t.operations===undefined){t={operations:t,listeners:c}}if(t.batch){if(Ext.isDefined(t.batch.runOperation)){j=Ext.applyIf(t.batch,{proxy:q,listeners:{}})}}else{t.batch={proxy:q,listeners:t.listeners||{}}}if(!j){j=new Ext.data.Batch(t.batch)}j.on("complete",Ext.bind(q.onBatchComplete,q,[t],0));h=q.getBatchOrder().split(",");f=h.length;for(m=0;m<f;m++){g=h[m];d=t.operations[g];if(d){if(p){j.add(q.createOperation(g,{records:d,params:t.params}))}else{s=d.length;for(b=0;b<s;b++){o=d[b];j.add(q.createOperation(g,{records:[o],params:t.params}))}}}}j.start();return j},onBatchComplete:function(b,c){var a=b.scope||this;if(c.hasException()){if(Ext.isFunction(b.failure)){Ext.callback(b.failure,a,[c,b])}}else{if(Ext.isFunction(b.success)){Ext.callback(b.success,a,[c,b])}}if(Ext.isFunction(b.callback)){Ext.callback(b.callback,a,[c,b])}},createOperation:function(a,c){var b=Ext.createByAlias("data.operation."+a,c);b.setProxy(this);this.pendingOperations[b._internalId]=b;return b},completeOperation:function(a){delete this.pendingOperations[a._internalId]},clone:function(){return new this.self(this.getInitialConfig())},destroy:function(){var c=this.pendingOperations,b,a;for(b in c){a=c[b];if(a&&a.isRunning()){a.abort()}}this.pendingOperations=null}},1,0,0,0,["proxy.proxy"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable],[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.data.proxy,"Proxy",Ext.data,"DataProxy",Ext.data,"Proxy"],0));(Ext.cmd.derive("Ext.data.proxy.Client",Ext.data.proxy.Proxy,{alternateClassName:"Ext.data.ClientProxy",isSynchronous:true,clear:function(){}},0,0,0,0,0,0,[Ext.data.proxy,"Client",Ext.data,"ClientProxy"],0));(Ext.cmd.derive("Ext.data.proxy.Memory",Ext.data.proxy.Client,{alternateClassName:"Ext.data.MemoryProxy",isMemoryProxy:true,config:{enablePaging:false,data:{$value:null,merge:function(b,c,a,d){if(Ext.isArray(b)){return Ext.Array.clone(b)}else{return Ext.clone(b)}}}},finishOperation:function(d){var a=0,b=d.getRecords(),c=b.length;for(a;a<c;a++){b[a].commit()}d.setSuccessful(true)},create:function(a){this.finishOperation(a)},update:function(a){this.finishOperation(a)},erase:function(a){this.finishOperation(a)},read:function(a){var c=this,d=c.getReader().read(c.getData()),j=d.getRecords(),b=a.getSorters(),f=a.getGrouper(),h=a.getFilters(),g=a.getStart(),m=a.getLimit();if(a.process(d,null,null,false)!==false){if(h&&h.length){d.setRecords(j=Ext.Array.filter(j,Ext.util.Filter.createFilterFn(h)));d.setTotal(j.length)}if(f){b=b?b.concat(f):b}if(b&&b.length){d.setRecords(j=Ext.Array.sort(j,Ext.util.Sortable.createComparator(b)))}if(c.getEnablePaging()&&g!==undefined&&m!==undefined){if(g>=d.getTotal()){d.setConfig({success:false,records:[],total:0})}else{d.setRecords(Ext.Array.slice(j,g,g+m))}}a.setCompleted()}},clear:Ext.emptyFn},0,0,0,0,["proxy.memory"],0,[Ext.data.proxy,"Memory",Ext.data,"MemoryProxy"],0));(Ext.cmd.derive("Ext.data.ProxyStore",Ext.data.AbstractStore,{config:{model:undefined,fields:null,proxy:undefined,autoLoad:undefined,autoSync:false,batchUpdateMode:"operation",sortOnLoad:true,trackRemoved:true,asynchronousLoad:undefined},onClassExtended:function(d,a,c){var f=a.model,b;if(typeof f==="string"){b=c.onBeforeCreated;c.onBeforeCreated=function(){var h=this,g=arguments;Ext.require(f,function(){b.apply(h,g)})}}},implicitModel:"Ext.data.Model",autoSyncSuspended:0,constructor:function(a){var b=this;b.removed=[];Ext.data.AbstractStore.prototype.constructor.apply(this,arguments);if(b.getAsynchronousLoad()===false){b.flushLoad()}},applyAsynchronousLoad:function(a){if(a==null){a=!this.loadsSynchronously()}return a},updateAutoLoad:function(a){this.getData();if(a){this.load(Ext.isObject(a)?a:undefined)}},getTotalCount:function(){return this.totalCount||0},applyFields:function(a){if(a){this.createImplicitModel(a)}},applyModel:function(a){if(a){a=Ext.data.schema.Schema.lookupEntity(a)}else{this.getFields();a=this.getModel()||this.createImplicitModel()}return a},applyProxy:function(b){var a=this.getModel();if(b!==null){if(b){if(b.isProxy){b.setModel(a)}else{if(Ext.isString(b)){b={type:b,model:a}}else{if(!b.model){b=Ext.apply({model:a},b)}}b=Ext.createByAlias("proxy."+b.type,b);b.autoCreated=true}}else{if(a){b=a.getProxy()}}if(!b){b=Ext.createByAlias("proxy.memory");b.autoCreated=true}}return b},applyState:function(b){var a=this;Ext.data.AbstractStore.prototype.applyState.call(this,b);if(a.getAutoLoad()||a.isLoaded()){a.load()}},updateProxy:function(b,a){this.proxyListeners=Ext.destroy(this.proxyListeners)},updateTrackRemoved:function(a){this.cleanRemoved();this.removed=a?[]:null},onMetaChange:function(a,b){this.fireEvent("metachange",this,b)},create:function(g,d){var f=this,a=f.getModel(),b=new a(g),c;d=Ext.apply({},d);if(!d.records){d.records=[b]}d.internalScope=f;d.internalCallback=f.onProxyWrite;c=f.createOperation("create",d);return c.execute()},read:function(){return this.load.apply(this,arguments)},update:function(c){var a=this,b;c=Ext.apply({},c);if(!c.records){c.records=a.getUpdatedRecords()}c.internalScope=a;c.internalCallback=a.onProxyWrite;b=a.createOperation("update",c);return b.execute()},onProxyWrite:function(d){var a=this,b=d.wasSuccessful(),c=d.getRecords();switch(d.getAction()){case"create":a.onCreateRecords(c,d,b);break;case"update":a.onUpdateRecords(c,d,b);break;case"destroy":a.onDestroyRecords(c,d,b);break}if(b){a.fireEvent("write",a,d);a.fireEvent("datachanged",a)}},onCreateRecords:Ext.emptyFn,onUpdateRecords:Ext.emptyFn,onDestroyRecords:function(c,b,a){if(a){this.cleanRemoved()}},erase:function(c){var a=this,b;c=Ext.apply({},c);if(!c.records){c.records=a.getRemovedRecords()}c.internalScope=a;c.internalCallback=a.onProxyWrite;b=a.createOperation("destroy",c);return b.execute()},onBatchOperationComplete:function(b,a){return this.onProxyWrite(a)},onBatchComplete:function(d,b){var a=this,c=d.operations,g=c.length,f;if(a.batchUpdateMode!=="operation"){a.suspendEvents();for(f=0;f<g;f++){a.onProxyWrite(c[f])}a.resumeEvents()}a.isSyncing=false;a.fireEvent("datachanged",a)},onBatchException:function(b,a){},filterNew:function(a){return a.phantom===true&&a.isValid()},getNewRecords:function(){return[]},getUpdatedRecords:function(){return[]},getModifiedRecords:function(){return[].concat(this.getNewRecords(),this.getUpdatedRecords())},filterUpdated:function(a){return a.dirty===true&&a.phantom!==true&&a.isValid()},getRemovedRecords:function(){var a=this.getRawRemovedRecords();return a?Ext.Array.clone(a):a},sync:function(c){var f=this,b={},g=f.getNewRecords(),d=f.getUpdatedRecords(),a=f.getRemovedRecords(),h=false;f.needsSync=false;if(g.length>0){b.create=g;h=true}if(d.length>0){b.update=d;h=true}if(a.length>0){b.destroy=a;h=true}if(h&&f.fireEvent("beforesync",b)!==false){f.isSyncing=true;c=c||{};f.proxy.batch(Ext.apply(c,{operations:b,listeners:f.getBatchListeners()}))}return f},getBatchListeners:function(){var b=this,a={scope:b,exception:b.onBatchException,complete:b.onBatchComplete};if(b.batchUpdateMode==="operation"){a.operationcomplete=b.onBatchOperationComplete}return a},save:function(){return this.sync.apply(this,arguments)},load:function(a){var b=this;if(typeof a==="function"){a={callback:a}}else{a=a?Ext.Object.chain(a):{}}b.pendingLoadOptions=a;if(b.getAsynchronousLoad()){if(!b.loadTimer){b.loadTimer=Ext.asap(b.flushLoad,b)}}else{b.flushLoad()}return b},flushLoad:function(){var a=this,c=a.pendingLoadOptions,b;a.clearLoadTask();if(!c){return}a.setLoadOptions(c);if(a.getRemoteSort()&&c.sorters){a.fireEvent("beforesort",a,c.sorters)}b=Ext.apply({internalScope:a,internalCallback:a.onProxyLoad,scope:a},c);a.lastOptions=b;b=a.createOperation("read",b);if(a.fireEvent("beforeload",a,b)!==false){a.onBeforeLoad(b);a.loading=true;b.execute()}},reload:function(a){var b=Ext.apply({},a,this.lastOptions);return this.load(b)},onEndUpdate:function(){var a=this;if(a.needsSync&&a.autoSync&&!a.autoSyncSuspended){a.sync()}},afterReject:function(a){var b=this;if(b.contains(a)){b.onUpdate(a,Ext.data.Model.REJECT,null);b.fireEvent("update",b,a,Ext.data.Model.REJECT,null)}},afterCommit:function(b,a){var c=this;if(!a){a=null}if(c.contains(b)){c.onUpdate(b,Ext.data.Model.COMMIT,a);c.fireEvent("update",c,b,Ext.data.Model.COMMIT,a)}},afterErase:function(a){this.onErase(a)},onErase:Ext.emptyFn,onUpdate:Ext.emptyFn,onDestroy:function(){var b=this,a=b.getProxy();b.clearLoadTask();b.getData().destroy();b.data=null;b.setProxy(null);if(a.autoCreated){a.destroy()}b.setModel(null)},hasPendingLoad:function(){return !!this.pendingLoadOptions||this.isLoading()},isLoading:function(){return !!this.loading},isLoaded:function(){return this.loadCount>0},suspendAutoSync:function(){++this.autoSyncSuspended},resumeAutoSync:function(b){var a=this;if(a.autoSyncSuspended&&!--a.autoSyncSuspended){if(b){a.sync()}}},removeAll:Ext.emptyFn,clearData:Ext.emptyFn,privates:{getRawRemovedRecords:function(){return this.removed},onExtraParamsChanged:function(){},clearLoadTask:function(){Ext.asapCancel(this.loadTimer);this.pendingLoadOptions=this.loadTimer=null},cleanRemoved:function(){var a=this.getRawRemovedRecords(),b,c;if(a){for(c=0,b=a.length;c<b;++c){a[c].unjoin(this)}a.length=0}},createOperation:function(a,c){var b=this,d=b.getProxy(),f;if(!b.proxyListeners){f={scope:b,destroyable:true,beginprocessresponse:b.beginUpdate,endprocessresponse:b.endUpdate};if(!b.disableMetaChangeEvent){f.metachange=b.onMetaChange}b.proxyListeners=d.on(f)}return d.createOperation(a,c)},createImplicitModel:function(c){var b=this,d={extend:b.implicitModel,statics:{defaultProxy:"memory"}},a,f;if(c){d.fields=c}f=Ext.define(null,d);b.setModel(f);a=b.getProxy();if(a){f.setProxy(a)}else{b.setProxy(f.getProxy())}},loadsSynchronously:function(){return this.getProxy().isSynchronous},onBeforeLoad:Ext.privateFn,removeFromRemoved:function(a){var b=this.getRawRemovedRecords();if(b){Ext.Array.remove(b,a);a.unjoin(this)}},setLoadOptions:function(c){var a=this,d,b;if(a.getRemoteFilter()){d=a.getFilters(false);if(d&&d.getCount()){c.filters=d.getRange()}}if(a.getRemoteSort()){b=a.getSorters(false);if(b&&b.getCount()){c.sorters=b.getRange()}}}}},1,0,0,0,0,0,[Ext.data,"ProxyStore"],0));(Ext.cmd.derive("Ext.data.LocalStore",Ext.Mixin,{mixinConfig:{id:"localstore"},config:{extraKeys:null},applyExtraKeys:function(b){var a,c=this.getData();c.setExtraKeys(b);b=c.getExtraKeys();for(a in b){this[a]=b[a]}},add:function(a){return this.insert(this.getCount(),arguments.length===1?a:arguments)},constructDataCollection:function(){return new Ext.util.Collection({rootProperty:"data"})},createModel:function(b){var c=this.getSession(),a;if(!b.isModel){a=this.getModel();b=new a(b,c)}return b},createFiltersCollection:function(){return this.getData().getFilters()},createSortersCollection:function(){var a=this.getData().getSorters();a.setSorterConfigure(this.addFieldTransform,this);return a},onCollectionSort:function(){this.onSorterEndUpdate()},onCollectionFilter:function(){this.onFilterEndUpdate()},notifySorterChange:function(){this.getData().onSorterChange()},forceLocalSort:function(){this.getData().onSortChange()},contains:function(a){return this.indexOf(a)>-1},each:function(g,f){var a=this.data.items,b=a.length,c,d;for(d=0;d<b;++d){c=a[d];if(g.call(f||c,c,d,b)===false){break}}},collect:function(d,c,f){var a=this,b=a.getData();if(f===true&&b.filtered){b=b.getSource()}return b.collect(d,"data",c)},getById:function(b){var a=this.getData();if(a.filtered){a=a.getSource()}return a.get(b)||null},getByInternalId:function(b){var a=this.getData(),c;if(a.filtered){if(!a.$hasExtraKeys){c=this.makeInternalKeyCfg();a.setExtraKeys(c);a.$hasExtraKeys=true}a=a.getSource()}if(!a.$hasExtraKeys){a.setExtraKeys(c||this.makeInternalKeyCfg());a.$hasExtraKeys=true}return a.byInternalId.get(b)||null},getDataSource:function(){var a=this.getData();return a.getSource()||a},indexOf:function(a){return this.getData().indexOf(a)},indexOfId:function(a){return this.indexOf(this.getById(a))},insert:function(f,d){var b=this,c,a;if(d){if(!Ext.isIterable(d)){d=[d]}else{d=Ext.Array.clone(d)}c=d.length}if(!c){return[]}for(a=0;a<c;++a){d[a]=b.createModel(d[a])}b.getData().insert(f,d);return d},queryBy:function(c,b){var a=this.getData();return(a.getSource()||a).createFiltered(c,b)},query:function(g,f,a,b,c){var d=this.getData();return(d.getSource()||d).createFiltered(g,f,a,b,c)},first:function(a){return this.getData().first(a)||null},last:function(a){return this.getData().last(a)||null},sum:function(a,b){var c=this.getData();return(b&&this.isGrouped())?c.sumByGroup(a):c.sum(a)},count:function(a){var b=this.getData();return(a&&this.isGrouped())?b.countByGroup():b.count()},min:function(a,b){var c=this.getData();return(b&&this.isGrouped())?c.minByGroup(a):c.min(a)},max:function(a,b){var c=this.getData();return(b&&this.isGrouped())?c.maxByGroup(a):c.max(a)},average:function(a,b){var c=this.getData();return(b&&this.isGrouped())?c.averageByGroup(a):c.average(a)},aggregate:function(o,c,j,a){var m=this,d,h,f,b,g;if(j&&m.isGrouped()){d=m.getGroups().items;h=d.length;f={};for(g=0;g<h;++g){b=d[g];f[b.getGroupKey()]=m.getAggregate(o,c||m,b.items,a)}return f}else{return m.getAggregate(o,c,m.getData().items,a)}},getAggregate:function(g,f,c,h){var b=[],a=c.length,d;for(d=0;d<a;++d){b[d]=c[d].get(h)}return g.call(f||this,c,b)},addObserver:function(a){var b=this.observers;if(!b){this.observers=b=new Ext.util.Collection()}b.add(a)},removeObserver:function(a){var b=this.observers;if(b){b.remove(a)}},callObservers:function(g,c){var h=this.observers,j,b,d,a,f;if(h){b=h.items;if(c){c.unshift(this)}else{c=[this]}for(d=0,j=b.length;d<j;++d){f=b[d];a="onSource"+g;if(f[a]){f[a].apply(f,c)}}}},queryRecordsBy:function(f,d){var h=this.getData(),g=[],a,c,b;h=(h.getSource()||h).items;d=d||this;for(c=0,a=h.length;c<a;++c){b=h[c];if(f.call(d,b)===true){g.push(b)}}return g},queryRecords:function(h,g){var f=this.getData(),d=[],a,c,b;f=(f.getSource()||f).items;for(c=0,a=f.length;c<a;++c){b=f[c];if(b.get(h)===g){d.push(b)}}return d},privates:{isLast:function(a){return a===this.last()},makeInternalKeyCfg:function(){return{byInternalId:{property:"internalId",rootProperty:""}}}}},0,0,0,0,0,0,[Ext.data,"LocalStore"],0));(Ext.cmd.derive("Ext.data.proxy.Server",Ext.data.proxy.Proxy,{alternateClassName:"Ext.data.ServerProxy",isRemote:true,config:{url:"",pageParam:"page",startParam:"start",limitParam:"limit",groupParam:"group",groupDirectionParam:"groupDir",sortParam:"sort",filterParam:"filter",directionParam:"dir",idParam:"id",simpleSortMode:false,simpleGroupMode:false,noCache:true,cacheString:"_dc",timeout:30000,api:{create:undefined,read:undefined,update:undefined,destroy:undefined},extraParams:{}},create:function(){return this.doRequest.apply(this,arguments)},read:function(){return this.doRequest.apply(this,arguments)},update:function(){return this.doRequest.apply(this,arguments)},erase:function(){return this.doRequest.apply(this,arguments)},setExtraParam:function(b,c){var a=this.getExtraParams();a[b]=c;this.fireEvent("extraparamschanged",a)},updateExtraParams:function(b,a){this.fireEvent("extraparamschanged",b)},buildRequest:function(a){var g=this,b=Ext.apply({},a.getParams()),h=Ext.applyIf(b,g.getExtraParams()||{}),f,d,c;Ext.applyIf(h,g.getParams(a));d=a.getId();c=g.getIdParam();if(d!==undefined&&h[c]===undefined){h[c]=d}f=new Ext.data.Request({params:h,action:a.getAction(),records:a.getRecords(),url:a.getUrl(),operation:a,proxy:g});f.setUrl(g.buildUrl(f));a.setRequest(f);return f},processResponse:function(h,b,g,a){var f=this,c,j,d;f.fireEvent("beginprocessresponse",f,a,b);if(h===true){j=f.getReader();if(a.status===204){d=j.getNullResultSet()}else{d=j.read(f.extractResponseData(a),{recordCreator:b.getRecordCreator()})}b.process(d,g,a);c=!b.wasSuccessful()}else{f.setException(b,a);c=true}if(c){f.fireEvent("exception",f,a,b)}f.afterRequest(g,h);f.fireEvent("endprocessresponse",f,a,b)},setException:function(b,a){b.setException({status:a.status,statusText:a.statusText,response:a})},extractResponseData:Ext.identityFn,applyEncoding:function(a){return Ext.encode(a)},encodeSorters:function(b,f){var c=[],a=b.length,d;for(d=0;d<a;d++){c[d]=b[d].serialize()}return this.applyEncoding(f?c[0]:c)},encodeFilters:function(a){var c=[],f=a.length,d,b;for(d=0;d<f;d++){c[d]=a[d].serialize()}return this.applyEncoding(c)},getParams:function(u){if(!u.isReadOperation){return{}}var q=this,A={},y=u.getGrouper(),a=u.getSorters(),s=u.getFilters(),j=u.getPage(),h=u.getStart(),z=u.getLimit(),p=q.getSimpleSortMode(),d=q.getSimpleGroupMode(),w=q.getPageParam(),f=q.getStartParam(),b=q.getLimitParam(),c=q.getGroupParam(),r=q.getGroupDirectionParam(),g=q.getSortParam(),v=q.getFilterParam(),t=q.getDirectionParam(),o,m;if(w&&j){A[w]=j}if(f&&(h||h===0)){A[f]=h}if(b&&z){A[b]=z}o=c&&y;if(o){if(d){A[c]=y.getProperty();A[r]=y.getDirection()}else{A[c]=q.encodeSorters([y],true)}}if(g&&a&&a.length>0){if(p){m=0;if(a.length>1&&o){m=1}A[g]=a[m].getProperty();A[t]=a[m].getDirection()}else{A[g]=q.encodeSorters(a)}}if(v&&s&&s.length>0){A[v]=q.encodeFilters(s)}return A},buildUrl:function(a){var c=this,b=c.getUrl(a);if(c.getNoCache()){b=Ext.urlAppend(b,Ext.String.format("{0}={1}",c.getCacheString(),Ext.Date.now()))}return b},getUrl:function(b){var a;if(b){a=b.getUrl()||this.getApi()[b.getAction()]}return a?a:(arguments.callee.$previous||Ext.data.proxy.Proxy.prototype.getUrl).call(this)},doRequest:function(a){},afterRequest:Ext.emptyFn,destroy:function(){Ext.data.proxy.Proxy.prototype.destroy.call(this);Ext.destroy(this.getReader(),this.getWriter());this.reader=this.writer=null}},0,0,0,0,["proxy.server"],0,[Ext.data.proxy,"Server",Ext.data,"ServerProxy"],0));(Ext.cmd.derive("Ext.data.proxy.Ajax",Ext.data.proxy.Server,{alternateClassName:["Ext.data.HttpProxy","Ext.data.AjaxProxy"],isAjaxProxy:true,defaultActionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"},config:{binary:false,headers:undefined,paramsAsJson:false,withCredentials:false,useDefaultXhrHeader:true,username:null,password:null,actionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"}},doRequest:function(a){var d=this,f=d.getWriter(),c=d.buildRequest(a),h=d.getMethod(c),b,g;if(f&&a.allowWrite()){c=f.write(c)}c.setConfig({binary:d.getBinary(),headers:d.getHeaders(),timeout:d.getTimeout(),scope:d,callback:d.createRequestCallback(c,a),method:h,useDefaultXhrHeader:d.getUseDefaultXhrHeader(),disableCaching:false});if(h.toUpperCase()!=="GET"&&d.getParamsAsJson()){g=c.getParams();if(g){b=c.getJsonData();if(b){b=Ext.Object.merge({},b,g)}else{b=g}c.setJsonData(b);c.setParams(undefined)}}if(d.getWithCredentials()){c.setWithCredentials(true);c.setUsername(d.getUsername());c.setPassword(d.getPassword())}return d.sendRequest(c)},sendRequest:function(a){a.setRawRequest(Ext.Ajax.request(a.getCurrentConfig()));this.lastRequest=a;return a},abort:function(a){a=a||this.lastRequest;if(a){Ext.Ajax.abort(a.getRawRequest())}},getMethod:function(c){var a=this.getActionMethods(),d=c.getAction(),b;if(a){b=a[d]}return b||this.defaultActionMethods[d]},createRequestCallback:function(a,b){var c=this;return function(d,f,g){if(a===c.lastRequest){c.lastRequest=null}c.processResponse(f,b,a,g)}},destroy:function(){this.lastRequest=null;Ext.data.proxy.Server.prototype.destroy.call(this)}},0,0,0,0,["proxy.ajax"],0,[Ext.data.proxy,"Ajax",Ext.data,"HttpProxy",Ext.data,"AjaxProxy"],0));(Ext.cmd.derive("Ext.data.reader.Json",Ext.data.reader.Reader,{alternateClassName:"Ext.data.JsonReader",config:{record:null,metaProperty:"metaData",useSimpleAccessors:false,preserveRawData:false},updateRootProperty:function(){this.forceBuildExtractors()},updateMetaProperty:function(){this.forceBuildExtractors()},readRecords:function(a,f,c){var d=this,b;if(d.getMeta){b=d.getMeta(a);if(b){d.onMetaChange(b)}}else{if(a.metaData){d.onMetaChange(a.metaData)}}return Ext.data.reader.Reader.prototype.readRecords.call(this,a,f,c)},getResponseData:function(b){var c;try{return Ext.decode(b.responseText)}catch(a){c=this.createReadError(a.message);Ext.Logger.warn("Unable to parse the JSON returned by the server");this.fireEvent("exception",this,b,c);return c}},buildExtractors:function(){var a=this,b,c;if(Ext.data.reader.Reader.prototype.buildExtractors.apply(this,arguments)){b=a.getMetaProperty();c=a.getRootProperty();if(c){a.getRoot=a.getAccessor(c)}else{a.getRoot=Ext.identityFn}if(b){a.getMeta=a.getAccessor(b)}}},extractData:function(b,g){var a=this.getRecord(),f=[],d,c;if(a){d=b.length;if(!d&&Ext.isObject(b)){d=1;b=[b]}for(c=0;c<d;c++){f[c]=b[c][a]}}else{f=b}return Ext.data.reader.Reader.prototype.extractData.call(this,f,g)},getModelData:function(a){return this.getPreserveRawData()?Ext.apply({},a):a},createAccessor:(function(){var a=/[\[\.]/;return function(p){var o=this,t=o.getUseSimpleAccessors(),w,u,f,y,v,j,s,h,r,g,m,b,q,d;if(!(p||p===0)){return}if(typeof p==="function"){return p}if(!t){w=String(p).search(a)}if(t===true||w<0){u=function(c){return c[p]}}else{f="raw";y=[];v="";j=0;d=p.length;for(b=0;b<=d;++b){m=p[b];s=m===".";h=m==="[";r=m==="]";g=s||h||r||!m;if(!g||j>1||(j&&!r)){v+=m}else{if(g){q=false;if(h){++j}else{if(r){--j;q=true}}if(v){if(q){v="["+v+"]"}else{v="."+v}f+=v;y.push(""+f);v=""}}}}u=y.join(" && ");u=Ext.functionFactory("raw","return "+u)}return u}}()),createFieldAccessor:function(b){var d=this,c=b.mapping,f=c||c===0,a=f?c:b.name;if(f){if(typeof a==="function"){return function(g){return b.mapping(g,d)}}else{return d.createAccessor(a)}}},getAccessorKey:function(b){var a=this.getUseSimpleAccessors()?"simple":"";return this.$className+a+b},privates:{copyFrom:function(a){Ext.data.reader.Reader.prototype.copyFrom.call(this,a);this.getRoot=a.getRoot}}},0,0,0,0,["reader.json"],0,[Ext.data.reader,"Json",Ext.data,"JsonReader"],0));(Ext.cmd.derive("Ext.data.writer.Json",Ext.data.writer.Writer,{alternateClassName:"Ext.data.JsonWriter",config:{rootProperty:undefined,encode:false,allowSingle:true,expandData:false},getExpandedData:function(m){var g=m.length,o=0,c,f,a,h,b,d=function(p,q){var j={};j[p]=q;return j};for(;o<g;o++){c=m[o];for(f in c){if(c.hasOwnProperty(f)){a=f.split(".");h=a.length-1;if(h>0){b=c[f];for(;h>0;h--){b=d(a[h],b)}c[a[0]]=c[a[0]]||{};Ext.Object.merge(c[a[0]],b);delete c[f]}}}}return m},writeRecords:function(f,g){var d=this,a=d.getRootProperty(),c,h,b;if(d.getExpandData()){g=d.getExpandedData(g)}if(d.getAllowSingle()&&g.length===1){g=g[0];h=true}b=this.getTransform();if(b){g=b(g,f)}if(d.getEncode()){if(a){f.setParam(a,Ext.encode(g))}else{}}else{if(h||(g&&g.length)){c=f.getJsonData()||{};if(a){c[a]=g}else{c=g}f.setJsonData(c)}}return f}},0,0,0,0,["writer.json"],0,[Ext.data.writer,"Json",Ext.data,"JsonWriter"],0));(Ext.cmd.derive("Ext.util.Group",Ext.util.Collection,{config:{groupKey:null},$endUpdatePriority:2001},0,0,0,0,0,0,[Ext.util,"Group"],0));(Ext.cmd.derive("Ext.util.SorterCollection",Ext.util.Collection,{isSorterCollection:true,$sortable:null,sortFn:null,config:{sorterOptionsFn:null,sorterOptionsScope:null},constructor:function(a){var b=this;b.sortFn=Ext.util.Sorter.createComparator(b);Ext.util.Collection.prototype.constructor.call(this,a);b.setDecoder(b.decodeSorter)},addSort:function(p,o,f){var m=this,g,h,d,b,c,a,j;if(!p){m.beginUpdate();m.endUpdate()}else{b=m.getOptions();if(p instanceof Array){j=p;f=o;o=null}else{if(Ext.isString(p)){if(!(a=m.get(p))){j=[{property:p,direction:o||b.getDefaultSortDirection()}]}else{j=[a]}}else{if(Ext.isFunction(p)){j=[{sorterFn:p,direction:o||b.getDefaultSortDirection()}]}else{j=[p];f=o;o=null}}}f=m._sortModes[f||"replace"];c=m.getAt(0);g=m.length;h=f.append?g:0;m.beginUpdate();m.splice(h,f.replace?g:0,j);if(f.multi){g=m.length;d=b.getMultiSortLimit();if(g>d){m.removeAt(d,g)}}if(a&&o){a.setDirection(o)}else{if(h===0&&c&&c===m.getAt(0)){c.toggle()}}m.endUpdate()}},clear:function(){this.beginUpdate();Ext.util.Collection.prototype.clear.call(this);this.endUpdate(this.items)},getSortFn:function(){return this.sortFn},getByProperty:function(b){var d=this.items,c=d.length,f,a;for(f=0;f<c;++f){a=d[f];if(a.getProperty()===b){return a}}return null},_sortModes:{append:{append:1},multi:{multi:1},prepend:{prepend:1},replace:{replace:1}},decodeSorter:function(c,f){var a=this,d=a.getOptions(),b=d.getRootProperty(),g=a.getSorterOptionsFn(),h,m,j;if(c.isSorter){if(!c.getRoot()){c.setRoot(b)}}else{m={direction:d.getDefaultSortDirection(),root:b};j=typeof c;if(j==="string"){h=a.get(c);if(h){return h}m.property=c}else{if(j==="function"){m.sorterFn=c}else{m=Ext.apply(m,c);if(m.fn){m.sorterFn=m.fn;delete m.fn}}}c=Ext.create(f||"Ext.util.Sorter",m)}if(g){g.call(a.getSorterOptionsScope()||a,c)}return c},setSorterConfigure:function(b,a){this.setSorterOptionsFn(b);this.setSorterOptionsScope(a)},decodeRemoveItems:function(j,f){var o=this,g=(f===undefined)?j:j[f];if(!g||!g.$cloned){if(j.length>f+1||!Ext.isIterable(g)){g=Ext.Array.slice(j,f)}var p=o.items,h=g.length,d=[],c,q,b,a,m;for(c=0;c<h;c++){a=g[c];if(a&&a.isSorter){d.push(a)}else{m=typeof a;if(m==="string"){a=o.get(a);if(a){d.push(a)}}else{if(m==="function"){for(b=p.length;b-->0;){q=p[b];if(q.getSorterFn()===a){d.push(q)}}}}}}g=d;g.$cloned=true}return g},getOptions:function(){return this.$sortable||this}},1,0,0,0,0,0,[Ext.util,"SorterCollection"],0));(Ext.cmd.derive("Ext.util.FilterCollection",Ext.util.Collection,{isFilterCollection:true,$filterable:null,filterFn:null,constructor:function(a){var b=this;b.filterFn=Ext.util.Filter.createFilterFn(b);Ext.util.Collection.prototype.constructor.call(this,a);b.setDecoder(b.decodeFilter)},filterData:function(a){return this.filtered?Ext.Array.filter(a,this.filterFn):a},getFilterFn:function(){return this.filterFn},isItemFiltered:function(a){return !this.filterFn(a)},decodeFilter:function(a){var d=this.getOptions(),c=d.getRootProperty(),b;if(a.isFilter){if(!a.getRoot()){a.setRoot(c)}}else{b={root:c};if(Ext.isFunction(a)){b.filterFn=a}else{b=Ext.apply(b,a);if(b.fn){b.filterFn=b.fn;delete b.fn}if(Ext.util.Filter.isInvalid(b)){return false}}a=new Ext.util.Filter(b)}return a},decodeRemoveItems:function(r,d){var j=this,g=(d===undefined)?r:r[d];if(!g.$cloned){if(r.length>d+1||!Ext.isIterable(g)){g=Ext.Array.slice(r,d)}var u=j.items,p=g.length,b=[],q,a,s,h,o,m,c,t,f;for(a=0;a<p;a++){q=g[a];if(q&&q.isFilter){b.push(q)}else{f=typeof q;s=f==="function";h=q.property!==undefined&&q.value!==undefined;o=f==="string";for(t=u.length;t-->0;){m=u[t];c=false;if(o){c=m.getProperty()===q}else{if(s){c=m.getFilterFn()===q}else{if(h){c=m.getProperty()===q.property&&m.getValue()===q.value}}}if(c){b.push(m)}}}}g=b;g.$cloned=true}return g},getOptions:function(){return this.$filterable||this}},1,0,0,0,0,0,[Ext.util,"FilterCollection"],0));(Ext.cmd.derive("Ext.util.GroupCollection",Ext.util.Collection,{isGroupCollection:true,config:{grouper:null,itemRoot:null},observerPriority:-100,onCollectionAdd:function(b,a){this.addItemsToGroups(b,a.items)},onCollectionBeforeItemChange:function(b,a){this.changeDetails=a},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionItemChange:function(a,b){var c=b.item;if(!b.indexChanged){this.syncItemGrouping(a,c,a.getKey(c),b.oldKey,b.oldIndex)}this.changeDetails=null},onCollectionRefresh:function(a){this.removeAll();this.addItemsToGroups(a,a.items)},onCollectionRemove:function(c,d){var m=this,a=m.changeDetails,j,o,p,h,f,g,b;if(a){b=a.item;p=m.findGroupForItem(b);j=[];if(p){j.push({group:p,items:[b]})}}else{j=m.groupItems(c,d.items,false)}for(h=0,f=j.length;h<f;++h){p=(o=j[h]).group;if(p){p.remove(o.items);if(!p.length){(g||(g=[])).push(p)}}}if(g){m.remove(g)}},onCollectionSort:function(f){var d=this,h=f.getSorters(false),a,c,b,g;if(h){a=d.items;c=d.length;for(b=0;b<c;++b){g=a[b];if(g.getSorters()!==h){g.setSorters(h)}}}},onCollectionUpdateKey:function(b,d){var c=d.index,a=d.item;if(!d.indexChanged){c=b.indexOf(a);this.syncItemGrouping(b,a,d.newKey,d.oldKey,c)}},addItemsToGroups:function(b,a){this.groupItems(b,a,true)},groupItems:function(q,g,t){var j=this,p={},c=[],s=q.getGrouper(),r=j.itemGroupKeys,o,f,m,b,h,u,d,a;for(b=0,d=g.length;b<d;++b){m=s.getGroupString(h=g[b]);u=q.getKey(h);if(t){(r||(j.itemGroupKeys=r={}))[u]=m}else{if(r){delete r[u]}}if(!(o=p[m])){if(!(f=j.getByKey(m))&&t){(a||(a=[])).push(f=j.createGroup(q,m))}c.push(p[m]=o={group:f,items:[]})}o.items.push(h)}for(b=0,d=c.length;b<d;++b){o=c[b];o.group.add(o.items)}if(a){j.add(a)}return c},syncItemGrouping:function(p,j,a,d,q){var r=this,g=r.itemGroupKeys||(r.itemGroupKeys={}),s=p.getGrouper(),m=s.getGroupString(j),b=0,o=-1,h,f,u,c,t;if(d){c=g[d];delete g[d]}else{c=g[a]}g[a]=m;if(!(f=r.get(m))){f=r.createGroup(p,m);h=[f]}if(f.get(a)!==j){if(f.getCount()>0&&p.getSorters().getCount()===0){t=p.indexOf(f.items[0]);if(q<t){o=0}else{o=q-t}}if(o===-1){f.add(j)}else{f.insert(o,j)}}else{f.itemChanged(j)}if(m!==c&&(c===0||c)){u=r.get(c);if(u){u.remove(j);if(!u.length){b=[u]}}}if(h){r.splice(0,b,h)}else{if(b){r.splice(0,b)}}},createGroup:function(c,b){var a=new Ext.util.Group({groupKey:b,rootProperty:this.getItemRoot(),sorters:c.getSorters()});return a},getKey:function(a){return a.getGroupKey()},createSortFn:function(){var a=this,b=a.getGrouper(),c=a.getSorters().getSortFn();if(!b){return c}return function(d,f){return b.sort(d.items[0],f.items[0])||c(d,f)}},updateGrouper:function(a){var b=this;b.grouped=!!(a&&b.$groupable.getAutoGroup());b.onSorterChange();b.onEndUpdateSorters(b.getSorters())},destroy:function(){this.$groupable=null;Ext.util.Collection.prototype.destroy.call(this)},privates:{findGroupForItem:function(a){var d=this.items,c=d.length,f,b;for(f=0;f<c;++f){b=d[f];if(b.contains(a)){return b}}}}},0,0,0,0,0,0,[Ext.util,"GroupCollection"],0));(Ext.cmd.derive("Ext.data.Store",Ext.data.ProxyStore,{config:{data:0,clearRemovedOnLoad:true,clearOnPageLoad:true,associatedEntity:null,role:null,session:null},addRecordsOptions:{addRecords:true},loadCount:0,complete:false,moveMapCount:0,constructor:function(b){var c=this,a;if(b){if(b.buffered){return new Ext.data.BufferedStore(b)}}Ext.data.ProxyStore.prototype.constructor.call(this,b);c.getData().addObserver(c);a=c.inlineData;if(a){delete c.inlineData;c.loadInlineData(a)}},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},applyData:function(a,b){var c=this;c.getFields();c.getModel();if(a&&a.isCollection){b=a}else{if(!b){b=c.constructDataCollection()}if(a){if(c.isInitializing){c.inlineData=a}else{c.loadData(a)}}}return b},loadInlineData:function(a){var c=this,b=c.getProxy();if(b&&b.isMemoryProxy){b.setData(a);c.suspendEvents();c.read();c.resumeEvents()}else{c.removeAll(true);c.suspendEvents();c.loadData(a);c.resumeEvents()}},onCollectionAdd:function(b,a){this.onCollectionAddItems(b,a.items,a)},onCollectionFilterAdd:function(b,a){this.onCollectionAddItems(b,a)},onCollectionAddItems:function(c,r,o){var h=this,f=r.length,p=o?!o.next:false,d=h.removed,b=h.ignoreCollectionAdd,g=h.getSession(),m=o&&o.replaced,s,j,a,q;for(s=0;s<f;++s){a=r[s];if(g){g.adopt(a)}if(!b){a.join(h);if(d&&d.length){Ext.Array.remove(d,a)}j=j||a.phantom||a.dirty}}if(b){return}if(m){q=[];do{Ext.Array.push(q,m.items);m=m.next}while(m);h.setMoving(q,true)}if(o){if(o.replaced){if(p){h.fireEvent("refresh",h)}}else{h.fireEvent("add",h,r,o.at);if(p){h.fireEvent("datachanged",h)}}}if(q){h.setMoving(q,false)}h.needsSync=h.needsSync||j},onCollectionFilteredItemChange:function(){this.onCollectionItemChange.apply(this,arguments)},onCollectionItemChange:function(a,g){var f=this,b=g.item,d=g.modified||null,c=g.meta;if(f.fireChangeEvent(b)){f.onUpdate(b,c,d,g);f.fireEvent("update",f,b,c,d,g)}},fireChangeEvent:function(a){return this.getDataSource().contains(a)},afterChange:function(b,a,c){this.getData().itemChanged(b,a||null,undefined,c)},afterCommit:function(a,b){this.afterChange(a,b,Ext.data.Model.COMMIT)},afterEdit:function(a,b){this.needsSync=this.needsSync||a.dirty;this.afterChange(a,b,Ext.data.Model.EDIT)},afterReject:function(a){this.afterChange(a,null,Ext.data.Model.REJECT)},afterDrop:function(a){this.getData().remove(a)},afterErase:function(a){this.removeFromRemoved(a)},addSorted:function(c){var f=this,b=f.getRemoteSort(),a=f.getData(),d;if(b){a.setSorters(f.getSorters())}d=a.findInsertionIndex(c);if(b){a.setSorters(null)}return f.insert(d,c)},remove:function(g,d,b){var c=this,h=c.getDataSource(),a,j,f,m;if(g){if(g.isModel){if(h.indexOf(g)>-1){f=[g];a=1}else{a=0}}else{f=[];for(j=0,a=g.length;j<a;++j){m=g[j];if(m&&m.isEntity){if(!h.contains(m)){continue}}else{if(!(m=h.getAt(m))){continue}}f.push(m)}a=f.length}}if(!a){return[]}c.removeIsMove=d===true;c.removeIsSilent=b;h.remove(f);c.removeIsSilent=false;return f},onCollectionRemove:function(d,o){var p=this,f=p.removed,s=o.items,h=s.length,g=o.at,r=o.replacement,m=p.removeIsMove||(r&&Ext.Array.equals(s,r.items)),j=p.removeIsSilent,q=!o.next,b=p.getDataSource(),a,c;if(p.ignoreCollectionRemove){return}if(r){p.setMoving(r.items,true)}for(a=0;a<h;++a){c=s[a];if(!b.contains(c)){if(f&&!m&&!c.phantom&&!c.erasing){c.removedFrom=g+a;f.push(c);p.needsSync=true}else{c.unjoin(p)}}}if(!j){if(!r||!r.items.length){p.fireEvent("remove",p,s,g,m);if(q){p.fireEvent("datachanged",p)}}}if(r){p.setMoving(r.items,false)}},onFilterEndUpdate:function(){Ext.data.ProxyStore.prototype.onFilterEndUpdate.apply(this,arguments);this.callObservers("Filter")},removeAt:function(b,c){var a=this.getData();b=Math.max(b,0);if(b<a.length){if(arguments.length===1){c=1}else{if(!c){return}}a.removeAt(b,c)}},removeAll:function(d){var f=this,a=f.getData(),b=f.hasListeners.clear,c=a.getRange();if(a.length){f.removeIsSilent=true;f.callObservers("BeforeRemoveAll");a.removeAll();f.removeIsSilent=false;if(!d){f.fireEvent("clear",f,c);f.fireEvent("datachanged",f)}f.callObservers("AfterRemoveAll",[!!d])}return c},setRecords:function(a){var b=this.getCount();++this.loadCount;if(b){this.getData().splice(0,b,a)}else{this.add(a)}},splice:function(b,a,c){return this.getData().splice(b,a,c)},onProxyLoad:function(d){var a=this,f=d.getResultSet(),c=d.getRecords(),b=d.wasSuccessful();if(a.destroyed){return}if(f){a.totalCount=f.getTotal()}if(b){c=a.processAssociation(c);a.loadRecords(c,d.getAddRecords()?{addRecords:true}:undefined)}else{a.loading=false}if(a.hasListeners.load){a.fireEvent("load",a,c,b,d)}a.callObservers("AfterLoad",[c,b,d])},filterDataSource:function(g){var a=this.getDataSource(),c=a.items,b=c.length,d=[],f;for(f=0;f<b;f++){if(g.call(a,c[f])){d.push(c[f])}}return d},getNewRecords:function(){return this.filterDataSource(this.filterNew)},getRejectRecords:function(){return this.filterDataSource(this.filterRejects)},getUpdatedRecords:function(){return this.filterDataSource(this.filterUpdated)},loadData:function(a,b){var g=this,f=a.length,d=[],c;for(c=0;c<f;c++){d.push(g.createModel(a[c]))}d=g.processAssociation(d);g.loadRecords(d,b?g.addRecordsOptions:undefined)},loadRawData:function(f,b){var d=this,g=d.getSession(),a=d.getProxy().getReader().read(f,g?{recordCreator:g.recordCreator}:undefined),c=a.getRecords(),h=a.getSuccess();if(h){d.totalCount=a.getTotal();d.loadRecords(c,b?d.addRecordsOptions:undefined)}return h},loadRecords:function(j,b){var g=this,f=j.length,h=g.getData(),d,c,a;if(b){d=b.addRecords}if(!g.getRemoteSort()&&!g.getSortOnLoad()){a=true;h.setAutoSort(false)}if(!d){g.clearData(true)}g.loading=false;g.ignoreCollectionAdd=true;g.callObservers("BeforePopulate");h.add(j);g.ignoreCollectionAdd=false;if(a){h.setAutoSort(true)}for(c=0;c<f;c++){j[c].join(g)}++g.loadCount;g.complete=true;g.fireEvent("datachanged",g);g.fireEvent("refresh",g);g.callObservers("AfterPopulate")},loadPage:function(b,c){var a=this,d=a.getPageSize();a.currentPage=b;c=Ext.apply({page:b,start:(b-1)*d,limit:d,addRecords:!a.getClearOnPageLoad()},c);a.read(c)},nextPage:function(a){this.loadPage(this.currentPage+1,a)},previousPage:function(a){this.loadPage(this.currentPage-1,a)},clearData:function(g){var b=this,o=b.removed,h=b.getDataSource(),a=b.getClearRemovedOnLoad(),c=o&&g&&!a,d,j,f,m;if(h){d=h.items;for(f=0,m=d.length;f<m;++f){j=d[f];if(c&&Ext.Array.contains(o,j)){continue}j.unjoin(b)}b.ignoreCollectionRemove=true;b.callObservers("BeforeClear");h.removeAll();b.ignoreCollectionRemove=false;b.callObservers("AfterClear")}if(o&&(!g||a)){o.length=0}},onIdChanged:function(a,c,b){this.getData().updateKey(a,c);this.fireEvent("idchanged",this,a,c,b)},commitChanges:function(){var a=this,b=a.getModifiedRecords(),c=b.length,d=0;Ext.suspendLayouts();a.beginUpdate();for(;d<c;d++){b[d].commit()}a.cleanRemoved();a.endUpdate();Ext.resumeLayouts(true)},filterNewOnly:function(a){return a.phantom===true},filterRejects:function(a){return a.phantom||a.dirty},rejectChanges:function(){var c=this,d=c.getRejectRecords(),a=d.length,j,g,f,b,h,m;Ext.suspendLayouts();c.beginUpdate();for(j=0;j<a;j++){g=d[j];if(g.phantom){f=f||[];f.push(g)}else{g.reject()}}if(f){c.remove(f);for(j=0,a=f.length;j<a;++j){f[j].reject()}}d=c.getRawRemovedRecords();if(d){a=d.length;b=!c.getRemoteSort()&&c.isSorted();if(b){h=c.getData();m=h.getAutoSort();h.setAutoSort(false)}for(j=a-1;j>=0;j--){g=d[j];g.reject();if(!b){c.insert(g.removedFrom||0,g)}}if(b){h.setAutoSort(m);c.add(d)}d.length=0}c.endUpdate();Ext.resumeLayouts(true)},onDestroy:function(){var d=this,c=d.loadTask,b=d.getData(),a=b.getSource();d.clearData();Ext.data.ProxyStore.prototype.onDestroy.call(this);d.setSession(null);d.observers=null;if(c){c.cancel();d.loadTask=null}if(a){a.destroy()}},privates:{fetch:function(b){b=Ext.apply({},b);this.setLoadOptions(b);var a=this.createOperation("read",b);a.execute()},onBeforeLoad:function(a){this.callObservers("BeforeLoad",[a])},onRemoteFilterSet:function(a,b){if(a){this.getData().setFilters(b?null:a)}Ext.data.ProxyStore.prototype.onRemoteFilterSet.call(this,a,b)},onRemoteSortSet:function(c,a){var b=this.getData();if(c){b.setSorters(a?null:c)}b.setAutoGroup(!a);Ext.data.ProxyStore.prototype.onRemoteSortSet.call(this,c,a)},isMoving:function(d,g){var a=this.moveMap,c=0,b,f;if(a){if(d){if(Ext.isArray(d)){for(f=0,b=d.length;f<b;++f){c+=a[d[f].id]?1:0}}else{if(a[d.id]){++c}}}else{c=g?a:this.moveMapCount}}return c},setLoadOptions:function(f){var a=this,c=a.getPageSize(),b,d;if(a.getRemoteSort()&&!f.grouper){d=a.getGrouper();if(d){f.grouper=d}}if(c||"start" in f||"limit" in f||"page" in f){f.page=f.page!=null?f.page:a.currentPage;f.start=(f.start!==undefined)?f.start:(f.page-1)*c;f.limit=f.limit!=null?f.limit:c;a.currentPage=f.page}f.addRecords=f.addRecords||false;if(!f.recordCreator){b=a.getSession();if(b){f.recordCreator=b.recordCreator}}Ext.data.ProxyStore.prototype.setLoadOptions.call(this,f)},setMoving:function(b,g){var d=this,f=d.moveMap||(d.moveMap={}),a=b.length,c,h;for(c=0;c<a;++c){h=b[c].id;if(g){if(f[h]){++f[h]}else{f[h]=1;++d.moveMapCount}}else{if(--f[h]===0){delete f[h];--d.moveMapCount}}}if(d.moveMapCount===0){d.moveMap=null}},processAssociation:function(b){var a=this,c=a.getAssociatedEntity();if(c){b=a.getRole().processLoad(a,c,b,a.getSession())}return b}}},1,0,0,0,["store.store"],[[Ext.data.LocalStore.prototype.mixinId||Ext.data.LocalStore.$className,Ext.data.LocalStore]],[Ext.data,"Store"],0));(Ext.cmd.derive("Ext.data.reader.Array",Ext.data.reader.Json,{alternateClassName:"Ext.data.ArrayReader",config:{totalProperty:undefined,successProperty:undefined},createFieldAccessor:function(b){var d=b.mapping,a=b.hasMapping()?d:b.ordinal,c;b.mapping=a;c=Ext.data.reader.Json.prototype.createFieldAccessor.apply(this,arguments);b.mapping=d;return c},getModelData:function(a){return{}}},0,0,0,0,["reader.array"],0,[Ext.data.reader,"Array",Ext.data,"ArrayReader"],0));(Ext.cmd.derive("Ext.data.ArrayStore",Ext.data.Store,{alternateClassName:["Ext.data.SimpleStore"],config:{proxy:{type:"memory",reader:"array"}},loadData:function(b,c){if(this.expandData){var a=[],d=0,f=b.length;for(;d<f;d++){a[a.length]=[b[d]]}b=a}Ext.data.Store.prototype.loadData.call(this,b,c)}},0,0,0,0,["store.array"],0,[Ext.data,"ArrayStore",Ext.data,"SimpleStore"],0));(Ext.cmd.derive("Ext.data.StoreManager",Ext.util.MixedCollection,{alternateClassName:["Ext.StoreMgr","Ext.data.StoreMgr","Ext.StoreManager"],singleton:true,register:function(){for(var a=0,b;(b=arguments[a]);a++){this.add(b)}},unregister:function(){for(var a=0,b;(b=arguments[a]);a++){this.remove(this.lookup(b))}},lookup:function(c,h){if(Ext.isArray(c)){var b=["field1"],f=!Ext.isArray(c[0]),g=c,d,a;if(f){g=[];for(d=0,a=c.length;d<a;++d){g.push([c[d]])}}else{for(d=2,a=c[0].length;d<=a;++d){b.push("field"+d)}}return new Ext.data.ArrayStore({data:g,fields:b,autoDestroy:true,autoCreated:true,expanded:f})}if(Ext.isString(c)){return this.get(c)}else{return Ext.Factory.store(c,h)}},getKey:function(a){return a.storeId}},0,0,0,0,0,0,[Ext.data,"StoreManager",Ext,"StoreMgr",Ext.data,"StoreMgr",Ext,"StoreManager"],function(){Ext.regStore=function(d,c){var b;if(Ext.isObject(d)){c=d}else{if(Ext.data.StoreManager.containsKey(d)){return Ext.data.StoreManager.lookup(d)}c.storeId=d}if(c instanceof Ext.data.Store){b=c}else{b=new Ext.data.Store(c)}Ext.data.StoreManager.register(b);return b};Ext.getStore=function(b){return Ext.data.StoreManager.lookup(b)};var a=Ext.regStore("ext-empty-store",{proxy:"memory",useModelWarning:false});a.isEmptyStore=true}));(Ext.cmd.derive("Ext.app.domain.Store",Ext.app.EventDomain,{singleton:true,type:"store",prefix:"store.",idMatchRe:/^\#/,constructor:function(){var a=this;a.callParent();a.monitor(Ext.data.AbstractStore)},match:function(b,d){var c=false,a=b.alias;if(d==="*"){c=true}else{if(this.idMatchRe.test(d)){c=b.getStoreId()===d.substring(1)}else{if(a){c=Ext.Array.indexOf(a,this.prefix+d)>-1}}}return c}},1,0,0,0,0,0,[Ext.app.domain,"Store"],0));(Ext.cmd.derive("Ext.app.route.Queue",Ext.Base,{queue:null,token:null,constructor:function(a){Ext.apply(this,a);this.queue=new Ext.util.MixedCollection()},queueAction:function(a,b){this.queue.add({route:a,args:b})},clearQueue:function(){this.queue.removeAll()},runQueue:function(){var b=this.queue,a=b.removeAt(0),c;if(a){c=a&&a.route;c.execute(this.token,a.args,this.onActionExecute,this)}},onActionExecute:function(a){if(a){this.clearQueue()}else{this.runQueue()}}},1,0,0,0,0,0,[Ext.app.route,"Queue"],0));(Ext.cmd.derive("Ext.app.route.Route",Ext.Base,{action:null,conditions:null,controller:null,allowInactive:false,url:null,before:null,caseInsensitive:false,matcherRegex:null,paramMatchingRegex:null,paramsInMatchString:null,constructor:function(c){var a=this,b;Ext.apply(a,c,{conditions:{}});b=a.url;a.paramMatchingRegex=new RegExp(/:([0-9A-Za-z\_]*)/g);a.paramsInMatchString=b.match(a.paramMatchingRegex)||[];a.matcherRegex=a.createMatcherRegex(b)},recognize:function(f){var a=this,c=a.controller,b,d;if((a.allowInactive||c.isActive())&&a.recognizes(f)){b=a.matchesFor(f);d=f.match(a.matcherRegex);d.shift();return Ext.applyIf(b,{controller:c,action:a.action,historyUrl:f,args:d})}return false},recognizes:function(a){return this.matcherRegex.test(a)},execute:function(b,g,h,c){var a=g.args||[],f=this.before,j=this.controller,d=this.createCallback(g,h,c);if(f){a.push(d);if(Ext.isString(f)){f=this.before=j[f]}if(f){f.apply(j,a)}}else{d.resume()}},matchesFor:function(d){var a={},g=this.paramsInMatchString,c=d.match(this.matcherRegex),f=0,b=g.length;c.shift();for(;f<b;f++){a[g[f].replace(":","")]=c[f]}return a},createMatcherRegex:function(d){var g=this.paramsInMatchString,a=this.conditions,h=0,m=g.length,b=Ext.util.Format.format,c=this.caseInsensitive?"i":"",f,o,j;for(;h<m;h++){f=g[h];o=a[f];j=b("{0}",o||"([%a-zA-Z0-9\\-\\_\\s,]+)");d=d.replace(new RegExp(f),j)}return new RegExp("^"+d+"$",c)},createCallback:function(c,b,d){var a=this;d=d||a;return{resume:function(){var h=a.controller,g=a.action,f;if(Ext.isString(g)){g=h[g]}c=c&&c.args?c.args:[];f=c.pop();if(f&&!Ext.isObject(f)){c.push(f)}if(g){a.action=g;g.apply(h,c)}if(b){b.call(d)}},stop:function(f){if(b){b.call(d,f)}}}}},1,0,0,0,0,0,[Ext.app.route,"Route"],0));(Ext.cmd.derive("Ext.util.History",Ext.Base,{singleton:true,alternateClassName:"Ext.History",useTopWindow:false,constructor:function(){var a=this;a.hiddenField=null;a.ready=false;a.currentToken=null;a.mixins.observable.constructor.call(a)},getHash:function(){return this.win.location.hash.substr(1)},setHash:function(b){try{this.win.location.hash=b;this.currentToken=b}catch(a){}},handleStateChange:function(a){this.currentToken=a;this.fireEvent("change",a)},startUp:function(){var a=this;a.currentToken=a.getHash();if(Ext.supports.Hashchange){Ext.get(a.win).on("hashchange",a.onHashChange,a)}else{Ext.TaskManager.start({fireIdleEvent:false,run:a.onHashChange,interval:50,scope:a})}a.ready=true;a.fireEvent("ready",a)},onHashChange:function(){var b=this,a=b.getHash();if(a!==b.hash){b.hash=a;b.handleStateChange(a)}},init:function(a,b){var c=this;if(c.ready){Ext.callback(a,b,[c]);return}if(!Ext.isReady){Ext.onInternalReady(function(){c.init(a,b)});return}c.win=c.useTopWindow?window.top:window;c.hash=c.getHash();if(a){c.on("ready",a,b,{single:true})}c.startUp()},add:function(c,d){var a=this,b=false;if(d===false||a.getToken()!==c){a.setHash(c);b=true}return b},back:function(){var a=this.useTopWindow?window.top:window;a.history.go(-1)},forward:function(){var a=this.useTopWindow?window.top:window;a.history.go(1)},getToken:function(){return this.ready?this.currentToken:this.getHash()}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.util,"History",Ext,"History"],0));(Ext.cmd.derive("Ext.app.route.Router",Ext.Base,{singleton:true,multipleToken:"|",queueRoutes:true,constructor:function(){var a=Ext.util.History;if(!a.ready){a.init()}a.on("change",this.onStateChange,this);this.clear()},onStateChange:function(a){var h=this,s=h.application,p=h.routes,d=p.length,m=h.queueRoutes,g=a.split(h.multipleToken),r=0,q=g.length,b,c,j,f,o;for(;r<q;r++){a=g[r];o=false;if(m){c=new Ext.app.route.Queue({token:a})}for(b=0;b<d;b++){j=p[b];f=j.recognize(a);if(f){o=true;if(m){c.queueAction(j,f)}else{j.execute(a,f)}}}if(m){c.runQueue()}if(!o&&s){s.fireEvent("unmatchedroute",a)}}},connect:function(a,b,c){var d={url:a,action:b,controller:c};if(Ext.isObject(b)){Ext.merge(d,b)}this.routes.push(new Ext.app.route.Route(d))},disconnectAll:function(d){var c=this.routes,b=c.length,g=[],a,f;for(a=0;a<b;++a){f=c[a];if(f.controller!==d){g.push(f)}}this.routes=g},recognize:function(g){var c=this.routes||[],a=0,b=c.length,d,f;for(;a<b;a++){d=c[a];f=d.recognize(g);if(f){return{route:d,args:f}}}return false},draw:function(a){a.call(this,this)},clear:function(){this.routes=[]}},1,0,0,0,0,0,[Ext.app.route,"Router"],0));(Ext.cmd.derive("Ext.app.Controller",Ext.app.BaseController,{statics:{strings:{model:{getter:"getModel",upper:"Model"},view:{getter:"getView",upper:"View"},controller:{getter:"getController",upper:"Controller"},store:{getter:"getStore",upper:"Store"},profile:{getter:"getProfile",upper:"Profiles"}},controllerRegex:/^(.*)\.controller\./,profileRegex:/^(.*)\.profile\./,createGetter:function(a,b){return function(){return this[a](b)}},getGetterName:function(d,b){var f="get",g=d.split("."),a=g.length,c;for(c=0;c<a;c++){f+=Ext.String.capitalize(g[c])}f+=b;return f},resolveNamespace:function(a,g){var h=Ext.app.Controller,f=a.prototype.isProfile?h.profileRegex:h.controllerRegex,d,c,b;d=Ext.getClassName(a);c=g.$namespace||g.namespace||Ext.app.getNamespace(d)||((b=f.exec(d))&&b[1]);return c},processDependencies:function(s,t,a,b,q,v){if(!q||!q.length){return}var f=this,r=f.strings[b],w,p,m,u,c,d,g,h;if(!Ext.isArray(q)){q=[q]}for(c=0,d=q.length;c<d;c++){u=q[c];w=f.getFullName(u,b,a,v);q[c]=p=w.absoluteName;m=w.shortName;t.push(p);g=f.getGetterName(m,r.upper);if(!s[g]){s[g]=h=f.createGetter(r.getter,u)}if(h&&b!=="controller"){h["Ext.app.getter"]=true}}},getFullName:function(c,g,f,d){var a=c,b,h;if((b=c.indexOf("@"))>0){a=c.substring(0,b);h=c.substring(b+1)+"."+a}else{if(c.indexOf(".")>0&&(Ext.ClassManager.isCreated(c)||this.hasRegisteredPrefix(c))){h=c}else{if(f){h=f+"."+g+"."+(d?d+"."+c:c);a=c}else{h=c}}}return{absoluteName:h,shortName:a}},hasRegisteredPrefix:function(b){var a=Ext.ClassManager,c=a.getPrefix(b);return c&&c!==b}},models:null,views:null,stores:null,controllers:null,config:{application:null,refs:null,active:true,moduleClassName:null},onClassExtended:function(d,a,c){var b=c.onBeforeCreated;c.onBeforeCreated=function(j,g){var h=Ext.app.Controller,o=[],m,f;f=j.prototype;m=h.resolveNamespace(j,g);if(m){f.$namespace=m}h.processDependencies(f,o,m,"model",g.models);h.processDependencies(f,o,m,"view",g.views);h.processDependencies(f,o,m,"store",g.stores);h.processDependencies(f,o,m,"controller",g.controllers);Ext.require(o,Ext.Function.pass(b,arguments,this))}},constructor:function(a){this.initAutoGetters();Ext.app.BaseController.prototype.constructor.apply(this,arguments)},normalizeRefs:function(c){var a=this,b=[];if(c){if(Ext.isObject(c)){Ext.Object.each(c,function(d,f){if(Ext.isString(f)){f={selector:f}}f.ref=d;b.push(f)})}else{if(Ext.isArray(c)){b=Ext.Array.merge(b,c)}}}c=a.refs;if(c){a.refs=null;c=a.normalizeRefs(c);if(c){b=Ext.Array.merge(b,c)}}return b},getRefMap:function(){var a=this,d=a._refMap,b,g,f,c;if(!d){b=a.getRefs();d=a._refMap={};if(b){for(c=0,f=b.length;c<f;c++){g=b[c];d[g.ref]=g.selector}}}return d},applyRefs:function(a){return this.normalizeRefs(Ext.clone(a))},updateRefs:function(a){if(a){this.ref(a)}},initAutoGetters:function(){var c=this.self.prototype,a,b;for(a in c){b=c[a];if(b&&b["Ext.app.getter"]){b.call(this)}}},doInit:function(b){var a=this;if(!a._initialized){a.init(b);a._initialized=true}},finishInit:function(a){var f=this,g=f.controllers,c,d,b;if(f._initialized&&g&&g.length){for(d=0,b=g.length;d<b;d++){c=f.getController(g[d]);c.finishInit(a)}}},init:Ext.emptyFn,onLaunch:Ext.emptyFn,activate:function(){this.setActive(true)},deactivate:function(){this.setActive(false)},isActive:function(){return this.getActive()},ref:function(a){var g=this,b=0,f=a.length,h,d,c;a=Ext.Array.from(a);g.references=g.references||[];for(;b<f;b++){h=a[b];d=h.ref;c="get"+Ext.String.capitalize(d);if(!g[c]){g[c]=Ext.Function.pass(g.getRef,[d,h],g)}g.references.push(d.toLowerCase())}},addRef:function(a){this.ref(a)},getRef:function(f,a,b){var d=this,g=d.refCache||(d.refCache={}),c=g[f];a=a||{};b=b||{};Ext.apply(a,b);if(a.forceCreate){return Ext.ComponentManager.create(a,"component")}if(!c){if(a.selector){g[f]=c=Ext.ComponentQuery.query(a.selector)[0]}if(!c&&a.autoCreate){g[f]=c=Ext.ComponentManager.create(a,"component")}if(c){c.on("beforedestroy",function(){g[f]=null})}}return c},hasRef:function(b){var a=this.references;return a&&Ext.Array.indexOf(a,b.toLowerCase())!==-1},getController:function(b){var a=this.getApplication();if(b===this.getId()){return this}return a&&a.getController(b)},getStore:function(a){var b,c;b=(a.indexOf("@")===-1)?a:a.split("@")[0];c=Ext.StoreManager.get(b);if(!c){a=Ext.app.Controller.getFullName(a,"store",this.$namespace);if(a){c=Ext.create(a.absoluteName,{id:b})}}return c},getModel:function(a){var c=Ext.app.Controller.getFullName(a,"model",this.$namespace),b=Ext.ClassManager.get(c.absoluteName);if(!b){b=Ext.data.schema.Schema.lookupEntity(a)}return b},getProfile:function(a){a=Ext.app.Controller.getFullName(a,"profile",this.$namespace);return a},getView:function(a){var b=Ext.app.Controller.getFullName(a,"view",this.$namespace);return b&&Ext.ClassManager.get(b.absoluteName)},ensureId:function(){var a=this.getId();if(!a){this.setId(this.getModuleClassName(this.$className,"controller"))}},destroy:function(b,c){var f=this,a=f.application,g,d;if(!c&&a){a.unregister(f)}f.application=null;if(b){g=f.refCache;for(d in g){if(g.hasOwnProperty(d)){Ext.destroy(g[d])}}}Ext.app.BaseController.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.app,"Controller"],0));(Ext.cmd.derive("Ext.app.domain.View",Ext.app.EventDomain,{isInstance:true,constructor:function(a){Ext.app.EventDomain.prototype.constructor.apply(this,arguments);this.controller=a;this.monitoredClasses=[Ext.Component]},match:function(b,c,d){var a=false;if(c==="#"){a=d===b.getController()}else{a=b.is(c)}return a},destroy:function(){this.controller=null;Ext.app.EventDomain.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.app.domain,"View"],0));(Ext.cmd.derive("Ext.app.ViewController",Ext.app.BaseController,{isViewController:true,factoryConfig:{type:"controller"},config:{closeViewAction:"destroy"},view:null,constructor:function(){this.compDomain=new Ext.app.domain.View(this);Ext.app.BaseController.prototype.constructor.apply(this,arguments)},beforeInit:Ext.emptyFn,init:Ext.emptyFn,initViewModel:Ext.emptyFn,destroy:function(){var a=this,b=a.compDomain;if(b){b.unlisten(a);b.destroy()}a.compDomain=a.view=null;Ext.app.BaseController.prototype.destroy.call(this)},closeView:function(){var a=this.getView(),b;if(a){b=this.getCloseViewAction();a[b]()}},control:function(b,c){var a=b;if(Ext.isString(b)){a={};a[b]=c}this.compDomain.listen(a,this)},listen:function(a,b){var c=a.component;if(c){a=Ext.apply({},a);delete a.component;this.control(c)}this.callParent([a,b])},getReferences:function(){var a=this.view;return a&&a.getReferences()},getView:function(){return this.view},lookup:function(b){var a=this.view;return a&&a.lookup(b)},lookupReference:function(a){return this.lookup(a)},getSession:function(){var a=this.view;return a&&a.lookupSession()},getViewModel:function(){var a=this.view;return a&&a.lookupViewModel()},getStore:function(b){var a=this.getViewModel();return a?a.getStore(b):null},fireViewEvent:function(a,d){var f=this.view,c=false,b=arguments;if(f){if(f!==d){b=Ext.Array.slice(b);b.splice(1,0,f)}c=f.fireEvent.apply(f,b)}return c},privates:{view:null,ensureId:function(){var a=this.getId();if(!a){this.setId(Ext.id(null,"controller-"))}},attachReference:function(b){var a=this.view;if(a){a.attachReference(b)}},clearReference:function(b){var a=this.view;if(a){a.clearReference(b)}},clearReferences:function(){var a=this.view;if(a){a.clearReferences()}},setView:function(a){this.view=a;if(!this.beforeInit.$nullFn){this.beforeInit(a)}}}},1,0,0,0,0,[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.app,"ViewController"],0));(Ext.cmd.derive("Ext.util.Bag",Ext.Base,{isBag:true,constructor:function(){this.items=[];this.map={}},generation:0,length:0,add:function(f){var d=this,h=d.getKey(f),g=d.map,c=d.items,a=g[h],b;if(a===undefined){c.push(f);g[h]=d.length++;b=f}else{b=c[a];c[a]=f}++d.generation;return b},clear:function(){var a=this,c=a.generation||a.length,b=c?a.items:[];if(c){a.items=[];a.length=0;a.map={};++a.generation}return b},clone:function(){var a=this,c=new a.self(),b=a.length;if(b){Ext.apply(c.map,a.map);c.items=a.items.slice();c.length=a.length}return c},contains:function(a){var c=false,b=this.map,d;if(a!=null){d=this.getKey(a);if(d in b){c=this.items[b[d]]===a}}return c},containsKey:function(a){return a in this.map},destroy:function(){this.items=this.map=null;this.callParent()},getAt:function(b){var a=null;if(b<this.length){a=this.items[b]}return a},getByKey:function(c){var a=this.map,b=null;if(c in a){b=this.items[a[c]]}return b},getCount:function(){return this.length},getKey:function(a){return a.id||a.getId()},remove:function(f){var d=this,g=d.map,b=d.items,a=null,j,h,c;if(d.length){j=g[h=d.getKey(f)];if(j!==undefined){delete g[h];a=b[j];c=b.pop();if(j<--d.length){b[j]=c;g[d.getKey(c)]=j}++d.generation}}return a},removeByKey:function(a){var b=this.getByKey(a);if(b){this.remove(b)}return b||null},sort:function(d){var a=this,c=a.items,b=c.length,f;if(b){Ext.Array.sort(c,d);a.map={};while(b-->0){f=c[b];a.map[a.getKey(f)]=b}++a.generation}}},1,0,0,0,0,0,[Ext.util,"Bag"],0));(Ext.cmd.derive("Ext.util.Scheduler",Ext.Base,{busyCounter:0,lastBusyCounter:0,destroyed:false,firing:null,notifyIndex:-1,nextId:0,orderedItems:null,passes:0,scheduledCount:0,validIdRe:null,config:{cycleLimit:5,preSort:null,tickDelay:5},suspendOnNotify:true,constructor:function(a){this.mixins.observable.constructor.call(this,a);this.items=new Ext.util.Bag()},destroy:function(){var a=this,b=a.timer;if(b){window.clearTimeout(b);a.timer=null}a.items.destroy();a.items=a.orderedItems=null;a.callParent()},add:function(a){var c=this,b=c.items;if(b===c.firing){c.items=b=b.clone()}a.id=a.id||++c.nextId;a.scheduler=c;b.add(a);if(!c.sortMap){c.orderedItems=null}},remove:function(a){var c=this,b=c.items;if(c.destroyed){return}if(b===c.firing){c.items=b=b.clone()}if(a.scheduled){c.unscheduleItem(a);a.scheduled=false}b.remove(a);c.orderedItems=null},sort:function(){var f=this,b=f.items,g={},a=f.getPreSort(),c,d;f.orderedItems=[];f.sortMap=g;if(a){b.sort(a)}b=b.items;for(c=0;c<b.length;++c){d=b[c];if(!g[d.id]){f.sortItem(d)}}f.sortMap=null},sortItem:function(f){var d=this,a=d.sortMap,c=d.orderedItems,b;if(!f.scheduler){d.add(f)}b=f.id;if(!(b in a)){a[b]=0;if(!f.sort.$nullFn){f.sort()}a[b]=1;f.order=d.orderedItems.length;c.push(f)}return d},sortItems:function(b){var c=this,a=c.sortItem;if(b){if(b instanceof Array){Ext.each(b,a,c)}else{Ext.Object.eachValue(b,a,c)}}return c},applyPreSort:function(g){if(typeof g==="function"){return g}var f=g.split(","),d=[],b=f.length,h,a,j;for(a=0;a<b;++a){d[a]=1;j=f[a];if((h=j.charAt(0))==="-"){d[a]=-1}else{if(h!=="+"){h=0}}if(h){f[a]=j.substring(1)}}return function(o,c){var m=0,p,s,r,q;for(p=0;!m&&p<b;++p){s=f[p];r=o[s];q=c[s];m=d[p]*((r<q)?-1:((q<r)?1:0))}return m}},notify:function(){var p=this,d=p.timer,g=p.getCycleLimit(),f=Ext.GlobalEvents,m=p.suspendOnNotify,b,h,a,o,j,c;if(d){window.clearTimeout(d);p.timer=null}if(m){Ext.suspendLayouts()}while(p.scheduledCount){if(g){--g}else{p.firing=null;break}if(!c){c=true;if(f.hasListeners.beforebindnotify){f.fireEvent("beforebindnotify",p)}}++p.passes;if(!(j=p.orderedItems)){p.sort();j=p.orderedItems}o=j.length;if(o){p.firing=p.items;for(h=0;h<o;++h){a=j[h];if(a.scheduled){a.scheduled=false;--p.scheduledCount;p.notifyIndex=h;a.react();if(!p.scheduledCount){break}}}}}p.firing=null;p.notifyIndex=-1;if(m){Ext.resumeLayouts(true)}if((b=p.busyCounter)!==p.lastBusyCounter){if(!(p.lastBusyCounter=b)){p.fireEvent("idle",p)}}},onTick:function(){this.timer=null;this.notify()},scheduleItem:function(b){var a=this;++a.scheduledCount;if(!a.timer&&!a.firing){a.scheduleTick()}},scheduleTick:function(){var a=this;if(!a.destroyed&&!a.timer){a.timer=Ext.Function.defer(a.onTick,a.getTickDelay(),a)}},unscheduleItem:function(a){if(this.scheduledCount){--this.scheduledCount}},adjustBusy:function(b){var c=this,a=c.busyCounter+b;c.busyCounter=a;if(a){if(!c.lastBusyCounter){c.lastBusyCounter=a;c.fireEvent("busy",c)}}else{if(c.lastBusyCounter&&!c.timer){c.scheduleTick()}}},isBusy:function(){return !this.isIdle()},isIdle:function(){return !(this.busyCounter+this.lastBusyCounter)}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.util,"Scheduler"],0));(Ext.cmd.derive("Ext.data.Batch",Ext.Base,{config:{pauseOnException:false},current:-1,total:0,running:false,complete:false,exception:false,constructor:function(a){var b=this;b.mixins.observable.constructor.call(b,a);b.operations=[];b.exceptions=[]},add:function(d){var b=this,a,c;if(Ext.isArray(d)){for(a=0,c=d.length;a<c;++a){b.add(d[a])}}else{b.total++;d.setBatch(b);b.operations.push(d)}return b},sort:function(){this.operations.sort(this.sortFn)},sortFn:function(d,b){var c=d.order-b.order;if(c){return c}var a=d.entityType,f=b.entityType,g;if(!a||!f){return 0}if(!(g=a.rank)){a.schema.rankEntities();g=a.rank}return(g-f.rank)*d.foreignKeyDirection},start:function(a){var b=this;if(!b.operations.length||b.running){return b}b.exceptions.length=0;b.exception=false;b.running=true;return b.runOperation(Ext.isDefined(a)?a:b.current+1)},retry:function(){return this.start(this.current)},runNextOperation:function(){var a=this;if(a.running){a.runOperation(a.current+1)}return a},pause:function(){this.running=false;return this},getOperations:function(){return this.operations},getExceptions:function(){return this.exceptions},getCurrent:function(){var a=null,b=this.current;if(!(b===-1||this.complete)){a=this.operations[b]}return a},getTotal:function(){return this.total},isRunning:function(){return this.running},isComplete:function(){return this.complete},hasException:function(){return this.exception},runOperation:function(a){var b=this,d=b.operations,c=d[a];if(c===undefined){b.running=false;b.complete=true;b.fireEvent("complete",b,d[d.length-1])}else{b.current=a;c.setInternalCallback(b.onOperationComplete);c.setInternalScope(b);c.execute()}return b},onOperationComplete:function(b){var a=this,c=b.hasException();if(c){a.exception=true;a.exceptions.push(b);a.fireEvent("exception",a,b)}if(c&&a.getPauseOnException()){a.pause()}else{a.fireEvent("operationcomplete",a,b);a.runNextOperation()}}},1,0,0,0,0,[["observable",Ext.mixin.Observable]],[Ext.data,"Batch"],0));(Ext.cmd.derive("Ext.data.matrix.Slice",Ext.Base,{constructor:function(a,b){this.id=b;this.side=a;this.members={}},attach:function(a){var b=this;b.store=a;a.matrix=b;a.on("load",b.onStoreLoad,b,{single:true})},commit:function(){var a=this.members,b;for(b in a){a[b][2]=0}},onStoreLoad:function(a){this.update(a.getData().items,0)},update:function(s,g){var m=this,o=Ext.data.matrix.Slice,c=m.side,p=c.index,f=s.length,r=m.id,h=m.members,b=c.inverse,w=b.slices,j,u,t,v,a,q,d;for(t=0;t<f;++t){u=d=null;v=s[t];a=v.isEntity?(d=v).id:v;j=h[a];if(g<0&&j&&j[2]===1){delete h[a];q=w[a];if(q){delete q.members[r]}u=1}else{if(!j){j=[a,a,g];j[p]=r;h[a]=j;q=w[a];if(!q){w[a]=q=new o(b,a)}q.members[r]=j;u=1}else{if(g!==j[2]&&g!==0){j[2]=g;q=w[a];u=1}}}if(u){if(m.notify){m.notify.call(m.scope,m,a,g)}if(q&&q.notify){q.notify.call(q.scope,q,r,g)}}}},updateId:function(c){var o=this,a=o.id,m=o.side,b=m.slices,q=b[a],d=q.members,h=m.index,f=m.inverse.slices,j,g,p;o.id=c;b[c]=q;delete b[a];for(g in d){j=d[g];j[h]=c;p=f[g].members;p[c]=p[a];delete p[a]}},destroy:function(){var b=this,a=b.store;if(a){a.matrix=null;a.un("load",b.onStoreLoad,b)}b.notify=b.scope=b.store=b.side=b.members=null;b.callParent()}},1,0,0,0,0,0,[Ext.data.matrix,"Slice"],0));(Ext.cmd.derive("Ext.data.matrix.Side",Ext.Base,{constructor:function(c,d,b){var a=this;a.matrix=c;a.index=d;a.role=b;a.slices={}},commit:function(){var a=this.slices,b;for(b in a){a[b].commit()}},get:function(d,c){var f=this,b=f.slices,a=b[d]||(b[d]=new Ext.data.matrix.Slice(f,d));return(c||c===0)?a.members[c]:a},update:function(d,c,a){var b=this.get(d);return b.update(c,a)},updateId:function(a,b){var c=this.get(a);if(c){c.updateId(b)}},destroy:function(){var b=this,c=b.slices,a;for(a in c){c[a].destroy()}b.inverse=b.matrix=b.role=b.slices=null;b.callParent()}},1,0,0,0,0,0,[Ext.data.matrix,"Side"],0));(Ext.cmd.derive("Ext.data.matrix.Matrix",Ext.Base,{constructor:function(h,c){var f=this,b=c.isManyToMany?c:h.getSchema().getAssociation(c),a=Ext.data.matrix.Side,g=new a(f,0,b.left),d=new a(f,1,b.right);f.association=b;f.session=h;f.left=g;f.right=d;g.inverse=d;d.inverse=g},commit:function(){this.left.commit();this.right.commit()},update:function(c,b,a){return this.left.update(c,b,a)},updateId:function(a,h,c){var b=a.self,g=this.left,d=this.right,f;if(b===g.role.cls){f=g}if(b===d.role.cls){f=d}if(f){f.updateId(h,c)}},destroy:function(){var a=this;a.left.destroy();a.right.destroy();a.association=a.session=a.left=a.right=null;a.callParent()}},1,0,0,0,0,0,[Ext.data.matrix,"Matrix"],0));(Ext.cmd.derive("Ext.data.session.ChangesVisitor",Ext.Base,{constructor:function(a){var b=this,c;b.session=a;c=a.getCrudProperties();b.result=null;b.writerOptions={};b.createKey=c.create;b.readKey=c.read;b.updateKey=c.update;b.dropKey=c.drop},onDirtyRecord:function(c){var g=this,p=g.crud,b=c.phantom,s=c.dropped,d=!b&&!s,h=c.$className,r=(b||s)?"allDataOptions":"partialDataOptions",f=g.writerOptions,o=c.entityName,m,a,j,q;if(b&&s){return false}p=b?g.createKey:(s?g.dropKey:g.updateKey);f=f[h]||(f[h]={});if(s){if(!(m=f.drop)){f.drop=m={all:c.getProxy().getWriter().getWriteAllFields()}}if(!m.all){j=c.id}}if(!j){if(!(m=f[r])){m=c.getProxy().getWriter().getConfig(r);f[r]=m=Ext.Object.chain(m);g.setupOptions(m)}j=c.getData(m)}q=g.result||(g.result={});a=q[o]||(q[o]={});a=a[p]||(a[p]=[]);a.push(j)},setupOptions:function(a){a.serialize=true},onMatrixChange:function(h,b,a,d){var o=this,f=h.left.type,m=h.right.role,j=d<0?o.dropKey:o.createKey,g,c;c=o.result||(o.result={});g=c[f]||(c[f]={});g=g[m]||(g[m]={});g=g[j]||(g[j]={});g=g[b]||(g[b]=[]);g.push(a)}},1,0,0,0,0,0,[Ext.data.session,"ChangesVisitor"],0));(Ext.cmd.derive("Ext.data.session.ChildChangesVisitor",Ext.data.session.ChangesVisitor,{constructor:function(){this.seen={};Ext.data.session.ChangesVisitor.prototype.constructor.apply(this,arguments)},setupOptions:function(a){Ext.data.session.ChangesVisitor.prototype.setupOptions.call(this,a);a.serialize=false},onDirtyRecord:function(a){if(Ext.data.session.ChangesVisitor.prototype.onDirtyRecord.apply(this,arguments)!==false){if(!a.$source&&(a.dropped||!a.phantom)){this.readEntity(a)}}},readEntity:function(a){var b=this,m=b.readKey,g=a.entityName,h=a.id,f=b.seen,c=g+h,d,j;if(f[c]){return}f[c]=true;d=b.result||(b.result={});j=d[g]||(d[g]={});j=j[m]||(j[m]=[]);j.push(Ext.apply({},a.modified,a.data))}},1,0,0,0,0,0,[Ext.data.session,"ChildChangesVisitor"],0));(Ext.cmd.derive("Ext.data.session.BatchVisitor",Ext.Base,{map:null,constructor:function(a){this.batch=a},getBatch:function(f){var g=this.map,c=this.batch,h,a,b,j,d;if(g){if(!c){c=new Ext.data.Batch()}for(b in g){h=g[b];a=h.entity;d=a.getProxy();delete h.entity;for(j in h){j=d.createOperation(j,{records:h[j]});j.entityType=a;c.add(j)}}}if(c&&f!==false){c.sort()}return c},onDirtyRecord:function(b){var f=this,c=b.phantom?"create":(b.dropped?"destroy":"update"),d=b.$className,g=(f.map||(f.map={})),a=(g[d]||(g[d]={entity:b.self}));a=a[c]||(a[c]=[]);a.push(b)}},1,0,0,0,0,0,[Ext.data.session,"BatchVisitor"],0));(Ext.cmd.derive("Ext.data.Session",Ext.Base,{isSession:true,config:{schema:"default",parent:null,autoDestroy:true,crudProperties:{create:"C",read:"R",update:"U",drop:"D"}},destroyed:false,crudOperations:[{type:"R",entityMethod:"readEntities"},{type:"C",entityMethod:"createEntities"},{type:"U",entityMethod:"updateEntities"},{type:"D",entityMethod:"dropEntities"}],crudKeys:{C:1,R:1,U:1,D:1},constructor:function(a){var b=this;b.data={};b.matrices={};b.identifierCache={};b.recordCreator=b.recordCreator.bind(b);b.initConfig(a)},destroy:function(){var d=this,b=d.matrices,f=d.data,c,g,a,h;for(h in b){b[h].destroy()}for(c in f){g=f[c];for(h in g){a=g[h].record;if(a){a.$source=a.session=null}}}d.recordCreator=d.matrices=d.data=null;d.setSchema(null);d.callParent()},adopt:function(d){var b=this,a=d.associations,c;if(d.session!==b){d.session=b;b.add(d);if(a){for(c in a){a[c].adoptAssociated(d,b)}}}},commit:function(){var f=this.data,c=this.matrices,d,g,a,b;for(d in f){g=f[d];for(a in g){b=g[a].record;if(b){b.commit()}}}for(a in c){c[a].commit()}},createRecord:function(d,f){var a=d.$isClass?d:this.getSchema().getEntity(d),c=this.getParent(),b;if(f&&c){b=a.getIdFromData(f);if(c.peekRecord(a,b)){Ext.raise("A parent session already contains an entry for "+a.entityName+": "+b)}}return new a(f,this)},getChanges:function(){var a=new Ext.data.session.ChangesVisitor(this);this.visitData(a);return a.result},getChangesForParent:function(){var a=new Ext.data.session.ChildChangesVisitor(this);this.visitData(a);return a.result},getRecord:function(c,f,h){var b=this,g=c.isModel,a,j,d,m;if(g){g=c;f=c.id;c=c.self}a=b.peekRecord(c,f);if(!a){j=c.$isClass?c:b.getSchema().getEntity(c);d=b.getParent();if(d){m=d.peekRecord(j,f)}if(m){if(m.isLoading()){g=false}else{a=m.copy(undefined,b);a.$source=m}}if(!a){if(g){a=g;b.adopt(a)}else{a=j.createWithId(f,null,b);if(h!==false){a.load(Ext.isObject(h)?h:undefined)}}}}return a},getSaveBatch:function(a){var b=new Ext.data.session.BatchVisitor();this.visitData(b);return b.getBatch(a)},onInvalidAssociationEntity:function(a,b){Ext.raise("Unable to read association entity: "+this.getModelIdentifier(a,b))},onInvalidEntityCreate:function(a,b){Ext.raise("Cannot create, record already not exists: "+this.getModelIdentifier(a,b))},onInvalidEntityDrop:function(a,b){Ext.raise("Cannot drop, record does not exist: "+this.getModelIdentifier(a,b))},onInvalidEntityRead:function(a,b){Ext.raise("Cannot read, record already not exists: "+this.getModelIdentifier(a,b))},onInvalidEntityUpdate:function(b,a,c){if(c){Ext.raise("Cannot update, record dropped: "+this.getModelIdentifier(b,a))}else{Ext.raise("Cannot update, record does not exist: "+this.getModelIdentifier(b,a))}},peekRecord:function(d,h,j){var g=d.$isClass?d:this.getSchema().getEntity(d),b=g.entityName,f=this.data[b],a,c;f=f&&f[h];a=f&&f.record;if(!a&&j){c=this.getParent();a=c&&c.peekRecord(d,h,j)}return a||null},save:function(){var a=new Ext.data.session.ChildChangesVisitor(this);this.visitData(a);this.getParent().update(a.result)},spawn:function(){return new this.self({schema:this.getSchema(),parent:this})},update:function(d){var j=this,u=j.getSchema(),o=j.crudOperations,g=o.length,p=j.crudKeys,r,a,h,c,t,m,s,f,b,q;j.getSchema().processKeyChecks(true);for(r in d){a=u.getEntity(r);h=d[r];for(c=0;c<g;++c){t=o[c];m=h[t.type];if(m){j[t.entityMethod](a,m)}}}for(r in d){a=u.getEntity(r);s=a.associations;h=d[r];for(f in h){if(p[f]){continue}b=s[f];q=h[b.role];b.processUpdate(j,q)}}},privates:{add:function(c){var g=this,a=c.id,f=g.getEntry(c.self,a),d,b;f.record=c;g.registerReferences(c);d=c.associations;for(b in d){d[b].checkMembership(g,c)}},afterErase:function(a){this.evict(a)},applySchema:function(a){return Ext.data.schema.Schema.get(a)},createEntities:function(d,b){var a=b.length,c,f,g,h;for(c=0;c<a;++c){f=b[c];h=d.getIdFromData(f);g=this.peekRecord(d,h);if(!g){g=this.createRecord(d,f)}else{this.onInvalidEntityCreate(d,h)}g.phantom=true}},dropEntities:function(f,d){var b=d.length,c,g,h,a;if(b){a=Ext.isObject(d[0])}for(c=0;c<b;++c){h=d[c];if(a){h=f.getIdFromData(h)}g=this.peekRecord(f,h);if(g){g.drop()}else{this.onInvalidEntityDrop(f,h)}}},evict:function(c){var d=c.entityName,a=this.data[d],b=c.id,f;if(a){delete a[b]}},getEntityList:function(d,c){var a=c.length,b,h,g,f;for(b=0;b<a;++b){h=c[b];g=this.peekRecord(d,h);if(g){c[b]=g}else{f=true;c[b]=null;this.onInvalidAssociationEntity(d,h)}}if(f){c=Ext.Array.clean(c)}return c},getEntry:function(c,a){if(c.isModel){a=c.getId();c=c.self}var f=c.$isClass?c:this.getSchema().getEntity(c),b=f.entityName,g=this.data,d;d=g[b]||(g[b]={});d=d[a]||(d[a]={});return d},getRefs:function(j,h,c){var a=this.getEntry(j),m=a&&a.refs&&a.refs[h.role],b=c&&this.getParent(),d,f,g;if(b){d=b.getRefs(j,h);if(d){for(f in d){g=d[f];if((!m||!m[f])){this.getRecord(g.self,g.id)}}m=a&&a.refs&&a.refs[h.role]}}return m||null},getIdentifier:function(a){var g=this.getParent(),b,d,f,c;if(g){c=g.getIdentifier(a)}else{b=this.identifierCache;d=a.identifier;f=d.id||a.entityName;c=b[f];if(!c){if(d.clone){c=d.clone({cache:b})}else{c=d}b[f]=c}}return c},getMatrix:function(c,b){var a=c.isManyToMany?c.name:c,f=this.matrices,d;d=f[a];if(!d&&!b){d=f[a]=new Ext.data.matrix.Matrix(this,c)}return d||null},getMatrixSlice:function(b,a){var c=this.getMatrix(b.association),d=c[b.side];return d.get(a)},getModelIdentifier:function(a,b){return b+"@"+a.entityName},onIdChanged:function(g,q,j){var v=this,b=v.matrices,m=g.entityName,r=g.id,z=v.data[m],c=z[q],u=g.associations,d=c.refs,a=v._setNoRefs,h,f,t,o,y,p,s,w;delete z[q];z[j]=c;for(w in b){b[w].updateId(g,q,j)}if(d){for(p in d){s=d[p];y=u[p];h=y.association;if(!h.isManyToMany){f=h.field.name;for(o in s){s[o].set(f,r,a)}}}}v.registerReferences(g,q)},processManyBlock:function(j,m,b,g){var c=this,f,a,h,d;if(b){for(f in b){a=c.peekRecord(j,f);if(a){h=c.getEntityList(m.cls,b[f]);d=m.getAssociatedItem(a);c[g](m,d,a,h)}else{c.onInvalidAssociationEntity(j,f)}}}},processManyCreate:function(b,a,c,d){if(a){a.add(d)}else{c[b.getterName](null,null,d)}},processManyDrop:function(b,a,c,d){if(a){a.remove(d)}},processManyRead:function(b,a,c,d){if(a){a.setRecords(d)}else{c[b.getterName](null,null,d)}},readEntities:function(d,b){var a=b.length,c,f,g,h;for(c=0;c<a;++c){f=b[c];h=d.getIdFromData(f);g=this.peekRecord(d,h);if(!g){g=this.createRecord(d,f)}else{this.onInvalidEntityRead(d,h)}g.phantom=false}},recordCreator:function(f,a){var d=this,b=a.getIdFromData(f),c=d.peekRecord(a,b,true);if(!c){c=new a(f,d)}else{c=d.getRecord(a,b)}return c},registerReferences:function(f,s){var m=f.entityName,r=f.id,o=f.data,d=s||s===0,p,c,j,g,a,q,h,b;g=(q=f.references).length;for(c=0;c<g;++c){a=q[c];j=o[a.name];if(j||j===0){a=a.reference;m=a.type;b=a.inverse.role;p=this.getEntry(a.cls,j);h=p.refs||(p.refs={});h=h[b]||(h[b]={});h[r]=f;if(d){delete h[s]}}}},updateEntities:function(d,a){var j=a.length,c,f,g,h,b;if(Ext.isArray(a)){for(c=0;c<j;++c){f=a[c];h=d.getIdFromData(f);g=this.peekRecord(d,h);if(g){g.set(f)}else{this.onInvalidEntityUpdate(d,h)}}}else{for(h in a){f=a[h];g=this.peekRecord(d,h);if(g&&!g.dropped){b=g.set(f)}else{this.onInvalidEntityUpdate(d,h,!!g)}}}},updateReference:function(m,a,g,d){var h=a.reference,b=h.type,j=h.inverse.role,f=m.id,c,o;if(d||d===0){o=this.getEntry(b,d).refs[j];delete o[f]}if(g||g===0){c=this.getEntry(b,g);o=c.refs||(c.refs={});o=o[j]||(o[j]={});o[f]=m}},visitData:function(c){var f=this,a=f.data,r=f.matrices,p,d,s,m,g,t,q,b,j,h,o;f.getSchema().processKeyChecks(true);for(q in a){p=a[q];for(s in p){b=p[s].record;if(b){if(b.phantom||b.dirty||b.dropped){if(c.onDirtyRecord){c.onDirtyRecord(b)}}else{if(c.onCleanRecord){c.onCleanRecord(b)}}}}}if(c.onMatrixChange){for(q in r){g=r[q].left;h=g.slices;d=g.role.association;for(s in h){j=h[s];t=j.members;for(m in t){o=(b=t[m])[2];if(o){c.onMatrixChange(d,b[0],b[1],o)}}}}}return c},_setNoRefs:{refs:false}}},1,0,0,0,0,0,[Ext.data,"Session"],0));(Ext.cmd.derive("Ext.util.Schedulable",Ext.Base,{"abstract":true,isSchedulable:true,scheduled:false,constructor:function(){this.getScheduler().add(this)},destroy:function(){var b=this,a=b.getScheduler();if(a){a.remove(b)}b.scheduler=null;b.schedule=b.react=Ext.emptyFn;b.callParent()},getFullName:function(){return this.name||this.id},privates:{getScheduler:function(){return this.scheduler},schedule:function(){var b=this,a;if(!b.scheduled){a=b.getScheduler();if(a){b.scheduled=true;if(b.onSchedule){b.onSchedule()}a.scheduleItem(b)}}},unschedule:function(){var b=this,a;if(b.scheduled){a=b.getScheduler();if(a){a.unscheduleItem(b)}b.scheduled=false}},sort:function(){}}},1,0,0,0,0,0,[Ext.util,"Schedulable"],0));(Ext.cmd.derive("Ext.app.bind.BaseBinding",Ext.util.Schedulable,{calls:0,kind:20,defaultOptions:{},lastValue:undefined,constructor:function(c,b,f,d){var a=this;a.options=d;a.owner=c;a.scope=f;a.callback=b;a.lateBound=Ext.isString(b);if(d&&d.deep){a.deep=true}Ext.util.Schedulable.prototype.constructor.call(this)},destroy:function(){var b=this,a=b.owner;Ext.util.Schedulable.prototype.destroy.call(this);if(a){a.onBindDestroy(b)}b.scope=b.callback=b.owner=null},isReadOnly:function(){return true},privates:{getScheduler:function(){var a=this.owner;return a&&a.getScheduler()},getSession:function(){var a=this.owner;return a.isSession?a:a.getSession()},notify:function(b){var a=this,c=a.options||a.defaultOptions,d=a.lastValue;if(!a.calls||a.deep||d!==b||Ext.isArray(b)){++a.calls;a.lastValue=b;if(a.lateBound){a.scope[a.callback](b,d,a)}else{a.callback.call(a.scope,b,d,a)}if(c.single){a.destroy()}}}}},1,0,0,0,0,0,[Ext.app.bind,"BaseBinding"],0));(Ext.cmd.derive("Ext.app.bind.Binding",Ext.app.bind.BaseBinding,{constructor:function(a,b,d,c){var f=this;Ext.app.bind.BaseBinding.prototype.constructor.call(this,a.owner,b,d,c);f.stub=a;f.depth=a.depth;if(!a.isLoading()&&!a.scheduled){f.schedule()}},destroy:function(a){var b=this,c=b.stub;if(c&&!a){c.unbind(b);b.stub=null}Ext.app.bind.BaseBinding.prototype.destroy.call(this)},bindValidation:function(a,b){var c=this.stub;return c&&c.bindValidation(a,b)},bindValidationField:function(a,b){var c=this.stub;return c&&c.bindValidationField(a,b)},getFullName:function(){return this.fullName||(this.fullName="@("+this.stub.getFullName()+")")},getValue:function(){var c=this,a=c.stub,b=a&&a.getValue();if(c.transform){b=c.transform(b)}return b},isLoading:function(){var a=this.stub;return a&&a.isLoading()},isReadOnly:function(){var b=this.stub,a=this.options;if(!(a&&a.twoWay===false)){if(b){return b.isReadOnly()}}return true},refresh:function(){},setValue:function(a){this.stub.set(a)},privates:{getDataObject:function(){var a=this.stub;return a&&a.getDataObject()},getRawValue:function(){var c=this,a=c.stub,b=a&&a.getRawValue();if(c.transform){b=c.transform(b)}return b},isDescendantOf:function(a){var b=this.stub;return b?(a===b)||b.isDescendantOf(a):false},react:function(){this.notify(this.getValue())},schedule:function(){if(!this.stub.scheduled){Ext.app.bind.BaseBinding.prototype.schedule.call(this)}},sort:function(){var a=this.stub;a.scheduler.sortItem(a)}}},1,0,0,0,0,0,[Ext.app.bind,"Binding"],0));(Ext.cmd.derive("Ext.app.bind.AbstractStub",Ext.util.Schedulable,{children:null,depth:0,generation:1,kind:10,parent:null,constructor:function(b,c){var a=this;a.owner=b;a.name=c;Ext.util.Schedulable.prototype.constructor.call(this)},destroy:function(){var g=this,f=g.children,a=g.bindings,b,d,c;if(a){for(d=0,b=a.length;d<b;++d){a[d].destroy(true)}}for(c in f){f[c].destroy()}Ext.util.Schedulable.prototype.destroy.call(this);g.bindings=g.children=g.owner=null},add:function(b){var a=this;(a.children||(a.children={}))[b.name]=b;b.depth=a.depth+1;b.parent=a},getChild:function(b){var a=Ext.isString(b)?b.split("."):b;if(a&&a.length){return this.descend(a,0)}return this},getFullName:function(){var b=this,c=b.fullName,a=b.parent,d;if(!c){c=b.name||b.id;if(a&&(d=a.getFullName())){c=((d.charAt(d.length-1)!==":")?d+".":d)+c}b.fullName=c}return c},getSession:function(){var a=this.owner;return a.isSession?a:a.getSession()},bind:function(a,c,b){var d=this,f=new Ext.app.bind.Binding(d,a,c,b),g=(d.bindings||(d.bindings=[]));f.depth=d.depth;g.push(f);return f},getValue:function(){return this.isLoading()?null:this.getRawValue()},graft:function(f){var a=this,b=a.bindings,c=a.name,d;a.parent=a.bindings=null;a.destroy();f.depth=a.depth;f.bindings=b;f.generation=a.generation+1;f.name=c;f.id=a.id;f.path=a.path;if(b){for(d=b.length;d-->0;){b[d].stub=f}}return f},isDescendantOf:function(b){for(var a=this;a=a.parent;){if(a===b){return true}}return false},onSchedule:function(){for(var d,c,a,b,f=this.parent;f;f=f.parent){b=f.bindings;if(b){for(d=0,c=b.length;d<c;++d){a=b[d];if(a.deep&&!a.scheduled){a.schedule()}}}}},react:function(){var b=this.bindings,a,d,c;if(b){for(d=0,c=b.length;d<c;++d){a=b[d];if(!a.scheduled){a.schedule()}}}},unbind:function(a){var b=this.bindings;if(b&&b.length){Ext.Array.remove(b,a)}},privates:{collect:function(){var d=this.children,a=this.bindings,b=0,f=0,g,c;if(d){for(c in d){g=d[c];f=g.collect();if(f===0){g.destroy();delete d[c]}b+=f}}if(a){b+=a.length}return b},getScheduler:function(){var a=this.owner;return a&&a.getScheduler()},sort:function(){var a=this.parent;if(a){this.scheduler.sortItem(a)}}}},1,0,0,0,0,0,[Ext.app.bind,"AbstractStub"],0));(Ext.cmd.derive("Ext.app.bind.Stub",Ext.app.bind.AbstractStub,{isStub:true,dirty:true,formula:null,validationKey:"validation",statics:{trackHadValue:function(d,j,g,f){var b=f&&f.children,h,a,c;c=d!==undefined;if(!j.hadValue[g]){j.hadValue[g]=c}if(f){f.hadValue=c}if(d&&(d.constructor===Object||d.isModel)){if(d.isModel){d=d.data}for(a in d){Ext.app.bind.Stub.trackHadValue(d[a],j,g+"."+a,b&&b[a])}}}},constructor:function(c,d,f){var a=this,b=d;Ext.app.bind.AbstractStub.prototype.constructor.call(this,c,d);a.boundValue=null;if(f){f.add(a);if(!f.isRootStub){b=f.path+"."+d}}a.hadValue=c.hadValue[b];a.path=b},destroy:function(){var a=this,b=a.formula,c=a.parent,d=a.storeBinding;if(b){b.destroy()}if(d){d.destroy()}a.detachBound();a.parentValue=a.formula=a.storeBinding=null;Ext.app.bind.AbstractStub.prototype.destroy.call(this)},bindValidation:function(a,c){var b=this.parent;return b&&b.descend([this.validationKey,this.name]).bind(a,c)},bindValidationField:function(a,f){var d=this.parent,c=this.name,g=typeof a==="string",b;if(d){b=d.bind(function(h){var j=null;if(h&&h.isModel){j=h.getField(c)}if(g){f[a](j,null,this)}else{a.call(f,j,null,this)}})}return b||null},descend:function(g,c){var f=this,d=f.children||(f.children={}),h=c||0,b=g[h++],a;if(!(a=d[b])){a=new Ext.app.bind.Stub(f.owner,b,f)}if(h<g.length){a=a.descend(g,h)}return a},getChildValue:function(c){var b=this,a=b.name,d;if(!c&&!Ext.isString(c)){d=b.hadValue?null:undefined}else{d=b.inspectValue(c);if(!d){if(c.isEntity){d=c.data[a]}else{d=c[a]}}}return d},getDataObject:function(){var a=this,c=a.parent.getDataObject(),f=a.name,d=c?c[f]:null,g,b;if(!d&&c&&c.isEntity){g=c.associations;if(g&&f in g){d=c[g[f].getterName]()}}if(!d||!(d.$className||Ext.isObject(d))){c[f]=d={};a.hadValue=a.owner.hadValue[a.path]=true;a.invalidate(true,true)}return d},getRawValue:function(){return this.getChildValue(this.getParentValue())},graft:function(g){var a=this,f=a.parent,d=a.children,b=a.name,c;g.parent=f;g.children=d;if(f){f.children[b]=g}if(d){for(c in d){d[c].parent=g}}a.children=null;return Ext.app.bind.AbstractStub.prototype.graft.call(this,g)},isLoading:function(){var d=this,c=d.parent,h=false,b,g,f,a;if(c&&!(h=c.isLoading())){g=d.getParentValue();f=d.inspectValue(g);if(f){h=f.isLoading()}else{if(g&&g.isModel){b=g.associations;if(!(b&&d.name in b)){h=false;a=true}}if(!a){h=!d.hadValue&&d.getRawValue()===undefined}}}return h},invalidate:function(d,c){var b=this,a=b.children,f;b.dirty=true;if(!c&&!b.isLoading()){if(!b.scheduled){b.schedule()}}if(d&&a){for(f in a){a[f].invalidate(d,c)}}},isReadOnly:function(){var a=this.formula;return !!(a&&!a.set)},set:function(c){var b=this,d=b.parent,f=b.name,m=b.formula,a,h,g,j;if(m&&!m.settingValue&&m.set){m.setValue(c);return}else{if(b.isLinkStub){j=b.getLinkFormulaStub();m=j?j.formula:null;if(m){m.setValue(c);return}}}a=d.getDataObject();if(a.isEntity){h=a.associations;if(h&&(f in h)){g=h[f];a[g.setterName](c);b.invalidate(true)}else{a.set(f,c)}}else{if((c&&c.constructor===Object)||c!==a[f]){if(!b.setByLink(c)){if(c===undefined){delete a[f]}else{a[f]=c;Ext.app.bind.Stub.trackHadValue(c,b.owner,b.path,b)}b.inspectValue(a);b.invalidate(true)}}}},onStoreLoad:function(){this.invalidate(true)},afterLoad:function(a){this.invalidate(true)},afterCommit:function(a){this.afterEdit(a,null)},afterEdit:function(b,m){var h=this.children,c=m&&m.length,j=b.associations,d,a,g,f;if(h){if(c){for(a=0;a<c;++a){g=h[m[a]];if(g){g.invalidate()}}}else{for(d in h){if(!(j&&d in j)){h[d].invalidate()}}}}this.invalidate()},afterReject:function(a){this.afterEdit(a,null)},setByLink:function(d){var c=this,h=0,a,b,g,f;for(f=c;f;f=f.parent){if(f.isLinkStub){b=f;if(h){for(g=[],a=0,f=c;f!==b;f=f.parent){++a;g[h-a]=f.name}}break}++h}if(!b||!(f=b.getTargetStub())){return false}if(g){f=f.descend(g)}f.set(d);return true},setFormula:function(a){var b=this,c=b.formula;if(c){c.destroy()}b.formula=new Ext.app.bind.Formula(b,a)},react:function(){var a=this,d=this.boundValue,c=a.children,b;if(d){if(d.isValidation){d.refresh();b=d.generation;if(a.lastValidationGeneration===b){return}a.lastValidationGeneration=b}else{if(d.isModel){if(c&&c[a.validationKey]){d.isValid()}}else{if(d.isStore){if(d.isLoading()&&!d.loadCount){return}}}}}Ext.app.bind.AbstractStub.prototype.react.call(this)},privates:{collect:function(){var a=this,c=Ext.app.bind.AbstractStub.prototype.collect.call(this),d=a.storeBinding?1:0,b=a.formula?1:0;return c+d+b},getLinkFormulaStub:function(){var a=this;while(a.isLinkStub){a=a.binding.stub}return a.formula?a:null},getParentValue:function(){var a=this;if(a.dirty){a.parentValue=a.parent.getValue();a.dirty=false}return a.parentValue},setStore:function(a){this.storeBinding=a},inspectValue:function(b){var c=this,f=c.name,m=c.boundValue,g=null,h,d,j,a;if(b&&b.isEntity){h=b.associations;if(h&&(f in h)){g=b[h[f].getterName]();if(g&&g.isStore){g.$associatedStore=true}}else{if(f===c.validationKey){g=b.getValidation();c.lastValidationGeneration=null}}}else{if(b){d=b[f];if(d&&(d.isModel||d.isStore)){g=d}}}j=m!==g;if(j){if(m){c.detachBound()}if(g){if(g.isModel){g.join(c)}else{a=g.associatedEntity;if(a&&!a.phantom&&!g.complete&&!g.hasPendingLoad()){g.load()}g.on("load",c.onStoreLoad,c,{single:true})}}c.boundValue=g}return g},detachBound:function(){var a=this,b=a.boundValue;if(b){if(b.isModel){b.unjoin(a)}else{b.un("load",a.onStoreLoad,a)}}},sort:function(){var a=this,b=a.formula,c=a.scheduler,d=a.storeBinding;Ext.app.bind.AbstractStub.prototype.sort.call(this);if(d){c.sortItem(d)}if(b){c.sortItem(b)}}}},1,0,0,0,0,0,[Ext.app.bind,"Stub"],0));(Ext.cmd.derive("Ext.app.bind.LinkStub",Ext.app.bind.Stub,{isLinkStub:true,binding:null,destroy:function(){var c=this,a=c.binding,b=c.owner;if(a){c.binding=null;a.destroy();if(b){delete b.linkData[c.name]}}c.target=null;Ext.app.bind.Stub.prototype.destroy.call(this)},getFullName:function(){var a=this;return a.fullName||(a.fullName="("+Ext.app.bind.Stub.prototype.getFullName.call(this)+" -> "+a.binding.getFullName()+")")},getDataObject:function(){var a=this.binding;return a&&a.getDataObject()},getRawValue:function(){var a=this.binding;return a&&a.getRawValue()},getValue:function(){var a=this.binding;return a&&a.getValue()},getTargetStub:function(){var a=this.binding;return a&&a.stub},isLoading:function(){var a=this.binding;return a?a.isLoading():false},link:function(b,d){var c=this,a=c.binding;if(a){a.destroy()}d=c.target=d||c.owner;c.linkDescriptor=b;c.binding=d.bind(b,c.onChange,c);c.binding.deep=true},onChange:function(){this.invalidate(true)},react:function(){var b=this,a=b.owner.linkData;a[b.name]=b.getValue();Ext.app.bind.Stub.prototype.react.call(this)},privates:{collect:function(){var c=this,b=Ext.app.bind.Stub.prototype.collect.call(this),a=c.binding?1:0;return b+a},sort:function(){var a=this.binding;if(a){this.scheduler.sortItem(a)}}}},0,0,0,0,0,0,[Ext.app.bind,"LinkStub"],0));(Ext.cmd.derive("Ext.app.bind.RootStub",Ext.app.bind.AbstractStub,{isRootStub:true,depth:0,createRootChild:function(d,j){var b=this,f=b.owner,m=f.getData(),g=b.children,a=g&&g[d],o=a?null:b,c,h;if(j||m.hasOwnProperty(d)||!(c=f.getParent())){h=new Ext.app.bind.Stub(f,d,o)}else{h=new Ext.app.bind.LinkStub(f,d,a?null:o);h.link("{"+d+"}",c)}if(a){a.graft(h)}return h},createStubChild:function(a){return this.createRootChild(a,true)},descend:function(g,c){var f=this,d=f.children,h=c||0,b=g[h++],a=(d&&d[b])||f.createRootChild(b);if(h<g.length){a=a.descend(g,h)}return a},getFullName:function(){return this.fullName||(this.fullName=this.owner.id+":")},getDataObject:function(){return this.owner.data},getRawValue:function(){return this.owner.data},getValue:function(){return this.owner.data},isDescendantOf:function(){return false},isLoading:function(){return false},set:function(o){var m=this,f=m.children||(m.children={}),d=m.owner,h=d.data,c=d.getParent(),j,g,b,a;for(a in o){if((b=o[a])!==undefined){if(!(g=f[a])){g=new Ext.app.bind.Stub(d,a,m)}else{if(g.isLinkStub){if(!g.getLinkFormulaStub()){j=g;g=new Ext.app.bind.Stub(d,a);j.graft(g)}}}g.set(b)}else{if(h.hasOwnProperty(a)){delete h[a];g=f[a];if(g&&!g.isLinkStub&&c){g=m.createRootChild(a)}g.invalidate(true)}}}},schedule:Ext.emptyFn,unschedule:Ext.emptyFn},0,0,0,0,0,0,[Ext.app.bind,"RootStub"],0));(Ext.cmd.derive("Ext.app.bind.Multi",Ext.app.bind.BaseBinding,{isMultiBinding:true,missing:1,deep:true,constructor:function(f,a,h,c,b){var d=this,g=b&&b.trackStatics;Ext.app.bind.BaseBinding.prototype.constructor.call(this,a,h,c,b);d.bindings=[];d.literal=f.$literal;if(f.constructor===Object){if(g){d.staticKeys=[]}d.addObject(f,d.lastValue={},d.staticKeys)}else{d.addArray(f,d.lastValue=[])}if(!--d.missing&&!d.scheduled){d.schedule()}},destroy:function(){var a=this;a.bindings=Ext.destroy(a.bindings);Ext.app.bind.BaseBinding.prototype.destroy.call(this)},add:function(g,a,d){var c=this,j=c.owner,h=c.bindings,f=c.literal?(g.reference?"bindEntity":"bindExpression"):"bind",b,m;++c.missing;b=j[f](g,function(o){a[d]=o;if(b.calls===1){--c.missing}if(!c.missing&&!c.scheduled){c.schedule()}},c,null);m=b.depth;if(!h.length||m<c.depth){c.depth=m}h.push(b);return !this.isBindingStatic(b)},addArray:function(c,a){var g=this,j=c.length,d=false,h,m,f;for(f=0;f<j;++f){m=c[f];if(m&&(m.reference||Ext.isString(m))){h=g.add(m,a,f)}else{if(Ext.isArray(m)){h=g.addArray(m,a[f]=[])}else{if(m&&m.constructor===Object){h=g.addObject(m,a[f]={})}else{a[f]=m;h=false}}}d=d||h}return d},addObject:function(c,g,j){var h=this,f=false,a,m,d;for(d in c){m=c[d];if(m&&(m.reference||Ext.isString(m))){a=h.add(m,g,d)}else{if(Ext.isArray(m)){a=h.addArray(m,g[d]=[])}else{if(m&&m.constructor===Object){a=h.addObject(m,g[d]={})}else{g[d]=m;a=false}}}if(j&&!a){j.push(d)}f=f||a}return f},getFullName:function(){var f=this,a=f.fullName,b=f.bindings,d=b.length,c;if(!a){a="@[";for(c=0;c<d;++c){if(c){a+=","}a+=b[c].getFullName()}a+="]";f.fullName=a}return a},getRawValue:function(){return this.lastValue},isDescendantOf:function(){return false},isLoading:function(){for(var b=this.bindings,a=b.length;a-->0;){if(b[a].isLoading()){return true}}return false},isBindingStatic:function(a){return a.isTemplateBinding&&a.isStatic},isStatic:function(){var b=this.bindings,c=b.length,d,a;for(d=0;d<c;++d){a=b[d];if(!this.isBindingStatic(a)){return false}}return true},pruneStaticKeys:function(){var b=Ext.apply({},this.lastValue),a=this.staticKeys,c=a.length,d;for(d=0;d<c;++d){delete b[a[d]]}return b},react:function(){this.notify(this.lastValue)},refresh:function(){},privates:{sort:function(){this.scheduler.sortItems(this.bindings)}}},1,0,0,0,0,0,[Ext.app.bind,"Multi"],0));(Ext.cmd.derive("Ext.app.bind.Formula",Ext.util.Schedulable,{statics:{getFormulaParser:function(d){var c=this.formulaCache,b,a;if(!c){c=this.formulaCache=new Ext.util.LruCache({maxSize:20})}b=c.get(d);if(!b){a="[^\\.a-z0-9_]"+d+"\\(\\s*(['\"])(.*?)\\1\\s*\\)";b=new RegExp(a,"gi");c.add(d,b)}return b}},isFormula:true,calculation:null,explicit:false,set:null,single:false,argumentNamesRe:/^function\s*\(\s*([^,\)\s]+)/,constructor:function(g,h){var f=this,a=g.owner,c,d,j,b;f.owner=a;f.stub=g;Ext.util.Schedulable.prototype.constructor.call(this);if(h instanceof Function){f.get=j=h}else{f.get=j=h.get;f.set=h.set;d=h.bind;if(h.single){f.single=h.single}if(d){c=d.bindTo;if(c){b=Ext.apply({},d);delete b.bindTo;d=c}}}if(d){f.explicit=true}else{d=j.$expressions||f.parseFormula(j)}f.binding=a.bind(d,f.onChange,f,b)},destroy:function(){var b=this,a=b.binding,c=b.stub;if(a){a.destroy();b.binding=null}if(c){c.formula=null}Ext.util.Schedulable.prototype.destroy.call(this);b.getterFn=b.owner=null},getFullName:function(){return this.fullName||(this.fullName=this.stub.getFullName()+"="+Ext.util.Schedulable.prototype.getFullName.call(this)+")")},getRawValue:function(){return this.calculation},onChange:function(){if(!this.scheduled){this.schedule()}},parseFormula:function(h){var g=h.toString(),d={$literal:true},c,b,a,f;c=this.argumentNamesRe.exec(g);b=c?c[1]:"get";a=Ext.app.bind.Formula.getFormulaParser(b);while((c=a.exec(g))){f=c[2];d[f]=f}d.$literal=true;h.$expressions=d;return d},react:function(){var f=this,d=f.owner,a=f.binding.lastValue,b=f.getterFn,c;if(f.explicit){c=a}else{c=d.getFormulaFn(a)}f.settingValue=true;f.stub.set(f.calculation=f.get.call(d,c));f.settingValue=false;if(f.single){f.destroy()}},setValue:function(a){this.set.call(this.stub.owner,a)},privates:{getScheduler:function(){var a=this.owner;return a&&a.getScheduler()},sort:function(){var a=this,b=a.binding;if(!b.destroyed){a.scheduler.sortItem(b)}}}},1,0,0,0,0,0,[Ext.app.bind,"Formula"],0));(Ext.cmd.derive("Ext.app.bind.Template",Ext.Base,{numberRe:/^(?:\d+(?:\.\d*)?)$/,stringRe:/^(?:["][^"]*["])$/,tokenRe:/\{[!]?(?:(?:(\d+)|([a-z_][\w\-\.]*))(?::([a-z_\.]+)(?:\(([^\)]*?)?\))?)?)\}/gi,formatRe:/^([a-z_]+)(?:\(([^\)]*?)?\))?$/i,buffer:null,slots:null,tokens:null,constructor:function(b){var a=this,d=a._initters,c;a.text=b;for(c in d){a[c]=d[c]}},_initters:{apply:function(a,b){return this.parse().apply(a,b)},getTokens:function(){return this.parse().getTokens()}},apply:function(c,d){var m=this,j=m.slots,g=m.buffer,f=j.length,h,b,a;for(h=0;h<f;++h){b=j[h];if(b){if((a=c[b.pos])==null){a=""}if(b.not){a=!a}if(b.format){a=b.format(a,d)}g[h]=a}}return g.join("")},getTokens:function(){return this.tokens},parse:function(){var f=this,j=f.text,u=[],c=[],d=[],g={},v=0,t=f.tokenRe,h=0,q,a,p,b,m,o,r;for(a in f._initters){delete f[a]}f.buffer=u;f.slots=c;f.tokens=d;while((b=t.exec(j))){p=b.index-v;if(p){u[h++]=j.substring(v,v+p);v+=p}v+=(m=b[0]).length;o={fmt:(q=b[3]||null),index:b[1]?parseInt(b[1],10):null,not:m.charAt(1)==="!",token:b[2]||null};r=o.token||String(o.index);if(r in g){o.pos=g[r]}else{g[r]=o.pos=d.length;d.push(r)}if(q){if(q.substring(0,5)==="this."){o.fmt=q.substring(5)}else{o.scope=Ext.util.Format}f.parseArgs(b[4],o)}c[h++]=o}if(v<j.length){u[h++]=j.substring(v)}return f},parseArgs:function(a,b){var m=this,g=m.numberRe,c=m.stringRe,d,j,h,f;if(!a){j=[]}else{if(a.indexOf(",")<0){j=[a]}else{j=a.split(",")}}b=b||{};f=j.length;b.args=j;for(h=0;h<f;++h){d=j[h];if(d==="true"){j[h]=true}else{if(d==="false"){j[h]=false}else{if(d==="null"){j[h]=null}else{if(g.test(d)){j[h]=parseFloat(d)}else{if(c.test(d)){j[h]=d.substring(1,d.length-1)}else{b.fn=Ext.functionFactory("return ["+a+"];");b.format=m._formatEval;break}}}}}}if(!b.format){j.unshift(0);b.format=m._formatArgs}return b},parseFormat:function(c){var a=this,f=a.formatRe.exec(c),b={fmt:c,scope:Ext.util.Format},d;d=f[2];if(d){b.fmt=f[1];a.parseArgs(d,b)}else{b.args=[0];b.format=a._formatArgs}return b},_formatArgs:function(b,a){a=this.scope||a;this.args[0]=b;return a[this.fmt].apply(a,this.args)},_formatEval:function(a,c){var b=this.fn();b.unshift(a);c=this.scope||c;return c[this.fmt].apply(c,b)}},1,0,0,0,0,0,[Ext.app.bind,"Template"],0));(Ext.cmd.derive("Ext.app.bind.TemplateBinding",Ext.app.bind.BaseBinding,{isTemplateBinding:true,lastValue:undefined,value:undefined,constructor:function(d,j,h,c,b){var f=this,a=new Ext.app.bind.Template(d),g=a.getTokens();Ext.app.bind.BaseBinding.prototype.constructor.call(this,j,h,c,b);f.tpl=a;f.tokens=g;g.$literal=true;if(g.length){f.multiBinding=new Ext.app.bind.Multi(g,j,f.onBindData,f)}else{f.isStatic=true;f.onData(a.text)}},destroy:function(){var a=this;Ext.destroy(a.multiBinding);a.tpl=a.multiBinding=null;Ext.app.bind.BaseBinding.prototype.destroy.call(this)},getFullName:function(){var a=this.multiBinding;return this.fullName||(this.fullName="$"+(a?a.getFullName():Ext.app.bind.BaseBinding.prototype.getFullName.call(this)))},getRawValue:function(){return this.value},getTemplateScope:function(){return null},isDescendantOf:function(){return false},isLoading:function(){var a=this.multiBinding;return a?a.isLoading():false},onBindData:function(a){this.onData(this.tpl.apply(a,this.getTemplateScope()))},onData:function(a){var c=this,b=c.value;if(b!==(c.value=a)){c.lastValue=b;c.schedule()}},react:function(){this.notify(this.value)},refresh:function(){var a=this.multiBinding;if(a){a.refresh()}},privates:{sort:function(){var a=this.multiBinding;if(a){this.scheduler.sortItem(a)}}}},1,0,0,0,0,0,[Ext.app.bind,"TemplateBinding"],0));(Ext.cmd.derive("Ext.data.ChainedStore",Ext.data.AbstractStore,{config:{source:null,remoteFilter:false,remoteSort:false},constructor:function(){Ext.data.AbstractStore.prototype.constructor.apply(this,arguments);this.getData().addObserver(this)},remove:function(){var a=this.getSource();return a.remove.apply(a,arguments)},removeAll:function(){var a=this.getSource();return a.removeAll()},getData:function(){var a=this,b=a.data;if(!b){a.data=b=a.constructDataCollection()}return b},getSession:function(){return this.getSource().getSession()},applySource:function(a){if(a){a=Ext.data.StoreManager.lookup(a)}return a},updateSource:function(b,d){var c=this,a;if(d){d.removeObserver(c)}if(b){a=c.getData();a.setSource(b.getData());if(!c.isInitializing){c.fireEvent("refresh",c);c.fireEvent("datachanged",c)}b.addObserver(c)}},getModel:function(){return this.getSource().getModel()},getProxy:function(){return null},onCollectionAdd:function(a,f){var d=this,c=f.items,b=!f.next;if(d.ignoreCollectionAdd){return}d.fireEvent("add",d,c,f.at);if(b){d.fireEvent("datachanged",d)}},onCollectionItemChange:function(a,g){var f=this,b=g.item,d=g.modified||null,c=g.meta;f.onUpdate(b,c,d,g);f.fireEvent("update",f,b,c,d,g)},onUpdate:Ext.emptyFn,onCollectionRemove:function(a,f){var d=this,c=f.items,b=!f.next;if(d.ignoreCollectionRemove){return}d.fireEvent("remove",d,c,f.at,false);if(b){d.fireEvent("datachanged",d)}},onSourceBeforeLoad:function(b,a){this.fireEvent("beforeload",this,a)},onSourceAfterLoad:function(a,d,b,c){this.fireEvent("load",this,d,b,c)},onFilterEndUpdate:function(){Ext.data.AbstractStore.prototype.onFilterEndUpdate.apply(this,arguments);this.callObservers("Filter")},onSourceBeforePopulate:function(){this.ignoreCollectionAdd=true;this.callObservers("BeforePopulate")},onSourceAfterPopulate:function(){var a=this;a.ignoreCollectionAdd=false;a.fireEvent("datachanged",a);a.fireEvent("refresh",a);this.callObservers("AfterPopulate")},onSourceBeforeClear:function(){this.ignoreCollectionRemove=true;this.callObservers("BeforeClear")},onSourceAfterClear:function(){this.ignoreCollectionRemove=false;this.callObservers("AfterClear")},onSourceBeforeRemoveAll:function(){this.ignoreCollectionRemove=true;this.callObservers("BeforeRemoveAll")},onSourceAfterRemoveAll:function(a,b){var c=this;c.ignoreCollectionRemove=false;if(!b){c.fireEvent("clear",c);c.fireEvent("datachanged",c)}this.callObservers("AfterRemoveAll",[b])},onSourceFilter:function(){var a=this;a.fireEvent("refresh",a);a.fireEvent("datachanged",a)},hasPendingLoad:function(){return this.getSource().hasPendingLoad()},isLoaded:function(){return this.getSource().isLoaded()},isLoading:function(){return this.getSource().isLoading()},onDestroy:function(){var a=this;a.observers=null;a.setSource(null);a.getData().destroy(true);a.data=null},privates:{isMoving:function(){var a=this.getSource();return a.isMoving?a.isMoving.apply(a,arguments):false},loadsSynchronously:function(){return this.getSource().loadsSynchronously()}}},1,0,0,0,["store.chained"],[[Ext.data.LocalStore.prototype.mixinId||Ext.data.LocalStore.$className,Ext.data.LocalStore]],[Ext.data,"ChainedStore"],0));(Ext.cmd.derive("Ext.app.ViewModel",Ext.Base,{isViewModel:true,factoryConfig:{name:"viewModel"},collectTimeout:100,expressionRe:/^(?:\{[!]?(?:(\d+)|([a-z_][\w\-\.]*))\})$/i,$configStrict:false,config:{data:true,formulas:{$value:null,merge:function(b,c,a,d){return this.mergeNew(b,c,a,d)}},links:null,parent:null,root:true,scheduler:null,schema:"default",session:null,stores:null,view:null},constructor:function(a){this.hadValue={};this.bindings={};this.initConfig(a)},destroy:function(){var m=this,h=m._scheduler,c=m.storeInfo,a=m.getParent(),g=m.collectTask,f=m.children,d=m.bindings,b,o,j;m.destroying=true;if(g){g.cancel();m.collectTask=null}if(f){for(b in f){f[b].destroy()}}if(c){for(b in c){o=c[b];j=o.autoDestroy;if(j||(!o.$wasInstance&&j!==false)){o.destroy()}Ext.destroy(o.$binding)}}if(a){a.unregisterChild(m)}m.getRoot().destroy();for(b in d){d[b].destroy()}if(h&&h.$owner===m){h.$owner=null;h.destroy()}m.hadValue=m.children=m.storeInfo=m._session=m._view=m._scheduler=m.bindings=m._root=m._parent=m.formulaFn=m.$formulaData=null;m.destroying=false;m.callParent()},bind:function(f,h,c,b){var d=this,g,a;c=c||d;if(!b&&f.bindTo!==undefined&&!Ext.isString(f)){b=f;f=b.bindTo}if(!Ext.isString(f)){g=new Ext.app.bind.Multi(f,d,h,c,b);a=true}else{if(d.expressionRe.test(f)){f=f.substring(1,f.length-1);g=d.bindExpression(f,h,c,b)}else{g=new Ext.app.bind.TemplateBinding(f,d,h,c,b);a=true}}if(a){d.bindings[g.id]=g}return g},getSession:function(){var c=this,a=c._session,b;if(!a&&(b=c.getParent())){c.setSession(a=b.getSession())}return a||null},getStore:function(c){var a=this.storeInfo,b;if(a){b=a[c]}return b||null},linkTo:function(d,j){var c=this,h,a,f,g,b,m;if(j.isModel){j={type:j.entityName,id:j.id}}g=j.type||j.reference;a=j.create;if(g){f=j.id;if(a){f=undefined}m=c.getRecord(g,f);if(Ext.isObject(a)){m.set(a);m.commit();m.phantom=true}h=c.getRoot().createStubChild(d);h.set(m)}else{h=c.getStub(d);if(!h.isLinkStub){b=new Ext.app.bind.LinkStub(c,h.name);h.graft(b);h=b}h.link(j)}},notify:function(){this.getScheduler().notify()},get:function(a){return this.getStub(a).getValue()},set:function(b,d){var c=this,a,f;c.getData();if(d===undefined&&b&&b.constructor===Object){f=c.getRoot();d=b}else{if(b&&b.indexOf(".")<0){a={};a[b]=d;d=a;f=c.getRoot()}else{f=c.getStub(b)}}f.set(d)},privates:{registerChild:function(b){var a=this.children;if(!a){this.children=a={}}a[b.getId()]=b},unregisterChild:function(b){var a=this.children;if(!this.destroying&&a){delete a[b.getId()]}},getRecord:function(c,a){var f=this.getSession(),g=c,d=a!==undefined,b;if(f){if(d){b=f.getRecord(c,a)}else{b=f.createRecord(c)}}else{if(!g.$isClass){g=this.getSchema().getEntity(g)}if(d){b=g.createWithId(a);b.load()}else{b=new g()}}return b},notFn:function(a){return !a},bindExpression:function(g,a,b,d){var f=g.charAt(0),j=(f==="!"),c=j?g.substring(1):g,h=this.getStub(c),m;m=h.bind(a,b,d);if(j){m.transform=this.notFn}return m},applyScheduler:function(a){if(a&&!a.isInstance){a=new Ext.util.Scheduler(a);a.$owner=this}return a},getScheduler:function(){var a=this,b=a._scheduler,c;if(!b){if(!(c=a.getParent())){b=new Ext.util.Scheduler({preSort:"kind,-depth"});b.$owner=a}else{b=c.getScheduler()}a.setScheduler(b)}return b},getStub:function(b){var a=this.getRoot();return b?a.getChild(b):a},collect:function(){var a=this,c=a.getParent(),b=a.collectTask;if(c){c.collect();return}if(!b){b=a.collectTask=new Ext.util.DelayedTask(a.doCollect,a)}if(a.collectTimeout===0){a.doCollect()}else{b.delay(a.collectTimeout)}},doCollect:function(){var b=this.children,a;if(b){for(a in b){b[a].doCollect()}}this.getRoot().collect()},onBindDestroy:function(b,c){var a=this,d;if(a.destroying){return}if(!c){delete a.bindings[b.id]}d=a.getParent();if(d){d.onBindDestroy(b,true)}else{a.collect()}},applyData:function(f,b){var a=this,c,d;a.getSession();if(!b){d=a.getParent();a.linkData=c=d?Ext.Object.chain(d.getData()):{};a.data=a._data=Ext.Object.chain(c)}if(f&&f.constructor===Object){a.getRoot().set(f)}},applyParent:function(a){if(a){a.registerChild(this)}return a},applyStores:function(d){var j=this,a=j.getRoot(),c,h,f,g,m,b;j.storeInfo={};j.listenerScopeFn=function(){return j.getView().getInheritedConfig("defaultListenerScope")};for(c in d){h=d[c];if(h.isStore){h.$wasInstance=true;j.setupStore(h,c);continue}else{if(Ext.isString(h)){h={source:h}}else{h=Ext.apply({},h)}}m=h.listeners;delete h.listeners;f=j.bind(h,j.onStoreBind,j,{trackStatics:true});if(f.isStatic()){f.destroy();j.createStore(c,h,m)}else{f.$storeKey=c;f.$listeners=m;g=a.createStubChild(c);g.setStore(f)}}},onStoreBind:function(a,c,h){var g=this.storeInfo,f=h.$storeKey,b=g[f],d;if(!b){this.createStore(f,a,h.$listeners,h)}else{a=Ext.merge({},h.pruneStaticKeys());d=a.proxy;delete a.type;delete a.model;delete a.fields;delete a.proxy;delete a.listeners;if(d){delete d.reader;delete d.writer;b.getProxy().setConfig(d)}b.setConfig(a)}},createStore:function(d,b,f,a){var g=this.getSession(),c;b=Ext.apply({},b);if(b.session){b.session=g}if(b.source){b.type=b.type||"chained"}b.listeners=f;c=Ext.Factory.store(b);c.$binding=a;this.setupStore(c,d)},setupStore:function(a,b){a.resolveListenerScope=this.listenerScopeFn;this.storeInfo[b]=a;this.set(b,a)},applyFormulas:function(f){var a=this,c=a.getRoot(),d,b;a.getData();for(d in f){c.createStubChild(d);b=a.getStub(d);b.setFormula(f[d])}return f},applyLinks:function(a){for(var b in a){this.linkTo(b,a[b])}},applySchema:function(a){return Ext.data.schema.Schema.get(a)},applyRoot:function(){var a=new Ext.app.bind.RootStub(this),b=this.getParent();if(b){a.depth=b.getRoot().depth-1000}return a},getFormulaFn:function(a){var c=this,b=c.formulaFn;if(!b){b=c.formulaFn=function(d){return c.$formulaData[d]}}c.$formulaData=a;return b}}},1,0,0,0,["viewmodel.default"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable],[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.app,"ViewModel"],0));(Ext.cmd.derive("Ext.app.domain.Controller",Ext.app.EventDomain,{singleton:true,type:"controller",prefix:"controller.",idMatchRe:/^\#/,constructor:function(){var a=this;a.callParent();a.monitor(Ext.app.BaseController)},match:function(b,d){var c=false,a=b.alias;if(d==="*"){c=true}else{if(d==="#"){c=!!b.isApplication}else{if(this.idMatchRe.test(d)){c=b.getId()===d.substring(1)}else{if(a){c=Ext.Array.indexOf(a,this.prefix+d)>-1}}}}return c}},1,0,0,0,0,0,[Ext.app.domain,"Controller"],0));(Ext.cmd.derive("Ext.data.PageMap",Ext.util.LruCache,{config:{store:null,pageSize:0,rootProperty:""},clear:function(a){var b=this;b.pageMapGeneration=(b.pageMapGeneration||0)+1;b.indexMap={};Ext.util.LruCache.prototype.clear.call(this,a)},forEach:function(q,d){var o=this,g=Ext.Object.getKeys(o.map),b=g.length,p=o.getPageSize(),f,c,a,m,h;for(f=0;f<b;f++){g[f]=+g[f]}Ext.Array.sort(g,Ext.Array.numericSortFn);d=d||o;for(f=0;f<b;f++){a=g[f];m=o.getPage(a);h=m.length;for(c=0;c<h;c++){if(q.call(d,m[c],(a-1)*p+c)===false){return}}}},findBy:function(a,d){var b=this,c=null;d=d||b;b.forEach(function(g,f){if(a.call(d,g,f)){c=g;return false}});return c},findIndexBy:function(a,d){var b=this,c=-1;d=d||b;b.forEach(function(g,f){if(a.call(d,g)){c=f;return false}});return c},find:function(g,f,h,c,b,a){if(Ext.isEmpty(f,false)){return null}var d=Ext.String.createRegex(f,c,b,a),j=this.getRootProperty();return this.findBy(function(m){return m&&d.test((j?m[j]:m)[g])},null,h)},findIndex:function(g,f,h,c,b,a){if(Ext.isEmpty(f,false)){return null}var d=Ext.String.createRegex(f,c,b,a),j=this.getRootProperty();return this.findIndexBy(function(m){return m&&d.test((j?m[j]:m)[g])},null,h)},getPageFromRecordIndex:function(a){return Math.floor(a/this.getPageSize())+1},addAll:function(a){this.addPage(1,a)},addPage:function(b,c){var p=this,a=p.getPageSize(),f=b+Math.floor((c.length-1)/a),o=(b-1)*a,j=p.indexMap,h,d,g,m;for(m=0;b<=f;b++,m+=a){h=Ext.Array.slice(c,m,m+a);for(d=0,g=h.length;d<g;d++){j[h[d].internalId]=o++}p.add(b,h);p.fireEvent("pageadd",p,b,h)}},getCount:function(){var a=Ext.util.LruCache.prototype.getCount.call(this);if(a){a=(a-1)*this.getPageSize()+this.last.value.length}return a},getByInternalId:function(a){var b=this.indexMap[a];if(b!=null){return this.getAt(b)}},indexOf:function(b){var a=-1;if(b){a=this.indexMap[b.internalId];if(a==null){a=-1}}return a},insert:function(){},remove:function(){},removeAt:function(){},removeAtKey:function(a){var g=this,d=g.getPage(a),c,f,b;if(d){if(g.fireEvent("beforepageremove",g,a,d)!==false){c=d.length;for(f=0;f<c;f++){delete g.indexMap[d[f].internalId]}b=Ext.util.LruCache.prototype.removeAtKey.apply(this,arguments);g.fireEvent("pageremove",g,a,d);d.length=0}}return b},getPage:function(a){return this.get(a)},hasRange:function(b,d){var f=this,c=f.getPageFromRecordIndex(b),a=f.getPageFromRecordIndex(d);for(;c<=a;c++){if(!f.hasPage(c)){return false}}return(a-1)*f._pageSize+f.getPage(a).length>d},hasPage:function(a){return !!this.get(a)},peekPage:function(a){return this.map[a]},getAt:function(a){return this.getRange(a,a+1)[0]},getRange:function(p,r){r--;if(!this.hasRange(p,r)){Ext.raise("PageMap asked for range which it does not have")}var d=this,a=Ext.Array,f=d.getPageSize(),m=d.getPageFromRecordIndex(p),b=d.getPageFromRecordIndex(r),s=(m-1)*f,q=(b*f)-1,g=m,j=[],o,c,h;for(;g<=b;g++){if(g===m){o=p-s;h=o>0}else{o=0;h=false}if(g===b){c=f-(q-r);h=h||c<f}if(h){a.push(j,a.slice(d.getPage(g),o,c))}else{a.push(j,d.getPage(g))}}return j},destroy:function(){Ext.util.LruCache.prototype.destroy.call(this);this.indexMap={}}},0,0,0,0,0,0,[Ext.data,"PageMap"],0));(Ext.cmd.derive("Ext.data.BufferedStore",Ext.data.ProxyStore,{isBufferedStore:true,buffered:true,config:{data:0,pageSize:25,remoteSort:true,remoteFilter:true,sortOnLoad:false,purgePageCount:5,trailingBufferZone:25,leadingBufferZone:200,defaultViewSize:100,viewSize:0,trackRemoved:false},applyData:function(b){var a=this.data||(this.data=this.createDataCollection());return a},applyProxy:function(a){a=Ext.data.ProxyStore.prototype.applyProxy.call(this,a);if(a&&a.setEnablePaging){a.setEnablePaging(true)}return a},createFiltersCollection:function(){return new Ext.util.FilterCollection()},createSortersCollection:function(){return new Ext.util.SorterCollection()},updateGroupField:function(a){this.group(a)},getGrouper:function(){return this.grouper},isGrouped:function(){return !!this.grouper},createDataCollection:function(){var b=this,a=new Ext.data.PageMap({store:b,rootProperty:"data",pageSize:b.getPageSize(),maxSize:b.getPurgePageCount(),listeners:{clear:b.onPageMapClear,scope:b}});b.relayEvents(a,["beforepageremove","pageadd","pageremove"]);b.pageRequests={};return a},removeAll:function(b){var c=this,a=c.getData();if(a){if(b){c.suspendEvent("clear")}a.clear();if(b){c.resumeEvent("clear")}}},flushLoad:function(){var b=this,a=b.pendingLoadOptions;b.clearLoadTask();if(!a){return}b.getData().clear();a.page=1;a.start=0;a.limit=b.getViewSize()||b.getDefaultViewSize();a.loadCallback=a.callback;a.callback=null;return b.loadToPrefetch(a)},reload:function(b){var j=this,g=j.getData(),o=Number.MAX_VALUE,m,c,h,q,f,a,p,d;if(!b){b={}}if(j.loading||j.fireEvent("beforeload",j,b)===false){return}a=function(){var s=j.totalCount,r=c-m;if(c>=s){c=s-1;m=Math.max(c-r,0)}if(j.rangeCached(m,Math.min(c,j.totalCount))){j.loading=false;g.un("pageadd",a);d=g.getRange(m,c+1);j.fireEvent("load",j,d,true);j.fireEvent("refresh",j)}};p=Math.ceil((j.getLeadingBufferZone()+j.getTrailingBufferZone())/2);if(j.lastRequestStart&&j.preserveScrollOnReload){m=j.lastRequestStart;c=j.lastRequestEnd;o=j.getTotalCount()}else{m=b.start||0;c=m+(b.count||j.getPageSize())-1}g.clear(true);delete j.totalCount;m=Math.max(m-p,0);c=Math.min(c+p,o);h=j.getPageFromRecordIndex(m);q=j.getPageFromRecordIndex(c);j.loading=true;b.waitForReload=a;g.on("pageadd",a);for(f=h;f<=q;f++){j.prefetchPage(f,b)}},filter:function(){Ext.data.ProxyStore.prototype.filter.apply(this,arguments)},filterBy:function(b,a){},loadData:function(b,a){},loadPage:function(a,b){var c=this;b=b||{};b.page=c.currentPage=a;b.start=(a-1)*c.getPageSize();b.limit=c.getViewSize()||c.getDefaultViewSize();b.loadCallback=b.callback;b.callback=null;return c.loadToPrefetch(b)},clearData:function(a){var b=this,c=b.getData();if(c){c.clear()}},getCount:function(){return this.totalCount||0},getRange:function(b,f,p){var m=this,c=m.totalCount-1,d=m.lastRequestStart,r=[],g=m.getData(),a,j,q,o,h;p=Ext.apply({prefetchStart:b,prefetchEnd:f},p);f=(f>=m.totalCount)?c:f;j=b===0?0:b-1;q=f===c?f:f+1;m.lastRequestStart=b;m.lastRequestEnd=f;if(m.rangeCached(j,q)){m.onRangeAvailable(p);r=g.getRange(b,f+1)}else{m.fireEvent("cachemiss",m,b,f);o=m.getPageFromRecordIndex(j);h=m.getPageFromRecordIndex(q);a=function(u,t,s){if(t>=o&&t<=h&&m.rangeCached(j,q)){m.fireEvent("cachefilled",m,b,f);g.un("pageadd",a);m.onRangeAvailable(p)}};g.on("pageadd",a);m.prefetchRange(b,f)}m.primeCache(b,f,b<d?-1:1);return r},getById:function(b){var a=this.data.findBy(function(c){return c.getId()===b});return a},getAt:function(a){var b=this.getData();if(b.hasRange(a,a)){return b.getAt(a)}},getByInternalId:function(a){return this.data.getByInternalId(a)},contains:function(a){return this.indexOf(a)>-1},indexOf:function(a){return this.getData().indexOf(a)},indexOfId:function(a){return this.indexOf(this.getById(a))},group:function(d,b){var a=this,c;if(d&&typeof d==="string"){c=a.grouper;if(!c){a.grouper=new Ext.util.Grouper({property:d,direction:b||"ASC",root:"data"})}else{if(b===undefined){c.toggle()}else{c.setDirection(b)}}}else{a.grouper=d?a.getSorters().decodeSorter(d,"Ext.util.Grouper"):null}a.getData().clear();a.loadPage(1,{callback:function(){a.fireEvent("groupchange",a,a.getGrouper())}})},getPageFromRecordIndex:function(a){return Math.floor(a/this.getPageSize())+1},calculatePageCacheSize:function(b){var a=this,c=a.getPurgePageCount();return c?Math.max(a.getData().getMaxSize()||0,Math.ceil((b+a.getTrailingBufferZone()+a.getLeadingBufferZone())/a.getPageSize())*2+c):0},loadToPrefetch:function(o){var j=this,s=o,a,q,r,m=o.start,p=o.start+o.limit-1,h=(j.getViewSize()||o.limit),b=Math.min(p,o.start+h-1),c=j.getPageFromRecordIndex(Math.max(m-j.getTrailingBufferZone(),0)),g=j.getPageFromRecordIndex(p+j.getLeadingBufferZone()),v=j.getData(),d=function(){q=q||[];if(o.loadCallback){o.loadCallback.call(o.scope||j,q,u,true)}if(o.callback){o.callback.call(o.scope||j,q,m||0,p||0,o)}},f=function(){j.fireEvent("datachanged",j);j.fireEvent("refresh",j);j.fireEvent("load",j,q,true)},t=function(){if(j.rangeCached(m,b)){j.loading=false;q=v.getRange(m,b+1);v.un("pageadd",t);if(j.hasListeners.guaranteedrange){j.guaranteeRange(m,b,o.callback,o.scope)}d();f()}},u;v.setMaxSize(j.calculatePageCacheSize(h));if(j.fireEvent("beforeload",j,o)!==false){delete j.totalCount;j.loading=true;if(o.callback){s=Ext.apply({},o);delete s.callback}j.on("prefetch",function(z,w,y,A){u=A;if(y){if((r=j.getTotalCount())){v.on("pageadd",t);b=Math.min(b,r-1);g=j.getPageFromRecordIndex(Math.min(b+j.getLeadingBufferZone(),r-1));for(a=c+1;a<=g;++a){j.prefetchPage(a,s)}}else{d();f()}}else{j.loading=false;d();j.fireEvent("load",j,w,false)}},null,{single:true});j.prefetchPage(c,s)}},prefetch:function(f){var g=this,c=g.getPageSize(),a=g.getData(),d,b;if(c){if(g.lastPageSize&&c!=g.lastPageSize){Ext.raise("pageSize cannot be dynamically altered")}if(!a.getPageSize()){a.setPageSize(c)}}else{g.pageSize=a.setPageSize(c=f.limit)}g.lastPageSize=c;if(!f.page){f.page=g.getPageFromRecordIndex(f.start);f.start=(f.page-1)*c;f.limit=Math.ceil(f.limit/c)*c}b=g.pageRequests[f.page];if(!b||b.getOperation().pageMapGeneration!==a.pageMapGeneration){f=Ext.apply({action:"read",filters:g.getFilters().items,sorters:g.getSorters().items,grouper:g.getGrouper(),internalCallback:g.onProxyPrefetch,internalScope:g},f);d=g.createOperation("read",f);d.pageMapGeneration=a.pageMapGeneration;if(g.fireEvent("beforeprefetch",g,d)!==false){g.pageRequests[f.page]=d.execute();if(g.getProxy().isSynchronous){delete g.pageRequests[f.page]}}}return g},onPageMapClear:function(){var f=this,d=f.wasLoading,c=f.pageRequests,b=f.getData(),a;b.clearListeners();b.on("clear",f.onPageMapClear,f);f.relayEvents(b,["beforepageremove","pageadd","pageremove"]);f.loading=true;f.totalCount=0;for(a in c){if(c.hasOwnProperty(a)){c[a].getOperation().abort()}}f.fireEvent("clear",f);f.loading=d},prefetchPage:function(g,c){var f=this,b=f.getPageSize(),a=(g-1)*b,d=f.totalCount;if(d!==undefined&&f.data.getCount()===d){return}f.prefetch(Ext.applyIf({page:g,start:a,limit:b},c))},onProxyPrefetch:function(g){if(this.destroyed){return}var o=this,p=g.getResultSet(),f=g.getRecords(),j=g.wasSuccessful(),m=g.getPage(),d=g.waitForReload,b=o.totalCount,c=o.pageRequests,a,h;if(g.pageMapGeneration===o.getData().pageMapGeneration){if(p){o.totalCount=p.getTotal();if(o.totalCount!==b){o.fireEvent("totalcountchange",o.totalCount)}}if(m!==undefined){delete o.pageRequests[m]}o.loading=false;o.fireEvent("prefetch",o,f,j,g);if(j){if(o.totalCount===0){if(d){for(a in c){h=c[a].getOperation();if(h.waitForReload===d){delete h.waitForReload}}o.getData().un("pageadd",d);o.fireEvent("load",o,[],true);o.fireEvent("refresh",o)}}else{o.cachePage(f,g.getPage())}}Ext.callback(g.getCallback(),g.getScope()||o,[f,g,j])}},cachePage:function(d,b){var a=this,c=d.length,f;if(!Ext.isDefined(a.totalCount)){a.totalCount=d.length;a.fireEvent("totalcountchange",a.totalCount)}for(f=0;f<c;f++){d[f].join(a)}a.getData().addPage(b,d)},rangeCached:function(b,a){return this.getData().hasRange(b,a)},pageCached:function(a){return this.getData().hasPage(a)},pagePending:function(a){return !!this.pageRequests[a]},rangeSatisfied:function(b,a){return this.rangeCached(b,a)},onRangeAvailable:function(f){var g=this,c=g.getTotalCount(),a=f.prefetchStart,b=(f.prefetchEnd>c-1)?c-1:f.prefetchEnd,d;b=Math.max(0,b);d=g.getData().getRange(a,b+1);if(f.fireEvent!==false){g.fireEvent("guaranteedrange",d,a,b,f)}if(f.callback){f.callback.call(f.scope||g,d,a,b,f)}},guaranteeRange:function(b,c,a,f,d){d=Ext.apply({callback:a,scope:f},d);this.getRange(b,c+1,d)},prefetchRange:function(h,b){var d=this,c,a,g,f=d.getData();if(!d.rangeCached(h,b)){c=d.getPageFromRecordIndex(h);a=d.getPageFromRecordIndex(b);f.setMaxSize(d.calculatePageCacheSize(b-h+1));for(g=c;g<=a;g++){if(!d.pageCached(g)){d.prefetchPage(g)}}}},primeCache:function(h,b,g){var f=this,d=f.getLeadingBufferZone(),c=f.getTrailingBufferZone(),a=f.getPageSize(),j=f.totalCount;if(g===-1){h=Math.max(h-d,0);b=Math.min(b+c,j-1)}else{if(g===1){h=Math.max(Math.min(h-c,j-a),0);b=Math.min(b+d,j-1)}else{h=Math.min(Math.max(Math.floor(h-((d+c)/2)),0),j-f.pageSize);b=Math.min(Math.max(Math.ceil(b+((d+c)/2)),0),j-1)}}f.prefetchRange(h,b)},sort:function(c,b,a){if(arguments.length===0){this.clearAndLoad()}else{this.getSorters().addSort(c,b,a)}},onSorterEndUpdate:function(){var a=this,b=a.getSorters().getRange();if(b.length){a.fireEvent("beforesort",a,b);a.clearAndLoad({callback:function(){a.fireEvent("sort",a,b)}})}else{a.fireEvent("sort",a,b)}},clearAndLoad:function(a){this.getData().clear();this.loadPage(1,a)},privates:{isLast:function(a){return this.indexOf(a)===this.getTotalCount()-1},isMoving:function(){return false}}},0,0,0,0,["store.buffered"],0,[Ext.data,"BufferedStore"],0));(Ext.cmd.derive("Ext.mixin.Queryable",Ext.Base,{mixinId:"queryable",isQueryable:true,query:function(a){a=a||"*";return Ext.ComponentQuery.query(a,this.getQueryRoot())},queryBy:function(g,f){var c=[],b=this.getQueryRoot().getRefItems(true),d=0,a=b.length,h;for(;d<a;++d){h=b[d];if(g.call(f||h,h)!==false){c.push(h)}}return c},queryById:function(a){return this.down(Ext.makeIdSelector(a))},child:function(a){var b=this.getQueryRoot().getRefItems();if(a&&a.isComponent){return this.matchById(b,a.getItemId())}if(a){b=Ext.ComponentQuery.query(a,b)}if(b.length){return b[0]}return null},down:function(a){if(a&&a.isComponent){return this.matchById(this.getRefItems(true),a.getItemId())}a=a||"";return this.query(a)[0]||null},visitPreOrder:function(c,b,a,d){Ext.ComponentQuery._visit(true,c,this.getQueryRoot(),b,a,d)},visitPostOrder:function(c,b,a,d){Ext.ComponentQuery._visit(false,c,this.getQueryRoot(),b,a,d)},getRefItems:function(){return[]},getQueryRoot:function(){return this},privates:{matchById:function(d,b){var c=d.length,f,a;for(f=0;f<c;++f){a=d[f];if(a.getItemId()===b){return a}}return null}}},0,0,0,0,0,0,[Ext.mixin,"Queryable"],0));(Ext.cmd.derive("Ext.data.Request",Ext.Base,{config:{action:undefined,params:undefined,method:"GET",url:null,operation:null,proxy:null,disableCaching:false,headers:{},callbackKey:null,rawRequest:null,jsonData:undefined,xmlData:undefined,withCredentials:false,username:null,password:null,binary:false,callback:null,scope:null,timeout:30000,records:null,directFn:null,args:null,useDefaultXhrHeader:null},constructor:function(a){this.initConfig(a)},getParam:function(b){var a=this.getParams(),c;if(a){return a[b]}return c},setParam:function(b,c){var a=this.getParams()||{};a[b]=c;this.setParams(a)}},1,0,0,0,0,0,[Ext.data,"Request"],0));(Ext.cmd.derive("Ext.data.Validation",Ext.data.Model,{isValidation:true,syncGeneration:0,attach:function(a){this.record=a;delete this.data.id},getValidation:function(){return null},isValid:function(){var a=this;if(a.syncGeneration!==a.record.generation){a.refresh()}return !a.dirty},refresh:function(b){var A=this,B=A.data,d=A.record,o=d.fields,t=d.generation,z=d.data,m=d.validationSeparator,c=null,f,h,p,a,w,u,r,y,v,g,s,q;if(b||A.syncGeneration!==t){A.syncGeneration=t;for(u=0,v=o.length;u<v;++u){a=o[u];q=a.name;s=z[q];f=a.defaultInvalidMessage;p=0;if(!(q in B)){B[q]=h=true}else{h=B[q]}if(a.validate!==Ext.emptyFn){g=a.validate(s,m,null,d);if(g!==true){p=g||f}}if(!p){p=true}if(p!==h){(c||(c={}))[q]=p}}if(c){A.set(c)}}}},0,0,0,0,0,0,[Ext.data,"Validation"],0));(Ext.cmd.derive("Ext.dom.Helper",Ext.Base,function(){var j="afterbegin",f="afterend",g="beforebegin",c="beforeend",h=["BeforeBegin","previousSibling"],d=["AfterEnd","nextSibling"],b={beforebegin:h,afterend:d},a={beforebegin:h,afterend:d,afterbegin:["AfterBegin","firstChild"],beforeend:["BeforeEnd","lastChild"]};return{singleton:true,alternateClassName:["Ext.DomHelper","Ext.core.DomHelper"],emptyTags:/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,confRe:/^(?:tag|children|cn|html|tpl|tplData)$/i,endRe:/end/i,attributeTransform:{cls:"class",htmlFor:"for"},closeTags:{},detachedDiv:document.createElement("div"),decamelizeName:function(){var m=/([a-z])([A-Z])/g,p={};function o(q,s,r){return s+"-"+r.toLowerCase()}return function(q){return p[q]||(p[q]=q.replace(m,o))}}(),generateMarkup:function(o,r){var m=this,v=typeof o,u,q,p,t,s;if(v==="string"||v==="number"){r.push(o)}else{if(Ext.isArray(o)){for(t=0;t<o.length;t++){if(o[t]){m.generateMarkup(o[t],r)}}}else{p=o.tag||"div";r.push("<",p);for(u in o){if(o.hasOwnProperty(u)){q=o[u];if(q!==undefined&&!m.confRe.test(u)){if(typeof q==="object"){r.push(" ",u,'="');m.generateStyles(q,r,true).push('"')}else{r.push(" ",m.attributeTransform[u]||u,'="',q,'"')}}}}if(m.emptyTags.test(p)){r.push("/>")}else{r.push(">");if((q=o.tpl)){q.applyOut(o.tplData,r)}if((q=o.html)){r.push(q)}if((q=o.cn||o.children)){m.generateMarkup(q,r)}s=m.closeTags;r.push(s[p]||(s[p]="</"+p+">"))}}}return r},generateStyles:function(s,p,r){var o=p||[],q,m;for(q in s){if(s.hasOwnProperty(q)){m=s[q];q=this.decamelizeName(q);if(r&&Ext.String.hasHtmlCharacters(m)){m=Ext.String.htmlEncode(m)}o.push(q,":",m,";")}}return p||o.join("")},markup:function(o){if(typeof o==="string"){return o}var m=this.generateMarkup(o,[]);return m.join("")},applyStyles:function(o,m){Ext.fly(o).applyStyles(m)},createContextualFragment:function(p){var m=this.detachedDiv,o=document.createDocumentFragment(),q,r;m.innerHTML=p;r=m.childNodes;q=r.length;while(q--){o.appendChild(r[0])}return o},createDom:function(r,o){var q=this,p=q.markup(r),m=q.detachedDiv,s;m.innerHTML=p;s=m.firstChild;return Ext.supports.ChildContentClearedWhenSettingInnerHTML?s.cloneNode(true):s},insertHtml:function(v,q,w){var o=this,r,t,s,m,p;v=v.toLowerCase();if(q.insertAdjacentHTML){if(o.ieInsertHtml){p=o.ieInsertHtml(v,q,w);if(p){return p}}r=a[v];if(r){q.insertAdjacentHTML(r[0],w);return q[r[1]]}}else{if(q.nodeType===3){v=v===j?g:v;v=v===c?f:v}t=Ext.supports.CreateContextualFragment?q.ownerDocument.createRange():undefined;m="setStart"+(this.endRe.test(v)?"After":"Before");if(b[v]){if(t){t[m](q);p=t.createContextualFragment(w)}else{p=this.createContextualFragment(w)}q.parentNode.insertBefore(p,v===g?q:q.nextSibling);return q[(v===g?"previous":"next")+"Sibling"]}else{s=(v===j?"first":"last")+"Child";if(q.firstChild){if(t){try{t[m](q[s]);p=t.createContextualFragment(w)}catch(u){p=this.createContextualFragment(w)}}else{p=this.createContextualFragment(w)}if(v===j){q.insertBefore(p,q.firstChild)}else{q.appendChild(p)}}else{q.innerHTML=w}return q[s]}}},insertBefore:function(o,m,p){return this.doInsert(o,m,p,g)},insertAfter:function(o,m,p){return this.doInsert(o,m,p,f)},insertFirst:function(o,m,p){return this.doInsert(o,m,p,j)},append:function(o,m,p){return this.doInsert(o,m,p,c)},overwrite:function(q,p,m){var r=this,o;q=Ext.getDom(q);p=r.markup(p);if(r.ieOverwrite){o=r.ieOverwrite(q,p)}if(!o){q.innerHTML=p;o=q.firstChild}return m?Ext.get(o):o},doInsert:function(q,m,s,o){var r=this,p;q=q.dom||Ext.getDom(q);if("innerHTML" in q){p=r.insertHtml(o,q,r.markup(m))}else{p=r.createDom(m,null);if(q.nodeType===3){o=o===j?g:o;o=o===c?f:o}if(b[o]){q.parentNode.insertBefore(p,o===g?q:q.nextSibling)}else{if(q.firstChild&&o===j){q.insertBefore(p,q.firstChild)}else{q.appendChild(p)}}}return s?Ext.get(p):p},createTemplate:function(m){var o=this.markup(m);return new Ext.Template(o)},createHtml:function(m){return this.markup(m)}}},0,0,0,0,0,0,[Ext.dom,"Helper",Ext,"DomHelper",Ext.core,"DomHelper"],0));Ext.define("Ext.overrides.dom.Helper",(function(){var b=/^(?:table|thead|tbody|tr|td)$/i,g=/td|tr|tbody|thead/i,f="<table>",h="</table>",a=f+"<tbody>",d="</tbody>"+h,j=a+"<tr>",c="</tr>"+d;return{override:"Ext.dom.Helper",ieInsertHtml:function(o,q,p){var m=null;if(Ext.isIE9m&&b.test(q.tagName)){m=this.insertIntoTable(q.tagName.toLowerCase(),o,q,p)}return m},ieOverwrite:function(m,o){if(Ext.isIE9m&&b.test(m.tagName)){while(m.firstChild){m.removeChild(m.firstChild)}if(o){return this.insertHtml("afterbegin",m,o)}}},ieTable:function(u,p,m,t){var q=-1,s=this.detachedDiv,r,o;s.innerHTML=[p,m,t].join("");while(++q<u){s=s.firstChild}r=s.nextSibling;if(r){r=s;s=document.createDocumentFragment();while(r){o=r.nextSibling;s.appendChild(r);r=o}}return s},insertIntoTable:function(p,s,r,v){var q,u,t=s==="beforebegin",o=s==="afterbegin",w=s==="beforeend",m=s==="afterend";if(p==="td"&&(o||w)||!g.test(p)&&(t||m)){return null}u=t?r:m?r.nextSibling:o?r.firstChild:null;if(t||m){r=r.parentNode}if(p==="td"||(p==="tr"&&(w||o))){q=this.ieTable(4,j,v,c)}else{if(((p==="tbody"||p==="thead")&&(w||o))||(p==="tr"&&(t||m))){q=this.ieTable(3,a,v,d)}else{q=this.ieTable(2,f,v,h)}}r.insertBefore(q,u);return q}}})());(Ext.cmd.derive("Ext.dom.GarbageCollector",Ext.Base,{singleton:true,interval:30000,constructor:function(){var a=this;a.collect=Ext.Function.bind(a.collect,a);a.lastTime=Ext.now();a.resume()},collect:function(){var c=this,f=Ext.cache,g,m,h,d,a,j;for(g in f){if(!f.hasOwnProperty(g)){continue}h=f[g];if(h.skipGarbageCollection){continue}m=h.dom;try{a=Ext.isGarbage(m)}catch(b){delete f[g];continue}if(a){if(h&&h.dom){h.collect()}}}if(Ext.isIE9m){d={};for(g in f){if(f.hasOwnProperty(g)){d[g]=f[g]}}Ext.cache=Ext.dom.Element.cache=d}c.lastTime=Ext.now()},pause:function(){clearTimeout(this.timerId)},resume:function(){var a=this,b=a.lastTime;if(Ext.enableGarbageCollector&&(Ext.now()-b>a.interval)){a.collect()}a.timerId=Ext.interval(a.collect,a.interval)}},1,0,0,0,0,0,[Ext.dom,"GarbageCollector"],0));(Ext.cmd.derive("Ext.event.gesture.Recognizer",Ext.Base,{priority:0,handledEvents:[],config:{onRecognized:Ext.emptyFn,callbackScope:null},constructor:function(a){this.initConfig(a);Ext.event.publisher.Gesture.instance.registerRecognizer(this)},onStart:Ext.emptyFn,onEnd:Ext.emptyFn,onTouchStart:Ext.emptyFn,onTouchMove:Ext.emptyFn,onTouchEnd:Ext.emptyFn,onTouchCancel:Ext.emptyFn,fail:function(){return false},fire:function(){this.getOnRecognized().apply(this.getCallbackScope(),arguments)},reset:Ext.emptyFn},1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.event.gesture,"Recognizer"],0));(Ext.cmd.derive("Ext.event.gesture.SingleTouch",Ext.event.gesture.Recognizer,{inheritableStatics:{NOT_SINGLE_TOUCH:"Not Single Touch",TOUCH_MOVED:"Touch Moved",EVENT_CANCELED:"Event Canceled"},onTouchStart:function(a){if(a.touches.length>1){return this.fail(this.self.NOT_SINGLE_TOUCH)}},onTouchCancel:function(){return false}},0,0,0,0,0,0,[Ext.event.gesture,"SingleTouch"],0));(Ext.cmd.derive("Ext.event.gesture.DoubleTap",Ext.event.gesture.SingleTouch,{priority:300,inheritableStatics:{DIFFERENT_TARGET:"Different Target"},config:{moveDistance:8,tapDistance:24,maxDuration:300},handledEvents:["singletap","doubletap"],singleTapTimer:null,startTime:0,lastTapTime:0,onTouchStart:function(a){var c=this,b;if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===false){return false}b=c.lastStartPoint=a.changedTouches[0].point;c.startPoint=c.startPoint||b;c.startTime=a.time;clearTimeout(c.singleTapTimer)},onTouchMove:function(a){var c=this,b=a.changedTouches[0].point;if(Math.abs(b.getDistanceTo(c.lastStartPoint))>=c.getMoveDistance()){c.startPoint=null;return c.fail(c.self.TOUCH_MOVED)}},onTouchEnd:function(m){var b=this,j=b.getMaxDuration(),f=m.time,a=m.target,c=b.lastTapTime,g=b.lastTarget,d=m.changedTouches[0].point,h;b.lastTapTime=f;b.lastTarget=a;if(c){h=f-c;if(h<=j&&Math.abs(d.getDistanceTo(b.startPoint))<=b.getTapDistance()){if(a!==g){return b.fail(b.self.DIFFERENT_TARGET)}b.lastTarget=null;b.lastTapTime=0;b.fire("doubletap",m,{touch:m.changedTouches[0],duration:h});b.startPoint=null;return}}if(f-b.startTime>j){b.fireSingleTap(m)}else{b.setSingleTapTimer(m)}},setSingleTapTimer:function(b){var a=this;a.singleTapTimer=Ext.defer(function(){a.fireSingleTap(b)},a.getMaxDuration())},fireSingleTap:function(a,b){this.fire("singletap",a,{touch:b});this.startPoint=null},reset:function(){var a=this;a.startTime=a.lastTapTime=0;a.lastStartPoint=a.startPoint=a.singleTapTimer=null}},0,0,0,0,0,0,[Ext.event.gesture,"DoubleTap"],function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.doubleTap)}));(Ext.cmd.derive("Ext.event.gesture.Drag",Ext.event.gesture.SingleTouch,{priority:100,isStarted:false,startPoint:null,previousPoint:null,lastPoint:null,handledEvents:["dragstart","drag","dragend","dragcancel"],config:{minDistance:8},constructor:function(){Ext.event.gesture.SingleTouch.prototype.constructor.apply(this,arguments);this.initInfo()},initInfo:function(){this.info={touch:null,previous:{x:0,y:0},x:0,y:0,delta:{x:0,y:0},absDelta:{x:0,y:0},flick:{velocity:{x:0,y:0}},direction:{x:0,y:0},time:0,previousTime:{x:0,y:0}}},onTouchStart:function(a){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===false){if(this.isStarted&&this.lastMoveEvent!==null){this.lastMoveEvent.isStopped=false;this.onTouchEnd(this.lastMoveEvent)}return false}this.startTime=a.time;this.startPoint=a.changedTouches[0].point},tryDragStart:function(f){var c=this.startPoint,a=f.changedTouches[0],b=a.point,g=this.getMinDistance(),d=this.info;if(Math.abs(b.getDistanceTo(c))>=g){this.isStarted=true;this.previousPoint=this.lastPoint=b;this.resetInfo("x",f,a);this.resetInfo("y",f,a);d.time=f.time;this.fire("dragstart",f,d)}},onTouchMove:function(c){if(!this.isStarted){this.tryDragStart(c)}if(!this.isStarted){return}var a=c.changedTouches[0],b=a.point;if(this.lastPoint){this.previousPoint=this.lastPoint}this.lastPoint=b;this.lastMoveEvent=c;this.updateInfo("x",c,a);this.updateInfo("y",c,a);this.info.time=c.time;this.fire("drag",c,this.info)},onAxisDragEnd:function(b,a){var c=a.time-a.previousTime[b];if(c>0){a.flick.velocity[b]=(a[b]-a.previous[b])/c}},resetInfo:function(b,f,h){var c=this.lastPoint[b],a=this.startPoint[b],g=c-a,j=b.toUpperCase(),d=this.info;d.touch=h;d.delta[b]=g;d.absDelta[b]=Math.abs(g);d.previousTime[b]=this.startTime;d.previous[b]=a;d[b]=c;d.direction[b]=0;d["start"+j]=this.startPoint[b];d["previous"+j]=d.previous[b];d["page"+j]=d[b];d["delta"+j]=d.delta[b];d["absDelta"+j]=d.absDelta[b];d["previousDelta"+j]=0;d.startTime=this.startTime},updateInfo:function(f,m,j){var o=this,q=o.lastPoint[f],g=o.previousPoint[f],a=o.startPoint[f],b=q-a,d=o.info,p=d.direction,h=f.toUpperCase(),c=d.previous[f];d.touch=j;d.delta[f]=b;d.absDelta[f]=Math.abs(b);if(q!==c&&q!==d[f]){d.previous[f]=d[f];d.previousTime[f]=d.time}d[f]=q;if(q>g){p[f]=1}else{if(q<g){p[f]=-1}}d["start"+h]=a;d["previous"+h]=d.previous[f];d["page"+h]=d[f];d["delta"+h]=d.delta[f];d["absDelta"+h]=d.absDelta[f];d["previousDelta"+h]=d.previous[f]-a;d.startTime=o.startTime},onTouchEnd:function(a){this.doEnd(a)},onTouchCancel:function(a){this.doEnd(a,true);return false},doEnd:function(a,d){if(!this.isStarted){this.tryDragStart(a)}if(this.isStarted){var b=a.changedTouches[0],c=b.point,f=this.info;this.isStarted=false;this.lastPoint=c;this.updateInfo("x",a,b);this.updateInfo("y",a,b);f.time=a.time;this.onAxisDragEnd("x",f);this.onAxisDragEnd("y",f);this.fire(d?"dragcancel":"dragend",a,f);this.startPoint=null;this.previousPoint=null;this.lastPoint=null;this.lastMoveEvent=null}},reset:function(){var a=this;a.isStarted=a.lastPoint=a.startPoint=a.previousPoint=a.lastPoint=a.lastMoveEvent=null;a.initInfo()}},1,0,0,0,0,0,[Ext.event.gesture,"Drag"],function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.drag)}));(Ext.cmd.derive("Ext.event.gesture.Swipe",Ext.event.gesture.SingleTouch,{priority:500,handledEvents:["swipestart","swipe","swipecancel"],inheritableStatics:{MAX_OFFSET_EXCEEDED:"Max Offset Exceeded",MAX_DURATION_EXCEEDED:"Max Duration Exceeded",DISTANCE_NOT_ENOUGH:"Distance Not Enough"},config:{minDistance:80,maxOffset:35,maxDuration:1000},onTouchStart:function(a){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===false){return false}var b=a.changedTouches[0];this.startTime=a.time;this.isHorizontal=true;this.isVertical=true;this.startX=b.pageX;this.startY=b.pageY},onTouchMove:function(h){var g=h.changedTouches[0],p=g.pageX,j=g.pageY,f=p-this.startX,d=j-this.startY,b=Math.abs(p-this.startX),a=Math.abs(j-this.startY),c=h.time-this.startTime,r=this.getMinDistance(),q=h.time,m,o;if(q-this.startTime>this.getMaxDuration()){return this.fail(this.self.MAX_DURATION_EXCEEDED)}if(this.isHorizontal&&a>this.getMaxOffset()){this.isHorizontal=false}if(this.isVertical&&b>this.getMaxOffset()){this.isVertical=false}if(!this.isVertical||!this.isHorizontal){if(this.isHorizontal&&b<r){m=(f<0)?"left":"right";o=b}else{if(this.isVertical&&a<r){m=(d<0)?"up":"down";o=a}}}if(m&&!this.started){this.started=true;this.fire("swipestart",h,{touch:g,direction:m,distance:o,duration:c})}if(!this.isHorizontal&&!this.isVertical){return this.fail(this.self.MAX_OFFSET_EXCEEDED)}},onTouchEnd:function(m){if(this.onTouchMove(m)===false){return false}var j=m.changedTouches[0],q=j.pageX,o=j.pageY,h=q-this.startX,g=o-this.startY,d=Math.abs(h),c=Math.abs(g),b=this.getMinDistance(),f=m.time-this.startTime,p,a;if(this.isVertical&&c<b){this.isVertical=false}if(this.isHorizontal&&d<b){this.isHorizontal=false}if(this.isHorizontal){p=(h<0)?"left":"right";a=d}else{if(this.isVertical){p=(g<0)?"up":"down";a=c}else{return this.fail(this.self.DISTANCE_NOT_ENOUGH)}}this.started=false;this.fire("swipe",m,{touch:j,direction:p,distance:a,duration:f})},onTouchCancel:function(a){this.fire("swipecancel",a);return false},reset:function(){var a=this;a.startTime=a.isHorizontal=a.isVertical=a.startX=a.startY=null}},0,0,0,0,0,0,[Ext.event.gesture,"Swipe"],function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.swipe)}));(Ext.cmd.derive("Ext.event.gesture.EdgeSwipe",Ext.event.gesture.Swipe,{priority:800,handledEvents:["edgeswipe","edgeswipestart","edgeswipeend","edgeswipecancel"],inheritableStatics:{NOT_NEAR_EDGE:"Not Near Edge"},config:{minDistance:60},onTouchStart:function(a){if(Ext.event.gesture.Swipe.prototype.onTouchStart.apply(this,arguments)===false){return false}var b=a.changedTouches[0];this.started=false;this.direction=null;this.isHorizontal=true;this.isVertical=true;this.startX=b.pageX;this.startY=b.pageY},onTouchMove:function(g){var d=g.changedTouches[0],h=d.pageX,m=d.pageY,c=h-this.startX,b=m-this.startY,r=Math.abs(m-this.startY),s=Math.abs(h-this.startX),j=this.getMinDistance(),a=this.getMaxOffset(),t=g.time-this.startTime,q=Ext.Viewport&&Ext.Element.getViewportWidth(),f=Ext.Viewport&&Ext.Element.getViewportHeight(),p,o;if(this.isVertical&&s>a){this.isVertical=false}if(this.isHorizontal&&r>a){this.isHorizontal=false}if(this.isVertical&&this.isHorizontal){if(r>s){this.isHorizontal=false}else{this.isVertical=false}}if(this.isHorizontal){p=(c<0)?"left":"right";o=c}else{if(this.isVertical){p=(b<0)?"up":"down";o=b}}p=this.direction||(this.direction=p);if(p==="up"){o=b*-1}else{if(p==="left"){o=c*-1}}this.distance=o;if(!o){return this.fail(this.self.DISTANCE_NOT_ENOUGH)}if(!this.started){if(p==="right"&&this.startX>j){return this.fail(this.self.NOT_NEAR_EDGE)}else{if(p==="down"&&this.startY>j){return this.fail(this.self.NOT_NEAR_EDGE)}else{if(p==="left"&&(q-this.startX)>j){return this.fail(this.self.NOT_NEAR_EDGE)}else{if(p==="up"&&(f-this.startY)>j){return this.fail(this.self.NOT_NEAR_EDGE)}}}}this.started=true;this.startTime=g.time;this.fire("edgeswipestart",g,{touch:d,direction:p,distance:o,duration:t})}else{this.fire("edgeswipe",g,{touch:d,direction:p,distance:o,duration:t})}},onTouchEnd:function(b){var a;if(this.onTouchMove(b)!==false){a=b.time-this.startTime;this.fire("edgeswipeend",b,{touch:b.changedTouches[0],direction:this.direction,distance:this.distance,duration:a})}},onTouchCancel:function(a){this.fire("edgeswipecancel",a,{touch:a.changedTouches[0]});return false},reset:function(){var a=this;a.started=a.direction=a.isHorizontal=a.isVertical=a.startX=a.startY=a.startTime=a.distance=null}},0,0,0,0,0,0,[Ext.event.gesture,"EdgeSwipe"],function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.edgeSwipe)}));(Ext.cmd.derive("Ext.event.gesture.LongPress",Ext.event.gesture.SingleTouch,{priority:400,inheritableStatics:{DURATION_NOT_ENOUGH:"Duration Not Enough"},config:{moveDistance:8,minDuration:1000},handledEvents:["longpress","taphold"],fireLongPress:function(a){this.fire("longpress",a,{touch:a.changedTouches[0],duration:this.getMinDuration()});this.isLongPress=true},onTouchStart:function(a){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===false){return false}this.startPoint=a.changedTouches[0].point;this.isLongPress=false;this.setLongPressTimer(a)},setLongPressTimer:function(b){var a=this;a.timer=Ext.defer(function(){a.fireLongPress(b)},a.getMinDuration())},onTouchMove:function(b){var a=b.changedTouches[0].point;if(Math.abs(a.getDistanceTo(this.startPoint))>=this.getMoveDistance()){return this.fail(this.self.TOUCH_MOVED)}},onTouchEnd:function(){if(!this.isLongPress){return this.fail(this.self.DURATION_NOT_ENOUGH)}},fail:function(){clearTimeout(this.timer);return Ext.event.gesture.SingleTouch.prototype.fail.apply(this,arguments)},reset:function(){this.isLongPress=this.startPoint=null},fire:function(a){if(a==="longpress"){var b=Array.prototype.slice.call(arguments);b[0]="taphold";this.fire.apply(this,b)}return Ext.event.gesture.SingleTouch.prototype.fire.apply(this,arguments)}},0,0,0,0,0,0,[Ext.event.gesture,"LongPress"],function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.longPress)}));(Ext.cmd.derive("Ext.event.gesture.MultiTouch",Ext.event.gesture.Recognizer,{requiredTouchesCount:2,isTracking:false,isStarted:false,onTouchStart:function(b){var c=this.requiredTouchesCount,a=b.touches,d=a.length;if(d===c){this.start(b)}else{if(d>c){this.end(b)}}},onTouchEnd:function(a){this.end(a)},onTouchCancel:function(a){this.end(a,true);return false},start:function(){if(!this.isTracking){this.isTracking=true;this.isStarted=false}},end:function(b,a){if(this.isTracking){this.isTracking=false;if(this.isStarted){this.isStarted=false;this[a?"fireCancel":"fireEnd"](b)}}},reset:function(){this.isTracking=this.isStarted=false}},0,0,0,0,0,0,[Ext.event.gesture,"MultiTouch"],0));(Ext.cmd.derive("Ext.event.gesture.Pinch",Ext.event.gesture.MultiTouch,{priority:600,handledEvents:["pinchstart","pinch","pinchend","pinchcancel"],startDistance:0,lastTouches:null,onTouchMove:function(f){if(!this.isTracking){return}var d=f.touches,a,c,b;a=d[0].point;c=d[1].point;b=a.getDistanceTo(c);if(b===0){return}if(!this.isStarted){this.isStarted=true;this.startDistance=b;this.fire("pinchstart",f,{touches:d,distance:b,scale:1})}else{this.fire("pinch",f,{touches:d,distance:b,scale:b/this.startDistance})}},fireEnd:function(a){this.fire("pinchend",a)},fireCancel:function(a){this.fire("pinchcancel",a)},fail:function(){return Ext.event.gesture.MultiTouch.prototype.fail.apply(this,arguments)},reset:function(){this.lastTouches=null;this.startDistance=0;Ext.event.gesture.MultiTouch.prototype.reset.call(this)}},0,0,0,0,0,0,[Ext.event.gesture,"Pinch"],function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.pinch)}));(Ext.cmd.derive("Ext.event.gesture.Rotate",Ext.event.gesture.MultiTouch,{priority:700,handledEvents:["rotatestart","rotate","rotateend","rotatecancel"],startAngle:0,lastTouches:null,lastAngle:null,onTouchMove:function(b){if(!this.isTracking){return}var a=b.touches,g=this.lastAngle,j,m,h,f,c,d;j=a[0].point;m=a[1].point;h=j.getAngleTo(m);if(g!==null){d=Math.abs(g-h);f=h+360;c=h-360;if(Math.abs(f-g)<d){h=f}else{if(Math.abs(c-g)<d){h=c}}}this.lastAngle=h;if(!this.isStarted){this.isStarted=true;this.startAngle=h;this.fire("rotatestart",b,{touches:a,angle:h,rotation:0})}else{this.fire("rotate",b,{touches:a,angle:h,rotation:h-this.startAngle})}this.lastTouches=Ext.Array.clone(a)},fireEnd:function(a){this.lastAngle=null;this.fire("rotateend",a)},fireCancel:function(a){this.lastAngle=null;this.fire("rotatecancel",a)},reset:function(){var a=this;a.lastTouches=a.lastAngle=a.startAngle=null;Ext.event.gesture.MultiTouch.prototype.reset.call(this)}},0,0,0,0,0,0,[Ext.event.gesture,"Rotate"],function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.rotate)}));(Ext.cmd.derive("Ext.event.gesture.Tap",Ext.event.gesture.SingleTouch,{priority:200,handledEvents:["tap","tapcancel"],config:{moveDistance:8},onTouchStart:function(a){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.call(this,a)===false){return false}this.startPoint=a.changedTouches[0].point},onTouchMove:function(c){var a=c.changedTouches[0],b=a.point;if(Math.abs(b.getDistanceTo(this.startPoint))>=this.getMoveDistance()){this.fire("tapcancel",c,{touch:a});return this.fail(this.self.TOUCH_MOVED)}},onTouchEnd:function(a){this.fire("tap",a,{touch:a.changedTouches[0]})},onTouchCancel:function(a){this.fire("tapcancel",a,{touch:a.changedTouches[0]});return false},reset:function(){this.startPoint=null}},0,0,0,0,0,0,[Ext.event.gesture,"Tap"],function(b){var a=Ext.manifest.gestures;b.instance=new b(a&&a.tap)}));(Ext.cmd.derive("Ext.event.publisher.Focus",Ext.event.publisher.Dom,{type:"focus",handledEvents:["focusenter","focusleave","focusmove"],handledDomEvents:["focusin","focusout"],doDelegatedEvent:function(b,a){var d=this,c;b=Ext.event.publisher.Dom.prototype.doDelegatedEvent.call(this,b,false);if(b){if(b.type==="focusout"){if(b.relatedTarget==null){d.processFocusIn(b,b.target,document.body,a)}}else{c=b.relatedTarget;d.processFocusIn(b,(c==null||!c.tagName)?document.body:c,b.target,a)}}},processFocusIn:function(m,o,d,q){var p=this,b,c,j=[],a,h,g,f;g=Ext.fly(o);f=Ext.fly(d);if((g&&g.isFocusSuspended())||(f&&f.isFocusSuspended())){return}for(c=o,b=Ext.dom.Element.getCommonAncestor(d,o,true);c&&c!==b;c=c.parentNode){j.push(c)}if(j.length){a=p.createSyntheticEvent("focusleave",m,o,d);p.publish("focusleave",j,a);if(a.isStopped){return}}j.length=0;for(c=d;c!==b;c=c.parentNode){j.push(c)}h=p.createSyntheticEvent("focusenter",m,d,o);if(j.length){p.publish("focusenter",j,h);if(h.isStopped){return}}j=p.getPropagatingTargets(b);if(j.length){a=p.createSyntheticEvent("focusmove",m,d,o);p.publish("focusmove",j,a);if(a.isStopped){return}}if(q){p.afterEvent(m)}Ext.GlobalEvents.fireEvent("focus",{event:h,toElement:d,fromElement:o})},createSyntheticEvent:function(d,b,a,c){var f=new Ext.event.Event(b);f.type=d;f.relatedTarget=c;f.target=a;return f}},0,0,0,0,0,0,[Ext.event.publisher,"Focus"],function(b){var a;b.instance=new b();if(!Ext.supports.FocusinFocusoutEvents){this.override({handledDomEvents:["focus","blur"],doDelegatedEvent:function(d,c){var g=this;d=g.callSuper([d,false]);if(d){clearTimeout(a);a=0;if(d.type==="blur"){var f=d.target===window?document.body:d.target;a=setTimeout(function(){a=0;g.processFocusIn(d,f,document.body,c);b.previousActiveElement=null},0);if(d.target===window||d.target===document){b.previousActiveElement=null}else{b.previousActiveElement=d.target}}else{g.processFocusIn(d,b.previousActiveElement||document.body,d.target===window?document.body:d.target,c)}}}})}}));(Ext.cmd.derive("Ext.fx.State",Ext.Base,{isAnimatable:{"background-color":true,"background-image":true,"background-position":true,"border-bottom-color":true,"border-bottom-width":true,"border-color":true,"border-left-color":true,"border-left-width":true,"border-right-color":true,"border-right-width":true,"border-spacing":true,"border-top-color":true,"border-top-width":true,"border-width":true,bottom:true,color:true,crop:true,"font-size":true,"font-weight":true,height:true,left:true,"letter-spacing":true,"line-height":true,"margin-bottom":true,"margin-left":true,"margin-right":true,"margin-top":true,"max-height":true,"max-width":true,"min-height":true,"min-width":true,opacity:true,"outline-color":true,"outline-offset":true,"outline-width":true,"padding-bottom":true,"padding-left":true,"padding-right":true,"padding-top":true,right:true,"text-indent":true,"text-shadow":true,top:true,"vertical-align":true,visibility:true,width:true,"word-spacing":true,"z-index":true,zoom:true,transform:true},constructor:function(a){this.data={};this.set(a)},setConfig:function(a){this.set(a);return this},setRaw:function(a){this.data=a;return this},clear:function(){return this.setRaw({})},setTransform:function(c,h){var g=this.data,a=Ext.isArray(h),b=g.transform,f,d;if(!b){b=g.transform={translateX:0,translateY:0,translateZ:0,scaleX:1,scaleY:1,scaleZ:1,rotate:0,rotateX:0,rotateY:0,rotateZ:0,skewX:0,skewY:0}}if(typeof c=="string"){switch(c){case"translate":if(a){f=h.length;if(f==0){break}b.translateX=h[0];if(f==1){break}b.translateY=h[1];if(f==2){break}b.translateZ=h[2]}else{b.translateX=h}break;case"rotate":if(a){f=h.length;if(f==0){break}b.rotateX=h[0];if(f==1){break}b.rotateY=h[1];if(f==2){break}b.rotateZ=h[2]}else{b.rotate=h}break;case"scale":if(a){f=h.length;if(f==0){break}b.scaleX=h[0];if(f==1){break}b.scaleY=h[1];if(f==2){break}b.scaleZ=h[2]}else{b.scaleX=h;b.scaleY=h}break;case"skew":if(a){f=h.length;if(f==0){break}b.skewX=h[0];if(f==1){break}b.skewY=h[1]}else{b.skewX=h}break;default:b[c]=h}}else{for(d in c){if(c.hasOwnProperty(d)){h=c[d];this.setTransform(d,h)}}}},set:function(c,b){var a=this.data,d;if(typeof c!="string"){for(d in c){b=c[d];if(d==="transform"){this.setTransform(b)}else{a[d]=b}}}else{if(c==="transform"){this.setTransform(b)}else{a[c]=b}}return this},unset:function(a){var b=this.data;if(b.hasOwnProperty(a)){delete b[a]}return this},getData:function(){return this.data}},1,0,0,0,0,0,[Ext.fx,"State"],0));(Ext.cmd.derive("Ext.fx.animation.Abstract",Ext.Evented,{isAnimation:true,config:{name:"",element:null,before:null,from:{},to:{},after:null,states:{},duration:300,easing:"linear",iteration:1,direction:"normal",delay:0,onBeforeStart:null,callback:null,onEnd:null,onBeforeEnd:null,scope:null,reverse:null,preserveEndState:false,replacePrevious:true},STATE_FROM:"0%",STATE_TO:"100%",DIRECTION_UP:"up",DIRECTION_DOWN:"down",DIRECTION_LEFT:"left",DIRECTION_RIGHT:"right",stateNameRegex:/^(?:[\d\.]+)%$/,constructor:function(){this.states={};Ext.Evented.prototype.constructor.apply(this,arguments);return this},applyElement:function(a){return Ext.get(a)},applyBefore:function(a,b){if(a){return Ext.factory(a,Ext.fx.State,b)}},applyAfter:function(b,a){if(b){return Ext.factory(b,Ext.fx.State,a)}},setFrom:function(a){return this.setState(this.STATE_FROM,a)},setTo:function(a){return this.setState(this.STATE_TO,a)},getFrom:function(){return this.getState(this.STATE_FROM)},getTo:function(){return this.getState(this.STATE_TO)},setStates:function(b){var a=this.stateNameRegex,c;for(c in b){if(a.test(c)){this.setState(c,b[c])}}return this},getStates:function(){return this.states},updateCallback:function(a){if(a){this.setOnEnd(a)}},end:function(){this.stop()},stop:function(){this.fireEvent("stop",this)},destroy:function(){this.stop();Ext.Evented.prototype.destroy.call(this)},setState:function(d,b){var c=this.getStates(),a;a=Ext.factory(b,Ext.fx.State,c[d]);if(a){c[d]=a}return this},getState:function(a){return this.getStates()[a]},getData:function(){var j=this,b=j.getStates(),g={},m=j.getBefore(),d=j.getAfter(),o=b[j.STATE_FROM],p=b[j.STATE_TO],q=o.getData(),h=p.getData(),f,c,a;for(c in b){if(b.hasOwnProperty(c)){a=b[c];f=a.getData();g[c]=f}}return{before:m?m.getData():{},after:d?d.getData():{},states:g,from:q,to:h,duration:j.getDuration(),iteration:j.getIteration(),direction:j.getDirection(),easing:j.getEasing(),delay:j.getDelay(),onEnd:j.getOnEnd(),onBeforeEnd:j.getOnBeforeEnd(),onBeforeStart:j.getOnBeforeStart(),scope:j.getScope(),preserveEndState:j.getPreserveEndState(),replacePrevious:j.getReplacePrevious()}}},1,0,0,0,0,0,[Ext.fx.animation,"Abstract"],0));(Ext.cmd.derive("Ext.fx.animation.Slide",Ext.fx.animation.Abstract,{alternateClassName:"Ext.fx.animation.SlideIn",config:{direction:"left",out:false,offset:0,easing:"auto",containerBox:"auto",elementBox:"auto",isElementBoxFit:true,useCssTransform:true},reverseDirectionMap:{up:"down",down:"up",left:"right",right:"left"},applyEasing:function(a){if(a==="auto"){return"ease-"+((this.getOut())?"in":"out")}return a},getContainerBox:function(){var a=this._containerBox;if(a==="auto"){a=this.getElement().getParent().getBox()}return a},getElementBox:function(){var a=this._elementBox;if(this.getIsElementBoxFit()){return this.getContainerBox()}if(a==="auto"){a=this.getElement().getBox()}return a},getData:function(){var m=this.getElementBox(),s=this.getContainerBox(),b=m?m:s,g=this.getFrom(),j=this.getTo(),a=this.getOut(),u=this.getOffset(),r=this.getDirection(),q=this.getUseCssTransform(),c=this.getReverse(),t=0,p=0,o,f,h,d;if(c){r=this.reverseDirectionMap[r]}switch(r){case this.DIRECTION_UP:if(a){p=s.top-b.top-b.height-u}else{p=s.bottom-b.bottom+b.height+u}break;case this.DIRECTION_DOWN:if(a){p=s.bottom-b.bottom+b.height+u}else{p=s.top-b.height-b.top-u}break;case this.DIRECTION_RIGHT:if(a){t=s.right-b.right+b.width+u}else{t=s.left-b.left-b.width-u}break;case this.DIRECTION_LEFT:if(a){t=s.left-b.left-b.width-u}else{t=s.right-b.right+b.width+u}break}o=(a)?0:t;f=(a)?0:p;if(q){g.setTransform({translateX:o,translateY:f})}else{g.set("left",o);g.set("top",f)}h=(a)?t:0;d=(a)?p:0;if(q){j.setTransform({translateX:h,translateY:d})}else{j.set("left",h);j.set("top",d)}return Ext.fx.animation.Abstract.prototype.getData.apply(this,arguments)}},0,0,0,0,["animation.slide","animation.slideIn"],0,[Ext.fx.animation,"Slide",Ext.fx.animation,"SlideIn"],0));(Ext.cmd.derive("Ext.fx.animation.SlideOut",Ext.fx.animation.Slide,{config:{out:true}},0,0,0,0,["animation.slideOut"],0,[Ext.fx.animation,"SlideOut"],0));(Ext.cmd.derive("Ext.fx.animation.Fade",Ext.fx.animation.Abstract,{alternateClassName:"Ext.fx.animation.FadeIn",config:{out:false,before:{display:null,opacity:0},after:{opacity:null},reverse:null},updateOut:function(b){var a=this.getTo(),c=this.getFrom();if(b){c.set("opacity",1);a.set("opacity",0)}else{c.set("opacity",0);a.set("opacity",1)}}},0,0,0,0,["animation.fade","animation.fadeIn"],0,[Ext.fx.animation,"Fade",Ext.fx.animation,"FadeIn"],0));(Ext.cmd.derive("Ext.fx.animation.FadeOut",Ext.fx.animation.Fade,{config:{out:true,before:{}}},0,0,0,0,["animation.fadeOut"],0,[Ext.fx.animation,"FadeOut"],0));(Ext.cmd.derive("Ext.fx.animation.Flip",Ext.fx.animation.Abstract,{config:{easing:"ease-in",direction:"right",half:false,out:null},getData:function(){var f=this,h=f.getFrom(),j=f.getTo(),g=f.getDirection(),q=f.getOut(),r=f.getHalf(),a=r?90:180,c=1,p=1,o=0,m=0,d=0,b=0;if(q){p=0.8}else{c=0.8}switch(g){case this.DIRECTION_UP:if(q){d=a}else{o=-a}break;case this.DIRECTION_DOWN:if(q){d=-a}else{o=a}break;case this.DIRECTION_RIGHT:if(q){b=a}else{m=-a}break;case this.DIRECTION_LEFT:if(q){b=-a}else{m=a}break}h.setTransform({rotateX:o,rotateY:m,scale:c});j.setTransform({rotateX:d,rotateY:b,scale:p});return Ext.fx.animation.Abstract.prototype.getData.call(this)}},0,0,0,0,["animation.flip"],0,[Ext.fx.animation,"Flip"],0));(Ext.cmd.derive("Ext.fx.animation.Pop",Ext.fx.animation.Abstract,{alternateClassName:"Ext.fx.animation.PopIn",config:{out:false,before:{display:null,opacity:0},after:{opacity:null}},getData:function(){var a=this.getTo(),c=this.getFrom(),b=this.getOut();if(b){c.set("opacity",1);c.setTransform({scale:1});a.set("opacity",0);a.setTransform({scale:0})}else{c.set("opacity",0);c.setTransform({scale:0});a.set("opacity",1);a.setTransform({scale:1})}return Ext.fx.animation.Abstract.prototype.getData.apply(this,arguments)}},0,0,0,0,["animation.pop","animation.popIn"],0,[Ext.fx.animation,"Pop",Ext.fx.animation,"PopIn"],0));(Ext.cmd.derive("Ext.fx.animation.PopOut",Ext.fx.animation.Pop,{config:{out:true,before:{}}},0,0,0,0,["animation.popOut"],0,[Ext.fx.animation,"PopOut"],0));(Ext.cmd.derive("Ext.fx.Animation",Ext.Base,{constructor:function(c){var b=Ext.fx.animation.Abstract,a;if(typeof c=="string"){a=c;c={}}else{if(c&&c.type){a=c.type}}if(a){b=Ext.ClassManager.getByAlias("animation."+a)}return Ext.factory(c,b)}},1,0,0,0,0,0,[Ext.fx,"Animation"],0));(Ext.cmd.derive("Ext.fx.runner.Css",Ext.Evented,{prefixedProperties:{transform:true,"transform-origin":true,perspective:true,"transform-style":true,transition:true,"transition-property":true,"transition-duration":true,"transition-timing-function":true,"transition-delay":true,animation:true,"animation-name":true,"animation-duration":true,"animation-iteration-count":true,"animation-direction":true,"animation-timing-function":true,"animation-delay":true},lengthProperties:{top:true,right:true,bottom:true,left:true,width:true,height:true,"max-height":true,"max-width":true,"min-height":true,"min-width":true,"margin-bottom":true,"margin-left":true,"margin-right":true,"margin-top":true,"padding-bottom":true,"padding-left":true,"padding-right":true,"padding-top":true,"border-bottom-width":true,"border-left-width":true,"border-right-width":true,"border-spacing":true,"border-top-width":true,"border-width":true,"outline-width":true,"letter-spacing":true,"line-height":true,"text-indent":true,"word-spacing":true,"font-size":true,translate:true,translateX:true,translateY:true,translateZ:true,translate3d:true},durationProperties:{"transition-duration":true,"transition-delay":true,"animation-duration":true,"animation-delay":true},angleProperties:{rotate:true,rotateX:true,rotateY:true,rotateZ:true,skew:true,skewX:true,skewY:true},lengthUnitRegex:/([a-z%]*)$/,DEFAULT_UNIT_LENGTH:"px",DEFAULT_UNIT_ANGLE:"deg",DEFAULT_UNIT_DURATION:"ms",formattedNameCache:{},transformMethods3d:["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","skewX","skewY","scaleX","scaleY","scaleZ"],transformMethodsNo3d:["translateX","translateY","rotate","skewX","skewY","scaleX","scaleY"],constructor:function(){var a=this;a.transformMethods=Ext.feature.has.Css3dTransforms?a.transformMethods3d:a.transformMethodsNo3d;a.vendorPrefix=Ext.browser.getStyleDashPrefix();a.ruleStylesCache={};Ext.Evented.prototype.constructor.call(this)},getStyleSheet:function(){var a=this.styleSheet,b,c;if(!a){b=document.createElement("style");b.type="text/css";(document.head||document.getElementsByTagName("head")[0]).appendChild(b);c=document.styleSheets;this.styleSheet=a=c[c.length-1]}return a},applyRules:function(p){var m=this.getStyleSheet(),b=this.ruleStylesCache,a=m.cssRules,f,h,o,d,g,c,j;for(f in p){h=p[f];o=b[f];if(o===undefined){g=a.length;m.insertRule(f+"{}",g);o=b[f]=a.item(g).style}d=o.$cache;if(!d){d=o.$cache={}}for(c in h){j=this.formatValue(h[c],c);c=this.formatName(c);if(d[c]!==j){d[c]=j;if(j===null){o.removeProperty(c)}else{o.setProperty(c,j,"important")}}}}return this},applyStyles:function(d){var h,c,g,b,a,f;for(h in d){if(d.hasOwnProperty(h)){c=document.getElementById(h);if(!c){continue}g=c.style;b=d[h];for(a in b){if(b.hasOwnProperty(a)){f=this.formatValue(b[a],a);a=this.formatName(a);if(f===null){g.removeProperty(a)}else{g.setProperty(a,f,"important")}}}}}return this},formatName:function(c){var b=this.formattedNameCache,a=b[c];if(!a){if((Ext.os.is.Tizen||!Ext.feature.has.CssTransformNoPrefix)&&this.prefixedProperties[c]){a=this.vendorPrefix+c}else{a=c}b[c]=a}return a},formatValue:function(p,d){var m=typeof p,b=this.DEFAULT_UNIT_LENGTH,h,c,g,j,f,a,o;if(p===null){return""}if(m=="string"){if(this.lengthProperties[d]){o=p.match(this.lengthUnitRegex)[1];if(o.length>0){}else{return p+b}}return p}else{if(m=="number"){if(p==0){return"0"}if(this.lengthProperties[d]){return p+b}if(this.angleProperties[d]){return p+this.DEFAULT_UNIT_ANGLE}if(this.durationProperties[d]){return p+this.DEFAULT_UNIT_DURATION}}else{if(d==="transform"){h=this.transformMethods;f=[];for(g=0,j=h.length;g<j;g++){c=h[g];f.push(c+"("+this.formatValue(p[c],c)+")")}return f.join(" ")}else{if(Ext.isArray(p)){a=[];for(g=0,j=p.length;g<j;g++){a.push(this.formatValue(p[g],d))}return(a.length>0)?a.join(", "):"none"}}}}return p}},1,0,0,0,0,0,[Ext.fx.runner,"Css"],0));(Ext.cmd.derive("Ext.fx.runner.CssTransition",Ext.fx.runner.Css,{alternateClassName:"Ext.Animator",singleton:true,listenersAttached:false,constructor:function(){this.runningAnimationsData={};return this.callParent(arguments)},attachListeners:function(){this.listenersAttached=true;Ext.getWin().on("transitionend","onTransitionEnd",this)},onTransitionEnd:function(c){var b=c.target,a=b.id;if(a&&this.runningAnimationsData.hasOwnProperty(a)){this.refreshRunningAnimationsData(Ext.get(b),[c.browserEvent.propertyName])}},onAnimationEnd:function(d,c,a,g,r){var s=d.getId(),h=this.runningAnimationsData[s],m={},p={},q,f,b,j,o;a.un("stop","onAnimationStop",this);if(h){q=h.nameMap}m[s]=p;if(c.onBeforeEnd){c.onBeforeEnd.call(c.scope||this,d,g)}a.fireEvent("animationbeforeend",a,d,g);this.fireEvent("animationbeforeend",this,a,d,g);if(r||(!g&&!c.preserveEndState)){f=c.toPropertyNames;for(b=0,j=f.length;b<j;b++){o=f[b];if(q&&!q.hasOwnProperty(o)){p[o]=null}}}if(c.after){Ext.merge(p,c.after)}this.applyStyles(m);if(c.onEnd){c.onEnd.call(c.scope||this,d,g)}a.fireEvent("animationend",a,d,g);this.fireEvent("animationend",this,a,d,g);Ext.AnimationQueue.stop(Ext.emptyFn,a)},onAllAnimationsEnd:function(c){var a=c.getId(),b={};delete this.runningAnimationsData[a];b[a]={"transition-property":null,"transition-duration":null,"transition-timing-function":null,"transition-delay":null};this.applyStyles(b);this.fireEvent("animationallend",this,c)},hasRunningAnimations:function(b){var a=b.getId(),c=this.runningAnimationsData;return c.hasOwnProperty(a)&&c[a].sessions.length>0},refreshRunningAnimationsData:function(d,o,y,t){var h=d.getId(),u=this.runningAnimationsData,a=u[h];if(!a){return}var q=a.nameMap,w=a.nameList,b=a.sessions,g,m,f,z,p,c,v,s,r=false;y=Boolean(y);t=Boolean(t);if(!b){return this}g=b.length;if(g===0){return this}if(t){a.nameMap={};w.length=0;for(p=0;p<g;p++){c=b[p];this.onAnimationEnd(d,c.data,c.animation,y,t)}b.length=0}else{for(p=0;p<g;p++){c=b[p];v=c.map;s=c.list;for(m=0,f=o.length;m<f;m++){z=o[m];if(v[z]){delete v[z];Ext.Array.remove(s,z);c.length--;if(--q[z]==0){delete q[z];Ext.Array.remove(w,z)}}}if(c.length==0){b.splice(p,1);p--;g--;r=true;this.onAnimationEnd(d,c.data,c.animation,y)}}}if(!t&&!y&&b.length==0&&r){this.onAllAnimationsEnd(d)}},getRunningData:function(b){var a=this.runningAnimationsData;if(!a.hasOwnProperty(b)){a[b]={nameMap:{},nameList:[],sessions:[]}}return a[b]},getTestElement:function(){var a=this.testElement,d,b,c;if(!a){d=document.createElement("iframe");d.setAttribute("tabIndex",-1);c=d.style;c.setProperty("visibility","hidden","important");c.setProperty("width","0px","important");c.setProperty("height","0px","important");c.setProperty("position","absolute","important");c.setProperty("border","0px","important");c.setProperty("zIndex","-1000","important");document.body.appendChild(d);b=d.contentDocument;b.open();b.writeln("</body>");b.close();this.testElement=a=b.createElement("div");a.style.setProperty("position","absolute","important");b.body.appendChild(a);this.testElementComputedStyle=window.getComputedStyle(a)}return a},getCssStyleValue:function(d,b){var a=this.getTestElement(),c=this.testElementComputedStyle,f=a.style;f.setProperty(d,b);if(Ext.browser.is.Firefox){a.offsetHeight}b=c.getPropertyValue(d);f.removeProperty(d);return b},run:function(M){var o=this,z=o.lengthProperties,I={},h={},p={},u,f,K,v,B,E,D,O,b,r,G,a,N,L,c,C,m,y,d,q,A,w,H,J,t,g,s,F;if(!o.listenersAttached){o.attachListeners()}M=Ext.Array.from(M);for(a=0,L=M.length;a<L;a++){c=M[a];c=Ext.factory(c,Ext.fx.Animation);u=c.getElement();Ext.AnimationQueue.start(Ext.emptyFn,c);y=window.getComputedStyle(u.dom);f=u.getId();p=Ext.merge({},c.getData());if(c.onBeforeStart){c.onBeforeStart.call(c.scope||o,u)}c.fireEvent("animationstart",c);o.fireEvent("animationstart",o,c);p[f]=p;B=p.before;K=p.from;v=p.to;p.fromPropertyNames=E=[];p.toPropertyNames=D=[];for(q in v){if(v.hasOwnProperty(q)){v[q]=A=o.formatValue(v[q],q);d=o.formatName(q);J=z.hasOwnProperty(q);if(!J){A=o.getCssStyleValue(d,A)}if(K.hasOwnProperty(q)){K[q]=H=o.formatValue(K[q],q);if(!J){H=o.getCssStyleValue(d,H)}if(A!==H){E.push(d);D.push(d)}}else{w=y.getPropertyValue(d);if(A!==w){D.push(d)}}}}C=D.length;if(C===0){o.onAnimationEnd(u,p,c);continue}r=o.getRunningData(f);s=r.sessions;if(s.length>0){o.refreshRunningAnimationsData(u,Ext.Array.merge(E,D),true,p.replacePrevious)}t=r.nameMap;g=r.nameList;m={};for(N=0;N<C;N++){q=D[N];m[q]=true;if(!t.hasOwnProperty(q)){t[q]=1;g.push(q)}else{t[q]++}}F={element:u,map:m,list:D.slice(),length:C,data:p,animation:c};s.push(F);c.on("stop","onAnimationStop",o);G=Ext.apply({},B);Ext.apply(G,K);if(g.length>0){E=Ext.Array.difference(g,E);D=Ext.Array.merge(E,D);G["transition-property"]=E}I[f]=G;h[f]=Ext.apply({},v);h[f]["transition-property"]=D;h[f]["transition-duration"]=p.duration;h[f]["transition-timing-function"]=p.easing;h[f]["transition-delay"]=p.delay;c.startTime=Date.now()}b=o.$className;o.applyStyles(I);O=function(j){if(j.data===b&&j.source===window){window.removeEventListener("message",O,false);o.applyStyles(h)}};if(window.requestAnimationFrame){window.requestAnimationFrame(function(){window.addEventListener("message",O,false);window.postMessage(b,"*")})}else{Ext.defer(function(){window.addEventListener("message",O,false);window.postMessage(b,"*")},1)}},onAnimationStop:function(c){var f=this.runningAnimationsData,h,j,g,a,b,d;for(h in f){if(f.hasOwnProperty(h)){j=f[h];g=j.sessions;for(a=0,b=g.length;a<b;a++){d=g[a];if(d.animation===c){this.refreshRunningAnimationsData(d.element,d.list.slice(),false)}}}}}},1,0,0,0,0,0,[Ext.fx.runner,"CssTransition",Ext,"Animator"],0));(Ext.cmd.derive("Ext.mixin.Container",Ext.Mixin,{mixinConfig:{id:"container"},isContainer:true,config:{referenceHolder:false},getReferences:function(){Ext.ComponentManager.fixReferences();return this.refs||null},lookup:function(b){var a=this.getReferences();return(a&&a[b])||null},lookupReference:function(a){return this.lookup(a)},privates:{attachReference:function(d){var b=this,a,c;if(b.destroying||b.destroyed){return}c=b.refs||(b.refs={});a=d.referenceKey;c[a]=d},clearReference:function(c){var b=this.refs,a=c.referenceKey;if(b&&a){c.viewModelKey=c.referenceKey=b[a]=null}},containerOnAdded:function(b,a){if(a){Ext.ComponentManager.markReferencesDirty()}},containerOnRemoved:function(a){var b;if(!a){b=this.lookupReferenceHolder();if(b){Ext.ComponentManager.markReferencesDirty();b.clearReferences()}}},clearReferences:function(){this.refs=null},initContainerInheritedState:function(d,b){var g=this,a=g.getController(),h=g.getSession(),c=g.getConfig("viewModel",true),j=g.getReference(),f=g.getReferenceHolder();if(a){d.referenceHolder=a;f=true}else{if(f){d.referenceHolder=g}}if(f){d.referencePath=""}else{if(j&&g.isParentReference){d.referencePath=g.referenceKey+"."}}if(h){d.session=h}if(c){d.viewModelPath=""}else{if(j&&g.isParentReference){d.viewModelPath=g.viewModelKey+"."}}},setupReference:function(b){var a;if(b&&b.charAt(a=b.length-1)===">"){this.isParentReference=true;b=b.substring(0,a)}return b}}},0,0,0,0,0,0,[Ext.mixin,"Container"],0));(Ext.cmd.derive("Ext.perf.Accumulator",Ext.Base,function(){var h=null,b=Ext.global.chrome,j,g=function(){g=Ext.now;var q,o;if(Ext.isChrome&&b&&b.Interval){q=new b.Interval();q.start();g=function(){return q.microseconds()/1000}}else{if(window.ActiveXObject){try{o=new ActiveXObject("SenchaToolbox.Toolbox");Ext.senchaToolbox=o;g=function(){return o.milliseconds}}catch(p){}}}Ext.perf.getTimestamp=Ext.perf.Accumulator.getTimestamp=g;return g()};function c(p,o){p.sum+=o;p.min=Math.min(p.min,o);p.max=Math.max(p.max,o)}function m(p){var r=p?p:(g()-this.time),o=this,q=o.accum;++q.count;if(!--q.depth){c(q.total,r)}c(q.pure,r-o.childTime);h=o.parent;if(h){++h.accum.childCount;h.childTime+=r}}function f(){return{min:Number.MAX_VALUE,max:0,sum:0}}function d(p,o){return function(){var r=p.enter(),q=o.apply(this,arguments);r.leave();return q}}function a(s,r,q,p){var o={avg:0,min:p.min,max:p.max,sum:0};if(s){q=q||0;o.sum=p.sum-r*q;o.avg=o.sum/s}return o}return{constructor:function(o){var p=this;p.count=p.childCount=p.depth=p.maxDepth=0;p.pure=f();p.total=f();p.name=o},statics:{getTimestamp:g},format:function(o){if(!j){j=new Ext.XTemplate(["{name} - {count} call(s)",'<tpl if="count">','<tpl if="childCount">'," ({childCount} children)","</tpl>",'<tpl if="depth - 1">'," ({depth} deep)","</tpl>",'<tpl for="times">',", {type}: {[this.time(values.sum)]} msec (","avg={[this.time(values.sum / parent.count)]}",")","</tpl>","</tpl>"].join(""),{time:function(q){return Math.round(q*100)/100}})}var p=this.getData(o);p.name=this.name;p.pure.type="Pure";p.total.type="Total";p.times=[p.pure,p.total];return j.apply(p)},getData:function(o){var p=this;return{count:p.count,childCount:p.childCount,depth:p.maxDepth,pure:a(p.count,p.childCount,o,p.pure),total:a(p.count,p.childCount,o,p.total)}},enter:function(){var o=this,p={accum:o,leave:m,childTime:0,parent:h};++o.depth;if(o.maxDepth<o.depth){o.maxDepth=o.depth}h=p;p.time=g();return p},monitor:function(o,r,q){var p=this.enter();if(q){o.apply(r,q)}else{o.call(r)}p.leave()},report:function(){Ext.log(this.format())},tap:function(s,u){var t=this,A=typeof u==="string"?[u]:u,r,v,p,o,z,y,w,q;q=function(){if(typeof s==="string"){r=Ext.global;o=s.split(".");for(p=0,z=o.length;p<z;++p){r=r[o[p]]}}else{r=s}for(p=0,z=A.length;p<z;++p){y=A[p];v=y.charAt(0)==="!";if(v){y=y.substring(1)}else{v=!(y in r.prototype)}w=v?r:r.prototype;w[y]=d(t,w[y])}};Ext.ClassManager.onCreated(q,t,s);return t}}},1,0,0,0,0,0,[Ext.perf,"Accumulator"],function(){Ext.perf.getTimestamp=this.getTimestamp}));(Ext.cmd.derive("Ext.perf.Monitor",Ext.Base,{singleton:true,alternateClassName:"Ext.Perf",constructor:function(){this.accumulators=[];this.accumulatorsByName={}},calibrate:function(){var b=new Ext.perf.Accumulator("$"),g=b.total,c=Ext.perf.Accumulator.getTimestamp,f=0,h,a,d;d=c();do{h=b.enter();h.leave();++f}while(g.sum<100);a=c();return(a-d)/f},get:function(c){var a=this,b=a.accumulatorsByName[c];if(!b){a.accumulatorsByName[c]=b=new Ext.perf.Accumulator(c);a.accumulators.push(b)}return b},enter:function(a){return this.get(a).enter()},monitor:function(b,a,c){this.get(b).monitor(a,c)},report:function(){var a=this,c=a.accumulators,b=a.calibrate();c.sort(function(f,d){return(f.name<d.name)?-1:((d.name<f.name)?1:0)});a.updateGC();Ext.log("Calibration: "+Math.round(b*100)/100+" msec/sample");Ext.each(c,function(d){Ext.log(d.format(b))})},getData:function(a){var c={},b=this.accumulators;Ext.each(b,function(d){if(a||d.count){c[d.name]=d.getData()}});return c},reset:function(){Ext.each(this.accumulators,function(a){var b=a;b.count=b.childCount=b.depth=b.maxDepth=0;b.pure={min:Number.MAX_VALUE,max:0,sum:0};b.total={min:Number.MAX_VALUE,max:0,sum:0}})},updateGC:function(){var b=this.accumulatorsByName.GC,c=Ext.senchaToolbox,a;if(b){b.count=c.garbageCollectionCounter||0;if(b.count){a=b.pure;b.total.sum=a.sum=c.garbageCollectionMilliseconds;a.min=a.max=a.sum/b.count;a=b.total;a.min=a.max=a.sum/b.count}}},watchGC:function(){Ext.perf.getTimestamp();var a=Ext.senchaToolbox;if(a){this.get("GC");a.watchGarbageCollector(false)}},setup:function(d){if(!d){d={render:{"Ext.Component":"render"},layout:{"Ext.layout.Context":"run"}}}this.currentConfig=d;var f,a,c,g,b;for(f in d){if(d.hasOwnProperty(f)){a=d[f];c=Ext.Perf.get(f);for(g in a){if(a.hasOwnProperty(g)){b=a[g];c.tap(g,b)}}}}this.watchGC()},setupLog:function(d){var g,b,c,a,f;for(g in d){if(d.hasOwnProperty(g)){b=Ext.ClassManager.get(g);if(b){c=d[g];f={};for(a in c){f[a]=(function(h,j){return function(){var o,p,q,m,r;o=+Date.now();r=this.callParent(arguments);p=+Date.now()-o;if(window.console&&p>0){m=j==="this"?this:typeof j==="string"?this[j]:typeof j==="number"?arguments[j]:null;if(m){q=m.id}if(q!=null){console.log(h+" for "+q+": "+p+"ms")}else{console.log(h+" for unknown: "+p+"ms")}if(console.trace){console.trace()}}return r}})(a,c[a])}Ext.override(b,f)}}}}},1,0,0,0,0,0,[Ext.perf,"Monitor",Ext,"Perf"],0));(Ext.cmd.derive("Ext.util.ItemCollection",Ext.util.MixedCollection,{alternateClassName:"Ext.ItemCollection",getKey:function(a){return a.getItemId&&a.getItemId()},has:function(a){return this.map.hasOwnProperty(a.getId())}},0,0,0,0,0,0,[Ext.util,"ItemCollection",Ext,"ItemCollection"],0));(Ext.cmd.derive("Ext.util.TaskManager",Ext.util.TaskRunner,{alternateClassName:["Ext.TaskManager"],singleton:true},0,0,0,0,0,0,[Ext.util,"TaskManager",Ext,"TaskManager"],0));(Ext.cmd.derive("Ext.util.TextMetrics",Ext.Base,{statics:{shared:null,measure:function(c,a,b){var d=this,f=d.shared;if(!f){f=d.shared=new d(c,b)}f.bind(c);f.setFixedWidth(b||"auto");return f.getSize(a)},destroy:function(){var a=this;Ext.destroy(a.shared);a.shared=null}},constructor:function(c,b){var a=this,d=Ext.getBody().createChild({role:"presentation",cls:"x-textmetrics"});d.setVisibilityMode(1);a.measure=d;if(c){a.bind(c)}d.position("absolute");d.setLocalXY(-1000,-1000);d.hide();if(b){d.setWidth(b)}},getSize:function(a){var c=this.measure,b;c.setHtml(a);b=c.getSize();c.setHtml("");return b},bind:function(a){var b=this;b.el=Ext.get(a);b.measure.setStyle(b.el.getStyle(["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing","word-break"]))},setFixedWidth:function(a){this.measure.setWidth(a)},getWidth:function(a){this.measure.dom.style.width="auto";return this.getSize(a).width},getHeight:function(a){return this.getSize(a).height},destroy:function(){var a=this;a.el=a.measure=Ext.destroy(a.measure);a.callParent()}},1,0,0,0,0,0,[Ext.util,"TextMetrics"],function(){Ext.Element.override({getTextWidth:function(a,c,b){return Ext.Number.constrain(Ext.util.TextMetrics.measure(this.dom,Ext.valueFrom(a,this.dom.innerHTML,true)).width,c||0,b||1000000)}})}));(Ext.cmd.derive("Ext.ElementLoader",Ext.Base,{statics:{Renderer:{Html:function(b,c,a){b.getTarget().setHtml(c.responseText,a.scripts===true,a.rendererScope);return true}}},url:null,params:null,baseParams:null,autoLoad:false,target:null,loadMask:false,ajaxOptions:null,scripts:false,isLoader:true,constructor:function(c){var a=this,b;a.mixins.observable.constructor.call(a,c);a.setTarget(a.target);if(a.autoLoad){b=a.autoLoad;if(b===true){b=null}a.load(b)}},setTarget:function(b){var a=this;b=Ext.get(b);if(a.target&&a.target!==b){a.abort()}a.target=b},getTarget:function(){return this.target||null},abort:function(){var a=this.active;if(a!==undefined){Ext.Ajax.abort(a.request);if(a.mask){this.removeMask()}delete this.active}},removeMask:function(){this.target.unmask()},addMask:function(a){this.target.mask(a===true?null:a)},load:function(c){c=Ext.apply({},c);var f=this,a=Ext.isDefined(c.loadMask)?c.loadMask:f.loadMask,g=Ext.apply({},c.params),b=Ext.apply({},c.ajaxOptions),h=c.callback||f.callback,d=c.scope||f.scope||f;Ext.applyIf(b,f.ajaxOptions);Ext.applyIf(c,b);Ext.applyIf(g,f.params);Ext.apply(g,f.baseParams);Ext.applyIf(c,{url:f.url});Ext.apply(c,{scope:f,params:g,callback:f.onComplete});if(f.fireEvent("beforeload",f,c)===false){return}if(a){f.addMask(a)}f.active={options:c,mask:a,scope:d,callback:h,success:c.success||f.success,failure:c.failure||f.failure,renderer:c.renderer||f.renderer,scripts:Ext.isDefined(c.scripts)?c.scripts:f.scripts};f.active.request=Ext.Ajax.request(c);f.setOptions(f.active,c)},setOptions:function(b,a){b.rendererScope=a.rendererScope||this.rendererScope||this},onComplete:function(b,g,a){var d=this,f=d.active,h,c;if(f){c=f.scope;h=f.rendererScope;if(g){g=d.getRenderer(f.renderer).call(h,d,a,f)!==false}if(g){Ext.callback(f.success,c,[d,a,b]);d.fireEvent("load",d,a,b)}else{Ext.callback(f.failure,c,[d,a,b]);d.fireEvent("exception",d,a,b)}Ext.callback(f.callback,c,[d,g,a,b]);if(f.mask){d.removeMask()}}delete d.active},getRenderer:function(a){if(Ext.isFunction(a)){return a}return this.statics().Renderer.Html},startAutoRefresh:function(b,c){var a=this;a.stopAutoRefresh();a.autoRefresh=Ext.interval(function(){a.load(c)},b)},stopAutoRefresh:function(){clearInterval(this.autoRefresh);delete this.autoRefresh},isAutoRefreshing:function(){return Ext.isDefined(this.autoRefresh)},destroy:function(){var a=this;a.stopAutoRefresh();delete a.target;a.abort();a.callParent()}},1,0,0,0,0,[[Ext.util.Observable.prototype.mixinId||Ext.util.Observable.$className,Ext.util.Observable]],[Ext,"ElementLoader"],0));(Ext.cmd.derive("Ext.ComponentLoader",Ext.ElementLoader,{statics:{Renderer:{Data:function(c,d,a){var b=true;try{c.getTarget().update(Ext.decode(d.responseText))}catch(f){b=false}return b},Component:function(a,c,g){var h=true,f=a.getTarget(),b=[];try{b=Ext.decode(c.responseText)}catch(d){h=false}if(h){f.suspendLayouts();if(g.removeAll){f.removeAll()}f.add(b);f.resumeLayouts(true)}return h}}},target:null,loadOnRender:false,loadMask:false,renderer:"html",setTarget:function(b){var a=this;if(Ext.isString(b)){b=Ext.getCmp(b)}if(a.target&&a.target!==b){a.abort()}a.target=b;if(b&&a.loadOnRender){if(b.rendered){a.doLoadOnRender()}else{a.mon(b,"render",a.doLoadOnRender,a)}}},doLoadOnRender:function(){var a=this.loadOnRender;this.load(Ext.isObject(a)?a:null)},removeMask:function(){this.target.setLoading(false)},addMask:function(a){this.target.setLoading(a)},setOptions:function(b,a){b.removeAll=Ext.isDefined(a.removeAll)?a.removeAll:this.removeAll;b.rendererScope=a.rendererScope||this.rendererScope||this.target},getRenderer:function(b){if(Ext.isFunction(b)){return b}var a=this.statics().Renderer;switch(b){case"component":return a.Component;case"data":return a.Data;default:return Ext.ElementLoader.Renderer.Html}}},0,0,0,0,0,0,[Ext,"ComponentLoader"],0));(Ext.cmd.derive("Ext.layout.SizeModel",Ext.Base,{constructor:function(f){var b=this,a=b.self,c=a.sizeModelsArray,d;Ext.apply(b,f);b[d=b.name]=true;b.fixed=!(b.auto=b.natural||b.shrinkWrap);c[b.ordinal=c.length]=a[d]=a.sizeModels[d]=b},statics:{sizeModelsArray:[],sizeModels:{}},calculated:false,configured:false,constrainedMax:false,constrainedMin:false,natural:false,shrinkWrap:false,calculatedFromConfigured:false,calculatedFromNatural:false,calculatedFromShrinkWrap:false,names:null},1,0,0,0,0,0,[Ext.layout,"SizeModel"],function(){var f=this,a=f.sizeModelsArray,c,b,h,g,d;new f({name:"calculated"});new f({name:"configured",names:{width:"width",height:"height"}});new f({name:"natural"});new f({name:"shrinkWrap"});new f({name:"calculatedFromConfigured",configured:true,calculatedFrom:true,names:{width:"width",height:"height"}});new f({name:"calculatedFromNatural",natural:true,calculatedFrom:true});new f({name:"calculatedFromShrinkWrap",shrinkWrap:true,calculatedFrom:true});new f({name:"constrainedMax",configured:true,constrained:true,names:{width:"maxWidth",height:"maxHeight"}});new f({name:"constrainedMin",configured:true,constrained:true,names:{width:"minWidth",height:"minHeight"}});new f({name:"constrainedDock",configured:true,constrained:true,constrainedByMin:true,names:{width:"dockConstrainedWidth",height:"dockConstrainedHeight"}});for(c=0,h=a.length;c<h;++c){d=a[c];d.pairsByHeightOrdinal=g=[];for(b=0;b<h;++b){g.push({width:d,height:a[b]})}}}));(Ext.cmd.derive("Ext.layout.Layout",Ext.Base,{factoryConfig:{type:"layout"},isLayout:true,initialized:false,running:false,needsItemSize:true,setsItemSize:true,autoSizePolicy:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},$configPrefixed:false,$configStrict:false,constructor:function(a){var b=this;b.id=Ext.id(null,b.type+"-");b.initConfig(a);delete b.type;b.layoutCount=0},beginLayout:Ext.emptyFn,beginLayoutCycle:function(a){var d=this,c=d.context,b;if(d.lastWidthModel!==a.widthModel){if(d.lastWidthModel){b=true}d.lastWidthModel=a.widthModel}if(d.lastHeightModel!==a.heightModel){if(d.lastWidthModel){b=true}d.lastHeightModel=a.heightModel}if(b){(c=a.context).clearTriggers(d,false);c.clearTriggers(d,true);d.triggerCount=0}},finishedLayout:function(a){this.lastWidthModel=a.widthModel;this.lastHeightModel=a.heightModel;this.ownerContext=null},redoLayout:Ext.emptyFn,undoLayout:Ext.emptyFn,getAnimatePolicy:function(){return this.animatePolicy},getItemSizePolicy:function(a){return this.autoSizePolicy},getScrollerEl:Ext.emptyFn,isItemBoxParent:function(a){return false},isItemLayoutRoot:function(b){var a=b.getSizeModel(),d=a.width,c=a.height;if(!b.componentLayout.lastComponentSize&&(d.calculated||c.calculated)){return false}return !d.shrinkWrap&&!c.shrinkWrap},isItemShrinkWrap:function(a){return a.shrinkWrap},isRunning:function(){return !!this.ownerContext},getItemsRenderTree:function(d,b){var h=d.length,f,g,c,a;if(h){a=[];for(f=0;f<h;++f){g=d[f];if(!g.rendered){if(b&&(b[g.id]!==undefined)){c=b[g.id]}else{this.configureItem(g);c=g.getRenderTree();if(b){b[g.id]=c}}if(c){a.push(c)}}}}return a},finishRender:Ext.emptyFn,finishRenderItems:function(b,c){var a=c.length,d,f;for(d=0;d<a;d++){f=c[d];if(f.rendering){f.finishRender(d)}}},renderChildren:function(){var c=this,b=c.getLayoutItems(),a=c.getRenderTarget();c.renderItems(b,a)},renderItems:function(b,a){var g=this,f=b.length,c=0,d;if(f){Ext.suspendLayouts();for(;c<f;c++){d=b[c];if(d&&!d.rendered){g.renderItem(d,a,c)}else{if(!g.isValidParent(d,a,c)){g.moveItem(d,a,c)}else{g.configureItem(d)}}}Ext.resumeLayouts(true)}},isValidParent:function(a,b,c){var f=(b&&b.dom)||b,d=this.getItemLayoutEl(a);if(d&&f){if(typeof c==="number"){c=this.getPositionOffset(c);return d===f.childNodes[c]}return d.parentNode===f}return false},getItemLayoutEl:function(a){var b=a.el?a.el.dom:Ext.getDom(a),c=b.parentNode,d;if(c){d=c.className;if(d&&d.indexOf("x-resizable-wrap")!==-1){b=b.parentNode}}return b},getPositionOffset:function(a){return a},configureItem:function(a){a.ownerLayout=this},renderItem:function(a,b,c){var d=this;if(!a.rendered){d.configureItem(a);a.render(b,c)}},moveItem:function(c,a,b){a=a.dom||a;if(typeof b==="number"){b=a.childNodes[b]}a.insertBefore(c.el.dom,b||null);c.container=Ext.get(a);this.configureItem(c)},onContentChange:function(){this.owner.updateLayout();return true},initLayout:function(){this.initialized=true},setOwner:function(a){this.owner=a},getLayoutItems:function(){return[]},onAdd:function(a){a.ownerLayout=this},onRemove:Ext.emptyFn,onDestroy:Ext.emptyFn,afterRemove:function(b){var a=this,f=b.el,d=a.owner,c;if(b.rendered){c=[].concat(a.itemCls||[]);if(d.itemCls){c=Ext.Array.push(c,d.itemCls)}if(c.length){f.removeCls(c)}}delete b.ownerLayout},afterCollapse:function(a,b){if(b){this.onContentChange(a)}},afterExpand:function(a,b){if(b){this.onContentChange(a)}},destroy:function(){var a=this,b;if(a.targetCls){b=a.getTarget();if(b){b.removeCls(a.targetCls)}}a.onDestroy();a.callParent()},sortWeightedItems:function(c,b){for(var d=0,a=c.length;d<a;++d){c[d].$i=d}Ext.Array.sort(c,function(f,h){var g=h.weight-f.weight;if(!g){g=f.$i-h.$i;if(f[b]){g=-g}}return g});for(d=0;d<a;++d){delete c[d].$i}}},1,0,0,0,0,[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.layout,"Layout"],function(){var a=this;a.prototype.sizeModels=a.sizeModels=Ext.layout.SizeModel.sizeModels}));(Ext.cmd.derive("Ext.layout.container.Container",Ext.layout.Layout,{alternateClassName:"Ext.layout.ContainerLayout",type:"container",beginCollapse:Ext.emptyFn,beginExpand:Ext.emptyFn,animatePolicy:null,activeItemCount:0,renderTpl:["{%this.renderBody(out,values)%}"],usesContainerHeight:true,usesContainerWidth:true,usesHeight:true,usesWidth:true,constructor:function(){Ext.layout.Layout.prototype.constructor.apply(this,arguments);this.mixins.elementCt.constructor.call(this)},destroy:function(){Ext.layout.Layout.prototype.destroy.call(this);this.mixins.elementCt.destroy.call(this)},beginLayout:function(a){Ext.layout.Layout.prototype.beginLayout.apply(this,arguments);a.targetContext=a.paddingContext=a.getEl("getTarget",this);this.cacheChildItems(a)},beginLayoutCycle:function(a,b){var c=this;Ext.layout.Layout.prototype.beginLayoutCycle.apply(this,arguments);if(b){if(c.usesContainerHeight){++a.consumersContainerHeight}if(c.usesContainerWidth){++a.consumersContainerWidth}}},cacheChildItems:function(g){var f=this,c,h,a,d,b;if(f.needsItemSize||f.setsItemSize){c=g.context;h=g.childItems=[];a=g.visibleItems=f.getVisibleItems();d=a.length;for(b=0;b<d;++b){h.push(c.getCmp(a[b]))}}},cacheElements:function(){var a=this.owner;this.attachChildEls(a.el,a)},calculate:function(a){var c=a.props,b=a.el;if(a.widthModel.shrinkWrap&&isNaN(c.width)){a.setContentWidth(b.getWidth())}if(a.heightModel.shrinkWrap&&isNaN(c.height)){a.setContentHeight(b.getHeight())}},configureItem:function(f){var d=this,g=d.itemCls,c=d.owner.itemCls,b,a;f.ownerLayout=d;if(g){if(typeof g==="string"){a=[g]}else{a=g;b=!!a}}if(c){if(b){a=Ext.Array.clone(a)}a=Ext.Array.push(a||[],c)}if(a){f.addCls(a)}},doRenderBody:function(a,b){this.renderItems(a,b);this.renderContent(a,b)},doRenderContainer:function(d,b){var f=b.$comp.layout,c=f.getRenderTpl(),a=f.getRenderData();c.applyOut(a,d)},doRenderItems:function(d,b){var a=b.$layout,c=a.getRenderTree();if(c){Ext.DomHelper.generateMarkup(c,d)}},finishRender:function(){var c=this,a,b;Ext.layout.Layout.prototype.finishRender.call(this);c.cacheElements();a=c.getRenderTarget();b=c.getLayoutItems();c.finishRenderItems(a,b)},notifyOwner:function(){this.owner.afterLayout(this)},getContainerSize:function(d,j){var f=d.targetContext,h=f.getFrameInfo(),p=d.paddingContext.getPaddingInfo(),o=0,a=0,g,m,c,b;if(!d.widthModel.shrinkWrap){++a;c=j?f.getDomProp("width"):f.getProp("width");g=(typeof c==="number");if(g){++o;c-=h.width+p.width;if(c<0){c=0}}}if(!d.heightModel.shrinkWrap){++a;b=j?f.getDomProp("height"):f.getProp("height");m=(typeof b==="number");if(m){++o;b-=h.height+p.height;if(b<0){b=0}}}return{width:c,height:b,needed:a,got:o,gotAll:o===a,gotWidth:g,gotHeight:m}},getPositionOffset:function(a){if(!this.createsInnerCt){var b=this.owner.itemNodeOffset;if(b){a+=b}}return a},getLayoutItems:function(){var a=this.owner,b=a&&a.items;return(b&&b.items)||[]},getRenderData:function(){var a=this.owner;return{$comp:a,$layout:this,ownerId:a.id}},getRenderedItems:function(){var f=this,h=f.getRenderTarget(),a=f.getLayoutItems(),d=a.length,g=[],b,c;for(b=0;b<d;b++){c=a[b];if(c.rendered&&f.isValidParent(c,h,b)){g.push(c)}}return g},getRenderTarget:function(){return this.owner.getTargetEl()},getElementTarget:function(){return this.getRenderTarget()},getRenderTpl:function(){var a=this,b=Ext.XTemplate.getTpl(this,"renderTpl");if(!b.renderContent){a.owner.setupRenderTpl(b)}return b},getRenderTree:function(){var c,a=this.owner.items,b,d={};do{b=a.generation;c=this.getItemsRenderTree(this.getLayoutItems(),d)}while(a.generation!==b);return c},renderChildren:function(){var d=this,f=d.owner.items,b=d.getRenderTarget(),a,c;do{a=f.generation;c=d.getLayoutItems();d.renderItems(c,b)}while(f.generation!==a)},getScrollbarsNeeded:function(h,c,g,b){var f=Ext.getScrollbarSize(),m=typeof h==="number",d=typeof c==="number",a=0,j=0;if(!f.width){return 0}if(d&&c<b){j=2;h-=f.width}if(m&&h<g){a=1;if(!j&&d){c-=f.height;if(c<b){j=2}}}return j+a},getTarget:function(){return this.owner.getTargetEl()},getVisibleItems:function(){var a=this.getRenderTarget(),c=this.getLayoutItems(),g=c.length,b=[],d,f;for(d=0;d<g;d++){f=c[d];if(f.rendered&&this.isValidParent(f,a,d)&&f.hidden!==true&&!f.floated){b.push(f)}}return b},getMoveAfterIndex:function(a){return this.owner.items.indexOf(a)+1},moveItemBefore:function(f,g){var b=this.owner,c=b.items,d=c.indexOf(f),a;if(f===g){return f}if(g){a=c.indexOf(g);if(d>-1&&d<a){--a}}else{a=c.length}return b.insert(a,f)},setupRenderTpl:function(a){a.renderBody=this.doRenderBody;a.renderContainer=this.doRenderContainer;a.renderItems=this.doRenderItems},getContentTarget:function(){return this.owner.getDefaultContentTarget()},onAdd:function(a){if(!a.liquidLayout){++this.activeItemCount}Ext.layout.Layout.prototype.onAdd.call(this,a)},onRemove:function(b,a){if(!b.liquidLayout){--this.activeItemCount}Ext.layout.Layout.prototype.onRemove.call(this,b,a)}},1,0,0,0,["layout.container"],[[Ext.util.ElementContainer.prototype.mixinId||Ext.util.ElementContainer.$className,Ext.util.ElementContainer]],[Ext.layout.container,"Container",Ext.layout,"ContainerLayout"],0));(Ext.cmd.derive("Ext.layout.container.Auto",Ext.layout.container.Container,{type:"autocontainer",childEls:["outerCt","innerCt"],reserveScrollbar:false,managePadding:true,manageOverflow:false,needsItemSize:false,setsItemSize:false,lastOverflowAdjust:{width:0,height:0},outerCtCls:"x-autocontainer-outerCt",innerCtCls:"x-autocontainer-innerCt",renderTpl:['<div id="{ownerId}-outerCt" data-ref="outerCt" class="{outerCtCls}" role="presentation">','<div id="{ownerId}-innerCt" data-ref="innerCt" style="{%this.renderPadding(out, values)%}" ','<tpl if="!$comp.html">role="presentation"</tpl>','class="{innerCtCls}">',"{%this.renderBody(out,values)%}","</div>","</div>"],beginLayout:function(a){Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments);this.initContextItems(a)},beforeLayoutCycle:function(b){var d=this.owner,a=d.inheritedState,c=d.inheritedStateInner;if(!a||a.invalid){a=d.getInherited();c=d.inheritedStateInner}if(b.widthModel.shrinkWrap){c.inShrinkWrapTable=true}else{delete c.inShrinkWrapTable}},beginLayoutCycle:function(f){var o=this,c=o.outerCt,j=o.lastOuterCtWidth||"",h=o.lastOuterCtHeight||"",p=o.lastOuterCtTableLayout||"",b=f.state,q,g,a,d,m;Ext.layout.container.Container.prototype.beginLayoutCycle.apply(this,arguments);g=a=d="";if(!f.widthModel.shrinkWrap){g="100%";m=o.owner.inheritedStateInner;q=o.getOverflowXStyle(f);d=(m.inShrinkWrapTable||q==="auto"||q==="scroll")?"":"fixed"}if(!f.heightModel.shrinkWrap&&!Ext.supports.PercentageHeightOverflowBug){a="100%"}if((g!==j)||o.hasOuterCtPxWidth){c.setStyle("width",g);o.lastOuterCtWidth=g;o.hasOuterCtPxWidth=false}if(d!==p){c.setStyle("table-layout",d);o.lastOuterCtTableLayout=d}if((a!==h)||o.hasOuterCtPxHeight){c.setStyle("height",a);o.lastOuterCtHeight=a;o.hasOuterCtPxHeight=false}if(o.hasInnerCtPxHeight){o.innerCt.setStyle("height","");o.hasInnerCtPxHeight=false}b.overflowAdjust=b.overflowAdjust||o.lastOverflowAdjust},calculate:function(f){var c=this,d=f.state,b=c.getContainerSize(f,true),a=d.calculatedItems||(d.calculatedItems=c.calculateItems?c.calculateItems(f,b):true);c.setCtSizeIfNeeded(f,b);if(a&&f.hasDomProp("containerChildrenSizeDone")){c.calculateContentSize(f);if(b.gotAll){if(c.manageOverflow&&!f.state.secondPass&&!c.reserveScrollbar){c.calculateOverflow(f,b)}return}}c.done=false},calculateContentSize:function(g){var f=this,a=((g.widthModel.shrinkWrap?1:0)|(g.heightModel.shrinkWrap?2:0)),c=(a&1)||undefined,h=(a&2)||undefined,d=0,b=g.props;if(c){if(isNaN(b.contentWidth)){++d}else{c=undefined}}if(h){if(isNaN(b.contentHeight)){++d}else{h=undefined}}if(d){if(c&&!g.setContentWidth(f.measureContentWidth(g))){f.done=false}if(h&&!g.setContentHeight(f.measureContentHeight(g))){f.done=false}}},calculateOverflow:function(h){var b=this,g,d,f,a,m,j,c;m=(b.getOverflowXStyle(h)==="auto");j=(b.getOverflowYStyle(h)==="auto");if(m||j){f=Ext.getScrollbarSize();c=h.overflowContext.el.dom;a=0;if(c.scrollWidth>c.clientWidth){a|=1}if(c.scrollHeight>c.clientHeight){a|=2}g=(j&&(a&2))?f.width:0;d=(m&&(a&1))?f.height:0;if(g!==b.lastOverflowAdjust.width||d!==b.lastOverflowAdjust.height){b.done=false;h.invalidate({state:{overflowAdjust:{width:g,height:d},overflowState:a,secondPass:true}})}}},completeLayout:function(a){this.lastOverflowAdjust=a.state.overflowAdjust},doRenderBody:function(d,g){var f=g.$layout,b=Ext.XTemplate,a=f.beforeBodyTpl,c=f.afterBodyTpl;if(a){b.getTpl(f,"beforeBodyTpl").applyOut(g,d)}this.renderItems(d,g);this.renderContent(d,g);if(c){b.getTpl(f,"afterBodyTpl").applyOut(g,d)}},doRenderPadding:function(d,a){var f=a.$layout,c=a.$layout.owner,b=c[c.contentPaddingProperty];if(f.managePadding&&b){d.push("padding:",c.unitizeBox(b))}},finishedLayout:function(b){var a=this.innerCt;Ext.layout.container.Container.prototype.finishedLayout.apply(this,arguments);if(Ext.isIE8){a.repaint()}if(Ext.isOpera){a.setStyle("position","relative");a.dom.scrollWidth;a.setStyle("position","")}},getContainerSize:function(d,a){var c=Ext.layout.container.Container.prototype.getContainerSize.apply(this,arguments),b=d.state.overflowAdjust;if(b){c.width-=b.width;c.height-=b.height}return c},getRenderData:function(){var a=this,b=Ext.layout.container.Container.prototype.getRenderData.call(this);b.innerCtCls=a.innerCtCls;b.outerCtCls=a.outerCtCls;return b},getRenderTarget:function(){return this.innerCt},getElementTarget:function(){return this.innerCt},getOverflowXStyle:function(a){return a.overflowXStyle||(a.overflowXStyle=this.owner.scrollFlags.overflowX||a.overflowContext.getStyle("overflow-x"))},getOverflowYStyle:function(a){return a.overflowYStyle||(a.overflowYStyle=this.owner.scrollFlags.overflowY||a.overflowContext.getStyle("overflow-y"))},initContextItems:function(d){var c=this,b=d.target,a=c.owner.getOverflowEl();d.outerCtContext=d.getEl("outerCt",c);d.innerCtContext=d.getEl("innerCt",c);d.overflowContext=(a===d.el)?d:d.getEl(a);if(b[b.contentPaddingProperty]!==undefined){d.paddingContext=d.innerCtContext}},initLayout:function(){var a=this,c=Ext.getScrollbarSize().width,b=a.owner;Ext.layout.container.Container.prototype.initLayout.call(this);if(c&&a.manageOverflow&&!a.hasOwnProperty("lastOverflowAdjust")){if(b.scrollable||a.reserveScrollbar){a.lastOverflowAdjust={width:c,height:0}}}},measureContentHeight:function(c){var b=this.outerCt.getHeight(),a=c.target;if(this.managePadding&&(a[a.contentPaddingProperty]===undefined)){b+=c.targetContext.getPaddingInfo().height}return b},measureContentWidth:function(f){var a,d,c,b,g;if(this.chromeCellMeasureBug){a=this.innerCt.dom;d=a.style;c=d.display;if(c==="table-cell"){d.display="";a.offsetWidth;d.display=c}}if(Ext.isSafari){a=this.outerCt.dom;d=a.style;d.display="table-cell";a.offsetWidth;a.style.display=""}b=this.outerCt.getWidth();g=f.target;if(this.managePadding&&(g[g.contentPaddingProperty]===undefined)){b+=f.targetContext.getPaddingInfo().width}return b},setCtSizeIfNeeded:function(g,d){var h=this,b=d.height,m=g.paddingContext.getPaddingInfo(),p=h.getTarget(),a=h.getOverflowXStyle(g),f=(a==="auto"||a==="scroll"),c=Ext.getScrollbarSize(),j,o;if(b&&!g.heightModel.shrinkWrap){if(Ext.supports.PercentageHeightOverflowBug){j=true}if(Ext.isIE8){o=true}if((j||o)&&f&&(p.dom.scrollWidth>p.dom.clientWidth)){b=Math.max(b-c.height,0)}if(j){g.outerCtContext.setProp("height",b+m.height);h.hasOuterCtPxHeight=true}if(o){g.innerCtContext.setProp("height",b);h.hasInnerCtPxHeight=true}}},setupRenderTpl:function(a){Ext.layout.container.Container.prototype.setupRenderTpl.apply(this,arguments);a.renderPadding=this.doRenderPadding},getContentTarget:function(){return this.innerCt},getScrollerEl:function(){return this.outerCt}},0,0,0,0,["layout.auto","layout.autocontainer"],0,[Ext.layout.container,"Auto"],function(){this.prototype.chromeCellMeasureBug=Ext.isChrome&&Ext.chromeVersion>=26}));(Ext.cmd.derive("Ext.ZIndexManager",Ext.Base,{alternateClassName:"Ext.WindowGroup",statics:{zBase:9000,activeCounter:0},constructor:function(a){var b=this;b.id=Ext.id(null,"zindex-mgr-");b.zIndexStack=new Ext.util.Collection({sorters:{sorterFn:function(d,c){var f=(d.alwaysOnTop||0)-(c.alwaysOnTop||0);if(!f){f=d.getActiveCounter()-c.getActiveCounter()}return f}},filters:{filterFn:function(c){return c.isVisible()}}});b.zIndexStack.addObserver(b);b.front=null;b.globalListeners=Ext.GlobalEvents.on({beforehide:b.onComponentShowHide,show:b.onComponentShowHide,scope:b,destroyable:true});if(a){if(a.isContainer){a.on("resize",b.onContainerResize,b);b.zseed=Ext.Number.from(b.rendered?a.getEl().getStyle("zIndex"):undefined,b.getNextZSeed());b.targetEl=a.getTargetEl();b.container=a}else{Ext.on("resize",b.onContainerResize,b);b.zseed=b.getNextZSeed();b.targetEl=Ext.get(a)}}else{b.zseed=b.getNextZSeed();Ext.onInternalReady(function(){Ext.on("resize",b.onContainerResize,b);b.targetEl=Ext.getBody()})}},getId:function(){return this.id},getNextZSeed:function(){return(Ext.ZIndexManager.zBase+=10000)},setBase:function(a){this.zseed=a;return this.onCollectionSort()},onCollectionSort:function(){var p=this,g=p.front,o=g&&g.containsFocus,q=p.zseed,b=p.zIndexStack.getRange(),m=b.length,f,j,d,c,h=false;for(f=0;f<m;f++){j=b[f];q=j.setZIndex(q);if(!j.hidden){c=j;if(j.modal){d=j}}}if(c!==g){if(g&&!g.destroying){g.setActive(false)}if(c){h=c.isFocusable(true)&&(c.modal||(c.focusOnToFront&&!c.preventFocusOnActivate));c.setActive(true,h)}}p.front=c;if(d){p.showModalMask(d)}else{p.hideModalMask()}return q},onComponentUpdate:function(a){if(this.zIndexStack.contains(a)){this.zIndexStack.sort()}},onComponentRender:function(a){this.zIndexStack.itemChanged(a,"hidden")},onComponentShowHide:function(a){var b=this.zIndexStack;if(a.isFloating()&&!this.hidingAll&&(b.getSource()||b).contains(a)){b.itemChanged(a,"hidden");b.sort()}},register:function(a){var b=this;if(a.zIndexManager){a.zIndexManager.unregister(a)}a.zIndexManager=b;if(!a.rendered){a.on("render",b.onComponentRender,b,{single:true})}b.zIndexStack.add(a)},unregister:function(a){var b=this;delete a.zIndexManager;a.un("render",b.onComponentRender,b);b.zIndexStack.remove(a);b.onCollectionSort()},get:function(a){return a.isComponent?a:this.zIndexStack.get(a)},bringToFront:function(b,f){var c=this,h=c.zIndexStack,a=h.last(),d,g;b=c.get(b);if(!b||h.find("alwaysOnTop",true)){return false}g=b.preventFocusOnActivate;b.preventFocusOnActivate=f;b.setActiveCounter(++Ext.ZIndexManager.activeCounter);b.preventFocusOnActivate=g;d=h.last();return(d===b&&d!==a)},sendToBack:function(a){a=this.get(a);if(a){a.setActiveCounter(0)}return a||null},hideAll:function(){var a=this.zIndexStack.getRange(),b=a.length,c;this.hidingAll=true;for(c=0;c<b;c++){a[c].hide()}this.hidingAll=false},hide:function(){var a=this,g=Ext.Element.getActiveElement(),f=a.tempHidden=a.zIndexStack.getRange(),b=f.length,d,c;a.focusRestoreElement=null;for(d=0;d<b;d++){c=f[d];if(c.el.contains(g)){a.focusRestoreElement=g}c.el.hide();c.hidden=true}},show:function(){var a=this,f,b=a.tempHidden,c=b?b.length:0,d;for(f=0;f<c;f++){d=b[f];d.el.show();d.hidden=false;d.setPosition(d.x,d.y)}a.tempHidden=null;if(a.focusRestoreElement){a.focusRestoreElement.focus()}},getActive:function(){return this.zIndexStack.last()},getBy:function(b,a){return this.zIndexStack.filterBy(b,a).getRange()},each:function(b,a){this.zIndexStack.each(b,a)},eachBottomUp:function(a,g){var c=this.zIndexStack.getRange(),f,b=c.length,d;for(f=0;f<b;f++){d=c[f];if(d.isComponent&&a.call(g||d,d)===false){return}}},eachTopDown:function(b,a){var c=this.zIndexStack.getRange(),f,d;for(f=c.length;f-->0;){d=c[f];if(d.isComponent&&b.call(a||d,d)===false){return}}},destroy:function(){var b=this,d=b.zIndexStack.getRange(),c=d.length,a;for(a=0;a<c;a++){Ext.destroy(d[a])}if(b.container){b.container.un("resize",b.onContainerResize,b)}else{if(b.targetEl){Ext.un("resize",b.onContainerResize,b)}}Ext.destroy(b.mask,b.maskShim,b.zIndexStack,b.globalListeners);b.zIndexStack=b.container=b.targetEl=b.globalListeners=null;b.callParent()},privates:{getMaskBox:function(){var a=this.mask.maskTarget;if(a.dom===document.body){return{height:Math.max(document.body.scrollHeight,Ext.dom.Element.getDocumentHeight()),width:Math.max(document.body.scrollWidth,document.documentElement.clientWidth),x:0,y:0}}else{return a.getBox()}},onContainerResize:function(){var a=this,d=a.mask,c=a.maskShim,b;if(d&&d.isVisible()){d.hide();if(c){c.hide()}b=a.getMaskBox();if(c){c.setSize(b);c.show()}d.setSize(b);d.show()}},onMaskClick:function(){if(this.front){this.front.focus()}},showModalMask:function(a){var c=this,h=a.el,g=h.getStyle("zIndex")-4,b=a.floatParent?a.floatParent.getTargetEl():a.container,j=c.mask,f=c.maskShim,d;if(!j){c.mask=j=Ext.getBody().createChild({role:"presentation",cls:"x-mask x-border-box",style:"height:0;width:0"});j.setVisibilityMode(Ext.Element.DISPLAY);j.on("click",c.onMaskClick,c)}else{c.hideModalMask()}j.maskTarget=b;d=c.getMaskBox();if(f){f.setStyle("zIndex",g);f.show();f.setBox(d)}j.setStyle("zIndex",g);b.saveTabbableState({excludeRoot:h});j.show();j.setBox(d)},hideModalMask:function(){var b=this.mask,a=this.maskShim;if(b&&b.isVisible()){b.maskTarget.restoreTabbableState();b.maskTarget=undefined;b.hide();if(a){a.hide()}}}}},1,0,0,0,0,0,[Ext,"ZIndexManager",Ext,"WindowGroup"],function(){Ext.WindowManager=Ext.WindowMgr=new this()}));(Ext.cmd.derive("Ext.container.Container",Ext.Component,{alternateClassName:["Ext.Container","Ext.AbstractContainer"],renderTpl:"{%this.renderContainer(out,values)%}",autoDestroy:true,defaultType:"panel",detachOnRemove:true,items:undefined,layout:"auto",suspendLayout:false,_applyDefaultsOptions:{defaults:true,strict:false},ariaRole:"presentation",baseCls:"x-container",layoutCounter:0,add:function(){var j=this,f=Ext.Array.slice(arguments),c=(typeof f[0]==="number")?f.shift():-1,a=j.getLayout(),b=false,p,g,r,o,q,m,d,h;if(f.length===1&&Ext.isArray(f[0])){g=f[0];p=true}else{g=f}if(j.rendered){Ext.suspendLayouts()}d=g=j.prepareItems(g,true);o=g.length;if(!p&&o===1){d=g[0]}for(r=0;r<o;r++){q=g[r];m=(c<0)?j.items.length:(c+r);h=!!q.instancedCmp;delete q.instancedCmp;if(q.floating){(j.floatingItems||(j.floatingItems=new Ext.util.ItemCollection())).add(q);q.onAdded(j,m,h);delete q.$initParent;if(j.hasListeners.add){j.fireEvent("add",j,q,m)}}else{if((!j.hasListeners.beforeadd||j.fireEvent("beforeadd",j,q,m)!==false)&&j.onBeforeAdd(q)!==false){j.items.insert(m,q);q.onAdded(j,m,h);delete q.$initParent;j.onAdd(q,m);a.onAdd(q,m);b=true;if(j.hasListeners.add){j.fireEvent("add",j,q,m)}}}}if(b){j.updateLayout()}if(j.rendered){Ext.resumeLayouts(true)}return d},onAdded:function(c,a,b){Ext.Component.prototype.onAdded.call(this,c,a,b);this.containerOnAdded(c,b)},onRemoved:function(a){this.containerOnRemoved(a);Ext.Component.prototype.onRemoved.apply(this,arguments)},afterComponentLayout:function(){var d=this.floatingItems,c,b,a;Ext.Component.prototype.afterComponentLayout.apply(this,arguments);if(d){d=d.items;c=d.length;for(b=0;b<c;b++){a=d[b];if(!a.rendered&&a.autoShow){a.show()}}}},afterLayout:function(a){var c=this,b=c.getScrollable();++c.layoutCounter;if(b&&c.layoutCounter>1){b.refresh()}if(c.hasListeners.afterlayout){c.fireEvent("afterlayout",c,a)}},beforeDestroy:function(){var f=this,d=f.items,a=f.floatingItems,b;if(d){while((b=d.first())){f.doRemove(b,true)}}if(a){while((b=a.first())){f.doRemove(b,true)}}Ext.destroy(f.layout);Ext.Component.prototype.beforeDestroy.call(this)},destroy:function(){var a=this;Ext.Component.prototype.destroy.call(this);if(a.items){a.items.destroy()}if(a.floatingItems){a.floatingItems.destroy()}a.refs=a.items=a.floatingItems=a.layout=null},beforeRender:function(){var c=this,b=c.getLayout(),a;c.preventChildDisable=true;Ext.Component.prototype.beforeRender.call(this);c.preventChildDisable=false;if(!b.initialized){b.initLayout()}a=b.targetCls;if(a){c.applyTargetCls(a)}},cascade:function(b,d,f){var a=this,j=a.items?a.items.items:[],m=j.length,h=0,p,o=f?f.concat(a):[a],g=o.length-1;if(b.apply(d||a,o)!==false){for(;h<m;h++){p=j[h];if(p.cascade){p.cascade(b,d,f)}else{o[g]=p;b.apply(d||p,o)}}}return this},contains:function(a,c){var b=false;if(c){this.cascade(function(d){if(d.contains&&d.contains(a)){b=true;return false}});return b}else{return this.items.contains(a)||(this.floatingItems&&this.floatingItems.contains(a))}},disable:function(b,h){var f=this,d=f.disabled,g,a,c;Ext.Component.prototype.disable.call(this,b,h);if(!h&&!f.preventChildDisable&&!d){g=f.getChildItemsToDisable();a=g.length;for(c=0;c<a;c++){g[c].disable(b,true)}}return f},enable:function(b,h){var f=this,d=f.disabled,g,a,c;Ext.Component.prototype.enable.call(this,b,h);if(d){g=f.getChildItemsToDisable();a=g.length;for(c=0;c<a;c++){g[c].enable(b,true)}}return f},getChildByElement:function(f,a){var h,c,b=0,d=this.getRefItems(),g=d.length;f=Ext.getDom(f);for(;b<g;b++){h=d[b];c=h.getEl();if(c&&((c.dom===f)||c.contains(f))){return(a&&h.getChildByElement)?h.getChildByElement(f,a):h}}return null},getComponent:function(d){if(Ext.isObject(d)){d=d.getItemId()}var a=this.items.get(d),b=this.floatingItems;if(!a&&b&&typeof d!=="number"){a=b.get(d)}return a},getFocusEl:function(){var a=this.getDefaultFocus();if(a){return a}else{if(this.focusable){return this.getTargetEl()}}return undefined},getLayout:function(){var b=this,a=b.layout;if(!a||!a.isLayout){b.setLayout(a)}return b.layout},getRefItems:function(c){var h=this,d=h.items.items,b=d.length,f=0,g,a=[];for(;f<b;f++){g=d[f];a[a.length]=g;if(c&&g.getRefItems){a.push.apply(a,g.getRefItems(true))}}if(h.floatingItems){d=h.floatingItems.items;b=d.length;for(f=0;f<b;f++){g=d[f];a[a.length]=g;if(c&&g.getRefItems){a.push.apply(a,g.getRefItems(true))}}}return a},getDefaultFocus:function(){var b=this.defaultFocus,a;if(b){a=this.down(b)}return a},initComponent:function(){var a=this;Ext.Component.prototype.initComponent.call(this);a.getLayout();a.constructing=true;a.initItems();if(a.disabled){a.disabled=false;a.disable(true)}delete a.constructing},initItems:function(){var b=this,a=b.items;if(!a||!a.isMixedCollection){b.items=new Ext.util.ItemCollection();if(a){if(!Ext.isArray(a)){a=[a]}b.add(a)}}},initInheritedState:function(c,h){var b=this,j=b.controller,m=b.layout,a=b.session,d=b.viewModel,g=b.reference,f=b.referenceHolder;Ext.Component.prototype.initInheritedState.call(this,c,h);if(b.collapsed){c.collapsed=true}b.initContainerInheritedState(c,h);if(m&&m.initInheritedState){m.initInheritedState(c,h)}},insert:function(a,c){var b;if(c&&c.isComponent){b=this.items.indexOf(c);if(b!==-1){return this.move(b,a)}}return this.add(a,c)},lookupComponent:function(a){if(!a.isComponent){if(typeof a==="string"){a=Ext.ComponentManager.get(a)}else{a=Ext.ComponentManager.create(a,this.defaultType)}}return a},move:function(d,b){var a=this,c=a.items,f;if(d.isComponent){d=c.indexOf(d)}f=c.getAt(d);if(d!==b){f=c.removeAt(d);if(f===false){return false}b=Math.min(b,c.getCount());c.insert(b,f);a.onMove(f,d,b);if(a.hasListeners.childmove){a.fireEvent("childmove",a,f,d,b)}a.updateLayout()}return f},moveBefore:function(a,b){if(a!==b){a=this.layout.moveItemBefore(a,b)}return a},moveAfter:function(a,b){var d=this.layout,c;if(a!==b){c=b?d.getMoveAfterIndex(b):0;a=d.moveItemBefore(a,this.items.getAt(c))}return a},nextChild:function(h,b){var f=this,c=f.items,g=c.indexOf(h),d=0,a=c.length,j;if(g!==-1){if(b){for(;d<a;d++){j=c.getAt(g+d);if(!j||Ext.ComponentQuery.is(j,b)){break}}}else{j=c.getAt(g+1)}}return j||null},onAdd:Ext.emptyFn,onBeforeAdd:function(b){var a=b.ownerCt;if(a&&a!==this){a.remove(b,false)}},onMove:Ext.emptyFn,onRemove:Ext.emptyFn,onPosition:function(){Ext.Component.prototype.onPosition.apply(this,arguments);this.repositionFloatingItems()},onResize:function(){Ext.Component.prototype.onResize.apply(this,arguments);this.repositionFloatingItems()},prevChild:function(h,b){var f=this,c=f.items,g=c.indexOf(h),d=0,a=c.length,j;if(g!==-1){if(b){for(;d<a;d++){j=c.getAt(g-d);if(!j||Ext.ComponentQuery.is(j,b)){break}}}else{j=c.getAt(g-1)}}return j||null},remove:function(f,d){var a=this,b;if(a.destroyed||a.destroying){return}b=a.getComponent(f);if(b&&(!a.hasListeners.beforeremove||a.fireEvent("beforeremove",a,b)!==false)){a.doRemove(b,d);if(a.hasListeners.remove){a.fireEvent("remove",a,b)}if(!a.destroying&&!b.floating){a.updateLayout()}}return b},removeAll:function(c){var h=this,f,a=h.floatingItems,b=[],d=0,j,g;if(a){f=h.items.items.concat(a.items)}else{f=h.items.items.slice()}j=f.length;Ext.suspendLayouts();h.removingAll=true;for(;d<j;d++){g=f[d];h.remove(g,c);if(g.ownerCt!==h){b.push(g)}}h.removingAll=false;Ext.resumeLayouts(!!j);return b},setLayout:function(g){var f=this,c=f.layout,a=c&&c.isLayout,b,d;if(typeof g==="string"){g={type:g}}d=g.type;if(a&&(!d||(d===c.type))){delete g.type;c.setConfig(g)}else{if(a){c.setOwner(null)}b=f.self.prototype.layout;if(typeof b==="string"){g.type=d||b}else{Ext.merge(Ext.merge({},b),g)}g=this.layout=Ext.Factory.layout(g);g.setOwner(this)}if(f.rendered){f.updateLayout()}},setActiveItem:function(a){return this.getLayout().setActiveItem(a)},privates:{applyDefaults:function(b){var c=this,a=c.defaults;if(a){if(Ext.isFunction(a)){a=a.call(c,b)}if(Ext.isString(b)){b=Ext.ComponentManager.get(b)}if(b.isComponent){b.setConfig(a,null,c._applyDefaultsOptions)}else{b=c.getConfigurator().merge(c,Ext.Object.fork(a),b)}}return b},applyReference:function(a){return this.setupReference(a)},applyTargetCls:function(a){this.layoutTargetCls=a},detachComponent:function(a){Ext.getDetachedBody().appendChild(a.getEl())},doRemove:function(c,b){b=b===true||(b!==false&&this.autoDestroy);var g=this,f=g.layout,a=f&&g.rendered,d=c.destroying||b,h=c.floating;if(h){g.floatingItems.remove(c)}else{g.items.remove(c)}if(a&&!h){if(f.running){Ext.Component.cancelLayout(c,d)}f.onRemove(c,d)}c.onRemoved(d);g.onRemove(c,d);if(b){c.destroy()}else{if(a&&!h){f.afterRemove(c)}if(g.detachOnRemove&&c.rendered){g.detachComponent(c)}}},finishRenderChildren:function(){Ext.Component.prototype.finishRenderChildren.call(this);var a=this.getLayout();if(a){a.finishRender()}},getChildItemsToDisable:function(){return this.query("[isFormField],[isFocusableContainer],button")},getContentTarget:function(){return this.getLayout().getContentTarget()},getDefaultContentTarget:function(){return this.el},getScrollerEl:function(){return this.layout.getScrollerEl()||Ext.Component.prototype.getScrollerEl.call(this)},prepareItems:function(c,f){if(Ext.isArray(c)){c=c.slice()}else{c=[c]}var a=this,d=0,b=c.length,g;for(;d<b;d++){g=c[d];if(g==null){Ext.Array.erase(c,d,1);--d;--b}else{if(f){g=this.applyDefaults(g)}g.$initParent=a;if(g.isComponent){g.instancedCmp=true}c[d]=a.lookupComponent(g);delete g.$initParent}}return c},repositionFloatingItems:function(){var d=this.floatingItems,c,b,a;if(d){d=d.items;c=d.length;for(b=0;b<c;b++){a=d[b];if(a.el&&!a.hidden){a.setPosition(a.x,a.y)}}}},_noMargin:{"margin-top":"","margin-right":"","margin-bottom":"","margin-left":""},resetItemMargins:function(){var c=this.items.items,a=c.length,d=this._noMargin,b;while(a--){b=c[a];b.margin$=null;b.el.setStyle(d)}},setupRenderTpl:function(a){Ext.Component.prototype.setupRenderTpl.apply(this,arguments);this.getLayout().setupRenderTpl(a)}}},0,["container"],["component","box","container"],{component:true,box:true,container:true},["widget.container"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable],[Ext.mixin.Container.prototype.mixinId||Ext.mixin.Container.$className,Ext.mixin.Container]],[Ext.container,"Container",Ext,"Container",Ext,"AbstractContainer"],0));(Ext.cmd.derive("Ext.util.StoreHolder",Ext.Base,{mixinId:"storeholder",bindStore:function(d,f,c){c=c||"store";var a=this,b=f?null:a[c];if(d!==b){if(b){a.onUnbindStore(b,f,c);if(a.isComponent&&c==="store"&&b.autoDestroy){b.destroy()}else{a.unbindStoreListeners(b)}}if(d){a[c]=d=Ext.data.StoreManager.lookup(d);a.bindStoreListeners(d);a.onBindStore(d,b)}else{a[c]=null}}return a},getStore:function(){return this.store},setStore:function(a){this.bindStore(a)},unbindStoreListeners:function(a){var b=this.storeListeners;if(b){a.un(b)}},bindStoreListeners:function(a){var b=this.getStoreListeners(a);if(b){b=Ext.apply({},b);if(!b.scope){b.scope=this}this.storeListeners=b;a.on(b)}},getStoreListeners:Ext.emptyFn,onUnbindStore:Ext.emptyFn,onBindStore:Ext.emptyFn},0,0,0,0,0,0,[Ext.util,"StoreHolder"],0));(Ext.cmd.derive("Ext.LoadMask",Ext.Component,{isLoadMask:true,msg:"Loading...",msgCls:"x-mask-loading",msgWrapCls:"x-mask-msg",useMsg:true,useTargetEl:false,cls:"x-mask",componentCls:"x-border-box",ariaRole:"status",focusable:true,tabIndex:0,autoEl:{tag:"div",role:"status"},childEls:["msgWrapEl","msgEl","msgTextEl"],renderTpl:['<div id="{id}-msgWrapEl" data-ref="msgWrapEl" class="{[values.$comp.msgWrapCls]}">','<div id="{id}-msgEl" data-ref="msgEl" class="{[values.$comp.msgCls]} ',"x-",'mask-msg-inner {childElCls}">','<div id="{id}-msgTextEl" data-ref="msgTextEl" class="',"x-","mask-msg-text",'{childElCls}">{msg}</div>',"</div>","</div>"],maskOnDisable:false,skipLayout:true,constructor:function(c){var a=this,b;if(arguments.length===2){b=a.target=c;c=arguments[1]}else{b=c.target}Ext.Component.prototype.constructor.call(this,c);if(b.isComponent){a.ownerCt=b;a.hidden=true;a.renderTo=a.getMaskTarget();a.external=a.renderTo===Ext.getBody();a.bindComponent(b)}else{b=Ext.get(b);a.isElement=true;a.renderTo=a.target}a.render(a.renderTo);if(a.store){a.bindStore(a.store,true)}},initRenderData:function(){var a=Ext.Component.prototype.initRenderData.apply(this,arguments);a.msg=this.msg||"";return a},onRender:function(){Ext.Component.prototype.onRender.apply(this,arguments);this.maskEl=this.el},bindComponent:function(b){var a=this,c={scope:this,resize:a.sizeMask};if(a.external){c.added=a.onComponentAdded;c.removed=a.onComponentRemoved;if(b.floating){c.move=a.sizeMask;a.activeOwner=b}else{if(b.ownerCt){a.onComponentAdded(b.ownerCt)}}}a.mon(b,c);if(a.external){a.mon(Ext.GlobalEvents,{show:a.onContainerShow,hide:a.onContainerHide,expand:a.onContainerExpand,collapse:a.onContainerCollapse,scope:a})}},onComponentAdded:function(a){var b=this;delete b.activeOwner;b.floatParent=a;if(!a.floating){a=a.up("[floating]")}if(a){b.activeOwner=a;b.mon(a,"move",b.sizeMask,b);b.mon(a,"tofront",b.onOwnerToFront,b)}else{b.preventBringToFront=true}a=b.floatParent.ownerCt;if(b.rendered&&b.isVisible()&&a){b.floatOwner=a;b.mon(a,"afterlayout",b.sizeMask,b,{single:true})}},onComponentRemoved:function(c){var a=this,b=a.activeOwner,d=a.floatOwner;if(b){a.mun(b,"move",a.sizeMask,a);a.mun(b,"tofront",a.onOwnerToFront,a)}if(d){a.mun(d,"afterlayout",a.sizeMask,a)}delete a.activeOwner;delete a.floatOwner},afterRender:function(){var a=this;Ext.Component.prototype.afterRender.apply(this,arguments);if(Ext.isIE){a.el.on("mousedown",a.onMouseDown,a)}this.el.skipGarbageCollection=true},onMouseDown:function(b){var a=this.el;if(b.within(a)){b.preventDefault();a.focus()}},onOwnerToFront:function(a,b){this.el.setStyle("zIndex",b+1)},onContainerShow:function(a){if(!this.isHierarchicallyHidden()){this.onComponentShow()}},onContainerHide:function(a){if(this.isHierarchicallyHidden()){this.onComponentHide()}},onContainerExpand:function(a){if(!this.isHierarchicallyHidden()){this.onComponentShow()}},onContainerCollapse:function(a){if(this.isHierarchicallyHidden()){this.onComponentHide()}},onComponentHide:function(){var a=this;if(a.rendered&&a.isVisible()){a.hide();a.showNext=true}},onComponentShow:function(){if(this.showNext){this.show()}delete this.showNext},sizeMask:function(){var c=this,a=c.activeOwner||c.target,b=c.external?c.getOwner().el:c.getMaskTarget();if(c.rendered&&c.isVisible()){if(c.external){if(!c.isElement&&a.floating){c.onOwnerToFront(a,a.el.getZIndex())}c.el.setSize(b.getSize()).alignTo(b,"tl-tl")}c.msgWrapEl.center(c.el)}},bindStore:function(b,c){var a=this;Ext.destroy(a.proxyListeners);a.mixins.storeholder.bindStore.apply(a,arguments);b=a.store;if(b){while(b.getSource){b=b.getSource()}if(!b.loadsSynchronously()){a.proxyListeners=b.getProxy().on({exception:a.onLoad,scope:a,destroyable:true})}if(b.isLoading()){a.onBeforeLoad()}}},getStoreListeners:function(d){var b=this.onLoad,a=this.onBeforeLoad,c={cachemiss:a,cachefilled:{fn:b,buffer:100}};if(!d.loadsSynchronously()){c.beforeload=a;c.load=b}return c},onDisable:function(){Ext.Component.prototype.onDisable.apply(this,arguments);if(this.loading){this.onLoad()}},getOwner:function(){return this.ownerCt||this.ownerCmp||this.floatParent},getMaskTarget:function(){var a=this.getOwner();if(this.isElement){return this.target}return this.useTargetEl?a.getTargetEl():(a.getMaskTarget()||Ext.getBody())},onBeforeLoad:function(){var a=this,b=a.getOwner(),c;if(!a.disabled){a.loading=true;if(b.componentLayoutCounter){a.maybeShow()}else{c=b.afterComponentLayout;b.afterComponentLayout=function(){b.afterComponentLayout=c;c.apply(b,arguments);a.maybeShow()}}}},maybeShow:function(){var b=this,a=b.getOwner();if(!a.isVisible(true)){b.showNext=true}else{if(b.loading&&a.rendered){b.show()}}},hide:function(){var b=this,a=b.ownerCt;if(b.isElement){a.unmask();b.fireEvent("hide",this);return}if(a){a.enableTabbing();a.setMasked(false)}delete b.showNext;return Ext.Component.prototype.hide.apply(this,arguments)},show:function(){var a=this;if(a.isElement){a.ownerCt.mask(this.useMsg?this.msg:"",this.msgCls);a.fireEvent("show",this);return}return Ext.Component.prototype.show.apply(this,arguments)},afterShow:function(){var b=this,a=b.ownerCt;b.loading=true;Ext.Component.prototype.afterShow.apply(this,arguments);a.disableTabbing();a.setMasked(true);b.el.restoreTabbableState();b.syncMaskState()},syncMaskState:function(){var a=this,c=a.ownerCt,b=a.el;if(a.isVisible()){if(a.hasOwnProperty("msgWrapCls")){b.dom.className=a.msgWrapCls}if(a.useMsg){a.msgTextEl.setHtml(a.msg)}else{a.msgEl.hide()}if(a.shim||Ext.useShims){b.enableShim(null,true)}else{b.disableShim()}if(c.el.contains(Ext.Element.getActiveElement())){a.focus()}a.sizeMask()}},onLoad:function(){this.loading=false;this.hide()},beforeDestroy:function(){this.ownerCt=null;this.bindStore(null);Ext.Component.prototype.beforeDestroy.call(this)},onDestroy:function(){var a=this;if(a.isElement){a.ownerCt.unmask()}Ext.Component.prototype.onDestroy.call(this)}},1,["loadmask"],["component","box","loadmask"],{component:true,box:true,loadmask:true},["widget.loadmask"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext,"LoadMask"],0));(Ext.cmd.derive("Ext.layout.component.Component",Ext.layout.Layout,{type:"component",isComponentLayout:true,nullBox:{},usesContentHeight:true,usesContentWidth:true,usesHeight:true,usesWidth:true,widthCache:{},heightCache:{},beginLayoutCycle:function(t,m){var j=this,s=j.owner,b=t.ownerCtContext,c=t.heightModel,d=t.widthModel,g=s.el.dom===document.body,a=s.lastBox||j.nullBox,r=s.el.lastBox||j.nullBox,p=!g,u=t.isTopLevel,o,f,q,h;Ext.layout.Layout.prototype.beginLayoutCycle.call(this,t,m);if(m){if(j.usesContentWidth){++t.consumersContentWidth}if(j.usesContentHeight){++t.consumersContentHeight}if(j.usesWidth){++t.consumersWidth}if(j.usesHeight){++t.consumersHeight}if(b&&!b.hasRawContent){o=s.ownerLayout;if(o){if(o.usesWidth){++t.consumersWidth}if(o.usesHeight){++t.consumersHeight}}}}if(d.configured){q=s[d.names.width];if(u&&d.calculatedFrom){q=a.width}if(!g){p=j.setWidthInDom||(m?q!==r.width:d.constrained)}t.setWidth(q,p)}else{if(u){if(d.calculated){f=a.width;t.setWidth(f,f!==r.width)}f=a.x;t.setProp("x",f,f!==r.x)}}if(c.configured){h=s[c.names.height];if(u&&c.calculatedFrom){h=a.height}if(!g){p=m?h!==r.height:c.constrained}t.setHeight(h,p)}else{if(u){if(c.calculated){f=a.height;t.setHeight(f,f!==r.height)}f=a.y;t.setProp("y",f,f!==r.y)}}},finishedLayout:function(g){var b=this,d=g.children,f=b.owner,m,h,c,j,a;if(d){m=d.length;for(h=0;h<m;h++){c=d[h];c.el.lastBox=c.props}}g.previousSize=b.lastComponentSize;b.lastComponentSize=f.el.lastBox=a=g.props;j=f.lastBox||(f.lastBox={});j.x=a.x;j.y=a.y;j.width=a.width;j.height=a.height;j.invalid=false;Ext.layout.Layout.prototype.finishedLayout.call(this,g)},notifyOwner:function(a){var d=this,c=d.lastComponentSize,b=a.previousSize;d.owner.afterComponentLayout(c.width,c.height,b?b.width:undefined,b?b.height:undefined)},getTarget:function(){return this.owner.el},getRenderTarget:function(){return this.owner.el},cacheTargetInfo:function(d){var c=this,b=c.targetInfo,a;if(!b){a=d.getEl("getTarget",c);c.targetInfo=b={padding:a.getPaddingInfo(),border:a.getBorderInfo()}}return b},measureAutoDimensions:function(r,j){var C=this,a=C.owner,z=a.layout,d=r.heightModel,h=r.widthModel,c=r.boxParent,v=r.isBoxParent,p=r.target,b=r.props,m,s={gotWidth:false,gotHeight:false,isContainer:(m=!r.hasRawContent)},B=j||3,y,f,o=0,g=0,q,w,A,t,u;if(h.shrinkWrap&&r.consumersContentWidth){++o;y=!(B&1);if(m){if(y){s.contentWidth=0;s.gotWidth=true;++g}else{if((s.contentWidth=r.getProp("contentWidth"))!==undefined){s.gotWidth=true;++g}}}else{w=b.contentWidth;if(typeof w==="number"){s.contentWidth=w;s.gotWidth=true;++g}else{if(y){q=true}else{if(!r.hasDomProp("containerChildrenSizeDone")){q=false}else{if(v||!c||c.widthModel.shrinkWrap){q=true}else{q=c.hasDomProp("width")}}}if(q){if(y){A=0}else{if(z&&z.measureContentWidth){A=z.measureContentWidth(r)}else{if(p.cacheWidth){t=p.xtype+"-"+p.ui;u=C.widthCache;A=u[t]||(u[t]=C.measureContentWidth(r))}else{A=C.measureContentWidth(r)}}}if(!isNaN(s.contentWidth=A)){r.setContentWidth(A,true);s.gotWidth=true;++g}}}}}else{if(h.natural&&r.consumersWidth){++o;w=b.width;if(typeof w==="number"){s.width=w;s.gotWidth=true;++g}else{if(v||!c){q=true}else{q=c.hasDomProp("width")}if(q){if(!isNaN(s.width=C.measureOwnerWidth(r))){r.setWidth(s.width,false);s.gotWidth=true;++g}}}}}if(d.shrinkWrap&&r.consumersContentHeight){++o;f=!(B&2);if(m){if(f){s.contentHeight=0;s.gotHeight=true;++g}else{if((s.contentHeight=r.getProp("contentHeight"))!==undefined){s.gotHeight=true;++g}}}else{w=b.contentHeight;if(typeof w==="number"){s.contentHeight=w;s.gotHeight=true;++g}else{if(f){q=true}else{if(!r.hasDomProp("containerChildrenSizeDone")){q=false}else{if(a.noWrap){q=true}else{if(!h.shrinkWrap){q=(r.bodyContext||r).hasDomProp("width")}else{if(v||!c||c.widthModel.shrinkWrap){q=true}else{q=c.hasDomProp("width")}}}}}if(q){if(f){A=0}else{if(z&&z.measureContentHeight){A=z.measureContentHeight(r)}else{if(p.cacheHeight){t=p.xtype+"-"+p.ui;u=C.heightCache;A=u[t]||(u[t]=C.measureContentHeight(r))}else{A=C.measureContentHeight(r)}}}if(!isNaN(s.contentHeight=A)){r.setContentHeight(A,true);s.gotHeight=true;++g}}}}}else{if(d.natural&&r.consumersHeight){++o;w=b.height;if(typeof w==="number"){s.height=w;s.gotHeight=true;++g}else{if(v||!c){q=true}else{q=c.hasDomProp("width")}if(q){if(!isNaN(s.height=C.measureOwnerHeight(r))){r.setHeight(s.height,false);s.gotHeight=true;++g}}}}}if(c){r.onBoxMeasured()}s.gotAll=g===o;return s},measureContentWidth:function(a){return a.el.getWidth()-a.getFrameInfo().width},measureContentHeight:function(a){return a.el.getHeight()-a.getFrameInfo().height},measureOwnerHeight:function(a){return a.el.getHeight()},measureOwnerWidth:function(a){return a.el.getWidth()}},0,0,0,0,0,0,[Ext.layout.component,"Component"],0));(Ext.cmd.derive("Ext.layout.component.Auto",Ext.layout.component.Component,{type:"autocomponent",setHeightInDom:false,setWidthInDom:false,waitForOuterHeightInDom:false,waitForOuterWidthInDom:false,beginLayoutCycle:function(f,b){var d=this,a=d.lastWidthModel,g=d.lastHeightModel,c=d.owner.el;Ext.layout.component.Component.prototype.beginLayoutCycle.apply(this,arguments);if(a&&a.fixed&&f.widthModel.shrinkWrap){c.setWidth(null)}if(g&&g.fixed&&f.heightModel.shrinkWrap){c.setHeight(null)}},calculate:function(h){var g=this,f=g.measureAutoDimensions(h),b=h.heightModel,c=h.widthModel,d,a;if(f.gotWidth){if(c.shrinkWrap){g.publishOwnerWidth(h,f.contentWidth)}else{if(g.publishInnerWidth){g.publishInnerWidth(h,f.width)}}}else{if(!c.auto&&g.publishInnerWidth){d=g.waitForOuterWidthInDom?h.getDomProp("width"):h.getProp("width");if(d===undefined){g.done=false}else{g.publishInnerWidth(h,d)}}}if(f.gotHeight){if(b.shrinkWrap){g.publishOwnerHeight(h,f.contentHeight)}else{if(g.publishInnerHeight){g.publishInnerHeight(h,f.height)}}}else{if(!b.auto&&g.publishInnerHeight){a=g.waitForOuterHeightInDom?h.getDomProp("height"):h.getProp("height");if(a===undefined){g.done=false}else{g.publishInnerHeight(h,a)}}}if(!f.gotAll){g.done=false}},calculateOwnerHeightFromContentHeight:function(b,a){return a+b.getFrameInfo().height},calculateOwnerWidthFromContentWidth:function(b,a){return a+b.getFrameInfo().width},publishOwnerHeight:function(h,f){var d=this,a=d.owner,j=d.calculateOwnerHeightFromContentHeight(h,f),g,c,b;if(isNaN(j)){d.done=false}else{g=Ext.Number.constrain(j,a.minHeight,a.maxHeight);if(g===j){c=d.setHeightInDom}else{b=d.sizeModels[(g<j)?"constrainedMax":"constrainedMin"];j=g;if(h.heightModel.calculatedFromShrinkWrap){h.heightModel=b}else{h.invalidate({heightModel:b})}}h.setHeight(j,c)}},publishOwnerWidth:function(g,a){var f=this,j=f.owner,d=f.calculateOwnerWidthFromContentWidth(g,a),h,c,b;if(isNaN(d)){f.done=false}else{h=Ext.Number.constrain(d,j.minWidth,j.maxWidth);if(h===d){c=f.setWidthInDom}else{b=f.sizeModels[(h<d)?"constrainedMax":"constrainedMin"];d=h;if(g.widthModel.calculatedFromShrinkWrap){g.widthModel=b}else{g.invalidate({widthModel:b})}}g.setWidth(d,c)}}},0,0,0,0,["layout.autocomponent"],0,[Ext.layout.component,"Auto"],0));(Ext.cmd.derive("Ext.layout.component.ProgressBar",Ext.layout.component.Auto,{type:"progressbar",beginLayout:function(b){var d=this,c,a;Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);if(!b.textEls){a=d.owner.textEl;if(a.isComposite){b.textEls=[];a=a.elements;for(c=a.length;c--;){b.textEls[c]=b.getEl(Ext.get(a[c]))}}else{b.textEls=[b.getEl("textEl")]}}},calculate:function(b){var f=this,c,a,d;Ext.layout.component.Auto.prototype.calculate.apply(this,arguments);if(Ext.isNumber(d=b.getProp("width"))){d-=b.getBorderInfo().width;a=b.textEls;for(c=a.length;c--;){a[c].setWidth(d)}}else{f.done=false}}},0,0,0,0,["layout.progressbar"],0,[Ext.layout.component,"ProgressBar"],0));(Ext.cmd.derive("Ext.ProgressBar",Ext.Component,{baseCls:"x-progress",animate:false,text:"",waitTimer:null,childEls:["bar"],defaultBindProperty:"value",renderTpl:['<tpl if="internalText">','<div class="{baseCls}-text {baseCls}-text-back">{text}</div>',"</tpl>",'<div id="{id}-bar" data-ref="bar" class="{baseCls}-bar {baseCls}-bar-{ui}" role="presentation" style="width:{percentage}%">','<tpl if="internalText">','<div class="{baseCls}-text">',"<div>{text}</div>","</div>","</tpl>","</div>"],componentLayout:"progressbar",ariaRole:"progressbar",initRenderData:function(){var a=this,b=a.value||0;return Ext.apply(Ext.Component.prototype.initRenderData.call(this),{internalText:!a.hasOwnProperty("textEl"),text:a.text||"&#160;",percentage:b*100})},onRender:function(){var a=this;Ext.Component.prototype.onRender.apply(this,arguments);if(a.textEl){a.textEl=Ext.get(a.textEl);a.updateText(a.text)}else{a.textEl=a.el.select("."+a.baseCls+"-text")}},updateValue:function(a){this.updateProgress(a,Math.round(a*100)+"%")},updateProgress:function(g,a,b){g=g||0;var f=this,c=f.value,d=f.getTextTpl();f.value=g||(g=0);if(a!=null){f.updateText(a)}else{if(d){f.updateText(d.apply({value:g,percent:g*100}))}}if(f.rendered&&!f.destroyed){if(b===true||(b!==false&&f.animate)){f.bar.stopAnimation();f.bar.animate(Ext.apply({from:{width:(c*100)+"%"},to:{width:(g*100)+"%"}},f.animate))}else{f.bar.setStyle("width",(g*100)+"%")}}f.fireEvent("update",f,g,a);return f},updateText:function(b){var a=this;a.text=b;if(a.rendered){a.textEl.setHtml(a.text)}return a},applyText:function(a){this.updateText(a)},getText:function(){return this.text},wait:function(a){var c=this,b;if(!c.waitTimer){b=c;a=a||{};c.updateText(a.text);c.waitTimer=Ext.TaskManager.start({run:function(d){var f=a.increment||10;d-=1;c.updateProgress(((((d+f)%f)+1)*(100/f))*0.01,null,a.animate)},interval:a.interval||1000,duration:a.duration,onStop:function(){if(a.fn){a.fn.apply(a.scope||c)}c.reset()},scope:b})}return c},isWaiting:function(){return this.waitTimer!==null},reset:function(a){var b=this;b.updateProgress(0);b.clearTimer();if(a===true){b.hide()}return b},clearTimer:function(){var a=this;if(a.waitTimer){a.waitTimer.onStop=null;Ext.TaskManager.stop(a.waitTimer);a.waitTimer=null}},onDestroy:function(){var b=this,a=b.bar;b.clearTimer();if(b.rendered){if(b.textEl.isComposite){b.textEl.clear()}Ext.destroyMembers(b,"textEl","progressBar");if(a&&b.animate){a.stopAnimation()}}Ext.Component.prototype.onDestroy.call(this)}},0,["progressbar"],["component","box","progressbar"],{component:true,box:true,progressbar:true},["widget.progressbar"],[[Ext.ProgressBase.prototype.mixinId||Ext.ProgressBase.$className,Ext.ProgressBase]],[Ext,"ProgressBar"],0));(Ext.cmd.derive("Ext.dom.ButtonElement",Ext.dom.Element,{setSize:function(a,c,d){var b=this,f=b.component;Ext.dom.Element.prototype.setSize.call(this,a,c,d);f.btnWrap.setStyle("table-layout",(!a||a==="auto")?"":"fixed");f.btnEl.setStyle("height",(!c||c==="auto")?"":"auto");return b},setStyle:function(a,g){var f=this,c=f.component,d,b;Ext.dom.Element.prototype.setStyle.call(this,a,g);if(a){if(a==="width"||(typeof a!=="string"&&"width" in a)){d=g||a.width;c.btnWrap.setStyle("table-layout",(!d||d==="auto")?"":"fixed")}if(a==="height"||(typeof a!=="string"&&"height" in a)){b=g||a.height;c.btnEl.setStyle("height",(!b||b==="auto")?"":"auto")}}return f},setHeight:function(a,b){Ext.dom.Element.prototype.setHeight.call(this,a,b);this.component.btnEl.setStyle("height",(!a||a==="auto")?"":"auto");return this},setWidth:function(b,a){Ext.dom.Element.prototype.setWidth.call(this,b,a);this.component.btnWrap.setStyle("table-layout",(!b||b==="auto")?"":"fixed");return this}},0,0,0,0,0,0,[Ext.dom,"ButtonElement"],0));(Ext.cmd.derive("Ext.button.Manager",Ext.Base,{singleton:true,alternateClassName:"Ext.ButtonToggleManager",groups:{},pressedButton:null,init:function(){var a=this;if(!a.initialized){Ext.getDoc().on({mouseup:a.onDocumentMouseUp,scope:a});a.initialized=true}},onButtonMousedown:function(b,a){var c=this.pressedButton;if(c){c.onMouseUp(a)}this.pressedButton=b},onDocumentMouseUp:function(b){var a=this.pressedButton;if(a){a.onMouseUp(b);this.pressedButton=null}},toggleGroup:function(d,b){if(b){var a=this.groups[d.toggleGroup],f=a.length,c;for(c=0;c<f;c++){if(a[c]!==d){a[c].toggle(false)}}}},register:function(d){var a=this,c=this.groups,b=c[d.toggleGroup];a.init();if(!d.toggleGroup){return}if(!b){b=c[d.toggleGroup]=[]}b.push(d);d.on("toggle",a.toggleGroup,a)},unregister:function(b){if(!b.toggleGroup){return}var c=this,a=c.groups[b.toggleGroup];if(a){Ext.Array.remove(a,b);b.un("toggle",c.toggleGroup,c)}},getPressed:function(b){var a=this.groups[b],d=0,c;if(a){for(c=a.length;d<c;d++){if(a[d].pressed===true){return a[d]}}}return null}},0,0,0,0,0,0,[Ext.button,"Manager",Ext,"ButtonToggleManager"],0));(Ext.cmd.derive("Ext.menu.Manager",Ext.Base,{singleton:true,alternateClassName:"Ext.menu.MenuMgr",groups:{},visible:[],constructor:function(){var a=this;a.onShow=function(){delete a.onShow;Ext.on("mousedown",a.checkActiveMenus,a);return a.onShow.apply(a,arguments)}},checkActiveMenus:function(f){var a=this.visible,b=a.length,c,g,d=Ext.Component.fromElement(f.target);if(b){a=a.slice();for(c=0;c<b;++c){g=a[c];if(!(g.owns(f)||(d&&d.isMenuCheckItem&&d.menu===g))){g.hide()}}}},onShow:function(a){if(a.floating){Ext.Array.include(this.visible,a)}},onHide:function(a){if(a.floating){Ext.Array.remove(this.visible,a)}},hideAll:function(){var b=this.visible,d=b.length,c=false,a;if(d){b=b.slice();for(a=0;a<d;a++){b[a].hide();c=true}}return c},get:function(a,c){var b;if(typeof a==="string"){b=Ext.getCmp(a);if(b instanceof Ext.menu.Menu){a=b}}else{if(Ext.isArray(a)){c=Ext.apply({items:a},c);a=new Ext.menu.Menu(c)}else{if(!a.isComponent){c=Ext.apply({},a,c);a=Ext.ComponentManager.create(c,"menu")}}}return a},registerCheckable:function(a){var b=this.groups,c=a.group;if(c){if(!b[c]){b[c]=[]}b[c].push(a)}},unregisterCheckable:function(a){var b=this.groups,c=a.group;if(c){Ext.Array.remove(b[c],a)}},onCheckChange:function(c,f){var j=this.groups,b=c.group,a=0,h,d,g;if(b&&f){h=j[b];d=h.length;for(;a<d;a++){g=h[a];if(g!==c){g.setChecked(false)}}}}},1,0,0,0,0,0,[Ext.menu,"Manager",Ext.menu,"MenuMgr"],0));(Ext.cmd.derive("Ext.util.ClickRepeater",Ext.util.Observable,{constructor:function(c,b){var a=this;a.el=Ext.get(c);a.el.unselectable();Ext.apply(a,b);Ext.util.Observable.prototype.constructor.call(this);if(!a.disabled){a.disabled=true;a.enable()}if(a.handler){a.on("click",a.handler,a.scope||a)}},interval:20,delay:250,preventDefault:true,stopDefault:false,timer:0,enable:function(){if(this.disabled){this.el.on("mousedown",this.handleMouseDown,this);if(Ext.isIE8){this.el.on("dblclick",this.handleDblClick,this)}if(this.preventDefault||this.stopDefault){this.el.on("click",this.eventOptions,this)}}this.disabled=false},disable:function(a){if(a||!this.disabled){clearTimeout(this.timer);if(this.pressedCls){this.el.removeCls(this.pressedCls)}Ext.getDoc().un("mouseup",this.handleMouseUp,this);this.el.clearListeners()}this.disabled=true},setDisabled:function(a){this[a?"disable":"enable"]()},eventOptions:function(a){if(this.preventDefault){a.preventDefault()}if(this.stopDefault){a.stopEvent()}},destroy:function(){this.disable(true);Ext.util.Observable.prototype.destroy.call(this)},handleDblClick:function(a){clearTimeout(this.timer);this.fireEvent("mousedown",this,a);this.fireEvent("click",this,a)},handleMouseDown:function(a){clearTimeout(this.timer);if(this.pressedCls){this.el.addCls(this.pressedCls)}this.mousedownTime=new Date();Ext.getDoc().on("mouseup",this.handleMouseUp,this);this.el.on("mouseout",this.handleMouseOut,this);this.fireEvent("mousedown",this,a);this.fireEvent("click",this,a);if(this.accelerate){this.delay=400}this.timer=Ext.defer(this.click,this.delay||this.interval,this,[a]);if(this.mousedownPreventDefault){a.preventDefault()}if(this.mousedownStopEvent){a.stopEvent()}},click:function(a){this.fireEvent("click",this,a);this.timer=Ext.defer(this.click,this.accelerate?this.easeOutExpo(Ext.Date.getElapsed(this.mousedownTime),400,-390,12000):this.interval,this,[a])},easeOutExpo:function(f,a,h,g){return(f===g)?a+h:h*(-Math.pow(2,-10*f/g)+1)+a},handleMouseOut:function(){clearTimeout(this.timer);if(this.pressedCls){this.el.removeCls(this.pressedCls)}this.el.on("mouseover",this.handleMouseReturn,this)},handleMouseReturn:function(a){this.el.un("mouseover",this.handleMouseReturn,this);if(this.pressedCls){this.el.addCls(this.pressedCls)}this.click(a)},handleMouseUp:function(a){clearTimeout(this.timer);this.el.un("mouseover",this.handleMouseReturn,this);this.el.un("mouseout",this.handleMouseOut,this);Ext.getDoc().un("mouseup",this.handleMouseUp,this);if(this.pressedCls){this.el.removeCls(this.pressedCls)}this.fireEvent("mouseup",this,a)}},1,0,0,0,0,0,[Ext.util,"ClickRepeater"],0));(Ext.cmd.derive("Ext.button.Button",Ext.Component,{alternateClassName:"Ext.Button",config:{iconAlign:"left",text:null,textAlign:"center",arrowVisible:true},isButton:true,_syncFrameHeight:true,liquidLayout:true,hidden:false,disabled:false,pressed:false,tabIndex:0,enableToggle:false,menuAlign:"tl-bl?",showEmptyMenu:false,clickEvent:"click",preventDefault:true,handleMouseEvents:true,tooltipType:"qtip",baseCls:"x-btn",hrefTarget:"_blank",destroyMenu:true,focusable:true,ariaRole:"button",keyHandlers:{SPACE:"onEnterKey",ENTER:"onEnterKey",DOWN:"onDownKey"},defaultBindProperty:"text",childEls:["btnEl","btnWrap","btnInnerEl","btnIconEl","arrowEl"],publishes:{pressed:1},_btnWrapCls:"x-btn-wrap",_btnCls:"x-btn-button",_baseIconCls:"x-btn-icon-el",_glyphCls:"x-btn-glyph",_innerCls:"x-btn-inner",_textCls:"x-btn-text",_noTextCls:"x-btn-no-text",_hasIconCls:"x-btn-icon",_pressedCls:"x-btn-pressed",overCls:"x-btn-over",_disabledCls:"x-btn-disabled",_menuActiveCls:"x-btn-menu-active",_arrowElCls:"x-btn-arrow-el",_focusCls:"x-btn-focus",_arrowFocusCls:"x-arrow-focus",renderTpl:'<span id="{id}-btnWrap" data-ref="btnWrap" role="presentation" unselectable="on" style="{btnWrapStyle}" class="{btnWrapCls} {btnWrapCls}-{ui} {splitCls}{childElCls}"><span id="{id}-btnEl" data-ref="btnEl" role="presentation" unselectable="on" style="{btnElStyle}" class="{btnCls} {btnCls}-{ui} {textCls} {noTextCls} {hasIconCls} {iconAlignCls} {textAlignCls} {btnElAutoHeightCls}{childElCls}"><tpl if="iconBeforeText">{[values.$comp.renderIcon(values)]}</tpl><span id="{id}-btnInnerEl" data-ref="btnInnerEl" unselectable="on" class="{innerCls} {innerCls}-{ui}{childElCls}">{text}</span><tpl if="!iconBeforeText">{[values.$comp.renderIcon(values)]}</tpl></span></span>{[values.$comp.getAfterMarkup ? values.$comp.getAfterMarkup(values) : ""]}<tpl if="closable"><span id="{id}-closeEl" data-ref="closeEl" class="{baseCls}-close-btn"><tpl if="closeText"> {closeText}</tpl></span></tpl><tpl if="split"><span id="{id}-arrowEl" class="{arrowElCls}" data-ref="arrowEl" role="button" hidefocus="on" unselectable="on"<tpl if="tabIndex != null"> tabindex="{tabIndex}"</tpl><tpl foreach="arrowElAttributes"> {$}="{.}"</tpl>>{arrowElText}</span></tpl>',iconTpl:'<span id="{id}-btnIconEl" data-ref="btnIconEl" role="presentation" unselectable="on" class="{baseIconCls} {baseIconCls}-{ui} {iconCls} {glyphCls}{childElCls}" style="<tpl if="iconUrl">background-image:url({iconUrl});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl></span>',scale:"small",allowedScales:["small","medium","large"],arrowAlign:"right",arrowCls:"arrow",maskOnDisable:false,shrinkWrap:3,frame:true,autoEl:{tag:"a",hidefocus:"on",unselectable:"on"},hasFrameTable:function(){return this.href&&this.frameTable},frameTableListener:function(){if(!this.disabled){this.doNavigate()}},doNavigate:function(){if(this.hrefTarget==="_blank"){window.open(this.getHref(),this.hrefTarget)}else{location.href=this.getHref()}},_triggerRegion:{},initComponent:function(){var a=this;a.addCls("x-unselectable");Ext.Component.prototype.initComponent.call(this);if(a.menu){a.split=true;a.setMenu(a.menu,false,true)}if(a.url){a.href=a.url}a.configuredWithPreventDefault=a.hasOwnProperty("preventDefault");if(a.href&&!a.configuredWithPreventDefault){a.preventDefault=false}if(Ext.isString(a.toggleGroup)&&a.toggleGroup!==""){a.enableToggle=true}if(a.html&&!a.text){a.text=a.html;delete a.html}},getElConfig:function(){var a=this,d=Ext.Component.prototype.getElConfig.call(this),c=a.getHref(),b=a.hrefTarget;if(d.tag==="a"){if(!a.disabled){d.tabIndex=a.tabIndex}if(c){if(!a.disabled){d.href=c;if(b){d.target=b}}}}if(!a.ariaStaticRoles[a.ariaRole]){if(a.menu&&!a.isSplitButton){d["aria-haspopup"]=true}if(a.enableToggle){d["aria-pressed"]=!!a.pressed}}return d},beforeRender:function(){Ext.Component.prototype.beforeRender.call(this);if(this.pressed){this.addCls(this._pressedCls)}},initRenderData:function(){return Ext.apply(Ext.Component.prototype.initRenderData.call(this),this.getTemplateArgs())},getMenu:function(){return this.menu||null},setMenu:function(h,g,d){var f=this,a=f.menu,j=f.isSplitButton?f.arrowEl&&f.arrowEl.dom:f.ariaEl.dom,b,c;if(a&&!d){if(g!==false&&f.destroyMenu){a.destroy()}a.ownerCmp=null}if(h){b=h.isMenu;h=Ext.menu.Manager.get(h,{ownerCmp:f});h.setOwnerCmp(f,b);h.menuClickBuffer=250;f.mon(h,{scope:f,show:f.onMenuShow,hide:f.onMenuHide});if(!a&&f.getArrowVisible()){f.split=true;if(f.rendered){f._addSplitCls();f.updateLayout()}}f.menu=h;if(j){j.setAttribute("aria-haspopup",true);j.setAttribute("aria-owns",h.id)}else{c=f.isSplitButton?(f.ariaArrowElAttributes||(f.ariaArrowElAttributes={})):(f.ariaRenderAttributes||(f.ariaRenderAttributes={}));c["aria-haspopup"]=true;c["aria-owns"]=h.id}}else{if(f.rendered){j.removeAttribute("aria-haspopup");j.removeAttribute("aria-owns");f._removeSplitCls();f.updateLayout()}else{c=f.isSplitButton?f.ariaArrowElAttributes:f.ariaRenderAttributes;if(c){delete c["aria-haspopup"];delete c["aria-owns"]}}f.split=false;f.menu=null}},onRender:function(){var a=this,b,c,d;Ext.Component.prototype.onRender.apply(this,arguments);c=a.el;if(a.tooltip){a.setTooltip(a.tooltip,true)}if(a.handleMouseEvents){d={scope:a,mouseover:a.onMouseOver,mouseout:a.onMouseOut,mousedown:a.onMouseDown};if(a.split){d.mousemove=a.onMouseMove}}else{d={scope:a}}if(Ext.supports.Touch){d.touchstart=a.onTouchStart}if(a.repeat){a.mon(new Ext.util.ClickRepeater(c,Ext.isObject(a.repeat)?a.repeat:{}),"click",a.onRepeatClick,a)}else{if(d[a.clickEvent]){b=true}else{d[a.clickEvent]=a.onClick}}a.mon(c,d);if(a.hasFrameTable()){a.mon(a.frameTable,"click",a.frameTableListener,a)}if(b){a.mon(c,a.clickEvent,a.onClick,a)}Ext.button.Manager.register(a)},onFocusLeave:function(a){Ext.Component.prototype.onFocusLeave.call(this,a);if(this.menu){this.menu.hide()}},getTemplateArgs:function(){var a=this,g=a._btnCls,j=a._baseIconCls,d=a.getIconAlign(),b=a.glyph,o=Ext._glyphFontFamily,c=a.text,h=a._hasIcon(),m=a._hasIconCls,f;if(typeof b==="string"){f=b.split("@");b=f[0];o=f[1]}return{split:a.isSplitButton,innerCls:a._innerCls,splitCls:a.getArrowVisible()?a.getSplitCls():"",iconUrl:a.icon,iconCls:a.iconCls,glyph:b,glyphCls:b?a._glyphCls:"",glyphFontFamily:o,text:c||"&#160;",closeText:a.closeText,textCls:c?a._textCls:"",noTextCls:c?"":a._noTextCls,hasIconCls:h?m:"",btnWrapCls:a._btnWrapCls,btnWrapStyle:a.width?"table-layout:fixed;":"",btnElStyle:a.height?"height:auto;":"",btnCls:g,baseIconCls:j,iconBeforeText:d==="left"||d==="top",iconAlignCls:h?(m+"-"+d):"",textAlignCls:g+"-"+a.getTextAlign(),arrowElCls:a._arrowElCls,tabIndex:a.tabIndex}},renderIcon:function(a){return this.getTpl("iconTpl").apply(a)},setHref:function(c){var d=this,b=d.hrefTarget,a;d.href=c;if(!d.configuredWithPreventDefault){d.preventDefault=!c}if(d.rendered){a=d.el.dom;if(!c||d.disabled){a.removeAttribute("href");a.removeAttribute("hrefTarget")}else{a.href=d.getHref();if(b){a.target=b}}}},getHref:function(){var b=this,a=b.href;return a?Ext.urlAppend(a,Ext.Object.toQueryString(Ext.apply({},b.params,b.baseParams))):false},setParams:function(a){var b=this,c;b.params=a;if(b.rendered){c=b.el.dom;if(b.disabled){c.removeAttribute("href")}else{c.href=b.getHref()||""}}},getSplitCls:function(){var a=this;return a.split?(a.baseCls+"-"+a.arrowCls)+" "+(a.baseCls+"-"+a.arrowCls+"-"+a.arrowAlign):""},setIcon:function(d){d=d||"";var a=this,c=a.btnIconEl,b=a.icon||"";a.icon=d;if(d!==b){if(c){c.setStyle("background-image",d?"url("+d+")":"");a._syncHasIconCls();if(a.didIconStateChange(b,d)){a.updateLayout()}}a.fireEvent("iconchange",a,b,d)}return a},setIconCls:function(d){d=d||"";var b=this,c=b.btnIconEl,a=b.iconCls||"";b.iconCls=d;if(a!==d){if(c){c.removeCls(a);c.addCls(d);b._syncHasIconCls();if(b.didIconStateChange(a,d)){b.updateLayout()}}b.fireEvent("iconchange",b,a,d)}return b},setGlyph:function(g){g=g||0;var f=this,b=f.btnIconEl,c=f.glyph,h=f._glyphCls,a,d;f.glyph=g;if(b){if(typeof g==="string"){d=g.split("@");g=d[0];a=d[1]||Ext._glyphFontFamily}if(!g){b.dom.innerHTML="";b.removeCls(h)}else{if(c!==g){b.dom.innerHTML="&#"+g+";";b.addCls(h)}}if(a){b.setStyle("font-family",a)}f._syncHasIconCls();if(f.didIconStateChange(c,g)){f.updateLayout()}}f.fireEvent("glyphchange",f,f.glyph,c);return f},setTooltip:function(a,b){var c=this;if(c.rendered){if(!b||!a){c.clearTip()}if(a){if(Ext.quickTipsActive&&Ext.isObject(a)){Ext.tip.QuickTipManager.register(Ext.apply({target:c.el.id},a));c.tooltip=a}else{c.el.dom.setAttribute(c.getTipAttr(),a)}}}else{c.tooltip=a}return c},updateIconAlign:function(a,f){var d=this,c,b,g;if(d.rendered){c=d.btnEl;b=d.btnIconEl;g=d._hasIconCls;if(f){c.removeCls(g+"-"+f)}c.addCls(g+"-"+a);if(a==="top"||a==="left"){c.insertFirst(b)}else{c.appendChild(b)}d.updateLayout()}},updateTextAlign:function(b,a){var f=this,d=f.btnEl,c=f._btnCls;if(f.rendered){d.removeCls(c+"-"+a);d.addCls(c+"-"+b)}},getTipAttr:function(){return this.tooltipType==="qtip"?"data-qtip":"title"},getRefItems:function(b){var a=this.menu,c;if(a){c=a.getRefItems(b);c.unshift(a)}return c||[]},clearTip:function(){var b=this,a=b.el;if(Ext.quickTipsActive&&Ext.isObject(b.tooltip)){Ext.tip.QuickTipManager.unregister(a)}else{a.dom.removeAttribute(b.getTipAttr())}},beforeDestroy:function(){var a=this;if(a.rendered){a.clearTip()}Ext.destroy(a.repeater);Ext.Component.prototype.beforeDestroy.call(this)},onDestroy:function(){var a=this,b=a.menu;if(a.rendered){Ext.destroy(a.keyMap);delete a.keyMap}if(b&&a.destroyMenu){a.menu=Ext.destroy(b)}Ext.button.Manager.unregister(a);Ext.Component.prototype.onDestroy.call(this)},setHandler:function(b,a){this.handler=b;if(arguments.length>1){this.scope=a}return this},updateText:function(a,c){a=a==null?"":String(a);c=c||"";var f=this,b=f.btnInnerEl,d=f.btnEl;if(f.rendered){b.setHtml(a||"&#160;");d[a?"addCls":"removeCls"](f._textCls);d[a?"removeCls":"addCls"](f._noTextCls);f.updateLayout()}f.fireEvent("textchange",f,c,a)},didIconStateChange:function(b,a){var c=Ext.isEmpty(a);return Ext.isEmpty(b)?!c:c},click:function(a){return this.onClick(a)},setPressed:function(a){return this.toggle(a!==false)},toggle:function(b,d){var a=this,c=a.ariaEl.dom;b=b===undefined?!a.pressed:!!b;if(a.fireEvent("beforetoggle",a,b)!==false){if(b!==a.pressed){a[b?"addCls":"removeCls"](a._pressedCls);a.pressed=b;if(c){c.setAttribute("aria-pressed",b)}if(!d){a.fireEvent("toggle",a,b);Ext.callback(a.toggleHandler,a.scope,[a,b],0,a);if(a.reference&&a.publishState){a.publishState("pressed",b)}}}}return a},maybeShowMenu:function(a){if(this.menu){this.showMenu(a)}},showMenu:function(c){var a=this,b=a.menu,d=!c||c.pointerType;if(b&&a.rendered){if(a.tooltip&&Ext.quickTipsActive&&a.getTipAttr()!=="title"){Ext.tip.QuickTipManager.getQuickTip().cancelShow(a.el)}if(b.isVisible()){if(d){b.hide()}else{b.focus()}}else{if(!c||a.showEmptyMenu||b.items.getCount()>0){b.autoFocus=!d;b.showBy(a.el,a.menuAlign)}}}return a},hideMenu:function(){if(this.hasVisibleMenu()){this.menu.hide()}return this},hasVisibleMenu:function(){var a=this.menu;return a&&a.rendered&&a.isVisible()},onRepeatClick:function(a,b){this.onClick(b)},onTouchStart:function(a){this.doPreventDefault(a)},onEnterKey:function(a){this.onClick(a);a.stopEvent();return false},onClick:function(b){var a=this;a.doPreventDefault(b);if(b.type!=="keydown"&&b.button){return}if(!a.disabled){a.doToggle();a.maybeShowMenu(b);a.fireHandler(b)}},doPreventDefault:function(a){if(a&&(this.preventDefault||(this.disabled&&this.getHref()))){a.preventDefault()}},fireHandler:function(b){var a=this;if(a.fireEvent("click",a,b)!==false&&!a.destroyed){Ext.callback(a.handler,a.scope,[a,b],0,a)}},doToggle:function(){var a=this;if(a.enableToggle&&(a.allowDepress!==false||!a.pressed)){a.toggle()}},onMouseOver:function(b){var a=this;if(!a.disabled&&!b.within(a.el,true,true)){a.onMouseEnter(b)}},onMouseOut:function(b){var a=this;if(!b.within(a.el,true,true)){if(a.overMenuTrigger){a.onMenuTriggerOut(b)}a.onMouseLeave(b)}},onMouseMove:function(a){var b=this,c=b.overMenuTrigger;if(b.split){if(b.isWithinTrigger(a)){if(!c){b.onMenuTriggerOver(a)}}else{if(c){b.onMenuTriggerOut(a)}}}},isWithinTrigger:function(a){var f=this,d=f.el,b,c;b=(f.arrowAlign==="right")?a.getX()-f.getX():a.getY()-d.getY();c=f.getTriggerRegion();return b>c.begin&&b<c.end},getTriggerRegion:function(){var a=this,b=a._triggerRegion,f=a.arrowAlign==="right",d=f?"getRight":"getBottom",c=f?a.getWidth():a.getHeight();b.begin=c-(a.el[d]()-a.btnEl[d]());b.end=c;return b},onMouseEnter:function(a){this.fireEvent("mouseover",this,a)},onMouseLeave:function(a){this.fireEvent("mouseout",this,a)},onMenuTriggerOver:function(a){var c=this,b=c.arrowTooltip;c.overMenuTrigger=true;if(c.split&&b){c.btnWrap.dom.setAttribute(c.getTipAttr(),b)}c.fireEvent("menutriggerover",c,c.menu,a)},onMenuTriggerOut:function(b){var a=this;delete a.overMenuTrigger;if(a.split&&a.arrowTooltip){a.btnWrap.dom.setAttribute(a.getTipAttr(),"")}a.fireEvent("menutriggerout",a,a.menu,b)},onEnable:function(){var d=this,c=d.href,b=d.hrefTarget,a=d.el.dom;Ext.Component.prototype.onEnable.call(this);d.removeCls(d._disabledCls);a.setAttribute("tabIndex",d.tabIndex);if(c){a.href=c}if(b){a.target=b}},onDisable:function(){var a=this,b=a.el.dom;Ext.Component.prototype.onDisable.call(this);a.addCls(a._disabledCls);a.removeCls(a.overCls);b.removeAttribute("tabIndex");if(a.href){b.removeAttribute("href")}if(a.hrefTarget){b.removeAttribute("target")}},setScale:function(a){var b=this,c=b.ui.replace("-"+b.scale,"");if(!Ext.Array.contains(b.allowedScales,a)){throw ("#setScale: scale must be an allowed scale ("+b.allowedScales.join(", ")+")")}b.scale=a;b.setUI(c)},setUI:function(b){var a=this;if(a.scale&&!b.match(a.scale)){b=b+"-"+a.scale}Ext.Component.prototype.setUI.call(this,b)},onMouseDown:function(b){var a=this;if(Ext.isIE||b.pointerType==="touch"){Ext.defer(function(){var c=a.getFocusEl();if(c&&!b.defaultPrevented){c.focus()}},1)}if(!a.disabled&&b.button===0){Ext.button.Manager.onButtonMousedown(a,b);a.addCls(a._pressedCls)}},onMouseUp:function(b){var a=this;if(!a.destroyed&&b.button===0){if(!a.pressed){a.removeCls(a._pressedCls)}}},onMenuShow:function(){var a=this;a.addCls(a._menuActiveCls);a.fireEvent("menushow",a,a.menu)},onMenuHide:function(b){var a=this;a.removeCls(a._menuActiveCls);a.fireEvent("menuhide",a,a.menu)},onDownKey:function(b){var a=this;if(a.menu&&!a.disabled){a.showMenu(b);b.stopEvent();return false}},updateArrowVisible:function(b){var a=this;if(a.rendered){if(b){if(a.menu||a.isSplitButton){a.split=true;a._addSplitCls()}}else{a._removeSplitCls();a.split=false}}return b},privates:{addOverCls:function(){if(!this.disabled){this.addCls(this.overCls)}},_addSplitCls:function(){var a=this;a.btnWrap.addCls(a.getSplitCls())},getTdCls:function(){return"x-button-"+this.ui+"-"+this.scale+"-cell"},removeOverCls:function(){this.removeCls(this.overCls)},_removeSplitCls:function(){var a=this;a.btnWrap.removeCls(a.getSplitCls())},_syncHasIconCls:function(){var c=this,b=c.btnEl,a=c._hasIconCls;if(b){b[c._hasIcon()?"addCls":"removeCls"]([a,a+"-"+c.iconAlign])}},_hasIcon:function(){return !!(this.icon||this.iconCls||this.glyph)},wrapPrimaryEl:function(a){this.el=new Ext.dom.ButtonElement(a);Ext.Component.prototype.wrapPrimaryEl.call(this,a)}}},0,["button"],["component","box","button"],{component:true,box:true,button:true},["widget.button"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable],[Ext.util.KeyboardInteractive.prototype.mixinId||Ext.util.KeyboardInteractive.$className,Ext.util.KeyboardInteractive]],[Ext.button,"Button",Ext,"Button"],0));(Ext.cmd.derive("Ext.panel.Bar",Ext.container.Container,{vertical:false,_verticalSides:{left:1,right:1},initComponent:function(){var b=this,a=b.vertical;b.dock=b.dock||(a?"left":"top");b.layout=Ext.apply(a?{type:"vbox",align:"middle",alignRoundingMethod:"ceil"}:{type:"hbox",align:"middle",alignRoundingMethod:"floor"},b.layout);Ext.container.Container.prototype.initComponent.call(this)},onAdded:function(c,a,b){this.initOrientation();Ext.container.Container.prototype.onAdded.call(this,c,a,b)},onRemoved:function(a){this.removeClsWithUI(this.uiCls);Ext.container.Container.prototype.onRemoved.call(this,a)},beforeRender:function(){var a=this;if(a.forceOrientation||!a.ownerCt){a.initOrientation()}Ext.container.Container.prototype.beforeRender.call(this)},setDock:function(b){var a=this,d,c;if(b!==a.dock){Ext.suspendLayouts();a.clearOrientation();Ext.container.Container.prototype.setDock.call(this,b);a.initOrientation();c=a.vertical;d=a.layout;d.setVertical(c);d.setAlignRoundingMethod(c?"ceil":"floor");Ext.resumeLayouts(true)}},privates:{clearOrientation:function(){this.removeClsWithUI([this.vertical?"vertical":"horizontal",this.getDockName()])},getDockName:function(){return this.dock},initOrientation:function(){var a=this,c=a.dock,b=(a.vertical=(c?c in a._verticalSides:a.vertical));a.addClsWithUI([b?"vertical":"horizontal",a.getDockName()])}}},0,0,["component","box","container"],{component:true,box:true,container:true},0,0,[Ext.panel,"Bar"],0));(Ext.cmd.derive("Ext.panel.Title",Ext.Component,{isTitle:true,noWrap:true,textAlign:"left",iconAlign:"left",rotation:0,text:"&#160;",beforeRenderConfig:{textAlign:null,text:null,glyph:null,icon:null,iconAlign:null,iconCls:null,rotation:null},autoEl:{role:"presentation",unselectable:"on"},textElRole:"presentation",tabIndex:0,childEls:["textEl","iconEl","iconWrapEl"],renderTpl:'<tpl if="iconMarkup && iconBeforeTitle">{iconMarkup}</tpl><div id="{id}-textEl" data-ref="textEl" class="{textCls} {textCls}-{ui} {itemCls}{childElCls}" unselectable="on"<tpl if="textElRole"> role="{textElRole}"</tpl>>{text}</div><tpl if="iconMarkup && !iconBeforeTitle">{iconMarkup}</tpl>',iconTpl:'<div id="{id}-iconWrapEl" data-ref="iconWrapEl" role="presentation" class="{iconWrapCls} {iconWrapCls}-{ui} {iconAlignCls} {itemCls}{childElCls}"<tpl if="iconWrapStyle"> style="{iconWrapStyle}"</tpl>><div id="{id}-iconEl" data-ref="iconEl" role="presentation" unselectable="on" class="{baseIconCls} {baseIconCls}-{ui} {iconCls} {glyphCls}" style="<tpl if="iconUrl">background-image:url({iconUrl});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl></div></div>',_textAlignClasses:{left:"x-title-align-left",center:"x-title-align-center",right:"x-title-align-right"},_iconAlignClasses:{top:"x-title-icon-top",right:"x-title-icon-right",bottom:"x-title-icon-bottom",left:"x-title-icon-left"},_rotationClasses:{0:"x-title-rotate-none",1:"x-title-rotate-right",2:"x-title-rotate-left"},_rotationAngles:{1:90,2:270},baseCls:"x-title",_titleSuffix:"-title",_glyphCls:"x-title-glyph",_iconWrapCls:"x-title-icon-wrap",_baseIconCls:"x-title-icon",_itemCls:"x-title-item",_textCls:"x-title-text",afterComponentLayout:function(){var a=this,d=a.getRotation(),c,b,f;if(d&&!Ext.isIE8){f=a.el;c=a.lastBox;b=c.x;f.setStyle(a._getVerticalAdjustDirection(),(b+((d===1)?c.width:-c.height))+"px")}Ext.Component.prototype.afterComponentLayout.call(this)},onRender:function(){var a=this,b=a.getRotation(),c=a.el;Ext.Component.prototype.onRender.call(this);if(b){c.setVertical(a._rotationAngles[b])}if(Ext.supports.FixedTableWidthBug){c._needsTableWidthFix=true}},applyText:function(a){if(!a){a="&#160;"}return a},beforeRender:function(){var a=this;Ext.Component.prototype.beforeRender.call(this);a.addCls(a._rotationClasses[a.getRotation()]);a.addCls(a._textAlignClasses[a.getTextAlign()])},getIconMarkup:function(){return this.getTpl("iconTpl").apply(this.getIconRenderData())},getIconRenderData:function(){var g=this,c=g.getIcon(),b=g.getIconCls(),f=g.getGlyph(),h=Ext._glyphFontFamily,a=g.getIconAlign(),d;if(typeof f==="string"){d=f.split("@");f=d[0];h=d[1]}return{id:g.id,ui:g.ui,itemCls:g._itemCls,iconUrl:c,iconCls:b,iconWrapCls:g._iconWrapCls,baseIconCls:g._baseIconCls,iconAlignCls:g._iconAlignClasses[a],glyph:f,glyphCls:f?g._glyphCls:"",glyphFontFamily:h}},initRenderData:function(){var c=this,b,a;a=Ext.apply({text:c.getText(),textElRole:c.textElRole,id:c.id,ui:c.ui,itemCls:c._itemCls,textCls:c._textCls,iconMarkup:null,iconBeforeTitle:null},Ext.Component.prototype.initRenderData.call(this));if(c._hasIcon()){b=c.getIconAlign();a.iconMarkup=c.getIconMarkup();a.iconBeforeTitle=(b==="top"||b==="left")}return a},onAdded:function(c,a,b){var f=this,g=f._titleSuffix,d=c.baseCls;f.addCls([d+g,d+g+"-"+c.ui]);Ext.Component.prototype.onAdded.call(this,c,a,b)},updateGlyph:function(g,c){g=g||0;var f=this,h=f._glyphCls,b,a,d;f.glyph=g;if(f.rendered){f._syncIconVisibility();b=f.iconEl;if(typeof g==="string"){d=g.split("@");g=d[0];a=d[1]||Ext._glyphFontFamily}if(!g){b.dom.innerHTML="";b.removeCls(h)}else{if(c!==g){b.dom.innerHTML="&#"+g+";";b.addCls(h)}}if(a){b.setStyle("font-family",a)}if(f._didIconStateChange(c,g)){f.updateLayout()}}},updateIcon:function(d,b){d=d||"";var a=this,c;if(a.rendered&&d!==b){a._syncIconVisibility();c=a.iconEl;c.setStyle("background-image",d?"url("+d+")":"");if(a._didIconStateChange(b,d)){a.updateLayout()}}},updateIconAlign:function(a,d){var c=this,g=c.iconWrapEl,b,f;if(c.iconWrapEl){b=c.el;f=c._iconAlignClasses;if(d){g.removeCls(f[d])}g.addCls(f[a]);if(a==="top"||a==="left"){b.insertFirst(g)}else{b.appendChild(g)}c.updateLayout()}},updateIconCls:function(d,a){d=d||"";var b=this,c;if(b.rendered&&a!==d){b._syncIconVisibility();c=b.iconEl;if(a){c.removeCls(a)}c.addCls(d);if(b._didIconStateChange(a,d)){b.updateLayout()}}},updateRotation:function(d,c){var a=this,f,b;if(a.rendered){f=a.el;b=a._rotationClasses;a.removeCls(b[c]);a.addCls(b[d]);f.setHorizontal();if(d){f.setVertical(a._rotationAngles[d])}f.setStyle({right:"",left:"",top:"",height:"",width:""});a.lastBox=null;a.updateLayout()}},updateText:function(a){if(this.rendered){this.textEl.setHtml(a);this.updateLayout()}},updateTextAlign:function(b,d){var c=this,a=c._textAlignClasses;if(c.rendered){if(d){c.removeCls(a[d])}c.addCls(a[b]);c.updateLayout()}},privates:{_getVerticalAdjustDirection:function(){return"left"},_didIconStateChange:function(b,a){var c=Ext.isEmpty(a);return Ext.isEmpty(b)?!c:c},_hasIcon:function(){return !!(this.getIcon()||this.getIconCls()||this.getGlyph())},_syncIconVisibility:function(){var g=this,f=g.el,b=g._hasIcon(),a=g.iconWrapEl,d,c;if(b&&!a){c=g.iconAlign;d=(c==="left"||c==="top");f.dom.insertAdjacentHTML(d?"afterbegin":"beforeend",g.getIconMarkup());a=g.iconWrapEl=f[d?"first":"last"]();g.iconEl=a.first()}if(a){a.setDisplayed(b)}}}},0,["title"],["component","box","title"],{component:true,box:true,title:true},["widget.title"],0,[Ext.panel,"Title"],0));(Ext.cmd.derive("Ext.panel.Tool",Ext.Component,{isTool:true,baseCls:"x-tool",disabledCls:"x-tool-disabled",toolPressedCls:"x-tool-pressed",toolOverCls:"x-tool-over",childEls:["toolEl"],renderTpl:['<div id="{id}-toolEl" data-ref="toolEl" class="{baseCls}-img {baseCls}-{type}{childElCls}" role="presentation"></div>'],toolOwner:null,tooltipType:"qtip",stopEvent:true,ariaRole:"button",focusable:true,tabIndex:0,keyHandlers:{SPACE:"onClick",ENTER:"onClick"},cacheHeight:true,cacheWidth:true,initComponent:function(){var a=this;a.type=a.type||a.id;Ext.applyIf(a.renderData,{baseCls:a.baseCls,type:a.type});a.tooltip=a.tooltip||a.qtip;Ext.Component.prototype.initComponent.call(this)},afterRender:function(){var a=this,b;Ext.Component.prototype.afterRender.apply(this,arguments);a.el.on({click:a.onClick,mousedown:a.onMouseDown,mouseover:a.onMouseOver,mouseout:a.onMouseOut,scope:a});b=a.tooltip;if(b){a.setTooltip(b)}},tipAttrs:{qtip:"data-qtip"},setTooltip:function(g,c){var d=this,a=d.tooltip,f=d.tooltipType,h=d.id,b=d.el,j;if(a&&Ext.quickTipsActive&&Ext.isObject(a)){Ext.tip.QuickTipManager.unregister(h)}d.tooltip=g;if(c){d.tooltipType=c}if(g){if(Ext.quickTipsActive&&Ext.isObject(g)){Ext.tip.QuickTipManager.register(Ext.apply({target:h},g))}else{if(b){if(c&&f&&c!==f){j=d.tipAttrs[f]||"title";b.dom.removeAttribute(j)}j=d.tipAttrs[c||f]||"title";b.dom.setAttribute(j,g)}}if(j!=="title"&&d.ariaRole&&d.ariaRole!=="presentation"){if(b){b.dom.setAttribute("aria-label",g)}else{d.ariaRenderAttributes=d.ariaRenderAttributes||{};d.ariaRenderAttributes["aria-label"]=g}}}},setType:function(b){var c=this,a=c.type;c.type=b;if(c.rendered){if(a){c.toolEl.removeCls(c.baseCls+"-"+a)}c.toolEl.addCls(c.baseCls+"-"+b)}else{c.renderData.type=b}return c},onDestroy:function(){var a=this,b=a.keyMap;a.setTooltip(null);delete a.toolOwner;Ext.Component.prototype.onDestroy.call(this)},privates:{onClick:function(a,c){var b=this;if(b.disabled){return false}if(a.type!=="keydown"){b.el.removeCls(b.toolPressedCls+" "+b.toolOverCls)}if(b.stopEvent!==false){a.stopEvent()}if(b.handler){Ext.callback(b.handler,b.scope,[a,c,b.ownerCt,b],0,b)}else{if(b.callback){Ext.callback(b.callback,b.scope,[b.toolOwner||b.ownerCt,b,a],0,b)}}b.fireEvent("click",b,a,b.toolOwner||b.ownerCt);return true},onMouseDown:function(a){a.preventDefault();if(this.disabled){return false}this.el.addCls(this.toolPressedCls)},onMouseOver:function(){if(this.disabled){return false}this.el.addCls(this.toolOverCls)},onMouseOut:function(){this.el.removeCls(this.toolOverCls)}}},0,["tool"],["component","box","tool"],{component:true,box:true,tool:true},["widget.tool"],0,[Ext.panel,"Tool"],0));(Ext.cmd.derive("Ext.util.KeyMap",Ext.Base,{alternateClassName:"Ext.KeyMap",eventName:"keydown",constructor:function(a){var b=this;if((arguments.length!==1)||(typeof a==="string")||a.dom||a.tagName||a===document||a.isComponent){b.legacyConstructor.apply(b,arguments);return}Ext.apply(b,a);b.bindings=[];if(!b.target.isComponent){b.target=Ext.get(b.target)}if(b.binding){b.addBinding(b.binding)}else{if(a.key){b.addBinding(a)}}b.enable()},legacyConstructor:function(d,b,c){var a=this;Ext.apply(a,{target:Ext.get(d),eventName:c||a.eventName,bindings:[]});if(b){a.addBinding(b)}a.enable()},addBinding:function(b){var f=this,a=b.key,d,c;if(f.processing){f.bindings=f.bindings.slice(0)}if(Ext.isArray(b)){for(d=0,c=b.length;d<c;d++){f.addBinding(b[d])}return}f.bindings.push(Ext.apply({keyCode:f.processKeys(a)},b))},removeBinding:function(g){var f=this,h=f.bindings,a=h.length,b,d,c;if(f.processing){f.bindings=h.slice(0)}c=f.processKeys(g.key);for(b=0;b<a;++b){d=h[b];if((d.fn||d.handler)===(g.fn||g.handler)&&d.scope===g.scope){if(g.alt===d.alt&&g.crtl===d.crtl&&g.shift===d.shift){if(Ext.Array.equals(d.keyCode,c)){Ext.Array.erase(f.bindings,b,1);return}}}}},processKeys:function(g){var h=false,d,f,b,a,c;if(g.test){return g}if(Ext.isString(g)){f=[];b=g.toUpperCase();for(c=0,a=b.length;c<a;++c){f.push(b.charCodeAt(c))}g=f;h=true}if(!Ext.isArray(g)){g=[g]}if(!h){for(c=0,a=g.length;c<a;++c){d=g[c];if(Ext.isString(d)){g[c]=d.toUpperCase().charCodeAt(0)}}}return g},handleTargetEvent:function(g){var f=this,a,d,c,b;if(f.enabled){a=f.bindings;d=0;c=a.length;g=f.processEvent.apply(f.processEventScope||f,arguments);if(g){f.lastKeyEvent=g;if(f.ignoreInputFields&&Ext.fly(g.target).isInputField()){return}if(!g.getKey){return g}f.processing=true;for(;d<c;++d){b=f.processBinding(a[d],g);if(b===false){f.processing=false;return b}}f.processing=false}}},processEvent:Ext.identityFn,processBinding:function(j,d){if(this.checkModifiers(j,d)){var m=d.getKey(),a=j.fn||j.handler,b=j.scope||this,o=j.keyCode,f=j.defaultEventAction,g,h,c;if(o.test){if(o.test(String.fromCharCode(d.getCharCode()))){c=a.call(b,m,d);if(c!==true&&f){d[f]()}if(c===false){return c}}}else{if(o.length){for(g=0,h=o.length;g<h;++g){if(m===o[g]){c=a.call(b,m,d);if(c!==true&&f){d[f]()}if(c===false){return c}break}}}}}},checkModifiers:function(h,f){var d=["shift","ctrl","alt"],c=0,a=d.length,g,b;for(;c<a;++c){b=d[c];g=h[b];if(!(g===undefined||(g===f[b+"Key"]))){return false}}return true},on:function(b,d,c){var h,a,f,g;if(Ext.isObject(b)&&!Ext.isArray(b)){h=b.key;a=b.shift;f=b.ctrl;g=b.alt}else{h=b}this.addBinding({key:h,shift:a,ctrl:f,alt:g,fn:d,scope:c})},un:function(b,d,c){var h,a,f,g;if(Ext.isObject(b)&&!Ext.isArray(b)){h=b.key;a=b.shift;f=b.ctrl;g=b.alt}else{h=b}this.removeBinding({key:h,shift:a,ctrl:f,alt:g,fn:d,scope:c})},isEnabled:function(){return this.enabled},enable:function(){var a=this;if(!a.enabled){a.target.on(a.eventName,a.handleTargetEvent,a,{capture:a.capture,priority:a.priority});a.enabled=true}},disable:function(){var a=this;if(a.enabled){a.target.removeListener(a.eventName,a.handleTargetEvent,a);a.enabled=false}},setDisabled:function(a){if(a){this.disable()}else{this.enable()}},destroy:function(a){var b=this,c=b.target;b.bindings=[];b.disable();if(a){c.destroy()}delete b.target;b.callParent()}},1,0,0,0,0,0,[Ext.util,"KeyMap",Ext,"KeyMap"],0));(Ext.cmd.derive("Ext.util.KeyNav",Ext.Base,{alternateClassName:"Ext.KeyNav",disabled:false,defaultEventAction:false,forceKeyDown:false,eventName:"keypress",statics:{keyOptions:{left:37,right:39,up:38,down:40,space:32,pageUp:33,pageDown:34,del:46,backspace:8,home:36,end:35,enter:13,esc:27,tab:9}},constructor:function(a){var b=this;if(arguments.length===2){b.legacyConstructor.apply(b,arguments);return}b.doConstruction(a)},legacyConstructor:function(b,a){this.doConstruction(Ext.apply({target:b},a))},doConstruction:function(c){var a=this,d={target:c.target,ignoreInputFields:c.ignoreInputFields,eventName:a.getKeyEvent("forceKeyDown" in c?c.forceKeyDown:a.forceKeyDown,c.eventName),capture:c.capture},b;if(a.map){a.map.destroy()}a.initConfig(c);if(c.processEvent){d.processEvent=c.processEvent;d.processEventScope=c.processEventScope||a}if(c.priority){d.priority=c.priority}if(c.keyMap){b=a.map=c.keyMap}else{b=a.map=new Ext.util.KeyMap(d);a.destroyKeyMap=true}this.addBindings(c);b.disable();if(!c.disabled){b.enable()}},addBindings:function(h){var b=this,a,f,d=b.map,j=Ext.util.KeyNav.keyOptions,c,g=h.scope||b;for(a in h){f=h[a];c=j[a];if(c!=null){a=c}if(f&&(a.length===1||!isNaN(a=parseInt(a,10)))){if(typeof f==="function"){f={handler:f,defaultEventAction:(h.defaultEventAction!==undefined)?h.defaultEventAction:b.defaultEventAction}}d.addBinding({key:a,ctrl:f.ctrl,shift:f.shift,alt:f.alt,handler:Ext.Function.bind(b.handleEvent,f.scope||g,[f.handler||f.fn,b],true),defaultEventAction:(f.defaultEventAction!==undefined)?f.defaultEventAction:b.defaultEventAction})}}},handleEvent:function(b,a,d,c){c.lastKeyEvent=a;return d.call(this,a)},destroy:function(b){var a=this;if(a.destroyKeyMap){a.map.destroy(b)}delete a.map;a.callParent()},enable:function(){if(this.map){this.map.enable();this.disabled=false}},disable:function(){if(this.map){this.map.disable()}this.disabled=true},setDisabled:function(a){this.map.setDisabled(a);this.disabled=a},getKeyEvent:function(b,a){if(b||(Ext.supports.SpecialKeyDownRepeat&&!a)){return"keydown"}else{return a||this.eventName}}},1,0,0,0,0,0,[Ext.util,"KeyNav",Ext,"KeyNav"],0));(Ext.cmd.derive("Ext.util.FocusableContainer",Ext.Mixin,{mixinConfig:{id:"focusablecontainer",before:{onAdd:"onFocusableChildAdd",onRemove:"onFocusableChildRemove",destroy:"destroyFocusableContainer",onFocusEnter:"onFocusEnter"},after:{afterRender:"initFocusableContainer",onFocusLeave:"onFocusLeave",afterShow:"activateFocusableContainerEl"}},isFocusableContainer:true,enableFocusableContainer:true,activeChildTabIndex:0,inactiveChildTabIndex:-1,privates:{initFocusableContainer:function(a){var d,b,c;if(this.enableFocusableContainer){a=a!=null?a:true;this.doInitFocusableContainer(a)}else{d=this.getFocusables();for(b=0,c=d.length;b<c;b++){d[b].focusableContainer=null}}},doInitFocusableContainer:function(c){var a=this,d,b;d=a.getFocusableContainerEl();if(c){a.clearFocusables()}b=a.findNextFocusableChild({step:1,beforeRender:true});if(b){a.activateFocusableContainerEl(d)}a.focusableContainerMouseListener=a.mon(d,"mousedown",a.onFocusableContainerMousedown,a);a.focusableKeyNav=a.createFocusableContainerKeyNav(d)},createFocusableContainerKeyNav:function(a){var b=this;return new Ext.util.KeyNav(a,{eventName:"keydown",ignoreInputFields:true,scope:b,tab:b.onFocusableContainerTabKey,enter:b.onFocusableContainerEnterKey,space:b.onFocusableContainerSpaceKey,up:b.onFocusableContainerUpKey,down:b.onFocusableContainerDownKey,left:b.onFocusableContainerLeftKey,right:b.onFocusableContainerRightKey})},destroyFocusableContainer:function(){if(this.enableFocusableContainer){this.doDestroyFocusableContainer()}},doDestroyFocusableContainer:function(){var a=this;if(a.keyNav){a.keyNav.destroy()}if(a.focusableContainerMouseListener){a.focusableContainerMouseListener.destroy()}a.focusableKeyNav=a.focusableContainerMouseListener=null},getFocusables:function(){return this.items.items},initDefaultFocusable:function(d){var a=this,c=a.activeChildTabIndex,h=false,m,b,g,j,f;m=a.getFocusables();j=m.length;if(!j){return}for(g=0;g<j;g++){b=m[g];if(b.focusable&&!b.disabled){h=true;f=b.getTabIndex();if(f!=null&&f>=c){return b}}}if(!h){return}b=a.findNextFocusableChild({beforeRender:d,items:m,step:true});if(b){a.activateFocusable(b)}return b},clearFocusables:function(){var b=this,d=b.getFocusables(),c=d.length,a,f;for(f=0;f<c;f++){a=d[f];if(a.focusable&&!a.disabled){b.deactivateFocusable(a)}}},activateFocusable:function(a,c){var b=c!=null?c:this.activeChildTabIndex;a.setTabIndex(b)},deactivateFocusable:function(a,c){var b=c!=null?c:this.inactiveChildTabIndex;a.setTabIndex(b)},onFocusableContainerTabKey:function(){return true},onFocusableContainerEnterKey:function(){return true},onFocusableContainerSpaceKey:function(){return true},onFocusableContainerUpKey:function(a){a.preventDefault();return this.moveChildFocus(a,false)},onFocusableContainerDownKey:function(a){a.preventDefault();return this.moveChildFocus(a,true)},onFocusableContainerLeftKey:function(a){a.preventDefault();return this.moveChildFocus(a,false)},onFocusableContainerRightKey:function(a){a.preventDefault();return this.moveChildFocus(a,true)},getFocusableFromEvent:function(a){var b=Ext.Component.fromElement(a.getTarget());return b},moveChildFocus:function(c,b){var a=this.getFocusableFromEvent(c);return this.focusChild(a,b,c)},focusChild:function(a,b){var c=this.findNextFocusableChild({child:a,step:b});if(c){c.focus()}return c},findNextFocusableChild:function(d){var c=d.beforeRender,m,b,f,g,a,h,j;m=d.items||this.getFocusables();g=d.step!=null?d.step:1;f=d.child;a=Ext.Array.indexOf(m,f);g=g===true?1:g===false?-1:g;j=m.length;h=g>0?(a<j?a+g:0):(a>0?a+g:j-1);for(;;h+=g){if(a<0&&(h>=j||h<0)){return null}else{if(h>=j){h=-1;continue}else{if(h<0){h=j;continue}else{if(h===a){return null}}}}b=m[h];if(!b||!b.focusable||b.disabled){continue}if(c||(b.isFocusable&&b.isFocusable())){return b}}return null},getFocusableContainerEl:function(){return this.el},onFocusableChildAdd:function(a){if(this.enableFocusableContainer){return this.doFocusableChildAdd(a)}},activateFocusableContainerEl:function(a){a=a||this.getFocusableContainerEl();if(a){a.set({tabIndex:this.activeChildTabIndex})}},deactivateFocusableContainerEl:function(a){a=a||this.getFocusableContainerEl();if(a){a.set({tabIndex:undefined})}},isFocusableContainerActive:function(){var a=this,f=false,d,b,c;d=a.getFocusableContainerEl();if(d&&d.isTabbable&&d.isTabbable()){f=true}else{b=a.lastFocusedChild;c=b&&b.getFocusEl&&b.getFocusEl();if(c&&c.isTabbable&&c.isTabbable()){f=true}}return f},doFocusableChildAdd:function(a){if(a.focusable){a.focusableContainer=this}},onFocusableChildRemove:function(a){if(this.enableFocusableContainer){return this.doFocusableChildRemove(a)}a.focusableContainer=null},doFocusableChildRemove:function(a){if(a===this.lastFocusedChild){this.lastFocusedChild=null;this.activateFocusableContainerEl()}},onFocusableContainerMousedown:function(a,c){var b=Ext.Component.fromElement(c);this.mousedownTimestamp=b===this?Ext.Date.now():0;if(b===this){a.preventDefault()}},onFocusEnter:function(d){var b=this,c=d.toComponent,f=b.mousedownTimestamp,a=50,g;if(!b.enableFocusableContainer){return null}b.mousedownTimestamp=0;if(c===b){if(!f||Ext.Date.now()-f>a){g=b.initDefaultFocusable();if(g){b.deactivateFocusableContainerEl();g.focus()}}}else{b.deactivateFocusableContainerEl()}return c},onFocusLeave:function(a){var c=this,b=c.lastFocusedChild;if(!c.enableFocusableContainer){return}if(!c.destroyed&&!c.destroying){c.clearFocusables();if(b&&!b.disabled){c.activateFocusable(b)}else{c.activateFocusableContainerEl()}}},beforeFocusableChildBlur:Ext.privateFn,afterFocusableChildBlur:Ext.privateFn,beforeFocusableChildFocus:function(b){var a=this;if(!a.enableFocusableContainer){return}a.clearFocusables();a.activateFocusable(b);if(b.needArrowKeys){a.guardFocusableChild(b)}},guardFocusableChild:function(b){var a=this,c=a.activeChildTabIndex,d;d=a.findNextFocusableChild({child:b,step:-1});if(d){d.setTabIndex(c)}d=a.findNextFocusableChild({child:b,step:1});if(d){d.setTabIndex(c)}},afterFocusableChildFocus:function(a){if(!this.enableFocusableContainer){return}this.lastFocusedChild=a},beforeFocusableChildEnable:Ext.privateFn,onFocusableChildEnable:function(b){var a=this;if(!a.enableFocusableContainer){return}if(b!==a.lastFocusedChild){a.deactivateFocusable(b);if(!a.isFocusableContainerActive()){a.activateFocusableContainerEl()}}},beforeFocusableChildDisable:function(a){var c=this,b;if(!c.enableFocusableContainer||c.destroying||c.destroyed){return}if(a.hasFocus){b=c.findNextFocusableChild({child:a})||a.findFocusTarget();if(b){b.focus()}}},onFocusableChildDisable:function(b){var a=this,c=a.lastFocusedChild,d;if(!a.enableFocusableContainer||a.destroying||a.destroyed){return}if(b===c){a.activateFocusableContainerEl()}d=a.findNextFocusableChild({step:1});if(!d){a.deactivateFocusableContainerEl()}},onFocusableChildShow:Ext.privateFn,onFocusableChildHide:Ext.privateFn,onFocusableChildMasked:Ext.privateFn,onFocusableChildDestroy:Ext.privateFn,onFocusableChildUpdate:Ext.privateFn}},0,0,0,0,0,0,[Ext.util,"FocusableContainer"],0));(Ext.cmd.derive("Ext.panel.Header",Ext.panel.Bar,{isHeader:true,defaultType:"tool",indicateDrag:false,weight:-1,shrinkWrap:3,iconAlign:"left",titleAlign:"left",titlePosition:0,titleRotation:"default",autoEl:{role:"presentation"},beforeRenderConfig:{glyph:null,icon:null,iconCls:null,iconAlign:null,title:{$value:{xtype:"title",flex:1},merge:function(b,a){if(typeof b!=="object"){b={text:b}}return Ext.merge(a?Ext.Object.chain(a):{},b)}},titleAlign:null,titlePosition:null,titleRotation:null},headerCls:"x-header",initComponent:function(){var b=this,a=b.items,d=b.itemPosition,c=[b.headerCls];b.tools=b.tools||[];b.items=a=(a?a.slice():[]);if(d!==undefined){b._userItems=a.slice();b.items=a=[]}b.indicateDragCls=b.headerCls+"-draggable";if(b.indicateDrag){c.push(b.indicateDragCls)}b.addCls(c);b.syncNoBorderCls();b.enableFocusableContainer=!b.isAccordionHeader&&b.tools.length>0;if(b.enableFocusableContainer){b.ariaRole="toolbar"}Ext.Array.push(a,b.tools);b.tools.length=0;Ext.panel.Bar.prototype.initComponent.call(this);b.on({dblclick:b.onDblClick,click:b.onClick,element:"el",scope:b})},addTool:function(a){var b=this;b.add(Ext.ComponentManager.create(a,"tool"));if(!b.isAccordionHeader&&b.tools.length>0&&!b.enableFocusableContainer){b.enableFocusableContainer=true;b.ariaRole="toolbar";if(b.rendered){b.ariaEl.dom.setAttribute("role","toolbar");b.initFocusableContainer(true)}}},afterLayout:function(){var d=this,b,c,f,a;if(d.vertical){c=d.frameTR;if(c){b=d.frameBR;f=d.frameTL;a=(d.getWidth()-c.getPadding("r")-((f)?f.getPadding("l"):d.el.getBorderWidth("l")))+"px";b.setStyle("background-position-x",a);c.setStyle("background-position-x",a)}}Ext.panel.Bar.prototype.afterLayout.call(this)},applyTitle:function(b,f){var a=this,c,d;b=b||"";c=typeof b==="string";if(c){b={text:b}}if(f){Ext.suspendLayouts();f.setConfig(b);Ext.resumeLayouts(true);b=f}else{if(c){b.xtype="title"}b.ui=a.ui;d=("rotation" in b);b.id=a.id+"-title";if(a.isAccordionHeader){b.ariaRole="tab";b.textElRole=null;b.focusable=true}b=Ext.create(b);if(!d&&a.vertical&&a.titleRotation==="default"){b.rotation=1}}return b},applyTitlePosition:function(b){var a=this.items.getCount();if(this._titleInItems){--a}return Math.max(Math.min(b,a),0)},beforeLayout:function(){Ext.panel.Bar.prototype.beforeLayout.call(this);this.syncBeforeAfterTitleClasses()},beforeRender:function(){var b=this,a=b.itemPosition;b.protoEl.unselectable();Ext.panel.Bar.prototype.beforeRender.call(this);if(a!==undefined){b.insert(a,b._userItems)}},getTools:function(){return this.tools.slice()},onAdd:function(c,b){var a=this.tools;Ext.panel.Bar.prototype.onAdd.call(this,c,b);if(c.isTool){a.push(c);a[c.type]=c}},onAdded:function(c,a,b){this.syncNoBorderCls();Ext.panel.Bar.prototype.onAdded.call(this,c,a,b)},onRemoved:function(c,a,b){this.syncNoBorderCls();Ext.panel.Bar.prototype.onRemoved.call(this,c,a,b)},setDock:function(f){var d=this,b=d.getTitle(),c=d.getTitleRotation(),a=b.getRotation();Ext.suspendLayouts();Ext.panel.Bar.prototype.setDock.call(this,f);if(c==="default"){c=(d.vertical?1:0);if(c!==a){b.setRotation(c)}if(d.rendered){d.resetItemMargins()}}Ext.resumeLayouts(true)},updateGlyph:function(a){this.getTitle().setGlyph(a)},updateIcon:function(a){this.getTitle().setIcon(a)},updateIconAlign:function(b,a){this.getTitle().setIconAlign(b)},updateIconCls:function(a){this.getTitle().setIconCls(a)},updateTitle:function(b,a){if(!a){this.insert(this.getTitlePosition(),b);this._titleInItems=true}this.titleCmp=b},updateTitleAlign:function(b,a){this.getTitle().setTextAlign(b)},updateTitlePosition:function(a){this.insert(a,this.getTitle())},updateTitleRotation:function(a){if(a==="default"){a=(this.vertical?1:0)}this.getTitle().setRotation(a)},privates:{fireClickEvent:function(b,a){var c="."+Ext.panel.Tool.prototype.baseCls;if(!a.getTarget(c)){this.fireEvent(b,this,a)}},getFramingInfoCls:function(){var a=this,c=Ext.panel.Bar.prototype.getFramingInfoCls.call(this),b=a.ownerCt;if(!a.expanding&&b&&(b.collapsed||a.isCollapsedExpander)){c+="-"+b.collapsedCls}return c+"-"+a.dock},onClick:function(a){this.fireClickEvent("click",a)},onDblClick:function(a){this.fireClickEvent("dblclick",a)},onFocusableContainerMousedown:function(a,c){var b=Ext.Component.fromElement(c);if(b===this){a.preventDefault()}else{this.mixins.focusablecontainer.onFocusableContainerMousedown.apply(this,arguments)}},syncBeforeAfterTitleClasses:function(d){var o=this,m=o.items,h=m.items,c=o.getTitlePosition(),b=h.length,j=m.generation,p=o.syncBeforeAfterGen,a,g,f,q;if(!d&&(p===j)){return}o.syncBeforeAfterGen=j;for(f=0;f<b;++f){q=h[f];a=q.afterTitleCls||(q.afterTitleCls=q.baseCls+"-after-title");g=q.beforeTitleCls||(q.beforeTitleCls=q.baseCls+"-before-title");if(!o.title||f<c){if(p){q.removeCls(a)}q.addCls(g)}else{if(f>c){if(p){q.removeCls(g)}q.addCls(a)}}}},syncNoBorderCls:function(){var c=this,b=this.ownerCt,a=c.headerCls+"-noborder";if(b?(b.border===false&&!b.frame):c.border===false){c.addCls(a)}else{c.removeCls(a)}}}},0,["header"],["component","box","container","header"],{component:true,box:true,container:true,header:true},["widget.header"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.panel,"Header"],0));(Ext.cmd.derive("Ext.layout.container.boxOverflow.None",Ext.Base,{alternateClassName:"Ext.layout.boxOverflow.None",factoryConfig:{defaultType:"none"},isBoxOverflowHandler:true,$configPrefixed:false,$configStrict:false,constructor:function(a){this.initConfig(a)},handleOverflow:Ext.emptyFn,clearOverflow:Ext.emptyFn,beginLayout:Ext.emptyFn,beginLayoutCycle:Ext.emptyFn,calculate:function(d){var c=this,a=d.state.boxPlan,b;if(a&&a.tooNarrow){b=c.handleOverflow(d);if(b){if(b.reservedSpace){c.layout.publishInnerCtSize(d,b.reservedSpace)}}}else{c.clearOverflow()}},completeLayout:Ext.emptyFn,finishedLayout:function(a){var f=this,c=f.layout.owner,d,b;if(c.hasListeners.overflowchange){d=c.query(">[hidden]");b=d.length;if(b!==f.lastHiddenCount){c.fireEvent("overflowchange",f.lastHiddenCount,b,d);f.lastHiddenCount=b}}},onRemove:Ext.emptyFn,getItem:function(a){return this.layout.owner.getComponent(a)},getOwnerType:function(a){var b;if(a.isToolbar){b="toolbar"}else{if(a.isTabBar){b="tab-bar"}else{if(a.isMenu){b="menu"}else{if(a.isBreadcrumb){b="breadcrumb"}else{b=a.getXType()}}}}return b},getPrefixConfig:Ext.emptyFn,getSuffixConfig:Ext.emptyFn,getOverflowCls:function(){return""},setVertical:function(){var c=this,b=c.layout,a=b.innerCt;a.removeCls(c.getOverflowCls(b.oppositeDirection));a.addCls(c.getOverflowCls(b.direction))}},1,0,0,0,["box.overflow.None","box.overflow.none"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.layout.container.boxOverflow,"None",Ext.layout.boxOverflow,"None"],0));(Ext.cmd.derive("Ext.layout.container.boxOverflow.Scroller",Ext.layout.container.boxOverflow.None,{alternateClassName:"Ext.layout.boxOverflow.Scroller",animateScroll:false,scrollIncrement:20,wheelIncrement:10,scrollRepeatInterval:60,scrollDuration:400,scrollerCls:"x-box-scroller",beforeSuffix:"-before-scroller",afterSuffix:"-after-scroller",constructor:function(a){var b=this;b.mixins.observable.constructor.call(b,a);b.scrollPosition=0;b.scrollSize=0},getPrefixConfig:function(){return{role:"presentation",id:this.layout.owner.id+this.beforeSuffix,cls:this.createScrollerCls("beforeX"),style:"display:none"}},getSuffixConfig:function(){return{role:"presentation",id:this.layout.owner.id+this.afterSuffix,cls:this.createScrollerCls("afterX"),style:"display:none"}},createScrollerCls:function(f){var h=this,g=h.layout,b=g.owner,d=h.getOwnerType(b),a=h.scrollerCls,c=a+" "+a+"-"+g.names[f]+" "+a+"-"+d+" "+a+"-"+d+"-"+b.ui;if(b.plain){c+=" "+a+"-plain"}return c},getOverflowCls:function(a){return this.scrollerCls+"-body-"+a},beginLayout:function(a){a.innerCtScrollPos=this.getScrollPosition();Ext.layout.container.boxOverflow.None.prototype.beginLayout.apply(this,arguments)},finishedLayout:function(d){var c=this,g=d.state.boxPlan,b=c.layout,f=b.names,h=Math.min(c.getMaxScrollPosition(),d.innerCtScrollPos),a;if(g&&g.tooNarrow){a=d.childItems[d.childItems.length-1].props;c.scrollSize=a[f.x]+a[f.width];c.updateScrollButtons();b.innerCt[f.setScrollLeft](h)}Ext.layout.container.boxOverflow.None.prototype.finishedLayout.call(this,d)},handleOverflow:function(g){var b=this,a=b.layout.names,c=a.getWidth,d=a.parallelMargins,h,m,j,f;b.showScrollers();j=b.getBeforeScroller();f=b.getAfterScroller();h=j[c]()+f[c]()+j.getMargin(d)+f.getMargin(d);m=g.targetContext.getPaddingInfo()[a.width];return{reservedSpace:Math.max(h-m,0)}},getBeforeScroller:function(){var a=this;return a._beforeScroller||(a._beforeScroller=a.createScroller(a.beforeSuffix,"beforeRepeater","scrollLeft"))},getAfterScroller:function(){var a=this;return a._afterScroller||(a._afterScroller=a.createScroller(a.afterSuffix,"afterRepeater","scrollRight"))},createScroller:function(g,d,h){var f=this,c=f.layout.owner,b=f.scrollerCls,a;a=c.el.getById(c.id+g);a.addClsOnOver(b+"-hover");a.addClsOnClick(b+"-pressed");a.setVisibilityMode(Ext.Element.DISPLAY);f[d]=new Ext.util.ClickRepeater(a,{interval:f.scrollRepeatInterval,handler:h,scope:f});return a},createWheelListener:function(){var a=this;a.wheelListener=a.layout.innerCt.on("mousewheel",a.onMouseWheel,a,{destroyable:true})},onMouseWheel:function(a){a.stopEvent();this.scrollBy(this.getWheelDelta(a)*this.wheelIncrement*-1,false)},getWheelDelta:function(a){return a.getWheelDelta()},clearOverflow:function(){this.hideScrollers()},showScrollers:function(){var a=this;if(!a.wheelListener){a.createWheelListener()}a.getBeforeScroller().show();a.getAfterScroller().show();a.layout.owner.addClsWithUI(a.layout.direction==="vertical"?"vertical-scroller":"scroller")},hideScrollers:function(){var c=this,a=c.getBeforeScroller(),b=c.getAfterScroller();if(a){a.hide();b.hide();c.layout.owner.removeClsWithUI(c.layout.direction==="vertical"?"vertical-scroller":"scroller")}},destroy:function(){Ext.destroyMembers(this,"beforeRepeater","afterRepeater","_beforeScroller","_afterScroller","wheelListener");this.callParent()},scrollBy:function(b,a){this.scrollTo(this.getScrollPosition()+b,a)},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},updateScrollButtons:function(){var d=this,b=d.getBeforeScroller(),c=d.getAfterScroller(),a;if(!b||!c){return}a=d.scrollerCls+"-disabled";b[d.atExtremeBefore()?"addCls":"removeCls"](a);c[d.atExtremeAfter()?"addCls":"removeCls"](a);d.scrolling=false},scrollLeft:function(){this.scrollBy(-this.scrollIncrement,false)},scrollRight:function(){this.scrollBy(this.scrollIncrement,false)},getScrollPosition:function(){var a=this,c=a.layout,b;if(isNaN(a.scrollPosition)){b=c.innerCt[c.names.getScrollLeft]()}else{b=a.scrollPosition}return b},getMaxScrollPosition:function(){var c=this,b=c.layout,a=c.scrollSize-b.innerCt.lastBox[b.names.width];return(a<0)?0:a},atExtremeBefore:function(){return !this.getScrollPosition()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollPosition()},setVertical:function(){var f=this,a=f.getBeforeScroller(),d=f.getAfterScroller(),b=f.layout.names,c=f.scrollerCls;a.removeCls(c+"-"+b.beforeY);d.removeCls(c+"-"+b.afterY);a.addCls(c+"-"+b.beforeX);d.addCls(c+"-"+b.afterX);Ext.layout.container.boxOverflow.None.prototype.setVertical.call(this)},scrollTo:function(a,b){var g=this,f=g.layout,h=f.names,d=g.getScrollPosition(),c=Ext.Number.constrain(a,0,g.getMaxScrollPosition());if(c!==d&&!g.scrolling){g.scrollPosition=NaN;if(b===undefined){b=g.animateScroll}f.innerCt[h.scrollTo](h.beforeScrollX,c,b?g.getScrollAnim():false);if(b){g.scrolling=true}else{g.updateScrollButtons()}g.fireEvent("scroll",g,c,b?g.getScrollAnim():false)}},scrollToItem:function(c,g){var b=this,m=b.layout,h=m.owner,a=m.names,f=m.innerCt,d,j,o;c=b.getItem(c);if(c!==undefined){if(c===h.items.first()){o=0}else{if(c===h.items.last()){o=b.getMaxScrollPosition()}else{d=b.getItemVisibility(c);if(!d.fullyVisible){j=c.getBox(false,true);o=j[a.x];if(d.hiddenEnd){o-=(f[a.getWidth]()-j[a.width])}}}}if(o!==undefined){b.scrollTo(o,g)}}},getItemVisibility:function(d){var b=this,g=b.getItem(d).getBox(true,true),h=b.layout,a=h.names,m=g[a.x],j=m+g[a.width],f=b.getScrollPosition(),c=f+h.innerCt[a.getWidth]();return{hiddenStart:m<f,hiddenEnd:j>c,fullyVisible:m>=f&&j<=c}}},1,0,0,0,["box.overflow.Scroller","box.overflow.scroller"],[["observable",Ext.mixin.Observable]],[Ext.layout.container.boxOverflow,"Scroller",Ext.layout.boxOverflow,"Scroller"],0));(Ext.cmd.derive("Ext.dd.DragDropManager",Ext.Base,{singleton:true,alternateClassName:["Ext.dd.DragDropMgr","Ext.dd.DDM"],ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:true,stopPropagation:true,initialized:false,locked:false,init:function(){this.initialized=true},POINT:0,INTERSECT:1,mode:0,notifyOccluded:false,dragCls:"x-dd-drag-current",_execOnAll:function(c,b){var f=this.ids,d,a,h,g;for(d in f){if(f.hasOwnProperty(d)){g=f[d];for(a in g){if(g.hasOwnProperty(a)){h=g[a];if(!this.isTypeOfDD(h)){continue}h[c].apply(h,b)}}}}},addListeners:function(){var a=this;a.init();Ext.getDoc().on({mouseup:a.handleMouseUp,mousemove:{fn:a.handleMouseMove,capture:false},dragstart:a.preventDrag,drag:a.preventDrag,dragend:a.preventDrag,capture:true,scope:a});Ext.getWin().on({unload:a._onUnload,resize:a._onResize,scope:a})},preventDrag:function(a){if(this.isMouseDown){a.stopPropagation()}},_onResize:function(a){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=true},unlock:function(){this.locked=false},isLocked:function(){return this.locked},locationCache:{},useCache:true,clickPixelThresh:8,dragThreshMet:false,clickTimeout:null,startX:0,startY:0,regDragDrop:function(b,a){if(!this.initialized){this.init()}if(!this.ids[a]){this.ids[a]={}}this.ids[a][b.id]=b},removeDDFromGroup:function(a,b){if(!this.ids[b]){this.ids[b]={}}var c=this.ids[b];if(c&&c[a.id]){delete c[a.id]}},_remove:function(a,c){var h=this,d=h.ids,b=a.groups,f;if(h.clearingAll){return}if(h.dragCurrent===a){h.dragCurrent=null}for(f in b){if(b.hasOwnProperty(f)){if(c){delete d[f]}else{if(d[f]){delete d[f][a.id]}}}}delete h.handleIds[a.id];delete h.locationCache[a.id]},regHandle:function(b,a){if(!this.handleIds[b]){this.handleIds[b]={}}this.handleIds[b][a]=a},isDragDrop:function(a){return(this.getDDById(a))?true:false},getRelated:function(a,c){var g=[],f,d,b;for(f in a.groups){for(d in this.ids[f]){b=this.ids[f][d];if(!this.isTypeOfDD(b)){continue}if(!c||b.isTarget){g[g.length]=b}}}return g},isLegalTarget:function(b,a){var d=this.getRelated(b,true),f,c;for(f=0,c=d.length;f<c;++f){if(d[f].id===a.id){return true}}return false},isTypeOfDD:function(a){return(a&&a.__ygDragDrop)},isHandle:function(b,a){return(this.handleIds[b]&&this.handleIds[b][a])},getDDById:function(b,a){var d,c;for(d in this.ids){c=this.ids[d][b];if(c instanceof Ext.dd.DDTarget||a){return c}}return null},handleMouseDown:function(b,a){var d=this,f,c;d.isMouseDown=true;if(Ext.quickTipsActive){Ext.tip.QuickTipManager.ddDisable()}d.currentPoint=b.getPoint();if(d.dragCurrent){d.handleMouseUp(b)}d.mousedownEvent=b;d.currentTarget=b.getTarget();d.dragCurrent=a;c=a.getEl();Ext.fly(c).setCapture();f=b.getXY();d.startX=f[0];d.startY=f[1];d.offsetX=d.offsetY=0;d.deltaX=d.startX-c.offsetLeft;d.deltaY=d.startY-c.offsetTop;d.dragThreshMet=false},startDrag:function(d,b){var f=this,a=f.dragCurrent,c;clearTimeout(f.clickTimeout);if(a){a.b4StartDrag(d,b);a.startDrag(d,b);c=a.getDragEl();if(c){Ext.fly(c).addCls(f.dragCls)}}f.dragThreshMet=true},handleMouseUp:function(b){var a=this;a.isMouseDown=false;if(Ext.quickTipsActive){Ext.tip.QuickTipManager.ddEnable()}if(!a.dragCurrent){return}if(Ext.isIE&&document.releaseCapture){document.releaseCapture()}clearTimeout(a.clickTimeout);if(a.dragThreshMet){a.fireEvents(b,true)}a.stopDrag(b);a.stopEvent(b);a.mousedownEvent=a.currentTarget=null},stopEvent:function(a){if(this.stopPropagation){a.stopPropagation()}if(this.preventDefault){a.preventDefault()}},stopDrag:function(b){var d=this,a=d.dragCurrent,c;if(a){if(d.dragThreshMet){c=a.getDragEl();if(c){Ext.fly(c).removeCls(d.dragCls)}a.b4EndDrag(b);a.endDrag(b)}d.dragCurrent.onMouseUp(b)}d.dragCurrent=null;d.dragOvers={}},handleMouseMove:function(h){var f=this,g=f.dragCurrent,j=f.currentPoint=h.getPoint(),c=j.x,a=j.y,d,b;f.offsetX=c-f.startX;f.offsetY=a-f.startY;if(!g){return true}if(!f.dragThreshMet){d=Math.abs(f.offsetX);b=Math.abs(f.offsetY);if(d>f.clickPixelThresh||b>f.clickPixelThresh){f.startDrag(f.startX,f.startY)}}if(f.dragThreshMet){g.b4Drag(h);g.onDrag(h);if(!g.moveOnly){f.fireEvents(h,false)}}f.stopEvent(h);return true},fireEvents:function(q,p){var u=this,r=Ext.supports.Touch,g=u.dragCurrent,B=u.currentPoint,w=B.x,v=B.y,t=[],h=[],m=[],b=[],s=[],C=[],a=r?document.documentElement.clientWidth/window.innerWidth:1,d,f,o,c,z,A,y,j;if(!g||g.isLocked()){return}j=!(g.deltaX<0||g.deltaY<0);if(r||(!u.notifyOccluded&&(!Ext.supports.CSSPointerEvents||Ext.isIE10m||Ext.isOpera)&&j)){d=g.getDragEl();if(j){d.style.visibility="hidden"}q.target=document.elementFromPoint(w/a,v/a);if(j){d.style.visibility="visible"}}for(z in u.dragOvers){f=u.dragOvers[z];delete u.dragOvers[z];if(!u.isTypeOfDD(f)||f.destroyed){continue}if(u.notifyOccluded){if(!this.isOverTarget(B,f,u.mode)){m.push(f)}}else{if(!q.within(f.getEl())){m.push(f)}}h[z]=true}for(y in g.groups){if("string"!==typeof y){continue}for(z in u.ids[y]){f=u.ids[y][z];if(u.isTypeOfDD(f)&&(o=f.getEl())&&(f.isTarget)&&(!f.isLocked())&&(Ext.fly(o).isVisible(true))&&((f!==g)||(g.ignoreSelf===false))){if(u.notifyOccluded){if((f.zIndex=u.getZIndex(o))!==-1){c=true}t.push(f)}else{if(q.within(f.getEl())){t.push(f);break}}}}}if(c){Ext.Array.sort(t,u.byZIndex)}for(z=0,A=t.length;z<A;z++){f=t[z];if(u.isOverTarget(B,f,u.mode)){if(p){s.push(f)}else{if(!h[f.id]){C.push(f)}else{b.push(f)}u.dragOvers[f.id]=f}if(!u.notifyOccluded){break}}}if(u.mode){if(m.length){g.b4DragOut(q,m);g.onDragOut(q,m)}if(C.length){g.onDragEnter(q,C)}if(b.length){g.b4DragOver(q,b);g.onDragOver(q,b)}if(s.length){g.b4DragDrop(q,s);g.onDragDrop(q,s)}}else{for(z=0,A=m.length;z<A;++z){g.b4DragOut(q,m[z].id);g.onDragOut(q,m[z].id)}for(z=0,A=C.length;z<A;++z){g.onDragEnter(q,C[z].id)}for(z=0,A=b.length;z<A;++z){g.b4DragOver(q,b[z].id);g.onDragOver(q,b[z].id)}for(z=0,A=s.length;z<A;++z){g.b4DragDrop(q,s[z].id);g.onDragDrop(q,s[z].id)}}if(p&&!s.length){g.onInvalidDrop(q)}},getZIndex:function(d){var c=document.body,a,b=-1;d=Ext.getDom(d);while(d!==c){if(!isNaN(a=Number(Ext.fly(d).getStyle("zIndex")))){b=a}d=d.parentNode}return b},byZIndex:function(b,a){return b.zIndex<a.zIndex},getBestMatch:function(f){var b=null,d=f.length,a,c;if(d===1){b=f[0]}else{for(a=0;a<d;++a){c=f[a];if(c.cursorIsOver){b=c;break}else{if(!b||b.overlap.getArea()<c.overlap.getArea()){b=c}}}}return b},refreshCache:function(d){var c,f,a,b;for(c in d){if("string"!==typeof c){continue}for(f in this.ids[c]){a=this.ids[c][f];if(this.isTypeOfDD(a)){b=this.getLocation(a);if(b){this.locationCache[a.id]=b}else{delete this.locationCache[a.id]}}}}},verifyEl:function(a){return Ext.getBody().contains(a)},getLocation:function(o){if(!this.isTypeOfDD(o)){return null}if(o.getRegion){return o.getRegion()}var h=o.getEl(),s,g,f,m,c,a,d,q,j;try{s=Ext.fly(h).getXY()}catch(p){}if(!s){return null}g=s[0];f=g+h.offsetWidth;m=s[1];c=m+h.offsetHeight;a=m-o.padding[0];d=f+o.padding[1];q=c+o.padding[2];j=g-o.padding[3];return new Ext.util.Region(a,d,q,j)},isOverTarget:function(d,f,h){var m=this.locationCache[f.id],c,a,g,j,b;if(!m||!this.useCache){m=this.getLocation(f);this.locationCache[f.id]=m}if(!m){return false}f.cursorIsOver=m.contains(d);c=this.dragCurrent;if(!c||!c.getTargetCoord||(!h&&!c.constrainX&&!c.constrainY)){return f.cursorIsOver}f.overlap=null;a=c.getTargetCoord(d.x,d.y);g=c.getDragEl();j=new Ext.util.Region(a.y,a.x+g.offsetWidth,a.y+g.offsetHeight,a.x);b=j.intersect(m);if(b){f.overlap=b;return(h)?true:f.cursorIsOver}else{return false}},_onUnload:function(b,a){Ext.dd.DragDropManager.unregAll()},unregAll:function(){var a=this,b=a.elementCache,c;if(a.dragCurrent){a.stopDrag();a.dragCurrent=null}a.clearingAll=true;a._execOnAll("unreg",[]);delete a.clearingAll;for(c in b){delete b[c]}a.elementCache={};a.ids={};a.handleIds={}},elementCache:{},getElWrapper:function(b){var a=this.elementCache[b];if(!a||!a.el){a=this.elementCache[b]=new this.ElementWrapper(Ext.getDom(b))}return a},getElement:function(a){return Ext.getDom(a)},getCss:function(b){var a=Ext.getDom(b);return(a)?a.style:null},ElementWrapper:function(a){this.el=a||null;this.id=this.el&&a.id;this.css=this.el&&a.style},getPosX:function(a){return Ext.fly(a).getX()},getPosY:function(a){return Ext.fly(a).getY()},swapNode:function(a,c){if(a.swapNode){a.swapNode(c)}else{var b=c.parentNode,d=c.nextSibling;if(d===a){b.insertBefore(a,c)}else{if(c===a.nextSibling){b.insertBefore(c,a)}else{a.parentNode.replaceChild(c,a);b.insertBefore(a,d)}}}},getScroll:function(){var a=window.document,b=a.documentElement,c=a.body,f=0,d=0;if(b&&(b.scrollTop||b.scrollLeft)){f=b.scrollTop;d=b.scrollLeft}else{if(c){f=c.scrollTop;d=c.scrollLeft}}return{top:f,left:d}},getStyle:function(b,a){return Ext.fly(b).getStyle(a)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(b,a){var c=Ext.fly(a).getXY();Ext.fly(b).setXY(c)},numericSort:function(d,c){return(d-c)},handleWasClicked:function(b,a){if(this.isHandle(a,b.id)){return true}else{var c=b.parentNode;while(c){if(this.isHandle(a,c.id)){return true}else{c=c.parentNode}}}return false}},0,0,0,0,0,0,[Ext.dd,"DragDropManager",Ext.dd,"DragDropMgr",Ext.dd,"DDM"],function(a){Ext.onInternalReady(function(){a.addListeners()})}));(Ext.cmd.derive("Ext.resizer.Splitter",Ext.Component,{childEls:["collapseEl"],renderTpl:['<tpl if="collapsible===true">','<div id="{id}-collapseEl" data-ref="collapseEl" role="presentation" class="',"x-","collapse-el ","x-",'layout-split-{collapseDir}{childElCls}">',"</div>","</tpl>"],isSplitter:true,baseCls:"x-splitter",collapsedClsInternal:"x-splitter-collapsed",canResize:true,collapsible:null,collapseOnDblClick:true,defaultSplitMin:40,defaultSplitMax:1000,collapseTarget:"next",horizontal:false,vertical:false,size:5,tracker:null,ariaRole:"separator",focusable:true,tabIndex:0,getTrackerConfig:function(){return Ext.apply({xclass:"Ext.resizer.SplitterTracker",el:this.el,splitter:this},this.tracker)},beforeRender:function(){var a=this,b=a.getCollapseTarget(),d=a.collapsible,c;Ext.Component.prototype.beforeRender.call(this);if(b.collapsed){a.addCls(a.collapsedClsInternal)}if(!a.canResize){a.addCls(a.baseCls+"-noresize")}Ext.applyIf(a.renderData,{collapseDir:a.getCollapseDirection(),collapsible:(d!==null)?d:b.collapsible});a.ariaRenderAttributes=a.ariaRenderAttributes||{};a.ariaRenderAttributes["aria-orientation"]=a.orientation;a.protoEl.unselectable()},onRender:function(){var b=this,a;Ext.Component.prototype.onRender.apply(this,arguments);if(b.performCollapse!==false){if(b.renderData.collapsible){b.mon(b.collapseEl,"click",b.toggleTargetCmp,b)}if(b.collapseOnDblClick){b.mon(b.el,"dblclick",b.toggleTargetCmp,b)}}b.getCollapseTarget().on({collapse:b.onTargetCollapse,expand:b.onTargetExpand,beforeexpand:b.onBeforeTargetExpand,beforecollapse:b.onBeforeTargetCollapse,scope:b});if(b.canResize){b.tracker=Ext.create(b.getTrackerConfig());b.relayEvents(b.tracker,["beforedragstart","dragstart","dragend"])}a=b.collapseEl;if(a){a.lastCollapseDirCls=b.collapseDirProps[b.collapseDirection].cls}},getCollapseDirection:function(){var a=this,d=a.collapseDirection,g,b,c,f;if(!d){g=a.collapseTarget;if(g.isComponent){d=g.collapseDirection}if(!d){f=a.ownerCt.layout.type;if(g.isComponent){c=a.ownerCt.items;b=Number(c.indexOf(g)===c.indexOf(a)-1)<<1|Number(f==="hbox")}else{b=Number(a.collapseTarget==="prev")<<1|Number(f==="hbox")}d=["bottom","right","top","left"][b]}a.collapseDirection=d}a.setOrientation((d==="top"||d==="bottom")?"horizontal":"vertical");return d},getCollapseTarget:function(){var a=this;return a.collapseTarget.isComponent?a.collapseTarget:a.collapseTarget==="prev"?a.previousSibling():a.nextSibling()},setCollapseEl:function(b){var a=this.collapseEl;if(a){a.setDisplayed(b)}},onBeforeTargetExpand:function(a){this.setCollapseEl("none")},onBeforeTargetCollapse:function(){this.setCollapseEl("none")},onTargetCollapse:function(b){var a=this;if(b===a.getCollapseTarget()&&b[a.orientation==="vertical"?"collapsedHorizontal":"collapsedVertical"]()){a.el.addCls(a.collapsedClsInternal+" "+(a.collapsedCls||""))}a.setCollapseEl("")},onTargetExpand:function(b){var a=this;a.el.removeCls(a.collapsedClsInternal+" "+(a.collapsedCls||""));a.setCollapseEl("")},collapseDirProps:{top:{cls:"x-layout-split-top"},right:{cls:"x-layout-split-right"},bottom:{cls:"x-layout-split-bottom"},left:{cls:"x-layout-split-left"}},orientationProps:{horizontal:{opposite:"vertical",fixedAxis:"height",stretchedAxis:"width"},vertical:{opposite:"horizontal",fixedAxis:"width",stretchedAxis:"height"}},applyCollapseDirection:function(){var a=this,d=a.collapseEl,b=a.collapseDirProps[a.collapseDirection],c;if(d){c=d.lastCollapseDirCls;if(c){d.removeCls(c)}d.addCls(d.lastCollapseDirCls=b.cls)}},applyOrientation:function(){var f=this,c=f.orientation,d=f.orientationProps[c],g=f.size,b=d.fixedAxis,h=d.stretchedAxis,a=f.baseCls+"-";f[c]=true;f[d.opposite]=false;if(!f.hasOwnProperty(b)||f[b]==="100%"){f[b]=g}if(!f.hasOwnProperty(h)||f[h]===g){f[h]="100%"}f.removeCls(a+d.opposite);f.addCls(a+c)},setOrientation:function(a){var b=this;if(b.orientation!==a){b.orientation=a;b.applyOrientation()}},updateOrientation:function(){delete this.collapseDirection;this.getCollapseDirection();this.applyCollapseDirection()},toggleTargetCmp:function(a,d){var f=this.getCollapseTarget(),b=f.placeholder,c;if(Ext.isFunction(f.expand)&&Ext.isFunction(f.collapse)){if(b&&!b.hidden){c=true}else{c=!f.hidden}if(c){if(f.collapsed){f.expand()}else{if(f.collapseDirection){f.collapse()}else{f.collapse(this.renderData.collapseDir)}}}}},setSize:function(){var a=this;Ext.Component.prototype.setSize.apply(this,arguments);if(Ext.isIE&&a.el){a.el.repaint()}},beforeDestroy:function(){Ext.destroy(this.tracker);Ext.Component.prototype.beforeDestroy.call(this)}},0,["splitter"],["component","box","splitter"],{component:true,box:true,splitter:true},["widget.splitter"],0,[Ext.resizer,"Splitter"],0));Ext.define("Ext.theme.neptune.resizer.Splitter",{override:"Ext.resizer.Splitter",size:8});Ext.define("Ext.theme.triton.resizer.Splitter",{override:"Ext.resizer.Splitter",size:10});(Ext.cmd.derive("Ext.layout.container.Box",Ext.layout.container.Container,{alternateClassName:"Ext.layout.BoxLayout",type:"box",config:{align:"begin",constrainAlign:false,enableSplitters:true,overflowHandler:{$value:null,merge:function(b,a){if(typeof b==="string"){b={type:b}}return Ext.merge(a?Ext.Object.chain(a):{},b)}},padding:0,pack:"start",stretchMaxPartner:undefined,vertical:false,alignRoundingMethod:"round"},itemCls:"x-box-item",targetCls:"x-box-layout-ct",targetElCls:"x-box-target",innerCls:"x-box-inner",manageMargins:true,createsInnerCt:true,childEls:["innerCt","targetEl"],renderTpl:['{%var oc,l=values.$comp.layout,oh=l.overflowHandler;if (oh && oh.getPrefixConfig!==Ext.emptyFn) {if(oc=oh.getPrefixConfig())dh.generateMarkup(oc, out)}%}<div id="{ownerId}-innerCt" data-ref="innerCt" role="presentation" class="{[l.innerCls]}{[oh ? (" " + oh.getOverflowCls(l.direction)) : ""]}"><div id="{ownerId}-targetEl" data-ref="targetEl" class="{targetElCls}" role="presentation">{%this.renderBody(out, values)%}</div></div>{%if (oh && oh.getSuffixConfig!==Ext.emptyFn) {if(oc=oh.getSuffixConfig())dh.generateMarkup(oc, out)}%}',{disableFormats:true,definitions:"var dh=Ext.DomHelper;"}],constructor:function(b){var a=this,c;Ext.layout.container.Container.prototype.constructor.apply(this,arguments);a.setVertical(a.vertical);a.flexSortFn=a.flexSort.bind(a);c=typeof a.padding;if(c==="string"||c==="number"){a.padding=Ext.util.Format.parseBox(a.padding);a.padding.height=a.padding.top+a.padding.bottom;a.padding.width=a.padding.left+a.padding.right}},_beginRe:/^(?:begin|left|top)$/,_centerRe:/^(?:center|middle)$/,_endRe:/^(?:end|right|bottom)$/,_percentageRe:/^\s*(\d+(?:\.\d*)?)\s*[%]\s*$/,getItemSizePolicy:function(j,o){var h=this,c=h.sizePolicy,a=h.align,v=j.flex,f=a,d=h.names,b=d.height,r=d.width,q=j[r],g=j[b],t=h._percentageRe,s=t.test(q),u=(a==="stretch"),p=(a==="stretchmax"),m=h.constrainAlign;if(!o&&(u||v||s||(m&&!p))){o=h.owner.getSizeModel()}if(u){if(!t.test(g)&&o[b].shrinkWrap){f="stretchmax"}}else{if(!p){if(t.test(g)){f="stretch"}else{if(m&&!o[b].shrinkWrap){f="stretchmax"}else{f=""}}}}if(v||s){if(!o[r].shrinkWrap){c=c.flex}}return c[f]},flexSort:function(j,r){var o=this.names.maxWidth,w=this.names.minWidth,p=Infinity,h=j.target,s=r.target,f=h.flex,d=s.flex,t=0,u,m,g,v,q,c;g=h[o]||p;v=s[o]||p;u=h[w]||0;m=s[w]||0;q=isFinite(u)||isFinite(m);c=isFinite(g)||isFinite(v);if(q||c){if(c){t=g-v}if(t===0&&q){t=m-u}if(t===0){if(c){t=d-f}else{t=f-d}}}return t},isItemBoxParent:function(a){return true},isItemShrinkWrap:function(a){return true},roundFlex:function(a){return Math.floor(a)},beginCollapse:function(b){var a=this;if(a.direction==="vertical"&&b.collapsedVertical()){b.collapseMemento.capture(["flex"]);delete b.flex}else{if(a.direction==="horizontal"&&b.collapsedHorizontal()){b.collapseMemento.capture(["flex"]);delete b.flex}}},beginExpand:function(a){a.collapseMemento.restore(["flex"])},beginLayout:function(m){var c=this,g=c.owner,j=g.stretchMaxPartner,f=c.innerCt.dom.style,b=c.names,a=c.overflowHandler,d=g.getScrollable(),h;m.boxNames=b;if(a){a.beginLayout(m)}if(typeof j==="string"){j=Ext.getCmp(j)||g.query(j)[0]}m.stretchMaxPartner=j&&m.context.getCmp(j);Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments);m.innerCtContext=m.getEl("innerCt",c);m.targetElContext=m.getEl("targetEl",c);if(d){m.ownerScrollable=d;h=d.getPosition();if(h.x||h.y){m.scrollRestore=h}}f.width=f.height=""},beginLayoutCycle:function(b,r){var j=this,o=b.state,m=b.ownerScrollable,g=j.align,h=b.boxNames,p=j.pack,a=j._centerRe,c=j.overflowHandler,q=b.state.canScroll,f,d;if(c){c.beginLayoutCycle(b,r)}Ext.layout.container.Container.prototype.beginLayoutCycle.apply(this,arguments);b.parallelSizeModel=f=b[h.widthModel];b.perpendicularSizeModel=d=b[h.heightModel];b.boxOptions={align:g={stretch:g==="stretch",stretchmax:g==="stretchmax",center:a.test(g),bottom:j._endRe.test(g)},pack:p={center:a.test(p),end:p==="end"}};if(m){if(!q){o.canScroll={parallel:!f.shrinkWrap&&m[h.getX](),perpendicular:!d.shrinkWrap&&m[h.getY]()}}if(!o.actualScroll){o.actualScroll={parallel:false,perpendicular:false}}}if(g.stretch&&d.shrinkWrap){g.stretchmax=true;g.stretch=false}g.nostretch=!(g.stretch||g.stretchmax);if(f.shrinkWrap){p.center=p.end=false}j.cacheFlexes(b);j.targetEl.setWidth(20000)},cacheFlexes:function(f){var t=this,h=f.boxNames,A=h.widthModel,a=h.heightModel,C=f.boxOptions.align.nostretch,w=0,B=f.childItems,z=B.length,p=[],m=0,g=0,v=0,d=h.minWidth,o=h.minHeight,b=t._percentageRe,j=0,r=0,F,s,y,c,D,E,u,q;while(z--){s=B[z];F=s.target;E=s[A];if(E.calculated){s.flex=y=F.flex;if(y){w+=y;p.push(s);m+=F[d]||0}else{c=b.exec(F[h.width]);s.percentageParallel=parseFloat(c[1])/100;++j}}if(E.configured){u=F[h.width]}else{u=F[d]||0}v+=u;D=s[a];if(C&&D.calculated){c=b.exec(F[h.height]);s.percentagePerpendicular=parseFloat(c[1])/100;++r}if(D.configured){q=F[h.height]}else{q=F[o]||0}if(q>g){g=q}}f.flexedItems=p;f.flexedMinWidth=m;f.smallestWidth=v;f.smallestHeight=g;f.totalFlex=w;f.percentageWidths=j;f.percentageHeights=r;Ext.Array.sort(p,t.flexSortFn)},calculate:function(h){var b=this,a=h.boxNames,f=h.state,m=f.actualScroll,d=f.needsScroll,g=f.canScroll,c=f.boxPlan||(f.boxPlan={}),j=b.overflowHandler;c.targetSize=b.getContainerSize(h);if(g&&!d){f.needsScroll=d={parallel:g.parallel&&c.targetSize[a.width]<h.smallestWidth,perpendicular:g.perpendicular&&c.targetSize[a.height]<h.smallestHeight}}if(!f.parallelDone){f.parallelDone=b.calculateParallel(h,a,c)}if(!f.perpendicularDone){f.perpendicularDone=b.calculatePerpendicular(h,a,c)}if(f.parallelDone&&f.perpendicularDone){if(g&&!f.scrollPass){if(d.parallel!==m.parallel||d.perpendicular!==m.perpendicular){h.invalidate({state:{scrollPass:true,canScroll:g,needsScroll:m}});b.done=false;return}}b.publishInnerCtSize(h);if(b.done&&h.boxOptions.align.stretchmax&&!f.stretchMaxDone){b.calculateStretchMax(h,a,c);f.stretchMaxDone=true}if(j){j.calculate(h)}}else{b.done=false}},calculateParallel:function(H,t,M){var B=this,y=H.parallelSizeModel.shrinkWrap,N=t.width,j=H.childItems,D=t.beforeX,h=t.afterX,s=t.setWidth,K=j.length,G=H.flexedItems,f=G.length,A=H.boxOptions.pack,m=B.padding,P=M.targetSize,z=P[N],u=H.state,J=u.needsScroll,C=u.canScroll,L=0,o=m[D],c=o+m[h],E=Ext.getScrollbarSize(),d=E[t.width],O=E[t.height],p,I,g,v,w,q,Q,r,a,F,b;if(!y&&!P[t.gotWidth]){return false}for(p=0;p<K;++p){w=j[p];I=w.marginInfo||w.getMarginInfo();L+=I[N];if(!w[t.widthModel].calculated){a=w.getProp(N);c+=a;if(isNaN(c)){return false}}}c+=L;if(H.percentageWidths){F=z-L;if(isNaN(F)){return false}for(p=0;p<K;++p){w=j[p];if(w.percentageParallel){a=Math.ceil(F*w.percentageParallel);a=w.setWidth(a);c+=a}}}if(y){b=0;M.tooNarrow=false}else{b=z-c;if(J&&J.perpendicular){b-=O}M.tooNarrow=b<H.flexedMinWidth;if(M.tooNarrow&&C&&C.parallel){u.actualScroll.parallel=true}}r=c;g=b;v=H.totalFlex;for(p=0;p<f;p++){w=G[p];q=w.flex;Q=B.roundFlex((q/v)*g);Q=w[s](Q);r+=Q;g=Math.max(0,g-Q);v-=q}if(A.center){o+=g/2;if(o<0){o=0}}else{if(A.end){o+=g}}for(p=0;p<K;++p){w=j[p];I=w.marginInfo;o+=I[D];w.setProp(t.x,o);o+=I[h]+w.props[N]}r+=H.targetContext.getPaddingInfo()[N];H.state.contentWidth=r;if(J&&J.perpendicular){if(y){r+=d}H[t.hasOverflowY]=true;H.target.componentLayout[t.setWidthInDom]=true;H[t.invalidateScrollY]=Ext.isIE8}H[t.setContentWidth](r);return true},calculatePerpendicular:function(s,a,z){var q=this,m=s.state,u=m.needsScroll,r=m.canScroll,N=s.perpendicularSizeModel.shrinkWrap,L=z.targetSize,R=s.childItems,y=R.length,U=Math.max,T=a.height,c=a.setHeight,Q=a.beforeY,p=a.y,H=q.padding,S=H[Q],d=L[T]-S-H[a.afterY],E=s.boxOptions.align,g=E.stretch,j=E.stretchmax,h=E.center,f=E.bottom,G=q.constrainAlign,F=0,B=0,D=q.onBeforeConstrainInvalidateChild,A=q.onAfterConstrainInvalidateChild,K=Ext.getScrollbarSize().height,w,I,C,t,v,M,o,O,b,J,P;if(!N&&!L[a.gotHeight]){return false}if(g||((h||f)&&!N)){if(isNaN(d)){return false}}if(u&&u.parallel){if(N){J=true}else{d-=K;z.targetSize[T]-=K}}if(g){M=d;F=U(M,s.smallestHeight)}else{for(I=0;I<y;I++){o=R[I];t=(o.marginInfo||o.getMarginInfo())[T];if(!(P=o.percentagePerpendicular)){C=o.getProp(T)}else{++B;if(N){continue}else{C=P*d-t;C=o[a.setHeight](C)}}if(!N&&G&&o[a.heightModel].shrinkWrap&&C>d){o.invalidate({before:D,after:A,layout:q,childHeight:d,names:a});s.state.parallelDone=false}if(isNaN(F=U(F,C+t,o.target[a.minHeight]||0))){return false}}}if(J){F+=K;s[a.hasOverflowX]=true;s.target.componentLayout[a.setHeightInDom]=true;s[a.invalidateScrollX]=Ext.isIE8}O=s.stretchMaxPartner;if(O){s.setProp("maxChildHeight",F);b=O.childItems;if(b&&b.length){F=U(F,O.getProp("maxChildHeight"));if(isNaN(F)){return false}}}s[a.setContentHeight](F+q.padding[T]+s.targetContext.getPaddingInfo()[T]);if(J){F-=K}if(F>L[T]&&r&&r.perpendicular){m.actualScroll.perpendicular=true}z.maxSize=F;if(j){M=F}else{if(h||f||B){if(G){M=N?F:d}else{M=N?F:U(d,F)}M-=s.innerCtContext.getBorderInfo()[T]}}for(I=0;I<y;I++){o=R[I];t=o.marginInfo||o.getMarginInfo();w=S+t[Q];if(g){o[c](M-t[T])}else{P=o.percentagePerpendicular;if(N&&P){t=o.marginInfo||o.getMarginInfo();C=P*M-t[T];C=o.setHeight(C)}if(h){v=M-o.props[T];if(v>0){w=S+Math[q.alignRoundingMethod](v/2)}}else{if(f){w=U(0,M-w-o.props[T])}}}o.setProp(p,w)}return true},onBeforeConstrainInvalidateChild:function(c,b){var a=b.names.heightModel;if(!c[a].constrainedMin){c[a]=Ext.layout.SizeModel.calculated}},onAfterConstrainInvalidateChild:function(c,b){var a=b.names;c.setProp(a.beforeY,0);if(c[a.heightModel].calculated){c[a.setHeight](b.childHeight)}},calculateStretchMax:function(s,f,m){var g=this,c=f.height,p=f.width,b=s.childItems,o=b.length,h=m.maxSize,r=g.onBeforeStretchMaxInvalidateChild,a=g.onAfterStretchMaxInvalidateChild,j,d,t,q;for(t=0;t<o;++t){j=b[t];d=j.props;q=h-j.getMarginInfo()[c];if(q!==d[c]||j[f.heightModel].constrained){j.invalidate({before:r,after:a,layout:g,childWidth:d[p],childHeight:q,childX:d.x,childY:d.y,names:f})}}},onBeforeStretchMaxInvalidateChild:function(c,b){var a=b.names.heightModel;if(!c[a].constrainedMax){c[a]=Ext.layout.SizeModel.calculated}},onAfterStretchMaxInvalidateChild:function(a,f){var b=f.names,c=f.childHeight,d=f.childWidth;a.setProp("x",f.childX);a.setProp("y",f.childY);if(a[b.heightModel].calculated){a[b.setHeight](c)}if(a[b.widthModel].calculated){a[b.setWidth](d)}},completeLayout:function(d){var p=this,o=d.invalidateScrollX,m=d.invalidateScrollY,f=p.overflowHandler,a=d.scrollRestore,h,c,j,g,b;if(f){f.completeLayout(d)}if(o||m){c=p.getTarget();h=c.dom;b=h.style;if(o){j=c.getStyle("overflowX");if(j==="auto"){j=b.overflowX;b.overflowX="scroll"}else{o=false}}if(m){g=c.getStyle("overflowY");if(g==="auto"){g=b.overflowY;b.overflowY="scroll"}else{m=false}}if(o||m){h.scrollWidth;if(o){b.overflowX=j}if(m){b.overflowY=g}}}if(a){d.ownerScrollable.scrollTo(a.x,a.y)}},finishedLayout:function(b){var a=this.overflowHandler;if(a){a.finishedLayout(b)}Ext.layout.container.Container.prototype.finishedLayout.apply(this,arguments)},getLayoutItems:function(){var c=Ext.layout.container.Container.prototype.getLayoutItems.call(this),g=c.length,m,j,h,d,b,a,f;for(h=0;h<g;++h){if((d=c[h]).isSplitter){continue}f=d.splitter;if(d.hidden){if(f){if(!f.hidden){f.hidden=true;if(f.el){f.el.hide()}}}continue}if(f){a=f.collapseTarget==="next"}else{a=false}j=null;if(m&&b){if(b.hidden){b.hidden=false;if(b.el){b.el.show()}}if(a){j=true}}else{if(a){j=!m}}if(j!==null&&f.hidden!==j){f.hidden=j;if(f.el){f.el.setVisible(!j)}}b=!a&&f;m=d}if(m&&b&&!b.hidden){b.hidden=true;if(b.el){b.el.hide()}}return c},getScrollerEl:function(){return this.innerCt},insertSplitter:function(f,d,a,c){var g={xtype:"splitter",id:f.id+"-splitter",hidden:a,splitterFor:f,synthetic:true},b=d+((c.collapseTarget==="prev")?1:0);g[this.names.height]="100%";if(c){Ext.apply(g,c)}f.splitter=this.owner.add(b,g)},publishInnerCtSize:function(r,t){t=t||0;var d=this,p=r.state,c=r.boxNames,b=c.height,j=c.width,a=r.boxOptions.align,q=d.padding,g=p.boxPlan,u=g.targetSize,h=g.maxSize,o=p.needsScroll,m=r.innerCtContext,s,f;if(r.parallelSizeModel.shrinkWrap||(g.tooNarrow&&p.canScroll)){s=p.contentWidth-r.targetContext.getPaddingInfo()[j]}else{s=u[j];if(o&&o.perpendicular){s-=Ext.getScrollbarSize()[j]}}s-=t;d.owner.tooNarrow=g.tooNarrow;if(a.stretch){f=h}else{f=g.maxSize+q[c.beforeY]+q[c.afterY]+m.getBorderInfo()[b];if(!r.perpendicularSizeModel.shrinkWrap&&(a.center||a.bottom)){f=Math.max(u[b],f)}}m[c.setWidth](s);m[c.setHeight](f);r.targetElContext.setWidth(r.innerCtContext.props.width-(d.vertical?0:(t||0)));if(isNaN(s+f)){d.done=false}},onAdd:function(b,c){var a=this,d=a.enableSplitters&&b.split&&!b.isButton;Ext.layout.container.Container.prototype.onAdd.apply(this,arguments);if(d){if(d===true){d={collapseTarget:"next"}}else{if(Ext.isString(d)){d={collapseTarget:d==="before"?"next":"prev"}}else{d=Ext.apply({collapseTarget:d.side==="before"?"next":"prev"},d)}}a.insertSplitter(b,c,!!b.hidden,d)}},onRemove:function(a,d){var f=this,h=f.names,j=f.owner,g=a.splitter,b=f.overflowHandler,c;Ext.layout.container.Container.prototype.onRemove.apply(this,arguments);if(g&&j.contains(g)){j.doRemove(g,true);a.splitter=null}if(b){b.onRemove(a)}if(a.layoutMarginCap===f.id){delete a.layoutMarginCap}if(!j.destroying&&!d&&a.rendered){c=a.getEl();if(c){c.setStyle(h.beforeY,"");c.setStyle(h.beforeX,"");c.setStyle("margin","")}}},applyOverflowHandler:function(c,b){var a;if(typeof c==="string"){c={type:c}}a=c.type;if(b&&b.type===c.type){delete c.type;b.setConfig(c);return b}c.layout=this;return Ext.Factory.boxOverflow(c)},getRenderTarget:function(){return this.targetEl},getElementTarget:function(){return this.innerCt},destroy:function(){var a=this;Ext.destroy(a.innerCt,a.overflowHandler);a.flexSortFn=a.innerCt=null;Ext.layout.container.Container.prototype.destroy.call(this)},getRenderData:function(){var a=Ext.layout.container.Container.prototype.getRenderData.call(this);a.targetElCls=this.targetElCls;return a},updateVertical:function(d){var b=this,f=b.overflowHandler,c=b.owner,a=b._props;Ext.apply(b,d?a.vbox:a.hbox);if(f&&c&&c.rendered){f.setVertical(d)}},_props:{hbox:{direction:"horizontal",oppositeDirection:"vertical",horizontal:true,vertical:false,names:{beforeX:"left",beforeScrollX:"left",leftCap:"Left",afterX:"right",width:"width",contentWidth:"contentWidth",minWidth:"minWidth",maxWidth:"maxWidth",widthCap:"Width",widthModel:"widthModel",widthIndex:0,x:"x",getX:"getX",setX:"setX",scrollLeft:"scrollLeft",overflowX:"overflowX",hasOverflowX:"hasOverflowX",invalidateScrollX:"invalidateScrollX",parallelMargins:"lr",center:"middle",beforeY:"top",afterY:"bottom",height:"height",contentHeight:"contentHeight",minHeight:"minHeight",maxHeight:"maxHeight",heightCap:"Height",heightModel:"heightModel",heightIndex:1,y:"y",getY:"getY",setY:"setY",overflowY:"overflowY",hasOverflowY:"hasOverflowY",invalidateScrollY:"invalidateScrollY",perpendicularMargins:"tb",getWidth:"getWidth",getHeight:"getHeight",setWidth:"setWidth",setHeight:"setHeight",gotWidth:"gotWidth",gotHeight:"gotHeight",setContentWidth:"setContentWidth",setContentHeight:"setContentHeight",setWidthInDom:"setWidthInDom",setHeightInDom:"setHeightInDom",getScrollLeft:"getScrollLeft",setScrollLeft:"setScrollLeft",scrollTo:"scrollTo"},sizePolicy:{flex:{"":{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},stretch:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1},stretchmax:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:1}},"":{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},stretch:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},stretchmax:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:1}}},vbox:{direction:"vertical",oppositeDirection:"horizontal",horizontal:false,vertical:true,names:{beforeX:"top",beforeScrollX:"top",leftCap:"Top",afterX:"bottom",width:"height",contentWidth:"contentHeight",minWidth:"minHeight",maxWidth:"maxHeight",widthCap:"Height",widthModel:"heightModel",widthIndex:1,x:"y",getX:"getY",setX:"setY",scrollLeft:"scrollTop",overflowX:"overflowY",hasOverflowX:"hasOverflowY",invalidateScrollX:"invalidateScrollY",parallelMargins:"tb",center:"center",beforeY:"left",afterY:"right",height:"width",contentHeight:"contentWidth",minHeight:"minWidth",maxHeight:"maxWidth",heightCap:"Width",heightModel:"widthModel",heightIndex:0,y:"x",getY:"getX",setY:"setX",overflowY:"overflowX",hasOverflowY:"hasOverflowX",invalidateScrollY:"invalidateScrollX",perpendicularMargins:"lr",getWidth:"getHeight",getHeight:"getWidth",setWidth:"setHeight",setHeight:"setWidth",gotWidth:"gotHeight",gotHeight:"gotWidth",setContentWidth:"setContentHeight",setContentHeight:"setContentWidth",setWidthInDom:"setHeightInDom",setHeightInDom:"setWidthInDom",getScrollLeft:"getScrollTop",setScrollLeft:"setScrollTop",scrollTo:"scrollTo"},sizePolicy:{flex:{"":{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},stretch:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1},stretchmax:{readsWidth:1,readsHeight:0,setsWidth:1,setsHeight:1}},"":{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},stretch:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},stretchmax:{readsWidth:1,readsHeight:1,setsWidth:1,setsHeight:0}}}}},1,0,0,0,["layout.box"],0,[Ext.layout.container,"Box",Ext.layout,"BoxLayout"],0));(Ext.cmd.derive("Ext.layout.container.HBox",Ext.layout.container.Box,{alternateClassName:"Ext.layout.HBoxLayout",type:"hbox",vertical:false},0,0,0,0,["layout.hbox"],0,[Ext.layout.container,"HBox",Ext.layout,"HBoxLayout"],0));(Ext.cmd.derive("Ext.layout.container.VBox",Ext.layout.container.Box,{alternateClassName:"Ext.layout.VBoxLayout",type:"vbox",vertical:true},0,0,0,0,["layout.vbox"],0,[Ext.layout.container,"VBox",Ext.layout,"VBoxLayout"],0));(Ext.cmd.derive("Ext.toolbar.Toolbar",Ext.container.Container,{alternateClassName:"Ext.Toolbar",isToolbar:true,baseCls:"x-toolbar",ariaRole:"toolbar",defaultType:"button",layout:undefined,vertical:undefined,enableOverflow:false,overflowHandler:null,defaultButtonUI:"default-toolbar",defaultFieldUI:"default",defaultFooterButtonUI:"default",defaultFooterFieldUI:"default",trackMenus:true,itemCls:"x-toolbar-item",statics:{shortcuts:{"-":"tbseparator"," ":"tbspacer"},shortcutsHV:{0:{"->":{xtype:"tbfill",height:0}},1:{"->":{xtype:"tbfill",width:0}}}},initComponent:function(){var a=this,c=a.layout,b=a.vertical;if(b===undefined){a.vertical=b=a.dock==="right"||a.dock==="left"}a.layout=c=Ext.applyIf(Ext.isString(c)?{type:c}:c||{},{type:b?"vbox":"hbox",align:b?"stretchmax":"middle"});if(a.overflowHandler){c.overflowHandler=a.overflowHandler}else{if(a.enableOverflow){c.overflowHandler="menu"}}if(b){a.addClsWithUI("vertical")}if(a.ui==="footer"){a.ignoreBorderManagement=true}Ext.container.Container.prototype.initComponent.call(this)},getRefItems:function(c){var b=this,d=Ext.container.Container.prototype.getRefItems.apply(this,arguments),a=b.layout,f;if(c&&(b.enableOverflow||(b.overflowHandler==="menu"))){f=a.overflowHandler;if(f&&f.menu){d=d.concat(f.menu.getRefItems(c))}}return d},lookupComponent:function(b){var a=arguments,d,f;if(typeof b==="string"){f=Ext.toolbar.Toolbar;d=f.shortcutsHV[this.vertical?1:0][b]||f.shortcuts[b];if(typeof d==="string"){b={xtype:d}}else{if(d){b=Ext.apply({},d)}else{b={xtype:"tbtext",text:b}}}this.applyDefaults(b);a=[b]}return Ext.container.Container.prototype.lookupComponent.apply(this,a)},onBeforeAdd:function(d){var a=this,b=a.ui==="footer",c=b?a.defaultFooterButtonUI:a.defaultButtonUI;if(d.isSegmentedButton){if(d.getDefaultUI()==="default"&&!d.config.hasOwnProperty("defaultUI")){d.setDefaultUI(c)}}else{if(d.ui==="default"&&!d.hasOwnProperty("ui")){if(d.isButton){d.ui=c}else{if(d.isFormField){d.ui=b?a.defaultFooterFieldUI:a.defaultFieldUI}}}}if(d instanceof Ext.toolbar.Separator){d.setUI(a.vertical?"vertical":"horizontal")}Ext.container.Container.prototype.onBeforeAdd.apply(this,arguments)},onAdd:function(a){if(a.needArrowKeys&&this.enableFocusableContainer){this.enableFocusableContainer=false}Ext.container.Container.prototype.onAdd.apply(this,arguments);this.trackMenu(a)},onRemove:function(a){Ext.container.Container.prototype.onRemove.apply(this,arguments);this.trackMenu(a,true)},privates:{applyDefaults:function(a){if(!Ext.isString(a)){a=Ext.container.Container.prototype.applyDefaults.apply(this,arguments)}return a},trackMenu:function(a,b){var c=this;if(c.trackMenus&&a.menu){a[b?"un":"on"]({mouseover:c.onButtonOver,menushow:c.onButtonMenuShow,menuhide:c.onButtonMenuHide,scope:c})}},getChildItemsToDisable:function(){return this.items.getRange()},onButtonOver:function(c,a){var b=this.activeMenuBtn;if(b&&b!==c){b.hideMenu();c.focus();c.showMenu(a);this.activeMenuBtn=c}},onButtonMenuShow:function(a){this.activeMenuBtn=a},onButtonMenuHide:function(a){this.activeMenuBtn=null}}},0,["toolbar"],["component","box","container","toolbar"],{component:true,box:true,container:true,toolbar:true},["widget.toolbar"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.toolbar,"Toolbar",Ext,"Toolbar"],0));Ext.define("Ext.theme.neptune.toolbar.Toolbar",{override:"Ext.toolbar.Toolbar",usePlainButtons:false,border:false});(Ext.cmd.derive("Ext.dd.DragDrop",Ext.Base,{constructor:function(a,b,c){if(a){this.init(a,b,c)}},id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:false,lock:function(){this.locked=true},moveOnly:false,unlock:function(){this.locked=false},isTarget:true,padding:null,_domRef:null,__ygDragDrop:true,constrainX:false,constrainY:false,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:false,xTicks:null,yTicks:null,primaryButtonOnly:true,available:false,hasOuterHandles:false,triggerEvent:"mousedown",b4StartDrag:function(a,b){},startDrag:function(a,b){},b4Drag:function(a){},onDrag:function(a){},onDragEnter:function(a,b){},b4DragOver:function(a){},onDragOver:function(a,b){},b4DragOut:function(a){},onDragOut:function(a,b){},b4DragDrop:function(a){},onDragDrop:function(a,b){},onInvalidDrop:function(a){},b4EndDrag:function(a){},endDrag:function(a){},b4MouseDown:function(a){},onMouseDown:function(a){},onMouseUp:function(a){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(h,d,a){if(Ext.isNumber(d)){d={left:d,right:d,top:d,bottom:d}}d=d||this.defaultPadding;var m=Ext.get(this.getEl()).getBox(),g=Ext.get(h),q=g.getScroll(),j,o=g.dom,p,f,b;if(o===document.body){j={x:q.left,y:q.top,width:Ext.Element.getViewportWidth(),height:Ext.Element.getViewportHeight()}}else{p=g.getXY();j={x:p[0],y:p[1],width:o.clientWidth,height:o.clientHeight}}f=m.y-j.y;b=m.x-j.x;this.resetConstraints();this.setXConstraint(b-(d.left||0),j.width-b-m.width-(d.right||0),this.xTickSize);this.setYConstraint(f-(d.top||0),j.height-f-m.height-(d.bottom||0),this.yTickSize)},getEl:function(){if(!this._domRef){this._domRef=Ext.getDom(this.id)}return this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(b,c,d){var a=this;a.el=a.el||Ext.get(b);a.initTarget(b,c,d);Ext.get(a.id).on(a.triggerEvent,a.handleMouseDown,a)},initTarget:function(a,b,c){this.config=c||{};this.DDMInstance=Ext.dd.DragDropManager;this.groups={};if(typeof a!=="string"){a=Ext.id(a)}this.id=a;this.addToGroup((b)?b:"default");this.handleElId=a;this.setDragElId(a);this.invalidHandleTypes={A:"A"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig();this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0];this.isTarget=(this.config.isTarget!==false);this.maintainOffset=(this.config.maintainOffset);this.primaryButtonOnly=(this.config.primaryButtonOnly!==false)},handleOnAvailable:function(){this.available=true;this.resetConstraints();this.onAvailable()},setPadding:function(a,c,b,d){if(!c&&0!==c){this.padding=[a,a,a,a]}else{if(!b&&0!==b){this.padding=[a,c,a,c]}else{this.padding=[a,c,b,d]}}},setInitPosition:function(f,d){var g=this.getEl(),c,b,a;if(!this.DDMInstance.verifyEl(g)){return}c=f||0;b=d||0;a=Ext.fly(g).getXY();this.initPageX=a[0]-c;this.initPageY=a[1]-b;this.lastPageX=a[0];this.lastPageY=a[1];this.setStartPosition(a)},setStartPosition:function(b){var a=b||Ext.fly(this.getEl()).getXY();this.deltaSetXY=null;this.startPageX=a[0];this.startPageY=a[1]},addToGroup:function(a){this.groups[a]=true;this.DDMInstance.regDragDrop(this,a)},removeFromGroup:function(a){if(this.groups[a]){delete this.groups[a]}this.DDMInstance.removeDDFromGroup(this,a)},setDragElId:function(a){this.dragElId=a},setHandleElId:function(a){if(typeof a!=="string"){a=Ext.id(a)}this.handleElId=a;this.DDMInstance.regHandle(this.id,a)},setOuterHandleElId:function(a){if(typeof a!=="string"){a=Ext.id(a)}Ext.get(a).on(this.triggerEvent,this.handleMouseDown,this);this.setHandleElId(a);this.hasOuterHandles=true},unreg:function(){var b=this,a;if(b._domRef){a=Ext.fly(b.id);if(a){a.un(b.triggerEvent,b.handleMouseDown,b)}}b._domRef=null;b.DDMInstance._remove(b,b.autoGroup)},destroy:function(){this.unreg();this.callParent()},isLocked:function(){return(this.DDMInstance.isLocked()||this.locked)},handleMouseDown:function(a,c){var b=this;if((b.primaryButtonOnly&&a.button)||b.isLocked()){return}b.DDMInstance.refreshCache(b.groups);if(b.hasOuterHandles||b.DDMInstance.isOverTarget(a.getPoint(),b)){if(b.clickValidator(a)){b.setStartPosition();b.b4MouseDown(a);b.onMouseDown(a);b.DDMInstance.handleMouseDown(a,b);b.DDMInstance.stopEvent(a)}}},clickValidator:function(b){var a=b.getTarget();return(this.isValidHandleChild(a)&&(this.id===this.handleElId||this.DDMInstance.handleWasClicked(a,this.id)))},addInvalidHandleType:function(a){var b=a.toUpperCase();this.invalidHandleTypes[b]=b},addInvalidHandleId:function(a){if(typeof a!=="string"){a=Ext.id(a)}this.invalidHandleIds[a]=a},addInvalidHandleClass:function(a){this.invalidHandleClasses.push(a)},removeInvalidHandleType:function(a){var b=a.toUpperCase();delete this.invalidHandleTypes[b]},removeInvalidHandleId:function(a){if(typeof a!=="string"){a=Ext.id(a)}delete this.invalidHandleIds[a]},removeInvalidHandleClass:function(d){var b=this.invalidHandleClasses,c=b.length,a;for(a=0;a<c;++a){if(b[a]===d){delete b[a]}}},isValidHandleChild:function(f){var d=true,a,c,b;try{a=f.nodeName.toUpperCase()}catch(g){a=f.nodeName}d=d&&!this.invalidHandleTypes[a];d=d&&!this.invalidHandleIds[f.id];for(c=0,b=this.invalidHandleClasses.length;d&&c<b;++c){d=!Ext.fly(f).hasCls(this.invalidHandleClasses[c])}return d},setXTicks:function(b,c){this.xTicks=[];this.xTickSize=c;var a={},d;for(d=this.initPageX;d>=this.minX;d=d-c){if(!a[d]){this.xTicks[this.xTicks.length]=d;a[d]=true}}for(d=this.initPageX;d<=this.maxX;d=d+c){if(!a[d]){this.xTicks[this.xTicks.length]=d;a[d]=true}}Ext.Array.sort(this.xTicks,this.DDMInstance.numericSort)},setYTicks:function(b,c){this.yTicks=[];this.yTickSize=c;var a={},d;for(d=this.initPageY;d>=this.minY;d=d-c){if(!a[d]){this.yTicks[this.yTicks.length]=d;a[d]=true}}for(d=this.initPageY;d<=this.maxY;d=d+c){if(!a[d]){this.yTicks[this.yTicks.length]=d;a[d]=true}}Ext.Array.sort(this.yTicks,this.DDMInstance.numericSort)},setXConstraint:function(a,c,b){this.leftConstraint=a;this.rightConstraint=c;this.minX=this.initPageX-a;this.maxX=this.initPageX+c;if(b){this.setXTicks(this.initPageX,b)}this.constrainX=true},clearConstraints:function(){this.constrainX=false;this.constrainY=false;this.clearTicks()},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0},setYConstraint:function(b,a,c){this.topConstraint=b;this.bottomConstraint=a;this.minY=this.initPageY-b;this.maxY=this.initPageY+a;if(c){this.setYTicks(this.initPageY,c)}this.constrainY=true},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var b=(this.maintainOffset)?this.lastPageX-this.initPageX:0,a=(this.maintainOffset)?this.lastPageY-this.initPageY:0;this.setInitPosition(b,a)}else{this.setInitPosition()}if(this.constrainX){this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize)}if(this.constrainY){this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)}},getTick:function(h,d){if(!d){return h}else{if(d[0]>=h){return d[0]}else{var b,a,c,g,f;for(b=0,a=d.length;b<a;++b){c=b+1;if(d[c]&&d[c]>=h){g=h-d[b];f=d[c]-h;return(f>g)?d[b]:d[c]}}return d[d.length-1]}}},toString:function(){return("DragDrop "+this.id)}},3,0,0,0,0,0,[Ext.dd,"DragDrop"],0));(Ext.cmd.derive("Ext.dd.DD",Ext.dd.DragDrop,{constructor:function(a,b,c){if(a){this.init(a,b,c)}},scroll:true,autoOffset:function(a,d){var c=a-this.startPageX,b=d-this.startPageY;this.setDelta(c,b)},setDelta:function(b,a){this.deltaX=b;this.deltaY=a},setDragElPos:function(a,c){var b=this.getDragEl();this.alignElWithMouse(b,a,c)},alignElWithMouse:function(d,h,f){var j=this.getTargetCoord(h,f),g=d.dom?d:Ext.fly(d,"_dd"),b=g.getSize(),o=Ext.Element,p,c,a,m;if(!this.deltaSetXY){p=this.cachedViewportSize={width:o.getDocumentWidth(),height:o.getDocumentHeight()};c=[Math.max(0,Math.min(j.x,p.width-b.width)),Math.max(0,Math.min(j.y,p.height-b.height))];g.setXY(c);a=this.getLocalX(g);m=g.getLocalY();this.deltaSetXY=[a-j.x,m-j.y]}else{p=this.cachedViewportSize;this.setLocalXY(g,Math.max(0,Math.min(j.x+this.deltaSetXY[0],p.width-b.width)),Math.max(0,Math.min(j.y+this.deltaSetXY[1],p.height-b.height)))}this.cachePosition(j.x,j.y);this.autoScroll(j.x,j.y,d.offsetHeight,d.offsetWidth);return j},cachePosition:function(c,b){if(c){this.lastPageX=c;this.lastPageY=b}else{var a=Ext.fly(this.getEl()).getXY();this.lastPageX=a[0];this.lastPageY=a[1]}},autoScroll:function(p,m,c,r){if(this.scroll){var f=Ext.Element.getViewportHeight(),t=Ext.Element.getViewportWidth(),q=this.DDMInstance.getScrollTop(),b=this.DDMInstance.getScrollLeft(),j=c+m,o=r+p,g=(f+q-m-this.deltaY),d=(t+b-p-this.deltaX),a=40,s=(document.all)?80:30;if(j>f&&g<a){window.scrollTo(b,q+s)}if(m<q&&q>0&&m-q<a){window.scrollTo(b,q-s)}if(o>t&&d<a){window.scrollTo(b+s,q)}if(p<b&&b>0&&p-b<a){window.scrollTo(b-s,q)}}},getTargetCoord:function(a,d){var c=a-this.deltaX,b=d-this.deltaY;if(this.constrainX){if(c<this.minX){c=this.minX}if(c>this.maxX){c=this.maxX}}if(this.constrainY){if(b<this.minY){b=this.minY}if(b>this.maxY){b=this.maxY}}c=this.getTick(c,this.xTicks);b=this.getTick(b,this.yTicks);return{x:c,y:b}},applyConfig:function(){Ext.dd.DragDrop.prototype.applyConfig.call(this);this.scroll=(this.config.scroll!==false)},b4MouseDown:function(b){var a=b.getXY();this.autoOffset(a[0],a[1])},b4Drag:function(b){var a=b.getXY();this.setDragElPos(a[0],a[1])},toString:function(){return("DD "+this.id)},getLocalX:function(a){return a.getLocalX()},setLocalXY:function(c,b,a){c.setLocalXY(b,a)}},3,0,0,0,0,0,[Ext.dd,"DD"],0));(Ext.cmd.derive("Ext.dd.DDProxy",Ext.dd.DD,{statics:{dragElId:"ygddfdiv"},constructor:function(a,b,c){if(a){this.init(a,b,c);this.initFrame()}},resizeFrame:true,centerFrame:false,createFrame:function(){var d=this,c=document.body,b,a;if(!c||!c.firstChild){Ext.defer(function(){d.createFrame()},50);return}b=this.getDragEl();if(!b){b=document.createElement("div");b.id=this.dragElId;b.setAttribute("role","presentation");a=b.style;a.position="absolute";a.visibility="hidden";a.cursor="move";a.border="2px solid #aaa";a.zIndex=999;c.insertBefore(b,c.firstChild)}},initFrame:function(){this.createFrame()},applyConfig:function(){Ext.dd.DD.prototype.applyConfig.call(this);this.resizeFrame=(this.config.resizeFrame!==false);this.centerFrame=(this.config.centerFrame);this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(b,a){var f=this,c=f.getDragEl(),d=c.style;f._resizeProxy();if(f.centerFrame){f.setDelta(Math.round(parseInt(d.width,10)/2),Math.round(parseInt(d.height,10)/2))}f.setDragElPos(b,a);Ext.fly(c).show()},_resizeProxy:function(){if(this.resizeFrame){var a=this.getEl();Ext.fly(this.getDragEl()).setSize(a.offsetWidth,a.offsetHeight)}},b4MouseDown:function(a){var d=a.getXY(),c=d[0],b=d[1];this.autoOffset(c,b);this.setDragElPos(c,b)},b4StartDrag:function(a,b){this.showFrame(a,b)},b4EndDrag:function(a){Ext.fly(this.getDragEl()).hide()},endDrag:function(a){var c=this.getEl(),b=this.getDragEl();b.style.visibility="";this.beforeMove();c.style.visibility="hidden";Ext.dd.DDM.moveToEl(c,b);b.style.visibility="hidden";c.style.visibility="";this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return("DDProxy "+this.id)}},3,0,0,0,0,0,[Ext.dd,"DDProxy"],0));(Ext.cmd.derive("Ext.dd.StatusProxy",Ext.Component,{animRepair:false,childEls:["ghost"],renderTpl:['<div class="x-dd-drop-icon" role="presentation"></div><div id="{id}-ghost" data-ref="ghost" class="x-dd-drag-ghost" role="presentation"></div>'],repairCls:"x-dd-drag-repair",ariaRole:"presentation",skipLayout:true,constructor:function(a){var b=this;a=a||{};Ext.apply(b,{hideMode:"visibility",hidden:true,floating:true,id:b.id||Ext.id(),cls:"x-dd-drag-proxy "+this.dropNotAllowed,shadow:a.shadow||false,renderTo:Ext.getDetachedBody()});Ext.Component.prototype.constructor.apply(this,arguments);this.dropStatus=this.dropNotAllowed},dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",setStatus:function(a){a=a||this.dropNotAllowed;if(this.dropStatus!==a){this.el.replaceCls(this.dropStatus,a);this.dropStatus=a}},reset:function(c){var a=this,b="x-dd-drag-proxy ";a.el.replaceCls(b+a.dropAllowed,b+a.dropNotAllowed);a.dropStatus=a.dropNotAllowed;if(c){a.ghost.setHtml("")}},update:function(a){if(typeof a==="string"){this.ghost.setHtml(a)}else{this.ghost.setHtml("");a.style.margin="0";this.ghost.dom.appendChild(a)}var b=this.ghost.dom.firstChild;if(b){Ext.fly(b).setStyle("float","none")}},getGhost:function(){return this.ghost},hide:function(a){Ext.Component.prototype.hide.call(this);if(a){this.reset(true)}},stop:function(){if(this.anim&&this.anim.isAnimated&&this.anim.isAnimated()){this.anim.stop()}},sync:function(){this.el.syncUnderlays()},repair:function(a,b,c){var d=this;d.callback=b;d.scope=c;if(a&&d.animRepair!==false){d.el.addCls(d.repairCls);d.el.setUnderlaysVisible(false);d.anim=d.el.animate({duration:d.repairDuration||500,easing:"ease-out",to:{x:a[0],y:a[1]},stopAnimation:true,callback:d.afterRepair,scope:d})}else{d.afterRepair()}},afterRepair:function(){var a=this;a.hide(true);a.el.removeCls(a.repairCls);if(typeof a.callback==="function"){a.callback.call(a.scope||a)}delete a.callback;delete a.scope}},1,0,["component","box"],{component:true,box:true},0,0,[Ext.dd,"StatusProxy"],0));(Ext.cmd.derive("Ext.dd.DragSource",Ext.dd.DDProxy,{dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",animRepair:true,repairHighlightColor:"c3daf9",constructor:function(b,a){this.el=Ext.get(b);if(!this.dragData){this.dragData={}}Ext.apply(this,a);if(!this.proxy){this.proxy=new Ext.dd.StatusProxy({id:this.el.id+"-drag-status-proxy",animRepair:this.animRepair})}Ext.dd.DDProxy.prototype.constructor.call(this,this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:false,isTarget:false,scroll:this.scroll===true});this.dragging=false},getDragData:function(a){return this.dragData},onDragEnter:function(a,b){var d=Ext.dd.DragDropManager.getDDById(b),c;this.cachedTarget=d;if(this.beforeDragEnter(d,a,b)!==false){if(d.isNotifyTarget){c=d.notifyEnter(this,a,this.dragData);this.proxy.setStatus(c)}else{this.proxy.setStatus(this.dropAllowed)}if(this.afterDragEnter){this.afterDragEnter(d,a,b)}}},beforeDragEnter:function(c,b,a){return true},onDragOver:function(a,b){var d=this.cachedTarget||Ext.dd.DragDropManager.getDDById(b),c;if(this.beforeDragOver(d,a,b)!==false){if(d.isNotifyTarget){c=d.notifyOver(this,a,this.dragData);this.proxy.setStatus(c)}if(this.afterDragOver){this.afterDragOver(d,a,b)}}},beforeDragOver:function(c,b,a){return true},onDragOut:function(c,a){var b=this.cachedTarget||Ext.dd.DragDropManager.getDDById(a);if(this.beforeDragOut(b,c,a)!==false){if(b.isNotifyTarget){b.notifyOut(this,c,this.dragData)}this.proxy.reset();if(this.afterDragOut){this.afterDragOut(b,c,a)}}this.cachedTarget=null},beforeDragOut:function(c,b,a){return true},onDragDrop:function(c,a){var b=this.cachedTarget||Ext.dd.DragDropManager.getDDById(a);if(this.beforeDragDrop(b,c,a)!==false){if(b.isNotifyTarget){if(b.notifyDrop(this,c,this.dragData)!==false){this.onValidDrop(b,c,a)}else{this.onInvalidDrop(b,c,a)}}else{this.onValidDrop(b,c,a)}if(this.afterDragDrop){this.afterDragDrop(b,c,a)}}delete this.cachedTarget},beforeDragDrop:function(c,b,a){return true},onValidDrop:function(c,b,a){this.hideProxy();if(this.afterValidDrop){this.afterValidDrop(c,b,a)}},getRepairXY:function(b,a){return this.el.getXY()},onInvalidDrop:function(a,d,b){var c=this;if(!d){d=a;a=null;b=d.getTarget().id}if(c.beforeInvalidDrop(a,d,b)!==false){if(c.cachedTarget){if(c.cachedTarget.isNotifyTarget){c.cachedTarget.notifyOut(c,d,c.dragData)}c.cacheTarget=null}c.proxy.repair(c.getRepairXY(d,c.dragData),c.afterRepair,c);if(c.afterInvalidDrop){c.afterInvalidDrop(d,b)}}},afterRepair:function(){var a=this;if(Ext.enableFx){a.el.highlight(a.repairHighlightColor)}a.dragging=false},beforeInvalidDrop:function(c,b,a){return true},handleMouseDown:function(b){if(this.dragging){return}var a=this.getDragData(b);if(a&&this.onBeforeDrag(a,b)!==false){this.dragData=a;this.proxy.stop();Ext.dd.DDProxy.prototype.handleMouseDown.apply(this,arguments)}},onBeforeDrag:function(a,b){return true},onStartDrag:Ext.emptyFn,alignElWithMouse:function(){this.proxy.ensureAttachedToBody(true);return Ext.dd.DDProxy.prototype.alignElWithMouse.apply(this,arguments)},startDrag:function(a,b){this.proxy.reset();this.proxy.hidden=false;this.dragging=true;this.proxy.update("");this.onInitDrag(a,b);this.proxy.show()},onInitDrag:function(b,a){var c=this.el.dom.cloneNode(true);c.id=Ext.id();this.proxy.update(c);this.onStartDrag(b,a);return true},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide();this.proxy.reset(true);this.dragging=false},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(a){},endDrag:function(a){this.onEndDrag(this.dragData,a)},onEndDrag:function(a,b){},autoOffset:function(a,b){this.setDelta(-12,-20)},destroy:function(){Ext.dd.DDProxy.prototype.destroy.call(this);Ext.destroy(this.proxy)}},1,0,0,0,0,0,[Ext.dd,"DragSource"],0));(Ext.cmd.derive("Ext.panel.Proxy",Ext.Base,{alternateClassName:"Ext.dd.PanelProxy",moveOnDrag:true,constructor:function(b,c){var a=this;a.panel=b;a.id=a.panel.id+"-ddproxy";Ext.apply(a,c)},insertProxy:true,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost.el},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){var a=this;if(a.ghost){if(a.proxy){a.proxy.destroy();delete a.proxy}a.panel.unghost(null,a.moveOnDrag);delete a.ghost}},show:function(){var b=this,a;if(!b.ghost){a=b.panel.getSize();b.panel.el.setVisibilityMode(Ext.Element.DISPLAY);b.ghost=b.panel.ghost();if(b.insertProxy){b.proxy=b.panel.el.insertSibling({role:"presentation",cls:"x-panel-dd-spacer"});b.proxy.setSize(a)}}},repair:function(c,a,b){this.hide();Ext.callback(a,b||this)},moveProxy:function(a,b){if(this.proxy){a.insertBefore(this.proxy.dom,b)}}},1,0,0,0,0,0,[Ext.panel,"Proxy",Ext.dd,"PanelProxy"],0));(Ext.cmd.derive("Ext.panel.DD",Ext.dd.DragSource,{constructor:function(c,b){var a=this;a.panel=c;a.dragData={panel:c};a.panelProxy=new Ext.panel.Proxy(c,b);a.proxy=a.panelProxy.proxy;Ext.dd.DragSource.prototype.constructor.call(this,c.el,b);a.setupEl(c)},setupEl:function(c){var a=this,b=c.header,d=c.body;if(b){a.setHandleElId(b.id);d=b.el}if(d){d.setStyle("cursor","move");a.scroll=false}else{c.on("boxready",a.setupEl,a,{single:true})}},showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(a,b){this.panelProxy.show()},b4MouseDown:function(a){var d=a.getXY(),c=d[0],b=d[1];this.autoOffset(c,b)},onInitDrag:function(a,b){this.onStartDrag(a,b);return true},createFrame:Ext.emptyFn,getDragEl:function(b){var a=this.panelProxy.ghost;if(a){return a.el.dom}},endDrag:function(a){this.panelProxy.hide();this.panel.saveState()},autoOffset:function(a,b){a-=this.startPageX;b-=this.startPageY;this.setDelta(a,b)},onInvalidDrop:function(a,d,b){var c=this;if(c.beforeInvalidDrop(a,d,b)!==false){if(c.cachedTarget){if(c.cachedTarget.isNotifyTarget){c.cachedTarget.notifyOut(c,d,c.dragData)}c.cacheTarget=null}if(c.afterInvalidDrop){c.afterInvalidDrop(d,b)}}}},1,0,0,0,0,0,[Ext.panel,"DD"],0));(Ext.cmd.derive("Ext.layout.component.Dock",Ext.layout.component.Component,{alternateClassName:"Ext.layout.component.AbstractDock",type:"dock",horzAxisProps:{name:"horz",oppositeName:"vert",dockBegin:"left",dockEnd:"right",horizontal:true,marginBegin:"margin-left",maxSize:"maxWidth",minSize:"minWidth",pos:"x",setSize:"setWidth",shrinkWrapDock:"shrinkWrapDockWidth",size:"width",sizeModel:"widthModel"},vertAxisProps:{name:"vert",oppositeName:"horz",dockBegin:"top",dockEnd:"bottom",horizontal:false,marginBegin:"margin-top",maxSize:"maxHeight",minSize:"minHeight",pos:"y",setSize:"setHeight",shrinkWrapDock:"shrinkWrapDockHeight",size:"height",sizeModel:"heightModel"},initializedBorders:-1,horizontalCollapsePolicy:{width:true,x:true},verticalCollapsePolicy:{height:true,y:true},finishRender:function(){var c=this,a,b;Ext.layout.component.Component.prototype.finishRender.call(this);a=c.getRenderTarget();b=c.getDockedItems();c.finishRenderItems(a,b)},isItemBoxParent:function(a){return true},isItemShrinkWrap:function(a){return true},noBorderClasses:["x-docked-noborder-top","x-docked-noborder-right","x-docked-noborder-bottom","x-docked-noborder-left"],noBorderClassesSides:{top:"x-docked-noborder-top",right:"x-docked-noborder-right",bottom:"x-docked-noborder-bottom",left:"x-docked-noborder-left"},borderWidthProps:{top:"border-top-width",right:"border-right-width",bottom:"border-bottom-width",left:"border-left-width"},_itemCls:"x-docked",handleItemBorders:function(){var m=this,p=m.owner,g,j,c=m.lastDockedItems,b=m.borders,r=p.dockedItems.generation,s=m.noBorderClassesSides,o=m.borderWidthProps,a,f,h,q,d,t=m.collapsed;if(m.initializedBorders===r||(p.border&&!p.manageBodyBorders)||(p.collapsed&&p.collapseMode==="mini")){return}m.initializedBorders=r;m.collapsed=false;m.lastDockedItems=j=m.getLayoutItems();m.collapsed=t;g={top:[],right:[],bottom:[],left:[]};for(a=0,f=j.length;a<f;a++){h=j[a];q=h.dock;if(h.ignoreBorderManagement){continue}if(!g[q].satisfied){g[q].push(h);g[q].satisfied=true}if(!g.top.satisfied&&q!=="bottom"){g.top.push(h)}if(!g.right.satisfied&&q!=="left"){g.right.push(h)}if(!g.bottom.satisfied&&q!=="top"){g.bottom.push(h)}if(!g.left.satisfied&&q!=="right"){g.left.push(h)}}if(c){for(a=0,f=c.length;a<f;a++){h=c[a];if(!h.destroyed&&!h.ignoreBorderManagement&&!p.manageBodyBorders){h.removeCls(m.noBorderClasses)}}}if(b){for(d in b){if(p.manageBodyBorders&&b[d].satisfied){p.setBodyStyle(o[d],"")}}}for(d in g){f=g[d].length;if(!p.manageBodyBorders){for(a=0;a<f;a++){g[d][a].addCls(s[d])}if((!g[d].satisfied&&!p.bodyBorder)||p.bodyBorder===false){p.addBodyCls(s[d])}else{p.removeBodyCls(s[d])}}else{if(g[d].satisfied){p.setBodyStyle(o[d],"1px")}}}m.borders=g},beforeLayoutCycle:function(g){var c=this,b=c.owner,h=c.sizeModels.shrinkWrap,f=b.shrinkWrapDock,d,a;if(b.collapsed){if(b.collapsedVertical()){a=true;g.measureDimensions=1}else{d=true;g.measureDimensions=2}}g.collapsedVert=a;g.collapsedHorz=d;if(a){g.heightModel=h}else{if(d){g.widthModel=h}}f=f===true?3:(f||0);g.shrinkWrapDockHeight=(f&1)&&g.heightModel.shrinkWrap;g.shrinkWrapDockWidth=(f&2)&&g.widthModel.shrinkWrap},beginLayout:function(a){var h=this,s=h.owner,j=h.getLayoutItems(),r=a.context,c=j.length,g=h.lastCollapsedState,m,f,q,p,b,d,o;Ext.layout.component.Component.prototype.beginLayout.apply(this,arguments);d=s.getCollapsed();if(d!==g&&g!==undefined){if(h.owner.collapsed){a.isCollapsingOrExpanding=1;s.addClsWithUI(s.collapsedCls)}else{a.isCollapsingOrExpanding=2;s.removeClsWithUI(s.collapsedCls);a.lastCollapsedState=h.lastCollapsedState}}h.lastCollapsedState=d;a.dockedItems=m=[];for(f=0;f<c;f++){q=j[f];if(q.rendered){o=q.dock;p=r.getCmp(q);p.dockedAt={x:0,y:0};p.offsets=b=Ext.Element.parseBox(q.offsets||0);p.horizontal=o==="top"||o==="bottom";b.width=b.left+b.right;b.height=b.top+b.bottom;m.push(p)}}a.bodyContext=a.getEl("body")},beginLayoutCycle:function(f){var j=this,c=f.dockedItems,h=c.length,d=j.owner,m=d.frameBody,b=j.lastHeightModel,g,a,o;Ext.layout.component.Component.prototype.beginLayoutCycle.apply(this,arguments);if(j.owner.manageHeight){if(j.lastBodyDisplay){d.body.dom.style.display=j.lastBodyDisplay=""}}else{if(j.lastBodyDisplay!=="inline-block"){d.body.dom.style.display=j.lastBodyDisplay="inline-block"}if(b&&b.shrinkWrap&&!f.heightModel.shrinkWrap){d.body.dom.style.marginBottom=""}}if(f.widthModel.auto){if(f.widthModel.shrinkWrap){d.el.setWidth(null)}d.body.setWidth(null);if(m){m.setWidth(null)}}if(f.heightModel.auto){d.body.setHeight(null);if(m){m.setHeight(null)}}if(f.collapsedVert){f.setContentHeight(0)}else{if(f.collapsedHorz){f.setContentWidth(0)}}for(g=0;g<h;g++){a=c[g].target;o=a.dock;if(o==="right"){a.setLocalX(0)}else{if(o!=="left"){continue}}}},calculate:function(f){var q=this,d=q.measureAutoDimensions(f,f.measureDimensions),c=f.state,p=c.horzDone,g=c.vertDone,h=f.bodyContext,o,b,m,j,a;f.borderInfo||f.getBorderInfo();f.paddingInfo||f.getPaddingInfo();f.frameInfo||f.getFrameInfo();h.borderInfo||h.getBorderInfo();h.paddingInfo||h.getPaddingInfo();if(!f.frameBorder){if(!(o=f.framing)){f.frameBorder=f.borderInfo;f.framePadding=f.paddingInfo}else{f.frameBorder=o.border;f.framePadding=o.padding}}b=!p&&q.createAxis(f,d.contentWidth,f.widthModel,q.horzAxisProps,f.collapsedHorz);m=!g&&q.createAxis(f,d.contentHeight,f.heightModel,q.vertAxisProps,f.collapsedVert);for(j=0,a=f.dockedItems.length;a--;++j){if(b){q.dockChild(f,b,a,j)}if(m){q.dockChild(f,m,a,j)}}if(b&&q.finishAxis(f,b)){c.horzDone=p=b}if(m&&q.finishAxis(f,m)){c.vertDone=g=m}if(p&&g&&q.finishConstraints(f,p,g)){q.finishPositions(f,p,g)}else{q.done=false}},createAxis:function(t,m,f,q,d){var z=this,y=0,b=z.owner,g=b[q.maxSize],c=b[q.minSize]||0,r=q.dockBegin,j=q.dockEnd,v=q.pos,p=q.size,o=g!=null,s=f.shrinkWrap,a,w,u,h;if(s){if(d){h=0}else{a=t.bodyContext;h=m+a.borderInfo[p]}}else{w=t.frameBorder;u=t.framePadding;y=w[r]+u[r];h=t.getProp(p)-(w[j]+u[j])}return{shrinkWrap:f.shrinkWrap,sizeModel:f,initialBegin:y,begin:y,end:h,collapsed:d,horizontal:q.horizontal,ignoreFrameBegin:null,ignoreFrameEnd:null,initialSize:h-y,maxChildSize:0,hasMinMaxConstraints:(c||o)&&f.shrinkWrap,minSize:c,maxSize:o?g:1000000000,bodyPosProp:z.owner.manageHeight?v:q.marginBegin,dockBegin:r,dockEnd:j,posProp:v,sizeProp:p,setSize:q.setSize,shrinkWrapDock:t[q.shrinkWrapDock],sizeModelName:q.sizeModel,dockedPixelsEnd:0}},dockChild:function(d,f,b,h){var j=this,c=d.dockedItems[f.shrinkWrap?b:h],o=c.target,p=o.dock,g=f.sizeProp,m,a;if(o.ignoreParentFrame&&d.isCollapsingOrExpanding){c.clearMarginCache()}if(!c.marginInfo){c.getMarginInfo()}if(p===f.dockBegin){if(f.shrinkWrap){m=j.dockOutwardBegin(d,c,o,f)}else{m=j.dockInwardBegin(d,c,o,f)}}else{if(p===f.dockEnd){if(f.shrinkWrap){m=j.dockOutwardEnd(d,c,o,f)}else{m=j.dockInwardEnd(d,c,o,f)}}else{if(f.shrinkWrapDock){a=c.getProp(g)+c.marginInfo[g];f.maxChildSize=Math.max(f.maxChildSize,a);m=0}else{m=j.dockStretch(d,c,o,f)}}}c.dockedAt[f.posProp]=m},dockInwardBegin:function(f,d,b,h){var m=h.begin,j=h.sizeProp,g=b.ignoreParentFrame,o,c,a;if(g){h.ignoreFrameBegin=d;a=b.dock;o=f.frameBorder[a];m-=o+f.framePadding[a]}if(!b.overlay){c=d.getProp(j)+d.marginInfo[j];h.begin+=c;if(g){h.begin-=o}}return m},dockInwardEnd:function(d,c,b,a){var h=a.sizeProp,j=c.getProp(h)+c.marginInfo[h],g=a.end-j,f;if(!b.overlay){a.end=g}if(b.ignoreParentFrame){a.ignoreFrameEnd=c;f=d.frameBorder[b.dock];g+=f+d.framePadding[b.dock];a.end+=f}return g},dockOutwardBegin:function(f,d,c,b){var h=b.begin,g=b.sizeProp,a;if(b.collapsed){b.ignoreFrameBegin=b.ignoreFrameEnd=d}else{if(c.ignoreParentFrame){b.ignoreFrameBegin=d}}if(!c.overlay){a=d.getProp(g)+d.marginInfo[g];h-=a;b.begin=h}return h},dockOutwardEnd:function(f,d,c,b){var h=b.end,g=b.sizeProp,a;a=d.getProp(g)+d.marginInfo[g];if(b.collapsed){b.ignoreFrameBegin=b.ignoreFrameEnd=d}else{if(c.ignoreParentFrame){b.ignoreFrameEnd=d}}if(!c.overlay){b.end=h+a;b.dockedPixelsEnd+=a}return h},dockStretch:function(s,q,p,t){var r=p.dock,f=t.sizeProp,o=r==="top"||r==="bottom",d=s.frameBorder,a=q.offsets,m=s.framePadding,c=o?"right":"bottom",j=o?"left":"top",g=t.begin+a[j],b,h;if(p.stretch!==false){h=t.end-g-a[c];if(p.ignoreParentFrame){g-=m[j]+d[j];h+=m[f]+d[f]}b=q.marginInfo;h-=b[f];q[t.setSize](h)}return g},finishAxis:function(r,f){if(isNaN(f.maxChildSize)){return false}var d=f.begin,w=f.end-d,h=f.collapsed,s=f.setSize,o=f.dockBegin,C=f.dockEnd,v=r.framePadding,z=r.frameBorder,g=z[o],A=r.framing,t=A&&A[o],b=h?0:v[o],m=f.sizeProp,B=f.ignoreFrameBegin,y=f.ignoreFrameEnd,a=r.bodyContext,p=Math.max(g+b-t,0),c,u,q,j;if(f.shrinkWrap){u=f.initialSize;if(A){q=-d+g+b;c=q-t-p}else{c=-d;q=c+b}if(!h){w+=v[m]}if(B){q-=g;c-=g;B.dockedAt[f.posProp]-=b}else{w+=g}if(h){}else{if(y){y.dockedAt[f.posProp]+=v[C]}else{w+=z[C]}}f.size=w;if(!f.horizontal&&!this.owner.manageHeight){j=false}}else{if(A){q=0;c=d-t-p}else{q=-g;c=d-b-g}u=w}f.delta=q;a[s](u,j);a.setProp(f.bodyPosProp,c);return !isNaN(w)},beforeInvalidateShrinkWrapDock:function(a,c){var b=c.axis.sizeModelName;if(!a[b].constrainedMin){a[b]=Ext.layout.SizeModel.calculated}},afterInvalidateShrinkWrapDock:function(a,c){var d=c.axis,f=c.layout,b;if(a[d.sizeModelName].calculated){b=f.dockStretch(c.ownerContext,a,a.target,d);a.setProp(d.posProp,d.delta+b)}},finishConstraints:function(q,c,v){var m=this,h=m.sizeModels,u=c.shrinkWrap,w=v.shrinkWrap,a=m.owner,o,s,t,g,j,r,b,d,f,p;if(u){r=c.size;b=c.collapsed?0:c.minSize;d=c.maxSize;f=c.maxChildSize;p=Math.max(r,f);if(p>d){j=h.constrainedMax;t=d}else{if(p<b){j=h.constrainedMin;t=b}else{if(r<f){j=h.constrainedDock;a.dockConstrainedWidth=t=f}else{t=r}}}}if(w){r=v.size;b=v.collapsed?0:v.minSize;d=v.maxSize;f=v.maxChildSize;p=Math.max(r,f+r-v.initialSize);if(p>d){g=h.constrainedMax;s=d}else{if(p<b){g=h.constrainedMin;s=b}else{if(r<f){g=h.constrainedDock;a.dockConstrainedHeight=s=f}else{if(!q.collapsedVert&&!a.manageHeight){o=false;q.bodyContext.setProp("margin-bottom",v.dockedPixelsEnd)}s=r}}}}if(j||g){if(j&&g&&j.constrainedMax&&g.constrainedByMin){q.invalidate({widthModel:j});return false}if(!q.widthModel.calculatedFromShrinkWrap&&!q.heightModel.calculatedFromShrinkWrap){q.invalidate({widthModel:j,heightModel:g});return false}}else{m.invalidateAxes(q,c,v)}if(u){q.setWidth(t);if(j){q.widthModel=j}}if(w){q.setHeight(s,o);if(g){q.heightModel=g}}return true},invalidateAxes:function(v,p,d){var f=this.beforeInvalidateShrinkWrapDock,r=this.afterInvalidateShrinkWrapDock,u=p.end-p.begin,o=d.initialSize,s=p.shrinkWrapDock&&p.maxChildSize<=u,j=d.shrinkWrapDock&&d.maxChildSize<=o,g,m,c,t,h,q,a,b;if(s||j){if(j){d.begin=d.initialBegin;d.end=d.begin+d.initialSize}g=v.dockedItems;for(c=0,m=g.length;c<m;++c){t=g[c];q=t.horizontal;a=null;if(s&&q){b=p.sizeProp;h=u;a=p}else{if(j&&!q){b=d.sizeProp;h=o;a=d}}if(a){h-=t.getMarginInfo()[b];if(h!==t.props[b]){t.invalidate({before:f,after:r,axis:a,ownerContext:v,layout:this})}}}}},finishPositions:function(j,f,b){var d=j.dockedItems,h=d.length,a=f.delta,m=b.delta,c,g;for(c=0;c<h;++c){g=d[c];g.setProp("x",a+g.dockedAt.x);g.setProp("y",m+g.dockedAt.y)}},finishedLayout:function(c){var b=this,a=c.target;Ext.layout.component.Component.prototype.finishedLayout.apply(this,arguments);if(!c.animatePolicy){if(c.isCollapsingOrExpanding===1){a.afterCollapse(false)}else{if(c.isCollapsingOrExpanding===2){a.afterExpand(false)}}}},getAnimatePolicy:function(a){var d=this,c,b;if(a.isCollapsingOrExpanding===1){c=d.lastCollapsedState}else{if(a.isCollapsingOrExpanding===2){c=a.lastCollapsedState}}if(c==="left"||c==="right"){b=d.horizontalCollapsePolicy}else{if(c==="top"||c==="bottom"){b=d.verticalCollapsePolicy}}return b},getDockedItems:function(d,b){var m=this,g=(d==="visual"),o=g?Ext.ComponentQuery.query("[rendered]",m.owner.dockedItems.items):m.owner.dockedItems.items,j=o&&o.length&&d!==false,c,q,p,h,f,a;if(b==null){p=j&&!g?o.slice():o}else{p=[];for(h=0,a=o.length;h<a;++h){q=o[h].dock;f=(q==="top"||q==="left");if(b?f:!f){p.push(o[h])}}j=j&&p.length}if(j){c=(d=d||"render")==="render";Ext.Array.sort(p,function(u,t){var r,s;if(c&&((r=m.owner.dockOrder[u.dock])!==(s=m.owner.dockOrder[t.dock]))){if(!(r+s)){return r-s}}r=m.getItemWeight(u,d);s=m.getItemWeight(t,d);if((r!==undefined)&&(s!==undefined)){return r-s}return 0})}return p||[]},getItemWeight:function(c,b){var a=c.weight||this.owner.defaultDockWeights[c.dock];return a[b]||a},getLayoutItems:function(){var g=this,c,a,f,d,b;if(g.owner.collapsed){b=g.owner.getCollapsedDockedItems()}else{c=g.getDockedItems("visual");a=c.length;b=[];for(d=0;d<a;d++){f=c[d];if(!f.hidden){b.push(f)}}}return b},measureContentWidth:function(a){var b=a.bodyContext;return b.el.getWidth()-b.getBorderInfo().width},measureContentHeight:function(a){var b=a.bodyContext;return b.el.getHeight()-b.getBorderInfo().height},redoLayout:function(a){var c=this,b=c.owner;if(a.isCollapsingOrExpanding===1){if(b.reExpander){b.reExpander.el.show()}b.addClsWithUI(b.collapsedCls);a.redo(true)}else{if(a.isCollapsingOrExpanding===2){b.removeClsWithUI(b.collapsedCls);a.bodyContext.redo()}}},renderChildren:function(){var c=this,b=c.getDockedItems(),a=c.getRenderTarget();c.handleItemBorders();c.renderItems(b,a)},renderItems:function(j,h){var w=this,a=w.owner,d={},u=j.length,f=a.body,b=!!a.frameSize,t=a.bodyContainer,g,c,p,s,o,r,v,m,q;if(u){for(r=0;r<u;r++){v=j[r];d[v.id]=v}c=w.getRenderTarget().dom.childNodes;p=c.length;o=0;for(r=0;r<p;++r){s=c[r];if(b){q=s===f.dom||s===t;if(!q&&Ext.fly(s).contains(f)){q=true;a.bodyContainer=s}}else{q=s===f.dom}if(q){g=r;break}if(d[s.id]){++o}}g-=o;for(r=0;r<u;++r){v=j[r];m=g+r;if(v.dock==="right"||v.dock==="bottom"){++m}if(!v.rendered){w.renderItem(v,h,m)}else{if(!w.isValidParent(v,h,m)){w.moveItem(v,h,m)}}}}},undoLayout:function(a){var c=this,b=c.owner;if(a.isCollapsingOrExpanding===1){if(b.reExpander){b.reExpander.el.hide()}b.removeClsWithUI(b.collapsedCls);a.undo(true)}else{if(a.isCollapsingOrExpanding===2){b.addClsWithUI(b.collapsedCls);a.bodyContext.undo()}}},sizePolicy:{nostretch:{setsWidth:0,setsHeight:0},horz:{shrinkWrap:{setsWidth:1,setsHeight:0,readsWidth:1},stretch:{setsWidth:1,setsHeight:0}},vert:{shrinkWrap:{setsWidth:0,setsHeight:1,readsHeight:1},stretch:{setsWidth:0,setsHeight:1}},stretchV:{setsWidth:0,setsHeight:1},autoStretchH:{readsWidth:1,setsWidth:1,setsHeight:0},autoStretchV:{readsHeight:1,setsWidth:0,setsHeight:1}},getItemSizePolicy:function(d,g){var c=this,h=c.sizePolicy,f=c.owner.shrinkWrapDock,b,a;if(d.stretch===false){return h.nostretch}b=d.dock;a=(b==="left"||b==="right");f=f===true?3:(f||0);if(a){h=h.vert;f=f&1}else{h=h.horz;f=f&2}if(f){if(!g){g=c.owner.getSizeModel()}if(g[a?"height":"width"].shrinkWrap){return h.shrinkWrap}}return h.stretch},configureItem:function(a,b){Ext.layout.component.Component.prototype.configureItem.apply(this,arguments);a.addCls(this._itemCls);if(!a.ignoreBorderManagement){a.addClsWithUI(this.getDockCls(a.dock))}},getDockCls:function(a){return"docked-"+a},afterRemove:function(a){var b;Ext.layout.component.Component.prototype.afterRemove.apply(this,arguments);a.removeCls(this._itemCls);if(!a.ignoreBorderManagement){a.removeClsWithUI(this.getDockCls(a.dock))}b=a.el.dom;if(!a.destroying&&b){b.parentNode.removeChild(b)}this.childrenChanged=true},borderCollapseMap:{},getBorderCollapseTable:function(){var f=this,a=f.borderCollapseMap,b=f.owner,c=b.baseCls,g=b.ui,d;a=a[c]||(a[c]={});d=a[g];if(!d){c+="-"+g+"-outer-border-";a[g]=d=[0,c+"l",c+"b",c+"bl",c+"r",c+"rl",c+"rb",c+"rbl",c+"t",c+"tl",c+"tb",c+"tbl",c+"tr",c+"trl",c+"trb",c+"trbl"]}return d}},0,0,0,0,["layout.dock"],0,[Ext.layout.component,"Dock",Ext.layout.component,"AbstractDock"],0));Ext.define("Ext.theme.neptune.layout.component.Dock",{override:"Ext.layout.component.Dock",noBorderClassTable:[0,"x-noborder-l","x-noborder-b","x-noborder-bl","x-noborder-r","x-noborder-rl","x-noborder-rb","x-noborder-rbl","x-noborder-t","x-noborder-tl","x-noborder-tb","x-noborder-tbl","x-noborder-tr","x-noborder-trl","x-noborder-trb","x-noborder-trbl"],edgeMasks:{top:8,right:4,bottom:2,left:1},handleItemBorders:function(){var r=this,a=0,u=8,v=4,h=2,F=1,B=r.owner,z=B.bodyBorder,p=B.border,f=r.collapsed,t=r.edgeMasks,g=r.noBorderClassTable,q=B.dockedItems.generation,m,E,j,d,y,o,D,s,c,w,A,C;if(r.initializedBorders===q){return}A=[];C=[];E=r.getBorderCollapseTable();g=r.getBorderClassTable?r.getBorderClassTable():g;r.initializedBorders=q;r.collapsed=false;j=r.getDockedItems("visual");r.collapsed=f;for(y=0,o=j.length;y<o;y++){D=j[y];if(D.ignoreBorderManagement){continue}s=D.dock;w=d=0;A.length=0;C.length=0;if(s!=="bottom"){if(a&u){m=D.border}else{m=p;if(m!==false){d+=u}}if(m===false){w+=u}}if(s!=="left"){if(a&v){m=D.border}else{m=p;if(m!==false){d+=v}}if(m===false){w+=v}}if(s!=="top"){if(a&h){m=D.border}else{m=p;if(m!==false){d+=h}}if(m===false){w+=h}}if(s!=="right"){if(a&F){m=D.border}else{m=p;if(m!==false){d+=F}}if(m===false){w+=F}}if((c=D.lastBorderMask)!==w){D.lastBorderMask=w;if(c){C[0]=g[c]}if(w){A[0]=g[w]}}if((c=D.lastBorderCollapse)!==d){D.lastBorderCollapse=d;if(c){C[C.length]=E[c]}if(d){A[A.length]=E[d]}}if(C.length){D.removeCls(C)}if(A.length){D.addCls(A)}a|=t[s]}w=d=0;A.length=0;C.length=0;if(a&u){m=z}else{m=p;if(m!==false){d+=u}}if(m===false){w+=u}if(a&v){m=z}else{m=p;if(m!==false){d+=v}}if(m===false){w+=v}if(a&h){m=z}else{m=p;if(m!==false){d+=h}}if(m===false){w+=h}if(a&F){m=z}else{m=p;if(m!==false){d+=F}}if(m===false){w+=F}if((c=r.lastBodyBorderMask)!==w){r.lastBodyBorderMask=w;if(c){C[0]=g[c]}if(w){A[0]=g[w]}}if((c=r.lastBodyBorderCollapse)!==d){r.lastBodyBorderCollapse=d;if(c){C[C.length]=E[c]}if(d){A[A.length]=E[d]}}if(C.length){B.removeBodyCls(C)}if(A.length){B.addBodyCls(A)}},onRemove:function(b){var a=this,d=b.lastBorderMask,c=b.lastBorderCollapse;if(!b.destroyed&&!b.ignoreBorderManagement){if(d){b.lastBorderMask=0;b.removeCls(a.noBorderClassTable[d])}if(c){b.lastBorderCollapse=0;b.removeCls(a.getBorderCollapseTable()[c])}}(arguments.callee.$previous||Ext.layout.component.Component.prototype.onRemove).call(this,b)}});(Ext.cmd.derive("Ext.util.Memento",Ext.Base,(function(){function a(g,m,h,j){g[j?j+h:h]=m[h]}function f(g,j,h){delete g[h]}function b(m,h,j,g){var o=g?g+j:j,p=m[o];if(p||m.hasOwnProperty(o)){c(h,j,p)}}function c(g,h,j){if(Ext.isDefined(j)){g[h]=j}else{delete g[h]}}function d(r,m,o,g,h){if(m){if(Ext.isArray(g)){var j,q=g.length;for(j=0;j<q;j++){r(m,o,g[j],h)}}else{r(m,o,g,h)}}}return{data:null,target:null,constructor:function(h,g){this.data={};if(h){this.target=h;if(g){this.capture(g)}}},capture:function(j,h,g){var m=this;d(a,m.data||(m.data={}),h||m.target,j,g)},remove:function(g){d(f,this.data,null,g)},restore:function(m,j,h,g){d(b,this.data,h||this.target,m,g);if(j!==false){this.remove(m)}},restoreAll:function(o,m){var g=this,p=m||this.target,h=g.data,j;o=o!==false;for(j in h){if(h.hasOwnProperty(j)){c(p,j,h[j]);if(o){delete h[j]}}}}}}()),1,0,0,0,0,0,[Ext.util,"Memento"],0));(Ext.cmd.derive("Ext.container.DockingContainer",Ext.Base,{isDockingContainer:true,defaultDockWeights:{top:{render:1,visual:1},left:{render:3,visual:5},right:{render:5,visual:7},bottom:{render:7,visual:3}},dockOrder:{top:-1,left:-1,right:1,bottom:1},horizontalDocks:0,tabGuard:false,tabGuardTpl:'<div id="{id}-{tabGuardEl}" data-ref="{tabGuardEl}" tabIndex="0" class="x-tab-guard x-tab-guard-{tabGuard}" ></div>',addDocked:function(j,p){var o=this,d=o.rendered,f=0,a=o.dockedItems,g=a.getCount(),h,m,b,c;j=o.prepareItems(j);c=j.length;if(d){Ext.suspendLayouts()}if(p===undefined){p=g}else{p=Math.min(p,g)}for(;f<c;f++){b=j[f];b.dock=b.dock||"top";if(b.dock==="left"||b.dock==="right"){o.horizontalDocks++}h=p+f;a.insert(h,b);m=!!b.instancedCmp;delete b.instancedCmp;b.onAdded(o,h,m);delete b.$initParent;if(o.onDockedAdd!==Ext.emptyFn){o.onDockedAdd(b)}if(o.hasListeners.dockedadd){o.fireEvent("dockedadd",o,b,h)}}if(o.rendered){o.updateLayout();Ext.resumeLayouts(true)}return j},destroyDockedItems:function(){var a=this.dockedItems,b;if(a){while((b=a.first())){this.removeDocked(b,true)}}},doRenderDockedItems:function(c,g,h){var f=g.$comp,d=f.componentLayout,b=f.tabGuard&&f.getTpl("tabGuardTpl"),a,j;if(d.getDockedItems&&!g.$skipDockedItems){if(b&&!h){g.tabGuard="before";f.addChildEl(g.tabGuardEl="tabGuardBeforeEl");b.applyOut(g,c)}a=d.getDockedItems("render",!h);j=a&&d.getItemsRenderTree(a);if(j){Ext.DomHelper.generateMarkup(j,c)}if(b&&h){g.tabGuard="after";f.addChildEl(g.tabGuardEl="tabGuardAfterEl");b.applyOut(g,c)}}},getDockedComponent:function(a){if(Ext.isObject(a)){a=a.getItemId()}return this.dockedItems.get(a)},getDockedItems:function(b,a){var c=this.getComponentLayout().getDockedItems("render",a);if(b&&c.length){c=Ext.ComponentQuery.query(b,c)}return c},getDockingRefItems:function(d,b){var c=d&&"*,* *",a=this.getDockedItems(c,true),f;a.push.apply(a,b);f=this.getDockedItems(c,false);a.push.apply(a,f);return a},initDockingItems:function(){var b=this,a=b.dockedItems;if(!a||!a.isMixedCollection){b.dockedItems=new Ext.util.ItemCollection();if(a){b.addDocked(a)}}},insertDocked:function(b,a){this.addDocked(a,b)},onDockedAdd:Ext.emptyFn,onDockedRemove:Ext.emptyFn,removeDocked:function(b,d){var a=this,f,c;d=d===true||(d!==false&&a.autoDestroy);if(!a.dockedItems.contains(b)){return b}if(b.dock==="left"||b.dock==="right"){a.horizontalDocks--}f=a.componentLayout;c=f&&a.rendered;if(c){f.onRemove(b)}a.dockedItems.remove(b);b.onRemoved(b.destroying||d);a.onDockedRemove(b);if(d){b.destroy()}else{if(c){f.afterRemove(b)}}if(a.hasListeners.dockedremove){a.fireEvent("dockedremove",a,b)}if(!a.destroying){a.updateLayout()}return b},moveDocked:function(a,b){var c=this;if(c.rendered){Ext.suspendLayouts()}c.removeDocked(a,false);a.dock=b;c.addDocked(a);if(c.rendered){if(a.frame){Ext.getDetachedBody().appendChild(a.el);a.updateFrame()}Ext.resumeLayouts(true)}},setupDockingRenderTpl:function(a){a.renderDockedItems=this.doRenderDockedItems}},0,0,0,0,0,0,[Ext.container,"DockingContainer"],0));(Ext.cmd.derive("Ext.panel.Panel",Ext.container.Container,{alternateClassName:"Ext.Panel",childEls:["body"],renderTpl:['<tpl if="headingText">','<div id="{id}-headingEl" data-ref="headingEl" role="heading"',' class="',"x-",'hidden-clip" style="height:0">',"{headingText}","</div>","</tpl>","{% this.renderDockedItems(out,values,0); %}",'<div id="{id}-body" data-ref="body" class="{baseCls}-body<tpl if="bodyCls"> {bodyCls}</tpl>',' {baseCls}-body-{ui}<tpl if="uiCls">','<tpl for="uiCls"> {parent.baseCls}-body-{parent.ui}-{.}</tpl>','</tpl>{childElCls}"','<tpl if="bodyAriaAttributes">','<tpl foreach="bodyAriaAttributes"> {$}="{.}"</tpl>',"<tpl else>",' role="presentation"',"</tpl>",'<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{%this.renderContainer(out,values);%}","</div>","{% this.renderDockedItems(out,values,1); %}"],headerPosition:"top",iconAlign:"left",titleAlign:"left",titleRotation:"default",beforeRenderConfig:{glyph:null,headerPosition:null,icon:null,iconAlign:null,iconCls:null,title:null,titleAlign:null,titleRotation:null},animCollapse:Ext.enableFx,border:true,closable:false,closeAction:"destroy",closeToolText:"Close panel",collapsed:false,collapsedCls:"collapsed",collapseFirst:true,collapsible:undefined,collapseToolText:"Collapse panel",expandToolText:"Expand panel",constrain:false,constrainHeader:false,dockedItems:null,tbar:null,bbar:null,fbar:null,lbar:null,rbar:null,buttons:null,floatable:true,frame:false,frameHeader:true,hideCollapseTool:false,manageHeight:true,maskElement:"el",minButtonWidth:75,preventHeader:false,shrinkWrapDock:false,titleCollapse:undefined,baseCls:"x-panel",bodyPosProps:{x:"x",y:"y"},componentLayout:"dock",contentPaddingProperty:"bodyPadding",emptyArray:[],isPanel:true,defaultBindProperty:"title",addBodyCls:function(c){var a=this,b=a.rendered?a.body:a.getProtoBody();b.addCls(c);return a},addTool:function(f){if(!Ext.isArray(f)){f=[f]}var d=this,h=d.header,a=f.length,g=d.tools,c,b;if(!h||!h.isHeader){h=null;if(!g){d.tools=g=[]}}for(c=0;c<a;c++){b=f[c];b.toolOwner=d;if(h){h.addTool(b)}else{g.push(b)}}d.updateHeader()},addTools:Ext.emptyFn,setCollapsible:function(a){var d=this,b=d.collapsible,c=d.collapseTool;d.collapsible=a;if(a&&!b){d.updateCollapseTool();c=d.collapseTool;if(c){c.show()}}else{if(!a&&b){if(c){c.hide()}}}},addUIClsToElement:function(c){var a=this,b=Ext.container.Container.prototype.addUIClsToElement.apply(this,arguments);a.addBodyCls(["x-"+c,a.baseCls+"-body-"+c,a.baseCls+"-body-"+a.ui+"-"+c]);return b},afterCollapse:function(a){var d=this,c=d.ariaEl.dom,b=d.ownerLayout;d.isCollapsingOrExpanding=0;d.updateCollapseTool();if(a){d.removeCls("x-animating-size")}if(b){b.afterCollapse(d,a)}if(c){c.setAttribute("aria-expanded",false)}if(d.isAccordionPanel){d.body.dom.setAttribute("aria-hidden",true)}d.setHiddenDocked();d.fireEvent("collapse",d)},afterExpand:function(a){var d=this,c=d.ariaEl.dom,b=d.ownerLayout;d.isCollapsingOrExpanding=0;d.updateCollapseTool();if(a){d.removeCls("x-animating-size")}if(b){b.afterExpand(d,a)}if(c){c.setAttribute("aria-expanded",true)}if(d.isAccordionPanel){d.body.dom.setAttribute("aria-hidden",false)}d.fireEvent("expand",d);d.fireHierarchyEvent("expand")},beforeDestroy:function(){var a=this;Ext.destroy(a.placeholder,a.ghostPanel,a.dd,a.accordionKeyNav,a.defaultButtonKeyNav);a.destroyDockedItems();Ext.container.Container.prototype.beforeDestroy.call(this)},destroy:function(){Ext.container.Container.prototype.destroy.call(this);this.dockedItems=this.bodyContainer=null},beforeRender:function(){var b=this,a;b.getProtoBody();Ext.container.Container.prototype.beforeRender.call(this);b.initTools();if(!(b.preventHeader||(b.header===false))||b.isViewportBorderChild){b.updateHeader()}b.afterHeaderInit=true;if(b.collapsed){if(b.isPlaceHolderCollapse()){if(!b.hidden){b.setHiddenState(true);b.preventCollapseFire=true;b.placeholderCollapse();delete b.preventCollapseFire;a=b.collapsed;b.collapsed=false}}else{b.beginCollapse();b.addClsWithUI(b.collapsedCls)}}if(a){b.collapsed=a}},getMemento:function(a){var b=this;if(a&&typeof a==="string"){a+="Memento";return b[a]||(b[a]=new Ext.util.Memento(b))}},beginCollapse:function(){var f=this,c=f.lastBox,h=f.rendered,b=f.getMemento("collapse"),d=f.getSizeModel(),g=f.header,a;b.capture(["height","minHeight","width","minWidth"]);if(c){b.capture(f.restoreDimension(),c,"last.")}if(f.collapsedVertical()){if(d.width.shrinkWrap){f.width=h?f.getWidth():f.width||f.minWidth||100}delete f.height;f.minHeight=0}else{if(f.collapsedHorizontal()){if(d.height.shrinkWrap){f.height=h?f.getHeight():f.height||f.minHeight||100}delete f.width;f.minWidth=0}}if(f.ownerCt){f.ownerCt.getLayout().beginCollapse(f)}if(!f.isPlaceHolderCollapse()&&g!==false){if(g===(a=f.getReExpander())){g.collapseImmune=true;g.getInherited().collapseImmune=true;g.addClsWithUI(f.getHeaderCollapsedClasses(g));if(g.rendered){g.updateFrame()}}else{if(a.el){a.el.show();a.hidden=false}}}if(f.resizer){f.resizer.disable()}},beginDrag:function(){if(this.floatingDescendants){this.floatingDescendants.hide()}},beginExpand:function(){var g=this,f=g.lastBox,d=g.getMemento("collapse"),b=g.restoreDimension(),a=g.header,c;if(d){d.restore(["minHeight","minWidth",b]);if(f){d.restore(b,true,f,"last.")}}if(g.ownerCt){g.ownerCt.getLayout().beginExpand(g)}if(!g.isPlaceHolderCollapse()&&a!==false){if(a===(c=g.getReExpander())){delete a.collapseImmune;delete a.getInherited().collapseImmune;a.removeClsWithUI(g.getHeaderCollapsedClasses(a));if(a.rendered){a.expanding=true;a.updateFrame();delete a.expanding}}else{c.hidden=true;c.el.hide()}}if(g.resizer){g.resizer.enable()}},bridgeToolbars:function(){var b=this,a=[],g=b.minButtonWidth,d,c;function f(m,j,h){if(Ext.isArray(m)){m={xtype:"toolbar",items:m}}else{if(!m.xtype){m.xtype="toolbar"}}m.dock=j;if(h){m.layout=Ext.applyIf(m.layout||{},{pack:{left:"start",center:"center"}[b.buttonAlign]||"end"})}return m}if(b.tbar){a.push(f(b.tbar,"top"));b.tbar=null}if(b.bbar){a.push(f(b.bbar,"bottom"));b.bbar=null}if(b.buttons){b.fbar=b.buttons;b.buttons=null}if(b.fbar){d=f(b.fbar,"bottom",true);d.ui="footer";if(g){c=d.defaults;d.defaults=function(j){var m=c||{},h=!j.xtype||j.isButton,o;if(!h){o=Ext.ClassManager.getByAlias("widget."+j.xtype);if(o){h=o.prototype.isButton}}if(h&&!("minWidth" in m)){m=Ext.apply({minWidth:g},m)}return m}}a.push(d);b.fbar=null}if(b.lbar){a.push(f(b.lbar,"left"));b.lbar=null}if(b.rbar){a.push(f(b.rbar,"right"));b.rbar=null}if(b.dockedItems){if(b.dockedItems.isMixedCollection){b.addDocked(a)}else{if(!Ext.isArray(b.dockedItems)){b.dockedItems=[b.dockedItems]}b.dockedItems=b.dockedItems.concat(a)}}else{b.dockedItems=a}},close:function(){if(this.fireEvent("beforeclose",this)!==false){this.doClose()}},collapse:function(f,a){var d=this,g=f||d.collapseDirection,b=d.ownerCt,c=d.ownerLayout,h=d.rendered;if(d.isCollapsingOrExpanding){return d}if(arguments.length<2){a=d.animCollapse}if(d.collapsed||d.fireEvent("beforecollapse",d,f,a)===false){return d}if(c&&c.onBeforeComponentCollapse){if(c.onBeforeComponentCollapse(d)===false){return d}}if(h&&b&&d.isPlaceHolderCollapse()){return d.placeholderCollapse(f,a)}d.collapsed=g;if(h){d.beginCollapse()}d.getInherited().collapsed=true;d.fireHierarchyEvent("collapse");if(h){d.doCollapseExpand(1,a)}return d},collapsedHorizontal:function(){var a=this.getCollapsed();return a==="left"||a==="right"},collapsedVertical:function(){var a=this.getCollapsed();return a==="top"||a==="bottom"},convertCollapseDir:function(a){return a.substr(0,1)},createGhost:function(c){var d=this,b=d.header,a=d.frame&&!d.alwaysFramed;return{xtype:"panel",hidden:false,header:b?{titleAlign:b.getTitleAlign()}:null,ui:a?d.ui.replace(/-framed$/,""):d.ui,id:d.id+"-ghost",renderTo:Ext.getBody(),resizable:false,draggable:false,closable:false,focusable:false,floating:true,shadow:false,frame:a,shim:d.shim,alwaysFramed:d.alwaysFramed,overlapHeader:d.overlapHeader,headerPosition:d.getHeaderPosition(),titleRotation:d.getTitleRotation(),baseCls:d.baseCls,getRefOwner:function(){return d.getRefOwner()},cls:d.baseCls+"-ghost "+(c||"")}},createReExpander:function(f,d){var c=this,h=f==="left",b=f==="right",g=h||b,a=c.ownerCt,j=Ext.apply({hideMode:"offsets",title:c.getTitle(),titleAlign:c.getTitleAlign(),vertical:g,textCls:c.headerTextCls,icon:c.getIcon(),iconCls:c.getIconCls(),iconAlign:c.getIconAlign(),glyph:c.getGlyph(),baseCls:c.self.prototype.baseCls+"-header",ui:c.ui,frame:c.frame&&c.frameHeader,ignoreParentFrame:c.frame||c.overlapHeader,ignoreBorderManagement:c.frame||c.ignoreHeaderBorderManagement,indicateDrag:c.draggable,collapseImmune:true,ariaRole:c.ariaRole,preventRefocus:true,ownerCt:(a&&c.collapseMode==="placeholder")?a:c,ownerLayout:c.componentLayout,forceOrientation:true,margin:c.margin},d);if(c.collapseMode==="mini"){if(g){j.width=1}else{j.height=1}}if(!c.hideCollapseTool){if(h||(b&&c.isPlaceHolderCollapse())){j.titlePosition=1}j.tools=[{xtype:"tool",type:"expand-"+c.getOppositeDirection(f),isDefaultExpandTool:true,uiCls:["top"],handler:c.toggleCollapse,scope:c,tooltip:c.expandToolText}]}j=new Ext.panel.Header(j);j.addClsWithUI(c.getHeaderCollapsedClasses(j));j.expandTool=j.down("tool[isDefaultExpandTool=true]");return j},doClose:function(){this.fireEvent("close",this);this[this.closeAction]()},doCollapseExpand:function(c,d){var a=this,f=a.animCollapse,b=a.ownerLayout;a.animCollapse=d;a.isCollapsingOrExpanding=c;if(d){a.addCls("x-animating-size")}if(b&&!d){b.onContentChange(a)}else{a.updateLayout({isRoot:true})}a.animCollapse=f;return a},endDrag:function(){if(this.floatingDescendants){this.floatingDescendants.show()}},expand:function(c){var a=this,d=a.ownerLayout,b=a.rendered;if(a.isCollapsingOrExpanding){return a}if(!arguments.length){c=a.animCollapse}if(!a.collapsed&&!a.floatedFromCollapse){return a}if(a.fireEvent("beforeexpand",a,c)===false){return a}if(d&&d.onBeforeComponentExpand){if(d.onBeforeComponentExpand(a)===false){return a}}delete a.getInherited().collapsed;if(b&&a.isPlaceHolderCollapse()){return a.placeholderExpand(c)}a.restoreHiddenDocked();if(b){a.beginExpand()}a.collapsed=false;if(a.rendered){a.doCollapseExpand(2,c)}return a},findReExpander:function(g){var f=this,h=Ext.Component,d=f.dockedItems.items,a=d.length,j,b;if(f.collapseMode==="mini"){return}switch(g){case h.DIRECTION_TOP:case h.DIRECTION_BOTTOM:for(b=0;b<a;b++){j=d[b];if(!j.hidden){if(j.isHeader&&(!j.dock||j.dock==="top"||j.dock==="bottom")){return j}}}break;case h.DIRECTION_LEFT:case h.DIRECTION_RIGHT:for(b=0;b<a;b++){j=d[b];if(!j.hidden){if(j.isHeader&&(j.dock==="left"||j.dock==="right")){return j}}}break;default:throw ("Panel#findReExpander must be passed a valid collapseDirection")}},floatCollapsedPanel:function(){var b=this,c=b.placeholder,f=c.getSize(),a=Ext.panel.Panel.floatCls,j=b.collapsed,d=b.ownerCt||b,g,h,m;if(b.isSliding){return}if(b.el.hasCls(a)){b.slideOutFloatedPanel();return}b.isSliding=true;c.el.hide();c.hidden=true;b.el.show();b.setHiddenState(false);b.collapsed=false;d.updateLayout();c.el.show();c.hidden=false;b.el.hide();b.setHiddenState(true);b.collapsed=j;d.updateLayout();m=b.getBox(false,true);b.slideOutTask=b.slideOutTask||new Ext.util.DelayedTask(b.slideOutFloatedPanel,b);if(Ext.supports.Touch){Ext.on("mousedown",h=function(o){if(!o.within(b.el)){Ext.un("mousedown",h);b.slideOutFloatedPanel()}})}if(!b.placeholderListener){b.placeholderListener=c.on({resize:b.onPlaceholderResize,scope:b,destroyable:true})}c.el.on("mouseleave",b.onMouseLeaveFloated,b);b.el.on("mouseleave",b.onMouseLeaveFloated,b);c.el.on("mouseenter",b.onMouseEnterFloated,b);b.el.on("mouseenter",b.onMouseEnterFloated,b);b.el.addCls(a);b.floated=j;if(b.collapseTool){b.collapseTool.el.hide()}switch(b.collapsed){case"top":b.width=f.width;b.setLocalXY(m.x,m.y+f.height);break;case"right":b.height=f.height;b.setLocalXY(m.x-f.width,m.y);break;case"bottom":b.width=f.width;b.setLocalXY(m.x,m.y-f.height);break;case"left":b.height=f.height;b.setLocalXY(m.x+f.width,m.y);break}g=b.convertCollapseDir(b.collapsed);b.floatedFromCollapse=b.collapsed;b.collapsed=false;b.setHiddenState(false);b.el.slideIn(g,{preserveScroll:true,duration:Ext.Number.from(b.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){b.isSliding=false;b.fireEvent("float",b)}}})},onPlaceholderResize:function(g,d,b){var c=this,f=c.getBox(false,true),a=g.getBox(false,true);switch(c.floated){case"top":c.width=d;c.setLocalY(a.y+a.height);break;case"right":c.height=b;c.setLocalX(a.x-f.width);break;case"bottom":c.width=d;c.setLocalY(a.y-f.height);break;case"left":c.height=b;c.setLocalX(a.x+a.width);break}c.updateLayout({isRoot:true})},getAnimationProps:function(){var c=this,a=c.animCollapse,b;b=Ext.container.Container.prototype.getAnimationProps.call(this);if(typeof a==="number"){b.duration=a}return b},getCollapsed:function(){var a=this;if(a.collapsed===true){return a.collapseDirection}return a.collapsed},getCollapsedDockedItems:function(){var a=this;return a.header===false||a.collapseMode==="placeholder"?a.emptyArray:[a.getReExpander()]},getComponent:function(a){var b=Ext.container.Container.prototype.getComponent.apply(this,arguments);if(b===undefined&&!Ext.isNumber(a)){b=this.getDockedComponent(a)}return b},getHeader:function(){return this.header},getHeaderCollapsedClasses:function(b){var d=this,a=d.collapsedCls,c;c=[a,a+"-"+b.getDockName()];if(d.border&&(!d.frame||(d.frame&&Ext.supports.CSS3BorderRadius))){c.push(a+"-border-"+b.getDockName())}return c},getKeyMap:function(){return this.keyMap||(this.keyMap=new Ext.util.KeyMap(Ext.apply({target:this.el},this.keys)))},getOppositeDirection:function(a){var b=Ext.Component;switch(a){case b.DIRECTION_TOP:return b.DIRECTION_BOTTOM;case b.DIRECTION_RIGHT:return b.DIRECTION_LEFT;case b.DIRECTION_BOTTOM:return b.DIRECTION_TOP;case b.DIRECTION_LEFT:return b.DIRECTION_RIGHT}},getPlaceholder:function(f){var d=this,h=f||d.collapseDirection,c=null,g=d.placeholder,b=d.floatable,a=d.titleCollapse;if(!g){if(b||(d.collapsible&&a)){c={click:{fn:(!a&&b)?d.floatCollapsedPanel:d.toggleCollapse,element:"el",scope:d}}}d.placeholder=g=Ext.widget(d.createReExpander(h,{id:d.id+"-placeholder",listeners:c}))}if(!g.placeholderFor){if(!g.isComponent){d.placeholder=g=d.lookupComponent(g)}Ext.applyIf(g,{margin:d.margin,placeholderFor:d,synthetic:true});g.addCls(["x-region-collapsed-placeholder","x-region-collapsed-"+h+"-placeholder",d.collapsedCls])}return g},getProtoBody:function(){var b=this,a=b.protoBody;if(!a){b.protoBody=a=new Ext.util.ProtoElement({cls:b.bodyCls,style:b.bodyStyle,clsProp:"bodyCls",styleProp:"bodyStyle",styleIsText:true})}return a},getReExpander:function(a){var d=this,b=a||d.collapseDirection,c=d.reExpander||d.findReExpander(b);d.expandDirection=d.getOppositeDirection(b);if(!c){d.reExpander=c=d.createReExpander(b,{dock:b,cls:"x-docked "+d.baseCls+"-"+d.ui+"-collapsed",isCollapsedExpander:true});d.dockedItems.insert(0,c)}return c},getRefItems:function(a){var b=Ext.container.Container.prototype.getRefItems.apply(this,arguments);return this.getDockingRefItems(a,b)},getState:function(){var c=this,f=Ext.container.Container.prototype.getState.call(this)||{},b=c.collapsed,d=c.floated,a;if(d){c.collapsed=d}f=c.addPropertyToState(f,"collapsed");if(d){c.collapsed=b}if(c.getCollapsed()){a=c.getMemento("collapse").data;f=c.addPropertyToState(f,"collapsed",a);if(c.collapsedVertical()){delete f.height;if(a){f=c.addPropertyToState(f,"height",a.height)}}else{delete f.width;if(a){f=c.addPropertyToState(f,"width",a.width)}}}return f},applyState:function(a){var d=this,c={},b;if(a){b=a.collapsed;if(b){c=d.getMemento("collapse");Ext.Object.merge(c.data,b);a.collapsed=true}Ext.container.Container.prototype.applyState.apply(this,arguments)}},ghost:function(b){var m=this,c=m.ghostPanel,g=m.getBox(),f=m.header,p,h,o,a,j,d;if(!c){m.ghostPanel=c=Ext.widget(m.createGhost(b));c.el.dom.removeAttribute("tabIndex")}else{c.el.show()}c.setHiddenState(false);c.floatParent=m.floatParent;c.toFront();if(f&&!m.preventHeader){p=c.header;p.suspendLayouts();h=p.query("tool");for(d=h.length;d--;){p.remove(h[d])}p.setTitlePosition(0);c.addTool(m.ghostTools());c.setTitle(m.getTitle());p.setTitlePosition(f.titlePosition);a=m.getIconCls();if(a){c.setIconCls(a)}else{o=m.getIcon();if(o){c.setIcon(o)}else{j=m.getGlyph();if(j){c.setGlyph(j)}}}p.addCls("x-header-ghost");p.resumeLayouts()}c.setPagePosition(g.x,g.y);c.setSize(g.width,g.height);m.el.hide();return c},ghostTools:function(){var g=[],a=this.header,f=a?a.query("tool[hidden=false]"):[],d,b,c;if(f.length){d=0;b=f.length;for(;d<b;d++){c=f[d];g.push({type:c.type,tooltip:c.tooltip})}}else{g=[{type:"placeholder"}]}return g},initBodyBorder:function(){var a=this;if(a.frame&&a.bodyBorder){if(!Ext.isNumber(a.bodyBorder)){a.bodyBorder=1}a.getProtoBody().setStyle("border-width",this.unitizeBox(a.bodyBorder))}},initBodyStyles:function(){var b=this,a=b.getProtoBody();if(b.bodyPadding!==undefined){if(b.layout.managePadding){a.setStyle("padding",0)}else{a.setStyle("padding",this.unitizeBox((b.bodyPadding===true)?5:b.bodyPadding))}}b.initBodyBorder()},initBorderProps:function(){var a=this;if(a.frame&&a.border&&a.bodyBorder===undefined){a.bodyBorder=false}if(a.frame&&a.border&&(a.bodyBorder===false||a.bodyBorder===0)){a.manageBodyBorders=true}},initComponent:function(){var a=this;if(a.collapsible){a.addStateEvents(["expand","collapse"])}if(a.unstyled){a.setUI("plain")}if(a.frame){a.setUI(a.ui+"-framed")}a.bridgeToolbars();a.initBorderProps();Ext.container.Container.prototype.initComponent.call(this);a.collapseDirection=a.collapseDirection||a.getHeaderPosition()||Ext.Component.DIRECTION_TOP;a.hiddenOnCollapse=new Ext.dom.CompositeElement()},initItems:function(){Ext.container.Container.prototype.initItems.call(this);this.initDockingItems()},initRenderData:function(){var a=this,b=Ext.container.Container.prototype.initRenderData.call(this);a.initBodyStyles();a.protoBody.writeTo(b);delete a.protoBody;if(a.headingText){b.headingText=a.headingText;a.addChildEl("headingEl")}if(a.bodyAriaRole){b.bodyAriaAttributes={role:a.bodyAriaRole};if(!a.ariaStaticRoles[a.bodyAriaRole]&&a.bodyAriaRenderAttributes){Ext.apply(b.bodyAriaAttributes,a.bodyAriaRenderAttributes)}}return b},calculateConstrainedPosition:function(f,a,d,j){var g=this,h=g.header,c,b;if(g.constrainHeader){c=h.lastBox;if(j){if(!h.vertical){j=[j[0],c?c.height:j[1]]}else{j=[c?c.width:j[0],j[1]]}}else{if(c){j=[c.width,c.height]}}b=g.floatParent;f=f||g.constrainTo||(b?b.getTargetEl():null)||g.container||g.el.parent()}return Ext.container.Container.prototype.calculateConstrainedPosition.call(this,f,a,d,j)},initTools:function(){var f=this,b=f.tools,d,a,c;f.tools=[];for(d=b&&b.length;d;){--d;f.tools[d]=c=b[d];c.toolOwner=f}if(f.collapsible&&!(f.hideCollapseTool||f.header===false||f.preventHeader)){f.updateCollapseTool();if(f.collapseFirst){f.tools.unshift(f.collapseTool)}}f.addTools();if(f.pinnable){f.initPinnable()}if(f.closable){f.addClsWithUI("closable");a={xtype:"tool",type:"close",scope:f,handler:f.close,tooltip:f.closeToolText};if(f.isAccordionPanel){a.focusable=false;a.ariaRole="presentation"}f.addTool(a)}if(f.collapseTool&&!f.collapseFirst){f.addTool(f.collapseTool)}},isLayoutRoot:function(){if(this.floatedFromCollapse){return true}return Ext.container.Container.prototype.isLayoutRoot.call(this)},isPlaceHolderCollapse:function(){return this.collapseMode==="placeholder"},isVisible:function(a){var b=this;if(b.collapsed&&b.placeholder){return b.placeholder.isVisible(a)}return Ext.container.Container.prototype.isVisible.apply(this,arguments)},onBoxReady:function(){var a=this,b;Ext.container.Container.prototype.onBoxReady.apply(this,arguments);if(a.collapsed){a.setHiddenDocked()}if(a.isAccordionPanel){a.ariaEl=a.header.titleCmp.el;a.ariaEl.dom.setAttribute("aria-expanded",!a.collapsed);a.body.dom.setAttribute("aria-labelledby",a.header.titleCmp.id);a.body.dom.setAttribute("aria-hidden",!!a.collapsed);a.accordionKeyNav=new Ext.util.KeyNav({target:a.header.titleCmp.el,scope:a,left:a.navigateAccordion,right:a.navigateAccordion,left:a.navigateAccordion,up:a.navigateAccordion,down:a.navigateAccordion,home:a.navigateAccordion,end:a.navigateAccordion,space:a.toggleCollapse,enter:a.toggleCollapse,del:{alt:true,fn:a.maybeClose}})}if(a.defaultButton){b=a.defaultButtonTarget?a[a.defaultButtonTarget]:a.body;a.defaultButtonKeyNav=new Ext.util.KeyNav({target:b,scope:a,defaultEventAction:"stopEvent",enter:a.fireDefaultButton})}},onHide:function(b,d,f){var a=this,c=a.dd;if(a.floatedFromCollapse){a.slideOutFloatedPanel(true)}if(a.draggable&&c){c.endDrag()}if(a.collapsed&&a.placeholder){if(a.splitter){Ext.suspendLayouts();a.splitter.hide();Ext.resumeLayouts()}a.placeholder.hide()}else{Ext.container.Container.prototype.onHide.call(this,b,d,f)}},onMouseEnterFloated:function(a){this.slideOutTask.cancel()},onMouseLeaveFloated:function(a){this.slideOutTask.delay(500)},onRemoved:function(b){var a=this;if(a.placeholder&&!b){a.ownerCt.remove(a.placeholder,false)}Ext.container.Container.prototype.onRemoved.apply(this,arguments)},onShow:function(){var a=this;if(a.collapsed&&a.isPlaceHolderCollapse()){if(a.splitter){Ext.suspendLayouts();a.splitter.show();Ext.resumeLayouts()}a.setHiddenState(true);a.placeholderCollapse()}else{Ext.container.Container.prototype.onShow.apply(this,arguments)}},placeholderCollapse:function(a,f){var m=this,g=m.ownerCt,d=a||m.collapseDirection,j=Ext.panel.Panel.floatCls,h=m.collapseTool,b=m.getPlaceholder(d),c;m.isCollapsingOrExpanding=1;m.setHiddenState(true);m.collapsed=d;if(b.rendered){if(b.el.dom.parentNode!==m.el.dom.parentNode){m.el.dom.parentNode.insertBefore(b.el.dom,m.el.dom)}b.hidden=false;b.setHiddenState(false);b.el.show();g.updateLayout()}else{g.insert(g.items.indexOf(m),b)}if(m.rendered){if(h&&Ext.ComponentManager.getActiveComponent()===h){m.focusPlaceholderExpandTool=true}m.el.setVisibilityMode(m.placeholderCollapseHideMode);if(f){m.el.addCls(j);b.el.hide();c=m.convertCollapseDir(d);m.el.slideOut(c,{preserveScroll:true,duration:Ext.Number.from(f,Ext.fx.Anim.prototype.duration),listeners:{scope:m,afteranimate:function(){var o=this;o.el.removeCls(j);o.placeholder.el.show().setStyle("display","none").slideIn(c,{easing:"linear",duration:100,listeners:{afteranimate:o.doPlaceholderCollapse,scope:o}})}}})}else{m.el.hide();m.doPlaceholderCollapse()}}else{m.isCollapsingOrExpanding=0;if(!m.preventCollapseFire){m.fireEvent("collapse",m)}}return m},doPlaceholderCollapse:function(){var b=this,c=b.placeholder,a=c.expandTool;if(b.focusPlaceholderExpandTool&&a){a.focus()}else{c.focus()}b.focusPlaceholderExpandTool=false;c.setHiddenState(false);c.ariaEl.dom.setAttribute("aria-hidden",false);c.ariaEl.dom.setAttribute("aria-expanded",false);b.ariaEl.dom.setAttribute("aria-hidden",true);b.ariaEl.dom.setAttribute("aria-expanded",false);b.isCollapsingOrExpanding=0;b.fireEvent("collapse",b)},placeholderExpand:function(b){var d=this,g=d.collapsed,h=d.placeholder.expandTool,c=Ext.panel.Panel.floatCls,a=d.ownerLayout?d.ownerLayout.centerRegion:null,f,j;if(Ext.Component.layoutSuspendCount){b=false}if(d.floatedFromCollapse){j=d.getPosition(true);d.slideOutFloatedPanelBegin();d.slideOutFloatedPanelEnd();d.floated=false}if(h&&Ext.ComponentManager.getActiveComponent()===h){d.focusHeaderCollapseTool=true;h._ariaRole=h.ariaEl.dom.getAttribute("role");h._ariaLabel=h.ariaEl.dom.getAttribute("aria-label");h.ariaEl.dom.setAttribute("role","presentation");h.ariaEl.dom.removeAttribute("aria-label")}if(b){Ext.suspendLayouts();d.placeholder.hide();d.el.show();d.collapsed=false;d.setHiddenState(false);if(a&&!j){a.hidden=true}Ext.resumeLayouts(true);a.hidden=false;d.el.addCls(c);d.isCollapsingOrExpanding=2;if(j){f=d.getXY();d.setLocalXY(j[0],j[1]);d.setXY([f[0],f[1]],{duration:Ext.Number.from(b,Ext.fx.Anim.prototype.duration),listeners:{scope:d,afteranimate:function(){var m=this;m.el.removeCls(c);m.isCollapsingOrExpanding=0;m.fireEvent("expand",m)}}})}else{d.el.hide();d.placeholder.el.show();d.placeholder.hidden=false;d.setHiddenState(false);d.el.slideIn(d.convertCollapseDir(g),{preserveScroll:true,duration:Ext.Number.from(b,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:d.doPlaceholderExpand,scope:d}})}}else{d.floated=d.collapsed=false;d.doPlaceholderExpand(true)}return d},doPlaceholderExpand:function(d){var f=this,a=f.placeholder,c=f.collapseTool,b=a.expandTool;if(d){Ext.suspendLayouts();f.show()}f.el.removeCls(Ext.panel.Panel.floatCls);a.hide();if(d){Ext.resumeLayouts(true)}else{f.updateLayout()}if(f.focusHeaderCollapseTool&&c){c.focus()}f.focusHeaderCollapseTool=false;a.ariaEl.dom.setAttribute("aria-expanded",true);f.ariaEl.dom.setAttribute("aria-expanded",true);if(b&&b._ariaRole){b.ariaEl.dom.setAttribute("role",b._ariaRole);b.ariaEl.dom.setAttribute("aria-label",b._ariaLabel);b._ariaRole=b._ariaLabel=null}f.isCollapsingOrExpanding=0;f.fireEvent("expand",f)},remove:function(c,b){var a=this.dockedItems;if(a&&a.contains(c)){this.removeDocked(c,b)}else{Ext.container.Container.prototype.remove.call(this,c,b)}return c},removeBodyCls:function(c){var a=this,b=a.rendered?a.body:a.getProtoBody();b.removeCls(c);return a},removeUIClsFromElement:function(c){var a=this,b=Ext.container.Container.prototype.removeUIClsFromElement.apply(this,arguments);a.removeBodyCls(["x-"+c,a.baseCls+"-body-"+c,a.baseCls+"-body-"+a.ui+"-"+c]);return b},restoreDimension:function(){var a=this.collapseDirection;return(a==="top"||a==="bottom")?"height":"width"},restoreHiddenDocked:function(){this.setDockedItemsVisibility(this.hiddenOnCollapse,true)},setBodyStyle:function(d,b){var a=this,c=a.rendered?a.body:a.getProtoBody();if(Ext.isFunction(d)){d=d()}if(arguments.length===1){if(Ext.isString(d)){d=Ext.Element.parseStyles(d)}c.setStyle(d)}else{c.setStyle(d,b)}return a},setBorder:function(c,a){if(a){return}var d=this,b=d.header;if(!c){c=0}else{if(c===true){c="1px"}else{c=d.unitizeBox(c)}}if(b){if(b.isHeader){b.setBorder(c)}else{b.border=c}}if(d.rendered&&d.bodyBorder!==false){d.body.setStyle("border-width",c)}d.updateLayout();d.border=c},setCollapsed:function(a){this[a?"collapse":"expand"]()},setDockedItemsVisibility:function(f,b){var h=this,c=h.getDockedItems(),j=c.length,d=0,g,a;if(h.header!==false){a=h.getReExpander()}for(;d<j;d++){g=c[d];if(g&&g!==a&&g.el){f.add(g.el)}}f.setStyle("visibility",b?"":"hidden");f.clear()},setGlyph:function(f){var d=this,c=d.glyph,b=d.header,a=d.placeholder;if(f!==c){d.glyph=f;if(b){if(b.isHeader){b.setGlyph(f)}else{b.glyph=f}}else{if(d.rendered||d.afterHeaderInit){d.updateHeader()}}if(a&&a.setGlyph){a.setGlyph(f)}d.fireEvent("glyphchange",d,f,c)}},setIcon:function(c){var d=this,f=d.icon,b=d.header,a=d.placeholder;if(c!==f){d.icon=c;if(b){if(b.isHeader){b.setIcon(c)}else{b.icon=c}}else{if(d.rendered||d.afterHeaderInit){d.updateHeader()}}if(a&&a.setIcon){a.setIcon(c)}d.fireEvent("iconchange",d,c,f)}},setIconCls:function(d){var f=this,c=f.iconCls,b=f.header,a=f.placeholder;if(d!==c){f.iconCls=d;if(b){if(b.isHeader){b.setIconCls(d)}else{b.iconCls=d}}else{if(f.rendered||f.afterHeaderInit){f.updateHeader()}}if(a&&a.setIconCls){a.setIconCls(d)}f.fireEvent("iconclschange",f,d,c)}},setTitle:function(g){var d=this,c=d.title,a=d.header,b=d.reExpander,f=d.placeholder;if(g!==c){d.title=g;if(a){if(a.isHeader){a.setTitle(g)}}else{if(d.rendered||d.afterHeaderInit){d.updateHeader()}}if(d.headingEl){d.headingEl.setHtml(g)}if(b){b.setTitle(g)}if(f&&f.setTitle){f.setTitle(g)}d.fireEvent("titlechange",d,g,c)}},setHiddenDocked:function(){var b=this,a=new Ext.dom.CompositeElement();b.hiddenOnCollapse.add(b.body);a.add(b.body);b.setDockedItemsVisibility(a,false)},setUI:function(b){var a=this;Ext.container.Container.prototype.setUI.apply(this,arguments);if(a.header&&a.header.rendered){a.header.setUI(b)}},toggleCollapse:function(){return(this.collapsed||this.floatedFromCollapse)?this.expand():this.collapse()},updateCollapseTool:function(){var c=this,b=c.collapseTool,a;if(!b&&c.collapsible){c.collapseDirection=c.collapseDirection||c.getHeaderPosition()||"top";a={xtype:"tool",handler:c.toggleCollapse,scope:c};if(c.isAccordionPanel){a.focusable=false;a.ariaRole="presentation"}c.collapseTool=c.expandTool=b=Ext.widget(a)}if(b){if(c.collapsed&&!c.isPlaceHolderCollapse()){b.setType("expand-"+c.getOppositeDirection(c.collapseDirection));b.setTooltip(c.expandToolText)}else{b.setType("collapse-"+c.collapseDirection);b.setTooltip(c.collapseToolText)}}},navigateAccordion:function(g){var d=this,a=d.accordionWrapOver,j="[isAccordionPanel]",h=j+":first",f=j+":last",b,c;b=g.getKey();switch(b){case g.UP:case g.LEFT:c=d.prev(j);if(!c&&a){c=d.ownerCt.child(f)}break;case g.DOWN:case g.RIGHT:c=d.next(j);if(!c&&a){c=d.ownerCt.child(h)}break;case g.HOME:c=d.ownerCt.child(h);break;case g.END:c=d.ownerCt.child(f);break;case g.DELETE:c=d.prev(j)||d.next(j);if(!c){g.doNotClose=true}break}if(c&&c!==d){c.header.titleCmp.focus()}},fireDefaultButton:function(a){var d=this,b,c;b=d.lookupReferenceHolder(false)||d;c=b.lookupReference(d.defaultButton);if(c&&c.click){c.click(a);a.stopEvent();return false}},maybeClose:function(b){var a=this;if(a.closable){a.navigateAccordion(b);if(!b.doNotClose){a.close()}}},onFocusEnter:function(a){var c=this,b=c.ariaEl.dom;Ext.container.Container.prototype.onFocusEnter.call(this,a);if(c.isAccordionPanel&&b){b.setAttribute("aria-selected",true)}},onFocusLeave:function(a){var c=this,b=c.ariaEl.dom;Ext.container.Container.prototype.onFocusLeave.call(this,a);if(c.isAccordionPanel&&b){b.removeAttribute("aria-selected")}},updateHeaderPosition:function(a){var b=this.header;if(b&&b.isHeader){b.setDock(a)}},updateIconAlign:function(b){var a=this.header;if(a&&a.isHeader){a.setIconAlign(b)}},updateTitleAlign:function(b){var a=this.header;if(a&&a.isHeader){a.setTitleAlign(b)}},updateTitleRotation:function(a){var b=this.header;if(b&&b.isHeader){b.setTitleRotation(a)}},unghost:function(f,c,d){var b=this,a=b.ghostPanel;if(!a){return}if(f!==false){b.el.show();if(c!==false){b.setPagePosition(a.getXY());if(b.hideMode==="offsets"){delete b.el.hideModeStyles}}if(d){b.focus(false,10)}}a.el.hide();a.setHiddenState(true)},updateHeader:function(o){var g=this,b=g.header,p=g.getTitle(),d=g.tools,m=g.getIcon(),h=g.getGlyph(),j=g.getIconCls(),a=h||m||j,f=g.ariaEl.dom,c=g.getHeaderPosition(),s=c==="left"||c==="right",r,q;if(Ext.isObject(b)||(b!==false&&(o||(p||a)||(d&&d.length)||(g.collapsible&&!g.titleCollapse)))){if(b&&b.isHeader){b.show()}else{b=g.header=Ext.widget(Ext.merge({xtype:"header",title:p,titleAlign:g.getTitleAlign(),vertical:s,dock:g.getHeaderPosition()||"top",titleRotation:g.getTitleRotation(),textCls:g.headerTextCls,iconCls:j,iconAlign:g.getIconAlign(),icon:m,glyph:h,baseCls:g.baseCls+"-header",tools:d,ui:g.ui,id:g.id+"_header",overCls:g.headerOverCls,indicateDrag:g.draggable,frame:(g.frame||g.alwaysFramed)&&g.frameHeader,ignoreParentFrame:g.frame||g.overlapHeader,ignoreBorderManagement:g.frame||g.ignoreHeaderBorderManagement,isAccordionHeader:g.isAccordionPanel,ownerCt:g,synthetic:true,listeners:g.collapsible&&g.titleCollapse?{click:g.toggleCollapse,scope:g}:null},g.header));g.addDocked(b,0)}if(g.isAccordionPanel){if(f){f.setAttribute("aria-labelledby",b.id+"-title");f.removeAttribute("aria-label")}else{q=g.ariaRenderAttributes||(g.ariaRenderAttributes={});q["aria-labelledby"]=b.id+"-title";delete q["aria-label"]}}else{if(p){if(g.ariaRole!=="tabpanel"){if(f){f.setAttribute("aria-labelledby",b.id+"-title-textEl");f.removeAttribute("aria-label")}else{q=g.ariaRenderAttributes||(g.ariaRenderAttributes={});q["aria-labelledby"]=b.id+"-title-textEl";delete q["aria-label"]}}}else{if(g.ariaRenderAttributes){delete g.ariaRenderAttributes["aria-label"]}}}}else{if(b){b.hide()}p=Ext.util.Format.stripTags(p);if(f){if(!f.hasAttribute("aria-labelledby")){if(p){f.setAttribute("aria-label",p)}else{f.removeAttribute("aria-label")}}}else{q=g.ariaRenderAttributes||(g.ariaRenderAttributes={});if(!q["aria-labelledby"]){if(p){q["aria-label"]=p}else{delete q["aria-label"]}}}}if(g.isViewportBorderChild&&!g.hasOwnProperty("ariaRole")){g.ariaRole="region"}if(p&&g.ariaRole==="region"){r=g.headingEl;if(r){r.setHtml(p)}else{if(g.rendered){g.headingEl=Ext.dom.Helper.insertFirst(g.el,{tag:"div",id:g.id+"-headingEl",role:"heading","class":"x-hidden-clip",style:"height:0",html:p},true);f.removeAttribute("aria-label");f.setAttribute("aria-labelledby",g.id+"-headingEl")}else{g.headingText=g.title;q=g.ariaRenderAttributes||(g.ariaRenderAttributes={});q["aria-labelledby"]=g.id+"-headingEl";delete q["aria-label"]}}}else{if(g.headingEl){g.headingEl.destroy();g.headingEl=null}}},statics:{floatCls:"x-border-region-slide-in"},privates:{addUIToElement:function(){var a=this;Ext.container.Container.prototype.addUIToElement.apply(this,arguments);a.addBodyCls(a.baseCls+"-body-"+a.ui)},applyTargetCls:function(a){this.getProtoBody().addCls(a)},getDefaultContentTarget:function(){return this.body},getTargetEl:function(){var a=this;return a.body||a.protoBody||a.frameBody||a.el},initDraggable:function(){var a=this;if(a.simpleDrag){a.initSimpleDraggable()}else{a.dd=new Ext.panel.DD(a,Ext.isBoolean(a.draggable)?null:a.draggable)}},initResizable:function(){Ext.container.Container.prototype.initResizable.apply(this,arguments);if(this.collapsed){this.resizer.disable()}},initSimpleDraggable:function(){var a=this,c,b;if(!a.header){a.updateHeader(true)}if(a.header){c=Ext.applyIf({el:a.el,delegate:"#"+a.header.id},a.draggable);if(a.constrain||a.constrainHeader){c.constrain=a.constrain;c.constrainDelegate=a.constrainHeader;c.constrainTo=a.constrainTo||a.container}b=a.dd=new Ext.util.ComponentDragger(a,c);a.relayEvents(b,["dragstart","drag","dragend"]);if(a.maximized){b.disable()}}},removeUIFromElement:function(){var a=this;Ext.container.Container.prototype.removeUIFromElement.apply(this,arguments);a.removeBodyCls(a.baseCls+"-body-"+a.ui)},setupRenderTpl:function(a){Ext.container.Container.prototype.setupRenderTpl.apply(this,arguments);this.setupDockingRenderTpl(a)},slideOutFloatedPanel:function(c){var f=this,b=f.el,a,d=function(){f.slideOutFloatedPanelEnd();f.el.removeCls("x-border-region-slide-in")};if(f.isSliding||f.destroyed){return}f.isSliding=true;f.floated=false;f.slideOutFloatedPanelBegin();if(c){b.hide();return d()}if(typeof f.collapsed==="string"){a=f.convertCollapseDir(f.collapsed)}b.slideOut(a,{preserveScroll:true,duration:Ext.Number.from(f.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:d}})},slideOutFloatedPanelBegin:function(){var c=this,a=c.placeholder.el,b=c.el;c.collapsed=c.floatedFromCollapse;c.setHiddenState(true);c.floatedFromCollapse=null;a.un("mouseleave",c.onMouseLeaveFloated,c);b.un("mouseleave",c.onMouseLeaveFloated,c);a.un("mouseenter",c.onMouseEnterFloated,c);b.un("mouseenter",c.onMouseEnterFloated,c)},slideOutFloatedPanelEnd:function(a){var b=this;if(b.collapseTool){b.collapseTool.el.show()}b.slideOutTask.cancel();b.isSliding=false;if(!a){b.fireEvent("unfloat",b)}}}},0,["panel"],["component","box","container","panel"],{component:true,box:true,container:true,panel:true},["widget.panel"],[["docking",Ext.container.DockingContainer]],[Ext.panel,"Panel",Ext,"Panel"],function(){var a=this.prototype;a.animCollapse=Ext.enableFx;a.placeholderCollapseHideMode=Ext.Element.VISIBILITY}));Ext.define("Ext.theme.neptune.panel.Panel",{override:"Ext.panel.Panel",border:false,bodyBorder:false,initBorderProps:Ext.emptyFn,initBodyBorder:function(){if(this.bodyBorder!==true){arguments.callee.$previous.call(this)}}});(Ext.cmd.derive("Ext.container.Monitor",Ext.Base,{target:null,selector:"",scope:null,addHandler:null,removeHandler:null,invalidateHandler:null,disabled:0,constructor:function(a){Ext.apply(this,a)},bind:function(b){var a=this;a.target=b;b.on("beforedestroy",a.disable,a);a.onContainerAdd(b)},unbind:function(){var a=this,b=a.target;if(b){b.un("beforedestroy",a.disable,a)}a.items=null},disable:function(){++this.disabled},enable:function(){if(this.disabled>0){--this.disabled}},handleAdd:function(b,a){if(!this.disabled){if(a.is(this.selector)){this.onItemAdd(a.ownerCt,a)}if(a.isQueryable){this.onContainerAdd(a)}}},onItemAdd:function(f,d){var b=this,c=b.items,a=b.addHandler;if(!b.disabled){if(a){a.call(b.scope||d,d)}if(c){c.add(d)}}},onItemRemove:function(f,d){var b=this,c=b.items,a=b.removeHandler;if(!b.disabled){if(a){a.call(b.scope||d,d)}if(c){c.remove(d)}}},onContainerAdd:function(a,g){var d=this,c,b,h=d.handleAdd,f=d.handleRemove,j,m;if(a.isContainer){a.on("add",h,d);a.on("dockedadd",h,d);a.on("remove",f,d);a.on("dockedremove",f,d)}if(g!==true){c=a.query(d.selector);for(j=0,b=c.length;j<b;++j){m=c[j];d.onItemAdd(m.ownerCt,m)}}c=a.query(">container");for(j=0,b=c.length;j<b;++j){d.onContainerAdd(c[j],true)}},handleRemove:function(c,b){var a=this;if(!a.disabled){if(b.is(a.selector)){a.onItemRemove(c,b)}if(b.isQueryable){a.onContainerRemove(c,b)}}},onContainerRemove:function(f,c){var h=this,b,d,a,g;if(!c.destroyed&&!c.destroying&&c.isContainer){h.removeCtListeners(c);b=c.query(h.selector);for(d=0,a=b.length;d<a;++d){g=b[d];h.onItemRemove(g.ownerCt,g)}b=c.query("container");for(d=0,a=b.length;d<a;++d){h.removeCtListeners(b[d])}}else{h.invalidateItems(true)}},removeCtListeners:function(a){var b=this;a.un("add",b.handleAdd,b);a.un("dockedadd",b.handleAdd,b);a.un("remove",b.handleRemove,b);a.un("dockedremove",b.handleRemove,b)},getItems:function(){var b=this,a=b.items;if(!a){a=b.items=new Ext.util.MixedCollection();a.addAll(b.target.query(b.selector))}return a},invalidateItems:function(a){var c=this,b=c.invalidateHandler;if(a&&b){b.call(c.scope||c,c)}c.items=null}},1,0,0,0,0,0,[Ext.container,"Monitor"],0));(Ext.cmd.derive("Ext.layout.container.Anchor",Ext.layout.container.Auto,{alternateClassName:"Ext.layout.AnchorLayout",type:"anchor",defaultAnchor:"100%",parseAnchorRE:/^(r|right|b|bottom)$/i,manageOverflow:true,setsItemSize:true,beginLayoutCycle:function(f){var d=this,c=0,h,j,g,a,b;Ext.layout.container.Auto.prototype.beginLayoutCycle.apply(this,arguments);g=f.childItems;b=g.length;for(a=0;a<b;++a){j=g[a];h=j.target.anchorSpec;if(h){if(j.widthModel.calculated&&h.right){c|=1}if(j.heightModel.calculated&&h.bottom){c|=2}if(c===3){break}}}f.anchorDimensions=c},calculateItems:function(a,p){var g=this,d=a.childItems,v=d.length,r=p.gotHeight,b=p.gotWidth,u=p.height,s=p.width,q=(b?1:0)|(r?2:0),f=a.anchorDimensions,j,o,m,h,c,t;if(!f){return true}for(c=0;c<v;c++){o=d[c];m=o.getMarginInfo();j=o.target.anchorSpec;if(b&&o.widthModel.calculated){t=j.right(s)-m.width;t=g.adjustWidthAnchor(t,o);o.setWidth(t)}if(r&&o.heightModel.calculated){h=j.bottom(u)-m.height;h=g.adjustHeightAnchor(h,o);o.setHeight(h)}}return(q&f)===f},anchorFactory:{offset:function(a){return function(b){return b+a}},ratio:function(a){return function(b){return Math.floor(b*a)}},standard:function(a){return function(b){return b-a}}},parseAnchor:function(g,f,c){if(g&&g!=="none"){var b=this.anchorFactory,d;if(this.parseAnchorRE.test(g)){return b.standard(c-f)}if(g.indexOf("%")!==-1){return b.ratio(parseFloat(g.replace("%",""))*0.01)}d=parseInt(g,10);if(!isNaN(d)){return b.offset(d)}}return null},adjustWidthAnchor:function(b,a){return b},adjustHeightAnchor:function(b,a){return b},configureItem:function(g){var f=this,a=f.owner,d=g.anchor,b,c,h;Ext.layout.container.Auto.prototype.configureItem.apply(this,arguments);if(!g.anchor&&g.items&&!Ext.isNumber(g.width)){g.anchor=d=f.defaultAnchor}if(a.anchorSize){if(typeof a.anchorSize==="number"){c=a.anchorSize}else{c=a.anchorSize.width;h=a.anchorSize.height}}else{c=a.initialConfig.width;h=a.initialConfig.height}if(d){b=d.split(" ");g.anchorSpec={right:f.parseAnchor(b[0],g.initialConfig.width,c),bottom:f.parseAnchor(b[1],g.initialConfig.height,h)}}},sizePolicy:{$:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},b:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},r:{$:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},b:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}}},getItemSizePolicy:function(f){var b=f.anchorSpec,c="$",a=this.sizePolicy,d;if(b){d=this.owner.getSizeModel();if(b.right&&!d.width.shrinkWrap){a=a.r}if(b.bottom&&!d.height.shrinkWrap){c="b"}}return a[c]}},0,0,0,0,["layout.anchor"],0,[Ext.layout.container,"Anchor",Ext.layout,"AnchorLayout"],0));(Ext.cmd.derive("Ext.dd.DragTracker",Ext.Base,{active:false,trackOver:false,tolerance:5,autoStart:false,constructor:function(a){var b=this;Ext.apply(b,a);b.dragRegion=new Ext.util.Region(0,0,0,0);if(b.el){b.initEl(b.el)}b.mixins.observable.constructor.call(b);if(b.disabled){b.disable()}},initEl:function(c){var a=this,b=a.delegate;a.el=c=Ext.get(c);if(b&&b.isElement){a.handle=b}a.delegate=a.handle?undefined:a.delegate;if(!a.handle){a.handle=c}a.handleListeners={scope:a,delegate:a.delegate,mousedown:a.onMouseDown,dragstart:a.onDragStart};if(!Ext.supports.TouchEvents&&(a.trackOver||a.overCls)){Ext.apply(a.handleListeners,{mouseover:a.onMouseOver,mouseout:a.onMouseOut})}a.mon(a.handle,a.handleListeners);a.keyNav=new Ext.util.KeyNav({target:c,up:a.onResizeKeyDown,left:a.onResizeKeyDown,right:a.onResizeKeyDown,down:a.onResizeKeyDown,scope:a})},disable:function(){this.disabled=true},enable:function(){this.disabled=false},destroy:function(){var a=this;a.endDrag({});a.el=a.handle=a.onBeforeStart=a.onStart=a.onDrag=a.onEnd=null;a.callParent()},onMouseOver:function(h,g){var d=this,f,c,b,j,a;if(!d.disabled){if(h.within(h.target,true,true)||d.delegate){f=d.handleCls;d.mouseIsOut=false;if(f){for(b=0,j=d.handleEls.length;b<j;b++){c=d.handleEls[b];a=c.delegateCls;if(!a){a=c.delegateCls=[f,"-",c.region,"-over"].join("")}c.addCls([a,d.overCls])}}d.fireEvent("mouseover",d,h,d.delegate?h.getTarget(d.delegate,g):d.handle)}}},onMouseOut:function(b){var a=this,f,d,c;if(a.mouseIsDown){a.mouseIsOut=true}else{if(a.handleCls){for(d=0,c=a.handleEls.length;d<c;d++){f=a.handleEls[d];f.removeCls([f.delegateCls,a.overCls])}}a.fireEvent("mouseout",a,b)}},onMouseDown:function(a,c){var b=this;if(b.disabled||a.dragTracked){return}b.dragTarget=b.delegate?c:b.handle.dom;b.startXY=b.lastXY=a.getXY();b.startRegion=Ext.fly(b.dragTarget).getRegion();if(b.fireEvent("mousedown",b,a)===false||b.fireEvent("beforedragstart",b,a)===false||b.onBeforeStart(a)===false){return}b.mouseIsDown=true;a.dragTracked=true;b.el.setCapture();a.stopPropagation();if(b.preventDefault!==false){a.preventDefault()}Ext.getDoc().on({scope:b,capture:true,mouseup:b.onMouseUp,mousemove:b.onMouseMove,selectstart:b.stopSelect});b.dragEnded=false;if(!b.tolerance){b.triggerStart()}else{if(b.autoStart){b.timer=Ext.defer(b.triggerStart,b.autoStart===true?1000:b.autoStart,b,[a])}}},onMouseMove:function(b,a){var d=this,f=b.getXY(),c=d.startXY;b.stopPropagation();if(d.preventDefault!==false){b.preventDefault()}if(d.dragEnded){return}d.lastXY=f;if(!d.active){if(Math.max(Math.abs(c[0]-f[0]),Math.abs(c[1]-f[1]))>d.tolerance){d.triggerStart(b)}else{return}}if(d.fireEvent("mousemove",d,b)===false){d.onMouseUp(b)}else{d.onDrag(b);d.fireEvent("drag",d,b)}},onMouseUp:function(b){var a=this;a.mouseIsDown=false;if(a.mouseIsOut){a.mouseIsOut=false;a.onMouseOut(b)}if(a.preventDefault!==false){b.preventDefault()}if(Ext.isIE&&document.releaseCapture){document.releaseCapture()}a.fireEvent("mouseup",a,b);a.endDrag(b)},endDrag:function(a){var c=this,b=c.active;Ext.getDoc().un({mousemove:c.onMouseMove,mouseup:c.onMouseUp,selectstart:c.stopSelect,capture:true,scope:c});c.clearStart();c.active=false;if(b){c.dragEnded=true;c.onEnd(a);c.fireEvent("dragend",c,a)}c._constrainRegion=null},triggerStart:function(b){var a=this;a.clearStart();a.active=true;a.onStart(b);a.fireEvent("dragstart",a,b)},clearStart:function(){var a=this.timer;if(a){clearTimeout(a);this.timer=null}},stopSelect:function(a){a.stopEvent();return false},onBeforeStart:function(a){},onStart:function(a){},onDrag:function(a){},onEnd:function(a){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getConstrainRegion:function(){var a=this;if(a.constrainTo){if(a.constrainTo instanceof Ext.util.Region){return a.constrainTo}if(!a._constrainRegion){a._constrainRegion=Ext.fly(a.constrainTo).getViewRegion()}}else{if(!a._constrainRegion){a._constrainRegion=a.getDragCt().getViewRegion()}}return a._constrainRegion},getXY:function(a){return a?this.constrainModes[a](this,this.lastXY):this.lastXY},getOffset:function(a){var c=this.getXY(a),b=this.startXY;return[c[0]-b[0],c[1]-b[1]]},onDragStart:function(a){a.stopPropagation()},constrainModes:{point:function(d,b){var a=d.dragRegion,c=d.getConstrainRegion();if(!c){return b}a.x=a.left=a[0]=a.right=b[0];a.y=a.top=a[1]=a.bottom=b[1];a.constrainTo(c);return[a.left,a.top]},dragTarget:function(d,a){var c=d.startXY,g=d.startRegion.copy(),b=d.getConstrainRegion(),f;if(!b){return a}g.translateBy(a[0]-c[0],a[1]-c[1]);if(g.right>b.right){a[0]+=f=(b.right-g.right);g.left+=f}if(g.left<b.left){a[0]+=(b.left-g.left)}if(g.bottom>b.bottom){a[1]+=f=(b.bottom-g.bottom);g.top+=f}if(g.top<b.top){a[1]+=(b.top-g.top)}return a}}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.dd,"DragTracker"],0));(Ext.cmd.derive("Ext.resizer.SplitterTracker",Ext.dd.DragTracker,{enabled:true,overlayCls:"x-resizable-overlay",createDragOverlay:function(){var a,b=Ext.dom.Element;a=this.overlay=Ext.getBody().createChild({role:"presentation",cls:this.overlayCls,html:"&#160;"});a.unselectable();a.setSize(b.getDocumentWidth(),b.getDocumentHeight());a.show()},getPrevCmp:function(){var a=this.getSplitter();return a.previousSibling(":not([hidden])")},getNextCmp:function(){var a=this.getSplitter();return a.nextSibling(":not([hidden])")},onBeforeStart:function(h){var d=this,f=d.getPrevCmp(),a=d.getNextCmp(),c=d.getSplitter().collapseEl,g=h.getTarget(),b;if(!f||!a){return false}if(c&&g===c.dom){return false}if(a.collapsed||f.collapsed){return false}d.prevBox=f.getEl().getBox();d.nextBox=a.getEl().getBox();d.constrainTo=b=d.calculateConstrainRegion();if(!b){return false}return b},onStart:function(b){var a=this.getSplitter();this.createDragOverlay();a.addCls(a.baseCls+"-active")},onResizeKeyDown:function(f){var b=this,d=b.getSplitter(),a=f.getKey(),c=d.orientation==="vertical"?0:1,h=a===f.UP||a===f.LEFT?-1:1,g;if(!b.active&&b.onBeforeStart(f)){Ext.fly(f.target).on("keyup",b.onResizeKeyUp,b);b.triggerStart(f);b.onMouseDown(f);b.startXY=d.getXY();b.lastKeyDownXY=Ext.Array.slice(b.startXY);g=b.easing=new Ext.fx.easing.Linear();g.setStartTime(Ext.Date.now());g.setStartValue(1);g.setEndValue(4);g.setDuration(2000)}if(b.active){b.lastKeyDownXY[c]=Math.round(b.lastKeyDownXY[c]+(h*b.easing.getValue()));b.lastXY=b.lastKeyDownXY;d.setXY(b.getXY("dragTarget"))}},onResizeKeyUp:function(a){this.onMouseUp(a)},calculateConstrainRegion:function(){var j=this,b=j.getSplitter(),m=b.getWidth(),o=b.defaultSplitMin,c=b.orientation,g=j.prevBox,p=j.getPrevCmp(),d=j.nextBox,h=j.getNextCmp(),a,q,f;if(c==="vertical"){f={prevCmp:p,nextCmp:h,prevBox:g,nextBox:d,defaultMin:o,splitWidth:m};a=new Ext.util.Region(g.y,j.getVertPrevConstrainRight(f),g.bottom,j.getVertPrevConstrainLeft(f));q=new Ext.util.Region(d.y,j.getVertNextConstrainRight(f),d.bottom,j.getVertNextConstrainLeft(f))}else{a=new Ext.util.Region(g.y+(p.minHeight||o),g.right,(p.maxHeight?g.y+p.maxHeight:d.bottom-(h.minHeight||o))+m,g.x);q=new Ext.util.Region((h.maxHeight?d.bottom-h.maxHeight:g.y+(p.minHeight||o))-m,d.right,d.bottom-(h.minHeight||o),d.x)}return a.intersect(q)},performResize:function(j,a){var r=this,o=r.getSplitter(),b=o.orientation,g=r.getPrevCmp(),p=r.getNextCmp(),q=o.ownerCt,d=q.query(">[flex]"),f=d.length,s=b==="vertical",c=0,u=s?"width":"height",t=0,h,m;for(;c<f;c++){h=d[c];m=s?h.getWidth():h.getHeight();t+=m;h.flex=m}a=s?a[0]:a[1];if(g){m=r.prevBox[u]+a;if(g.flex){g.flex=m}else{g[u]=m}}if(p){m=r.nextBox[u]-a;if(p.flex){p.flex=m}else{p[u]=m}}q.updateLayout()},endDrag:function(){var a=this;if(a.overlay){a.overlay.destroy();delete a.overlay}Ext.dd.DragTracker.prototype.endDrag.apply(this,arguments)},onEnd:function(a){var b=this,c=b.getSplitter();c.removeCls(c.baseCls+"-active");b.performResize(a,b.getResizeOffset())},onDrag:function(g){var d=this,a=d.getOffset("dragTarget"),f=d.getSplitter(),c=f.getEl(),b=f.orientation;if(b==="vertical"){c.setX(d.startRegion.left+a[0])}else{c.setY(d.startRegion.top+a[1])}},getSplitter:function(){return this.splitter},getVertPrevConstrainRight:function(a){return(a.prevCmp.maxWidth?a.prevBox.x+a.prevCmp.maxWidth:a.nextBox.right-(a.nextCmp.minWidth||a.defaultMin))+a.splitWidth},getVertPrevConstrainLeft:function(a){return a.prevBox.x+(a.prevCmp.minWidth||a.defaultMin)},getVertNextConstrainRight:function(a){return a.nextBox.right-(a.nextCmp.minWidth||a.defaultMin)},getVertNextConstrainLeft:function(a){return(a.nextCmp.maxWidth?a.nextBox.right-a.nextCmp.maxWidth:a.prevBox.x+(a.prevBox.minWidth||a.defaultMin))-a.splitWidth},getResizeOffset:function(){return this.getOffset("dragTarget")}},0,0,0,0,0,0,[Ext.resizer,"SplitterTracker"],0));(Ext.cmd.derive("Ext.dd.DDTarget",Ext.dd.DragDrop,{constructor:function(a,b,c){if(a){this.initTarget(a,b,c)}},getDragEl:Ext.emptyFn,isValidHandleChild:Ext.emptyFn,startDrag:Ext.emptyFn,endDrag:Ext.emptyFn,onDrag:Ext.emptyFn,onDragDrop:Ext.emptyFn,onDragEnter:Ext.emptyFn,onDragOut:Ext.emptyFn,onDragOver:Ext.emptyFn,onInvalidDrop:Ext.emptyFn,onMouseDown:Ext.emptyFn,onMouseUp:Ext.emptyFn,setXConstraint:Ext.emptyFn,setYConstraint:Ext.emptyFn,resetConstraints:Ext.emptyFn,clearConstraints:Ext.emptyFn,clearTicks:Ext.emptyFn,setInitPosition:Ext.emptyFn,setDragElId:Ext.emptyFn,setHandleElId:Ext.emptyFn,setOuterHandleElId:Ext.emptyFn,addInvalidHandleClass:Ext.emptyFn,addInvalidHandleId:Ext.emptyFn,addInvalidHandleType:Ext.emptyFn,removeInvalidHandleClass:Ext.emptyFn,removeInvalidHandleId:Ext.emptyFn,removeInvalidHandleType:Ext.emptyFn,toString:function(){return("DDTarget "+this.id)}},3,0,0,0,0,0,[Ext.dd,"DDTarget"],0));(Ext.cmd.derive("Ext.event.publisher.MouseEnterLeave",Ext.event.publisher.Dom,{type:"mouseEnterLeave"},0,0,0,0,0,0,[Ext.event.publisher,"MouseEnterLeave"],function(a){var b={mouseover:"mouseenter",mouseout:"mouseleave"};if(!Ext.supports.MouseEnterLeave){a.override({handledDomEvents:["mouseover","mouseout"],handledEvents:["mouseenter","mouseleave"],doDelegatedEvent:function(c){var m,f,d,h,g,j;c=this.callParent([c]);m=c.getTarget();f=c.getRelatedTarget();if(f&&Ext.fly(m).contains(f)){return}d=m.id;if(d){h=Ext.cache[d];if(h){g=b[c.type];c=c.chain({type:g});if(h.hasListeners[g]){j=h.events[g];if(j){j=j.directs;if(j){c.setCurrentTarget(h.dom);j.fire(c,c.target)}}}}}}})}a.instance=new a()}));(Ext.cmd.derive("Ext.form.action.Action",Ext.Base,{alternateClassName:"Ext.form.Action",submitEmptyText:true,constructor:function(a){if(a){Ext.apply(this,a)}var b=a.params;if(Ext.isString(b)){this.params=Ext.Object.fromQueryString(b)}},run:Ext.emptyFn,onFailure:function(b){var a=this.form,c=a&&!a.destroying&&!a.destroyed;this.response=b;this.failureType=Ext.form.action.Action.CONNECT_FAILURE;if(c){a.afterAction(this,false)}},processResponse:function(a){this.response=a;if(!a.responseText&&!a.responseXML){return true}return(this.result=this.handleResponse(a))},getUrl:function(){return this.url||this.form.url},getMethod:function(){return(this.method||this.form.method||"POST").toUpperCase()},getParams:function(){return Ext.apply({},this.params,this.form.baseParams)},createCallback:function(){var a=this;return{success:a.onSuccess,failure:a.onFailure,scope:a,timeout:(a.timeout||a.form.timeout)*1000}},statics:{CLIENT_INVALID:"client",SERVER_INVALID:"server",CONNECT_FAILURE:"connect",LOAD_FAILURE:"load"}},1,0,0,0,0,0,[Ext.form.action,"Action",Ext.form,"Action"],0));(Ext.cmd.derive("Ext.form.action.Load",Ext.form.action.Action,{alternateClassName:"Ext.form.Action.Load",type:"load",run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(),{method:this.getMethod(),url:this.getUrl(),headers:this.headers,params:this.getParams()}))},onSuccess:function(d){var c=this.processResponse(d),b=this.form,a=b&&!b.destroying&&!b.destroyed;if(c===true||!c.success||!c.data){this.failureType=Ext.form.action.Action.LOAD_FAILURE;if(a){b.afterAction(this,false)}return}if(a){b.clearInvalid();b.setValues(c.data);b.afterAction(this,true)}},handleResponse:function(a){var c=this.form.reader,d,b;if(c){d=c.read(a);b=d.records&&d.records[0]?d.records[0].data:null;return{success:d.success,data:b}}return Ext.decode(a.responseText)}},0,0,0,0,["formaction.load"],0,[Ext.form.action,"Load",Ext.form.Action,"Load"],0));(Ext.cmd.derive("Ext.form.action.Submit",Ext.form.action.Action,{alternateClassName:"Ext.form.Action.Submit",type:"submit",run:function(){var b=this,a=b.form;if(b.clientValidation===false||a.isValid()){b.doSubmit()}else{b.failureType=Ext.form.action.Action.CLIENT_INVALID;a.afterAction(b,false)}},doSubmit:function(){var f=this,c=Ext.apply(f.createCallback(),{url:f.getUrl(),method:f.getMethod(),headers:f.headers}),d=f.form,g=f.jsonSubmit||d.jsonSubmit,b=g?"jsonData":"params",a;if(d.hasUpload()){a=f.buildForm();c.form=a.formEl;c.isUpload=true}else{c[b]=f.getParams(g)}Ext.Ajax.request(c);if(a){f.cleanup(a)}},cleanup:function(h){var f=h.formEl,d=h.uploadEls,b=h.uploadFields,a=b.length,c,g;for(c=0;c<a;++c){g=b[c];if(!g.clearOnSubmit){g.restoreInput(d[c])}}if(f){Ext.removeNode(f)}},getParams:function(b){var a=false,d=Ext.form.action.Action.prototype.getParams.call(this),c=this.form.getValues(a,a,this.submitEmptyText!==a,b,true);return Ext.apply({},c,d)},buildForm:function(){var c=this,m=[],d,o,a=c.form,t=c.getParams(),s=[],p=[],w=a.getFields().items,u,b=w.length,j,h,f,g,r,q;for(u=0;u<b;++u){j=w[u];if(j.isFileUpload()){s.push(j)}}for(h in t){if(t.hasOwnProperty(h)){f=t[h];if(Ext.isArray(f)){r=f.length;for(g=0;g<r;g++){m.push(c.getFieldConfig(h,f[g]))}}else{m.push(c.getFieldConfig(h,f))}}}d={tag:"form",role:"presentation",action:c.getUrl(),method:c.getMethod(),target:c.target?(Ext.isString(c.target)?c.target:Ext.fly(c.target).dom.name):"_self",style:"display:none",cn:m};if(s.length){d.encoding=d.enctype="multipart/form-data"}o=Ext.DomHelper.append(Ext.getBody(),d);b=s.length;for(u=0;u<b;++u){q=s[u].extractFileInput();o.appendChild(q);p.push(q)}return{formEl:o,uploadFields:s,uploadEls:p}},getFieldConfig:function(a,b){return{tag:"input",type:"hidden",name:a,value:Ext.String.htmlEncode(b)}},onSuccess:function(d){var a=this.form,f=a&&!a.destroying&&!a.destroyed,b=true,c=this.processResponse(d);if(c!==true&&!c.success){if(c.errors&&f){a.markInvalid(c.errors)}this.failureType=Ext.form.action.Action.SERVER_INVALID;b=false}if(f){a.afterAction(this,b)}},handleResponse:function(h){var d=this.form,g=d.errorReader,j,b,m,o,f,c;if(g){j=g.read(h);f=j.records;b=[];if(f){for(m=0,o=f.length;m<o;m++){b[m]=f[m].data}}if(b.length<1){b=null}c={success:j.success,errors:b}}else{try{c=Ext.decode(h.responseText)}catch(a){c={success:false,errors:[]}}}return c}},0,0,0,0,["formaction.submit"],0,[Ext.form.action,"Submit",Ext.form.Action,"Submit"],0));(Ext.cmd.derive("Ext.util.ComponentDragger",Ext.dd.DragTracker,{autoStart:500,constructor:function(a,b){this.comp=a;this.initialConstrainTo=b.constrainTo;Ext.dd.DragTracker.prototype.constructor.call(this,b)},onStart:function(a){var c=this,b=c.comp;c.startPosition=b.getXY();if(b.ghost&&!b.liveDrag){c.proxy=b.ghost();c.dragTarget=c.proxy.header.el}if(c.constrain||c.constrainDelegate){c.constrainTo=c.calculateConstrainRegion()}if(b.beginDrag){b.beginDrag()}if(b.el.shim){b.el.maskIframes()}},calculateConstrainRegion:function(){var a=this,m=a.comp,o=a.initialConstrainTo,j=m.constraintInsets,c,f,h,g=a.proxy?a.proxy.el:m.el,b=g.shadow,d=(b&&!a.constrainDelegate&&m.constrainShadow&&!b.disabled)?b.getShadowSize():0;if(!(o instanceof Ext.util.Region)){c=Ext.fly(o);o=c.getConstrainRegion()}else{o=o.copy()}if(j){j=Ext.isObject(j)?j:Ext.Element.parseBox(j);o.adjust(j.top,j.right,j.bottom,j.left)}if(d){o.adjust(d[0],-d[1],-d[2],d[3])}if(!a.constrainDelegate){f=Ext.fly(a.dragTarget).getRegion();h=g.getRegion();o.adjust(f.top-h.top,f.right-h.right,f.bottom-h.bottom,f.left-h.left)}return o},onDrag:function(a){var d=this,c=(d.proxy&&!d.comp.liveDrag)?d.proxy:d.comp,b=d.getOffset(d.constrain||d.constrainDelegate?"dragTarget":null);c.setPagePosition(d.startPosition[0]+b[0],d.startPosition[1]+b[1])},onEnd:function(b){var a=this.comp;if(a.destroyed||a.destroying){return}if(this.proxy&&!a.liveDrag){a.unghost()}if(a.endDrag){a.endDrag()}if(a.el.shim){a.el.unmaskIframes()}}},1,0,0,0,0,0,[Ext.util,"ComponentDragger"],0));(Ext.cmd.derive("Ext.util.FocusTrap",Ext.Mixin,{mixinConfig:{id:"focustrap",after:{afterRender:"initTabGuards",addTool:"initTabGuards",add:"initTabGuards",remove:"initTabGuards",addDocked:"initTabGuards",removeDocked:"initTabGuards",onShow:"initTabGuards",afterHide:"initTabGuards"}},config:{tabGuard:true,tabGuardTpl:'<div id="{id}-{tabGuardEl}" data-ref="{tabGuardEl}" role="button" data-tabguardposition="{tabGuard}" aria-busy="true" style="height:0"class="x-hidden-clip"></div>',tabGuardIndex:0},tabGuardPositionAttribute:"data-tabguardposition",privates:{initTabGuards:function(){var g=this,d=g.tabGuardPositionAttribute,f=g.tabGuardBeforeEl,a=g.tabGuardAfterEl,b=g.tabGuardIndex,c;if(!g.rendered||!g.tabGuard){return}c=g.el.findTabbableElements({skipSelf:true});if(c[0]&&c[0].hasAttribute(d)){c.shift()}if(c.length&&c[c.length-1].hasAttribute(d)){c.pop()}if(c.length){f.dom.setAttribute("tabIndex",b);f.on("focusenter",g.onTabGuardFocusEnter,g);a.dom.setAttribute("tabIndex",b);a.on("focusenter",g.onTabGuardFocusEnter,g)}else{f.dom.removeAttribute("tabIndex");f.un("focusenter",g.onTabGuardFocusEnter,g);a.dom.removeAttribute("tabIndex");a.un("focusenter",g.onTabGuardFocusEnter,g)}},onTabGuardFocusEnter:function(j,m){var o=this,f=o.el,a=o.tabGuardPositionAttribute,h=m.getAttribute(a),b=j.relatedTarget,d,g,c;if(!b.hasAttribute(a)&&b!==f.dom&&f.contains(b)){g=h==="before"?false:true}else{g=h==="before"?true:false}d=f.findTabbableElements({skipSelf:true});d.shift();d.pop();c=g?d[0]:d[d.length-1];if(c){c.focus()}}}},0,0,0,0,0,0,[Ext.util,"FocusTrap"],0));(Ext.cmd.derive("Ext.window.Window",Ext.panel.Panel,{alternateClassName:"Ext.Window",baseCls:"x-window",resizable:true,draggable:true,constrain:false,constrainHeader:false,plain:false,minimizable:false,maximizable:false,minHeight:50,minWidth:50,expandOnShow:true,collapsible:false,closable:true,hidden:true,autoRender:true,hideMode:"offsets",floating:true,itemCls:"x-window-item",overlapHeader:true,ignoreHeaderBorderManagement:true,alwaysFramed:true,isRootCfg:{isRoot:true},isWindow:true,ariaRole:"dialog",initComponent:function(){var a=this;a.frame=false;Ext.panel.Panel.prototype.initComponent.call(this);if(a.plain){a.addClsWithUI("plain")}a.addStateEvents(["maximize","restore","resize","dragend"])},getElConfig:function(){var b=this,a;a=Ext.panel.Panel.prototype.getElConfig.call(this);a.tabIndex=-1;return a},getFocusEl:function(){return this.getDefaultFocus()||this.el},getState:function(){var d=this,a=Ext.panel.Panel.prototype.getState.call(this)||{},c=!!d.maximized,f=d.ghostBox,b;a.maximized=c;if(c){b=d.restorePos}else{if(f){b=[f.x,f.y]}else{b=d.getPosition()}}Ext.apply(a,{size:c?d.restoreSize:d.getSize(),pos:b});return a},applyState:function(b){var a=this;if(b){a.maximized=b.maximized;if(a.maximized){a.hasSavedRestore=true;a.restoreSize=b.size;a.restorePos=b.pos}else{Ext.apply(a,{width:b.size.width,height:b.size.height,x:b.pos[0],y:b.pos[1]})}}},onRender:function(c,b){var a=this;Ext.panel.Panel.prototype.onRender.apply(this,arguments);if(a.header){a.header.on({scope:a,click:a.onHeaderClick})}if(a.maximizable){a.header.on({scope:a,dblclick:a.toggleMaximize})}},afterRender:function(){var b=this,a=b.header,c;if(b.maximized){b.maximized=false;b.maximize();if(a){a.removeCls(a.indicateDragCls)}}Ext.panel.Panel.prototype.afterRender.call(this);if(b.closable){c=b.getKeyMap();c.on(27,b.onEsc,b)}else{c=b.keyMap}if(c&&b.hidden){c.disable()}},onEsc:function(a,b){b.stopEvent();this.close()},beforeDestroy:function(){var a=this;if(a.rendered){Ext.un("resize",a.onWindowResize,a);delete a.animateTarget;a.hide();Ext.destroy(a.keyMap)}Ext.panel.Panel.prototype.beforeDestroy.call(this)},addTools:function(){var a=this,b=[];Ext.panel.Panel.prototype.addTools.call(this);if(a.minimizable){b.push({type:"minimize",handler:"minimize",scope:a})}if(a.maximizable){b.push({type:a.maximized?"restore":"maximize",handler:"toggleMaximize",scope:a})}if(b.length){a.addTool(b)}},onShow:function(){var a=this;Ext.panel.Panel.prototype.onShow.apply(this,arguments);if(a.expandOnShow){a.expand(false)}a.syncMonitorWindowResize();if(a.keyMap){a.keyMap.enable()}},doClose:function(){var a=this;if(a.hidden){a.fireEvent("close",a);if(a.closeAction==="destroy"){a.destroy()}}else{a.hide(a.animateTarget,a.doClose,a)}},afterHide:function(){var a=this;a.syncMonitorWindowResize();if(a.keyMap){a.keyMap.disable()}Ext.panel.Panel.prototype.afterHide.apply(this,arguments)},onWindowResize:function(){var b=this,a;if(!b.destroyed){if(b.maximized){b.fitContainer()}else{a=b.getSizeModel();if(a.width.natural||a.height.natural){b.updateLayout()}b.doConstrain()}}},minimize:function(){this.fireEvent("minimize",this);return this},resumeHeaderLayout:function(a){this.header.resumeLayouts(a?this.isRootCfg:null)},afterCollapse:function(){var b=this,a=b.header,c=b.tools;if(a&&b.maximizable){a.suspendLayouts();c.maximize.hide();this.resumeHeaderLayout(true)}if(b.resizer){b.resizer.disable()}Ext.panel.Panel.prototype.afterCollapse.apply(this,arguments)},afterExpand:function(){var c=this,b=c.header,d=c.tools,a;if(b){b.suspendLayouts();if(c.maximizable){d.maximize.show();a=true}this.resumeHeaderLayout(a)}if(c.resizer){c.resizer.enable()}Ext.panel.Panel.prototype.afterExpand.apply(this,arguments)},maximize:function(a){var d=this,h=d.header,f=d.tools,c=d.width,j=d.height,b,g;if(!d.maximized){d.expand(false);if(!d.hasSavedRestore){b=d.restoreSize={width:c?c:null,height:j?j:null};d.restorePos=d.getPosition()}if(h){h.suspendLayouts();if(f.maximize){f.maximize.setType("restore")}if(d.collapseTool){d.collapseTool.hide();g=true}d.resumeHeaderLayout(g)}d.el.disableShadow();if(d.dd){d.dd.disable();if(h){h.removeCls(h.indicateDragCls)}}if(d.resizer){d.resizer.disable()}d.el.addCls("x-window-maximized");d.container.addCls("x-window-maximized-ct");d.syncMonitorWindowResize();d.fitContainer(a=(a||!!d.animateTarget)?{callback:function(){d.maximized=true;d.fireEvent("maximize",d)}}:null);if(!a){d.maximized=true;d.fireEvent("maximize",d)}}return d},restore:function(c){var d=this,f=d.tools,a=d.header,b=d.restoreSize,g;if(d.maximized){d.hasSavedRestore=null;d.removeCls("x-window-maximized");if(a){a.suspendLayouts();if(f.maximize){f.maximize.setType("maximize")}if(d.collapseTool){d.collapseTool.show();g=true}d.resumeHeaderLayout(g)}b.x=d.restorePos[0];b.y=d.restorePos[1];d.setBox(b,c=(c||!!d.animateTarget)?{callback:function(){d.el.enableShadow(null,true);d.maximized=false;d.fireEvent("restore",d)}}:null);d.restorePos=d.restoreSize=null;if(d.dd){d.dd.enable();if(a){a.addCls(a.indicateDragCls)}}if(d.resizer){d.resizer.enable()}d.container.removeCls("x-window-maximized-ct");d.syncMonitorWindowResize();if(!c){d.el.enableShadow(null,true);d.maximized=false;d.fireEvent("restore",d)}}return d},syncMonitorWindowResize:function(){var d=this,a=d._monitoringResize,b=d.monitorResize||d.constrain||d.constrainHeader||d.maximized,c=d.hidden||d.destroying||d.destroyed;if(b&&!c){if(!a){Ext.on("resize",d.onWindowResize,d,{buffer:1});d._monitoringResize=true}}else{if(a){Ext.un("resize",d.onWindowResize,d);d._monitoringResize=false}}},toggleMaximize:function(){return this[this.maximized?"restore":"maximize"]()},createGhost:function(){var a=Ext.panel.Panel.prototype.createGhost.apply(this,arguments);a.xtype="window";a.focusOnToFront=false;return a},getDefaultFocus:function(){var a=this,d,b=a.defaultFocus,c;if(b!==undefined){if(Ext.isNumber(b)){d=a.query("button")[b]}else{if(Ext.isString(b)){c=b;if(Ext.validIdRe.test(c)){d=a.down(Ext.makeIdSelector(c))}if(!d){d=a.down(c)}}else{if(b.focus){d=b}}}}return d},privates:{initDraggable:function(){this.initSimpleDraggable()},onHeaderClick:function(a,c){var b;if(a.el.contains(c.getTarget())){b=this.getDefaultFocus();if(b){b.focus()}}},initResizable:function(){Ext.panel.Panel.prototype.initResizable.apply(this,arguments);if(this.maximized){this.resizer.disable()}}}},0,["window"],["component","box","container","panel","window"],{component:true,box:true,container:true,panel:true,window:true},["widget.window"],[[Ext.util.FocusTrap.prototype.mixinId||Ext.util.FocusTrap.$className,Ext.util.FocusTrap]],[Ext.window,"Window",Ext,"Window"],0));(Ext.cmd.derive("Ext.form.Labelable",Ext.Mixin,{isLabelable:true,mixinConfig:{id:"labelable",on:{beforeRender:"beforeLabelRender",onRender:"onLabelRender"}},config:{childEls:["labelEl","bodyEl","errorEl","errorWrapEl","ariaErrorEl"]},labelableRenderTpl:["{beforeLabelTpl}",'<label id="{id}-labelEl" data-ref="labelEl" class="{labelCls} {labelCls}-{ui} {labelClsExtra} ','{childElCls} {unselectableCls}" style="{labelStyle}"<tpl if="inputId">',' for="{inputId}"</tpl> {labelAttrTpl}>','<span class="{labelInnerCls} {labelInnerCls}-{ui}" style="{labelInnerStyle}">',"{beforeLabelTextTpl}",'<tpl if="fieldLabel">{fieldLabel}','<tpl if="labelSeparator">{labelSeparator}</tpl>',"</tpl>","{afterLabelTextTpl}","</span>","</label>","{afterLabelTpl}",'<div id="{id}-bodyEl" data-ref="bodyEl" role="presentation"',' class="{baseBodyCls} {baseBodyCls}-{ui}<tpl if="fieldBodyCls">',' {fieldBodyCls} {fieldBodyCls}-{ui}</tpl> {growCls} {extraFieldBodyCls}"','<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{beforeBodyEl}","{beforeSubTpl}","{[values.$comp.getSubTplMarkup(values)]}","{afterSubTpl}","{afterBodyEl}",'<div id="{id}-ariaErrorEl" data-ref="ariaErrorEl" role="alert" aria-live="polite"',' class="x-hidden-clip">',"</div>","</div>",'<tpl if="renderError">','<div id="{id}-errorWrapEl" data-ref="errorWrapEl" class="{errorWrapCls} {errorWrapCls}-{ui}',' {errorWrapExtraCls}" style="{errorWrapStyle}">','<div role="presentation" id="{id}-errorEl" data-ref="errorEl" ','class="{errorMsgCls} {invalidMsgCls} {invalidMsgCls}-{ui}" ','data-anchorTarget="{tipAnchorTarget}">',"</div>","</div>","</tpl>",{disableFormats:true}],activeErrorsTpl:undefined,htmlActiveErrorsTpl:['<tpl if="errors && errors.length">','<ul class="{listCls}">','<tpl for="errors"><li>{.}</li></tpl>',"</ul>","</tpl>"],plaintextActiveErrorsTpl:['<tpl if="errors && errors.length">','<tpl for="errors"><tpl if="xindex &gt; 1">\n</tpl>{.}</tpl>',"</tpl>"],isFieldLabelable:true,formItemCls:"x-form-item",labelCls:"x-form-item-label",topLabelCls:"x-form-item-label-top",rightLabelCls:"x-form-item-label-right",labelInnerCls:"x-form-item-label-inner",topLabelSideErrorCls:"x-form-item-label-top-side-error",errorMsgCls:"x-form-error-msg",errorWrapCls:"x-form-error-wrap",errorWrapSideCls:"x-form-error-wrap-side",errorWrapUnderCls:"x-form-error-wrap-under",errorWrapUnderSideLabelCls:"x-form-error-wrap-under-side-label",baseBodyCls:"x-form-item-body",invalidIconCls:"x-form-invalid-icon",invalidUnderCls:"x-form-invalid-under",noLabelCls:"x-form-item-no-label",fieldBodyCls:"",invalidCls:"x-form-invalid",fieldLabel:undefined,labelAlign:"left",labelWidth:100,labelPad:5,labelSeparator:":",hideLabel:false,hideEmptyLabel:true,preventMark:false,autoFitErrors:true,msgTarget:"qtip",msgTargets:{qtip:1,title:1,under:1,side:1,none:1},noWrap:true,labelableInsertions:["beforeBodyEl","afterBodyEl","beforeLabelTpl","afterLabelTpl","beforeSubTpl","afterSubTpl","beforeLabelTextTpl","afterLabelTextTpl","labelAttrTpl"],statics:{initTip:function(){var c=this.tip,b,a;if(c){return}b={id:"ext-form-error-tip",ui:"form-invalid"};if(Ext.supports.Touch){b.dismissDelay=0;b.anchor="top";b.showDelay=0;b.listeners={beforeshow:function(){this.minWidth=Ext.fly(this.anchorTarget).getWidth()}}}c=this.tip=Ext.create("Ext.tip.QuickTip",b);a=Ext.apply({},c.tagConfig);a.attribute="errorqtip";c.setTagConfig(a)},destroyTip:function(){this.tip=Ext.destroy(this.tip)}},initLabelable:function(){var a=this,b=a.padding;if(b){a.padding=undefined;a.extraMargins=Ext.Element.parseBox(b)}if(Ext.isIE8){a.restoreDisplay=Ext.Function.createDelayed(a.doRestoreDisplay,0,a)}if(!a.activeErrorsTpl){if(a.msgTarget==="title"){a.activeErrorsTpl=a.plaintextActiveErrorsTpl}else{a.activeErrorsTpl=a.htmlActiveErrorsTpl}}a.addCls([a.formItemCls,a.formItemCls+"-"+a.ui]);a.lastActiveError="";a.enableBubble("errorchange")},trimLabelSeparator:function(){var a=this,b=a.labelSeparator,c=a.fieldLabel||"",d=c.substr(c.length-1);return d===b?c.slice(0,-1):c},getFieldLabel:function(){return this.trimLabelSeparator()},setFieldLabel:function(c){c=c||"";var d=this,f=d.labelSeparator,b=d.labelEl,a=d.errorWrapEl,h=(d.labelAlign!=="top"),j=d.noLabelCls,g=d.errorWrapUnderSideLabelCls;d.fieldLabel=c;if(d.rendered){if(Ext.isEmpty(c)&&d.hideEmptyLabel){d.addCls(j);if(h&&a){a.removeCls(g)}}else{if(f){c=d.trimLabelSeparator()+f}b.dom.firstChild.innerHTML=c;d.removeCls(j);if(h&&a){a.addCls(g)}}d.updateLayout()}},setHideLabel:function(a){var b=this;if(a!==b.hideLabel){b.hideLabel=a;if(b.rendered){b[a?"addCls":"removeCls"](b.noLabelCls);b.updateLayout()}}},setHideEmptyLabel:function(b){var a=this,c;if(b!==a.hideEmptyLabel){a.hideEmptyLabel=b;if(a.rendered&&!a.hideLabel){c=b&&!a.getFieldLabel();a[c?"addCls":"removeCls"](a.noLabelCls);a.updateLayout()}}},getInsertionRenderData:function(a,b){var d=b.length,c,f;while(d--){c=b[d];f=this[c];if(f){if(typeof f!=="string"){if(!f.isTemplate){f=Ext.XTemplate.getTpl(this,c)}f=f.apply(a)}}a[c]=f||""}return a},getLabelableRenderData:function(){var v=this,m=v.labelAlign,f=(m==="top"),s=(m==="right"),p=(v.msgTarget==="side"),g=(v.msgTarget==="under"),h=v.errorMsgCls,j=v.labelPad,u=v.labelWidth,b=v.labelClsExtra||"",o=p?v.errorWrapSideCls:v.errorWrapUnderCls,a="",r="",d=v.hasVisibleLabel(),t=v.autoFitErrors,q=v.defaultBodyWidth,c,w;if(f){b+=" "+v.topLabelCls;if(j){r="padding-bottom:"+j+"px;"}if(p&&!t){b+=" "+v.topLabelSideErrorCls}}else{if(s){b+=" "+v.rightLabelCls}if(j){a+=v.getHorizontalPaddingStyle()+j+"px;"}a+="width:"+(u+(j?j:0))+"px;";r="width:"+u+"px"}if(d){if(!f&&g){o+=" "+v.errorWrapUnderSideLabelCls}}if(q){c="min-width:"+q+"px;max-width:"+q+"px;"}w={id:v.id,inputId:v.getInputId(),labelCls:v.labelCls,labelClsExtra:b,labelStyle:a+(v.labelStyle||""),labelInnerStyle:r,labelInnerCls:v.labelInnerCls,unselectableCls:Ext.Element.unselectableCls,bodyStyle:c,baseBodyCls:v.baseBodyCls,fieldBodyCls:v.fieldBodyCls,extraFieldBodyCls:v.extraFieldBodyCls,errorWrapCls:v.errorWrapCls,errorWrapExtraCls:o,renderError:p||g,invalidMsgCls:p?v.invalidIconCls:g?v.invalidUnderCls:"",errorMsgCls:h,growCls:v.grow?v.growCls:"",tipAnchorTarget:v.id+"-inputEl",errorWrapStyle:(p&&!t)?"visibility:hidden":"display:none",fieldLabel:v.getFieldLabel(),labelSeparator:v.labelSeparator};v.getInsertionRenderData(w,v.labelableInsertions);return w},getHorizontalPaddingStyle:function(){return"padding-right:"},beforeLabelRender:function(){var a=this;a.setFieldDefaults(a.getInherited().fieldDefaults);if(a.ownerLayout){a.addCls("x-"+a.ownerLayout.type+"-form-item")}if(!a.hasVisibleLabel()){a.addCls(a.noLabelCls)}},onLabelRender:function(){var f=this,d={},a=Ext.Element,b=f.errorWrapEl,g,c;if(b){b.setVisibilityMode((f.msgTarget==="side"&&!f.autoFitErrors)?a.VISIBILITY:a.DISPLAY)}if(f.extraMargins){g=f.el.getMargin();for(c in g){if(g.hasOwnProperty(c)){d["margin-"+c]=(g[c]+f.extraMargins[c])+"px"}}f.el.setStyle(d)}},hasVisibleLabel:function(){if(this.hideLabel){return false}return !(this.hideEmptyLabel&&!this.getFieldLabel())},getSubTplMarkup:function(){return""},getInputId:function(){return""},getActiveError:function(){return this.activeError||""},hasActiveError:function(){return !!this.getActiveError()},setActiveError:function(a){this.setActiveErrors(a)},getActiveErrors:function(){return this.activeErrors||[]},setActiveErrors:function(a){var m=this,o=m.errorWrapEl,h=m.msgTarget,g=h==="side",c=h==="qtip",d,f,j,b;a=Ext.Array.from(a);j=m.getTpl("activeErrorsTpl");m.activeErrors=a;f=m.activeError=j.apply({fieldLabel:m.fieldLabel,errors:a,listCls:"x-list-plain"});m.renderActiveError();if(m.rendered){d=m.getActionEl();if(g){m.errorEl.dom.setAttribute("data-errorqtip",f)}else{if(c){d.dom.setAttribute("data-errorqtip",f)}else{if(h==="title"){d.dom.setAttribute("title",f)}}}if(h!=="title"){m.ariaErrorEl.dom.innerHTML=a.join(". ");d.dom.setAttribute("aria-describedby",m.ariaErrorEl.id)}if(g||c){Ext.form.Labelable.initTip()}if(!m.msgTargets[h]){b=Ext.get(h);if(b){b.dom.innerHTML=f}}}if(o){o.setVisible(a.length>0);if(g&&m.autoFitErrors){m.labelEl.addCls(m.topLabelSideErrorCls)}m.updateLayout()}},unsetActiveError:function(){var g=this,c=g.errorWrapEl,d=g.msgTarget,b=g.restoreDisplay,f,a;if(g.hasActiveError()){delete g.activeError;delete g.activeErrors;g.renderActiveError();if(g.rendered){f=g.getActionEl();if(d==="qtip"){f.dom.removeAttribute("data-errorqtip")}else{if(d==="title"){f.dom.removeAttribute("title")}}if(d!=="title"){g.ariaErrorEl.dom.innerHTML="";f.dom.removeAttribute("aria-describedby")}if(!g.msgTargets[d]){a=Ext.get(d);if(a){a.dom.innerHTML=""}}if(c){c.hide();if(d==="side"&&g.autoFitErrors){g.labelEl.removeCls(g.topLabelSideErrorCls)}g.updateLayout();if(b){g.el.dom.style.display="block";g.restoreDisplay()}}}}},doRestoreDisplay:function(){var a=this.el;if(a&&a.dom){a.dom.style.display=""}},renderActiveError:function(){var a=this,c=a.getActiveError(),b=!!c;if(c!==a.lastActiveError){a.lastActiveError=c;a.fireEvent("errorchange",a,c)}if(a.rendered&&!a.destroyed&&!a.preventMark){a.toggleInvalidCls(b);if(a.errorEl){a.errorEl.dom.innerHTML=c}}},toggleInvalidCls:function(a){this.el[a?"addCls":"removeCls"](this.invalidCls)},setFieldDefaults:function(b){var a;for(a in b){if(!this.hasOwnProperty(a)){this[a]=b[a]}}}},0,0,0,0,0,0,[Ext.form,"Labelable"],function(){if(Ext.supports.Touch){this.prototype.msgTarget="side"}}));(Ext.cmd.derive("Ext.form.field.Field",Ext.Base,{mixinId:"field",isFormField:true,config:{validation:null,validationField:null},disabled:false,submitValue:true,validateOnChange:true,valuePublishEvent:"change",suspendCheckChange:0,dirty:false,initField:function(){var b=this,a=b.valuePublishEvent,c,d;b.initValue();if(Ext.isString(a)){b.on(a,b.publishValue,b)}else{for(d=0,c=a.length;d<c;++d){b.on(a[d],b.publishValue,b)}}},initValue:function(){var a=this;if("value" in a){a.suspendCheckChange++;a.setValue(a.value);a.suspendCheckChange--}a.initialValue=a.originalValue=a.lastValue=a.getValue()},getFieldIdentifier:function(){return this.isEditorComponent?this.dataIndex:this.name},getName:function(){return this.name},getValue:function(){return this.value},setValue:function(b){var a=this;a.value=b;a.checkChange();return a},isEqual:function(b,a){return String(b)===String(a)},isEqualAsString:function(b,a){return String(Ext.valueFrom(b,""))===String(Ext.valueFrom(a,""))},getSubmitData:function(){var a=this,b=null;if(!a.disabled&&a.submitValue){b={};b[a.getName()]=""+a.getValue()}return b},getModelData:function(c,d){var a=this,b=null;if(!a.disabled&&(a.submitValue||!d)){b={};b[a.getFieldIdentifier()]=a.getValue()}return b},reset:function(){var a=this;a.beforeReset();a.setValue(a.originalValue);a.clearInvalid();delete a.wasValid},beforeReset:Ext.emptyFn,resetOriginalValue:function(){this.originalValue=this.getValue();this.checkDirty()},checkChange:function(){var a=this,c,b;if(!a.suspendCheckChange){c=a.getValue();b=a.lastValue;if(!a.destroyed&&a.didValueChange(c,b)){a.lastValue=c;a.fireEvent("change",a,c,b);a.onChange(c,b)}}},didValueChange:function(b,a){return !this.isEqual(b,a)},onChange:function(a){var b=this;if(b.validateOnChange){b.validate()}b.checkDirty()},publishValue:function(){var a=this;if(a.rendered&&!a.getErrors().length){a.publishState("value",a.getValue())}},isDirty:function(){var a=this;return !a.disabled&&!a.isEqual(a.getValue(),a.originalValue)},checkDirty:function(){var a=this,b=a.isDirty();if(b!==a.wasDirty){a.dirty=b;a.fireEvent("dirtychange",a,b);a.onDirtyChange(b);a.wasDirty=b}},onDirtyChange:Ext.emptyFn,getErrors:function(a){var b=[],f=this.getValidationField(),d=this.getValidation(),c;if(f){c=f.validate(a);if(c!==true){b.push(c)}}if(d&&d!==true){b.push(d)}return b},isValid:function(){var a=this;return a.disabled||Ext.isEmpty(a.getErrors())},validate:function(){return this.checkValidityChange(this.isValid())},checkValidityChange:function(b){var a=this;if(b!==a.wasValid){a.wasValid=b;a.fireEvent("validitychange",a,b)}return b},batchChanges:function(a){try{this.suspendCheckChange++;a()}catch(b){throw b}finally{this.suspendCheckChange--}this.checkChange()},isFileUpload:function(){return false},extractFileInput:function(){return null},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,updateValidation:function(a,b){if(b){this.validate()}},privates:{resetToInitialValue:function(){var b=this,a=b.originalValue;b.originalValue=b.initialValue;b.reset();b.originalValue=a}}},0,0,0,0,0,0,[Ext.form.field,"Field"],0));(Ext.cmd.derive("Ext.form.field.Base",Ext.Component,{alternateClassName:["Ext.form.Field","Ext.form.BaseField"],focusable:true,shrinkWrap:true,fieldSubTpl:['<input id="{id}" data-ref="inputEl" type="{type}" {inputAttrTpl}',' size="1"','<tpl if="name"> name="{name}"</tpl>','<tpl if="value"> value="{[Ext.util.Format.htmlEncode(values.value)]}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','{%if (values.maxLength !== undefined){%} maxlength="{maxLength}"{%}%}','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {editableCls} {inputCls}" autocomplete="off"/>',{disableFormats:true}],defaultBindProperty:"value",autoEl:{role:"presentation"},subTplInsertions:["inputAttrTpl"],childEls:["inputEl"],inputType:"text",isTextInput:true,invalidText:"The value in this field is invalid",fieldCls:"x-form-field",focusCls:"form-focus",dirtyCls:"x-form-dirty",checkChangeEvents:Ext.isIE&&(!document.documentMode||document.documentMode<=9)?["change","propertychange","keyup"]:["change","input","textInput","keyup","dragdrop"],ignoreChangeRe:/data\-errorqtip|style\.|className/,checkChangeBuffer:50,liquidLayout:true,readOnly:false,readOnlyCls:"x-form-readonly",validateOnBlur:true,hasFocus:false,baseCls:"x-field",fieldBodyCls:"x-field-body",maskOnDisable:false,stretchInputElFixed:true,ariaEl:"inputEl",initComponent:function(){var a=this;Ext.Component.prototype.initComponent.call(this);a.subTplData=a.subTplData||{};a.initLabelable();a.initField();a.initDefaultName();if(a.readOnly){a.addCls(a.readOnlyCls)}a.addCls("x-form-type-"+a.inputType)},initDefaultName:function(){var a=this;if(!a.name){a.name=a.getInputId()}},getInputId:function(){return this.inputId||(this.inputId=this.id+"-inputEl")},getSubTplData:function(d){var g=this,f=g.inputType,b=g.getInputId(),a,c;a=Ext.apply({ui:g.ui,id:b,cmpId:g.id,name:g.name||b,disabled:g.disabled,readOnly:g.readOnly,value:g.getRawValue(),type:f,fieldCls:g.fieldCls,fieldStyle:g.getFieldStyle(),childElCls:d.childElCls,tabIdx:g.tabIndex,inputCls:g.inputCls,typeCls:"x-form-"+(g.isTextInput?"text":f)},g.subTplData);if(g.ariaRole){c={role:g.ariaRole,"aria-hidden":!!g.hidden,"aria-disabled":!!g.disabled,"aria-readonly":!!g.readOnly,"aria-invalid":false};if(g.ariaLabel){c["aria-label"]=g.ariaLabel}if(g.format&&g.formatText&&!a.title){c.title=Ext.String.formatEncode(g.formatText,g.format)}a.inputElAriaAttributes=Ext.apply(c,g.getAriaAttributes())}g.getInsertionRenderData(a,g.subTplInsertions);return a},getSubTplMarkup:function(c){var d=this,f=d.getSubTplData(c),g=d.getTpl("preSubTpl"),a=d.getTpl("postSubTpl"),b="";if(g){b+=g.apply(f)}b+=d.getTpl("fieldSubTpl").apply(f);if(a){b+=a.apply(f)}return b},initRenderData:function(){return Ext.applyIf(Ext.Component.prototype.initRenderData.call(this),this.getLabelableRenderData())},setFieldStyle:function(b){var c=this,a=c.inputEl;if(a){a.applyStyles(b)}c.fieldStyle=b},getFieldStyle:function(){var a=this.fieldStyle;return Ext.isObject(a)?Ext.DomHelper.generateStyles(a,null,true):a||""},onRender:function(){this.callParent(arguments);this.mixins.labelable.self.initTip();this.renderActiveError()},onFocusLeave:function(a){Ext.Component.prototype.onFocusLeave.call(this,a);this.completeEdit()},completeEdit:Ext.emptyFn,isFileUpload:function(){return this.inputType==="file"},getSubmitData:function(){var b=this,c=null,a;if(!b.disabled&&b.submitValue){a=b.getSubmitValue();if(a!==null){c={};c[b.getName()]=a}}return c},getSubmitValue:function(){return this.processRawValue(this.getRawValue())},getRawValue:function(){var b=this,a=(b.inputEl?b.inputEl.getValue():Ext.valueFrom(b.rawValue,""));b.rawValue=a;return a},setRawValue:function(a){var b=this,c=b.rawValue;if(!b.transformRawValue.$nullFn){a=b.transformRawValue(a)}a=Ext.valueFrom(a,"");if(c===undefined||c!==a||b.valueContainsPlaceholder){b.rawValue=a;if(b.inputEl){b.bindChangeEvents(false);b.inputEl.dom.value=a;b.bindChangeEvents(true)}if(b.rendered&&b.reference){b.publishState("rawValue",a)}}return a},transformRawValue:Ext.identityFn,valueToRaw:function(a){return""+Ext.valueFrom(a,"")},rawToValue:Ext.identityFn,processRawValue:Ext.identityFn,getValue:function(){var a=this,b=a.rawToValue(a.processRawValue(a.getRawValue()));a.value=b;return b},setValue:function(b){var a=this;a.setRawValue(a.valueToRaw(b));return a.mixins.field.setValue.call(a,b)},onBoxReady:function(){var a=this;Ext.Component.prototype.onBoxReady.apply(this,arguments);if(a.setReadOnlyOnBoxReady){a.setReadOnly(a.readOnly)}},onDisable:function(){var a=this,b=a.inputEl;Ext.Component.prototype.onDisable.call(this);if(b){b.dom.disabled=true;if(a.hasActiveError()){a.clearInvalid();a.hadErrorOnDisable=true}}if(a.wasValid===false){a.checkValidityChange(true)}},onEnable:function(){var d=this,a=d.inputEl,b=d.preventMark,c;Ext.Component.prototype.onEnable.call(this);if(a){a.dom.disabled=false}if(d.wasValid!==undefined){d.forceValidation=true;d.preventMark=!d.hadErrorOnDisable;c=d.isValid();d.forceValidation=false;d.preventMark=b;d.checkValidityChange(c)}delete d.hadErrorOnDisable},setReadOnly:function(b){var d=this,a=d.inputEl,c=d.readOnly;b=!!b;d[b?"addCls":"removeCls"](d.readOnlyCls);d.readOnly=b;if(a){a.dom.readOnly=b;d.ariaEl.dom.setAttribute("aria-readonly",b)}else{if(d.rendering){d.setReadOnlyOnBoxReady=true}}if(b!==c){d.fireEvent("writeablechange",d,b)}},fireKey:function(a){if(a.isSpecialKey()){this.fireEvent("specialkey",this,a)}},initEvents:function(){var f=this,h=f.inputEl,g=f.onFieldMutation,c=f.checkChangeEvents,a=c.length,b,d;if(h){f.mon(h,Ext.supports.SpecialKeyDownRepeat?"keydown":"keypress",f.fireKey,f);for(b=0;b<a;++b){d=c[b];if(d==="propertychange"){f.usesPropertychange=true}if(d==="textInput"){f.usesTextInput=true}f.mon(h,d,g,f)}}Ext.Component.prototype.initEvents.call(this)},onFieldMutation:function(a){if(!this.readOnly&&!(a.type==="propertychange"&&this.ignoreChangeRe.test(a.browserEvent.propertyName))){this.startCheckChangeTask()}},startCheckChangeTask:function(){var b=this,a=b.checkChangeTask;if(!a){b.checkChangeTask=a=new Ext.util.DelayedTask(b.doCheckChangeTask,b)}if(!b.bindNotifyListener){b.bindNotifyListener=Ext.on("beforebindnotify",b.onBeforeNotify,b,{destroyable:true})}a.delay(b.checkChangeBuffer)},doCheckChangeTask:function(){var a=this.bindNotifyListener;if(a){a.destroy();this.bindNotifyListener=null}this.checkChange()},publishValue:function(){var a=this;if(a.rendered&&!a.getErrors().length){a.publishState("value",a.getValue())}},onDirtyChange:function(b){var a=this;a[b?"addCls":"removeCls"](a.dirtyCls);if(a.rendered&&a.reference){a.publishState("dirty",b)}},isValid:function(){var c=this,b=c.disabled,a=c.forceValidation||!b;return a?c.validateValue(c.processRawValue(c.getRawValue())):b},validateValue:function(d){var c=this,b=c.getErrors(d),a=Ext.isEmpty(b);if(!c.preventMark){if(a){c.clearInvalid()}else{c.markInvalid(b)}}return a},markInvalid:function(b){var f=this,c=f.ariaEl.dom,d=f.getActiveError(),a;f.setActiveErrors(Ext.Array.from(b));a=f.getActiveError();if(d!==a){f.setError(a);if(!f.ariaStaticRoles[f.ariaRole]&&c){c.setAttribute("aria-invalid",true)}}},clearInvalid:function(){var a=this,b=a.ariaEl.dom,c=a.hasActiveError();delete a.hadErrorOnDisable;a.unsetActiveError();if(c){a.setError("");if(!a.ariaStaticRoles[a.ariaRole]&&b){b.setAttribute("aria-invalid",false)}}},setError:function(c){var a=this,d=a.msgTarget,b;if(a.rendered){if(d==="title"||d==="qtip"){b=d==="qtip"?"data-errorqtip":"title";a.getActionEl().dom.setAttribute(b,c||"")}else{a.updateLayout()}}},renderActiveError:function(){var a=this,c=a.hasActiveError(),b=a.invalidCls+"-field";if(a.inputEl){a.inputEl[c?"addCls":"removeCls"]([b,b+"-"+a.ui])}a.mixins.labelable.renderActiveError.call(a)},beforeDestroy:function(){var b=this,a=b.checkChangeTask;if(a){a.cancel()}b.checkChangeTask=b.bindNotifyListener=Ext.destroy(b.bindNotifyListener);Ext.Component.prototype.beforeDestroy.call(this)},privates:{applyBind:function(a,d){var c=this,b=d&&d.value,g,f;g=Ext.Component.prototype.applyBind.call(this,a,d);if(g){f=g.value;c.hasBindingValue=!!f;if(f!==b&&c.getInherited().modelValidation){c.updateValueBinding(g)}}return g},applyRenderSelectors:function(){var a=this;Ext.Component.prototype.applyRenderSelectors.call(this);if(!a.inputEl){a.inputEl=a.el.getById(a.getInputId())}},bindChangeEvents:function(c){var a=c?"resumeEvent":"suspendEvent",b=this.inputEl;if(this.usesPropertychange){b[a]("propertychange")}if(this.usesTextInput){b[a]("textInput")}},getActionEl:function(){return this.inputEl||this.el},getFocusEl:function(){return this.inputEl},initRenderTpl:function(){var a=this;if(!a.hasOwnProperty("renderTpl")){a.renderTpl=a.getTpl("labelableRenderTpl")}return Ext.Component.prototype.initRenderTpl.call(this)},onBeforeNotify:function(){this.checkChangeTask.cancel();this.checkChange()},updateValueBinding:function(b){var a=this,d=b.value,c=b.$fieldBinding;if(c){c.destroy();b.$fieldBinding=null}if(d&&d.bindValidationField){a.fieldBinding=d.bindValidationField("setValidationField",a)}}},deprecated:{"5":{methods:{doComponentLayout:function(){this.bindChangeEvents(false);this.callParent(arguments);this.bindChangeEvents(true)}}}}},0,["field"],["component","box","field"],{component:true,box:true,field:true},["widget.field"],[[Ext.form.Labelable.prototype.mixinId||Ext.form.Labelable.$className,Ext.form.Labelable],[Ext.form.field.Field.prototype.mixinId||Ext.form.field.Field.$className,Ext.form.field.Field]],[Ext.form.field,"Base",Ext.form,"Field",Ext.form,"BaseField"],0));(Ext.cmd.derive("Ext.form.field.VTypes",Ext.Base,(function(){var a=/^[a-zA-Z_]+$/,b=/^[a-zA-Z0-9_]+$/,d=/^(")?(?:[^\."\s])(?:(?:[\.])?(?:[\w\-!#$%&'*+/=?^_`{|}~]))*\1@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,c=/(((^https?)|(^ftp)):\/\/((([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*)|(localhost|LOCALHOST))\/?)/i;return{singleton:true,alternateClassName:"Ext.form.VTypes",email:function(f){return d.test(f)},emailText:'This field should be an e-mail address in the format "user@example.com"',emailMask:/[\w.\-@'"!#$%&'*+/=?^_`{|}~]/i,url:function(f){return c.test(f)},urlText:'This field should be a URL in the format "http://www.example.com"',alpha:function(f){return a.test(f)},alphaText:"This field should only contain letters and _",alphaMask:/[a-z_]/i,alphanum:function(f){return b.test(f)},alphanumText:"This field should only contain letters, numbers and _",alphanumMask:/[a-z0-9_]/i}}()),0,0,0,0,0,0,[Ext.form.field,"VTypes",Ext.form,"VTypes"],0));(Ext.cmd.derive("Ext.form.trigger.Trigger",Ext.Base,{factoryConfig:{defaultType:"trigger"},repeatClick:false,hidden:false,hideOnReadOnly:undefined,weight:0,preventMouseDown:true,baseCls:"x-form-trigger",focusCls:"x-form-trigger-focus",overCls:"x-form-trigger-over",clickCls:"x-form-trigger-click",validIdRe:Ext.validIdRe,renderTpl:['<div id="{triggerId}" class="{baseCls} {baseCls}-{ui} {cls} {cls}-{ui} {extraCls} ','{childElCls}"<tpl if="triggerStyle"> style="{triggerStyle}"</tpl>>',"{[values.$trigger.renderBody(values)]}","</div>"],statics:{weightComparator:function(a,b){return a.weight-b.weight}},constructor:function(c){var a=this,b;Ext.apply(a,c);if(a.compat4Mode){b=a.cls;a.focusCls=[a.focusCls,b+"-focus"];a.overCls=[a.overCls,b+"-over"];a.clickCls=[a.clickCls,b+"-click"]}},afterFieldRender:function(){this.initEvents()},destroy:function(){var a=this;a.clickRepeater=a.el=Ext.destroy(a.clickRepeater,a.el);a.callParent()},getBodyRenderData:Ext.emptyFn,getEl:function(){return this.el||null},getStateEl:function(){return this.el},hide:function(){var b=this,a=b.el;b.hidden=true;if(a){a.hide()}},initEvents:function(){var b=this,c=b.isFieldEnabled,a=b.getStateEl(),d=b.el;a.addClsOnOver(b.overCls,c,b);a.addClsOnClick(b.clickCls,c,b);if(b.repeatClick){b.clickRepeater=new Ext.util.ClickRepeater(d,{preventDefault:true,handler:b.onClick,listeners:{mousedown:b.onClickRepeaterMouseDown,scope:b},scope:b})}else{b.field.mon(d,{click:b.onClick,mousedown:b.onMouseDown,scope:b})}},isFieldEnabled:function(){return !this.field.disabled},isVisible:function(){var b=this,a=b.field,c=false;if(b.hidden||!a||!b.rendered||b.destroyed){c=true}return !c},onClick:function(){var f=this,c=arguments,b=f.clickRepeater?c[1]:c[0],d=f.handler,a=f.field;if(d&&!a.readOnly&&f.isFieldEnabled()){Ext.callback(f.handler,f.scope,[a,f,b],0,a)}},resolveListenerScope:function(a){return this.field.resolveSatelliteListenerScope(this,a)},onMouseDown:function(a){if(a.pointerType!=="touch"&&!this.field.owns(Ext.Element.getActiveElement())){this.field.inputEl.focus()}if(this.preventMouseDown){a.preventDefault()}},onClickRepeaterMouseDown:function(b,a){if(!a.parentEvent||a.parentEvent.type==="mousedown"){this.field.inputEl.focus()}a.preventDefault()},onFieldBlur:function(){this.getStateEl().removeCls(this.focusCls)},onFieldFocus:function(){this.getStateEl().addCls(this.focusCls)},onFieldRender:function(){var b=this,a=b.el=b.field.triggerWrap.selectNode("#"+b.domId,false);a.setVisibilityMode(Ext.Element.DISPLAY);b.rendered=true},renderBody:function(c){var b=this,a=b.bodyTpl;Ext.apply(c,b.getBodyRenderData());return a?Ext.XTemplate.getTpl(b,"bodyTpl").apply(c):""},renderTrigger:function(c){var a=this,d=a.width,b=a.hidden?"display:none;":"";if(d){b+="width:"+d}return Ext.XTemplate.getTpl(a,"renderTpl").apply({$trigger:a,fieldData:c,ui:c.ui,childElCls:c.childElCls,triggerId:a.domId=a.field.id+"-trigger-"+a.id,cls:a.cls,triggerStyle:b,extraCls:a.extraCls,baseCls:a.baseCls})},setHidden:function(a){if(a!==this.hidden){this[a?"hide":"show"]()}},setVisible:function(a){this.setHidden(!a)},show:function(){var b=this,a=b.el;b.hidden=false;if(a){a.show()}}},1,0,0,0,["trigger.trigger"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.form.trigger,"Trigger"],0));(Ext.cmd.derive("Ext.form.field.Text",Ext.form.field.Base,{alternateClassName:["Ext.form.TextField","Ext.form.Text"],config:{hideTrigger:false,triggers:undefined},renderConfig:{editable:true},growMin:30,growMax:800,growAppend:"W",allowBlank:true,validateBlank:false,allowOnlyWhitespace:true,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",blankText:"This field is required",regexText:"",emptyText:"",emptyCls:"x-form-empty-field",requiredCls:"x-form-required-field",valueContainsPlaceholder:false,ariaRole:"textbox",repeatTriggerClick:false,triggerWrapCls:"x-form-trigger-wrap",triggerWrapFocusCls:"x-form-trigger-wrap-focus",triggerWrapInvalidCls:"x-form-trigger-wrap-invalid",fieldBodyCls:"x-form-text-field-body",inputWrapCls:"x-form-text-wrap",inputWrapFocusCls:"x-form-text-wrap-focus",inputWrapInvalidCls:"x-form-text-wrap-invalid",growCls:"x-form-text-grow",needArrowKeys:true,squashMouseUp:{mouseup:function(){},translate:false,single:true,preventDefault:true},childEls:["triggerWrap","inputWrap"],preSubTpl:['<div id="{cmpId}-triggerWrap" data-ref="triggerWrap"',' role="presentation" class="{triggerWrapCls} {triggerWrapCls}-{ui}">','<div id={cmpId}-inputWrap data-ref="inputWrap"',' role="presentation" class="{inputWrapCls} {inputWrapCls}-{ui}">'],postSubTpl:["</div>",'<tpl for="triggers">{[values.renderTrigger(parent)]}</tpl>',"</div>"],initComponent:function(){var b=this,a=b.emptyCls;if(b.allowOnlyWhitespace===false){b.allowBlank=false}if(b.size){b.defaultBodyWidth=b.size*6.5+20}if(!b.onTrigger1Click){b.onTrigger1Click=b.onTriggerClick}Ext.form.field.Base.prototype.initComponent.call(this);if(b.readOnly){b.setReadOnly(b.readOnly)}b.fieldFocusCls=b.baseCls+"-focus";b.emptyUICls=a+" "+a+"-"+b.ui;b.addStateEvents("change")},initEvents:function(){var b=this,a=b.inputEl;Ext.form.field.Base.prototype.initEvents.call(this);if(b.selectOnFocus||b.emptyText){b.mon(a,"mousedown",b.onMouseDown,b)}if(b.maskRe||(b.vtype&&b.disableKeyFilter!==true&&(b.maskRe=Ext.form.field.VTypes[b.vtype+"Mask"]))){b.mon(a,"keypress",b.filterKeys,b)}if(b.enableKeyEvents){b.mon(a,{scope:b,keyup:b.onKeyUp,keydown:b.onKeyDown,keypress:b.onKeyPress})}},isEqual:function(b,a){return this.isEqualAsString(b,a)},onChange:function(b,a){Ext.form.field.Base.prototype.onChange.apply(this,arguments);this.autoSize()},getSubTplData:function(b){var c=this,f=c.getRawValue(),h=c.emptyText&&f.length<1,j=c.maxLength,g,d,a;if(c.enforceMaxLength){if(j===Number.MAX_VALUE){j=undefined}}else{j=undefined}if(h){if(Ext.supports.Placeholder){g=c.emptyText}else{f=c.emptyText;c.valueContainsPlaceholder=true}}d=Ext.apply(Ext.form.field.Base.prototype.getSubTplData.call(this,b),{triggerWrapCls:c.triggerWrapCls,inputWrapCls:c.inputWrapCls,triggers:c.orderedTriggers,maxLength:j,readOnly:!c.editable||c.readOnly,placeholder:g,value:f,fieldCls:c.fieldCls+((h&&(g||f))?" "+c.emptyUICls:"")+(c.allowBlank?"":" "+c.requiredCls)});a=d.inputElAriaAttributes;if(a){a["aria-required"]=!c.allowBlank}return d},onRender:function(){var f=this,d=f.getTriggers(),a=[],b,c;if(Ext.supports.FixedTableWidthBug){f.el._needsTableWidthFix=true}(arguments.callee.$previous||Ext.form.field.Base.prototype.onRender).call(this);if(d){this.invokeTriggers("onFieldRender");for(b in d){a.push(d[b].el)}c=f.triggerEl=f.triggerCell=new Ext.CompositeElement(a,true)}f.inputCell=f.inputWrap},afterRender:function(){var a=this;a.autoSize();Ext.form.field.Base.prototype.afterRender.call(this);a.invokeTriggers("afterFieldRender")},onMouseDown:function(){if(!this.hasFocus){Ext.getDoc().on(this.squashMouseUp)}},applyTriggers:function(m){var o=this,f=o.getHideTrigger(),a=o.readOnly,b=o.orderedTriggers=[],p=o.repeatTriggerClick,d,j,g,c,h;if(!m){m={};if(o.triggerCls&&!o.trigger1Cls){o.trigger1Cls=o.triggerCls}for(h=1;c=o["trigger"+h+"Cls"];h++){m["trigger"+h]={cls:c,extraCls:"x-trigger-index-"+h,handler:"onTrigger"+h+"Click",compat4Mode:true,scope:o}}}for(d in m){if(m.hasOwnProperty(d)){j=m[d];j.field=o;j.id=d;if((a&&j.hideOnReadOnly!==false)||(f&&j.hidden!==false)){j.hidden=true}if(p&&(j.repeatClick!==false)){j.repeatClick=true}g=m[d]=Ext.form.trigger.Trigger.create(j);b.push(g)}}Ext.Array.sort(b,Ext.form.trigger.Trigger.weightComparator);return m},invokeTriggers:function(b,d){var g=this,f=g.getTriggers(),a,c;if(f){for(a in f){if(f.hasOwnProperty(a)){c=f[a];c[b].apply(c,d||[])}}}},getTrigger:function(a){return this.getTriggers()[a]},updateHideTrigger:function(a){this.invokeTriggers(a?"hide":"show")},updateEditable:function(a,b){this.setReadOnlyAttr(!a||this.readOnly)},setReadOnly:function(a){var f=this,d=f.getTriggers(),c=f.getHideTrigger(),b,g;a=!!a;Ext.form.field.Base.prototype.setReadOnly.call(this,a);if(f.rendered){f.setReadOnlyAttr(a||!f.editable)}if(d){for(g in d){b=d[g];if(b.hideOnReadOnly===true||(b.hideOnReadOnly!==false&&!c)){b.setVisible(!a)}}}},setReadOnlyAttr:function(b){var d=this,c="readonly",a=d.inputEl.dom;if(b){a.setAttribute(c,c)}else{a.removeAttribute(c)}if(d.ariaRole){d.ariaEl.dom.setAttribute("aria-readonly",!!b)}},processRawValue:function(f){var d=this,b=d.stripCharsRe,c,a;if(b){if(!b.global){c="g";c+=(b.ignoreCase)?"i":"";c+=(b.multiline)?"m":"";b=new RegExp(b.source,c)}a=f.replace(b,"");if(a!==f){d.setRawValue(a);f=a}}return f},onDisable:function(){Ext.form.field.Base.prototype.onDisable.call(this);if(Ext.isIE){this.inputEl.dom.unselectable="on"}},onEnable:function(){Ext.form.field.Base.prototype.onEnable.call(this);if(Ext.isIE){this.inputEl.dom.unselectable=""}},onKeyDown:function(a){this.fireEvent("keydown",this,a)},onKeyUp:function(a){this.fireEvent("keyup",this,a)},onKeyPress:function(a){this.fireEvent("keypress",this,a)},reset:function(){Ext.form.field.Base.prototype.reset.call(this);this.applyEmptyText()},applyEmptyText:function(){var c=this,b=c.emptyText,a;if(c.rendered&&b){a=c.getRawValue().length<1&&!c.hasFocus;if(Ext.supports.Placeholder){c.inputEl.dom.placeholder=b}else{if(a){c.setRawValue(b);c.valueContainsPlaceholder=true}}if(a){c.inputEl.addCls(c.emptyUICls)}else{c.inputEl.removeCls(c.emptyUICls)}c.autoSize()}},getEmptyText:function(){return this.emptyText},setEmptyText:function(a){var f=this,b=f.inputEl,d=b&&b.dom,c=a||"";if(a){f.emptyText=c;f.applyEmptyText()}else{if(d){if(Ext.supports.Placeholder){d.removeAttribute("placeholder")}else{if(d.value!==f.getRawValue()){d.value="";b.removeCls(f.emptyUICls)}}f.valueContainsPlaceholder=false}}f.emptyText=c;return f},afterFirstLayout:function(){Ext.form.field.Base.prototype.afterFirstLayout.call(this);if(Ext.isIE&&this.disabled){var a=this.inputEl;if(a){a.dom.unselectable="on"}}},toggleInvalidCls:function(a){var b=a?"addCls":"removeCls";Ext.form.field.Base.prototype.toggleInvalidCls.call(this);this.triggerWrap[b](this.triggerWrapInvalidCls);this.inputWrap[b](this.inputWrapInvalidCls)},beforeFocus:function(){var d=this,a=d.inputEl,c=d.emptyText,b;Ext.form.field.Base.prototype.beforeFocus.apply(this,arguments);if((c&&!Ext.supports.Placeholder)&&(a.dom.value===d.emptyText&&d.valueContainsPlaceholder)){d.setRawValue("");b=true;a.removeCls(d.emptyUICls);d.valueContainsPlaceholder=false}else{if(Ext.supports.Placeholder){a.removeCls(d.emptyUICls)}}},onFocus:function(b){var a=this;Ext.form.field.Base.prototype.onFocus.apply(this,arguments);if(a.selectOnFocus){a.inputEl.dom.select()}if(a.emptyText){a.autoSize()}a.addCls(a.fieldFocusCls);a.triggerWrap.addCls(a.triggerWrapFocusCls);a.inputWrap.addCls(a.inputWrapFocusCls);a.invokeTriggers("onFieldFocus",[b])},onBlur:function(b){var a=this;Ext.form.field.Base.prototype.onBlur.apply(this,arguments);a.removeCls(a.fieldFocusCls);a.triggerWrap.removeCls(a.triggerWrapFocusCls);a.inputWrap.removeCls(a.inputWrapFocusCls);a.invokeTriggers("onFieldBlur",[b])},completeEdit:function(a){Ext.form.field.Base.prototype.completeEdit.call(this,a);this.applyEmptyText()},filterKeys:function(b){if((b.ctrlKey&&!b.altKey)||b.isSpecialKey()){return}var a=String.fromCharCode(b.getCharCode());if(!this.maskRe.test(a)){b.stopEvent()}},getState:function(){return this.addPropertyToState(Ext.form.field.Base.prototype.getState.call(this),"value")},applyState:function(a){Ext.form.field.Base.prototype.applyState.apply(this,arguments);if(a.hasOwnProperty("value")){this.setValue(a.value)}},getRawValue:function(){var b=this,a=Ext.form.field.Base.prototype.getRawValue.call(this);if(a===b.emptyText&&b.valueContainsPlaceholder){a=""}return a},setValue:function(c){var b=this,a=b.inputEl;if(a&&b.emptyText&&!Ext.isEmpty(c)){a.removeCls(b.emptyUICls);b.valueContainsPlaceholder=false}Ext.form.field.Base.prototype.setValue.apply(this,arguments);b.applyEmptyText();return b},getErrors:function(b){b=arguments.length?(b==null?"":b):this.processRawValue(this.getRawValue());var j=this,p=Ext.form.field.Base.prototype.getErrors.call(this,b),c=j.validator,g=j.vtype,m=Ext.form.field.VTypes,o=j.regex,a=Ext.String.format,d,h,f;if(Ext.isFunction(c)){d=c.call(j,b);if(d!==true){p.push(d)}}h=j.allowOnlyWhitespace?b:Ext.String.trim(b);if(h.length<1||(b===j.emptyText&&j.valueContainsPlaceholder)){if(!j.allowBlank){p.push(j.blankText)}if(!j.validateBlank){return p}f=true}if(!f&&b.length<j.minLength){p.push(a(j.minLengthText,j.minLength))}if(b.length>j.maxLength){p.push(a(j.maxLengthText,j.maxLength))}if(g){if(!m[g](b,j)){p.push(j.vtypeText||m[g+"Text"])}}if(o&&!o.test(b)){p.push(j.regexText||j.invalidText)}return p},selectText:function(h,b){var g=this,d=g.getRawValue(),a=d.length,f=g.inputEl.dom,c;if(a>0){h=h===undefined?0:Math.min(h,a);b=b===undefined?a:Math.min(b,a);if(f.setSelectionRange){f.setSelectionRange(h,b)}else{if(f.createTextRange){c=f.createTextRange();c.moveStart("character",h);c.moveEnd("character",b-a);c.select()}}}},getGrowWidth:function(){return this.inputEl.dom.value},autoSize:function(){var c=this,b,h,f,g,a,d;if(c.grow&&c.rendered&&c.getSizeModel().width.auto){g=c.inputEl;b=c.getTriggers();f=0;d=Ext.util.Format.htmlEncode(c.getGrowWidth()||(c.hasFocus?"":c.emptyText)||"");d+=c.growAppend;for(h in b){f+=b[h].el.getWidth()}a=g.getTextWidth(d)+f+c.inputWrap.getBorderWidth("lr")+c.triggerWrap.getBorderWidth("lr");a=Math.min(Math.max(a,c.growMin),c.growMax);c.bodyEl.setWidth(a);c.updateLayout();c.fireEvent("autosize",c,a)}},onDestroy:function(){var a=this;a.invokeTriggers("destroy");Ext.destroy(a.triggerRepeater);Ext.form.field.Base.prototype.onDestroy.call(this)},onTriggerClick:Ext.emptyFn,privates:{getTdType:function(){return"textfield"}},deprecated:{5:{methods:{getTriggerWidth:function(){var c=this.getTriggers(),b=0,a;if(c&&this.rendered){for(a in c){if(c.hasOwnProperty(a)){b+=c[a].el.getWidth()}}}return b}}}}},0,["textfield"],["component","box","field","textfield"],{component:true,box:true,field:true,textfield:true},["widget.textfield"],0,[Ext.form.field,"Text",Ext.form,"TextField",Ext.form,"Text"],0));(Ext.cmd.derive("Ext.form.field.TextArea",Ext.form.field.Text,{alternateClassName:"Ext.form.TextArea",fieldSubTpl:['<textarea id="{id}" data-ref="inputEl" {inputAttrTpl}','<tpl if="name"> name="{name}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','<tpl if="maxLength !== undefined"> maxlength="{maxLength}"</tpl>','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {inputCls}" ','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>',' autocomplete="off">\n','<tpl if="value">{[Ext.util.Format.htmlEncode(values.value)]}</tpl>',"</textarea>",{disableFormats:true}],growMin:60,growMax:1000,growAppend:"\n-",enterIsSpecial:false,preventScrollbars:false,returnRe:/\r/g,inputCls:"x-form-textarea",extraFieldBodyCls:"x-form-textarea-body",ariaAttributes:{"aria-multiline":true},getSubTplData:function(d){var b=this,a=b.getFieldStyle(),c=Ext.form.field.Text.prototype.getSubTplData.apply(this,arguments);if(b.grow){if(b.preventScrollbars){c.fieldStyle=(a||"")+";overflow:hidden;height:"+b.growMin+"px"}}return c},afterRender:function(){var a=this;Ext.form.field.Text.prototype.afterRender.apply(this,arguments);a.needsMaxCheck=a.enforceMaxLength&&a.maxLength!==Number.MAX_VALUE&&!Ext.supports.TextAreaMaxLength;if(a.needsMaxCheck){a.inputEl.on("paste",a.onPaste,a)}},transformRawValue:function(a){return this.stripReturns(a)},getValue:function(){return this.stripReturns(Ext.form.field.Text.prototype.getValue.call(this))},valueToRaw:function(a){a=this.stripReturns(a);return Ext.form.field.Text.prototype.valueToRaw.call(this,a)},stripReturns:function(a){if(a&&typeof a==="string"){a=a.replace(this.returnRe,"")}return a},onPaste:function(){var a=this;if(!a.pasteTask){a.pasteTask=new Ext.util.DelayedTask(a.pasteCheck,a)}a.pasteTask.delay(1)},pasteCheck:function(){var c=this,a=c.getValue(),b=c.maxLength;if(a.length>b){a=a.substr(0,b);c.setValue(a)}},fireKey:function(b){var d=this,c=b.getKey(),a;if(b.isSpecialKey()&&(d.enterIsSpecial||(c!==b.ENTER||b.hasModifier()))){d.fireEvent("specialkey",d,b)}if(d.needsMaxCheck&&c!==b.BACKSPACE&&c!==b.DELETE&&!b.isNavKeyPress()&&!d.isCutCopyPasteSelectAll(b,c)){a=d.getValue();if(a.length>=d.maxLength){b.stopEvent()}}},isCutCopyPasteSelectAll:function(b,a){if(b.ctrlKey){return a===b.A||a===b.C||a===b.V||a===b.X}return false},autoSize:function(){var f=this,b,c,d,a;if(f.grow&&f.rendered&&f.getSizeModel().height.auto){b=f.inputEl;d=b.getWidth(true);a=Ext.util.Format.htmlEncode(b.dom.value)||"&#160;";a+=f.growAppend;a=a.replace(/\n/g,"<br/>");c=Ext.util.TextMetrics.measure(b,a,d).height+b.getPadding("tb")+f.inputWrap.getBorderWidth("tb")+f.triggerWrap.getBorderWidth("tb");c=Math.min(Math.max(c,f.growMin),f.growMax);f.bodyEl.setHeight(c);f.updateLayout();f.fireEvent("autosize",f,c)}},beforeDestroy:function(){var a=this.pasteTask;if(a){a.cancel();this.pasteTask=null}Ext.form.field.Text.prototype.beforeDestroy.call(this)}},0,["textarea","textareafield"],["component","box","field","textfield","textareafield","textarea"],{component:true,box:true,field:true,textfield:true,textareafield:true,textarea:true},["widget.textarea","widget.textareafield"],0,[Ext.form.field,"TextArea",Ext.form,"TextArea"],0));(Ext.cmd.derive("Ext.window.MessageBox",Ext.window.Window,{OK:1,YES:2,NO:4,CANCEL:8,OKCANCEL:9,YESNO:6,YESNOCANCEL:14,INFO:"x-message-box-info",WARNING:"x-message-box-warning",QUESTION:"x-message-box-question",ERROR:"x-message-box-error",hideMode:"offsets",closeAction:"hide",resizable:false,scrollable:true,title:"&#160;",defaultMinWidth:250,defaultMaxWidth:600,defaultMinHeight:110,defaultMaxHeight:500,minWidth:null,maxWidth:null,minHeight:null,maxHeight:null,constrain:true,cls:["x-message-box","x-hidden-offsets"],layout:{type:"vbox",align:"stretch"},shrinkWrapDock:true,defaultTextHeight:75,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:"OK",yes:"Yes",no:"No",cancel:"Cancel"},buttonIds:["ok","yes","no","cancel"],titleText:{confirm:"Confirm",prompt:"Prompt",wait:"Loading...",alert:"Attention"},baseIconCls:"x-message-box-icon",ariaRole:"alertdialog",makeButton:function(a){var b=this.buttonIds[a];return new Ext.button.Button({handler:this.btnCallback,itemId:b,scope:this,text:this.buttonText[b],minWidth:75})},btnCallback:function(c,f){var d=this,a,b;if(f&&f.type==="keydown"&&!f.isSpecialKey()){f.getTarget(null,null,true).on({keyup:function(g){d.btnCallback(c,g)},single:true});return}if(d.cfg.prompt||d.cfg.multiline){if(d.cfg.multiline){b=d.textArea}else{b=d.textField}a=b.getValue();b.reset()}d.hide();d.userCallback(c.itemId,a,d.cfg)},hide:function(){var b=this,a=b.cfg?b.cfg.cls:"";b.progressBar.reset();if(a){b.removeCls(a)}Ext.window.Window.prototype.hide.apply(this,arguments)},constructor:function(a){var b=this;Ext.window.Window.prototype.constructor.apply(this,arguments);b.minWidth=b.defaultMinWidth=(b.minWidth||b.defaultMinWidth);b.maxWidth=b.defaultMaxWidth=(b.maxWidth||b.defaultMaxWidth);b.minHeight=b.defaultMinHeight=(b.minHeight||b.defaultMinHeight);b.maxHeight=b.defaultMaxHeight=(b.maxHeight||b.defaultMaxHeight)},initComponent:function(c){var b=this,d=b.id,a,f;b.title=b.title||"&#160;";b.iconCls=b.iconCls||"";b.topContainer=new Ext.container.Container({layout:"hbox",padding:10,style:{overflow:"hidden"},items:[b.iconComponent=new Ext.Component({cls:b.baseIconCls}),b.promptContainer=new Ext.container.Container({flex:1,layout:{type:"vbox",align:"stretch"},items:[b.msg=new Ext.Component({id:d+"-msg",cls:b.baseCls+"-text"}),b.textField=new Ext.form.field.Text({id:d+"-textfield",enableKeyEvents:true,listeners:{keydown:b.onPromptKey,scope:b}}),b.textArea=new Ext.form.field.TextArea({id:d+"-textarea",height:75})]})]});b.progressBar=new Ext.ProgressBar({id:d+"-progressbar",margin:"0 10 10 10"});b.items=[b.topContainer,b.progressBar];b.msgButtons=[];for(a=0;a<4;a++){f=b.makeButton(a);b.msgButtons[f.itemId]=f;b.msgButtons.push(f)}b.bottomTb=new Ext.toolbar.Toolbar({id:d+"-toolbar",ui:"footer",dock:"bottom",layout:{pack:"center"},items:[b.msgButtons[0],b.msgButtons[1],b.msgButtons[2],b.msgButtons[3]]});b.dockedItems=[b.bottomTb];b.on("close",b.onClose,b);Ext.window.Window.prototype.initComponent.call(this)},onClose:function(){var a=this.header.child("[type=close]");if(a){a.itemId="cancel";this.btnCallback(a);delete a.itemId}},onPromptKey:function(b,a){var c=this;if(a.keyCode===a.RETURN||a.keyCode===10){if(c.msgButtons.ok.isVisible()){c.msgButtons.ok.handler.call(c,c.msgButtons.ok)}else{if(c.msgButtons.yes.isVisible()){c.msgButtons.yes.handler.call(c,c.msgButtons.yes)}}}},reconfigure:function(c){var w=this,t=0,g=true,y=w.buttonText,f=w.resizer,r=w.header,v=r&&!r.isHeader,d=c&&(c.message||c.msg),z,p,j,s,u,h,b,m,q,o,a;w.updateButtonText();w.cfg=c=c||{};o=c.wait;if(c.width){p=c.width}if(c.height){j=c.height}w.minWidth=c.minWidth||w.defaultMinWidth;w.maxWidth=c.maxWidth||w.defaultMaxWidth;w.minHeight=c.minHeight||w.defaultMinHeight;w.maxHeight=c.maxHeight||w.defaultMaxHeight;if(f){z=f.resizeTracker;f.minWidth=z.minWidth=w.minWidth;f.maxWidth=z.maxWidth=w.maxWidth;f.minHeight=z.minHeight=w.minHeight;f.maxHeight=z.maxHeight=w.maxHeight}delete w.defaultFocus;if(c.defaultFocus){w.defaultFocus=c.defaultFocus}w.animateTarget=c.animateTarget||undefined;w.modal=c.modal!==false;w.setTitle(c.title||(v&&r.title)||w.title);w.setIconCls(c.iconCls||(v&&r.iconCls)||w.iconCls);if(Ext.isObject(c.buttons)){w.buttonText=c.buttons;t=0}else{w.buttonText=c.buttonText||w.buttonText;t=Ext.isNumber(c.buttons)?c.buttons:0}t=t|w.updateButtonText();w.buttonText=y;Ext.suspendLayouts();w.width=w.height=null;if(p||j){if(p){w.setWidth(p)}if(j){w.setHeight(j)}}w.hidden=false;if(!w.rendered){w.render(Ext.getBody())}w.closable=c.closable!==false&&!o;r=w.header;if(r){a=r.child("[type=close]");if(a){a.setVisible(w.closable)}if(!c.title&&!w.closable&&!c.iconCls){r.hide()}else{r.show()}}w.liveDrag=!c.proxyDrag;w.userCallback=Ext.Function.bindCallback(c.callback||c.fn||Ext.emptyFn,c.scope||Ext.global);w.setIcon(c.icon);b=w.msg;if(d){b.setHtml(d);b.show()}else{b.hide()}u=w.textArea;h=w.textField;if(c.prompt||c.multiline){w.multiline=c.multiline;if(c.multiline){u.setValue(c.value);u.setHeight(c.defaultTextHeight||w.defaultTextHeight);u.show();h.hide();w.defaultFocus=u}else{h.setValue(c.value);u.hide();h.show();w.defaultFocus=h}}else{u.hide();h.hide()}m=w.progressBar;if(c.progress||o){m.show();w.updateProgress(0,c.progressText);if(o){m.wait(o===true?c.waitConfig:o)}}else{m.hide()}q=w.msgButtons;for(s=0;s<4;s++){if(t&Math.pow(2,s)){if(!w.defaultFocus){w.defaultFocus=q[s]}q[s].show();g=false}else{q[s].hide()}}if(g){w.bottomTb.hide()}else{w.bottomTb.show()}Ext.resumeLayouts(true)},updateButtonText:function(){var a=this,f=a.buttonText,d=0,b,c;for(b in f){if(f.hasOwnProperty(b)){c=a.msgButtons[b];if(c){if(a.cfg&&a.cfg.buttonText){d=d|Math.pow(2,Ext.Array.indexOf(a.buttonIds,b))}if(c.text!==f[b]){c.setText(f[b])}}}}return d},show:function(b){var a=this,c;b=b||{};if(Ext.Component.layoutSuspendCount){Ext.on({resumelayouts:function(){a.show(b)},single:true});return a}a.reconfigure(b);if(b.cls){a.addCls(b.cls)}c=a.query("textfield:not([hidden]),textarea:not([hidden]),button:not([hidden])");a.preventFocusOnActivate=!c.length;a.hidden=true;Ext.window.Window.prototype.show.call(this);return a},onShow:function(){Ext.window.Window.prototype.onShow.apply(this,arguments);this.center()},updateText:function(a){this.msg.setHtml(a)},setIcon:function(f,d,b){var g=this,a=g.iconComponent,c=g.messageIconCls;if(c){a.removeCls(c)}if(f){a.show();if(d||b){a.setSize(d||a.getWidth(),b||a.getHeight())}a.addCls("x-dlg-icon");a.addCls(g.messageIconCls=f)}else{a.removeCls("x-dlg-icon");a.hide()}return g},updateProgress:function(a,b,c){this.progressBar.updateProgress(a,b);if(c){this.updateText(c)}return this},onEsc:function(){if(this.closable!==false){Ext.window.Window.prototype.onEsc.apply(this,arguments)}},confirm:function(c,b,a,d){if(Ext.isString(c)){c={title:c,icon:this.QUESTION,message:b,buttons:this.YESNO,callback:a,scope:d}}return this.show(c)},prompt:function(a,f,d,c,b,g){if(Ext.isString(a)){a={prompt:true,title:a,minWidth:this.minPromptWidth,message:f,buttons:this.OKCANCEL,callback:d,scope:c,multiline:b,value:g}}return this.show(a)},wait:function(c,a,b){if(Ext.isString(c)){c={title:a,message:c,closable:false,wait:true,modal:true,minWidth:this.minProgressWidth,waitConfig:b}}return this.show(c)},alert:function(b,a,d,c){if(Ext.isString(b)){b={title:b,message:a,buttons:this.OK,fn:d,scope:c,minWidth:this.minWidth}}return this.show(b)},progress:function(a,c,b){if(Ext.isString(a)){a={title:a,message:c,progress:true,progressText:b}}return this.show(a)}},1,["messagebox"],["component","box","container","panel","window","messagebox"],{component:true,box:true,container:true,panel:true,window:true,messagebox:true},["widget.messagebox"],0,[Ext.window,"MessageBox"],function(a){Ext.onInternalReady(function(){Ext.MessageBox=Ext.Msg=new a()})}));(Ext.cmd.derive("Ext.form.Basic",Ext.util.Observable,{alternateClassName:"Ext.form.BasicForm",taskDelay:10,constructor:function(d,a){var b=this,c;b.owner=d;b.fieldMonitors={validitychange:b.checkValidityDelay,enable:b.checkValidityDelay,disable:b.checkValidityDelay,dirtychange:b.checkDirtyDelay,errorchange:b.checkErrorDelay,scope:b};b.checkValidityTask=new Ext.util.DelayedTask(b.checkValidity,b);b.checkDirtyTask=new Ext.util.DelayedTask(b.checkDirty,b);b.checkErrorTask=new Ext.util.DelayedTask(b.checkError,b);b.monitor=new Ext.container.Monitor({selector:"[isFormField]:not([excludeForm])",scope:b,addHandler:b.onFieldAdd,removeHandler:b.onFieldRemove,invalidateHandler:b.onMonitorInvalidate});b.monitor.bind(d);Ext.apply(b,a);if(Ext.isString(b.paramOrder)){b.paramOrder=b.paramOrder.split(/[\s,|]/)}c=b.reader;if(c&&!c.isReader){if(typeof c==="string"){c={type:c}}b.reader=Ext.createByAlias("reader."+c.type,c)}c=b.errorReader;if(c&&!c.isReader){if(typeof c==="string"){c={type:c}}b.errorReader=Ext.createByAlias("reader."+c.type,c)}Ext.util.Observable.prototype.constructor.call(this)},initialize:function(){this.initialized=true;this.onValidityChange(!this.hasInvalidField())},timeout:30,paramsAsHash:false,waitTitle:"Please Wait...",trackResetOnLoad:false,wasDirty:false,destroy:function(){var b=this,a=b.monitor;if(a){a.unbind();b.monitor=null}b.clearListeners();b.checkValidityTask.cancel();b.checkDirtyTask.cancel();b.checkErrorTask.cancel();b.checkValidityTask=b.checkDirtyTask=b.checkErrorTask=null;Ext.util.Observable.prototype.destroy.call(this)},onFieldAdd:function(a){a.on(this.fieldMonitors);this.onMonitorInvalidate()},onFieldRemove:function(a){a.un(this.fieldMonitors);this.onMonitorInvalidate()},onMonitorInvalidate:function(){if(this.initialized){this.checkValidityDelay()}},getFields:function(){return this.monitor.getItems()},getBoundItems:function(){var a=this._boundItems;if(!a||a.getCount()===0){a=this._boundItems=new Ext.util.MixedCollection();a.addAll(this.owner.query("[formBind]"))}return a},hasInvalidField:function(){return !!this.getFields().findBy(function(a){var b=a.preventMark,c;a.preventMark=true;c=a.isValid();a.preventMark=b;return !c})},isValid:function(){var a=this,b;Ext.suspendLayouts();b=a.getFields().filterBy(function(c){return !c.validate()});Ext.resumeLayouts(true);return b.length<1},checkValidity:function(){var b=this,a;if(b.destroyed){return}a=!b.hasInvalidField();if(a!==b.wasValid){b.onValidityChange(a);b.fireEvent("validitychange",b,a);b.wasValid=a}},checkValidityDelay:function(){var a=this.taskDelay;if(a){this.checkValidityTask.delay(a)}else{this.checkValidity()}},checkError:function(){this.fireEvent("errorchange",this)},checkErrorDelay:function(){var a=this.taskDelay;if(a){this.checkErrorTask.delay(a)}else{this.checkError()}},onValidityChange:function(a){var f=this.getBoundItems(),c,d,b,g;if(f){c=f.items;b=c.length;for(d=0;d<b;d++){g=c[d];if(g.disabled===a){g.setDisabled(!a)}}}},isDirty:function(){return !!this.getFields().findBy(function(a){return a.isDirty()})},checkDirtyDelay:function(){var a=this.taskDelay;if(a){this.checkDirtyTask.delay(a)}else{this.checkDirty()}},checkDirty:function(){var b=this,a;if(b.destroyed){return}a=this.isDirty();if(a!==this.wasDirty){this.fireEvent("dirtychange",this,a);this.wasDirty=a}},hasUpload:function(){return !!this.getFields().findBy(function(a){return a.isFileUpload()})},doAction:function(b,a){if(Ext.isString(b)){b=Ext.ClassManager.instantiateByAlias("formaction."+b,Ext.apply({},a,{form:this}))}if(this.fireEvent("beforeaction",this,b)!==false){this.beforeAction(b);Ext.defer(b.run,100,b)}return this},submit:function(b){b=b||{};var c=this,a;if(b.standardSubmit||c.standardSubmit){a="standardsubmit"}else{a=c.api?"directsubmit":"submit"}return c.doAction(a,b)},load:function(a){return this.doAction(this.api?"directload":"load",a)},updateRecord:function(c){c=c||this._record;if(!c){return this}var b=c.self.fields,d=this.getFieldValues(),h={},g=0,a=b.length,f;for(;g<a;++g){f=b[g].name;if(d.hasOwnProperty(f)){h[f]=d[f]}}c.beginEdit();c.set(h);c.endEdit();return this},loadRecord:function(a){this._record=a;return this.setValues(a.getData())},getRecord:function(){return this._record},beforeAction:function(j){var a=this,h=j.waitMsg,d="x-mask-loading",m=a.getFields().items,o,c=m.length,b,g;for(o=0;o<c;o++){b=m[o];if(b.isFormField&&b.syncValue){b.syncValue()}}if(h){g=a.waitMsgTarget;if(g===true){a.owner.el.mask(h,d)}else{if(g){g=a.waitMsgTarget=Ext.get(g);g.mask(h,d)}else{a.floatingAncestor=a.owner.up("[floating]");if(a.floatingAncestor){a.savePreventFocusOnActivate=a.floatingAncestor.preventFocusOnActivate;a.floatingAncestor.preventFocusOnActivate=true}Ext.MessageBox.wait(h,j.waitTitle||a.waitTitle)}}}},afterAction:function(f,b){var c=this;if(f.waitMsg){var d=Ext.MessageBox,a=c.waitMsgTarget;if(a===true){c.owner.el.unmask()}else{if(a){a.unmask()}else{d.hide()}}}if(c.floatingAncestor){c.floatingAncestor.preventFocusOnActivate=c.savePreventFocusOnActivate}if(b){if(f.reset){c.reset()}Ext.callback(f.success,f.scope||f,[c,f]);c.fireEvent("actioncomplete",c,f)}else{Ext.callback(f.failure,f.scope||f,[c,f]);c.fireEvent("actionfailed",c,f)}},findField:function(a){return this.getFields().findBy(function(b){return b.id===a||b.name===a||b.dataIndex===a})},markInvalid:function(h){var c=this,f,j,a,d,b;function g(o,m){var p=c.findField(o);if(p){p.markInvalid(m)}}if(Ext.isArray(h)){j=h.length;for(f=0;f<j;f++){a=h[f];g(a.id||a.field,a.msg||a.message)}}else{if(h instanceof Ext.data.ErrorCollection){j=h.items.length;for(f=0;f<j;f++){a=h.items[f];g(a.field,a.message)}}else{for(b in h){if(h.hasOwnProperty(b)){d=h[b];g(b,d,h)}}}}return this},setValues:function(c){var f=this,b,d,a;function g(m,j){var h=f.findField(m);if(h){h.setValue(j);if(f.trackResetOnLoad){h.resetOriginalValue()}}}Ext.suspendLayouts();if(Ext.isArray(c)){d=c.length;for(b=0;b<d;b++){a=c[b];g(a.id,a.value)}}else{Ext.iterate(c,g)}Ext.resumeLayouts(true);return this},getValues:function(j,p,o,g,u){var m={},d=this.getFields().items,r=d.length,c=Ext.isArray,q,b,a,t,s,h;for(h=0;h<r;h++){q=d[h];if(!p||q.isDirty()){b=q[g?"getModelData":"getSubmitData"](o,u);if(Ext.isObject(b)){for(s in b){if(b.hasOwnProperty(s)){a=b[s];if(o&&a===""){a=q.emptyText||""}if(!q.isRadio){if(m.hasOwnProperty(s)){t=m[s];if(!c(t)){t=m[s]=[t]}if(c(a)){m[s]=t.concat(a)}else{t.push(a)}}else{m[s]=a}}else{m[s]=m[s]||a}}}}}}if(j){m=Ext.Object.toQueryString(m)}return m},getFieldValues:function(a){return this.getValues(false,a,false,true)},clearInvalid:function(){Ext.suspendLayouts();var d=this,c=d.getFields().items,a,b=c.length;for(a=0;a<b;a++){c[a].clearInvalid()}Ext.resumeLayouts(true);return d},reset:function(d){Ext.suspendLayouts();var g=this,c=g.getFields().items,a,b=c.length;for(a=0;a<b;a++){c[a].reset()}Ext.resumeLayouts(true);if(d===true){delete g._record}return g},applyToFields:function(a){var c=this.getFields().items,d,b=c.length;for(d=0;d<b;d++){Ext.apply(c[d],a)}return this},applyIfToFields:function(a){var c=this.getFields().items,d,b=c.length;for(d=0;d<b;d++){Ext.applyIf(c[d],a)}return this}},1,0,0,0,0,0,[Ext.form,"Basic",Ext.form,"BasicForm"],0));(Ext.cmd.derive("Ext.form.FieldAncestor",Ext.Mixin,{mixinConfig:{id:"fieldAncestor",after:{initInheritedState:"initFieldInheritedState"},before:{destroy:"onBeforeDestroy"}},initFieldAncestor:function(){var a=this;a.monitor=new Ext.container.Monitor({scope:a,selector:"[isFormField]:not([excludeForm])",addHandler:a.onChildFieldAdd,removeHandler:a.onChildFieldRemove});a.initFieldDefaults()},initMonitor:function(){this.monitor.bind(this)},initFieldInheritedState:function(c){var b=c.fieldDefaults,a=this.fieldDefaults;if(a){if(b){c.fieldDefaults=Ext.apply(Ext.Object.chain(b),a)}else{c.fieldDefaults=a}}},onChildFieldAdd:function(b){var a=this;a.mon(b,"errorchange",a.handleFieldErrorChange,a);a.mon(b,"validitychange",a.handleFieldValidityChange,a)},onChildFieldRemove:function(b){var a=this;a.mun(b,"errorchange",a.handleFieldErrorChange,a);a.mun(b,"validitychange",a.handleFieldValidityChange,a)},initFieldDefaults:function(){if(!this.fieldDefaults){this.fieldDefaults={}}},handleFieldValidityChange:function(a,c){var b=this;if(a!==b){b.fireEvent("fieldvaliditychange",b,a,c);b.onFieldValidityChange(a,c)}},handleFieldErrorChange:function(c,b){var a=this;if(c!==a){a.fireEvent("fielderrorchange",a,c,b);a.onFieldErrorChange(c,b)}},onFieldValidityChange:Ext.emptyFn,onFieldErrorChange:Ext.emptyFn,onBeforeDestroy:function(){this.monitor.unbind()}},0,0,0,0,0,0,[Ext.form,"FieldAncestor"],0));(Ext.cmd.derive("Ext.layout.component.field.FieldContainer",Ext.layout.component.Auto,{type:"fieldcontainer",waitForOuterHeightInDom:true,waitForOuterWidthInDom:true,beginLayout:function(b){var a=this.owner.containerEl;Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);b.hasRawContent=true;a.setStyle("width","");a.setStyle("height","");b.containerElContext=b.getEl("containerEl")},measureContentHeight:function(a){return a.hasDomProp("containerLayoutDone")?Ext.layout.component.Auto.prototype.measureContentHeight.apply(this,arguments):NaN},measureContentWidth:function(a){return a.hasDomProp("containerLayoutDone")?Ext.layout.component.Auto.prototype.measureContentWidth.apply(this,arguments):NaN},publishInnerHeight:function(a,c){var b=this.owner;if(b.labelAlign==="top"&&b.hasVisibleLabel()){c-=b.labelEl.getHeight()}if(b.msgTarget==="under"&&b.hasActiveError()){c-=b.errorWrapEl.getHeight()}c-=b.bodyEl.getPadding("tb");a.containerElContext.setHeight(c)},publishInnerWidth:function(a,c){var b=this.owner;if(b.labelAlign!=="top"&&b.hasVisibleLabel()){c-=(b.labelWidth+(b.labelPad||0))}if(b.msgTarget==="side"&&b.hasActiveError()){c-=b.errorWrapEl.getWidth()}c-=b.bodyEl.getPadding("lr");a.containerElContext.setWidth(c)}},0,0,0,0,["layout.fieldcontainer"],0,[Ext.layout.component.field,"FieldContainer"],0));(Ext.cmd.derive("Ext.form.FieldContainer",Ext.container.Container,{componentLayout:"fieldcontainer",componentCls:"x-form-fieldcontainer",shrinkWrap:true,autoEl:{tag:"div",role:"presentation"},childEls:["containerEl"],combineLabels:false,labelConnector:", ",combineErrors:false,maskOnDisable:false,invalidCls:"",fieldSubTpl:['<div id="{id}-containerEl" data-ref="containerEl" class="{containerElCls}"','<tpl if="ariaAttributes">','<tpl foreach="ariaAttributes"> {$}="{.}"</tpl>',"<tpl else>",' role="presentation"',"</tpl>",">","{%this.renderContainer(out,values)%}","</div>"],initComponent:function(){var a=this;a.initLabelable();a.initFieldAncestor();Ext.container.Container.prototype.initComponent.call(this);a.initMonitor()},onAdd:function(a){var b=this;if(a.isLabelable&&Ext.isGecko&&Ext.firefoxVersion<37&&b.layout.type==="absolute"&&!b.hideLabel&&b.labelAlign!=="top"){a.x+=(b.labelWidth+b.labelPad)}Ext.container.Container.prototype.onAdd.apply(this,arguments);if(a.isLabelable&&b.combineLabels){a.oldHideLabel=a.hideLabel;a.hideLabel=true}b.updateLabel()},onRemove:function(b,c){var a=this;Ext.container.Container.prototype.onRemove.apply(this,arguments);if(!c){if(b.isLabelable&&a.combineLabels){b.hideLabel=b.oldHideLabel}a.updateLabel()}},initRenderData:function(){var a=this,b=Ext.container.Container.prototype.initRenderData.call(this);b.containerElCls=a.containerElCls;b=Ext.applyIf(b,a.getLabelableRenderData());b.tipAnchorTarget=a.id+"-containerEl";return b},getFieldLabel:function(){var a=this.fieldLabel||"";if(!a&&this.combineLabels){a=Ext.Array.map(this.query("[isFieldLabelable]"),function(b){return b.getFieldLabel()}).join(this.labelConnector)}return a},getSubTplData:function(){var a=this.initRenderData();Ext.apply(a,this.subTplData);return a},getSubTplMarkup:function(d){var b=this,c=b.getTpl("fieldSubTpl"),a;if(!c.renderContent){b.setupRenderTpl(c)}a=c.apply(b.getSubTplData(d));return a},updateLabel:function(){var b=this,a=b.labelEl;if(a){b.setFieldLabel(b.getFieldLabel())}},onFieldErrorChange:function(){if(this.combineErrors){var a=this,b=a.getActiveError(),d=Ext.Array.filter(a.query("[isFormField]"),function(f){return f.hasActiveError()}),c=a.getCombinedErrors(d);if(c){a.setActiveErrors(c)}else{a.unsetActiveError()}if(b!==a.getActiveError()){a.updateLayout()}}},getCombinedErrors:function(m){var c=[],g,h=m.length,q,j,b,d,o,p;for(g=0;g<h;g++){q=m[g];j=q.getActiveErrors();d=j.length;for(b=0;b<d;b++){o=j[b];p=q.getFieldLabel();c.push((p?p+": ":"")+o)}}return c},privates:{applyTargetCls:function(b){var a=this.containerElCls;this.containerElCls=a?a+" "+b:b},getTargetEl:function(){return this.containerEl},initRenderTpl:function(){var a=this;if(!a.hasOwnProperty("renderTpl")){a.renderTpl=a.getTpl("labelableRenderTpl")}return Ext.container.Container.prototype.initRenderTpl.call(this)}}},0,["fieldcontainer"],["component","box","container","fieldcontainer"],{component:true,box:true,container:true,fieldcontainer:true},["widget.fieldcontainer"],[["labelable",Ext.form.Labelable],["fieldAncestor",Ext.form.FieldAncestor]],[Ext.form,"FieldContainer"],0));(Ext.cmd.derive("Ext.form.CheckboxManager",Ext.util.MixedCollection,{singleton:true,getByName:function(a,b){return this.filterBy(function(c){return c.name===a&&c.getFormId()===b})}},0,0,0,0,0,0,[Ext.form,"CheckboxManager"],0));(Ext.cmd.derive("Ext.form.field.Checkbox",Ext.form.field.Base,{alternateClassName:"Ext.form.Checkbox",stretchInputElFixed:false,childEls:["boxLabelEl","innerWrapEl","displayEl"],fieldSubTpl:['<div id="{cmpId}-innerWrapEl" data-ref="innerWrapEl" role="presentation"',' class="{wrapInnerCls}">','<tpl if="labelAlignedBefore">',"{beforeBoxLabelTpl}",'<label id="{cmpId}-boxLabelEl" data-ref="boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} ','{boxLabelCls}-{ui} {boxLabelCls}-{boxLabelAlign} {noBoxLabelCls} {childElCls}" for="{id}">',"{beforeBoxLabelTextTpl}","{boxLabel}","{afterBoxLabelTextTpl}","</label>","{afterBoxLabelTpl}","</tpl>",'<input type="button" id="{id}" name="{inputName}" data-ref="inputEl" {inputAttrTpl}','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{checkboxCls} {clipCls}" autocomplete="off" hidefocus="true" ','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>',"/>",'<span id="{cmpId}-displayEl" data-ref="displayEl" class="{fieldCls} {typeCls} ','{typeCls}-{ui} {inputCls} {inputCls}-{ui} {childElCls} {afterLabelCls}"></span>','<tpl if="!labelAlignedBefore">',"{beforeBoxLabelTpl}",'<label id="{cmpId}-boxLabelEl" data-ref="boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} ','{boxLabelCls}-{ui} {boxLabelCls}-{boxLabelAlign} {noBoxLabelCls} {childElCls}" for="{id}">',"{beforeBoxLabelTextTpl}","{boxLabel}","{afterBoxLabelTextTpl}","</label>","{afterBoxLabelTpl}","</tpl>","</div>",{disableFormats:true,compiled:true}],publishes:{checked:1},subTplInsertions:["beforeBoxLabelTpl","afterBoxLabelTpl","beforeBoxLabelTextTpl","afterBoxLabelTextTpl","boxLabelAttrTpl","inputAttrTpl"],isCheckbox:true,focusCls:"form-checkbox-focus",fieldBodyCls:"x-form-cb-wrap",checked:false,checkedCls:"x-form-cb-checked",boxLabelCls:"x-form-cb-label",boxLabelAlign:"after",afterLabelCls:"x-form-cb-after",wrapInnerCls:"x-form-cb-wrap-inner",noBoxLabelCls:"x-form-cb-no-box-label",inputValue:"on",checkChangeEvents:[],inputType:"checkbox",isTextInput:false,ariaRole:"checkbox",onRe:/^on$/i,inputCls:"x-form-cb",_checkboxCls:"x-form-cb-input",_clipCls:"x-hidden-clip",initComponent:function(){var a=this,b=a.value;if(b!==undefined){a.checked=a.isChecked(b,a.inputValue)}Ext.form.field.Base.prototype.initComponent.call(this);a.getManager().add(a)},initDefaultName:Ext.emptyFn,initValue:function(){var b=this,a=!!b.checked;b.originalValue=b.lastValue=a;b.setValue(a)},getElConfig:function(){var a=this;if(a.isChecked(a.rawValue,a.inputValue)){a.addCls(a.checkedCls)}return Ext.form.field.Base.prototype.getElConfig.call(this)},getSubTplData:function(b){var d=this,c=d.boxLabel,h=d.boxLabelAlign,g=h==="before",f,a;f=Ext.apply(Ext.form.field.Base.prototype.getSubTplData.call(this,b),{clipCls:d._clipCls,checkboxCls:d._checkboxCls,disabled:d.readOnly||d.disabled,wrapInnerCls:d.wrapInnerCls,boxLabel:c,boxLabelCls:d.boxLabelCls,boxLabelAlign:h,labelAlignedBefore:g,afterLabelCls:g?d.afterLabelCls:"",noBoxLabelCls:!c?d.noBoxLabelCls:"",inputName:d.name||d.id});a=f.inputElAriaAttributes;if(a){a["aria-checked"]=!!d.checked;a["aria-labelledby"]=d.id+"-boxLabelEl"}return f},initEvents:function(){var a=this;Ext.form.field.Base.prototype.initEvents.call(this);a.inputEl.on({click:"onBoxClick",scope:a,translate:false});a.displayEl.on({click:"onBoxClick",mousedown:"_onDisplayElMouseDown",scope:a})},setBoxLabel:function(a){var b=this;b.boxLabel=a;if(b.rendered){b.boxLabelEl.setHtml(a);b.boxLabelEl[a?"removeCls":"addCls"](b.noBoxLabelCls);b.updateLayout()}},onBoxClick:function(){var a=this;if(!a.disabled&&!a.readOnly){a.setValue(!a.checked)}},getRawValue:function(){return this.checked},getValue:function(){return this.checked},getSubmitValue:function(){var a=this.uncheckedValue,b=Ext.isDefined(a)?a:null;return this.checked?this.inputValue:b},isChecked:function(b,a){return(b===true||b==="true"||b==="1"||b===1||(((Ext.isString(b)||Ext.isNumber(b))&&a)?b==a:this.onRe.test(b)))},setRawValue:function(f){var d=this,a=d.inputEl,b=d.displayEl,c=d.isChecked(f,d.inputValue);if(a){d[c?"addCls":"removeCls"](d.checkedCls);if(d.ariaRole){d.ariaEl.dom.setAttribute("aria-checked",c)}}if(Ext.isIE8&&b&&c!==d.lastValue){b.repaint()}d.checked=d.rawValue=c;if(!d.duringSetValue){d.lastValue=c}return c},setValue:function(a){var g=this,d,c,b,f;if(Ext.isArray(a)){d=g.getManager().getByName(g.name,g.getFormId()).items;b=d.length;for(c=0;c<b;++c){f=d[c];f.setValue(Ext.Array.contains(a,f.inputValue))}}else{g.duringSetValue=true;Ext.form.field.Base.prototype.setValue.apply(this,arguments);delete g.duringSetValue}return g},valueToRaw:Ext.identityFn,onChange:function(d,c){var b=this,a=b.handler;if(a){Ext.callback(a,b.scope,[b,d],0,b)}Ext.form.field.Base.prototype.onChange.apply(this,arguments);if(b.reference&&b.publishState){b.publishState("checked",d)}},resetOriginalValue:function(c){var a=this,f,g,b,d;if(!c){f=a.getManager().getByName(a.name,a.getFormId()).items;b=f.length;for(d=0;d<b;++d){g=f[d];if(g!==a){f[d].resetOriginalValue(true)}}}Ext.form.field.Base.prototype.resetOriginalValue.call(this)},beforeDestroy:function(){Ext.form.field.Base.prototype.beforeDestroy.call(this);this.getManager().removeAtKey(this.id)},getManager:function(){return Ext.form.CheckboxManager},onEnable:function(){var a=this,b=a.inputEl;Ext.form.field.Base.prototype.onEnable.call(this);if(b){b.dom.disabled=a.readOnly}},setReadOnly:function(a){var b=this,c=b.inputEl;if(c){c.dom.disabled=!!a||b.disabled}Ext.form.field.Base.prototype.setReadOnly.apply(this,arguments)},getFormId:function(){var b=this,a;if(!b.formId){a=b.up("form");if(a){b.formId=a.id}}return b.formId},getFocusClsEl:function(){return this.displayEl},privates:{_onDisplayElMouseDown:function(a){a.preventDefault();this.inputEl.focus(1)}}},0,["checkbox","checkboxfield"],["component","box","field","checkboxfield","checkbox"],{component:true,box:true,field:true,checkboxfield:true,checkbox:true},["widget.checkbox","widget.checkboxfield"],0,[Ext.form.field,"Checkbox",Ext.form,"Checkbox"],0));Ext.define("Ext.theme.triton.form.field.Checkbox",{override:"Ext.form.field.Checkbox",compatibility:Ext.isIE8,initComponent:function(){(arguments.callee.$previous||Ext.form.field.Base.prototype.initComponent).call(this);Ext.on({show:"onGlobalShow",scope:this})},onFocus:function(b){var a;(arguments.callee.$previous||Ext.form.field.Base.prototype.onFocus).call(this,b);a=this.getFocusClsEl();if(a){a.syncRepaint()}},onBlur:function(b){var a;(arguments.callee.$previous||Ext.form.field.Base.prototype.onBlur).call(this,b);a=this.getFocusClsEl();if(a){a.syncRepaint()}},onGlobalShow:function(a){if(a.isAncestor(this)){this.getFocusClsEl().syncRepaint()}}});(Ext.cmd.derive("Ext.form.Label",Ext.Component,{autoEl:"label",maskOnDisable:false,getElConfig:function(){var a=this;a.html=a.text?Ext.util.Format.htmlEncode(a.text):(a.html||"");return Ext.apply(Ext.Component.prototype.getElConfig.call(this),{htmlFor:a.forId||""})},setText:function(a,c){var b=this;c=c!==false;if(c){b.text=a;delete b.html}else{b.html=a;delete b.text}if(b.rendered){b.el.dom.innerHTML=c!==false?Ext.util.Format.htmlEncode(a):a;b.updateLayout()}return b}},0,["label"],["component","box","label"],{component:true,box:true,label:true},["widget.label"],0,[Ext.form,"Label"],0));(Ext.cmd.derive("Ext.form.Panel",Ext.panel.Panel,{alternateClassName:["Ext.FormPanel","Ext.form.FormPanel"],layout:"anchor",bodyAriaRole:"form",basicFormConfigs:["api","baseParams","errorReader","jsonSubmit","method","paramOrder","paramsAsHash","reader","standardSubmit","timeout","trackResetOnLoad","url","waitMsgTarget","waitTitle"],initComponent:function(){var a=this;if(a.frame){a.border=false}a.initFieldAncestor();Ext.panel.Panel.prototype.initComponent.call(this);a.relayEvents(a.form,["beforeaction","actionfailed","actioncomplete","validitychange","dirtychange"]);if(a.pollForChanges){a.startPolling(a.pollInterval||500)}},initItems:function(){Ext.panel.Panel.prototype.initItems.call(this);this.initMonitor();this.form=this.createForm()},afterFirstLayout:function(){Ext.panel.Panel.prototype.afterFirstLayout.apply(this,arguments);this.form.initialize()},createForm:function(){var d={},a=this.basicFormConfigs,c=a.length,f=0,b;for(;f<c;++f){b=a[f];d[b]=this[b]}return new Ext.form.Basic(this,d)},getForm:function(){return this.form},loadRecord:function(a){return this.getForm().loadRecord(a)},getRecord:function(){return this.getForm().getRecord()},updateRecord:function(a){return this.getForm().updateRecord(a)},getValues:function(b,d,a,c){return this.getForm().getValues(b,d,a,c)},isDirty:function(){return this.form.isDirty()},isValid:function(){return this.form.isValid()},reset:function(){this.form.reset()},hasInvalidField:function(){return this.form.hasInvalidField()},beforeDestroy:function(){this.stopPolling();this.form.destroy();Ext.panel.Panel.prototype.beforeDestroy.call(this)},load:function(a){this.form.load(a)},submit:function(a){this.form.submit(a)},startPolling:function(b){this.stopPolling();var a=new Ext.util.TaskRunner(b);a.start({interval:0,run:this.checkChange,scope:this});this.pollTask=a},stopPolling:function(){var a=this.pollTask;if(a){a.stopAll();delete this.pollTask}},checkChange:function(){var b=this.form.getFields().items,c,a=b.length;for(c=0;c<a;c++){b[c].checkChange()}}},0,["form"],["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},["widget.form"],[["fieldAncestor",Ext.form.FieldAncestor]],[Ext.form,"Panel",Ext,"FormPanel",Ext.form,"FormPanel"],0));(Ext.cmd.derive("Ext.form.field.Picker",Ext.form.field.Text,{alternateClassName:"Ext.form.Picker",config:{triggers:{picker:{handler:"onTriggerClick",scope:"this"}}},renderConfig:{editable:true},isPickerField:true,matchFieldWidth:true,pickerAlign:"tl-bl?",openCls:"x-pickerfield-open",isExpanded:false,applyTriggers:function(c){var a=this,b=c.picker;if(!b.cls){b.cls=a.triggerCls}return Ext.form.field.Text.prototype.applyTriggers.call(this,c)},getSubTplData:function(d){var a=this,b,c;b=Ext.form.field.Text.prototype.getSubTplData.call(this,d);if(a.ariaRole){c=b.inputElAriaAttributes;if(c){c["aria-haspopup"]=true;c["aria-expanded"]=false}}return b},initEvents:function(){var a=this;Ext.form.field.Text.prototype.initEvents.call(this);a.keyNav=new Ext.util.KeyNav(a.inputEl,{down:a.onDownArrow,esc:{handler:a.onEsc,scope:a,defaultEventAction:false},scope:a,forceKeyDown:true});if(Ext.isGecko){a.inputEl.dom.setAttribute("autocomplete","off")}},updateEditable:function(b,a){var c=this;if(!b){c.inputEl.on("click",c.onTriggerClick,c)}else{c.inputEl.un("click",c.onTriggerClick,c)}Ext.form.field.Text.prototype.updateEditable.call(this,b,a)},onEsc:function(a){if(Ext.isIE){a.preventDefault()}if(this.isExpanded){this.collapse();a.stopEvent()}},onDownArrow:function(b){var a=this;if((b.time-a.lastDownArrow)>150){delete a.lastDownArrow}if(!a.isExpanded){b.stopEvent();a.onTriggerClick();a.lastDownArrow=b.time}else{if(!b.isStopped&&(b.time-a.lastDownArrow)<150){delete a.lastDownArrow}}},expand:function(){var a=this,d,c,f,b;if(a.rendered&&!a.isExpanded&&!a.destroyed){d=a.bodyEl;f=a.getPicker();b=Ext.getDoc();f.setMaxHeight(f.initialConfig.maxHeight);if(a.matchFieldWidth){f.setWidth(a.bodyEl.getWidth())}f.show();a.isExpanded=true;a.alignPicker();d.addCls(a.openCls);if(a.ariaRole){c=a.ariaEl.dom;c.setAttribute("aria-owns",f.listEl?f.listEl.id:f.el.id);c.setAttribute("aria-expanded",true)}a.touchListeners=b.on({translate:false,touchstart:a.collapseIf,scope:a,delegated:false,destroyable:true});a.scrollListeners=Ext.on({scroll:a.onGlobalScroll,scope:a,destroyable:true});Ext.on("resize",a.alignPicker,a,{buffer:1});a.fireEvent("expand",a);a.onExpand()}},onExpand:Ext.emptyFn,alignPicker:function(){if(!this.destroyed){var a=this.getPicker();if(a.isVisible()&&a.isFloating()){this.doAlign()}}},doAlign:function(){var b=this,a=b.picker,c="-above",d;b.picker.alignTo(b.triggerWrap,b.pickerAlign,b.pickerOffset);d=a.el.getY()<b.inputEl.getY();b.bodyEl[d?"addCls":"removeCls"](b.openCls+c);a[d?"addCls":"removeCls"](a.baseCls+c)},collapse:function(){var b=this;if(b.isExpanded&&!b.destroyed&&!b.destroying){var a=b.openCls,d=b.picker,c="-above";d.hide();b.isExpanded=false;b.bodyEl.removeCls([a,a+c]);d.el.removeCls(d.baseCls+c);if(b.ariaRole){b.ariaEl.dom.setAttribute("aria-expanded",false)}b.touchListeners.destroy();b.scrollListeners.destroy();Ext.un("resize",b.alignPicker,b);b.fireEvent("collapse",b);b.onCollapse()}},onCollapse:Ext.emptyFn,collapseIf:function(b){var a=this;if(!a.destroyed&&!b.within(a.bodyEl,false,true)&&!a.owns(b.target)&&!Ext.fly(b.target).isFocusable()){a.collapse()}},getPicker:function(){var b=this,a=b.picker;if(!a){b.creatingPicker=true;b.picker=a=b.createPicker();a.ownerCmp=b;delete b.creatingPicker}return b.picker},onFocusLeave:function(a){this.collapse();Ext.form.field.Text.prototype.onFocusLeave.call(this,a)},getRefItems:function(){var a=[];if(this.picker){a[0]=this.picker}return a},createPicker:Ext.emptyFn,onTriggerClick:function(b){var a=this;if(!a.readOnly&&!a.disabled){if(a.isExpanded){a.collapse()}else{a.expand()}}},beforeDestroy:function(){var b=this,a=b.picker;Ext.form.field.Text.prototype.beforeDestroy.call(this);Ext.un("resize",b.alignPicker,b);Ext.destroy(b.keyNav,a);if(a){b.picker=a.pickerField=null}},privates:{onGlobalScroll:function(c){var d,b,a=this.el;if(c.getElement().contains(a)){d=c.getPosition();b=a.getScrollIntoViewXY(c.getElement(),d.x,d.y);if(this.up("[fixed]")||b.y!==d.y||b.x!==d.x){this.collapse()}}}}},0,["pickerfield"],["component","box","field","textfield","pickerfield"],{component:true,box:true,field:true,textfield:true,pickerfield:true},["widget.pickerfield"],0,[Ext.form.field,"Picker",Ext.form,"Picker"],0));(Ext.cmd.derive("Ext.selection.Model",Ext.mixin.Observable,{alternateClassName:"Ext.AbstractSelectionModel",factoryConfig:{defaultType:"dataviewmodel"},$configPrefixed:false,$configStrict:false,config:{store:null,selected:{}},isSelectionModel:true,allowDeselect:undefined,toggleOnClick:true,selected:null,pruneRemoved:true,suspendChange:0,ignoreRightMouseSelection:false,constructor:function(a){var b=this;b.modes={SINGLE:true,SIMPLE:true,MULTI:true};Ext.mixin.Observable.prototype.constructor.call(this,a);b.setSelectionMode(b.mode);if(b.selectionMode!=="SINGLE"){b.allowDeselect=true}},updateStore:function(a,b){this.bindStore(a,!b)},applySelected:function(a){if(!a.isCollection){a=new Ext.util.Collection(Ext.apply({rootProperty:"data"},a))}return a},getStoreListeners:function(){var a=this;return{add:a.onStoreAdd,clear:a.onStoreClear,remove:a.onStoreRemove,update:a.onStoreUpdate,idchanged:a.onIdChanged,load:a.onStoreLoad,refresh:a.onStoreRefresh,pageadd:a.onPageAdd,pageremove:a.onPageRemove}},suspendChanges:function(){++this.suspendChange},resumeChanges:function(){if(this.suspendChange){--this.suspendChange}},selectAll:function(c){var a=this,d=a.store.getRange(),b=a.getSelection().length;a.suspendChanges();a.doSelect(d,true,c);a.resumeChanges();if(!c&&!a.destroyed){a.maybeFireSelectionChange(a.getSelection().length!==b)}},deselectAll:function(d){var a=this,g=a.getSelection(),b={},c=a.store,f=g.length,m,h,j;for(m=0,h=g.length;m<h;m++){j=g[m];b[j.id]=c.indexOf(j)}g=Ext.Array.sort(g,function(o,q){var p=b[o.id],r=b[q.id];return p<r?-1:1});a.suspendChanges();a.doDeselect(g,d);a.resumeChanges();if(!d&&!a.destroyed){a.maybeFireSelectionChange(a.getSelection().length!==f)}},getSelectionStart:function(){return this.selectionStart},setSelectionStart:function(a){this.selectionStart=a},selectWithEvent:function(d,b){var a=this,f=a.isSelected(d),c=b.shiftKey;switch(a.selectionMode){case"MULTI":a.selectWithEventMulti(d,b,f);break;case"SIMPLE":a.selectWithEventSimple(d,b,f);break;case"SINGLE":a.selectWithEventSingle(d,b,f);break}if(!c){if(a.isSelected(d)){a.selectionStart=d}else{a.selectionStart=null}}},vetoSelection:function(a){if(a.stopSelection){return true}else{if(a.type!=="keydown"&&a.button!==0){if(this.ignoreRightMouseSelection||this.isSelected(a.record)){return true}}else{return a.type==="mousedown"}}},onNavigate:function(d){if(!d.record||this.vetoSelection(d.keyEvent)){return}this.onBeforeNavigate(d);var g=this,f=d.keyEvent,r=f.ctrlKey||d.ctrlKey,b=d.recordIndex,c=d.record,p=d.previousRecord,a=g.isSelected(c),j=(g.selectionStart&&g.isSelected(d.previousRecord))?g.selectionStart:(g.selectionStart=d.previousRecord),o=d.previousRecordIndex,m=f.getCharCode(),q=m===f.SPACE,h=m===f.UP||m===f.PAGE_UP||m===f.HOME?"up":(m===f.DOWN||m===f.PAGE_DOWN||m===f.END?"down":null);switch(g.selectionMode){case"MULTI":g.setSelectionStart(d.selectionStart);if(m===f.A&&r){g.selected.beginUpdate();g.selectRange(0,g.store.getCount()-1);g.selected.endUpdate()}else{if(q){if(f.shiftKey){g.selectRange(j,c,r)}else{if(a){if(g.allowDeselect){g.doDeselect(c)}}else{g.doSelect(c,r)}}}else{if(f.shiftKey&&j){if(h==="up"&&o<=b){g.deselectRange(p,b+1)}else{if(h==="down"&&o>=b){g.deselectRange(p,b-1)}else{if(j!==c){g.selectRange(j,c,r)}}}g.lastSelected=c}else{if(m){if(!r){g.doSelect(c,false)}}else{g.selectWithEvent(c,f)}}}}break;case"SIMPLE":if(m===f.A&&r){g.selected.beginUpdate();g.selectRange(0,g.store.getCount()-1);g.selected.endUpdate()}else{if(a){g.doDeselect(c)}else{g.doSelect(c,true)}}break;case"SINGLE":if(!r){if(h){g.doSelect(c,false)}else{if(q||!m){g.selectWithEvent(c,f)}}}}if(!f.shiftKey&&!g.destroyed&&g.isSelected(c)){g.selectionStart=c;g.selectionStartIdx=b}},selectRange:function(m,b,p){var g=this,j=g.store,a=g.selected.items,r,d,f,c,o,h,q;if(g.isLocked()){return}r=g.normalizeRowRange(m,b);m=r[0];b=r[1];c=[];for(d=m;d<=b;d++){if(!g.isSelected(j.getAt(d))){c.push(j.getAt(d))}}if(!p){o=[];g.suspendChanges();for(d=0,f=a.length;d<f;++d){q=a[d];h=j.indexOf(q);if(h<m||h>b){o.push(q)}}for(d=0,f=o.length;d<f;++d){g.doDeselect(o[d])}g.resumeChanges()}if(!g.destroyed){if(c.length){g.doMultiSelect(c,true)}else{if(o){g.maybeFireSelectionChange(o.length>0)}}}},deselectRange:function(d,c){var h=this,b=h.store,j,g,f,a;if(h.isLocked()){return}j=h.normalizeRowRange(d,c);d=j[0];c=j[1];f=[];for(g=d;g<=c;g++){a=b.getAt(g);if(h.isSelected(a)){f.push(a)}}if(f.length){h.doDeselect(f)}},normalizeRowRange:function(a,d){var c=this.store,b;if(!Ext.isNumber(a)){a=c.indexOf(a)}a=Math.max(0,a);if(!Ext.isNumber(d)){d=c.indexOf(d)}d=Math.min(d,c.getCount()-1);if(a>d){b=d;d=a;a=b}return[a,d]},select:function(c,a,b){if(Ext.isDefined(c)&&!(Ext.isArray(c)&&!c.length)){this.doSelect(c,a,b)}},deselect:function(b,a){this.doDeselect(b,a)},doSelect:function(f,b,d){var a=this,c;if(a.locked||f==null){return}if(typeof f==="number"){c=a.store.getAt(f);if(!c){return}f=[c]}if(a.selectionMode==="SINGLE"){if(f.isModel){f=[f]}if(f.length){a.doSingleSelect(f[0],d)}}else{a.doMultiSelect(f,b,d)}},doMultiSelect:function(c,a,p){var m=this,d=m.selected,o=false,b,g,j,h,f;if(m.locked){return}c=!Ext.isArray(c)?[c]:c;j=c.length;if(!a&&d.getCount()>0){b=m.deselectDuringSelect(c,p);if(m.destroyed){return}if(b[0]){m.maybeFireSelectionChange(b[1]>0&&!p);return}else{o=b[1]>0}}f=function(){if(!d.getCount()){m.selectionStart=h}d.add(h);o=true};for(g=0;g<j;g++){h=c[g];if(m.isSelected(h)){continue}m.onSelectChange(h,true,p,f);if(m.destroyed){return}}m.lastSelected=h;m.maybeFireSelectionChange(o&&!p)},deselectDuringSelect:function(j,c){var b=this,f=b.selected.getRange(),a=f.length,h=0,m=false,d,g;b.suspendChanges();b.deselectingDuringSelect=true;for(g=0;g<a;++g){d=f[g];if(!Ext.Array.contains(j,d)){if(b.doDeselect(d,c)){++h}else{m=true}}if(b.destroyed){m=true;h=0;break}}b.deselectingDuringSelect=false;b.resumeChanges();return[m,h]},doDeselect:function(d,b){var a=this,f=a.selected,h=0,o,j,c=0,m=0,g;if(a.locked||!a.store){return false}if(typeof d==="number"){j=a.store.getAt(d);if(!j){return false}d=[j]}else{if(!Ext.isArray(d)){d=[d]}}g=function(){++m;f.remove(j);if(j===a.selectionStart){a.selectionStart=null}};o=d.length;a.suspendChanges();for(;h<o;h++){j=d[h];if(a.isSelected(j)){if(a.lastSelected===j){a.lastSelected=f.last()}++c;a.onSelectChange(j,false,b,g);if(a.destroyed){return false}}}a.resumeChanges();a.maybeFireSelectionChange(m>0&&!b);return m===c},doSingleSelect:function(b,c){var f=this,a=false,d=f.selected,g;if(f.locked){return}if(f.isSelected(b)){return}g=function(){if(d.getCount()){f.suspendChanges();var h=f.deselectDuringSelect([b],c);if(f.destroyed){return}f.resumeChanges();if(h[0]){return false}}f.lastSelected=b;if(!d.getCount()){f.selectionStart=b}d.add(b);a=true};f.onSelectChange(b,true,c,g);if(a&&!f.destroyed){f.maybeFireSelectionChange(!c)}},maybeFireSelectionChange:function(a){var b=this;if(a&&!b.suspendChange){b.fireEvent("selectionchange",b,b.getSelection())}},getLastSelected:function(){return this.lastSelected},getSelection:function(){return this.selected.getRange()},getSelectionMode:function(){return this.selectionMode},setSelectionMode:function(a){a=a?a.toUpperCase():"SINGLE";this.selectionMode=this.modes[a]?a:"SINGLE"},isLocked:function(){return this.locked},setLocked:function(a){this.locked=!!a},isRangeSelected:function(f,d){var a=this,c=a.store,g,b;b=a.normalizeRowRange(f,d);f=b[0];d=b[1];for(g=f;g<=d;g++){if(!a.isSelected(c.getAt(g))){return false}}return true},isSelected:function(a){a=Ext.isNumber(a)?this.store.getAt(a):a;return this.selected.contains(a)},hasSelection:function(){var a=this.getSelected();return !!(a&&a.getCount())},refresh:function(){var p=this,q=p.store,h=[],o=[],f=p.getSelection(),j=f.length,b=p.getSelected(),r,m,s,g,a,c;if(!q||!(b.isCollection||b.isRows)||!b.getCount()){return}s=q.getData();if(s.getSource){m=s.getSource();if(m){s=m}}p.refreshing=true;b.beginUpdate();p.suspendChanges();for(c=0;c<j;c++){g=f[c];a=s.get(g.getId());if(a){h.push(a)}else{if(!p.pruneRemoved){o.push(g)}}if(p.mode==="SINGLE"&&o.length){break}}if(b.getCount()!==(h.length+o.length)){r=true}p.clearSelections();if(h.length){p.doSelect(h,false,true)}if(o.length){b.add(o);if(!p.lastSelected){p.lastSelected=o[o.length-1]}}p.resumeChanges();if(r){b.endUpdate()}else{b.updating--}p.refreshing=false;p.maybeFireSelectionChange(r)},clearSelections:function(){var a=this.getSelected();if(a){a.clear()}this.lastSelected=null},onStoreAdd:Ext.emptyFn,onStoreClear:function(){if(!this.store.isLoading()&&this.hasSelection()){this.clearSelections();this.maybeFireSelectionChange(true)}},onStoreRemove:function(b,f,j,c){var a=this,d=f,h,m,g,o;if(a.selectionStart&&Ext.Array.contains(f,a.selectionStart)){a.selectionStart=null}if(c||a.locked||!a.pruneRemoved){return}o=b.isMoving(null,true);if(o){d=null;for(h=0,m=f.length;h<m;++h){g=f[h];if(!o[g.id]){(d||(d=[])).push(g)}}}if(d){a.deselect(d)}},onPageRemove:function(c,b,a){this.onStoreRemove(this.store,a)},onPageAdd:function(f,d,g){var b=g.length,a,c;for(a=0;a<b;a++){c=g[a];if(this.selected.get(c.id)){this.selected.replace(c)}}},getCount:function(){return this.selected.getCount()},onUpdate:Ext.emptyFn,destroy:function(){var a=this;a.clearSelections();a.bindStore(null);a.selected=Ext.destroy(a.selected);Ext.mixin.Observable.prototype.destroy.call(this)},onStoreUpdate:Ext.emptyFn,onIdChanged:function(c,b,a,d){this.selected.updateKey(b,a)},onStoreRefresh:function(){this.updateSelectedInstances(this.selected)},updateSelectedInstances:function(g){var o=this,q=o.getStore(),p=o.lastSelected,b=0,d=o.pruneRemovedOnRefresh(),m,c,h,a,f,j;if(q.isBufferedStore){return}m=g.getRange();c=m.length;if(p){o.lastSelected=q.getById(p.id);j=o.lastSelected!==p}o.refreshing=true;for(h=0;h<c;++h){a=m[h];f=q.getById(a.id);if(f){if(f!==a){g.replace(f)}}else{if(d){g.remove(a);++b}}}o.refreshing=false;o.maybeFireSelectionChange(b>0);if(j){o.fireEvent("lastselectedchanged",o,o.getSelection(),o.lastSelected)}},pruneRemovedOnRefresh:function(){return this.pruneRemoved},onStoreLoad:Ext.emptyFn,onSelectChange:function(b,f,d,a){var g=this,c=f?"select":"deselect";if((d||g.fireEvent("before"+c,g,b))!==false&&a()!==false){if(!d){g.fireEvent(c,g,b)}}},onEditorKey:Ext.emptyFn,beforeViewRender:function(a){Ext.Array.include(this.views||(this.views=[]),a)},onHeaderClick:Ext.emptyFn,resolveListenerScope:function(a){var b=this.view,c;if(b){c=b.resolveSatelliteListenerScope(this,a)}return c||Ext.mixin.Observable.prototype.resolveListenerScope.call(this,a)},bindComponent:Ext.emptyFn,privates:{onBeforeNavigate:Ext.privateFn,selectWithEventMulti:function(m,p,f){var q=this,g=p.shiftKey,b=p.ctrlKey,d=g?(q.getSelectionStart()):null,h=q.getSelection(),o=h.length,c,j,a;if(g&&d){q.selectRange(d,m,b)}else{if(b&&f){if(q.allowDeselect){q.doDeselect(m,false)}}else{if(b){q.doSelect(m,true,false)}else{if(f&&!g&&!b&&o>1){if(q.allowDeselect){c=[];for(j=0;j<o;++j){a=h[j];if(a!==m){c.push(a)}}q.doDeselect(c)}}else{if(!f){q.doSelect(m,false)}}}}}},selectWithEventSimple:function(b,a,c){if(c){this.doDeselect(b)}else{this.doSelect(b,true)}},selectWithEventSingle:function(d,b,f){var a=this,c=a.allowDeselect;if(c&&!b.ctrlKey){c=a.toggleOnClick}if(c&&f){a.doDeselect(d)}else{a.doSelect(d,false)}}}},1,0,0,0,["selection.abstract"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.selection,"Model",Ext,"AbstractSelectionModel"],0));(Ext.cmd.derive("Ext.selection.DataViewModel",Ext.selection.Model,{deselectOnContainerClick:true,bindComponent:function(b){var a=this,c;if(a.view!==b){if(a.view){a.navigationModel=null;Ext.destroy(a.viewListeners,a.navigationListeners)}a.view=b;if(b){c=a.getViewListeners();c.scope=a;c.destroyable=true;a.navigationModel=b.getNavigationModel();a.viewListeners=b.on(c);a.navigationListeners=a.navigationModel.on({navigate:a.onNavigate,scope:a,destroyable:true})}}},getViewListeners:function(){var a=this,b={};b[a.view.triggerCtEvent]=a.onContainerClick;return b},onUpdate:function(b){var a=this.view;if(a&&this.isSelected(b)){a.onItemSelect(b)}},onContainerClick:function(){if(this.deselectOnContainerClick){this.deselectAll()}},onSelectChange:function(a,f,d,h){var g=this,j=g.view,c=f?"select":"deselect",b=g.store.indexOf(a);if((d||g.fireEvent("before"+c,g,a,b))!==false&&h()!==false){if(j){if(f){j.onItemSelect(a)}else{j.onItemDeselect(a)}}if(!d){g.fireEvent(c,g,a,b)}}},destroy:function(){this.bindComponent();Ext.destroy(this.keyNav);Ext.selection.Model.prototype.destroy.call(this)}},0,0,0,0,["selection.dataviewmodel"],0,[Ext.selection,"DataViewModel"],0));(Ext.cmd.derive("Ext.view.NavigationModel",Ext.Base,{config:{store:null},focusCls:"x-view-item-focused",constructor:function(){this.mixins.observable.constructor.call(this)},bindComponent:function(a){if(this.view!==a){this.view=a;this.bindView(a)}},bindView:function(c){var a=this,b=c.dataSource,d;a.initKeyNav(c);if(!b.isEmptyStore){a.setStore(b)}d=a.getViewListeners();d.destroyable=true;a.viewListeners=a.viewListeners||[];a.viewListeners.push(c.on(d))},updateStore:function(a){this.mixins.storeholder.bindStore.apply(this,[a])},getViewListeners:function(){var a=this;return{containermousedown:a.onContainerMouseDown,itemmousedown:a.onItemMouseDown,itemclick:a.onItemClick,itemcontextmenu:a.onItemMouseDown,scope:a}},initKeyNav:function(a){var b=this;b.keyNav=new Ext.util.KeyNav({target:a,ignoreInputFields:true,eventName:"itemkeydown",defaultEventAction:"stopEvent",processEvent:b.processViewEvent,up:b.onKeyUp,down:b.onKeyDown,right:b.onKeyRight,left:b.onKeyLeft,pageDown:b.onKeyPageDown,pageUp:b.onKeyPageUp,home:b.onKeyHome,end:b.onKeyEnd,space:b.onKeySpace,enter:b.onKeyEnter,A:{ctrl:true,handler:b.onSelectAllKeyPress},scope:b})},processViewEvent:function(d,c,b,f,a){return a},addKeyBindings:function(a){this.keyNav.addBindings(a)},enable:function(){this.keyNav.enable();this.disabled=false},disable:function(){this.keyNav.disable();this.disabled=true},onContainerMouseDown:function(a,b){if(b.pointerType==="mouse"&&Ext.getScrollbarSize().width){if(!a.el.getClientRegion().contains(b.getPoint())){b.preventDefault()}}},onItemMouseDown:function(d,c,b,a,f){if(f.pointerType!=="touch"){this.setPosition(a)}},onItemClick:function(f,d,b,a,c){if(this.record===d){this.fireNavigateEvent(c)}else{this.setPosition(a,c)}},setPosition:function(g,o,c,h){var a=this,b=a.view,j=b.getSelectionModel(),d=b.dataSource,m,f;if(g==null||!b.all.getCount()){a.record=a.recordIndex=null}else{if(typeof g==="number"){f=Math.max(Math.min(g,d.getCount()-1),0);m=d.getAt(g)}else{if(g.isEntity){m=d.getById(g.id);f=d.indexOf(m);if(f===-1){m=d.getAt(0);f=0}}else{if(g.tagName){m=b.getRecord(g);f=d.indexOf(m)}else{m=f=null}}}}if(m===a.record){a.recordIndex=f;return a.focusPosition(f)}if(a.item){a.item.removeCls(a.focusCls)}a.previousRecordIndex=a.recordIndex;a.previousRecord=a.record;a.previousItem=a.item;a.recordIndex=f;a.record=m;h=h||a.record===a.lastFocused;if(m){a.focusPosition(a.recordIndex)}else{a.item=null}if(!c){j.fireEvent("focuschange",j,a.previousRecord,a.record)}if(!h&&o){a.fireNavigateEvent(o)}},focusPosition:function(a){var b=this;if(a!=null&&a!==-1){if(a.isEntity){a=b.view.dataSource.indexOf(a)}b.item=b.view.all.item(a);if(b.item){b.lastFocused=b.record;b.lastFocusedIndex=b.recordIndex;b.focusItem(b.item)}else{b.record=null}}else{b.item=null}},focusItem:function(a){a.addCls(this.focusCls);a.focus()},getPosition:function(){return this.record?this.recordIndex:null},getRecordIndex:function(){return this.recordIndex},getItem:function(){return this.item},getRecord:function(){return this.record},getLastFocused:function(){if(this.view.dataSource.indexOf(this.lastFocused)===-1){return null}return this.lastFocused},onKeyUp:function(b){var a=this.recordIndex-1;if(a<0){a=this.view.all.getCount()-1}this.setPosition(a,b)},onKeyDown:function(b){var a=this.recordIndex+1;if(a>this.view.all.getCount()-1){a=0}this.setPosition(a,b)},onKeyRight:function(b){var a=this.recordIndex+1;if(a>this.view.all.getCount()-1){a=0}this.setPosition(a,b)},onKeyLeft:function(b){var a=this.recordIndex-1;if(a<0){a=this.view.all.getCount()-1}this.setPosition(a,b)},onKeyPageDown:Ext.emptyFn,onKeyPageUp:Ext.emptyFn,onKeyHome:function(a){this.setPosition(0,a)},onKeyEnd:function(a){this.setPosition(this.view.all.getCount()-1,a)},onKeySpace:function(a){this.fireNavigateEvent(a)},onKeyEnter:function(a){a.stopEvent();a.view.fireEvent("itemclick",a.view,a.record,a.item,a.recordIndex,a)},onSelectAllKeyPress:function(a){this.fireNavigateEvent(a)},fireNavigateEvent:function(b){var a=this;a.fireEvent("navigate",{navigationModel:a,keyEvent:b,previousRecordIndex:a.previousRecordIndex,previousRecord:a.previousRecord,previousItem:a.previousItem,recordIndex:a.recordIndex,record:a.record,item:a.item})},destroy:function(){var a=this;a.setStore(null);Ext.destroy(a.viewListeners,a.keyNav);a.keyNav=a.viewListeners=a.dataSource=a.lastFocused=null;a.callParent()}},1,0,0,0,["view.navigation.default"],[[Ext.util.Observable.prototype.mixinId||Ext.util.Observable.$className,Ext.util.Observable],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable],[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.view,"NavigationModel"],0));(Ext.cmd.derive("Ext.view.AbstractView",Ext.Component,{inheritableStatics:{getRecord:function(a){return this.getBoundView(a).getRecord(a)},getBoundView:function(a){return Ext.getCmp(a.getAttribute("data-boundView"))}},defaultBindProperty:"store",renderBuffer:document.createElement("div"),statics:{updateDelay:200,queueRecordChange:function(p,h,c,r,s){var m=this,o=m.changeQueue||(m.changeQueue={}),d=c.internalId,g,b,f,t,j,q,a;g=o[d]||(o[d]={operation:r,record:c,data:{},views:[]});b=g.data;Ext.Array.include(g.views,p);if(s&&(f=s.length)){for(t=0;t<f;t++){j=s[t];q=c.data[j];if(b.hasOwnProperty(j)){if(c.isEqual(b[j],q)){delete b[j];a=true}}else{b[j]=q}}if(a&&!Ext.Object.getKeys(b).length){delete o[d]}}else{Ext.apply(b,c.data)}if(!m.flushQueueTask){m.flushQueueTask=Ext.util.TaskManager.newTask({run:Ext.global.requestAnimationFrame?Ext.Function.createAnimationFrame(m.onFlushTick,m):Ext.Function.bind(m.onFlushTick,m),interval:Ext.view.AbstractView.updateDelay,repeat:1})}m.flushQueueTask.start()},onFlushTick:function(){Ext.AnimationQueue.start(this.flushChangeQueue,this)},flushChangeQueue:function(){var d=this,f,j,h,c,g,b,a;if(Ext.isScrolling){d.flushQueueTask.start();return}h=d.changeQueue;this.changeQueue={};for(g in h){c=h[g];f=c.views;j=f.length;for(b=0;b<j;b++){a=f[b];if(!a.destroyed){a.handleUpdate(a.dataSource,c.record,c.operation,Ext.Object.getKeys(c.data))}}}Ext.AnimationQueue.stop(d.flushChangeQueue,d)}},config:{selection:null,store:"ext-empty-store",navigationModel:{type:"default"},selectionModel:{type:"dataviewmodel"}},publishes:["selection"],twoWayBindable:["selection"],throttledUpdate:false,deferInitialRefresh:false,itemCls:"x-dataview-item",loadingText:"Loading...",loadMask:true,loadingUseMsg:true,selectedItemCls:"x-item-selected",emptyText:"",deferEmptyText:true,trackOver:false,blockRefresh:false,preserveScrollOnRefresh:false,preserveScrollOnReload:false,ariaRole:"listbox",itemAriaRole:"option",last:false,focusable:true,tabIndex:0,triggerEvent:"itemclick",triggerCtEvent:"containerclick",refreshNeeded:true,updateSuspendCounter:0,addCmpEvents:Ext.emptyFn,constructor:function(a){if(a&&a.selModel){a.selectionModel=a.selModel}Ext.Component.prototype.constructor.call(this,a)},initComponent:function(){var a=this,d=Ext.isDefined,b=a.itemTpl,f={},c;if(b){if(Ext.isArray(b)){if(typeof b[b.length-1]!=="string"){b=b.slice(0);f=b.pop()}b=b.join("")}else{if(Ext.isObject(b)){f=Ext.apply(f,b.initialConfig);b=b.html}}if(!a.itemSelector){a.itemSelector="."+a.itemCls}b=Ext.String.format('<tpl for="."><div class="{0}" role="{2}">{1}</div></tpl>',a.itemCls,b,a.itemAriaRole);a.tpl=new Ext.XTemplate(b,f)}Ext.Component.prototype.initComponent.call(this);a.tpl=a.getTpl("tpl");if(a.overItemCls){a.trackOver=true}a.addCmpEvents();c=a.store=Ext.data.StoreManager.lookup(a.store||"ext-empty-store");if(!a.dataSource){a.dataSource=c}a.bindStore(c,true);a.getNavigationModel().bindComponent(this);if(!a.all){a.all=new Ext.CompositeElementLite()}a.scrollState={top:0,left:0};a.savedTabIndexAttribute="data-savedtabindex-"+a.id},getElConfig:function(){var a=this.mixins.renderable.getElConfig.call(this);if(this.focusable){a.tabIndex=0}return a},onRender:function(){var a=this.loadMask;Ext.Component.prototype.onRender.apply(this,arguments);if(a){this.createMask(a)}},beforeLayout:function(){var a=this;Ext.Component.prototype.beforeLayout.apply(this,arguments);if(a.refreshNeeded&&!a.pendingRefresh){if(a.refreshCounter){a.refresh()}else{a.doFirstRefresh(a.dataSource)}}},onMaskBeforeShow:function(){var b=this,a=b.loadingHeight;if(a&&a>b.getHeight()){b.hasLoadingHeight=true;b.oldMinHeight=b.minHeight;b.minHeight=a;b.updateLayout()}},onMaskHide:function(){var a=this;if(!a.destroying&&a.hasLoadingHeight){a.minHeight=a.oldMinHeight;a.updateLayout();delete a.hasLoadingHeight}},beforeRender:function(){Ext.Component.prototype.beforeRender.apply(this,arguments);this.getSelectionModel().beforeViewRender(this)},afterRender:function(){Ext.Component.prototype.afterRender.apply(this,arguments);if(this.focusable){this.focusEl=this.el}},getRefItems:function(){var b=this.loadMask,a=[];if(b&&b.isComponent){a.push(b)}return a},getSelection:function(){return this.getSelectionModel().getSelection()},updateSelection:function(b){var c=this,a;if(!c.ignoreNextSelection){c.ignoreNextSelection=true;a=c.getSelectionModel();if(b){a.select(b)}else{a.deselectAll()}c.ignoreNextSelection=false}},updateBindSelection:function(c,a){var b=this,d=null;if(!b.ignoreNextSelection){b.ignoreNextSelection=true;if(a.length){d=c.getLastSelected();b.hasHadSelection=true}if(b.hasHadSelection){b.setSelection(d)}b.ignoreNextSelection=false}},applySelectionModel:function(b,g){var f=this,d=f.grid,h,c,a;if(g){g.un({scope:f,selectionchange:f.updateBindSelection,lastselectedchanged:f.updateBindSelection,select:f.ariaSelect,deselect:f.ariaDeselect});Ext.destroy(f.selModelRelayer);b=Ext.Factory.selection(b)}else{if(b&&b.isSelectionModel){b.locked=f.disableSelection}else{if(f.simpleSelect){h="SIMPLE"}else{if(f.multiSelect){h="MULTI"}else{h="SINGLE"}}if(typeof b==="string"){b={type:b}}b=Ext.Factory.selection(Ext.apply({allowDeselect:f.allowDeselect||f.multiSelect,mode:h,locked:f.disableSelection},b))}}if(b.mode!=="SINGLE"){a=(d||f).ariaEl.dom;if(a){a.setAttribute("aria-multiselectable",true)}else{if(!d){c=f.ariaRenderAttributes||(f.ariaRenderAttributes={});c["aria-multiselectable"]=true}}}f.selModelRelayer=f.relayEvents(b,["selectionchange","beforeselect","beforedeselect","select","deselect","focuschange"]);b.on({scope:f,lastselectedchanged:f.updateBindSelection,selectionchange:f.updateBindSelection,select:f.ariaSelect,deselect:f.ariaDeselect});return b},updateSelectionModel:function(a){this.selModel=a},applyNavigationModel:function(a){return Ext.Factory.viewNavigation(a)},onFocusEnter:function(b){var a=this,d=a.getNavigationModel(),c;a.toggleChildrenTabbability(false);if(!a.itemFocused&&a.all.getCount()){c=d.getLastFocused();d.setPosition(c||0,b.event,null,!c);a.itemFocused=d.getPosition()!=null}if(a.itemFocused){this.el.dom.setAttribute("tabIndex","-1")}Ext.Component.prototype.onFocusEnter.call(this,b)},onFocusLeave:function(b){var a=this;if(a.itemFocused&&!a.refreshing){a.getNavigationModel().setPosition(null,b.event,null,true);a.itemFocused=false;a.el.dom.setAttribute("tabIndex",0)}Ext.Component.prototype.onFocusLeave.call(this,b)},ariaSelect:function(c,b){var a=this.getNode(b);if(a){a.setAttribute("aria-selected",true)}},ariaDeselect:function(c,b){var a=this.getNode(b);if(a){a.removeAttribute("aria-selected")}},onRemoved:function(a){Ext.Component.prototype.onRemoved.call(this,a);if(!a){this.onFocusLeave({})}},refresh:function(){var p=this,o=p.all,b=o.getCount(),m=p.refreshCounter,a,f,d,j=p.getSelectionModel(),h,g=m&&o.getCount()&&p.preserveScrollOnRefresh&&p.getScrollable(),c;if(!p.rendered||p.destroyed){return}if(!p.hasListeners.beforerefresh||p.fireEvent("beforerefresh",p)!==false){p.refreshing=true;h=p.saveFocusState();a=p.getTargetEl();d=p.getViewRange();f=a.dom;if(g){c=g.getPosition();if(!(c.x||c.y)){c=null}}if(m){p.clearViewEl();p.refreshCounter++}else{p.refreshCounter=1}p.tpl.append(a,p.collectData(d,o.startIndex||0));if(d.length<1){p.addEmptyText();o.clear()}else{p.collectNodes(a.dom);p.updateIndexes(0)}h();if(p.refreshSelmodelOnRefresh!==false){j.refresh()}p.refreshNeeded=false;p.refreshSize(o.getCount()!==b);p.fireEvent("refresh",p,d);if(g){g.scrollTo(c)}if(!p.viewReady){p.viewReady=true;p.fireEvent("viewready",p)}p.refreshing=false;p.refreshScroll();p.cleanupData()}},addEmptyText:function(){var b=this,a=b.getStore();if(b.emptyText&&!a.isLoading()&&(!b.deferEmptyText||b.refreshCounter>1||a.isLoaded())){b.emptyEl=Ext.core.DomHelper.insertHtml("beforeEnd",b.getTargetEl().dom,b.emptyText)}},getViewRange:function(){return this.dataSource.getRange()},refreshSize:function(b){var a=this,d=a.getSizeModel(),c=a.getScrollable();if(d.height.shrinkWrap||d.width.shrinkWrap||b){a.updateLayout()}else{if(a.touchScroll&&!a.bufferedRenderer){if(c){c.refresh()}else{a.on({boxready:a.refreshScroll,scope:a,single:true})}}}},afterFirstLayout:function(a,d){var b=this,c=b.getScrollable();if(c){c.on({scroll:b.onViewScroll,scrollend:b.onViewScrollEnd,scope:b,onFrame:!!Ext.global.requestAnimationFrame})}Ext.Component.prototype.afterFirstLayout.call(this,a,d)},clearViewEl:function(){var c=this,a=c.getTargetEl(),b=c.getNodeContainer()===a;c.clearEmptyEl();c.all.clear(!b);if(b){a.dom.innerHTML=""}},clearEmptyEl:function(){var a=this.emptyEl;if(a){Ext.removeNode(a)}this.emptyEl=null},onViewScroll:function(c,b,a){this.fireEvent("scroll",this,b,a)},onViewScrollEnd:function(c,b,a){this.fireEvent("scrollend",this,b,a)},saveScrollState:function(){var a=this,b=a.scrollState;if(a.rendered){b.left=a.getScrollX();b.top=a.getScrollY()}},restoreScrollState:function(){var a=this,b=a.scrollState;if(a.rendered){a.setScrollX(b.left);a.setScrollY(b.top)}},prepareData:function(g,f,d){var c,b,a;if(d){c=d.getAssociatedData();for(b in c){if(c.hasOwnProperty(b)){if(!a){g=Ext.Object.chain(g);a=true}g[b]=c[b]}}}return g},collectData:function(d,a){var g=[],f=0,b=d.length,c;for(;f<b;f++){c=d[f];g[f]=this.prepareData(c.data,a+f,c)}return g},cleanupData:Ext.emptyFn,bufferRender:function(c,d){var g=this,h=g.renderBuffer,a=document.createDocumentFragment(),b,j,f;g.tpl.overwrite(h,g.collectData(c,d));b=Ext.fly(h).query(g.getItemSelector());for(f=0,j=b.length;f<j;f++){a.appendChild(b[f])}return{fragment:a,children:b}},nodeContainerSelector:null,getNodeContainer:function(){var b=this.getTargetEl(),a=this.nodeContainerSelector;return a?b.down(a,true):b},getNodeContainerSelector:function(){return this.nodeContainerSelector},onUpdate:function(d,b,c,h,f){var g=this,a=f&&f.filtered;if(!a&&g.getNode(b)){if(g.throttledUpdate){g.statics().queueRecordChange(g,d,b,c,h)}else{g.handleUpdate.apply(g,arguments)}}},handleUpdate:function(d,b){var a=this,f,g,c=a.getSelectionModel();if(a.viewReady){f=a.dataSource.indexOf(b);if(f>-1){if(a.getNode(b)){g=a.bufferRender([b],f).children[0];a.all.replaceElement(f,g,true);a.updateIndexes(f,f);c.onUpdate(b);a.refreshSizePending=true;if(c.isSelected(b)){a.onItemSelect(b)}if(a.hasListeners.itemupdate){a.fireEvent("itemupdate",b,f,g)}return g}}}},onReplace:function(g,p,q,s){var d=this,f=d.all,b=d.getSelectionModel(),r=p,m,h,c,o,j,t,a;if(d.rendered){m=d.bufferRender(s,p,true);c=m.fragment;o=m.children;h=f.item(p);if(h){f.item(p).insertSibling(c,"before",true)}else{d.appendNodes(c)}f.insert(p,o);if(q.length){a=d.saveFocusState()}p+=s.length;t=p+q.length-1;j=f.removeRange(p,t,true);if(d.refreshSelmodelOnRefresh!==false){b.refresh()}d.updateIndexes(p);if(d.hasListeners.itemremove){d.fireEvent("itemremove",q,r,j,d)}if(d.hasListeners.itemadd){d.fireEvent("itemadd",s,r,o)}a();d.refreshSize()}},onAdd:function(f,d,g){var a=this,c,b=a.getSelectionModel();if(a.rendered){if(a.all.getCount()===0){a.refresh();c=a.all.slice()}else{c=a.doAdd(d,g);if(a.refreshSelmodelOnRefresh!==false){b.refresh()}a.updateIndexes(g);a.refreshSizePending=true}if(a.hasListeners.itemadd){a.fireEvent("itemadd",d,g,c)}}},appendNodes:function(b){var c=this.all,a=c.getCount();if(this.nodeContainerSelector){this.getNodeContainer().appendChild(b)}else{c.item(a-1).insertSibling(b,"after")}},doAdd:function(g,j){var o=this,c=o.bufferRender(g,j,true),m=c.fragment,f=c.children,a=o.all,h=a.getCount(),b=a.startIndex||0,d=a.endIndex||h-1;if(h===0||j>d){o.appendNodes(m)}else{if(j<=b){a.item(b).insertSibling(m,"before",true)}else{a.item(j).insertSibling(f,"before",true)}}a.insert(j,f);return f},onRemove:function(q,f,m){var o=this,b=o.all,c=o.hasListeners.itemremove,p,g,h,a,d,j;if(b.getCount()){if(o.dataSource.getCount()===0){if(c){o.fireEvent("itemremove",f,m,o.getNodes(m,m+f.length-1))}o.refresh()}else{j=o.saveFocusState();if(c){a=[]}for(g=f.length-1;g>=0;--g){h=f[g];p=m+g;if(a){d=b.item(p);a[g]=d?d.dom:undefined}if(b.item(p)){o.doRemove(h,p)}}if(c){o.fireEvent("itemremove",f,m,a,o)}j();o.updateIndexes(m)}o.refreshSizePending=true}},doRemove:function(a,b){this.all.removeElement(b,true)},saveFocusState:function(){var a=this,c=a.dataSource||a.store,d=a.getNavigationModel(),f=d.recordIndex,b=d.record;if(a.el.contains(Ext.Element.getActiveElement())){a.el.dom.focus();return function(){if(c.getCount()){f=Math.min(f,a.all.getCount()-1);d.setPosition(c.contains(b)?b:f,null,null,true)}}}return Ext.emptyFn},refreshNode:function(a){if(Ext.isNumber(a)){a=this.store.getAt(a)}this.onUpdate(this.dataSource,a)},updateIndexes:function(h,g){var b=this.all.elements,f,a=this.getViewRange(),d,c=this.id;h=h||0;g=g||((g===0)?0:(b.length-1));for(d=h;d<=g;d++){f=b[d];f.setAttribute("data-recordIndex",d);f.setAttribute("data-recordId",a[d].internalId);f.setAttribute("data-boundView",c)}},bindStore:function(d,f){var b=this,c=b.getSelectionModel(),a=b.getNavigationModel();c.bindStore(d);c.bindComponent(d?b:null);b.mixins.storeholder.bindStore.apply(b,arguments);a.setStore(d);if(d&&b.componentLayoutCounter){b.doFirstRefresh(d,!f)}},doFirstRefresh:function(b,a){var c=this;if(c.deferInitialRefresh&&!a){Ext.defer(c.doFirstRefresh,1,c,[b,true])}else{if(b&&!b.isLoading()){c.refresh()}}},onUnbindStore:function(a){this.setMaskBind(null);if(this.dataSource===a){this.dataSource=null}},onBindStore:function(b,a){var c=this;if(c.store.isBufferedStore){c.store.preserveScrollOnReload=c.preserveScrollOnReload}if(a&&a.isBufferedStore){delete a.preserveScrollOnReload}c.setMaskBind(b);if(!c.dataSource){c.dataSource=b}},setMaskBind:function(b){var a=this.loadMask;if(this.rendered&&a&&b&&!a.bindStore){a=this.createMask()}if(a&&a.bindStore){a.bindStore(b)}},getStoreListeners:function(){var a=this;return{refresh:a.onDataRefresh,replace:a.onReplace,add:a.onAdd,remove:a.onRemove,update:a.onUpdate,clear:a.onDataRefresh,beginupdate:a.onBeginUpdate,endupdate:a.onEndUpdate}},onBeginUpdate:function(){++this.updateSuspendCounter;Ext.suspendLayouts()},onEndUpdate:function(){var a=this;if(a.updateSuspendCounter){--a.updateSuspendCounter}Ext.resumeLayouts(true);if(a.refreshSizePending){a.refreshSize(true);a.refreshSizePending=false}},onDataRefresh:function(b){var a=this,c=a.preserveScrollOnRefresh;if(b.loadCount>a.lastRefreshLoadCount){a.preserveScrollOnRefresh=a.preserveScrollOnReLoad}a.refreshView();a.preserveScrollOnRefresh=c;a.lastRefreshLoadCount=b.loadCount},refreshView:function(){var b=this,a=b.blockRefresh||!b.rendered||b.up("[collapsed],[isCollapsingOrExpanding],[hidden]");if(a){b.refreshNeeded=true}else{if(b.bufferedRenderer){b.bufferedRenderer.refreshView()}else{b.refresh()}}},findItemByChild:function(a){return Ext.fly(a).findParent(this.getItemSelector(),this.getTargetEl())},findTargetByEvent:function(a){return a.getTarget(this.getItemSelector(),this.getTargetEl())},getSelectedNodes:function(){var d=[],c=this.getSelectionModel().getSelection(),b=c.length,a=0;for(;a<b;a++){d.push(this.getNode(c[a]))}return d},getRecords:function(f){var d=[],a=0,c=f.length,b=this.dataSource.data;for(;a<c;a++){d[d.length]=b.getByKey(f[a].getAttribute("data-recordId"))}return d},getRecord:function(a){return this.dataSource.getByInternalId(Ext.getDom(a).getAttribute("data-recordId"))},isSelected:function(b){var a=this.getRecord(b);return this.getSelectionModel().isSelected(a)},select:function(c,a,b){this.getSelectionModel().select(c,a,b)},deselect:function(b,a){this.getSelectionModel().deselect(b,a)},getNode:function(c){var a=this,b;if(a.rendered&&(c||c===0)){if(Ext.isString(c)){b=document.getElementById(c)}else{if(c.isModel){b=a.getNodeByRecord(c)}else{if(Ext.isNumber(c)){b=a.all.elements[c]}else{if(c.target&&c.target.nodeType){c=c.target}b=Ext.fly(c).findParent(a.itemSelector,a.getTargetEl())}}}}return b||null},getNodeByRecord:function(a){var b=this.store.indexOf(a);return this.all.elements[b]||null},getNodes:function(a,b){var c=this.all;if(b!==undefined){b++}return c.slice(a,b)},indexOf:function(a){a=this.getNode(a);if(!a&&a!==0){return -1}if(a.getAttribute("data-recordIndex")){return Number(a.getAttribute("data-recordIndex"))}return this.all.indexOf(a)},onDestroy:function(){var b=this,a=b.updateSuspendCounter;b.all.clear();b.emptyEl=null;Ext.Component.prototype.onDestroy.call(this);b.bindStore(null);b.store=b.dataSource=b.storeListeners=null;if(b.selModelRelayer){b.selModelRelayer.destroy();b.selModelRelayer=null}Ext.destroy(b.navigationModel,b.selectionModel);b.navigationModel=b.selectionModel=b.selModel=null;b.loadMask=null;while(a--){Ext.resumeLayouts(true)}},onItemSelect:function(a){var b=this.getNode(a);if(b){Ext.fly(b).addCls(this.selectedItemCls)}},onItemDeselect:function(a){var b=this.getNode(a);if(b){Ext.fly(b).removeCls(this.selectedItemCls)}},getItemSelector:function(){return this.itemSelector},addItemCls:function(c,b){var a=this.getNode(c);if(a){Ext.fly(a).addCls(b)}},removeItemCls:function(c,b){var a=this.getNode(c);if(a){Ext.fly(a).removeCls(b)}},setStore:function(a){var b=this;if(b.store!==a){if(b.isConfiguring){b.store=a}else{b.bindStore(a,false)}}},privates:{toggleChildrenTabbability:function(b){var a=this.getTargetEl();if(b){a.restoreTabbableState(true)}else{a.saveTabbableState({skipSelf:true,includeSaved:false})}},collectNodes:function(a){var c=this.all,b={role:this.itemAriaRole};c.fill(Ext.fly(a).query(this.getItemSelector()),c.startIndex||0);if(this.focusable){b.tabindex="-1"}c.set(b)},createMask:function(d){var b=this,a=b.getStore(),c;if(a&&!a.isEmptyStore&&!a.loadsSynchronously()){c={target:b,msg:b.loadingText,useMsg:b.loadingUseMsg,store:a};if(b.loadingCls){c.msgCls=b.loadingCls}if(Ext.isObject(d)){c=Ext.apply(c,d)}b.loadMask=new Ext.LoadMask(c);b.loadMask.on({scope:b,beforeshow:b.onMaskBeforeShow,hide:b.onMaskHide})}return b.loadMask},getOverflowEl:function(){return Ext.Component.prototype.getTargetEl.call(this)},getTargetEl:function(){return this.touchScroll?this.getScrollerEl():Ext.Component.prototype.getTargetEl.call(this)}}},1,0,["component","box"],{component:true,box:true},0,[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.view,"AbstractView"],function(){Ext.deprecate("extjs","4.0",function(){Ext.view.AbstractView.override({getSelectionCount:function(){if(Ext.global.console){Ext.global.console.warn("DataView: getSelectionCount will be removed, please interact with the Ext.selection.DataViewModel")}return this.selModel.getSelection().length},getSelectedRecords:function(){if(Ext.global.console){Ext.global.console.warn("DataView: getSelectedRecords will be removed, please interact with the Ext.selection.DataViewModel")}return this.selModel.getSelection()},select:function(c,d,b){if(Ext.global.console){Ext.global.console.warn("DataView: select will be removed, please access select through a DataView's SelectionModel, ie: view.getSelectionModel().select()")}var a=this.getSelectionModel();return a.select.apply(a,arguments)},clearSelections:function(){if(Ext.global.console){Ext.global.console.warn("DataView: clearSelections will be removed, please access deselectAll through DataView's SelectionModel, ie: view.getSelectionModel().deselectAll()")}var a=this.getSelectionModel();return a.deselectAll()}})})}));(Ext.cmd.derive("Ext.view.View",Ext.view.AbstractView,{alternateClassName:"Ext.DataView",inputTagRe:/^textarea$|^input$/i,keyEventRe:/^key/,inheritableStatics:{EventMap:{longpress:"LongPress",mousedown:"MouseDown",mouseup:"MouseUp",click:"Click",dblclick:"DblClick",contextmenu:"ContextMenu",mouseover:"MouseOver",mouseout:"MouseOut",mouseenter:"MouseEnter",mouseleave:"MouseLeave",keydown:"KeyDown",keyup:"KeyUp",keypress:"KeyPress",focus:"Focus"},TouchEventMap:{touchstart:"mousedown",touchend:"mouseup",tap:"click",doubletap:"dblclick"}},afterRender:function(){var a=this;Ext.view.AbstractView.prototype.afterRender.call(this);a.mon(a.el,{scope:a,click:a.handleEvent,longpress:a.handleEvent,mousedown:a.handleEvent,mouseup:a.handleEvent,dblclick:a.handleEvent,contextmenu:a.handleEvent,keydown:a.handleEvent,keyup:a.handleEvent,keypress:a.handleEvent,mouseover:a.handleMouseOver,mouseout:a.handleMouseOut})},getTargetSelector:function(){return this.dataRowSelector||this.itemSelector},handleMouseOver:function(b){var a=this,c=a.getTargetSelector(),d=b.getTarget(c);if(!a.destroyed){if(d){if(a.mouseOverItem!==d&&a.el.contains(d)){a.mouseOverItem=b.item=d;b.newType="mouseenter";a.handleEvent(b)}}else{a.handleEvent(b)}}},handleMouseOut:function(a){var f=this,c=f.getTargetSelector(),d=a.getTarget(c),g=a.getRelatedTarget(c),b;if((d===g)&&!(d===null&&g===null)){return}if(!f.destroyed){if(d&&(b=f.self.getBoundView(d))){a.item=d;a.newType="mouseleave";b.handleEvent(a);b.mouseOverItem=null}else{f.handleEvent(a)}}},handleEvent:function(a){var c=this,b=c.keyEventRe.test(a.type);a.view=c;a.item=a.getTarget(c.itemSelector);if(a.item){a.record=c.getRecord(a.item)}if(c.processUIEvent(a)!==false){c.processSpecialEvent(a)}if(b&&!Ext.fly(a.target).isInputField()){if(a.getKey()===a.SPACE||a.isNavKeyPress(true)){a.preventDefault()}}a.view=null},processItemEvent:Ext.emptyFn,processContainerEvent:Ext.emptyFn,processSpecialEvent:Ext.emptyFn,processUIEvent:function(j){if(!Ext.getBody().isAncestor(j.target)){return}var a=this,b=j.item,c=a.self,d=c.EventMap,m=c.TouchEventMap,h,g=j.record,o=j.type,f=o;if(j.newType){f=j.newType}if(b){f=m[f]||f;h=j.recordIndex=a.indexInStore?a.indexInStore(g):a.indexOf(b);if(!g||a.processItemEvent(g,b,h,j)===false){return false}if((a["onBeforeItem"+d[f]](g,b,h,j)===false)||(a.fireEvent("beforeitem"+f,a,g,b,h,j)===false)||(a["onItem"+d[f]](g,b,h,j)===false)){return false}a.fireEvent("item"+f,a,g,b,h,j)}else{o=m[o]||o;if((a.processContainerEvent(j)===false)||(a["onBeforeContainer"+d[o]](j)===false)||(a.fireEvent("beforecontainer"+o,a,j)===false)||(a["onContainer"+d[o]](j)===false)){return false}a.fireEvent("container"+o,a,j)}return true},onItemMouseEnter:function(c,a,d,b){if(this.trackOver){this.highlightItem(a)}},onItemMouseLeave:function(c,a,d,b){if(this.trackOver){this.clearHighlight()}},onItemMouseDown:Ext.emptyFn,onItemLongPress:Ext.emptyFn,onItemMouseUp:Ext.emptyFn,onItemFocus:Ext.emptyFn,onItemClick:Ext.emptyFn,onItemDblClick:Ext.emptyFn,onItemContextMenu:Ext.emptyFn,onItemKeyDown:Ext.emptyFn,onItemKeyUp:Ext.emptyFn,onItemKeyPress:Ext.emptyFn,onBeforeItemLongPress:Ext.emptyFn,onBeforeItemMouseDown:Ext.emptyFn,onBeforeItemMouseUp:Ext.emptyFn,onBeforeItemFocus:Ext.emptyFn,onBeforeItemMouseEnter:Ext.emptyFn,onBeforeItemMouseLeave:Ext.emptyFn,onBeforeItemClick:Ext.emptyFn,onBeforeItemDblClick:Ext.emptyFn,onBeforeItemContextMenu:Ext.emptyFn,onBeforeItemKeyDown:Ext.emptyFn,onBeforeItemKeyUp:Ext.emptyFn,onBeforeItemKeyPress:Ext.emptyFn,onContainerMouseDown:Ext.emptyFn,onContainerLongPress:Ext.emptyFn,onContainerMouseUp:Ext.emptyFn,onContainerMouseOver:Ext.emptyFn,onContainerMouseOut:Ext.emptyFn,onContainerClick:Ext.emptyFn,onContainerDblClick:Ext.emptyFn,onContainerContextMenu:Ext.emptyFn,onContainerKeyDown:Ext.emptyFn,onContainerKeyUp:Ext.emptyFn,onContainerKeyPress:Ext.emptyFn,onBeforeContainerMouseDown:Ext.emptyFn,onBeforeContainerLongPress:Ext.emptyFn,onBeforeContainerMouseUp:Ext.emptyFn,onBeforeContainerMouseOver:Ext.emptyFn,onBeforeContainerMouseOut:Ext.emptyFn,onBeforeContainerClick:Ext.emptyFn,onBeforeContainerDblClick:Ext.emptyFn,onBeforeContainerContextMenu:Ext.emptyFn,onBeforeContainerKeyDown:Ext.emptyFn,onBeforeContainerKeyUp:Ext.emptyFn,onBeforeContainerKeyPress:Ext.emptyFn,setHighlightedItem:function(a){var d=this,c=d.highlightedItem,b=d.overItemCls;if(c!==a){if(c){Ext.fly(c).removeCls(b);if(Ext.isIE8){d.repaintBorder(c);d.repaintBorder(c.nextSibling)}if(d.hasListeners.unhighlightitem){d.fireEvent("unhighlightitem",d,c)}}d.highlightedItem=a;if(a){Ext.fly(a).addCls(d.overItemCls);if(Ext.isIE8){d.repaintBorder(a.nextSibling)}if(d.hasListeners.highlightitem){d.fireEvent("highlightitem",d,a)}}}},highlightItem:function(a){this.setHighlightedItem(a)},clearHighlight:function(){this.setHighlightedItem(undefined)},handleUpdate:function(c,b){var a=this,g,d,f;if(a.viewReady){g=a.getNode(b);d=Ext.view.AbstractView.prototype.handleUpdate.apply(this,arguments);f=a.highlightedItem;if(f&&f===g){delete a.highlightedItem;if(d){a.highlightItem(d)}}}},refresh:function(){this.clearHighlight();Ext.view.AbstractView.prototype.refresh.apply(this,arguments)},focusNode:function(h){var f=this,d=Ext.fly(f.getNode(h)),c=f.el,j=0,a=0,g=c.getRegion(),b;g.bottom=g.top+c.dom.clientHeight;g.right=g.left+c.dom.clientWidth;if(d){b=d.getRegion();if(b.top<g.top){j=b.top-g.top}else{if(b.bottom>g.bottom){j=b.bottom-g.bottom}}if(b.left<g.left){a=b.left-g.left}else{if(b.right>g.right){a=b.right-g.right}}if(a||j){f.scrollBy(a,j,false)}d.set({tabIndex:-1});d.focus()}},privates:{repaintBorder:function(b){var a=this.getNode(b);if(a){a.className=a.className}}}},0,["dataview"],["component","box","dataview"],{component:true,box:true,dataview:true},["widget.dataview"],0,[Ext.view,"View",Ext,"DataView"],0));(Ext.cmd.derive("Ext.view.BoundListKeyNav",Ext.view.NavigationModel,{navigateOnSpace:true,initKeyNav:function(b){var c=this,a=b.pickerField;if(!c.keyNav){Ext.view.NavigationModel.prototype.initKeyNav.call(this,b);c.keyNav.map.addBinding({key:Ext.event.Event.ESC,fn:c.onKeyEsc,scope:c})}if(!a){return}if(!a.rendered){a.on("render",Ext.Function.bind(c.initKeyNav,c,[b],0),c,{single:true});return}c.fieldKeyNav=new Ext.util.KeyNav({disabled:true,target:a.inputEl,forceKeyDown:true,up:c.onKeyUp,down:c.onKeyDown,right:c.onKeyRight,left:c.onKeyLeft,pageDown:c.onKeyPageDown,pageUp:c.onKeyPageUp,home:c.onKeyHome,end:c.onKeyEnd,tab:c.onKeyTab,space:c.onKeySpace,enter:c.onKeyEnter,A:{ctrl:true,handler:c.onSelectAllKeyPress},priority:1001,scope:c})},processViewEvent:function(d,c,b,f,a){if(a.within(d.listWrap)){return a}if(a.getKey()===a.ESC){if(Ext.fly(a.target).isInputField()){a.target=a.target.parentNode}return a}},enable:function(){this.fieldKeyNav.enable();Ext.view.NavigationModel.prototype.enable.call(this)},disable:function(){this.fieldKeyNav.disable();Ext.view.NavigationModel.prototype.disable.call(this)},onItemMouseDown:function(d,c,b,f,a){Ext.view.NavigationModel.prototype.onItemMouseDown.call(this,d,c,b,f,a);a.preventDefault()},onKeyUp:function(h){var f=this,b=f.view,d=b.all,g=b.highlightedItem,c=g?b.indexOf(g):-1,a=c>0?c-1:d.getCount()-1;f.setPosition(a);h.preventDefault()},onKeyDown:function(h){var f=this,b=f.view,d=b.all,g=b.highlightedItem,c=g?b.indexOf(g):-1,a=c<d.getCount()-1?c+1:0;f.setPosition(a);h.preventDefault()},onKeyLeft:Ext.returnTrue,onKeyRight:Ext.returnTrue,onKeyTab:function(a){var b=this.view,c=b.pickerField;if(b.isVisible()){if(c.selectOnTab){this.selectHighlighted(a)}if(c.collapse){c.collapse()}}return true},onKeyEnter:function(b){var c=this.view,d=c.getSelectionModel(),a=c.pickerField,f=d.getCount();b.stopEvent();this.selectHighlighted(b);if(!a.multiSelect&&f===d.getCount()&&a.collapse){a.collapse()}return false},onKeySpace:function(){if(this.navigateOnSpace){Ext.view.NavigationModel.prototype.onKeySpace.apply(this,arguments)}return true},onKeyEsc:function(){if(this.view.pickerField){this.view.pickerField.collapse()}},focusItem:function(a){var c=this,b=c.view;if(typeof a==="number"){a=b.all.item(a)}if(a){a=a.dom;b.highlightItem(a);b.getScrollable().scrollIntoView(a,false)}},selectHighlighted:function(a){var g=this,c=g.view,b=c.getSelectionModel(),d,f=g.recordIndex;if(c.all.getCount()){d=g.getRecord();if(d){if(a.getKey()===a.ENTER||!b.isSelected(d)){b.selectWithEvent(d,a);if(!c.store.data.contains(d)){g.setPosition(Math.min(f,c.store.getCount()-1))}}}}},destroy:function(){this.fieldKeyNav=Ext.destroy(this.fieldKeyNav);Ext.view.NavigationModel.prototype.destroy.call(this)}},0,0,0,0,["view.navigation.boundlist"],0,[Ext.view,"BoundListKeyNav"],0));(Ext.cmd.derive("Ext.layout.component.BoundList",Ext.layout.component.Auto,{type:"component",beginLayout:function(b){var a=this,c=a.owner,d=c.pagingToolbar;a.scrollPos=c.listWrap.getScroll();Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);if(c.floating){b.savedXY=c.getXY();c.setXY([0,-9999])}if(d){b.toolbarContext=b.context.getCmp(d)}b.listContext=b.getEl("listWrap")},beginLayoutCycle:function(b){var a=this.owner;Ext.layout.component.Auto.prototype.beginLayoutCycle.apply(this,arguments);if(b.heightModel.auto){a.el.setHeight("auto");a.listWrap.setHeight("auto")}},getLayoutItems:function(){var a=this.owner.pagingToolbar;return a?[a]:[]},isValidParent:function(){return true},finishedLayout:function(f){var d=this,g=f.savedXY,b=d.owner,c=b.listWrap,a=d.scrollPos;Ext.layout.component.Auto.prototype.finishedLayout.apply(this,arguments);if(g){d.owner.setXY(g)}c.setScrollLeft(a.left);c.setScrollTop(a.top)},measureContentWidth:function(a){return this.owner.listWrap.getWidth()},measureContentHeight:function(a){return this.owner.listWrap.getHeight()},publishInnerHeight:function(a,c){var d=a.toolbarContext,b=0;if(d){b=d.getProp("height")}if(b===undefined){this.done=false}else{a.listContext.setHeight(c-a.getFrameInfo().height-b)}},calculateOwnerHeightFromContentHeight:function(a){var b=Ext.layout.component.Auto.prototype.calculateOwnerHeightFromContentHeight.apply(this,arguments),c=a.toolbarContext;if(c){b+=c.getProp("height")}return b}},0,0,0,0,["layout.boundlist"],0,[Ext.layout.component,"BoundList"],0));(Ext.cmd.derive("Ext.toolbar.Item",Ext.Component,{alternateClassName:"Ext.Toolbar.Item",enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn},0,["tbitem"],["component","box","tbitem"],{component:true,box:true,tbitem:true},["widget.tbitem"],0,[Ext.toolbar,"Item",Ext.Toolbar,"Item"],0));(Ext.cmd.derive("Ext.toolbar.TextItem",Ext.toolbar.Item,{alternateClassName:"Ext.Toolbar.TextItem",text:"",baseCls:"x-toolbar-text",ariaRole:null,beforeRender:function(){var a=this.text;Ext.toolbar.Item.prototype.beforeRender.call(this);if(a){this.html=a}},setText:function(a){this.update(a)}},0,["tbtext"],["component","box","tbitem","tbtext"],{component:true,box:true,tbitem:true,tbtext:true},["widget.tbtext"],0,[Ext.toolbar,"TextItem",Ext.Toolbar,"TextItem"],0));(Ext.cmd.derive("Ext.form.trigger.Spinner",Ext.form.trigger.Trigger,{cls:"x-form-trigger-spinner",spinnerCls:"x-form-spinner",spinnerUpCls:"x-form-spinner-up",spinnerDownCls:"x-form-spinner-down",focusCls:"x-form-spinner-focus",overCls:"x-form-spinner-over",clickCls:"x-form-spinner-click",focusFieldOnClick:true,vertical:true,bodyTpl:'<tpl if="vertical"><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerUpCls} {spinnerUpCls}-{ui} {childElCls} {upDisabledCls}"></div></tpl><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerDownCls} {spinnerDownCls}-{ui} {childElCls} {downDisabledCls}"></div><tpl if="!vertical"><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerUpCls} {spinnerUpCls}-{ui} {childElCls} {upDisabledCls}"></div></tpl>',destroy:function(){var a=this;if(a.spinnerEl){a.spinnerEl.destroy();a.spinnerEl=a.upEl=a.downEl=null}Ext.form.trigger.Trigger.prototype.destroy.call(this)},getBodyRenderData:function(){var a=this;return{vertical:a.vertical,upDisabledCls:a.upEnabled?"":(a.spinnerUpCls+"-disabled"),downDisabledCls:a.downEnabled?"":(a.spinnerDownCls+"-disabled"),spinnerCls:a.spinnerCls,spinnerUpCls:a.spinnerUpCls,spinnerDownCls:a.spinnerDownCls}},getStateEl:function(){return this.spinnerEl},onClick:function(){var d=this,c=arguments,b=d.clickRepeater?c[1]:c[0],a=d.field;if(!a.readOnly&&!a.disabled){if(d.upEl.contains(b.target)){Ext.callback(d.upHandler,d.scope,[a,d,b],0,a)}else{if(d.downEl.contains(b.target)){Ext.callback(d.downHandler,d.scope,[a,d,b],0,a)}}}a.inputEl.focus()},onFieldRender:function(){var d=this,c=d.vertical,b,a;Ext.form.trigger.Trigger.prototype.onFieldRender.call(this);b=d.spinnerEl=d.el.select("."+d.spinnerCls,true);a=b.elements;d.upEl=c?a[0]:a[1];d.downEl=c?a[1]:a[0]},setUpEnabled:function(a){this.upEl[a?"removeCls":"addCls"](this.spinnerUpCls+"-disabled")},setDownEnabled:function(a){this.downEl[a?"removeCls":"addCls"](this.spinnerDownCls+"-disabled")}},0,0,0,0,["trigger.spinner"],0,[Ext.form.trigger,"Spinner"],0));(Ext.cmd.derive("Ext.form.field.Spinner",Ext.form.field.Text,{alternateClassName:"Ext.form.Spinner",config:{triggers:{spinner:{type:"spinner",upHandler:"onSpinnerUpClick",downHandler:"onSpinnerDownClick",scope:"this"}}},spinUpEnabled:true,spinDownEnabled:true,keyNavEnabled:true,mouseWheelEnabled:true,repeatTriggerClick:true,onSpinUp:Ext.emptyFn,onSpinDown:Ext.emptyFn,ariaRole:"spinbutton",applyTriggers:function(c){var a=this,b=c.spinner;b.upEnabled=a.spinUpEnabled;b.downEnabled=a.spinDownEnabled;return Ext.form.field.Text.prototype.applyTriggers.call(this,c)},onRender:function(){var b=this,a=b.getTrigger("spinner");(arguments.callee.$previous||Ext.form.field.Text.prototype.onRender).call(this);if(b.keyNavEnabled){b.spinnerKeyNav=new Ext.util.KeyNav(b.inputEl,{scope:b,up:b.spinUp,down:b.spinDown})}if(b.mouseWheelEnabled){b.mon(b.bodyEl,"mousewheel",b.onMouseWheel,b)}b.spinUpEl=a.upEl;b.spinDownEl=a.downEl},onSpinnerUpClick:function(){this.spinUp()},onSpinnerDownClick:function(){this.spinDown()},spinUp:function(){var a=this;if(a.spinUpEnabled&&!a.disabled){a.fireEvent("spin",a,"up");a.fireEvent("spinup",a);a.onSpinUp()}},spinDown:function(){var a=this;if(a.spinDownEnabled&&!a.disabled){a.fireEvent("spin",a,"down");a.fireEvent("spindown",a);a.onSpinDown()}},setSpinUpEnabled:function(b){var c=this,a=c.spinUpEnabled;c.spinUpEnabled=b;if(a!==b&&c.rendered){c.getTrigger("spinner").setUpEnabled(b)}},setSpinDownEnabled:function(b){var c=this,a=c.spinDownEnabled;c.spinDownEnabled=b;if(a!==b&&c.rendered){c.getTrigger("spinner").setDownEnabled(b)}},onMouseWheel:function(c){var b=this,a;if(b.hasFocus){a=c.getWheelDelta();if(a>0){b.spinUp()}else{if(a<0){b.spinDown()}}c.stopEvent()}},onDestroy:function(){Ext.destroyMembers(this,"spinnerKeyNav");Ext.form.field.Text.prototype.onDestroy.call(this)}},0,["spinnerfield"],["component","box","field","textfield","spinnerfield"],{component:true,box:true,field:true,textfield:true,spinnerfield:true},["widget.spinnerfield"],0,[Ext.form.field,"Spinner",Ext.form,"Spinner"],0));(Ext.cmd.derive("Ext.form.field.Number",Ext.form.field.Spinner,{alternateClassName:["Ext.form.NumberField","Ext.form.Number"],allowExponential:true,allowDecimals:true,decimalSeparator:null,submitLocaleSeparator:true,decimalPrecision:2,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,step:1,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number",negativeText:"The value cannot be negative",baseChars:"0123456789",autoStripChars:false,initComponent:function(){var a=this;if(a.decimalSeparator===null){a.decimalSeparator=Ext.util.Format.decimalSeparator}Ext.form.field.Spinner.prototype.initComponent.call(this);a.setMinValue(a.minValue);a.setMaxValue(a.maxValue)},getSubTplData:function(c){var f=this,d=f.minValue,a=f.maxValue,h,b,g;h=Ext.form.field.Spinner.prototype.getSubTplData.call(this,c);b=h.inputElAriaAttributes;if(b){if(d>Number.NEGATIVE_INFINITY){b["aria-valuemin"]=d}if(a<Number.MAX_VALUE){b["aria-valuemax"]=a}g=f.getValue();if(g!=null&&g>=d&&g<=a){b["aria-valuenow"]=g}}return h},setValue:function(a){var d=this,b,c;if(d.hasFocus){b=d.getBind();c=b&&b.value;if(c&&c.syncing&&a===d.value){return d}}return Ext.form.field.Spinner.prototype.setValue.call(this,a)},getErrors:function(f){f=arguments.length>0?f:this.processRawValue(this.getRawValue());var d=this,b=Ext.form.field.Spinner.prototype.getErrors.call(this,f),a=Ext.String.format,c;if(f.length<1){return b}f=String(f).replace(d.decimalSeparator,".");if(isNaN(f)){b.push(a(d.nanText,f))}c=d.parseValue(f);if(d.minValue===0&&c<0){b.push(this.negativeText)}else{if(c<d.minValue){b.push(a(d.minText,d.minValue))}}if(c>d.maxValue){b.push(a(d.maxText,d.maxValue))}return b},rawToValue:function(b){var a=this.fixPrecision(this.parseValue(b));if(a===null){a=b||null}return a},valueToRaw:function(a){var c=this,b=c.decimalSeparator;a=c.parseValue(a);a=c.fixPrecision(a);a=Ext.isNumber(a)?a:parseFloat(String(a).replace(b,"."));a=isNaN(a)?"":String(a).replace(".",b);return a},getSubmitValue:function(){var a=this,b=Ext.form.field.Spinner.prototype.getSubmitValue.call(this);if(!a.submitLocaleSeparator){b=b.replace(a.decimalSeparator,".")}return b},onChange:function(b){var a=this.ariaEl.dom;this.toggleSpinners();Ext.form.field.Spinner.prototype.onChange.apply(this,arguments);if(a){if(Ext.isNumber(b)&&isFinite(b)){a.setAttribute("aria-valuenow",b)}else{a.removeAttribute("aria-valuenow")}}},toggleSpinners:function(){var a=this,b=a.getValue(),d=b===null,c;if(a.spinUpEnabled||a.spinUpDisabledByToggle){c=d||b<a.maxValue;a.setSpinUpEnabled(c,true)}if(a.spinDownEnabled||a.spinDownDisabledByToggle){c=d||b>a.minValue;a.setSpinDownEnabled(c,true)}},setMinValue:function(a){var d=this,c=d.ariaEl.dom,f,b,c;d.minValue=f=Ext.Number.from(a,Number.NEGATIVE_INFINITY);d.toggleSpinners();if(c){if(f>Number.NEGATIVE_INFINITY){c.setAttribute("aria-valuemin",f)}else{c.removeAttribute("aria-valuemin")}}if(d.disableKeyFilter!==true){b=d.baseChars+"";if(d.allowExponential){b+=d.decimalSeparator+"e+-"}else{if(d.allowDecimals){b+=d.decimalSeparator}if(d.minValue<0){b+="-"}}b=Ext.String.escapeRegex(b);d.maskRe=new RegExp("["+b+"]");if(d.autoStripChars){d.stripCharsRe=new RegExp("[^"+b+"]","gi")}}},setMaxValue:function(c){var b=this.ariaEl.dom,a;this.maxValue=a=Ext.Number.from(c,Number.MAX_VALUE);if(b){if(a<Number.MAX_VALUE){b.setAttribute("aria-valuemax",a)}else{b.removeAttribute("aria-valuemax")}}this.toggleSpinners()},parseValue:function(a){a=parseFloat(String(a).replace(this.decimalSeparator,"."));return isNaN(a)?null:a},fixPrecision:function(b){var a=this,d=isNaN(b),c=a.decimalPrecision;if(d||!b){return d?"":b}else{if(!a.allowDecimals||c<=0){c=0}}return parseFloat(Ext.Number.toFixed(parseFloat(b),c))},onBlur:function(a){var c=this,b=c.rawToValue(c.getRawValue());if(!Ext.isEmpty(b)){c.setValue(b)}Ext.form.field.Spinner.prototype.onBlur.call(this,a)},setSpinUpEnabled:function(b,a){Ext.form.field.Spinner.prototype.setSpinUpEnabled.apply(this,arguments);if(!a){delete this.spinUpDisabledByToggle}else{this.spinUpDisabledByToggle=!b}},onSpinUp:function(){var a=this;if(!a.readOnly){a.setSpinValue(Ext.Number.constrain(a.getValue()+a.step,a.minValue,a.maxValue))}},setSpinDownEnabled:function(b,a){Ext.form.field.Spinner.prototype.setSpinDownEnabled.apply(this,arguments);if(!a){delete this.spinDownDisabledByToggle}else{this.spinDownDisabledByToggle=!b}},onSpinDown:function(){var a=this;if(!a.readOnly){a.setSpinValue(Ext.Number.constrain(a.getValue()-a.step,a.minValue,a.maxValue))}},setSpinValue:function(b){var a=this;if(a.enforceMaxLength){if(a.fixPrecision(b).toString().length>a.maxLength){return}}a.setValue(b)}},0,["numberfield"],["component","box","field","textfield","spinnerfield","numberfield"],{component:true,box:true,field:true,textfield:true,spinnerfield:true,numberfield:true},["widget.numberfield"],0,[Ext.form.field,"Number",Ext.form,"NumberField",Ext.form,"Number"],0));(Ext.cmd.derive("Ext.toolbar.Paging",Ext.toolbar.Toolbar,{alternateClassName:"Ext.PagingToolbar",displayInfo:false,prependButtons:false,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",inputItemWidth:30,emptyPageData:{total:0,currentPage:0,pageCount:0,toRecord:0,fromRecord:0},defaultBindProperty:"store",getPagingItems:function(){var b=this,a={scope:b,blur:b.onPagingBlur};a[Ext.supports.SpecialKeyDownRepeat?"keydown":"keypress"]=b.onPagingKeyDown;return[{itemId:"first",tooltip:b.firstText,overflowText:b.firstText,iconCls:"x-tbar-page-first",disabled:true,handler:b.moveFirst,scope:b},{itemId:"prev",tooltip:b.prevText,overflowText:b.prevText,iconCls:"x-tbar-page-prev",disabled:true,handler:b.movePrevious,scope:b},"-",b.beforePageText,{xtype:"numberfield",itemId:"inputItem",name:"inputItem",cls:"x-tbar-page-number",allowDecimals:false,minValue:1,hideTrigger:true,enableKeyEvents:true,keyNavEnabled:false,selectOnFocus:true,submitValue:false,isFormField:false,width:b.inputItemWidth,margin:"-1 2 3 2",listeners:a},{xtype:"tbtext",itemId:"afterTextItem",html:Ext.String.format(b.afterPageText,1)},"-",{itemId:"next",tooltip:b.nextText,overflowText:b.nextText,iconCls:"x-tbar-page-next",disabled:true,handler:b.moveNext,scope:b},{itemId:"last",tooltip:b.lastText,overflowText:b.lastText,iconCls:"x-tbar-page-last",disabled:true,handler:b.moveLast,scope:b},"-",{itemId:"refresh",tooltip:b.refreshText,overflowText:b.refreshText,iconCls:"x-tbar-loading",disabled:b.store.isLoading(),handler:b.doRefresh,scope:b}]},initComponent:function(){var c=this,b=c.items||c.buttons||[],a;c.bindStore(c.store||"ext-empty-store",true);a=c.getPagingItems();if(c.prependButtons){c.items=b.concat(a)}else{c.items=a.concat(b)}delete c.buttons;if(c.displayInfo){c.items.push("->");c.items.push({xtype:"tbtext",itemId:"displayItem"})}Ext.toolbar.Toolbar.prototype.initComponent.call(this)},beforeRender:function(){Ext.toolbar.Toolbar.prototype.beforeRender.apply(this,arguments);this.updateBarInfo()},updateBarInfo:function(){var a=this;if(!a.store.isLoading()){a.calledInternal=true;a.onLoad();a.calledInternal=false}},updateInfo:function(){var g=this,d=g.child("#displayItem"),b=g.store,c=g.getPageData(),f,a;if(d){f=b.getCount();if(f===0){a=g.emptyMsg}else{a=Ext.String.format(g.displayMsg,c.fromRecord,c.toRecord,c.total)}d.setText(a)}},onLoad:function(){var g=this,c,a,b,j,f,h,d;f=g.store.getCount();h=f===0;if(!h){c=g.getPageData();a=c.currentPage;b=c.pageCount;if(a>b){if(b>0){g.store.loadPage(b)}else{g.getInputItem().reset()}return}j=Ext.String.format(g.afterPageText,isNaN(b)?1:b)}else{a=0;b=0;j=Ext.String.format(g.afterPageText,0)}Ext.suspendLayouts();d=g.child("#afterTextItem");if(d){d.update(j)}d=g.getInputItem();if(d){d.setDisabled(h).setValue(a)}g.setChildDisabled("#first",a===1||h);g.setChildDisabled("#prev",a===1||h);g.setChildDisabled("#next",a===b||h);g.setChildDisabled("#last",a===b||h);g.setChildDisabled("#refresh",false);g.updateInfo();Ext.resumeLayouts(true);if(!g.calledInternal){g.fireEvent("change",g,c||g.emptyPageData)}},setChildDisabled:function(b,c){var a=this.child(b);if(a){a.setDisabled(c)}},getPageData:function(){var b=this.store,a=b.getTotalCount();return{total:a,currentPage:b.currentPage,pageCount:Math.ceil(a/b.pageSize),fromRecord:((b.currentPage-1)*b.pageSize)+1,toRecord:Math.min(b.currentPage*b.pageSize,a)}},onLoadError:function(){this.setChildDisabled("#refresh",false)},getInputItem:function(){return this.child("#inputItem")},readPageFromInput:function(d){var a=this.getInputItem(),b=false,c;if(a){c=a.getValue();b=parseInt(c,10);if(!c||isNaN(b)){a.setValue(d.currentPage);return false}}return b},onPagingBlur:function(a){var c=this.getInputItem(),b;if(c){b=this.getPageData().currentPage;c.setValue(b)}},onPagingKeyDown:function(b,a){this.processKeyEvent(b,a)},processKeyEvent:function(h,g){var d=this,c=g.getKey(),b=d.getPageData(),a=g.shiftKey?10:1,f;if(c===g.RETURN){g.stopEvent();f=d.readPageFromInput(b);if(f!==false){f=Math.min(Math.max(1,f),b.pageCount);if(f!==b.currentPage&&d.fireEvent("beforechange",d,f)!==false){d.store.loadPage(f)}}}else{if(c===g.HOME||c===g.END){g.stopEvent();f=c===g.HOME?1:b.pageCount;h.setValue(f)}else{if(c===g.UP||c===g.PAGE_UP||c===g.DOWN||c===g.PAGE_DOWN){g.stopEvent();f=d.readPageFromInput(b);if(f){if(c===g.DOWN||c===g.PAGE_DOWN){a*=-1}f+=a;if(f>=1&&f<=b.pageCount){h.setValue(f)}}}}}},beforeLoad:function(){this.setChildDisabled("#refresh",true)},moveFirst:function(){if(this.fireEvent("beforechange",this,1)!==false){this.store.loadPage(1);return true}return false},movePrevious:function(){var a=this,b=a.store,c=b.currentPage-1;if(c>0){if(a.fireEvent("beforechange",a,c)!==false){b.previousPage();return true}}return false},moveNext:function(){var b=this,c=b.store,a=b.getPageData().pageCount,d=c.currentPage+1;if(d<=a){if(b.fireEvent("beforechange",b,d)!==false){c.nextPage();return true}}return false},moveLast:function(){var b=this,a=b.getPageData().pageCount;if(b.fireEvent("beforechange",b,a)!==false){b.store.loadPage(a);return true}return false},doRefresh:function(){var c=this,b=c.store,a=b.currentPage;if(c.fireEvent("beforechange",c,a)!==false){b.loadPage(a);return true}return false},getStoreListeners:function(){return{beforeload:this.beforeLoad,load:this.onLoad,exception:this.onLoadError}},onBindStore:function(){if(this.rendered){this.updateBarInfo()}},onDestroy:function(){this.bindStore(null);Ext.toolbar.Toolbar.prototype.onDestroy.call(this)}},0,["pagingtoolbar"],["component","box","container","toolbar","pagingtoolbar"],{component:true,box:true,container:true,toolbar:true,pagingtoolbar:true},["widget.pagingtoolbar"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.toolbar,"Paging",Ext,"PagingToolbar"],0));Ext.define("Ext.theme.neptune.toolbar.Paging",{override:"Ext.toolbar.Paging",defaultButtonUI:"plain-toolbar",inputItemWidth:40});Ext.define("Ext.theme.triton.toolbar.Paging",{override:"Ext.toolbar.Paging",inputItemWidth:50});(Ext.cmd.derive("Ext.view.BoundList",Ext.view.View,{alternateClassName:"Ext.BoundList",pageSize:0,baseCls:"x-boundlist",itemCls:"x-boundlist-item",listItemCls:"",shadow:false,trackOver:true,preserveScrollOnRefresh:true,enableInitialSelection:false,refreshSelmodelOnRefresh:true,componentLayout:"boundlist",navigationModel:"boundlist",scrollable:true,ariaEl:"listEl",tabIndex:-1,childEls:["listWrap","listEl"],renderTpl:['<div id="{id}-listWrap" data-ref="listWrap"',' class="{baseCls}-list-ct ',Ext.dom.Element.unselectableCls,'">','<ul id="{id}-listEl" data-ref="listEl" class="',"x-",'list-plain"','<tpl foreach="ariaAttributes"> {$}="{.}"</tpl>',">","</ul>","</div>","{%","var pagingToolbar=values.$comp.pagingToolbar;","if (pagingToolbar) {","Ext.DomHelper.generateMarkup(pagingToolbar.getRenderTree(), out);","}","%}",{disableFormats:true}],focusOnToFront:false,initComponent:function(){var c=this,b=c.baseCls,a=c.itemCls;c.selectedItemCls=b+"-selected";if(c.trackOver){c.overItemCls=b+"-item-over"}c.itemSelector="."+a;c.scrollerSelector="ul.x-list-plain";if(c.floating){c.addCls(b+"-floating")}if(!c.tpl){c.tpl=new Ext.XTemplate('<tpl for=".">','<li role="option" unselectable="on" class="'+a+'">'+c.getInnerTpl(c.displayField)+"</li>","</tpl>")}else{if(!c.tpl.isTemplate){c.tpl=new Ext.XTemplate(c.tpl)}}if(c.pageSize){c.pagingToolbar=c.createPagingToolbar()}Ext.view.View.prototype.initComponent.call(this)},getRefOwner:function(){return this.pickerField||Ext.view.View.prototype.getRefOwner.call(this)},getRefItems:function(){var a=Ext.view.View.prototype.getRefItems.call(this),b=this.pagingToolbar;if(b){a.push(b)}return a},createPagingToolbar:function(){return Ext.widget("pagingtoolbar",{id:this.id+"-paging-toolbar",pageSize:this.pageSize,store:this.dataSource,border:false,ownerCt:this,ownerLayout:this.getComponentLayout()})},getNodeContainer:function(){return this.listEl},refresh:function(){var b=this,a=b.tpl;a.field=b.pickerField;a.store=b.store;Ext.view.View.prototype.refresh.call(this);a.field=a.store=null},bindStore:function(b,c){var a=this.pagingToolbar;Ext.view.View.prototype.bindStore.apply(this,arguments);if(a){a.bindStore(b,c)}},getInnerTpl:function(a){return"{"+a+"}"},onShow:function(){var a=this.pickerField;Ext.view.View.prototype.onShow.call(this);if(a&&a.rendered&&!a.hasFocus){a.focus()}},afterComponentLayout:function(f,c,d,b){var a=this.pickerField;Ext.view.View.prototype.afterComponentLayout.call(this,f,c,d,b);if(a&&a.alignPicker){a.alignPicker()}},onItemClick:function(c){var a=this,b=a.pickerField,d,f;if(!b){return}d=b.valueField;f=a.getSelectionModel().getSelection();if(!b.multiSelect&&f.length){f=f[0];if(f&&b.isEqual(c.get(d),f.get(d))&&b.collapse){b.collapse()}}},onContainerClick:function(b){var a=this.pagingToolbar;if(a&&a.rendered&&b.within(a.el)){return false}},onDestroy:function(){Ext.view.View.prototype.onDestroy.call(this);Ext.destroyMembers(this,"pagingToolbar","listWrap","listEl")},privates:{getTargetEl:function(){return this.listEl},getOverflowEl:function(){return this.listWrap},finishRenderChildren:function(){var a=this.pagingToolbar;Ext.view.View.prototype.finishRenderChildren.apply(this,arguments);if(a){a.finishRender()}}}},0,["boundlist"],["component","box","dataview","boundlist"],{component:true,box:true,dataview:true,boundlist:true},["widget.boundlist"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.view,"BoundList",Ext,"BoundList"],0));(Ext.cmd.derive("Ext.form.field.ComboBox",Ext.form.field.Picker,{alternateClassName:"Ext.form.ComboBox",config:{filters:null,selection:null,valueNotFoundText:null,displayTpl:false,delimiter:", ",displayField:"text"},publishes:["selection"],twoWayBindable:["selection"],triggerCls:"x-form-arrow-trigger",hiddenName:"",collapseOnSelect:false,hiddenDataCls:"x-hidden-display x-form-data-hidden",ariaRole:"combobox",childEls:{hiddenDataEl:true},filtered:false,afterRender:function(){var a=this;Ext.form.field.Picker.prototype.afterRender.apply(this,arguments);a.setHiddenValue(a.value)},multiSelect:false,triggerAction:"all",allQuery:"",queryParam:"query",queryMode:"remote",queryCaching:true,autoLoadOnValue:false,pageSize:0,anyMatch:false,caseSensitive:false,autoSelect:true,typeAhead:false,typeAheadDelay:250,selectOnTab:true,forceSelection:false,growToLongestValue:true,clearFilterOnBlur:true,defaultListConfig:{loadingHeight:70,minWidth:70,maxHeight:300,shadow:"sides"},transformInPlace:true,clearValueOnEmpty:true,getGrowWidth:function(){var j=this,a=j.inputEl.dom.value,m,b,c,h,g,d,f;if(j.growToLongestValue){m=j.displayField;b=j.store;c=b.data.length;h=0;for(g=0;g<c;g++){d=b.getAt(g).data[m];f=d.length;if(f>h){h=f;a=d}}}return a},initComponent:function(){var g=this,d=Ext.isDefined,c=g.store,f=g.transform,b,a;if("pinList" in g){g.collapseOnSelect=!g.pinList}if(f){b=Ext.getDom(f);if(b){if(!g.store){c=Ext.Array.map(Ext.Array.from(b.options),function(h){return[h.value,h.text]})}if(!g.name){g.name=b.name}if(!("value" in g)){g.value=b.value}}}g.bindStore(c||"ext-empty-store",true,true);a=g.queryMode==="local";if(!d(g.queryDelay)){g.queryDelay=a?10:500}if(!d(g.minChars)){g.minChars=a?0:4}Ext.form.field.Picker.prototype.initComponent.call(this);g.doQueryTask=new Ext.util.DelayedTask(g.doRawQuery,g);if(b){if(g.transformInPlace){g.render(b.parentNode,b);delete g.renderTo}Ext.removeNode(b)}},getSubTplData:function(c){var a,b;a=Ext.form.field.Picker.prototype.getSubTplData.call(this,c);b=a.inputElAriaAttributes;if(b){b["aria-autocomplete"]="list"}return a},getSubTplMarkup:function(a){var b=this,c="",d=Ext.form.field.Picker.prototype.getSubTplMarkup.apply(this,arguments);if(b.hiddenName){c='<div id="'+a.id+'-hiddenDataEl" data-ref="hiddenDataEl" class="'+b.hiddenDataCls+'" role="presentation"></div>'}return c+d},applyDisplayTpl:function(b){var a=this;if(!b){b=new Ext.XTemplate('<tpl for=".">{[typeof values === "string" ? values : values["'+a.getDisplayField()+'"]]}<tpl if="xindex < xcount">'+a.getDelimiter()+"</tpl></tpl>");b.auto=true}else{if(!b.isTemplate){b=new Ext.XTemplate(b)}}return b},applyFilters:function(c,a){var b=this;if(c===null||c.isFilterCollection){return c}if(c){if(!a){a=this.getFilters()}a.beginUpdate();a.splice(0,a.length,c);a.each(function(d){d.ownerId=b.id});a.endUpdate()}return a},applyValueNotFoundText:function(b){var c=this,a=c.valueNotFoundRecord||(c.valueNotFoundRecord=new Ext.data.Model());a.set(c.displayField,b);if(c.valueField&&c.displayField!==c.valueField){a.set(c.valueField,b)}return b},getFilters:function(b){var a=this.filters;if(!a&&b!==false){a=new Ext.util.FilterCollection();this.setFilters(a)}return a},updateFilters:function(b,c){var a=this;if(c){c.un("endupdate","onEndUpdateFilters",a)}if(b){b.on("endupdate","onEndUpdateFilters",a)}a.onEndUpdateFilters(b)},onEndUpdateFilters:function(g){var f=this,a=f.filtered,d=!!g&&(g.length>0),b,c;if(a||d){f.filtered=d;b=[];c=f.store.getFilters();c.each(function(h){if(h.ownerId===f.id&&!g.contains(h)){b.push(h)}});c.splice(0,b,g.items)}},completeEdit:function(a){var c=this,b=c.queryFilter;Ext.form.field.Picker.prototype.completeEdit.call(this,a);c.doQueryTask.cancel();c.assertValue();if(b&&c.queryMode==="local"&&c.clearFilterOnBlur){c.getStore().getFilters().remove(b)}},onFocus:function(b){var a=this;Ext.form.field.Picker.prototype.onFocus.call(this,b);if(a.triggerAction!=="all"&&a.queryFilter&&a.queryMode==="local"&&a.clearFilterOnBlur){delete a.lastQuery;a.doRawQuery()}},assertValue:function(){var d=this,f=d.getRawValue(),c=d.getDisplayValue(),a=d.lastSelectedRecords,b;if(d.forceSelection){if(d.multiSelect){if(f!==c){d.setRawValue(c)}}else{b=d.findRecordByDisplay(f);if(b){if(d.getDisplayValue([d.getRecordDisplayData(b)])!==c){d.select(b,true)}}else{if(a&&(!d.allowBlank||d.rawValue)){d.setValue(a)}else{if(a){delete d.lastSelectedRecords}d.setRawValue("")}}}}d.collapse()},onTypeAhead:function(){var f=this,d=f.displayField,b=f.store.findRecord(d,f.getRawValue()),c=f.getPicker(),g,a,h;if(b){g=b.get(d);a=g.length;h=f.getRawValue().length;c.highlightItem(c.getNode(b));if(h!==0&&h!==a){f.setRawValue(g);f.selectText(h,g.length)}}},resetToDefault:Ext.emptyFn,beforeReset:function(){var a=this.queryFilter;Ext.form.field.Picker.prototype.beforeReset.call(this);if(a){this.getStore().getFilters().remove(a)}},onUnbindStore:function(){var a=this,b=a.picker,c=a.queryFilter;if(c&&!a.store.destroyed){a.changingFilters=true;a.getStore().removeFilter(c,true);a.changingFilters=false}a.pickerSelectionModel.destroy();if(b){b.bindStore(null)}},onBindStore:function(b,d){var g=this,c=g.picker,f,a;if(b){if(b.autoCreated){g.queryMode="local";g.valueField=g.displayField="field1";if(!b.expanded){g.displayField="field2"}if(g.getDisplayTpl().auto){g.setDisplayTpl(null)}}if(!Ext.isDefined(g.valueField)){g.valueField=g.displayField}f={byValue:{rootProperty:"data",unique:false}};f.byValue.property=g.valueField;b.setExtraKeys(f);if(g.displayField===g.valueField){b.byText=b.byValue}else{f.byText={rootProperty:"data",unique:false};f.byText.property=g.displayField;b.setExtraKeys(f)}a={rootProperty:"data",extraKeys:{byInternalId:{property:"internalId"},byValue:{property:g.valueField,rootProperty:"data"}},listeners:{beginupdate:g.onValueCollectionBeginUpdate,endupdate:g.onValueCollectionEndUpdate,scope:g}};g.valueCollection=new Ext.util.Collection(a);g.pickerSelectionModel=new Ext.selection.DataViewModel({mode:g.multiSelect?"SIMPLE":"SINGLE",deselectOnContainerClick:false,enableInitialSelection:false,pruneRemoved:false,selected:g.valueCollection,store:b,listeners:{scope:g,lastselectedchanged:g.updateBindSelection}});if(!d){g.resetToDefault()}if(c){c.setSelectionModel(g.pickerSelectionModel);if(c.getStore()!==b){c.bindStore(b)}}}},bindStore:function(c,b,d){var a=this,f=a.queryFilter;a.mixins.storeholder.bindStore.call(a,c,d);c=a.getStore();if(c&&f&&!b){c.getFilters().add(f)}if(!d&&c&&!c.isEmptyStore){a.setValueOnData()}},getStoreListeners:function(c){if(!c.isEmptyStore){var a=this,b={datachanged:a.onDataChanged,load:a.onLoad,exception:a.onException,update:a.onStoreUpdate,remove:a.checkValueOnChange};if(!c.getRemoteFilter()){b.filterchange=a.checkValueOnChange}return b}},onDataChanged:function(){if(this.grow&&this.growToLongestValue){this.autoSize()}},checkValueOnChange:function(){var a=this;if(!a.destroying&&a.getStore().isLoaded()){if(a.multiSelect){}else{if(a.forceSelection&&!a.changingFilters&&!a.findRecordByValue(a.value)){a.setValue(null)}}}},onStoreUpdate:function(b,a){this.updateValue()},onException:function(){this.collapse()},onLoad:function(f,d,b){var a=this,c=!a.valueCollection.byValue.get(a.value);if(b&&c&&!(f.lastOptions&&"rawQuery" in f.lastOptions)){a.setValueOnData()}a.checkValueOnChange()},setValueOnData:function(){var a=this;a.setValue(a.value);if(a.isExpanded&&a.getStore().getCount()){a.doAutoSelect()}},doRawQuery:function(){var a=this,b=a.inputEl.dom.value;if(a.multiSelect){b=b.split(a.delimiter).pop()}a.doQuery(b,false,true)},doQuery:function(h,c,g){var d=this,a=d.getStore(),f=a.filters&&!a.filters.length&&!!h,b=d.beforeQuery({query:h||"",rawQuery:g,forceAll:c,combo:d,cancel:false});if(b!==false&&!b.cancel){if(d.queryCaching&&!f&&b.query===d.lastQuery){d.getPicker().refresh();d.expand()}else{d.lastQuery=b.query;if(d.queryMode==="local"){d.doLocalQuery(b)}else{d.doRemoteQuery(b)}}}return true},beforeQuery:function(a){var b=this;if(b.fireEvent("beforequery",a)===false){a.cancel=true}else{if(!a.cancel){if(a.query.length<b.minChars&&!a.forceAll){a.cancel=true}}}return a},doLocalQuery:function(d){var a=this,b=d.query,c=a.getStore(),f=a.queryFilter;a.queryFilter=null;a.changingFilters=true;if(f){c.removeFilter(f,true)}if(b){f=a.queryFilter=new Ext.util.Filter({id:a.id+"-filter",anyMatch:a.anyMatch,caseSensitive:a.caseSensitive,root:"data",property:a.displayField,value:a.enableRegEx?new RegExp(b):b});c.addFilter(f,true)}a.changingFilters=false;if(a.store.getCount()||a.getPicker().emptyText){a.getPicker().refresh();a.expand()}else{a.collapse()}a.afterQuery(d)},doRemoteQuery:function(c){var a=this,b=function(){if(!a.destroyed){a.afterQuery(c)}};a.expand();if(a.pageSize){a.loadPage(1,{rawQuery:c.rawQuery,callback:b})}else{a.store.load({params:a.getParams(c.query),rawQuery:c.rawQuery,callback:b})}},afterQuery:function(a){var b=this;if(b.store.getCount()){if(b.typeAhead){b.doTypeAhead()}if(a.rawQuery){if(b.picker&&!b.picker.getSelectionModel().hasSelection()){b.doAutoSelect()}}else{b.doAutoSelect()}}b.startCheckChangeTask()},loadPage:function(b,a){this.store.loadPage(b,Ext.apply({params:this.getParams(this.lastQuery)},a))},onPageChange:function(b,a){this.loadPage(a);return false},getParams:function(a){var c={},b=this.queryParam;if(b){c[b]=a}return c},doAutoSelect:function(){var a=this,d=a.picker,c,b=0;if(d&&a.autoSelect&&a.store.getCount()>0){c=a.picker.getSelectionModel();if(c.lastSelected&&c.selected.length){b=c.lastSelected}d.getNavigationModel().setPosition(b)}},doTypeAhead:function(){var b=this,a=Ext.event.Event;if(!b.typeAheadTask){b.typeAheadTask=new Ext.util.DelayedTask(b.onTypeAhead,b)}if(b.lastKey!==a.BACKSPACE&&b.lastKey!==a.DELETE){b.typeAheadTask.delay(b.typeAheadDelay)}},onTriggerClick:function(){var a=this;if(!a.readOnly&&!a.disabled){if(a.isExpanded){a.collapse()}else{if(a.triggerAction==="all"){a.doQuery(a.allQuery,true)}else{if(a.triggerAction==="last"){a.doQuery(a.lastQuery,true)}else{a.doQuery(a.getRawValue(),false,true)}}}}},onFieldMutation:function(a){var f=this,c=a.getKey(),d=c===a.BACKSPACE||c===a.DELETE,g=f.inputEl.dom.value,b=g.length;if(!f.readOnly&&(g!==f.lastMutatedValue||d)&&c!==a.TAB){f.lastMutatedValue=g;f.lastKey=c;if(b&&(a.type!=="keyup"||(!a.isSpecialKey()||d))){f.doQueryTask.delay(f.queryDelay)}else{if(!b&&(!c||d)){++f.suspendCheckChange;if(!f.multiSelect){f.value=null;f.displayTplData=undefined}if(f.clearValueOnEmpty){f.valueCollection.beginUpdate();f.pickerSelectionModel.deselectAll();f.valueCollection.removeAll();f.valueCollection.endUpdate()}f.collapse();if(f.queryFilter){f.changingFilters=true;f.store.removeFilter(f.queryFilter,true);f.changingFilters=false}--f.suspendCheckChange}Ext.form.field.Picker.prototype.onFieldMutation.call(this,a)}}},onDestroy:function(){var a=this;a.doQueryTask.cancel();if(a.typeAheadTask){a.typeAheadTask.cancel();a.typeAheadTask=null}a.bindStore(null);a.valueCollection=Ext.destroy(a.valueCollection);Ext.form.field.Picker.prototype.onDestroy.call(this)},onAdded:function(){var a=this;Ext.form.field.Picker.prototype.onAdded.apply(this,arguments);if(a.picker){a.picker.ownerCt=a.up("[floating]");a.picker.registerWithOwnerCt()}},createPicker:function(){var a=this,c,b=Ext.apply({xtype:"boundlist",id:a.pickerId,pickerField:a,selectionModel:a.pickerSelectionModel,floating:true,hidden:true,store:a.getPickerStore(),displayField:a.displayField,preserveScrollOnRefresh:true,pageSize:a.pageSize,tpl:a.tpl},a.listConfig,a.defaultListConfig);c=a.picker=Ext.widget(b);if(a.pageSize){c.pagingToolbar.on("beforechange",a.onPageChange,a)}if(!c.initialConfig.maxHeight){c.on({beforeshow:a.onBeforePickerShow,scope:a})}c.getSelectionModel().on({beforeselect:a.onBeforeSelect,beforedeselect:a.onBeforeDeselect,focuschange:a.onFocusChange,scope:a});c.getNavigationModel().navigateOnSpace=false;return c},getPickerStore:function(){return this.store},onBeforePickerShow:function(c){var d=this,b=d.getPosition()[1]-Ext.getBody().getScroll().top,a=Ext.Element.getViewportHeight()-b-d.getHeight();c.maxHeight=Math.max(b,a)-5},onBeforeSelect:function(a,b,c){return this.fireEvent("beforeselect",this,b,c)},onBeforeDeselect:function(a,b,c){return this.fireEvent("beforedeselect",this,b,c)},onFocusChange:function(f,c,d){var a=this.picker,b;if(d){b=Ext.get(a.getNodeByRecord(d));if(b){this.ariaEl.dom.setAttribute("aria-activedescendant",b.id)}}},getSelection:function(){var a=this.getPicker().getSelectionModel(),b=a.getSelection();return b.length?a.getLastSelected():null},updateSelection:function(b){var c=this,a;if(!c.ignoreNextSelection){c.ignoreNextSelection=true;a=c.getPicker().getSelectionModel();if(b){a.select(b);c.hasHadSelection=true}else{a.deselectAll()}c.ignoreNextSelection=false}},updateBindSelection:function(c,a){var b=this,d=null;if(!b.ignoreNextSelection){b.ignoreNextSelection=true;if(a.length){d=c.getLastSelected();b.hasHadSelection=true}if(b.hasHadSelection){b.setSelection(d)}b.ignoreNextSelection=false}},onValueCollectionBeginUpdate:Ext.emptyFn,onValueCollectionEndUpdate:function(){var a=this,f=a.store,b=a.valueCollection.getRange(),d=b[0],c=b.length;a.updateBindSelection(a.pickerSelectionModel,b);if(a.isSelectionUpdating()){return}Ext.suspendLayouts();a.lastSelection=b;if(c){a.lastSelectedRecords=b}a.updateValue();if(c&&((!a.multiSelect&&f.contains(d))||a.collapseOnSelect||!f.getCount())){a.updatingValue=true;a.collapse();a.updatingValue=false}Ext.resumeLayouts(true);if(c&&!a.suspendCheckChange){if(!a.multiSelect){b=d}a.fireEvent("select",a,b)}},isSelectionUpdating:function(){var a=this.pickerSelectionModel;return a.deselectingDuringSelect||a.refreshing},onExpand:function(){var a=this.getPicker().getNavigationModel();if(a){a.enable()}this.doAutoSelect()},onCollapse:function(){var a=this.getPicker().getNavigationModel();if(a){a.disable()}if(this.updatingValue){this.doQueryTask.cancel()}},select:function(a,c){var f=this,d=f.picker,b;if(a&&a.isModel&&c===true&&d){b=!d.getSelectionModel().isSelected(a)}if(!b){f.suspendEvent("select")}f.setValue(a);f.resumeEvent("select")},findRecord:function(b,a){var d=this.store,c=d.findExact(b,a);return c!==-1?d.getAt(c):false},getSelectedRecord:function(){return this.findRecordByValue(this.value)||null},findRecordByValue:function(a){var b=this.store.byValue.get(a),c=false;if(b){c=b[0]||b}return c},findRecordByDisplay:function(a){var b=this.store.byText.get(a),c=false;if(b){c=b[0]||b}return c},addValue:function(a){if(a!=null){return this.doSetValue(a,true)}},setValue:function(b){var a=this;if(b!=null){return a.doSetValue(b)}else{a.suspendEvent("select");a.valueCollection.beginUpdate();a.pickerSelectionModel.deselectAll();a.valueCollection.endUpdate();a.lastSelectedRecords=null;a.resumeEvent("select")}},setRawValue:function(a){Ext.form.field.Picker.prototype.setRawValue.call(this,a);this.lastMutatedValue=a},doSetValue:function(v,p){var q=this,h=q.getStore(),j=h.getModel(),z=[],g=[],y=q.autoLoadOnValue,f=h.getCount()>0||h.isLoaded(),a=h.hasPendingLoad(),r=y&&!f&&!a,o=q.forceSelection,u=q.pickerSelectionModel,b=q.displayField===q.valueField,t=h.isEmptyStore,m=q.lastSelection,A,B,c,w,d,s;if(a||r||!f||t){if(!v.isModel){if(p){q.value=Ext.Array.from(q.value).concat(v)}else{q.value=v}q.setHiddenValue(q.value);q.setRawValue(b?v:"")}if(r&&!t){h.load()}if(!v.isModel||t){return q}}v=p?Ext.Array.from(q.value).concat(v):Ext.Array.from(v);for(A=0,B=v.length;A<B;A++){c=v[A];if(!c||!c.isModel){c=q.findRecordByValue(s=c);if(!c){c=q.valueCollection.find(q.valueField,s)}}if(!c){if(!o){if(!c&&v[A]){w={};w[q.displayField]=v[A];if(q.valueField&&q.displayField!==q.valueField){w[q.valueField]=v[A]}c=new j(w)}}else{if(q.valueNotFoundRecord){c=q.valueNotFoundRecord}}}if(c){z.push(c);g.push(c.get(q.valueField))}}if(m){B=m.length;if(B===z.length){for(A=0;!d&&A<B;A++){if(Ext.Array.indexOf(q.lastSelection,z[A])===-1){d=true}}}else{d=true}}else{d=z.length}if(d){q.suspendEvent("select");q.valueCollection.beginUpdate();if(z.length){u.select(z,false)}else{u.deselectAll()}q.valueCollection.endUpdate();q.resumeEvent("select")}else{q.updateValue()}if(q.inputEl&&q.emptyText){q.inputEl.removeCls(q.emptyCls);q.valueContainsPlaceholder=false}q.applyEmptyText();return q},updateValue:function(){var d=this,h=d.valueCollection.getRange(),j=h.length,c=[],f=d.displayTplData||(d.displayTplData=[]),g=d.inputEl,b,a;f.length=0;for(b=0;b<j;b++){a=h[b];f.push(d.getRecordDisplayData(a));if(a!==d.valueNotFoundRecord){c.push(a.get(d.valueField))}}d.setHiddenValue(c);d.value=d.multiSelect?c:c[0];if(!Ext.isDefined(d.value)){d.value=undefined}d.displayTplData=f;if(g&&d.emptyText&&!Ext.isEmpty(d.value)){g.removeCls(d.emptyCls)}d.setRawValue(d.getDisplayValue());d.checkChange();d.applyEmptyText()},setHiddenValue:function(c){var m=this,f=m.hiddenName,j,g,d,b,a,h;if(!m.hiddenDataEl||!f){return}c=Ext.Array.from(c);g=m.hiddenDataEl.dom;d=g.childNodes;b=d[0];a=c.length;h=d.length;if(!b&&a>0){m.hiddenDataEl.setHtml(Ext.DomHelper.markup({tag:"input",type:"hidden",name:f}));h=1;b=g.firstChild}while(h>a){g.removeChild(d[0]);--h}while(h<a){g.appendChild(b.cloneNode(true));++h}for(j=0;j<a;j++){d[j].value=c[j]}},getDisplayValue:function(a){a=a||this.displayTplData;return this.getDisplayTpl().apply(a)},getRecordDisplayData:function(a){return a.data},getValue:function(){var f=this,c=f.getStore(),d=f.picker,b=f.getRawValue(),a=f.value;if(!c.isEmptyStore&&f.getDisplayValue()!==b){f.displayTplData=undefined;if(d){f.valueCollection.suspendEvents();d.getSelectionModel().deselectAll();f.valueCollection.resumeEvents();f.lastSelection=null}if(c.isLoaded()&&(f.multiSelect||f.forceSelection)){a=f.value=undefined}else{a=f.value=b}}f.value=a==null?null:a;return f.value},getSubmitValue:function(){var a=this.getValue();if(Ext.isEmpty(a)){a=""}return a},isEqual:function(b,a){var d=Ext.Array.from,f,c;b=d(b);a=d(a);c=b.length;if(c!==a.length){return false}for(f=0;f<c;f++){if(a[f]!==b[f]){return false}}return true},clearValue:function(){this.setValue(null)}},0,["combobox","combo"],["component","box","field","textfield","pickerfield","combobox","combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true},["widget.combo","widget.combobox"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.form.field,"ComboBox",Ext.form,"ComboBox"],0));(Ext.cmd.derive("Ext.form.field.FileButton",Ext.button.Button,{childEls:["fileInputEl"],inputCls:"x-form-file-input",cls:"x-form-file-btn",preventDefault:false,tabIndex:undefined,autoEl:{tag:"div",unselectable:"on"},afterTpl:['<input id="{id}-fileInputEl" data-ref="fileInputEl" class="{childElCls} {inputCls}" ','type="file" size="1" name="{inputName}" role="{role}" ','<tpl if="tabIndex != null">tabindex="{tabIndex}"</tpl>',">"],keyHandlers:null,ariaEl:"fileInputEl",getAfterMarkup:function(a){return this.getTpl("afterTpl").apply(a)},getTemplateArgs:function(){var b=this,a;a=Ext.button.Button.prototype.getTemplateArgs.call(this);a.inputCls=b.inputCls;a.inputName=b.inputName||b.id;a.tabIndex=b.tabIndex||null;a.role=b.ariaRole;return a},afterRender:function(){var a=this;Ext.button.Button.prototype.afterRender.apply(this,arguments);a.fileInputEl.on({scope:a,change:a.fireChange,focus:a.onFileFocus,blur:a.onFileBlur})},fireChange:function(a){this.fireEvent("change",this,a,this.fileInputEl.dom.value)},createFileInput:function(c){var a=this,b=a.fileInputEl=a.el.createChild({name:a.inputName,id:!c?a.id+"-fileInputEl":undefined,cls:a.inputCls,tag:"input",type:"file",size:1,role:"button"});b.dom.setAttribute("data-componentid",a.id);b.on({scope:a,change:a.fireChange,focus:a.onFileFocus,blur:a.onFileBlur})},onFileFocus:function(b){var a=this.ownerCt;if(!this.hasFocus){this.onFocus(b)}if(a&&!a.hasFocus){a.onFocus(b)}},onFileBlur:function(b){var a=this.ownerCt;if(this.hasFocus){this.onBlur(b)}if(a&&a.hasFocus){a.onBlur(b)}},reset:function(a){var b=this;if(a){b.fileInputEl.destroy()}b.createFileInput(!a)},restoreInput:function(a){var b=this;b.fileInputEl.destroy();a=Ext.get(a);b.el.appendChild(a);b.fileInputEl=a},onDisable:function(){Ext.button.Button.prototype.onDisable.call(this);this.fileInputEl.dom.disabled=true},onEnable:function(){Ext.button.Button.prototype.onEnable.call(this);this.fileInputEl.dom.disabled=false},privates:{getFocusEl:function(){return this.fileInputEl},getFocusClsEl:function(){return this.el}}},0,["filebutton"],["component","box","button","filebutton"],{component:true,box:true,button:true,filebutton:true},["widget.filebutton"],0,[Ext.form.field,"FileButton"],0));(Ext.cmd.derive("Ext.form.trigger.Component",Ext.form.trigger.Trigger,{cls:"x-form-trigger-cmp",onFieldRender:function(){var b=this,a=b.component;Ext.form.trigger.Trigger.prototype.onFieldRender.call(this);if(!a.isComponent&&!a.isWidget){a=Ext.widget(a)}b.component=a;a.render(b.el)},destroy:function(){var a=this.component;if(a.isComponent||a.isWidget){a.destroy()}this.component=null;Ext.form.trigger.Trigger.prototype.destroy.call(this)}},0,0,0,0,["trigger.component"],0,[Ext.form.trigger,"Component"],0));(Ext.cmd.derive("Ext.form.field.File",Ext.form.field.Text,{alternateClassName:["Ext.form.FileUploadField","Ext.ux.form.FileUploadField","Ext.form.File"],emptyText:undefined,needArrowKeys:false,triggers:{filebutton:{type:"component",hideOnReadOnly:false,preventMouseDown:false}},buttonText:"Browse...",buttonOnly:false,buttonMargin:3,clearOnSubmit:true,extraFieldBodyCls:"x-form-file-wrap",inputCls:"x-form-text-file",readOnly:true,editable:false,submitValue:false,triggerNoEditCls:"",childEls:["browseButtonWrap"],applyTriggers:function(b){var c=this,a=(b||{}).filebutton;if(a){a.component=Ext.apply({xtype:"filebutton",ownerCt:c,id:c.id+"-button",ui:c.ui,disabled:c.disabled,text:c.buttonText,style:c.buttonOnly?"":c.getButtonMarginProp()+c.buttonMargin+"px",inputName:c.getName(),listeners:{scope:c,change:c.onFileChange}},c.buttonConfig);return Ext.form.field.Text.prototype.applyTriggers.call(this,b)}},getSubTplData:function(a){var b=Ext.form.field.Text.prototype.getSubTplData.call(this,a);b.tabIdx=-1;return b},onRender:function(){var a=this,b,f,c,d;(arguments.callee.$previous||Ext.form.field.Text.prototype.onRender).apply(this,arguments);b=a.inputEl;b.dom.name="";b.on("focus",a.onInputFocus,a);b.on("mousedown",a.onInputMouseDown,a);d=a.getTrigger("filebutton");f=a.button=d.component;a.fileInputEl=f.fileInputEl;c=f.el;if(a.buttonOnly){a.inputWrap.setDisplayed(false);a.shrinkWrap=3}d.el.setWidth(c.getWidth()+c.getMargin("lr"));if(Ext.isIE){a.button.getEl().repaint()}},getTriggerMarkup:function(){return'<td id="'+this.id+'-browseButtonWrap" data-ref="browseButtonWrap" role="presentation"></td>'},onFileChange:function(b,a,c){this.duringFileSelect=true;Ext.form.field.File.superclass.setValue.call(this,c);delete this.duringFileSelect},didValueChange:function(){return !!this.duringFileSelect},setEmptyText:Ext.emptyFn,setValue:Ext.emptyFn,reset:function(){var b=this,a=b.clearOnSubmit;if(b.rendered){b.button.reset(a);b.fileInputEl=b.button.fileInputEl;if(a){b.inputEl.dom.value="";Ext.form.field.File.superclass.setValue.call(this,null)}}Ext.form.field.Text.prototype.reset.call(this)},onShow:function(){Ext.form.field.Text.prototype.onShow.call(this);this.button.updateLayout()},onDisable:function(){Ext.form.field.Text.prototype.onDisable.call(this);this.button.disable()},onEnable:function(){Ext.form.field.Text.prototype.onEnable.call(this);this.button.enable()},isFileUpload:Ext.returnTrue,extractFileInput:function(){var b=this,a;if(b.rendered){a=b.button.fileInputEl.dom;b.reset()}else{a=document.createElement("input");a.type="file";a.className="x-hidden-display";a.name=b.getName()}return a},restoreInput:function(b){if(this.rendered){var a=this.button;a.restoreInput(b);this.fileInputEl=a.fileInputEl}},onDestroy:function(){this.fileInputEl=this.button=null;Ext.form.field.Text.prototype.onDestroy.call(this)},getButtonMarginProp:function(){return"margin-left:"},onInputFocus:function(a){this.focus();if(Ext.isIE9m){this.fileInputEl.addCls("x-position-relative");this.fileInputEl.removeCls("x-position-relative")}},onInputMouseDown:function(a){a.preventDefault();this.focus()},privates:{getFocusEl:function(){return this.button},getFocusClsEl:Ext.privateFn}},0,["fileuploadfield","filefield"],["component","box","field","textfield","filefield","fileuploadfield"],{component:true,box:true,field:true,textfield:true,filefield:true,fileuploadfield:true},["widget.filefield","widget.fileuploadfield"],0,[Ext.form.field,"File",Ext.form,"FileUploadField",Ext.ux.form,"FileUploadField",Ext.form,"File"],0));(Ext.cmd.derive("Ext.form.field.Hidden",Ext.form.field.Base,{alternateClassName:"Ext.form.Hidden",focusable:false,inputType:"hidden",isTextInput:false,hideLabel:true,hidden:true,ariaRole:"presentation",initComponent:function(){this.formItemCls+="-hidden";Ext.form.field.Base.prototype.initComponent.call(this)},isEqual:function(b,a){return this.isEqualAsString(b,a)},initEvents:Ext.emptyFn,setSize:Ext.emptyFn,setWidth:Ext.emptyFn,setHeight:Ext.emptyFn,setPosition:Ext.emptyFn,setPagePosition:Ext.emptyFn,markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn},0,["hidden","hiddenfield"],["component","box","field","hiddenfield","hidden"],{component:true,box:true,field:true,hiddenfield:true,hidden:true},["widget.hidden","widget.hiddenfield"],0,[Ext.form.field,"Hidden",Ext.form,"Hidden"],0));(Ext.cmd.derive("Ext.tip.Tip",Ext.panel.Panel,{alternateClassName:"Ext.Tip",minWidth:40,maxWidth:500,shadow:"sides",defaultAlign:"tl-bl?",constrainPosition:true,autoRender:true,hidden:true,baseCls:"x-tip",focusOnToFront:false,maskOnDisable:false,closeAction:"hide",alwaysFramed:true,frameHeader:false,initComponent:function(){var a=this;a.floating=Ext.apply({},{shadow:a.shadow,constrain:a.constrainPosition},a.self.prototype.floating);Ext.panel.Panel.prototype.initComponent.apply(this,arguments);a.constrain=a.constrain||a.constrainPosition},showAt:function(b){var a=this;Ext.panel.Panel.prototype.showAt.apply(this,arguments);if(a.isVisible()){a.setPagePosition(b[0],b[1]);if(a.constrainPosition||a.constrain){a.doConstrain()}a.toFront(true)}},privates:{initDraggable:function(){var a=this;a.draggable={el:a.getDragEl(),delegate:a.header.el,constrain:a,constrainTo:a.el.dom.parentNode};Ext.Component.prototype.initDraggable.call(a)}},ghost:undefined,unghost:undefined},0,["tip"],["component","box","container","panel","tip"],{component:true,box:true,container:true,panel:true,tip:true},["widget.tip"],0,[Ext.tip,"Tip",Ext,"Tip"],0));(Ext.cmd.derive("Ext.tip.ToolTip",Ext.tip.Tip,{alternateClassName:"Ext.ToolTip",autoHide:true,showDelay:500,hideDelay:200,dismissDelay:5000,trackMouse:false,anchorToTarget:true,anchorOffset:0,targetCounter:0,quickShowInterval:250,hideAction:"hide",fadeOutDuration:1000,ariaRole:"tooltip",initComponent:function(){var a=this;Ext.tip.Tip.prototype.initComponent.apply(this,arguments);a.lastActive=new Date();a.setTarget(a.target);a.origAnchor=a.anchor},onRender:function(c,b){var a=this;Ext.tip.Tip.prototype.onRender.apply(this,arguments);a.anchorCls="x-tip-anchor-"+a.getAnchorPosition();a.anchorEl=a.el.createChild({role:"presentation",cls:"x-tip-anchor "+a.anchorCls})},setTarget:function(b){var d=this,c=Ext.get(b),a;if(d.target){a=Ext.get(d.target);if(Ext.supports.Touch){d.mun(a,"tap",d.onTargetOver,d)}else{d.mun(a,{mouseover:d.onTargetOver,mouseout:d.onTargetOut,mousemove:d.onMouseMove,scope:d})}}d.target=c;if(c){if(Ext.supports.Touch){d.mon(c,{tap:d.onTargetOver,scope:d})}else{d.mon(c,{mouseover:d.onTargetOver,mouseout:d.onTargetOut,mousemove:d.onMouseMove,scope:d})}}if(d.anchor){d.anchorTarget=d.target}},onMouseMove:function(b){var d=this,c,a;if(!d.target||d.target.contains(b.target)){c=d.delegate?b.getTarget(d.delegate):(d.triggerElement=true);if(c){d.targetXY=b.getXY();if(c===d.triggerElement){if(!d.hidden&&d.trackMouse){a=d.getTargetXY();if(d.constrainPosition){a=d.el.adjustForConstraints(a,d.el.parent())}d.setPagePosition(a)}}else{d.hide();d.lastActive=new Date(0);d.onTargetOver(b)}}else{if((!d.closable&&d.isVisible())&&d.autoHide!==false){d.delayHide()}}}},getTargetXY:function(){var h=this,b,a,r,p,g,m,c,o,j,q,f,d;if(h.delegate){h.anchorTarget=h.triggerElement}if(h.anchor){h.targetCounter++;a=h.getOffsets();r=(h.anchorToTarget&&!h.trackMouse)?h.getAlignToXY(h.anchorTarget,h.getAnchorAlign()):h.targetXY;p=Ext.Element.getViewportWidth()-5;g=Ext.Element.getViewportHeight()-5;m=document.documentElement;c=document.body;o=(m.scrollLeft||c.scrollLeft||0)+5;j=(m.scrollTop||c.scrollTop||0)+5;q=[r[0]+a[0],r[1]+a[1]];f=h.getSize();d=h.constrainPosition;h.anchorEl.removeCls(h.anchorCls);if(h.targetCounter<2&&d){if(q[0]<o){if(h.anchorToTarget){h.defaultAlign="l-r";if(h.mouseOffset){h.mouseOffset[0]*=-1}}h.anchor="left";return h.getTargetXY()}if(q[0]+f.width>p){if(h.anchorToTarget){h.defaultAlign="r-l";if(h.mouseOffset){h.mouseOffset[0]*=-1}}h.anchor="right";return h.getTargetXY()}if(q[1]<j){if(h.anchorToTarget){h.defaultAlign="t-b";if(h.mouseOffset){h.mouseOffset[1]*=-1}}h.anchor="top";return h.getTargetXY()}if(q[1]+f.height>g){if(h.anchorToTarget){h.defaultAlign="b-t";if(h.mouseOffset){h.mouseOffset[1]*=-1}}h.anchor="bottom";return h.getTargetXY()}}h.anchorCls="x-tip-anchor-"+h.getAnchorPosition();h.anchorEl.addCls(h.anchorCls);h.targetCounter=0;return q}else{b=h.getMouseOffset();return(h.targetXY)?[h.targetXY[0]+b[0],h.targetXY[1]+b[1]]:b}},calculateConstrainedPosition:function(d){var f=this,b,c,a;if(!d&&f.isContainedFloater()){b=f.isVisible();if(!b){f.el.show()}c=f.getTargetXY();if(!b){f.el.hide()}a=f.floatParent.getTargetEl().getViewRegion();c[0]-=a.left;c[1]-=a.top}else{c=f.callOverridden(arguments)}return c},getMouseOffset:function(){var a=this,b=a.anchor?[0,0]:[15,18];if(a.mouseOffset){b[0]+=a.mouseOffset[0];b[1]+=a.mouseOffset[1]}return b},fadeOut:function(){var a=this;a.el.fadeOut({duration:a.fadeOutDuration,callback:function(){a.hide();a.el.setOpacity("")}})},getAnchorPosition:function(){var b=this,a;if(b.anchor){b.tipAnchor=b.anchor.charAt(0)}else{a=b.defaultAlign.match(/^([a-z]+)-([a-z]+)(\?)?$/);b.tipAnchor=a[1].charAt(0)}switch(b.tipAnchor){case"t":return"top";case"b":return"bottom";case"r":return"right"}return"left"},getAnchorAlign:function(){switch(this.anchor){case"top":return"tl-bl";case"left":return"tl-tr";case"right":return"tr-tl";default:return"bl-tl"}},getOffsets:function(){var a=this,b,d,c=a.getAnchorPosition().charAt(0);if(a.anchorToTarget&&!a.trackMouse){switch(c){case"t":d=[0,9];break;case"b":d=[0,-13];break;case"r":d=[-13,0];break;default:d=[9,0];break}}else{switch(c){case"t":d=[-15-a.anchorOffset,30];break;case"b":d=[-19-a.anchorOffset,-13-a.el.dom.offsetHeight];break;case"r":d=[-15-a.el.dom.offsetWidth,-13-a.anchorOffset];break;default:d=[25,-13-a.anchorOffset];break}}b=a.getMouseOffset();d[0]+=b[0];d[1]+=b[1];return d},onTargetOver:function(b){var a=this,d=a.delegate,c;if(a.disabled||b.within(a.target.dom,true)){return}c=d?b.getTarget(d):true;if(c){a.triggerElement=c;a.triggerEvent=b;a.clearTimer("hide");a.targetXY=b.getXY();a.delayShow()}},delayShow:function(a){var b=this,c=b.el&&(a===false||!b.trackMouse)&&b.getTargetXY();if(b.hidden&&!b.showTimer){if(Ext.Date.getElapsed(b.lastActive)<b.quickShowInterval){b.show()}else{b.showTimer=Ext.defer(b.showFromDelay,b.showDelay,b,[c])}}else{if(!b.hidden&&b.autoHide!==false){b.show(c)}}},showFromDelay:function(b){var a=this;if(a.disabled){return}a.fromDelayShow=true;a.show(b);delete a.fromDelayShow},onShowVeto:function(){Ext.tip.Tip.prototype.onShowVeto.call(this);delete this.triggerElement;this.clearTimer("show")},onTargetOut:function(b){var d=this,c=d.triggerElement,a=c===true?d.target:c;if(d.disabled||!c||b.within(a,true)){return}if(d.showTimer){d.clearTimer("show");d.triggerElement=null}if(d.autoHide!==false){d.delayHide()}},delayHide:function(){var a=this;if(!a.hidden&&!a.hideTimer){a.hideTimer=Ext.defer(a[a.hideAction],a.hideDelay,a)}},hide:function(){var a=this;a.clearTimer("dismiss");a.lastActive=new Date();if(a.anchorEl){a.anchorEl.hide()}Ext.tip.Tip.prototype.hide.apply(this,arguments);delete a.triggerElement},show:function(b){var a=this;Ext.tip.Tip.prototype.show.call(this);if(this.hidden===false){if(a.anchor){a.anchor=a.origAnchor}if(!a.calledFromShowAt){a.showAt(b||a.getTargetXY())}}},showAt:function(b){var a=this;a.lastActive=new Date();a.clearTimers();a.calledFromShowAt=true;if(!a.isVisible()){Ext.tip.Tip.prototype.showAt.apply(this,arguments)}if(a.isVisible()){a.setPagePosition(b[0],b[1]);if(a.constrainPosition||a.constrain){a.doConstrain()}a.toFront(true);a.el.syncUnderlays();if(a.dismissDelay&&a.autoHide!==false){a.dismissTimer=Ext.defer(a.hide,a.dismissDelay,a)}}delete a.calledFromShowAt},syncAnchor:function(){var a=this,c,d,b;switch(a.tipAnchor.charAt(0)){case"t":c="b";d="tl";b=[20+a.anchorOffset,1];break;case"r":c="l";d="tr";b=[-1,12+a.anchorOffset];break;case"b":c="t";d="bl";b=[20+a.anchorOffset,-1];break;default:c="r";d="tl";b=[1,12+a.anchorOffset];break}a.anchorEl.alignTo(a.el,c+"-"+d,b);a.anchorEl.setStyle("z-index",parseInt(a.el.getZIndex(),10)||0+1).setVisibilityMode(Ext.Element.DISPLAY)},afterSetPosition:function(b,a){var c=this;Ext.tip.Tip.prototype.afterSetPosition.apply(this,arguments);if(c.anchor){c.syncAnchor();if(!c.anchorEl.isVisible()){c.anchorEl.show()}}else{c.anchorEl.hide()}},_timerNames:{},clearTimer:function(c){var d=this,a=d._timerNames,f=a[c]||(a[c]=c+"Timer"),b=d[f];if(b){clearTimeout(b);d[f]=null}},clearTimers:function(){var a=this;a.clearTimer("show");a.clearTimer("dismiss");a.clearTimer("hide")},onShow:function(){var a=this;Ext.tip.Tip.prototype.onShow.call(this);a.mon(Ext.getDoc(),"mousedown",a.onDocMouseDown,a)},onHide:function(){var a=this;Ext.tip.Tip.prototype.onHide.call(this);a.mun(Ext.getDoc(),"mousedown",a.onDocMouseDown,a)},onDocMouseDown:function(b){var a=this;if(!a.closable&&!b.within(a.el.dom)){a.disable();Ext.defer(a.doEnable,100,a)}},doEnable:function(){if(!this.destroyed){this.enable()}},onDisable:function(){Ext.tip.Tip.prototype.onDisable.call(this);this.clearTimers();this.hide()},beforeDestroy:function(){var a=this;a.clearTimers();Ext.destroy(a.anchorEl);delete a.anchorEl;delete a.target;delete a.anchorTarget;delete a.triggerElement;Ext.tip.Tip.prototype.beforeDestroy.call(this)},onDestroy:function(){Ext.getDoc().un("mousedown",this.onDocMouseDown,this);Ext.tip.Tip.prototype.onDestroy.call(this)}},0,["tooltip"],["component","box","container","panel","tip","tooltip"],{component:true,box:true,container:true,panel:true,tip:true,tooltip:true},["widget.tooltip"],0,[Ext.tip,"ToolTip",Ext,"ToolTip"],0));(Ext.cmd.derive("Ext.tip.QuickTip",Ext.tip.ToolTip,{alternateClassName:"Ext.QuickTip",interceptTitles:false,title:"&#160;",tagConfig:{namespace:"data-",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign",anchor:"anchor",showDelay:"qshowDelay",hideAction:"hideAction",anchorTarget:"anchorTarget"},isQuickTip:true,shrinkWrapDock:true,initComponent:function(){var a=this;a.target=a.target||Ext.getDoc();a.targets=a.targets||{};Ext.tip.ToolTip.prototype.initComponent.call(this)},setTagConfig:function(a){this.tagConfig=Ext.apply({},a);delete this.tagConfig.attr},text:null,register:function(c){var h=Ext.isArray(c)?c:arguments,d=0,a=h.length,g,b,f;for(;d<a;d++){c=h[d];g=c.target;if(g){if(Ext.isArray(g)){for(b=0,f=g.length;b<f;b++){this.targets[Ext.id(g[b])]=c}}else{this.targets[Ext.id(g)]=c}}}},unregister:function(a){delete this.targets[Ext.id(a)]},cancelShow:function(b){var c=this,a=c.activeTarget;b=Ext.get(b).dom;if(c.isVisible()){if(a&&a.el===b){c.hide()}}else{if(a&&a.el===b){c.clearTimer("show")}}},getTipCfg:function(g,f){var d=g.title,c=this.tagConfig,b=c.attr||(c.attr=c.namespace+c.attribute),a;if(this.interceptTitles&&d&&Ext.isString(d)){g.setAttribute(b,d);g.removeAttribute("title");return{text:d}}else{g=Ext.fly(g).findParent(function(h){return(a=h.getAttribute(b))});if(g){return{target:g,text:a}}}},onTargetOver:function(a){this.doTargetOver(a.getTarget(this.delegate),null,a)},doTargetOver:function(d,m,r){var g=this,p,u,a,s,c,j,t,q,b,h,o,f;if(g.disabled){return}if(typeof d==="string"){d=Ext.getDom(d)}g.targetXY=m||(r?r.getXY():Ext.fly(d).getXY());if(!d||d.nodeType!==1||d===document.documentElement||d===document.body){return}if(g.activeTarget&&((d===g.activeTarget.el)||Ext.fly(g.activeTarget.el).contains(d))){if(g.targetTextEmpty()){g.onShowVeto();delete g.activeTarget}else{g.clearTimer("hide");g.show()}return}if(d){b=g.targets;for(f in b){if(b.hasOwnProperty(f)){o=b[f];h=Ext.fly(o.target);if(h&&(h.dom===d||h.contains(d))){s=h.dom;break}}}if(s){g.activeTarget=g.targets[s.id];g.activeTarget.el=d;g.anchor=g.activeTarget.anchor;if(g.anchor){g.anchorTarget=d}p=parseInt(g.activeTarget.showDelay,10);if(p){a=g.showDelay;g.showDelay=p}g.delayShow();if(p){g.showDelay=a}if(!(u=g.activeTarget.hideAction)){delete g.hideAction}else{g.hideAction=u}return}}s=Ext.fly(d,"_quicktip-target");c=g.tagConfig;j=c.namespace;t=g.getTipCfg(d,r);if(t){if(t.target){d=t.target;s=Ext.fly(d,"_quicktip-target")}q=s.getAttribute(j+c.hide);g.activeTarget={el:d,text:t.text,width:+s.getAttribute(j+c.width)||null,autoHide:q!=="user"&&q!=="false",title:s.getAttribute(j+c.title),cls:s.getAttribute(j+c.cls),align:s.getAttribute(j+c.align),showDelay:parseInt(s.getAttribute(j+c.showDelay)||0,10),hideAction:s.getAttribute(j+c.hideAction),anchorTarget:s.getAttribute(j+c.anchorTarget)};if(!g.initialConfig.hasOwnProperty("anchor")){g.anchor=s.getAttribute(j+c.anchor)}if(g.anchor&&!g.initialConfig.hasOwnProperty("anchorTarget")){g.anchorTarget=g.activeTarget.anchorTarget||d}p=parseInt(g.activeTarget.showDelay,10);if(p){a=g.showDelay;g.showDelay=p}g.delayShow();if(p){g.showDelay=a}}},onTargetOut:function(b){var f=this,a=f.activeTarget,c,d;if(a&&b.within(f.activeTarget.el)&&!f.getTipCfg(b.getTarget(),b)){return}f.clearTimer("show");delete f.activeTarget;if(f.autoHide!==false){c=a&&parseInt(a.hideDelay,10);if(c){d=f.hideDelay;f.hideDelay=c}f.delayHide();if(c){f.hideDelay=d}}},targetTextEmpty:function(){var f=this,a=f.activeTarget,c=f.tagConfig,d,b;if(a){d=a.el;if(d){b=d.getAttribute(c.namespace+c.attribute);if(!b&&!f.targets[Ext.id(a.target)]){return true}}}return false},show:function(){var b=this,a=b.fromDelayShow;if(a&&b.targetTextEmpty()){b.onShowVeto();delete b.activeTarget;return}Ext.tip.ToolTip.prototype.show.apply(this,arguments)},showAt:function(g){var d=this,f=d.activeTarget,a=d.header,c,b;if(f){if(!d.rendered){d.render(Ext.getBody());d.activeTarget=f}d.suspendLayouts();if(f.title){d.setTitle(f.title);a.show()}else{if(a){a.hide()}}d.update(f.text);d.autoHide=f.autoHide;c=f.dismissDelay;d.dismissDelay=Ext.isNumber(c)?c:d.dismissDelay;if(f.mouseOffset){g[0]+=f.mouseOffset[0];g[1]+=f.mouseOffset[1]}b=d.lastCls;if(b){d.removeCls(b);delete d.lastCls}b=f.cls;if(b){d.addCls(b);d.lastCls=b}d.setWidth(f.width);if(d.anchor){d.constrainPosition=false}else{if(f.align){g=d.getAlignToXY(f.el,f.align);d.constrainPosition=false}else{d.constrainPosition=true}}d.resumeLayouts(true)}Ext.tip.ToolTip.prototype.showAt.call(this,g)},showByTarget:function(g){var c=this,f,b,d,a,h;f=c.targets[g.id];if(f){c.activeTarget=f;c.activeTarget.el=Ext.get(g).dom;c.anchor=c.activeTarget.anchor;b=g.getSize();d=g.getXY();c.showAt([d[0],d[1]+b.height])}},hide:function(){delete this.activeTarget;Ext.tip.ToolTip.prototype.hide.call(this)}},0,["quicktip"],["component","box","container","panel","tip","tooltip","quicktip"],{component:true,box:true,container:true,panel:true,tip:true,tooltip:true,quicktip:true},["widget.quicktip"],0,[Ext.tip,"QuickTip",Ext,"QuickTip"],0));(Ext.cmd.derive("Ext.tip.QuickTipManager",Ext.Base,{singleton:true,alternateClassName:"Ext.QuickTips",disabled:false,init:function(g,c){var f=this;if(!f.tip){if(!Ext.isReady){Ext.onInternalReady(function(){Ext.tip.QuickTipManager.init(g,c)});return false}var b=Ext.apply({disabled:f.disabled,id:"ext-quicktips-tip"},c),d=b.className,a=b.xtype;if(d){delete b.className}else{if(a){d="widget."+a;delete b.xtype}}if(g!==false){b.renderTo=document.body}f.tip=Ext.create(d||"Ext.tip.QuickTip",b);Ext.quickTipsActive=true}},destroy:function(){Ext.destroy(this.tip);this.tip=undefined},ddDisable:function(){var a=this,b=a.tip;if(b&&!a.disabled){b.disable()}},ddEnable:function(){var a=this,b=a.tip;if(b&&!a.disabled){b.enable()}},enable:function(){var a=this,b=a.tip;if(b){b.enable()}a.disabled=false},disable:function(){var a=this,b=a.tip;if(b){b.disable()}a.disabled=true},isEnabled:function(){var a=this.tip;return a!==undefined&&!a.disabled},getQuickTip:function(){return this.tip},register:function(){var a=this.tip;a.register.apply(a,arguments)},unregister:function(){var a=this.tip;a.unregister.apply(a,arguments)},tips:function(){var a=this.tip;a.register.apply(a,arguments)}},0,0,0,0,0,0,[Ext.tip,"QuickTipManager",Ext,"QuickTips"],0));(Ext.cmd.derive("Ext.toolbar.Separator",Ext.toolbar.Item,{alternateClassName:"Ext.Toolbar.Separator",baseCls:"x-toolbar-separator",ariaRole:"separator"},0,["tbseparator"],["component","box","tbitem","tbseparator"],{component:true,box:true,tbitem:true,tbseparator:true},["widget.tbseparator"],0,[Ext.toolbar,"Separator",Ext.Toolbar,"Separator"],0));(Ext.cmd.derive("Ext.menu.Item",Ext.Component,{alternateClassName:"Ext.menu.TextItem",isMenuItem:true,activated:false,activeCls:"x-menu-item-active",clickHideDelay:0,destroyMenu:true,disabledCls:"x-menu-item-disabled",hideOnClick:true,menuAlign:"tl-tr?",menuExpandDelay:200,menuHideDelay:200,tooltipType:"qtip",focusable:true,ariaRole:"menuitem",ariaEl:"itemEl",baseCls:"x-menu-item",arrowCls:"x-menu-item-arrow",baseIconCls:"x-menu-item-icon",textCls:"x-menu-item-text",indentCls:"x-menu-item-indent",indentNoSeparatorCls:"x-menu-item-indent-no-separator",indentRightIconCls:"x-menu-item-indent-right-icon",indentRightArrowCls:"x-menu-item-indent-right-arrow",linkCls:"x-menu-item-link",linkHrefCls:"x-menu-item-link-href",childEls:["itemEl","iconEl","textEl","arrowEl"],renderTpl:'<tpl if="plain">{text}<tpl else><a id="{id}-itemEl" data-ref="itemEl" class="{linkCls}<tpl if="hasHref"> {linkHrefCls}</tpl>{childElCls}" href="{href}" <tpl if="hrefTarget"> target="{hrefTarget}"</tpl> hidefocus="true" unselectable="on"<tpl if="tabIndex != null"> tabindex="{tabIndex}"</tpl><tpl foreach="ariaAttributes"> {$}="{.}"</tpl>><span id="{id}-textEl" data-ref="textEl" class="{textCls} {textCls}-{ui} {indentCls}{childElCls}" unselectable="on">{text}</span><tpl if="hasIcon"><div role="presentation" id="{id}-iconEl" data-ref="iconEl" class="{baseIconCls}-{ui} {baseIconCls}{[values.rightIcon ? "-right" : ""]} {iconCls}{childElCls} {glyphCls}" style="<tpl if="icon">background-image:url({icon});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl></div></tpl><tpl if="showCheckbox"><div role="presentation" id="{id}-checkEl" data-ref="checkEl" class="{baseIconCls}-{ui} {baseIconCls}{[(values.hasIcon && !values.rightIcon) ? "-right" : ""]} {groupCls} {checkboxCls}{childElCls}"></div></tpl><tpl if="hasMenu"><div role="presentation" id="{id}-arrowEl" data-ref="arrowEl" class="{arrowCls} {arrowCls}-{ui}{childElCls}"></div></tpl></a></tpl>',maskOnDisable:false,iconAlign:"left",initComponent:function(){var c=this,b=c.cls?[c.cls]:[],a;if(c.hasOwnProperty("canActivate")){c.focusable=c.canActivate}if(c.plain){b.push("x-menu-item-plain")}if(b.length){c.cls=b.join(" ")}if(c.menu){a=c.menu;c.menu=null;c.setMenu(a)}Ext.Component.prototype.initComponent.apply(this,arguments)},canFocus:function(){var a=this;return a.focusable&&a.rendered&&a.canActivate!==false&&!a.destroying&&!a.destroyed&&a.isVisible(true)},onFocus:function(b){var a=this;Ext.Component.prototype.onFocus.call(this,b);if(!a.disabled){if(!a.plain){a.addCls(a.activeCls)}a.activated=true;if(a.hasListeners.activate){a.fireEvent("activate",a)}}},onFocusLeave:function(b){var a=this;Ext.Component.prototype.onFocusLeave.call(this,b);if(a.activated){if(!a.plain){a.removeCls(a.activeCls)}a.doHideMenu();a.activated=false;if(a.hasListeners.deactivate){a.fireEvent("deactivate",a)}}},doHideMenu:function(){var a=this.menu;this.cancelDeferExpand();if(a&&a.isVisible()){a.hide()}},deferHideParentMenus:function(){for(var a=this.getRefOwner();a&&((a.isMenu&&a.floating)||a.isMenuItem);a=a.getRefOwner()){if(a.isMenu){a.hide()}}},expandMenu:function(a,b){var c=this;if(c.activated&&c.menu){c.hideOnClick=false;c.cancelDeferHide();b=b==null?c.menuExpandDelay:b;if(b===0){c.doExpandMenu(a)}else{c.cancelDeferExpand();c.expandMenuTimer=Ext.defer(c.doExpandMenu,b,c,[a])}}},doExpandMenu:function(b){var c=this,a=c.menu;if(!a.isVisible()){c.parentMenu.activeChild=a;a.ownerCmp=c;a.parentMenu=c.parentMenu;a.constrainTo=document.body;a.autoFocus=!b||!b.pointerType;a.showBy(c,c.menuAlign)}},getRefItems:function(b){var a=this.menu,c;if(a){c=a.getRefItems(b);c.unshift(a)}return c||[]},getValue:function(){return this.value},hideMenu:function(a){var b=this;if(b.menu){b.cancelDeferExpand();b.hideMenuTimer=Ext.defer(b.doHideMenu,Ext.isNumber(a)?a:b.menuHideDelay,b)}},onClick:function(g){var f=this,d=f.clickHideDelay,a=g.browserEvent,c,b;if(!f.href||f.disabled){g.stopEvent();if(f.disabled){return false}}if(f.disabled||f.handlingClick){return}if(f.hideOnClick){if(!d){f.deferHideParentMenus()}else{f.deferHideParentMenusTimer=Ext.defer(f.deferHideParentMenus,d,f)}}c=f.fireEvent("click",f,g);if(f.destroyed){return}if(c!==false&&f.handler){Ext.callback(f.handler,f.scope,[f,g],0,f)}if(Ext.isIE9m){b=a.returnValue===false?true:false}else{b=!!a.defaultPrevented}if(f.href&&g.type!=="click"&&!b){f.handlingClick=true;f.itemEl.dom.click();f.handlingClick=false}if(!f.hideOnClick){f.focus()}return c},onRemoved:function(){var a=this;if(a.activated&&a.parentMenu.activeItem===a){a.parentMenu.deactivateActiveItem()}Ext.Component.prototype.onRemoved.apply(this,arguments);a.parentMenu=a.ownerCmp=null},beforeDestroy:function(){var a=this;if(a.rendered){a.clearTip()}Ext.Component.prototype.beforeDestroy.call(this)},onDestroy:function(){var a=this;a.cancelDeferExpand();a.cancelDeferHide();clearTimeout(a.deferHideParentMenusTimer);a.setMenu(null);Ext.Component.prototype.onDestroy.apply(this,arguments)},beforeRender:function(){var p=this,a=p.glyph,o=Ext._glyphFontFamily,h=!!(p.icon||p.iconCls||a),b=!!p.menu,j=((p.iconAlign==="right")&&!b),f=p.isMenuCheckItem,c=[],g=p.ownerCt,m=g.plain,d;if(p.plain){p.ariaEl="el"}Ext.Component.prototype.beforeRender.call(this);if(h){if(b&&p.showCheckbox){h=false}}if(typeof a==="string"){d=a.split("@");a=d[0];o=d[1]}if(!m||(h&&!j)||f){if(g.showSeparator&&!m){c.push(p.indentCls)}else{c.push(p.indentNoSeparatorCls)}}if(b){c.push(p.indentRightArrowCls)}else{if(h&&(j||f)){c.push(p.indentRightIconCls)}}Ext.applyIf(p.renderData,{hasHref:!!p.href,href:p.href||"#",hrefTarget:p.hrefTarget,icon:p.icon,iconCls:p.iconCls,glyph:a,glyphCls:a?"x-menu-item-glyph":undefined,glyphFontFamily:o,hasIcon:h,hasMenu:b,indent:!m||h||f,isCheckItem:f,rightIcon:j,plain:p.plain,text:p.text,arrowCls:p.arrowCls,baseIconCls:p.baseIconCls,textCls:p.textCls,indentCls:c.join(" "),linkCls:p.linkCls,linkHrefCls:p.linkHrefCls,groupCls:p.group?p.groupCls:"",tabIndex:p.tabIndex})},onRender:function(){var a=this;Ext.Component.prototype.onRender.apply(this,arguments);if(a.tooltip){a.setTooltip(a.tooltip,true)}},getMenu:function(){return this.menu||null},setMenu:function(h,g){var f=this,b=f.menu,a=f.arrowEl,j=f.ariaEl.dom,d,c;if(b){b.ownerCmp=b.parentMenu=null;if(g===true||(g!==false&&f.destroyMenu)){Ext.destroy(b)}if(j){j.removeAttribute("aria-haspopup");j.removeAttribute("aria-owns")}else{d=(f.ariaRenderAttributes||(f.ariaRenderAttributes={}));delete d["aria-haspopup"];delete d["aria-owns"]}}if(h){c=h.isMenu;h=f.menu=Ext.menu.Manager.get(h,{ownerCmp:f,focusOnToFront:false});h.setOwnerCmp(f,c);if(j){j.setAttribute("aria-haspopup",true);j.setAttribute("aria-owns",h.id)}else{d=(f.ariaRenderAttributes||(f.ariaRenderAttributes={}));d["aria-haspopup"]=true;d["aria-owns"]=h.id}}else{h=f.menu=null}if(h&&f.rendered&&!f.destroying&&a){a[h?"addCls":"removeCls"](f.arrowCls)}},setHandler:function(b,a){this.handler=b||null;this.scope=a},setIcon:function(c){var b=this.iconEl,a=this.icon;if(b){b.src=c||Ext.BLANK_IMAGE_URL}this.icon=c;this.fireEvent("iconchange",this,a,c)},setIconCls:function(d){var b=this,c=b.iconEl,a=b.iconCls;if(c){if(b.iconCls){c.removeCls(b.iconCls)}if(d){c.addCls(d)}}b.iconCls=d;b.fireEvent("iconchange",b,a,d)},setText:function(b){var a=this,d=a.textEl||a.el,c=a.text;a.text=b;if(a.rendered){d.setHtml(b||"");a.updateLayout()}a.fireEvent("textchange",a,c,b)},getTipAttr:function(){return this.tooltipType==="qtip"?"data-qtip":"title"},clearTip:function(){if(Ext.quickTipsActive&&Ext.isObject(this.tooltip)){Ext.tip.QuickTipManager.unregister(this.itemEl)}},setTooltip:function(a,b){var c=this;if(c.rendered){if(!b){c.clearTip()}if(Ext.quickTipsActive&&Ext.isObject(a)){Ext.tip.QuickTipManager.register(Ext.apply({target:c.itemEl.id},a));c.tooltip=a}else{c.itemEl.dom.setAttribute(c.getTipAttr(),a)}}else{c.tooltip=a}return c},privates:{cancelDeferExpand:function(){window.clearTimeout(this.expandMenuTimer)},cancelDeferHide:function(){window.clearTimeout(this.hideMenuTimer)},getFocusEl:function(){return this.plain?this.el:this.itemEl}}},0,["menuitem"],["component","box","menuitem"],{component:true,box:true,menuitem:true},["widget.menuitem"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.menu,"Item",Ext.menu,"TextItem"],0));Ext.define("Ext.theme.triton.menu.Item",{override:"Ext.menu.Item",compatibility:Ext.isIE8,onFocus:function(a){(arguments.callee.$previous||Ext.Component.prototype.onFocus).call(this,a);this.repaintIcons()},onFocusLeave:function(a){(arguments.callee.$previous||Ext.Component.prototype.onFocusLeave).call(this,a);this.repaintIcons()},privates:{repaintIcons:function(){var a=this.iconEl,c=this.arrowEl,b=this.checkEl;if(a){a.syncRepaint()}if(c){c.syncRepaint()}if(b){b.syncRepaint()}}}});(Ext.cmd.derive("Ext.menu.CheckItem",Ext.menu.Item,{checkedCls:"x-menu-item-checked",uncheckedCls:"x-menu-item-unchecked",groupCls:"x-menu-group-icon",hideOnClick:false,checkChangeDisabled:false,submenuText:"{0} submenu",ariaRole:"menuitemcheckbox",childEls:["checkEl"],showCheckbox:true,isMenuCheckItem:true,checkboxCls:"x-menu-item-checkbox",initComponent:function(){var a=this;a.checked=!!a.checked;Ext.menu.Item.prototype.initComponent.apply(this,arguments);if(a.group){Ext.menu.Manager.registerCheckable(a);if(a.initialConfig.hideOnClick!==false){a.hideOnClick=true}}},beforeRender:function(){var b=this,a;Ext.menu.Item.prototype.beforeRender.call(this);Ext.apply(b.renderData,{checkboxCls:b.checkboxCls,showCheckbox:b.showCheckbox});a=(b.ariaRenderAttributes||(b.ariaRenderAttributes={}));a["aria-checked"]=b.menu?"mixed":b.checked;if(b.menu){a["aria-label"]=Ext.String.formatEncode(b.submenuText,b.text)}},afterRender:function(){var a=this;Ext.menu.Item.prototype.afterRender.call(this);a.checked=!a.checked;a.setChecked(!a.checked,true);if(a.checkChangeDisabled){a.disableCheckChange()}if(Ext.isGecko&&a.checkEl){a.checkEl.on("mousedown",a.onMouseDownCheck)}},disableCheckChange:function(){var b=this,a=b.checkEl;if(a){a.addCls(b.disabledCls)}if(Ext.isIE8&&b.rendered){b.el.repaint()}b.checkChangeDisabled=true},enableCheckChange:function(){var b=this,a=b.checkEl;if(a){a.removeCls(b.disabledCls)}b.checkChangeDisabled=false},onMouseDownCheck:function(a){a.preventDefault()},onClick:function(b){var a=this;if(!(a.disabled||a.checkChangeDisabled||a.checked&&a.group||a.menu&&"touch"===b.pointerType&&!a.checkEl.contains(b.target))){a.setChecked(!a.checked);if(b.type==="keydown"&&a.menu){return false}}Ext.menu.Item.prototype.onClick.call(this,b)},onDestroy:function(){Ext.menu.Manager.unregisterCheckable(this);Ext.menu.Item.prototype.onDestroy.apply(this,arguments)},setText:function(a){var c=this,b=c.ariaEl.dom;Ext.menu.Item.prototype.setText.call(this,a);if(b&&c.menu){b.setAttribute("aria-label",Ext.String.formatEncode(c.submenuText,a))}},setChecked:function(f,c){var d=this,g=d.checkedCls,h=d.uncheckedCls,b=d.el,a=d.ariaEl.dom;if(d.checked!==f&&(c||d.fireEvent("beforecheckchange",d,f)!==false)){if(b){if(f){b.addCls(g);b.removeCls(h)}else{b.addCls(h);b.removeCls(g)}}if(a){a.setAttribute("aria-checked",d.menu?"mixed":!!f)}d.checked=f;Ext.menu.Manager.onCheckChange(d,f);if(!c){Ext.callback(d.checkHandler,d.scope,[d,f],0,d);d.fireEvent("checkchange",d,f)}}}},0,["menucheckitem"],["component","box","menuitem","menucheckitem"],{component:true,box:true,menuitem:true,menucheckitem:true},["widget.menucheckitem"],0,[Ext.menu,"CheckItem"],0));(Ext.cmd.derive("Ext.menu.Separator",Ext.menu.Item,{focusable:false,canActivate:false,hideOnClick:false,plain:true,separatorCls:"x-menu-item-separator",text:"&#160;",ariaRole:"separator",beforeRender:function(){this.addCls(this.separatorCls);Ext.menu.Item.prototype.beforeRender.call(this)}},0,["menuseparator"],["component","box","menuitem","menuseparator"],{component:true,box:true,menuitem:true,menuseparator:true},["widget.menuseparator"],0,[Ext.menu,"Separator"],0));Ext.define("Ext.theme.neptune.menu.Separator",{override:"Ext.menu.Separator",border:true});(Ext.cmd.derive("Ext.menu.Menu",Ext.panel.Panel,{enableKeyNav:true,allowOtherMenus:false,ariaRole:"menu",floating:true,constrain:true,hidden:true,hideMode:"visibility",ignoreParentClicks:false,isMenu:true,showSeparator:true,minWidth:undefined,defaultMinWidth:120,defaultAlign:"tl-bl?",focusOnToFront:false,bringParentToFront:false,defaultFocus:":focusable",menuClickBuffer:0,baseCls:"x-menu",_iconSeparatorCls:"x-menu-icon-separator",_itemCmpCls:"x-menu-item-cmp",layout:{type:"vbox",align:"stretchmax",overflowHandler:"Scroller"},initComponent:function(){var f=this,c=["x-menu"],a=f.bodyCls?[f.bodyCls]:[],b=f.floating!==false,d={element:"el",click:f.onClick,mouseover:f.onMouseOver,scope:f};if(Ext.supports.Touch){d.pointerdown=f.onMouseOver}f.on(d);f.on({beforeshow:f.onBeforeShow,scope:f});if(f.plain){c.push("x-menu-plain")}f.cls=c.join(" ");a.push("x-menu-body",Ext.dom.Element.unselectableCls);f.bodyCls=a.join(" ");if(b){if(f.minWidth===undefined){f.minWidth=f.defaultMinWidth}}else{f.hidden=!!f.initialConfig.hidden;f.constrain=false}Ext.panel.Panel.prototype.initComponent.apply(this,arguments);Ext.override(f.getLayout(),{configureItem:f.configureItem})},initFloatConstrain:Ext.emptyFn,getInherited:function(){var a=Ext.panel.Panel.prototype.getInherited.call(this);a.hidden=this.hidden;return a},beforeRender:function(){var a=this;Ext.panel.Panel.prototype.beforeRender.apply(this,arguments);if(!a.getSizeModel().width.shrinkWrap){a.layout.align="stretch"}if(a.floating){a.ariaRenderAttributes=a.ariaRenderAttributes||{};a.ariaRenderAttributes["aria-expanded"]=!!a.autoShow}},onBoxReady:function(){var c=this,a=c._iconSeparatorCls,b=c.focusableKeyNav;if(b){b.map.processEventScope=c;b.map.processEvent=function(d){if(d.keyCode===d.ESC){d.target=this.el.dom}return d};b.map.addBinding([{key:Ext.event.Event.ESC,handler:c.onEscapeKey,scope:c},{key:/[\w]/,handler:c.onShortcutKey,scope:c,shift:false,ctrl:false,alt:false}])}else{c.escapeKeyNav=new Ext.util.KeyNav(c.el,{eventName:"keydown",scope:c,esc:c.onEscapeKey})}Ext.panel.Panel.prototype.onBoxReady.apply(this,arguments);if(c.showSeparator){c.iconSepEl=c.body.insertFirst({role:"presentation",cls:a+" "+a+"-"+c.ui,html:"&#160;"})}if(Ext.supports.MSPointerEvents||Ext.supports.PointerEvents){c.el.on({scope:c,click:c.preventClick,translate:false})}c.mouseMonitor=c.el.monitorMouseLeave(100,c.onMouseLeave,c)},onFocusLeave:function(b){var a=this;Ext.panel.Panel.prototype.onFocusLeave.call(this,b);a.mixins.focusablecontainer.onFocusLeave.call(a,b);if(a.floating){a.hide()}},canActivateItem:function(a){return a&&a.isFocusable()},deactivateActiveItem:function(){var a=this,b=a.lastFocusedChild;if(b){b.blur()}},getItemFromEvent:function(b){var c=this,a=c.layout.getRenderTarget().dom,d=b.getTarget();while(d.parentNode!==a){d=d.parentNode;if(!d){return}}return Ext.getCmp(d.id)},lookupComponent:function(b){var a=this;if(typeof b==="string"){b=a.lookupItemFromString(b)}else{if(Ext.isObject(b)){b=a.lookupItemFromObject(b)}}if(!b.dock){b.minWidth=b.minWidth||a.minWidth}return b},lookupItemFromObject:function(b){var a=this;if(!b.isComponent){if(!b.xtype){b=Ext.create("Ext.menu."+(Ext.isBoolean(b.checked)?"Check":"")+"Item",b)}else{b=Ext.ComponentManager.create(b,b.xtype)}}if(b.isMenuItem){b.parentMenu=a}return b},lookupItemFromString:function(a){return(a==="separator"||a==="-")?new Ext.menu.Separator():new Ext.menu.Item({canActivate:false,hideOnClick:false,plain:true,text:a})},configureItem:function(d){var c=this.owner,g="x-",f=c.ui,b,a;if(d.isMenuItem){d.setUI(f)}else{if(c.items.getCount()>1&&!d.rendered&&!d.dock){a=c._itemCmpCls;b=[a+" "+a+"-"+f];if(!c.plain&&(d.indent!==false||d.iconCls==="no-icon")){b.push(g+"menu-item-indent-"+f)}if(d.rendered){d.el.addCls(b)}else{d.cls=(d.cls||"")+" "+b.join(" ")}d.$extraMenuCls=b}}this.callParent(arguments)},onRemove:function(a){Ext.panel.Panel.prototype.onRemove.call(this,a);if(!a.destroyed&&a.$extraMenuCls){a.el.removeCls(a.$extraMenuCls)}},onClick:function(a){var g=this,d=a.type,f,c,b=d==="keydown";if(g.disabled){a.stopEvent();return}f=g.getItemFromEvent(a);if(f&&f.isMenuItem){if(!f.menu||!g.ignoreParentClicks){c=f.onClick(a)}else{a.stopEvent()}if(f.menu&&c!==false&&b){f.expandMenu(a,0)}}if(!f||f.disabled){f=undefined}g.fireEvent("click",g,f,a)},onDestroy:function(){var a=this;if(a.escapeKeyNav){a.escapeKeyNav.destroy()}a.parentMenu=a.ownerCmp=a.escapeKeyNav=null;if(a.rendered){a.el.un(a.mouseMonitor);Ext.destroy(a.iconSepEl)}Ext.menu.Manager.onHide(a);Ext.panel.Panel.prototype.onDestroy.apply(this,arguments)},onMouseLeave:function(a){if(this.disabled){return}this.fireEvent("mouseleave",this,a)},onMouseOver:function(g){var f=this,h=g.getRelatedTarget(),b=!f.el.contains(h),d=f.getItemFromEvent(g),c=f.parentMenu,a=f.ownerCmp;if(b&&c){c.setActiveItem(a);a.cancelDeferHide();c.mouseMonitor.mouseenter()}if(f.disabled){return}if(d){if(!d.containsFocus){d.focus()}if(d.expandMenu){d.expandMenu(g)}}if(b){f.fireEvent("mouseenter",f,g)}f.fireEvent("mouseover",f,d,g)},setActiveItem:function(b){var a=this;if(b&&(b!==a.lastFocusedChild)){a.focusChild(b,1)}},onEscapeKey:function(){if(this.floating){this.hide()}},onShortcutKey:function(g,f){var a=String.fromCharCode(f.getCharCode()),b=this.query(">[text]"),j=b.length,d=this.lastFocusedChild,h=Ext.Array.indexOf(b,d),c=h;for(;;){if(++c===j){c=0}d=b[c];if(c===h){return}if(d.text&&d.text[0].toUpperCase()===a){d.focus();return}}},onFocusableContainerTabKey:function(a){if(this.floating){this.hide()}},onFocusableContainerEnterKey:function(a){this.onClick(a)},onFocusableContainerSpaceKey:function(a){this.onClick(a)},onFocusableContainerLeftKey:function(a){a.preventDefault();if(this.parentMenu){this.ownerCmp.focus();this.hide()}},onFocusableContainerRightKey:function(c){var b=this,a=b.lastFocusedChild;c.preventDefault();if(a&&a.expandMenu){a.expandMenu(c,0)}},onBeforeShow:function(){if(Ext.Date.getElapsed(this.lastHide)<this.menuClickBuffer){return false}},beforeShow:function(){var a=this,d,b,c;if(a.floating){d=a.hasFloatMenuParent();if(!d&&!a.allowOtherMenus){Ext.menu.Manager.hideAll()}if(d){a.focusAnchor=d.focusAnchor}else{b=Ext.Element.getActiveElement();if(b===document.body||b===document.documentElement){a.focusAnchor=null}else{a.focusAnchor=b}}a.savedMaxHeight=a.maxHeight;c=a.container.getViewSize().height;a.maxHeight=Math.min(a.maxHeight||c,c)}Ext.panel.Panel.prototype.beforeShow.apply(this,arguments)},afterShow:function(){var b=this,a=b.ariaEl.dom;Ext.panel.Panel.prototype.afterShow.apply(this,arguments);Ext.menu.Manager.onShow(b);if(b.floating&&a){a.setAttribute("aria-expanded",true)}if(b.floating&&b.autoFocus){b.maxHeight=b.savedMaxHeight;b.focus()}},onHide:function(a,d,f){var g=this,c=g.ariaEl.dom,b;if(g.el.contains(Ext.Element.getActiveElement())){b=g.focusAnchor||g.ownerCmp||g.up(":focusable");if(b){g.previousFocus=b}}Ext.panel.Panel.prototype.onHide.call(this,a,d,f);g.lastHide=Ext.Date.now();Ext.menu.Manager.onHide(g);if(g.floating&&c){c.setAttribute("aria-expanded",false)}},preventClick:function(b){var a=this.getItemFromEvent(b);if(a&&a.isMenuItem&&!a.href){b.preventDefault()}},privates:{hasFloatMenuParent:function(){return this.parentMenu||this.up("menu[floating=true]")},setOwnerCmp:function(c,b){var a=this;a.parentMenu=c.isMenuItem?c:null;a.ownerCmp=c;a.registerWithOwnerCt();delete a.hierarchicallyHidden;a.onInheritedAdd(c,b);a.containerOnAdded(c,b)}}},0,["menu"],["component","box","container","panel","menu"],{component:true,box:true,container:true,panel:true,menu:true},["widget.menu"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.menu,"Menu"],0));Ext.define("Ext.theme.neptune.menu.Menu",{override:"Ext.menu.Menu",showSeparator:false});Ext.define("Ext.theme.triton.menu.Menu",{override:"Ext.menu.Menu",compatibility:Ext.isIE8,afterShow:function(){var b=this,d,a,f,c;(arguments.callee.$previous||Ext.panel.Panel.prototype.afterShow).apply(this,arguments);d=b.items.getRange();for(f=0,c=d.length;f<c;f++){a=d[f];if(a&&a.repaintIcons){a.repaintIcons()}}}});(Ext.cmd.derive("Ext.util.Queue",Ext.Base,{constructor:function(){this.clear()},add:function(a){var c=this,b=c.getKey(a);if(!c.map[b]){++c.length;c.items.push(a);c.map[b]=a}return a},clear:function(){var b=this,a=b.items;b.items=[];b.map={};b.length=0;return a},contains:function(b){var a=this.getKey(b);return this.map.hasOwnProperty(a)},getCount:function(){return this.length},getKey:function(a){return a.id},remove:function(b){var a=this,f=a.getKey(b),c=a.items,d;if(a.map[f]){d=Ext.Array.indexOf(c,b);Ext.Array.erase(c,d,1);delete a.map[f];--a.length}return b}},1,0,0,0,0,0,[Ext.util,"Queue"],0));(Ext.cmd.derive("Ext.layout.ContextItem",Ext.Base,{heightModel:null,widthModel:null,sizeModel:null,optOut:false,ownerSizePolicy:null,boxChildren:null,boxParent:null,children:[],dirty:null,dirtyCount:0,hasRawContent:true,isContextItem:true,isTopLevel:false,consumersContentHeight:0,consumersContentWidth:0,consumersContainerHeight:0,consumersContainerWidth:0,consumersHeight:0,consumersWidth:0,ownerCtContext:null,remainingChildDimensions:0,props:null,state:null,wrapsComponent:false,constructor:function(w){var y=this,u=Ext.layout.SizeModel.sizeModels,p=u.configured,o=u.shrinkWrap,b,v,s,r,g,d,m,f,t,q,c,j,h,a;Ext.apply(y,w);m=y.target;b=y.el;y.id=m.id;y.flushedProps={};y.props=g={};y.styles={};if(!m.isComponent){v=b.lastBox}else{y.wrapsComponent=true;y.framing=m.frameSize||null;y.isComponentChild=m.ownerLayout&&m.ownerLayout.isComponentLayout;v=m.lastBox;s=m.ownerCt;if(s&&(r=s.el&&y.context.items[s.el.id])){y.ownerCtContext=r}y.sizeModel=d=m.getSizeModel(r&&r.widthModel.pairsByHeightOrdinal[r.heightModel.ordinal]);y.widthModel=j=d.width;y.heightModel=h=d.height;if(v&&v.invalid===false){q=(m.width===(f=v.width));c=(m.height===(t=v.height));if(j===o&&h===o){a=true}else{if(j===p&&q){a=h===o||(h===p&&c)}}if(a){y.optOut=true;g.width=f;g.height=t}}}y.lastBox=v},init:function(j,c){var v=this,a=v.props,d=v.dirty,o=v.ownerCtContext,r=v.target.ownerLayout,h=!v.state,w=j||h,f,q,p,s,b,y,z=v.heightModel,g=v.widthModel,m,t,u=0;v.dirty=v.invalid=false;v.props={};v.remainingChildDimensions=0;if(v.boxChildren){v.boxChildren.length=0}if(!h){v.clearAllBlocks("blocks");v.clearAllBlocks("domBlocks")}if(!v.wrapsComponent){return w}y=v.target;v.state={};if(h){if(y.beforeLayout&&y.beforeLayout!==Ext.emptyFn){y.beforeLayout()}if(!o&&(s=y.ownerCt)){o=v.context.items[s.el.id]}if(o){v.ownerCtContext=o;v.isBoxParent=r&&r.isItemBoxParent(v)}else{v.isTopLevel=true}v.frameBodyContext=v.getEl("frameBody")}else{o=v.ownerCtContext;v.isTopLevel=!o;f=v.children;for(q=0,p=f.length;q<p;++q){f[q].init(true)}}v.hasRawContent=!(y.isContainer&&y.items.items.length>0);if(j){v.widthModel=v.heightModel=null;b=y.getSizeModel(o&&o.widthModel.pairsByHeightOrdinal[o.heightModel.ordinal]);if(h){v.sizeModel=b}v.widthModel=b.width;v.heightModel=b.height;if(o&&!v.isComponentChild){if(r.needsItemSize||!y.liquidLayout){o.remainingChildDimensions+=2}else{if(v.widthModel.calculated){++o.remainingChildDimensions}if(v.heightModel.calculated){++o.remainingChildDimensions}}}}else{if(a){v.recoverProp("x",a,d);v.recoverProp("y",a,d);if(v.widthModel.calculated){v.recoverProp("width",a,d)}else{if("width" in a){++u}}if(v.heightModel.calculated){v.recoverProp("height",a,d)}else{if("height" in a){++u}}if(o&&!v.isComponentChild){o.remainingChildDimensions+=u}}}if(a&&r&&r.manageMargins){v.recoverProp("margin-top",a,d);v.recoverProp("margin-right",a,d);v.recoverProp("margin-bottom",a,d);v.recoverProp("margin-left",a,d)}if(c){m=c.heightModel;t=c.widthModel;if(t&&m&&g&&z){if(g.shrinkWrap&&z.shrinkWrap){if(t.constrainedMax&&m.constrainedMin){m=null}}}if(t){v.widthModel=t}if(m){v.heightModel=m}if(c.state){Ext.apply(v.state,c.state)}}return w},initContinue:function(f){var h=this,d=h.ownerCtContext,a=h.target,c=h.widthModel,g=a.getInherited(),b;if(c.fixed){g.inShrinkWrapTable=false}else{delete g.inShrinkWrapTable}if(f){if(d&&c.shrinkWrap){b=d.isBoxParent?d:d.boxParent;if(b){b.addBoxChild(h)}}else{if(c.natural){h.boxParent=d}}}return f},initDone:function(b){var d=this,c=d.props,a=d.state;if(d.remainingChildDimensions===0){c.containerChildrenSizeDone=true}if(b){c.containerLayoutDone=true}if(d.boxChildren&&d.boxChildren.length&&d.widthModel.shrinkWrap){d.el.setWidth(10000);a.blocks=(a.blocks||0)+1}},initAnimation:function(){var c=this,a=c.target,b=c.ownerCtContext;if(b&&b.isTopLevel){c.animatePolicy=a.ownerLayout.getAnimatePolicy(c)}else{if(!b&&a.isCollapsingOrExpanding&&a.animCollapse){c.animatePolicy=a.componentLayout.getAnimatePolicy(c)}}if(c.animatePolicy){c.context.queueAnimation(c)}},addBlock:function(c,f,g){var d=this,a=d[c]||(d[c]={}),b=a[g]||(a[g]={});if(!b[f.id]){b[f.id]=f;++f.blockCount;++d.context.blockCount}},addBoxChild:function(b){var a=this,d,c=b.widthModel;b.boxParent=this;b.measuresBox=c.shrinkWrap?b.hasRawContent:c.natural;if(b.measuresBox){d=a.boxChildren;if(d){d.push(b)}else{a.boxChildren=[b]}}},addPositionStyles:function(a,d){var c=d.x,b=d.y,f=0;if(c!==undefined){a.left=c+"px";++f}if(b!==undefined){a.top=b+"px";++f}return f},addTrigger:function(f,g){var d=this,j=g?"domTriggers":"triggers",h=d[j]||(d[j]={}),a=d.context,c=a.currentLayout,b=h[f]||(h[f]={});if(!b[c.id]){b[c.id]=c;++c.triggerCount;b=a.triggers[g?"dom":"data"];(b[c.id]||(b[c.id]=[])).push({item:this,prop:f});if(d.props[f]!==undefined){if(!g||!(d.dirty&&(f in d.dirty))){++c.firedTriggers}}}},boxChildMeasured:function(){var c=this,a=c.state,b=(a.boxesMeasured=(a.boxesMeasured||0)+1);if(b===c.boxChildren.length){a.clearBoxWidth=1;++c.context.progressCount;c.markDirty()}},borderNames:["border-top-width","border-right-width","border-bottom-width","border-left-width"],marginNames:["margin-top","margin-right","margin-bottom","margin-left"],paddingNames:["padding-top","padding-right","padding-bottom","padding-left"],trblNames:["top","right","bottom","left"],cacheMissHandlers:{borderInfo:function(a){var b=a.getStyles(a.borderNames,a.trblNames);b.width=b.left+b.right;b.height=b.top+b.bottom;return b},marginInfo:function(a){var b=a.getStyles(a.marginNames,a.trblNames);b.width=b.left+b.right;b.height=b.top+b.bottom;return b},paddingInfo:function(c){var b=c.frameBodyContext||c,a=b.getStyles(c.paddingNames,c.trblNames);a.width=a.left+a.right;a.height=a.top+a.bottom;return a}},checkCache:function(a){return this.cacheMissHandlers[a](this)},clearAllBlocks:function(b){var a=this[b],c;if(a){for(c in a){this.clearBlocks(b,c)}}},clearBlocks:function(c,g){var h=this[c],b=h&&h[g],d,f,a;if(b){delete h[g];d=this.context;for(a in b){f=b[a];--d.blockCount;if(!--f.blockCount&&!f.pending&&!f.done){d.queueLayout(f)}}}},block:function(a,b){this.addBlock("blocks",a,b)},domBlock:function(a,b){this.addBlock("domBlocks",a,b)},fireTriggers:function(b,g){var h=this[b],d=h&&h[g],c=this.context,f,a;if(d){for(a in d){f=d[a];++f.firedTriggers;if(!f.done&&!f.blockCount&&!f.pending){c.queueLayout(f)}}}},flush:function(){var d=this,c=d.dirty,a=d.state,b=d.el;d.dirtyCount=0;if("attributes" in d){b.set(d.attributes);delete d.attributes}if("innerHTML" in d){b.innerHTML=d.innerHTML;delete d.innerHTML}if(a&&a.clearBoxWidth){a.clearBoxWidth=0;d.el.setStyle("width",null);if(!--a.blocks){d.context.queueItemLayouts(d)}}if(c){delete d.dirty;d.writeProps(c,true)}},flushAnimations:function(){var r=this,b=r.previousSize,p,f,d,h,g,c,m,q,o,s,a;if(b){p=r.target;f=p.getAnimationProps();d=f.duration;h=Ext.Object.getKeys(r.animatePolicy);g=Ext.apply({},{from:{},to:{},duration:d||Ext.fx.Anim.prototype.duration},f);for(c=0,m=0,q=h.length;m<q;m++){o=h[m];s=b[o];a=r.peek(o);if(s!==a){o=r.translateProps[o]||o;g.from[o]=s;g.to[o]=a;++c}}if(c){if(r.isCollapsingOrExpanding===1){p.componentLayout.undoLayout(r)}else{r.writeProps(g.from)}r.el.animate(g);g=Ext.fx.Manager.getFxQueue(r.el.id)[0];p.$layoutAnim=g;g.on({afteranimate:function(){delete p.$layoutAnim;if(p.destroying||p.destroyed){return}if(r.isCollapsingOrExpanding===1){p.componentLayout.redoLayout(r);p.afterCollapse(true)}else{if(r.isCollapsingOrExpanding===2){p.afterExpand(true)}}if(p.hasListeners.afterlayoutanimation){p.fireEvent("afterlayoutanimation",p)}}})}}},getBorderInfo:function(){var a=this,b=a.borderInfo;if(!b){a.borderInfo=b=a.checkCache("borderInfo")}return b},getEl:function(d,b){var g=this,a,f,c;if(d){if(d.dom){f=d}else{a=g.target;if(b){a=b}f=a[d];if(typeof f==="function"){f=f.call(a);if(f===g.el){return this}}}if(f){c=g.context.getEl(g,f)}}return c||null},getFrameInfo:function(){var a=this,b=a.frameInfo,d,c;if(!b){d=a.framing;c=a.getBorderInfo();a.frameInfo=b=d?{top:d.top+c.top,right:d.right+c.right,bottom:d.bottom+c.bottom,left:d.left+c.left,width:d.width+c.width,height:d.height+c.height}:c}return b},getMarginInfo:function(){var f=this,a=f.marginInfo,c,b,g,d;if(!a){if(!f.wrapsComponent){a=f.checkCache("marginInfo")}else{c=f.target;g=c.ownerLayout;d=g?g.id:null;b=g&&g.manageMargins;a=c.margin$;if(a&&a.ownerId!==d){a=null}if(!a){a=f.parseMargins(c,c.margin)||f.checkCache("marginInfo");if(b){f.setProp("margin-top",0);f.setProp("margin-right",0);f.setProp("margin-bottom",0);f.setProp("margin-left",0)}a.ownerId=d;c.margin$=a}a.width=a.left+a.right;a.height=a.top+a.bottom}f.marginInfo=a}return a},clearMarginCache:function(){delete this.marginInfo;delete this.target.margin$},getPaddingInfo:function(){var a=this,b=a.paddingInfo;if(!b){a.paddingInfo=b=a.checkCache("paddingInfo")}return b},getProp:function(a){var c=this,b=c.props[a];c.addTrigger(a);return b},getDomProp:function(a){var c=this,b=(c.dirty&&(a in c.dirty))?undefined:c.props[a];c.addTrigger(a,true);return b},getStyle:function(c){var f=this,d=f.styles,b,a;if(c in d){a=d[c]}else{b=f.styleInfo[c];a=f.el.getStyle(c);if(b&&b.parseInt){a=parseInt(a,10)||0}d[c]=a}return a},getStyles:function(r,q){var m=this,a=m.styles,h={},b=0,t=r.length,f,d,g,p,s,c,j,o;q=q||r;for(f=0;f<t;++f){p=r[f];if(p in a){h[q[f]]=a[p];++b;if(f&&b===1){d=r.slice(0,f);g=q.slice(0,f)}}else{if(b){(d||(d=[])).push(p);(g||(g=[])).push(q[f])}}}if(b<t){d=d||r;g=g||q;c=m.styleInfo;j=m.el.getStyle(d);for(f=d.length;f--;){p=d[f];s=c[p];o=j[p];if(s&&s.parseInt){o=parseInt(o,10)||0}h[g[f]]=o;a[p]=o}}return h},hasProp:function(a){return this.getProp(a)!=null},hasDomProp:function(a){return this.getDomProp(a)!=null},invalidate:function(a){this.context.queueInvalidate(this,a)},markDirty:function(){if(++this.dirtyCount===1){this.context.queueFlush(this)}},onBoxMeasured:function(){var a=this.boxParent,b=this.state;if(a&&a.widthModel.shrinkWrap&&!b.boxMeasured&&this.measuresBox){b.boxMeasured=1;a.boxChildMeasured()}},parseMargins:function(c,b){if(b===true){b=5}var a=typeof b,d;if(a==="string"||a==="number"){d=c.parseBox(b)}else{if(b){d={top:0,right:0,bottom:0,left:0};if(b){b=Ext.apply(d,c.parseBox(b))}}}return d},peek:function(a){return this.props[a]},recalculateSizeModel:function(){var g=this,a=g.target,d=a.componentLayout,c=g.ownerCtContext,b=d.ownerContext,f;d.ownerContext=null;g.sizeModel=f=a.getSizeModel(c&&c.widthModel.pairsByHeightOrdinal[c.heightModel.ordinal]);g.widthModel=f.width;g.heightModel=f.height;if(b){d.ownerContext=g}},recoverProp:function(a,c,b){var g=this,f=g.props,d;if(a in c){f[a]=c[a];if(b&&a in b){d=g.dirty||(g.dirty={});d[a]=b[a]}}},redo:function(d){var b=this,f,c,a;b.revertProps(b.props);if(d&&b.wrapsComponent){if(b.childItems){for(a=0,f=b.childItems,c=f.length;a<c;a++){f[a].redo(d)}}for(a=0,f=b.children,c=f.length;a<c;a++){f[a].redo()}}},removeEl:function(d,c){var a=this,b,f;if(d){if(d.dom){f=d}else{b=a.target;if(c){b=c}f=b[d];if(typeof f==="function"){f=f.call(b);if(f===a.el){return this}}}if(f){a.context.removeEl(f,a)}}},revertProps:function(b){var c,d=this.flushedProps,a={};for(c in b){if(d.hasOwnProperty(c)){a[c]=b[c]}}this.writeProps(a)},setAttribute:function(b,a){var c=this;if(!c.attributes){c.attributes={}}c.attributes[b]=a;c.markDirty()},setBox:function(b){var a=this;if("left" in b){a.setProp("x",b.left)}if("top" in b){a.setProp("y",b.top)}a.setSize(b.width,b.height)},setContentHeight:function(a,b){if(!b&&this.hasRawContent){return 1}return this.setProp("contentHeight",a)},setContentWidth:function(b,a){if(!a&&this.hasRawContent){return 1}return this.setProp("contentWidth",b)},setContentSize:function(a,b,c){return this.setContentWidth(a,c)+this.setContentHeight(b,c)===2},setProp:function(f,d,b){var c=this,a=typeof d,g;if(a==="undefined"||(a==="number"&&isNaN(d))){return 0}if(c.props[f]===d){return 1}c.props[f]=d;++c.context.progressCount;if(b===false){c.fireTriggers("domTriggers",f);c.clearBlocks("domBlocks",f)}else{g=c.styleInfo[f];if(g){if(!c.dirty){c.dirty={}}c.dirty[f]=d;c.markDirty()}}c.fireTriggers("triggers",f);c.clearBlocks("blocks",f);return 1},setHeight:function(c,d){var m=this,h=m.target,g=m.ownerCtContext,o,j,f,b,a;if(c<0){c=0}if(!m.wrapsComponent){if(!m.setProp("height",c,d)){return NaN}}else{f=m.collapsedVert?0:(h.minHeight||0);c=Ext.Number.constrain(c,f,h.maxHeight);b=m.props.height;if(!m.setProp("height",c,d)){return NaN}if(g&&!m.isComponentChild&&isNaN(b)){a=--g.remainingChildDimensions;if(!a){g.setProp("containerChildrenSizeDone",true)}}o=m.frameBodyContext;if(o){j=m.getFrameInfo();o[m.el.vertical?"setWidth":"setHeight"](c-j.height,d)}}return c},setWidth:function(f,d){var a=this,m=a.target,j=a.ownerCtContext,b,o,h,g,c;if(f<0){f=0}if(!a.wrapsComponent){if(!a.setProp("width",f,d)){return NaN}}else{h=a.collapsedHorz?0:(m.minWidth||0);f=Ext.Number.constrain(f,h,m.maxWidth);g=a.props.width;if(!a.setProp("width",f,d)){return NaN}if(j&&!a.isComponentChild&&isNaN(g)){c=--j.remainingChildDimensions;if(!c){j.setProp("containerChildrenSizeDone",true)}}b=a.frameBodyContext;if(b){o=a.getFrameInfo();b.setWidth(f-o.width,d)}}return f},setSize:function(a,b,c){this.setWidth(a,c);this.setHeight(b,c)},translateProps:{x:"left",y:"top"},undo:function(d){var b=this,f,c,a;b.revertProps(b.lastBox);if(d&&b.wrapsComponent){if(b.childItems){for(a=0,f=b.childItems,c=f.length;a<c;a++){f[a].undo(d)}}for(a=0,f=b.children,c=f.length;a<c;a++){f[a].undo()}}},unsetProp:function(b){var a=this.dirty;delete this.props[b];if(a){delete a[b]}},writeProps:function(f,d){if(!(f&&typeof f==="object")){return}var y=this,c=y.el,j={},g=0,b=y.styleInfo,w,o,r,t=f.width,p=f.height,m=y.target,h,a,s,u,v,q;if("displayed" in f){c.setDisplayed(f.displayed)}for(o in f){if(d){y.fireTriggers("domTriggers",o);y.clearBlocks("domBlocks",o);y.flushedProps[o]=1}w=b[o];if(w&&w.dom){if(w.suffix&&(r=parseInt(f[o],10))){j[o]=r+w.suffix}else{j[o]=f[o]}++g}}if("x" in f||"y" in f){if(m.isComponent){m.setPosition(f.x,f.y)}else{g+=y.addPositionStyles(j,f)}}if(y.wrapsComponent&&Ext.isIE9){if((h=t!==undefined&&y.hasOverflowY)||(a=p!==undefined&&y.hasOverflowX)){s=y.isAbsolute;if(s===undefined){s=false;q=y.target.getTargetEl();v=q.getStyle("position");y.isAbsolute=s=(v==="absolute")}if(s){u=Ext.getScrollbarSize();if(h){t=parseInt(t,10)+u.width;j.width=t+"px";++g}if(a){p=parseInt(p,10)+u.height;j.height=p+"px";++g}}}}if(g){c.setStyle(j)}}},1,0,0,0,0,0,[Ext.layout,"ContextItem"],function(){var a={dom:true,parseInt:true,suffix:"px"},c={dom:true},b={dom:false};this.prototype.styleInfo={containerChildrenSizeDone:b,containerLayoutDone:b,displayed:b,done:b,x:b,y:b,columnsChanged:b,rowHeights:b,viewOverflowY:b,left:a,top:a,right:a,bottom:a,width:a,height:a,"border-top-width":a,"border-right-width":a,"border-bottom-width":a,"border-left-width":a,"margin-top":a,"margin-right":a,"margin-bottom":a,"margin-left":a,"padding-top":a,"padding-right":a,"padding-bottom":a,"padding-left":a,"line-height":c,display:c,clear:c}}));(Ext.cmd.derive("Ext.layout.Context",Ext.Base,{remainingLayouts:0,state:0,cycleWatchDog:200,constructor:function(a){var b=this;Ext.apply(b,a);b.items={};b.layouts={};b.blockCount=0;b.cycleCount=0;b.flushCount=0;b.calcCount=0;b.animateQueue=b.newQueue();b.completionQueue=b.newQueue();b.finalizeQueue=b.newQueue();b.finishQueue=b.newQueue();b.flushQueue=b.newQueue();b.invalidateData={};b.layoutQueue=b.newQueue();b.invalidQueue=[];b.triggers={data:{},dom:{}}},callLayout:function(b,a){this.currentLayout=b;b[a](this.getCmp(b.owner))},cancelComponent:function(b,p,d){var r=this,a=b,c=!b.isComponent,q=c?a.length:1,t,s,o,j,v,h,f,g,m,u;for(t=0;t<q;++t){if(c){b=a[t]}if(d){if(b.ownerCt){u=this.items[b.ownerCt.el.id];if(u){Ext.Array.remove(u.childItems,r.getCmp(b))}}else{if(b.rendered){r.removeEl(b.el)}}}if(!p){f=r.invalidQueue;o=f.length;if(o){r.invalidQueue=h=[];for(s=0;s<o;++s){g=f[s];m=g.item.target;if(m!==b&&!m.up(b)){h.push(g)}}}}v=b.componentLayout;r.cancelLayout(v);if(v.getLayoutItems){j=v.getLayoutItems();if(j.length){r.cancelComponent(j,true)}}if(b.isContainer&&!b.collapsed){v=b.layout;r.cancelLayout(v);j=v.getVisibleItems();if(j.length){r.cancelComponent(j,true)}}}},cancelLayout:function(b){var a=this;a.completionQueue.remove(b);a.finalizeQueue.remove(b);a.finishQueue.remove(b);a.layoutQueue.remove(b);if(b.running){a.layoutDone(b)}b.ownerContext=null},clearTriggers:function(a,b){var f=a.id,m=this.triggers[b?"dom":"data"],c=m&&m[f],g=(c&&c.length)||0,j,d,h;for(j=0;j<g;++j){h=c[j];d=h.item;m=b?d.domTriggers:d.triggers;delete m[h.prop][f]}},flush:function(){var b=this,c=b.flushQueue.clear(),a=c.length,d;if(a){++b.flushCount;for(d=0;d<a;++d){c[d].flush()}}},flushAnimations:function(){var b=this,d=b.animateQueue.clear(),c=d.length,a;if(c){for(a=0;a<c;a++){if(d[a].target.animate!==false){d[a].flushAnimations()}}Ext.fx.Manager.runner()}},flushInvalidates:function(){var h=this,a=h.invalidQueue,g=a&&a.length,b,f,d,c;h.invalidQueue=[];if(g){f=[];for(c=0;c<g;++c){b=(d=a[c]).item.target;if(!b.container.isDetachedBody){f.push(b);if(d.options){h.invalidateData[b.id]=d.options}}}h.invalidate(f,null)}},flushLayouts:function(g,j,b){var f=this,h=b?f[g].items:f[g].clear(),d=h.length,a,c;if(d){for(a=0;a<d;++a){c=h[a];if(!c.running){f.callLayout(c,j)}}f.currentLayout=null}},getCmp:function(a){return this.getItem(a,a.el)},getEl:function(c,b){var a=this.getItem(b,b);if(!a.parent){a.parent=c;if(c.children.length){c.children.push(a)}else{c.children=[a]}}return a},getItem:function(a,d){var b=d.id,c=this.items,f=c[b]||(c[b]=new Ext.layout.ContextItem({context:this,target:a,el:d}));return f},handleFailure:function(){var a=this.layouts,c,b;Ext.failedLayouts=(Ext.failedLayouts||0)+1;for(b in a){c=a[b];if(a.hasOwnProperty(b)){c.running=false;c.ownerContext=null}}},invalidate:function(d,o){var f=this,j=!d.isComponent,s,g,p,v,c,h,r,q,a,b,u,t,m;for(v=0,q=j?d.length:1;v<q;++v){c=j?d[v]:d;if(c.rendered&&!c.hidden){g=c.ownerLayout;a=c.componentLayout;m=false;if((!g||!g.needsItemSize)&&c.liquidLayout){m=true}if(!m||(g&&g.setsItemSize)){h=f.getCmp(c);p=!h.state;b=(c.isContainer&&!c.collapsed)?c.layout:null;u=f.invalidateData[h.id];delete f.invalidateData[h.id];t=h.init(o,u)}if(m){continue}if(u){f.processInvalidate(u,h,"before")}if(a.beforeLayoutCycle){a.beforeLayoutCycle(h)}if(b&&b.beforeLayoutCycle){b.beforeLayoutCycle(h)}t=h.initContinue(t);s=true;if(a.getLayoutItems){a.renderChildren();r=a.getLayoutItems();if(r.length){f.invalidate(r,true)}}if(b){s=false;b.renderChildren();if(b.needsItemSize||b.activeItemCount){r=b.getVisibleItems();if(r.length){f.invalidate(r,true)}}}h.initDone(s);f.resetLayout(a,h,p);if(b){f.resetLayout(b,h,p)}h.initAnimation();if(u){f.processInvalidate(u,h,"after")}}}f.currentLayout=null},isDescendant:function(b,d){if(b.isContainer){for(var a=d.ownerCt;a;a=a.ownerCt){if(a===b){return true}}}return false},layoutDone:function(a){var b=a.ownerContext;a.running=false;if(a.isComponentLayout){if(b.measuresBox){b.onBoxMeasured()}b.setProp("done",true)}else{b.setProp("containerLayoutDone",true)}--this.remainingLayouts;++this.progressCount},newQueue:function(){return new Ext.util.Queue()},processInvalidate:function(d,b,c){if(d[c]){var a=this,f=a.currentLayout;a.currentLayout=d.layout||null;d[c](b,d);a.currentLayout=f}},queueAnimation:function(a){this.animateQueue.add(a)},queueCompletion:function(a){this.completionQueue.add(a)},queueFinalize:function(a){this.finalizeQueue.add(a)},queueFlush:function(a){this.flushQueue.add(a)},chainFns:function(j,h,f){var c=this,b=j.layout,d=h.layout,a=j[f],g=h[f];return function(o){var m=c.currentLayout;if(a){c.currentLayout=b;a.call(j.scope||j,o,j)}c.currentLayout=d;g.call(h.scope||h,o,h);c.currentLayout=m}},purgeInvalidates:function(){var m=this,a=[],o=m.invalidQueue,h=o.length,p,b,g,f,d,j,c;for(p=0;p<h;++p){d=o[p];j=d.item.target;c=true;for(b=a.length;b--;){g=a[b];f=g.item.target;if(j.isLayoutChild(f)){c=false;break}if(f.isLayoutChild(j)){Ext.Array.erase(a,b,1)}}if(c){a.push(d)}}m.invalidQueue=a},queueInvalidate:function(a,b){var m=this,p=[],o=m.invalidQueue,j=o.length,g,d,h,c,f;if(a.isComponent){g=a;a=m.items[g.el.id];if(a){a.recalculateSizeModel()}else{a=m.getCmp(g)}}else{g=a.target}a.invalid=true;while(j--){d=o[j];h=d.item.target;if(!g.isFloating&&g.up(h)){return}if(h===g){if(!(c=d.options)){d.options=b}else{if(b){if(b.widthModel){c.widthModel=b.widthModel}if(b.heightModel){c.heightModel=b.heightModel}if(!(f=c.state)){c.state=b.state}else{if(b.state){Ext.apply(f,b.state)}}if(b.before){c.before=m.chainFns(c,b,"before")}if(b.after){c.after=m.chainFns(c,b,"after")}}}return}if(!h.isLayoutChild(g)){p.push(d)}}p.push({item:a,options:b});m.invalidQueue=p},queueItemLayouts:function(a){var b=a.isComponent?a:a.target,c=b.componentLayout;if(!c.pending&&!c.invalid&&!c.done){this.queueLayout(c)}c=b.layout;if(c&&!c.pending&&!c.invalid&&!c.done&&!b.collapsed){this.queueLayout(c)}},queueLayout:function(a){this.layoutQueue.add(a);a.pending=true},removeEl:function(a,f){var b=a.id,d=f?f.children:null,c=this.items;if(d){Ext.Array.remove(d,c[b])}delete c[b]},resetLayout:function(d,a,b){var c=this;c.currentLayout=d;d.done=false;d.pending=true;d.firedTriggers=0;c.layoutQueue.add(d);if(b){c.layouts[d.id]=d;d.running=true;if(d.finishedLayout){c.finishQueue.add(d)}++c.remainingLayouts;++d.layoutCount;d.ownerContext=a;d.beginCount=0;d.blockCount=0;d.calcCount=0;d.triggerCount=0;if(!d.initialized){d.initLayout()}d.beginLayout(a)}else{++d.beginCount;if(!d.running){++c.remainingLayouts;d.running=true;d.ownerContext=a;if(d.isComponentLayout){a.unsetProp("done")}c.completionQueue.remove(d);c.finalizeQueue.remove(d)}}d.beginLayoutCycle(a,b)},run:function(){var a=this,c=false,b=a.cycleWatchDog;a.purgeInvalidates();a.flushInvalidates();a.state=1;a.totalCount=a.layoutQueue.getCount();a.flush();while((a.remainingLayouts||a.invalidQueue.length)&&b--){if(a.invalidQueue.length){a.flushInvalidates()}if(a.runCycle()){c=false}else{if(!c){a.flush();c=true;a.flushLayouts("completionQueue","completeLayout")}else{if(!a.invalidQueue.length){a.state=2;break}}}if(!(a.remainingLayouts||a.invalidQueue.length)){a.flush();a.flushLayouts("completionQueue","completeLayout");a.flushLayouts("finalizeQueue","finalizeLayout")}}return a.runComplete()},runComplete:function(){var a=this;a.state=2;if(a.remainingLayouts){a.handleFailure();return false}a.flush();a.flushLayouts("finishQueue","finishedLayout",true);a.flushLayouts("finishQueue","notifyOwner");a.flush();a.flushAnimations();return true},runCycle:function(){var a=this,b=a.layoutQueue.clear(),d=b.length,c;++a.cycleCount;a.progressCount=0;for(c=0;c<d;++c){a.runLayout(a.currentLayout=b[c])}a.currentLayout=null;return a.progressCount>0},runLayout:function(c){var b=this,a=b.getCmp(c.owner);c.pending=false;if(a.state.blocks){return}c.done=true;++c.calcCount;++b.calcCount;c.calculate(a);if(c.done){b.layoutDone(c);if(c.completeLayout){b.queueCompletion(c)}if(c.finalizeLayout){b.queueFinalize(c)}}else{if(!c.pending&&!c.invalid&&!(c.blockCount+c.triggerCount-c.firedTriggers)){b.queueLayout(c)}}},setItemSize:function(h,g,b){var d=h,a=1,c,f;if(h.isComposite){d=h.elements;a=d.length;h=d[0]}else{if(!h.dom&&!h.el){a=d.length;h=d[0]}}for(f=0;f<a;){c=this.get(h);c.setSize(g,b);h=d[++f]}}},1,0,0,0,0,0,[Ext.layout,"Context"],0));(Ext.cmd.derive("Ext.layout.container.Accordion",Ext.layout.container.VBox,{type:"accordion",alternateClassName:"Ext.layout.AccordionLayout",targetCls:"x-accordion-layout-ct",itemCls:["x-box-item","x-accordion-item"],align:"stretch",enableSplitters:false,fill:true,titleCollapse:true,hideCollapseTool:false,collapseFirst:undefined,animate:true,activeOnTop:false,multi:false,wrapOver:true,panelCollapseMode:"header",defaultAnimatePolicy:{y:true,height:true},constructor:function(){var a=this;Ext.layout.container.VBox.prototype.constructor.apply(this,arguments);if(a.animate){a.animatePolicy={};a.animatePolicy[a.names.x]=true;a.animatePolicy[a.names.width]=true}else{a.animatePolicy=null}},beforeRenderItems:function(o){var a=this,m=o.length,f=a.owner,b=a.collapseFirst,d=Ext.isDefined(b),c=a.getExpanded(true)[0],j=a.multi,h,g;for(g=0;g<m;g++){h=o[g];if(!h.rendered){h.isAccordionPanel=true;h.bodyAriaRole="tabpanel";h.accordionWrapOver=a.wrapOver;if(!j||h.collapsible!==false){h.collapsible=true}if(h.collapsible){if(d){h.collapseFirst=b}if(a.hideCollapseTool){h.hideCollapseTool=a.hideCollapseTool;h.titleCollapse=true}else{if(a.titleCollapse&&h.titleCollapse===undefined){h.titleCollapse=a.titleCollapse}}}h.hideHeader=h.width=null;h.title=h.title||"&#160;";h.addBodyCls("x-accordion-body");if(!j){if(c){h.collapsed=c!==h}else{if(h.hasOwnProperty("collapsed")&&h.collapsed===false){c=h}else{h.collapsed=true}}f.mon(h,"show",a.onComponentShow,a)}h.headerOverCls="x-accordion-hd-over"}}if(!a.processing&&!j){if(!c){if(m){o[0].collapsed=false}}else{if(a.activeOnTop){c.collapsed=false;a.configureItem(c);if(f.items.indexOf(c)>0){f.insert(0,c)}}}}},getItemsRenderTree:function(a){this.beforeRenderItems(a);return Ext.layout.container.VBox.prototype.getItemsRenderTree.apply(this,arguments)},renderItems:function(a,b){this.beforeRenderItems(a);Ext.layout.container.VBox.prototype.renderItems.apply(this,arguments)},configureItem:function(a){Ext.layout.container.VBox.prototype.configureItem.apply(this,arguments);a.ignoreHeaderBorderManagement=true;a.animCollapse=false;if(this.fill){a.flex=1}},beginLayout:function(a){Ext.layout.container.VBox.prototype.beginLayout.apply(this,arguments);this.innerCt.dom.setAttribute("role","tablist");this.innerCt.dom.setAttribute("aria-multiselectable",true);this.updatePanelClasses(a)},updatePanelClasses:function(f){var c=f.visibleItems,d=c.length,a=true,b,h,g;for(b=0;b<d;b++){h=c[b];g=h.header;g.addCls("x-accordion-hd");if(a){g.removeCls("x-accordion-hd-sibling-expanded")}else{g.addCls("x-accordion-hd-sibling-expanded")}if(b+1===d&&h.collapsed){g.addCls("x-accordion-hd-last-collapsed")}else{g.removeCls("x-accordion-hd-last-collapsed")}a=h.collapsed}},onBeforeComponentExpand:function(h){var c=this,j=c.owner,g=c.multi,f=!g&&!c.animate&&c.activeOnTop,b,a,d;if(!c.processing){c.processing=true;a=j.deferLayouts;j.deferLayouts=true;if(!g){b=c.getExpanded()[0];if(b&&b!==h){d=b.$layoutAnim;if(d){d.jumpToEnd()}b.collapse()}}if(f){Ext.suspendLayouts();j.insert(0,h);Ext.resumeLayouts()}j.deferLayouts=a;c.processing=false}},onBeforeComponentCollapse:function(f){var g=this,b=g.owner,a,d,c;if(g.owner.items.getCount()===1){return false}if(!g.processing){g.processing=true;c=b.deferLayouts;b.deferLayouts=true;a=f.next()||f.prev();if(g.multi){d=g.getExpanded();if(d.length===1){a.expand()}}else{if(a){a.expand()}}b.deferLayouts=c;g.processing=false}},onComponentShow:function(a){this.onBeforeComponentExpand(a)},onAdd:function(b){var a=this;Ext.layout.container.VBox.prototype.onAdd.apply(this,arguments);if(b.collapseMode==="placeholder"){b.collapseMode=a.panelCollapseMode}b.collapseDirection=b.headerPosition;if(a.layoutCount&&!a.multi&&a.owner.items.getCount()>1){a.processing=true;b.collapse();a.processing=false}},onRemove:function(c,b){var a=this,d;Ext.layout.container.VBox.prototype.onRemove.apply(this,arguments);if(!a.owner.destroying&&!a.multi&&!c.collapsed){d=a.owner.items.first();if(d){d.expand()}}},getExpanded:function(h){var b=this.owner.items.items,a=b.length,d=0,c=[],g,f;for(;d<a;++d){f=b[d];if(!f.hidden){if(h){g=f.hasOwnProperty("collapsed")&&f.collapsed===false}else{g=!f.collapsed}if(g){c.push(f)}}}return c},afterCollapse:Ext.emptyFn,afterExpand:Ext.emptyFn},1,0,0,0,["layout.accordion"],0,[Ext.layout.container,"Accordion",Ext.layout,"AccordionLayout"],0));(Ext.cmd.derive("Ext.resizer.BorderSplitter",Ext.resizer.Splitter,{collapseTarget:null,getTrackerConfig:function(){var a=Ext.resizer.Splitter.prototype.getTrackerConfig.call(this);a.xclass="Ext.resizer.BorderSplitterTracker";return a},onTargetCollapse:function(a){Ext.resizer.Splitter.prototype.onTargetCollapse.call(this,a);if(this.performCollapse!==false&&a.collapseMode=="mini"){a.addCls(a.baseCls+"-"+a.collapsedCls+"-mini")}},onTargetExpand:function(a){Ext.resizer.Splitter.prototype.onTargetExpand.call(this,a);if(this.performCollapse!==false&&a.collapseMode=="mini"){a.removeCls(a.baseCls+"-"+a.collapsedCls+"-mini")}}},0,["bordersplitter"],["component","box","splitter","bordersplitter"],{component:true,box:true,splitter:true,bordersplitter:true},["widget.bordersplitter"],0,[Ext.resizer,"BorderSplitter"],0));(Ext.cmd.derive("Ext.layout.container.Border",Ext.layout.container.Container,{alternateClassName:"Ext.layout.BorderLayout",targetCls:"x-border-layout-ct",itemCls:["x-border-item","x-box-item"],type:"border",isBorderLayout:true,padding:undefined,percentageRe:/(\d+)%/,horzPositionProp:"left",padOnContainerProp:"left",padNotOnContainerProp:"right",axisProps:{horz:{borderBegin:"west",borderEnd:"east",horizontal:true,posProp:"x",sizeProp:"width",sizePropCap:"Width"},vert:{borderBegin:"north",borderEnd:"south",horizontal:false,posProp:"y",sizeProp:"height",sizePropCap:"Height"}},centerRegion:null,manageMargins:true,panelCollapseAnimate:true,panelCollapseMode:"placeholder",regionWeights:{north:20,south:10,center:0,west:-10,east:-20},beginAxis:function(p,b,q){var z=this,c=z.axisProps[q],v=!c.horizontal,o=c.sizeProp,t=0,a=p.childItems,g=a.length,y,u,s,h,w,f,m,r,d,A,j;for(u=0;u<g;++u){s=a[u];w=s.target;s.layoutPos={};if(w.region){s.region=f=w.region;s.isCenter=w.isCenter;s.isHorz=w.isHorz;s.isVert=w.isVert;s.weight=w.weight||z.regionWeights[f]||0;w.weight=s.weight;b[w.id]=s;if(w.isCenter){y=s;h=w.flex;p.centerRegion=y;continue}if(v!==s.isVert){continue}s.reverseWeighting=(f===c.borderEnd);r=w[o];d=typeof r;if(!w.collapsed){if(d==="string"&&(m=z.percentageRe.exec(r))){s.percentage=parseInt(m[1],10)}else{if(w.flex){t+=s.flex=w.flex}}}}}if(y){A=y.target;if((j=A.placeholderFor)){if(!h&&v===j.collapsedVertical()){h=0;y.collapseAxis=q}}else{if(A.collapsed&&(v===A.collapsedVertical())){h=0;y.collapseAxis=q}}}if(h==null){h=1}t+=h;return Ext.apply({before:v?"top":"left",totalFlex:t},c)},beginLayout:function(t){var g=this,f=g.getLayoutItems(),a=g.padding,m=typeof a,h=false,j,r,q,c,b,p,s,d,o;if(a){if(m==="string"||m==="number"){a=Ext.util.Format.parseBox(a)}}else{a=t.getEl("getTargetEl").getPaddingInfo();h=true}t.outerPad=a;t.padOnContainer=h;for(c=0,q=f.length;c<q;++c){r=f[c];p=g.getSplitterTarget(r);if(p){s=undefined;d=!!r.hidden;if(!p.split){if(p.isCollapsingOrExpanding){s=!!p.collapsed}}else{if(d!==p.hidden){s=!p.hidden}}if(s){r.show()}else{if(s===false){r.hide()}}}}Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments);f=t.childItems;q=f.length;b={};t.borderAxisHorz=g.beginAxis(t,b,"horz");t.borderAxisVert=g.beginAxis(t,b,"vert");for(c=0;c<q;++c){j=f[c];p=g.getSplitterTarget(j.target);if(p){o=b[p.id];if(!o){o=t.getEl(p.el,g);o.region=p.region}j.collapseTarget=p=o;j.weight=p.weight;j.reverseWeighting=p.reverseWeighting;p.splitter=j;j.isHorz=p.isHorz;j.isVert=p.isVert}}g.sortWeightedItems(f,"reverseWeighting");g.setupSplitterNeighbors(f)},calculate:function(t){var m=this,p=m.getContainerSize(t),d=t.childItems,s=d.length,r=t.borderAxisHorz,f=t.borderAxisVert,a=t.outerPad,q=t.padOnContainer,c,j,g,h,o,b;r.begin=a[m.padOnContainerProp];f.begin=a.top;o=r.end=r.flexSpace=p.width+(q?a[m.padOnContainerProp]:-a[m.padNotOnContainerProp]);b=f.end=f.flexSpace=p.height+(q?a.top:-a.bottom);for(c=0;c<s;++c){j=d[c];g=j.getMarginInfo();if(j.isHorz||j.isCenter){r.addUnflexed(g.width);o-=g.width}if(j.isVert||j.isCenter){f.addUnflexed(g.height);b-=g.height}if(!j.flex&&!j.percentage){if(j.isHorz||(j.isCenter&&j.collapseAxis==="horz")){h=j.getProp("width");r.addUnflexed(h);if(j.collapseTarget){o-=h}}else{if(j.isVert||(j.isCenter&&j.collapseAxis==="vert")){h=j.getProp("height");f.addUnflexed(h);if(j.collapseTarget){b-=h}}}}}for(c=0;c<s;++c){j=d[c];g=j.getMarginInfo();if(j.percentage){if(j.isHorz){h=Math.ceil(o*j.percentage/100);h=j.setWidth(h);r.addUnflexed(h)}else{if(j.isVert){h=Math.ceil(b*j.percentage/100);h=j.setHeight(h);f.addUnflexed(h)}}}}for(c=0;c<s;++c){j=d[c];if(!j.isCenter){m.calculateChildAxis(j,r);m.calculateChildAxis(j,f)}}if(m.finishAxis(t,f)+m.finishAxis(t,r)<2){m.done=false}else{m.finishPositions(d)}},calculateChildAxis:function(b,f){var c=b.collapseTarget,m="set"+f.sizePropCap,h=f.sizeProp,g=b.getMarginInfo()[h],p,d,j,o,a;if(c){p=c.region}else{p=b.region;j=b.flex}d=p===f.borderBegin;if(!d&&p!==f.borderEnd){b[m](f.end-f.begin-g);o=f.begin}else{if(j){a=Math.ceil(f.flexSpace*(j/f.totalFlex));a=b[m](a)}else{if(b.percentage){a=b.peek(h)}else{a=b.getProp(h)}}a+=g;if(d){o=f.begin;f.begin+=a}else{f.end=o=f.end-a}}b.layoutPos[f.posProp]=o},eachItem:function(h,d,c){var g=this,a=g.getLayoutItems(),b=0,f;if(Ext.isFunction(h)){d=h;c=d}for(b;b<a.length;b++){f=a[b];if(!h||f.region===h){if(d.call(c,f)===false){break}}}},finishAxis:function(b,a){var d=a.end-a.begin,c=b.centerRegion;if(c){c["set"+a.sizePropCap](d-c.getMarginInfo()[a.sizeProp]);c.layoutPos[a.posProp]=a.begin}return Ext.isNumber(d)?1:0},finishPositions:function(b){var f=b.length,d,c,a=this.horzPositionProp;for(d=0;d<f;++d){c=b[d];c.setProp("x",c.layoutPos.x+c.marginInfo[a]);c.setProp("y",c.layoutPos.y+c.marginInfo.top)}},getLayoutItems:function(){var a=this.owner,f=(a&&a.items&&a.items.items)||[],d=f.length,b=[],c=0,g,h;for(;c<d;c++){g=f[c];h=g.placeholderFor;if(g.hidden||((!g.floated||g.isCollapsingOrExpanding===2)&&!(h&&h.isCollapsingOrExpanding===2))){b.push(g)}}return b},getPlaceholder:function(a){return a.getPlaceholder&&a.getPlaceholder()},getMaxWeight:function(a){return this.getMinMaxWeight(a)},getMinWeight:function(a){return this.getMinMaxWeight(a,true)},getMinMaxWeight:function(b,c){var d=this,a=null;d.eachItem(b,function(f){if(f.hasOwnProperty("weight")){if(a===null){a=f.weight;return}if((c&&f.weight<a)||f.weight>a){a=f.weight}}},this);return a},getSplitterTarget:function(b){var a=b.collapseTarget;if(a&&a.collapsed){return a.placeholder||a}return a},isItemBoxParent:function(a){return true},isItemShrinkWrap:function(a){return true},insertSplitter:function(d,c,g,b){var h=d.region,f=Ext.apply({xtype:"bordersplitter",collapseTarget:d,id:d.id+"-splitter",hidden:g,canResize:d.splitterResize!==false,splitterFor:d,synthetic:true},b),a=c+((h==="south"||h==="east")?0:1);if(d.collapseMode==="mini"){f.collapsedCls=d.collapsedCls}d.splitter=this.owner.add(a,f)},getMoveAfterIndex:function(b){var a=Ext.layout.container.Container.prototype.getMoveAfterIndex.apply(this,arguments);if(b.splitter){a++}return a},moveItemBefore:function(b,a){var c;if(a&&a.splitter){c=a.region;if(c==="south"||c==="east"){a=a.splitter}}return Ext.layout.container.Container.prototype.moveItemBefore.call(this,b,a)},onAdd:function(d,j){var a=this,h=d.placeholderFor,c=d.region,m,b,f,g;Ext.layout.container.Container.prototype.onAdd.apply(this,arguments);if(c){Ext.apply(d,a.regionFlags[c]);if(a.owner.isViewport){d.isViewportBorderChild=true}if(d.initBorderRegion){d.initBorderRegion()}m=c==="center";if(m){a.centerRegion=d}else{b=d.split;f=!!d.hidden;if(typeof b==="object"){g=b;b=true}if((d.isHorz||d.isVert)&&(b||d.collapseMode==="mini")){a.insertSplitter(d,j,f||!b,g)}}if(!m&&!d.hasOwnProperty("collapseMode")){d.collapseMode=a.panelCollapseMode}if(!d.hasOwnProperty("animCollapse")){if(d.collapseMode!=="placeholder"){d.animCollapse=false}else{d.animCollapse=a.panelCollapseAnimate}}}else{if(h){Ext.apply(d,a.regionFlags[h.region]);d.region=h.region;d.weight=h.weight}}},onDestroy:function(){this.centerRegion=null;Ext.layout.container.Container.prototype.onDestroy.call(this)},onRemove:function(a,c){var d=this,h=a.region,f=a.splitter,j=d.owner,g=j.destroying,b;if(h){if(a.isCenter){d.centerRegion=null}delete a.isCenter;delete a.isHorz;delete a.isVert;if(f&&!j.destroying){j.doRemove(f,true)}delete a.splitter}Ext.layout.container.Container.prototype.onRemove.apply(this,arguments);if(!g&&!c&&a.rendered){b=a.getEl();if(b){b.setStyle("top","");b.setStyle(d.horzPositionProp,"")}}},regionMeta:{center:{splitterDelta:0},north:{splitterDelta:1},south:{splitterDelta:-1},west:{splitterDelta:1},east:{splitterDelta:-1}},regionFlags:{center:{isCenter:true,isHorz:false,isVert:false},north:{isCenter:false,isHorz:false,isVert:true,collapseDirection:"top"},south:{isCenter:false,isHorz:false,isVert:true,collapseDirection:"bottom"},west:{isCenter:false,isHorz:true,isVert:false,collapseDirection:"left"},east:{isCenter:false,isHorz:true,isVert:false,collapseDirection:"right"}},setupSplitterNeighbors:function(p){var r={},d=p.length,f=this.touchedRegions,h,g,s,o,c,m,q,a,b;for(h=0;h<d;++h){m=p[h].target;q=m.region;if(m.isCenter){s=m}else{if(q){b=f[q];for(g=0,o=b.length;g<o;++g){c=r[b[g]];if(c){c.neighbors.push(m)}}if(m.placeholderFor){a=m.placeholderFor.splitter}else{a=m.splitter}if(a){a.neighbors=[]}r[q]=a}}}if(s){b=f.center;for(g=0,o=b.length;g<o;++g){c=r[b[g]];if(c){c.neighbors.push(s)}}}},touchedRegions:{center:["north","south","east","west"],north:["north","east","west"],south:["south","east","west"],east:["east","north","south"],west:["west","north","south"]},sizePolicies:{vert:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},horz:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},flexAll:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}},getItemSizePolicy:function(f){var d=this,a=this.sizePolicies,c,b,g,h;if(f.isCenter){h=f.placeholderFor;if(h){if(h.collapsedVertical()){return a.vert}return a.horz}if(f.collapsed){if(f.collapsedVertical()){return a.vert}return a.horz}return a.flexAll}c=f.collapseTarget;if(c){return c.isVert?a.vert:a.horz}if(f.region){if(f.isVert){b=f.height;g=a.vert}else{b=f.width;g=a.horz}if(f.flex||(typeof b==="string"&&d.percentageRe.test(b))){return a.flexAll}return g}return d.autoSizePolicy}},0,0,0,0,["layout.border"],0,[Ext.layout.container,"Border",Ext.layout,"BorderLayout"],function(){var a={addUnflexed:function(c){this.flexSpace=Math.max(this.flexSpace-c,0)}},b=this.prototype.axisProps;Ext.apply(b.horz,a);Ext.apply(b.vert,a)}));(Ext.cmd.derive("Ext.plugin.Manager",Ext.Base,{alternateClassName:["Ext.PluginManager","Ext.PluginMgr"],singleton:true,typeName:"ptype",create:function(d,b,a){var c,f;if(d.init){c=d}else{if(a){d=Ext.apply({},d);d.cmp=a}else{a=d.cmp}if(d.xclass){c=Ext.create(d)}else{f="plugin."+(d.ptype||b);c=Ext.ClassManager.instantiateByAlias(f,d)}}if(c&&a&&c.setCmp&&!c.setCmpCalled){c.setCmp(a);c.setCmpCalled=true}return c}},0,0,0,0,0,0,[Ext.plugin,"Manager",Ext,"PluginManager",Ext,"PluginMgr"],0));(Ext.cmd.derive("Ext.resizer.BorderSplitterTracker",Ext.resizer.SplitterTracker,{getPrevCmp:null,getNextCmp:null,calculateConstrainRegion:function(){var t=this,C=t.splitter,r=C.collapseTarget,b=C.defaultSplitMin,f=C.vertical?"Width":"Height",a="min"+f,B="max"+f,g="get"+f,A=C.neighbors,c=A.length,p=r.el.getBox(),d=p.x,u=p.y,s=p.right,h=p.bottom,w=C.vertical?(s-d):(h-u),q,j,y,m,o,z,v,D;m=(r[a]||Math.min(w,b))-w;o=r[B];if(!o){o=1000000000}else{o-=w}D=w;for(q=0;q<c;++q){j=A[q];w=j[g]();y=j[B];if(y===null){y=undefined}z=w-y;v=w-(j[a]||Math.min(w,b));if(!isNaN(z)){if(m<z){m=z}}if(o>v){o=v}}if(o-m<2){return null}p=new Ext.util.Region(u,s,h,d);t.constraintAdjusters[t.getCollapseDirection()](p,m,o,C);t.dragInfo={minRange:m,maxRange:o,targetSize:D};return p},constraintAdjusters:{left:function(a,c,d,b){a[0]=a.x=a.left=a.right+c;a.right+=d+b.getWidth()},top:function(a,c,d,b){a[1]=a.y=a.top=a.bottom+c;a.bottom+=d+b.getHeight()},bottom:function(a,c,d,b){a.bottom=a.top-c;a.top-=d+b.getHeight()},right:function(a,c,d,b){a.right=a.left-c;a[0]=a.x=a.left=a.x-d+b.getWidth()}},onBeforeStart:function(h){var d=this,f=d.splitter,c=f.collapseTarget,a=f.neighbors,b=a.length,j,g;if(c.collapsed){return false}for(j=0;j<b;++j){g=a[j];if(g.collapsed&&g.isHorz===c.isHorz){return false}}if(!(d.constrainTo=d.calculateConstrainRegion())){return false}return true},performResize:function(a,o){var b=this,f=b.splitter,m=f.getCollapseDirection(),d=f.collapseTarget,j=b.splitAdjusters[f.vertical?"horz":"vert"],c=o[j.index],h=b.dragInfo,g;if(m==="right"||m==="bottom"){c=-c}c=Math.min(Math.max(h.minRange,c),h.maxRange);if(c){(g=f.ownerCt).suspendLayouts();j.adjustTarget(d,h.targetSize,c);g.resumeLayouts(true)}},splitAdjusters:{horz:{index:0,adjustTarget:function(c,b,a){c.flex=null;c.setSize(b+a)}},vert:{index:1,adjustTarget:function(c,b,a){c.flex=null;c.setSize(undefined,b+a)}}},getCollapseDirection:function(){return this.splitter.getCollapseDirection()}},0,0,0,0,0,0,[Ext.resizer,"BorderSplitterTracker"],0));(Ext.cmd.derive("Ext.resizer.ResizeTracker",Ext.dd.DragTracker,{dynamic:true,preserveRatio:false,constrainTo:null,proxyCls:"x-resizable-proxy",constructor:function(d){var a=this,f,c,b;if(!d.el){if(d.target.isComponent){a.el=d.target.getEl()}else{a.el=d.target}}Ext.dd.DragTracker.prototype.constructor.apply(this,arguments);if(a.preserveRatio&&a.minWidth&&a.minHeight){f=a.minWidth/a.el.getWidth();c=a.minHeight/a.el.getHeight();if(c>f){a.minWidth=a.el.getWidth()*c}else{a.minHeight=a.el.getHeight()*f}}if(a.throttle){b=Ext.Function.createThrottled(function(){Ext.resizer.ResizeTracker.prototype.resize.apply(a,arguments)},a.throttle);a.resize=function(g,h,j){if(j){Ext.resizer.ResizeTracker.prototype.resize.apply(a,arguments)}else{b.apply(null,arguments)}}}},onBeforeStart:function(a){this.startBox=this.target.getBox()},getProxy:function(){var a=this;if(!a.dynamic&&!a.proxy){a.proxy=a.createProxy(a.target||a.el);a.hideProxy=true}if(a.proxy){a.proxy.show();return a.proxy}},createProxy:function(a){var c,b=this.proxyCls;if(a.isComponent){c=a.getProxy().addCls(b)}else{c=a.createProxy({tag:"div",role:"presentation",cls:b,id:a.id+"-rzproxy"},Ext.getBody())}c.removeCls("x-proxy-el");return c},onStart:function(a){this.activeResizeHandle=Ext.get(this.getDragTarget().id);if(!this.dynamic){this.resize(this.startBox)}},onMouseDown:function(c,b){var a=Ext.fly(b.parentNode);Ext.dd.DragTracker.prototype.onMouseDown.apply(this,arguments);if(a&&a.shim){a.maskIframes()}},onMouseUp:function(a){var b=Ext.fly(this.dragTarget.parentNode);Ext.dd.DragTracker.prototype.onMouseUp.apply(this,arguments);if(b&&b.shim){b.unmaskIframes()}},onDrag:function(a){if(this.dynamic||this.proxy){this.updateDimensions(a)}},updateDimensions:function(u,q){var v=this,c=v.activeResizeHandle.region,f=v.getOffset(v.constrainTo?"dragTarget":null),o=v.startBox,g,s=0,w=0,j,t,a=0,m=0,y,h,b,d,r,p;c=v.convertRegionName(c);switch(c){case"south":w=f[1];b=2;break;case"north":w=-f[1];m=-w;b=2;break;case"east":s=f[0];b=1;break;case"west":s=-f[0];a=-s;b=1;break;case"northeast":w=-f[1];m=-w;s=f[0];h=[o.x,o.y+o.height];b=3;break;case"southeast":w=f[1];s=f[0];h=[o.x,o.y];b=3;break;case"southwest":s=-f[0];a=-s;w=f[1];h=[o.x+o.width,o.y];b=3;break;case"northwest":w=-f[1];m=-w;s=-f[0];a=-s;h=[o.x+o.width,o.y+o.height];b=3;break}d={width:o.width+s,height:o.height+w,x:o.x+a,y:o.y+m};j=Ext.Number.snap(d.width,v.widthIncrement);t=Ext.Number.snap(d.height,v.heightIncrement);if(j!==d.width||t!==d.height){switch(c){case"northeast":d.y-=t-d.height;break;case"north":d.y-=t-d.height;break;case"southwest":d.x-=j-d.width;break;case"west":d.x-=j-d.width;break;case"northwest":d.x-=j-d.width;d.y-=t-d.height}d.width=j;d.height=t}if(d.width<v.minWidth||d.width>v.maxWidth){d.width=Ext.Number.constrain(d.width,v.minWidth,v.maxWidth);if(a){d.x=o.x+(o.width-d.width)}}else{v.lastX=d.x}if(d.height<v.minHeight||d.height>v.maxHeight){d.height=Ext.Number.constrain(d.height,v.minHeight,v.maxHeight);if(m){d.y=o.y+(o.height-d.height)}}else{v.lastY=d.y}if(v.preserveRatio||u.shiftKey){g=v.startBox.width/v.startBox.height;r=Math.min(Math.max(v.minHeight,d.width/g),v.maxHeight);p=Math.min(Math.max(v.minWidth,d.height*g),v.maxWidth);if(b===1){d.height=r}else{if(b===2){d.width=p}else{y=Math.abs(h[0]-this.lastXY[0])/Math.abs(h[1]-this.lastXY[1]);if(y>g){d.height=r}else{d.width=p}if(c==="northeast"){d.y=o.y-(d.height-o.height)}else{if(c==="northwest"){d.y=o.y-(d.height-o.height);d.x=o.x-(d.width-o.width)}else{if(c==="southwest"){d.x=o.x-(d.width-o.width)}}}}}}v.setPosition=d.x!==v.startBox.x||d.y!==v.startBox.y;v.resize(d,q)},resize:function(a,c){var f=this,b,d=f.setPosition;if(f.dynamic||(!f.dynamic&&c)){if(d){f.target.setBox(a)}else{f.target.setSize(a.width,a.height)}}if(!c){b=f.getProxy();if(b&&b!==f.target){if(d||f.hideProxy){b.setBox(a)}else{b.setSize(a.width,a.height)}}}},onEnd:function(a){this.updateDimensions(a,true);if(this.proxy&&this.hideProxy){this.proxy.hide()}},convertRegionName:function(a){return a}},1,0,0,0,0,0,[Ext.resizer,"ResizeTracker"],0));(Ext.cmd.derive("Ext.resizer.Resizer",Ext.Base,{alternateClassName:"Ext.Resizable",handleCls:"x-resizable-handle",overCls:"x-resizable-handle-over",pinnedCls:"x-resizable-pinned",wrapCls:"x-resizable-wrap",wrappedCls:"x-resizable-wrapped",delimiterRe:/(?:\s*[,;]\s*)|\s+/,dynamic:true,handles:"s e se",height:null,width:null,heightIncrement:0,widthIncrement:0,minHeight:20,minWidth:20,maxHeight:10000,maxWidth:10000,pinned:false,preserveRatio:false,transparent:false,possiblePositions:{n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"},ariaRole:"presentation",constructor:function(q){var d=this,g=d.handles,c=Ext.dom.Element.unselectableCls,r=[],f,s,o,m,a,u,j,p,v,t,h,b;if(Ext.isString(q)||Ext.isElement(q)||q.dom){f=q;q=arguments[1]||{};q.target=f}d.mixins.observable.constructor.call(d,q);f=d.target;if(f){if(f.isComponent){f.addClsWithUI("resizable");if(f.minWidth){d.minWidth=f.minWidth}if(f.minHeight){d.minHeight=f.minHeight}if(f.maxWidth){d.maxWidth=f.maxWidth}if(f.maxHeight){d.maxHeight=f.maxHeight}if(f.floating){if(!d.hasOwnProperty("handles")){d.handles="n ne e se s sw w nw"}}d.el=f.getEl()}else{f=d.el=d.target=Ext.get(f)}}else{f=d.target=d.el=Ext.get(d.el)}d.el.addCls(Ext.Component.prototype.borderBoxCls);if(Ext.isNumber(d.width)){d.width=Ext.Number.constrain(d.width,d.minWidth,d.maxWidth)}if(Ext.isNumber(d.height)){d.height=Ext.Number.constrain(d.height,d.minHeight,d.maxHeight)}if(d.width!==null||d.height!==null){d.target.setSize(d.width,d.height)}m=d.el.dom.tagName.toUpperCase();if(m==="TEXTAREA"||m==="IMG"||m==="TABLE"){d.originalTarget=d.target;t=f.isComponent?f.getEl():f;d.el.addCls(d.wrappedCls);d.target=d.el=d.el.wrap({role:"presentation",cls:d.wrapCls,id:d.el.id+"-rzwrap",style:t.getStyle(["margin-top","margin-bottom"])});h=t.getPositioning();d.el.setPositioning(h);t.clearPositioning();v=t.getBox();if(h.position!=="absolute"){v.x=0;v.y=0}d.el.setBox(v);t.setStyle("position","absolute");d.isTargetWrapped=true}d.el.position();if(d.pinned){d.el.addCls(d.pinnedCls)}d.resizeTracker=new Ext.resizer.ResizeTracker({disabled:d.disabled,target:f,el:d.el,constrainTo:d.constrainTo,handleCls:d.handleCls,overCls:d.overCls,throttle:d.throttle,proxy:d.originalTarget?d.el:null,dynamic:d.originalTarget?true:d.dynamic,originalTarget:d.originalTarget,delegate:"."+d.handleCls,preserveRatio:d.preserveRatio,heightIncrement:d.heightIncrement,widthIncrement:d.widthIncrement,minHeight:d.minHeight,maxHeight:d.maxHeight,minWidth:d.minWidth,maxWidth:d.maxWidth});d.resizeTracker.on({mousedown:d.onBeforeResize,drag:d.onResize,dragend:d.onResizeEnd,scope:d});if(d.handles==="all"){d.handles="n s e w ne nw se sw"}g=d.handles=d.handles.split(d.delimiterRe);o=d.possiblePositions;a=g.length;s=d.handleCls+" "+d.handleCls+"-{0}";if(d.target.isComponent){b=d.target.baseCls;s+=" "+b+"-handle "+b+"-handle-{0}";if(Ext.supports.CSS3BorderRadius){s+=" "+b+"-handle-{0}-br"}}for(u=0;u<a;u++){if(g[u]&&o[g[u]]){j=o[g[u]];r.push('<div id="',d.el.id,"-",j,'-handle" class="',Ext.String.format(s,j)," ",c,'" unselectable="on" role="presentation"',"></div>")}}Ext.DomHelper.append(d.el,r.join(""));r.length=0;for(u=0;u<a;u++){if(g[u]&&o[g[u]]){j=o[g[u]];p=d[j]=d.el.getById(d.el.id+"-"+j+"-handle");r.push(p);p.region=j;if(d.transparent){p.setOpacity(0)}}}d.resizeTracker.handleEls=r},disable:function(){this.resizeTracker.disable()},enable:function(){this.resizeTracker.enable()},onBeforeResize:function(a,b){return this.fireResizeEvent("beforeresize",a,b)},onResize:function(a,b){return this.fireResizeEvent("resizedrag",a,b)},onResizeEnd:function(a,b){return this.fireResizeEvent("resize",a,b)},fireResizeEvent:function(c,a,b){var f=this,d;if(f.hasListeners[c]){d=f.el.getBox();return f.fireEvent(c,f,d.width,d.height,b)}},resizeTo:function(c,b){var a=this;a.target.setSize(c,b);a.fireEvent("resize",a,c,b,null)},getEl:function(){return this.el},getTarget:function(){return this.target},destroy:function(){var g=this,f,d=g.handles,b=d.length,c=g.possiblePositions,a;g.resizeTracker.destroy();if(g.isTargetWrapped){g.target.destroy()}for(f=0;f<b;f++){if((a=g[c[d[f]]])){a.destroy()}}g.callParent()}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.resizer,"Resizer",Ext,"Resizable"],0));(Ext.cmd.derive("Ext.toolbar.Fill",Ext.Component,{alternateClassName:"Ext.Toolbar.Fill",ariaRole:"presentation",isFill:true,flex:1},0,["tbfill"],["component","box","tbfill"],{component:true,box:true,tbfill:true},["widget.tbfill"],0,[Ext.toolbar,"Fill",Ext.Toolbar,"Fill"],0));(Ext.cmd.derive("metExploreViz.view.button.buttonImportMapping.ButtonImportMappingController",Ext.app.ViewController,{init:function(){var a=this,c=a.getViewModel(),b=a.getView();b.lookupReference("importMappingHidden").on({change:function(){metExploreD3.GraphUtils.handleFileSelect(b.lookupReference("importMappingHidden").fileInputEl.dom,a.loadData)},scope:a});b.on({reloadMapping:function(){b.reset()},scope:a})},loadData:function(f,b){var j=f;f=f.replace(/\r/g,"");var d=f.split("\n");var c=d.splice(0,1);c=c[0].split("\t");var m=c.splice(0,1);var a=[];if(m[0]=="reactionDBIdentifier"||m[0]=="metaboliteDBIdentifier"||m[0]=="reactionId"||m[0]=="metaboliteId"||m[0]=="inchi"){var g=new Mapping(b,c,m[0],a);_metExploreViz.addMapping(g);for(var h=d.length-1;h>=0;h--){d[h]=d[h].split("\t")}metExploreD3.GraphMapping.mapNodeData(g,d);metExploreD3.fireEventArg("selectMappingVisu","jsonmapping",g)}else{metExploreD3.displayWarning("Syntaxe error",'File have bad syntax. See <a href="http://metexplore.toulouse.inra.fr/metexploreViz/doc/documentation.php#import">MetExploreViz documentation</a>.')}}},0,0,0,0,["controller.buttonImportMapping"],0,[metExploreViz.view.button.buttonImportMapping,"ButtonImportMappingController"],0));(Ext.cmd.derive("metExploreViz.view.button.buttonImportMapping.ButtonImportMapping",Ext.form.Panel,{controller:"buttonImportMapping",hideLabel:true,items:[{xtype:"filefield",name:"fileData",buttonOnly:true,id:"IDimport",reference:"importMappingHidden",buttonConfig:{id:"IDimportMapping"}}]},0,["buttonImportMapping"],["component","box","container","panel","form","buttonImportMapping"],{component:true,box:true,container:true,panel:true,form:true,buttonImportMapping:true},["widget.buttonImportMapping"],0,[metExploreViz.view.button.buttonImportMapping,"ButtonImportMapping"],0));(Ext.cmd.derive("metExploreViz.view.button.buttonImportSideCompounds.ButtonImportSideCompoundsController",Ext.app.ViewController,{init:function(){var a=this,c=a.getViewModel(),b=a.getView();b.lookupReference("importSideCompoundsHidden").on({change:function(){metExploreD3.GraphUtils.handleFileSelect(b.lookupReference("importSideCompoundsHidden").fileInputEl.dom,a.loadData)},scope:a})},loadData:function(b){var c=b.split("\n");var a=metExploreD3.GraphNode.loadSideCompounds(c);if(a){metExploreD3.displayMessage("MetExploreViz","Side compounds are imported!")}else{metExploreD3.displayMessage("MetExploreViz Warning","Side compounds not found!")}}},0,0,0,0,["controller.buttonImportSideCompounds"],0,[metExploreViz.view.button.buttonImportSideCompounds,"ButtonImportSideCompoundsController"],0));(Ext.cmd.derive("metExploreViz.view.button.buttonImportSideCompounds.ButtonImportSideCompounds",Ext.form.Panel,{controller:"buttonImportSideCompounds",hideLabel:true,items:[{xtype:"filefield",name:"fileData",buttonOnly:true,id:"IDimportSC",reference:"importSideCompoundsHidden",buttonConfig:{id:"IDimportSideCompounds"}}]},0,["buttonImportSideCompounds"],["component","box","container","panel","form","buttonImportSideCompounds"],{component:true,box:true,container:true,panel:true,form:true,buttonImportSideCompounds:true},["widget.buttonImportSideCompounds"],0,[metExploreViz.view.button.buttonImportSideCompounds,"ButtonImportSideCompounds"],0));(Ext.cmd.derive("metExploreViz.view.button.buttonImportToNetwork.ButtonImportToNetworkController",Ext.app.ViewController,{init:function(){var a=this,c=a.getViewModel(),b=a.getView();b.lookupReference("importNetwork").on({change:function(){metExploreD3.GraphUtils.handleFileSelect(b.lookupReference("importNetwork").fileInputEl.dom,metExploreD3.GraphPanel.refreshPanel)},scope:a});b.on({reloadMapping:a.reloadMapping,scope:a})},reloadMapping:function(f){if(_metExploreViz.getMappingsLength()!=0){var p=Ext.getCmp("comparisonSidePanel");if(p!=undefined){var h=Ext.getCmp("selectMappingVisu");var b=h.getStore();b.loadData([],false);h.clearValue();var g=[];console.log(f);if(f){var j=_metExploreViz.getMappingsSet();j.forEach(function(q){g.push(new Ext.data.Record({name:q.getName()}));b.each(function(r){g.push(new Ext.data.Record({name:r.getData().name}))})});b.loadData(g,false)}if(b.getCount()==0){h.setDisabled(true)}}}var o=Ext.getCmp("selectCondition");var d=Ext.getCmp("addCondition");var c=Ext.getCmp("selectConditionType");if(d!=undefined&&selectCondition!=undefined&&c!=undefined){o.clearValue();d.setDisabled(true);d.setTooltip("You must choose a condition to add it");o.setDisabled(true);c.setDisabled(true)}var a=_metExploreViz.getSessionById("viz");var m=this}},0,0,0,0,["controller.buttonImportToNetwork"],0,[metExploreViz.view.button.buttonImportToNetwork,"ButtonImportToNetworkController"],0));(Ext.cmd.derive("metExploreViz.view.button.buttonImportToNetwork.ButtonImportToNetwork",Ext.form.Panel,{controller:"buttonImportToNetwork",text:"Import mapping from tab file",items:[{xtype:"filefield",name:"fileData",buttonOnly:true,height:"100%",width:"100px",reference:"importNetwork",buttonConfig:{id:"IDimportNetwork"}}],hideLabel:true},0,["buttonImportToNetwork"],["component","box","container","panel","form","buttonImportToNetwork"],{component:true,box:true,container:true,panel:true,form:true,buttonImportToNetwork:true},["widget.buttonImportToNetwork"],0,[metExploreViz.view.button.buttonImportToNetwork,"ButtonImportToNetwork"],0));(Ext.cmd.derive("metExploreViz.view.form.MappingCaptionForm",Ext.panel.Panel,{region:"north",margins:"0 0 0 0",border:false},0,["mappingCaptionForm"],["component","box","container","panel","mappingCaptionForm"],{component:true,box:true,container:true,panel:true,mappingCaptionForm:true},["widget.mappingCaptionForm"],0,[metExploreViz.view.form,"MappingCaptionForm"],0));(Ext.cmd.derive("metExploreViz.view.form.SelectConditionType",Ext.form.field.ComboBox,{store:{fields:["name"],data:[{name:"Continuous"},{name:"Discrete"},{name:"Flux"}]},listeners:{render:function(a){new Ext.ToolTip({target:a.getEl(),html:"Select a type of data"})},change:function(){console.log("change");var a=Ext.getCmp("selectCondition");a.clearValue()}},displayField:"name",valueField:"name",queryMode:"local",editable:false,emptyText:"-- Type of data --",margin:"5 0 5 0",anyMatch:true},0,["selectConditionType"],["component","box","field","textfield","pickerfield","combobox","combo","selectConditionType"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,selectConditionType:true},["widget.selectConditionType"],0,[metExploreViz.view.form,"SelectConditionType"],0));(Ext.cmd.derive("metExploreViz.view.form.SelectDisplayMetaboliteLabel",Ext.form.ComboBox,{fieldLabel:"Metabolite label",displayField:"name",valueField:"value",queryMode:"local",multiSelect:false,editable:false,margin:"5 5 5 5",width:"100%",store:{fields:["name","value"],data:[{name:"Database identifier",value:"dbIdentifier"},{name:"Name",value:"name"}]},emptyText:"-- Select Display Metabolite Label --"},0,["selectDisplayMetaboliteLabel"],["component","box","field","textfield","pickerfield","combobox","combo","selectDisplayMetaboliteLabel"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,selectDisplayMetaboliteLabel:true},["widget.selectDisplayMetaboliteLabel"],0,[metExploreViz.view.form,"SelectDisplayMetaboliteLabel"],0));(Ext.cmd.derive("metExploreViz.view.form.SelectDisplayReactionLabel",Ext.form.ComboBox,{fieldLabel:"Reaction label",displayField:"name",valueField:"value",queryMode:"local",multiSelect:false,editable:false,margin:"5 5 5 5",width:"100%",store:{fields:["name","value"],data:[{name:"EC",value:"ec"},{name:"Database identifier",value:"dbIdentifier"},{name:"Name",value:"name"}]},emptyText:"-- Select Display Reaction Label --"},0,["selectDisplayReactionLabel"],["component","box","field","textfield","pickerfield","combobox","combo","selectDisplayReactionLabel"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,selectDisplayReactionLabel:true},["widget.selectDisplayReactionLabel"],0,[metExploreViz.view.form,"SelectDisplayReactionLabel"],0));(Ext.cmd.derive("metExploreViz.view.form.generalStyleForm.GeneralStyleFormController",Ext.app.ViewController,{init:function(){var a=this,c=a.getViewModel(),b=a.getView();b.on({setGeneralStyle:function(){var d=_metExploreViz.getGeneralStyle();b.lookupReference("chooseMaxNodes").setValue(d.getReactionThreshold());b.lookupReference("chooseDisplayForOpt").items.get("name").setValue(d.isDisplayedLabelsForOpt());b.lookupReference("chooseDisplayForOpt").items.get("links").setValue(d.isDisplayedLinksForOpt())},scope:a});b.lookupReference("refreshGeneralConf").on({click:function(){var m=metExploreD3.getGeneralStyle();var f=false;var g=b.lookupReference("chooseMaxNodes").getValue();var j=((!isNaN(g)&&g>0)?g:m.getReactionThreshold());var h=b.lookupReference("chooseDisplayForOpt").items.get("name").getValue();var d=b.lookupReference("chooseDisplayForOpt").items.get("links").getValue();if((j!=m.getReactionThreshold())||(h!=m.isDisplayedLabelsForOpt())||(d!=m.isDisplayedLinksForOpt())){f=true;if(d!=m.isDisplayedLinksForOpt()){if(!d){metExploreD3.GraphLink.reloadLinks("viz",_metExploreViz.getSessionById("viz").getD3Data(),metExploreD3.getLinkStyle(),metExploreD3.getMetaboliteStyle())}else{d3.selectAll("path.link").remove()}metExploreD3.GraphLink.tick("viz",metExploreD3.getScaleById("viz"))}m.setReactionThreshold(parseFloat(j));m.setDisplayLabelsForOpt(h);m.setDisplayLinksForOpt(d)}},scope:a});b.lookupReference("chooseMaxNodes").on({afterrender:function(f){var d=metExploreD3.getGeneralStyle();b.lookupReference("chooseMaxNodes").setValue(d.getReactionThreshold())},scope:a});b.lookupReference("chooseDisplayForOpt").items.get("name").on({afterrender:function(f){var d=metExploreD3.getGeneralStyle();b.lookupReference("chooseDisplayForOpt").items.get("name").setValue(d.isDisplayedLabelsForOpt())},scope:a});b.lookupReference("chooseDisplayForOpt").items.get("links").on({afterrender:function(f){var d=metExploreD3.getGeneralStyle();b.lookupReference("chooseDisplayForOpt").items.get("links").setValue(d.isDisplayedLinksForOpt())},scope:a})}},0,0,0,0,["controller.form-generalStyleForm-generalStyleForm"],0,[metExploreViz.view.form.generalStyleForm,"GeneralStyleFormController"],0));(Ext.cmd.derive("metExploreViz.view.form.generalStyleForm.GeneralStyleForm",Ext.panel.Panel,{controller:"form-generalStyleForm-generalStyleForm",region:"north",margin:"0 0 0 0",flex:1,width:"100%",border:false,autoScroll:true,layout:{type:"vbox",align:"stretch"},items:[{xtype:"textfield",reference:"chooseMaxNodes",margin:"5 5 5 5",fieldLabel:"Threshold of reactions for optimization :",displayField:"threshold",editable:true,margin:"5 5 5 5",width:"100%",listeners:{change:function(b,a){this.lastValue=b}}},{xtype:"fieldcontainer",fieldLabel:"Remove on visualisation ",reference:"chooseDisplayForOpt",margin:"5 5 5 5",defaultType:"checkboxfield",items:[{boxLabel:"Name on nodes",name:"display",inputValue:"1",checked:true,id:"name"},{boxLabel:"Links",name:"display",inputValue:"2",checked:true,id:"links"}]},{xtype:"button",iconCls:"refresh",margin:"5 5 5 0",reference:"refreshGeneralConf",action:"refreshGeneralConf"}]},0,["generalStyleForm"],["component","box","container","panel","generalStyleForm"],{component:true,box:true,container:true,panel:true,generalStyleForm:true},["widget.generalStyleForm"],0,[metExploreViz.view.form.generalStyleForm,"GeneralStyleForm"],0));(Ext.cmd.derive("metExploreViz.view.form.metaboliteStyleForm.MetaboliteStyleFormController",Ext.app.ViewController,{init:function(){var a=this,c=a.getViewModel(),b=a.getView();b.on({setMetaboliteStyle:function(){var d=metExploreD3.getMetaboliteStyle();b.lookupReference("chooseHeightMetabolite").setValue(d.getHeight());b.lookupReference("chooseWidthMetabolite").setValue(d.getWidth());b.lookupReference("chooseRxMetabolite").setValue(d.getRX());b.lookupReference("chooseRyMetabolite").setValue(d.getRY());b.lookupReference("chooseStrokeMetabolite").setValue(d.getStrokeWidth());Ext.getCmp("selectDisplayMetaboliteLabel").setValue(d.getLabel())},scope:a});b.lookupReference("refreshMetaboliteStyle").on({click:function(){var p=metExploreD3.getMetaboliteStyle();var t=false;var u=b.lookupReference("chooseHeightMetabolite").getValue();var g=((!isNaN(u)&&u>0&&u<200)?u:p.getHeight());var s=b.lookupReference("chooseWidthMetabolite").getValue();var m=(!isNaN(s)&&s>0&&s<200)?s:p.getWidth();var d=b.lookupReference("chooseStrokeMetabolite").getValue();var q=(!isNaN(d)&&d>0&&d<200)?d:p.getStrokeWidth();var r=b.lookupReference("chooseRxMetabolite").getValue();var o=(!isNaN(r)&&r>=-100&&r<200)?r:p.getRX();var j=b.lookupReference("chooseRyMetabolite").getValue();var f=(!isNaN(j)&&j>=0&&j<200)?j:p.getRY();var h=b.lookupReference("selectDisplayMetaboliteLabel").getValue();if(h!=p.getLabel()||(g!=p.getHeight())||(m!=p.getWidth())||(q!=p.getStrokeWidth())||(o!=p.getRX())||(f!=p.getRY())){console.log("ok");t=true;p.setHeight(parseFloat(g));p.setWidth(parseFloat(m));p.setStrokeWidth(parseFloat(q));p.setRX(parseFloat(o));p.setRY(parseFloat(f));p.setLabel(h)}if(t){metExploreD3.GraphNode.refreshStyleOfMetabolite();metExploreD3.GraphCaption.refreshStyleOfMetabolite()}},scope:a});b.lookupReference("chooseHeightMetabolite").on({afterrender:function(f){var d=metExploreD3.getMetaboliteStyle();b.lookupReference("chooseHeightMetabolite").setValue(d.getHeight())},change:function(d,f,g){if(!isNaN(f)&&f>0&&f<200){a.changeHeight(f)}},scope:a});b.lookupReference("chooseWidthMetabolite").on({afterrender:function(f){var d=metExploreD3.getMetaboliteStyle();b.lookupReference("chooseWidthMetabolite").setValue(d.getWidth())},change:function(d,f,g){if(!isNaN(f)&&f>0&&f<200){a.changeWidth(f)}},scope:a});b.lookupReference("chooseStrokeMetabolite").on({afterrender:function(f){var d=metExploreD3.getMetaboliteStyle();b.lookupReference("chooseStrokeMetabolite").setValue(d.getStrokeWidth())},change:function(d,f,g){if(!isNaN(f)&&f>0&&f<200){a.changeStroke(f)}},scope:a});b.lookupReference("chooseRxMetabolite").on({afterrender:function(f){var d=metExploreD3.getMetaboliteStyle();b.lookupReference("chooseRxMetabolite").setValue(d.getRX())},change:function(d,f,g){if(!isNaN(f)&&f>=0&&f<200){a.changeRx(f)}},scope:a});b.lookupReference("chooseRyMetabolite").on({afterrender:function(f){var d=metExploreD3.getMetaboliteStyle();b.lookupReference("chooseRyMetabolite").setValue(d.getRY())},change:function(d,f,g){if(!isNaN(f)&&f>=0&&f<200){a.changeRy(f)}},scope:a});this.control({metaboliteStyleForm:{show:function(){this.displayNode()}},selectDisplayMetaboliteLabel:{afterrender:function(f){var d=metExploreD3.getMetaboliteStyle();f.setValue(d.getLabel())},change:function(f,d,g){a.changeLabel(d)}}})},changeHeight:function(a){if(d3.select("#vizExempleMetabolite").select("#D3vizExemple")[0][0]!=null){var b=d3.select("#vizExempleMetabolite").select("#D3vizExemple");b.select("g.node").select("rect").attr("height",a);b.select("g.node").select("text").attr("y",a)}},changeWidth:function(a){if(d3.select("#vizExempleMetabolite").select("#D3vizExemple")[0][0]!=null){var b=d3.select("#vizExempleMetabolite").select("#D3vizExemple");b.select("g.node").select("rect").attr("width",a)}},changeStroke:function(b){if(d3.select("#vizExempleMetabolite").select("#D3vizExemple")[0][0]!=null){var a=d3.select("#vizExempleMetabolite").select("#D3vizExemple");a.select("g.node").select("rect").style("stroke-width",b)}},changeRx:function(b){if(d3.select("#vizExempleMetabolite").select("#D3vizExemple")[0][0]!=null){var a=d3.select("#vizExempleMetabolite").select("#D3vizExemple");a.select("g.node").select("rect").attr("rx",b)}},changeRy:function(b){if(d3.select("#vizExempleMetabolite").select("#D3vizExemple")[0][0]!=null){var a=d3.select("#vizExempleMetabolite").select("#D3vizExemple");a.select("g.node").select("rect").attr("ry",b)}},changeLabel:function(b){var a=metExploreD3.getMetaboliteStyle();if(d3.select("#vizExempleMetabolite").select("#D3vizExemple")[0][0]!=null){var c=d3.select("#vizExempleMetabolite").select("#D3vizExemple");c.select("g.node").select("text").text(function(f){var d=$("<div/>").html(b).text();if(d==""){var d=$("<div/>").html(b).text()}return d})}},displayNode:function(){if(d3.select("#vizExempleMetabolite").select("#D3vizExemple")[0][0]!=null){d3.select("#vizExempleMetabolite").select("#D3vizExemple").selectAll("*").remove();var f=d3.select("#vizExempleMetabolite").select("#D3vizExemple")}else{var f=d3.select("#vizExempleMetabolite").append("svg").attr("width","100%").attr("height","100%").attr("class","D3vizExemple").attr("id","D3vizExemple")}var g=metExploreD3.getMetaboliteStyle();var d=this;var c=d3.behavior.zoom().scaleExtent([0.1,20]).on("zoom",function(h){d.zoom()});f=f.call(c).attr("pointer-events","all").append("svg:g").attr("class","graphComponent").attr("id","graphComponent");var b=parseInt(d3.select("#vizExempleMetabolite").style("height"));var a=parseInt(d3.select("#vizExempleMetabolite").style("width"));f.append("svg:g").attr("class","node").style("fill","white").attr("cx",a/2).attr("cy",b/2).attr("transform","translate("+a/2+","+b/2+")").append("rect").attr("width",g.getWidth()).attr("height",g.getHeight()).attr("rx",g.getRX()).attr("ry",g.getRY()).attr("transform","translate(-"+g.getWidth()/2+",-"+g.getHeight()/2+")").style("stroke",g.getStrokeColor()).style("stroke-width",g.getStrokeWidth());var j=Math.min(g.getWidth(),g.getHeight());f.select("g.node").append("svg:text").attr("class","metabolite").attr("id","metabolite").attr("fill","black").text(function(m){var h=$("<div/>").html(g.getLabel()).text();if(h==""){var h=$("<div/>").html(g.getLabel()).text()}return h}).style("font-size",g.getFontSize()).style("paint-order","stroke").style("stroke-width","1").style("stroke","white").style("stroke-opacity","0.7").attr("dy",".4em").style("font-weight","bold").attr("y",g.getHeight())},zoom:function(a){d3.select("#vizExempleMetabolite").select("#D3vizExemple").select("#graphComponent").attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}},0,0,0,0,["controller.form-metaboliteStyleForm-metaboliteStyleForm"],0,[metExploreViz.view.form.metaboliteStyleForm,"MetaboliteStyleFormController"],0));(Ext.cmd.derive("metExploreViz.view.form.metaboliteStyleForm.MetaboliteStyleForm",Ext.panel.Panel,{controller:"form-metaboliteStyleForm-metaboliteStyleForm",region:"north",height:"100%",width:"100%",margin:"0 0 0 0",flex:1,border:false,autoScroll:true,layout:{type:"vbox",align:"stretch"},items:[{id:"selectDisplayMetaboliteLabel",reference:"selectDisplayMetaboliteLabel",xtype:"selectDisplayMetaboliteLabel"},{xtype:"textfield",reference:"chooseStrokeMetabolite",margin:"5 5 5 5",fieldLabel:"Stroke width:",displayField:"stroke",editable:true,margin:"5 5 5 5",width:"100%",listeners:{change:function(b,a){this.lastValue=b}}},{xtype:"textfield",scale:"small",reference:"chooseHeightMetabolite",margin:"5 5 5 5",fieldLabel:"Height :",displayField:"height",editable:true,margin:"5 5 5 5",width:"100%",listeners:{change:function(b,a){this.lastValue=b}}},{xtype:"textfield",reference:"chooseWidthMetabolite",margin:"5 5 5 5",fieldLabel:"Width :",displayField:"width",editable:true,margin:"5 5 5 5",width:"100%",listeners:{change:function(b,a){this.lastValue=b}}},{xtype:"textfield",reference:"chooseRxMetabolite",margin:"5 5 5 5",fieldLabel:"Rx :",displayField:"rx",editable:true,margin:"5 5 5 5",width:"100%",listeners:{change:function(b,a){this.lastValue=b}}},{xtype:"textfield",reference:"chooseRyMetabolite",margin:"5 5 5 5",fieldLabel:"Ry :",displayField:"ry",editable:true,margin:"5 5 5 5",width:"100%",listeners:{change:function(b,a){this.lastValue=b}}},{xtype:"menuseparator"},{layout:{type:"hbox",align:"center",pack:"center"},items:[{id:"vizExempleMetabolite",xtype:"panel",margins:"0 0 0 0",closable:false,region:"center",height:100,width:100,flex:1,split:true}]},{xtype:"button",iconCls:"refresh",margin:"5 5 5 0",reference:"refreshMetaboliteStyle",action:"refreshMetaboliteStyle"}]},0,["metaboliteStyleForm"],["component","box","container","panel","metaboliteStyleForm"],{component:true,box:true,container:true,panel:true,metaboliteStyleForm:true},["widget.metaboliteStyleForm"],0,[metExploreViz.view.form.metaboliteStyleForm,"MetaboliteStyleForm"],0));(Ext.cmd.derive("metExploreViz.view.form.reactionStyleForm.ReactionStyleFormController",Ext.app.ViewController,{init:function(){var a=this,c=a.getViewModel(),b=a.getView();b.on({setReactionStyle:function(){var d=metExploreD3.getReactionStyle();b.lookupReference("chooseHeightReaction").setValue(d.getHeight());b.lookupReference("chooseWidthReaction").setValue(d.getWidth());b.lookupReference("chooseRxReaction").setValue(d.getRX());b.lookupReference("chooseRyReaction").setValue(d.getRY());b.lookupReference("chooseStrokeReaction").setValue(d.getStrokeWidth());b.down("#hiddenColor").lastValue=d.getStrokeColor();metExploreD3.fireEventArg("chooseStrokeColorReactionPicker","change",d.getStrokeColor());Ext.getCmp("selectDisplayReactionLabel").setValue(d.getLabel())},scope:a});b.lookupReference("refreshReactionStyle").on({click:function(){var r=metExploreD3.getReactionStyle();var t=false;var u=b.lookupReference("chooseHeightReaction").getValue();var d=((!isNaN(u)&&u>0&&u<200)?u:r.getHeight());var m=b.down("#hiddenColor").lastValue;var s=(m!="init"?m:r.getStrokeColor());var o=b.lookupReference("chooseWidthReaction").getValue();var p=(!isNaN(o)&&o>0&&o<200)?o:r.getWidth();var v=b.lookupReference("chooseStrokeReaction").getValue();var q=(!isNaN(v)&&v>0&&v<200)?v:r.getStrokeWidth();var j=b.lookupReference("chooseRxReaction").getValue();var h=(!isNaN(j)&&j>=0&&j<200)?j:r.getRX();var g=b.lookupReference("chooseRyReaction").getValue();var w=(!isNaN(g)&&g>=0&&g<200)?g:r.getRY();var f=b.lookupReference("selectDisplayReactionLabel").getValue();if(f!=r.getLabel()||(d!=r.getHeight())||(p!=r.getWidth())||(q!=r.getStrokeWidth())||(h!=r.getRX())||(w!=r.getRY())||(s!=r.getStrokeColor())){t=true;r.setStrokeColor(s);r.setHeight(parseFloat(d));r.setWidth(parseFloat(p));r.setStrokeWidth(parseFloat(q));r.setRX(parseFloat(h));r.setRY(parseFloat(w));r.setLabel(f)}if(t){metExploreD3.GraphNode.refreshStyleOfReaction();metExploreD3.GraphCaption.refreshStyleOfReaction()}},scope:a});b.lookupReference("chooseHeightReaction").on({afterrender:function(d){var f=metExploreD3.getReactionStyle();b.lookupReference("chooseHeightReaction").setValue(f.getHeight())},change:function(d,f,g){if(!isNaN(f)&&f>0&&f<200){a.changeHeight(f)}},scope:a});b.lookupReference("chooseWidthReaction").on({afterrender:function(d){var f=metExploreD3.getReactionStyle();b.lookupReference("chooseWidthReaction").setValue(f.getWidth())},change:function(d,f,g){if(!isNaN(f)&&f>0&&f<200){a.changeWidth(f)}},scope:a});b.lookupReference("chooseRxReaction").on({afterrender:function(d){var f=metExploreD3.getReactionStyle();b.lookupReference("chooseRxReaction").setValue(f.getRX())},change:function(d,f,g){if(!isNaN(f)&&f>=0&&f<200){a.changeRx(f)}},scope:a});b.lookupReference("chooseRyReaction").on({afterrender:function(d){var f=metExploreD3.getReactionStyle();b.lookupReference("chooseRyReaction").setValue(f.getRY())},change:function(d,f,g){if(!isNaN(f)&&f>=0&&f<200){a.changeRy(f)}},scope:a});b.lookupReference("chooseStrokeReaction").on({afterrender:function(d){var f=metExploreD3.getReactionStyle();b.lookupReference("chooseStrokeReaction").setValue(f.getStrokeWidth())},change:function(d,f,g){if(!isNaN(f)&&f>0&&f<200){a.changeStroke(f)}},scope:a});b.down("#hiddenColor").on({change:function(f,d){b.down("#hiddenColor").lastValue=f;a.changeStrokeColor(f)},scope:a});this.control({reactionStyleForm:{beforerender:function(){var g=metExploreD3.getReactionStyle();var f=document.createElement("script");f.setAttribute("src",document.location.href.split("index.html")[0]+"resources/lib/jscolor/jscolor.js");document.body.appendChild(f);var d=new Ext.Panel({id:"chooseStrokeColorReactionPicker",border:false,html:"<input size=\"5\" onchange=\"Ext.getCmp('reactionStyleForm').down('#hiddenColor').fireEvent('change', '#'+this.color.valueElement.value, '"+g.getStrokeColor()+"');\" value='"+g.getStrokeColor().split("#")[1]+"'\" class=\"color {pickerFaceColor:'#5FA2DD',pickerPosition:'right', pickerFace:5}\" style=\"border:1px solid #606060; border-radius: 2px;\">"});Ext.getCmp("chooseStrokeColorReaction").add(d)},show:function(){this.displayNode()}},selectDisplayReactionLabel:{afterrender:function(d){var f=metExploreD3.getReactionStyle();d.setValue(f.getLabel())},change:function(f,d,g){a.changeLabel(d)}}})},changeHeight:function(a){if(d3.select("#vizExempleReaction").select("#D3vizExemple")[0][0]!=null){var b=d3.select("#vizExempleReaction").select("#D3vizExemple");b.select("g.node").select("rect").attr("height",a);b.select("g.node").select("text").attr("y",a)}},changeWidth:function(a){if(d3.select("#vizExempleReaction").select("#D3vizExemple")[0][0]!=null){var b=d3.select("#vizExempleReaction").select("#D3vizExemple");b.select("g.node").select("rect").attr("width",a)}},changeStroke:function(b){if(d3.select("#vizExempleReaction").select("#D3vizExemple")[0][0]!=null){var a=d3.select("#vizExempleReaction").select("#D3vizExemple");a.select("g.node").select("rect").style("stroke-width",b)}},changeStrokeColor:function(b){if(d3.select("#vizExempleReaction").select("#D3vizExemple")[0][0]!=null){var a=d3.select("#vizExempleReaction").select("#D3vizExemple");a.select("g.node").select("rect").style("stroke",b)}},changeRx:function(b){if(d3.select("#vizExempleReaction").select("#D3vizExemple")[0][0]!=null){var a=d3.select("#vizExempleReaction").select("#D3vizExemple");a.select("g.node").select("rect").attr("rx",b)}},changeRy:function(b){if(d3.select("#vizExempleReaction").select("#D3vizExemple")[0][0]!=null){var a=d3.select("#vizExempleReaction").select("#D3vizExemple");a.select("g.node").select("rect").attr("ry",b)}},changeLabel:function(d){var c=metExploreD3.getReactionStyle();var b=Math.min(c.getWidth(),c.getHeight());if(d3.select("#vizExempleReaction").select("#D3vizExemple")[0][0]!=null){var a=d3.select("#vizExempleReaction").select("#D3vizExemple");a.select("g.node").select("text").remove();a.select("g.node").append("svg:text").attr("class","reaction").attr("id","reaction").attr("fill","black").text(function(g){var f=$("<div/>").html(d).text();if(f==""){var f=$("<div/>").html(d).text()}return f}).style("font-size",function(f){return Math.min(2*b,(2*b-2)/this.getComputedTextLength()*10)+"px"}).style("font-weight","bold").attr("dy",".3em")}},displayNode:function(){if(d3.select("#vizExempleReaction").select("#D3vizExemple")[0][0]!=null){d3.select("#vizExempleReaction").select("#D3vizExemple").selectAll("*").remove();var a=d3.select("#vizExempleReaction").select("#D3vizExemple")}else{var a=d3.select("#vizExempleReaction").append("svg").attr("width","100%").attr("height","100%").attr("class","D3vizExemple").attr("id","D3vizExemple")}var c=metExploreD3.getReactionStyle();var g=this;var f=d3.behavior.zoom().scaleExtent([0.1,20]).on("zoom",function(h){g.zoom()});a=a.call(f).attr("pointer-events","all").append("svg:g").attr("class","graphComponent").attr("id","graphComponent");var d=parseInt(d3.select("#vizExempleReaction").style("height"));var b=parseInt(d3.select("#vizExempleReaction").style("width"));a.append("svg:g").attr("class","node").style("fill","white").attr("cx",b/2).attr("cy",d/2).attr("transform","translate("+b/2+","+d/2+")").append("rect").attr("class","example").attr("id","example").attr("width",c.getWidth()).attr("height",c.getHeight()).attr("rx",c.getRX()).attr("ry",c.getRY()).attr("transform","translate(-"+c.getWidth()/2+",-"+c.getHeight()/2+")").style("stroke",c.getStrokeColor()).style("stroke-width",1);a.select("g.node").append("svg:text").attr("class","reaction").attr("id","reaction").attr("fill","black").text(function(j){var h=$("<div/>").html(c.getLabel()).text();if(h==""){var h=$("<div/>").html(c.getLabel()).text()}return h}).style("font-size",function(h){return Math.min(c.getWidth(),(c.getWidth()-c.getWidth()/10)/this.getComputedTextLength()*10)+"px"}).style("font-weight","bold").attr("dy",".3em")},zoom:function(a){d3.select("#vizExempleReaction").select("#D3vizExemple").select("#graphComponent").attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}},0,0,0,0,["controller.form-reactionStyleForm-reactionStyleForm"],0,[metExploreViz.view.form.reactionStyleForm,"ReactionStyleFormController"],0));(Ext.cmd.derive("metExploreViz.view.form.reactionStyleForm.ReactionStyleForm",Ext.panel.Panel,{controller:"form-reactionStyleForm-reactionStyleForm",region:"north",height:"100%",width:"100%",margin:"0 0 0 0",flex:1,border:false,autoScroll:true,layout:{type:"vbox",align:"stretch"},items:[{border:false,id:"chooseStrokeColorReaction",reference:"chooseStrokeColorReaction",xtype:"panel",margin:"5 5 5 5",hidden:true,layout:{type:"hbox",align:"stretch"},items:[{xtype:"label",forId:"color",margin:"0 68 0 0",text:"Color :"},{border:false,xtype:"hiddenfield",itemId:"hiddenColor",value:"init"}]},{reference:"selectDisplayReactionLabel",id:"selectDisplayReactionLabel",xtype:"selectDisplayReactionLabel"},{xtype:"textfield",reference:"chooseStrokeReaction",margin:"5 5 5 5",fieldLabel:"Stroke width:",displayField:"stroke",editable:true,width:"100%",width:"100%",listeners:{change:function(b,a){this.lastValue=b}}},{xtype:"textfield",scale:"small",reference:"chooseHeightReaction",margin:"5 5 5 5",fieldLabel:"Height :",displayField:"height",editable:true,width:"100%",listeners:{change:function(b,a){this.lastValue=b}}},{xtype:"textfield",reference:"chooseWidthReaction",margin:"5 5 5 5",fieldLabel:"Width :",displayField:"width",editable:true,width:"100%",listeners:{change:function(b,a){this.lastValue=b}}},{xtype:"textfield",reference:"chooseRxReaction",margin:"5 5 5 5",fieldLabel:"Rx :",displayField:"rx",editable:true,width:"100%",listeners:{change:function(b,a){this.lastValue=b}}},{xtype:"textfield",reference:"chooseRyReaction",margin:"5 5 5 5",fieldLabel:"Ry :",displayField:"ry",editable:true,width:"100%",listeners:{change:function(b,a){this.lastValue=b}}},{xtype:"menuseparator"},{layout:{type:"hbox",align:"center",pack:"center"},items:[{id:"vizExempleReaction",xtype:"panel",margins:"0 0 0 0",closable:false,region:"center",height:100,width:100,flex:1,split:true}]},{xtype:"button",iconCls:"refresh",margin:"5 5 5 0",reference:"refreshReactionStyle",action:"refreshReactionStyle"}]},0,["reactionStyleForm"],["component","box","container","panel","reactionStyleForm"],{component:true,box:true,container:true,panel:true,reactionStyleForm:true},["widget.reactionStyleForm"],0,[metExploreViz.view.form.reactionStyleForm,"ReactionStyleForm"],0));(Ext.cmd.derive("metExploreViz.view.form.selectCondition.SelectConditionController",Ext.app.ViewController,{init:function(){var a=this,c=a.getViewModel(),b=a.getView()}},0,0,0,0,["controller.form-selectCondition-selectCondition"],0,[metExploreViz.view.form.selectCondition,"SelectConditionController"],0));(Ext.cmd.derive("metExploreViz.view.form.selectCondition.SelectCondition",Ext.form.field.ComboBox,{controller:"form-selectCondition-selectCondition",store:{fields:["name"]},listeners:{render:function(a){new Ext.ToolTip({target:a.getEl(),html:"Select a condition"})}},flex:1,multiSelect:true,displayField:"name",valueField:"name",queryMode:"local",editable:false,emptyText:"-- Select a condition --",margin:"5 0 5 0",anyMatch:true},0,["selectCondition"],["component","box","field","textfield","pickerfield","combobox","combo","selectCondition"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,selectCondition:true},["widget.selectCondition"],0,[metExploreViz.view.form.selectCondition,"SelectCondition"],0));(Ext.cmd.derive("metExploreViz.view.form.selectMapping.SelectMappingController",Ext.app.ViewController,{init:function(){var a=this,c=a.getViewModel(),b=a.getView();b.on({jsonmapping:function(d){a.initMapping(d)},removemapping:function(d){a.removeMapping(d)},change:function(o,f,g){var j=Ext.getCmp("selectConditionForm");if(j!=undefined){_metExploreViz.getSessionById("viz").setActiveMapping(f);j.fireEvent("closeMapping",f);var h=_metExploreViz.getMappingsSet();if(_metExploreViz.getMappingsLength()!=0){var d=_metExploreViz.getMappingByName(f);if(d!=null){var m=d.getConditions();if(d!=undefined){a.fillComboSelectCondition(o,d,g)}}}}},collapse:function(d,g){var f=_metExploreViz.getMappingsSet();if(_metExploreViz.getMappingsLength()!=0){var h=_metExploreViz.getMappingByName(d.getValue());if(h!=undefined){metExploreD3.GraphMapping.mapNodes(h.getName())}}},scope:a})},initMapping:function(a){if(_metExploreViz.getMappingsLength()!=0){var f=Ext.getCmp("comparisonSidePanel");if(f!=undefined){if(f.isHidden()){f.setHidden(false)}f.expand();var b=Ext.getCmp("selectMappingVisu");b.setValue(a.getName());var d=b.getStore();var c=[];c.push(new Ext.data.Record({name:a.getName()}));d.each(function(g){c.push(new Ext.data.Record({name:g.getData().name}))});_metExploreViz.getSessionById("viz").setActiveMapping(a.getName());d.loadData(c,false);if(d.getCount()==1){b.setDisabled(false)}}}},removeMapping:function(a){var f=Ext.getCmp("comparisonSidePanel");if(f!=undefined){if(f.isHidden()){f.setHidden(false)}f.expand();var b=Ext.getCmp("selectMappingVisu");var d=b.getStore();var c=[];d.each(function(g){if(g.getData().name!=a.getName()){c.push(new Ext.data.Record({name:g.getData().name}))}});d.loadData(c,false);b.clearValue();if(d.getCount()==0){b.setDisabled(true)}}},fillComboSelectCondition:function(o,c,f){_metExploreViz.getSessionById("viz").setMapped("false");var a=_metExploreViz.getMappingsSet();var b=c.getConditions();var p=Ext.getCmp("selectCondition");var h=p.getStore();var m=[];for(var j=0;j<b.length;j++){m.push({name:b[j]})}h.loadData(m,false);var g=h.getCount();if(g>=1){p.setDisabled(false)}p.setValue(h[0]);var d=Ext.getCmp("selectConditionType");if(selectCondition!=undefined&&d!=undefined){if(g<1||(g==1&&b[0]=="undefined")){p.clearValue();p.setDisabled(true);d.setDisabled(true)}else{d.setValue(d.getStore().first());p.setDisabled(false);d.setDisabled(false)}}}},0,0,0,0,["controller.form-selectMapping-selectMapping"],0,[metExploreViz.view.form.selectMapping,"SelectMappingController"],0));(Ext.cmd.derive("metExploreViz.view.form.selectMapping.SelectMappingModel",Ext.app.ViewModel,{parent:"selectCondiditionForm",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.form-selectMapping-selectMapping"],0,[metExploreViz.view.form.selectMapping,"SelectMappingModel"],0));(Ext.cmd.derive("metExploreViz.view.form.selectMapping.SelectMapping",Ext.form.field.ComboBox,{controller:"form-selectMapping-selectMapping",viewModel:{type:"form-selectMapping-selectMapping"},store:{fields:["name"]},listeners:{render:function(a){new Ext.ToolTip({target:a.getEl(),html:"Select a mapping"})}},displayField:"name",valueField:"name",width:150,queryMode:"local",multiSelect:false,editable:false,emptyText:"-- Select Mapping --",margin:"5 0 5 0"},0,["selectMapping"],["component","box","field","textfield","pickerfield","combobox","combo","selectMapping"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,selectMapping:true},["widget.selectMapping"],0,[metExploreViz.view.form.selectMapping,"SelectMapping"],0));(Ext.cmd.derive("metExploreViz.view.form.selectConditionForm.SelectConditionFormController",Ext.app.ViewController,{init:function(){var a=this,c=a.getViewModel(),b=a.getView();this.regexpPanel=/\.| |=|\(|\)/g;b.on({afterDiscreteMapping:this.addMappingCaptionForm,scope:a});b.on({afterContinuousMapping:this.addMappingCaptionForm,scope:a});b.on({closeMapping:function(d){a.closeMapping(d)},scope:a});b.on({resetMapping:function(){a.resetMapping()},scope:a});b.on({removeMapping:function(d){a.removeMapping(d)},scope:a});b.on({reset:function(d){},scope:a});b.lookupReference("selectConditionType").on({change:function(f,d,g){if(d!="Flux"){b.lookupReference("opacity").setHidden(true);b.lookupReference("valueonarrow").setHidden(true)}else{b.lookupReference("opacity").setHidden(false);b.lookupReference("valueonarrow").setHidden(false)}},scope:a});b.lookupReference("selectCondition").on({change:function(g,f,h){var d=b.lookupReference("selectConditionType").lastValue;if(d!="Flux"){if(h!=null){var j=f.indexOf(h[0]);if(j!=-1){f.splice(j,1)}b.lookupReference("selectCondition").setValue(f[0])}b.lookupReference("selectCondition").collapse()}else{if(f>2){f.splice(0,1);b.lookupReference("selectCondition").setValue(f)}}},collapse:function(f,h){var g=_metExploreViz.getSessionById("viz");var d=this;if(b.lookupReference("selectCondition").getValue().length>0){if(g.isMapped()!="false"){Ext.Msg.show({title:"Are you sure?",msg:"This action will remove previous mapping. <br />Would you like to do this?",buttons:Ext.Msg.OKCANCEL,fn:function(m){if(m=="ok"){var j="true";a.closeMapping(j);d.map()}},icon:Ext.Msg.QUESTION})}else{this.map()}}},scope:a})},removeMapping:function(a){var p=_metExploreViz.getSessionById("viz");var q=Ext.getCmp("selectConditionForm");if(q!=undefined){var b=p.getActiveMapping();if(b==a.getName()){var h=Ext.getStore("S_Condition");var f=p.isMapped();this.removeGraphMapping(f);if(f!=false&&f!="false"&&f!="none"){if(p.getMappingDataType()=="Continuous"){var d=p.getColorMappingsSet();var o=p.getColorMappingsSetLength()==0;if(!o){d=[]}}if(p.getMappingDataType()=="Flux"||Array.isArray(p.isMapped())){var c=Ext.getCmp("panel"+p.isMapped()[0].replace(this.regexpPanel,""))}else{var c=Ext.getCmp("panel"+p.isMapped().replace(this.regexpPanel,""))}if(c!=undefined){c.close();var d=p.getColorMappingsSet();d.forEach(function(r){var s=r.getName().toString().replace(this.regexpPanel,"_");if(Ext.getCmp("selectConditionForm").down("#mappingCaptionForm"+s)!=null){Ext.getCmp("selectConditionForm").down("#mappingCaptionForm"+s).close()}});if(Ext.getCmp("selectConditionForm").down("#undefined")!=null){Ext.getCmp("selectConditionForm").down("#undefined").close()}}}p.setMapped("false");var m=Ext.getCmp("selectCondition");var h=m.getStore();var j=[];h.loadData(j,false);var g=Ext.getCmp("selectConditionType");m.clearValue();m.setDisabled(true);g.setDisabled(true)}metExploreD3.fireEventArg("selectMappingVisu","removemapping",a);_metExploreViz.removeMapping(a.getId())}},resetMapping:function(c){var p=_metExploreViz.getSessionById("viz");var r=Ext.getCmp("selectConditionForm");if(r!=undefined){var d=Ext.getStore("S_Condition");var q=p.isMapped();this.removeGraphMapping(q);if(p.getMappingDataType()=="Continuous"){var o=p.getColorMappingsSet();var m=p.getColorMappingsSetLength()==0;if(!m){o=[]}}if(p.getMappingDataType()=="Flux"||Array.isArray(p.isMapped())){var s=Ext.getCmp("panel"+p.isMapped()[0].replace(this.regexpPanel,""))}else{var s=Ext.getCmp("panel"+p.isMapped().replace(this.regexpPanel,""))}if(s!=undefined){s.close();var o=p.getColorMappingsSet();o.forEach(function(t){var u=t.getName().toString().replace(this.regexpPanel,"_");if(Ext.getCmp("selectConditionForm").down("#mappingCaptionForm"+u)!=null){Ext.getCmp("selectConditionForm").down("#mappingCaptionForm"+u).close()}});if(Ext.getCmp("selectConditionForm").down("#undefined")!=null){Ext.getCmp("selectConditionForm").down("#undefined").close()}}p.setMapped("false");var h=Ext.getCmp("selectCondition");var d=h.getStore();var g=[];d.loadData(g,false);var a=Ext.getCmp("selectConditionType");h.clearValue();h.setDisabled(true);a.setDisabled(true);var f=Ext.getCmp("selectMappingVisu");var j=f.getStore();var b=[];j.loadData(b,false);f.clearValue();f.setDisabled(true)}},closeMapping:function(h){var f=_metExploreViz.getSessionById("viz");if(f.isMapped()!="false"){var d=Ext.getStore("S_Condition");var b=f.isMapped();this.removeGraphMapping(b);if(f.getMappingDataType()=="Continuous"||f.getMappingDataType()=="Flux"){var g=f.getColorMappingsSet();var c=f.getColorMappingsSetLength()==0;if(!c){g=[]}}if(f.getMappingDataType()=="Flux"||Array.isArray(f.isMapped())){var a=Ext.getCmp("panel"+f.isMapped()[0].replace(this.regexpPanel,""))}else{var a=Ext.getCmp("panel"+f.isMapped().replace(this.regexpPanel,""))}if(a!=undefined){a.close();var g=f.getColorMappingsSet();g.forEach(function(j){var m=j.getName().toString().replace(this.regexpPanel,"_");if(Ext.getCmp("selectConditionForm").down("#mappingCaptionForm"+m)!=null){Ext.getCmp("selectConditionForm").down("#mappingCaptionForm"+m).close()}});if(Ext.getCmp("selectConditionForm").down("#undefined")!=null){Ext.getCmp("selectConditionForm").down("#undefined").close()}}f.setMappingDataType(null);f.setMapped("false")}},removeGraphMapping:function(c){metExploreD3.GraphMapping.removeGraphMappingData(c);var a=Ext.getCmp("selectCondition").getStore();var b=Ext.getCmp("selectConditionType")},map:function(){var j=this,c=j.getViewModel(),a=j.getView();var h=Ext.getCmp("selectCondition");var f=Ext.getCmp("selectMappingVisu");var m=h.getValue();var g=f.getValue();var b=Ext.getCmp("selectConditionType").getValue();if(a.lookupReference("selectCondition").value.length==1){var d="Unique"}else{var d="Compare"}this.graphMapping(b,m,g,d)},graphMapping:function(c,d,b,f){var a=_metExploreViz.getSessionById("viz");a.setActiveMapping(b);if(c=="Continuous"){metExploreD3.GraphMapping.graphMappingContinuousData(b,d)}if(c=="Flux"){metExploreD3.GraphMapping.graphMappingFlux(b,d,f,undefined,undefined,Ext.getCmp("opacityCheck").checked,Ext.getCmp("valueonarrowCheck").checked)}if(c=="Discrete"){metExploreD3.GraphMapping.graphMappingDiscreteData(b,d)}a.setMappingDataType(c)},addMappingCaptionForm:function(d){var s=this,g=s.getViewModel(),t=s.getView();var o=Ext.getCmp("selectConditionForm");var m=Ext.getCmp("selectCondition");var b=m.getValue();var q=Ext.getCmp("selectMappingVisu");var r=q.getValue();var h=_metExploreViz.getSessionById("viz");h.setMapped(b);if(d=="flux"||Array.isArray(b)){var p=b[0]}else{var p=b}if(o!=undefined){if(Ext.getCmp("panel"+p)==undefined){var A=[];var c=[];var f=h.getColorMappingsSet();var j=this;var z=document.createElement("script");z.setAttribute("src",document.location.href.split("index.html")[0]+"resources/lib/jscolor/jscolor.js");document.body.appendChild(z);var y=0;f.forEach(function(F){var E=F.getName();var C=E;if(d=="flux"){C=b[y]}y++;var G=E.toString().replace(this.regexpPanel,"_");var D=Ext.create("metExploreViz.view.form.MappingCaptionForm",{itemId:"mappingCaptionForm"+G,margin:"0 0 0 0",padding:"0 0 0 0",border:false,items:[{itemId:"chooseColorReaction"+G,xtype:"panel",border:false,layout:{type:"hbox",align:"stretch"},items:[{xtype:"label",forId:"color",text:C+" :",margin:"0 0 0 10",flex:1,border:false},{border:false,xtype:"hiddenfield",itemId:"hidden"+G,value:F.getValue(),listeners:{change:function(I,H){this.lastValue=I}}},{border:false,margin:"0 10 0 0",width:"40%",html:"<input size=\"5\" onchange=\"Ext.getCmp('selectConditionForm').down('#hidden"+G+"').fireEvent('change', '#'+this.color.valueElement.value, '"+F.getValue()+"');\" value='"+F.getValue()+";'\" class=\"color {pickerFaceColor:'#5FA2DD',pickerPosition:'right',pickerFace:5}\">"}]}]});c.push(D);A.push(G)});console.log("panel"+p.replace(this.regexpPanel,""));var B=Ext.create("Ext.panel.Panel",{id:"panel"+p.replace(this.regexpPanel,""),border:false,width:"100%",bodyBorder:false,xtype:"panel",layout:{type:"hbox",align:"stretch"},items:[{xtype:"label",forId:"condName",margin:"8 5 5 10",flex:1}]});var a=Ext.create("Ext.Button",{iconCls:"del",tooltip:"You must choose a condition to add it",margin:"5 5 5 0",id:"delCondition"+p.replace(this.regexpPanel,""),action:"delCondition"+p.replace(this.regexpPanel,""),handler:function(){var C=this.findParentBy(function(D){return D instanceof Ext.panel.Panel});j.closeMapping(r)}});B.add(a);var w=Ext.getCmp("selectConditionType").getValue();var u=r;var v=Ext.create("Ext.Button",{iconCls:"refresh",margin:"5 5 5 0",id:"refreshColor"+p.replace(this.regexpPanel,""),action:"refreshColor"+p.replace(this.regexpPanel,""),handler:function(){var E=u;var D=h.getColorMappingsSet();if(d=="discrete"){D.forEach(function(F){var G=F.getName().toString().replace(this.regexpPanel,"_");if(Ext.getCmp("selectConditionForm").down("#hidden"+G)!=null){if(F.getValue()!=Ext.getCmp("selectConditionForm").down("#hidden"+G).lastValue){metExploreD3.GraphMapping.setDiscreteMappingColor(Ext.getCmp("selectConditionForm").down("#hidden"+G).lastValue,F.getName(),b,u)}}})}else{D.forEach(function(F){var G=F.getName().toString().replace(this.regexpPanel,"_");if(Ext.getCmp("selectConditionForm").down("#hidden"+G)!=null){if(F.getValue()!=Ext.getCmp("selectConditionForm").down("#hidden"+G).lastValue){metExploreD3.GraphMapping.setContinuousMappingColor(Ext.getCmp("selectConditionForm").down("#hidden"+G).lastValue,F.getName(),b,u)}}});if(h.getColorMappingsSet()[1]!=undefined){if(parseFloat(h.getColorMappingsSet()[0].getName())<parseFloat(h.getColorMappingsSet()[1].getName())){maxValue=parseFloat(h.getColorMappingsSet()[1].getName())}else{maxValue=parseFloat(h.getColorMappingsSet()[0].getName());minValue=parseFloat(h.getColorMappingsSet()[1].getName())}}else{color=parseFloat(h.getColorMappingsSet()[0].getName())}if(d=="continuous"){metExploreD3.GraphMapping.graphMappingContinuousData(u,p,h.getColorMappingById(minValue).getValue(),h.getColorMappingById(maxValue).getValue())}else{if(b.length==1){var C="Unique";metExploreD3.GraphMapping.graphMappingFlux(u,b,C,h.getColorMappingById(color).getValue(),undefined,Ext.getCmp("opacityCheck").checked,Ext.getCmp("valueonarrowCheck").checked)}else{var C="Compare";metExploreD3.GraphMapping.graphMappingFlux(u,b,C,h.getColorMappingById(maxValue).getValue(),h.getColorMappingById(minValue).getValue(),Ext.getCmp("opacityCheck").checked,Ext.getCmp("valueonarrowCheck").checked)}}}}});B.add(v);var o=Ext.getCmp("selectConditionForm");if(o!=undefined){o.add(B);c.forEach(function(C){o.add(C)})}}}}},0,0,0,0,["controller.form-selectConditionForm-selectConditionForm"],0,[metExploreViz.view.form.selectConditionForm,"SelectConditionFormController"],0));(Ext.cmd.derive("metExploreViz.view.form.selectConditionForm.SelectConditionFormModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.form-selectConditionForm-selectConditionForm"],0,[metExploreViz.view.form.selectConditionForm,"SelectConditionFormModel"],0));(Ext.cmd.derive("metExploreViz.view.form.selectConditionForm.SelectConditionForm",Ext.panel.Panel,{controller:"form-selectConditionForm-selectConditionForm",viewModel:{type:"form-selectConditionForm-selectConditionForm"},layout:{type:"vbox",align:"stretch"},region:"north",width:"100%",margins:"0 0 0 0",split:true,animation:true,autoScroll:true,autoHeight:true,items:[{id:"selectMappingVisu",xtype:"selectMapping",disabled:true},{xtype:"menuseparator"},{id:"selectConditionType",xtype:"selectConditionType",reference:"selectConditionType",disabled:true},{margin:"10 0 0 5",xtype:"fieldcontainer",defaultType:"checkboxfield",reference:"opacity",hidden:true,items:[{boxLabel:"Opacity",name:"opacity",inputValue:true,id:"opacityCheck"}]},{margin:"10 0 0 5",xtype:"fieldcontainer",defaultType:"checkboxfield",reference:"valueonarrow",hidden:true,items:[{boxLabel:"Show values on arrows",name:"valueonarrow",inputValue:true,id:"valueonarrowCheck"}]},{border:false,id:"chooseCondition",xtype:"panel",autoScroll:true,layout:{type:"hbox",align:"stretch"},items:[{id:"selectCondition",xtype:"selectCondition",reference:"selectCondition",disabled:true}]},{xtype:"menuseparator"}]},0,["selectConditionForm"],["component","box","container","panel","selectConditionForm"],{component:true,box:true,container:true,panel:true,selectConditionForm:true},["widget.selectConditionForm"],0,[metExploreViz.view.form.selectConditionForm,"SelectConditionForm"],0));(Ext.cmd.derive("metExploreViz.view.form.updateStyleForm.UpdateStyleFormController",Ext.app.ViewController,{init:function(){this.control({"updateStyleForm combobox[action=changeObject]":{change:function(f,a,c){var b=Ext.getCmp(a);if(b!=undefined){b.setVisible(true)}if(c!=undefined){var d=Ext.getCmp(c);if(d!=undefined){d.setVisible(false)}}}}})}},0,0,0,0,["controller.form-updateStyleForm-updateStyleForm"],0,[metExploreViz.view.form.updateStyleForm,"UpdateStyleFormController"],0));(Ext.cmd.derive("metExploreViz.view.form.updateStyleForm.UpdateStyleForm",Ext.panel.Panel,{controller:"form-updateStyleForm-updateStyleForm",height:200,width:"100%",margin:"0 0 0 0",split:true,layout:{type:"vbox",align:"stretch"},animation:true,items:[{id:"selectObject",xtype:"combobox",editable:false,margin:"5 5 5 5",action:"changeObject",emptyText:"-- Choose an object --",store:[["reactionStyleForm","Reaction"],["metaboliteStyleForm","Metabolite"],["generalStyleForm","General"]]},{xtype:"menuseparator"},{id:"reactionStyleForm",xtype:"reactionStyleForm",hidden:true},{id:"metaboliteStyleForm",xtype:"metaboliteStyleForm",hidden:true},{id:"generalStyleForm",xtype:"generalStyleForm",hidden:true}]},0,["updateStyleForm"],["component","box","container","panel","updateStyleForm"],{component:true,box:true,container:true,panel:true,updateStyleForm:true},["widget.updateStyleForm"],0,[metExploreViz.view.form.updateStyleForm,"UpdateStyleForm"],0));(Ext.cmd.derive("metExploreViz.view.panel.networkPanel.NetworkPanelController",Ext.app.ViewController,{init:function(){var a=this,c=a.getViewModel(),b=a.getView();b.on({afterrender:a.initParams,scope:a});b.on({afterlunch:function(d){a.myRender(d);Ext.on("resize",function(g,f){document.getElementById("visualisation").style.width=g+"px";document.getElementById("visualisation").style.height=f+"px";b.setSize(g,f)})},scope:a})},initParams:function(){if(Ext.getCmp("networkPanel")!=undefined){var d=new Ext.LoadMask({target:Ext.getCmp("networkPanel"),msg:"This panel allows to visualize metabolic network.",id:"maskInit",msgCls:"msgClsLaunchMask"});d.show();var c=d.getEl().down(".x-mask-msg");var b=c.getFirstChild().appendChild({tag:"div","class":"x-mask-msg-text"});Ext.create("Ext.form.Label",{text:"Load network from : ",id:"textloadnetworkfrom",style:"top : 15px",renderTo:b});Ext.create("Ext.button.Button",{text:"JSON File",id:"butloadnetworkfromjson",style:"margin : 10px 10px 10px 10px",handler:function(){var f=Ext.getCmp("IDimportNetwork");if(f!=undefined){f.fileInputEl.dom.click()}d.hide()},renderTo:b});Ext.create("Ext.button.Button",{text:metExploreD3.getGeneralStyle().getWebsiteName(),id:"buttonImportToNetworkFromWebsite",disabled:true,hidden:false,style:"margin : 10px 10px 10px 10px",handler:function(){metExploreD3.GraphPanel.refreshPanel(_metExploreViz.getDataFromWebSite());d.hide()},listeners:{hideInitialLoadButtons:function(){Ext.getCmp("textloadnetworkfrom").hide();Ext.getCmp("butloadnetworkfromjson").hide();this.hide()},hideMask:function(){d.hide()},setGeneralStyle:function(){this.setText(metExploreD3.getGeneralStyle().getWebsiteName())},cartFilled:function(){this.setDisabled(false)}},renderTo:b})}var a=new NetworkVizSession();a.setVizEngine("D3");a.setId("viz");a.setMapped("false");a.setDisplayNodeName("name");_metExploreViz.addSession(a)},myRender:function(d){var b=this,c=b.getView();var a=document.getElementById(d);c.render(a)}},0,0,0,0,["controller.panel-networkPanel-networkPanel"],0,[metExploreViz.view.panel.networkPanel,"NetworkPanelController"],0));(Ext.cmd.derive("metExploreViz.view.panel.graphPanel.GraphPanelController",Ext.app.ViewController,{init:function(){var a=this,c=a.getViewModel(),b=a.getView();Ext.QuickTips.init();b.on({setLoadButtonHidden:a.changeoption,afterrefresh:function(){var m=b.lookupReference("buttonCopyNetwork");var f=b.lookupReference("buttonSaveNetwork");var h=b.lookupReference("vizMiningMenuID");var g=b.lookupReference("vizImportMenuID");var q=b.lookupReference("vizExportMenuID");var o=b.lookupReference("vizSaveMenuID");var d=b.lookupReference("vizDrawingMenuID");var j=b.lookupReference("vizLoadMenuID");var p=b.lookupReference("searchNode");if(p!=undefined){p.setDisabled(false)}if(m!=undefined){m.setDisabled(false);m.setTooltip("The graph will be copy in other frame")}if(f!=undefined){f.setDisabled(false);f.setTooltip("The graph will be saved in json file")}if(h!=undefined){h.setDisabled(false);h.setTooltip("Sub-network extraction/visualisation")}if(q!=undefined){q.setDisabled(false);q.setTooltip("Export network as an image")}if(g!=undefined){g.setDisabled(false);g.setTooltip("Import data on nodes")}if(o!=undefined){o.setDisabled(false);o.setTooltip("Save drawing")}if(d!=undefined){d.setDisabled(false);d.setTooltip("Change network drawing")}if(j!=undefined){j.setDisabled(false);j.setTooltip("Load a network in the visualisation")}},initSearch:a.initSearch,scope:a});b.on({afterrefresh:a.drawCaption,scope:a});b.lookupReference("searchNodeButton").on({click:a.searchNode,scope:a})},changeoption:function(){var b=this,a=b.getView();if(metExploreD3.getGeneralStyle().loadButtonIsHidden()){metExploreD3.hideInitialLoadButtons();if(!a.lookupReference("vizLoadMenuID").hidden){a.lookupReference("vizLoadMenuID").setHidden(true)}}},drawCaption:function(){metExploreD3.GraphCaption.drawCaption()},initSearch:function(){var a=this,c=a.getViewModel(),b=a.getView();if(b.lookupReference("searchNodeTextField").getValue()!=""){b.lookupReference("searchNodeTextField").reset()}},searchNode:function(){var a=this,c=a.getViewModel(),b=a.getView();if(b.lookupReference("searchNodeTextField").getValue()=="happyfox"){d3.select("#viz").select("#D3viz").style("background-image","url('resources/images/easteregg/foxegg.jpg')").style("background-repeat","round")}if(b.lookupReference("searchNodeTextField").getValue()=="joyeuxnoel"){d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(d){return(d.getBiologicalType()=="reaction")}).append("image").attr("xlink:href","resources/images/easteregg/giftegg.svg").attr("width","50px").attr("height","50px").attr("transform","translate(-25,-25)");d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(d){return(d.getBiologicalType()=="metabolite")}).append("image").attr("xlink:href","resources/images/easteregg/sapinegg.svg").attr("width","70px").attr("height","70px").attr("transform","translate(-35,-35)")}metExploreD3.GraphNode.searchNode(b.lookupReference("searchNodeTextField").getValue())},refresh:function(){var c=Ext.getCmp("viz");if(c!=undefined){var b=new Ext.LoadMask({target:c,msg:"Refresh in process...",msgCls:"msgClsCustomLoadMask"});b.show();var a=this;setTimeout(function(){a.initData();metExploreD3.GraphNetwork.refreshSvg("viz");b.hide();var d=Ext.getCmp("graphPanel");if(d!=undefined){d.fireEvent("afterrefresh")}},100)}},initData:function(){var F=Ext.getStore("S_NetworkVizSession").getById("viz");F.reset();var h=Ext.getStore("S_NetworkData");var E=new NetworkData("viz");var B=F.getGraph();var q="";var C="";var v="";var y=Ext.getStore("S_Cart");var u=[];var o=[];var m=Ext.getStore("S_AnnotationReaction");m.filter("field","reversible");y.each(function(H){q=H.get("dbIdentifier");C=H.get("id");u.push(C);v=H.get("name");var I=m.findRecord("id",C+"_reversible",0,false,true,true);var K=H.get("ec");if(I){var L=I.get("newV")}else{var L=H.get("reversible")}E.addNode(v,undefined,q,C,L,"reaction",false,true,undefined,undefined,undefined,undefined,K);B.addNode(C);if(H.get("reversible")){var J=C+"_back";B.addNode(J)}});var t=u.length;var r=Ext.getStore("S_LinkReactionMetabolite");r.filterBy(function(H,I){if(Ext.Array.indexOf(u,H.get("idReaction"))!==-1){return true}return false},this);var z=Ext.getStore("S_Metabolite");var A=Ext.getStore("S_AnnotationMetabolite");A.filter("field","sideCompound");var p="";var C="";var a="";var j=true;var s="";var w="";var G="";var f="";var c=0;var D=0;var g=0;var d=0;var g=0;var b="";r.each(function(K){p=K.get("idMetabolite");C=K.get("idReaction");a=K.get("interaction");var J=m.findRecord("id",C+"_reversible");if(J){j=J.get("newV")}else{j=K.get("reversible")}J=A.findRecord("id",p);if(J){sideCompound=J.get("newV")}else{sideCompound=K.get("side")}s=K.get("edgeId");var H=o.indexOf(p);if(sideCompound==0||sideCompound=="false"){var M=false}else{var M=true}if(H==-1){o.push(p);var L=z.getById(p);w=L.get("name");G=L.get("compartment");f=L.get("dbIdentifier");var I=L.getSvgHW();c=0;D=0;if(I!="undefined"){c=I.width;D=I.height}E.addNode(w,G,f,p,undefined,"metabolite",false,true,I.svg,c,D,M,undefined);H=o.indexOf(p)}d=u.indexOf(C);H=H+t;if(j){b=C+"_back";if(a=="in"){E.addLink(s,H,d,a,"true");B.addEdge(b,p);B.addEdge(p,C)}else{E.addLink(s,d,H,a,"true");B.addEdge(p,b);B.addEdge(C,p)}}else{if(a=="in"){E.addLink(s,H,d,a,"false");B.addEdge(p,C)}else{E.addLink(s,d,H,a,"false");B.addEdge(C,p)}}});r.clearFilter();A.clearFilter();m.clearFilter();E.setId("viz");h.add(E);F.setD3Data(E)},exportJSON:function(){var b=Ext.getStore("S_NetworkData");var o=metExploreD3.getReactionsSet();var c=metExploreD3.getMetabolitesSet();var j=Ext.getStore("S_CompartmentInBioSource");var a="";a+='{"reaction":[';var h=Ext.create("Ext.data.Store",{fields:["id","ec","name","reversible"]});o.each(function(p){b.getStoreById("viz").getNodes().forEach(function(q){if(q.getId()==p.get("id")){h.add({id:q.getId(),ec:p.get("ec"),name:q.getName(),reversible:q.getReactionReversibility()})}})});for(var m=0;m<h.getCount();m++){a+=Ext.JSON.encode(h.getRange()[m].data);if(m!=h.getCount()-1){a+=",\n"}}a+='],\n\n"metabolite":[';var d=Ext.create("Ext.data.Store",{fields:["id","name","chemicalFormula","compartment","inchi"]});b.getStoreById("viz").getNodes().forEach(function(p){c.each(function(u){if(p.getId()==u.get("id")){var t=u.get("mapped")>0;d.add({id:p.getId(),name:u.get("name"),formula:u.get("chemicalFormula"),compartment:u.get("compartment"),inchi:u.get("inchi"),mapped:t})}});if(p.isSideCompound()){var s=p.getId();s=s.split("-");var q=c.getMetaboliteById(s[0]);var r=q.get("mapped")>0;d.add({id:p.getId(),name:q.get("name"),formula:q.get("chemicalFormula"),compartment:q.get("compartment"),inchi:q.get("inchi"),mapped:r})}});for(var m=0;m<d.getCount();m++){a+=Ext.JSON.encode(d.getRange()[m].data);if(m!=d.getCount()-1){a+=",\n"}}a+='],\n\n"link":[';var g=Ext.create("Ext.data.Store",{fields:["source","target","interaction"]});b.getStoreById("viz").getLinks().forEach(function(p){g.add({source:p.source.getId(),target:p.target.getId(),interaction:p.interaction})});for(var m=0;m<g.getCount();m++){a+=Ext.JSON.encode(g.getRange()[m].data);if(m!=g.getCount()-1){a+=",\n"}}a+='],\n\n"compartment":[';var f=Ext.create("Ext.data.Store",{fields:["name","color"]});j.each(function(p){f.add({name:p.get("name"),color:p.get("color")})});for(var m=0;m<f.getCount();m++){a+=Ext.JSON.encode(f.getRange()[m].data);if(m!=f.getCount()-1){a+=",\n"}}a+="]}\n";return a},exportJsonFile:function(){var a=this.exportJSON();var c=document.createElement("a");c.download="data.json";var b=new Blob([a],{type:"text/plain"});c.href=window.URL.createObjectURL(b);c.click()},exportXGMML:function(){if(lib.javascript.metExploreViz.globals.Session.idUser==""||lib.javascript.metExploreViz.globals.Session.idUser==-1){var b=Ext.create("Ext.window.MessageBox",{height:300});b.alert("Warning","You are not connected, the job will be available only during your session. ");b.setPosition(50)}var c=encodeURIComponent(metExploreD3.GraphUtils.exportMainSVG());var a=encodeURIComponent(this.exportJSON().replace(/\n/g,""));var d={analysis_title:"Xgmml Export",java_class:"metexplore.XgmmlExporter",json:a,svg:c};Ext.Ajax.request({url:"src/php/application_binding/launchJavaApplication.php",method:"POST",params:d,success:function(m,f){var o=Ext.decode(m.responseText);if(o.success==false){Ext.Msg.alert("Failed","Problem in getting results from the server (success = false)");return}else{var p=o.message;var j=Ext.create("Ext.window.MessageBox",{height:300});j.show({title:"Application message",msg:p});var g=Ext.ComponentQuery.query("sidePanel")[0];var h=g.down("gridJobs");h.expand();Ext.getStore("S_Analyses").reload()}},failure:function(f,g){Ext.MessageBox.alert("Server-side failure with status code "+f.status)}})}},0,0,0,0,["controller.panel-graphpanel-graphpanel"],0,[metExploreViz.view.panel.graphPanel,"GraphPanelController"],0));(Ext.cmd.derive("metExploreViz.view.panel.graphPanel.GraphPanelModel",Ext.app.ViewModel,{parent:"networkPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.panel-graphpanel-graphpanel"],0,[metExploreViz.view.panel.graphPanel,"GraphPanelModel"],0));(Ext.cmd.derive("metExploreViz.view.panel.comparePanel.ComparePanelController",Ext.app.ViewController,{init:function(){var a=this,c=a.getViewModel(),b=a.getView();b.on({initiateviz:this.initiateViz,scope:a});b.on({copyNetwork:this.saveNetwork,scope:a});b.on({add:function(d){d.expand(true)},scope:a});b.on({remove:function(d,f){if(d.items.length==0){d.collapse(true)}},scope:a});b.on({beforeremove:function(f,d){session=_metExploreViz.getSessionById(d.id+"-body");if(session!=undefined){metExploreD3.GraphNetwork.stopForce(session);var g=_metExploreViz.getComparedPanelById(d.id+"-body");if(g!=undefined){g.setVisible(false);_metExploreViz.removeComparedPanel(g)}_metExploreViz.removeSession(d.id+"-body");metExploreD3.GraphNetwork.looksLinked()}},scope:a})},onSessionStart:function(a){var b=_metExploreViz.cloneSession();b.setId(a);_metExploreViz.addSession(b)},initiateViz:function(d){var b=this;var a=_metExploreViz.getSessionById(d);var f=d.substring(0,d.length-5);var c=Ext.getCmp(f);if(c!=undefined){c.on("resize",function(){metExploreD3.GraphPanel.resizeViz(d);var g=_metExploreViz.getSessionById("viz");if(g.isActive()){metExploreD3.GraphPanel.resizePanels(d)}})}$("#"+d).on("contextmenu",function(h){h.preventDefault();var j=Ext.getCmp("comparePanel");if(h.target.parentNode.parentNode.id=="D3viz"){if(a.getSelectedNodes()!=undefined){if(a.getSelectedNodes().length!=0){j.CtxMenu=new Ext.menu.Menu({items:[{text:"Remove selected nodes",hidden:false,handler:function(){metExploreD3.GraphNetwork.removeSelectedNode(d)}}]})}}}else{if(h.target.id==""){if(h.target.parentNode.textContent!=""){if(h.target.previousSibling.previousSibling==null){var g=h.target.previousSibling}else{var g=h.target.previousSibling.previousSibling}}else{var g=h.target.parentNode.parentNode.firstChild}}else{var g=h.target}j.CtxMenu=new Ext.menu.Menu({items:[{text:"Remove the node",hidden:false,handler:function(){metExploreD3.GraphNetwork.removeSelectedNode(d)}},{text:"Select neighbour",hidden:false,handler:function(){metExploreD3.GraphNode.selectNeighbours(_metExploreViz.getSessionById(d).getD3Data().getNodeById(g.id),d)}},{text:"See more information",hidden:false,handler:function(){var r=g.id;if(g.getAttribute("class")=="metabolite"){var p=Ext.getStore("S_Metabolite");var m=p.getMetaboliteById(r);var q=Ext.create("MetExplore.view.window.V_WindowInfoMetabolite",{rec:m});q.show();q.focus()}else{var o=Ext.getStore("S_Reaction");var m=o.getReactionById(r);var s=Ext.create("MetExplore.view.window.V_WindowInfoReaction",{rec:m});s.show();s.focus()}}}]})}if(j.CtxMenu!=undefined){j.CtxMenu.showAt(h.clientX,h.clientY)}});metExploreD3.GraphNetwork.delayedInitialisation(d)},drawSavedNetwork:function(d){var a=Ext.getCmp(d.substring(0,d.length-5));if(a!=undefined){var c=new Ext.LoadMask({target:a,msg:"Copy in process...",msgCls:"msgClsCustomLoadMask"});c.show();var b=this;setTimeout(function(){b.onSessionStart(d);b.initiateViz(d);metExploreD3.GraphNetwork.setAnimated(d,true);metExploreD3.GraphNetwork.refreshSvg(d);c.hide()},100)}},saveNetwork:function(){if(_metExploreViz.getSessionById("viz").getD3Data()==undefined){console.log("Any network to save.")}else{console.log("Save the network.");var a=this,b=a.getView();b.show();function c(d){Ext.Msg.prompt("Title","Please enter the title of network:",function(g,f){if(g=="ok"){var j=Ext.getCmp("comparePanel");if(f!=""&&j!=undefined){var m="graph"+_metExploreViz.getComparedPanelsLength();var h=[{id:m,title:f,html:'<div id="'+m+'" height="100%" width="100%"></div>',flex:1,cls:"comparedPanel",closable:true,collapsible:true,collapseDirection:"left"}];j.add(h);j.expand();newComparedPanel=new ComparedPanel(m+"-body",true,j.items.keys[j.items.length-1],f);_metExploreViz.addComparedPanel(newComparedPanel);d.drawSavedNetwork(m+"-body")}else{alert("Please enter a valid name");c(d)}}},this,false)}c(this)}}},0,0,0,0,["controller.panel-comparePanel-comparePanel"],0,[metExploreViz.view.panel.comparePanel,"ComparePanelController"],0));(Ext.cmd.derive("metExploreViz.view.panel.comparePanel.ComparePanelModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.panel-comparePanel-comparePanel"],0,[metExploreViz.view.panel.comparePanel,"ComparePanelModel"],0));(Ext.cmd.derive("metExploreViz.view.panel.comparePanel.ComparePanel",Ext.panel.Panel,{controller:"panel-comparePanel-comparePanel",viewModel:{type:"panel-comparePanel-comparePanel"},collapsible:true,collapsed:true,hidden:true,region:"north",height:300,width:"100%",split:true,cls:"comparePanel",resizable:{handles:"n",pinned:true},layout:{type:"hbox",align:"stretch"},animation:true},0,["comparePanel"],["component","box","container","panel","comparePanel"],{component:true,box:true,container:true,panel:true,comparePanel:true},["widget.comparePanel"],0,[metExploreViz.view.panel.comparePanel,"ComparePanel"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_MiningMenu.Viz_MiningMenuController",Ext.app.ViewController,{init:function(){var a=this,c=a.getViewModel(),b=a.getView();b.on({mouseleave:function(f,d,g){f.hide()},scope:a});if(metExploreD3.Features.isEnabled("algorithm")){b.lookupReference("vizAlgorithmMenuID").setHidden(false)}if(metExploreD3.Features.isEnabled("highlightSubnetwork","max")){b.lookupReference("highlightSubnetwork").setHidden(false);b.lookupReference("highlightSubnetwork").on({click:a.highlightSubnetwork,scope:a})}b.lookupReference("keepOnlySubnetwork").on({click:a.keepOnlySubnetwork,scope:a})},highlightSubnetwork:function(){metExploreD3.GraphFunction.highlightSubnetwork()},keepOnlySubnetwork:function(){metExploreD3.GraphFunction.keepOnlySubnetwork()}},0,0,0,0,["controller.menu-vizMiningMenu-vizMiningMenu"],0,[metExploreViz.view.menu.viz_MiningMenu,"Viz_MiningMenuController"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_MiningMenu.Viz_MiningMenuModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.menu-vizMiningMenu-vizMiningMenu"],0,[metExploreViz.view.menu.viz_MiningMenu,"Viz_MiningMenuModel"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_AlgorithmMenu.Viz_AlgorithmMenuController",Ext.app.ViewController,{init:function(){var a=this,c=a.getViewModel(),b=a.getView();b.lookupReference("betweennessCentrality").on({click:metExploreD3.GraphFunction.betweennessCentrality,scope:a})}},0,0,0,0,["controller.menu-vizAlgorithmMenu-vizAlgorithmMenu"],0,[metExploreViz.view.menu.viz_AlgorithmMenu,"Viz_AlgorithmMenuController"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_AlgorithmMenu.Viz_AlgorithmMenuModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.menu-vizAlgorithmMenu-vizAlgorithmMenu"],0,[metExploreViz.view.menu.viz_AlgorithmMenu,"Viz_AlgorithmMenuModel"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_AlgorithmMenu.Viz_AlgorithmMenu",Ext.menu.Menu,{controller:"menu-vizAlgorithmMenu-vizAlgorithmMenu",viewModel:{type:"menu-vizAlgorithmMenu-vizAlgorithmMenu"},items:[{text:"Betweenness Centrality",reference:"betweennessCentrality",iconCls:"betweennessCentrality"}]},0,["vizAlgorithmMenu"],["component","box","container","panel","menu","vizAlgorithmMenu"],{component:true,box:true,container:true,panel:true,menu:true,vizAlgorithmMenu:true},["widget.vizAlgorithmMenu"],0,[metExploreViz.view.menu.viz_AlgorithmMenu,"Viz_AlgorithmMenu"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_MiningMenu.Viz_MiningMenu",Ext.menu.Menu,{controller:"menu-vizMiningMenu-vizMiningMenu",viewModel:{type:"menu-vizMiningMenu-vizMiningMenu"},items:[{text:"Algorithm",scale:"large",menu:{id:"vizIdAlgorithmMenu",xtype:"vizAlgorithmMenu"},id:"vizAlgorithmMenuID",reference:"vizAlgorithmMenuID",padding:"0 0 0 0",hidden:true},{text:"Highlight Subnetwork",reference:"highlightSubnetwork",tooltip:"Highlight sub-network based on node selection or mapped nodes",iconCls:"highlightSubnetwork",hidden:true},{text:"Extract Subnetwork",reference:"keepOnlySubnetwork",tooltip:"Extract sub-network based on node selection",iconCls:"subnetwork"}]},0,["vizMiningMenu"],["component","box","container","panel","menu","vizMiningMenu"],{component:true,box:true,container:true,panel:true,menu:true,vizMiningMenu:true},["widget.vizMiningMenu"],0,[metExploreViz.view.menu.viz_MiningMenu,"Viz_MiningMenu"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_SaveMenu.Viz_SaveMenuController",Ext.app.ViewController,{init:function(){var a=this,c=a.getViewModel(),b=a.getView();b.on({mouseleave:function(f,d,g){f.hide()},scope:a});b.lookupReference("exportJSON").on({click:a.exportJSON,scope:a});b.lookupReference("exportDOT").on({click:a.exportDOT,scope:a});b.lookupReference("exportGML").on({click:a.exportGML,scope:a})},exportDOT:function(){metExploreD3.GraphUtils.saveNetworkDot()},exportGML:function(){metExploreD3.GraphUtils.saveNetworkGml()},exportJSON:function(){metExploreD3.GraphUtils.saveNetworkJSON()}},0,0,0,0,["controller.menu-vizSaveMenu-vizSaveMenu"],0,[metExploreViz.view.menu.viz_SaveMenu,"Viz_SaveMenuController"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_SaveMenu.Viz_SaveMenuModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.menu-vizSaveMenu-vizSaveMenu"],0,[metExploreViz.view.menu.viz_SaveMenu,"Viz_SaveMenuModel"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_SaveMenu.Viz_SaveMenu",Ext.menu.Menu,{controller:"menu-vizSaveMenu-vizSaveMenu",viewModel:{type:"menu-vizSaveMenu-vizSaveMenu"},items:[{text:"Save Viz as json",reference:"exportJSON",tooltip:"Save network viz as a json file",iconCls:"saveNetwork"},{text:"Save Viz as dot",reference:"exportDOT",tooltip:"Save network viz as a dot file",iconCls:"exportDot"},{text:"Save Viz as gml",reference:"exportGML",tooltip:"Save network viz as a gml file",iconCls:"exportGml"},{text:"Save Viz as XGMML",hidden:true,reference:"exportXGMML",tooltip:"Save network viz as a XGMML file with Cytoscape's graphical attibutes",iconCls:"cytoscapeWebStart"}]},0,["vizSaveMenu"],["component","box","container","panel","menu","vizSaveMenu"],{component:true,box:true,container:true,panel:true,menu:true,vizSaveMenu:true},["widget.vizSaveMenu"],0,[metExploreViz.view.menu.viz_SaveMenu,"Viz_SaveMenu"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ExportMenu.Viz_ExportMenuController",Ext.app.ViewController,{init:function(){var a=this,c=a.getViewModel(),b=a.getView();b.on({mouseleave:function(f,d,g){f.hide()},scope:a});b.lookupReference("exportSVG").on({click:a.exportSVG,scope:a});b.lookupReference("exportPNG").on({click:a.exportPNG,scope:a});b.lookupReference("exportJPG").on({click:a.exportJPG,scope:a})},exportSVG:function(){metExploreD3.GraphUtils.exportSVG()},exportPNG:function(){metExploreD3.GraphUtils.exportPNG()},exportJPG:function(){metExploreD3.GraphUtils.exportJPG()}},0,0,0,0,["controller.menu-vizExportMenu-vizExportMenu"],0,[metExploreViz.view.menu.viz_ExportMenu,"Viz_ExportMenuController"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ExportMenu.Viz_ExportMenuModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.menu-vizExportMenu-vizExportMenu"],0,[metExploreViz.view.menu.viz_ExportMenu,"Viz_ExportMenuModel"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ExportMenu.Viz_ExportMenu",Ext.menu.Menu,{controller:"menu-vizExportMenu-vizExportMenu",viewModel:{type:"menu-vizExportMenu-vizExportMenu"},items:[{text:"Export Viz as svg",reference:"exportSVG",tooltip:"Export network viz as a svg file",iconCls:"exportSvg"},{text:"Export Viz as png",reference:"exportPNG",tooltip:"Export network viz as a png file",iconCls:"exportPng"},{text:"Export Viz as jpeg",reference:"exportJPG",tooltip:"Export network viz as a jpeg file",iconCls:"exportJpg"}]},0,["vizExportMenu"],["component","box","container","panel","menu","vizExportMenu"],{component:true,box:true,container:true,panel:true,menu:true,vizExportMenu:true},["widget.vizExportMenu"],0,[metExploreViz.view.menu.viz_ExportMenu,"Viz_ExportMenu"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ImportMenu.Viz_ImportMenuController",Ext.app.ViewController,{init:function(){var a=this,c=a.getViewModel(),b=a.getView();b.on({mouseleave:function(f,d,g){f.hide()},scope:a});b.lookupReference("importMapping").on({click:function(){var d=Ext.getCmp("IDimportMapping");if(d!=undefined){d.fileInputEl.dom.click()}},scope:a});b.lookupReference("importSideCompounds").on({click:function(){var d=Ext.getCmp("IDimportSideCompounds");if(d!=undefined){d.fileInputEl.dom.click()}},scope:a})},importMapping:function(){metExploreD3.GraphMapping.importMapping()}},0,0,0,0,["controller.menu-vizImportMenu-vizImportMenu"],0,[metExploreViz.view.menu.viz_ImportMenu,"Viz_ImportMenuController"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ImportMenu.Viz_ImportMenuModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.menu-vizImportMenu-vizImportMenu"],0,[metExploreViz.view.menu.viz_ImportMenu,"Viz_ImportMenuModel"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ImportMenu.Viz_ImportMenu",Ext.menu.Menu,{controller:"menu-vizImportMenu-vizImportMenu",viewModel:{type:"menu-vizImportMenu-vizImportMenu"},items:[{text:"Import mapping from tab file",reference:"importMapping",tooltip:"Import mapping from tab file",iconCls:"importData"},{hidden:true,id:"buttonMap",xtype:"buttonImportMapping"},{text:"Import side compounds from tab file",reference:"importSideCompounds",tooltip:"Import side compounds from tab file",iconCls:"importData"},{hidden:true,id:"buttonSide",xtype:"buttonImportSideCompounds"}]},0,["vizImportMenu"],["component","box","container","panel","menu","vizImportMenu"],{component:true,box:true,container:true,panel:true,menu:true,vizImportMenu:true},["widget.vizImportMenu"],0,[metExploreViz.view.menu.viz_ImportMenu,"Viz_ImportMenu"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_DrawingMenu.Viz_DrawingMenuController",Ext.app.ViewController,{init:function(){var a=this,c=a.getViewModel(),b=a.getView();b.on({mouseleave:function(f,d,g){f.hide()},scope:a});b.lookupReference("removeSideCompounds").on({click:a.removeSideCompounds,scope:a});b.lookupReference("duplicateSideCompounds").on({click:a.duplicateSideCompounds,scope:a});b.lookupReference("clustMetabolites").on({click:a.clustMetabolites,scope:a});if(metExploreD3.Features.isEnabled("layouts")){b.lookupReference("vizLayoutMenuID").setHidden(false)}b.lookupReference("makeClusters").on({click:a.makeClusters,scope:a});b.on({enableMakeClusters:function(){this.lookupReference("makeClusters").setDisabled(false)},scope:a});b.on({disableMakeClusters:function(){this.lookupReference("makeClusters").setDisabled(true)},scope:a})},duplicateSideCompounds:function(){metExploreD3.GraphNetwork.duplicateSideCompounds("viz")},clustMetabolites:function(){if(!_metExploreViz.isLinkedByTypeOfMetabolite()){metExploreD3.GraphLink.linkTypeOfMetabolite();this.getView().lookupReference("clustMetabolites").setIconCls("metabolitesUnlinkedByType");this.getView().lookupReference("clustMetabolites").setTooltip("Release force between substrates/products")}else{metExploreD3.GraphLink.removeLinkTypeOfMetabolite();this.getView().lookupReference("clustMetabolites").setIconCls("metabolitesLinkedByType");this.getView().lookupReference("clustMetabolites").setTooltip("Draw closer substrates/products")}},makeClusters:function(){var a=metExploreD3.getGeneralStyle().useClusters();metExploreD3.getGeneralStyle().setUseClusters(!a);if(!a){this.getView().lookupReference("makeClusters").setIconCls("unmakeClusters");this.getView().lookupReference("makeClusters").setTooltip("Release force for clusters");this.getView().lookupReference("makeClusters").setText("Unmake clusters")}else{this.getView().lookupReference("makeClusters").setIconCls("makeClusters");this.getView().lookupReference("makeClusters").setTooltip("Make clusters in function of highlighted component");this.getView().lookupReference("makeClusters").setText("Make clusters")}var b=_metExploreViz.getSessionById("viz");if((metExploreD3.GraphNetwork.isAnimated(b.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(b.getId())==null)){b.getForce().resume()}},removeSideCompounds:function(){metExploreD3.GraphNetwork.removeSideCompounds()}},0,0,0,0,["controller.menu-vizDrawingMenu-vizDrawingMenu"],0,[metExploreViz.view.menu.viz_DrawingMenu,"Viz_DrawingMenuController"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_DrawingMenu.Viz_DrawingMenuModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.menu-vizDrawingMenu-vizDrawingMenu"],0,[metExploreViz.view.menu.viz_DrawingMenu,"Viz_DrawingMenuModel"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_LayoutMenu.Viz_LayoutMenuController",Ext.app.ViewController,{init:function(){var a=this,c=a.getViewModel(),b=a.getView();b.lookupReference("hierarchicalTreeLayout").on({click:metExploreD3.GraphFunction.hierarchicalDrawing,scope:a});b.lookupReference("sugiyamaLayout").on({click:metExploreD3.GraphFunction.sugiyamaDrawing,scope:a})}},0,0,0,0,["controller.menu-vizLayoutMenu-vizLayoutMenu"],0,[metExploreViz.view.menu.viz_LayoutMenu,"Viz_LayoutMenuController"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_LayoutMenu.Viz_LayoutMenuModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.menu-vizLayoutMenu-vizLayoutMenu"],0,[metExploreViz.view.menu.viz_LayoutMenu,"Viz_LayoutMenuModel"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_LayoutMenu.Viz_LayoutMenu",Ext.menu.Menu,{controller:"menu-vizLayoutMenu-vizLayoutMenu",viewModel:{type:"menu-vizLayoutMenu-vizLayoutMenu"},items:[{text:"Hierarchical Tree (R-T Extended)",reference:"hierarchicalTreeLayout",iconCls:"drawhierarchicallayout"},{text:"Sugiyama (OGDF)",reference:"sugiyamaLayout",iconCls:"drawhierarchicallayout"}]},0,["vizLayoutMenu"],["component","box","container","panel","menu","vizLayoutMenu"],{component:true,box:true,container:true,panel:true,menu:true,vizLayoutMenu:true},["widget.vizLayoutMenu"],0,[metExploreViz.view.menu.viz_LayoutMenu,"Viz_LayoutMenu"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ColorMenu.Viz_ColorMenuController",Ext.app.ViewController,{init:function(){var a=this,c=a.getViewModel(),b=a.getView();b.on({setGeneralStyle:function(){console.log("vizColorMenusetGeneralStyle",b.lookupReference("highlightCompartments"));var d=_metExploreViz.getGeneralStyle();console.log(d.isDisplayedConvexhulls());console.log(d.useClusters());if(d.isDisplayedConvexhulls()=="Compartments"){b.lookupReference("highlightCompartments").setChecked(true);metExploreD3.fireEvent("vizIdDrawing","enableMakeClusters");if(d.useClusters()){Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setIconCls("unmakeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setTooltip("Release force for clusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setText("Unmake clusters")}else{Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setIconCls("makeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setTooltip("Make clusters in function of highlighted component");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setText("Make clusters")}}else{if(d.isDisplayedConvexhulls()=="Pathways"){b.lookupReference("highlightPathways").setChecked(true);metExploreD3.fireEvent("vizIdDrawing","enableMakeClusters");if(d.useClusters()){Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setIconCls("unmakeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setTooltip("Release force for clusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setText("Unmake clusters")}else{Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setIconCls("makeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setTooltip("Make clusters in function of highlighted component");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setText("Make clusters")}}else{b.lookupReference("highlightCompartments").setChecked(false);b.lookupReference("highlightPathways").setChecked(false);metExploreD3.fireEvent("vizIdDrawing","disableMakeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setIconCls("makeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setTooltip("Make clusters in function of highlighted component");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setText("Make clusters")}}},scope:a});b.lookupReference("invertColors").on({click:a.invertColors,scope:a});b.lookupReference("blackWhite").on({click:a.blackWhite,scope:a})},invertColors:function(a,c){var b=this;if(a.checked){d3.select("#viz").select("#D3viz").classed("invertColorViz",true)}else{d3.select("#viz").select("#D3viz").classed("invertColorViz",false)}},blackWhite:function(a,c){var b=this;if(a.checked){d3.select("#viz").select("#D3viz").classed("blackWhiteViz",true)}else{d3.select("#viz").select("#D3viz").classed("blackWhiteViz",false)}},highlightComponents:function(f){var b=this,d=b.getViewModel(),c=b.getView();var a=_metExploreViz.getGeneralStyle();a.setDisplayConvexhulls(false);metExploreD3.GraphLink.displayConvexhulls("viz");metExploreD3.GraphNetwork.tick("viz");a.setDisplayConvexhulls(f);metExploreD3.GraphLink.displayConvexhulls("viz");metExploreD3.GraphNetwork.tick("viz");metExploreD3.fireEvent("vizIdDrawing","enableMakeClusters")},hideComponents:function(){var b=this,d=b.getViewModel(),c=b.getView();var a=_metExploreViz.getGeneralStyle();a.setDisplayConvexhulls(false);metExploreD3.GraphLink.displayConvexhulls("viz");metExploreD3.GraphNetwork.tick("viz");metExploreD3.fireEvent("generalStyleForm","setGeneralStyle");metExploreD3.fireEvent("vizIdDrawing","disableMakeClusters")}},0,0,0,0,["controller.menu-vizColorMenu-vizColorMenu"],0,[metExploreViz.view.menu.viz_ColorMenu,"Viz_ColorMenuController"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ColorMenu.Viz_ColorMenuModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.menu-vizColorMenu-vizColorMenu"],0,[metExploreViz.view.menu.viz_ColorMenu,"Viz_ColorMenuModel"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ColorMenu.Viz_ColorMenu",Ext.menu.Menu,{controller:"menu-vizColorMenu-vizColorMenu",viewModel:{type:"menu-vizColorMenu-vizColorMenu"},items:[{text:"Invert colors",checked:false,reference:"invertColors",iconCls:"invertColor"},{text:"Display in black and white",checked:false,reference:"blackWhite",iconCls:"blackWhite"}]},0,["vizColorMenu"],["component","box","container","panel","menu","vizColorMenu"],{component:true,box:true,container:true,panel:true,menu:true,vizColorMenu:true},["widget.vizColorMenu"],0,[metExploreViz.view.menu.viz_ColorMenu,"Viz_ColorMenu"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ConvexHullMenu.Viz_ConvexHullMenuController",Ext.app.ViewController,{init:function(){var a=this,c=a.getViewModel(),b=a.getView();b.on({setGeneralStyle:function(){var d=_metExploreViz.getGeneralStyle();if(d.isDisplayedConvexhulls()=="Compartments"){b.lookupReference("highlightCompartments").setChecked(true);metExploreD3.fireEvent("vizIdDrawing","enableMakeClusters");if(d.useClusters()){Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setIconCls("unmakeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setTooltip("Release force for clusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setText("Unmake clusters")}else{Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setIconCls("makeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setTooltip("Make clusters in function of highlighted component");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setText("Make clusters")}}else{if(d.isDisplayedConvexhulls()=="Pathways"){b.lookupReference("highlightPathways").setChecked(true);metExploreD3.fireEvent("vizIdDrawing","enableMakeClusters");if(d.useClusters()){Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setIconCls("unmakeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setTooltip("Release force for clusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setText("Unmake clusters")}else{Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setIconCls("makeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setTooltip("Make clusters in function of highlighted component");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setText("Make clusters")}}else{b.lookupReference("highlightCompartments").setChecked(false);b.lookupReference("highlightPathways").setChecked(false);metExploreD3.fireEvent("vizIdDrawing","disableMakeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setIconCls("makeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setTooltip("Make clusters in function of highlighted component");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setText("Make clusters")}}},scope:a});b.lookupReference("highlightCompartments").on({click:a.checkHandler,scope:a});b.lookupReference("highlightPathways").on({click:a.checkHandler,scope:a})},checkHandler:function(a,c){var b=this;if(a.checked){b.highlightComponents(a.text);a.parentMenu.items.items.filter(function(d){return d!=a}).forEach(function(d){d.setChecked(false)})}else{b.hideComponents()}},highlightComponents:function(f){var b=this,d=b.getViewModel(),c=b.getView();var a=_metExploreViz.getGeneralStyle();a.setDisplayConvexhulls(false);metExploreD3.GraphLink.displayConvexhulls("viz");metExploreD3.GraphNetwork.tick("viz");a.setDisplayConvexhulls(f);metExploreD3.GraphLink.displayConvexhulls("viz");metExploreD3.GraphNetwork.tick("viz");a.setDisplayCaption(f);metExploreD3.GraphCaption.majCaption();metExploreD3.fireEvent("vizIdDrawing","enableMakeClusters")},hideComponents:function(){var b=this,d=b.getViewModel(),c=b.getView();var a=_metExploreViz.getGeneralStyle();a.setDisplayConvexhulls(false);metExploreD3.GraphLink.displayConvexhulls("viz");metExploreD3.GraphNetwork.tick("viz");a.setDisplayCaption(false);metExploreD3.GraphCaption.majCaption();metExploreD3.fireEvent("generalStyleForm","setGeneralStyle");metExploreD3.fireEvent("vizIdDrawing","disableMakeClusters")}},0,0,0,0,["controller.menu-vizConvexHullMenu-vizConvexHullMenu"],0,[metExploreViz.view.menu.viz_ConvexHullMenu,"Viz_ConvexHullMenuController"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ConvexHullMenu.Viz_ConvexHullMenuModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.menu-vizConvexHullMenu-vizConvexHullMenu"],0,[metExploreViz.view.menu.viz_ConvexHullMenu,"Viz_ConvexHullMenuModel"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ConvexHullMenu.Viz_ConvexHullMenu",Ext.menu.Menu,{controller:"menu-vizConvexHullMenu-vizConvexHullMenu",viewModel:{type:"menu-vizConvexHullMenu-vizConvexHullMenu"},items:[{text:"Compartments",checked:false,reference:"highlightCompartments"},{text:"Pathways",checked:false,reference:"highlightPathways"}]},0,["vizConvexHullMenu"],["component","box","container","panel","menu","vizConvexHullMenu"],{component:true,box:true,container:true,panel:true,menu:true,vizConvexHullMenu:true},["widget.vizConvexHullMenu"],0,[metExploreViz.view.menu.viz_ConvexHullMenu,"Viz_ConvexHullMenu"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_DrawingMenu.Viz_DrawingMenu",Ext.menu.Menu,{controller:"menu-vizDrawingMenu-vizDrawingMenu",viewModel:{type:"menu-vizDrawingMenu-vizDrawingMenu"},items:[{text:"Remove side compounds",reference:"removeSideCompounds",tooltip:"Remove metabolites annotated as side compounds",iconCls:"delete-sideCompounds"},{text:"Layout",scale:"large",menu:{id:"vizIdLayoutMenu",xtype:"vizLayoutMenu"},id:"vizLayoutMenuID",reference:"vizLayoutMenuID",padding:"0 0 0 0",iconCls:"drawhierarchicallayout",hidden:true},{text:"Duplicate side compounds",reference:"duplicateSideCompounds",tooltip:"Duplicate metabolites annotated as side compounds",iconCls:"duplicate-sideCompounds"},{text:"Color",scale:"large",menu:{id:"vizIdColorMenu",xtype:"vizColorMenu"},id:"vizColorMenuID",reference:"vizColorMenuID",padding:"0 0 0 0",iconCls:"color"},{text:"Draw closer substrates/products",reference:"clustMetabolites",iconCls:"metabolitesLinkedByType"},{text:"Highlight component",scale:"large",menu:{id:"vizIdConvexHullMenu",xtype:"vizConvexHullMenu"},id:"vizConvexHullMenuID",reference:"vizConvexHullMenuID",padding:"0 0 0 0",iconCls:"highlightCompartments"},{text:"Make clusters",reference:"makeClusters",tooltip:"Make clusters in function of highlighted component",iconCls:"makeClusters",disabled:true}]},0,["vizDrawingMenu"],["component","box","container","panel","menu","vizDrawingMenu"],{component:true,box:true,container:true,panel:true,menu:true,vizDrawingMenu:true},["widget.vizDrawingMenu"],0,[metExploreViz.view.menu.viz_DrawingMenu,"Viz_DrawingMenu"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_LoadMenu.Viz_LoadMenuController",Ext.app.ViewController,{init:function(){var a=this,c=a.getViewModel(),b=a.getView();b.on({mouseleave:function(f,d,g){f.hide()},scope:a});b.on({cartFilled:function(){b.lookupReference("loadNetworkFromWebsite").setDisabled(false)},scope:a});b.lookupReference("loadNetworkFromJSON").on({click:function(){var d=Ext.getCmp("IDimportNetwork");if(d!=undefined){d.fileInputEl.dom.click()}},scope:a});b.lookupReference("loadNetworkFromWebsite").on({click:function(){metExploreD3.GraphPanel.refreshPanel(_metExploreViz.getDataFromWebSite())},scope:a})},loadMapping:function(){metExploreD3.GraphMapping.loadMapping()}},0,0,0,0,["controller.menu-vizLoadMenu-vizLoadMenu"],0,[metExploreViz.view.menu.viz_LoadMenu,"Viz_LoadMenuController"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_LoadMenu.Viz_LoadMenuModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.menu-vizLoadMenu-vizLoadMenu"],0,[metExploreViz.view.menu.viz_LoadMenu,"Viz_LoadMenuModel"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_LoadMenu.Viz_LoadMenu",Ext.menu.Menu,{controller:"menu-vizLoadMenu-vizLoadMenu",viewModel:{type:"menu-vizLoadMenu-vizLoadMenu"},id:"viz_LoadMenu",items:[{text:"Load network from json file",reference:"loadNetworkFromJSON",tooltip:"Load network from json file",iconCls:"importToRsxFromJSON"},{text:"Load network from website",reference:"loadNetworkFromWebsite",tooltip:"Load network from website",iconCls:"importToRsxFromWS",disabled:true,hidden:false}]},0,["vizLoadMenu"],["component","box","container","panel","menu","vizLoadMenu"],{component:true,box:true,container:true,panel:true,menu:true,vizLoadMenu:true},["widget.vizLoadMenu"],0,[metExploreViz.view.menu.viz_LoadMenu,"Viz_LoadMenu"],0));(Ext.cmd.derive("metExploreViz.view.panel.viz.VizController",Ext.app.ViewController,{init:function(){var a=this,c=a.getViewModel(),b=a.getView();b.on({initiateViz:a.initiateViz,scope:a});b.on({resize:function(){metExploreD3.GraphPanel.resizeViz("viz");var d=_metExploreViz.getSessionById("viz");if(d.isActive()){metExploreD3.GraphPanel.resizePanels("viz")}},scope:a})},initiateViz:function(){$("#viz").on("contextmenu",function(b){b.preventDefault();var d=_metExploreViz.getSessionById("viz");var c=Ext.getCmp("viz");if(c!=undefined){if(b.target.id=="D3viz"||b.target.parentNode.parentNode.id=="D3viz"||b.target.parentNode.id=="graphComponent"){if(d.getSelectedNodes().length!=0){c.CtxMenu=new Ext.menu.Menu({items:[{text:"Remove selected nodes",hidden:false,iconCls:"removeNode",handler:function(){metExploreD3.GraphNetwork.removeSelectedNode("viz")}},{text:"Fix selected nodes",hidden:false,iconCls:"lock_font_awesome",handler:function(){metExploreD3.GraphNode.fixSelectedNode("viz")}},{text:"Side compounds (duplicate)",hidden:false,iconCls:"duplicate-sideCompounds",handler:function(){var f=_metExploreViz.getSessionById("viz");metExploreD3.GraphNetwork.duplicateSideCompoundsSelected("viz")}}]})}}else{if(b.target.id==""){if(b.target.parentNode.textContent!=""){if(b.target.previousSibling.previousSibling==null){var a=b.target.previousSibling}else{var a=b.target.previousSibling.previousSibling}}else{var a=b.target.parentNode.parentNode.firstChild}}else{var a=b.target}c.CtxMenu=new Ext.menu.Menu({items:[{text:"Remove the node",hidden:false,iconCls:"removeNode",handler:function(){console.log(a);metExploreD3.GraphNetwork.removeOnlyClickedNode(metExploreD3.GraphNode.selectNodeData(a.parentNode),"viz")}},{text:"Side compound (duplicate)",hidden:false,iconCls:"duplicate-sideCompounds",handler:function(){console.log(a);metExploreD3.GraphNetwork.duplicateASideCompoundSelected(a.parentNode,"viz")}},{text:"Change name",hidden:false,iconCls:"edit",handler:function(){console.log(a);metExploreD3.GraphNode.changeName(a.parentNode)}},{text:"Select neighbours (N+select)",hidden:false,iconCls:"neighbours",handler:function(){console.log(a);metExploreD3.GraphNode.selectNeighbours(metExploreD3.GraphNode.selectNodeData(a.parentNode),"viz")}},{text:"See more information",hidden:!metExploreD3.getGeneralStyle().hasEventForNodeInfo(),iconCls:"info",handler:function(){var g=a.id;var f=_metExploreViz.getSessionById("viz").getD3Data().getNodeById(g);console.log(f);metExploreD3.fireEventParentWebSite("seeMoreInformation",metExploreD3.GraphNode.selectNodeData(a.parentNode))}}]})}}if(c.CtxMenu!=undefined){c.CtxMenu.showAt(b.clientX,b.clientY)}})}},0,0,0,0,["controller.panel-viz-viz"],0,[metExploreViz.view.panel.viz,"VizController"],0));(Ext.cmd.derive("metExploreViz.view.panel.viz.VizModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.panel-viz-viz"],0,[metExploreViz.view.panel.viz,"VizModel"],0));(Ext.cmd.derive("metExploreViz.view.panel.viz.Viz",Ext.panel.Panel,{controller:"panel-viz-viz",viewModel:{type:"panel-viz-viz"},margins:"0 0 0 0",closable:false,region:"center",height:"100%",width:"100%",flex:1,split:true,layout:{type:"vbox",align:"stretch",pack:"center"}},0,["viz"],["component","box","container","panel","viz"],{component:true,box:true,container:true,panel:true,viz:true},["widget.viz"],0,[metExploreViz.view.panel.viz,"Viz"],0));(Ext.cmd.derive("metExploreViz.view.panel.graphPanel.GraphPanel",Ext.panel.Panel,{controller:"panel-graphpanel-graphpanel",viewModel:{type:"panel-graphpanel-graphpanel"},height:"100%",width:"100%",margins:"0 0 0 0",split:true,layout:{type:"vbox",align:"stretch"},items:[{tbar:{id:"tbarGraph",items:[{text:"Load network",scale:"large",menu:{xtype:"vizLoadMenu"},tooltip:"You must create a network to use this menu",id:"vizLoadMenuID",reference:"vizLoadMenuID",padding:"5px 5px 5px 5px",iconCls:"importToRsx",cls:"loadButton",iconAlign:"left"},{text:"Mining",scale:"large",menu:{xtype:"vizMiningMenu"},tooltip:"You must create a network to use this menu",id:"vizMiningMenuID",reference:"vizMiningMenuID",disabled:true,hidden:false,padding:"0 0 0 0"},{text:"Drawing",scale:"large",menu:{id:"vizIdDrawing",xtype:"vizDrawingMenu"},tooltip:"You must create a network to use this menu",id:"vizDrawingMenuID",reference:"vizDrawingMenuID",disabled:true,hidden:false,padding:"0 0 0 0"},{text:"Export",scale:"large",menu:{xtype:"vizExportMenu"},tooltip:"You must create a network to use this menu",id:"vizExportMenuID",reference:"vizExportMenuID",disabled:true,hidden:false,padding:"0 0 0 0"},{text:"Import",scale:"large",menu:{xtype:"vizImportMenu"},tooltip:"You must create a network to use this menu",id:"vizImportMenuID",reference:"vizImportMenuID",disabled:true,hidden:false,padding:"0 0 0 0"},{text:"Save",scale:"large",menu:{xtype:"vizSaveMenu"},tooltip:"You must create a network to use this menu",id:"vizSaveMenuID",reference:"vizSaveMenuID",disabled:true,hidden:false,padding:"0 0 0 0"},"-",{xtype:"button",overflowText:"Copy network",scale:"large",id:"buttonCopyNetwork",reference:"buttonCopyNetwork",tooltip:"You must create a network to copy the network",iconCls:"copyNetwork",disabled:true,border:false,padding:"0 0 0 0",listeners:{click:function(){var a=Ext.getCmp("comparePanel");if(a!=undefined){a.fireEvent("copyNetwork")}}}},"-",{border:false,disabled:true,xtype:"panel",reference:"searchNode",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",tooltip:"Find node by name, id, compartment...",name:"searchNodeTextField",reference:"searchNodeTextField",referenceHolder:true,fieldLabel:"Search Node(s)",scale:"large",listeners:{change:function(g,a,c){var b=this.container.component.items.items;var f=undefined;for(var d=0;d<b.length;d++){if(b[d].reference=="searchNodeButton"){f=b[d]}}if(a.length>0&&c.length==0){f.setDisabled(false)}else{if(c.length>0&&a.length==0){f.setDisabled(true)}}},specialkey:function(a,g){var b=this.container.component.items.items;var f=undefined;for(var d=0;d<b.length;d++){if(b[d].reference=="searchNodeButton"){f=b[d]}}if(g.getKey()==g.ENTER){var c=f;console.log(c);if(c!=undefined){c.fireEvent("click")}}}}},{xtype:"button",reference:"searchNodeButton",iconCls:"search",scale:"large",border:false,disabled:true,tooltip:"Find node by name, id, compartment...",padding:"0 0 0 0"}]}]}},{layout:{type:"border",align:"stretch"},xtype:"panel",width:"100%",margins:"0 0 0 0",closable:false,region:"south",flex:1,items:[{title:"Network Manager",id:"comparisonSidePanel",xtype:"comparisonSidePanel"},{id:"viz",xtype:"viz"}]},{title:"Comparative Network",closable:false,id:"comparePanel",xtype:"comparePanel"}]},0,["graphPanel"],["component","box","container","panel","graphPanel"],{component:true,box:true,container:true,panel:true,graphPanel:true},["widget.graphPanel"],0,[metExploreViz.view.panel.graphPanel,"GraphPanel"],0));(Ext.cmd.derive("metExploreViz.view.panel.comparisonSidePanel.ComparisonSidePanelController",Ext.app.ViewController,{init:function(){var a=this,c=a.getViewModel(),b=a.getView();b.on({newMapping:a.drawCaption,scope:a})},drawCaption:function(){metExploreD3.GraphCaption.drawCaption()}},0,0,0,0,["controller.panel-comparisonSidePanel-comparisonSidePanel"],0,[metExploreViz.view.panel.comparisonSidePanel,"ComparisonSidePanelController"],0));(Ext.cmd.derive("metExploreViz.view.panel.comparisonSidePanel.ComparisonSidePanel",Ext.panel.Panel,{controller:"panel-comparisonSidePanel-comparisonSidePanel",collapsible:true,collapsed:true,width:"20%",height:"100%",margins:"0 0 2 0",split:true,layout:"accordion",closable:false,region:"west",items:[{title:"Omics",id:"selectConditionForm",xtype:"selectConditionForm"},{title:"Style",id:"updateStyleForm",xtype:"updateStyleForm",layout:{type:"vbox",align:"stretch"}}]},0,["comparisonSidePanel"],["component","box","container","panel","comparisonSidePanel"],{component:true,box:true,container:true,panel:true,comparisonSidePanel:true},["widget.comparisonSidePanel"],0,[metExploreViz.view.panel.comparisonSidePanel,"ComparisonSidePanel"],0));(Ext.cmd.derive("metExploreViz.view.panel.networkPanel.NetworkPanel",Ext.panel.Panel,{layout:"border",controller:"panel-networkPanel-networkPanel",id:"NetworkPanel",layout:"border",height:"100%",width:"100%",border:true,items:[{closable:false,id:"graphPanel",xtype:"graphPanel",region:"center"},{hidden:true,id:"buttonLoadNetworkFromJSON",xtype:"buttonImportToNetwork"}]},0,["networkPanel"],["component","box","container","panel","networkPanel"],{component:true,box:true,container:true,panel:true,networkPanel:true},["widget.networkPanel"],0,[metExploreViz.view.panel.networkPanel,"NetworkPanel"],0));Ext.onReady(function(){var a=Ext.create("metExploreViz.view.panel.networkPanel.NetworkPanel",{closable:false,xtype:"networkPanel",id:"networkPanel"})});!function(){function hz(a){return null!=a&&!isNaN(a)}function hC(a){return a.length}function qx(b){for(var a=1;b*a%1;){a*=10}return a}function hP(b,c){try{for(var a in c){Object.defineProperty(b.prototype,a,{value:c[a],enumerable:!1})}}catch(d){b.prototype=c}}function hk(){}function qb(a){return qD+a in this}function hq(a){return a=qD+a,a in this&&delete this[a]}function qe(){var a=[];return this.forEach(function(b){a.push(b)}),a}function pX(){var b=0;for(var a in this){a.charCodeAt(0)===p6&&++b}return b}function hH(){for(var a in this){if(a.charCodeAt(0)===p6){return !1}}return !0}function fG(){}function al(a,b,c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function ad(c,f){if(f in c){return f}f=f.charAt(0).toUpperCase()+f.substring(1);for(var b=0,a=cG.length;a>b;++b){var d=cG[b]+f;if(d in c){return d}}}function ag(){}function id(){}function g4(b){function c(){for(var j,f=a,g=-1,h=f.length;++g<h;){(j=f[g].on)&&j.apply(this,arguments)}return b}var a=[],d=new hk();return c.on=function(j,g){var h,f=d.get(j);return arguments.length<2?f&&f.on:(f&&(f.on=null,a=a.slice(0,h=a.indexOf(f)).concat(a.slice(h+1)),d.remove(j)),g&&a.push(d.set(j,{on:g})),b)},c}function qC(){cd.event.preventDefault()}function fk(){for(var b,a=cd.event;b=a.sourceEvent;){a=b}return a}function gI(b){for(var c=new id(),a=0,d=arguments.length;++a<d;){c[arguments[a]]=g4(c)}return c.of=function(f,g){return function(h){try{var j=h.sourceEvent=cd.event;h.target=b,cd.event=h,c[h.type].apply(f,g)}finally{cd.event=j}}},c}function gS(a){return f9(a,hR),a}function j6(a){return"function"==typeof a?a:function(){return gB(a,this)}}function qg(a){return"function"==typeof a?a:function(){return gK(a,this)}}function qd(d,j){function b(){this.removeAttribute(d)}function a(){this.removeAttributeNS(d.space,d.local)}function g(){this.setAttribute(d,j)}function h(){this.setAttributeNS(d.space,d.local,j)}function c(){var m=j.apply(this,arguments);null==m?this.removeAttribute(d):this.setAttribute(d,m)}function f(){var m=j.apply(this,arguments);null==m?this.removeAttributeNS(d.space,d.local):this.setAttributeNS(d.space,d.local,m)}return d=cd.ns.qualify(d),null==j?d.local?a:b:"function"==typeof j?d.local?f:c:d.local?h:g}function gV(a){return a.trim().replace(/\s+/g," ")}function iR(a){return new RegExp("(?:^|\\s+)"+cd.requote(a)+"(?:\\s+|$)","g")}function fM(a){return a.trim().split(/^|\s+/)}function qj(c,f){function b(){for(var g=-1;++g<d;){c[g](this,f)}}function a(){for(var h=-1,g=f.apply(this,arguments);++h<d;){c[h](this,g)}}c=fM(c).map(qr);var d=c.length;return"function"==typeof f?a:b}function qr(b){var a=iR(b);return function(f,d){if(c=f.classList){return d?c.add(b):c.remove(b)}var c=f.getAttribute("class")||"";d?(a.lastIndex=0,a.test(c)||f.setAttribute("class",gV(c+" "+b))):f.setAttribute("class",gV(c.replace(a," ")))}}function qo(c,g,b){function a(){this.style.removeProperty(c)}function d(){this.style.setProperty(c,g,b)}function f(){var h=g.apply(this,arguments);null==h?this.style.removeProperty(c):this.style.setProperty(c,h,b)}return null==g?a:"function"==typeof g?f:d}function i8(c,f){function b(){delete this[c]}function a(){this[c]=f}function d(){var g=f.apply(this,arguments);null==g?delete this[c]:this[c]=g}return null==f?b:"function"==typeof f?d:a}function pV(a){return"function"==typeof a?a:(a=cd.ns.qualify(a)).local?function(){return this.ownerDocument.createElementNS(a.space,a.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,a)}}function gA(a){return{__data__:a}}function h5(a){return function(){return bE(this,a)}}function iN(a){return arguments.length||(a=cd.ascending),function(c,b){return c&&b?a(c.__data__,b.__data__):!c-!b}}function iU(d,j){for(var b=0,a=d.length;a>b;b++){for(var g,h=d[b],c=0,f=h.length;f>c;c++){(g=h[c])&&j(g,c,b)}}return d}function qk(a){return f9(a,i9),a}function i2(a){var b,c;return function(m,h,j){var d,g=a[j].update,f=g.length;for(j!=c&&(c=j,b=0),h>=b&&(b=h+1);!(d=g[b])&&++b<f;){}return d}}function iL(){var a=this.__transition__;a&&++a.active}function fU(d,o,g){function b(){var p=this[c];p&&(this.removeEventListener(d,p,p.$),delete this[c])}function m(){var p=h(o,cQ(arguments));b.call(this),this.addEventListener(d,this[c]=p,p.$=g),p._=o}function f(){var r,p=new RegExp("^__on([^.]+)"+cd.requote(d)+"$");for(var s in this){if(r=s.match(p)){var q=this[s];this.removeEventListener(r[1],q,q.$),delete this[s]}}}var c="__on"+d,j=d.indexOf("."),h=hF;j>0&&(d=d.substring(0,j));var a=eD.get(d);return a&&(d=a,h=h3),j?o?m:b:o?ag:f}function hF(b,a){return function(d){var c=cd.event;cd.event=d,a[0]=this.__data__;try{b.apply(this,a)}finally{cd.event=c}}}function h3(a,b){var c=hF(a,b);return function(f){var g=this,d=f.relatedTarget;d&&(d===g||8&d.compareDocumentPosition(g))||c.call(g,f)}}function i4(){var c=".dragsuppress-"+ ++ql,f="click"+c,b=cd.select(jG).on("touchmove"+c,qC).on("dragstart"+c,qC).on("selectstart"+c,qC);if(bn){var a=qp.style,d=a[bn];a[bn]="none"}return function(g){function h(){b.on(f,null)}b.on(c,null),bn&&(a[bn]=d),g&&(b.on(f,function(){qC(),h()},!0),setTimeout(h,0))}}function iA(c,g){g.changedTouches&&(g=g.changedTouches[0]);var b=c.ownerSVGElement||c;if(b.createSVGPoint){var a=b.createSVGPoint();if(0>aC&&(jG.scrollX||jG.scrollY)){b=cd.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var d=b[0][0].getScreenCTM();aC=!(d.f||d.e),b.remove()}return aC?(a.x=g.pageX,a.y=g.pageY):(a.x=g.clientX,a.y=g.clientY),a=a.matrixTransform(c.getScreenCTM().inverse()),[a.x,a.y]}var f=c.getBoundingClientRect();return[g.clientX-f.left-c.clientLeft,g.clientY-f.top-c.clientTop]}function hB(a){return a>0?1:0>a?-1:0}function im(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function iG(a){return a>1?0:-1>a?fn:Math.acos(a)}function iB(a){return a>1?j4:-1>a?-j4:Math.asin(a)}function pZ(a){return((a=Math.exp(a))-1/a)/2}function qq(a){return((a=Math.exp(a))+1/a)/2}function iD(a){return((a=Math.exp(2*a))-1)/(a+1)}function hv(a){return(a=Math.sin(a/2))*a}function hL(){}function hh(a,b,c){return new i0(a,b,c)}function i0(a,b,c){this.h=a,this.s=b,this.l=c}function ed(c,g,a){function h(j){return j>360?j-=360:0>j&&(j+=360),60>j?f+(b-f)*j/60:180>j?b:240>j?f+(b-f)*(240-j)/60:f}function d(j){return Math.round(255*h(j))}var f,b;return c=isNaN(c)?0:(c%=360)<0?c+360:c,g=isNaN(g)?0:0>g?0:g>1?1:g,a=0>a?0:a>1?1:a,b=0.5>=a?a*(1+g):a+g-a*g,f=2*a-b,hm(d(c+120),d(c),d(c-120))}function df(a,b,c){return new eN(a,b,c)}function eN(a,b,c){this.h=a,this.c=b,this.l=c}function eO(a,b,c){return isNaN(a)&&(a=0),isNaN(b)&&(b=0),el(c,Math.cos(a*=g6)*b,Math.sin(a)*b)}function el(a,b,c){return new gk(a,b,c)}function gk(a,b,c){this.l=a,this.a=b,this.b=c}function d4(c,g,b){var a=(c+16)/116,d=a+g/500,f=a-b/200;return d=hn(d)*bH,a=hn(a)*g5,f=hn(f)*c9,hm(cZ(3.2404542*d-1.5371385*a-0.4985314*f),cZ(-0.969266*d+1.8760108*a+0.041556*f),cZ(0.0556434*d-0.2040259*a+1.0572252*f))}function p3(a,b,c){return a>0?df(Math.atan2(c,b)*iY,Math.sqrt(b*b+c*c),a):df(0/0,0/0,a)}function hn(a){return a>0.206893034?a*a*a:(a-4/29)/7.787037}function bL(a){return a>0.008856?Math.pow(a,1/3):7.787037*a+4/29}function cZ(a){return Math.round(255*(0.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-0.055))}function hd(a){return hm(a>>16,255&a>>8,255&a)}function dS(a){return hd(a)+""}function hm(a,b,c){return new eT(a,b,c)}function eT(a,b,c){this.r=a,this.g=b,this.b=c}function jQ(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function jA(c,m,f){var a,j,d,b=0,h=0,g=0;if(a=/([a-z]+)\((.*)\)/i.exec(c)){switch(j=a[2].split(","),a[1]){case"hsl":return f(parseFloat(j[0]),parseFloat(j[1])/100,parseFloat(j[2])/100);case"rgb":return m(fm(j[0]),fm(j[1]),fm(j[2]))}}return(d=fH.get(c))?m(d.r,d.g,d.b):(null!=c&&"#"===c.charAt(0)&&(4===c.length?(b=c.charAt(1),b+=b,h=c.charAt(2),h+=h,g=c.charAt(3),g+=g):7===c.length&&(b=c.substring(1,3),h=c.substring(3,5),g=c.substring(5,7)),b=parseInt(b,16),h=parseInt(h,16),g=parseInt(g,16)),m(b,h,g))}function d7(c,m,f){var a,j,d=Math.min(c/=255,m/=255,f/=255),b=Math.max(c,m,f),h=b-d,g=(b+d)/2;return h?(j=0.5>g?h/(b+d):h/(2-b-d),a=c==b?(m-f)/h+(f>m?6:0):m==b?(f-c)/h+2:(c-m)/h+4,a*=60):(a=0/0,j=g>0&&1>g?0:a),hh(a,j,g)}function p5(c,g,b){c=jN(c),g=jN(g),b=jN(b);var a=bL((0.4124564*c+0.3575761*g+0.1804375*b)/bH),d=bL((0.2126729*c+0.7151522*g+0.072175*b)/g5),f=bL((0.0193339*c+0.119192*g+0.9503041*b)/c9);return el(116*d-16,500*(a-d),200*(d-f))}function jN(a){return(a/=255)<=0.04045?a/12.92:Math.pow((a+0.055)/1.055,2.4)}function fm(b){var a=parseFloat(b);return"%"===b.charAt(b.length-1)?Math.round(2.55*a):a}function dl(a){return"function"==typeof a?a:function(){return a}}function iI(a){return a}function bz(a){return function(d,c,b){return 2===arguments.length&&"function"==typeof c&&(b=c,c=null),dy(d,c,a,b)}}function dy(d,o,g,b){function m(){var p,q=h.status;if(!q&&h.responseText||q>=200&&300>q||304===q){try{p=g.call(f,h)}catch(r){return c.error.call(f,r),void 0}c.load.call(f,p)}else{c.error.call(f,h)}}var f={},c=cd.dispatch("beforesend","progress","load","error"),j={},h=new XMLHttpRequest(),a=null;return !jG.XDomainRequest||"withCredentials" in h||!/^(http(s)?:)?\/\//.test(d)||(h=new XDomainRequest()),"onload" in h?h.onload=h.onerror=m:h.onreadystatechange=function(){h.readyState>3&&m()},h.onprogress=function(p){var q=cd.event;cd.event=p;try{c.progress.call(f,h)}finally{cd.event=q}},f.header=function(p,q){return p=(p+"").toLowerCase(),arguments.length<2?j[p]:(null==q?delete j[p]:j[p]=q+"",f)},f.mimeType=function(p){return arguments.length?(o=null==p?null:p+"",f):o},f.responseType=function(p){return arguments.length?(a=p,f):a},f.response=function(p){return g=p,f},["get","post"].forEach(function(p){f[p]=function(){return f.send.apply(f,[p].concat(cQ(arguments)))}}),f.send=function(p,s,r){if(2===arguments.length&&"function"==typeof s&&(r=s,s=null),h.open(p,d,!0),null==o||"accept" in j||(j.accept=o+",*/*"),h.setRequestHeader){for(var q in j){h.setRequestHeader(q,j[q])}}return null!=o&&h.overrideMimeType&&h.overrideMimeType(o),null!=a&&(h.responseType=a),null!=r&&f.on("error",r).on("load",function(t){r(null,t)}),c.beforesend.call(f,h),h.send(null==s?null:s),f},f.abort=function(){return h.abort(),f},cd.rebind(f,c,"on"),null==b?f:f.get(fB(b))}function fB(a){return 1===a.length?function(c,b){a(null==c?b:null)}:a}function aq(){var b=cj(),a=aJ()-b;a>24?(isFinite(a)&&(clearTimeout(fw),fw=setTimeout(aq,a)),av=0):(av=1,aS(aq))}function cj(){var a=Date.now();for(ik=cS;ik;){a>=ik.t&&(ik.f=ik.c(a-ik.t)),ik=ik.n}return a}function aJ(){for(var a,b=cS,c=1/0;b;){b.f?b=a?a.n=b.n:cS=b.n:(b.t<c&&(c=b.t),b=(a=b).n)}return dL=a,c}function ig(b,a){return a-(b?Math.ceil(Math.log(b)/Math.LN10):1)}function fb(a,b){var c=Math.pow(10,3*cC(8-b));return{scale:b>8?function(d){return d/c}:function(d){return d*c},symbol:a}}function qv(c){var g=c.decimal,b=c.thousands,a=c.grouping,d=c.currency,f=a?function(j){for(var p=j.length,m=[],o=0,h=a[0];p>0&&h>0;){m.push(j.substring(p-=h,p+h)),h=a[o=(o+1)%a.length]}return m.reverse().join(b)}:iI;return function(t){var z=gb.exec(t),r=z[1]||" ",p=z[2]||">",A=z[3]||"",q=z[4]||"",j=z[5],m=+z[6],w=z[7],s=z[8],v=z[9],y=1,B="",o="",h=!1;switch(s&&(s=+s.substring(1)),(j||"0"===r&&"="===p)&&(j=r="0",p="=",w&&(m-=Math.floor((m-1)/4))),v){case"n":w=!0,v="g";break;case"%":y=100,o="%",v="f";break;case"p":y=100,o="%",v="r";break;case"b":case"o":case"x":case"X":"#"===q&&(B="0"+v.toLowerCase());case"c":case"d":h=!0,s=0;break;case"s":y=-1,v="r"}"$"===q&&(B=d[0],o=d[1]),"r"!=v||s||(v="g"),null!=s&&("g"==v?s=Math.max(1,Math.min(21,s)):("e"==v||"f"==v)&&(s=Math.max(0,Math.min(20,s)))),v=fQ.get(v)||dn;var u=j&&w;return function(C){var D=o;if(h&&C%1){return""}var J=0>C||0===C&&0>1/C?(C=-C,"-"):A;if(0>y){var F=cd.formatPrefix(C,s);C=F.scale(C),D=F.symbol+o}else{C*=y}C=v(C,s);var H=C.lastIndexOf("."),E=0>H?C:C.substring(0,H),K=0>H?"":g+C.substring(H+1);!j&&w&&(E=f(E));var G=B.length+E.length+K.length+(u?0:J.length),I=m>G?new Array(G=m-G+1).join(r):"";return u&&(E=f(I+E)),J+=B,C=E+K,("<"===p?J+C+I:">"===p?I+J+C:"^"===p?I.substring(0,G>>=1)+J+C+I.substring(G):J+(u?C:I+C))+D}}}function dn(a){return a+""}function ff(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function ej(c,m,f){function a(q){var p=c(q),o=d(p,1);return o-q>q-p?p:o}function j(o){return m(o=c(new iJ(o-1)),1),o}function d(o,p){return m(o=new iJ(+o),p),o}function b(q,o,s){var p=j(q),r=[];if(s>1){for(;o>p;){f(p)%s||r.push(new Date(+p)),m(p,1)}}else{for(;o>p;){r.push(new Date(+p)),m(p,1)}}return r}function h(p,q,o){try{iJ=ff;var r=new ff();return r._=p,b(r,q,o)}finally{iJ=Date}}c.floor=c,c.round=a,c.ceil=j,c.offset=d,c.range=b;var g=c.utc=pW(c);return g.floor=g,g.round=pW(a),g.ceil=pW(j),g.offset=pW(d),g.range=h,c}function pW(a){return function(d,c){try{iJ=ff;var b=new ff();return b._=d,a(b,c)._}finally{iJ=Date}}}function eA(D){function j(K){function L(O){for(var P,S,T,R=[],Q=-1,N=0;++Q<M;){37===K.charCodeAt(Q)&&(R.push(K.substring(N,Q)),null!=(S=aL[P=K.charAt(++Q)])&&(P=K.charAt(++Q)),(T=v[P])&&(P=T(O,null==S?"e"===P?" ":"0":S)),R.push(P),N=Q+1)}return R.push(K.substring(N,Q)),R.join("")}var M=K.length;return L.parse=function(N){var O={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},Q=b(O,K,N,0);if(Q!=N.length){return null}"p" in O&&(O.H=O.H%12+12*O.p);var R=null!=O.Z&&iJ!==ff,P=new (R?ff:iJ)();return"j" in O?P.setFullYear(O.y,0,O.j):"w" in O&&("W" in O||"U" in O)?(P.setFullYear(O.y,0,1),P.setFullYear(O.y,0,"W" in O?(O.w+6)%7+7*O.W-(P.getDay()+5)%7:O.w+7*O.U-(P.getDay()+6)%7)):P.setFullYear(O.y,O.m,O.d),P.setHours(O.H+Math.floor(O.Z/100),O.M+O.Z%100,O.S,O.L),R?P._:P},L.toString=function(){return K},L}function b(P,L,R,M){for(var K,Q,O,T=0,S=L.length,N=R.length;S>T;){if(M>=N){return -1}if(K=L.charCodeAt(T++),37===K){if(O=L.charAt(T++),Q=s[O in aL?L.charAt(T++):O],!Q||(M=Q(P,R,M))<0){return -1}}else{if(K!=R.charCodeAt(M++)){return -1}}}return M}function z(L,M,K){m.lastIndex=0;var N=m.exec(M.substring(K));return N?(L.w=w.get(N[0].toLowerCase()),K+N[0].length):-1}function d(L,M,K){p.lastIndex=0;var N=p.exec(M.substring(K));return N?(L.w=u.get(N[0].toLowerCase()),K+N[0].length):-1}function H(L,M,K){f.lastIndex=0;var N=f.exec(M.substring(K));return N?(L.m=A.get(N[0].toLowerCase()),K+N[0].length):-1}function C(L,M,K){h.lastIndex=0;var N=h.exec(M.substring(K));return N?(L.m=G.get(N[0].toLowerCase()),K+N[0].length):-1}function q(K,L,M){return b(K,v.c.toString(),L,M)}function g(K,L,M){return b(K,v.x.toString(),L,M)}function o(K,L,M){return b(K,v.X.toString(),L,M)}function F(L,M,K){var N=t.get(M.substring(K,K+=2).toLowerCase());return null==N?-1:(L.p=N,K)}var a=D.dateTime,I=D.date,J=D.time,B=D.periods,y=D.days,c=D.shortDays,E=D.months,r=D.shortMonths;j.utc=function(K){function M(O){try{iJ=ff;var N=new iJ();return N._=O,L(N)}finally{iJ=Date}}var L=j(K);return M.parse=function(O){try{iJ=ff;var N=L.parse(O);return N&&N._}finally{iJ=Date}},M.toString=L.toString,M},j.multi=j.utc.multi=iH;var t=cd.map(),p=fp(y),u=af(y),m=fp(c),w=af(c),h=fp(E),G=af(E),f=fp(r),A=af(r);B.forEach(function(L,K){t.set(L.toLowerCase(),K)});var v={a:function(K){return c[K.getDay()]},A:function(K){return y[K.getDay()]},b:function(K){return r[K.getMonth()]},B:function(K){return E[K.getMonth()]},c:j(a),d:function(L,K){return cY(L.getDate(),K,2)},e:function(L,K){return cY(L.getDate(),K,2)},H:function(L,K){return cY(L.getHours(),K,2)},I:function(L,K){return cY(L.getHours()%12||12,K,2)},j:function(L,K){return cY(1+cE.dayOfYear(L),K,3)},L:function(L,K){return cY(L.getMilliseconds(),K,3)},m:function(L,K){return cY(L.getMonth()+1,K,2)},M:function(L,K){return cY(L.getMinutes(),K,2)},p:function(K){return B[+(K.getHours()>=12)]},S:function(L,K){return cY(L.getSeconds(),K,2)},U:function(L,K){return cY(cE.sundayOfYear(L),K,2)},w:function(K){return K.getDay()},W:function(L,K){return cY(cE.mondayOfYear(L),K,2)},x:j(I),X:j(J),y:function(L,K){return cY(L.getFullYear()%100,K,2)},Y:function(L,K){return cY(L.getFullYear()%10000,K,4)},Z:fI,"%":function(){return"%"}},s={a:z,A:d,b:H,B:C,c:q,d:cz,e:cz,H:fx,I:fx,j:c1,L:gj,m:cT,M:i3,p:F,S:p1,U:gO,w:cO,W:bC,x:g,X:o,y:aB,Y:jF,Z:b8,"%":cp};return j}function cY(c,g,b){var a=0>c?"-":"",d=(a?-c:c)+"",f=d.length;return a+(b>f?new Array(b-f+1).join(g)+d:d)}function fp(a){return new RegExp("^(?:"+a.map(cd.requote).join("|")+")","i")}function af(b){for(var c=new hk(),a=-1,d=b.length;++a<d;){c.set(b[a].toLowerCase(),a)}return c}function cO(b,c,a){e7.lastIndex=0;var d=e7.exec(c.substring(a,a+1));return d?(b.w=+d[0],a+d[0].length):-1}function gO(b,c,a){e7.lastIndex=0;var d=e7.exec(c.substring(a));return d?(b.U=+d[0],a+d[0].length):-1}function bC(b,c,a){e7.lastIndex=0;var d=e7.exec(c.substring(a));return d?(b.W=+d[0],a+d[0].length):-1}function jF(b,c,a){e7.lastIndex=0;var d=e7.exec(c.substring(a,a+4));return d?(b.y=+d[0],a+d[0].length):-1}function aB(b,c,a){e7.lastIndex=0;var d=e7.exec(c.substring(a,a+2));return d?(b.y=dW(+d[0]),a+d[0].length):-1}function b8(a,b,c){return/^[+-]\d{4}$/.test(b=b.substring(c,c+5))?(a.Z=+b,c+5):-1}function dW(a){return a+(a>68?1900:2000)}function cT(b,c,a){e7.lastIndex=0;var d=e7.exec(c.substring(a,a+2));return d?(b.m=d[0]-1,a+d[0].length):-1}function cz(b,c,a){e7.lastIndex=0;var d=e7.exec(c.substring(a,a+2));return d?(b.d=+d[0],a+d[0].length):-1}function c1(b,c,a){e7.lastIndex=0;var d=e7.exec(c.substring(a,a+3));return d?(b.j=+d[0],a+d[0].length):-1}function fx(b,c,a){e7.lastIndex=0;var d=e7.exec(c.substring(a,a+2));return d?(b.H=+d[0],a+d[0].length):-1}function i3(b,c,a){e7.lastIndex=0;var d=e7.exec(c.substring(a,a+2));return d?(b.M=+d[0],a+d[0].length):-1}function p1(b,c,a){e7.lastIndex=0;var d=e7.exec(c.substring(a,a+2));return d?(b.S=+d[0],a+d[0].length):-1}function gj(b,c,a){e7.lastIndex=0;var d=e7.exec(c.substring(a,a+3));return d?(b.L=+d[0],a+d[0].length):-1}function fI(c){var f=c.getTimezoneOffset(),b=f>0?"-":"+",a=~~(cC(f)/60),d=cC(f)%60;return b+cY(a,"0",2)+cY(d,"0",2)}function cp(b,c,a){cx.lastIndex=0;var d=cx.exec(c.substring(a,a+1));return d?a+d[0].length:-1}function iH(a){for(var b=a.length,c=-1;++c<b;){a[c][0]=this(a[c][0])}return function(g){for(var f=0,d=a[f];!d[1](g);){d=a[++f]}return d[0](g)}}function bU(){}function d2(c,g,b){var a=b.s=c+g,d=a-c,f=a-d;b.t=c-f+(g-d)}function eY(b,a){b&&gF.hasOwnProperty(b.type)&&gF[b.type](b,a)}function cv(c,g,b){var a,d=-1,f=c.length-b;for(g.lineStart();++d<f;){a=c[d],g.point(a[0],a[1],a[2])}g.lineEnd()}function qA(b,c){var a=-1,d=b.length;for(c.polygonStart();++a<d;){cv(b[a],c,1)}c.polygonEnd()}function am(){function c(q,m){q*=g6,m=m*g6/2+fn/4;var u=q-a,p=u>=0?1:-1,j=p*u,h=Math.cos(m),o=Math.sin(m),r=f*o,t=d*h+r*Math.cos(j),s=r*p*Math.sin(j);gw.add(Math.atan2(s,t)),a=q,d=h,f=o}var g,b,a,d,f;gE.point=function(j,h){gE.point=c,a=(g=j)*g6,d=Math.cos(h=(b=h)*g6/2+fn/4),f=Math.sin(h)},gE.lineEnd=function(){c(g,b)}}function cf(b){var c=b[0],a=b[1],d=Math.cos(a);return[d*Math.cos(c),d*Math.sin(c),Math.sin(a)]}function d1(b,a){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]}function fX(b,a){return[b[1]*a[2]-b[2]*a[1],b[2]*a[0]-b[0]*a[2],b[0]*a[1]-b[1]*a[0]]}function h2(b,a){b[0]+=a[0],b[1]+=a[1],b[2]+=a[2]}function gz(b,a){return[b[0]*a,b[1]*a,b[2]*a]}function dB(b){var a=Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]);b[0]/=a,b[1]/=a,b[2]/=a}function pU(a){return[Math.atan2(a[1],a[0]),iB(a[2])]}function hI(b,a){return cC(b[0]-a[0])<bm&&cC(b[1]-a[1])<bm}function eS(a,b){a*=g6;var c=Math.cos(b*=g6);i1(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function i1(a,b,c){++dN,hN+=(a-hN)/dN,eV+=(b-eV)/dN,i5+=(c-i5)/dN}function cq(){function b(h,m){h*=g6;var o=Math.cos(m*=g6),f=o*Math.cos(h),j=o*Math.sin(h),g=Math.sin(m),p=Math.atan2(Math.sqrt((p=a*g-d*j)*p+(p=d*f-c*g)*p+(p=c*j-a*f)*p),c*f+a*j+d*g);bv+=p,aW+=p*(c+(c=f)),ep+=p*(a+(a=j)),bl+=p*(d+(d=g)),i1(c,a,d)}var c,a,d;gX.point=function(g,h){g*=g6;var f=Math.cos(h*=g6);c=f*Math.cos(g),a=f*Math.sin(g),d=Math.sin(h),gX.point=b,i1(c,a,d)}}function d8(){gX.point=eS}function bh(){function c(s,v){s*=g6;var h=Math.cos(v*=g6),m=h*Math.cos(s),q=h*Math.sin(s),o=Math.sin(v),p=d*o-f*q,u=f*m-a*o,y=a*q-d*m,r=Math.sqrt(p*p+u*u+y*y),w=a*m+d*q+f*o,j=r&&-iG(w)/r,t=Math.atan2(r,w);qh+=j*p,ay+=j*u,fj+=j*y,bv+=t,aW+=t*(a+(a=m)),ep+=t*(d+(d=q)),bl+=t*(f+(f=o)),i1(a,d,f)}var g,b,a,d,f;gX.point=function(j,h){g=j,b=h,gX.point=c,j*=g6;var m=Math.cos(h*=g6);a=m*Math.cos(j),d=m*Math.sin(j),f=Math.sin(h),i1(a,d,f)},gX.lineEnd=function(){c(g,b),gX.lineEnd=d8,gX.point=eS}}function hS(){return !0}function bT(o,a,p,f,t){var c=[],m=[];if(o.forEach(function(B){if(!((A=B.length-1)<=0)){var A,v=B[0],u=B[A];if(hI(v,u)){t.lineStart();for(var y=0;A>y;++y){t.point((v=B[y])[0],v[1])}return t.lineEnd(),void 0}var z=new gN(v,B,null,!0),w=new gN(v,null,z,!1);z.o=w,c.push(z),m.push(w),z=new gN(u,B,null,!1),w=new gN(u,null,z,!0),z.o=w,c.push(z),m.push(w)}}),m.sort(a),g0(c),g0(m),c.length){for(var r=0,q=p,b=m.length;b>r;++r){m[r].e=q=!q}for(var s,h,d=c[0];;){for(var g=d,j=!0;g.v;){if((g=g.n)===d){return}}s=g.z,t.lineStart();do{if(g.v=g.o.v=!0,g.e){if(j){for(var r=0,b=s.length;b>r;++r){t.point((h=s[r])[0],h[1])}}else{f(g.x,g.n.x,1,t)}g=g.n}else{if(j){s=g.p.z;for(var r=s.length-1;r>=0;--r){t.point((h=s[r])[0],h[1])}}else{f(g.x,g.p.x,-1,t)}g=g.p}g=g.o,s=g.z,j=!j}while(!g.v);t.lineEnd()}}}function g0(c){if(f=c.length){for(var f,b,a=0,d=c[0];++a<f;){d.n=b=c[a],b.p=d,d=b}d.n=b=c[0],b.p=d}}function gN(b,c,a,d){this.x=b,this.z=c,this.o=a,this.e=d,this.v=!1,this.n=this.p=null}function aI(b,c,a,d){return function(g,A){function u(B,D){var C=g(B,D);b(B=C[0],D=C[1])&&A.point(B,D)}function z(D,B){var C=g(D,B);w.point(C[0],C[1])}function j(){p.point=z,w.lineStart()}function h(){p.point=u,w.lineEnd()}function o(D,B){f.push([D,B]);var C=g(D,B);v.point(C[0],C[1])}function t(){v.lineStart(),f=[]}function m(){o(f[0][0],f[0][1]),v.lineEnd();var C,B=v.clean(),E=r.buffer(),D=E.length;if(f.pop(),q.push(f),f=null,D){if(1&B){C=E[0];var G,D=C.length-1,F=-1;for(A.lineStart();++F<D;){A.point((G=C[F])[0],G[1])}return A.lineEnd(),void 0}D>1&&2&B&&E.push(E.pop().concat(E.shift())),s.push(E.filter(eJ))}}var s,q,f,w=c(A),y=g.invert(d[0],d[1]),p={point:u,lineStart:j,lineEnd:h,polygonStart:function(){p.point=o,p.lineStart=t,p.lineEnd=m,s=[],q=[],A.polygonStart()},polygonEnd:function(){p.point=u,p.lineStart=j,p.lineEnd=h,s=cd.merge(s);var B=iQ(y,q);s.length?bT(s,gU,B,a,A):B&&(A.lineStart(),a(null,null,1,A),A.lineEnd()),A.polygonEnd(),s=q=null},sphere:function(){A.polygonStart(),A.lineStart(),a(null,null,1,A),A.lineEnd(),A.polygonEnd()}},r=db(),v=c(r);return p}}function eJ(a){return a.length>1}function db(){var b,a=[];return{lineStart:function(){a.push(b=[])},point:function(c,d){b.push([c,d])},lineEnd:ag,buffer:function(){var c=a;return a=[],b=null,c},rejoin:function(){a.length>1&&a.push(a.pop().concat(a.shift()))}}}function gU(b,a){return((b=b.x)[0]<0?b[1]-j4-bm:j4-b[1])-((a=a.x)[0]<0?a[1]-j4-bm:j4-a[1])}function iQ(A,c){var I=A[0],p=A[1],v=[Math.sin(I),-Math.cos(I),0],E=0,z=0;gw.reset();for(var h=0,b=c.length;b>h;++h){var f=c[h],C=f.length;if(C){for(var H=f[0],F=H[0],G=H[1]/2+fn/4,y=Math.sin(G),t=Math.cos(G),a=1;;){a===C&&(a=0),A=f[a];var B=A[0],g=A[1]/2+fn/4,q=Math.sin(g),r=Math.cos(g),o=B-F,d=o>=0?1:-1,s=d*o,m=s>fn,D=y*q;if(gw.add(Math.atan2(D*d*Math.sin(s),t*r+D*Math.cos(s))),E+=m?o+d*g3:o,m^F>=I^B>=I){var w=fX(cf(H),cf(A));dB(w);var u=fX(v,w);dB(u);var j=(m^o>=0?-1:1)*iB(u[2]);(p>j||p===j&&(w[0]||w[1]))&&(z+=m^o>=0?1:-1)}if(!a++){break}F=B,y=q,t=r,H=A}}}return(-bm>E||bm>E&&0>gw)^1&z}function ab(c){var f,b=0/0,a=0/0,d=0/0;return{lineStart:function(){c.lineStart(),f=1},point:function(h,j){var g=h>0?fn:-fn,m=cC(h-b);cC(m-fn)<bm?(c.point(b,a=(a+j)/2>0?j4:-j4),c.point(d,a),c.lineEnd(),c.lineStart(),c.point(g,a),c.point(h,a),f=0):d!==g&&m>=fn&&(cC(b-d)<bm&&(b-=d*bm),cC(h-g)<bm&&(h-=g*bm),a=cm(b,a,h,j),c.point(d,a),c.lineEnd(),c.lineStart(),c.point(g,a),f=0),c.point(b=h,a=j),d=g},lineEnd:function(){c.lineEnd(),b=a=0/0},clean:function(){return 2-f}}}function cm(c,g,a,h){var d,f,b=Math.sin(c-a);return cC(b)>bm?Math.atan((Math.sin(g)*(f=Math.cos(h))*Math.sin(a)-Math.sin(h)*(d=Math.cos(g))*Math.sin(c))/(d*f*b)):(g+h)/2}function e5(c,g,b,a){var d;if(null==c){d=b*j4,a.point(-fn,d),a.point(0,d),a.point(fn,d),a.point(fn,0),a.point(fn,-d),a.point(0,-d),a.point(-fn,-d),a.point(-fn,0),a.point(-fn,d)}else{if(cC(c[0]-g[0])>bm){var f=c[0]<g[0]?fn:-fn;d=b*f/2,a.point(-f,d),a.point(0,d),a.point(f,d)}else{a.point(g[0],g[1])}}}function hg(c){function m(o,p){return Math.cos(o)*Math.cos(p)>d}function f(p){var t,r,o,s,q;return{lineStart:function(){s=o=!1,q=1},point:function(A,y){var u,z=[A,y],B=m(A,y),v=b?B?0:j(A,y):B?j(A+(0>A?fn:-fn),y):0;if(!t&&(s=o=B)&&p.lineStart(),B!==o&&(u=a(t,z),(hI(t,u)||hI(z,u))&&(z[0]+=bm,z[1]+=bm,B=m(z[0],z[1]))),B!==o){q=0,B?(p.lineStart(),u=a(z,t),p.point(u[0],u[1])):(u=a(t,z),p.point(u[0],u[1]),p.lineEnd()),t=u}else{if(h&&t&&b^B){var w;v&r||!(w=a(z,t,!0))||(q=0,b?(p.lineStart(),p.point(w[0][0],w[0][1]),p.point(w[1][0],w[1][1]),p.lineEnd()):(p.point(w[1][0],w[1][1]),p.lineEnd(),p.lineStart(),p.point(w[0][0],w[0][1])))}}!B||t&&hI(t,z)||p.point(z[0],z[1]),t=z,o=B,r=v},lineEnd:function(){o&&p.lineEnd(),t=null},clean:function(){return q|(s&&o)<<1}}}function a(P,M,s){var D=cf(P),I=cf(M),J=[1,0,0],N=fX(D,I),v=d1(N,N),O=N[0],S=v-O*O;if(!S){return !s&&P}var r=d*v/S,p=-d*O/S,q=fX(J,N),H=gz(J,r),G=gz(N,p);h2(H,G);var t=q,R=d1(H,t),B=d1(t,t),C=R*R-B*(d1(H,H)-1);if(!(0>C)){var w=Math.sqrt(C),Q=gz(t,(-R-w)/B);if(h2(Q,H),Q=pU(Q),!s){return Q}var y,F=P[0],K=M[0],o=P[1],L=M[1];F>K&&(y=F,F=K,K=y);var E=K-F,A=cC(E-fn)<bm,u=A||bm>E;if(!A&&o>L&&(y=o,o=L,L=y),u?A?o+L>0^Q[1]<(cC(Q[0]-F)<bm?o:L):o<=Q[1]&&Q[1]<=L:E>fn^(F<=Q[0]&&Q[0]<=K)){var z=gz(t,(-R+w)/B);return h2(z,H),[Q,pU(z)]}}}function j(r,p){var o=b?c:fn-c,q=0;return -o>r?q|=1:r>o&&(q|=2),-o>p?q|=4:p>o&&(q|=8),q}var d=Math.cos(c),b=d>0,h=cC(d)>bm,g=hJ(c,6*g6);return aI(m,f,g,b?[0,-c]:[-fn,c-fn])}function ef(b,c,a,d){return function(r){var s,m=r.a,o=r.b,h=m.x,t=m.y,q=o.x,g=o.y,u=0,f=1,j=q-h,p=g-t;if(s=b-h,j||!(s>0)){if(s/=j,0>j){if(u>s){return}f>s&&(f=s)}else{if(j>0){if(s>f){return}s>u&&(u=s)}}if(s=a-h,j||!(0>s)){if(s/=j,0>j){if(s>f){return}s>u&&(u=s)}else{if(j>0){if(u>s){return}f>s&&(f=s)}}if(s=c-t,p||!(s>0)){if(s/=p,0>p){if(u>s){return}f>s&&(f=s)}else{if(p>0){if(s>f){return}s>u&&(u=s)}}if(s=d-t,p||!(0>s)){if(s/=p,0>p){if(s>f){return}s>u&&(u=s)}else{if(p>0){if(u>s){return}f>s&&(f=s)}}return u>0&&(r.a={x:h+u*j,y:t+u*p}),1>f&&(r.b={x:h+f*j,y:t+f*p}),r}}}}}}function hX(c,g,a,h){function d(m,j){return cC(m[0]-c)<bm?j>0?0:3:cC(m[0]-a)<bm?j>0?2:1:cC(m[1]-g)<bm?j>0?1:0:j>0?3:2}function f(m,j){return b(m.x,j.x)}function b(m,o){var j=d(m,1),p=d(o,1);return j!==p?j-p:0===j?o[1]-m[1]:1===j?m[0]-o[0]:2===j?m[1]-o[1]:o[0]-m[0]}return function(I){function G(L){for(var O=0,N=E.length,Q=L[1],K=0;N>K;++K){for(var M,S=1,T=E[K],R=T.length,P=T[0];R>S;++S){M=T[S],P[1]<=Q?M[1]>Q&&im(P,M,L)>0&&++O:M[1]<=Q&&im(P,M,L)<0&&--O,P=M}}return 0!==O}function u(M,L,O,N){var P=0,K=0;if(null==M||(P=d(M,O))!==(K=d(L,O))||b(M,L)<0^O>0){do{N.point(0===P||3===P?c:a,P>1?h:g)}while((P=(P+O+4)%4)!==K)}else{N.point(L[0],L[1])}}function F(L,K){return L>=c&&a>=L&&K>=g&&h>=K}function y(K,L){F(K,L)&&I.point(K,L)}function t(){m.point=C,E&&E.push(D=[]),j=!0,z=!1,J=H=0/0}function v(){p&&(C(s,w),o&&z&&B.rejoin(),p.push(B.buffer())),m.point=y,z&&I.lineEnd()}function C(M,N){M=Math.max(-bf,Math.min(bf,M)),N=Math.max(-bf,Math.min(bf,N));var L=F(M,N);if(E&&D.push([M,N]),j){s=M,w=N,o=L,j=!1,L&&(I.lineStart(),I.point(M,N))}else{if(L&&z){I.point(M,N)}else{var K={a:{x:J,y:H},b:{x:M,y:N}};A(K)?(z||(I.lineStart(),I.point(K.a.x,K.a.y)),I.point(K.b.x,K.b.y),L||I.lineEnd(),r=!1):L&&(I.lineStart(),I.point(M,N),r=!1)}}J=M,H=N,z=L}var p,E,D,s,w,o,J,H,z,j,r,q=I,B=db(),A=ef(c,g,a,h),m={point:y,lineStart:t,lineEnd:v,polygonStart:function(){I=B,p=[],E=[],r=!0},polygonEnd:function(){I=q,p=cd.merge(p);var K=G([c,h]),L=r&&K,M=p.length;(L||M)&&(I.polygonStart(),L&&(I.lineStart(),u(null,null,1,I),I.lineEnd()),M&&bT(p,f,K,u,I),I.polygonEnd()),p=E=D=null}};return m}}function f7(a,b){function c(f,d){return f=a(f,d),b(f[0],f[1])}return a.invert&&b.invert&&(c.invert=function(f,d){return f=b.invert(f,d),f&&a.invert(f[0],f[1])}),c}function fN(c){var f=0,b=fn/3,a=ev(c),d=a(f,b);return d.parallels=function(g){return arguments.length?a(f=g[0]*fn/180,b=g[1]*fn/180):[180*(f/fn),180*(b/fn)]},d}function p2(c,g){function a(j,m){var o=Math.sqrt(f-2*d*Math.sin(m))/d;return[o*Math.sin(j*=d),b-o*Math.cos(j)]}var h=Math.sin(c),d=(h+Math.sin(g))/2,f=1+h*(2*d-h),b=Math.sqrt(f)/d;return a.invert=function(j,m){var o=b-m;return[Math.atan2(j,o)/d,iB((f-(j*j+o*o)*d*d)/(2*d))]},a}function bx(){function c(h,g){gZ+=d*h-a*g,a=h,d=g}var f,b,a,d;hj.point=function(g,h){hj.point=c,f=a=g,b=d=h},hj.lineEnd=function(){c(f,b)}}function gP(b,a){iT>b&&(iT=b),b>cw&&(cw=b),aj>a&&(aj=a),a>e9&&(e9=a)}function cW(){function d(m,o){c.push("M",m,",",o,h)}function j(m,o){c.push("M",m,",",o),f.point=b}function b(m,o){c.push("L",m,",",o)}function a(){f.point=d}function g(){c.push("Z")}var h=qu(4.5),c=[],f={point:d,lineStart:function(){f.point=j},lineEnd:a,polygonStart:function(){f.lineEnd=g},polygonEnd:function(){f.lineEnd=a,f.point=d},pointRadius:function(m){return h=qu(m),f},result:function(){if(c.length){var m=c.join("");return c=[],m}}};return f}function qu(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function fq(b,a){hN+=b,eV+=a,++i5}function cP(){function a(f,j){var g=f-b,h=j-c,d=Math.sqrt(g*g+h*h);aW+=d*(b+f)/2,ep+=d*(c+j)/2,bl+=d,fq(b=f,c=j)}var b,c;dD.point=function(f,d){dD.point=a,fq(b=f,c=d)}}function cI(){dD.point=fq}function eK(){function c(g,j){var m=g-a,h=j-d,o=Math.sqrt(m*m+h*h);aW+=o*(a+g)/2,ep+=o*(d+j)/2,bl+=o,o=d*g-a*j,qh+=o*(a+g),ay+=o*(d+j),fj+=3*o,fq(a=g,d=j)}var f,b,a,d;dD.point=function(g,h){dD.point=c,fq(f=a=g,b=d=h)},dD.lineEnd=function(){c(f,b)}}function aY(d){function j(o,m){d.moveTo(o,m),d.arc(o,m,c,0,g3)}function b(o,m){d.moveTo(o,m),f.point=a}function a(o,m){d.lineTo(o,m)}function g(){f.point=j}function h(){d.closePath()}var c=4.5,f={point:j,lineStart:function(){f.point=b},lineEnd:g,polygonStart:function(){f.lineEnd=h},polygonEnd:function(){f.lineEnd=g,f.point=j},pointRadius:function(m){return c=m,f},result:ag};return f}function gY(d){function j(m){return(f?a:b)(m)}function b(m){return hZ(m,function(p,o){p=d(p,o),m.point(p[0],p[1])})}function a(t){function z(L,K){L=d(L,K),t.point(L[0],L[1])}function y(){q=0/0,m.point=G,t.lineStart()}function G(M,L){var K=cf([M,L]),N=d(M,L);g(q,r,A,J,I,o,q=N[0],r=N[1],A=M,J=K[0],I=K[1],o=K[2],f,t),t.point(q,r)}function C(){m.point=z,t.lineEnd()}function H(){y(),m.point=v,m.lineEnd=E}function v(L,K){G(w=L,s=K),u=q,B=r,p=J,F=I,D=o,m.point=G}function E(){g(q,r,A,J,I,o,u,B,w,p,F,D,f,t),m.lineEnd=C,C()}var w,s,u,B,p,F,D,A,q,r,J,I,o,m={point:z,lineStart:y,lineEnd:C,polygonStart:function(){t.polygonStart(),m.lineStart=H},polygonEnd:function(){t.polygonEnd(),m.lineStart=y}};return m}function g(L,p,A,v,r,N,O,o,Q,m,G,J,q,M){var F=O-L,H=o-p,t=F*F+H*H;if(t>4*h&&q--){var z=v+m,u=r+G,I=N+J,s=Math.sqrt(z*z+u*u+I*I),P=Math.asin(I/=s),K=cC(cC(I)-1)<bm||cC(A-Q)<bm?(A+Q)/2:Math.atan2(u,z),E=d(K,P),y=E[0],C=E[1],w=y-L,D=C-p,B=H*w-F*D;(B*B/t>h||cC((F*w+H*D)/t-0.5)>0.3||c>v*m+r*G+N*J)&&(g(L,p,A,v,r,N,y,C,K,z/=s,u/=s,I,q,M),M.point(y,C),g(y,C,K,z,u,I,O,o,Q,m,G,J,q,M))}}var h=0.5,c=Math.cos(30*g6),f=16;return j.precision=function(m){return arguments.length?(f=(h=m*m)>0&&16,j):Math.sqrt(h)},j}function ih(b){var a=gY(function(c,d){return b([c*iY,d*iY])});return function(c){return bX(a(c))}}function jM(a){this.stream=a}function hZ(b,a){return{point:a,sphere:function(){b.sphere()},lineStart:function(){b.lineStart()},lineEnd:function(){b.lineEnd()},polygonStart:function(){b.polygonStart()},polygonEnd:function(){b.polygonEnd()}}}function f2(a){return ev(function(){return a})()}function ev(d){function p(E){return E=C(E[0]*g6,E[1]*g6),[E[0]*u+A,s-E[1]*u]}function y(E){return E=C.invert((E[0]-A)/u,(s-E[1])/u),E&&[E[0]*iY,E[1]*iY]}function a(){C=f7(c=c6(g,m,r),t);var E=t(j,z);return A=v-E[0]*u,s=b+E[1]*u,o()}function o(){return q&&(q.valid=!1,q=null),p}var t,c,C,A,s,q,w=gY(function(E,F){return E=t(E,F),[E[0]*u+A,s-E[1]*u]}),u=150,v=480,b=250,j=0,z=0,g=0,m=0,r=0,f=j1,D=iI,B=null,h=null;return p.stream=function(E){return q&&(q.valid=!1),q=bX(f(c,w(D(E)))),q.valid=!0,q},p.clipAngle=function(E){return arguments.length?(f=null==E?(B=E,j1):hg((B=+E)*g6),o()):B},p.clipExtent=function(E){return arguments.length?(h=E,D=E?hX(E[0][0],E[0][1],E[1][0],E[1][1]):iI,o()):h},p.scale=function(E){return arguments.length?(u=+E,a()):u},p.translate=function(E){return arguments.length?(v=+E[0],b=+E[1],a()):[v,b]},p.center=function(E){return arguments.length?(j=E[0]%360*g6,z=E[1]%360*g6,a()):[j*iY,z*iY]},p.rotate=function(E){return arguments.length?(g=E[0]%360*g6,m=E[1]%360*g6,r=E.length>2?E[2]%360*g6:0,a()):[g*iY,m*iY,r*iY]},cd.rebind(p,w,"precision"),function(){return t=d.apply(this,arguments),p.invert=t.invert&&y,a()}}function bX(a){return hZ(a,function(c,b){a.point(c*g6,b*g6)})}function eU(b,a){return[b,a]}function bj(b,a){return[b>fn?b-g3:-fn>b?b+g3:b,a]}function c6(a,b,c){return a?b||c?f7(bY(a),p7(b,c)):bY(a):b||c?p7(b,c):bj}function d5(a){return function(c,b){return c+=a,[c>fn?c-g3:-fn>c?c+g3:c,b]}}function bY(b){var a=d5(b);return a.invert=d5(-b),a}function p7(c,g){function a(o,r){var j=Math.cos(r),q=Math.cos(o)*j,m=Math.sin(o)*j,s=Math.sin(r),p=s*h+q*d;return[Math.atan2(m*f-p*b,q*h-s*d),iB(p*f+m*b)]}var h=Math.cos(c),d=Math.sin(c),f=Math.cos(g),b=Math.sin(g);return a.invert=function(o,r){var j=Math.cos(r),q=Math.cos(o)*j,m=Math.sin(o)*j,s=Math.sin(r),p=s*f-m*b;return[Math.atan2(m*f+s*b,q*h+p*d),iB(p*h-q*d)]},a}function hJ(b,c){var a=Math.cos(b),d=Math.sin(b);return function(o,p,g,m){var h=g*c;null!=o?(o=ap(a,o),p=ap(a,p),(g>0?p>o:o>p)&&(o+=g*g3)):(o=b+g*g3,p=b-0.5*h);for(var f,j=o;g>0?j>p:p>j;j-=h){m.point((f=pU([a,-d*Math.cos(j),-d*Math.sin(j)]))[0],f[1])}}}function ap(b,c){var a=cf(c);a[0]-=b,dB(a);var d=iG(-a[1]);return((-a[2]<0?-d:d)+2*Math.PI-bm)%(2*Math.PI)}function dd(b,c,a){var d=cd.range(b,c-bm,a).concat(c);return function(f){return d.map(function(g){return[f,g]})}}function hp(b,c,a){var d=cd.range(b,c-bm,a).concat(c);return function(f){return d.map(function(g){return[g,f]})}}function dZ(a){return a.source}function h0(a){return a.target}function e8(o,a,p,f){var t=Math.cos(a),c=Math.sin(a),m=Math.cos(f),r=Math.sin(f),q=t*Math.cos(o),b=t*Math.sin(o),s=m*Math.cos(p),h=m*Math.sin(p),d=2*Math.asin(Math.sqrt(hv(f-a)+t*m*hv(p-o))),g=1/Math.sin(d),j=d?function(w){var u=Math.sin(w*=d)*g,A=Math.sin(d-w)*g,z=A*q+u*s,y=A*b+u*h,v=A*c+u*r;return[Math.atan2(y,z)*iY,Math.atan2(v,Math.sqrt(z*z+y*y))*iY]}:function(){return[o*iY,a*iY]};return j.distance=d,j}function j3(){function b(g,j){var m=Math.sin(j*=g6),o=Math.cos(j),h=cC((g*=g6)-c),f=Math.cos(h);gh+=Math.atan2(Math.sqrt((h=o*Math.sin(h))*h+(h=d*m-a*o*f)*h),a*m+d*o*f),c=g,a=m,d=o}var c,a,d;fT.point=function(g,f){c=g*g6,a=Math.sin(f*=g6),d=Math.cos(f),fT.point=b},fT.lineEnd=function(){fT.point=fT.lineEnd=ag}}function j2(a,b){function c(j,f){var d=Math.cos(j),g=Math.cos(f),h=a(d*g);return[h*g*Math.sin(j),h*Math.sin(f)]}return c.invert=function(f,m){var j=Math.sqrt(f*f+m*m),g=b(j),h=Math.sin(g),d=Math.cos(g);return[Math.atan2(f*h,j*d),Math.asin(j&&m*h/j)]},c}function ew(c,g){function a(j,m){var o=cC(cC(m)-j4)<bm?0:b/Math.pow(d(m),f);return[o*Math.sin(f*j),b-o*Math.cos(f*j)]}var h=Math.cos(c),d=function(j){return Math.tan(fn/4+j/2)},f=c===g?Math.sin(c):Math.log(h/Math.cos(g))/Math.log(d(g)/d(c)),b=h*Math.pow(d(c),f)/f;return f?(a.invert=function(m,o){var j=b-o,p=hB(f)*Math.sqrt(m*m+j*j);return[Math.atan2(m,j)/f,2*Math.atan(Math.pow(b/p,1/f))-j4]},a):aO}function qc(c,g){function b(m,h){var j=f-h;return[j*Math.sin(d*m),f-j*Math.cos(d*m)]}var a=Math.cos(c),d=c===g?Math.sin(c):(a-Math.cos(g))/(g-c),f=a/d+c;return cC(d)<bm?eU:(b.invert=function(m,h){var j=f-h;return[Math.atan2(m,j)/d,f-hB(d)*Math.sqrt(m*m+j*j)]},b)}function aO(b,a){return[b,Math.log(Math.tan(fn/4+a/2))]}function fC(c){var g,b=f2(c),a=b.scale,d=b.translate,f=b.clipExtent;return b.scale=function(){var h=a.apply(b,arguments);return h===b?g?b.clipExtent(null):b:h},b.translate=function(){var h=d.apply(b,arguments);return h===b?g?b.clipExtent(null):b:h},b.clipExtent=function(h){var m=f.apply(b,arguments);if(m===b){if(g=null==h){var j=fn*a(),o=d();f([[o[0]-j,o[1]-j],[o[0]+j,o[1]+j]])}}else{g&&(m=null)}return m},b.clipExtent(null)}function dC(b,a){return[Math.log(Math.tan(fn/4+a/2)),-b]}function iP(a){return a[0]}function bG(a){return a[1]}function dM(c){for(var f=c.length,b=[0,1],a=2,d=2;f>d;d++){for(;a>1&&im(c[b[a-2]],c[b[a-1]],c[d])<=0;){--a}b[a++]=d}return b.slice(0,a)}function fO(b,a){return b[0]-a[0]||b[1]-a[1]}function aA(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function cB(h,o,a,c){var f=h[0],m=a[0],g=o[0]-f,d=c[0]-m,b=h[1],p=a[1],j=o[1]-b,r=c[1]-p,q=(d*(b-p)-r*(f-m))/(r*g-d*j);return[f+q*g,b+q*j]}function aN(a){var b=a[0],c=a[a.length-1];return !(b[0]-c[0]||b[1]-c[1])}function h4(){fP(this),this.edge=this.site=this.circle=null}function ip(b){var a=ij.pop()||new h4();return a.site=b,a}function jD(a){gp(a),dq.remove(a),ij.push(a),fP(a)}function dG(h){var d=h.circle,p=d.x,c=d.cy,b={x:p,y:c},m=h.P,g=h.N,a=[h];jD(h);for(var q=m;q.circle&&cC(p-q.circle.x)<bm&&cC(c-q.circle.cy)<bm;){m=q.P,a.unshift(q),jD(q),q=m}a.unshift(q),gp(q);for(var f=g;f.circle&&cC(p-f.circle.x)<bm&&cC(c-f.circle.cy)<bm;){g=f.N,a.push(f),jD(f),f=g}a.push(f),gp(f);var j,o=a.length;for(j=1;o>j;++j){f=a[j],q=a[j-1],fz(f.edge,q.site,f.site,b)}q=a[0],f=a[o-1],f.edge=b9(q.site,f.site,null,b),aX(q),aX(f)}function hV(f){for(var m,w,b,t,r=f.x,d=f.y,A=dq._;A;){if(b=h7(A,d)-r,b>bm){A=A.L}else{if(t=r-bA(A,d),!(t>bm)){b>-bm?(m=A.P,w=A):t>-bm?(m=A,w=A.N):m=w=A;break}if(!A.R){m=A;break}A=A.R}}var z=ip(f);if(dq.insert(m,z),m||w){if(m===w){return gp(m),w=ip(m.site),dq.insert(z,w),z.edge=w.edge=b9(m.site,z.site),aX(m),aX(w),void 0}if(!w){return z.edge=b9(m.site,z.site),void 0}gp(m),gp(w);var o=m.site,q=o.x,v=o.y,s=f.x-q,u=f.y-v,c=w.site,p=c.x-q,y=c.y-v,j=2*(s*y-u*p),h=s*s+u*u,a=p*p+y*y,g={x:(y*h-u*a)/j+q,y:(s*a-p*h)/j+v};fz(w.edge,o,c,g),z.edge=b9(o,f,null,g),w.edge=b9(f,c,null,g),aX(m),aX(w)}}function h7(h,o){var a=h.site,c=a.x,f=a.y,m=f-o;if(!m){return c}var g=h.P;if(!g){return -1/0}a=g.site;var d=a.x,b=a.y,p=b-o;if(!p){return d}var j=d-c,r=1/m-1/p,q=j/p;return r?(-q+Math.sqrt(q*q-2*r*(j*j/(-2*p)-b+p/2+f-m/2)))/r+c:(c+d)/2}function bA(b,c){var a=b.N;if(a){return h7(a,c)}var d=b.site;return d.y===c?d.x:1/0}function eM(a){this.site=a,this.edges=[]}function dz(r){for(var c,s,g,b,h,o,v,t,f,d,q=r[0][0],j=r[1][0],p=r[0][1],m=r[1][1],a=cM,u=a.length;u--;){if(h=a[u],h&&h.prepare()){for(v=h.edges,t=v.length,o=0;t>o;){d=v[o].end(),g=d.x,b=d.y,f=v[++o%t].start(),c=f.x,s=f.y,(cC(g-c)>bm||cC(b-s)>bm)&&(v.splice(o,0,new cH(d0(h.site,d,cC(g-q)<bm&&m-b>bm?{x:q,y:cC(c-q)<bm?s:m}:cC(b-m)<bm&&j-g>bm?{x:cC(s-m)<bm?c:j,y:m}:cC(g-j)<bm&&b-p>bm?{x:j,y:cC(c-j)<bm?s:p}:cC(b-p)<bm&&g-q>bm?{x:cC(s-p)<bm?c:q,y:p}:null),h.site,null)),++t)}}}}function f3(b,a){return a.angle-b.angle}function ak(){fP(this),this.x=this.y=this.arc=this.site=this.cy=null}function aX(f){var t=f.P,v=f.N;if(t&&v){var b=t.site,p=f.site,q=v.site;if(b!==q){var d=p.x,z=p.y,y=b.x-d,m=b.y-z,o=q.x-d,u=q.y-z,r=2*(y*u-m*o);if(!(r>=-b1)){var s=y*y+m*m,c=o*o+u*u,a=(u*s-m*c)/r,w=(y*c-o*s)/r,u=w+z,j=aM.pop()||new ak();j.arc=f,j.site=p,j.x=a+d,j.y=u+Math.sqrt(a*a+w*w),j.cy=u,f.circle=j;for(var g=null,h=fl._;h;){if(j.y<h.y||j.y===h.y&&j.x<=h.x){if(!h.L){g=h.P;break}h=h.L}else{if(!h.R){g=h;break}h=h.R}}fl.insert(g,j),g||(bV=j)}}}}function gp(b){var a=b.circle;a&&(a.P||(bV=a.N),fl.remove(a),aM.push(a),fP(a),b.circle=null)}function bI(c){for(var f,b=fv,a=ef(c[0][0],c[0][1],c[1][0],c[1][1]),d=b.length;d--;){f=b[d],(!g1(f,c)||!a(f)||cC(f.a.x-f.b.x)<bm&&cC(f.a.y-f.b.y)<bm)&&(f.a=f.b=null,b.splice(d,1))}}function g1(d,c){var r=d.b;if(r){return !0}var s,a,j=d.a,b=c[0][0],w=c[1][0],v=c[0][1],p=c[1][1],g=d.l,q=d.r,m=g.x,o=g.y,u=q.x,h=q.y,t=(m+u)/2,f=(o+h)/2;if(h===o){if(b>t||t>=w){return}if(m>u){if(j){if(j.y>=p){return}}else{j={x:t,y:v}}r={x:t,y:p}}else{if(j){if(j.y<v){return}}else{j={x:t,y:p}}r={x:t,y:v}}}else{if(s=(m-u)/(h-o),a=f-s*t,-1>s||s>1){if(m>u){if(j){if(j.y>=p){return}}else{j={x:(v-a)/s,y:v}}r={x:(p-a)/s,y:p}}else{if(j){if(j.y<v){return}}else{j={x:(p-a)/s,y:p}}r={x:(v-a)/s,y:v}}}else{if(h>o){if(j){if(j.x>=w){return}}else{j={x:b,y:s*b+a}}r={x:w,y:s*w+a}}else{if(j){if(j.x<b){return}}else{j={x:w,y:s*w+a}}r={x:b,y:s*b+a}}}}return d.a=j,d.b=r,!0}function aD(b,a){this.l=b,this.r=a,this.a=this.b=null}function b9(c,f,b,a){var d=new aD(c,f);return fv.push(d),b&&fz(d,c,f,b),a&&fz(d,f,c,a),cM[c.i].edges.push(new cH(d,c,f)),cM[f.i].edges.push(new cH(d,f,c)),d}function d0(b,c,a){var d=new aD(b,null);return d.a=c,d.b=a,fv.push(d),d}function fz(b,c,a,d){b.a||b.b?b.l===a?b.b=d:b.a=d:(b.a=d,b.l=c,b.r=a)}function cH(c,f,b){var a=c.a,d=c.b;this.edge=c,this.site=f,this.angle=b?Math.atan2(b.y-f.y,b.x-f.x):c.l===f?Math.atan2(d.x-a.x,a.y-d.y):Math.atan2(a.x-d.x,d.y-a.y)}function c7(){this._=null}function fP(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function i7(c,f){var b=f,a=f.R,d=b.U;d?d.L===b?d.L=a:d.R=a:c._=a,a.U=d,b.U=a,b.R=a.L,b.R&&(b.R.U=b),a.L=b}function gl(c,f){var b=f,a=f.L,d=b.U;d?d.L===b?d.L=a:d.R=a:c._=a,a.U=d,b.U=a,b.L=a.R,b.L&&(b.L.U=b),a.R=b}function fD(a){for(;a.L;){a=a.L}return a}function fV(c,g){var a,h,d,f=c.sort(c2).pop();for(fv=[],cM=new Array(c.length),dq=new c7(),fl=new c7();;){if(d=bV,f&&(!d||f.y<d.y||f.y===d.y&&f.x<d.x)){(f.x!==a||f.y!==h)&&(cM[f.i]=new eM(f),hV(f),a=f.x,h=f.y),f=c.pop()}else{if(!d){break}dG(d.arc)}}g&&(bI(g),dz(g));var b={cells:cM,edges:fv};return dq=fl=fv=cM=null,b}function c2(b,a){return a.y-b.y||a.x-b.x}function eE(a,b,c){return(a.x-c.x)*(b.y-a.y)-(a.x-b.x)*(c.y-a.y)}function eF(a){return a.x}function bS(a){return a.y}function gg(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function fA(c,m,f,a,j,d){if(!c(m,f,a,j,d)){var b=0.5*(f+j),h=0.5*(a+d),g=m.nodes;g[0]&&fA(c,g[0],f,a,b,h),g[1]&&fA(c,g[1],b,a,j,h),g[2]&&fA(c,g[2],f,h,b,d),g[3]&&fA(c,g[3],b,h,j,d)}}function jJ(d,j){d=cd.rgb(d),j=cd.rgb(j);var b=d.r,a=d.g,g=d.b,h=j.r-b,c=j.g-a,f=j.b-g;return function(m){return"#"+jQ(Math.round(b+h*m))+jQ(Math.round(a+c*m))+jQ(Math.round(g+f*m))}}function g7(c,f){var b,a={},d={};for(b in c){b in f?a[b]=g8(c[b],f[b]):d[b]=c[b]}for(b in f){b in c||(d[b]=f[b])}return function(g){for(b in a){d[b]=a[b](g)}return d}}function aV(b,a){return a-=b=+b,function(c){return b+a*c}}function cX(f,a){var j,c,p,h,d,o=0,m=0,b=[],g=[];for(f+="",a+="",f8.lastIndex=0,c=0;j=f8.exec(a);++c){j.index&&b.push(a.substring(o,m=j.index)),g.push({i:b.length,x:j[0]}),b.push(null),o=f8.lastIndex}for(o<a.length&&b.push(a.substring(o)),c=0,h=g.length;(j=f8.exec(f))&&h>c;++c){if(d=g[c],d.x==j[0]){if(d.i){if(null==b[d.i+1]){for(b[d.i-1]+=d.x,b.splice(d.i,1),p=c+1;h>p;++p){g[p].i--}}else{for(b[d.i-1]+=d.x+b[d.i+1],b.splice(d.i,2),p=c+1;h>p;++p){g[p].i-=2}}}else{if(null==b[d.i+1]){b[d.i]=d.x}else{for(b[d.i]=d.x+b[d.i+1],b.splice(d.i+1,1),p=c+1;h>p;++p){g[p].i--}}}g.splice(c,1),h--,c--}else{d.x=aV(parseFloat(j[0]),parseFloat(d.x))}}for(;h>c;){d=g.pop(),null==b[d.i+1]?b[d.i]=d.x:(b[d.i]=d.x+b[d.i+1],b.splice(d.i+1,1)),h--}return 1===b.length?null==b[0]?(d=g[0].x,function(q){return d(q)+""}):function(){return a}:function(q){for(c=0;h>c;++c){b[(d=g[c]).i]=d.x(q)}return b.join("")}}function g8(b,c){for(var a,d=cd.interpolators.length;--d>=0&&!(a=cd.interpolators[d](b,c));){}return a}function dK(d,j){var b,a=[],g=[],h=d.length,c=j.length,f=Math.min(d.length,j.length);for(b=0;f>b;++b){a.push(g8(d[b],j[b]))}for(;h>b;++b){g[b]=d[b]}for(;c>b;++b){g[b]=j[b]}return function(m){for(b=0;f>b;++b){g[b]=a[b](m)}return g}}function hf(a){return function(b){return 0>=b?0:b>=1?1:a(b)}}function cU(a){return function(b){return 1-a(1-b)}}function aH(a){return function(b){return 0.5*(0.5>b?a(2*b):2-a(2-2*b))}}function iZ(a){return a*a}function gq(a){return a*a*a}function p0(a){if(0>=a){return 0}if(a>=1){return 1}var b=a*a,c=b*a;return 4*(0.5>a?c:3*(a-b)+c-0.75)}function jL(a){return function(b){return Math.pow(b,a)}}function fh(a){return 1-Math.cos(a*j4)}function c8(a){return Math.pow(2,10*(a-1))}function iE(a){return 1-Math.sqrt(1-a*a)}function bw(a,b){var c;return arguments.length<2&&(b=0.45),arguments.length?c=b/g3*Math.asin(1/a):(a=1,c=b/4),function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-c)*g3/b)}}function dp(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}}function cN(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+0.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375}function bQ(d,j){d=cd.hcl(d),j=cd.hcl(j);var b=d.h,a=d.c,g=d.l,h=j.h-b,c=j.c-a,f=j.l-g;return isNaN(c)&&(c=0,a=isNaN(a)?j.c:a),isNaN(h)?(h=0,b=isNaN(b)?j.h:b):h>180?h-=360:-180>h&&(h+=360),function(m){return eO(b+h*m,a+c*m,g+f*m)+""}}function b6(d,j){d=cd.hsl(d),j=cd.hsl(j);var b=d.h,a=d.s,g=d.l,h=j.h-b,c=j.s-a,f=j.l-g;return isNaN(c)&&(c=0,a=isNaN(a)?j.s:a),isNaN(h)?(h=0,b=isNaN(b)?j.h:b):h>180?h-=360:-180>h&&(h+=360),function(m){return ed(b+h*m,a+c*m,g+f*m)+""}}function dY(d,j){d=cd.lab(d),j=cd.lab(j);var b=d.l,a=d.a,g=d.b,h=j.l-b,c=j.a-a,f=j.b-g;return function(m){return d4(b+h*m,a+c*m,g+f*m)+""}}function ib(b,a){return a-=b,function(c){return Math.round(b+a*c)}}function e6(c){var g=[c.a,c.b],b=[c.c,c.d],a=dg(g),d=qs(g,b),f=dg(e4(b,g,-d))||0;g[0]*b[1]<b[0]*g[1]&&(g[0]*=-1,g[1]*=-1,a*=-1,d*=-1),this.rotate=(a?Math.atan2(g[1],g[0]):Math.atan2(-b[0],b[1]))*iY,this.translate=[c.e,c.f],this.scale=[a,f],this.skew=f?Math.atan2(d,f)*iY:0}function qs(b,a){return b[0]*a[0]+b[1]*a[1]}function dg(b){var a=Math.sqrt(qs(b,b));return a&&(b[0]/=a,b[1]/=a),a}function e4(a,b,c){return a[0]+=c*b[0],a[1]+=c*b[1],a}function d9(o,a){var p,f=[],t=[],c=cd.transform(o),m=cd.transform(a),r=c.translate,q=m.translate,b=c.rotate,s=m.rotate,h=c.skew,d=m.skew,g=c.scale,j=m.scale;return r[0]!=q[0]||r[1]!=q[1]?(f.push("translate(",null,",",null,")"),t.push({i:1,x:aV(r[0],q[0])},{i:3,x:aV(r[1],q[1])})):q[0]||q[1]?f.push("translate("+q+")"):f.push(""),b!=s?(b-s>180?s+=360:s-b>180&&(b+=360),t.push({i:f.push(f.pop()+"rotate(",null,")")-2,x:aV(b,s)})):s&&f.push(f.pop()+"rotate("+s+")"),h!=d?t.push({i:f.push(f.pop()+"skewX(",null,")")-2,x:aV(h,d)}):d&&f.push(f.pop()+"skewX("+d+")"),g[0]!=j[0]||g[1]!=j[1]?(p=f.push(f.pop()+"scale(",null,",",null,")"),t.push({i:p-4,x:aV(g[0],j[0])},{i:p-2,x:aV(g[1],j[1])})):(1!=j[0]||1!=j[1])&&f.push(f.pop()+"scale("+j+")"),p=t.length,function(u){for(var w,v=-1;++v<p;){f[(w=t[v]).i]=w.x(u)}return f.join("")}}function j9(b,a){return a=a-(b=+b)?1/(a-b):0,function(c){return(c-b)*a}}function em(b,a){return a=a-(b=+b)?1/(a-b):0,function(c){return Math.max(0,Math.min(1,(c-b)*a))}}function ex(c){for(var g=c.source,b=c.target,a=qt(g,b),d=[g];g!==a;){g=g.parent,d.push(g)}for(var f=d.length;b!==a;){d.splice(f,0,b),b=b.parent}return d}function hE(a){for(var b=[],c=a.parent;null!=c;){b.push(a),a=c,c=c.parent}return b.push(a),b}function qt(c,g){if(c===g){return c}for(var a=hE(c),h=hE(g),d=a.pop(),f=h.pop(),b=null;d===f;){b=d,d=a.pop(),f=h.pop()}return b}function ck(a){a.fixed|=2}function gJ(a){a.fixed&=-7}function by(a){a.fixed|=4,a.px=a.x,a.py=a.y}function i6(a){a.fixed&=-5}function az(d,o,g){var b=0,m=0;if(d.charge=0,!d.leaf){for(var f,c=d.nodes,j=c.length,h=-1;++h<j;){f=c[h],null!=f&&(az(f,o,g),d.charge+=f.charge,b+=f.charge*f.cx,m+=f.charge*f.cy)}}if(d.point){d.leaf||(d.point.x+=Math.random()-0.5,d.point.y+=Math.random()-0.5);var a=o*g[d.point.index];d.charge+=d.pointCharge=a,b+=a*d.point.x,m+=a*d.point.y}d.cx=b/d.charge,d.cy=m/d.charge}function b4(b,a){return cd.rebind(b,a,"sort","children","value"),b.nodes=b,b.links=cV,b}function dO(a){return a.children}function cJ(a){return a.value}function cg(b,a){return a.value-b.value}function cV(a){return cd.merge(a.map(function(b){return(b.children||[]).map(function(c){return{source:b,target:c}})}))}function hD(a){return a.x}function iW(a){return a.y}function j8(a,b,c){a.y0=b,a.y=c}function gd(a){return cd.range(a.length)}function dE(b){for(var c=-1,a=b[0].length,d=[];++c<a;){d[c]=0}return d}function cb(c){for(var g,b=1,a=0,d=c[0][1],f=c.length;f>b;++b){(g=c[b][1])>d&&(a=b,d=g)}return a}function iC(a){return a.reduce(bM,0)}function bM(b,a){return b+a[1]}function dU(b,a){return eQ(b,Math.ceil(Math.log(a.length)/Math.LN2+1))}function eQ(c,g){for(var b=-1,a=+c[0],d=(c[1]-a)/g,f=[];++b<=g;){f[b]=d*b+a}return f}function ch(a){return[cd.min(a),cd.max(a)]}function qw(b,a){return b.parent==a.parent?1:2}function f1(b){var a=b.children;return a&&a.length?a[0]:b._tree.thread}function aF(a){var b,c=a.children;return c&&(b=c.length)?c[b-1]:a._tree.thread}function dQ(c,g){var b=c.children;if(b&&(d=b.length)){for(var a,d,f=-1;++f<d;){g(a=dQ(b[f],g),c)>0&&(c=a)}}return c}function fJ(b,a){return b.x-a.x}function hM(b,a){return a.x-b.x}function h6(b,a){return b.depth-a.depth}function dh(a,b){function c(h,o){var j=h.children;if(j&&(d=j.length)){for(var m,d,g=null,f=-1;++f<d;){m=j[f],c(m,g),g=m}}b(h,o)}c(a,null)}function j7(c){for(var g,b=0,a=0,d=c.children,f=d.length;--f>=0;){g=d[f]._tree,g.prelim+=b,g.mod+=b,b+=g.shift+(a+=g.change)}}function gn(b,c,a){b=b._tree,c=c._tree;var d=a/(c.number-b.number);b.change+=d,c.change-=d,c.shift+=a,c.prelim+=a,c.mod+=a}function hY(a,b,c){return a._tree.ancestor.parent==b.parent?a._tree.ancestor:c}function iV(b,a){return b.value-a.value}function b0(a,b){var c=a._pack_next;a._pack_next=b,b._pack_prev=a,b._pack_next=c,c._pack_prev=b}function gf(b,a){b._pack_next=a,a._pack_prev=b}function bd(c,f){var b=f.x-c.x,a=f.y-c.y,d=c.r+f.r;return 0.999*d*d>b*b+a*a}function hb(f){function t(A){o=Math.min(A.x-A.r,o),u=Math.max(A.x+A.r,u),r=Math.min(A.y-A.r,r),s=Math.max(A.y+A.r,s)}if((v=f.children)&&(m=v.length)){var v,b,p,q,d,z,y,m,o=1/0,u=-1/0,r=1/0,s=-1/0;if(v.forEach(bO),b=v[0],b.x=-b.r,b.y=0,t(b),m>1&&(p=v[1],p.x=p.r,p.y=0,t(p),m>2)){for(q=v[2],aG(b,p,q),t(q),b0(b,q),b._pack_prev=q,b0(q,p),p=b._pack_next,d=3;m>d;d++){aG(b,p,q=v[d]);var c=0,a=1,w=1;for(z=p._pack_next;z!==p;z=z._pack_next,a++){if(bd(z,q)){c=1;break}}if(1==c){for(y=b._pack_prev;y!==z._pack_prev&&!bd(y,q);y=y._pack_prev,w++){}}c?(w>a||a==w&&p.r<b.r?gf(b,p=z):gf(b=y,p),d--):(b0(b,q),p=q,t(q))}}var j=(o+u)/2,g=(r+s)/2,h=0;for(d=0;m>d;d++){q=v[d],q.x-=j,q.y-=g,h=Math.max(h,q.r+Math.sqrt(q.x*q.x+q.y*q.y))}f.r=h,v.forEach(gR)}}function bO(a){a._pack_next=a._pack_prev=a}function gR(a){delete a._pack_next,delete a._pack_prev}function gD(c,g,a,h){var d=c.children;if(c.x=g+=h*c.x,c.y=a+=h*c.y,c.r*=h,d){for(var f=-1,b=d.length;++f<b;){gD(d[f],g,a,h)}}}function aG(d,o,g){var b=d.r+g.r,m=o.x-d.x,f=o.y-d.y;if(b&&(m||f)){var c=o.r+g.r,j=m*m+f*f;c*=c,b*=b;var h=0.5+(b-c)/(2*j),a=Math.sqrt(Math.max(0,2*c*(b+j)-(b-=j)*b-c*c))/(2*j);g.x=d.x+h*m+a*f,g.y=d.y+h*f-a*m}else{g.x=d.x+b,g.y=d.y}}function ez(a){return 1+cd.max(a,function(b){return b.y})}function aR(a){return a.reduce(function(b,c){return b+c.x},0)/a.length}function gQ(b){var a=b.children;return a&&a.length?gQ(a[0]):b}function iO(a){var b,c=a.children;return c&&(b=c.length)?iO(c[b-1]):a}function qi(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function b3(c,g){var b=c.x+g[3],a=c.y+g[0],d=c.dx-g[1]-g[3],f=c.dy-g[0]-g[2];return 0>d&&(b+=d/2,d=0),0>f&&(a+=f/2,f=0),{x:b,y:a,dx:d,dy:f}}function e0(a){var b=a[0],c=a[a.length-1];return c>b?[b,c]:[c,b]}function g9(a){return a.rangeExtent?a.rangeExtent():e0(a.range())}function bN(c,g,b,a){var d=b(c[0],c[1]),f=a(g[0],g[1]);return function(h){return f(d(h))}}function hO(c,g){var a,h=0,d=c.length-1,f=c[h],b=c[d];return f>b&&(a=h,h=d,d=a,a=f,f=b,b=a),c[h]=g.floor(f),c[d]=g.ceil(b),c}function f5(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:c3}function fF(d,j,b,a){var g=[],h=[],c=0,f=Math.min(d.length,j.length)-1;for(d[f]<d[0]&&(d=d.slice().reverse(),j=j.slice().reverse());++c<=f;){g.push(b(d[c-1],d[c])),h.push(a(j[c-1],j[c]))}return function(o){var m=cd.bisect(d,o,1,f)-1;return h[m](g[m](o))}}function pY(d,j,b,a){function g(){var o=Math.min(d.length,j.length)>2?fF:bN,m=a?em:j9;return c=o(d,j,m,b),f=o(j,d,m,g8),h}function h(m){return c(m)}var c,f;return h.invert=function(m){return f(m)},h.domain=function(m){return arguments.length?(d=m.map(Number),g()):d},h.range=function(m){return arguments.length?(j=m,g()):j},h.rangeRound=function(m){return h.range(m).interpolate(ib)},h.clamp=function(m){return arguments.length?(a=m,g()):a},h.interpolate=function(m){return arguments.length?(b=m,g()):b},h.ticks=function(m){return qn(d,m)},h.tickFormat=function(o,m){return cL(d,o,m)},h.nice=function(m){return gM(d,m),g()},h.copy=function(){return pY(d,j,b,a)},g()}function bq(b,a){return cd.rebind(b,a,"range","rangeRound","interpolate","clamp")}function gM(b,a){return hO(b,f5(ey(b,a)[2]))}function ey(c,g){null==g&&(g=10);var b=e0(c),a=b[1]-b[0],d=Math.pow(10,Math.floor(Math.log(a/g)/Math.LN10)),f=g/a*d;return 0.15>=f?d*=10:0.35>=f?d*=5:0.75>=f&&(d*=2),b[0]=Math.ceil(b[0]/d)*d,b[1]=Math.floor(b[1]/d)*d+0.5*d,b[2]=d,b}function qn(b,a){return cd.range.apply(cd,ey(b,a))}function cL(b,c,a){var d=ey(b,c);return cd.format(a?a.replace(gb,function(j,f,p,s,o,h,r,q,g,m){return[f,p,s,o,h,r,q,g||"."+cD(m,d),m].join("")}):",."+cF(d[2])+"f")}function cF(a){return -Math.floor(Math.log(a)/Math.LN10+0.01)}function cD(a,b){var c=cF(b[2]);return a in hl?Math.abs(c-cF(Math.max(Math.abs(b[0]),Math.abs(b[1]))))+ +("e"!==a):c-2*("%"===a)}function eH(c,g,a,h){function d(j){return(a?Math.log(0>j?0:j):-Math.log(j>0?0:-j))/Math.log(g)}function f(j){return a?Math.pow(g,j):-Math.pow(g,-j)}function b(j){return c(d(j))}return b.invert=function(j){return f(c.invert(j))},b.domain=function(j){return arguments.length?(a=j[0]>=0,c.domain((h=j.map(Number)).map(d)),b):h},b.base=function(j){return arguments.length?(g=+j,c.domain(h.map(d)),b):g},b.nice=function(){var j=hO(h.map(d),a?Math:hT);return c.domain(j),h=j.map(f),b},b.ticks=function(){var q=e0(h),j=[],s=q[0],m=q[1],r=Math.floor(d(s)),o=Math.ceil(d(m)),t=g%1?2:g;if(isFinite(o-r)){if(a){for(;o>r;r++){for(var p=1;t>p;p++){j.push(f(r)*p)}}j.push(f(r))}else{for(j.push(f(r));r++<o;){for(var p=t-1;p>0;p--){j.push(f(r)*p)}}}for(r=0;j[r]<s;r++){}for(o=j.length;j[o-1]>m;o--){}j=j.slice(r,o)}return j},b.tickFormat=function(o,q){if(!arguments.length){return dX}arguments.length<2?q=dX:"function"!=typeof q&&(q=cd.format(q));var j,p=Math.max(0.1,o/b.ticks().length),m=a?(j=1e-12,Math.ceil):(j=-1e-12,Math.floor);return function(r){return r/f(m(d(r)+j))<=p?q(r):""}},b.copy=function(){return eH(c.copy(),g,a,h)},bq(b,c)}function aT(c,g,b){function a(h){return c(d(h))}var d=gT(g),f=gT(1/g);return a.invert=function(h){return f(c.invert(h))},a.domain=function(h){return arguments.length?(c.domain((b=h.map(Number)).map(d)),a):b},a.ticks=function(h){return qn(b,h)},a.tickFormat=function(j,h){return cL(b,j,h)},a.nice=function(h){return a.domain(gM(b,h))},a.exponent=function(h){return arguments.length?(d=gT(g=h),f=gT(1/g),c.domain(b.map(d)),a):g},a.copy=function(){return aT(c.copy(),g,b)},bq(a,c)}function gT(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function p9(d,h){function b(j){return c[((g.get(j)||"range"===h.t&&g.set(j,d.push(j)))-1)%c.length]}function a(j,m){return cd.range(d.length).map(function(o){return j+m*o})}var g,c,f;return b.domain=function(j){if(!arguments.length){return d}d=[],g=new hk();for(var m,p=-1,o=j.length;++p<o;){g.has(m=j[p])||g.set(m,d.push(m))}return b[h.t].apply(b,h.a)},b.range=function(j){return arguments.length?(c=j,f=0,h={t:"range",a:arguments},b):c},b.rangePoints=function(q,j){arguments.length<2&&(j=0);var o=q[0],m=q[1],p=(m-o)/(Math.max(1,d.length-1)+j);return c=a(d.length<2?(o+m)/2:o+p*j/2,p),f=0,h={t:"rangePoints",a:arguments},b},b.rangeBands=function(r,q,o){arguments.length<2&&(q=0),arguments.length<3&&(o=q);var j=r[1]<r[0],p=r[j-0],m=r[1-j],s=(m-p)/(d.length-q+2*o);return c=a(p+s*o,s),j&&c.reverse(),f=s*(1-q),h={t:"rangeBands",a:arguments},b},b.rangeRoundBands=function(s,q,o){arguments.length<2&&(q=0),arguments.length<3&&(o=q);var t=s[1]<s[0],p=s[t-0],m=s[1-t],r=Math.floor((m-p)/(d.length-q+2*o)),j=m-p-(d.length-q)*r;return c=a(p+Math.round(j/2),r),t&&c.reverse(),f=Math.round(r*(1-q)),h={t:"rangeRoundBands",a:arguments},b},b.rangeBand=function(){return f},b.rangeExtent=function(){return e0(h.a[0])},b.copy=function(){return p9(d,h)},b.domain(d)}function jI(c,f){function b(){var h=0,g=f.length;for(d=[];++h<g;){d[h-1]=cd.quantile(c,h/g)}return a}function a(g){return isNaN(g=+g)?void 0:f[cd.bisect(d,g)]}var d;return a.domain=function(g){return arguments.length?(c=g.filter(function(h){return !isNaN(h)}).sort(cd.ascending),b()):c},a.range=function(g){return arguments.length?(f=g,b()):f},a.quantiles=function(){return d},a.invertExtent=function(g){return g=f.indexOf(g),0>g?[0/0,0/0]:[g>0?d[g-1]:c[0],g<d.length?d[g]:c[c.length-1]]},a.copy=function(){return jI(c,f)},b()}function hU(c,g,a){function h(j){return a[Math.max(0,Math.min(b,Math.floor(f*(j-c))))]}function d(){return f=a.length/(g-c),b=a.length-1,h}var f,b;return h.domain=function(j){return arguments.length?(c=+j[0],g=+j[j.length-1],d()):[c,g]},h.range=function(j){return arguments.length?(a=j,d()):a},h.invertExtent=function(j){return j=a.indexOf(j),j=0>j?0/0:j/f+c,[j,j+1/f]},h.copy=function(){return hU(c,g,a)},d()}function fZ(a,b){function c(d){return d>=d?b[cd.bisect(a,d)]:void 0}return c.domain=function(d){return arguments.length?(a=d,c):a},c.range=function(d){return arguments.length?(b=d,c):b},c.invertExtent=function(d){return d=b.indexOf(d),[a[d-1],a[d]]},c.copy=function(){return fZ(a,b)},c}function eL(b){function a(c){return +c}return a.invert=a,a.domain=a.range=function(c){return arguments.length?(b=c.map(a),a):b},a.ticks=function(c){return qn(b,c)},a.tickFormat=function(c,d){return cL(b,c,d)},a.copy=function(){return eL(b)},a}function b5(a){return a.innerRadius}function eZ(a){return a.outerRadius}function bp(a){return a.startAngle}function dP(a){return a.endAngle}function eb(d){function j(q){function s(){r.push("M",h(d(t),f))}for(var p,r=[],t=[],m=-1,u=q.length,v=dl(b),o=dl(a);++m<u;){g.call(this,p=q[m],m)?t.push([+v.call(this,p,m),+o.call(this,p,m)]):t.length&&(s(),t=[])}return t.length&&s(),r.length?r.join(""):null}var b=iP,a=bG,g=hS,h=b2,c=h.key,f=0.7;return j.x=function(m){return arguments.length?(b=m,j):b},j.y=function(m){return arguments.length?(a=m,j):a},j.defined=function(m){return arguments.length?(g=m,j):g},j.interpolate=function(m){return arguments.length?(c="function"==typeof m?h=m:(h=fy.get(m)||b2).key,j):c},j.tension=function(m){return arguments.length?(f=m,j):f},j}function b2(a){return a.join("L")}function qm(a){return b2(a)+"Z"}function h8(c){for(var f=0,b=c.length,a=c[0],d=[a[0],",",a[1]];++f<b;){d.push("H",(a[0]+(a=c[f])[0])/2,"V",a[1])}return b>1&&d.push("H",a[0]),d.join("")}function ax(c){for(var f=0,b=c.length,a=c[0],d=[a[0],",",a[1]];++f<b;){d.push("V",(a=c[f])[1],"H",a[0])}return d.join("")}function dk(c){for(var f=0,b=c.length,a=c[0],d=[a[0],",",a[1]];++f<b;){d.push("H",(a=c[f])[0],"V",a[1])}return d.join("")}function hA(b,a){return b.length<4?b2(b):b[1]+fd(b.slice(1,b.length-1),j5(b,a))}function gC(b,a){return b.length<3?b2(b):b[0]+fd((b.push(b[0]),b),j5([b[b.length-2]].concat(b,[b[1]]),a))}function h9(b,a){return b.length<3?b2(b):b[0]+fd(b,j5(b,a))}function fd(f,a){if(a.length<1||f.length!=a.length&&f.length!=a.length+2){return b2(f)}var j=f.length!=a.length,c="",p=f[0],h=f[1],d=a[0],o=d,m=1;if(j&&(c+="Q"+(h[0]-2*d[0]/3)+","+(h[1]-2*d[1]/3)+","+h[0]+","+h[1],p=f[1],m=2),a.length>1){o=a[1],h=f[m],m++,c+="C"+(p[0]+d[0])+","+(p[1]+d[1])+","+(h[0]-o[0])+","+(h[1]-o[1])+","+h[0]+","+h[1];for(var b=2;b<a.length;b++,m++){h=f[m],o=a[b],c+="S"+(h[0]-o[0])+","+(h[1]-o[1])+","+h[0]+","+h[1]}}if(j){var g=f[m];c+="Q"+(h[0]+2*o[0]/3)+","+(h[1]+2*o[1]/3)+","+g[0]+","+g[1]}return c}function j5(c,m){for(var f,a=[],j=(1-m)/2,d=c[0],b=c[1],h=1,g=c.length;++h<g;){f=d,d=b,b=c[h],a.push([j*(b[0]-f[0]),j*(b[1]-f[1])])}return a}function eG(c){if(c.length<3){return b2(c)}var m=1,f=c.length,a=c[0],j=a[0],d=a[1],b=[j,j,j,(a=c[1])[0]],h=[d,d,d,a[1]],g=[j,",",d,"L",b7(bB,b),",",b7(bB,h)];for(c.push(c[f-1]);++m<=f;){a=c[m],b.shift(),b.push(a[0]),h.shift(),h.push(a[1]),iX(g,b,h)}return c.pop(),g.push("L",a),g.join("")}function iS(c){if(c.length<4){return b2(c)}for(var g,a=[],h=-1,d=c.length,f=[0],b=[0];++h<3;){g=c[h],f.push(g[0]),b.push(g[1])}for(a.push(b7(bB,f)+","+b7(bB,b)),--h;++h<d;){g=c[h],f.shift(),f.push(g[0]),b.shift(),b.push(g[1]),iX(a,f,b)}return a.join("")}function c5(d){for(var j,b,a=-1,g=d.length,h=g+4,c=[],f=[];++a<4;){b=d[a%g],c.push(b[0]),f.push(b[1])}for(j=[b7(bB,c),",",b7(bB,f)],--a;++a<h;){b=d[a%g],c.shift(),c.push(b[0]),f.shift(),f.push(b[1]),iX(j,c,f)}return j.join("")}function fS(d,o){var g=d.length-1;if(g){for(var b,m,f=d[0][0],c=d[0][1],j=d[g][0]-f,h=d[g][1]-c,a=-1;++a<=g;){b=d[a],m=a/g,b[0]=o*b[0]+(1-o)*(f+m*j),b[1]=o*b[1]+(1-o)*(c+m*h)}}return eG(d)}function b7(b,a){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]+b[3]*a[3]}function iX(a,b,c){a.push("C",b7(dx,b),",",b7(dx,c),",",b7(iK,b),",",b7(iK,c),",",b7(bB,b),",",b7(bB,c))}function bK(b,a){return(a[1]-b[1])/(a[0]-b[0])}function dV(c){for(var g=0,a=c.length-1,h=[],d=c[0],f=c[1],b=h[0]=bK(d,f);++g<a;){h[g]=(b+(b=bK(d=f,f=c[g+1])))/2}return h[g]=b,h}function d6(c){for(var m,f,a,j,d=[],b=dV(c),h=-1,g=c.length-1;++h<g;){m=bK(c[h],c[h+1]),cC(m)<bm?b[h]=b[h+1]=0:(f=b[h]/m,a=b[h+1]/m,j=f*f+a*a,j>9&&(j=3*m/Math.sqrt(j),b[h]=j*f,b[h+1]=j*a))}for(h=-1;++h<=g;){j=(c[Math.min(g,h+1)][0]-c[Math.max(0,h-1)][0])/(6*(1+b[h]*b[h])),d.push([j||0,b[h]*j||0])}return d}function aE(a){return a.length<3?b2(a):a[0]+fd(a,d6(a))}function cR(c){for(var g,b,a,d=-1,f=c.length;++d<f;){g=c[d],b=g[0],a=g[1]+p8,g[0]=b*Math.cos(a),g[1]=b*Math.sin(a)}return c}function aQ(h){function d(A){function D(){z.push("M",a(h(C),o),j,f(h(y.reverse()),o),"Z")}for(var E,t,B,z=[],y=[],C=[],r=-1,v=A.length,s=dl(p),w=dl(b),F=p===c?function(){return t}:dl(c),u=b===m?function(){return B}:dl(m);++r<v;){g.call(this,E=A[r],r)?(y.push([t=+s.call(this,E,r),B=+w.call(this,E,r)]),C.push([+F.call(this,E,r),+u.call(this,E,r)])):y.length&&(D(),y=[],C=[])}return y.length&&D(),z.length?z.join(""):null}var p=iP,c=iP,b=0,m=bG,g=hS,a=b2,q=a.key,f=a,j="L",o=0.7;return d.x=function(r){return arguments.length?(p=c=r,d):c},d.x0=function(r){return arguments.length?(p=r,d):p},d.x1=function(r){return arguments.length?(c=r,d):c},d.y=function(r){return arguments.length?(b=m=r,d):m},d.y0=function(r){return arguments.length?(b=r,d):b},d.y1=function(r){return arguments.length?(m=r,d):m},d.defined=function(r){return arguments.length?(g=r,d):g},d.interpolate=function(r){return arguments.length?(q="function"==typeof r?a=r:(a=fy.get(r)||b2).key,f=a.reverse||a,j=a.closed?"M":"L",d):q},d.tension=function(r){return arguments.length?(o=r,d):o},d}function gy(a){return a.radius}function iF(a){return[a.x,a.y]}function jH(a){return function(){var d=a.apply(this,arguments),c=d[0],b=d[1]+p8;return[c*Math.cos(b),c*Math.sin(b)]}}function dI(){return 64}function eP(){return"circle"}function gH(b){var a=Math.sqrt(b/fn);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function bJ(b,a){return f9(b,h1),b.id=a,b}function eW(c,f,b,a){var d=c.id;return iU(c,"function"==typeof b?function(j,g,h){j.__transition__[d].tween.set(f,a(b.call(j,j.__data__,g,h)))}:(b=a(b),function(g){g.__transition__[d].tween.set(f,b)}))}function dR(a){return null==a&&(a=""),function(){this.textContent=a}}function f6(d,h,b,a){var g=d.__transition__||(d.__transition__={active:0,count:0}),c=g[b];if(!c){var f=a.time;c=g[b]={tween:new hk(),time:f,ease:a.ease,delay:a.delay,duration:a.duration},++g.count,cd.timer(function(j){function q(w){return g.active>b?s():(g.active=b,c.event&&c.event.start.call(d,r,h),c.tween.forEach(function(z,y){(y=y.call(d,r,h))&&o.push(y)}),cd.timer(function(){return p.c=m(w||1)?hS:m,1},0,f),void 0)}function m(A){if(g.active!==b){return s()}for(var z=A/u,y=v(z),w=o.length;w>0;){o[--w].call(d,y)}return z>=1?(c.event&&c.event.end.call(d,r,h),s()):void 0}function s(){return --g.count?delete g[b]:delete d.__transition__,1}var r=d.__data__,v=c.ease,t=c.delay,u=c.duration,p=ik,o=[];return p.t=t+f,j>=t?q(j-t):(p.c=q,void 0)},0,f)}}function qy(b,a){b.attr("transform",function(c){return"translate("+a(c)+",0)"})}function bg(b,a){b.attr("transform",function(c){return"translate(0,"+a(c)+")"})}function hW(a){return a.toISOString()}function bP(c,f,b){function a(g){return c(g)}function d(g,o){var m=g[1]-g[0],h=m/o,j=cd.bisect(fY,h);return j==fY.length?[f.year,ey(g.map(function(p){return p/31536000000}),o)[2]]:j?f[h/fY[j-1]<fY[j]/h?j-1:j]:[g2,ey(g,o)[2]]}return a.invert=function(g){return hx(c.invert(g))},a.domain=function(g){return arguments.length?(c.domain(g),a):c.domain().map(hx)},a.nice=function(h,o){function p(q){return !isNaN(q)&&!h.range(q,hx(+q+1),o).length}var m=a.domain(),g=e0(m),j=null==h?d(g,10):"number"==typeof h&&d(g,h);return j&&(h=j[0],o=j[1]),a.domain(hO(m,o>1?{floor:function(q){for(;p(q=h.floor(q));){q=hx(q-1)}return q},ceil:function(q){for(;p(q=h.ceil(q));){q=hx(+q+1)}return q}}:h))},a.ticks=function(m,h){var j=e0(a.domain()),g=null==m?d(j,10):"number"==typeof m?d(j,m):!m.range&&[{range:m},h];return g&&(m=g[0],h=g[1]),m.range(j[0],hx(+j[1]+1),1>h?1:h)},a.tickFormat=function(){return b},a.copy=function(){return bP(c.copy(),f,b)},bq(a,c)}function hx(a){return new Date(a)}function bZ(a){return JSON.parse(a.responseText)}function cl(b){var a=dw.createRange();return a.selectNode(dw.body),a.createContextualFragment(b.responseText)}var cd={version:"3.4.3"};Date.now||(Date.now=function(){return +new Date()});var fR=[].slice,cQ=function(a){return fR.call(a)},dw=document,qp=dw.documentElement,jG=window;try{cQ(qp.childNodes)[0].nodeType}catch(hG){cQ=function(a){for(var b=a.length,c=new Array(b);b--;){c[b]=a[b]}return c}}try{dw.createElement("div").style.setProperty("opacity",0,"")}catch(fL){var f0=jG.Element.prototype,cK=f0.setAttribute,iM=f0.setAttributeNS,eq=jG.CSSStyleDeclaration.prototype,aP=eq.setProperty;f0.setAttribute=function(b,a){cK.call(this,b,a+"")},f0.setAttributeNS=function(a,b,c){iM.call(this,a,b,c+"")},eq.setProperty=function(a,b,c){aP.call(this,a,b+"",c)}}cd.ascending=function(b,a){return a>b?-1:b>a?1:b>=a?0:0/0},cd.descending=function(b,a){return b>a?-1:a>b?1:a>=b?0:0/0},cd.min=function(c,g){var b,a,d=-1,f=c.length;if(1===arguments.length){for(;++d<f&&!(null!=(b=c[d])&&b>=b);){b=void 0}for(;++d<f;){null!=(a=c[d])&&b>a&&(b=a)}}else{for(;++d<f&&!(null!=(b=g.call(c,c[d],d))&&b>=b);){b=void 0}for(;++d<f;){null!=(a=g.call(c,c[d],d))&&b>a&&(b=a)}}return b},cd.max=function(c,g){var b,a,d=-1,f=c.length;if(1===arguments.length){for(;++d<f&&!(null!=(b=c[d])&&b>=b);){b=void 0}for(;++d<f;){null!=(a=c[d])&&a>b&&(b=a)}}else{for(;++d<f&&!(null!=(b=g.call(c,c[d],d))&&b>=b);){b=void 0}for(;++d<f;){null!=(a=g.call(c,c[d],d))&&a>b&&(b=a)}}return b},cd.extent=function(c,g){var a,h,d,f=-1,b=c.length;if(1===arguments.length){for(;++f<b&&!(null!=(a=d=c[f])&&a>=a);){a=d=void 0}for(;++f<b;){null!=(h=c[f])&&(a>h&&(a=h),h>d&&(d=h))}}else{for(;++f<b&&!(null!=(a=d=g.call(c,c[f],f))&&a>=a);){a=void 0}for(;++f<b;){null!=(h=g.call(c,c[f],f))&&(a>h&&(a=h),h>d&&(d=h))}}return[a,d]},cd.sum=function(c,g){var b,a=0,d=c.length,f=-1;if(1===arguments.length){for(;++f<d;){isNaN(b=+c[f])||(a+=b)}}else{for(;++f<d;){isNaN(b=+g.call(c,c[f],f))||(a+=b)}}return a},cd.mean=function(a,c){var b,g=a.length,h=0,d=-1,f=0;if(1===arguments.length){for(;++d<g;){hz(b=a[d])&&(h+=(b-h)/++f)}}else{for(;++d<g;){hz(b=c.call(a,a[d],d))&&(h+=(b-h)/++f)}}return f?h:void 0},cd.quantile=function(c,g){var b=(c.length-1)*g+1,a=Math.floor(b),d=+c[a-1],f=b-a;return f?d+f*(c[a]-d):d},cd.median=function(a,b){return arguments.length>1&&(a=a.map(b)),a=a.filter(hz),a.length?cd.quantile(a.sort(cd.ascending),0.5):void 0},cd.bisector=function(a){return{left:function(b,d,c,f){for(arguments.length<3&&(c=0),arguments.length<4&&(f=b.length);f>c;){var g=c+f>>>1;a.call(b,b[g],g)<d?c=g+1:f=g}return c},right:function(b,d,c,f){for(arguments.length<3&&(c=0),arguments.length<4&&(f=b.length);f>c;){var g=c+f>>>1;d<a.call(b,b[g],g)?f=g:c=g+1}return c}}};var hK=cd.bisector(function(a){return a});cd.bisectLeft=hK.left,cd.bisect=cd.bisectRight=hK.right,cd.shuffle=function(b){for(var c,a,d=b.length;d;){a=0|Math.random()*d--,c=b[d],b[d]=b[a],b[a]=c}return b},cd.permute=function(b,c){for(var a=c.length,d=new Array(a);a--;){d[a]=b[c[a]]}return d},cd.pairs=function(c){for(var g,b=0,a=c.length-1,d=c[0],f=new Array(0>a?0:a);a>b;){f[b]=[g=d,d=c[++b]]}return f},cd.zip=function(){if(!(d=arguments.length)){return[]}for(var c=-1,a=cd.min(arguments,hC),g=new Array(a);++c<a;){for(var d,f=-1,b=g[c]=new Array(d);++f<d;){b[f]=arguments[f][c]}}return g},cd.transpose=function(a){return cd.zip.apply(cd,a)},cd.keys=function(a){var b=[];for(var c in a){b.push(c)}return b},cd.values=function(a){var b=[];for(var c in a){b.push(a[c])}return b},cd.entries=function(a){var b=[];for(var c in a){b.push({key:c,value:a[c]})}return b},cd.merge=function(c){for(var g,a,h,d=c.length,f=-1,b=0;++f<d;){b+=c[f].length}for(a=new Array(b);--d>=0;){for(h=c[d],g=h.length;--g>=0;){a[--b]=h[g]}}return a};var cC=Math.abs;cd.range=function(d,a,b){if(arguments.length<3&&(b=1,arguments.length<2&&(a=d,d=0)),1/0===(a-d)/b){throw new Error("infinite range")}var g,h=[],c=qx(cC(b)),f=-1;if(d*=c,a*=c,b*=c,0>b){for(;(g=d+b*++f)>a;){h.push(g/c)}}else{for(;(g=d+b*++f)<a;){h.push(g/c)}}return h},cd.map=function(a){var b=new hk();if(a instanceof hk){a.forEach(function(f,d){b.set(f,d)})}else{for(var c in a){b.set(c,a[c])}}return b},hP(hk,{has:qb,get:function(a){return this[qD+a]},set:function(b,a){return this[qD+b]=a},remove:hq,keys:qe,values:function(){var a=[];return this.forEach(function(c,b){a.push(b)}),a},entries:function(){var a=[];return this.forEach(function(c,b){a.push({key:c,value:b})}),a},size:pX,empty:hH,forEach:function(b){for(var a in this){a.charCodeAt(0)===p6&&b.call(this,a.substring(1),this[a])}}});var qD="\x00",p6=qD.charCodeAt(0);cd.nest=function(){function d(q,j,w){if(w>=c.length){return a?a.call(g,j):b?j.sort(b):j}for(var t,o,r,s,u=-1,m=j.length,p=c[w++],v=new hk();++u<m;){(s=v.get(t=p(o=j[u])))?s.push(o):v.set(t,[o])}return q?(o=q(),r=function(y,z){o.set(y,d(q,z,w))}):(o={},r=function(y,z){o[y]=d(q,z,w)}),v.forEach(r),o}function h(m,j){if(j>=c.length){return m}var p=[],o=f[j++];return m.forEach(function(q,r){p.push({key:q,values:h(r,j)})}),o?p.sort(function(q,r){return o(q.key,r.key)}):p}var b,a,g={},c=[],f=[];return g.map=function(j,m){return d(m,j,0)},g.entries=function(j){return h(d(cd.map,j,0),0)},g.key=function(j){return c.push(j),g},g.sortKeys=function(j){return f[c.length-1]=j,g},g.sortValues=function(j){return b=j,g},g.rollup=function(j){return a=j,g},g},cd.set=function(b){var c=new fG();if(b){for(var a=0,d=b.length;d>a;++a){c.add(b[a])}}return c},hP(fG,{has:qb,add:function(a){return this[qD+a]=!0,a},remove:function(a){return a=qD+a,a in this&&delete this[a]},values:qe,size:pX,empty:hH,forEach:function(b){for(var a in this){a.charCodeAt(0)===p6&&b.call(this,a.substring(1))}}}),cd.behavior={},cd.rebind=function(c,f){for(var b,a=1,d=arguments.length;++a<d;){c[b=arguments[a]]=al(c,f,f[b])}return c};var cG=["webkit","ms","moz","Moz","o","O"];cd.dispatch=function(){for(var a=new id(),b=-1,c=arguments.length;++b<c;){a[arguments[b]]=g4(a)}return a},id.prototype.on=function(b,c){var a=b.indexOf("."),d="";if(a>=0&&(d=b.substring(a+1),b=b.substring(0,a)),b){return arguments.length<2?this[b].on(d):this[b].on(d,c)}if(2===arguments.length){if(null==c){for(b in this){this.hasOwnProperty(b)&&this[b].on(d,null)}}return this}},cd.event=null,cd.requote=function(a){return a.replace(gL,"\\$&")};var gL=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,f9={}.__proto__?function(b,a){b.__proto__=a}:function(a,b){for(var c in b){a[c]=b[c]}},gB=function(b,a){return a.querySelector(b)},gK=function(b,a){return a.querySelectorAll(b)},dT=qp[ad(qp,"matchesSelector")],bE=function(b,a){return dT.call(b,a)};"function"==typeof Sizzle&&(gB=function(b,a){return Sizzle(b,a)[0]||null},gK=function(b,a){return Sizzle.uniqueSort(Sizzle(b,a))},bE=Sizzle.matchesSelector),cd.selection=function(){return aZ};var hR=cd.selection.prototype=[];hR.select=function(d){var o,g,b,m,f=[];d=j6(d);for(var c=-1,j=this.length;++c<j;){f.push(o=[]),o.parentNode=(b=this[c]).parentNode;for(var h=-1,a=b.length;++h<a;){(m=b[h])?(o.push(g=d.call(m,m.__data__,h,c)),g&&"__data__" in m&&(g.__data__=m.__data__)):o.push(null)}}return gS(f)},hR.selectAll=function(c){var m,f,a=[];c=qg(c);for(var j=-1,d=this.length;++j<d;){for(var b=this[j],h=-1,g=b.length;++h<g;){(f=b[h])&&(a.push(m=cQ(c.call(f,f.__data__,h,j))),m.parentNode=f)}}return gS(a)};var eX={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};cd.ns={prefix:eX,qualify:function(a){var b=a.indexOf(":"),c=a;return b>=0&&(c=a.substring(0,b),a=a.substring(b+1)),eX.hasOwnProperty(c)?{space:eX[c],local:a}:a}},hR.attr=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node();return a=cd.ns.qualify(a),a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a){this.each(qd(b,a[b]))}return this}return this.each(qd(a,b))},hR.classed=function(c,f){if(arguments.length<2){if("string"==typeof c){var b=this.node(),a=(c=fM(c)).length,d=-1;if(f=b.classList){for(;++d<a;){if(!f.contains(c[d])){return !1}}}else{for(f=b.getAttribute("class");++d<a;){if(!iR(c[d]).test(f)){return !1}}}return !0}for(f in c){this.each(qj(f,c[f]))}return this}return this.each(qj(c,f))},hR.style=function(b,c,a){var d=arguments.length;if(3>d){if("string"!=typeof b){2>d&&(c="");for(a in b){this.each(qo(a,b[a],c))}return this}if(2>d){return jG.getComputedStyle(this.node(),null).getPropertyValue(b)}a=""}return this.each(qo(b,c,a))},hR.property=function(b,a){if(arguments.length<2){if("string"==typeof b){return this.node()[b]}for(a in b){this.each(i8(a,b[a]))}return this}return this.each(i8(b,a))},hR.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent},hR.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML},hR.append=function(a){return a=pV(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})},hR.insert=function(b,a){return b=pV(b),a=j6(a),this.select(function(){return this.insertBefore(b.apply(this,arguments),a.apply(this,arguments)||null)})},hR.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})},hR.data=function(d,o){function h(A,s){var E,q,u,C=A.length,B=s.length,r=Math.min(C,B),z=new Array(B),t=new Array(B),D=new Array(C);if(o){var v,p=new hk(),w=new hk(),y=[];for(E=-1;++E<C;){v=o.call(q=A[E],q.__data__,E),p.has(v)?D[E]=q:p.set(v,q),y.push(v)}for(E=-1;++E<B;){v=o.call(s,u=s[E],E),(q=p.get(v))?(z[E]=q,q.__data__=u):w.has(v)||(t[E]=gA(u)),w.set(v,u),p.remove(v)}for(E=-1;++E<C;){p.has(y[E])&&(D[E]=A[E])}}else{for(E=-1;++E<r;){q=A[E],u=s[E],q?(q.__data__=u,z[E]=q):t[E]=gA(u)}for(;B>E;++E){t[E]=gA(s[E])}for(;C>E;++E){D[E]=A[E]}}t.update=z,t.parentNode=z.parentNode=D.parentNode=A.parentNode,j.push(t),a.push(z),f.push(D)}var b,g,c=-1,m=this.length;if(!arguments.length){for(d=new Array(m=(b=this[0]).length);++c<m;){(g=b[c])&&(d[c]=g.__data__)}return d}var j=qk([]),a=gS([]),f=gS([]);if("function"==typeof d){for(;++c<m;){h(b=this[c],d.call(b,b.parentNode.__data__,c))}}else{for(;++c<m;){h(b=this[c],d)}}return a.enter=function(){return j},a.exit=function(){return f},a},hR.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")},hR.filter=function(c){var m,f,a,j=[];"function"!=typeof c&&(c=h5(c));for(var d=0,b=this.length;b>d;d++){j.push(m=[]),m.parentNode=(f=this[d]).parentNode;for(var h=0,g=f.length;g>h;h++){(a=f[h])&&c.call(a,a.__data__,h,d)&&m.push(a)}}return gS(j)},hR.order=function(){for(var c=-1,g=this.length;++c<g;){for(var b,a=this[c],d=a.length-1,f=a[d];--d>=0;){(b=a[d])&&(f&&f!==b.nextSibling&&f.parentNode.insertBefore(b,f),f=b)}}return this},hR.sort=function(a){a=iN.apply(this,arguments);for(var b=-1,c=this.length;++b<c;){this[b].sort(a)}return this.order()},hR.each=function(a){return iU(this,function(d,c,b){a.call(d,d.__data__,c,b)})},hR.call=function(b){var a=cQ(arguments);return b.apply(a[0]=this,a),this},hR.empty=function(){return !this.node()},hR.node=function(){for(var c=0,g=this.length;g>c;c++){for(var b=this[c],a=0,d=b.length;d>a;a++){var f=b[a];if(f){return f}}}return null},hR.size=function(){var a=0;return this.each(function(){++a}),a};var i9=[];cd.selection.enter=qk,cd.selection.enter.prototype=i9,i9.append=hR.append,i9.empty=hR.empty,i9.node=hR.node,i9.call=hR.call,i9.size=hR.size,i9.select=function(f){for(var a,j,c,p,h,d=[],o=-1,m=this.length;++o<m;){c=(p=this[o]).update,d.push(a=[]),a.parentNode=p.parentNode;for(var b=-1,g=p.length;++b<g;){(h=p[b])?(a.push(c[b]=j=f.call(p.parentNode,h.__data__,b,o)),j.__data__=h.__data__):a.push(null)}}return gS(d)},i9.insert=function(b,a){return arguments.length<2&&(a=i2(this)),hR.insert.call(this,b,a)},hR.transition=function(){for(var d,o,g=fK||++il,b=[],m=aw||{time:Date.now(),ease:p0,delay:0,duration:250},f=-1,c=this.length;++f<c;){b.push(d=[]);for(var j=this[f],h=-1,a=j.length;++h<a;){(o=j[h])&&f6(o,h,g,m),d.push(o)}}return bJ(b,g)},hR.interrupt=function(){return this.each(iL)},cd.select=function(b){var a=["string"==typeof b?gB(b,dw):b];return a.parentNode=qp,gS([a])},cd.selectAll=function(b){var a=cQ("string"==typeof b?gK(b,dw):b);return a.parentNode=qp,gS([a])};var aZ=cd.select(qp);hR.on=function(b,c,a){var d=arguments.length;if(3>d){if("string"!=typeof b){2>d&&(c=!1);for(a in b){this.each(fU(a,b[a],c))}return this}if(2>d){return(d=this.node()["__on"+b])&&d._}a=!1}return this.each(fU(b,c,a))};var eD=cd.map({mouseenter:"mouseover",mouseleave:"mouseout"});eD.forEach(function(a){"on"+a in dw&&eD.remove(a)});var bn="onselectstart" in dw?null:ad(qp.style,"userSelect"),ql=0;cd.mouse=function(a){return iA(a,fk())};var aC=/WebKit/.test(jG.navigator.userAgent)?-1:0;cd.touches=function(b,a){return arguments.length<2&&(a=fk().touches),a?cQ(a).map(function(c){var d=iA(b,c);return d.identifier=c.identifier,d}):[]},cd.behavior.drag=function(){function d(){this.on("mousedown.drag",c).on("touchstart.drag",f)}function j(){return cd.event.changedTouches[0].identifier}function b(m,o){return cd.touches(m).filter(function(p){return p.identifier===o})[0]}function a(p,q,o,m){return function(){function v(){var F=q(B,D),H=F[0]-y[0],G=F[1]-y[1];r|=H|G,y=F,E({type:"drag",x:F[0]+s[0],y:F[1]+s[1],dx:H,dy:G})}function w(){z.on(o+"."+u,null).on(m+"."+u,null),t(r&&cd.event.target===C),E({type:"dragend"})}var s,A=this,B=A.parentNode,E=g.of(A,arguments),C=cd.event.target,D=p(),u=null==D?"drag":"drag-"+D,y=q(B,D),r=0,z=cd.select(jG).on(o+"."+u,v).on(m+"."+u,w),t=i4();h?(s=h.apply(A,arguments),s=[s.x-y[0],s.y-y[1]]):s=[0,0],E({type:"dragstart"})}}var g=gI(d,"drag","dragstart","dragend"),h=null,c=a(ag,cd.mouse,"mousemove","mouseup"),f=a(j,b,"touchmove","touchend");return d.origin=function(m){return arguments.length?(h=m,d):h},cd.rebind(d,g,"on")};var fn=Math.PI,g3=2*fn,j4=fn/2,bm=0.000001,b1=bm*bm,g6=fn/180,iY=180/fn,an=Math.SQRT2,cA=2,fg=4;cd.interpolateZoom=function(f,p){function u(B){var C=B*g;if(h){var z=qq(j),A=o/(cA*q)*(z*iD(an*C+j)-pZ(j));return[a+A*t,b+A*m,o*z/qq(an*C+j)]}return[a+B*t,b+B*m,o*Math.exp(an*C)]}var a=f[0],b=f[1],o=f[2],d=p[0],y=p[1],w=p[2],t=d-a,m=y-b,s=t*t+m*m,q=Math.sqrt(s),r=(w*w-o*o+fg*s)/(2*o*cA*q),c=(w*w-o*o-fg*s)/(2*w*cA*q),j=Math.log(Math.sqrt(r*r+1)-r),v=Math.log(Math.sqrt(c*c+1)-c),h=v-j,g=(h||Math.log(w/o))/an;return u.duration=1000*g,u},cd.behavior.zoom=function(){function E(K){K.on(B,w).on(dF+".zoom",b).on(y,J).on("dblclick.zoom",a).on(p,G)}function o(K){return[(K[0]-f.x)/f.k,(K[1]-f.y)/f.k]}function c(K){return[K[0]*f.k+f.x,K[1]*f.k+f.y]}function A(K){f.k=Math.max(h[0],Math.min(h[1],K))}function g(L,K){K=c(K),f.x+=L[0]-K[0],f.y+=L[1]-K[1]}function I(){v&&v.domain(s.range().map(function(K){return(K-f.x)/f.k}).map(s.invert)),z&&z.domain(q.range().map(function(K){return(K-f.y)/f.k}).map(q.invert))}function D(K){K({type:"zoomstart"})}function r(K){I(),K({type:"zoom",scale:f.k,translate:[f.x,f.y]})}function j(K){K({type:"zoomend"})}function w(){function P(){Q=1,g(cd.mouse(N),S),r(R)}function L(){K.on(y,jG===N?J:null).on(m,null),O(Q&&cd.event.target===M),j(R)}var N=this,R=t.of(N,arguments),M=cd.event.target,Q=0,K=cd.select(jG).on(y,P).on(m,L),S=o(cd.mouse(N)),O=i4();iL.call(N),D(R)}function G(){function O(){var Z=cd.touches(L);return K=f.k,Z.forEach(function(aa){aa.identifier in V&&(V[aa.identifier]=o(aa))}),Z}function U(){for(var ao=cd.event.changedTouches,ac=0,au=ao.length;au>ac;++ac){V[ao[ac].identifier]=null}var aa=O(),ai=Date.now();if(1===aa.length){if(500>ai-u){var ar=aa[0],at=V[ar.identifier];A(2*f.k),g(ar,at),qC(),r(M)}u=ai}else{if(aa.length>1){var ar=aa[0],ae=aa[1],a0=ar[0]-ae[0],Z=ar[1]-ae[1];W=a0*a0+Z*Z}}}function Q(){for(var ao,ai,Z,at,ac=cd.touches(L),aa=0,ae=ac.length;ae>aa;++aa,at=null){if(Z=ac[aa],at=V[Z.identifier]){if(ai){break}ao=Z,ai=at}}if(at){var ar=(ar=Z[0]-ao[0])*ar+(ar=Z[1]-ao[1])*ar,au=W&&Math.sqrt(ar/W);ao=[(ao[0]+Z[0])/2,(ao[1]+Z[1])/2],ai=[(ai[0]+at[0])/2,(ai[1]+at[1])/2],A(au*K)}u=null,g(ao,ai),r(M)}function N(){if(cd.event.touches.length){for(var Z=cd.event.changedTouches,ac=0,aa=Z.length;aa>ac;++ac){delete V[Z[ac].identifier]}for(var ae in V){return void O()}}S.on(X,null).on(T,null),R.on(B,w).on(p,G),Y(),j(M)}var K,L=this,M=t.of(L,arguments),V={},W=0,P=cd.event.changedTouches[0].identifier,X="touchmove.zoom-"+P,T="touchend.zoom-"+P,S=cd.select(jG).on(X,Q).on(T,N),R=cd.select(L).on(B,null).on(p,U),Y=i4();iL.call(L),U(),D(M)}function b(){var L=t.of(this,arguments);F?clearTimeout(F):(iL.call(this),D(L)),F=setTimeout(function(){F=null,j(L)},50),qC();var K=d||cd.mouse(this);C||(C=o(K)),A(Math.pow(2,0.002*hw())*f.k),g(K,C),r(L)}function J(){C=null}function a(){var L=t.of(this,arguments),K=cd.mouse(this),M=o(K),N=Math.log(f.k)/Math.LN2;D(L),A(Math.pow(2,cd.event.shiftKey?Math.ceil(N)-1:Math.floor(N)+1)),g(K,M),r(L),j(L)}var C,d,F,u,s,v,q,z,f={x:0,y:0,k:1},H=[960,500],h=dJ,B="mousedown.zoom",y="mousemove.zoom",m="mouseup.zoom",p="touchstart.zoom",t=gI(E,"zoomstart","zoom","zoomend");return E.event=function(K){K.each(function(){var L=t.of(this,arguments),M=f;fK?cd.select(this).transition().each("start.zoom",function(){f=this.__chart__||{x:0,y:0,k:1},D(L)}).tween("zoom:zoom",function(){var P=H[0],O=H[1],R=P/2,N=O/2,Q=cd.interpolateZoom([(R-f.x)/f.k,(N-f.y)/f.k,P/f.k],[(R-M.x)/M.k,(N-M.y)/M.k,P/M.k]);return function(S){var T=Q(S),U=P/T[2];this.__chart__=f={x:R-T[0]*U,y:N-T[1]*U,k:U},r(L)}}).each("end.zoom",function(){j(L)}):(this.__chart__=f,D(L),r(L),j(L))})},E.translate=function(K){return arguments.length?(f={x:+K[0],y:+K[1],k:f.k},I(),E):[f.x,f.y]},E.scale=function(K){return arguments.length?(f={x:f.x,y:f.y,k:+K},I(),E):f.k},E.scaleExtent=function(K){return arguments.length?(h=null==K?dJ:[+K[0],+K[1]],E):h},E.center=function(K){return arguments.length?(d=K&&[+K[0],+K[1]],E):d},E.size=function(K){return arguments.length?(H=K&&[+K[0],+K[1]],E):H},E.x=function(K){return arguments.length?(v=K,s=K.copy(),f={x:0,y:0,k:1},E):v},E.y=function(K){return arguments.length?(z=K,q=K.copy(),f={x:0,y:0,k:1},E):z},cd.rebind(E,t,"on")};var hw,dJ=[0,1/0],dF="onwheel" in dw?(hw=function(){return -cd.event.deltaY*(cd.event.deltaMode?120:1)},"wheel"):"onmousewheel" in dw?(hw=function(){return cd.event.wheelDelta},"mousewheel"):(hw=function(){return -cd.event.detail},"MozMousePixelScroll");hL.prototype.toString=function(){return this.rgb()+""},cd.hsl=function(a,b,c){return 1===arguments.length?a instanceof i0?hh(a.h,a.s,a.l):jA(""+a,d7,hh):hh(+a,+b,+c)};var gm=i0.prototype=new hL();gm.brighter=function(a){return a=Math.pow(0.7,arguments.length?a:1),hh(this.h,this.s,this.l/a)},gm.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),hh(this.h,this.s,a*this.l)},gm.rgb=function(){return ed(this.h,this.s,this.l)},cd.hcl=function(a,b,c){return 1===arguments.length?a instanceof eN?df(a.h,a.c,a.l):a instanceof gk?p3(a.l,a.a,a.b):p3((a=p5((a=cd.rgb(a)).r,a.g,a.b)).l,a.a,a.b):df(+a,+b,+c)};var fW=eN.prototype=new hL();fW.brighter=function(a){return df(this.h,this.c,Math.min(100,this.l+qf*(arguments.length?a:1)))},fW.darker=function(a){return df(this.h,this.c,Math.max(0,this.l-qf*(arguments.length?a:1)))},fW.rgb=function(){return eO(this.h,this.c,this.l).rgb()},cd.lab=function(a,b,c){return 1===arguments.length?a instanceof gk?el(a.l,a.a,a.b):a instanceof eN?eO(a.l,a.c,a.h):p5((a=cd.rgb(a)).r,a.g,a.b):el(+a,+b,+c)};var qf=18,bH=0.95047,g5=1,c9=1.08883,jE=gk.prototype=new hL();jE.brighter=function(a){return el(Math.min(100,this.l+qf*(arguments.length?a:1)),this.a,this.b)},jE.darker=function(a){return el(Math.max(0,this.l-qf*(arguments.length?a:1)),this.a,this.b)},jE.rgb=function(){return d4(this.l,this.a,this.b)},cd.rgb=function(a,b,c){return 1===arguments.length?a instanceof eT?hm(a.r,a.g,a.b):jA(""+a,hm,ed):hm(~~a,~~b,~~c)};var ek=eT.prototype=new hL();ek.brighter=function(c){c=Math.pow(0.7,arguments.length?c:1);var f=this.r,b=this.g,a=this.b,d=30;return f||b||a?(f&&d>f&&(f=d),b&&d>b&&(b=d),a&&d>a&&(a=d),hm(Math.min(255,~~(f/c)),Math.min(255,~~(b/c)),Math.min(255,~~(a/c)))):hm(d,d,d)},ek.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),hm(~~(a*this.r),~~(a*this.g),~~(a*this.b))},ek.hsl=function(){return d7(this.r,this.g,this.b)},ek.toString=function(){return"#"+jQ(this.r)+jQ(this.g)+jQ(this.b)};var fH=cd.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});fH.forEach(function(b,a){fH.set(b,hd(a))}),cd.functor=dl,cd.xhr=bz(iI),cd.dsv=function(c,m){function f(p,r,q){arguments.length<3&&(q=r,r=null);var o=dy(p,m,null==r?a:j(r),q);return o.row=function(s){return arguments.length?o.response(null==(r=s)?a:j(s)):r},o}function a(o){return f.parse(o.responseText)}function j(o){return function(p){return f.parse(p.responseText,o)}}function d(o){return o.map(b).join(c)}function b(o){return h.test(o)?'"'+o.replace(/\"/g,'""')+'"':o}var h=new RegExp('["'+c+"\n]"),g=c.charCodeAt(0);return f.parse=function(p,q){var o;return f.parseRows(p,function(t,s){if(o){return o(t,s-1)}var r=new Function("d","return {"+t.map(function(v,u){return JSON.stringify(v)+": d["+u+"]"}).join(",")+"}");o=q?function(v,u){return q(r(v),u)}:r})},f.parseRows=function(z,t){function v(){if(A>=u){return w}if(r){return r=!1,o}var C=A;if(34===z.charCodeAt(C)){for(var D=C;D++<u;){if(34===z.charCodeAt(D)){if(34!==z.charCodeAt(D+1)){break}++D}}A=D+2;var E=z.charCodeAt(D+1);return 13===E?(r=!0,10===z.charCodeAt(D+2)&&++A):10===E&&(r=!0),z.substring(C+1,D).replace(/""/g,'"')}for(;u>A;){var E=z.charCodeAt(A++),B=1;if(10===E){r=!0}else{if(13===E){r=!0,10===z.charCodeAt(A)&&(++A,++B)}else{if(E!==g){continue}}}return z.substring(C,A-B)}return z.substring(C)}for(var p,r,o={},w={},y=[],u=z.length,A=0,s=0;(p=v())!==w;){for(var q=[];p!==o&&p!==w;){q.push(p),p=v()}(!t||(q=t(q,s++)))&&y.push(q)}return y},f.format=function(o){if(Array.isArray(o[0])){return f.formatRows(o)}var p=new fG(),q=[];return o.forEach(function(s){for(var r in s){p.has(r)||q.push(p.add(r))}}),[q.map(b).join(c)].concat(o.map(function(r){return q.map(function(s){return b(r[s])}).join(c)})).join("\n")},f.formatRows=function(o){return o.map(d).join("\n")},f},cd.csv=cd.dsv(",","text/csv"),cd.tsv=cd.dsv("\t","text/tab-separated-values");var cS,dL,av,fw,ik,aS=jG[ad(jG,"requestAnimationFrame")]||function(a){setTimeout(a,17)};cd.timer=function(c,g,b){var a=arguments.length;2>a&&(g=0),3>a&&(b=Date.now());var d=b+g,f={c:c,t:d,f:!1,n:null};dL?dL.n=f:cS=f,dL=f,av||(fw=clearTimeout(fw),av=1,aS(aq))},cd.timer.flush=function(){cj(),aJ()},cd.round=function(b,a){return a?Math.round(b*(a=Math.pow(10,a)))/a:Math.round(b)};var gG=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(fb);cd.formatPrefix=function(a,b){var c=0;return a&&(0>a&&(a*=-1),b&&(a=cd.round(a,ig(a,b))),c=1+Math.floor(1e-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((0>=c?c+1:c-1)/3)))),gG[8+c/3]};var gb=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,fQ=cd.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(b,a){return b.toPrecision(a)},e:function(b,a){return b.toExponential(a)},f:function(b,a){return b.toFixed(a)},r:function(b,a){return(b=cd.round(b,ig(b,a))).toFixed(Math.max(0,Math.min(20,ig(b*(1+1e-15),a))))}}),cE=cd.time={},iJ=Date;ff.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){eh.setUTCDate.apply(this._,arguments)},setDay:function(){eh.setUTCDay.apply(this._,arguments)},setFullYear:function(){eh.setUTCFullYear.apply(this._,arguments)},setHours:function(){eh.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){eh.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){eh.setUTCMinutes.apply(this._,arguments)},setMonth:function(){eh.setUTCMonth.apply(this._,arguments)},setSeconds:function(){eh.setUTCSeconds.apply(this._,arguments)},setTime:function(){eh.setTime.apply(this._,arguments)}};var eh=Date.prototype;cE.year=ej(function(a){return a=cE.day(a),a.setMonth(0,1),a},function(b,a){b.setFullYear(b.getFullYear()+a)},function(a){return a.getFullYear()}),cE.years=cE.year.range,cE.years.utc=cE.year.utc.range,cE.day=ej(function(b){var a=new iJ(2000,0);return a.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),a},function(b,a){b.setDate(b.getDate()+a)},function(a){return a.getDate()-1}),cE.days=cE.day.range,cE.days.utc=cE.day.utc.range,cE.dayOfYear=function(b){var a=cE.year(b);return Math.floor((b-a-60000*(b.getTimezoneOffset()-a.getTimezoneOffset()))/86400000)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(a,b){b=7-b;var c=cE[a]=ej(function(d){return(d=cE.day(d)).setDate(d.getDate()-(d.getDay()+b)%7),d},function(f,d){f.setDate(f.getDate()+7*Math.floor(d))},function(f){var d=cE.year(f).getDay();return Math.floor((cE.dayOfYear(f)+(d+b)%7)/7)-(d!==b)});cE[a+"s"]=c.range,cE[a+"s"].utc=c.utc.range,cE[a+"OfYear"]=function(f){var d=cE.year(f).getDay();return Math.floor((cE.dayOfYear(f)+(d+b)%7)/7)}}),cE.week=cE.sunday,cE.weeks=cE.sunday.range,cE.weeks.utc=cE.sunday.utc.range,cE.weekOfYear=cE.sundayOfYear;var aL={"-":"",_:" ",0:"0"},e7=/^\s*\d+/,cx=/^%/;cd.locale=function(a){return{numberFormat:qv(a),timeFormat:eA(a)}};var qB=cd.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});cd.format=qB.numberFormat,cd.geo={},bU.prototype={s:0,t:0,add:function(a){d2(a,this.t,qz),d2(qz.s,this.s,this),this.s?this.t+=qz.t:this.s=qz.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var qz=new bU();cd.geo.stream=function(b,a){b&&cy.hasOwnProperty(b.type)?cy[b.type](b,a):eY(b,a)};var cy={Feature:function(b,a){eY(b.geometry,a)},FeatureCollection:function(c,f){for(var b=c.features,a=-1,d=b.length;++a<d;){eY(b[a].geometry,f)}}},gF={Sphere:function(b,a){a.sphere()},Point:function(b,a){b=b.coordinates,a.point(b[0],b[1],b[2])},MultiPoint:function(c,f){for(var b=c.coordinates,a=-1,d=b.length;++a<d;){c=b[a],f.point(c[0],c[1],c[2])}},LineString:function(b,a){cv(b.coordinates,a,0)},MultiLineString:function(c,f){for(var b=c.coordinates,a=-1,d=b.length;++a<d;){cv(b[a],f,0)}},Polygon:function(b,a){qA(b.coordinates,a)},MultiPolygon:function(c,f){for(var b=c.coordinates,a=-1,d=b.length;++a<d;){qA(b[a],f)}},GeometryCollection:function(c,f){for(var b=c.geometries,a=-1,d=b.length;++a<d;){eY(b[a],f)}}};cd.geo.area=function(a){return f4=0,cd.geo.stream(a,gE),f4};var f4,gw=new bU(),gE={sphere:function(){f4+=4*fn},point:ag,lineStart:ag,lineEnd:ag,polygonStart:function(){gw.reset(),gE.lineStart=am},polygonEnd:function(){var a=2*gw;f4+=0>a?4*fn+a:a,gE.lineStart=gE.lineEnd=gE.point=ag}};cd.geo.bounds=function(){function d(C,D){p.push(g=[q=C,s=C]),v>D&&(v=D),D>u&&(u=D)}function j(D,L){var H=cf([D*g6,L*g6]);if(f){var C=fX(f,H),K=[C[1],-C[0],0],J=fX(K,C);dB(J),J=pU(J);var G=D-b,E=G>0?1:-1,M=J[0]*iY*E,F=cC(G)>180;if(F^(M>E*b&&E*D>M)){var I=J[1]*iY;I>u&&(u=I)}else{if(M=(M+360)%360-180,F^(M>E*b&&E*D>M)){var I=-J[1]*iY;v>I&&(v=I)}else{v>L&&(v=L),L>u&&(u=L)}}F?b>D?A(q,D)>A(q,s)&&(s=D):A(D,s)>A(q,s)&&(q=D):s>=q?(q>D&&(q=D),D>s&&(s=D)):D>b?A(q,D)>A(q,s)&&(s=D):A(D,s)>A(q,s)&&(q=D)}else{d(D,L)}f=H,b=D}function w(){B.point=j}function a(){g[0]=q,g[1]=s,B.point=d,f=null}function t(D,C){if(f){var E=D-b;h+=cC(E)>180?E+(E>0?360:-360):E}else{o=D,y=C}gE.point(D,C),j(D,C)}function r(){gE.lineStart()}function c(){t(o,y),gE.lineEnd(),cC(h)>bm&&(q=-(s=180)),g[0]=q,g[1]=s,f=null}function A(C,D){return(D-=C)<0?D+360:D}function z(C,D){return C[0]-D[0]}function m(C,D){return D[0]<=D[1]?D[0]<=C&&C<=D[1]:C<D[0]||D[1]<C}var q,v,s,u,b,o,y,f,h,p,g,B={point:d,lineStart:w,lineEnd:a,polygonStart:function(){B.point=t,B.lineStart=r,B.lineEnd=c,h=0,gE.polygonStart()},polygonEnd:function(){gE.polygonEnd(),B.point=d,B.lineStart=w,B.lineEnd=a,0>gw?(q=-(s=180),v=-(u=90)):h>bm?u=90:-bm>h&&(v=-90),g[0]=q,g[1]=s}};return function(J){u=s=-(q=v=1/0),p=[],cd.geo.stream(J,B);var G=p.length;if(G){p.sort(z);for(var C,H=1,D=p[0],F=[D];G>H;++H){C=p[H],m(C[0],D)||m(C[1],D)?(A(D[0],C[1])>A(D[0],D[1])&&(D[1]=C[1]),A(C[0],D[1])>A(D[0],D[1])&&(D[0]=C[0])):F.push(D=C)}for(var E,C,I=-1/0,G=F.length-1,H=0,D=F[G];G>=H;D=C,++H){C=F[H],(E=A(D[1],C[0]))>I&&(I=E,q=C[0],s=D[1])}}return p=g=null,1/0===q||1/0===v?[[0/0,0/0],[0/0,0/0]]:[[q,v],[s,u]]}}(),cd.geo.centroid=function(c){dN=bv=hN=eV=i5=aW=ep=bl=qh=ay=fj=0,cd.geo.stream(c,gX);var f=qh,b=ay,a=fj,d=f*f+b*b+a*a;return b1>d&&(f=aW,b=ep,a=bl,bm>bv&&(f=hN,b=eV,a=i5),d=f*f+b*b+a*a,b1>d)?[0/0,0/0]:[Math.atan2(b,f)*iY,iB(a/Math.sqrt(d))*iY]};var dN,bv,hN,eV,i5,aW,ep,bl,qh,ay,fj,gX={sphere:ag,point:eS,lineStart:cq,lineEnd:d8,polygonStart:function(){gX.lineStart=bh},polygonEnd:function(){gX.lineStart=cq}},j1=aI(hS,ab,e5,[-fn,-fn/2]),bf=1000000000;cd.geo.clipExtent=function(){var c,g,a,h,d,f,b={stream:function(j){return d&&(d.valid=!1),d=f(j),d.valid=!0,d},extent:function(j){return arguments.length?(f=hX(c=+j[0][0],g=+j[0][1],a=+j[1][0],h=+j[1][1]),d&&(d.valid=!1,d=null),b):[[c,g],[a,h]]}};return b.extent([[0,0],[960,500]])},(cd.geo.conicEqualArea=function(){return fN(p2)}).raw=p2,cd.geo.albers=function(){return cd.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)},cd.geo.albersUsa=function(){function c(p){var q=p[0],o=p[1];return m=null,f(q,o),m||(a(q,o),m)||j(q,o),m}var m,f,a,j,d=cd.geo.albers(),b=cd.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=cd.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),g={point:function(o,p){m=[o,p]}};return c.invert=function(p){var r=d.scale(),o=d.translate(),s=(p[0]-o[0])/r,q=(p[1]-o[1])/r;return(q>=0.12&&0.234>q&&s>=-0.425&&-0.214>s?b:q>=0.166&&0.234>q&&s>=-0.214&&-0.115>s?h:d).invert(p)},c.stream=function(p){var q=d.stream(p),o=b.stream(p),r=h.stream(p);return{point:function(t,s){q.point(t,s),o.point(t,s),r.point(t,s)},sphere:function(){q.sphere(),o.sphere(),r.sphere()},lineStart:function(){q.lineStart(),o.lineStart(),r.lineStart()},lineEnd:function(){q.lineEnd(),o.lineEnd(),r.lineEnd()},polygonStart:function(){q.polygonStart(),o.polygonStart(),r.polygonStart()},polygonEnd:function(){q.polygonEnd(),o.polygonEnd(),r.polygonEnd()}}},c.precision=function(o){return arguments.length?(d.precision(o),b.precision(o),h.precision(o),c):d.precision()},c.scale=function(o){return arguments.length?(d.scale(o),b.scale(0.35*o),h.scale(o),c.translate(d.translate())):d.scale()},c.translate=function(r){if(!arguments.length){return d.translate()}var o=d.scale(),q=+r[0],p=+r[1];return f=d.translate(r).clipExtent([[q-0.455*o,p-0.238*o],[q+0.455*o,p+0.238*o]]).stream(g).point,a=b.translate([q-0.307*o,p+0.201*o]).clipExtent([[q-0.425*o+bm,p+0.12*o+bm],[q-0.214*o-bm,p+0.234*o-bm]]).stream(g).point,j=h.translate([q-0.205*o,p+0.212*o]).clipExtent([[q-0.214*o+bm,p+0.166*o+bm],[q-0.115*o-bm,p+0.234*o-bm]]).stream(g).point,c},c.scale(1070)};var dv,gZ,iT,aj,cw,e9,hj={point:ag,lineStart:ag,lineEnd:ag,polygonStart:function(){gZ=0,hj.lineStart=bx},polygonEnd:function(){hj.lineStart=hj.lineEnd=hj.point=ag,dv+=cC(gZ/2)}},c0={point:gP,lineStart:ag,lineEnd:ag,polygonStart:ag,polygonEnd:ag},dD={point:fq,lineStart:cP,lineEnd:cI,polygonStart:function(){dD.lineStart=eK},polygonEnd:function(){dD.point=fq,dD.lineStart=cP,dD.lineEnd=cI}};cd.geo.path=function(){function d(m){return m&&("function"==typeof f&&h.pointRadius(+f.apply(this,arguments)),c&&c.valid||(c=g(h)),cd.geo.stream(m,c)),h.result()}function j(){return c=null,d}var b,a,g,h,c,f=4.5;return d.area=function(m){return dv=0,cd.geo.stream(m,g(hj)),dv},d.centroid=function(m){return hN=eV=i5=aW=ep=bl=qh=ay=fj=0,cd.geo.stream(m,g(dD)),fj?[qh/fj,ay/fj]:bl?[aW/bl,ep/bl]:i5?[hN/i5,eV/i5]:[0/0,0/0]},d.bounds=function(m){return cw=e9=-(iT=aj=1/0),cd.geo.stream(m,g(c0)),[[iT,aj],[cw,e9]]},d.projection=function(m){return arguments.length?(g=(b=m)?m.stream||ih(m):iI,j()):b},d.context=function(m){return arguments.length?(h=null==(a=m)?new cW():new aY(m),"function"!=typeof f&&h.pointRadius(f),j()):a},d.pointRadius=function(m){return arguments.length?(f="function"==typeof m?m:(h.pointRadius(+m),+m),d):f},d.projection(cd.geo.albersUsa()).context(null)},cd.geo.transform=function(a){return{stream:function(d){var c=new jM(d);for(var b in a){c[b]=a[b]}return c}}},jM.prototype={point:function(b,a){this.stream.point(b,a)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},cd.geo.projection=f2,cd.geo.projectionMutator=ev,(cd.geo.equirectangular=function(){return f2(eU)}).raw=eU.invert=eU,cd.geo.rotation=function(b){function a(c){return c=b(c[0]*g6,c[1]*g6),c[0]*=iY,c[1]*=iY,c}return b=c6(b[0]%360*g6,b[1]*g6,b.length>2?b[2]*g6:0),a.invert=function(c){return c=b.invert(c[0]*g6,c[1]*g6),c[0]*=iY,c[1]*=iY,c},a},bj.invert=eU,cd.geo.circle=function(){function c(){var j="function"==typeof a?a.apply(this,arguments):a,h=c6(-j[0]*g6,-j[1]*g6,0).invert,g=[];return b(null,null,1,{point:function(m,o){g.push(m=h(m,o)),m[0]*=iY,m[1]*=iY}}),{type:"Polygon",coordinates:[g]}}var f,b,a=[0,0],d=6;return c.origin=function(g){return arguments.length?(a=g,c):a},c.angle=function(g){return arguments.length?(b=hJ((f=+g)*g6,d*g6),c):f},c.precision=function(g){return arguments.length?(b=hJ(f*g6,(d=+g)*g6),c):d},c.angle(90)},cd.geo.distance=function(h,d){var p,c=(d[0]-h[0])*g6,b=h[1]*g6,m=d[1]*g6,g=Math.sin(c),a=Math.cos(c),q=Math.sin(b),f=Math.cos(b),j=Math.sin(m),o=Math.cos(m);return Math.atan2(Math.sqrt((p=o*g)*p+(p=f*j-q*o*a)*p),q*j+f*o*a)},cd.geo.graticule=function(){function f(){return{type:"MultiLineString",coordinates:p()}}function p(){return cd.range(Math.ceil(o/v)*v,b,v).map(q).concat(cd.range(Math.ceil(t/h)*h,w,h).map(r)).concat(cd.range(Math.ceil(a/c)*c,u,c).filter(function(z){return cC(z%v)>bm}).map(m)).concat(cd.range(Math.ceil(y/j)*j,d,j).filter(function(z){return cC(z%h)>bm}).map(s))}var u,a,b,o,d,y,w,t,m,s,q,r,c=10,j=c,v=90,h=360,g=2.5;return f.lines=function(){return p().map(function(z){return{type:"LineString",coordinates:z}})},f.outline=function(){return{type:"Polygon",coordinates:[q(o).concat(r(w).slice(1),q(b).reverse().slice(1),r(t).reverse().slice(1))]}},f.extent=function(z){return arguments.length?f.majorExtent(z).minorExtent(z):f.minorExtent()},f.majorExtent=function(z){return arguments.length?(o=+z[0][0],b=+z[1][0],t=+z[0][1],w=+z[1][1],o>b&&(z=o,o=b,b=z),t>w&&(z=t,t=w,w=z),f.precision(g)):[[o,t],[b,w]]},f.minorExtent=function(z){return arguments.length?(a=+z[0][0],u=+z[1][0],y=+z[0][1],d=+z[1][1],a>u&&(z=a,a=u,u=z),y>d&&(z=y,y=d,d=z),f.precision(g)):[[a,y],[u,d]]},f.step=function(z){return arguments.length?f.majorStep(z).minorStep(z):f.minorStep()},f.majorStep=function(z){return arguments.length?(v=+z[0],h=+z[1],f):[v,h]},f.minorStep=function(z){return arguments.length?(c=+z[0],j=+z[1],f):[c,j]},f.precision=function(z){return arguments.length?(g=+z,m=dd(y,d,90),s=hp(a,u,g),q=dd(t,w,90),r=hp(o,b,g),f):g},f.majorExtent([[-180,-90+bm],[180,90-bm]]).minorExtent([[-180,-80-bm],[180,80+bm]])},cd.geo.greatArc=function(){function c(){return{type:"LineString",coordinates:[f||a.apply(this,arguments),b||d.apply(this,arguments)]}}var f,b,a=dZ,d=h0;return c.distance=function(){return cd.geo.distance(f||a.apply(this,arguments),b||d.apply(this,arguments))},c.source=function(g){return arguments.length?(a=g,f="function"==typeof g?null:g,c):a},c.target=function(g){return arguments.length?(d=g,b="function"==typeof g?null:g,c):d},c.precision=function(){return arguments.length?c:0},c},cd.geo.interpolate=function(b,a){return e8(b[0]*g6,b[1]*g6,a[0]*g6,a[1]*g6)},cd.geo.length=function(a){return gh=0,cd.geo.stream(a,fT),gh};var gh,fT={sphere:ag,point:ag,lineStart:j3,lineEnd:ag,polygonStart:ag,polygonEnd:ag},qa=j2(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(cd.geo.azimuthalEqualArea=function(){return f2(qa)}).raw=qa;var bD=j2(function(b){var a=Math.acos(b);return a&&a/Math.sin(a)},iI);(cd.geo.azimuthalEquidistant=function(){return f2(bD)}).raw=bD,(cd.geo.conicConformal=function(){return fN(ew)}).raw=ew,(cd.geo.conicEquidistant=function(){return fN(qc)}).raw=qc;var gW=j2(function(a){return 1/a},Math.atan);(cd.geo.gnomonic=function(){return f2(gW)}).raw=gW,aO.invert=function(b,a){return[b,2*Math.atan(Math.exp(a))-j4]},(cd.geo.mercator=function(){return fC(aO)}).raw=aO;var c4=j2(function(){return 1},Math.asin);(cd.geo.orthographic=function(){return f2(c4)}).raw=c4;var jC=j2(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(cd.geo.stereographic=function(){return f2(jC)}).raw=jC,dC.invert=function(b,a){return[-a,2*Math.atan(Math.exp(b))-j4]},(cd.geo.transverseMercator=function(){var a=fC(dC),b=a.center,c=a.rotate;return a.center=function(d){return d?b([-d[1],d[0]]):(d=b(),[-d[1],d[0]])},a.rotate=function(d){return d?c([d[0],d[1],d.length>2?d[2]+90:90]):(d=c(),[d[0],d[1],d[2]-90])},a.rotate([0,0])}).raw=dC,cd.geom={},cd.geom.hull=function(b){function c(m){if(m.length<3){return[]}var p,o=dl(a),r=dl(d),j=m.length,h=[],g=[];for(p=0;j>p;p++){h.push([+o.call(this,m[p],p),+r.call(this,m[p],p),p])}for(h.sort(fO),p=0;j>p;p++){g.push([h[p][0],-h[p][1]])}var s=dM(h),q=dM(g),f=q[0]===s[0],t=q[q.length-1]===s[s.length-1],u=[];for(p=s.length-1;p>=0;--p){u.push(m[h[s[p]][2]])}for(p=+f;p<q.length-t;++p){u.push(m[h[q[p]][2]])}return u}var a=iP,d=bG;return arguments.length?c(b):(c.x=function(f){return arguments.length?(a=f,c):a},c.y=function(f){return arguments.length?(d=f,c):d},c)},cd.geom.polygon=function(a){return f9(a,fE),a};var fE=cd.geom.polygon.prototype=[];fE.area=function(){for(var c,f=-1,b=this.length,a=this[b-1],d=0;++f<b;){c=a,a=this[f],d+=c[1]*a[0]-c[0]*a[1]}return 0.5*d},fE.centroid=function(d){var j,b,a=-1,g=this.length,h=0,c=0,f=this[g-1];for(arguments.length||(d=-1/(6*this.area()));++a<g;){j=f,f=this[a],b=j[0]*f[1]-f[0]*j[1],h+=(j[0]+f[0])*b,c+=(j[1]+f[1])*b}return[h*d,c*d]},fE.clip=function(f){for(var a,j,c,p,h,d,o=aN(f),m=-1,b=this.length-aN(this),g=this[b-1];++m<b;){for(a=f.slice(),f.length=0,p=this[m],h=a[(c=a.length-o)-1],j=-1;++j<c;){d=a[j],aA(d,g,p)?(aA(h,g,p)||f.push(cB(h,d,g,p)),f.push(d)):aA(h,g,p)&&f.push(cB(h,d,g,p)),h=d}o&&f.push(f[0]),g=p}return f};var fv,cM,dq,bV,fl,ij=[],aM=[];eM.prototype.prepare=function(){for(var a,b=this.edges,c=b.length;c--;){a=b[c].edge,a.b&&a.a||b.splice(c,1)}return b.sort(f3),b.length},cH.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},c7.prototype={insert:function(c,f){var b,a,d;if(c){if(f.P=c,f.N=c.N,c.N&&(c.N.P=f),c.N=f,c.R){for(c=c.R;c.L;){c=c.L}c.L=f}else{c.R=f}b=c}else{this._?(c=fD(this._),f.P=null,f.N=c,c.P=c.L=f,b=c):(f.P=f.N=null,this._=f,b=null)}for(f.L=f.R=null,f.U=b,f.C=!0,c=f;b&&b.C;){a=b.U,b===a.L?(d=a.R,d&&d.C?(b.C=d.C=!1,a.C=!0,c=a):(c===b.R&&(i7(this,b),c=b,b=c.U),b.C=!1,a.C=!0,gl(this,a))):(d=a.L,d&&d.C?(b.C=d.C=!1,a.C=!0,c=a):(c===b.L&&(gl(this,b),c=b,b=c.U),b.C=!1,a.C=!0,i7(this,a))),b=c.U}this._.C=!1},remove:function(c){c.N&&(c.N.P=c.P),c.P&&(c.P.N=c.N),c.N=c.P=null;var g,a,h,d=c.U,f=c.L,b=c.R;if(a=f?b?fD(b):f:b,d?d.L===c?d.L=a:d.R=a:this._=a,f&&b?(h=a.C,a.C=c.C,a.L=f,f.U=a,a!==b?(d=a.U,a.U=c.U,c=a.R,d.L=c,a.R=b,b.U=a):(a.U=d,d=a,c=a.R)):(h=c.C,c=a),c&&(c.U=d),!h){if(c&&c.C){return c.C=!1,void 0}do{if(c===this._){break}if(c===d.L){if(g=d.R,g.C&&(g.C=!1,d.C=!0,i7(this,d),g=d.R),g.L&&g.L.C||g.R&&g.R.C){g.R&&g.R.C||(g.L.C=!1,g.C=!0,gl(this,g),g=d.R),g.C=d.C,d.C=g.R.C=!1,i7(this,d),c=this._;break}}else{if(g=d.L,g.C&&(g.C=!1,d.C=!0,gl(this,d),g=d.L),g.L&&g.L.C||g.R&&g.R.C){g.L&&g.L.C||(g.R.C=!1,g.C=!0,i7(this,g),g=d.L),g.C=d.C,d.C=g.L.C=!1,gl(this,d),c=this._;break}}g.C=!0,c=d,d=d.U}while(!c.C);c&&(c.C=!1)}}},cd.geom.voronoi=function(d){function j(p){var s=new Array(p.length),m=f[0][0],q=f[0][1],r=f[1][0],o=f[1][1];return fV(b(p),f).cells.forEach(function(y,t){var v=y.edges,u=y.site,w=s[t]=v.length?v.map(function(A){var z=A.start();return[z.x,z.y]}):u.x>=m&&u.x<=r&&u.y>=q&&u.y<=o?[[m,o],[r,o],[r,q],[m,q]]:[];w.point=p[t]}),s}function b(m){return m.map(function(p,o){return{x:Math.round(h(p,o)/bm)*bm,y:Math.round(c(p,o)/bm)*bm,i:o}})}var a=iP,g=bG,h=a,c=g,f=gx;return d?j(d):(j.links=function(m){return fV(b(m)).edges.filter(function(o){return o.l&&o.r}).map(function(o){return{source:m[o.l.i],target:m[o.r.i]}})},j.triangles=function(m){var o=[];return fV(b(m)).cells.forEach(function(y,q){for(var r,u,t=y.site,p=y.edges.sort(f3),z=-1,v=p.length,s=p[v-1].edge,w=s.l===t?s.r:s.l;++z<v;){r=s,u=w,s=p[z].edge,w=s.l===t?s.r:s.l,q<u.i&&q<w.i&&eE(t,u,w)<0&&o.push([m[q],m[u.i],m[w.i]])}}),o},j.x=function(m){return arguments.length?(h=dl(a=m),j):a},j.y=function(m){return arguments.length?(c=dl(g=m),j):g},j.clipExtent=function(m){return arguments.length?(f=null==m?gx:m,j):f===gx?null:f},j.size=function(m){return arguments.length?j.clipExtent(m&&[[0,0],m]):f===gx?null:f&&f[1]},j)};var gx=[[-1000000,-1000000],[1000000,1000000]];cd.geom.delaunay=function(a){return cd.geom.voronoi().triangles(a)},cd.geom.quadtree=function(c,m,f,a,j){function d(w){function p(K,S,O,I,R,M,J,Q){if(!isNaN(O)&&!isNaN(I)){if(K.leaf){var P=K.x,L=K.y;if(null!=P){if(cC(P-O)+cC(L-I)<0.01){E(K,S,O,I,R,M,J,Q)}else{var N=K.point;K.x=K.y=K.point=null,E(K,N,P,L,R,M,J,Q),E(K,S,O,I,R,M,J,Q)}}else{K.x=O,K.y=I,K.point=S}}else{E(K,S,O,I,R,M,J,Q)}}}function E(K,T,P,I,S,J,R,Q){var U=0.5*(S+R),L=0.5*(J+Q),O=P>=U,M=I>=L,N=(M<<1)+O;K.leaf=!1,K=K.nodes[N]||(K.nodes[N]=gg()),O?S=U:R=U,M?J=L:Q=L,p(K,T,P,I,S,J,R,Q)}var B,v,q,t,u,F,y,A,s,z=dl(h),r=dl(g);if(null!=m){F=m,y=f,A=a,s=j}else{if(A=s=-(F=y=1/0),v=[],q=[],u=w.length,b){for(t=0;u>t;++t){B=w[t],B.x<F&&(F=B.x),B.y<y&&(y=B.y),B.x>A&&(A=B.x),B.y>s&&(s=B.y),v.push(B.x),q.push(B.y)}}else{for(t=0;u>t;++t){var H=+z(B=w[t],t),G=+r(B,t);F>H&&(F=H),y>G&&(y=G),H>A&&(A=H),G>s&&(s=G),v.push(H),q.push(G)}}}var C=A-F,o=s-y;C>o?s=y+C:A=F+o;var D=gg();if(D.add=function(I){p(D,I,+z(I,++t),+r(I,t),F,y,A,s)},D.visit=function(I){fA(I,D,F,y,A,s)},t=-1,null==m){for(;++t<u;){p(D,w[t],v[t],q[t],F,y,A,s)}--t}else{w.forEach(D.add)}return v=q=w=B=null,D}var b,h=iP,g=bG;return(b=arguments.length)?(h=eF,g=bS,3===b&&(j=f,a=m,f=m=0),d(c)):(d.x=function(o){return arguments.length?(h=o,d):h},d.y=function(o){return arguments.length?(g=o,d):g},d.extent=function(o){return arguments.length?(null==o?m=f=a=j=null:(m=+o[0][0],f=+o[0][1],a=+o[1][0],j=+o[1][1]),d):null==m?null:[[m,f],[a,j]]},d.size=function(o){return arguments.length?(null==o?m=f=a=j=null:(m=f=0,a=+o[0],j=+o[1]),d):null==m?null:[a-m,j-f]},d)},cd.interpolateRgb=jJ,cd.interpolateObject=g7,cd.interpolateNumber=aV,cd.interpolateString=cX;var f8=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;cd.interpolate=g8,cd.interpolators=[function(a,b){var c=typeof b;return("string"===c?fH.has(b)||/^(#|rgb\(|hsl\()/.test(b)?jJ:cX:b instanceof hL?jJ:"object"===c?Array.isArray(b)?dK:g7:aV)(a,b)}],cd.interpolateArray=dK;var en=function(){return iI},dm=cd.map({linear:en,poly:jL,quad:function(){return iZ},cubic:function(){return gq},sin:function(){return fh},exp:function(){return c8},circle:function(){return iE},elastic:bw,back:dp,bounce:function(){return cN}}),eR=cd.map({"in":iI,out:cU,"in-out":aH,"out-in":function(a){return aH(cU(a))}});cd.ease=function(b){var c=b.indexOf("-"),a=c>=0?b.substring(0,c):b,d=c>=0?b.substring(c+1):"in";return a=dm.get(a)||en,d=eR.get(d)||iI,hf(d(a.apply(null,fR.call(arguments,1))))},cd.interpolateHcl=bQ,cd.interpolateHsl=b6,cd.interpolateLab=dY,cd.interpolateRound=ib,cd.transform=function(b){var a=dw.createElementNS(cd.ns.prefix.svg,"g");return(cd.transform=function(d){if(null!=d){a.setAttribute("transform",d);var c=a.transform.baseVal.consolidate()}return new e6(c?c.matrix:bb)})(b)},e6.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var bb={a:1,b:0,c:0,d:1,e:0,f:0};cd.interpolateTransform=d9,cd.layout={},cd.layout.bundle=function(){return function(b){for(var c=[],a=-1,d=b.length;++a<d;){c.push(ex(b[a]))}return c}},cd.layout.chord=function(){function f(){var E,A,D,t,w,C={},z=[],r=cd.range(h),F=[];for(j=[],c=[],E=0,t=-1;++t<h;){for(A=0,w=-1;++w<h;){A+=p[t][w]}z.push(A),F.push(cd.range(h)),E+=A}for(d&&r.sort(function(H,I){return d(z[H],z[I])}),o&&F.forEach(function(H,I){H.sort(function(K,J){return o(p[I][K],p[I][J])})}),E=(g3-g*h)/E,A=0,t=-1;++t<h;){for(D=A,w=-1;++w<h;){var v=r[t],q=F[v][w],G=p[v][q],y=A,s=A+=G*E;C[v+"-"+q]={index:v,subindex:q,startAngle:y,endAngle:s,value:G}}c[v]={index:v,startAngle:D,endAngle:A,value:(A-D)/E},A+=g}for(t=-1;++t<h;){for(w=t-1;++w<h;){var u=C[t+"-"+w],B=C[w+"-"+t];(u.value||B.value)&&j.push(u.value<B.value?{source:B,target:u}:{source:u,target:B})}}m&&a()}function a(){j.sort(function(r,q){return m((r.source.value+r.target.value)/2,(q.source.value+q.target.value)/2)})}var j,c,p,h,d,o,m,b={},g=0;return b.matrix=function(q){return arguments.length?(h=(p=q)&&p.length,j=c=null,b):p},b.padding=function(q){return arguments.length?(g=q,j=c=null,b):g},b.sortGroups=function(q){return arguments.length?(d=q,j=c=null,b):d},b.sortSubgroups=function(q){return arguments.length?(o=q,j=null,b):o},b.sortChords=function(q){return arguments.length?(m=q,j&&a(),b):m},b.chords=function(){return j||f(),j},b.groups=function(){return c||f(),c},b},cd.layout.force=function(){function f(z){return function(I,E,A,H){if(I.point!==z){var D=I.cx-z.x,B=I.cy-z.y,G=H-E,F=D*D+B*B;if(F>G*G/v){if(c>F){var C=I.charge/F;z.px-=D*C,z.py-=B*C}return !0}if(I.point&&F&&c>F){var C=I.pointCharge/F;z.px-=D*C,z.py-=B*C}}return !I.charge}}function p(z){z.px=cd.event.x,z.py=cd.event.y,y.resume()}var u,a,b,o,d,y={},w=cd.dispatch("start","tick","end"),t=[1,1],m=0.9,s=eC,q=gv,r=-30,c=bW,j=0.1,v=0.64,h=[],g=[];return y.tick=function(){if((a*=0.99)<0.005){return w.end({type:"end",alpha:a=0}),!0}var D,F,J,E,C,A,H,z,G,B=h.length,I=g.length;for(F=0;I>F;++F){J=g[F],E=J.source,C=J.target,z=C.x-E.x,G=C.y-E.y,(A=z*z+G*G)&&(A=a*o[F]*((A=Math.sqrt(A))-b[F])/A,z*=A,G*=A,C.x-=z*(H=E.weight/(C.weight+E.weight)),C.y-=G*H,E.x+=z*(H=1-H),E.y+=G*H)}if((H=a*j)&&(z=t[0]/2,G=t[1]/2,F=-1,H)){for(;++F<B;){J=h[F],J.x+=(z-J.x)*H,J.y+=(G-J.y)*H}}if(r){for(az(D=cd.geom.quadtree(h),a,d),F=-1;++F<B;){(J=h[F]).fixed||D.visit(f(J))}}for(F=-1;++F<B;){J=h[F],J.fixed?(J.x=J.px,J.y=J.py):(J.x-=(J.px-(J.px=J.x))*m,J.y-=(J.py-(J.py=J.y))*m)}w.tick({type:"tick",alpha:a})},y.nodes=function(z){return arguments.length?(h=z,y):h},y.links=function(z){return arguments.length?(g=z,y):g},y.size=function(z){return arguments.length?(t=z,y):t},y.linkDistance=function(z){return arguments.length?(s="function"==typeof z?z:+z,y):s},y.distance=y.linkDistance,y.linkStrength=function(z){return arguments.length?(q="function"==typeof z?z:+z,y):q},y.friction=function(z){return arguments.length?(m=+z,y):m},y.charge=function(z){return arguments.length?(r="function"==typeof z?z:+z,y):r},y.chargeDistance=function(z){return arguments.length?(c=z*z,y):Math.sqrt(c)},y.gravity=function(z){return arguments.length?(j=+z,y):j},y.theta=function(z){return arguments.length?(v=z*z,y):Math.sqrt(v)},y.alpha=function(z){return arguments.length?(z=+z,a?a=z>0?z:0:z>0&&(w.start({type:"start",alpha:a=z}),cd.timer(y.tick)),y):a},y.start=function(){function B(L,H){if(!E){for(E=new Array(F),I=0;F>I;++I){E[I]=[]}for(I=0;N>I;++I){var J=g[I];E[J.source.index].push(J.target),E[J.target.index].push(J.source)}}for(var M,K=E[z],I=-1,N=K.length;++I<N;){if(!isNaN(M=K[I][L])){return M}}return Math.random()*H}var z,E,A,F=h.length,D=g.length,C=t[0],G=t[1];for(z=0;F>z;++z){(A=h[z]).index=z,A.weight=0}for(z=0;D>z;++z){A=g[z],"number"==typeof A.source&&(A.source=h[A.source]),"number"==typeof A.target&&(A.target=h[A.target]),++A.source.weight,++A.target.weight}for(z=0;F>z;++z){A=h[z],isNaN(A.x)&&(A.x=B("x",C)),isNaN(A.y)&&(A.y=B("y",G)),isNaN(A.px)&&(A.px=A.x),isNaN(A.py)&&(A.py=A.y)}if(b=[],"function"==typeof s){for(z=0;D>z;++z){b[z]=+s.call(this,g[z],z)}}else{for(z=0;D>z;++z){b[z]=s}}if(o=[],"function"==typeof q){for(z=0;D>z;++z){o[z]=+q.call(this,g[z],z)}}else{for(z=0;D>z;++z){o[z]=q}}if(d=[],"function"==typeof r){for(z=0;F>z;++z){d[z]=+r.call(this,h[z],z)}}else{for(z=0;F>z;++z){d[z]=r}}return y.resume()},y.resume=function(){return y.alpha(0.1)},y.stop=function(){return y.alpha(0)},y.drag=function(){return u||(u=cd.behavior.drag().origin(iI).on("dragstart.force",ck).on("drag.force",p).on("dragend.force",gJ)),arguments.length?(this.on("mouseover.force",by).on("mouseout.force",i6).call(u),void 0):u},cd.rebind(y,w,"on")};var eC=20,gv=1,bW=1/0;cd.layout.hierarchy=function(){function c(o,q,m){var j=d.call(b,o,q);if(o.depth=q,m.push(o),j&&(r=j.length)){for(var r,s,h=-1,t=o.children=new Array(r),u=0,p=q+1;++h<r;){s=t[h]=c(j[h],p,m),s.parent=o,u+=s.value}a&&t.sort(a),f&&(o.value=u)}else{delete o.children,f&&(o.value=+f.call(b,o,q)||0)}return o}function g(p,r){var o=p.children,h=0;if(o&&(j=o.length)){for(var j,m=-1,q=r+1;++m<j;){h+=g(o[m],q)}}else{f&&(h=+f.call(b,p,r)||0)}return f&&(p.value=h),h}function b(h){var j=[];return c(h,0,j),j}var a=cg,d=dO,f=cJ;return b.sort=function(h){return arguments.length?(a=h,b):a},b.children=function(h){return arguments.length?(d=h,b):d},b.value=function(h){return arguments.length?(f=h,b):f},b.revalue=function(h){return g(h,0),h},b},cd.layout.partition=function(){function c(h,q,m,g){var p=h.children;if(h.x=q,h.y=h.depth*g,h.dx=m,h.dy=g,p&&(o=p.length)){var o,s,r,j=-1;for(m=h.value?m/h.value:0;++j<o;){c(s=p[j],q,r=s.value*m,g),q+=r}}}function f(g){var o=g.children,m=0;if(o&&(h=o.length)){for(var h,j=-1;++j<h;){m=Math.max(m,f(o[j]))}}return 1+m}function b(h,g){var j=a.call(this,h,g);return c(j[0],0,d[0],d[1]/f(j[0])),j}var a=cd.layout.hierarchy(),d=[1,1];return b.size=function(g){return arguments.length?(d=g,b):d},b4(b,a)},cd.layout.pie=function(){function c(o){var g=o.map(function(q,r){return +f.call(c,q,r)}),m=+("function"==typeof a?a.apply(this,arguments):a),h=(("function"==typeof d?d.apply(this,arguments):d)-m)/cd.sum(g),p=cd.range(o.length);null!=b&&p.sort(b===p4?function(q,r){return g[r]-g[q]}:function(q,r){return b(o[q],o[r])});var j=[];return p.forEach(function(q){var r;j[q]={data:o[q],value:r=g[q],startAngle:m,endAngle:m+=r*h}}),j}var f=Number,b=p4,a=0,d=g3;return c.value=function(g){return arguments.length?(f=g,c):f},c.sort=function(g){return arguments.length?(b=g,c):b},c.startAngle=function(g){return arguments.length?(a=g,c):a},c.endAngle=function(g){return arguments.length?(d=g,c):d},c};var p4={};cd.layout.stack=function(){function c(m,j){var s=m.map(function(y,z){return g.call(c,y,z)}),t=s.map(function(y){return y.map(function(z,A){return[f.call(c,z,A),b.call(c,z,A)]})}),v=a.call(c,t,j);s=cd.permute(s,v),t=cd.permute(t,v);var u,r,o,p=h.call(c,t,j),w=s.length,q=s[0].length;for(r=0;q>r;++r){for(d.call(c,s[0][r],o=p[r],t[0][r][1]),u=1;w>u;++u){d.call(c,s[u][r],o+=t[u-1][r][1],t[u][r][1])}}return m}var g=iI,a=gd,h=dE,d=j8,f=hD,b=iW;return c.values=function(j){return arguments.length?(g=j,c):g},c.order=function(j){return arguments.length?(a="function"==typeof j?j:hy.get(j)||gd,c):a},c.offset=function(j){return arguments.length?(h="function"==typeof j?j:bR.get(j)||dE,c):h},c.x=function(j){return arguments.length?(f=j,c):f},c.y=function(j){return arguments.length?(b=j,c):b},c.out=function(j){return arguments.length?(d=j,c):d},c};var hy=cd.map({"inside-out":function(f){var a,j,c=f.length,p=f.map(cb),h=f.map(iC),d=cd.range(c).sort(function(r,q){return p[r]-p[q]}),o=0,m=0,b=[],g=[];for(a=0;c>a;++a){j=d[a],m>o?(o+=h[j],b.push(j)):(m+=h[j],g.push(j))}return g.reverse().concat(b)},reverse:function(a){return cd.range(a.length).reverse()},"default":gd}),bR=cd.map({silhouette:function(c){var m,f,a,j=c.length,d=c[0].length,b=[],h=0,g=[];for(f=0;d>f;++f){for(m=0,a=0;j>m;m++){a+=c[m][f][1]}a>h&&(h=a),b.push(a)}for(f=0;d>f;++f){g[f]=(h-b[f])/2}return g},wiggle:function(h){var q,d,c,p,o,g,m,f,s,j=h.length,b=h[0],r=b.length,a=[];for(a[0]=f=s=0,d=1;r>d;++d){for(q=0,p=0;j>q;++q){p+=h[q][d][1]}for(q=0,o=0,m=b[d][0]-b[d-1][0];j>q;++q){for(c=0,g=(h[q][d][1]-h[q][d-1][1])/(2*m);q>c;++c){g+=(h[c][d][1]-h[c][d-1][1])/m}o+=g*h[q][d][1]}a[d]=f-=p?o/p*m:0,s>f&&(s=f)}for(d=0;r>d;++d){a[d]-=s}return a},expand:function(d){var j,b,a,g=d.length,h=d[0].length,c=1/g,f=[];for(b=0;h>b;++b){for(j=0,a=0;g>j;j++){a+=d[j][b][1]}if(a){for(j=0;g>j;j++){d[j][b][1]/=a}}else{for(j=0;g>j;j++){d[j][b][1]=c}}}for(b=0;h>b;++b){f[b]=0}return f},zero:dE});cd.layout.histogram=function(){function c(s,u){for(var q,o,m=[],r=s.map(b,this),t=a.call(this,r,u),j=d.call(this,t,r,u),u=-1,g=r.length,h=j.length-1,p=f?1:1/g;++u<h;){q=m[u]=[],q.dx=j[u+1]-(q.x=j[u]),q.y=0}if(h>0){for(u=-1;++u<g;){o=r[u],o>=t[0]&&o<=t[1]&&(q=m[cd.bisect(j,o,1,h)-1],q.y+=p,q.push(s[u]))}}return m}var f=!0,b=Number,a=ch,d=dU;return c.value=function(g){return arguments.length?(b=g,c):b},c.range=function(g){return arguments.length?(a=dl(g),c):a},c.bins=function(g){return arguments.length?(d="number"==typeof g?function(h){return eQ(h,g)}:dl(g),c):d},c.frequency=function(g){return arguments.length?(f=!!g,c):f},c},cd.layout.tree=function(){function c(r,p){function m(G,D){var F=G.children,C=G._tree;if(F&&(H=F.length)){for(var H,B,E,z=F[0],A=z,I=-1;++I<H;){E=F[I],m(E,B),A=o(E,B,A),B=E}j7(G);var y=0.5*(z._tree.prelim+E._tree.prelim);D?(C.prelim=D._tree.prelim+b(G,D),C.mod=C.prelim-y):C.prelim=y}else{D&&(C.prelim=D._tree.prelim+b(G,D))}}function q(B,C){B.x=B._tree.prelim+C;var z=B.children;if(z&&(y=z.length)){var y,A=-1;for(C+=B._tree.mod;++A<y;){q(z[A],C)}}}function o(y,D,F){if(D){for(var C,I=y,G=y,B=D,A=y.parent.children[0],E=I._tree.mod,H=G._tree.mod,z=B._tree.mod,J=A._tree.mod;B=aF(B),I=f1(I),B&&I;){A=f1(A),G=aF(G),G._tree.ancestor=y,C=B._tree.prelim+z-I._tree.prelim-E+b(B,I),C>0&&(gn(hY(B,y,F),y,C),E+=C,H+=C),z+=B._tree.mod,E+=I._tree.mod,J+=A._tree.mod,H+=G._tree.mod}B&&!aF(G)&&(G._tree.thread=B,G._tree.mod+=z-H),I&&!f1(A)&&(A._tree.thread=I,A._tree.mod+=E-J,F=y)}return F}var u=f.call(this,r,p),t=u[0];dh(t,function(z,y){z._tree={ancestor:z,prelim:0,mod:0,change:0,shift:0,number:y?y._tree.number+1:0}}),m(t),q(t,-t._tree.prelim);var g=dQ(t,hM),v=dQ(t,fJ),w=dQ(t,h6),j=g.x-b(g,v)/2,s=v.x+b(v,g)/2,h=w.depth||1;return dh(t,d?function(y){y.x*=a[0],y.y=y.depth*a[1],delete y._tree}:function(y){y.x=(y.x-j)/(s-j)*a[0],y.y=y.depth/h*a[1],delete y._tree}),u}var f=cd.layout.hierarchy().sort(null).value(null),b=qw,a=[1,1],d=!1;return c.separation=function(g){return arguments.length?(b=g,c):b},c.size=function(g){return arguments.length?(d=null==(a=g),c):d?null:a},c.nodeSize=function(g){return arguments.length?(d=null!=(a=g),c):d?a:null},b4(c,f)},cd.layout.pack=function(){function c(o,q){var g=b.call(this,o,q),m=g[0],h=d[0],r=d[1],j=null==f?Math.sqrt:"function"==typeof f?f:function(){return f};if(m.x=m.y=0,dh(m,function(s){s.r=+j(s.value)}),dh(m,hb),a){var p=a*(f?1:Math.max(2*m.r/h,2*m.r/r))/2;dh(m,function(s){s.r+=p}),dh(m,hb),dh(m,function(s){s.r-=p})}return gD(m,h/2,r/2,f?1:1/Math.max(2*m.r/h,2*m.r/r)),g}var f,b=cd.layout.hierarchy().sort(iV),a=0,d=[1,1];return c.size=function(g){return arguments.length?(d=g,c):d},c.radius=function(g){return arguments.length?(f=null==g||"function"==typeof g?g:+g,c):f},c.padding=function(g){return arguments.length?(a=+g,c):a},b4(c,b)},cd.layout.cluster=function(){function c(q,s){var p,m=f.call(this,q,s),j=m[0],o=0;dh(j,function(v){var u=v.children;u&&u.length?(v.x=aR(u),v.y=ez(u)):(v.x=p?o+=b(v,p):0,v.y=0,p=v)});var r=gQ(j),h=iO(j),t=r.x-b(r,h)/2,g=h.x+b(h,r)/2;return dh(j,d?function(u){u.x=(u.x-j.x)*a[0],u.y=(j.y-u.y)*a[1]}:function(u){u.x=(u.x-t)/(g-t)*a[0],u.y=(1-(j.y?u.y/j.y:1))*a[1]}),m}var f=cd.layout.hierarchy().sort(null).value(null),b=qw,a=[1,1],d=!1;return c.separation=function(g){return arguments.length?(b=g,c):b},c.size=function(g){return arguments.length?(d=null==(a=g),c):d?null:a},c.nodeSize=function(g){return arguments.length?(d=null!=(a=g),c):d?a:null},b4(c,f)},cd.layout.treemap=function(){function o(w,z){for(var v,A,y=-1,u=w.length;++y<u;){A=(v=w[y]).value*(0>z?0:z),v.area=isNaN(A)||0>=A?0:A}}function a(w){var u=w.children;if(u&&u.length){var D,z,y,B=h(w),E=[],v=u.slice(),C=1/0,A="slice"===g?B.dx:"dice"===g?B.dy:"slice-dice"===g?1&w.depth?B.dy:B.dx:Math.min(B.dx,B.dy);for(o(v,B.dx*B.dy/w.value),E.area=0;(y=v.length)>0;){E.push(D=v[y-1]),E.area+=D.area,"squarify"!==g||(z=f(E,A))<=C?(v.pop(),C=z):(E.area-=E.pop().area,t(E,A,B,!1),A=Math.min(B.dx,B.dy),E.length=E.area=0,C=1/0)}E.length&&(t(E,A,B,!0),E.length=E.area=0),u.forEach(a)}}function p(A){var u=A.children;if(u&&u.length){var z,w=h(A),v=u.slice(),y=[];for(o(v,w.dx*w.dy/A.value),y.area=0;z=v.pop();){y.push(z),y.area+=z.area,null!=z.z&&(t(y,z.z?w.dx:w.dy,w,!v.length),y.length=y.area=0)}u.forEach(p)}}function f(B,A){for(var C,v=B.area,w=0,z=1/0,y=-1,u=B.length;++y<u;){(C=B[y].area)&&(z>C&&(z=C),C>w&&(w=C))}return v*=v,A*=A,v?Math.max(A*w*j/v,v/(A*z*j)):1/0}function t(C,y,u,A){var w,E=-1,B=C.length,v=u.x,z=u.y,D=y?q(C.area/y):0;if(y==u.dx){for((A||D>u.dy)&&(D=u.dy);++E<B;){w=C[E],w.x=v,w.y=z,w.dy=D,v+=w.dx=Math.min(u.x+u.dx-v,D?q(w.area/D):0)}w.z=!0,w.dx+=u.x+u.dx-v,u.y+=D,u.dy-=D}else{for((A||D>u.dx)&&(D=u.dx);++E<B;){w=C[E],w.x=v,w.y=z,w.dx=D,z+=w.dy=Math.min(u.y+u.dy-z,D?q(w.area/D):0)}w.z=!1,w.dy+=u.y+u.dy-z,u.x+=D,u.dx-=D}}function c(u){var v=m||r(u),w=v[0];return w.x=0,w.y=0,w.dx=b[0],w.dy=b[1],m&&r.revalue(w),o([w],w.dx*w.dy/w.value),(m?p:a)(w),d&&(m=v),v}var m,r=cd.layout.hierarchy(),q=Math.round,b=[1,1],s=null,h=qi,d=!1,g="squarify",j=0.5*(1+Math.sqrt(5));return c.size=function(u){return arguments.length?(b=u,c):b},c.padding=function(u){function w(A){var z=u.call(c,A,A.depth);return null==z?qi(A):b3(A,"number"==typeof z?[z,z,z,z]:z)}function y(z){return b3(z,u)}if(!arguments.length){return s}var v;return h=null==(s=u)?qi:"function"==(v=typeof u)?w:"number"===v?(u=[u,u,u,u],y):y,c},c.round=function(u){return arguments.length?(q=u?Math.round:Number,c):q!=Number},c.sticky=function(u){return arguments.length?(d=u,m=null,c):d},c.ratio=function(u){return arguments.length?(j=u,c):j},c.mode=function(u){return arguments.length?(g=u+"",c):g},b4(c,r)},cd.random={normal:function(a,b){var c=arguments.length;return 2>c&&(b=1),1>c&&(a=0),function(){var f,d,g;do{f=2*Math.random()-1,d=2*Math.random()-1,g=f*f+d*d}while(!g||g>1);return a+b*f*Math.sqrt(-2*Math.log(g)/g)}},logNormal:function(){var a=cd.random.normal.apply(cd,arguments);return function(){return Math.exp(a())}},bates:function(b){var a=cd.random.irwinHall(b);return function(){return a()/b}},irwinHall:function(a){return function(){for(var c=0,b=0;a>b;b++){c+=Math.random()}return c}}},cd.scale={};var c3={floor:iI,ceil:iI};cd.scale.linear=function(){return pY([0,1],[0,1],g8,!1)};var hl={s:1,g:1,p:1,r:1,e:1};cd.scale.log=function(){return eH(cd.scale.linear().domain([0,1]),10,!0,[1,10])};var dX=cd.format(".0e"),hT={floor:function(a){return -Math.ceil(-a)},ceil:function(a){return -Math.floor(-a)}};cd.scale.pow=function(){return aT(cd.scale.linear(),1,[0,1])},cd.scale.sqrt=function(){return cd.scale.pow().exponent(0.5)},cd.scale.ordinal=function(){return p9([],{t:"range",a:[[]]})},cd.scale.category10=function(){return cd.scale.ordinal().range(e3)},cd.scale.category20=function(){return cd.scale.ordinal().range(j0)},cd.scale.category20b=function(){return cd.scale.ordinal().range(jK)},cd.scale.category20c=function(){return cd.scale.ordinal().range(eg)};var e3=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(dS),j0=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(dS),jK=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(dS),eg=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(dS);cd.scale.quantile=function(){return jI([],[])},cd.scale.quantize=function(){return hU(0,1,[0,1])},cd.scale.threshold=function(){return fZ([0.5],[0,1])},cd.scale.identity=function(){return eL([0,1])},cd.svg={},cd.svg.arc=function(){function c(){var q=f.apply(this,arguments),s=b.apply(this,arguments),p=a.apply(this,arguments)+p8,m=d.apply(this,arguments)+p8,j=(p>m&&(j=p,p=m,m=j),m-p),o=fn>j?"0":"1",r=Math.cos(p),h=Math.sin(p),t=Math.cos(m),g=Math.sin(m);return j>=jP?q?"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+-s+"A"+s+","+s+" 0 1,1 0,"+s+"M0,"+q+"A"+q+","+q+" 0 1,0 0,"+-q+"A"+q+","+q+" 0 1,0 0,"+q+"Z":"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+-s+"A"+s+","+s+" 0 1,1 0,"+s+"Z":q?"M"+s*r+","+s*h+"A"+s+","+s+" 0 "+o+",1 "+s*t+","+s*g+"L"+q*t+","+q*g+"A"+q+","+q+" 0 "+o+",0 "+q*r+","+q*h+"Z":"M"+s*r+","+s*h+"A"+s+","+s+" 0 "+o+",1 "+s*t+","+s*g+"L0,0Z"}var f=b5,b=eZ,a=bp,d=dP;return c.innerRadius=function(g){return arguments.length?(f=dl(g),c):f},c.outerRadius=function(g){return arguments.length?(b=dl(g),c):b},c.startAngle=function(g){return arguments.length?(a=dl(g),c):a},c.endAngle=function(g){return arguments.length?(d=dl(g),c):d},c.centroid=function(){var h=(f.apply(this,arguments)+b.apply(this,arguments))/2,g=(a.apply(this,arguments)+d.apply(this,arguments))/2+p8;return[Math.cos(g)*h,Math.sin(g)*h]},c};var p8=-j4,jP=g3-bm;cd.svg.line=function(){return eb(iI)};var fy=cd.map({linear:b2,"linear-closed":qm,step:h8,"step-before":ax,"step-after":dk,basis:eG,"basis-open":iS,"basis-closed":c5,bundle:fS,cardinal:h9,"cardinal-open":hA,"cardinal-closed":gC,monotone:aE});fy.forEach(function(b,a){a.key=b,a.closed=/-closed$/.test(b)});var dx=[0,2/3,1/3,0],iK=[0,1/3,2/3,0],bB=[0,1/6,2/3,1/6];cd.svg.line.radial=function(){var a=eb(cR);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a},ax.reverse=dk,dk.reverse=ax,cd.svg.area=function(){return aQ(iI)},cd.svg.area.radial=function(){var a=aQ(cR);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a},cd.svg.chord=function(){function d(q,r){var p=o(this,f,q,r),s=o(this,c,q,r);return"M"+p.p0+b(p.r,p.p1,p.a1-p.a0)+(g(p,s)?m(p.r,p.p1,p.r,p.p0):m(p.r,p.p1,s.r,s.p0)+b(s.r,s.p1,s.a1-s.a0)+m(s.r,s.p1,p.r,p.p0))+"Z"}function o(u,w,t,r){var s=w.call(u,t,r),v=j.call(u,s,r),q=h.call(u,s,r)+p8,p=a.call(u,s,r)+p8;return{r:v,a0:q,a1:p,p0:[v*Math.cos(q),v*Math.sin(q)],p1:[v*Math.cos(p),v*Math.sin(p)]}}function g(p,q){return p.a0==q.a0&&p.a1==q.a1}function b(p,q,r){return"A"+p+","+p+" 0 "+ +(r>fn)+",1 "+q}function m(p,q,s,r){return"Q 0,0 "+r}var f=dZ,c=h0,j=gy,h=bp,a=dP;return d.radius=function(p){return arguments.length?(j=dl(p),d):j},d.source=function(p){return arguments.length?(f=dl(p),d):f},d.target=function(p){return arguments.length?(c=dl(p),d):c},d.startAngle=function(p){return arguments.length?(h=dl(p),d):h},d.endAngle=function(p){return arguments.length?(a=dl(p),d):a},d},cd.svg.diagonal=function(){function b(g,j){var m=c.call(this,g,j),o=a.call(this,g,j),h=(m.y+o.y)/2,f=[m,{x:m.x,y:h},{x:o.x,y:h},o];return f=f.map(d),"M"+f[0]+"C"+f[1]+" "+f[2]+" "+f[3]}var c=dZ,a=h0,d=iF;return b.source=function(f){return arguments.length?(c=dl(f),b):c},b.target=function(f){return arguments.length?(a=dl(f),b):a},b.projection=function(f){return arguments.length?(d=f,b):d},b},cd.svg.diagonal.radial=function(){var a=cd.svg.diagonal(),b=iF,c=a.projection;return a.projection=function(d){return arguments.length?c(jH(b=d)):b},a},cd.svg.symbol=function(){function a(f,d){return(dH.get(b.call(this,f,d))||gH)(c.call(this,f,d))}var b=eP,c=dI;return a.type=function(d){return arguments.length?(b=dl(d),a):b},a.size=function(d){return arguments.length?(c=dl(d),a):c},a};var dH=cd.map({circle:gH,cross:function(b){var a=Math.sqrt(b/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){var b=Math.sqrt(a/(2*aK)),c=b*aK;return"M0,"+-b+"L"+c+",0 0,"+b+" "+-c+",0Z"},square:function(b){var a=Math.sqrt(b)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){var b=Math.sqrt(a/cn),c=b*cn/2;return"M0,"+c+"L"+b+","+-c+" "+-b+","+-c+"Z"},"triangle-up":function(a){var b=Math.sqrt(a/cn),c=b*cn/2;return"M0,"+-c+"L"+b+","+c+" "+-b+","+c+"Z"}});cd.svg.symbolTypes=dH.keys();var fK,aw,cn=Math.sqrt(3),aK=Math.tan(30*g6),h1=[],il=0;h1.call=hR.call,h1.empty=hR.empty,h1.node=hR.node,h1.size=hR.size,cd.transition=function(a){return arguments.length?fK?a.transition():a:aZ.transition()},cd.transition.prototype=h1,h1.select=function(f){var a,j,c,p=this.id,h=[];f=j6(f);for(var d=-1,o=this.length;++d<o;){h.push(a=[]);for(var m=this[d],b=-1,g=m.length;++b<g;){(c=m[b])&&(j=f.call(c,c.__data__,b,d))?("__data__" in c&&(j.__data__=c.__data__),f6(j,b,p,c.__transition__[p]),a.push(j)):a.push(null)}}return bJ(h,p)},h1.selectAll=function(o){var a,p,f,t,c,m=this.id,r=[];o=qg(o);for(var q=-1,b=this.length;++q<b;){for(var s=this[q],h=-1,d=s.length;++h<d;){if(f=s[h]){c=f.__transition__[m],p=o.call(f,f.__data__,h,q),r.push(a=[]);for(var g=-1,j=p.length;++g<j;){(t=p[g])&&f6(t,g,m,c),a.push(t)}}}}return bJ(r,m)},h1.filter=function(c){var m,f,a,j=[];"function"!=typeof c&&(c=h5(c));for(var d=0,b=this.length;b>d;d++){j.push(m=[]);for(var f=this[d],h=0,g=f.length;g>h;h++){(a=f[h])&&c.call(a,a.__data__,h,d)&&m.push(a)}}return bJ(j,this.id)},h1.tween=function(a,b){var c=this.id;return arguments.length<2?this.node().__transition__[c].tween.get(a):iU(this,null==b?function(d){d.__transition__[c].tween.remove(a)}:function(d){d.__transition__[c].tween.set(a,b)})},h1.attr=function(d,j){function b(){this.removeAttribute(f)}function a(){this.removeAttributeNS(f.space,f.local)}function g(m){return null==m?b:(m+="",function(){var o,p=this.getAttribute(f);return p!==m&&(o=c(p,m),function(q){this.setAttribute(f,o(q))})})}function h(m){return null==m?a:(m+="",function(){var o,p=this.getAttributeNS(f.space,f.local);return p!==m&&(o=c(p,m),function(q){this.setAttributeNS(f.space,f.local,o(q))})})}if(arguments.length<2){for(j in d){this.attr(j,d[j])}return this}var c="transform"==d?d9:g8,f=cd.ns.qualify(d);return eW(this,"attr."+d,j,f.local?h:g)},h1.attrTween=function(c,f){function b(j,h){var g=f.call(this,j,h,this.getAttribute(d));return g&&function(m){this.setAttribute(d,g(m))}}function a(j,h){var g=f.call(this,j,h,this.getAttributeNS(d.space,d.local));return g&&function(m){this.setAttributeNS(d.space,d.local,g(m))}}var d=cd.ns.qualify(c);return this.tween("attr."+c,d.local?a:b)},h1.style=function(c,g,b){function a(){this.style.removeProperty(c)}function d(h){return null==h?a:(h+="",function(){var m,j=jG.getComputedStyle(this,null).getPropertyValue(c);return j!==h&&(m=g8(j,h),function(o){this.style.setProperty(c,m(o),b)})})}var f=arguments.length;if(3>f){if("string"!=typeof c){2>f&&(g="");for(b in c){this.style(b,c[b],g)}return this}b=""}return eW(this,"style."+c,g,d)},h1.styleTween=function(b,c,a){function d(f,g){var h=c.call(this,f,g,jG.getComputedStyle(this,null).getPropertyValue(b));return h&&function(j){this.style.setProperty(b,h(j),a)}}return arguments.length<3&&(a=""),this.tween("style."+b,d)},h1.text=function(a){return eW(this,"text",a,dR)},h1.remove=function(){return this.each("end.transition",function(){var a;this.__transition__.count<2&&(a=this.parentNode)&&a.removeChild(this)})},h1.ease=function(b){var a=this.id;return arguments.length<1?this.node().__transition__[a].ease:("function"!=typeof b&&(b=cd.ease.apply(cd,arguments)),iU(this,function(c){c.__transition__[a].ease=b}))},h1.delay=function(b){var a=this.id;return iU(this,"function"==typeof b?function(f,d,c){f.__transition__[a].delay=+b.call(f,f.__data__,d,c)}:(b=+b,function(c){c.__transition__[a].delay=b}))},h1.duration=function(b){var a=this.id;return iU(this,"function"==typeof b?function(f,d,c){f.__transition__[a].duration=Math.max(1,b.call(f,f.__data__,d,c))}:(b=Math.max(1,b),function(c){c.__transition__[a].duration=b}))},h1.each=function(c,f){var b=this.id;if(arguments.length<2){var a=aw,d=fK;fK=b,iU(this,function(h,j,g){aw=h.__transition__[b],c.call(h,h.__data__,j,g)}),aw=a,fK=d}else{iU(this,function(h){var g=h.__transition__[b];(g.event||(g.event=cd.dispatch("start","end"))).on(c,f)})}return this},h1.transition=function(){for(var f,a,j,c,p=this.id,h=++il,d=[],o=0,m=this.length;m>o;o++){d.push(f=[]);for(var a=this[o],b=0,g=a.length;g>b;b++){(j=a[b])&&(c=Object.create(j.__transition__[p]),c.delay+=c.duration,f6(j,b,h,c)),f.push(j)}}return bJ(d,h)},cd.svg.axis=function(){function c(o){o.each(function(){var E,v=cd.select(this),G=this.__chart__||f,z=this.__chart__=f.copy(),t=null==g?z.ticks?z.ticks.apply(z,h):z.domain():g,w=null==m?z.tickFormat?z.tickFormat.apply(z,h):iI:m,D=v.selectAll(".tick").data(t,z),s=D.enter().insert("g",".domain").attr("class","tick").style("opacity",bm),B=cd.transition(D.exit()).style("opacity",bm).remove(),F=cd.transition(D).style("opacity",1),u=g9(z),A=v.selectAll(".domain").data([0]),q=(A.enter().append("path").attr("class","domain"),cd.transition(A));s.append("line"),s.append("text");var J=s.select("line"),H=F.select("line"),C=D.select("text").text(w),p=s.select("text"),I=F.select("text");switch(a){case"bottom":E=qy,J.attr("y2",j),p.attr("y",Math.max(j,0)+b),H.attr("x2",0).attr("y2",j),I.attr("x",0).attr("y",Math.max(j,0)+b),C.attr("dy",".71em").style("text-anchor","middle"),q.attr("d","M"+u[0]+","+d+"V0H"+u[1]+"V"+d);break;case"top":E=qy,J.attr("y2",-j),p.attr("y",-(Math.max(j,0)+b)),H.attr("x2",0).attr("y2",-j),I.attr("x",0).attr("y",-(Math.max(j,0)+b)),C.attr("dy","0em").style("text-anchor","middle"),q.attr("d","M"+u[0]+","+-d+"V0H"+u[1]+"V"+-d);break;case"left":E=bg,J.attr("x2",-j),p.attr("x",-(Math.max(j,0)+b)),H.attr("x2",-j).attr("y2",0),I.attr("x",-(Math.max(j,0)+b)).attr("y",0),C.attr("dy",".32em").style("text-anchor","end"),q.attr("d","M"+-d+","+u[0]+"H0V"+u[1]+"H"+-d);break;case"right":E=bg,J.attr("x2",j),p.attr("x",Math.max(j,0)+b),H.attr("x2",j).attr("y2",0),I.attr("x",Math.max(j,0)+b).attr("y",0),C.attr("dy",".32em").style("text-anchor","start"),q.attr("d","M"+d+","+u[0]+"H0V"+u[1]+"H"+d)}if(z.rangeBand){var r=z,y=r.rangeBand()/2;G=z=function(K){return r(K)+y}}else{G.rangeBand?G=z:B.call(E,z)}s.call(E,G),F.call(E,z)})}var m,f=cd.scale.linear(),a=jB,j=6,d=6,b=3,h=[10],g=null;return c.scale=function(o){return arguments.length?(f=o,c):f},c.orient=function(o){return arguments.length?(a=o in dA?o+"":jB,c):a},c.ticks=function(){return arguments.length?(h=arguments,c):h},c.tickValues=function(o){return arguments.length?(g=o,c):g},c.tickFormat=function(o){return arguments.length?(m=o,c):m},c.tickSize=function(p){var o=arguments.length;return o?(j=+p,d=+arguments[o-1],c):j},c.innerTickSize=function(o){return arguments.length?(j=+o,c):j},c.outerTickSize=function(o){return arguments.length?(d=+o,c):d},c.tickPadding=function(o){return arguments.length?(b=+o,c):b},c.tickSubdivide=function(){return arguments.length&&c},c};var jB="bottom",dA={top:1,right:1,bottom:1,left:1};cd.svg.brush=function(){function o(u){u.each(function(){var w=cd.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",t).on("touchstart.brush",t),z=w.selectAll(".background").data([0]);z.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),w.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var y=w.selectAll(".resize").data(j,iI);y.exit().remove(),y.enter().append("g").attr("class",function(C){return"resize "+C}).style("cursor",function(C){return hQ[C]}).append("rect").attr("x",function(C){return/[ew]$/.test(C)?-3:null}).attr("y",function(C){return/^[ns]/.test(C)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),y.style("display",o.empty()?"none":null);var v,B=cd.transition(w),A=cd.transition(z);q&&(v=g9(q),A.attr("x",v[0]).attr("width",v[1]-v[0]),p(B)),b&&(v=g9(b),A.attr("y",v[0]).attr("height",v[1]-v[0]),f(B)),a(B)})}function a(u){u.selectAll(".resize").attr("transform",function(v){return"translate("+s[+/e$/.test(v)]+","+h[+/^s/.test(v)]+")"})}function p(u){u.select(".extent").attr("x",s[0]),u.selectAll(".extent,.n>rect,.s>rect").attr("width",s[1]-s[0])}function f(u){u.select(".extent").attr("y",h[0]),u.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function t(){function H(){32==cd.event.keyCode&&(J||(C=null,z[0]-=s[1],z[1]-=h[1],J=2),qC())}function M(){32==cd.event.keyCode&&2==J&&(z[0]+=s[1],z[1]+=h[1],J=0,qC())}function G(){var P=cd.mouse(E),Q=!1;y&&(P[0]+=y[0],P[1]+=y[1]),J||(cd.event.altKey?(C||(C=[(s[0]+s[1])/2,(h[0]+h[1])/2]),z[0]=s[+(P[0]<C[0])],z[1]=h[+(P[1]<C[1])]):C=null),I&&N(P,q,0)&&(p(v),Q=!0),L&&N(P,b,1)&&(f(v),Q=!0),Q&&(a(v),F({type:"brush",mode:J?"move":"resize"}))}function N(P,Z,Q){var W,X,U=g9(Z),S=U[0],T=U[1],Y=z[Q],V=Q?h:s,R=V[1]-V[0];return J&&(S-=Y,T-=R+Y),W=(Q?g:d)?Math.max(S,Math.min(T,P[Q])):P[Q],J?X=(W+=Y)+R:(C&&(Y=Math.max(S,Math.min(T,2*C[Q]-W))),W>Y?(X=W,W=Y):X=Y),V[0]!=W||V[1]!=X?(Q?m=null:c=null,V[0]=W,V[1]=X,!0):void 0}function B(){G(),v.style("pointer-events","all").selectAll(".resize").style("display",o.empty()?"none":null),cd.select("body").style("cursor",null),A.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),w(),F({type:"brushend"})}var C,y,E=this,D=cd.select(cd.event.target),F=r.of(E,arguments),v=cd.select(E),O=D.datum(),I=!/^(n|s)$/.test(O)&&q,L=!/^(e|w)$/.test(O)&&b,J=D.classed("extent"),w=i4(),z=cd.mouse(E),A=cd.select(jG).on("keydown.brush",H).on("keyup.brush",M);if(cd.event.changedTouches?A.on("touchmove.brush",G).on("touchend.brush",B):A.on("mousemove.brush",G).on("mouseup.brush",B),v.interrupt().selectAll("*").interrupt(),J){z[0]=s[0]-z[0],z[1]=h[0]-z[1]}else{if(O){var K=+/w$/.test(O),u=+/^n/.test(O);y=[s[1-K]-z[0],h[1-u]-z[1]],z[0]=s[K],z[1]=h[u]}else{cd.event.altKey&&(C=z.slice())}}v.style("pointer-events","none").selectAll(".resize").style("display",null),cd.select("body").style("cursor",D.style("cursor")),F({type:"brushstart"}),G()}var c,m,r=gI(o,"brushstart","brush","brushend"),q=null,b=null,s=[0,0],h=[0,0],d=!0,g=!0,j=eB[0];return o.event=function(u){u.each(function(){var v=r.of(this,arguments),w={x:s,y:h,i:c,j:m},y=this.__chart__||w;this.__chart__=w,fK?cd.select(this).transition().each("start.brush",function(){c=y.i,m=y.j,s=y.x,h=y.y,v({type:"brushstart"})}).tween("brush:brush",function(){var z=dK(s,w.x),A=dK(h,w.y);return c=m=null,function(B){s=w.x=z(B),h=w.y=A(B),v({type:"brush",mode:"resize"})}}).each("end.brush",function(){c=w.i,m=w.j,v({type:"brush",mode:"resize"}),v({type:"brushend"})}):(v({type:"brushstart"}),v({type:"brush",mode:"resize"}),v({type:"brushend"}))})},o.x=function(u){return arguments.length?(q=u,j=eB[!q<<1|!b],o):q},o.y=function(u){return arguments.length?(b=u,j=eB[!q<<1|!b],o):b},o.clamp=function(u){return arguments.length?(q&&b?(d=!!u[0],g=!!u[1]):q?d=!!u:b&&(g=!!u),o):q&&b?[d,g]:q?d:b?g:null},o.extent=function(w){var z,y,A,u,v;return arguments.length?(q&&(z=w[0],y=w[1],b&&(z=z[0],y=y[0]),c=[z,y],q.invert&&(z=q(z),y=q(y)),z>y&&(v=z,z=y,y=v),(z!=s[0]||y!=s[1])&&(s=[z,y])),b&&(A=w[0],u=w[1],q&&(A=A[1],u=u[1]),m=[A,u],b.invert&&(A=b(A),u=b(u)),A>u&&(v=A,A=u,u=v),(A!=h[0]||u!=h[1])&&(h=[A,u])),o):(q&&(c?(z=c[0],y=c[1]):(z=s[0],y=s[1],q.invert&&(z=q.invert(z),y=q.invert(y)),z>y&&(v=z,z=y,y=v))),b&&(m?(A=m[0],u=m[1]):(A=h[0],u=h[1],b.invert&&(A=b.invert(A),u=b.invert(u)),A>u&&(v=A,A=u,u=v))),q&&b?[[z,A],[y,u]]:q?[z,y]:b&&[A,u])},o.clear=function(){return o.empty()||(s=[0,0],h=[0,0],c=m=null),o},o.empty=function(){return !!q&&s[0]==s[1]||!!b&&h[0]==h[1]},cd.rebind(o,r,"on")};var hQ={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},eB=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],bk=cE.format=qB.timeFormat,eI=bk.utc,dj=eI("%Y-%m-%dT%H:%M:%S.%LZ");bk.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?hW:dj,hW.parse=function(b){var a=new Date(b);return isNaN(a)?null:a},hW.toString=dj.toString,cE.second=ej(function(a){return new iJ(1000*Math.floor(a/1000))},function(b,a){b.setTime(b.getTime()+1000*Math.floor(a))},function(a){return a.getSeconds()}),cE.seconds=cE.second.range,cE.seconds.utc=cE.second.utc.range,cE.minute=ej(function(a){return new iJ(60000*Math.floor(a/60000))},function(b,a){b.setTime(b.getTime()+60000*Math.floor(a))},function(a){return a.getMinutes()}),cE.minutes=cE.minute.range,cE.minutes.utc=cE.minute.utc.range,cE.hour=ej(function(b){var a=b.getTimezoneOffset()/60;return new iJ(3600000*(Math.floor(b/3600000-a)+a))},function(b,a){b.setTime(b.getTime()+3600000*Math.floor(a))},function(a){return a.getHours()}),cE.hours=cE.hour.range,cE.hours.utc=cE.hour.utc.range,cE.month=ej(function(a){return a=cE.day(a),a.setDate(1),a},function(b,a){b.setMonth(b.getMonth()+a)},function(a){return a.getMonth()}),cE.months=cE.month.range,cE.months.utc=cE.month.utc.range;var fY=[1000,5000,15000,30000,60000,300000,900000,1800000,3600000,10800000,21600000,43200000,86400000,172800000,604800000,2592000000,7776000000,31536000000],ah=[[cE.second,1],[cE.second,5],[cE.second,15],[cE.second,30],[cE.minute,1],[cE.minute,5],[cE.minute,15],[cE.minute,30],[cE.hour,1],[cE.hour,3],[cE.hour,6],[cE.hour,12],[cE.day,1],[cE.day,2],[cE.week,1],[cE.month,1],[cE.month,3],[cE.year,1]],aU=bk.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",hS]]),g2={range:function(a,b,c){return cd.range(+a,+b,c).map(hx)},floor:iI,ceil:iI};ah.year=cE.year,cE.scale=function(){return bP(cd.scale.linear(),ah,aU)};var bF=ah.map(function(a){return[a[0].utc,a[1]]}),jO=eI.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",hS]]);bF.year=cE.year.utc,cE.scale.utc=function(){return bP(cd.scale.linear(),bF,jO)},cd.text=bz(function(a){return a.responseText}),cd.json=function(b,a){return dy(b,"application/json",bZ,a)},cd.html=function(b,a){return dy(b,"text/html",cl,a)},cd.xml=bz(function(a){return a.responseXML}),"function"==typeof define&&define.amd?define(cd):"object"==typeof module&&module.exports?module.exports=cd:this.d3=cd}();var AbstractEdge=function(){};AbstractEdge.prototype={hide:function(){this.connection.fg.hide();this.connection.bg&&this.bg.connection.hide()}};var EdgeFactory=function(){this.template=new AbstractEdge();this.template.style=new Object();this.template.style.directed=false;this.template.weight=1};EdgeFactory.prototype={build:function(b,a){var c=jQuery.extend(true,{},this.template);c.source=b;c.target=a;return c}};var Graph=function(){this.nodes={};this.edges=[];this.edgeFactory=new EdgeFactory()};Graph.prototype={addNode:function(a,c){if(this.nodes[a]==undefined){this.nodes[a]=new Graph.Node(a,c)}var b=this.nodes[a];return b},addEdge:function(g,a,d){var c=this.addNode(g);var b=this.addNode(a);var f=this.edgeFactory.build(c,b);jQuery.extend(f.style,d);c.edges.push(f);this.edges.push(f);b.edges.push(f)},copy:function(){var d=new Graph();for(var a in this.edges){var c=this.edges[a];d.addEdge(c.source.id,c.target.id)}for(var b in this.nodes){if(this.nodes[b].layer!=undefined){d.nodes[b].layer=this.nodes[b].layer}}return d},removeEdge:function(d){for(var a in this.nodes){var c=this.nodes[a];for(var g in c.edges){var b=c.edges[g];if(b.source.id==d.source.id&&b.target.id==d.target.id){c.edges.splice(g,1)}}}var f=this.edges.indexOf(d);this.edges.splice(f,1)},removeEdges:function(a){for(e in a){this.removeEdge(a[e])}},getNode:function(a){return this.nodes[a]},removeNode:function(b){var d=[];for(var c=0;c<b.edges.length;c++){var a=b.edges[c];d.push(a)}for(e in d){this.removeEdge(d[e])}delete this.nodes[b.id]},getLeafs:function(){var b=new Array();for(var a in this.nodes){var c=this.nodes[a];if(this.nodeOutDegree(c)==0){b.push(c)}}return b},nodeInDegree:function(a){var c=0;for(e in a.edges){var b=a.edges[e].source;if(b.id!=a.id){c++}}return c},nodeOutDegree:function(a){var c=0;for(e in a.edges){var b=a.edges[e].source;if(b.id==a.id){c++}}return c},hierarchicalDrawing:function(){var a=this.extractDAG();a.layerAssignment();a.createGraphWithBends();a.vertexOrdering();for(n in this.nodes){this.nodes[n].layer=a.nodes[n].layer;this.nodes[n].xOrder=a.nodes[n].xOrder}},xOrderShift:function(){var g=[];for(var h in this.nodes){var f=this.nodes[h].layer;if(g[f]==undefined){g[f]=new Array()}g[f].push(this.nodes[h])}varMaxLayerSize=0;for(var a in g){if(varMaxLayerSize<g[a].length){varMaxLayerSize=g[a].length}}for(var d=0;d<g.length;d++){var c=g[d].length;for(h in g[d]){var b=g[d][h];b.xOrder=b.xOrder+Math.floor(varMaxLayerSize/c)}}},createGraphWithBends:function(){for(var a in this.edges){if(Math.abs(this.edges[a].source.layer-this.edges[a].target.layer)>1){this.addBendNodes(this.edges[a])}}},addBendNodes:function(d){console.log("---- Add bend nodes for edge "+d.source.id+","+d.target.id);var h=d.source;var g=d.target;var c=h;for(var f=h.layer-1;f>g.layer;f--){var a=this.addNode("b_"+h.id+"-"+g.id+"_"+f);a.layer=f;this.addEdge(c.id,a.id);c=a}this.addEdge(c.id,g.id)},vertexOrdering:function(){var d=[];for(var b in this.nodes){var c=this.nodes[b].layer;if(d[c]==undefined){d[c]=new Array()}d[c].push(this.nodes[b])}for(l in d){var c=d[l];var a=0;for(b in c){c[b].xOrder=a;a++}}for(l in d){var c=d[l];this.greedySwitch(c)}},greedySwitch:function(f){var g=0;if(f.length==1){return g}else{for(var d=0;d<f.length;d++){for(var c=d+1;c<f.length;c++){g=g+this.getCrossingNumber(f[d],f[c])}}var m=g;var b=0;while(m!=b){m=b;b=0;for(var d=0;d<f.length;d++){for(var c=d+1;c<f.length;c++){var a=f[d];var h=f[c];nbij=this.getCrossingNumber(a,h);a.xOrder=c;h.xOrder=d;nbji=this.getCrossingNumber(a,h);if(nbji<nbij){f[d]=h;f[c]=a;b=b+nbji;console.log("swap "+a.id+" and "+h.id)}else{a.xOrder=d;h.xOrder=c;b=b+nbij}}}}return g}},getTotalCrossings:function(){var a=0;for(n1 in this.nodes){var c=this.nodes[n1];for(n2 in this.nodes){var b=this.nodes[n2];a=a+this.getCrossingNumber(c,b)}}return a},getCrossingNumber:function(f,d){var a=0;if((f.xOrder<d.xOrder)&&(f.layer==d.layer)){for(e1 in f.edges){var c;if(f.edges[e1].source.id==f.id){c=f.edges[e1].target}else{c=f.edges[e1].source}for(e2 in d.edges){var b;if(d.edges[e2].source.id==d.id){b=d.edges[e2].target}else{b=d.edges[e2].source}if((c.layer>f.layer)&&(b.layer>f.layer)&&(b.xOrder<c.xOrder)){a++}}}}return a},isAcyclic:function(){var a=this.copy();var b=a.getLeafs();while(b.length!=0&&Object.keys(a.nodes).length!=0){var c=b.pop();a.removeNode(c);b=a.getLeafs()}if(Object.keys(a.nodes).length==0){return true}if(b.length==0){return false}},getMinimalFAS:function(){var d=new Array();var b=new Graph();var c=new Array();for(e in this.edges){var a=this.edges[e];b.addEdge(a.source.id,a.target.id);if(b.isAcyclic()){d.push(a)}else{b.removeEdge(a);c.push(a)}}return c},extractDAG:function(){var b=this.copy();var a=b.getMinimalFAS();b.removeEdges(a);return b},layerAssignment:function(){var a=Number.MAX_VALUE;finalC=-1;finalW=-1;for(var b=1;b<=2;b++){for(var d=1;d<=4;d++){var f=this.copy();var g=f.minWidthLayerAssignment(d,b);if(g<a){finalC=b;finalW=d;a=g}}}this.minWidthLayerAssignment(finalW,finalC);this.vertexPromotion();this.shiftLayers()},shiftLayers:function(){var b=Number.MAX_VALUE;for(n in this.nodes){var a=this.nodes[n].layer;if(a<b){b=a}}for(n in this.nodes){this.nodes[n].layer=this.nodes[n].layer-b}},promoteVertex:function(c){var b=0;var a=this.getInNodesTo(c);for(x in a){var d=a[x];if(d.layer==c.layer+1){b=b+this.promoteVertex(d)}}c.layer=c.layer+1;b=b-this.getInNodesTo(c).length+this.getOutNodesFrom(c).length;return b},vertexPromotion:function(){var b=this.copy();var d=-1;while(d!=0){d=0;for(x in this.nodes){var c=this.nodes[x];if(this.getInNodesTo(c).length>0){var f=this.promoteVertex(c);var a=(f<0);if(a){d=d+1;b=this.copy()}else{for(n in b.nodes){this.nodes[n].layer=b.nodes[n].layer}}}else{console.log("--- in degree is below zero")}}}},minWidthLayerAssignment:function(a,m){var o=0;var b=new Array();for(var w in this.nodes){b.push(this.nodes[w]);this.nodes[w].layer=-1}var d=new Array();var s=new Array();var j=1;var h=0;var p=0;while(!($(d).not(b).length==0&&$(b).not(d).length==0)){var t=$.grep(b,function(c){return $.inArray(c,d)<0});var f=new Array();for(w in t){var r=this.getOutNodesFrom(t[w]);if($(r).not(s).length==0){f.push(t[w])}}var u=false;var q=Number.MAX_VALUE;if(f.length!=0){u=true;var g=this.quickDegreeSort(f).pop();g.layer=j;d.push(g);q=this.getOutNodesFrom(g);h=h-this.getOutNodesFrom(g).length+1;p=p+this.getInNodesTo(g).length}if(!u||(h>=a&&q<1)||p>=m*a){j=j+1;for(w in d){s.push(d[w])}if(h>o){o=h}h=p;p=0}}return o},getOutNodesFrom:function(c){var b=new Array();for(var a in c.edges){if(c.edges[a].target.id!=c.id){b.push(c.edges[a].target)}}return b},getInNodesTo:function(b){var a=new Array();for(var c in b.edges){if(b.edges[c].source.id!=b.id){a.push(b.edges[c].source)}}return a},getStronglyConnectedComponents:function(){var b=new Array();var a=0;var c=new Array();for(n in this.nodes){var d=this.nodes[n];d.index=undefined;d.lowlink=Number.MAX_VALUE}for(n in this.nodes){var d=this.nodes[n];if(d.index==undefined){this.strongconnect(d,a,b,c)}}return c},strongconnect:function(f,g,a,c){f.index=g;f.lowlink=g;g=g+1;a.push(f);for(e in f.edges){var b=f.edges[e].target;if(b.id!=f.id){if(b.index==undefined){this.strongconnect(b,g,a,c);f.lowlink=Math.min(f.lowlink,b.lowlink)}else{if(a.indexOf(b)!=undefined){f.lowlink=Math.min(f.lowlink,b.lowlink)}}}}if(f.lowlink==f.index){var d=new Array();var b=a.pop();while(b.id!=f.id){d.push(b);var b=a.pop()}d.push(b);c.push(d)}},quickDegreeSort:function(d){if(d.length<=1){return d}var c=Math.floor(d.length/2);var h=d[c];var f=[],b=[],a=[];for(var g in d){this.nodeOutDegree(d[g])<this.nodeOutDegree(h)&&f.push(d[g]);this.nodeOutDegree(d[g])==this.nodeOutDegree(h)&&b.push(d[g]);this.nodeOutDegree(d[g])>this.nodeOutDegree(h)&&a.push(d[g])}return this.quickDegreeSort(f).concat(b).concat(this.quickDegreeSort(a))}};Graph.Node=function(b,a){a=a||{};a.id=b;a.edges=[];a.hide=function(){this.hidden=true;this.shape&&this.shape.hide();for(i in this.edges){(this.edges[i].source.id==b||this.edges[i].target==b)&&this.edges[i].hide&&this.edges[i].hide()}};a.show=function(){this.hidden=false;this.shape&&this.shape.show();for(i in this.edges){(this.edges[i].source.id==b||this.edges[i].target==b)&&this.edges[i].show&&this.edges[i].show()}};a.getAdjacents=function(){return this.edges.map(function(c){if(c.source.id==a.id){return c.target}else{return c.source}})};return a};Graph.Node.prototype={};function BinaryMinHeap(h,d){var j=[];var d=d||"key";var f=function(m){return Math.floor((m-1)/2)};var c=function(m){return 2*m+2};var g=function(m){return 2*m+1};function a(o){var m=f(o);while((m>=0)&&(j[o][d]<j[m][d])){j[o]=j.splice(m,1,j[o])[0];o=m;m=f(o)}}function b(p){var o=g(p);var q=c(p);while(j[o]&&(j[p][d]>j[o][d])||j[q]&&(j[p][d]>j[q][d])){var m=j[o]?j[q]?j[o][d]>j[q][d]?q:o:o:o;j[p]=j.splice(m,1,j[p])[0];p=m;o=g(p);q=c(p)}}this.insert=function(m){(m[d]==undefined)&&(m={key:m});j.push(m);a(j.length-1)};this.min=function(){return j.length==1?undefined:j[0]};this.extractMin=function(){var m=this.min();(j.length==1)&&(j=[])||(j[0]=j.pop())&&b(0);return m};this.changeKey=function(o,m){throw"function not implemented"};this.heapify=function(){for(var m=Math.floor((j.length-2)/2);m>=0;m--){b(m)}};for(i in (h||[])){this.insert(h[i])}}var jscolor={dir:"",bindClass:"color",binding:true,preloading:true,install:function(){jscolor.init()},init:function(){if(jscolor.binding){jscolor.bind()}if(jscolor.preloading){jscolor.preload()}},getDir:function(){if(!jscolor.dir){var a=jscolor.detectDir();jscolor.dir=a!==false?a:"jscolor/"}return jscolor.dir},detectDir:function(){var f=location.href;var a=document.getElementsByTagName("base");for(var c=0;c<a.length;c+=1){if(a[c].href){f=a[c].href}}var a=document.getElementsByTagName("script");for(var c=0;c<a.length;c+=1){if(a[c].src&&/(^|\/)jscolor\.js([?#].*)?$/i.test(a[c].src)){var b=new jscolor.URI(a[c].src);var d=b.toAbsolute(f);d.path=d.path.replace(/[^\/]+$/,"");d.query=null;d.fragment=null;return d.toString()}}return false},bind:function(){var f=new RegExp("(^|\\s)("+jscolor.bindClass+")(\\s*(\\{[^}]*\\})|\\s|$)","i");var g=document.getElementsByTagName("input");for(var d=0;d<g.length;d+=1){if(jscolor.isColorAttrSupported&&g[d].type.toLowerCase()=="color"){continue}var c;if(!g[d].color&&g[d].className&&(c=g[d].className.match(f))){var a={};if(c[4]){try{a=(new Function("return ("+c[4]+")"))()}catch(b){}}g[d].color=new jscolor.color(g[d],a)}}},preload:function(){for(var a in jscolor.imgRequire){if(jscolor.imgRequire.hasOwnProperty(a)){jscolor.loadImage(a)}}},images:{pad:[181,101],sld:[16,101],cross:[15,15],arrow:[7,11]},imgRequire:{},imgLoaded:{},requireImage:function(a){jscolor.imgRequire[a]=true},loadImage:function(a){if(!jscolor.imgLoaded[a]){jscolor.imgLoaded[a]=new Image();jscolor.imgLoaded[a].src=jscolor.getDir()+a}},fetchElement:function(a){return typeof a==="string"?document.getElementById(a):a},addEvent:function(b,a,c){if(b.addEventListener){b.addEventListener(a,c,false)}else{if(b.attachEvent){b.attachEvent("on"+a,c)}}},fireEvent:function(b,a){if(!b){return}if(document.createEvent){var c=document.createEvent("HTMLEvents");c.initEvent(a,true,true);b.dispatchEvent(c)}else{if(document.createEventObject){var c=document.createEventObject();b.fireEvent("on"+a,c)}else{if(b["on"+a]){b["on"+a]()}}}},getElementPos:function(f){var a=f,d=f;var c=0,b=0;if(a.offsetParent){do{c+=a.offsetLeft;b+=a.offsetTop}while(a=a.offsetParent)}while((d=d.parentNode)&&d.nodeName.toUpperCase()!=="BODY"){c-=d.scrollLeft;b-=d.scrollTop}return[c,b]},getElementSize:function(a){return[a.offsetWidth,a.offsetHeight]},getRelMousePos:function(c){var b=0,a=0;if(!c){c=window.event}if(typeof c.offsetX==="number"){b=c.offsetX;a=c.offsetY}else{if(typeof c.layerX==="number"){b=c.layerX;a=c.layerY}}return{x:b,y:a}},getViewPos:function(){if(typeof window.pageYOffset==="number"){return[window.pageXOffset,window.pageYOffset]}else{if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){return[document.body.scrollLeft,document.body.scrollTop]}else{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){return[document.documentElement.scrollLeft,document.documentElement.scrollTop]}else{return[0,0]}}}},getViewSize:function(){if(typeof window.innerWidth==="number"){return[window.innerWidth,window.innerHeight]}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){return[document.body.clientWidth,document.body.clientHeight]}else{if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){return[document.documentElement.clientWidth,document.documentElement.clientHeight]}else{return[0,0]}}}},URI:function(a){this.scheme=null;this.authority=null;this.path="";this.query=null;this.fragment=null;this.parse=function(d){var c=d.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/);this.scheme=c[3]?c[2]:null;this.authority=c[5]?c[6]:null;this.path=c[7];this.query=c[9]?c[10]:null;this.fragment=c[12]?c[13]:null;return this};this.toString=function(){var c="";if(this.scheme!==null){c=c+this.scheme+":"}if(this.authority!==null){c=c+"//"+this.authority}if(this.path!==null){c=c+this.path}if(this.query!==null){c=c+"?"+this.query}if(this.fragment!==null){c=c+"#"+this.fragment}return c};this.toAbsolute=function(d){var d=new jscolor.URI(d);var c=this;var f=new jscolor.URI();if(d.scheme===null){return false}if(c.scheme!==null&&c.scheme.toLowerCase()===d.scheme.toLowerCase()){c.scheme=null}if(c.scheme!==null){f.scheme=c.scheme;f.authority=c.authority;f.path=b(c.path);f.query=c.query}else{if(c.authority!==null){f.authority=c.authority;f.path=b(c.path);f.query=c.query}else{if(c.path===""){f.path=d.path;if(c.query!==null){f.query=c.query}else{f.query=d.query}}else{if(c.path.substr(0,1)==="/"){f.path=b(c.path)}else{if(d.authority!==null&&d.path===""){f.path="/"+c.path}else{f.path=d.path.replace(/[^\/]+$/,"")+c.path}f.path=b(f.path)}f.query=c.query}f.authority=d.authority}f.scheme=d.scheme}f.fragment=c.fragment;return f};function b(d){var f="";while(d){if(d.substr(0,3)==="../"||d.substr(0,2)==="./"){d=d.replace(/^\.+/,"").substr(1)}else{if(d.substr(0,3)==="/./"||d==="/."){d="/"+d.substr(3)}else{if(d.substr(0,4)==="/../"||d==="/.."){d="/"+d.substr(4);f=f.replace(/\/?[^\/]*$/,"")}else{if(d==="."||d===".."){d=""}else{var c=d.match(/^\/?[^\/]*/)[0];d=d.substr(c.length);f=f+c}}}}}return f}if(a){this.parse(a)}},color:function(r,B){this.required=true;this.adjust=true;this.hash=false;this.caps=true;this.slider=true;this.valueElement=r;this.styleElement=r;this.onImmediateChange=null;this.hsv=[0,0,1];this.rgb=[1,1,1];this.minH=0;this.maxH=6;this.minS=0;this.maxS=1;this.minV=0;this.maxV=1;this.pickerOnfocus=true;this.pickerMode="HSV";this.pickerPosition="bottom";this.pickerSmartPosition=true;this.pickerButtonHeight=20;this.pickerClosable=false;this.pickerCloseText="Close";this.pickerButtonColor="ButtonText";this.pickerFace=10;this.pickerFaceColor="ThreeDFace";this.pickerBorder=1;this.pickerBorderColor="ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight";this.pickerInset=1;this.pickerInsetColor="ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow";this.pickerZIndex=10000;for(var u in B){if(B.hasOwnProperty(u)){this[u]=B[u]}}this.hidePicker=function(){if(I()){E()}};this.showPicker=function(){if(!I()){var Q=jscolor.getElementPos(r);var N=jscolor.getElementSize(r);var p=jscolor.getViewPos();var S=jscolor.getViewSize();var T=H(this);var R,P,O;switch(this.pickerPosition.toLowerCase()){case"left":R=1;P=0;O=-1;break;case"right":R=1;P=0;O=1;break;case"top":R=0;P=1;O=-1;break;default:R=0;P=1;O=1;break}var M=(N[P]+T[P])/2;if(!this.pickerSmartPosition){var L=[Q[R],Q[P]+N[P]-M+M*O]}else{var L=[-p[R]+Q[R]+T[R]>S[R]?(-p[R]+Q[R]+N[R]/2>S[R]/2&&Q[R]+N[R]-T[R]>=0?Q[R]+N[R]-T[R]:Q[R]):Q[R],-p[P]+Q[P]+N[P]+T[P]-M+M*O>S[P]?(-p[P]+Q[P]+N[P]/2>S[P]/2&&Q[P]+N[P]-M-M*O>=0?Q[P]+N[P]-M-M*O:Q[P]+N[P]-M+M*O):(Q[P]+N[P]-M+M*O>=0?Q[P]+N[P]-M+M*O:Q[P]+N[P]-M-M*O)]}K(L[R],L[P])}};this.importColor=function(){if(!w){this.exportColor()}else{if(!this.adjust){if(!this.fromString(w.value,f)){v.style.backgroundImage=v.jscStyle.backgroundImage;v.style.backgroundColor=v.jscStyle.backgroundColor;v.style.color=v.jscStyle.color;this.exportColor(f|t)}}else{if(!this.required&&/^\s*$/.test(w.value)){w.value="";v.style.backgroundImage=v.jscStyle.backgroundImage;v.style.backgroundColor=v.jscStyle.backgroundColor;v.style.color=v.jscStyle.color;this.exportColor(f|t)}else{if(this.fromString(w.value)){}else{this.exportColor()}}}}};this.exportColor=function(p){if(!(p&f)&&w){var L=this.toString();if(this.caps){L=L.toUpperCase()}if(this.hash){L="#"+L}w.value=L}if(!(p&t)&&v){v.style.backgroundImage="none";v.style.backgroundColor="#"+this.toString();v.style.color=0.213*this.rgb[0]+0.715*this.rgb[1]+0.072*this.rgb[2]<0.5?"#FFF":"#000"}if(!(p&a)&&I()){s()}if(!(p&C)&&I()){q()}};this.fromHSV=function(N,M,L,p){if(N!==null){N=Math.max(0,this.minH,Math.min(6,this.maxH,N))}if(M!==null){M=Math.max(0,this.minS,Math.min(1,this.maxS,M))}if(L!==null){L=Math.max(0,this.minV,Math.min(1,this.maxV,L))}this.rgb=F(N===null?this.hsv[0]:(this.hsv[0]=N),M===null?this.hsv[1]:(this.hsv[1]=M),L===null?this.hsv[2]:(this.hsv[2]=L));this.exportColor(p)};this.fromRGB=function(p,O,P,L){if(p!==null){p=Math.max(0,Math.min(1,p))}if(O!==null){O=Math.max(0,Math.min(1,O))}if(P!==null){P=Math.max(0,Math.min(1,P))}var N=g(p===null?this.rgb[0]:p,O===null?this.rgb[1]:O,P===null?this.rgb[2]:P);if(N[0]!==null){this.hsv[0]=Math.max(0,this.minH,Math.min(6,this.maxH,N[0]))}if(N[2]!==0){this.hsv[1]=N[1]===null?null:Math.max(0,this.minS,Math.min(1,this.maxS,N[1]))}this.hsv[2]=N[2]===null?null:Math.max(0,this.minV,Math.min(1,this.maxV,N[2]));var M=F(this.hsv[0],this.hsv[1],this.hsv[2]);this.rgb[0]=M[0];this.rgb[1]=M[1];this.rgb[2]=M[2];this.exportColor(L)};this.fromString=function(M,L){var p=M.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);if(!p){return false}else{if(p[1].length===6){this.fromRGB(parseInt(p[1].substr(0,2),16)/255,parseInt(p[1].substr(2,2),16)/255,parseInt(p[1].substr(4,2),16)/255,L)}else{this.fromRGB(parseInt(p[1].charAt(0)+p[1].charAt(0),16)/255,parseInt(p[1].charAt(1)+p[1].charAt(1),16)/255,parseInt(p[1].charAt(2)+p[1].charAt(2),16)/255,L)}return true}};this.toString=function(){return((256|Math.round(255*this.rgb[0])).toString(16).substr(1)+(256|Math.round(255*this.rgb[1])).toString(16).substr(1)+(256|Math.round(255*this.rgb[2])).toString(16).substr(1))};function g(Q,O,L){var p=Math.min(Math.min(Q,O),L);var M=Math.max(Math.max(Q,O),L);var P=M-p;if(P===0){return[null,0,M]}var N=Q===p?3+(L-O)/P:(O===p?5+(Q-L)/P:1+(O-Q)/P);return[N===6?0:N,P/M,M]}function F(O,N,L){if(O===null){return[L,L,L]}var M=Math.floor(O);var Q=M%2?O-M:1-(O-M);var P=L*(1-N);var p=L*(1-N*Q);switch(M){case 6:case 0:return[L,p,P];case 1:return[p,L,P];case 2:return[P,L,p];case 3:return[P,p,L];case 4:return[p,P,L];case 5:return[L,P,p]}}function E(){delete jscolor.picker.owner;document.getElementsByTagName("body")[0].removeChild(jscolor.picker.boxB)}function K(R,Q){if(!jscolor.picker){jscolor.picker={box:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),btn:document.createElement("div"),btnS:document.createElement("span"),btnT:document.createTextNode(c.pickerCloseText)};for(var O=0,P=4;O<jscolor.images.sld[1];O+=P){var N=document.createElement("div");N.style.height=P+"px";N.style.fontSize="1px";N.style.lineHeight="0";jscolor.picker.sld.appendChild(N)}jscolor.picker.sldB.appendChild(jscolor.picker.sld);jscolor.picker.box.appendChild(jscolor.picker.sldB);jscolor.picker.box.appendChild(jscolor.picker.sldM);jscolor.picker.padB.appendChild(jscolor.picker.pad);jscolor.picker.box.appendChild(jscolor.picker.padB);jscolor.picker.box.appendChild(jscolor.picker.padM);jscolor.picker.btnS.appendChild(jscolor.picker.btnT);jscolor.picker.btn.appendChild(jscolor.picker.btnS);jscolor.picker.box.appendChild(jscolor.picker.btn);jscolor.picker.boxB.appendChild(jscolor.picker.box)}var p=jscolor.picker;p.box.onmouseup=p.box.onmouseout=function(){r.focus()};p.box.onmousedown=function(){h=true};p.box.onmousemove=function(V){if(A||j){A&&b(V);j&&G(V);if(document.selection){document.selection.empty()}else{if(window.getSelection){window.getSelection().removeAllRanges()}}D()}};if("ontouchstart" in window){var U=function(W){var V={offsetX:W.touches[0].pageX-J.X,offsetY:W.touches[0].pageY-J.Y};if(A||j){A&&b(V);j&&G(V);D()}W.stopPropagation();W.preventDefault()};p.box.removeEventListener("touchmove",U,false);p.box.addEventListener("touchmove",U,false)}p.padM.onmouseup=p.padM.onmouseout=function(){if(A){A=false;jscolor.fireEvent(w,"change")}};p.padM.onmousedown=function(V){switch(y){case 0:if(c.hsv[2]===0){c.fromHSV(null,null,1)}break;case 1:if(c.hsv[1]===0){c.fromHSV(null,1,null)}break}j=false;A=true;b(V);D()};if("ontouchstart" in window){p.padM.addEventListener("touchstart",function(V){J={X:V.target.offsetParent.offsetLeft,Y:V.target.offsetParent.offsetTop};this.onmousedown({offsetX:V.touches[0].pageX-J.X,offsetY:V.touches[0].pageY-J.Y})})}p.sldM.onmouseup=p.sldM.onmouseout=function(){if(j){j=false;jscolor.fireEvent(w,"change")}};p.sldM.onmousedown=function(V){A=false;j=true;G(V);D()};if("ontouchstart" in window){p.sldM.addEventListener("touchstart",function(V){J={X:V.target.offsetParent.offsetLeft,Y:V.target.offsetParent.offsetTop};this.onmousedown({offsetX:V.touches[0].pageX-J.X,offsetY:V.touches[0].pageY-J.Y})})}var T=H(c);p.box.style.width=T[0]+"px";p.box.style.height=T[1]+"px";p.boxB.style.position="absolute";p.boxB.style.clear="both";p.boxB.style.left=R+"px";p.boxB.style.top=Q+"px";p.boxB.style.zIndex=c.pickerZIndex;p.boxB.style.border=c.pickerBorder+"px solid";p.boxB.style.borderColor=c.pickerBorderColor;p.boxB.style.background=c.pickerFaceColor;p.pad.style.width=jscolor.images.pad[0]+"px";p.pad.style.height=jscolor.images.pad[1]+"px";p.padB.style.position="absolute";p.padB.style.left=c.pickerFace+"px";p.padB.style.top=c.pickerFace+"px";p.padB.style.border=c.pickerInset+"px solid";p.padB.style.borderColor=c.pickerInsetColor;p.padM.style.position="absolute";p.padM.style.left="0";p.padM.style.top="0";p.padM.style.width=c.pickerFace+2*c.pickerInset+jscolor.images.pad[0]+jscolor.images.arrow[0]+"px";p.padM.style.height=p.box.style.height;p.padM.style.cursor="crosshair";p.sld.style.overflow="hidden";p.sld.style.width=jscolor.images.sld[0]+"px";p.sld.style.height=jscolor.images.sld[1]+"px";p.sldB.style.display=c.slider?"block":"none";p.sldB.style.position="absolute";p.sldB.style.right=c.pickerFace+"px";p.sldB.style.top=c.pickerFace+"px";p.sldB.style.border=c.pickerInset+"px solid";p.sldB.style.borderColor=c.pickerInsetColor;p.sldM.style.display=c.slider?"block":"none";p.sldM.style.position="absolute";p.sldM.style.right="0";p.sldM.style.top="0";p.sldM.style.width=jscolor.images.sld[0]+jscolor.images.arrow[0]+c.pickerFace+2*c.pickerInset+"px";p.sldM.style.height=p.box.style.height;try{p.sldM.style.cursor="pointer"}catch(M){p.sldM.style.cursor="hand"}function S(){var V=c.pickerInsetColor.split(/\s+/);var W=V.length<2?V[0]:V[1]+" "+V[0]+" "+V[0]+" "+V[1];p.btn.style.borderColor=W}p.btn.style.display=c.pickerClosable?"block":"none";p.btn.style.position="absolute";p.btn.style.left=c.pickerFace+"px";p.btn.style.bottom=c.pickerFace+"px";p.btn.style.padding="0 15px";p.btn.style.height="18px";p.btn.style.border=c.pickerInset+"px solid";S();p.btn.style.color=c.pickerButtonColor;p.btn.style.font="12px sans-serif";p.btn.style.textAlign="center";try{p.btn.style.cursor="pointer"}catch(M){p.btn.style.cursor="hand"}p.btn.onmousedown=function(){c.hidePicker()};p.btnS.style.lineHeight=p.btn.style.height;switch(y){case 0:var L="hs.png";break;case 1:var L="hv.png";break}p.padM.style.backgroundImage="url('"+jscolor.getDir()+"cross.gif')";p.padM.style.backgroundRepeat="no-repeat";p.sldM.style.backgroundImage="url('"+jscolor.getDir()+"arrow.gif')";p.sldM.style.backgroundRepeat="no-repeat";p.pad.style.backgroundImage="url('"+jscolor.getDir()+L+"')";p.pad.style.backgroundRepeat="no-repeat";p.pad.style.backgroundPosition="0 0";s();q();jscolor.picker.owner=c;document.getElementsByTagName("body")[0].appendChild(p.boxB)}function H(L){var p=[2*L.pickerInset+2*L.pickerFace+jscolor.images.pad[0]+(L.slider?2*L.pickerInset+2*jscolor.images.arrow[0]+jscolor.images.sld[0]:0),L.pickerClosable?4*L.pickerInset+3*L.pickerFace+jscolor.images.pad[1]+L.pickerButtonHeight:2*L.pickerInset+2*L.pickerFace+jscolor.images.pad[1]];return p}function s(){switch(y){case 0:var M=1;break;case 1:var M=2;break}var Q=Math.round((c.hsv[0]/6)*(jscolor.images.pad[0]-1));var P=Math.round((1-c.hsv[M])*(jscolor.images.pad[1]-1));jscolor.picker.padM.style.backgroundPosition=(c.pickerFace+c.pickerInset+Q-Math.floor(jscolor.images.cross[0]/2))+"px "+(c.pickerFace+c.pickerInset+P-Math.floor(jscolor.images.cross[1]/2))+"px";var S=jscolor.picker.sld.childNodes;switch(y){case 0:var O=F(c.hsv[0],c.hsv[1],1);for(var p=0;p<S.length;p+=1){S[p].style.backgroundColor="rgb("+(O[0]*(1-p/S.length)*100)+"%,"+(O[1]*(1-p/S.length)*100)+"%,"+(O[2]*(1-p/S.length)*100)+"%)"}break;case 1:var O,R,N=[c.hsv[2],0,0];var p=Math.floor(c.hsv[0]);var L=p%2?c.hsv[0]-p:1-(c.hsv[0]-p);switch(p){case 6:case 0:O=[0,1,2];break;case 1:O=[1,0,2];break;case 2:O=[2,0,1];break;case 3:O=[2,1,0];break;case 4:O=[1,2,0];break;case 5:O=[0,2,1];break}for(var p=0;p<S.length;p+=1){R=1-1/(S.length-1)*p;N[1]=N[0]*(1-R*L);N[2]=N[0]*(1-R);S[p].style.backgroundColor="rgb("+(N[O[0]]*100)+"%,"+(N[O[1]]*100)+"%,"+(N[O[2]]*100)+"%)"}break}}function q(){switch(y){case 0:var p=2;break;case 1:var p=1;break}var L=Math.round((1-c.hsv[p])*(jscolor.images.sld[1]-1));jscolor.picker.sldM.style.backgroundPosition="0 "+(c.pickerFace+c.pickerInset+L-Math.floor(jscolor.images.arrow[1]/2))+"px"}function I(){return jscolor.picker&&jscolor.picker.owner===c}function o(){if(w===r){c.importColor()}if(c.pickerOnfocus){c.hidePicker()}}function d(){if(w!==r){c.importColor()}}function b(M){var L=jscolor.getRelMousePos(M);var p=L.x-c.pickerFace-c.pickerInset;var N=L.y-c.pickerFace-c.pickerInset;switch(y){case 0:c.fromHSV(p*(6/(jscolor.images.pad[0]-1)),1-N/(jscolor.images.pad[1]-1),null,C);break;case 1:c.fromHSV(p*(6/(jscolor.images.pad[0]-1)),null,1-N/(jscolor.images.pad[1]-1),C);break}}function G(L){var p=jscolor.getRelMousePos(L);var M=p.y-c.pickerFace-c.pickerInset;switch(y){case 0:c.fromHSV(null,null,1-M/(jscolor.images.sld[1]-1),a);break;case 1:c.fromHSV(null,1-M/(jscolor.images.sld[1]-1),null,a);break}}function D(){if(c.onImmediateChange){var p;if(typeof c.onImmediateChange==="string"){p=new Function(c.onImmediateChange)}else{p=c.onImmediateChange}p.call(c)}}var c=this;var y=this.pickerMode.toLowerCase()==="hvs"?1:0;var h=false;var w=jscolor.fetchElement(this.valueElement),v=jscolor.fetchElement(this.styleElement);var A=false,j=false,J={};var f=1<<0,t=1<<1,a=1<<2,C=1<<3;jscolor.isColorAttrSupported=false;var z=document.createElement("input");if(z.setAttribute){z.setAttribute("type","color");if(z.type.toLowerCase()=="color"){jscolor.isColorAttrSupported=true}}jscolor.addEvent(r,"focus",function(){if(c.pickerOnfocus){c.showPicker()}});jscolor.addEvent(r,"blur",function(){if(!h){window.setTimeout(function(){h||o();h=false},0)}else{h=false}});if(w){var m=function(){c.fromString(w.value,f);D()};jscolor.addEvent(w,"keyup",m);jscolor.addEvent(w,"input",m);jscolor.addEvent(w,"blur",d);w.setAttribute("autocomplete","off")}if(v){v.jscStyle={backgroundImage:v.style.backgroundImage,backgroundColor:v.style.backgroundColor,color:v.style.color}}switch(y){case 0:jscolor.requireImage("hs.png");break;case 1:jscolor.requireImage("hv.png");break}jscolor.requireImage("cross.gif");jscolor.requireImage("arrow.gif");this.importColor()}};jscolor.install();var metExploreD3={GraphUtils:"",GraphCaption:"",GraphNetwork:"",GraphLink:"",GraphFunction:"",GraphMapping:"",GraphPanel:"",GraphPath:"",GraphNode:"",Features:"",testWSMappingGraphToken:function(f,d,c,a){var b={token:f,Content:d,pathways:c};Ext.Ajax.request({method:"POST",url:"http://metexplore.toulouse.inra.fr:8080/metExploreWebService/mapping/launchtokenmapping/inchi/1363/filteredbypathways/",jsonData:b,success:function(j,g){var h=Ext.decode(j.responseText);a(h)},failure:function(g,h){console.log(g)}})},testWSMappingPathways:function(b,c){var a={token:"",Content:b};Ext.Ajax.request({method:"POST",url:"http://metexplore.toulouse.inra.fr:8080/metExploreWebService/mapping/launchtokenmapping/inchi/1363/aspathways/",jsonData:a,success:function(g,d){var f=Ext.decode(g.responseText);c(f)},failure:function(d,f){console.log(d)}})},testWSMappingGraph:function(d,a,f){var c="";a.forEach(function(g){c+=g;if(a.indexOf(g)!=a.length-1){c+=","}});var b={token:"",Content:d,pathways:"("+c+")"};Ext.Ajax.request({method:"POST",url:"http://metexplore.toulouse.inra.fr:8080/metExploreWebService/mapping/launchtokenmapping/inchi/1363/filteredbypathways/",jsonData:b,success:function(j,g){var h=Ext.decode(j.responseText);f(h)},failure:function(g,h){console.log(g)}})},resetMetExploreViz:function(){metExploreD3.fireEvent("selectConditionForm","resetMapping");metExploreD3.fireEvent("graphPanel","initSearch");if(_metExploreViz.getMappingsLength()>0&&a=="viz"){metExploreD3.fireEventArg("buttonMap","reloadMapping",false);metExploreD3.fireEventArg("buttonRefresh","reloadMapping",false);_metExploreViz.resetMappings()}var f=Ext.getCmp("comparisonSidePanel");if(f!=undefined){f.collapse()}if(Ext.getCmp("maskInit")!=undefined){var c=Ext.getCmp("maskInit");c.show();Ext.getCmp("buttonImportToNetworkFromWebsite").setDisabled(true)}var b=_metExploreViz.getSessionsSet();for(var a in b){if(b[a].getForce()!=undefined){b[a].getForce().on("end",null);b[a].getForce().stop()}if(b[a].getId()!="viz"){if(Ext.getCmp(b[a].getId().replace("-body",""))!=null){Ext.getCmp(b[a].getId().replace("-body","")).destroy()}}}d3.select("#viz").select("#D3viz").remove();_metExploreViz.sessions={};_metExploreViz.launched=false;_metExploreViz.dataFromWebSite=null;_metExploreViz.initialData=undefined;_metExploreViz.comparedPanels=[];_metExploreViz.mappings=[];_metExploreViz.linkedByTypeOfMetabolite=false;_metExploreViz.oldCoodinates=[];var d=new NetworkVizSession();d.setVizEngine("D3");d.setId("viz");d.setMapped("false");d.setDisplayNodeName("name");_metExploreViz.addSession(d)},getGlobals:function(){return _metExploreViz},newNetworkData:function(a){return new NetworkData(a)},newGeneralStyle:function(h,m,d,b,c,a,g,j,f){return new GeneralStyle(h,m,d,b,c,a,g,j,f)},getCompartmentInBiosourceSet:function(){return _metExploreViz.getSessionById("viz").getD3Data().getCompartments()},sortCompartmentInBiosource:function(){_metExploreViz.getSessionById("viz").getD3Data().sortCompartments()},getCompartmentInBiosourceLength:function(){return _metExploreViz.getSessionById("viz").getD3Data().getCompartmentsLength()},getCompartmentsGroup:function(){var g=[];var a=Math.ceil(Math.sqrt(metExploreD3.getCompartmentInBiosourceLength()));var m=parseInt(metExploreD3.GraphPanel.getHeight("viz"));var p=parseInt(metExploreD3.GraphPanel.getWidth("viz"));var c=m/a;var f=p/a;var b=c/2;var o=f/2;var j=-1;metExploreD3.getCompartmentInBiosourceSet().forEach(function(s){var r=metExploreD3.getCompartmentInBiosourceSet().indexOf(s)%a;if(r==0){j++}var t=o+(r*f);var q=b+(j*c);var h={key:s.getIdentifier(),center:{x:t,y:q}};g.push(h)});function d(h,q){if(q!=undefined){if(q.values==undefined){q.values=[]}if(q.values.indexOf(h)==-1){q.values.push(h)}}}_metExploreViz.getSessionById("viz").getD3Data().getLinks().forEach(function(h){var q=h.source;var r=h.target;if(q.getBiologicalType()=="metabolite"){d(q,g.find(function(s){return s.key==q.getCompartment()}));d(r,g.find(function(s){return s.key==q.getCompartment()}))}else{d(q,g.find(function(s){return s.key==r.getCompartment()}));d(r,g.find(function(s){return s.key==r.getCompartment()}))}});return g},getPathwaysSet:function(){return _metExploreViz.getSessionById("viz").getD3Data().getPathways()},getPathwaysGroup:function(){var g=[];var a=Math.ceil(Math.sqrt(metExploreD3.getPathwaysLength()));var m=parseInt(metExploreD3.GraphPanel.getHeight("viz"));var p=parseInt(metExploreD3.GraphPanel.getWidth("viz"));var c=m/a;var f=p/a;var b=c/2;var o=f/2;var j=-1;metExploreD3.getPathwaysSet().forEach(function(r){var s=metExploreD3.getPathwaysSet().indexOf(r)%a;if(s==0){j++}var t=o+(s*f);var q=b+(j*c);var h={key:r,center:{x:t,y:q}};g.push(h)});function d(h,q){if(q!=undefined){if(q.values==undefined){q.values=[]}if(q.values.indexOf(h)==-1){q.values.push(h)}}}_metExploreViz.getSessionById("viz").getD3Data().getLinks().forEach(function(h){var q=h.source;var r=h.target;if(q.getBiologicalType()=="reaction"){q.getPathways().forEach(function(s){d(q,g.find(function(t){return t.key==s}));d(r,g.find(function(t){return t.key==s}))})}else{r.getPathways().forEach(function(s){d(q,g.find(function(t){return t.key==s}));d(r,g.find(function(t){return t.key==s}))})}});return g},sortPathways:function(){_metExploreViz.getSessionById("viz").getD3Data().sortPathways()},getPathwaysLength:function(){return _metExploreViz.getSessionById("viz").getD3Data().getPathwaysLength()},setScale:function(b,a){_metExploreViz.getSessionById(a).setScale(b)},getScaleById:function(a){return _metExploreViz.getSessionById(a).getScale()},setMetabolitesSet:function(a){Ext.getStore("S_Metabolite")=a},getMetabolitesSet:function(){return Ext.getStore("S_Metabolite")},getMetaboliteById:function(a,b){return a.getById(b)},setReactionsSet:function(a){Ext.getStore("S_Reaction")=a},getReactionsSet:function(){return Ext.getStore("S_Reaction")},getReactionById:function(a,b){return a.getById(b)},setReactionStyle:function(a){_metExploreViz.reactionStyle=a;metExploreD3.fireEvent("reactionStyleForm","setReactionStyle")},getReactionStyle:function(){return _metExploreViz.reactionStyle},getGeneralStyle:function(){return _metExploreViz.generalStyle},setGeneralStyle:function(a){_metExploreViz.generalStyle=a;metExploreD3.fireEvent("generalStyleForm","setGeneralStyle");metExploreD3.fireEvent("vizIdConvexHullMenu","setGeneralStyle");metExploreD3.fireEvent("buttonImportToNetworkFromWebsite","setGeneralStyle")},setMetaboliteStyle:function(a){_metExploreViz.metaboliteStyle=a;metExploreD3.fireEvent("metaboliteStyleForm","setMetaboliteStyle")},getMetaboliteStyle:function(){return _metExploreViz.metaboliteStyle},setLinkStyle:function(a){_metExploreViz.linkStyle=a},getLinkStyle:function(){return _metExploreViz.linkStyle},setConditionsSet:function(a){Ext.getStore("S_Condition")=a},getConditionsSet:function(){return Ext.getStore("S_Condition")},getConditionById:function(a,b){return a.getById(b)},getConditionsSetLength:function(a){return a.getCount()},getConditionsMapped:function(){return Ext.getCmp("selectConditionForm").lookupReference("selectCondition").lastValue},setMappingInfosSet:function(a){Ext.getStore("S_MappingInfo")=a},getMappingInfosSet:function(){return Ext.getStore("S_MappingInfo")},getMappingInfoById:function(a,b){return a.getById(b)},findMappingInfo:function(c,a,b){return c.findRecord(a,b)},newReactionMapStore:function(a){return Ext.create("Ext.data.Store",{fields:["id","ec","name","reversible"]})},addReactionMap:function(b,d,a,f,c){b.add({id:d,ec:a,name:f,reversible:c})},getReactionMapsSetLength:function(a){return a.getCount()},getMappingSelection:function(){var a=Ext.getCmp("selectMappingVisu");return a.getValue()},showMask:function(a){a.show()},hideMask:function(a){a.hide()},createLoadMask:function(c,b){if(b!="viz"){var a=b.substring(0,b.length-5)}else{var a=b}if(a!=undefined){return new Ext.LoadMask({target:Ext.getCmp(a),msg:c,msgCls:"msgClsCustomLoadMask"})}else{return undefined}},createDelayedTask:function(a){return new Ext.util.DelayedTask(a)},fixDelay:function(a,b){a.delay(b)},stopTask:function(a){a.cancel()},fireEvent2Arg:function(b,a,f,c){var d=Ext.getCmp(b);if(d!=undefined){d.fireEvent(a,f,c)}},fireEventArg:function(b,a,c){var d=Ext.getCmp(b);if(d!=undefined){d.fireEvent(a,c)}},fireEvent:function(a,c){var b=Ext.getCmp(a);if(b!=undefined){b.fireEvent(c)}},hideInitialMask:function(b){var a=Ext.getCmp("buttonImportToNetworkFromWebsite");if(a!=undefined){a.fireEvent("hideMask")}},hideInitialLoadButtons:function(b){var a=Ext.getCmp("buttonImportToNetworkFromWebsite");if(a!=undefined){a.fireEvent("hideInitialLoadButtons")}},cartFilled:function(b){var a=Ext.getCmp("buttonImportToNetworkFromWebsite");if(a!=undefined){a.fireEvent("cartFilled")}a=Ext.getCmp("viz_LoadMenu");if(a!=undefined){a.fireEvent("cartFilled")}_metExploreViz.setDataFromWebSite(b)},fireEventParentWebSite:function(c,b){var a=new Event(c,b);a.value=b;_metExploreViz.getParentWebSite().document.dispatchEvent(a)},displayMessage:function(a,b){Ext.Msg.alert(a,b)},displayWarning:function(a,b){Ext.Msg.show({title:a,msg:b,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})},displayMessageOK:function(b,a,c){Ext.Msg.show({title:b,msg:a,buttons:Ext.Msg.OKCANCEL,fn:c,icon:Ext.Msg.QUESTION})},displayMessageYesNo:function(b,a,c){Ext.Msg.confirm(b,a,c)},displayPrompt:function(b,a,c){Ext.MessageBox.prompt(b,a,c)},deferFunction:function(a,b){return new Ext.defer(a,b)},launchMetexploreFunction:function(a){if(_metExploreViz.getSessionById("viz")!=="undefined"){if(typeof _metExploreViz.getSessionById("viz").getForce()!=="undefined"){a();return}}setTimeout(function(){metExploreD3.launchMetexploreFunction(a)},1000)},onloadSession:function(a){metExploreD3.launchMetexploreFunction(a)},launchMetexploreMapping:function(b,a){if(_metExploreViz.getMappingByName(b)!=null){a();return}setTimeout(function(){metExploreD3.launchMetexploreMapping(b,a)},1000)},onloadMapping:function(b,a){metExploreD3.launchMetexploreMapping(b,a)},bioSourceControled:function(){return _metExploreViz.bioSourceControled()},setControlBioSource:function(a){_metExploreViz.setControlBioSource(a)}};var _metExploreViz;var metExploreViz=function(b,a){_metExploreViz=this;this.sessions={};this.launched=false;this.dataFromWebSite=null;this.panel=b;this.linkStyle=new LinkStyle(25,2,5,5,"red","green","black","0.7","black");this.reactionStyle=new ReactionStyle(15,30,3,3,"ec",9,"black",1);this.metaboliteStyle=new MetaboliteStyle(14,14,7,7,7,1,"name","#b2ae92");this.generalStyle=new GeneralStyle("Website","yellow","blue",500,false,false,false,false,false);this.initialData=undefined;this.biosource=undefined;this.comparedPanels=[];this.mappings=[];this.bioSourceControl=false;this.linkedByTypeOfMetabolite=false;this.parentWebSite=a;this.oldCoodinates=[];metExploreD3.fireEventArg("networkPanel","afterlunch",b);this.generalStyle.setWindowsAlertDisable(true)};metExploreViz.prototype={bioSourceControled:function(){return this.bioSourceControl},setControlBioSource:function(a){this.bioSourceControl=a},getBiosource:function(){return this.biosource},setBiosource:function(a){this.biosource=a},getDataFromWebSite:function(){return this.dataFromWebSite},setDataFromWebSite:function(a){this.dataFromWebSite=a},getParentWebSite:function(){return this.parentWebSite},cloneNetworkData:function(b){var h=new NetworkData();var w,v,C,B,d,p,s,a,D,y,c,o,r,q;for(var z=0;z<b.nodes.length;z++){w=b.nodes[z];if(w.getName()!=undefined){v=w.getName().valueOf()}else{v=undefined}if(w.getCompartment()!=undefined){C=w.getCompartment().valueOf()}else{C=undefined}if(w.getDbIdentifier()!=undefined){B=w.getDbIdentifier().valueOf()}else{B=undefined}if(w.getEC()!=undefined){d=w.getEC().valueOf()}else{d=undefined}if(w.getId()!=undefined){p=w.getId().valueOf()}else{p=undefined}if(w.getReactionReversibility()!=undefined&&w.getBiologicalType()=="reaction"){s=w.getReactionReversibility().valueOf()}else{s=undefined}if(w.getIsSideCompound()!=undefined){a=w.getIsSideCompound().valueOf()}else{a=undefined}if(w.getBiologicalType()!=undefined){D=w.getBiologicalType().valueOf()}else{D=undefined}if(w.isSelected()!=undefined){y=w.isSelected().valueOf()}else{y=undefined}if(w.getLabelVisible()!=undefined){c=w.getLabelVisible().valueOf()}else{c=undefined}if(w.getSvg()!=undefined){o=w.getSvg().valueOf()}else{o=undefined}if(w.getSvgWidth()!=undefined){r=w.getSvgWidth().valueOf()}else{r=undefined}if(w.getSvgHeight()!=undefined){q=w.getSvgHeight().valueOf()}else{q=undefined}h.addNode(v,C,B,p,s,D,y,c,o,r,q,a,d)}for(var z=0;z<b.links.length;z++){var p=b.links[z].getId().valueOf();var g=b.links[z].getSource();var t=h.nodes[g];var A=b.links[z].getTarget();var u=h.nodes[A];var f=b.links[z].getInteraction().valueOf();var m=b.links[z].isReversible().valueOf();h.links[z]=new LinkData(p,t,u,f,m)}return h},cloneSession:function(){var c=this.getSessionById("viz");var q=new NetworkVizSession();q.reset();var a,s,p,g,r,t,j,h,m,u,b,d,o,f;c.getD3Data().getNodes().forEach(function(y){if(y.getName()!=undefined){s=y.getName().valueOf()}else{s=undefined}if(y.getCompartment()!=undefined){p=y.getCompartment().valueOf()}else{p=undefined}if(y.getDbIdentifier()!=undefined){g=y.getDbIdentifier().valueOf()}else{g=undefined}if(y.getEC()!=undefined){r=y.getEC().valueOf()}else{r=undefined}if(y.getId()!=undefined){t=y.getId().valueOf()}else{t=undefined}if(y.getReactionReversibility()!=undefined&&y.getBiologicalType()=="reaction"){j=y.getReactionReversibility().valueOf()}else{j=undefined}if(y.getIsSideCompound()!=undefined){h=y.getIsSideCompound().valueOf()}else{h=undefined}if(y.getBiologicalType()!=undefined){m=y.getBiologicalType().valueOf()}else{m=undefined}if(y.isSelected()!=undefined){u=y.isSelected().valueOf()}else{u=undefined}if(y.getLabelVisible()!=undefined){b=y.getLabelVisible().valueOf()}else{b=undefined}if(y.getSvg()!=undefined){d=y.getSvg().valueOf()}else{d=undefined}if(y.getSvgWidth()!=undefined){o=y.getSvgWidth().valueOf()}else{o=undefined}if(y.getSvgHeight()!=undefined){f=y.getSvgHeight().valueOf()}else{f=undefined}if(y.getIdentifier()!=undefined){identif=y.getIdentifier().valueOf()}else{identif=undefined}var v=false;if(y.isDuplicated()!=undefined){v=y.isDuplicated().valueOf()}else{v=false}var w=q.d3Data.addNode(s,p,g,t,j,m,u,b,d,o,f,h,r,v,identif)});c.getD3Data().getLinks().forEach(function(v){var C=v.getId().valueOf();var y=v.getSource();var z=q.d3Data.nodes[c.getD3Data().getNodes().indexOf(y)];var A=v.getTarget();var w=q.d3Data.nodes[c.getD3Data().getNodes().indexOf(A)];var D=v.getInteraction().valueOf();var B=v.isReversible().valueOf();q.d3Data.addLink(C,z,w,D,B)});return q},getGeneralStyle:function(){return this.generalStyle},getMetaboliteStyle:function(){return this.metaboliteStyle},addSession:function(a){this.sessions[a.getId()]=a},getSessionsSet:function(){return this.sessions},getSessionById:function(a){return this.sessions[a]},getSessionsLength:function(){return this.sessions.length},removeSession:function(a){if(this.sessions[a]!=undefined){delete this.sessions[a]}},getInitialData:function(){return this.initialData},setInitialData:function(a){this.initialData=a},isLaunched:function(){return this.launched},setLaunched:function(a){this.launched=a},addComparedPanel:function(a){this.comparedPanels.push(a)},removeComparedPanel:function(c){var a=false;var b=0;while(!a){if(this.comparedPanels[b].getPanel()==c.getPanel()){this.comparedPanels.splice(b,1);a=true}b++}},getComparedPanelsLength:function(){return this.comparedPanels.length},getComparedPanelById:function(b){var a=null;this.comparedPanels.forEach(function(c){if(c.getPanel()==b){a=c}});return a},getOldCoodinates:function(){return this.oldCoodinates},addOldCoodinates:function(a){this.oldCoodinates.push(a)},resetOldCoodinates:function(){this.oldCoodinates=[]},getMappingsSet:function(){return this.mappings},addMapping:function(a){if(a.getId()==undefined){a.setId("IdMappingMetExploreViz"+this.mappings.length)}if(this.getMappingById(a.getId())!=null){this.addMapping(a)}else{this.mappings.push(a)}},resetMappings:function(a){this.mappings=[];_metExploreViz.getSessionById("viz").getD3Data().resetMapping()},removeMapping:function(a){var c=false;var b=0;while(!c&&b<this.mappings.length){if(this.mappings[b].getId()==a){this.mappings.splice(b,1);c=true}b++}},getMappingsLength:function(){return this.mappings.length},getMappingById:function(b){var a=null;this.mappings.forEach(function(c){if(c.getId()==b){a=c}});return a},getMappingByName:function(b){var a=null;this.mappings.forEach(function(c){if(c.getName()==b){a=c}});return a},isLinkedByTypeOfMetabolite:function(){return this.linkedByTypeOfMetabolite},setLinkedByTypeOfMetabolite:function(a){this.linkedByTypeOfMetabolite=a}};var NetworkVizSession=function(){this.active=false;this.activeMapping="";this.animated=false;this.colorMappings=[];this.displayNodeName="";this.duplicatedNodes=[];this.d3Data=new NetworkData();this.force=undefined;this.forceCentroids=undefined;this.groups=[];this.id="";this.linked=false;this.mapped="none";this.mappingDataType="";this.metabolites=[];this.nodesMap=[];this.reactions=[];this.resizable=false;this.selectedNodes=[]};NetworkVizSession.prototype={getGroupByKey:function(c){var b=metExploreD3.getGeneralStyle().isDisplayedConvexhulls();var a=null;if(b=="Compartments"){this.groups.forEach(function(d){if(d.key.identifier==c){a=d}})}else{this.groups.forEach(function(d){if(d.key==c){a=d}})}return a},getActiveMapping:function(){return this.activeMapping},setActiveMapping:function(a){this.activeMapping=a},getColorMappingsSet:function(){return this.colorMappings},getColorMappingById:function(b){var a=null;this.colorMappings.forEach(function(c){if(c.getName()==b){a=c}});return a},getColorMappingsSetLength:function(){return this.colorMappings.length},resetColorMapping:function(){this.colorMappings=[]},addColorMapping:function(b,a){this.colorMappings.push(new ColorMapping(b,a))},addSelectedNode:function(a){if(this.selectedNodes==undefined){this.selectedNodes=[]}this.selectedNodes.push(a)},addDuplicatedNode:function(a){if(this.duplicatedNodes==undefined){this.duplicatedNodes=[]}this.duplicatedNodes.push(a)},isAnimated:function(){return this.animated},setAnimated:function(a){this.animated=a},isActive:function(){return this.active},setActivity:function(a){this.active=a},addSelectedNodes:function(a){if(this.selectedNodes==undefined){this.selectedNodes=[]}for(n in a){this.selectedNodes.push(nodeId)}},addDuplicatedNodes:function(a){if(this.duplicatedNodes==undefined){this.duplicatedNodes=[]}for(n in a){this.duplicatedNodes.push(nodeId)}},reset:function(){this.emptyMetabolites();this.emptyReactions();this.selectedNodes=[];this.groups=[];this.nodesMap=[]},getId:function(){return this.id},setId:function(a){this.id=a},getScale:function(){return this.scale},setScale:function(a){this.scale=a},getDisplayNodeName:function(){return this.displayNodeName},setDisplayNodeName:function(a){this.displayNodeName=a},getMetaboliteStyle:function(){return this.metaboliteStyle},setMetaboliteStyle:function(a){this.metaboliteStyle=a},getMappingDataType:function(){return this.mappingDataType},setMappingDataType:function(a){this.mappingDataType=a},isResizable:function(){return this.resizable},setResizable:function(a){this.resizable=a},isMapped:function(){return this.mapped},setMapped:function(a){this.mapped=a},isLinked:function(){return this.linked},setLinked:function(a){this.linked=a},getLinkStyle:function(){return this.linkStyle},setLinkStyle:function(a){this.linkStyle=a},getReactionStyle:function(){return this.reactionStyle},setReactionStyle:function(a){this.reactionStyle=a},getD3Data:function(){return this.d3Data},setD3Data:function(a){this.d3Data=a},getForce:function(){return this.force},setForce:function(a){this.force=a},getForceCentroids:function(){return this.forceCentroids},setForceCentroids:function(a){this.forceCentroids=a},getNodesMap:function(){if(this.nodesMap==undefined){this.nodesMap=new Object()}return this.nodesMap},removeSelectedNode:function(a){var c=false;var b=0;while(!c){if(this.selectedNodes[b]==a){this.selectedNodes.splice(b,1);c=true}b++}},removeAllSelectedNodes:function(){this.selectedNodes=[]},getSelectedNodes:function(){return this.selectedNodes},removeDuplicatedNode:function(a){var c=false;var b=0;while(!c){if(this.duplicatedNodes[b]==a){this.duplicatedNodes.splice(b,1);c=true}b++}},removeAllDuplicatedNodes:function(){while(this.duplicatedNodes.length>0){this.duplicatedNodes.pop()}},getDuplicatedNodes:function(){return this.duplicatedNodes},getDuplicatedNodesCount:function(){return this.duplicatedNodes.length},removeReaction:function(a){var c=false;var b=0;while(!c){if(this.getReactions()[b].id==a){this.getReactions().splice(b,1);c=true}b++}},removeMetabolite:function(c){var a=false;var b=0;while(!a){if(this.getMetabolites()[b].id==c){this.getMetabolites().splice(b,1);a=true}b++}},getReactions:function(){return this.reactions},getMetabolites:function(){return this.metabolites},emptyReactions:function(){this.reactions=[]},emptyMetabolites:function(){this.metabolites=[]},setVizEngine:function(a){this.vizEngine=a},getVizEngine:function(){return this.vizEngine}};var LinkData=function(b,d,a,c,f){this.id=b;this.source=d;this.target=a;this.interaction=c;this.reversible=f};LinkData.prototype={equals:function(a){if(this.id!=a.id){return false}return true},isReversible:function(){return this.reversible},getId:function(){return this.id},setInteraction:function(a){this.interaction=a},getInteraction:function(){return this.interaction},getSource:function(){return this.source},getTarget:function(){return this.target},setSource:function(a){this.source=a},setTarget:function(a){this.target=a}};var NodeData=function(m,r,f,g,q,t,w,y,o,b,p,s,c,a,v,d,h,u,j){this.name=m;this.dbIdentifier=f;this.ec=g;this.id=q;this.identifier=d;this.reactionReversibility=t;this.isSideCompound=w;this.biologicalType=y;this.selected=o;this.duplicated=v;this.labelVisible=b;this.svg=p;this.svgWidth=s;this.svgHeight=c;if(h==undefined){this.pathways=[]}else{this.pathways=h}this.compartment=r;if(a==undefined){a=[]}this.mappingDatas=a;if(u==undefined){u=false}this.locked=u;this.label=j};NodeData.prototype={equals:function(a){var b=true;if(this.id!=a.id){b=false}return b},toString:function(){return this.id},isSelected:function(){return this.selected},setIsSelected:function(a){this.selected=a},isLocked:function(){return this.locked},setLocked:function(a){this.locked=a},isDuplicated:function(){return this.duplicated},setIsDuplicated:function(a){this.duplicated=a},getIsSideCompound:function(){return this.isSideCompound},setIsSideCompound:function(a){this.isSideCompound=a},getId:function(){return this.id},getIdentifier:function(){return this.identifier},getDbIdentifier:function(){return this.dbIdentifier},getBiologicalType:function(){return this.biologicalType},getLabelVisible:function(){return this.labelVisible},getReactionReversibility:function(){return this.reactionReversibility},setReactionReversibility:function(a){this.reactionReversibility=a},getName:function(){return this.name},setName:function(a){this.name=a},getLabel:function(){return this.label},setLabel:function(a){this.label=a},getId:function(){return this.id},getSvg:function(){return this.svg},getSvgHeight:function(){return this.svgHeight},getSvgWidth:function(){return this.svgWidth},getCompartment:function(){return this.compartment},getEC:function(){return this.ec},resetMapping:function(){this.mappingDatas=[]},addMappingData:function(a){this.mappingDatas.push(a)},removeMappingData:function(a){var b=[];this.mappingDatas.forEach(function(c){if(c.getMappingName()==a){b.push(c)}});b.forEach(function(d){var c=b.indexOf(d);if(c!=-1){b.splice(c,1)}})},getMappingDatasLength:function(){return this.mappingDatas.length},getMappingDatas:function(){return this.mappingDatas},getMappingDataByNameAndCond:function(b,c){var a=null;this.mappingDatas.forEach(function(d){if(d.getMappingName()==b&&d.getConditionName()==c){a=d}});return a},setMappingDataByNameAndCond:function(c,d,b){var a=null;this.mappingDatas.forEach(function(f){if(f.getMappingName()==c&&f.getConditionName()==d){a=f}});a.setMapValue(b)},getPathways:function(){return this.pathways},setPathways:function(a){this.pathways=a},addPathway:function(a){if(this.pathways.indexOf(a)==-1){this.pathways.push(a)}}};var NetworkData=function(a){this.id=a;this.biosource=undefined;this.nodes=[];this.links=[];this.compartments=[];this.pathways=[]};NetworkData.prototype={resetMapping:function(){this.nodes.forEach(function(a){a.resetMapping()})},removeMapping:function(a){this.nodes.forEach(function(b){b.removeMappingData(a)})},initNodeIndex:function(){tabNodes=this.nodes;this.nodes.forEach(function(a){a.index=tabNodes.indexOf(a)})},getNodes:function(){return this.nodes},setId:function(a){this.id=a},getId:function(){return this.id},copyData:function(a){this.nodes=a.getNodes();this.links=a.getLinks()},getNodesLength:function(){return this.nodes.length},getLinks:function(){return this.links},getCompartments:function(){return this.compartments},getCompartmentsLength:function(){return this.compartments.length},getCompartmentByName:function(c){var a=[];a=this.compartments;var b;for(i=0;i<a.length;i++){if(a[i].getName()==(c)){b=a[i];return b}}return null},sortCompartments:function(){this.compartments.sort(function(d,c){if(d.name>c.name){return 1}if(d.name<c.name){return -1}return 0})},addCompartment:function(b){if(this.compartments==undefined){this.compartments=[]}var a=new Compartment(this.compartments.length,b);this.compartments.push(a)},getPathways:function(){return this.pathways},getPathwaysLength:function(){return this.pathways.length},getPathwayByName:function(c){var a=[];a=this.pathways;var b;for(i=0;i<a.length;i++){if(a[i]==(c)){b=a[i];return b}}return null},sortPathways:function(){this.pathways.sort(function(d,c){if(d>c){return 1}if(d<c){return -1}return 0})},addPathway:function(a){if(this.pathways==undefined){this.pathways=[]}this.pathways.push(a)},containsNode:function(a){var c=[];var b=false;c=this.nodes;for(i=0;i<c.length;i++){if(c[i].getId()==(a)){b=true;break}}return b},getNodeById:function(a){var b=[];b=this.nodes;var c=undefined;for(i=0;i<b.length;i++){if(b[i].getId()==(a)){c=b[i];break}}return c},getNodeByName:function(b){var c=[];c=this.nodes;var a=undefined;for(i=0;i<c.length;i++){if(c[i].getName()==(b)){a=c[i];break}}return a},getNodeByDbIdentifier:function(a){var b=[];b=this.nodes;var c=undefined;for(i=0;i<b.length;i++){if(b[i].getDbIdentifier()==(a)){c=b[i];break}}return c},getNodeByMappedInchi:function(a){var c=[];c=this.nodes;var b=c.filter(function(d){return d.mappedInchi==(a)});if(b.length==0){b=undefined}return b},getLinkById:function(a){var b=[];b=this.links;var c;for(i=0;i<b.length;i++){if(b[i].getId()==(a)){c=b[i];break}}return c},getNode:function(a){return this.nodes[a]},getLink:function(a){return this.links[a]},addLink:function(a,d,g,b,f){if(this.links==undefined){this.links=[]}var c=new LinkData(a,d,g,b,f);this.links.push(c)},getDataNodes:function(){var a=[];this.nodes.forEach(function(b){a.push(b)});return a},addNodeCopy:function(a){this.nodes.push(a)},addNode:function(m,g,d,o,r,y,p,a,j,q,b,w,f,s,c,u,t,h){if(this.nodes==undefined){this.nodes=[]}var v=new NodeData(m,g,d,f,o,r,w,y,p,a,j,q,b,undefined,s,c,u,t,h);this.nodes.push(v);return v},getAdjLink:function(d){var a=[];var h=0;for(var b=0;b<this.links.length;b++){var c=this.links[b];var f=c.source;var g=c.target;if(d.id==f.id){a.push(c)}else{if(d.id==g.id){a.push(c)}}}return a},removeLink:function(a){for(k=0;k<this.links.length;k++){if(a.id==this.links[k].id){this.links.splice(k,1)}}},removeNode:function(a){var c=this.getAdjLink(a);if(c.length!=0){for(var f=0;f<c.length;f++){var b=c[f];this.removeLink(b)}}for(var d=0;d<this.nodes.length;d++){if(a.id==this.nodes[d].id){this.nodes.splice(d,1)}}},cloneObject:function(b){var a=this;b.links.forEach(function(c){a.addLink(c.id,c.source,c.target,c.interaction,c.reversible)});b.nodes.forEach(function(c){if(c.biologicalType=="reaction"){a.addNode(c.name,undefined,c.dbIdentifier,c.id,c.reactionReversibility,"reaction",false,true,undefined,undefined,undefined,undefined,c.ec,false,undefined,c.pathways,c.locked,c.label)}else{a.addNode(c.name,c.compartment,c.dbIdentifier,c.id,undefined,"metabolite",false,true,c.svg,c.svgWidth,c.svgHeight,c.isSideCompound,undefined,c.duplicated,c.identifier,c.pathways,c.locked,c.label)}if(c.mappingDatas!=undefined){if(c.mappingDatas.length>0){c.mappingDatas.forEach(function(f){var d=new MappingData(f.node,f.mappingName,f.conditionName,f.mapValue);a.nodes[a.nodes.length-1].addMappingData(d)})}}a.nodes[a.nodes.length-1].x=c.x;a.nodes[a.nodes.length-1].y=c.y})}};var GeneralStyle=function(h,m,b,p,q,o,g,j,a,d,c,f){this.websiteName=h;this.colorMinMappingContinuous=m;this.colorMaxMappingContinuous=b;this.maxReactionThreshold=p;this.displayLabelsForOpt=q;this.displayLinksForOpt=o;this.displayConvexhulls=g;this.displayCaption=a;this.eventForNodeInfo=d;this.loadButtonHidden=false;this.windowsAlertDisable=false;this.clustered=j};GeneralStyle.prototype={loadButtonIsHidden:function(){return this.loadButtonHidden},setLoadButtonIsHidden:function(a){this.loadButtonHidden=a;metExploreD3.fireEvent("graphPanel","setLoadButtonHidden")},windowsAlertIsDisable:function(){return this.windowsAlertDisable},setWindowsAlertDisable:function(a){this.windowsAlertDisable=a},getColorMinMappingContinuous:function(){return this.colorMinMappingContinuous},getColorMaxMappingContinuous:function(){return this.colorMaxMappingContinuous},setMaxColorMappingContinuous:function(a){this.colorMaxMappingContinuous=a},setMinColorMappingContinuous:function(a){this.colorMinMappingContinuous=a},getWebsiteName:function(){return this.websiteName},getReactionThreshold:function(){return this.maxReactionThreshold},setReactionThreshold:function(a){this.maxReactionThreshold=a},hasEventForNodeInfo:function(){return this.eventForNodeInfo},setEventForNodeInfo:function(a){this.eventForNodeInfo=a},isDisplayedLabelsForOpt:function(){return this.displayLabelsForOpt},setDisplayLabelsForOpt:function(a){this.displayLabelsForOpt=a},isDisplayedLinksForOpt:function(){return this.displayLinksForOpt},setDisplayLinksForOpt:function(a){this.displayLinksForOpt=a},isDisplayedConvexhulls:function(){return this.displayConvexhulls},setDisplayConvexhulls:function(a){this.displayConvexhulls=a},isDisplayedCaption:function(){return this.displayCaption},setDisplayCaption:function(a){this.displayCaption=a},useClusters:function(){return this.clustered},setUseClusters:function(a){this.clustered=a}};var LinkStyle=function(d,h,f,a,m,g,b,j,c){this.size=d;this.lineWidth=h;this.markerWidth=f;this.markerHeight=a;this.markerInColor=m;this.markerOutColor=g;this.markerStrokeColor=b;this.markerStrokeWidth=j;this.strokeColor=c};LinkStyle.prototype={getMarkerInColor:function(){return this.markerInColor},getLineWidth:function(){return this.lineWidth},getMarkerOutColor:function(){return this.markerOutColor},getSize:function(){return this.size},getMarkerWidth:function(){return this.markerWidth},getMarkerStrokeWidth:function(){return this.markerStrokeWidth},getMarkerHeight:function(){return this.markerHeight},getMarkerStrokeColor:function(){return this.markerStrokeColor},getStrokeColor:function(){return this.strokeColor},setMarkerInColor:function(a){this.markerInColor=a},setLineWidth:function(a){this.lineWidth=a},setMarkerOutColor:function(a){this.markerOutColor=a},setSize:function(a){this.size=a},setMarkerWidth:function(a){this.markerWidth=a},setMarkerStrokeWidth:function(a){this.markerStrokeWidth=a},setMarkerHeight:function(a){this.markerHeight=a},setMarkerStrokeColor:function(a){this.markerStrokeColor=a},setStrokeColor:function(a){this.strokeColor=a}};var MetaboliteStyle=function(j,b,g,f,d,h,a,c){this.height=j;this.width=b;this.rx=g;this.ry=f;this.strokeWidth=h;this.fontSize=d;this.label=a;this.strokeColor=c};MetaboliteStyle.prototype={getHeight:function(){return this.height},setHeight:function(a){this.height=a},getWidth:function(){return this.width},setWidth:function(a){this.width=a},getRX:function(){return this.rx},setRX:function(a){this.rx=a},getRY:function(){return this.ry},setRY:function(a){this.ry=a},getStrokeColor:function(){return this.strokeColor},setStrokeColor:function(a){this.strokeColor=a},getStrokeWidth:function(){return this.strokeWidth},setStrokeWidth:function(a){this.strokeWidth=a},getFontSize:function(){return this.fontSize},setFontSize:function(a){this.fontSize=a},getLabel:function(){return this.label},setLabel:function(a){this.label=a},getDisplayLabel:function(c,b){var a;if(c.getLabel()!=undefined){a=c.getLabel()}else{switch(b){case"name":a=c.getName();break;case"dbIdentifier":a=c.getDbIdentifier();break;default:a=c.getName()}if(a==undefined){a=c.getName()}}return a}};var ReactionStyle=function(j,b,g,f,a,d,c,h){this.height=j;this.width=b;this.rx=g;this.ry=f;this.label=a;this.strokeColor=c;this.fontSize=d;this.strokeWidth=h};ReactionStyle.prototype={getHeight:function(){return this.height},setHeight:function(a){this.height=a},getStrokeWidth:function(){return this.strokeWidth},setStrokeWidth:function(a){this.strokeWidth=a},getWidth:function(){return this.width},setWidth:function(a){this.width=a},getRX:function(){return this.rx},setRX:function(a){this.rx=a},getRY:function(){return this.ry},setRY:function(a){this.ry=a},getStrokeColor:function(){return this.strokeColor},setStrokeColor:function(a){this.strokeColor=a},getFontSize:function(){return this.fontSize},setFontSize:function(a){this.fontSize=a},getLabel:function(){return this.label},setLabel:function(a){this.label=a},getDisplayLabel:function(c,b){var a;if(c.getLabel()!=undefined){a=c.getLabel()}else{switch(b){case"ec":a=c.getEC();break;case"name":a=c.getName();break;case"dbIdentifier":a=c.getDbIdentifier();break;default:a=c.getName()}if(a==undefined){a=c.getName()}}return a}};var Compartment=function(b,a){this.id=b;this.identifier=a;this.name=a;this.color=""};Compartment.prototype={getIdentifier:function(){return this.identifier},getName:function(){return this.name},getColor:function(){return this.color},setColor:function(a){return this.color=a}};var Mapping=function(a,d,c,b){this.name=a;this.conditions=d;this.targetLabel=c;this.data=[];this.id=b};Mapping.prototype={getId:function(){return this.id},setId:function(a){this.id=a},getName:function(){return this.name},setName:function(a){this.name=a},getConditions:function(){return this.conditions},getTargetLabel:function(){return this.targetLabel},getConditionByName:function(a){var b=null;this.comparedPanels.forEach(function(c){if(c.name==a){b=c}});return b},addMap:function(a){this.data.push(a)},getData:function(){return this.data}};var MappingData=function(a,d,c,b){this.node=a;this.mappingName=d;this.conditionName=c;this.mapValue=b};MappingData.prototype={getNode:function(){return this.node},setNode:function(a){this.node=a},getMappingName:function(){return this.mappingName},getConditionName:function(){return this.conditionName},getMapValue:function(){return this.mapValue},setMapValue:function(a){this.mapValue=a}};var Scale=function(a){this.graphName=a};Scale.prototype={setScale:function(a,h,b,g,c,f,d){this.xScale=a;this.yScale=h;this.zoomScale=b;this.xScaleCompare=g;this.yScaleCompare=c;this.zoomScaleCompare=f;this.zoom=d},getGraphName:function(){return this.graphName},setGraphName:function(a){this.graphName=a},getXScale:function(){return this.xScale},setXScale:function(a){this.xScale=a},getYScale:function(){return this.yScale},setYScale:function(a){this.yScale=a},getZoomScale:function(){return this.zoomScale},setZoomScale:function(a){this.zoomScale=a},getXScaleCompare:function(){return this.xScaleCompare},setXScaleCompare:function(a){this.xScaleCompare=a},getYScaleCompare:function(){return this.yScaleCompare},setYScaleCompare:function(a){this.yScaleCompare=a},getZoomScaleCompare:function(){return this.zoomScaleCompare},setZoomScaleCompare:function(a){this.zoomScaleCompare=a},getZoom:function(){return this.zoom},setZoom:function(a){this.zoom=a}};var ColorMapping=function(a,b){this.name=a;this.value=b};ColorMapping.prototype={getName:function(){return this.name},setName:function(a){this.name=a},getValue:function(){return this.value},setValue:function(a){this.value=a}};var ComparedPanel=function(c,b,d,a){this.panel=c;this.visible=b;this.parent=d;this.title=a};ComparedPanel.prototype={getPanel:function(){return this.panel},setPanel:function(a){this.panel=a},isVisible:function(){return this.visible},setVisible:function(a){this.visible=a},getParent:function(){return this.parent},setParent:function(a){this.parent=a},getTitle:function(){return this.title},setTitle:function(a){this.title=a}};d3.selection.enter.prototype=d3.selection.prototype.addNodeForm=function(d,b,a,f,g,c){this.append("rect").attr("class",function(h){return h.getBiologicalType()}).attr("id",function(h){return h.getId()}).attr("identifier",function(h){return h.getId()}).attr("width",d).attr("height",b).attr("rx",a).attr("ry",f).attr("transform","translate(-"+d/2+",-"+b/2+")").style("stroke",g).style("stroke-width",c);this.append("rect").attr("class","fontSelected").attr("width",d).attr("height",b).attr("rx",a).attr("ry",f).attr("transform","translate(-"+d/2+",-"+b/2+")").style("fill-opacity","0").style("fill","#000")};d3.selection.prototype.setNodeForm=function(d,b,a,f,g,c){this.style("opacity",1).select("rect").attr("width",d).attr("height",b).attr("rx",a).attr("ry",f).attr("transform","translate(-"+d/2+",-"+b/2+")").style("stroke",g).style("stroke-width",c);this.select(".fontSelected").attr("width",d).attr("height",b).attr("rx",a).attr("ry",f).attr("transform","translate(-"+d/2+",-"+b/2+")").style("stroke-width",c)};metExploreD3.GraphLink={link:"",panelParent:"",delayedInitialisation:function(a){metExploreD3.GraphLink.panelParent=a},funcPathForFlux:function(g,m,c){var r,y,p,a;var h=_metExploreViz.getSessionById("viz").getActiveMapping();var f=_metExploreViz.getSessionById(m).isMapped();var z,w;var o=undefined;var t=undefined;d3.select("#"+m).select("#D3viz").select("#graphComponent").selectAll(".linklabel").attr("x",function(A){return(A.source.x+A.target.x)/2}).attr("y",function(A){return(A.source.y+A.target.y)/2});var j=_metExploreViz.getSessionById("viz").getColorMappingsSet();j.forEach(function(A){if(t==undefined|A.getName()>t){t=A.getName()}});var v=d3.scale.linear().domain([-t,0,0,t]).range([-7,-1,1,7]);function u(G,A){var C=metExploreD3.getMetaboliteStyle();var I=metExploreD3.getReactionStyle();z=a.getMappingDataByNameAndCond(h,f[0]);w=a.getMappingDataByNameAndCond(h,f[1]);var B=Math.sqrt(Math.pow(A.x-G.x,2)+Math.pow(A.y-G.y,2));var J=(A.x-G.x);var H=(A.y-G.y);var E=J/Math.abs(J);var D=H/Math.abs(H);if(c=="linkRev"){if(w==null){var F=0}else{if(isNaN(w.getMapValue())){var F=0}else{var F=v(w.getMapValue())}}if(F==-1||F==1){F=0}if(F<0){p=d(A,G,F)}else{p=s(G,A,F)}}else{if(z==null){var F=0}else{if(isNaN(z.getMapValue())){var F=0}else{var F=v(z.getMapValue())}}if(F==-1||F==1){F=0}if(F<0){p=s(A,G,F)}else{p=d(G,A,F)}}return p}function s(Q,R,U){var O=metExploreD3.getMetaboliteStyle();var K=metExploreD3.getReactionStyle();var J=Math.sqrt(Math.pow(R.x-Q.x,2)+Math.pow(R.y-Q.y,2));var A=(R.x-Q.x);var ab=(R.y-Q.y);var N=A/Math.abs(A);var L=ab/Math.abs(ab);if(Q.getBiologicalType()=="metabolite"){var ae=(Math.abs(J)*K.getWidth()/2)/Math.abs(A);var W=(Math.abs(J)*K.getHeight()/2)/Math.abs(ab);var E=(ae<W)?rT=ae:rt=W}else{var ae=(Math.abs(J)*O.getWidth()/2)/Math.abs(A);var W=(Math.abs(J)*O.getHeight()/2)/Math.abs(ab);var E=(ae<W)?rT=ae:rt=W}var X=Q.x+A*((J-E)/J);var T=Q.y+ab*((J-E)/J);var B=2*Math.abs(U);if(B<3){B=3}var V=Q.x+A*((J-E-B)/J);var G=Q.y+ab*((J-E-B)/J);var C=2.5*Math.abs(U);var af=(2.5*Math.abs(U))*1/2;if(C<2){C=2}var I=V+ab*(-C/J);var aa=G-A*(-C/J);var Z=V+ab*(-af/J);var F=G-A*(-af/J);var M=Math.abs(U);var H=Q.x+A*(M/J);var S=Q.y+ab*(M/J);var ad=H+ab*(-af/J);var Y=S-A*(-af/J);var P=Math.sqrt(Math.pow(X-Q.x,2)+Math.pow(T-Q.y,2));if(B+M>P){ad=Z;Y=F}var D=Q.x;var ac=Q.y;if(c=="linkRev"){return"M"+(D+ab*(-2/J))+","+(ac-A*(-2/J))+"L"+(X+ab*(-2/J))+","+(T-A*(-2/J))+"L"+(I+ab*(-2/J))+","+(aa-A*(-2/J))+"L"+(Z+ab*(-2/J))+","+(F-A*(-2/J))+"L"+(ad+ab*(-2/J))+","+(Y-A*(-2/J))+"L"+(D+ab*(-2/J))+","+(ac-A*(-2/J))+"Z"}else{return"M"+D+","+ac+"L"+X+","+T+"L"+I+","+aa+"L"+Z+","+F+"L"+ad+","+Y+"L"+Q.x+","+Q.y+"Z"}}function d(Q,R,U){var O=metExploreD3.getMetaboliteStyle();var K=metExploreD3.getReactionStyle();var J=Math.sqrt(Math.pow(R.x-Q.x,2)+Math.pow(R.y-Q.y,2));var A=(R.x-Q.x);var ab=(R.y-Q.y);var N=A/Math.abs(A);var L=ab/Math.abs(ab);if(Q.getBiologicalType()=="metabolite"){var ae=(Math.abs(J)*K.getWidth()/2)/Math.abs(A);var W=(Math.abs(J)*K.getHeight()/2)/Math.abs(ab);var E=(ae<W)?rT=ae:rt=W}else{var ae=(Math.abs(J)*O.getWidth()/2)/Math.abs(A);var W=(Math.abs(J)*O.getHeight()/2)/Math.abs(ab);var E=(ae<W)?rT=ae:rt=W}var X=Q.x+A*((J-E)/J);var T=Q.y+ab*((J-E)/J);var B=2*Math.abs(U);if(B<3){B=3}var V=Q.x+A*((J-E-B)/J);var G=Q.y+ab*((J-E-B)/J);var C=2.5*Math.abs(U);var af=(2.5*Math.abs(U))*1/2;if(C<2){C=2}var I=V+ab*(C/J);var aa=G-A*(C/J);var Z=V+ab*(af/J);var F=G-A*(af/J);var M=Math.abs(U);var H=Q.x+A*(M/J);var S=Q.y+ab*(M/J);var ad=H+ab*(af/J);var Y=S-A*(af/J);var P=Math.sqrt(Math.pow(X-Q.x,2)+Math.pow(T-Q.y,2));if(B+M>P){ad=Z;Y=F}var D=Q.x;var ac=Q.y;if(c=="linkRev"){return"M"+(D+ab*(2/J))+","+(ac-A*(2/J))+"L"+(X+ab*(2/J))+","+(T-A*(2/J))+"L"+(I+ab*(2/J))+","+(aa-A*(2/J))+"L"+(Z+ab*(2/J))+","+(F-A*(2/J))+"L"+(ad+ab*(2/J))+","+(Y-A*(2/J))+"L"+(D+ab*(2/J))+","+(ac-A*(2/J))+"Z"}else{return"M"+D+","+ac+"L"+X+","+T+"L"+I+","+aa+"L"+Z+","+F+"L"+ad+","+Y+"L"+Q.x+","+Q.y+"Z"}}if(g.getSource().x==undefined){var b=_metExploreViz.getSessionById(m).getD3Data();var q=b.getNodes();r=q[g.getSource()];y=q[g.getTarget()];if(r.getBiologicalType()=="reaction"){a=r}else{a=y}if(r.x!=undefined&&r.y!=undefined&&y.x!=undefined&&y.y!=undefined){p=u(r,y)}else{p="M0,0L0,0Z"}}else{r=g.getSource();y=g.getTarget();if(r.getBiologicalType()=="reaction"){a=r}else{a=y}if(r.x!=undefined&&r.y!=undefined&&y.x!=undefined&&y.y!=undefined){p=u(r,y)}else{p="M0,0L0,0Z"}}return p},funcPathForFlux3:function(m,f,o,a){var d,j,c;function b(s,P){var N=metExploreD3.getMetaboliteStyle();var J=metExploreD3.getReactionStyle();var G=Math.sqrt(Math.pow(P.x-s.x,2)+Math.pow(P.y-s.y,2));var t=(P.x-s.x);var r=(P.y-s.y);var p=t/Math.abs(t);var O=r/Math.abs(r);if(s.getBiologicalType()=="metabolite"){var B=(Math.abs(G)*J.getWidth()/2)/Math.abs(t);var Q=(Math.abs(G)*J.getHeight()/2)/Math.abs(r);var z=(B<Q)?rT=B:rt=Q}else{var B=(Math.abs(G)*N.getWidth()/2)/Math.abs(t);var Q=(Math.abs(G)*N.getHeight()/2)/Math.abs(r);var z=(B<Q)?rT=B:rt=Q}var u=s.x+t*((G-z)/G);var H=s.y+r*((G-z)/G);var v=5*Math.abs(a);var L=s.x+t*((G-z-v)/G);var E=s.y+r*((G-z-v)/G);widthArrow=2*Math.abs(a);var M=L+r*(widthArrow/G);var y=E-t*(widthArrow/G);var q=L+r*((2*widthArrow/3)/G);var C=E-t*((2*widthArrow/3)/G);var K=1.5*Math.abs(a);var I=s.x+t*(K/G);var F=s.y+r*(K/G);var D=2*Math.abs(a);var A=I+r*((2*D/3)/G);var w=F-t*((2*D/3)/G);return"M"+s.x+","+s.y+"L"+u+","+H+"L"+M+","+y+"L"+q+","+C+"L"+A+","+w+"L"+s.x+","+s.y+"Z"}if(m.getSource().x==undefined){var h=_metExploreViz.getSessionById(f).getD3Data();var g=h.getNodes();d=g[m.getSource()];j=g[m.getTarget()];if(d.x!=undefined&&d.y!=undefined&&j.x!=undefined&&j.y!=undefined){if(a<0){c=b(j,d)}else{c=b(d,j)}}else{c="M0,0L0,0Z"}}else{d=m.getSource();j=m.getTarget();if(d.x!=undefined&&d.y!=undefined&&j.x!=undefined&&j.y!=undefined){if(a<0){c=b(j,d)}else{c=b(d,j)}}else{c="M0,0L0,0Z"}}return c},funcPath1:function(c,a){var f,h,g;function j(J,M){var K=metExploreD3.getMetaboliteStyle();var G=metExploreD3.getReactionStyle();var A=Math.sqrt(Math.pow(M.x-J.x,2)+Math.pow(M.y-J.y,2));var L=(M.x-J.x);var I=(M.y-J.y);var D=L/Math.abs(L);var B=I/Math.abs(I);if(J.getBiologicalType()=="metabolite"){var z=(Math.abs(A)*K.getWidth()/2)/Math.abs(L);var F=(Math.abs(A)*K.getHeight()/2)/Math.abs(I);var y=(z<F)?rT=z:rt=F;var z=(Math.abs(A)*G.getWidth()/2)/Math.abs(L);var F=(Math.abs(A)*G.getHeight()/2)/Math.abs(I);var v=(z<F)?rT=z:rt=F}else{var z=(Math.abs(A)*G.getWidth()/2)/Math.abs(L);var F=(Math.abs(A)*G.getHeight()/2)/Math.abs(I);var y=(z<F)?rT=z:rt=F;var z=(Math.abs(A)*K.getWidth()/2)/Math.abs(L);var F=(Math.abs(A)*K.getHeight()/2)/Math.abs(I);var v=(z<F)?rT=z:rt=F}var p=J.x+L*(1-(A-y)/A);var w=J.y+I*(1-(A-y)/A);var N=J.x+L*((A-v)/A);var E=J.y+I*((A-v)/A);var m=5;var q=J.x+L*((A-v-m)/A);var r=J.y+I*((A-v-m)/A);var o=q+I*(3/A);var C=r-L*(3/A);var t=J.x+L*(1-(A-y-m)/A);var u=J.y+I*(1-(A-y-m)/A);var s=t-I*(3/A);var H=u+L*(3/A);return"M"+p+","+w+"L"+N+","+E+"L"+o+","+C+"L"+q+","+r+"L"+p+","+w+"L"+s+","+H+"L"+t+","+u+"Z"}function g(G,C){var B=metExploreD3.getMetaboliteStyle();var z=metExploreD3.getReactionStyle();var v=Math.sqrt(Math.pow(C.x-G.x,2)+Math.pow(C.y-G.y,2));var t=(C.x-G.x);var r=(C.y-G.y);var F=t/Math.abs(t);var E=r/Math.abs(r);if(G.getBiologicalType()=="metabolite"){var u=(Math.abs(v)*z.getWidth()/2)/Math.abs(t);var p=(Math.abs(v)*z.getHeight()/2)/Math.abs(r);var y=(u<p)?rT=u:rt=p}else{var u=(Math.abs(v)*B.getWidth()/2)/Math.abs(t);var p=(Math.abs(v)*B.getHeight()/2)/Math.abs(r);var y=(u<p)?rT=u:rt=p}var q=G.x+t*((v-y)/v);var m=G.y+r*((v-y)/v);var w=5;var o=G.x+t*((v-y-w)/v);var A=G.y+r*((v-y-w)/v);var D=o+r*(3/v);var s=A-t*(3/v);return"M"+G.x+","+G.y+"L"+q+","+m+"L"+D+","+s+"L"+o+","+A+"Z"}if(c.getSource().x==undefined){var d=_metExploreViz.getSessionById(a).getD3Data();var b=d.getNodes();f=b[c.getSource()];h=b[c.getTarget()];if(f.x!=undefined&&f.y!=undefined&&h.x!=undefined&&h.y!=undefined){if(f.getReactionReversibility()||h.getReactionReversibility()){g=j(f,h)}else{g=g(f,h)}}else{g="M0,0L0,0Z"}}else{f=c.getSource();h=c.getTarget();if(f.x!=undefined&&f.y!=undefined&&h.x!=undefined&&h.y!=undefined){if(f.getReactionReversibility()||h.getReactionReversibility()){g=j(f,h)}else{g=g(f,h)}}else{g="M0,0L0,0Z"}}return g},funcPath2:function(c,a){var f,h,g;function j(K,P){var N=metExploreD3.getMetaboliteStyle();var L=metExploreD3.getReactionStyle();var J=Math.sqrt(Math.pow(P.x-K.x,2)+Math.pow(P.y-K.y,2));var M=(P.x-K.x);var H=(P.y-K.y);var I=M/Math.abs(M);var G=H/Math.abs(H);if(K.getBiologicalType()=="metabolite"){var z=(Math.abs(J)*L.getWidth()/2)/Math.abs(M);var E=(Math.abs(J)*L.getHeight()/2)/Math.abs(H);var u=(z<E)?rT=z:rt=E}else{var z=(Math.abs(J)*N.getWidth()/2)/Math.abs(M);var E=(Math.abs(J)*N.getHeight()/2)/Math.abs(H);var u=(z<E)?rT=z:rt=E}var m=K.x+M*(1-(J-largeurNoeudS)/J);var v=K.y+H*(1-(J-largeurNoeudS)/J);var o=K.x+M*((J-u)/J);var A=K.y+H*((J-u)/J);var O=5;var r=K.x+M*((J-u-O)/J);var p=K.y+H*((J-u-O)/J);var F=r+H*(3/J);var y=p-M*(3/J);var D=r-H*(3/J);var w=p+M*(3/J);var t=K.x+M*(1-(J-largeurNoeudS-O)/J);var s=K.y+H*(1-(J-largeurNoeudS-O)/J);var C=t-H*(3/J);var q=s+M*(3/J);var B=t+H*(3/J);var Q=s-M*(3/J);return"M"+m+","+v+"L"+C+","+q+"L"+t+","+s+"L"+r+","+p+"L"+F+","+y+"L"+o+","+A+"L"+D+","+w+"L"+r+","+p+"L"+t+","+s+"L"+B+","+Q+"L"+m+","+v+"Z"}function g(H,F){var D=metExploreD3.getMetaboliteStyle();var B=metExploreD3.getReactionStyle();var v=Math.sqrt(Math.pow(F.x-H.x,2)+Math.pow(F.y-H.y,2));var t=(F.x-H.x);var r=(F.y-H.y);var G=t/Math.abs(t);var E=r/Math.abs(r);if(H.getBiologicalType()=="metabolite"){var A=(B.getWidth()+B.getHeight())/2/2;var C=(D.getHeight()+D.getWidth())/2/2}else{var A=(D.getHeight()+D.getWidth())/2/2;var C=(B.getWidth()+B.getHeight())/2/2}var q=H.x+t*((v-A)/v);var p=H.y+r*((v-A)/v);var w=5;var s=H.x+t*((v-A-w)/v);var y=H.y+r*((v-A-w)/v);var z=s+r*(3/v);var o=y-t*(3/v);var u=s-r*(3/v);var m=y+t*(3/v);return"M"+H.x+","+H.y+"L"+s+","+y+"L"+z+","+o+"L"+q+","+p+"L"+u+","+m+"L"+s+","+y+"Z"}if(c.getSource().x==undefined){var d=_metExploreViz.getSessionById(a).getD3Data();var b=d.getNodes();f=b[c.getSource()];h=b[c.getTarget()];if(f.x!=undefined&&f.y!=undefined&&h.x!=undefined&&h.y!=undefined){if(f.getReactionReversibility()||h.getReactionReversibility()){g=j(f,h)}else{g=g(f,h)}}else{g="M0,0L0,0Z"}}else{f=c.getSource();h=c.getTarget();if(f.x!=undefined&&f.y!=undefined&&h.x!=undefined&&h.y!=undefined){if(f.getReactionReversibility()||h.getReactionReversibility()){g=j(f,h)}else{g=g(f,h)}}else{g="M0,0L0,0Z"}}return g},funcPath3:function(c,a){var f,h,g;function j(s,K){var I=metExploreD3.getMetaboliteStyle();var G=metExploreD3.getReactionStyle();var F=Math.sqrt(Math.pow(K.x-s.x,2)+Math.pow(K.y-s.y,2));var w=(K.x-s.x);var t=(K.y-s.y);var q=w/Math.abs(w);var J=t/Math.abs(t);if(s.getBiologicalType()=="metabolite"){var y=(Math.abs(F)*G.getWidth()/2)/Math.abs(w);var r=(Math.abs(F)*G.getHeight()/2)/Math.abs(t);var H=(y<r)?rT=y:rt=r}else{var y=(Math.abs(F)*I.getWidth()/2)/Math.abs(w);var r=(Math.abs(F)*I.getHeight()/2)/Math.abs(t);var H=(y<r)?rT=y:rt=r}var A=5;var u=s.x+w*((F-H)/F);var p=s.y+t*((F-H)/F);var A=5;var v=s.x+w*((F-H-A)/F);var E=s.y+t*((F-H-A)/F);var z=s.x+w*((F-H-A-A)/F);var C=s.y+t*((F-H-A-A)/F);var D=v+t*(3/F);var o=E-w*(3/F);var B=v-t*(3/F);var m=E+w*(3/F);return"M"+s.x+","+s.y+"L"+z+","+C+"L"+D+","+o+"L"+B+","+m+"L"+u+","+p+"L"+D+","+o+"L"+B+","+m+"L"+z+","+C+"Z"}function g(I,G){var F=metExploreD3.getMetaboliteStyle();var D=metExploreD3.getReactionStyle();var B=Math.sqrt(Math.pow(G.x-I.x,2)+Math.pow(G.y-I.y,2));var v=(G.x-I.x);var t=(G.y-I.y);var H=v/Math.abs(v);var E=t/Math.abs(t);if(I.getBiologicalType()=="metabolite"){var u=(Math.abs(B)*D.getWidth()/2)/Math.abs(v);var r=(Math.abs(B)*D.getHeight()/2)/Math.abs(t);var C=(u<r)?rT=u:rt=r}else{var u=(Math.abs(B)*F.getWidth()/2)/Math.abs(v);var r=(Math.abs(B)*F.getHeight()/2)/Math.abs(t);var C=(u<r)?rT=u:rt=r}var q=I.x+v*((B-C)/B);var p=I.y+t*((B-C)/B);var y=5;var s=I.x+v*((B-C-y)/B);var A=I.y+t*((B-C-y)/B);var z=s+t*(3/B);var o=A-v*(3/B);var w=s-t*(3/B);var m=A+v*(3/B);return"M"+I.x+","+I.y+"L"+s+","+A+"L"+z+","+o+"L"+q+","+p+"L"+w+","+m+"L"+s+","+A+"Z"}if(c.getSource().x==undefined){var d=_metExploreViz.getSessionById(a).getD3Data();var b=d.getNodes();f=b[c.getSource()];h=b[c.getTarget()];if(f!=undefined&&h!=undefined){if(f.x!=undefined&&f.y!=undefined&&h.x!=undefined&&h.y!=undefined){if(f.getReactionReversibility()||h.getReactionReversibility()){g=j(f,h)}else{g=g(f,h)}}else{g="M0,0L0,0Z"}}else{g="M0,0L0,0Z"}}else{f=c.getSource();h=c.getTarget();if(f!=undefined&&h!=undefined){if(f.x!=undefined&&f.y!=undefined&&h.x!=undefined&&h.y!=undefined){if(f.getReactionReversibility()||h.getReactionReversibility()){g=j(f,h)}else{g=g(f,h)}}else{g="M0,0L0,0Z"}}else{g="M0,0L0,0Z"}}return g},funcPath4:function(c,a){var f,h,g;function j(Q,P){var N=metExploreD3.getMetaboliteStyle();var L=metExploreD3.getReactionStyle();var J=Math.sqrt(Math.pow(P.x-Q.x,2)+Math.pow(P.y-Q.y,2));var H=(P.x-Q.x);var E=(P.y-Q.y);var K=H/Math.abs(H);var I=E/Math.abs(E);if(Q.getBiologicalType()=="metabolite"){var z=(N.getHeight()+N.getWidth())/2/2;var m=Q.x+H*(1-(J-z)/J);var v=Q.y+E*(1-(J-z)/J);var M=5;var C=Q.x+H*(1-(J-z-M)/J);var u=Q.y+E*(1-(J-z-M)/J);var O=Q.x+H*(1-(J-z-M-M)/J);var r=Q.y+E*(1-(J-z-M-M)/J);var G=C-E*(3/J);var s=u+H*(3/J);var A=C+E*(3/J);var p=u-H*(3/J);g="M"+O+","+r+"L"+G+","+s+"L"+A+","+p+"L"+m+","+v+"L"+G+","+s+"L"+A+","+p+"L"+O+","+r+"L"+P.x+","+P.y+"Z"}else{var z=(N.getWidth()+N.getHeight())/2/2;var m=Q.x+H*(1-(J-z)/J);var v=Q.y+E*(1-(J-z)/J);var M=5;var o=Q.x+H*((J-z)/J);var B=Q.y+E*((J-z)/J);var M=5;var t=Q.x+H*((J-z-M)/J);var q=Q.y+E*((J-z-M)/J);var F=t+E*(3/J);var y=q-H*(3/J);var D=t-E*(3/J);var w=q+H*(3/J);var O=Q.x+H*((J-z-M-M)/J);var r=Q.y+E*((J-z-M-M)/J);g="M"+Q.x+","+Q.y+"L"+O+","+r+"L"+F+","+y+"L"+D+","+w+"L"+o+","+B+"L"+F+","+y+"L"+D+","+w+"L"+O+","+r+"Z"}return g}function g(O,N){var L=metExploreD3.getMetaboliteStyle();var J=metExploreD3.getReactionStyle();var H=Math.sqrt(Math.pow(N.x-O.x,2)+Math.pow(N.y-O.y,2));var M=(N.x-O.x);var I=(N.y-O.y);var K=M/Math.abs(M);var F=I/Math.abs(I);if(O.getBiologicalType()=="metabolite"){var v=(L.getHeight()+L.getWidth())/2/2;var r=O.x+M*(1-(H-v)/H);var w=O.y+I*(1-(H-v)/H);var m=5;var p=O.x+M*(1-(H-v-m)/H);var z=O.y+I*(1-(H-v-m)/H);var C=r-I*(3/H);var s=w+M*(3/H);var A=r+I*(3/H);var q=w-M*(3/H);return"M"+N.x+","+N.y+"L"+p+","+z+"L"+C+","+s+"L"+r+","+w+"L"+A+","+q+"L"+p+","+z+"Z"}else{var v=(L.getWidth()+L.getHeight())/2/2;var o=O.x+M*((H-v)/H);var G=O.y+I*((H-v)/H);var m=5;var t=O.x+M*((H-v-m)/H);var u=O.y+I*((H-v-m)/H);var E=t+I*(3/H);var D=u-M*(3/H);var y=t-I*(3/H);var B=u+M*(3/H);return"M"+O.x+","+O.y+"L"+t+","+u+"L"+E+","+D+"L"+o+","+G+"L"+y+","+B+"L"+t+","+u+"Z"}return g}if(c.getSource().x==undefined){var d=_metExploreViz.getSessionById(a).getD3Data();var b=d.getNodes();f=b[c.getSource()];h=b[c.getTarget()];if(f.x!=undefined&&f.y!=undefined&&h.x!=undefined&&h.y!=undefined){if(f.getReactionReversibility()||h.getReactionReversibility()){g=j(f,h)}else{g=g(f,h)}}else{g="M0,0L0,0Z"}}else{f=c.getSource();h=c.getTarget();if(f.x!=undefined&&f.y!=undefined&&h.x!=undefined&&h.y!=undefined){if(f.getReactionReversibility()||h.getReactionReversibility()){g=j(f,h)}else{g=g(f,h)}}else{g="M0,0L0,0Z"}}return g},funcPath5:function(c,a){var f,h,g;function j(J,U){var S=metExploreD3.getMetaboliteStyle();var Q=metExploreD3.getReactionStyle();var O=Math.sqrt(Math.pow(U.x-J.x,2)+Math.pow(U.y-J.y,2));var A=(U.x-J.x);var y=(U.y-J.y);var F=A/Math.abs(A);var E=y/Math.abs(y);if(J.getBiologicalType()=="metabolite"){var q=(Math.abs(O)*Q.getWidth()/2)/Math.abs(A);var v=(Math.abs(O)*Q.getHeight()/2)/Math.abs(y);var t=(q<v)?rT=q:rt=v}else{var q=(Math.abs(O)*S.getWidth()/2)/Math.abs(A);var v=(Math.abs(O)*S.getHeight()/2)/Math.abs(y);var t=(q<v)?rT=q:rt=v}var w=(S.getHeight()+S.getWidth())/2/2;var M=J.x+A*(1-(O-w)/O);var o=J.y+y*(1-(O-w)/O);var C=5;var p=J.x+A*(1-(O-w-C)/O);var V=J.y+y*(1-(O-w-C)/O);var I=J.x+A*(1-(O-w-C-C)/O);var L=J.y+y*(1-(O-w-C-C)/O);var B=p-y*(3/O);var R=V+A*(3/O);var z=p+y*(3/O);var P=V-A*(3/O);var N=J.x+A*((O-w)/O);var u=J.y+y*((O-w)/O);var m=J.x+A*((O-w-C)/O);var T=J.y+y*((O-w-C)/O);var K=m+y*(3/O);var s=T-A*(3/O);var H=m-y*(3/O);var r=T+A*(3/O);var D=J.x+A*((O-w-C-C)/O);var G=J.y+y*((O-w-C-C)/O);return"M"+M+","+o+"L"+B+","+R+"L"+z+","+P+"M"+D+","+G+"L"+K+","+s+"L"+H+","+r+"M"+I+","+L+"L"+B+","+R+"L"+z+","+P+"L"+M+","+o+"L"+B+","+R+"L"+z+","+P+"L"+I+","+L+"L"+D+","+G+"L"+K+","+s+"L"+H+","+r+"L"+N+","+u+"L"+K+","+s+"L"+H+","+r+"L"+D+","+G+"Z"}function g(N,O){var M=metExploreD3.getMetaboliteStyle();var K=metExploreD3.getReactionStyle();var I=Math.sqrt(Math.pow(O.x-N.x,2)+Math.pow(O.y-N.y,2));var J=(O.x-N.x);var G=(O.y-N.y);var L=J/Math.abs(J);var H=G/Math.abs(G);if(N.getBiologicalType()=="metabolite"){var t=(K.getWidth()+K.getHeight())/2/2;var w=(M.getHeight()+M.getWidth())/2/2}else{var t=(M.getHeight()+M.getWidth())/2/2;var w=(K.getWidth()+K.getHeight())/2/2}var p=N.x+J*(1-(I-w)/I);var v=N.y+G*(1-(I-w)/I);var q=N.x+J*((I-t)/I);var D=N.y+G*((I-t)/I);var P=5;var u=N.x+J*((I-t-P)/I);var r=N.y+G*((I-t-P)/I);var F=u+G*(3/I);var B=r-J*(3/I);var A=u-G*(3/I);var z=r+J*(3/I);var m=N.x+J*(1-(I-w-P)/I);var y=N.y+G*(1-(I-w-P)/I);var E=p-G*(3/I);var s=v+J*(3/I);var C=p+G*(3/I);var o=v-J*(3/I);return"M"+m+","+y+"L"+E+","+s+"L"+C+","+o+"L"+m+","+y+"L"+u+","+r+"L"+F+","+B+"L"+q+","+D+"L"+A+","+z+"L"+u+","+r+"Z"}if(c.getSource().x==undefined){var d=_metExploreViz.getSessionById(a).getD3Data();var b=d.getNodes();f=b[c.getSource()];h=b[c.getTarget()];if(f.x!=undefined&&f.y!=undefined&&h.x!=undefined&&h.y!=undefined){if(f.getReactionReversibility()||h.getReactionReversibility()){g=j(f,h)}else{g=g(f,h)}}else{g="M0,0L0,0Z"}}else{f=c.getSource();h=c.getTarget();if(f.x!=undefined&&f.y!=undefined&&h.x!=undefined&&h.y!=undefined){if(f.getReactionReversibility()||h.getReactionReversibility()){g=j(f,h)}else{g=g(f,h)}}else{g="M0,0L0,0Z"}}return g},funcPath6:function(c,a){var f,h,g;function j(K,P){var N=metExploreD3.getMetaboliteStyle();var L=metExploreD3.getReactionStyle();var J=Math.sqrt(Math.pow(P.x-K.x,2)+Math.pow(P.y-K.y,2));var M=(P.x-K.x);var H=(P.y-K.y);var I=M/Math.abs(M);var G=H/Math.abs(H);if(K.getBiologicalType()=="metabolite"){var z=(Math.abs(J)*L.getWidth()/2)/Math.abs(M);var E=(Math.abs(J)*L.getHeight()/2)/Math.abs(H);var u=(z<E)?rT=z:rt=E}else{var z=(Math.abs(J)*N.getWidth()/2)/Math.abs(M);var E=(Math.abs(J)*N.getHeight()/2)/Math.abs(H);var u=(z<E)?rT=z:rt=E}var m=K.x+M*(1-(J-largeurNoeudS)/J);var v=K.y+H*(1-(J-largeurNoeudS)/J);var o=K.x+M*((J-u)/J);var A=K.y+H*((J-u)/J);var O=5;var r=K.x+M*((J-u-O)/J);var p=K.y+H*((J-u-O)/J);var F=r+H*(3/J);var y=p-M*(3/J);var D=r-H*(3/J);var w=p+M*(3/J);var t=K.x+M*(1-(J-largeurNoeudS-O)/J);var s=K.y+H*(1-(J-largeurNoeudS-O)/J);var C=t-H*(3/J);var q=s+M*(3/J);var B=t+H*(3/J);var Q=s-M*(3/J);return"M"+m+","+v+"L"+C+","+q+"L"+B+","+Q+"M"+m+","+v+"L"+C+","+q+"L"+t+","+s+"L"+r+","+p+"L"+F+","+y+"L"+o+","+A+"L"+D+","+w+"L"+r+","+p+"L"+t+","+s+"L"+B+","+Q+"L"+m+","+v+"Z"}function g(H,F){var D=metExploreD3.getMetaboliteStyle();var B=metExploreD3.getReactionStyle();var v=Math.sqrt(Math.pow(F.x-H.x,2)+Math.pow(F.y-H.y,2));var t=(F.x-H.x);var r=(F.y-H.y);var G=t/Math.abs(t);var E=r/Math.abs(r);if(H.getBiologicalType()=="metabolite"){var A=(B.getWidth()+B.getHeight())/2/2;var C=(D.getHeight()+D.getWidth())/2/2}else{var A=(D.getHeight()+D.getWidth())/2/2;var C=(B.getWidth()+B.getHeight())/2/2}var q=H.x+t*((v-A)/v);var p=H.y+r*((v-A)/v);var w=5;var s=H.x+t*((v-A-w)/v);var y=H.y+r*((v-A-w)/v);var z=s+r*(3/v);var o=y-t*(3/v);var u=s-r*(3/v);var m=y+t*(3/v);return"M"+H.x+","+H.y+"L"+s+","+y+"L"+z+","+o+"L"+q+","+p+"L"+u+","+m+"L"+s+","+y+"Z"}if(c.getSource().x==undefined){var d=_metExploreViz.getSessionById(a).getD3Data();var b=d.getNodes();f=b[c.getSource()];h=b[c.getTarget()];if(f.x!=undefined&&f.y!=undefined&&h.x!=undefined&&h.y!=undefined){if(f.getReactionReversibility()||h.getReactionReversibility()){g=j(f,h)}else{g=g(f,h)}}else{g="M0,0L0,0Z"}}else{f=c.getSource();h=c.getTarget();if(f.x!=undefined&&f.y!=undefined&&h.x!=undefined&&h.y!=undefined){if(f.getReactionReversibility()||h.getReactionReversibility()){g=j(f,h)}else{g=g(f,h)}}else{g="M0,0L0,0Z"}}return g},refreshLink1:function(c,h,b,g){metExploreD3.GraphLink.panelParent="#"+c;var f=h.getD3Data();var a=20;var d=b.getMarkerWidth()/2;metExploreD3.GraphLink.link=d3.select("#"+c).select("#D3viz").select("#graphComponent").selectAll("path.link").data(f.getLinks()).enter().append("svg:path").attr("class",String).attr("d",function(j){return metExploreD3.GraphLink.funcPath1(j,c)}).attr("class","link").attr("fill-rule","evenodd").attr("fill",function(j){if(j.interaction=="out"){return b.getMarkerOutColor()}else{return b.getMarkerInColor()}}).style("stroke",b.getStrokeColor()).style("stroke-width",0.5).style("stroke-linejoin","bevel")},refreshLink:function(c,h,b,g){metExploreD3.GraphLink.panelParent="#"+c;var f=h.getD3Data();var a=20;var d=b.getMarkerWidth()/2;d3.select("#"+c).select("#D3viz").select("#graphComponent").selectAll(".linkGroup").remove();d3.select("#"+c).select("#D3viz").select("#graphComponent").selectAll("path.link").data(f.getLinks()).enter().insert("svg:g",":first-child").attr("class","linkGroup").append("svg:path").attr("class",String).attr("d",function(j){return metExploreD3.GraphLink.funcPath3(j,c,this.id,3)}).attr("class","link").attr("fill-rule","evenodd").attr("fill",function(j){if(j.interaction=="out"){return b.getMarkerOutColor()}else{return b.getMarkerInColor()}}).style("stroke",b.getStrokeColor()).style("stroke-width",0.5).style("opacity",1).style("stroke-dasharray",null);metExploreD3.GraphLink.link=d3.select("#"+c).select("#D3viz").select("#graphComponent").selectAll("path.link")},loadLinksForFlux:function(d,f,c,g,h,a){d3.select("#"+d).select("#D3viz").select("#graphComponent").selectAll(".linkGroup").remove();_metExploreViz.getSessionById(d).setMappingDataType("Flux");var b=d3.select("#"+d).select("#D3viz").select("#graphComponent").selectAll("path.link").data(f.getLinks()).enter().insert("svg:g",":first-child").attr("class","linkGroup");b.each(function(j){d3.select(this).append("svg:path").attr("class",String).attr("d",function(m){return metExploreD3.GraphLink.funcPathForFlux(m,d,this.id)}).attr("class","link").attr("fill-rule","evenodd").style("stroke",c.getStrokeColor()).style("stroke-width",0.5).on("mouseover",function(m){var A,w,q,z;if(m.getSource().getBiologicalType()=="reaction"){A=m.getSource();w=m.getTarget()}else{A=m.getTarget();w=m.getSource()}q=m.getSource();z=m.getTarget();var p=_metExploreViz.getSessionById("viz").getActiveMapping();var r=_metExploreViz.getMappingByName(p);var o=r.getConditions();var v=A.getMappingDataByNameAndCond(p,o[0]);var u=A.getMappingDataByNameAndCond(p,o[1]);var t=v;if(o[1]==a){t=u}if(t==null){var s=0}else{if(isNaN(t.getMapValue())){var s=0}else{var s=t.getMapValue()}if(s<0){z=m.getSource();q=m.getTarget()}}if(!document.getElementById("tooltip2").classList.contains("fixed")){var y="Name: "+m.id+"<br/><b>Source:</b> "+q.getName()+"<br/><b>Target:</b> "+z.getName()+((s!=undefined)?"<br/>Flux: "+Math.abs(s):"");y+="<br/>";document.getElementById("tooltip2").innerHTML=y;document.getElementById("tooltip2").classList.remove("hide")}}).on("mouseout",function(m){document.getElementById("tooltip2").classList.add("hide")});d3.select(this).append("svg:path").attr("class",String).attr("id","linkRev").attr("d",function(m){return metExploreD3.GraphLink.funcPathForFlux(m,d,this.id)}).attr("class","link").attr("fill-rule","evenodd").style("stroke",c.getStrokeColor()).style("stroke-width",0.5).on("mouseover",function(m){var A,w,q,z;if(m.getSource().getBiologicalType()=="reaction"){A=m.getSource();w=m.getTarget()}else{A=m.getTarget();w=m.getSource()}q=m.getSource();z=m.getTarget();var p=_metExploreViz.getSessionById("viz").getActiveMapping();var r=_metExploreViz.getMappingByName(p);var o=r.getConditions();var v=A.getMappingDataByNameAndCond(p,o[0]);var u=A.getMappingDataByNameAndCond(p,o[1]);var t=u;if(o[0]==a){t=v}if(t==null){var s=0}else{if(isNaN(t.getMapValue())){var s=0}else{var s=t.getMapValue()}if(s<0){z=m.getSource();q=m.getTarget()}}if(!document.getElementById("tooltip2").classList.contains("fixed")){var y="Name: "+m.id+"<br/><b>Source: </b>"+q.getName()+"<br/><b>Target: </b>"+z.getName()+((s!=undefined)?"<br/>Flux: "+Math.abs(s):"");y+="<br/>";document.getElementById("tooltip2").innerHTML=y;document.getElementById("tooltip2").classList.remove("hide")}}).on("mouseout",function(m){document.getElementById("tooltip2").classList.add("hide")})});if(h){d3.select("#"+d).select("#D3viz").select("#graphComponent").selectAll(".linkGroup").append("svg:text").text(function(o){var m,y,r,j;if(o.getSource().getBiologicalType()=="reaction"){m=o.getSource();y=o.getTarget()}else{m=o.getTarget();y=o.getSource()}r=o.getSource();j=o.getTarget();var v=_metExploreViz.getSessionById("viz").getActiveMapping();var s=_metExploreViz.getMappingByName(v);var p=s.getConditions();var w=m.getMappingDataByNameAndCond(v,p[0]);var u=m.getMappingDataByNameAndCond(v,p[1]);var t=w;if(p[1]==a){t=u}if(t==null){var q=0}else{if(isNaN(t.getMapValue())){var q=0}else{var q=t.getMapValue()}if(q<0){j=o.getSource();r=o.getTarget()}}return q}).style("font-size","6px").attr("class","linklabel").attr("transform","translate(-10, -15)").classed("hide",false).style("paint-order","stroke").style("stroke-width",1).style("stroke","77F").style("stroke-opacity","0.7").attr("dy",".4em").style("font-weight","bold").style("pointer-events","none").filter(function(q){var m,p,j,o;if(q.getSource().getBiologicalType()=="reaction"){p=q.getTarget()}else{p=q.getSource()}return p.getIsSideCompound()}).style("opacity",0.1);d3.select("#"+d).select("#D3viz").select("#graphComponent").selectAll(".linkGroup").append("svg:text").text(function(o){var m,y,r,j;if(o.getSource().getBiologicalType()=="reaction"){m=o.getSource();y=o.getTarget()}else{m=o.getTarget();y=o.getSource()}r=o.getSource();j=o.getTarget();var v=_metExploreViz.getSessionById("viz").getActiveMapping();var s=_metExploreViz.getMappingByName(v);var p=s.getConditions();var w=m.getMappingDataByNameAndCond(v,p[0]);var u=m.getMappingDataByNameAndCond(v,p[1]);var t=u;if(p[0]==a){t=w}if(t==null){var q=0}else{if(isNaN(t.getMapValue())){var q=0}else{var q=t.getMapValue()}if(q<0){j=o.getSource();r=o.getTarget()}}return q}).style("font-size","6px").attr("class","linklabel").attr("id","linkRev").attr("transform","translate(-10, 0)").classed("hide",false).style("paint-order","stroke").style("stroke-width",1).style("stroke","#AA0").style("stroke-opacity","0.7").attr("dy",".4em").style("font-weight","bold").style("pointer-events","none").filter(function(q){var m,p,j,o;if(q.getSource().getBiologicalType()=="reaction"){p=q.getTarget()}else{p=q.getSource()}return p.getIsSideCompound()}).style("opacity",0.1)}metExploreD3.GraphNetwork.tick("viz")},reloadLinks:function(c,a,d,b){d3.select("#"+c).select("#D3viz").select("#graphComponent").selectAll("path.link").data(a.getLinks()).enter().insert("path",":first-child").attr("class",String).attr("d",function(f){return metExploreD3.GraphLink.funcPath3(f,parent,this.id,3)}).attr("class","link").attr("fill-rule","evenodd").attr("fill",function(f){if(f.interaction=="out"){return d.getMarkerOutColor()}else{return d.getMarkerInColor()}}).style("stroke",d.getStrokeColor()).style("stroke-width",0.5).style("stroke-linejoin","bevel")},linkTypeOfMetabolite:function(){_metExploreViz.setLinkedByTypeOfMetabolite(true);var d="viz";var b=_metExploreViz.getSessionById("viz");if(b!=undefined){var a=b.getForce();if(a!=undefined){a.stop()}}var c=metExploreD3.createLoadMask("Link in progress...",d);if(c!=undefined){metExploreD3.showMask(c);metExploreD3.deferFunction(function(){var j={};var m={};var g={};var h={};d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(r){return r.getInteraction()!="hiddenForce"}).each(function(r){if(r.getInteraction()=="in"){if(j[r.getTarget()]==null){j[r.getTarget()]=[]}j[r.getTarget()][j[r.getTarget()].length]=r.getSource();if(h[r.getSource()]==null){h[r.getSource()]=[]}h[r.getSource()][h[r.getSource()].length]=r.getTarget()}else{if(m[r.getSource()]==null){m[r.getSource()]=[]}m[r.getSource()][m[r.getSource()].length]=r.getTarget();if(g[r.getTarget()]==null){g[r.getTarget()]=[]}g[r.getTarget()][g[r.getTarget()].length]=r.getSource()}});for(var p in j){var o=-1;j[p].forEach(function(r){o++;j[p].forEach(function(s){if(r!=s&&r!=undefined){metExploreD3.GraphLink.addHiddenLinkInDrawing(r+" -- "+s,r,s,"viz")}});delete j[p][o]})}for(var p in m){var o=-1;m[p].forEach(function(r){o++;m[p].forEach(function(s){if(r!=s&&r!=undefined){metExploreD3.GraphLink.addHiddenLinkInDrawing(r+" -- "+s,r,s,"viz")}});delete m[p][o]})}for(var p in g){var o=-1;g[p].forEach(function(r){o++;g[p].forEach(function(s){if(r!=s&&r!=undefined){metExploreD3.GraphLink.addHiddenLinkInDrawing(r+" -- "+s,r,s,"viz")}});delete g[p][o]})}for(var p in h){var o=-1;h[p].forEach(function(r){o++;h[p].forEach(function(s){if(r!=s&&r!=undefined){metExploreD3.GraphLink.addHiddenLinkInDrawing(r+" -- "+s,r,s,"viz")}});delete h[p][o]})}metExploreD3.hideMask(c);var q=metExploreD3.GraphNetwork.isAnimated(b.getId());if(q=="true"){var f=b.getForce();if(f!=undefined){if((metExploreD3.GraphNetwork.isAnimated(b.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(b.getId())==null)){f.start()}}}},100)}},removeLinkTypeOfMetabolite:function(){_metExploreViz.setLinkedByTypeOfMetabolite(false);var d="viz";var b=_metExploreViz.getSessionById("viz");if(b!=undefined){var a=b.getForce();if(a!=undefined){a.stop()}}var c=metExploreD3.createLoadMask("Remove hidden link in progress...",d);if(c!=undefined){metExploreD3.showMask(c);metExploreD3.deferFunction(function(){metExploreD3.GraphLink.removeHiddenLinkInDrawing("viz");metExploreD3.hideMask(c);var f=metExploreD3.GraphNetwork.isAnimated(b.getId());if(f=="true"){var g=b.getForce();if(g!=undefined){if((metExploreD3.GraphNetwork.isAnimated(b.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(b.getId())==null)){g.start()}}}},100)}},addHiddenLinkInDrawing:function(b,f,a,g){var d=_metExploreViz.getSessionById(g);var j=d.getD3Data();j.addLink(b,f,a,"hiddenForce",false);var c=metExploreD3.getMetaboliteStyle();var m=metExploreD3.getLinkStyle();var h=d.getForce();link=d3.select("#"+g).select("#graphComponent").selectAll("path.link").data(h.links(),function(o){return o.source.id+"-"+o.target.id}).enter().insert("path",":first-child").attr("class","link").style("stroke",m.getStrokeColor()).style("opacity",0)},removeHiddenLinkInDrawing:function(c){var a=_metExploreViz.getSessionById(c);var g=a.getD3Data();var b=[];var f=a.getForce();var d=d3.select("#"+c).select("#graphComponent").selectAll("path.link").filter(function(h){return h.getInteraction()=="hiddenForce"}).each(function(h){b.push(h)}).remove();setTimeout(function(){for(i=0;i<b.length;i++){var j=b[i];g.removeLink(j);var h=f.links().indexOf(j);if(h!=-1){f.links().splice(h,1)}}},100)},tick:function(b,a){var c=_metExploreViz.getSessionById(b).getMappingDataType()=="Flux";if(c){funcPath=metExploreD3.GraphLink.funcPathForFlux}else{funcPath=metExploreD3.GraphLink.funcPath3}d3.select("#"+metExploreD3.GraphNode.panelParent).select("#D3viz").selectAll("path.convexhull").attr("d",metExploreD3.GraphNode.groupPath).attr("transform",d3.select("#"+b).select("#D3viz").select("#graphComponent").attr("transform"));d3.select("#"+b).select("#D3viz").select("#graphComponent").selectAll("path.link").attr("d",function(d){return funcPath(d,b,this.id)}).style("stroke-linejoin","bevel")},displayConvexhulls:function(d){var a=_metExploreViz.getGeneralStyle();var b=d3.select("#"+d).select("#D3viz").selectAll("path.convexhull");var c=a.isDisplayedConvexhulls();if(!c){b.remove()}else{if(b[0].length==0){metExploreD3.GraphNode.loadPath(d,c)}b.attr("d",metExploreD3.GraphNode.groupPath).attr("transform",d3.select("#"+d).select("#D3viz").select("#graphComponent").attr("transform"))}}};metExploreD3.GraphNode={node:"",_MyThisGraphNode:"",panelParent:"",activePanel:"",taskClick:"",charKey:"",ctrlKey:"",groups:"",groupPath:"",groupFill:"",dblClickable:false,delayedInitialisation:function(a){metExploreD3.GraphNode.panelParent=a;_MyThisGraphNode=metExploreD3.GraphNode;activePanel=metExploreD3.GraphNode},selectNeighbours:function(b,a){d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(c){return c.getSource()==b||c.getTarget()==b}).each(function(c){if(c.getSource()==b){if(!c.getTarget().isSelected()){_MyThisGraphNode.selection(c.getTarget(),a)}}else{if(!c.getSource().isSelected()){_MyThisGraphNode.selection(c.getSource(),a)}}})},changeName:function(g){var a=metExploreD3.getMetaboliteStyle();var b=metExploreD3.getReactionStyle();var f;d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").each(function(h){if(g.querySelector("rect.metabolite")!=null){if(h.getId()==g.querySelector("rect.metabolite").id){f=h}}else{if(g.querySelector("rect.reaction")!=null){if(h.getId()==g.querySelector("rect.reaction").id){f=h}}}});if(f){if(f.getBiologicalType()=="metabolite"){var d=a.getDisplayLabel(f,a.getLabel())}else{var d=b.getDisplayLabel(f,b.getLabel())}}if(d){var c=metExploreD3.displayPrompt("New label","Enter new label",function(h,j){if(j!=null&&j!=""&&h=="ok"){d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(m){return f.getId()==m.getId()}).each(function(m){m.setLabel(j);d3.select(this).select("text").remove();metExploreD3.GraphNode.addText(m,"viz")})}})}},dragstart:function(g,b){_MyThisGraphNode.activePanel=d3.event.sourceEvent.target.viewportElement.parentNode.id;if(_MyThisGraphNode.activePanel==""||_MyThisGraphNode.activePanel.search("node")!=-1){_MyThisGraphNode.activePanel=d3.event.sourceEvent.target.parentNode.viewportElement.parentNode.id}d3.event.sourceEvent.stopPropagation();var f=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(f!=undefined){if(d3.event.sourceEvent.target.classList.contains("backgroundlocker")||d3.event.sourceEvent.target.classList.contains("iconlocker")){if(d3.event.sourceEvent.button!=2){g.setLocked(!g.isLocked());g.fixed=g.isLocked();metExploreD3.GraphNode.node.filter(function(d){return d==g}).select(".locker").classed("hide",false).select(".iconlocker").attr("xlink:href",function(d){if(d.isLocked()){return"resources/icons/lock_font_awesome.svg"}else{return"resources/icons/unlock_font_awesome.svg"}})}}else{if(d3.event.sourceEvent.button==2){if(!g.isSelected()){_MyThisGraphNode.selection(g,_MyThisGraphNode.activePanel);if(_MyThisGraphNode.charKey==78&&g.isSelected()){_MyThisGraphNode.selectNeighbours(g,_MyThisGraphNode.activePanel)}}}else{_MyThisGraphNode.selection(g,_MyThisGraphNode.activePanel);if(_MyThisGraphNode.charKey==78&&g.isSelected()){_MyThisGraphNode.selectNeighbours(g,_MyThisGraphNode.activePanel)}}}d3.selectAll("#D3viz").style("cursor","move");var c=f.getForce();c.stop();if(f.isLinked()){var j=_metExploreViz.getSessionsSet();for(var h in j){if(j[h].isLinked()&&_MyThisGraphNode.activePanel!=j[h].getId()){var a=j[h].getForce();a.stop()}}}}},refreshStyleOfReaction:function(){var a=metExploreD3.getReactionStyle();var b=d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(c){return c.getBiologicalType()=="reaction"});b.select("text").remove();b.setNodeForm(a.getWidth(),a.getHeight(),a.getRX(),a.getRY(),a.getStrokeColor(),a.getStrokeWidth());b.each(function(c){metExploreD3.GraphNode.addText(c,"viz")})},refreshStyleOfMetabolite:function(){var b=metExploreD3.getMetaboliteStyle();var h=d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(p){return p.getBiologicalType()=="metabolite"});h.select("text").remove();h.filter(function(p){return !p.getIsSideCompound()}).setNodeForm(b.getWidth(),b.getHeight(),b.getRX(),b.getRY(),undefined,b.getStrokeWidth());h.filter(function(p){return p.getIsSideCompound()}).setNodeForm(b.getWidth()/2,b.getHeight()/2,b.getRX()/2,b.getRY()/2,undefined,b.getStrokeWidth()/2);var d=Math.min(b.getWidth(),b.getHeight());h.each(function(p){metExploreD3.GraphNode.addText(p,"viz")});h.select(".structure_metabolite").attr("viewBox",function(p){console.log(d);return"0 0 "+d+" "+d}).attr("width",d*8/10+"px").attr("height",d*8/10+"px").attr("x",(-d/2)+(d*1/10)).attr("preserveAspectRatio","xMinYMin").attr("y",(-d/2)+(d*1/10));var c=_metExploreViz.getSessionById("viz");var f=c.getForce();var b=metExploreD3.getMetaboliteStyle();var m=metExploreD3.getReactionStyle();var o=Math.max(m.getWidth(),m.getHeight());var a=Math.max(b.getWidth(),b.getHeight());var g=Math.max(o,a);var j=metExploreD3.getLinkStyle();f.linkDistance(function(p){if(p.getSource().getIsSideCompound()||p.getTarget().getIsSideCompound()){return j.getSize()/2+g}else{return j.getSize()+g}})},moveNode:function(b,a){d3.select("#"+a).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(c){if(_MyThisGraphNode.ctrlKey){return c.isSelected()}else{return b.getId()==c.getId()}}).each(function(c){c.px+=d3.event.dx;c.py+=d3.event.dy;c.x+=d3.event.dx;c.y+=d3.event.dy})},dragmove:function(g,b){if(!g.isSelected()&&!(d3.event.sourceEvent.target.classList.contains("backgroundlocker")||d3.event.sourceEvent.target.classList.contains("iconlocker"))){_MyThisGraphNode.selection(g,_MyThisGraphNode.activePanel);if(_MyThisGraphNode.charKey==78&&g.isSelected()){_MyThisGraphNode.selectNeighbours(g,_MyThisGraphNode.activePanel)}}_MyThisGraphNode.moveNode(g,_MyThisGraphNode.activePanel);_MyThisGraphNode.tick(_MyThisGraphNode.activePanel);var f=metExploreD3.getScaleById(_MyThisGraphNode.activePanel);metExploreD3.GraphLink.tick(_MyThisGraphNode.activePanel,f);var c=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(c.isLinked()){var j=_metExploreViz.getSessionsSet();for(var h in j){if(j[h].isLinked()&&_MyThisGraphNode.activePanel!=j[h].getId()){var a=metExploreD3.getScaleById(j[h].getId());_MyThisGraphNode.moveNode(g,j[h].getId());_MyThisGraphNode.tick(j[h].getId());metExploreD3.GraphLink.tick(j[h].getId(),a)}}}},dragend:function(m,f){var o=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);var c=_metExploreViz.getSessionById("viz");if(o!=undefined){if(o.isLinked()){var j=_metExploreViz.getSessionsSet();for(var q in j){if(j[q].isLinked()&&_MyThisGraphNode.activePanel!=j[q].getId()){var p=metExploreD3.GraphNetwork.isAnimated(c.getId());if(p=="true"){var h=c.getForce();if((metExploreD3.GraphNetwork.isAnimated(_MyThisGraphNode.panelParent)=="true")||(metExploreD3.GraphNetwork.isAnimated(_MyThisGraphNode.panelParent)==null)){h.resume()}}_MyThisGraphNode.tick(j[q].getId());var g=metExploreD3.getScaleById(j[q].getId());metExploreD3.GraphLink.tick(j[q].getId(),g)}}}else{var b=metExploreD3.GraphNetwork.isAnimated(_MyThisGraphNode.activePanel);if(b=="true"){var a=o.getForce();if((metExploreD3.GraphNetwork.isAnimated(_MyThisGraphNode.activePanel)=="true")||(metExploreD3.GraphNetwork.isAnimated(_MyThisGraphNode.activePanel)==null)){a.resume()}}_MyThisGraphNode.tick(_MyThisGraphNode.activePanel);var r=metExploreD3.getScaleById(_MyThisGraphNode.activePanel);metExploreD3.GraphLink.tick(_MyThisGraphNode.activePanel,r)}d3.selectAll("#D3viz").style("cursor","default")}},fixNodeOnRefresh:function(a,b){var c=_metExploreViz.getSessionById(b);if(c!=undefined){if(a.isSelected()){_MyThisGraphNode.selectNode(a,b)}else{_MyThisGraphNode.unSelectNode(a,b)}setTimeout(function(){if(c.isLinked()){var f=_metExploreViz.getSessionsSet();for(var d in f){if(f[d].isLinked()&&b!=f[d].getId()){d3.select("#"+f[d].getId()).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(g){return a.getId()==g.getId()}).each(function(g){g.setIsSelected(!g.isSelected())});if(a.isSelected()){_MyThisGraphNode.selectNode(a,f[d].getId())}else{_MyThisGraphNode.unSelectNode(a,f[d].getId())}}}}},200)}},selection:function(a,b){var c=_metExploreViz.getSessionById(b);if(c!=undefined){d3.select("#"+b).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(d){return a.getId()==d.getId()}).each(function(d){d.setIsSelected(!d.isSelected())});if(a.isSelected()){_MyThisGraphNode.selectNode(a,b)}else{_MyThisGraphNode.unSelectNode(a,b)}setTimeout(function(){if(c.isLinked()){var f=_metExploreViz.getSessionsSet();for(var d in f){if(f[d].isLinked()&&b!=f[d].getId()){d3.select("#"+f[d].getId()).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(g){return a.getId()==g.getId()}).each(function(g){g.setIsSelected(!g.isSelected())});if(a.isSelected()){_MyThisGraphNode.selectNode(a,f[d].getId())}else{_MyThisGraphNode.unSelectNode(a,f[d].getId())}}}}},200)}},selectNode:function(m,j){var a=metExploreD3.getReactionStyle();var g=_metExploreViz.getSessionById(j);var f=metExploreD3.getMetabolitesSet();var h=metExploreD3.getReactionsSet();var c="<b>Name:</b> "+m.getName()+"<br/><b>Biological type:</b> "+m.getBiologicalType()+((m.getCompartment()!=undefined)?"<br/><b>Compartment:</b> "+m.getCompartment():"")+((m.getDbIdentifier()!=undefined)?"<br/><b>Database identifier:</b> "+m.getDbIdentifier():"")+((m.getEC()!=undefined)?"<br/><b>EC number:</b> "+m.getEC():"")+((m.getReactionReversibility()!=undefined)?"<br/><b>Reaction reversibility:</b> "+m.getReactionReversibility():"")+((m.getIsSideCompound()!=undefined)?"<br/><b>SideCompound:</b> "+m.getIsSideCompound():"")+((m.getMappingDatasLength()!=0)?((m.getMappingDatasLength()==1)?"<br/><b>Mapping:</b><br/><table style='width:100%; margin-left: 30px; padding-right: 30px;'>":"<br/><b>Mappings:</b><br/><table style='width:100%; margin-left: 30px; padding-right: 30px;'>"):"");m.getMappingDatas().forEach(function(d){c+="<tr><td>"+d.getMappingName()+"</td><td>"+d.getConditionName()+"</td><td>"+d.getMapValue()+"</td></tr>"});c+="</table>";if(m.getSvg()!=""&&m.getSvg()!=undefined&&m.getSvg()!="undefined"){c+='<br/><img src="resources/images/structure_metabolite/'+m.getSvg()+'"/>'}document.getElementById("tooltip2").innerHTML=c;document.getElementById("tooltip2").classList.remove("hide");document.getElementById("tooltip2").classList.add("fixed");d3.select("#"+j).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(d){return m.getId()==d.getId()}).each(function(d){g.addSelectedNode(d.getId());if(d.getBiologicalType()=="reaction"){d3.select(this).select("text").style("fill","white")}});var b=d3.select("#"+j).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(d){return m.getId()==d.getId()}).select(".fontSelected").style("fill-opacity","0.4");_MyThisGraphNode.addText(m,j)},unSelectNode:function(b,g){var a=_metExploreViz.getSessionById(g);var f=metExploreD3.getMetabolitesSet();var c=metExploreD3.getReactionsSet();d3.select("#"+g).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(d){return b.getId()==d.getId()}).select(".fontSelected").style("fill-opacity","0");d3.select("#"+g).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(d){return b.getId()==d.getId()}).each(function(h){a.removeSelectedNode(h.getId());if(h.getBiologicalType()=="reaction"){var d;var j=metExploreD3.GraphUtils.chooseTextColor(this.style.getPropertyValue("fill"));d3.select(this).select("text").style("fill",j)}})},addText:function(f,b){var c=metExploreD3.getMetaboliteStyle();var h=metExploreD3.getReactionStyle();var a=_metExploreViz.getSessionById("viz");if(f.getBiologicalType()=="metabolite"){var g=Math.min(c.getWidth(),c.getHeight());if(d3.select("#"+b).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(d){return f.getId()==d.getId()}).select("text")==""){d3.select("#"+b).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(d){return f.getId()==d.getId()}).append("svg:text").attr("fill","black").attr("class",function(d){return d.getBiologicalType()}).each(function(q){var m=d3.select(this);var d=c.getDisplayLabel(q,c.getLabel());d=d.split(" ");m.text("");for(var j=0;j<d.length;j++){var o=$("<div/>").html(d[j]).text();var p=m.append("tspan").text(o);if(j>0){p.attr("x",0).attr("dy","5")}}}).style("font-size",c.getFontSize()).style("paint-order","stroke").style("stroke-width",1).style("stroke","white").style("stroke-opacity","0.7").attr("dy",".4em").style("font-weight","bold").style("pointer-events","none").attr("y",g/2+3)}if(f.getSvg()!="undefined"&&f.getSvg()!=undefined&&f.getSvg()!=""){if(d3.select("#"+b).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(d){return f.getId()==d.getId()}).select("image").empty()){d3.select("#"+b).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(d){return f.getId()==d.getId()}).append("svg").attr("viewBox",function(d){return"0 0 "+g+" "+g}).attr("width",g*8/10+"px").attr("height",g*8/10+"px").attr("x",(-g/2)+(g*1/10)).attr("preserveAspectRatio","xMinYMin").attr("y",(-g/2)+(g*1/10)).attr("class","structure_metabolite").append("image").attr("xlink:href",function(d){return"resources/images/structure_metabolite/"+d.getSvg()}).attr("width","100%").attr("height","100%")}}}if(f.getLabelVisible()==true&&f.getBiologicalType()=="reaction"){if(d3.select("#"+b).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(d){return f.getId()==d.getId()}).text()==""){d3.select("#"+b).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(d){return f.getId()==d.getId()}).append("svg:text").attr("fill","black").attr("class",function(d){return d.getBiologicalType()}).text(function(j){var d=$("<div/>").html(h.getDisplayLabel(j,h.getLabel())).text();if(d==""){var d=$("<div/>").html(h.getDisplayLabel(j,h.getLabel())).text()}return d}).style("font-size",function(d){if(h.getDisplayLabel(d,h.getLabel())=="NA"){return 6}return Math.min(h.getWidth(),(h.getWidth()-h.getWidth()/10)/this.getComputedTextLength()*10)+"px"}).style("font-weight","bold").attr("dy",".3em")}}},addTextAllPanels:function(){var b=_metExploreViz.getSessionsSet();for(var a in b){d3.select("#"+b[a].getId()).select("#D3viz").select("#graphComponent").selectAll("g.node").each(function(c){metExploreD3.GraphNode.addText(c,b[a].getId())})}},removeText:function(a){d3.select("#"+a).select("#D3viz").select("#graphComponent").selectAll("g.node").select("text").remove()},removeTextAllPanels:function(b){var a=_metExploreViz.getSessionsSet();for(var c in a){metExploreD3.GraphNode.removeText(a[c].getId())}},searchNode:function(b){var c=b.toUpperCase();var d=d3.select("#viz").select("#D3viz").select("#graphComponent");var a=d.selectAll("g.node").filter(function(h,f){var p=false;if(h.getName()!=undefined){p=h.getName().toUpperCase().indexOf(c)>-1}if(h.getLabel()!=undefined){p=h.getLabel().toUpperCase().indexOf(c)>-1}var g=false;if(h.getEC()!=undefined){g=h.getEC().toUpperCase().indexOf(c)>-1}var o=false;if(h.getDbIdentifier()!=undefined){o=h.getDbIdentifier().toUpperCase().indexOf(c)>-1}var m=false;if(h.getCompartment()!=undefined){m=h.getCompartment().toUpperCase().indexOf(c)>-1}var j=false;if(h.getBiologicalType()!=undefined){j=h.getBiologicalType().toUpperCase().indexOf(c)>-1}return p||g||o||m||j});if(a.size()==0){metExploreD3.displayMessage("Warning",'The node "'+b+"\" doesn't exist.")}else{a.each(function(f){if(!f.isSelected()){_MyThisGraphNode.selection(f,"viz")}})}},refreshNode:function(q){var d=metExploreD3.getReactionStyle();var o=metExploreD3.getMetaboliteStyle();var r=metExploreD3.getGeneralStyle();var p=_metExploreViz.getSessionById(q);var m=_metExploreViz.getSessionById("viz");d3.select("body").on("keydown",function(){_MyThisGraphNode.charKey=d3.event.keyCode;_MyThisGraphNode.ctrlKey=d3.event.ctrlKey;if(_MyThisGraphNode.charKey==65&&_MyThisGraphNode.ctrlKey){d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("g.node").each(function(h){if(!h.isSelected()){_MyThisGraphNode.selection(h,q)}})}}).on("keyup",function(h){if(_MyThisGraphNode.charKey==46&&p.getSelectedNodes().length>0){metExploreD3.displayMessageYesNo("Selected nodes","Do you want remove selected nodes?",function(t){if(t=="yes"){metExploreD3.GraphNetwork.removeSelectedNode("viz")}})}_MyThisGraphNode.charKey="none";_MyThisGraphNode.ctrlKey=d3.event.ctrlKey});metExploreD3.GraphNode.panelParent=q;_MyThisGraphNode=metExploreD3.GraphNode;var a=d3.behavior.drag().on("dragstart",_MyThisGraphNode.dragstart).on("drag",_MyThisGraphNode.dragmove).on("dragend",_MyThisGraphNode.dragend);var c=p.getD3Data();var j=parseInt(d3.select("#"+_MyThisGraphNode.panelParent).select("#D3viz").style("height"));var f=parseInt(d3.select("#"+_MyThisGraphNode.panelParent).select("#D3viz").style("width"));d3.selectAll("#D3viz").on("mouseup",this.unselectIfDBClick);var b=metExploreD3.getScaleById(q);metExploreD3.GraphNode.node=d3.select("#"+metExploreD3.GraphNode.panelParent).select("#D3viz").select("#graphComponent").selectAll("g.node").data(c.getNodes()).enter().append("svg:g").attr("class","node").attr("id",function(h){return"node"+h.getId()}).call(a).style("fill","white");metExploreD3.GraphNode.node.filter(function(h){return !h.isDuplicated()}).on("mouseenter",function(u){var y=d3.select(this).attr("transform");var t=y.substring(y.indexOf("scale"),y.length);var h=t.substring(6,t.indexOf(")"));if(isNaN(h)){h=1}var w=d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("g.node");d3.select(this).attr("transform","translate("+u.x+", "+u.y+") scale("+h*2+")");var v=d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("path.link");if(u.getBiologicalType()=="reaction"){v.filter(function(z){return u.getId()==z.getSource().getId()}).style("stroke","green").style("stroke-width","1.5");v.filter(function(z){return u.getId()==z.getTarget().getId()}).style("stroke","red").style("stroke-width","1.5")}else{v.filter(function(z){return u.getId()==z.getSource().getId()}).style("stroke","red").style("stroke-width","1.5");v.filter(function(z){return u.getId()==z.getTarget().getId()}).style("stroke","green").style("stroke-width","1.5")}}).on("mouseover",function(t){var u=d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("g.node");d3.select(this).each(function(z){var y=u[0][u.size()-1];this.parentNode.insertBefore(this,y)});t.fixed=true;metExploreD3.GraphNode.node.filter(function(y){return y==t}).select(".locker").classed("hide",false).select(".iconlocker").attr("xlink:href",function(y){if(y.isLocked()){return"resources/icons/lock_font_awesome.svg"}else{return"resources/icons/unlock_font_awesome.svg"}});var h=b.getXScale();var w=b.getYScale();if(!document.getElementById("tooltip2").classList.contains("fixed")){var v="<b>Name:</b> "+t.getName()+"<br/><b>Biological type:</b> "+t.getBiologicalType()+((t.getCompartment()!=undefined)?"<br/><b>Compartment:</b> "+t.getCompartment():"")+((t.getDbIdentifier()!=undefined)?"<br/><b>Database identifier:</b> "+t.getDbIdentifier():"")+((t.getEC()!=undefined)?"<br/><b>EC number: </b>"+t.getEC():"")+((t.getReactionReversibility()!=undefined)?"<br/><b>Reaction reversibility:</b> "+t.getReactionReversibility():"")+((t.getIsSideCompound()!=undefined)?"<br/><b>SideCompound:</b> "+t.getIsSideCompound():"")+((t.getMappingDatasLength()!=0)?((t.getMappingDatasLength()==1)?"<br/><b>Mapping:</b><br/><table style='width:100%; margin-left: 30px; padding-right: 30px;'>":"<br/><b>Mappings:</b><br/><table style='width:100%; margin-left: 30px; padding-right: 30px;'>"):"");t.getMappingDatas().forEach(function(y){v+="<tr><td>"+y.getMappingName()+"</td><td>"+y.getConditionName()+"</td><td>"+y.getMapValue()+"</td></tr>"});v+="</table>";if(t.getSvg()!=undefined&&t.getSvg()!="undefined"&&t.getSvg()!=""){v+='<br/><img src="resources/images/structure_metabolite/'+t.getSvg()+'"/>'}document.getElementById("tooltip2").innerHTML=v;document.getElementById("tooltip2").classList.remove("hide")}}).on("mouseleave",function(u){var w=d3.select(this).attr("transform");var t=w.substring(w.indexOf("scale"),w.length);var h=t.substring(6,t.indexOf(")"));if(isNaN(h)){h=1}metExploreD3.GraphNode.node.filter(function(z){return z==u}).select(".locker").classed("hide",true);var v=d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("g.node");d3.select(this).attr("transform","translate("+u.x+", "+u.y+") scale("+h/2+")");if(!u.isLocked()){u.fixed=false}var y=metExploreD3.getLinkStyle();document.getElementById("tooltip2").classList.add("hide");d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(z){return u.getId()==z.getSource().getId()||u.getId()==z.getTarget().getId()}).style("stroke",y.getStrokeColor()).style("stroke-width","0.5");if(u.getBiologicalType()=="reaction"){d3.select(this).selectAll("rect").selectAll(".reaction, .fontSelected").transition().duration(750).attr("width",d.getWidth()).attr("height",d.getHeight()).attr("transform","translate(-"+d.getWidth()/2+",-"+d.getHeight()/2+")")}else{d3.select(this).selectAll("rect").selectAll(".metabolite, .fontSelected").transition().duration(750).attr("width",o.getWidth()).attr("height",o.getHeight()).attr("transform","translate(-"+o.getWidth()/2+",-"+o.getHeight()/2+")")}});metExploreD3.GraphNode.node.filter(function(h){return h.isDuplicated()}).on("mouseenter",function(u){var y=d3.select(this).attr("transform");var t=y.substring(y.indexOf("scale"),y.length);var h=t.substring(6,t.indexOf(")"));if(isNaN(h)){h=1}var w=d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("g.node");d3.select(this).attr("transform","translate("+u.x+", "+u.y+") scale("+h*2+")");var v=d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("path.link");if(u.getBiologicalType()=="reaction"){v.filter(function(z){return u.getId()==z.getSource().getId()}).style("stroke","green").style("stroke-width","1.5");v.filter(function(z){return u.getId()==z.getTarget().getId()}).style("stroke","red").style("stroke-width","1.5")}else{v.filter(function(z){return u.getId()==z.getSource().getId()}).style("stroke","red").style("stroke-width","1.5");v.filter(function(z){return u.getId()==z.getTarget().getId()}).style("stroke","green").style("stroke-width","1.5")}}).on("mouseover",function(t){var u=d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("g.node");d3.select(this).each(function(z){var y=u[0][u.size()-1];this.parentNode.insertBefore(this,y)});t.fixed=true;metExploreD3.GraphNode.node.filter(function(y){return y==t}).select(".locker").classed("hide",false).select(".iconlocker").attr("xlink:href",function(y){if(y.isLocked()){return"resources/icons/lock_font_awesome.svg"}else{return"resources/icons/unlock_font_awesome.svg"}});if(t.getBiologicalType()=="reaction"){d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(y){return t.getId()==y.getSource().getId()}).style("stroke","green");d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(y){return t.getId()==y.getTarget().getId()}).style("stroke","red")}else{d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(y){return t.getId()==y.getSource().getId()}).style("stroke","red");d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(y){return t.getId()==y.getTarget().getId()}).style("stroke","green")}var h=b.getXScale();var w=b.getYScale();if(!document.getElementById("tooltip2").classList.contains("fixed")){var v="<b>Name:</b> "+t.getName()+"<br/><b>Biological type:</b> "+t.getBiologicalType()+((t.getCompartment()!=undefined)?"<br/><b>Compartment:</b> "+t.getCompartment():"")+((t.getDbIdentifier()!=undefined)?"<br/><b>Database identifier:</b> "+t.getDbIdentifier():"")+((t.getEC()!=undefined)?"<br/><b>EC number:</b> "+t.getEC():"")+((t.getReactionReversibility()!=undefined)?"<br/><b>Reaction reversibility:</b> "+t.getReactionReversibility():"")+((t.getIsSideCompound()!=undefined)?"<br/><b>SideCompound:</b> "+t.getIsSideCompound():"")+((t.getMappingDatasLength()!=0)?((t.getMappingDatasLength()==1)?"<br/><b>Mapping:</b><br/><table style='width:100%; margin-left: 30px; padding-right: 30px;'>":"<br/><b>Mappings:</b><br/><table style='width:100%; margin-left: 30px; padding-right: 30px;'>"):"");t.getMappingDatas().forEach(function(y){v+="<tr><td>"+y.getMappingName()+"</td><td>"+y.getConditionName()+"</td><td>"+y.getMapValue()+"</td></tr>"});v+="</table>";if(t.getSvg()!=undefined&&t.getSvg()!="undefined"&&t.getSvg()!=""){v+='<br/><img src="resources/images/structure_metabolite/'+t.getSvg()+'"/>'}document.getElementById("tooltip2").innerHTML=v;document.getElementById("tooltip2").classList.remove("hide")}}).on("mouseleave",function(u){var w=d3.select(this).attr("transform");var t=w.substring(w.indexOf("scale"),w.length);var h=t.substring(6,t.indexOf(")"));if(isNaN(h)){h=1}metExploreD3.GraphNode.node.filter(function(z){return z==u}).select(".locker").classed("hide",true);var v=d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("g.node");d3.select(this).attr("transform","translate("+u.x+", "+u.y+") scale("+h/2+")");if(!u.isLocked()){u.fixed=false}var y=metExploreD3.getLinkStyle();document.getElementById("tooltip2").classList.add("hide");d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(z){return u.getId()==z.getSource().getId()||u.getId()==z.getTarget().getId()}).style("stroke",y.getStrokeColor()).style("stroke-width","0.5");if(u.getBiologicalType()=="reaction"){d3.select(this).selectAll("rect").selectAll(".reaction, .fontSelected").transition().duration(750).attr("width",d.getWidth()).attr("height",d.getHeight()).attr("transform","translate(-"+d.getWidth()/2+",-"+d.getHeight()/2+")")}else{d3.select(this).selectAll("rect").selectAll(".reaction, .fontSelected").transition().duration(750).attr("width",o.getWidth()).attr("height",o.getHeight()).attr("transform","translate(-"+o.getWidth()/2+",-"+o.getHeight()/2+")")}});metExploreD3.GraphNode.node.filter(function(h){return h.getBiologicalType()=="metabolite"}).filter(function(h){return !h.isDuplicated()}).addNodeForm(o.getWidth(),o.getHeight(),o.getRX(),o.getRY(),o.getStrokeColor(),o.getStrokeWidth());metExploreD3.GraphNode.node.filter(function(h){return h.getBiologicalType()=="metabolite"}).filter(function(h){return h.isDuplicated()}).style("stroke-opacity",0.5).addNodeForm(o.getWidth()/2,o.getHeight()/2,o.getRX()/2,o.getRY()/2,o.getStrokeColor(),o.getStrokeWidth()/2);metExploreD3.GraphNode.node.filter(function(h){return h.getBiologicalType()=="reaction"}).addNodeForm(d.getWidth(),d.getHeight(),d.getRX(),d.getRY(),d.getStrokeColor(),d.getStrokeWidth());if(c.getNodes().length<r.getReactionThreshold()||!r.isDisplayedLabelsForOpt()){var s=Math.min(o.getWidth(),o.getHeight());metExploreD3.GraphNode.node.filter(function(h){return h.getLabelVisible()==true}).filter(function(h){return h.getBiologicalType()=="metabolite"}).filter(function(h){return h.getSvg()=="undefined"||h.getSvg()==undefined||h.getSvg()==""}).append("svg:text").attr("fill","black").attr("class",function(h){return h.getBiologicalType()}).each(function(u){var y=d3.select(this);var v=o.getDisplayLabel(u,o.getLabel());v=v.split(" ");y.text("");for(var w=0;w<v.length;w++){var h=$("<div/>").html(v[w]).text();var t=y.append("tspan").text(h);if(w>0){t.attr("x",0).attr("dy","5")}}}).style("font-size",o.getFontSize()).style("paint-order","stroke").style("stroke-width",1).style("stroke","white").style("stroke-opacity","0.7").attr("dy",".4em").style("font-weight","bold").style("pointer-events","none").attr("y",s/2+3);metExploreD3.GraphNode.node.filter(function(h){return h.getLabelVisible()==true}).filter(function(h){return h.getBiologicalType()=="metabolite"}).filter(function(h){return h.getSvg()!="undefined"&&h.getSvg()!=undefined&&h.getSvg()!=""}).append("svg:text").attr("fill","black").attr("class",function(h){return h.getBiologicalType()}).each(function(u){var y=d3.select(this);var v=o.getDisplayLabel(u,o.getLabel());v=v.split(" ");y.text("");for(var w=0;w<v.length;w++){var h=$("<div/>").html(v[w]).text();var t=y.append("tspan").text(h);if(w>0){t.attr("x",0).attr("dy","7")}}}).style("font-size",o.getFontSize()).style("paint-order","stroke").style("stroke-width",1).style("stroke","white").style("stroke-opacity","0.7").attr("dy",".4em").style("font-weight","bold").style("pointer-events","none").attr("y",s/2+3);metExploreD3.GraphNode.node.filter(function(h){return(h.getBiologicalType()=="metabolite"&&h.getSvg()!="undefined"&&h.getSvg()!=undefined&&h.getSvg()!="")}).append("svg").attr("viewBox",function(h){return"0 0 "+s+" "+s}).attr("width",s*8/10+"px").attr("height",s*8/10+"px").attr("x",(-s/2)+(s*1/10)).attr("preserveAspectRatio","xMinYMin").attr("y",(-s/2)+(s*1/10)).attr("class","structure_metabolite").append("image").attr("xlink:href",function(h){return"resources/images/structure_metabolite/"+h.getSvg()}).attr("width","100%").attr("height","100%");var g=metExploreD3.GraphNode.node.insert("svg",":first-child").attr("viewBox",function(h){+" "+s}).attr("width",function(h){if(h.getBiologicalType()=="metabolite"){return o.getWidth()}if(h.getBiologicalType()=="reaction"){return d.getWidth()}}).attr("height",function(h){if(h.getBiologicalType()=="metabolite"){return o.getHeight()}if(h.getBiologicalType()=="reaction"){return d.getHeight()}}).attr("preserveAspectRatio","xMinYMin").attr("y",function(h){if(h.getBiologicalType()=="metabolite"){return -o.getHeight()}if(h.getBiologicalType()=="reaction"){return -d.getHeight()}}).attr("x",function(h){if(h.getBiologicalType()=="metabolite"){return -o.getWidth()}if(h.getBiologicalType()=="reaction"){return -d.getWidth()}}).attr("class","locker").classed("hide",true);g.append("svg:path").attr("class","backgroundlocker").attr("d",function(t){if(t.getBiologicalType()=="metabolite"){var h="M"+o.getWidth()+","+o.getHeight()+" L0,"+o.getHeight()+" L0,"+o.getRY()*2+" A"+o.getRX()*2+","+o.getRY()*2+",0 0 1 "+o.getRX()*2+",0 L"+o.getWidth()+",0";return h}if(t.getBiologicalType()=="reaction"){var h="M"+d.getWidth()+","+d.getHeight()+" L0,"+d.getHeight()+" L0,"+d.getRY()*2+" A"+d.getRX()*2+","+d.getRY()*2+",0 0 1 "+d.getRX()*2+",0 L"+d.getWidth()+",0";return h}}).attr("opacity","0.20").attr("fill","black");g.append("image").attr("class","iconlocker").attr("y",function(h){if(h.getBiologicalType()=="metabolite"){return o.getHeight()/4-(o.getHeight()-o.getRY()*2)/8}if(h.getBiologicalType()=="reaction"){return d.getHeight()/4-(d.getHeight()-d.getRY()*2)/8}}).attr("x",function(h){if(h.getBiologicalType()=="metabolite"){return o.getWidth()/4-(o.getWidth()-o.getRX()*2)/8}if(h.getBiologicalType()=="reaction"){return d.getWidth()/4-(d.getWidth()-d.getRX()*2)/8}}).attr("width","40%").attr("height","40%");metExploreD3.GraphNode.node.filter(function(h){return h.getLabelVisible()==true}).filter(function(h){return h.getBiologicalType()=="reaction"}).append("svg:text").attr("fill","black").attr("class",function(h){return h.getBiologicalType()}).text(function(t){var h=$("<div/>").html(d.getDisplayLabel(t,d.getLabel())).text();if(h==""){var h=$("<div/>").html(d.getDisplayLabel(t,d.getLabel())).text()}return h}).style("font-size",function(h){if(d.getDisplayLabel(h,d.getLabel())=="NA"){return 6}return Math.min(d.getWidth(),(d.getWidth()-d.getWidth()/10)/this.getComputedTextLength()*10)+"px"}).style("font-weight","bold").attr("dy",".3em")}metExploreD3.GraphNode.node.filter(function(h){return h.isSelected()}).each(function(h){_MyThisGraphNode.fixNodeOnRefresh(h,"viz")});metExploreD3.GraphNode.node.filter(function(h){return h.isLocked()}).each(function(h){h.fixed=true});metExploreD3.GraphNode.node.filter(function(h){return h.getMappingDatasLength()>0&&p.getActiveMapping()!=""}).filter(function(t){var h=t.getMappingDataByNameAndCond(p.getActiveMapping(),p.isMapped());return(h!=null&&p.getColorMappingById(h.getMapValue())!=null)}).attr("mapped",function(u){var w=u.getMappingDataByNameAndCond(p.getActiveMapping(),p.isMapped());if(p.getMappingDataType()=="Continuous"){if(p.getColorMappingsSet()[0]<p.getColorMappingsSet()[1]){maxValue=p.getColorMappingsSet()[1];minValue=p.getColorMappingsSet()[0]}else{maxValue=p.getColorMappingsSet()[0];minValue=p.getColorMappingsSet()[1]}var z=_metExploreViz.getGeneralStyle();var v=z.getColorMinMappingContinuous();var t=z.getColorMaxMappingContinuous();var h=d3.scale.linear().domain([parseFloat(minValue),parseFloat(maxValue)]).range([v,t]);return h(parseFloat(w.getMapValue()))}var y=p.getColorMappingById(w.getMapValue()).getValue();return y}).style("fill",function(u){var w=u.getMappingDataByNameAndCond(p.getActiveMapping(),p.isMapped());d3.select(this).insert("rect",":first-child").attr("class","stroke").attr("width",parseInt(d3.select(this).select("."+u.getBiologicalType()).attr("width"))+10).attr("height",parseInt(d3.select(this).select("."+u.getBiologicalType()).attr("height"))+10).attr("rx",parseInt(d3.select(this).select("."+u.getBiologicalType()).attr("rx"))+5).attr("ry",parseInt(d3.select(this).select("."+u.getBiologicalType()).attr("ry"))+5).attr("transform","translate(-"+parseInt(parseInt(d3.select(this).select("."+u.getBiologicalType()).attr("width"))+10)/2+",-"+parseInt(parseInt(d3.select(this).select("."+u.getBiologicalType()).attr("height"))+10)/2+")").style("opacity","0.5").style("fill","red");if(p.getMappingDataType()=="Continuous"){if(parseFloat(p.getColorMappingsSet()[0].getName())<parseFloat(p.getColorMappingsSet()[1].getName())){maxValue=parseFloat(p.getColorMappingsSet()[1].getName());minValue=parseFloat(p.getColorMappingsSet()[0].getName())}else{maxValue=parseFloat(p.getColorMappingsSet()[0].getName());minValue=parseFloat(p.getColorMappingsSet()[1].getName())}var z=_metExploreViz.getGeneralStyle();var v=z.getColorMinMappingContinuous();var t=z.getColorMaxMappingContinuous();var h=d3.scale.linear().domain([parseFloat(minValue),parseFloat(maxValue)]).range([v,t]);return h(parseFloat(w.getMapValue()))}var y=p.getColorMappingById(w.getMapValue()).getValue();return y})},tick:function(c){d3.select("#"+c).select("#D3viz").select("#graphComponent").selectAll("g.node").attr("cx",function(g){return g.x}).attr("cy",function(g){return g.y}).attr("transform",function(h){var g=1;if(d3.select(this)!=null){var m=d3.select(this).attr("transform");if(d3.select(this).attr("transform")!=null){var j=m.indexOf("scale(");if(j!=-1){g=parseInt(m.substring(j+6,m.length-1))}}}return"translate("+h.x+","+h.y+") scale("+g+")"});if(c=="viz"){var b=_metExploreViz.getSessionsSet();var f=_metExploreViz.getSessionById(c);if(f.isLinked()){for(var d in b){if(b[d].isLinked()&&c!=b[d].getId()&&d3.select("#"+b[d].getId()).select("#D3viz").select("#graphComponent")[0][0]!=null){d3.select("#"+b[d].getId()).select("#D3viz").select("#graphComponent").selectAll("g.node").each(function(g){d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").each(function(h){if(h.getId()==g.getId()){g.x=h.x;g.y=h.y}})});var a=metExploreD3.getScaleById(b[d].getId());metExploreD3.GraphLink.tick(b[d].getId(),a);_MyThisGraphNode.tick(b[d].getId())}}}}},selectNodeData:function(a){return d3.select(a).datum()},selectNodeFromGrid:function(a){d3.select("#viz").select("#D3viz").selectAll("g.node").filter(function(b){return b.getDbIdentifier()==a||b.getId()==a}).each(function(b){if(!b.isSelected()){_MyThisGraphNode.selection(b,"viz")}})},colorStoreByCompartment:function(b){for(var a=0;a<metExploreD3.getCompartmentInBiosourceLength();a++){b.filter(function(c){return(c.getBiologicalType()=="metabolite"&&c.getCompartment()==metExploreD3.getCompartmentInBiosourceSet()[a].getIdentifier())}).selectAll("rect").style("stroke",metExploreD3.getCompartmentInBiosourceSet()[a].getColor())}},unselectIfDBClick:function(){var a=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(d3.event.target==d3.select("#D3viz")[0][0]){document.getElementById("tooltip2").classList.remove("fixed")}if(_MyThisGraphNode.dblClickable&&d3.event.button==0){_MyThisGraphNode.activePanel=this.parentNode.id;d3.select(this).select("#graphComponent").selectAll("g.node").filter(function(f){return f.isSelected()}).each(function(f){_MyThisGraphNode.selection(f,_MyThisGraphNode.activePanel)});a.removeAllSelectedNodes()}else{if(d3.event.button==0){_MyThisGraphNode.dblClickable=true;_MyThisGraphNode.taskClick=metExploreD3.createDelayedTask(function(){_MyThisGraphNode.dblClickable=false});metExploreD3.fixDelay(_MyThisGraphNode.taskClick,400)}else{}}if(_MyThisGraphNode.dblClickable&&d3.event.button==1){_MyThisGraphNode.activePanel=this.parentNode.id;d3.select(this).select("#graphComponent").selectAll("g.node").filter(function(f){return f.isLocked()}).each(function(f){f.fixed=false})}else{if(d3.event.button==1){_MyThisGraphNode.dblClickable=true;_MyThisGraphNode.taskClick=metExploreD3.createDelayedTask(function(){_MyThisGraphNode.dblClickable=false});metExploreD3.fixDelay(_MyThisGraphNode.taskClick,400)}else{}}if(a!=undefined){if(a.isLinked()){var b=_metExploreViz.getSessionById("viz");if(b!=undefined){var c=metExploreD3.GraphNetwork.isAnimated(b.getId());if(c=="true"){var d=b.getForce();if(d!=undefined){if(metExploreD3.GraphNetwork.isAnimated(b.getId())=="true"||metExploreD3.GraphNetwork.isAnimated(b.getId())==null){d.start()}}}}}else{var d=a.getForce();var c=metExploreD3.GraphNetwork.isAnimated(a.getId());if(c=="true"){var d=a.getForce();if(d!=undefined){if((metExploreD3.GraphNetwork.isAnimated(a.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(a.getId())==null)){d.start()}}}}}},loadNode:function(q){var d=metExploreD3.getReactionStyle();var o=metExploreD3.getMetaboliteStyle();var r=metExploreD3.getGeneralStyle();var p=_metExploreViz.getSessionById(q);var m=_metExploreViz.getSessionById("viz");d3.select("body").on("keydown",function(){_MyThisGraphNode.charKey=d3.event.keyCode;_MyThisGraphNode.ctrlKey=d3.event.ctrlKey;if(_MyThisGraphNode.charKey==65&&_MyThisGraphNode.ctrlKey){d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("g.node").each(function(h){if(!h.isSelected()){_MyThisGraphNode.selection(h,q)}})}}).on("keyup",function(h){if(_MyThisGraphNode.charKey==46&&p.getSelectedNodes().length>0){metExploreD3.displayMessageYesNo("Selected nodes","Do you want remove selected nodes?",function(t){if(t=="yes"){metExploreD3.GraphNetwork.removeSelectedNode("viz")}})}_MyThisGraphNode.charKey="none";_MyThisGraphNode.ctrlKey=d3.event.ctrlKey});metExploreD3.GraphNode.panelParent=q;_MyThisGraphNode=metExploreD3.GraphNode;var c=p.getD3Data();var j=parseInt(d3.select("#"+_MyThisGraphNode.panelParent).select("#D3viz").style("height"));var f=parseInt(d3.select("#"+_MyThisGraphNode.panelParent).select("#D3viz").style("width"));d3.selectAll("#D3viz").on("mouseup",this.unselectIfDBClick);var b=metExploreD3.getScaleById(q);var a=d3.behavior.drag().on("dragstart",_MyThisGraphNode.dragstart).on("drag",_MyThisGraphNode.dragmove).on("dragend",_MyThisGraphNode.dragend);metExploreD3.GraphNode.node=d3.select("#"+metExploreD3.GraphNode.panelParent).select("#D3viz").select("#graphComponent").selectAll("g.node").data(c.getNodes()).enter().append("svg:g").attr("class","node").attr("id",function(h){return"node"+h.getId()}).call(a).style("fill",function(h){if(h.isSelected()==false){return"white"}else{return"grey"}}).on("mouseenter",function(u){var y=d3.select(this).attr("transform");var t=y.substring(y.indexOf("scale"),y.length);var h=t.substring(6,t.indexOf(")"));if(isNaN(h)){h=1}var w=d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("g.node");d3.select(this).attr("transform","translate("+u.x+", "+u.y+") scale("+h/2+")");var v=d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("path.link");if(u.getBiologicalType()=="reaction"){v.filter(function(z){return u.getId()==z.getSource().getId()}).style("stroke","green").style("stroke-width","1.5");v.filter(function(z){return u.getId()==z.getTarget().getId()}).style("stroke","red").style("stroke-width","1.5")}else{v.filter(function(z){return u.getId()==z.getSource().getId()}).style("stroke","red").style("stroke-width","1.5");v.filter(function(z){return u.getId()==z.getTarget().getId()}).style("stroke","green").style("stroke-width","1.5")}}).on("mouseover",function(t){var u=d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("g.node");d3.select(this).each(function(z){var y=u[0][u.size()-1];this.parentNode.insertBefore(this,y)});t.fixed=true;metExploreD3.GraphNode.node.filter(function(y){return y==t}).select(".locker").classed("hide",false).select(".iconlocker").attr("xlink:href",function(y){if(y.isLocked()){return"resources/icons/lock_font_awesome.svg"}else{return"resources/icons/unlock_font_awesome.svg"}});var h=b.getXScale();var w=b.getYScale();if(!document.getElementById("tooltip2").classList.contains("fixed")){var v="<b>Name:</b> "+t.getName()+"<br/><b>Biological type:</b> "+t.getBiologicalType()+((t.getCompartment()!=undefined)?"<br/><b>Compartment:</b> "+t.getCompartment():"")+((t.getDbIdentifier()!=undefined)?"<br/><b>Database identifier:</b> "+t.getDbIdentifier():"")+((t.getEC()!=undefined)?"<br/><b>EC number:</b> "+t.getEC():"")+((t.getReactionReversibility()!=undefined)?"<br/><b>Reaction reversibility:</b> "+t.getReactionReversibility():"")+((t.getIsSideCompound()!=undefined)?"<br/><b>SideCompound:</b> "+t.getIsSideCompound():"")+((t.getMappingDatasLength()!=0)?((t.getMappingDatasLength()==1)?"<br/><b>Mapping:</b><br/><table style='width:100%; margin-left: 30px; padding-right: 30px;'>":"<br/><b>Mappings:</b><br/><table style='width:100%; margin-left: 30px; padding-right: 30px;'>"):"");t.getMappingDatas().forEach(function(y){v+="<tr><td>"+y.getMappingName()+"</td><td>"+y.getConditionName()+"</td><td>"+y.getMapValue()+"</td></tr>"});v+="</table>";if(t.getSvg()!=undefined&&t.getSvg()!="undefined"&&t.getSvg()!=""){v+='<br/><img src="resources/images/structure_metabolite/'+t.getSvg()+'"/>'}document.getElementById("tooltip2").innerHTML=v;document.getElementById("tooltip2").classList.remove("hide")}}).on("mouseleave",function(u){var w=d3.select(this).attr("transform");var t=w.substring(w.indexOf("scale"),w.length);var h=t.substring(6,t.indexOf(")"));if(isNaN(h)){h=1}metExploreD3.GraphNode.node.filter(function(z){return z==u}).select(".locker").classed("hide",true);var v=d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("g.node");d3.select(this).attr("transform","translate("+u.x+", "+u.y+") scale("+h/2+")");if(!u.isLocked()){u.fixed=false}var y=metExploreD3.getLinkStyle();document.getElementById("tooltip2").classList.add("hide");d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(z){return u.getId()==z.getSource().getId()||u.getId()==z.getTarget().getId()}).style("stroke",y.getStrokeColor()).style("stroke-width","0.5");if(u.getBiologicalType()=="reaction"){d3.select(this).selectAll("rect").selectAll(".reaction, .fontSelected").transition().duration(750).attr("width",d.getWidth()).attr("height",d.getHeight()).attr("transform","translate(-"+d.getWidth()/2+",-"+d.getHeight()/2+")")}else{d3.select(this).selectAll("rect").selectAll(".reaction, .fontSelected").transition().duration(750).attr("width",o.getWidth()).attr("height",o.getHeight()).attr("transform","translate(-"+o.getWidth()/2+",-"+o.getHeight()/2+")")}}).filter(function(h){return h.getMappingDatasLength()>0&&p.getActiveMapping()!=""}).attr("mapped",function(t){var h=t.getMappingDataByNameAndCond(p.getActiveMapping(),p.isMapped());return p.getColorMappingById(h.getMapValue())}).style("fill",function(t){var h=t.getMappingDataByNameAndCond(p.getActiveMapping(),p.isMapped());return p.getColorMappingById(h.getMapValue())});metExploreD3.GraphNode.node.filter(function(h){return h.getBiologicalType()=="metabolite"}).append("rect").attr("class",function(h){return h.getBiologicalType()}).attr("id",function(h){return h.getId()}).attr("identifier",function(h){return h.getId()}).attr("width",o.getWidth()).attr("height",o.getHeight()).attr("rx",o.getRX()).attr("ry",o.getRY()).attr("transform","translate(-"+o.getWidth()/2+",-"+o.getHeight()/2+")").style("stroke",o.getStrokeColor()).style("stroke-width",o.getStrokeWidth());metExploreD3.GraphNode.node.filter(function(h){return h.getBiologicalType()=="metabolite"}).append("rect").attr("class","fontSelected").attr("width",o.getWidth()).attr("height",o.getHeight()).attr("rx",o.getRX()).attr("ry",o.getRY()).attr("transform","translate(-"+o.getWidth()/2+",-"+o.getHeight()/2+")").style("fill-opacity","0").style("fill","#000");metExploreD3.GraphNode.node.filter(function(h){return h.getBiologicalType()=="reaction"}).append("rect").attr("class",function(h){return h.getBiologicalType()}).attr("id",function(h){return h.getId()}).attr("width",d.getWidth()).attr("height",d.getHeight()).attr("rx",d.getRX()).attr("ry",d.getRY()).attr("transform","translate(-"+d.getWidth()/2+",-"+d.getHeight()/2+")").style("stroke",d.getStrokeColor()).style("stroke-width",d.getStrokeWidth());metExploreD3.GraphNode.node.filter(function(h){return h.getBiologicalType()=="reaction"}).append("rect").attr("class","fontSelected").attr("width",d.getWidth()).attr("height",d.getHeight()).attr("rx",d.getRX()).attr("ry",d.getRY()).attr("transform","translate(-"+d.getWidth()/2+",-"+d.getHeight()/2+")").style("fill-opacity","0").style("fill","#000");metExploreD3.sortCompartmentInBiosource();for(var g=0;g<metExploreD3.getCompartmentInBiosourceLength();g++){metExploreD3.GraphNode.node.filter(function(h){return(h.getBiologicalType()=="metabolite"&&h.getCompartment()==metExploreD3.getCompartmentInBiosourceSet()[g].getIdentifier())}).selectAll("rect").style("stroke",metExploreD3.getCompartmentInBiosourceSet()[g].getColor())}if(c.getNodes().length<r.getReactionThreshold()||!r.isDisplayedLabelsForOpt()){var s=Math.min(o.getWidth(),o.getHeight());metExploreD3.GraphNode.node.filter(function(h){return h.getLabelVisible()==true}).filter(function(h){return h.getBiologicalType()=="metabolite"}).filter(function(h){return h.getSvg()=="undefined"||h.getSvg()==undefined||h.getSvg()==""}).append("svg:text").attr("fill","black").attr("class",function(h){return h.getBiologicalType()}).each(function(u){var y=d3.select(this);var v=o.getDisplayLabel(u,o.getLabel());v=v.split(" ");y.text("");for(var w=0;w<v.length;w++){var h=$("<div/>").html(v[w]).text();var t=y.append("tspan").text(h);if(w>0){t.attr("x",0).attr("dy","5")}}}).style("font-size",o.getFontSize()).style("paint-order","stroke").style("stroke-width",1).style("stroke","white").style("stroke-opacity","0.7").attr("dy",".4em").style("font-weight","bold").style("pointer-events","none").attr("y",s/2+3);metExploreD3.GraphNode.node.filter(function(h){return h.getLabelVisible()==true}).filter(function(h){return h.getBiologicalType()=="metabolite"}).filter(function(h){return h.getSvg()!="undefined"&&h.getSvg()!=undefined&&h.getSvg()!=""}).append("svg:text").attr("fill","black").attr("class",function(h){return h.getBiologicalType()}).each(function(u){var y=d3.select(this);var v=o.getDisplayLabel(u,o.getLabel());v=v.split(" ");y.text("");for(var w=0;w<v.length;w++){var h=$("<div/>").html(v[w]).text();var t=y.append("tspan").text(h);if(w>0){t.attr("x",0).attr("dy","7")}}}).style("font-size",o.getFontSize()).style("paint-order","stroke").style("stroke-width",1).style("stroke","white").style("stroke-opacity","0.7").attr("dy",".4em").style("font-weight","bold").style("pointer-events","none").attr("y",s/2+3);metExploreD3.GraphNode.node.filter(function(h){return(h.getBiologicalType()=="metabolite"&&h.getSvg()!="undefined"&&h.getSvg()!=undefined&&h.getSvg()!="")}).append("svg").attr("viewBox",function(h){return"0 0 "+s+" "+s}).attr("width",s*8/10+"px").attr("height",s*8/10+"px").attr("x",(-s/2)+(s*1/10)).attr("preserveAspectRatio","xMinYMin").attr("y",(-s/2)+(s*1/10)).attr("class","structure_metabolite").append("image").attr("xlink:href",function(h){return"resources/images/structure_metabolite/"+h.getSvg()}).attr("width","100%").attr("height","100%");metExploreD3.GraphNode.node.filter(function(h){return h.getLabelVisible()==true}).filter(function(h){return h.getBiologicalType()=="reaction"}).append("svg:text").attr("fill","black").attr("class",function(h){return h.getBiologicalType()}).text(function(t){var h=$("<div/>").html(d.getDisplayLabel(t,d.getLabel())).text();if(h==""){var h=$("<div/>").html(d.getDisplayLabel(t,d.getLabel())).text()}return h}).style("font-size",function(h){if(d.getDisplayLabel(h,d.getLabel())=="NA"){return 6}return Math.min(d.getWidth(),(d.getWidth()-d.getWidth()/10)/this.getComputedTextLength()*10)+"px"}).style("font-weight","bold").attr("dy",".3em")}metExploreD3.GraphNode.loadPath(metExploreD3.GraphNode.panelParent)},loadSideCompounds:function(c,b){var a=[];c.forEach(function(f){var d=_metExploreViz.getSessionById("viz").getD3Data().getNodeByDbIdentifier(f);if(d!=null){if(metExploreD3.getMetabolitesSet()!=undefined){var g=metExploreD3.getMetaboliteById(metExploreD3.getMetabolitesSet(),d.getId());if(g!=null){g.set("sideCompound",true)}}d.setIsSideCompound(true);a.push(d)}});if(b!=undefined){b()}return a.length>0},setIsSideCompoundById:function(h,f){var d=_metExploreViz.getSessionById("viz").getD3Data();var j=d.getNodes();if(j!=undefined){var c=d.getNodeById(h);if(c!=undefined){c.setIsSideCompound(f)}var g=_metExploreViz.getSessionsSet();for(var a in g){if(g[a].getId()!="viz"){var b=g[a].getD3Data().getNodeById(h);b.setIsSideCompound(f);if(b!=undefined){b.setIsSideCompound(f)}}}}},setIsReversibleById:function(b,g){var f=_metExploreViz.getSessionById("viz").getD3Data();var j=f.getNodes();if(j!=undefined){var d=f.getNodeById(b);if(d!=undefined){d.setReactionReversibility(g)}var h=_metExploreViz.getSessionsSet();for(var a in h){if(h[a].getId()!="viz"){var c=h[a].getD3Data().getNodeById(b);c.setReactionReversibility(g);if(c!=undefined){c.setReactionReversibility(g)}}}}},loadPath:function(a,f){var b=_metExploreViz.getSessionById(a);if(f=="Compartments"){var d=d3.select("#"+a).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(g){return g.getBiologicalType()=="metabolite"});b.groups=metExploreD3.getCompartmentsGroup();metExploreD3.GraphNetwork.initCentroids()}else{b.groups=metExploreD3.getPathwaysGroup();metExploreD3.GraphNetwork.initCentroids()}metExploreD3.GraphNode.groupPath=function(m){var j=metExploreD3.getScaleById("viz");if(m.values!=undefined){if(m.values.length>0){if(m.values.length>2){return"M"+d3.geom.hull(m.values.map(function(q){return[q.x,q.y]})).join("L")+"Z"}else{var h=[];m.values.forEach(function(q){h.push([q.x,q.y])});var p,o;for(var g=m.values.length;g<3;g++){p=m.values[0].x*(1+0.00001*g);o=m.values[0].y*(1+0.000011*g);h.push([p,o])}return"M"+d3.geom.hull(h).join("L")+"Z"}}}};metExploreD3.GraphNode.groupFill=function(r,m){var h;if(f=="Compartments"){for(var j=0;j<metExploreD3.getCompartmentInBiosourceLength();j++){if(r.key==metExploreD3.getCompartmentInBiosourceSet()[j].getName()){h=metExploreD3.getCompartmentInBiosourceSet()[j].getColor()}}return h}else{var g=metExploreD3.getPathwaysLength();if(g==undefined){g=0}center=128;width=127;frequency=Math.PI*2*0.95/g;var p=Math.sin(frequency*m+2+g)*width+center;var o=Math.sin(frequency*m+0+g)*width+center;var q=Math.sin(frequency*m+4+g)*width+center;var h=metExploreD3.GraphUtils.RGB2Color(p,o,q);r.color=h;return h}};var c="M0,0L10,10Z";d3.select("#"+a).select("#D3viz").selectAll("path.convexhull").data(b.groups).enter().insert("path",":first-child").attr("class",String).attr("d",function(g){return c}).attr("class",function(g){return g.key}).classed("convexhull",true).attr("id",function(g){return g.key}).style("fill",metExploreD3.GraphNode.groupFill).style("stroke",metExploreD3.GraphNode.groupFill).style("stroke-width",40).style("stroke-linejoin","round").style("opacity",0.15)},fixSelectedNode:function(){metExploreD3.GraphNode.node.filter(function(a){return a.isSelected()}).each(function(a){a.setLocked(true);a.fixed=a.isLocked()})}};metExploreD3.GraphCaption={refreshStyleOfReaction:function(){var b=metExploreD3.getReactionStyle();var c=Math.max(b.getWidth(),b.getHeight());var a=15/c;d3.select("#viz").select("#D3viz").select(".reactionCaption").attr("x",15/2-b.getWidth()*a/2).attr("y",15+15/2-b.getHeight()*a/2).attr("width",b.getWidth()*a).attr("height",b.getHeight()*a).attr("rx",b.getRX()*a).attr("ry",b.getRY()*a).attr("fill","white").attr("transform","translate(15,95)").style("stroke",b.getStrokeColor()).style("stroke-width",2)},refreshStyleOfMetabolite:function(){var c=metExploreD3.getMetaboliteStyle();var a=Math.max(c.getWidth(),c.getHeight());var b=15/a;d3.select("#viz").select("#D3viz").select(".metaboliteCaption").attr("x",15/2-c.getWidth()*b/2).attr("y",15+15/2-c.getHeight()*b/2).attr("width",c.getWidth()*b).attr("height",c.getHeight()*b).attr("rx",c.getRX()*b).attr("ry",c.getRY()*b).attr("fill","white").style("stroke","black").style("stroke-width",2).attr("transform","translate(15,130)")},drawCaption:function(){d3.select("#viz").select("#D3viz").select("#captionComparment").remove();d3.select("#viz").select("#D3viz").select("#captionPathway").remove();d3.select("#viz").select("#D3viz").select(".logoViz").remove();var j=metExploreD3.getReactionStyle();var H=Math.max(j.getWidth(),j.getHeight());var b=15/H;var r=metExploreD3.getMetaboliteStyle();var K=Math.max(r.getWidth(),r.getHeight());var J=15/K;var h=15/2-j.getWidth()*b/2;var f=15;var s=20+15/2-j.getWidth()*b/2;var o=15;var p=metExploreD3.getLinkStyle();var g=Math.sqrt(Math.pow(s-h,2)+Math.pow(o-f,2));var A=(s-h);var z=(o-f);var q=A/Math.abs(A);var m=z/Math.abs(z);var G=(Math.abs(g)*10/2)/Math.abs(A);var y=(Math.abs(g)*10/2)/Math.abs(z);var L=(G<y)?rT=G:rt=y;var C=5;var t=h+A*((g-L)/g);var w=f+z*((g-L)/g);var C=5;var E=h+A*((g-L-C)/g);var I=f+z*((g-L-C)/g);var B=h+A*((g-L-C-C)/g);var F=f+z*((g-L-C-C)/g);var c=E+z*(3/g);var v=I-A*(3/g);var a=E-z*(3/g);var u=I+A*(3/g);var D="M"+h+","+f+"L"+B+","+F+"L"+c+","+v+"L"+a+","+u+"L"+t+","+w+"L"+c+","+v+"L"+a+","+u+"L"+B+","+F+"Z";d3.select("#viz").select("#D3viz").append("svg:path").attr("class",String).attr("d",D).attr("class","linkCaptionRev").attr("fill-rule","evenodd").attr("fill","white").style("stroke",p.getStrokeColor()).style("stroke-width",1.5).style("stroke-linejoin","bevel").attr("transform","translate(15,65)");d3.select("#viz").select("#D3viz").append("svg:text").text("Reversible link").attr("x",20).attr("y",15).attr("transform","translate(30,70)");p=metExploreD3.getLinkStyle();var g=Math.sqrt(Math.pow(s-h,2)+Math.pow(o-f,2));var A=(s-h);var z=(o-f);var q=A/Math.abs(A);var m=z/Math.abs(z);var G=(Math.abs(g)*10/2)/Math.abs(A);var y=(Math.abs(g)*10/2)/Math.abs(z);var L=(G<y)?rT=G:rt=y;var t=h+A*((g-L)/g);var w=f+z*((g-L)/g);var C=5;var E=h+A*((g-L-C)/g);var I=f+z*((g-L-C)/g);var c=E+z*(3/g);var v=I-A*(3/g);var a=E-z*(3/g);var u=I+A*(3/g);D="M"+h+","+f+"L"+E+","+I+"L"+c+","+v+"L"+t+","+w+"L"+a+","+u+"L"+E+","+I+"Z";d3.select("#viz").select("#D3viz").append("svg:path").attr("class",String).attr("d",D).attr("class","linkCaptionRev").attr("fill-rule","evenodd").attr("fill","white").style("stroke",p.getStrokeColor()).style("stroke-width",1.5).style("stroke-linejoin","bevel").attr("transform","translate(15,40)");d3.select("#viz").select("#D3viz").append("svg:text").text("Link").attr("x",20).attr("y",15).attr("transform","translate(30,45)");d3.select("#viz").select("#D3viz").append("svg:text").attr("id","metexplore").text("MetExploreViz").attr("x",$("#viz").width()-130).attr("y",$("#viz").height()-10);d3.select("#viz").select("#D3viz").append("svg:g").attr("class","logoViz").attr("id","logoViz").append("image").attr("xlink:href","resources/icons/metExploreViz_Logo.svg").attr("width","50").attr("height","50").attr("x",$("#viz").width()-110).attr("y",$("#viz").height()-75);d3.select("#viz").select("#D3viz").append("svg:rect").attr("class","reactionCaption").attr("x",15/2-j.getWidth()*b/2).attr("y",15).attr("width",j.getWidth()*b).attr("height",j.getHeight()*b).attr("rx",j.getRX()*b).attr("ry",j.getRY()*b).attr("fill","white").attr("transform","translate(15,95)").style("stroke",j.getStrokeColor()).style("stroke-width",2);d3.select("#viz").select("#D3viz").append("svg:text").text("Reaction").attr("x",20).attr("y",15).attr("transform","translate(30,105)");d3.select("#viz").select("#D3viz").append("svg:rect").attr("class","metaboliteCaption").attr("x",15/2-r.getWidth()*J/2).attr("y",15+15/2-r.getHeight()*J/2).attr("width",r.getWidth()*J).attr("height",r.getHeight()*J).attr("rx",r.getRX()*J).attr("ry",r.getRY()*J).attr("fill","white").style("stroke","black").style("stroke-width",2).attr("transform","translate(15,130)");d3.select("#viz").select("#D3viz").append("svg:text").text("Metabolites").attr("x",20).attr("y",15).attr("transform","translate(30,140)");metExploreD3.GraphCaption.colorPathwayLegend(175);metExploreD3.GraphCaption.colorMetaboliteLegend(175);d3.select("#viz").select("#D3viz").select("#captionComparment").classed("hide",true);d3.select("#viz").select("#D3viz").select("#captionPathway").classed("hide",true);metExploreD3.GraphCaption.majCaption()},majCaption:function(){var b=_metExploreViz.getGeneralStyle();var a=b.isDisplayedCaption();if(a=="Pathways"){d3.select("#viz").select("#D3viz").select("#captionComparment").classed("hide",true);d3.select("#viz").select("#D3viz").select("#captionPathway").classed("hide",false)}else{d3.select("#viz").select("#D3viz").select("#captionComparment").classed("hide",false);d3.select("#viz").select("#D3viz").select("#captionPathway").classed("hide",true)}},colorMetaboliteLegend:function(p){var b=d3.select("#viz").select("#D3viz").append("svg:g").attr("id","captionComparment").attr("x1",0).attr("y1",0).attr("x2",15).attr("y2",0);var f=metExploreD3.getReactionStyle();var j=Math.max(f.getWidth(),f.getHeight());var a=20/j;var o=metExploreD3.getMetaboliteStyle();var m=Math.max(o.getWidth(),o.getHeight());var c=20/m;metExploreD3.sortCompartmentInBiosource();var q=metExploreD3.getCompartmentInBiosourceLength();if(q==undefined){q=0}center=128;width=127;frequency=Math.PI*2*0.95/q;var h=p;h+=20;b.append("svg:text").text("Compartments :").attr("x",0).attr("y",0).attr("transform","translate(15,"+h+")");h+=20;for(var g=0;g<q;g++){red=Math.sin(frequency*g+2+q)*width+center;green=Math.sin(frequency*g+0+q)*width+center;blue=Math.sin(frequency*g+4+q)*width+center;var d=metExploreD3.getCompartmentInBiosourceSet()[g];d.setColor(metExploreD3.GraphUtils.RGB2Color(red,green,blue));b.append("svg:line").attr("class","metabolite").attr("x1",0).attr("y1",0).attr("x2",15).attr("y2",0).style("stroke",d.getColor()).style("stroke-width",2).attr("transform","translate(15,"+h+")");h+=10;b.append("svg:text").html(d.getName()).attr("x",20).attr("y",-6).attr("transform","translate(30,"+h+")");h+=10}},colorPathwayLegend:function(p){var s=metExploreD3.getPathwaysSet();var m=[];s.forEach(function(v){m.push({key:v})});var r=metExploreD3.getPathwaysLength();if(r==undefined){r=0}center=128;width=127;frequency=Math.PI*2*0.95/r;for(var a=0;a<r;a++){red=Math.sin(frequency*a+2+r)*width+center;green=Math.sin(frequency*a+0+r)*width+center;blue=Math.sin(frequency*a+4+r)*width+center;var o=m[a];o.color=metExploreD3.GraphUtils.RGB2Color(red,green,blue)}var j=d3.select("#viz").select("#D3viz").append("svg:g").attr("id","captionPathway").attr("x1",0).attr("y1",0).attr("x2",15).attr("y2",0);var u=metExploreD3.getReactionStyle();var c=Math.max(u.getWidth(),u.getHeight());var q=20/c;var g=metExploreD3.getMetaboliteStyle();var d=Math.max(g.getWidth(),g.getHeight());var t=20/d;var h=_metExploreViz.getSessionById("viz");m.sort(function(w,v){if(w.key<v.key){return -1}if(w.key>v.key){return 1}return 0});var r=m.length;if(r==undefined){r=0}center=128;width=127;frequency=Math.PI*2*0.95/r;var b=p;b+=20;j.append("svg:text").text("Pathways :").attr("x",0).attr("y",0).attr("transform","translate(15,"+b+")");b+=20;for(var a=0;a<r;a++){red=Math.sin(frequency*a+2+r)*width+center;green=Math.sin(frequency*a+0+r)*width+center;blue=Math.sin(frequency*a+4+r)*width+center;var f=m[a];j.append("svg:line").attr("class","metabolite").attr("x1",0).attr("y1",0).attr("x2",15).attr("y2",0).style("stroke",f.color).style("stroke-width",2).attr("transform","translate(15,"+b+")");b+=10;j.append("svg:text").html(f.key).attr("x",20).attr("y",-6).attr("transform","translate(30,"+b+")");b+=10}}};metExploreD3.GraphUtils={decodeJSON:function(a){try{var b=Ext.decode(a)}catch(c){metExploreD3.displayWarning("Invalid JSON String","Unable to parse the JSON")}return b},launchWebService:function(a,b){$.ajax({url:"src/php/metExplore.php",type:"POST",dataType:"text",data:{data:a},success:function(c){b(c)},error:function(c){alert("Bad")}})},parseWebServiceMapping:function(c){var a=Ext.decode(c);var b=a.mappingdata[0].mappings;b.forEach(function(g){var f=g.data;var j=0;var h=false;while(j<f.length&&!h){if(f.value!=undefined){h=true}j++}if(!h){g.name="undefined"}});var d=JSON.stringify(a.mappingdata[0]);return d},handleFileSelect:function(c,a){if(!window.File||!window.FileReader||!window.FileList||!window.Blob){alert("The File APIs are not fully supported in this browser.");return}if(!c){alert("couldn't find the fileinput element.")}else{if(!c.files){alert("This browser doesn't seem to support the `files` property of file inputs.")}else{file=c.files[0];var b=new FileReader();b.onload=function(){a(b.result,file.name)};b.readAsText(file)}}},colorNameToHex:function(b){var a={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};if(typeof a[b.toLowerCase()]!="undefined"){return a[b.toLowerCase()]}return false},RGB2Color:function(d,c,a){return"#"+metExploreD3.GraphUtils.byte2Hex(d)+metExploreD3.GraphUtils.byte2Hex(c)+metExploreD3.GraphUtils.byte2Hex(a)},chooseTextColor:function(d){if(d!=undefined){var c;if(d.slice(0,1)=="#"){var f=metExploreD3.GraphUtils.hexToRGB(d);var a=f.r;var g=f.g;var b=f.b;if((a*0.299+g*0.687+b*0.114)>186){c="black"}else{c="white"}}else{if(d.slice(0,3)=="rgb"){d=d.replace("rgb","");d=d.replace("(","");d=d.replace(")","");f=d.split(",");var a=f[0];var g=f[1];var b=f[2];if((a*0.299+g*0.687+b*0.114)>186){c="black"}else{c="white"}}else{c="black"}}return c}else{return"black"}},byte2Hex:function(b){var a="0123456789ABCDEF";return String(a.substr((b>>4)&15,1))+a.substr(b&15,1)},hexToRGB:function(a){var c=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;a=a.replace(c,function(h,g,f,d){return g+g+f+f+d+d});var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return b?{r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)}:null},exportGraphPng:function(){var a=$("#viz").cytoscape("get");var c=a.png();var b=new Blob([String(c)],{type:"image/png",encoding:"utf-8"});saveAs(b,"graph.png")},exportPNG:function(){metExploreD3.GraphUtils.escapeUnExportNode();window.URL=(window.URL||window.webkitURL);metExploreD3.GraphUtils.initialize("png")},exportJPG:function(){metExploreD3.GraphUtils.escapeUnExportNode();window.URL=(window.URL||window.webkitURL);metExploreD3.GraphUtils.initialize("jpeg")},escapeUnExportNode:function(){d3.selectAll("#buttonAnim").style("display","none");var b=d3.selectAll("#brush");if(b!=null){b.style("display","none")}var c=d3.selectAll("#buttonLink");if(c!=null){c.style("display","none")}var f=d3.selectAll("#buttonZoomIn");if(f!=null){f.style("display","none")}var h=d3.selectAll("#buttonHand");if(h!=null){h.style("display","none")}var a=d3.selectAll("#whiteBlack");if(a!=null){a.style("display","none")}var g=d3.selectAll("#invertColor");if(g!=null){g.style("display","none")}var d=d3.selectAll("#buttonZoomOut");if(d!=null){d.style("display","none")}},exportSVG:function(){metExploreD3.GraphUtils.escapeUnExportNode();window.URL=(window.URL||window.webkitURL);var a=metExploreD3.GraphUtils.initialize("svg")},initialize:function(c){var b=_metExploreViz.getSessionById("viz");var f=b.getForce();if(b!=undefined){var f=b.getForce();if(f!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){f.stop()}}}var a={xmlns:"http://www.w3.org/2000/xmlns/",xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};var d=[window.document],g=[];iframes=document.querySelectorAll("iframe"),objects=document.querySelectorAll("object");var h=window.document.createElementNS(a.svg,"svg");window.document.body.appendChild(h);var m=getComputedStyle(h);var j=metExploreD3.createLoadMask("Export initialization...","viz");if(j!=undefined){metExploreD3.showMask(j);metExploreD3.deferFunction(function(){[].forEach.call(iframes,function(q){try{if(q.contentDocument){d.push(q.contentDocument)}}catch(p){console.log(p)}});[].forEach.call(objects,function(q){try{if(q.contentDocument){d.push(q.contentDocument)}}catch(p){console.log(p)}});d.forEach(function(r){var p=metExploreD3.GraphUtils.getSources(r,m,a);for(var q=0;q<p.length;q++){console.log(typeof(p[q].classe));if(p[q].classe.includes("D3viz")){g.push(p[q])}}});metExploreD3.hideMask(j);var o=h.parentNode;o.removeChild(h);if(g.length>1){metExploreD3.GraphUtils.createPopover(g,c)}else{if(g.length>0){return metExploreD3.GraphUtils.download(g[0],c)}else{alert("Couldn\u2019t find any SVG nodes.")}}},100)}},createPopover:function(d,b){metExploreD3.GraphUtils.cleanup();d.forEach(function(f){d.forEach(function(g){if(f!==g){if((Math.abs(f.top-g.top)<38)&&(Math.abs(f.left-g.left)<38)){g.top+=38;g.left+=38}}})});var c=document.createElement("div");document.body.appendChild(c);c.setAttribute("class","svg-crowbar");c.style["z-index"]=10000000;c.style.position="absolute";c.style.top=0;c.style.left=0;var a=document.createElement("div");document.body.appendChild(a);a.setAttribute("class","svg-crowbar");a.style.background="rgba(255, 255, 255, 0.7)";a.style.position="fixed";a.style.left=0;a.style.top=0;a.style.width="100%";a.style.height="100%";d.forEach(function(g,j){var f=document.createElement("div");c.appendChild(f);f.setAttribute("class","svg-crowbar");f.style.position="absolute";f.style.top=(g.top+document.body.scrollTop)+"px";f.style.left=(document.body.scrollLeft+g.left)+"px";f.style.padding="4px";f.style["border-radius"]="3px";f.style.color="white";f.style["text-align"]="center";f.style["font-family"]="'Helvetica Neue'";f.style.background="rgba(0, 0, 0, 0.8)";f.style["box-shadow"]="0px 4px 18px rgba(0, 0, 0, 0.4)";f.style.cursor="move";f.textContent="SVG #"+j+": "+(g.id?"#"+g.id:"")+(g.classe?"."+g.classe:"");var h=document.createElement("button");f.appendChild(h);h.setAttribute("data-source-id",j);h.style.width="150px";h.style["font-size"]="12px";h.style["line-height"]="1.4em";h.style.margin="5px 0 0 0";h.textContent="Download";h.onclick=function(m){metExploreD3.GraphUtils.download(g,b)}})},cleanup:function(){var f=document.querySelectorAll(".svg-crowbar");[].forEach.call(f,function(m){m.parentNode.removeChild(m)});d3.selectAll("#buttonAnim").style("display","inline");var a=d3.selectAll("#brush");if(a!=null){a.style("display","inline")}var b=d3.selectAll("#buttonLink");if(b!=null){b.style("display ","inline")}var d=d3.selectAll("#buttonZoomIn");if(d!=null){d.style("display","inline")}var h=d3.selectAll("#buttonHand");if(h!=null){h.style("display","inline")}var g=d3.selectAll("#invertColor");if(g!=null){g.style("display","inline")}var j=d3.selectAll("#whiteBlack");if(j!=null){j.style("display","inline")}var c=d3.selectAll("#buttonZoomOut");if(c!=null){c.style("display","inline")}},getSources:function(f,a,c){var d=[],b=f.querySelectorAll("svg");[].forEach.call(b,function(p){svg=p;if(svg.id=="D3viz"){function o(E){var F=d3.select(E).node();return d3.select(F.parentNode.insertBefore(F.cloneNode(true),F.nextSibling))[0][0]}var B=o(svg);B.setAttribute("version","1.1");B.removeAttribute("xmlns");B.removeAttribute("xlink");if(!B.hasAttributeNS(c.xmlns,"xmlns")){B.setAttributeNS(c.xmlns,"xmlns",c.svg)}if(!B.hasAttributeNS(c.xmlns,"xmlns:xlink")){B.setAttributeNS(c.xmlns,"xmlns:xlink",c.xlink)}var y=B.getElementById("buttonZoomIn");if(y!=null){y.parentNode.removeChild(y)}var w=B.getElementById("buttonZoomOut");if(w!=null){w.parentNode.removeChild(w)}var s=B.getElementById("buttonHand");if(s!=null){s.parentNode.removeChild(s)}var j=B.getElementById("buttonAnim");if(j!=null){j.parentNode.removeChild(j)}var m=B.getElementById("invertColor");if(m!=null){m.parentNode.removeChild(m)}var D=B.getElementById("whiteBlack");if(D!=null){D.parentNode.removeChild(D)}var h=B.getElementById("brush");if(h!=null){h.parentNode.removeChild(h)}var r;d3.select(B).select("#graphComponent").selectAll("g.node").select(".structure_metabolite").each(function(){var F=this.firstChild.getAttribute("href");if(window.XDomainRequest){xdr=new XDomainRequest()}else{if(window.XMLHttpRequest){var J=new XMLHttpRequest();J.open("GET",F,false);J.send(null);if(J.responseXML!=null){var H=J.responseXML.getElementsByTagName("svg")[0];if(this.getAttribute("width")!=null){var K=parseFloat(this.getAttribute("width").split("px")[0])/parseFloat(H.getAttribute("width").split("px")[0]);H.setAttribute("x",this.getAttribute("x"));H.setAttribute("y",this.getAttribute("y"));H.setAttribute("width",this.getAttribute("width").split("px")[0]);H.setAttribute("height",this.getAttribute("height").split("px")[0]);H.setAttribute("class","structure_metabolite");var E=H.children;for(var G=0;G<E.length;G++){E[G].setAttribute("transform","scale("+K+")")}var I=this.parentNode;I.removeChild(this);I.appendChild(H)}}}else{alert("Votre navigateur ne gre pas l'AJAX cross-domain !")}}});d3.select(B).select(".logoViz").each(function(){var F=this.firstChild.getAttribute("href");if(window.XDomainRequest){xdr=new XDomainRequest()}else{if(window.XMLHttpRequest){var I=new XMLHttpRequest();I.open("GET",F,false);I.send(null);if(I.responseXML!=null){var G=I.responseXML.getElementsByTagName("svg")[0];if(this.firstChild.getAttribute("width")!=null){G.setAttribute("x",this.firstChild.getAttribute("x"));G.setAttribute("y",this.firstChild.getAttribute("y"));G.setAttribute("width",this.firstChild.getAttribute("width").split("px")[0]);G.setAttribute("height",this.firstChild.getAttribute("height").split("px")[0]);G.setAttribute("class","logoViz");var E=G.children;var H=this.parentNode;H.removeChild(this);H.appendChild(G)}}}else{alert("Votre navigateur ne gre pas l'AJAX cross-domain !")}}});r=metExploreD3.GraphUtils.setInlineStyles(B,a,r);var A=svg.parentNode.getBoundingClientRect();var t=d3.select(B).select("#graphComponent")[0][0].getBoundingClientRect();var v=A.left+100-t.left;var u=A.top+50-t.top;d3.select(B).select("#graphComponent").attr("transform","translate("+v+","+u+") scale(1)");t=d3.select(B).select("#graphComponent")[0][0].getBoundingClientRect();var C=A.width;if((A.width+t.right-A.right+20)>C){C=A.width+t.right-A.right+20}else{d3.select(B).select("#graphComponent").attr("transform","translate(0,"+u+") scale(1)")}B.setAttribute("width",C);var g=A.height;if((A.height+t.bottom-A.bottom+20)>g){g=A.height+t.bottom-A.bottom+20}B.setAttribute("height",g);d3.select(B).select("#metexplore").text("MetExploreViz").attr("x",B.getAttribute("width")-92).attr("y",B.getAttribute("height")-10);var t=d3.select(B).select("#graphComponent")[0][0].getBoundingClientRect();var v=A.left+100-t.left;var u=A.top+50-t.top;d3.select(B).select("#graphComponent").attr("transform",d3.select(svg).select("#graphComponent").attr("transform"));t=d3.select(B).select("#graphComponent")[0][0].getBoundingClientRect();var C=A.width;B.setAttribute("width",C);var g=A.height;B.setAttribute("height",g);var z=(new XMLSerializer()).serializeToString(B);var q='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">';d.push({top:A.top,left:A.left,width:parseInt(B.getAttribute("width"))*2,height:parseInt(B.getAttribute("height"))*2,classe:B.getAttribute("class"),id:B.getAttribute("id"),parent:svg.parentNode.id,childElementCount:B.childElementCount,source:[q+z]});d3.select(B).remove()}});return d},saveAsSvg:function(f,c){var d=document.createElement("a");if(typeof d.download==="string"){d.href=f;d.download=c;document.body.appendChild(d);d.click();document.body.removeChild(d)}else{window.open(f)}var b=_metExploreViz.getSessionById("viz");var a=b.getForce();if(b!=undefined){if(a!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){a.start()}}}},binaryblob:function(d,o){var g=window.atob(d.toDataURL("image/"+o).replace(/^data:image\/(png|jpeg);base64,/,""));var b=new ArrayBuffer(g.length);var f=new Uint8Array(b);for(var m=0;m<g.length;m++){f[m]=g.charCodeAt(m)}var p=new DataView(b);var c=new Blob([p],{type:"image/"+o});var h=self.URL||self.webkitURL||self;var a=h.createObjectURL(c);var j='<img src="'+a+'">';d3.select("#img").html(j);return a},saveAsBinary:function(f,b,d){var h="data:image/svg+xml;base64,"+window.btoa(decodeURIComponent(encodeURIComponent(f.source)));var c=document.createElement("canvas");c.id="canvas";c.height=f.height*4;c.width=f.width*4;c.style.zIndex=8;c.style.position="absolute";c.style.border="1px solid";var a=document.getElementsByTagName("body")[0];a.appendChild(c);context=c.getContext("2d");var g=new Image();g.onload=function(){var j=metExploreD3.createLoadMask("Export in progress...",f.parent);if(j!=undefined){metExploreD3.showMask(j);metExploreD3.deferFunction(function(){context.drawImage(g,0,0,f.width*4,f.height*4);var m=metExploreD3.GraphUtils.binaryblob(c,d);var p=document.createElement("a");if(typeof p.download==="string"){p.download=b;p.href=m;document.body.appendChild(p);p.click();document.body.removeChild(p)}else{window.open(m)}var o=c.parentNode;o.removeChild(c);metExploreD3.hideMask(j);var r=_metExploreViz.getSessionById("viz");var q=r.getForce();if(r!=undefined){if(q!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){q.start()}}}},100)}};g.src=h},download:function(b,a){if(a=="jpeg"||a=="png"){metExploreD3.GraphUtils.saveAsBinary(b,"metabolicNetwork."+a,a)}if(a=="svg"){var c=new Blob([b.source],{type:"data:image/svg+xml"});var d=URL.createObjectURL(c);metExploreD3.GraphUtils.saveAsSvg(d,"metabolicNetwork.svg")}metExploreD3.GraphUtils.cleanup()},explicitlySetStyle:function(f,h){var a=getComputedStyle(f);var d,j,c,g;var b="";for(d=0,j=a.length;d<j;d++){c=a[d];g=a.getPropertyValue(c);if(g!==h.getPropertyValue(c)){if(f.tagName=="rect"){if(f.getAttribute("class")=="stroke"){if(c!="height"&&c!="width"){b+=c+":"+g+";"}}else{if(c!="fill"&&c!="height"&&c!="width"){b+=c+":"+g+";"}}}else{if(c!="marker-start"||c!="marker-end"){b+=c+":"+g+";"}}}}f.setAttribute("style",b)},traverse:function(a){var b=[];b.push(a);c(a);function c(d){if(d&&d.hasChildNodes()){var f=d.firstChild;if(f.className!=undefined){if(f.tagName!="image"){while(f){if(f.getAttribute!=undefined){if(f.getAttribute("href")!="resources/icons/pause.svg"&&f.getAttribute("href")!="resources/icons/whiteBlack.png"&&f.getAttribute("href")!="resources/icons/invertColor.svg"&&f.getAttribute("href")!="resources/icons/link.svg"&&f.getAttribute("href")!="resources/icons/unlink.svg"){if(f.nodeType===1&&f.nodeName!="SCRIPT"){b.push(f);c(f)}f=f.nextSibling}}else{if(f.nodeType===1&&f.nodeName!="SCRIPT"){c(f)}f=f.nextSibling}}}}else{while(f){if(f.nodeType===1&&f.nodeName!="SCRIPT"){c(f)}f=f.nextSibling}}}}return b},setInlineStyles:function(c,b,a){var f=metExploreD3.GraphUtils.traverse(c);a=f;var d=f.length;while(d--){metExploreD3.GraphUtils.explicitlySetStyle(f[d],b)}return a},exportSVGMain:function(){d3.selectAll("#buttonAnim").style("display","none");var b=d3.selectAll("#buttonLink");if(b!=null){b.style("display","none")}var a=d3.selectAll("#brush");if(a!=null){a.style("display","none")}var f=d3.selectAll("#buttonZoomIn");if(f!=null){f.style("display","none")}var h=d3.selectAll("#buttonHand");if(h!=null){h.style("display","none")}var g=d3.selectAll("#invertColor");if(g!=null){g.style("display","none")}var j=d3.selectAll("#whiteBlack");if(j!=null){j.style("display","none")}var d=d3.selectAll("#buttonZoomOut");if(d!=null){d.style("display","none")}window.URL=(window.URL||window.webkitURL);var c=metExploreD3.GraphUtils.initializeMain();return c},initializeMain:function(){var a={xmlns:"http://www.w3.org/TR/xml-names/",xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};var d=[window.document],c=[];iframes=document.querySelectorAll("iframe"),objects=document.querySelectorAll("object");var f=window.document.createElementNS(a.svg,"svg");window.document.body.appendChild(f);var b=getComputedStyle(f);[].forEach.call(iframes,function(g){try{if(g.contentDocument){d.push(g.contentDocument)}}catch(h){console.log(h)}});[].forEach.call(objects,function(g){try{if(g.contentDocument){d.push(g.contentDocument)}}catch(h){console.log(h)}});d.forEach(function(g){var h=metExploreD3.GraphUtils.getSources(g,b,a);for(var j=0;j<h.length;j++){if(h[j].classe.includes("D3viz")){c.push(h[j])}}});if(c.length>0){return metExploreD3.GraphUtils.downloadMain(c[c.length-1])}else{alert("The Crowbar couldn\u2019t find any SVG nodes.")}},downloadMain:function(a){var b="untitled";if(a.id){b=a.id}else{if(a.classe){b=a.classe}else{if(window.document.title){b=window.document.title.replace(/[^a-z0-9]/gi,"-").toLowerCase()}}}var c=window.URL.createObjectURL(new Blob(a.source,{type:"text/xml"}));metExploreD3.GraphUtils.cleanup();return a.source[0]},saveNetworkDot:function(){var a=metExploreD3.createLoadMask("Export DOT file...","viz");if(a!=undefined){metExploreD3.showMask(a);metExploreD3.deferFunction(function(){var m="digraph dotGraph {";var d=_metExploreViz.getSessionById("viz").getD3Data().getLinks();var g=d.length;var h={};var b=0;d.forEach(function(o){var p=o.getSource().getId();var q=o.getTarget().getId();if(h[p]==undefined){h[p]=i;p=i;i++}else{p=h[p]}if(h[q]==undefined){h[q]=i;q=i;i++}else{q=h[q]}if(o.isReversible()=="true"){m+=p+" -> "+q;m+=",\n";m+=q+" -> "+p}else{m+=p+" -> "+q}if(d.indexOf(o)!=g-1){m+=",\n"}});m+="}";var c=new Blob([m],{type:"text"});var f=URL.createObjectURL(c);var j=document.createElement("a");if(typeof j.download==="string"){j.href=f;j.download="save.dot";document.body.appendChild(j);j.click();document.body.removeChild(j)}else{window.open(uri)}metExploreD3.hideMask(a)},100)}},saveNetworkJSON:function(){var a=metExploreD3.createLoadMask("Saving...","viz");if(a!=undefined){metExploreD3.showMask(a);metExploreD3.deferFunction(function(){var m="{";m+='\n"linkStyle":'+JSON.stringify(metExploreD3.getLinkStyle());m+=',\n"reactionStyle":'+JSON.stringify(metExploreD3.getReactionStyle());m+=',\n"biosource":'+JSON.stringify(_metExploreViz.getBiosource());m+=',\n"generalStyle":'+JSON.stringify(metExploreD3.getGeneralStyle());m+=',\n"metaboliteStyle":'+JSON.stringify(metExploreD3.getMetaboliteStyle());m+=',\n"comparedPanels":'+JSON.stringify(_metExploreViz.comparedPanels);m+=',\n"linkedByTypeOfMetabolite":'+JSON.stringify(_metExploreViz.linkedByTypeOfMetabolite);m+=',\n"sessions":{';var b=_metExploreViz.getSessionsSet();var g=0;for(var f in b){b[f].getD3Data().initNodeIndex();m+="\n"+JSON.stringify(f)+':{\n"id":"'+_metExploreViz.getSessionById(f).getId()+'",';m+='\n"animated": false ,';m+='\n"d3Data":{"id":'+JSON.stringify(f)+",";m+='"nodes":[';_metExploreViz.getSessionById(f).getD3Data().getNodes().forEach(function(p){m+='{"name":'+JSON.stringify(p.getName())+",";if(p.getLabel()!=undefined){m+='"label":'+JSON.stringify(p.getLabel())+","}if(p.getCompartment()!=undefined){m+='"compartment":'+JSON.stringify(p.getCompartment())+","}if(p.getPathways()!=undefined){m+='"pathways":'+JSON.stringify(p.getPathways())+","}m+='"dbIdentifier":'+JSON.stringify(p.getDbIdentifier())+",";if(p.getIdentifier()!=undefined){m+='"identifier":'+JSON.stringify(p.getIdentifier())+","}if(p.getEC()!=undefined){m+='"ec":'+JSON.stringify(p.getEC())+","}m+='"id":'+JSON.stringify(p.getId())+",";if(p.getIdentifier()!=undefined){m+='"identifier":'+JSON.stringify(p.getIdentifier())+","}if(p.getReactionReversibility()!=undefined){m+='"reactionReversibility":'+JSON.stringify(p.getReactionReversibility())+","}if(p.getIsSideCompound()!=undefined){m+='"isSideCompound":'+JSON.stringify(p.getIsSideCompound())+","}m+='"biologicalType":'+JSON.stringify(p.getBiologicalType())+",";m+='"selected":'+JSON.stringify(p.isSelected())+",";m+='"locked":'+JSON.stringify(p.isLocked())+",";if(p.isDuplicated()!=undefined){m+='"duplicated":'+JSON.stringify(p.isDuplicated())+","}else{m+='"duplicated":false,'}m+='"labelVisible":'+JSON.stringify(p.getLabelVisible())+",";if(p.getSvg()!=undefined){m+='"svg":'+JSON.stringify(p.getSvg())+",";m+='"svgWidth":'+JSON.stringify(p.getSvgWidth())+",";m+='"svgHeight":'+JSON.stringify(p.getSvgHeight())+","}if(p.x!=undefined){m+='"x":'+JSON.stringify(p.x)+","}if(p.y!=undefined){m+='"y":'+JSON.stringify(p.y)+","}if(p.px!=undefined){m+='"px":'+JSON.stringify(p.px)+","}if(p.py!=undefined){m+='"py":'+JSON.stringify(p.py)}m+="}";var o=_metExploreViz.getSessionById(f).getD3Data().getNodes().indexOf(p);if(o!=_metExploreViz.getSessionById(f).getD3Data().getNodes().length-1){m+=","}});m+="],";m+='"links":[';var j=_metExploreViz.getSessionById(f).getD3Data().getLinks().filter(function(o){return o.getInteraction()!="hiddenForce"});j.forEach(function(p){m+='{"id":'+JSON.stringify(p.getId())+",";m+='"source":'+JSON.stringify(p.getSource().index)+",";m+='"target":'+JSON.stringify(p.getTarget().index)+",";m+='"interaction":'+JSON.stringify(p.getInteraction())+",";m+='"reversible":'+JSON.stringify(p.isReversible());m+="}";var o=j.indexOf(p);if(o!=j.length-1){m+=","}});m+="]},";m+='\n"colorMappings":'+JSON.stringify(_metExploreViz.getSessionById(f).getColorMappingsSet())+",";m+='\n"linked":'+JSON.stringify(_metExploreViz.getSessionById(f).isLinked())+",";m+='\n"active":'+JSON.stringify(_metExploreViz.getSessionById(f).isActive())+",";m+='\n"duplicatedNodes":'+JSON.stringify(_metExploreViz.getSessionById(f).getDuplicatedNodes())+",";m+='\n"selectedNodes":'+JSON.stringify(_metExploreViz.getSessionById(f).getSelectedNodes())+",";m+='\n"resizable":'+_metExploreViz.getSessionById(f).isResizable();m+="}";if(g<b.length-1){m+=","}g++}m+="}}";var c=new Blob([m],{type:"text/json"});var d=URL.createObjectURL(c);var h=document.createElement("a");if(typeof h.download==="string"){h.href=d;h.download="save.json";document.body.appendChild(h);h.click();document.body.removeChild(h)}else{window.open(uri)}metExploreD3.hideMask(a)},100)}},saveNetworkGml:function(){var a=metExploreD3.createLoadMask("Export GML file...","viz");if(a!=undefined){metExploreD3.showMask(a);metExploreD3.deferFunction(function(){var c="graph [";c+="\ndirected 1\n";var g=0;var j={};var b={};_metExploreViz.getSessionById("viz").getD3Data().getNodes().forEach(function(m){j[m.getId()]=g;c+="node [\n";c+="id "+g+"\n";if(m.getIsSideCompound()){console.log(b[m.getName()]);if(b[m.getName()]!=undefined){console.log(b[m.getName()]);b[m.getName()]++}else{b[m.getName()]=1;console.log(b[m.getName()])}c+='label "'+m.getName()+"("+b[m.getName()]+')"\n';console.log('label "'+m.getName()+b[m.getName()])}else{c+='label "'+m.getName()+'"\n'}c+="graphics [\n";c+="x "+m.x+"\n";c+="y "+m.y+"\n";c+="]\n";c+="]\n";g++});_metExploreViz.getSessionById("viz").getD3Data().getLinks().forEach(function(m){c+="edge [\n";c+="source "+j[m.getSource().getId()]+"\n";c+="target "+j[m.getTarget().getId()]+"\n";c+='label "'+m.getSource().getId().replace("-","")+"-"+m.getTarget().getId().replace("-","")+'"\n';c+="]\n";if(m.isReversible()=="true"){c+="edge [\n";c+="source "+j[m.getTarget().getId()]+"\n";c+="target "+j[m.getSource().getId()]+"\n";c+='label "'+m.getSource().getId().replace("-","")+"-"+m.getTarget().getId().replace("-","")+'"\n';c+="]\n"}});c+="]";var d=new Blob([c],{type:"text"});var f=URL.createObjectURL(d);var h=document.createElement("a");if(typeof h.download==="string"){h.href=f;h.download="save.gml";document.body.appendChild(h);h.click();document.body.removeChild(h)}else{window.open(uri)}metExploreD3.hideMask(a)},100)}}};metExploreD3.GraphNetwork={task:"",delayedInitialisation:function(a){var b={};b.render=function(){var c=d3.select("#"+a);c.append("svg").attr("width","100%").attr("height","100%").attr("class","D3viz").attr("id","D3viz").style("background-color","#fff")};b.render();metExploreD3.GraphLink.delayedInitialisation(a);metExploreD3.GraphNode.delayedInitialisation(a);return b},tick:function(m){if(_metExploreViz.getComparedPanelById(m)!=null||m=="viz"){var y=metExploreD3.getScaleById(m);metExploreD3.GraphLink.tick(m,y);metExploreD3.GraphNode.tick(m);var v=y.getZoomScale();var s=metExploreD3.GraphNetwork.isAnimated(m);var b=_metExploreViz.getSessionById(m);var q=metExploreD3.getGeneralStyle();if(s&&v>0.05&&b.isResizable()){var f=document.getElementById(m).getBoundingClientRect();var a=d3.select("#"+m).select("#D3viz")[0][0].getElementById("graphComponent").getBoundingClientRect();var p=parseInt(d3.select("#"+m).select("#D3viz").style("width"));var o=parseInt(d3.select("#"+m).select("#D3viz").style("height"));if(f.top>a.top||f.left>a.left||f.bottom<a.bottom||f.right<a.right){var g=b.getD3Data().getNodesLength();var w=3000;if(g<q.getReactionThreshold()||!q.isDisplayedLabelsForOpt()){w=3000}metExploreD3.fixDelay(metExploreD3.GraphNetwork.task,w);var d=y.getZoom();var u=0.01*g/100;var t=v-(v*u);d.scale(t);var h=t*p;var r=t*o;var j=(p-h)/2;var c=(o-r)/2;d.translate([j,c]);d.event(d3.select("#"+m).select("#D3viz"));y.setZoomScale(t);y.setXScale(d.x());y.setYScale(d.y())}else{if(!((f.top+o/10>a.top&&f.bottom-o/10<a.bottom)||(f.left+p/10>a.left&&f.right-p/10<a.right))){var g=b.getD3Data().getNodesLength();var w=3000;if(g<q.getReactionThreshold()||!q.isDisplayedLabelsForOpt()){w=3000}metExploreD3.fixDelay(metExploreD3.GraphNetwork.task,w);var d=y.getZoom();if(u==undefined){u=0.01}else{u=u/2}var t=v+(v*u);d.scale(t);var h=t*p;var r=t*o;var j=(p-h)/2;var c=(o-r)/2;d.translate([j,c]);d.event(d3.select("#"+m).select("#D3viz"));y.setZoomScale(t);y.setXScale(d.x());y.setYScale(d.y())}}}}},zoom:function(b){var a=metExploreD3.getScaleById(b);d3.select("#"+b).select("#D3viz").select("#graphComponent").attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")");var c=a.getZoom();a.setZoomScale(d3.event.scale);a.setXScale(c.x());a.setYScale(c.y());metExploreD3.GraphLink.tick(b,a)},zoomIn:function(){_MyThisGraphNode.dblClickable=false;var a=this.parentNode.parentNode.id;var h=metExploreD3.getScaleById(a);var c=h.getZoom();var d=_metExploreViz.getSessionById(a);var g=document.getElementById(a).getBoundingClientRect();var f=d3.select("#"+a).select("#D3viz")[0][0].getElementById("graphComponent").getBoundingClientRect();var c=h.getZoom();var b=parseInt(d3.select("#"+a).select("#D3viz").style("width"));var j=parseInt(d3.select("#"+a).select("#D3viz").style("height"));c.scale(h.getZoomScale()*1.1);c.event(d3.select("#"+a).select("#D3viz"));h.setXScale(c.x());h.setYScale(c.y());h.setZoomScale(h.getZoomScale()*1.1);metExploreD3.GraphLink.tick(a,h)},zoomOut:function(){_MyThisGraphNode.dblClickable=false;var a=this.parentNode.parentNode.id;var h=metExploreD3.getScaleById(a);var c=h.getZoom();var d=_metExploreViz.getSessionById(a);var g=document.getElementById(a).getBoundingClientRect();var f=d3.select("#"+a).select("#D3viz")[0][0].getElementById("graphComponent").getBoundingClientRect();var c=h.getZoom();var b=parseInt(d3.select("#"+a).select("#D3viz").style("width"));var j=parseInt(d3.select("#"+a).select("#D3viz").style("height"));c.scale(h.getZoomScale()*0.9);c.event(d3.select("#"+a).select("#D3viz"));h.setXScale(c.x());h.setYScale(c.y());h.setZoomScale(h.getZoomScale()*0.9);metExploreD3.GraphLink.tick(a,h)},animationButtonOn:function(a){d3.select("#"+a).select("#buttonAnim").select("image").remove();d3.select("#"+a).select("#buttonAnim").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/pause.svg").attr("width","50").attr("height","50").attr("transform","translate(10,10) scale(.5)");metExploreD3.GraphNetwork.setAnimated(a,true)},animationButtonOff:function(a){d3.select("#"+a).select("#buttonAnim").select("image").remove();d3.select("#"+a).select("#buttonAnim").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/play.svg").attr("width","50").attr("height","50").attr("transform","translate(10,10) scale(.5)");metExploreD3.GraphNetwork.setAnimated(a,false)},play:function(g){var j=_metExploreViz.getSessionsSet();var a=this.parentNode.parentNode.id;var f=_metExploreViz.getSessionById(a);if(f!=undefined){var c=metExploreD3.GraphNetwork.isAnimated(a);if(c=="false"){if(f.isLinked()){for(var h in j){if(j[h].isLinked()){metExploreD3.GraphNetwork.animationButtonOn(j[h].getId())}}var b=_metExploreViz.getSessionById("viz").getForce();b.start()}else{metExploreD3.GraphNetwork.animationButtonOn(a);var b=f.getForce();b.start()}}else{if(f.isLinked()){for(var h in j){if(j[h].isLinked()){metExploreD3.GraphNetwork.animationButtonOff(j[h].getId())}}var b=_metExploreViz.getSessionById("viz").getForce();b.stop()}else{metExploreD3.GraphNetwork.animationButtonOff(a);var b=f.getForce();b.stop()}}}},setLink:function(h){that=this;var b=this.parentNode.parentNode.id;var f=_metExploreViz.getSessionById(b);var g=_metExploreViz.getSessionById("viz");if(f!=undefined){var c=f.getForce();var a=d3.select(this).attr("isLink");d3.select(this).select("image").remove();if(a=="false"){metExploreD3.GraphNetwork.link(that)}else{metExploreD3.GraphNetwork.unLink(that)}}},link:function(d){var a=d.parentNode.parentNode.id;var g=_metExploreViz.getSessionById(a);var c=_metExploreViz.getSessionById("viz");var f=metExploreD3.GraphNetwork.isAnimated("viz");d3.select(d).attr("isLink","true");g.setLinked(true);c.setLinked(true);if(f=="true"){metExploreD3.GraphNetwork.animationButtonOn(a)}else{metExploreD3.GraphNetwork.animationButtonOff(a)}var h=d3.select(d).attr("isLink");d3.select(d).select("image").remove();d3.select(d).append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/link.svg").attr("width","50").attr("height","50").attr("transform","translate(10,50) scale(.5)");if(g!=undefined){if(c.getDuplicatedNodesCount()>0){var b=d3.select("#"+a).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(j){return j.getBiologicalType()=="metabolite"});c.getDuplicatedNodes().forEach(function(j){b.filter(function(m){return m.getId()==j}).each(function(m){m.setIsSideCompound(true)})});metExploreD3.GraphNetwork.duplicateSideCompoundsById(c.getDuplicatedNodes(),a);metExploreD3.GraphNetwork.looksLinked();if(g.isLinked()){metExploreD3.GraphNetwork.graphAlignment(a)}}else{metExploreD3.GraphNetwork.graphAlignment(a)}}metExploreD3.GraphNetwork.initCentroids()},unLink:function(d){var c=d.parentNode.parentNode.id;var b=_metExploreViz.getSessionById(c);d3.select(d).append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/unlink.svg").attr("width","50").attr("height","50").attr("transform","translate(10,50) scale(.5)");d3.select(d).attr("isLink","false");b.setLinked(false);metExploreD3.GraphNetwork.looksLinked();var a=metExploreD3.GraphNetwork.isAnimated(c);if(a=="true"){var f=b.getForce();f.start()}},looksLinked:function(){var a=_metExploreViz.getSessionsSet();var c=_metExploreViz.getSessionById("viz");c.setLinked(false);for(var b in a){if(a[b].isLinked()){c.setLinked(true)}}},refreshSvg:function(g){var b=_metExploreViz.getSessionById(g).getD3Data();var s=b.getNodes();metExploreD3.fireEventParentWebSite("refreshCart",s);var p=[];for(var z=0;z<s.length-1;z++){p.push(s[z].name)}p=p.sort();var B=parseInt(metExploreD3.GraphPanel.getHeight(g));var f=parseInt(metExploreD3.GraphPanel.getWidth(g));var q=metExploreD3.getLinkStyle();var t=metExploreD3.getGeneralStyle();var r=metExploreD3.getMetaboliteStyle();var m=metExploreD3.getReactionStyle();var v=Math.max(m.getWidth(),m.getHeight());var C=Math.max(r.getWidth(),r.getHeight());var a=Math.max(v,C);var E=d3.layout.force().friction(0.9).gravity(0.06).charge(-150).linkDistance(function(h){if(h.getSource().getIsSideCompound()||h.getTarget().getIsSideCompound()){return q.getSize()/2+a}else{return q.getSize()+a}}).size([f,B]);var D=_metExploreViz.getSessionById(g);D.setActivity(true);D.setForce(E);var A=d3.scale.linear().domain([0,f]).range([0,f]);var G=d3.scale.linear().domain([B,0]).range([B,0]);if(g=="viz"){metExploreD3.GraphCaption.drawCaption()}if(D.getScale()==undefined){var d=metExploreD3.GraphNetwork;metExploreD3.GraphNetwork.zoomListener=d3.behavior.zoom().x(A).y(G).scaleExtent([0.01,30]).on("zoom",function(w){if(metExploreD3.GraphNetwork.zoomListener.scale()<0.8){d3.select("#"+g).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",true)}else{d3.select("#"+g).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",false)}var h=_metExploreViz.getSessionById(g);if(d3.event.sourceEvent!=null){if(d3.event.sourceEvent.type=="wheel"){h.setResizable(false)}}if(h.isActive()){d.zoom(g)}});var u=new Scale(g);u.setScale(A,G,1,1,1,metExploreD3.GraphNetwork.zoomListener.scale(),metExploreD3.GraphNetwork.zoomListener);metExploreD3.setScale(u,g)}else{var d=metExploreD3.GraphNetwork;metExploreD3.GraphNetwork.zoomListener=d3.behavior.zoom().x(A).y(G).scaleExtent([0.01,30]).on("zoom",function(w){if(metExploreD3.GraphNetwork.zoomListener.scale()<0.8){d3.select("#"+g).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",true)}else{d3.select("#"+g).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",false)}var h=_metExploreViz.getSessionById(this.parentNode.id);if(d3.event.sourceEvent!=null){if(d3.event.sourceEvent.type=="wheel"){h.setResizable(false)}}if(h.isActive()){d.zoom(this.parentNode.id)}});var u=new Scale(g);u.setScale(A,G,1,1,1,metExploreD3.GraphNetwork.zoomListener.scale(),metExploreD3.GraphNetwork.zoomListener);metExploreD3.setScale(u,g)}E.on("start",function(){if(b.getNodes().length>t.getReactionThreshold()&&t.isDisplayedLinksForOpt()){d3.selectAll("path.link").remove()}});E.on("end",function(){var h=metExploreD3.getScaleById(g);if((b.getNodes().length>t.getReactionThreshold()&&t.isDisplayedLinksForOpt())){metExploreD3.GraphLink.reloadLinks(g,b,q,r)}metExploreD3.GraphLink.tick(g,h)});var o=d3.select("#"+g);o.svg=o.select("#D3viz").selectAll("*").remove();_metExploreViz.setLinkedByTypeOfMetabolite(false);var j;var c=false;var F=d3.select("#"+g).select("#D3viz").append("g").datum(function(){return{selected:false,previouslySelected:false}}).attr("id","brush").attr("class","brush").call(d3.svg.brush().x(A).y(G).on("brushstart",function(J){document.addEventListener("mousedown",function(K){if(K.button===1){K.stopPropagation();K.preventDefault();K.stopImmediatePropagation()}});var w=d3.select("#"+g).select("#buttonHand").attr("scrollable");_MyThisGraphNode.activePanel=this.parentNode.parentNode.id;var I=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(d3.event.sourceEvent.button!=1&&w!="true"){if(I!=undefined){if(I.isLinked()){var h=_metExploreViz.getSessionById("viz");if(h!=undefined){var H=h.getForce();if(H!=undefined){H.stop()}}}else{var H=I.getForce();if(H!=undefined){H.stop()}}}c=true;d3.select("#"+g).select("#brush").classed("hide",false);d3.select("#"+g).select("#D3viz").on("mousedown.zoom",null);j=d3.select("#"+g).select("#graphComponent").selectAll("g.node");j.each(function(K){K.previouslySelected=K.isSelected()})}else{var H=I.getForce();if(H!=undefined){H.stop()}d3.select("#"+g).selectAll("#D3viz").style("cursor","all-scroll");d3.selectAll("#brush").classed("hide",true)}}).on("brushend",function(){if(d3.event.sourceEvent.button!=1&&c){var M=d3.event.target.extent();if(M[1][0]-M[0][0]>20||M[1][1]-M[0][1]>20){var J;var M=d3.event.target.extent();var h=metExploreD3.getScaleById(g);var I=h.getZoomScale();var w=metExploreD3.createLoadMask("Selection in progress...",g);if(w!=undefined){metExploreD3.showMask(w);metExploreD3.deferFunction(function(){j.classed("selected",function(U){var T=h.getXScale();var S=h.getYScale();J=(T(M[0][0])<=T(U.x)&&T(U.x)<T(M[1][0]))&&(S(M[0][1])<=S(U.y)&&S(U.y)<S(M[1][1]));if((U.isSelected()==false&&J==true)||(U.isSelected()==true&&J==false&&!U.previouslySelected)){_MyThisGraphNode.selection(U,g)}return J});metExploreD3.hideMask(w);var Q=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(Q!=undefined){if(Q.isLinked()){var R=_metExploreViz.getSessionById("viz");if(R!=undefined){var O=metExploreD3.GraphNetwork.isAnimated(R.getId());if(O=="true"){var P=R.getForce();if(P!=undefined){if((metExploreD3.GraphNetwork.isAnimated(R.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(R.getId())==null)){P.start()}}}}}else{var P=Q.getForce();var O=metExploreD3.GraphNetwork.isAnimated(Q.getId());if(O=="true"){var P=Q.getForce();if(P!=undefined){if((metExploreD3.GraphNetwork.isAnimated(Q.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(Q.getId())==null)){P.start()}}}}}c=false},100)}}}else{var K=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(K!=undefined){if(K.isLinked()){var H=_metExploreViz.getSessionById("viz");if(H!=undefined){var L=metExploreD3.GraphNetwork.isAnimated(H.getId());if(L=="true"){var N=H.getForce();if(N!=undefined){if((metExploreD3.GraphNetwork.isAnimated(H.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(H.getId())==null)){N.start()}}}}}else{var N=K.getForce();var L=metExploreD3.GraphNetwork.isAnimated(K.getId());if(L=="true"){var N=K.getForce();if(N!=undefined){if(d3.select(metExploreD3.GraphNetwork.isAnimated(K.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(K.getId())==null)){N.start()}}}}}}d3.event.target.clear();d3.select(this).call(d3.event.target);var h=metExploreD3.getScaleById(g);d3.select("#"+g).selectAll("#D3viz").style("cursor","default");d3.select("#"+g).selectAll("#D3viz").call(h.getZoom()).on("dblclick.zoom",null).on("mousedown",null);d3.event.target.extent();d3.selectAll("#brush").classed("hide",false)}));var B=parseInt(metExploreD3.GraphPanel.getHeight(g));var f=parseInt(metExploreD3.GraphPanel.getWidth(g));d3.select("#"+g).select("#D3viz").append("foreignObject").attr("x",f-300).attr("y",100).attr("width","500").attr("height","500").append("xhtml:div").attr("id","tooltip2").classed("tooltip2",true).classed("hide",true);o.svg=d3.select("#"+g).select("#D3viz").call(metExploreD3.GraphNetwork.zoomListener).on("dblclick.zoom",null).attr("pointer-events","all").append("svg:g").attr("class","graphComponent").attr("id","graphComponent");if(D!=undefined){var E=D.getForce();if(D.isResizable()!=undefined&&D.isResizable()!=false){metExploreD3.GraphNetwork.task.cancel()}D.setResizable(true);metExploreD3.GraphNetwork.task=metExploreD3.createDelayedTask(function(){D.setResizable(false)})}d3.select("#"+g).select("#D3viz").attr("animation",function(){if(D.isAnimated()){return true}else{return false}}).append("svg:g").attr("class","buttonAnim").attr("id","buttonAnim").on("click",metExploreD3.GraphNetwork.play).style("cursor","hand").append("image").attr("xlink:href",function(){if(D.isAnimated()){return document.location.href.split("index.html")[0]+"resources/icons/pause.svg"}else{return document.location.href.split("index.html")[0]+"resources/icons/play.svg"}}).attr("width","50").attr("height","50").attr("transform","translate(10,10) scale(.5)");d3.select("#"+g).select("#D3viz").append("svg:g").attr("class","buttonRescale").attr("id","buttonRescale").on("click",function(){metExploreD3.GraphNetwork.rescale(g)}).style("cursor","hand").append("image").attr("xlink:href",function(){return document.location.href.split("index.html")[0]+"resources/icons/rescale.png"}).attr("width","50").attr("height","50").attr("transform","translate(80,10) scale(.5)");d3.select("#"+g).select("#D3viz").append("svg:g").attr("class","whiteBlack").attr("id","whiteBlack").attr("x",(f-100)).attr("y",100).on("click",function(){if(d3.select("#"+g).style("-webkit-filter").search("grayscale")==-1&&d3.select("#"+g).style("filter").search("grayscale")==-1){d3.select("#"+g).style("filter","grayscale(100%)").style("-webkit-filter","grayscale(100%)")}else{d3.select("#"+g).style("filter","").style("-webkit-filter","")}}).style("cursor","hand").style("visibility","hidden").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/blackWhite.png").attr("width","50").attr("height","50").attr("transform","translate("+(f-100)+",100) scale(0.5)");d3.select("#"+g).select("#D3viz").append("svg:g").attr("class","invertColor").attr("id","invertColor").attr("x",(f-100)).attr("y",150).on("click",function(){if(d3.select("#"+g).style("-webkit-filter").search("invert")==-1&&d3.select("#"+g).style("filter").search("invert")==-1){d3.select("#"+g).style("filter","invert(100%)").style("-webkit-filter","invert(100%)")}else{d3.select("#"+g).style("filter","").style("-webkit-filter","")}}).style("cursor","hand").style("visibility","hidden").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/invertColor.svg").attr("width","50").attr("height","50").attr("transform","translate("+(f-100)+",150) scale(0.5)");d3.select("#"+g).select("#D3viz").append("svg:g").attr("class","buttonZoomIn").attr("id","buttonZoomIn").attr("x",(f-60)).attr("y",10).on("click",metExploreD3.GraphNetwork.zoomIn).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/zoomin.svg").attr("width","50").attr("height","50").style("opacity",0.2).attr("transform","translate("+(f-60)+",10) scale(1)").on("mouseover",function(h){d3.select(this).transition().duration(500).style("opacity",1)}).on("mouseout",function(h){d3.select(this).transition().duration(500).style("opacity",0.2)});d3.select("#"+g).select("#D3viz").append("svg:g").attr("class","buttonZoomOut").attr("id","buttonZoomOut").attr("x",(f-110)).attr("y",10).on("click",metExploreD3.GraphNetwork.zoomOut).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/zoomout.svg").attr("width","50").attr("height","50").style("opacity",0.2).attr("transform","translate("+(f-110)+",10) scale(1)").on("mouseover",function(h){d3.select(this).transition().duration(500).style("opacity",1)}).on("mouseout",function(h){d3.select(this).transition().duration(500).style("opacity",0.2)});d3.select("#"+g).select("#D3viz").append("svg:g").attr("class","buttonHand").attr("id","buttonHand").attr("x",(f-160)).attr("y",10).attr("scrollable","false").on("click",metExploreD3.GraphNetwork.moveGraph).style("opacity",1).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/handcursor.svg").attr("width","50").attr("height","50").attr("transform","translate("+(f-160)+",10) scale(1)");d3.select("#"+g).select("#D3viz").select("buttonHand").style("opacity",0);d3.select("#"+g).on("mouseover",function(){d3.select("#"+g).select("#D3viz").select("#buttonZoomOut").transition().duration(500).style("opacity",1);d3.select("#"+g).select("#D3viz").select("#buttonZoomIn").transition().duration(500).style("opacity",1);var w=_metExploreViz.getSessionById(g);if(w.isActive()){var h=d3.select("#"+g).select("#buttonHand").attr("scrollable");if(h=="false"){d3.select("#"+g).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",0.2)}else{d3.select("#"+g).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",1)}}}).on("mouseout",function(){d3.select("#"+g).select("#D3viz").select("#buttonZoomOut").transition().duration(500).style("opacity",0);d3.select("#"+g).select("#D3viz").select("#buttonZoomIn").transition().duration(500).style("opacity",0);d3.select("#"+g).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",0)});if(D.isAnimated()){metExploreD3.GraphNetwork.setAnimated(g,true)}else{metExploreD3.GraphNetwork.setAnimated(g,false)}var q=metExploreD3.getLinkStyle();var r=metExploreD3.getMetaboliteStyle();metExploreD3.GraphLink.refreshLink(g,D,q,r);metExploreD3.GraphNode.refreshNode(g);if(g!="viz"){d3.select("#"+g).select("#D3viz").append("svg:g").attr("class","buttonLink").attr("id","buttonLink").attr("isLink","false").on("click",metExploreD3.GraphNetwork.setLink).style("cursor","hand").append("image").attr("xlink:href",function(){if(D.isLinked()){return document.location.href.split("index.html")[0]+"resources/icons/link.svg"}else{return document.location.href.split("index.html")[0]+"resources/icons/unlink.svg"}}).attr("width","50").attr("height","50").attr("transform","translate(10,50) scale(.5)")}else{metExploreD3.GraphNetwork.looksLinked();if(D.isLinked()){metExploreD3.GraphNetwork.graphAlignment(g)}}var b=D.getD3Data();var E=D.getForce();E.nodes(b.getNodes()).links(b.getLinks()).on("tick",function(h){var w=metExploreD3.getGeneralStyle().useClusters();var I=metExploreD3.getGeneralStyle().isDisplayedConvexhulls();if(w&&I!=false){var H=h.alpha*0.1;b.getNodes().forEach(function(P){if(I=="Compartments"){var J=null;if(P.getBiologicalType()=="metabolite"){J=P.getCompartment()}else{var O=[];for(var N in D.groups){if(D.groups.hasOwnProperty(N)){var L=D.groups[N].values.indexOf(P);if(L!=-1){O.push(D.groups[N].key)}}}if(O.length<2){J=O[0]}}if(J!=null){var M=_metExploreViz.getSessionById(g).getForceCentroids();var K=M.nodes().find(function(Q){return Q.id==J});P.x+=(K.x-P.x)*H;P.y+=(K.y-P.y)*H}}else{if(I=="Pathways"&&P.getPathways().length<2){var J=D.getGroupByKey(P.getPathways()[0]);if(J!=null){var M=_metExploreViz.getSessionById(g).getForceCentroids();var K=M.nodes().find(function(Q){return Q.id==P.getPathways()[0]});P.x+=(K.x-P.x)*H;P.y+=(K.y-P.y)*H}}}})}if(E.alpha()>=0.005){setTimeout(metExploreD3.GraphNetwork.tick(g),0)}});if(D.isAnimated()){E.start()}else{E.start();E.stop();metExploreD3.GraphNetwork.tick(g)}var y=t.isDisplayedConvexhulls();if(y&&g=="viz"){metExploreD3.GraphLink.displayConvexhulls(g)}D.setForce(E);metExploreD3.sortCompartmentInBiosource();metExploreD3.GraphNode.colorStoreByCompartment(metExploreD3.GraphNode.node)},rescale:function(q){var g=d3.select("#"+q).select("#D3viz")[0][0].getElementById("graphComponent").getBoundingClientRect();var h=document.getElementById(q).getBoundingClientRect();var f=h.bottom-h.top-20;var r=g.bottom-g.top;var c=metExploreD3.getScaleById(q);var j=c.getZoom();var d=f*j.scale()/r;c.setZoomScale(d);var b=g.right-g.left;var r=g.bottom-g.top;var f=h.bottom-h.top-20;var m=h.right-h.left-20;d3.select("#"+q).select("#D3viz").select("#graphComponent");var p=c.getZoom();p.scale(d);var a=(m/2-((m/2)*p.scale()));var o=(f/2-((f/2)*p.scale()));p.translate([a,o]);d3.select("#"+q).select("#D3viz").select("#graphComponent").attr("transform","translate("+a+","+o+")scale("+d+")");metExploreD3.GraphLink.tick(q,c);metExploreD3.GraphNode.tick(q)},initCentroids:function(){var b="viz";var m=parseInt(metExploreD3.GraphPanel.getHeight(b));var a=parseInt(metExploreD3.GraphPanel.getWidth(b));var j=metExploreD3.getLinkStyle();var q=metExploreD3.getGeneralStyle();var p=_metExploreViz.getSessionById(b);var g=p.getD3Data();var c=d3.layout.force().friction(0.9).gravity(0.08).charge(-4000).theta(0.2).linkDistance(600).size([a,m]);p.setForceCentroids(c);var f=metExploreD3.getGeneralStyle().isDisplayedConvexhulls();var o=[];if(f=="Compartments"){g.getCompartments().forEach(function(h){o.push({id:h.identifier,x:2,y:2})});var d=[];d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(h){return h.getBiologicalType()=="reaction"}).filter(function(r){var t=0;for(var s in p.groups){if(p.groups.hasOwnProperty(s)){if(p.groups[s].values!=undefined){return false}var h=p.groups[s].values.indexOf(r);if(h!=-1){t++}}}return t.length>1}).each(function(h){h.getCompartment().forEach(function(r){h.getCompartment().forEach(function(u){if(r!=u){var s=o.findIndex(function(w){return w.id==r});var t=o.findIndex(function(w){return w.id==u});var v=d.find(function(w){return w.source==s&&w.target==t});if(v==undefined){d.push({source:s,target:t})}}})})})}else{g.getPathways().forEach(function(h){o.push({id:h,x:2,y:2})});var d=[];d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(h){return h.getPathways().length>1}).each(function(h){h.getPathways().forEach(function(r){h.getPathways().forEach(function(t){if(r!=t){var s=o.findIndex(function(w){return w.id==r});var u=o.findIndex(function(w){return w.id==t});var v=d.find(function(w){return w.source==s&&w.target==u});if(v==undefined){d.push({source:s,target:u})}}})})})}c.nodes(o).links(d).start()},moveGraph:function(){_MyThisGraphNode.dblClickable=false;var a=this.parentNode.parentNode.id;var b=d3.select("#"+a).select("#buttonHand").attr("scrollable");if(b=="false"){d3.select("#"+a).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",1);d3.select("#"+a).select("#buttonHand").attr("scrollable",true)}else{d3.select("#"+a).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",0.2);d3.select("#"+a).select("#buttonHand").attr("scrollable",false)}},graphAlignment:function(c){var a=_metExploreViz.getSessionById(c);if(c!="viz"){var d=_metExploreViz.getSessionById("viz");d3.select("#"+c).select("#D3viz").select("#graphComponent").selectAll("g.node").each(function(h){var g=this;var j=d3.select(g).select("rect").style("fill");d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").each(function(r){if(r.getId()==h.getId()){h.x=r.x;h.y=r.y;if(r.getMappingDatasLength()>0){r.getMappingDatas().forEach(function(t){if(t.getMapValue()==undefined){h.addMappingData(new MappingData(h,t.getMappingName().valueOf(),t.getConditionName().valueOf(),undefined))}else{h.addMappingData(new MappingData(h,t.getMappingName().valueOf(),t.getConditionName().valueOf(),t.getMapValue().valueOf()))}})}if(h.selected&&!r.isSelected()){_MyThisGraphNode.selection(r,"viz")}if(!h.selected&&r.isSelected()){_MyThisGraphNode.selection(h,c)}var p=d3.select(this).select("rect."+r.getBiologicalType()).style("fill");if(j!=p){d3.select(g).select("rect."+r.getBiologicalType()).style("fill",p);if(r.getBiologicalType()=="metabolite"){var m=metExploreD3.getMetaboliteStyle()}else{var m=metExploreD3.getReactionStyle();var o=metExploreD3.GraphUtils.chooseTextColor(p);d3.select(g).select("text").style("fill",o)}var s=d3.select(this).select("rect."+r.getBiologicalType()).attr("mapped");if(s>0){d3.select(g).insert("rect",":first-child").attr("class","stroke").attr("width",m.getWidth()+4).attr("height",m.getHeight()+4).attr("rx",m.getRX()).attr("ry",m.getRY()).attr("transform","translate(-"+parseInt(m.getWidth()+4)/2+",-"+parseInt(m.getHeight()+4)/2+")").style("opacity","0.5").style("fill","red")}a.setMappingDataType(d.getMappingDataType());a.setMapped(d.isMapped())}else{if(d3.select(this).select("rect.stroke")[0][0]!=null){var q=d3.select(this).select("rect.stroke").style("fill");if(r.getBiologicalType()=="reaction"){d3.select(g).attr("mapped","true").insert("rect",":first-child").attr("class","stroke").attr("width",parseInt(d3.select(this).select(".reaction").attr("width"))+10).attr("height",parseInt(d3.select(this).select(".reaction").attr("height"))+10).attr("rx",parseInt(d3.select(this).select(".reaction").attr("rx"))+5).attr("ry",parseInt(d3.select(this).select(".reaction").attr("ry"))+5).attr("transform","translate(-"+parseInt(parseInt(d3.select(this).select(".reaction").attr("width"))+10)/2+",-"+parseInt(parseInt(d3.select(this).select(".reaction").attr("height"))+10)/2+")").style("opacity","0.5").style("fill","red")}else{if(r.getBiologicalType()=="metabolite"){d3.select(g).attr("mapped","true").insert("rect",":first-child").attr("class","stroke").attr("width",parseInt(d3.select(this).select(".metabolite").attr("width"))+10).attr("height",parseInt(d3.select(this).select(".metabolite").attr("height"))+10).attr("rx",parseInt(d3.select(this).select(".metabolite").attr("rx"))+5).attr("ry",parseInt(d3.select(this).select(".metabolite").attr("ry"))+5).attr("transform","translate(-"+parseInt(parseInt(d3.select(this).select(".metabolite").attr("width"))+10)/2+",-"+parseInt(parseInt(d3.select(this).select(".metabolite").attr("height"))+10)/2+")").style("opacity","0.5").style("fill","red")}}a.setMappingDataType(d.getMappingDataType());a.setMapped(d.isMapped())}}}})});a.setActiveMapping(d.getActiveMapping().valueOf());a.resetColorMapping();d.getColorMappingsSet().forEach(function(g){a.addColorMapping(g.getName().valueOf(),g.getValue().valueOf())});var f=a.getForce();f.stop();var b=metExploreD3.getScaleById(c);metExploreD3.GraphLink.tick(c,b);metExploreD3.GraphNode.tick(c)}},scaledX:function(j,a){var h=metExploreD3.getSessionsSet();var g;if(a=="viz"){var f;for(var c in sessions){if(sessions[c].getId()=="viz"){f=sessions[c].getId()}}var d=parseInt(d3.select("#"+f).select("#D3viz").style("width"));var b=parseInt(d3.select("#viz").select("#D3viz").style("width"));g=(j*d)/b}else{var f;for(var c in sessions){if(sessions[c].getId()=="viz"){f=sessions[c].getId()}}var d=parseInt(d3.select("#"+a).select("#D3viz").style("width"));var b=parseInt(d3.select("#viz").select("#D3viz").style("width"));g=(j*b)/d}return g},scaledY:function(h,j){var g=metExploreD3.getSessionsSet();var a;if(j=="viz"){var f;for(var c in sessions){if(sessions[c].getId()=="viz"){f=sessions[c].getId()}}var d=parseInt(d3.select("#"+f).select("#D3viz").style("height"));var b=parseInt(d3.select("#viz").select("#D3viz").style("height"));a=(h*d)/b}else{var f;for(var c in sessions){if(sessions[c].getId()=="viz"){f=sessions[c].getId()}}var d=parseInt(d3.select("#"+j).select("#D3viz").style("height"));var b=parseInt(d3.select("#viz").select("#D3viz").style("height"));a=(h*b)/d}return Scaled},addLinkInDrawing:function(g,q,f,r,o,s){var p=_metExploreViz.getSessionById(s);var d=p.getD3Data();d.addLink(g,q,f,r,o);var h=metExploreD3.getMetaboliteStyle();var c=metExploreD3.getLinkStyle();var b=p.getForce();var m=_metExploreViz.getSessionById(s).getMappingDataType()=="Flux";var a={};if(m){d3.select("#"+s).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(t){if(q.getBiologicalType()=="metabolite"){return(t.getSource().getId()==q.getIdentifier()||t.getSource().getId()==f.getId())&&(t.getTarget().getId()==q.getIdentifier()||t.getTarget().getId()==f.getId())}else{return(t.getSource().getId()==q.getId()||t.getSource().getId()==f.getIdentifier())&&(t.getTarget().getId()==q.getId()||t.getTarget().getId()==f.getIdentifier())}}).each(function(u){var v;if(q.getBiologicalType()=="reaction"){v=q.getId()}else{v=f.getId()}var t;if(this.id=="linkRev"){t="linkRev"}else{t="link"}if(a[v]==undefined){a[v]={}}a[v][t]={fill:d3.select(this).style("fill"),strokeDasharray:d3.select(this).style("stroke-dasharray")}});var j=d3.select("#"+s).select("#D3viz").select("#graphComponent").selectAll("path.link").data(b.links(),function(t){return t.source.id+"-"+t.target.id}).enter().insert("svg:g",":first-child");j.each(function(t){d3.select(this).filter(function(u){var v;if(q.getBiologicalType()=="reaction"){v=q.getId()}else{v=f.getId()}return a[v].link!=undefined}).append("svg:path").attr("class",String).attr("d",function(u){return metExploreD3.GraphLink.funcPathForFlux(u,s,this.id)}).attr("class","link").attr("fill-rule","evenodd").style("stroke",c.getStrokeColor()).style("stroke-width",0.5).style("opacity",0.1).style("stroke-dasharray",function(u){var v;if(q.getBiologicalType()=="reaction"){v=q.getId()}else{v=f.getId()}return a[v].link.strokeDasharray}).style("fill",function(u){var v;if(q.getBiologicalType()=="reaction"){v=q.getId()}else{v=f.getId()}return a[v].link.fill}).on("mouseover",function(D){var C,z,w,B;if(D.getSource().getBiologicalType()=="reaction"){C=D.getSource();z=D.getTarget()}else{C=D.getTarget();z=D.getSource()}w=D.getSource();B=D.getTarget();var u=_metExploreViz.getSessionById("viz").getActiveMapping();var y=_metExploreViz.getMappingByName(u);var F=y.getConditions();var E=C.getMappingDataByNameAndCond(u,F[0]);if(E!=null){var v=E.getMapValue();if(v<0){B=D.getSource();w=D.getTarget()}}if(!document.getElementById("tooltip2").classList.contains("fixed")){var A="Name: "+D.id+"<br/><b>Source:</b> "+w.getName()+"<br/><b>Target:</b> "+B.getName()+((v!=undefined)?"<br/>Flux: "+Math.abs(v):"");A+="<br/>";document.getElementById("tooltip2").innerHTML=A;document.getElementById("tooltip2").classList.remove("hide")}}).on("mouseout",function(u){document.getElementById("tooltip2").classList.add("hide")});d3.select(this).filter(function(u){var v;if(q.getBiologicalType()=="reaction"){v=q.getId()}else{v=f.getId()}return a[v].linkRev!=undefined}).append("svg:path").attr("class",String).attr("id","linkRev").attr("d",function(u){return metExploreD3.GraphLink.funcPathForFlux(u,s,this.id)}).attr("class","link").attr("fill-rule","evenodd").style("stroke",c.getStrokeColor()).style("stroke-width",0.5).style("opacity",0.1).style("stroke-dasharray",function(u){var v;if(q.getBiologicalType()=="reaction"){v=q.getId()}else{v=f.getId()}return a[v].linkRev.strokeDasharray}).style("fill",function(u){var v;if(q.getBiologicalType()=="reaction"){v=q.getId()}else{v=f.getId()}return a[v].linkRev.fill}).on("mouseover",function(D){var C,z,w,B;if(D.getSource().getBiologicalType()=="reaction"){C=D.getSource();z=D.getTarget()}else{C=D.getTarget();z=D.getSource()}w=D.getSource();B=D.getTarget();var u=_metExploreViz.getSessionById("viz").getActiveMapping();var y=_metExploreViz.getMappingByName(u);var F=y.getConditions();var E=C.getMappingDataByNameAndCond(u,F[1]);if(E!=null){var v=E.getMapValue();if(v<0){B=D.getSource();w=D.getTarget()}}if(!document.getElementById("tooltip2").classList.contains("fixed")){var A="Name: "+D.id+"<br/><b>Source: </b>"+w.getName()+"<br/><b>Target: </b>"+B.getName()+((v!=undefined)?"<br/>Flux: "+Math.abs(v):"");A+="<br/>";document.getElementById("tooltip2").innerHTML=A;document.getElementById("tooltip2").classList.remove("hide")}}).on("mouseout",function(u){document.getElementById("tooltip2").classList.add("hide")})})}else{link=d3.select("#"+s).select("#graphComponent").selectAll("path.link").data(b.links(),function(t){return t.source.id+"-"+t.target.id}).enter().insert("path",":first-child").attr("class",String).attr("d",function(t){return metExploreD3.GraphLink.funcPath4(t,s)}).attr("class","link").attr("fill-rule","evenodd").attr("fill",function(t){if(t.interaction=="out"){return c.getMarkerOutColor()}else{return c.getMarkerInColor()}}).style("stroke",c.getStrokeColor()).style("stroke-width",0.5).style("opacity",0.5).attr("x1",q.x).attr("y1",q.y).attr("x2",f.x).attr("y2",f.y)}},addMetaboliteInDrawing:function(p,w,j,r){var d=w+"-"+j;var a=_metExploreViz.getSessionById(r);var f=a.getD3Data();var b=a.getForce();var q=metExploreD3.getMetaboliteStyle();var B=metExploreD3.getGeneralStyle();var y=d3.behavior.drag().on("dragstart",_MyThisGraphNode.dragstart).on("drag",_MyThisGraphNode.dragmove).on("dragend",_MyThisGraphNode.dragend);var s=metExploreD3.getScaleById(r);metExploreD3.fireEventParentWebSite("sideCompound",p);var c=f.addNode(p.getName(),p.getCompartment(),p.getDbIdentifier(),d,p.getReactionReversibility(),p.getBiologicalType(),false,p.getLabelVisible(),p.getSvg(),p.getSvgWidth(),p.getSvgHeight(),p.getIsSideCompound(),undefined,true,w,f.getNodeById(j).getPathways(),undefined,p.getLabel());if(p.getMappingDatasLength()!=0){p.getMappingDatas().forEach(function(D){f.getNodeById(d).addMappingData(new MappingData(p,D.getMappingName(),D.getConditionName(),D.getMapValue()))})}var A=d3.select("#"+r).select("#D3viz").select("#graphComponent").selectAll("g.node");var v=false;var z=A.filter(function(D){return D.getId()==w});z.each(function(){v=this.getAttribute("mapped")});A=A.data(b.nodes(),function(D){return D.getId()});A.enter().append("svg:g").attr("class","node").attr("duplicated",function(D){return"true"}).call(y).style("fill","white");A.filter(function(D){return D.getBiologicalType()=="metabolite"}).filter(function(D){return D.getId()==d}).style("stroke-opacity",0.5).addNodeForm(q.getWidth()/2,q.getHeight()/2,q.getRX()/2,q.getRY()/2,q.getStrokeColor(),q.getStrokeWidth()/2);A.filter(function(D){return D.getBiologicalType()=="metabolite"}).filter(function(D){return D.getId()==d}).on("mouseenter",function(E){var D=d3.select("#"+r).select("#D3viz").select("#graphComponent").selectAll("g.node");d3.select(this).each(function(G){var F=D[0][D.size()-1];this.parentNode.insertBefore(this,F)}).attr("transform","translate("+E.x+", "+E.y+") scale(2)")}).on("mouseover",function(E){E.fixed=true;A.filter(function(H){return H==E}).select(".locker").classed("hide",false).select(".iconlocker").attr("xlink:href",function(H){if(H.isLocked()){return"resources/icons/lock_font_awesome.svg"}else{return"resources/icons/unlock_font_awesome.svg"}});if(E.getBiologicalType()=="reaction"){d3.select("#"+r).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(H){return E.getId()==H.getSource().getId()}).style("stroke","green");d3.select("#"+r).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(H){return E.getId()==H.getTarget().getId()}).style("stroke","red")}else{d3.select("#"+r).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(H){return E.getId()==H.getSource().getId()}).style("stroke","red");d3.select("#"+r).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(H){return E.getId()==H.getTarget().getId()}).style("stroke","green")}var D=s.getXScale();var G=s.getYScale();if(!document.getElementById("tooltip2").classList.contains("fixed")){var F="<b>Name:</b> "+E.getName()+"<br/><b>Biological type:</b> "+E.getBiologicalType()+((E.getCompartment()!=undefined)?"<br/><b>Compartment:</b> "+E.getCompartment():"")+((E.getDbIdentifier()!=undefined)?"<br/><b>Database identifier:</b> "+E.getDbIdentifier():"")+((E.getEC()!=undefined)?"<br/><b>EC number:</b> "+E.getEC():"")+((E.getReactionReversibility()!=undefined)?"<br/><b>Reaction reversibility:</b> "+E.getReactionReversibility():"")+((E.getIsSideCompound()!=undefined)?"<br/><b>SideCompound:</b> "+E.getIsSideCompound():"")+((E.getMappingDatasLength()!=0)?((E.getMappingDatasLength()==1)?"<br/><b>Mapping:</b><br/><table style='width:100%; margin-left: 30px; padding-right: 30px;'>":"<br/><b>Mappings:</b><br/><table style='width:100%; margin-left: 30px; padding-right: 30px;'>"):"");E.getMappingDatas().forEach(function(H){F+="<tr><td>"+H.getMappingName()+"</td><td>"+H.getConditionName()+"</td><td>"+H.getMapValue()+"</td></tr>"});F+="</table>";if(E.getSvg()!=undefined&&E.getSvg()!="undefined"&&E.getSvg()!=""){F+='<br/><img src="resources/images/structure_metabolite/'+E.getSvg()+'"/>'}document.getElementById("tooltip2").innerHTML=F;document.getElementById("tooltip2").classList.remove("hide")}}).on("mouseleave",function(E){d3.select(this).attr("transform","translate("+E.x+", "+E.y+") scale(1)");if(!E.isLocked()){E.fixed=false}A.filter(function(F){return F==E}).select(".locker").classed("hide",true);var D=metExploreD3.getLinkStyle();document.getElementById("tooltip2").classList.add("hide");d3.select("#"+r).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(F){return E.getId()==F.getSource().getId()||E.getId()==F.getTarget().getId()}).style("stroke",D.getStrokeColor());if(E.getBiologicalType()=="reaction"){d3.select(this).selectAll("rect").selectAll(".reaction, .fontSelected").transition().duration(750).attr("width",reactionStyle.getWidth()).attr("height",reactionStyle.getHeight()).attr("transform","translate(-"+reactionStyle.getWidth()/2+",-"+reactionStyle.getHeight()/2+")")}else{d3.select(this).selectAll("rect").selectAll(".reaction, .fontSelected").transition().duration(750).attr("width",q.getWidth()).attr("height",q.getHeight()).attr("transform","translate(-"+q.getWidth()/2+",-"+q.getHeight()/2+")")}});var t=A.filter(function(D){return D.getId()==d});metExploreD3.GraphNode.colorStoreByCompartment(t);if(f.getNodes().length<B.getReactionThreshold()||!B.isDisplayedLabelsForOpt()){var u=Math.min(q.getWidth()/2,q.getHeight()/2);A.filter(function(D){return D.getId()==d}).filter(function(D){return D.getLabelVisible()==true}).filter(function(D){return D.getBiologicalType()=="metabolite"}).filter(function(D){return D.getSvg()=="undefined"||D.getSvg()==undefined||D.getSvg()==""}).append("svg:text").attr("fill","black").attr("class",function(D){return D.getBiologicalType()}).text(function(E){var D=E.getName();if(E.getLabel()!=undefined){D=E.getLabel()}return $("<div/>").html(D).text()}).style("font-size",function(D){return Math.min((2*u/2),(2*u/2-3)/this.getComputedTextLength()*10)+"px"}).attr("dy",".3em").style("pointer-events","none").style("opacity",0.5);A.filter(function(D){return D.getId()==d}).filter(function(D){return D.getLabelVisible()==true}).filter(function(D){return D.getBiologicalType()=="metabolite"}).filter(function(D){return D.getSvg()!="undefined"&&D.getSvg()!=undefined&&D.getSvg()!=""}).append("svg:text").attr("fill","black").attr("class",function(D){return D.getBiologicalType()}).text(function(E){var D=E.getName();if(E.getLabel()!=undefined){D=E.getLabel()}return $("<div/>").html(D).text()}).style("font-size",function(D){return Math.min((u)/2,((u-3)/this.getComputedTextLength()*10)/2)+"px"}).attr("dy",".3em").style("pointer-events","none").attr("y",+(3/4*(u/2)));A.filter(function(D){return D.getId()==d}).filter(function(D){return(D.getBiologicalType()=="metabolite"&&D.getSvg()!="undefined"&&D.getSvg()!=undefined&&D.getSvg()!="")}).append("svg").attr("viewBox",function(D){return"0 0 "+u+" "+u}).attr("width",u*8/10+"px").attr("height",u*8/10+"px").attr("x",(-u/2)+(u*1/10)).attr("preserveAspectRatio","xMinYMin").attr("y",(-u/2)+(u*1/10)).attr("class","structure_metabolite").append("image").style("opacity",0.5).attr("xlink:href",function(D){return"resources/images/structure_metabolite/"+D.getSvg()}).attr("width","100%").attr("height","100%");var m=A.filter(function(D){return D.getId()==d}).insert("svg",":first-child").attr("viewBox",function(D){+" "+u}).attr("width",q.getWidth()/2).attr("height",q.getHeight()/2).attr("preserveAspectRatio","xMinYMin").attr("y",-q.getHeight()/2).attr("x",-q.getWidth()/2).attr("class","locker").classed("hide",true);m.append("svg:path").attr("class","backgroundlocker").attr("d",function(E){var D="M"+q.getWidth()/2+","+q.getHeight()/2+" L0,"+q.getHeight()/2+" L0,"+q.getRY()*2/2+" A"+q.getRX()*2/2+","+q.getRY()*2/2+",0 0 1 "+q.getRX()*2/2+",0 L"+q.getWidth()/2+",0";return D}).attr("opacity","0.20").attr("fill","black");m.append("image").attr("class","iconlocker").attr("y",q.getHeight()/4/2-(q.getHeight()/2-q.getRY()*2/2)/8).attr("x",q.getWidth()/4/2-(q.getWidth()/2-q.getRX()*2/2)/8).attr("width","40%").attr("height","40%");A.filter(function(D){return D.getId()==d}).filter(function(D){return D.getLabelVisible()==true}).filter(function(D){return D.getBiologicalType()=="reaction"}).append("svg:text").attr("fill","black").attr("class",function(D){return D.getBiologicalType()}).text(function(E){var D=E.getName();if(E.getLabel()!=undefined){D=E.getLabel()}return $("<div/>").html(D).text()}).style("font-size",function(D){return Math.min(2*u,(u-2)/this.getComputedTextLength()*10)+"px"}).attr("dy",".3em")}if(v!=undefined&&v!=false&&v!="false"){if(v==true||v=="true"){A.filter(function(D){return D.getId()==d}).attr("mapped","true").insert("rect",":first-child").attr("class","stroke").attr("width",q.getWidth()/2+10).attr("height",q.getHeight()/2+10).attr("rx",q.getRX()/2+5).attr("ry",q.getRY()/2+5).attr("transform","translate(-"+parseInt(q.getWidth()/2+10)/2+",-"+parseInt(q.getWidth()/2+10)/2+")").style("opacity","0.5").style("fill","red")}else{var C=v;A.filter(function(D){return D.getId()==d}).attr("mapped",C).style("fill",C)}}var h=100;var g=100;A.filter(function(D){return D.getBiologicalType()=="reaction"}).filter(function(D){return D.getId()==j}).each(function(D){var G=D.x-p.x;var F=D.y-p.y;var E=Math.sqrt(Math.pow(G,2)+Math.pow(F,2));h=D.x-(40*G)/E;g=D.y-(40*F)/E});A.filter(function(D){return D.getBiologicalType()=="metabolite"}).filter(function(D){return D.getId()==d}).attr("transform",function(D){return"translate("+h+","+g+")"}).each(function(D){D.px=h;D.py=g;D.x=h;D.y=g});var o=undefined;a.groups.forEach(function(E){if(o=="compartment"){if(E.key==c.getCompartment()){E.values.push(c)}}else{var D=c.getPathways().find(function(F){return E.key==F});if(D!=undefined){E.values.push(c)}}});if(metExploreD3.GraphNetwork.isAnimated(r)==true||metExploreD3.GraphNetwork.isAnimated(r)=="true"){b.start()}return c},duplicateANode:function(g,r){var j=_metExploreViz.getSessionById(r);j.addDuplicatedNode(g.getId());var s=j.getForce();var d=j.getD3Data();var p,m;m=[];p=[];var t=d3.select("#"+r).select("#D3viz");var u=d3.behavior.drag().on("dragstart",function(v){_MyThisGraphNode.dragstart(v)}).on("drag",function(v){_MyThisGraphNode.dragmove(v)}).on("dragend",_MyThisGraphNode.dragend);var c=metExploreD3.getScaleById(r);t.selectAll("path.link").filter(function(v){return v.getInteraction()!="hiddenForce"}).each(function(y){var v=y.source;var w=y.target;if(v==g){if(p.indexOf(w)==-1){p.push(w)}}else{if(w==g){if(m.indexOf(v)==-1){m.push(v)}}}});p.forEach(function(y){var v=g.getId()+"-"+y.getId();var w=metExploreD3.GraphNetwork.addMetaboliteInDrawing(g,g.getId(),y.getId(),r);metExploreD3.GraphNetwork.addLinkInDrawing(v+"-"+y.getId(),w,y,"in",y.getReactionReversibility(),r)});m.forEach(function(y){var v=g.getId()+"-"+y.getId();var w=metExploreD3.GraphNetwork.addMetaboliteInDrawing(g,g.getId(),y.getId(),r);metExploreD3.GraphNetwork.addLinkInDrawing(y.getId()+"-"+v,y,w,"out",y.getReactionReversibility(),r)});var q=metExploreD3.getMetaboliteStyle();var f=metExploreD3.getReactionStyle();var h=Math.max(f.getWidth(),f.getHeight());var o=Math.max(q.getWidth(),q.getHeight());var a=Math.max(h,o);var b=metExploreD3.getLinkStyle();s.linkDistance(function(v){if(v.getSource().getIsSideCompound()||v.getTarget().getIsSideCompound()){return b.getSize()/2+a}else{return b.getSize()+a}})},duplicateSideCompounds:function(d,f){if(d==undefined){d="viz"}var b=d3.select("#"+d).select("#D3viz");var a=[];var c=metExploreD3.createLoadMask("Duplicate in progress...",d);if(c!=undefined){metExploreD3.showMask(c);metExploreD3.deferFunction(function(){b.selectAll("g.node").filter(function(m){return m.getIsSideCompound()&&m.getBiologicalType()=="metabolite"}).filter(function(m){if(this.getAttribute("duplicated")==undefined){return true}else{return !this.getAttribute("duplicated")}}).each(function(m){metExploreD3.GraphNetwork.duplicateSideCompound(m,d);a.push(m)});metExploreD3.hideMask(c);a.forEach(function(m){metExploreD3.GraphNetwork.removeANode(m,d)});if(_metExploreViz.isLinkedByTypeOfMetabolite()){metExploreD3.GraphLink.linkTypeOfMetabolite()}var h=_metExploreViz.getSessionsSet();var j=_metExploreViz.getSessionById(d);if(f!=undefined){f()}if(d!="viz"&&j.isLinked()){metExploreD3.fireEvent("graphPanel","afterDuplicate")}else{for(var g in h){if(h[g].isLinked()&&h[g].getId()!="viz"){metExploreD3.deferFunction(function(){h[g].setLinked(false);metExploreD3.GraphNetwork.looksLinked();var m=h[g].getForce();var o=_metExploreViz.getSessionById("viz");if(h[g]!=undefined){if(o.getDuplicatedNodesCount()>0){var m=h[g].getForce();h[g].setLinked(true);o.setLinked(true);metExploreD3.GraphNetwork.duplicateSideCompounds(h[g].getId());metExploreD3.GraphNetwork.looksLinked();if(h[g].isLinked()){metExploreD3.GraphNetwork.graphAlignment(h[g].getId())}}else{metExploreD3.GraphNetwork.graphAlignment(h[g].getId());h[g].setLinked(true);o.setLinked(true)}}},100)}}}},1)}metExploreD3.GraphNetwork.initCentroids()},duplicateSideCompoundsById:function(f,d){var b=d3.select("#"+d).select("#D3viz");var a=[];var c=metExploreD3.createLoadMask("Duplicate in progress...",d);if(c!=undefined){metExploreD3.showMask(c);metExploreD3.deferFunction(function(){b.selectAll("g.node").filter(function(g){return f.indexOf(g.getId())!=-1}).filter(function(g){if(this.getAttribute("duplicated")==undefined){return true}else{return !this.getAttribute("duplicated")}}).each(function(g){metExploreD3.GraphNetwork.duplicateSideCompound(g,d);a.push(g)});metExploreD3.hideMask(c);a.forEach(function(g){metExploreD3.GraphNetwork.removeANode(g,d)});if(_metExploreViz.isLinkedByTypeOfMetabolite()){metExploreD3.GraphLink.linkTypeOfMetabolite()}},0)}metExploreD3.GraphNetwork.initCentroids()},duplicateSideCompoundsSelected:function(d){var b=d3.select("#"+d).select("#D3viz");var a=[];var c=metExploreD3.createLoadMask("Duplicate in progress...",d);if(c!=undefined){metExploreD3.showMask(c);metExploreD3.deferFunction(function(){b.selectAll("g.node").filter(function(j){return j.isSelected()&&j.getBiologicalType()=="metabolite"}).filter(function(j){if(this.getAttribute("duplicated")==undefined){return true}else{return !this.getAttribute("duplicated")}}).each(function(m){if(metExploreD3.getMetabolitesSet()!=undefined){var j=metExploreD3.getMetaboliteById(metExploreD3.getMetabolitesSet(),m.getId());j.set("sideCompound",true)}m.setIsSideCompound(true);metExploreD3.GraphNetwork.duplicateSideCompound(m,d);a.push(m)});metExploreD3.hideMask(c);a.forEach(function(j){metExploreD3.GraphNetwork.removeANode(j,d)});if(_metExploreViz.isLinkedByTypeOfMetabolite()){metExploreD3.GraphLink.linkTypeOfMetabolite()}var g=_metExploreViz.getSessionsSet();var h=_metExploreViz.getSessionById(d);if(d!="viz"&&h.isLinked()){metExploreD3.fireEvent("graphPanel","afterDuplicate")}else{for(var f in g){if(g[f].isLinked()&&g[f].getId()!="viz"){metExploreD3.deferFunction(function(){g[f].setLinked(false);metExploreD3.GraphNetwork.looksLinked();var m=g[f].getForce();var j=_metExploreViz.getSessionById("viz");if(g[f]!=undefined){if(j.getDuplicatedNodesCount()>0){var m=g[f].getForce();g[f].setLinked(true);j.setLinked(true);metExploreD3.GraphNetwork.duplicateSideCompoundsSelected(g[f].getId());metExploreD3.GraphNetwork.looksLinked();if(g[f].isLinked()){metExploreD3.GraphNetwork.graphAlignment(g[f].getId())}}else{metExploreD3.GraphNetwork.graphAlignment(g[f].getId());g[f].setLinked(true);j.setLinked(true)}}},100)}}}},0)}metExploreD3.GraphNetwork.initCentroids()},duplicateASideCompoundSelected:function(b,d){var a=d3.select("#"+d).select("#D3viz");var f=[];var c=metExploreD3.createLoadMask("Duplicate in progress...",d);if(c!=undefined){metExploreD3.showMask(c);metExploreD3.deferFunction(function(){a.selectAll("g.node").filter(function(m){if(b.querySelector("rect.metabolite")!=null){return m.getId()==b.querySelector("rect.metabolite").id&&m.isSelected()&&m.getBiologicalType()=="metabolite"}else{return false}}).filter(function(m){if(this.getAttribute("duplicated")==undefined){return true}else{return !this.getAttribute("duplicated")}}).each(function(m){if(metExploreD3.getMetabolitesSet()!=undefined){var o=metExploreD3.getMetaboliteById(metExploreD3.getMetabolitesSet(),m.getId());o.set("sideCompound",true)}m.setIsSideCompound(true);metExploreD3.GraphNetwork.duplicateSideCompound(m,d);f.push(m)});metExploreD3.hideMask(c);f.forEach(function(m){metExploreD3.GraphNetwork.removeANode(m,d)});if(_metExploreViz.isLinkedByTypeOfMetabolite()){metExploreD3.GraphLink.linkTypeOfMetabolite()}var h=_metExploreViz.getSessionsSet();var j=_metExploreViz.getSessionById(d);if(d!="viz"&&j.isLinked()){metExploreD3.fireEvent("graphPanel","afterDuplicate")}else{for(var g in h){if(h[g].isLinked()&&h[g].getId()!="viz"){metExploreD3.deferFunction(function(){h[g].setLinked(false);metExploreD3.GraphNetwork.looksLinked();var m=h[g].getForce();var o=_metExploreViz.getSessionById("viz");if(h[g]!=undefined){if(o.getDuplicatedNodesCount()>0){var m=h[g].getForce();h[g].setLinked(true);o.setLinked(true);metExploreD3.GraphNetwork.duplicateASideCompoundSelected(b,h[g].getId());metExploreD3.GraphNetwork.looksLinked();if(h[g].isLinked()){metExploreD3.GraphNetwork.graphAlignment(h[g].getId())}}else{metExploreD3.GraphNetwork.graphAlignment(h[g].getId());h[g].setLinked(true);o.setLinked(true)}}},100)}}}},0)}metExploreD3.GraphNetwork.initCentroids()},duplicateSideCompound:function(a,c){var b=_metExploreViz.getSessionById(c);var f=d3.select("#"+c).select("#D3viz");if(b!=undefined){if(b.isLinked()){var b=_metExploreViz.getSessionById("viz");if(b!=undefined){var d=b.getForce();if(d!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"||metExploreD3.GraphNetwork.isAnimated("viz")==true){d.resume()}}}}else{var d=b.getForce();if(d!=undefined){if(metExploreD3.GraphNetwork.isAnimated(c)=="true"||metExploreD3.GraphNetwork.isAnimated(c)==true){d.resume()}}}}metExploreD3.GraphNetwork.duplicateANode(a,c);if(b!=undefined){if(d!=undefined){if(metExploreD3.GraphNetwork.isAnimated(c)=="true"||metExploreD3.GraphNetwork.isAnimated(c)==true){d.start()}}}metExploreD3.GraphNetwork.initCentroids()},removeSelectedNode:function(d){var b=_metExploreViz.getSessionById(d);var a=b.getForce();var f=b.getD3Data();var c=metExploreD3.createLoadMask("Remove in process...",d);if(c!=undefined){metExploreD3.showMask(c);metExploreD3.deferFunction(function(){var g=d3.select("#"+d).select("#D3viz");if(h!=undefined){if(h.isLinked()){var h=_metExploreViz.getSessionById("viz");if(h!=undefined){var j=h.getForce();if(j!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){j.stop()}}}}else{var j=h.getForce();if(j!=undefined){if(metExploreD3.GraphNetwork.isAnimated(d)=="true"){j.stop()}}}}g.selectAll("g.node").filter(function(m){return m.isSelected()}).each(function(m){metExploreD3.GraphNetwork.removeANode(m,d)});metExploreD3.hideMask(c);metExploreD3.GraphNetwork.removeIsolatedNode(d);if(h!=undefined){if(j!=undefined){if(metExploreD3.GraphNetwork.isAnimated(d)=="true"){j.start()}}}},1)}metExploreD3.GraphNetwork.initCentroids()},removeOnlyClickedNode:function(a,c){var g=_metExploreViz.getSessionById(c);var f=g.getForce();var d=g.getD3Data();var b=metExploreD3.createLoadMask("Remove in process...",c);if(b!=undefined){metExploreD3.showMask(b);metExploreD3.deferFunction(function(){var h=d3.select("#"+c).select("#D3viz");if(j!=undefined){if(j.isLinked()){var j=metExploreD3.getSessionById(sessionsStore,"viz");if(j!=undefined){var m=j.getForce();if(m!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){m.resume()}}}}else{var m=j.getForce();if(m!=undefined){if(metExploreD3.GraphNetwork.isAnimated(c)=="true"){m.resume()}}}}metExploreD3.GraphNetwork.removeASelectedNode(a,c);metExploreD3.GraphNetwork.removeIsolatedNode(c);if(j!=undefined){if(m!=undefined){if(metExploreD3.GraphNetwork.isAnimated(c)=="true"){m.start()}}}metExploreD3.hideMask(b)},100)}},removeASelectedNode:function(g,c){var a=_metExploreViz.getSessionById(c);var b=metExploreD3.createLoadMask("Remove in process...",c);if(b!=undefined){metExploreD3.showMask(b);var f=d3.select("#"+c).select("#D3viz");if(a!=undefined){if(a.isLinked()){var a=metExploreD3.getSessionById(sessionsStore,"viz");if(a!=undefined){var d=a.getForce();if(d!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){d.resume()}}}}else{var d=a.getForce();if(d!=undefined){if(metExploreD3.GraphNetwork.isAnimated(c)=="true"){d.resume()}}}}metExploreD3.GraphNetwork.removeANode(g,c);if(a!=undefined){if(d!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){d.start()}}}metExploreD3.hideMask(b)}metExploreD3.GraphNetwork.initCentroids()},removeANode:function(h,a){var g=_metExploreViz.getSessionById(a);var f=g.getForce();var d=g.getD3Data();var j=[];var c=d3.select("#"+a).select("#D3viz");c.selectAll("path.link").filter(function(m){var o=m.source;var p=m.target;if(o==h||p==h){j.push(m)}return(o==h||p==h)}).remove();var b=c.selectAll("g.node");b.filter(function(m){return h==m}).transition().duration(1000).style("opacity",0).remove();setTimeout(function(){var m=g.getSelectedNodes();var o=m.indexOf(h.getId());if(o!=-1){m.splice(o,1)}g.groups.forEach(function(r){if(r.key==h.getCompartment()){var q=r.values.indexOf(h);if(q!=-1){r.values.splice(q,1)}if(r.values.length==0){q=g.groups.indexOf(r);if(q!=-1){g.groups.splice(q,1);d3.select("#"+a).select("#D3viz").select("path#"+r.key).remove()}}}h.getPathways().forEach(function(t){if(r.key==t){var s=r.values.indexOf(h);if(s!=-1){r.values.splice(s,1)}if(r.values.length==0){s=g.groups.indexOf(r);if(s!=-1){g.groups.splice(s,1);d3.select("#"+a).select("#D3viz").select("path#"+r.key).remove()}}}})});var o=f.nodes().indexOf(h);if(o!=-1){f.nodes().splice(o,1)}for(i=0;i<j.length;i++){var p=j[i];var o=f.links().indexOf(p);if(o!=-1){f.links().splice(o,1)}}},1)},removeIsolatedNode:function(g){var b=_metExploreViz.getSessionById(g);var j=b.getForce();var a=b.getD3Data();var c=[];var m=d3.select("#"+g).select("#D3viz");var d=[];var h=a.getNodes().map(function(o){return o.getId()});var f=false;m.selectAll("path.link").each(function(q){var o=q.source;var p=q.target;var r=h.indexOf(o.getId());if(r!=-1){h.splice(r,1)}var s=h.indexOf(p.getId());if(s!=-1){h.splice(s,1)}});m.selectAll("g.node").filter(function(o){return h.indexOf(o.getId())!=-1}).each(function(o){c.push(o)}).transition().duration(1000).style("opacity",0).remove();setTimeout(function(){for(i=0;i<c.length;i++){var p=c[i];b.groups.forEach(function(r){if(r.key==p.getCompartment()){var q=r.values.indexOf(p);if(q!=-1){r.values.splice(q,1)}if(r.values.length==0){q=b.groups.indexOf(r);if(q!=-1){b.groups.splice(q,1);d3.select("#"+g).select("#D3viz").select("path#"+r.key).remove()}}}p.getPathways().forEach(function(t){if(r.key==t){var s=r.values.indexOf(p);if(s!=-1){r.values.splice(s,1)}if(r.values.length==0){s=b.groups.indexOf(r);if(s!=-1){b.groups.splice(s,1);d3.select("#"+g).select("#D3viz").select("path#"+r.key).remove()}}}})});var o=j.nodes().indexOf(p);if(o!=-1){j.nodes().splice(o,1)}}for(i=0;i<c.length;i++){var p=c[i];var o=j.nodes().indexOf(p);if(o!=-1){j.nodes().splice(o,1)}}},10)},removeSideCompounds:function(){var a=d3.select("#viz").select("#D3viz");a.selectAll("g.node").filter(function(b){return b.getBiologicalType()=="metabolite"&&b.getIsSideCompound()}).each(function(b){metExploreD3.GraphNetwork.removeASelectedNode(b,"viz")});metExploreD3.GraphNetwork.removeIsolatedNode("viz");metExploreD3.GraphNetwork.initCentroids()},setAnimated:function(a,b){if(b){d3.select("#"+a).select("#D3viz").attr("animation","true");_metExploreViz.getSessionById(a).setAnimated(true)}else{d3.select("#"+a).select("#D3viz").attr("animation","false");_metExploreViz.getSessionById(a).setAnimated(false)}},isAnimated:function(a){return d3.select("#"+a).select("#D3viz").attr("animation")},selectAllNodes:function(a){return d3.select("#"+a).select("#D3viz").selectAll("g.node")},stopForce:function(b){var a=b.getForce();if(a!=undefined){a.stop();metExploreD3.GraphNetwork.setAnimated(b.getId(),false)}},loadSvg:function(j,q){var s=parseInt(metExploreD3.GraphPanel.getHeight(q));var m=parseInt(metExploreD3.GraphPanel.getWidth(q));var v=metExploreD3.getLinkStyle();var b=j.getForce();var p=metExploreD3.getScaleById(q);if(q=="viz"){metExploreD3.GraphCaption.drawCaption()}if(p==undefined){var g=metExploreD3.GraphNetwork;metExploreD3.GraphNetwork.zoomListener=d3.behavior.zoom().x(z).y(d).scaleExtent([0.01,30]).on("zoom",function(w){if(metExploreD3.GraphNetwork.zoomListener.scale()<0.8){d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",true)}else{d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",false)}var h=_metExploreViz.getSessionById(q);if(d3.event.sourceEvent!=null){if(d3.event.sourceEvent.type=="wheel"){h.setResizable(false)}}if(h.isActive()){g.zoom(q)}});p.add({graphName:q,xScale:z,yScale:d,zoomScale:1,xScaleCompare:1,yScaleCompare:1,zoomScaleCompare:metExploreD3.GraphNetwork.zoomListener.scale(),zoom:metExploreD3.GraphNetwork.zoomListener})}else{var g=metExploreD3.GraphNetwork;var z=d3.scale.linear().domain([0,m]).range([0,m]);var d=d3.scale.linear().domain([s,0]).range([s,0]);metExploreD3.GraphNetwork.zoomListener=d3.behavior.zoom().x(z).y(d).scaleExtent([0.01,30]).on("zoom",function(w){if(metExploreD3.GraphNetwork.zoomListener.scale()<0.8){d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",true)}else{d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",false)}var h=_metExploreViz.getSessionById(this.parentNode.id);if(d3.event.sourceEvent!=null){if(d3.event.sourceEvent.type=="wheel"){h.setResizable(false)}}if(h.isActive()){g.zoom(this.parentNode.id)}});p.setScale(z,d,1,1,1,metExploreD3.GraphNetwork.zoomListener.scale(),metExploreD3.GraphNetwork.zoomListener)}var r=d3.select("#"+q);r.svg=r.select("#D3viz").selectAll("*").remove();var u;var f=false;var c=d3.select("#"+q).select("#D3viz").append("g").datum(function(){return{selected:false,previouslySelected:false}}).attr("id","brush").attr("class","brush").call(d3.svg.brush().x(z).y(d).on("brushstart",function(A){var h=d3.select("#"+q).select("#buttonHand").attr("scrollable");_MyThisGraphNode.activePanel=this.parentNode.parentNode.id;var w=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(d3.event.sourceEvent.button!=1&&h!="true"){if(w!=undefined){if(w.isLinked()){var B=_metExploreViz.getSessionById("viz");if(B!=undefined){var C=B.getForce();if(C!=undefined){C.stop()}}}else{var C=w.getForce();if(C!=undefined){C.stop()}}}f=true;d3.select("#"+q).select("#brush").classed("hide",false);d3.select("#"+q).select("#D3viz").on("mousedown.zoom",null);u=d3.select("#"+q).select("#graphComponent").selectAll("g.node");u.each(function(D){D.previouslySelected=D.isSelected()})}else{var C=w.getForce();if(C!=undefined){C.stop()}d3.select("#"+q).selectAll("#D3viz").style("cursor","all-scroll");d3.selectAll("#brush").classed("hide",true)}}).on("brushend",function(){if(d3.event.sourceEvent.button!=1&&f){var A=d3.event.target.extent();if(A[1][0]-A[0][0]>20||A[1][1]-A[0][1]>20){var G;var A=d3.event.target.extent();var D=metExploreD3.getScaleById(q);var F=D.getZoomScale();var B=metExploreD3.createLoadMask("Selection in progress...",q);if(B!=undefined){metExploreD3.showMask(B);metExploreD3.deferFunction(function(){u.classed("selected",function(M){var L=D.getXScale();var N=D.getYScale();G=(L(A[0][0])<=L(M.x)&&L(M.x)<L(A[1][0]))&&(N(A[0][1])<=N(M.y)&&N(M.y)<N(A[1][1]));if((M.isSelected()==false&&G==true)||(M.isSelected()==true&&G==false&&!M.previouslySelected)){_MyThisGraphNode.selection(M,q)}return G});metExploreD3.hideMask(B);var J=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(J!=undefined){if(J.isLinked()){var K=_metExploreViz.getSessionById("viz");if(K!=undefined){var H=metExploreD3.GraphNetwork.isAnimated(K.getId());if(H=="true"){var I=K.getForce();if(I!=undefined){if((metExploreD3.GraphNetwork.isAnimated(K.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(K.getId())==null)){I.start()}}}}}else{var I=J.getForce();var H=metExploreD3.GraphNetwork.isAnimated(J.getId());if(H=="true"){var I=J.getForce();if(I!=undefined){if((metExploreD3.GraphNetwork.isAnimated(J.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(J.getId())==null)){I.start()}}}}}f=false},100)}}d3.event.target.clear();d3.select(this).call(d3.event.target);var D=metExploreD3.getScaleById(q);d3.select("#"+q).selectAll("#D3viz").style("cursor","default");d3.select("#"+q).selectAll("#D3viz").call(D.getZoom()).on("dblclick.zoom",null).on("mousedown",null)}else{var h=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(h!=undefined){if(h.isLinked()){var E=_metExploreViz.getSessionById("viz");if(E!=undefined){var w=metExploreD3.GraphNetwork.isAnimated(E.getId());if(w=="true"){var C=E.getForce();if(C!=undefined){if((metExploreD3.GraphNetwork.isAnimated(E.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(E.getId())==null)){C.start()}}}}}else{var C=h.getForce();var w=metExploreD3.GraphNetwork.isAnimated(h.getId());if(w=="true"){var C=h.getForce();if(C!=undefined){if(d3.select(metExploreD3.GraphNetwork.isAnimated(h.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(h.getId())==null)){C.start()}}}}}}d3.event.target.clear();d3.select(this).call(d3.event.target);var D=metExploreD3.getScaleById(q);d3.select("#"+q).selectAll("#D3viz").style("cursor","default");d3.select("#"+q).selectAll("#D3viz").call(D.getZoom()).on("dblclick.zoom",null).on("mousedown",null);d3.event.target.extent();d3.selectAll("#brush").classed("hide",false)}));r.svg=d3.select("#"+q).select("#D3viz").call(metExploreD3.GraphNetwork.zoomListener).on("dblclick.zoom",null).attr("pointer-events","all").append("svg:g").attr("class","graphComponent").attr("id","graphComponent");var a=_metExploreViz.getSessionById(q);if(a!=undefined){var b=a.getForce();if(b!=undefined){b.stop();metExploreD3.GraphNetwork.setAnimated(q,false)}if(a.isResizable()!=undefined){metExploreD3.GraphNetwork.task.cancel()}a.setResizable(true);metExploreD3.GraphNetwork.task=metExploreD3.createDelayedTask(function(){a.setResizable(false)})}var t=false;d3.select("#"+q).select("#D3viz").attr("animation",function(){if(t){return"true"}else{return"false"}}).append("svg:g").attr("class","buttonAnim").attr("id","buttonAnim").on("click",metExploreD3.GraphNetwork.play).style("cursor","hand").append("image").attr("xlink:href",function(){if(t){return document.location.href.split("index.html")[0]+"resources/icons/pause.svg"}else{return document.location.href.split("index.html")[0]+"resources/icons/play.svg"}}).attr("width","50").attr("height","50").attr("transform","translate(10,10) scale(.5)");d3.select("#"+q).select("#D3viz").append("svg:g").attr("class","buttonRescale").attr("id","buttonRescale").on("click",function(){metExploreD3.GraphNetwork.rescale(q)}).style("cursor","hand").append("image").attr("xlink:href",function(){return document.location.href.split("index.html")[0]+"resources/icons/rescale.png"}).attr("width","50").attr("height","50").attr("transform","translate(80,10) scale(.5)");d3.select("#"+q).select("#D3viz").append("svg:g").attr("class","buttonZoomIn").attr("id","buttonZoomIn").attr("x",(m-60)).attr("y",10).on("click",metExploreD3.GraphNetwork.zoomIn).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/zoomin.svg").attr("width","50").attr("height","50").style("opacity",0.2).attr("transform","translate("+(m-60)+",10) scale(1)").on("mouseover",function(h){d3.select(this).transition().duration(500).style("opacity",1)}).on("mouseout",function(h){d3.select(this).transition().duration(500).style("opacity",0.2)});d3.select("#"+q).select("#D3viz").append("svg:g").attr("class","buttonZoomOut").attr("id","buttonZoomOut").attr("x",(m-110)).attr("y",10).on("click",metExploreD3.GraphNetwork.zoomOut).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/zoomout.svg").attr("width","50").attr("height","50").style("opacity",0.2).attr("transform","translate("+(m-110)+",10) scale(1)").on("mouseover",function(h){d3.select(this).transition().duration(500).style("opacity",1)}).on("mouseout",function(h){d3.select(this).transition().duration(500).style("opacity",0.2)});d3.select("#"+q).select("#D3viz").append("svg:g").attr("class","buttonHand").attr("id","buttonHand").attr("x",(m-160)).attr("y",10).attr("scrollable","false").on("click",metExploreD3.GraphNetwork.moveGraph).style("opacity",1).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/handcursor.svg").attr("width","50").attr("height","50").attr("transform","translate("+(m-160)+",10) scale(1)");d3.select("#"+q).select("#D3viz").select("buttonHand").style("opacity",0);d3.select("#"+q).on("mouseover",function(){d3.select("#"+q).select("#D3viz").select("#buttonZoomOut").transition().duration(500).style("opacity",1);d3.select("#"+q).select("#D3viz").select("#buttonZoomIn").transition().duration(500).style("opacity",1);var w=_metExploreViz.getSessionById(q);if(w.isActive()){var h=d3.select("#"+q).select("#buttonHand").attr("scrollable");if(h=="false"){d3.select("#"+q).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",0.2)}else{d3.select("#"+q).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",1)}}}).on("mouseout",function(){d3.select("#"+q).select("#D3viz").select("#buttonZoomOut").transition().duration(500).style("opacity",0);d3.select("#"+q).select("#D3viz").select("#buttonZoomIn").transition().duration(500).style("opacity",0);d3.select("#"+q).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",0)});var a=_metExploreViz.getSessionById(q);var v=metExploreD3.getLinkStyle();var y=metExploreD3.getMetaboliteStyle();metExploreD3.GraphLink.loadLink(q,a,v,y);metExploreD3.GraphNode.loadNode(q);var o=document.createElement("div");o.id="tooltip2";o.className="tooltip2";metExploreD3.GraphNetwork.looksLinked();if(a.isLinked()){metExploreD3.GraphNetwork.graphAlignment(q)}metExploreD3.GraphNetwork.tick(q);metExploreD3.sortCompartmentInBiosource();metExploreD3.GraphNode.colorStoreByCompartment(metExploreD3.GraphNode.node)},loadSvgFromJSON:function(s){var u=parseInt(metExploreD3.GraphPanel.getHeight(s));var o=parseInt(metExploreD3.GraphPanel.getWidth(s));var z=metExploreD3.getLinkStyle();var b=d3.layout.force().friction(0.9).gravity(0.06).charge(-150).linkDistance(z.getSize()).size([o,u]);var a=metExploreD3.getSessionById(s);a.setActivity(true);a.setForce(b);if(s=="viz"){metExploreD3.GraphCaption.drawCaption()}var q=d3.scale.linear().domain([0,o]).range([0,o]);var d=d3.scale.linear().domain([u,0]).range([u,0]);if(metExploreD3.getScaleById(s)==undefined){var m=metExploreD3.GraphNetwork;var A=metExploreD3.getScaleById(s);var g=A.getZoom();g=d3.behavior.zoom().x(q).y(d).scaleExtent([0.01,30]).on("zoom",function(w){if(metExploreD3.GraphNetwork.zoomListener.scale()<0.8){d3.select("#"+s).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",true)}else{d3.select("#"+s).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",false)}var h=metExploreD3.getSessionById(s);if(d3.event.sourceEvent!=null){if(d3.event.sourceEvent.type=="wheel"){h.setResizable(false)}}if(h.isActive()){m.zoom(s)}});A.add({graphName:s,xScale:q,yScale:d,zoomScale:1,xScaleCompare:1,yScaleCompare:1,zoomScaleCompare:g.scale(),zoom:g})}else{var m=metExploreD3.GraphNetwork;var A=metExploreD3.getScaleById(s);var g=A.getZoom();g=d3.behavior.zoom().x(q).y(d).scaleExtent([0.01,30]).on("zoom",function(w){if(g.scale()<0.8){d3.select("#"+s).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",true)}else{d3.select("#"+s).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",false)}var h=metExploreD3.getSessionById(this.parentNode.id);if(d3.event.sourceEvent!=null){if(d3.event.sourceEvent.type=="wheel"){h.setResizable(false)}}if(h.isActive()){m.zoom(this.parentNode.id)}});A.getStoreByGraphName(s).setScale(q,d,1,1,1,g.scale(),g)}var t=d3.select("#"+s);t.svg=t.select("#D3viz").selectAll("*").remove();var y;var j=false;var c=d3.select("#"+s).select("#D3viz").append("g").datum(function(){return{selected:false,previouslySelected:false}}).attr("id","brush").attr("class","brush").call(d3.svg.brush().x(q).y(d).on("brushstart",function(C){var w=d3.select("#"+s).select("#buttonHand").attr("scrollable");_MyThisGraphNode.activePanel=this.parentNode.parentNode.id;var B=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(d3.event.sourceEvent.button!=1&&w!="true"){if(B!=undefined){if(B.isLinked()){var D=_metExploreViz.getSessionById("viz");if(D!=undefined){var h=D.getForce();if(h!=undefined){h.stop()}}}else{var h=B.getForce();if(h!=undefined){h.stop()}}}j=true;d3.select("#"+s).select("#brush").classed("hide",false);d3.select("#"+s).select("#D3viz").on("mousedown.zoom",null);y=d3.select("#"+s).select("#graphComponent").selectAll("g.node");y.each(function(E){E.previouslySelected=E.isSelected()})}else{var h=B.getForce();if(h!=undefined){h.stop()}d3.select("#"+s).selectAll("#D3viz").style("cursor","all-scroll");d3.selectAll("#brush").classed("hide",true)}}).on("brushend",function(){if(d3.event.sourceEvent.button!=1&&j){var C=d3.event.target.extent();if(C[1][0]-C[0][0]>20||C[1][1]-C[0][1]>20){var h;var C=d3.event.target.extent();var F=metExploreD3.getScaleById(s);var H=F.getZoomScale();var D=metExploreD3.createLoadMask("Selection in progress...",s);if(D!=undefined){metExploreD3.showMask(D);metExploreD3.deferFunction(function(){y.classed("selected",function(O){var N=F.getXScale();var M=F.getYScale();h=(N(C[0][0])<=N(O.x)&&N(O.x)<N(C[1][0]))&&(M(C[0][1])<=M(O.y)&&M(O.y)<M(C[1][1]));if((O.isSelected()==false&&h==true)||(O.isSelected()==true&&h==false&&!O.previouslySelected)){_MyThisGraphNode.selection(O,s)}return h});metExploreD3.hideMask(D);var K=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(K!=undefined){if(K.isLinked()){var L=_metExploreViz.getSessionById("viz");if(L!=undefined){var I=metExploreD3.GraphNetwork.isAnimated(L.getId());if(I=="true"){var J=L.getForce();if(J!=undefined){if((metExploreD3.GraphNetwork.isAnimated(L.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(L.getId())==null)){J.start()}}}}}else{var J=K.getForce();var I=metExploreD3.GraphNetwork.isAnimated(K.getId());if(I=="true"){var J=K.getForce();if(J!=undefined){if((metExploreD3.GraphNetwork.isAnimated(K.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(K.getId())==null)){J.start()}}}}}j=false},100)}}d3.event.target.clear();d3.select(this).call(d3.event.target);var F=metExploreD3.getScaleById(s);d3.select("#"+s).selectAll("#D3viz").style("cursor","default");d3.select("#"+s).selectAll("#D3viz").call(F.getZoom()).on("dblclick.zoom",null).on("mousedown",null)}else{var w=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(w!=undefined){if(w.isLinked()){var G=_metExploreViz.getSessionById("viz");if(G!=undefined){var B=metExploreD3.GraphNetwork.isAnimated(G.getId());if(B=="true"){var E=G.getForce();if(E!=undefined){if((metExploreD3.GraphNetwork.isAnimated(G.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(G.getId())==null)){E.start()}}}}}else{var E=w.getForce();var B=metExploreD3.GraphNetwork.isAnimated(w.getId());if(B=="true"){var E=w.getForce();if(E!=undefined){if(d3.select(metExploreD3.GraphNetwork.isAnimated(w.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(w.getId())==null)){E.start()}}}}}}d3.event.target.clear();d3.select(this).call(d3.event.target);var F=metExploreD3.getScaleById(s);d3.select("#"+s).selectAll("#D3viz").style("cursor","default");d3.select("#"+s).selectAll("#D3viz").call(F.getZoom()).on("dblclick.zoom",null).on("mousedown",null);d3.event.target.extent();d3.selectAll("#brush").classed("hide",false)}));var A=metExploreD3.getScaleById(s);var g=A.getZoom();t.svg=d3.select("#"+s).select("#D3viz").call(g).on("dblclick.zoom",null).attr("pointer-events","all").append("svg:g").attr("class","graphComponent").attr("id","graphComponent");var a=_metExploreViz.getSessionById(s);if(a!=undefined){var b=a.getForce();if(b!=undefined){b.stop();metExploreD3.GraphNetwork.setAnimated(s,false)}if(a.isResizable()!=undefined&&a.isResizable()!=false){metExploreD3.GraphNetwork.task.cancel()}a.setResizable(true);metExploreD3.GraphNetwork.task=metExploreD3.createDelayedTask(function(){a.setResizable(false)})}d3.select("#"+s).select("#D3viz").attr("animation","true").append("svg:g").attr("class","buttonAnim").attr("id","buttonAnim").on("click",metExploreD3.GraphNetwork.play).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/pause.svg").attr("width","50").attr("height","50").attr("transform","translate(10,10) scale(.5)");d3.select("#"+s).select("#D3viz").append("svg:g").attr("class","whiteBlack").attr("id","whiteBlack").attr("x",(o-100)).attr("y",100).on("click",function(){if(d3.select("#"+s).style("-webkit-filter").search("grayscale")==-1&&d3.select("#"+s).style("filter").search("grayscale")==-1){d3.select("#"+s).style("filter","grayscale(100%)").style("-webkit-filter","grayscale(100%)")}else{d3.select("#"+s).style("filter","").style("-webkit-filter","")}}).style("cursor","hand").style("visibility","hidden").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/blackWhite.png").attr("width","50").attr("height","50").attr("transform","translate("+(o-100)+",100) scale(0.5)");d3.select("#"+s).select("#D3viz").append("svg:g").attr("class","invertColor").attr("id","invertColor").attr("x",(o-100)).attr("y",150).on("click",function(){if(d3.select("#"+s).style("-webkit-filter").search("invert")==-1&&d3.select("#"+s).style("filter").search("invert")==-1){d3.select("#"+s).style("filter","invert(100%)").style("-webkit-filter","invert(100%)")}else{d3.select("#"+s).style("filter","").style("-webkit-filter","")}}).style("cursor","hand").style("visibility","hidden").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/invertColor.svg").attr("width","50").attr("height","50").attr("transform","translate("+(o-100)+",150) scale(0.5)");d3.select("#"+s).select("#D3viz").append("svg:g").attr("class","buttonZoomIn").attr("id","buttonZoomIn").attr("x",(o-60)).attr("y",10).on("click",metExploreD3.GraphNetwork.zoomIn).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/zoomin.svg").attr("width","50").attr("height","50").style("opacity",0.2).attr("transform","translate("+(o-60)+",10) scale(1)").on("mouseover",function(h){d3.select(this).transition().duration(500).style("opacity",1)}).on("mouseout",function(h){d3.select(this).transition().duration(500).style("opacity",0.2)});d3.select("#"+s).select("#D3viz").append("svg:g").attr("class","buttonZoomOut").attr("id","buttonZoomOut").attr("x",(o-110)).attr("y",10).on("click",metExploreD3.GraphNetwork.zoomOut).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/zoomout.svg").attr("width","50").attr("height","50").style("opacity",0.2).attr("transform","translate("+(o-110)+",10) scale(1)").on("mouseover",function(h){d3.select(this).transition().duration(500).style("opacity",1)}).on("mouseout",function(h){d3.select(this).transition().duration(500).style("opacity",0.2)});d3.select("#"+s).select("#D3viz").append("svg:g").attr("class","buttonHand").attr("id","buttonHand").attr("x",(o-160)).attr("y",10).attr("scrollable","false").on("click",metExploreD3.GraphNetwork.moveGraph).style("opacity",1).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/handcursor.svg").attr("width","50").attr("height","50").attr("transform","translate("+(o-160)+",10) scale(1)");d3.select("#"+s).select("#D3viz").select("buttonHand").style("opacity",0);d3.select("#"+s).on("mouseover",function(){d3.select("#"+s).select("#D3viz").select("#buttonZoomOut").transition().duration(500).style("opacity",1);d3.select("#"+s).select("#D3viz").select("#buttonZoomIn").transition().duration(500).style("opacity",1);var w=_metExploreViz.getSessionById(s);if(w.isActive()){var h=d3.select("#"+s).select("#buttonHand").attr("scrollable");if(h=="false"){d3.select("#"+s).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",0.2)}else{d3.select("#"+s).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",1)}}}).on("mouseout",function(){d3.select("#"+s).select("#D3viz").select("#buttonZoomOut").transition().duration(500).style("opacity",0);d3.select("#"+s).select("#D3viz").select("#buttonZoomIn").transition().duration(500).style("opacity",0);d3.select("#"+s).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",0)});metExploreD3.GraphNetwork.setAnimated(s,true);var a=_metExploreViz.getSessionById(s);var z=metExploreD3.getLinkStyle();var r=metExploreD3.getMetaboliteStyle();metExploreD3.GraphLink.refreshLink(s,a,z,r);metExploreD3.GraphNode.refreshNode(s);var p=document.createElement("div");p.id="tooltip2";p.className="tooltip2";document.getElementById("viz").appendChild(p);var v=d3.select(m).attr("isLink");d3.select(m).select("image").remove();d3.select(m).append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/link.svg").attr("width","50").attr("height","50").attr("transform","translate(10,50) scale(.5)");a.setLinked(false);if(s!="viz"){d3.select("#"+s).select("#D3viz").append("svg:g").attr("class","buttonLink").attr("id","buttonLink").attr("isLink","false").on("click",metExploreD3.GraphNetwork.setLink).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/unlink.svg").attr("width","50").attr("height","50").attr("transform","translate(10,50) scale(.5)")}else{metExploreD3.GraphNetwork.looksLinked();if(a.isLinked()){metExploreD3.GraphNetwork.graphAlignment(s)}}var a=metExploreD3.getSessionById(s);var f=a.getD3Data();var b=a.getForce();b.nodes(f.getNodes()).links(f.getLinks()).on("tick",function(){if(b.alpha()>=0.005){setTimeout(metExploreD3.GraphNetwork.tick(s),0)}}).start();a.setForce(b);metExploreD3.sortCompartmentInBiosource();metExploreD3.GraphNode.colorStoreByCompartment(metExploreD3.GraphNode.node)}};metExploreD3.Features={features:{highlightSubnetwork:{description:"highlightSubnetwork",enabledTo:["lcottret","npoupin"]},layouts:{description:"layouts",enabledTo:["fjourdan"]},algorithm:{description:"layouts",enabledTo:["cfrainay"]}},isEnabled:function(b,a){if(this.features[b]!=undefined){return this.isEnabledForUser(b,a)||this.isEnabledForAll(b)}return false},isEnabledForUser:function(b,a){if(this.features[b]!=undefined){return this.features[b].enabledTo.indexOf(a)!=-1}return false},isEnabledForAll:function(a){if(this.features[a]!=undefined){return this.features[a].enabledTo.indexOf("all")!=-1}return false}};metExploreD3.GraphFunction={bfs:function(f){var g=metExploreD3.GraphFunction.getGraphNotDirected();var c=g.getNode(f.getId());for(var d in g.nodes){g.nodes[d].distance="INFINITY";g.nodes[d].parent=null}var b=[];c.distance=0;b.push(c);while(b.length!=0){var a=b.pop();a.getAdjacents().forEach(function(h){if(h.distance=="INFINITY"){h.distance=a.distance+1;h.parent=a;b.push(h)}})}return g},colorDistanceOnNode:function(f,c){var d=_metExploreViz.getSessionById("viz").getD3Data();var g=0;for(var b in f.nodes){var h=f.nodes[b].distance;if(g<h){g=h}d.getNodeById(b).distance=h}var a=d3.scale.category20();var a=d3.scale.linear().domain([0,4]).range(["blue","yellow"]);d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").style("fill",function(j){return a(j.distance)});if(c!=undefined){c()}},test3:function(){var b=_metExploreViz.getSessionById("viz").getD3Data();d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").on("click",function(g){var f=[];_metExploreViz.getSessionById("viz").getSelectedNodes().forEach(function(m){var j=b.getNodeById(m);var o=metExploreD3.GraphFunction.bfs(j);f.push(o)});var d=f[0];for(var c in d.nodes){var h=f.filter(function(j){return j.nodes[c].distance!="INFINITY"}).map(function(j){return j.nodes[c].distance});d.nodes[c].distance=Math.min.apply(Math,h);if(d.nodes[c].distance=="Infinity"){d.nodes[c].distance=10000}}metExploreD3.GraphFunction.colorDistanceOnNode(d,a)});function a(){var c=d3.scale.linear().domain([0,1,2,3]).range([-600,-500,-400,-30]);metExploreD3.getGlobals().getSessionById("viz").getForce().charge(function(f){var g=f.distance;if(f.distance>3){g=3}var d=c(g);return d})}},testFlux:function(){var b=_metExploreViz.getSessionById("viz").getD3Data();var a=d3.scale.linear().domain([0,0.1,0.2,0.5,1]).range([-30,-50,-60,-500-600]);metExploreD3.getGlobals().getSessionById("viz").getForce().charge(function(f){var c=d3.select("g#node"+f.getId()+".node").attr("opacity");var d=a(c);return d})},test:function(){var b=_metExploreViz.getSessionById("viz").getD3Data();d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").on("click",function(c){metExploreD3.GraphFunction.colorDistanceOnNode(metExploreD3.GraphFunction.bfs(c),a)});function a(){var c=d3.scale.linear().domain([0,1,2,3]).range([-600,-500,-400,-30]);metExploreD3.getGlobals().getSessionById("viz").getForce().charge(function(f){var g=f.distance;if(f.distance>3){g=3}var d=c(g);return d})}},test2:function(){var b=_metExploreViz.getSessionById("viz").getD3Data();d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").on("click",function(c){metExploreD3.GraphFunction.colorDistanceOnNode(metExploreD3.GraphFunction.bfs(c),a)});function a(){var d=metExploreD3.getLinkStyle();var c=d3.scale.linear().domain([0,1,2,3]).range([5*d.getSize(),4*d.getSize(),3*d.getSize(),d.getSize()]);var f=d3.scale.linear().domain([0,1,2,3]).range([-600,-500,-400,-30]);metExploreD3.getGlobals().getSessionById("viz").getForce().linkDistance(function(j){var g=Math.max(j.getSource().distance,j.getTarget().distance);if(g>3){g=3}var h=c(g);return h}).gravity(0.04).charge(function(j){var g=j.distance;if(j.distance>3){g=3}var h=f(g);return h})}},hierarchicalDrawing:function(){var b="Hierarchical Tree (R-T Extended)";var a=[];a.push({name:"node spacing",value:50});metExploreD3.GraphFunction.applyTulipLayoutAlgorithmInWorker(b,a)},sugiyamaDrawing:function(){var b="Sugiyama (OGDF)";var a=[];a.push({name:"node spacing",value:50});a.push({name:"node distance",value:50});a.push({name:"layer distance",value:50});metExploreD3.GraphFunction.applyTulipLayoutAlgorithmInWorker(b,a)},betweennessCentrality:function(){var b="Betweenness Centrality";var a=[];a.push({name:"directed",value:true});metExploreD3.GraphFunction.applyTulipDoubleAlgorithmInWorker(b,a)},applyTulipLayoutAlgorithmInWorker:function(b,a){var d="viz";var c=metExploreD3.createLoadMask("Selection in progress...",d);if(c!=undefined){metExploreD3.showMask(c);metExploreD3.deferFunction(function(){var p=_metExploreViz.getSessionsSet();var h=_metExploreViz.getSessionById(d);var r=h.getD3Data();if(h!=undefined){if(h.isLinked()){for(var q in p){if(p[q].isLinked()){metExploreD3.GraphNetwork.animationButtonOff(p[q].getId())}}var m=_metExploreViz.getSessionById("viz").getForce();m.stop()}else{metExploreD3.GraphNetwork.animationButtonOff(d);var m=h.getForce();m.stop()}}var f=null;var s=null;var g=100;var o={};function j(){tulip.holdObservers();var v=f.getLayoutProperty("viewLayout");var w=f.getColorProperty("viewColor");var y=f.getStringProperty("viewLabel");tulip.unholdObservers();var u=tulip.getDefaultAlgorithmParameters(b,f);console.log(u);if(a!=undefined){a.forEach(function(z){u[z.name]=z.value})}f.applyLayoutAlgorithmInWorker(b,f.getLocalLayoutProperty("viewLayout"),u,function(){d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").each(function(z){z.px=v.getNodeValue(o[z.getId()]).x;z.py=v.getNodeValue(o[z.getId()]).y;z.x=v.getNodeValue(o[z.getId()]).x;z.y=v.getNodeValue(o[z.getId()]).y});metExploreD3.GraphNetwork.tick("viz");metExploreD3.hideMask(c)})}function t(u){if(typeof tulip=="undefined"||!tulip.isLoaded()){setTimeout(t,1000)}else{f=new tulip.Graph();console.log("tulip.getLayoutAlgorithmPluginsList() ",tulip.getLayoutAlgorithmPluginsList());console.log("tulip.getAlgorithmPluginsList() ",tulip.getAlgorithmPluginsList());console.log("tulip.getDoubleAlgorithmPluginsList() ",tulip.getDoubleAlgorithmPluginsList());tulip.holdObservers();f.setName("Test Javascript Graph");var w=f.getStringProperty("viewLabel");r.getNodes().forEach(function(A){var z=f.addNode();var B=f.getLayoutProperty("viewLayout");B.setNodeValue(z,new tulip.Coord(A.x,A.y,0));w.setNodeValue(z,"node 1");o[A.getId()]=z});var v=f.getLayoutProperty("viewLayout");r.getLinks().forEach(function(z){f.addEdge(o[z.getSource()],o[z.getTarget()])});var y=new Array();y.push(new tulip.Coord(0,0,0));v.setAllEdgeValue(y);tulip.unholdObservers()}if(u!=undefined){u()}}t(j)},100)}},applyTulipDoubleAlgorithmInWorker:function(b,a){var d="viz";var c=metExploreD3.createLoadMask("Selection in progress...",d);if(c!=undefined){metExploreD3.showMask(c);metExploreD3.deferFunction(function(){var p=_metExploreViz.getSessionsSet();var h=_metExploreViz.getSessionById(d);var r=h.getD3Data();if(h!=undefined){if(h.isLinked()){for(var q in p){if(p[q].isLinked()){metExploreD3.GraphNetwork.animationButtonOff(p[q].getId())}}var m=_metExploreViz.getSessionById("viz").getForce();m.stop()}else{metExploreD3.GraphNetwork.animationButtonOff(d);var m=h.getForce();m.stop()}}var f=null;var s=null;var g=100;var o={};function j(){tulip.holdObservers();var w=f.getLayoutProperty("viewLayout");var y=f.getColorProperty("viewColor");var z=f.getStringProperty("viewLabel");var u=f.getDoubleProperty("viewMetric");tulip.unholdObservers();var v=tulip.getDefaultAlgorithmParameters(b,f);if(a!=undefined){a.forEach(function(A){v[A.name]=A.value})}console.log("params :",v);f.applyDoubleAlgorithmInWorker(b,f.getDoubleProperty("viewMetric"),v,function(){var B=[];d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").each(function(D){B.push(u.getNodeValue(o[D.getId()]))});var C=d3.scale.linear().domain([Math.min.apply(null,B),Math.max.apply(null,B)]).range(["yellow","blue"]);var A=d3.scale.linear().domain([Math.min.apply(null,B),Math.max.apply(null,B)]).range([1,3]);d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").style("fill",function(D){return C(u.getNodeValue(o[D.getId()]))}).attr("transform",function(D){return"translate("+D.x+", "+D.y+") scale("+A(u.getNodeValue(o[D.getId()]))+")"}).transition().duration(2000);metExploreD3.hideMask(c)})}function t(u){if(typeof tulip=="undefined"||!tulip.isLoaded()){setTimeout(t,1000)}else{f=new tulip.Graph();console.log("tulip.getLayoutAlgorithmPluginsList() ",tulip.getLayoutAlgorithmPluginsList());console.log("tulip.getAlgorithmPluginsList() ",tulip.getAlgorithmPluginsList());console.log("tulip.getDoubleAlgorithmPluginsList() ",tulip.getDoubleAlgorithmPluginsList());tulip.holdObservers();f.setName("Test Javascript Graph");var w=f.getStringProperty("viewLabel");r.getNodes().forEach(function(A){var z=f.addNode();var B=f.getLayoutProperty("viewLayout");B.setNodeValue(z,new tulip.Coord(A.x,A.y,0));w.setNodeValue(z,"node 1");o[A.getId()]=z});var v=f.getLayoutProperty("viewLayout");r.getLinks().forEach(function(z){f.addEdge(o[z.getSource()],o[z.getTarget()])});var y=new Array();y.push(new tulip.Coord(0,0,0));v.setAllEdgeValue(y);tulip.unholdObservers()}if(u!=undefined){u()}}t(j)},100)}},drawNetwork:function(){},randomDrawing:function(){},stopSpringDrawing:function(){},extractSubNetwork:function(c){var b=_metExploreViz.getSessionById("viz");var z=[];if(b.getVizEngine()=="D3"){var h=d3.select("#viz").select("#D3viz");z=b.getSelectedNodes();if(z.length<2){metExploreD3.displayMessage("Warning","At least two nodes have to be selected or mapped.");return null}else{var A={};for(w=0;w<z.length;w++){A[z[w]]=w}var t=[];for(w=0;w<z.length;w++){t[w]=[];for(v=0;v<z.length;v++){t[w][v]=null}}for(var o in c.nodes){c.nodes[o].inSubNet=false}for(var w=0;w<c.edges.length;w++){c.edges[w].inSubNet=false}for(var w=0;w<z.length;w++){var a=z[w];var B=new Array();for(var v=0;v<z.length;v++){if(v!=w){if(t[w][v]==null){var s=new Array();var d=z[v];for(var o in c.nodes){c.nodes[o].distance=Infinity;c.nodes[o].predecessor=null;c.nodes[o].optimized=false}var p=c.nodes[a];p.distance=0;var m=new BinaryMinHeap(c.nodes,"distance");var u;var f=false;while((m.min()!=undefined)&&(!f)){u=m.extractMin();u.optimized=true;for(e in u.edges){var g=u.edges[e].target;if(g.optimized){continue}var r=u.distance+(u.edges.length)*(u.edges.length);if((r<g.distance)&&s.indexOf(metExploreD3.GraphFunction.getReactionIdWithoutBack(g.id))==-1){s.push(metExploreD3.GraphFunction.getReactionIdWithoutBack(g.id));g.distance=r;m.heapify();g.predecessor=u}if(g.id==d){f=true;t[w][v]=metExploreD3.GraphFunction.getPathBasedOnPredecessors(c,d)}else{var y=A[g.id];if((y!=undefined)&&(t[w][y]==null)){t[w][y]=metExploreD3.GraphFunction.getPathBasedOnPredecessors(c,g.id)}}}}}}}}}return c}},getGraph:function(){var a=_metExploreViz.getSessionById("viz");var c=new Graph();var b=d3.select("#viz").select("#D3viz");b.selectAll("g.node").each(function(d){if(d.getBiologicalType()=="reaction"&&d.getReactionReversibility()){c.addNode(d.getId()+"_back")}c.addNode(d.getId())});b.selectAll("path.link").each(function(f){var d=f.source;var g=f.target;var j=d.getId();var h=g.getId();if(d.getBiologicalType()=="reaction"&&d.getReactionReversibility()){c.addEdge(h,j+"_back")}if(g.getBiologicalType()=="reaction"&&g.getReactionReversibility()){c.addEdge(h+"_back",j)}c.addEdge(j,h)});return c},getGraphNotDirected:function(){var a=_metExploreViz.getSessionById("viz");var c=new Graph();var b=d3.select("#viz").select("#D3viz");b.selectAll("g.node").each(function(d){c.addNode(d.getId())});b.selectAll("path.link").each(function(f){var d=f.source;var g=f.target;var j=d.getId();var h=g.getId();c.addEdge(j,h)});return c},getPathBasedOnPredecessors:function(g,c){var h=new Array();var d=g.nodes[c].predecessor;if(d==null){return h}else{var b=new Array();var a=g.nodes[c];a.inSubNet=true;while(a!=null){b.push(a);a.inSubNet=true;for(e in a.edges){var f=a.edges[e];if(a.predecessor!=null){if(f.source.id==a.predecessor.id){f.inSubNet=true}}}a=a.predecessor}for(var j=b.length-1;j>=0;j--){h.push(b[j].id)}return h}},keepOnlySubnetwork:function(){var b=_metExploreViz.getSessionById("viz");var a=b.getForce();var f=b.getD3Data();var d=metExploreD3.GraphFunction.getGraph();var c=metExploreD3.createLoadMask("Remove elements not in path...","viz");if(c!=undefined){metExploreD3.showMask(c);metExploreD3.deferFunction(function(){var m=d3.select("#viz").select("#D3viz");if(b!=undefined){var h=b.getForce();if(h!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){h.stop()}}}var g=metExploreD3.GraphFunction.extractSubNetwork(d);console.log("graph after extraction ",g);if(g!=null){var p=true;for(var o in b.getSelectedNodes()){var j=b.getSelectedNodes()[o];if(g.nodes[j].inSubNet){p=false}}if(p){metExploreD3.displayMessage("Warning","There is no path between the selected nodes !!")}else{var m=d3.select("#viz").select("#D3viz");m.selectAll("g.node").filter(function(r){if(r.getBiologicalType()=="metabolite"){var s=r.getId();return !g.nodes[s].inSubNet}else{if(r.getBiologicalType()=="reaction"){var s=r.getId();var q=r.getId()+"_back";if(g.nodes[q]==undefined){return !g.nodes[s].inSubNet}else{return !(g.nodes[s].inSubNet||g.nodes[q].inSubNet)}}}}).each(function(q){metExploreD3.GraphNetwork.removeANode(q,"viz")})}}if(b!=undefined){if(h!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){h.start()}}}metExploreD3.hideMask(c)},10)}},highlightSubnetwork:function(){var b=_metExploreViz.getSessionById("viz");var a=metExploreD3.createLoadMask("Highlight Subnetwork...","viz");if(a!=undefined){metExploreD3.showMask(a);metExploreD3.deferFunction(function(){var c=d3.select("#viz").select("#D3viz");if(b!=undefined){var m=b.getForce();if(m!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){m.stop()}}}var f=metExploreD3.GraphFunction.getGraph();var j=metExploreD3.GraphFunction.extractSubNetwork(f);console.log("graph after extraction in highlight subnetwork ",j);if(j!=null){var h=true;for(var g in b.getSelectedNodes()){var d=b.getSelectedNodes()[g];if(j.nodes[d].inSubNet){h=false}}if(h){metExploreD3.displayMessage("Warning","There is no path between the selected nodes !!")}else{var c=d3.select("#viz").select("#D3viz");c.selectAll("g.node").filter(function(o){return o.getBiologicalType()=="metabolite"}).filter(function(o){var p=o.getId();return j.nodes[p].inSubNet}).selectAll(".metabolite").transition().duration(4000).style("opacity",1);c.selectAll("g.node").filter(function(o){return o.getBiologicalType()=="metabolite"}).filter(function(o){var p=o.getId();return !j.nodes[p].inSubNet}).selectAll(".metabolite").transition().duration(4000).style("stroke","gray").style("opacity",0.25);c.selectAll("g.node").filter(function(o){return o.getBiologicalType()=="metabolite"}).filter(function(o){var p=o.getId();return j.nodes[p].inSubNet}).selectAll("text").transition().duration(4000).style("opacity",1);c.selectAll("g.node").filter(function(o){return o.getBiologicalType()=="metabolite"}).filter(function(o){var p=o.getId();return !j.nodes[p].inSubNet}).selectAll("text").transition().duration(4000).style("opacity",0.25);c.selectAll("g.node").filter(function(o){return o.getBiologicalType()=="reaction"}).filter(function(p){var q=p.getId();var o=p.getId()+"_back";if(j.nodes[o]==undefined){return j.nodes[q].inSubNet}else{return(j.nodes[q].inSubNet||j.nodes[o].inSubNet)}}).selectAll(".reaction").transition().duration(4000).style("opacity",1);c.selectAll("g.node").filter(function(o){return o.getBiologicalType()=="reaction"}).filter(function(p){var q=p.getId();var o=p.getId()+"_back";if(j.nodes[o]==undefined){return !j.nodes[q].inSubNet}else{return !(j.nodes[q].inSubNet||j.nodes[o].inSubNet)}}).selectAll(".reaction").transition().duration(4000).style("stroke","gray").style("opacity",0.25);c.selectAll("g.node").filter(function(o){return o.getBiologicalType()=="reaction"}).filter(function(p){var q=p.getId();var o=p.getId()+"_back";if(j.nodes[o]==undefined){return j.nodes[q].inSubNet}else{return(j.nodes[q].inSubNet||j.nodes[o].inSubNet)}}).selectAll("text").transition().duration(4000).style("opacity",1);c.selectAll("g.node").filter(function(o){return o.getBiologicalType()=="reaction"}).filter(function(p){var q=p.getId();var o=p.getId()+"_back";if(j.nodes[o]==undefined){return !j.nodes[q].inSubNet}else{return !(j.nodes[q].inSubNet||j.nodes[o].inSubNet)}}).selectAll("text").transition().duration(4000).style("opacity",0.25);c.selectAll("path.link").filter(function(r){var p=r.source.getId();var q=r.target.getId();if(r.source.getBiologicalType()=="reaction"){var o=p+"_back";if(j.nodes[o]==undefined){return(j.nodes[p].inSubNet&&j.nodes[q].inSubNet)}else{return(j.nodes[p].inSubNet&&j.nodes[q].inSubNet)||(j.nodes[o].inSubNet&&j.nodes[q].inSubNet)}}else{var o=q+"_back";if(j.nodes[o]==undefined){return(j.nodes[p].inSubNet&&j.nodes[q].inSubNet)}else{return(j.nodes[p].inSubNet&&j.nodes[q].inSubNet)||(j.nodes[p].inSubNet&&j.nodes[o].inSubNet)}}}).transition().duration(4000).style("opacity",1);c.selectAll("path.link").filter(function(r){var p=r.source.getId();var q=r.target.getId();if(r.source.getBiologicalType()=="reaction"){var o=p+"_back";if(j.nodes[o]==undefined){return !(j.nodes[p].inSubNet&&j.nodes[q].inSubNet)}else{return !(j.nodes[p].inSubNet&&j.nodes[q].inSubNet)&&!(j.nodes[o].inSubNet&&j.nodes[q].inSubNet)}}else{var o=q+"_back";if(j.nodes[o]==undefined){return !(j.nodes[p].inSubNet&&j.nodes[q].inSubNet)}else{return !(j.nodes[p].inSubNet&&j.nodes[q].inSubNet)&&!(j.nodes[p].inSubNet&&j.nodes[o].inSubNet)}}}).transition().duration(4000).style("stroke","gray").style("opacity",0.25)}}if(b!=undefined){if(m!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){m.start()}}}metExploreD3.hideMask(a)},10)}},isBackReaction:function(a){if(a.indexOf("_back")!=-1){return true}else{return false}},getReactionIdWithoutBack:function(a){if(metExploreD3.GraphFunction.isBackReaction(a)){a=a.replace("_back","")}return a},nodeInDegree:function(a){var c=0;for(e in a.edges){var b=a.edges[e].source;if(b.id!=a.id){c++}}return c},nodeOutDegree:function(a){var c=0;for(e in a.edges){var b=a.edges[e].source;if(b.id==a.id){c++}}return c},getLeafs:function(a){var c=new Array();for(var b in a.nodes){var d=a.nodes[b];if(metExploreD3.GraphFunction.nodeOutDegree(d)==0){c.push(d)}}return c},isAcyclic:function(c){var g=new Graph();for(var a in c.edges){var f=c.edges[a];g.addEdge(f.source.id,f.target.id)}var b=metExploreD3.GraphFunction.getLeafs(g);while(b.length!=0&&Object.keys(g.nodes).length!=0){var d=b.pop();g.removeNode(d);b=metExploreD3.GraphFunction.getLeafs(g)}if(Object.keys(g.nodes).length==0){return true}if(b.length==0){return false}},getMinimalFAS:function(b){var d=new Array();var a=new Graph();var c=new Array();for(e in b.edges){var f=b.edges[e];a.addEdge(f.source.id,f.target.id);if(metExploreD3.GraphFunction.isAcyclic(a)){d.push(f)}else{a.removeEdge(f);c.push(f)}}return c},getStronglyConnectedComponents:function(b){if(b==null){b=this.createGraph(false)}var a=new Array();var f=0;var c=new Array();for(n in b.nodes){var d=b.nodes[n];d.index=undefined;d.lowlink=Number.MAX_VALUE}for(n in b.nodes){var d=b.nodes[n];if(d.index==undefined){metExploreD3.GraphFunction.strongconnect(d,b,f,a,c)}}return c},strongconnect:function(d,h,f,g,b){d.index=f;d.lowlink=f;f=f+1;g.push(d);for(e in d.edges){var a=d.edges[e].target;if(a.id!=d.id){if(a.index==undefined){metExploreD3.GraphFunction.strongconnect(a,h,f,g,b);d.lowlink=Math.min(d.lowlink,a.lowlink)}else{if(g.indexOf(a)!=undefined){d.lowlink=Math.min(d.lowlink,a.lowlink)}}}}if(d.lowlink==d.index){var c=new Array();var a=g.pop();while(a.id!=d.id){c.push(a);var a=g.pop()}c.push(a);b.push(c)}},getMinimalFASstory:function(g,j){var b=new Array();var f=new Graph();var a=new Array();var h=g.edges.length;for(e in g.edges){var c=g.edges[e];var d=0;if(j.length>0){if(j.indexOf(c.source.id)==-1){d=d+h}if(j.indexOf(c.target.id)==-1){d=d+h}}d=d-Math.max(c.source.edges.length,d+c.target.edges.length);c.weight=d}g.edges.sort(function(m,o){return m.weight-o.weight});for(e in g.edges){var c=g.edges[e];f.addEdge(c.source.id,c.target.id);if(metExploreD3.GraphFunction.isAcyclic(f)){b.push(c)}else{f.removeEdge(c);a.push(c)}}return a}};metExploreD3.GraphMapping={compareMappingConditionChart:function(){var h=_metExploreViz.getSessionsSet();var a=[];var m=[];var j=[];for(var r in h){m.push(h[r].getActiveMapping());j.push(h[r].isMapped());if(r!="viz"){a=h[r].getD3Data().getNodes().concat(a)}}var b=[];a.forEach(function(t){var s=a.filter(function(u){return u.getIdentifier()==t.getIdentifier()});if(s.length>1&&b.indexOf(t)==-1&&t.getMappingDataByNameAndCond(m[0],j[0])!=undefined){b.push(t)}});var p=b.map(function(s){return s.getName()});var o=_metExploreViz.getMappingByName(m);var f=b.map(function(s){return -Math.abs(parseInt(s.getMappingDataByNameAndCond(m[0],j[0]).getMapValue()))});var d=b.map(function(s){return Math.abs(parseInt(s.getMappingDataByNameAndCond(m[1],j[1]).getMapValue()))});var c=[{name:j[0],data:f},{name:j[1],data:d}];var q={categories:p,conditions:c};var g=new MetXCompareBar(q,1300,p.length*15,"xaxis","yaxis",m[0]+" analysis");return g},mapNodeDataFile:function(d,a){var b=_metExploreViz.getSessionById("viz");var f=b.getForce();f.stop();var c=metExploreD3.createLoadMask("Mapping in progress...","viz");if(c!=undefined){metExploreD3.showMask(c);setTimeout(function(){var m=b.getD3Data();var o=d.getConditions();var p=d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node");var g=undefined;switch(d.getTargetLabel()){case"reactionDBIdentifier":for(var q=o.length-1;q>=0;q--){a.forEach(function(t){var s=new MappingData(t[d.getTargetLabel()],d.getName(),o[q],t[o[q]]);d.addMap(s);g=m.getNodeByDbIdentifier(t[d.getTargetLabel()]);if(g!=undefined){var r=new MappingData(g,d.getName(),o[q],t[o[q]]);g.addMappingData(r)}})}break;case"reactionId":for(var q=o.length-1;q>=0;q--){a.forEach(function(t){var s=new MappingData(t[d.getTargetLabel()],d.getName(),o[q],t[o[q]]);d.addMap(s);g=m.getNodeByDbIdentifier(t[d.getTargetLabel()]);if(g!=undefined){var r=new MappingData(g,d.getName(),o[q],t[o[q]]);g.addMappingData(r)}})}break;case"metaboliteId":for(var q=o.length-1;q>=0;q--){a.forEach(function(t){var s=new MappingData(t[d.getTargetLabel()],d.getName(),o[q],t[o[q]]);d.addMap(s);g=m.getNodeByDbIdentifier(t[d.getTargetLabel()]);if(g!=undefined){var r=new MappingData(g,d.getName(),o[q],t[o[q]]);g.addMappingData(r)}})}break;case"metaboliteDBIdentifier":for(var q=o.length-1;q>=0;q--){a.forEach(function(t){var s=new MappingData(t[d.getTargetLabel()],d.getName(),o[q],t[o[q]]);d.addMap(s);g=m.getNodeByDbIdentifier(t[d.getTargetLabel()]);if(g!=undefined){var r=new MappingData(g,d.getName(),o[q],t[o[q]]);g.addMappingData(r)}})}break;case"inchi":for(var q=o.length-1;q>=0;q--){a.forEach(function(s){var r=new MappingData(s[d.getTargetLabel()],d.getName(),o[q],s[o[q]]);d.addMap(r);g=m.getNodeByMappedInchi(s[d.getTargetLabel()]);if(g!=undefined){g.forEach(function(u){var t=new MappingData(u,d.getName(),o[q],s[o[q]]);u.addMappingData(t)})}})}break;default:metExploreD3.displayMessage("Warning",'The type of node "'+d.getTargetLabel()+"\" isn't know.")}metExploreD3.hideMask(c);var j=metExploreD3.GraphNetwork.isAnimated("viz");if(j=="true"){var h=b.getForce();if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){h.resume()}}},1)}},mapNodeData:function(f,d){console.log(d);var b=_metExploreViz.getSessionById("viz");var a=b.getForce();a.stop();var c=metExploreD3.createLoadMask("Mapping in progress...","viz");if(c!=undefined){metExploreD3.showMask(c);setTimeout(function(){var m=b.getD3Data();var o=f.getConditions();var p=d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node");var g=undefined;switch(f.getTargetLabel()){case"reactionDBIdentifier":for(var q=o.length-1;q>=0;q--){d.forEach(function(r){var t=new MappingData(r[0],f.getName(),o[q],r[q+1]);f.addMap(t);g=m.getNodeByDbIdentifier(r[0]);if(g!=undefined){var s=new MappingData(g,f.getName(),o[q],r[q+1]);g.addMappingData(s)}})}break;case"reactionId":for(var q=o.length-1;q>=0;q--){d.forEach(function(r){var t=new MappingData(r[0],f.getName(),o[q],r[q+1]);f.addMap(t);g=m.getNodeById(r[0]);if(g!=undefined){var s=new MappingData(g,f.getName(),o[q],r[q+1]);g.addMappingData(s)}})}break;case"metaboliteId":for(var q=o.length-1;q>=0;q--){d.forEach(function(r){var t=new MappingData(r[0],f.getName(),o[q],r[q+1]);f.addMap(t);g=m.getNodeById(r[0]);if(g!=undefined){var s=new MappingData(g,f.getName(),o[q],r[q+1]);g.addMappingData(s)}})}break;case"metaboliteDBIdentifier":for(var q=o.length-1;q>=0;q--){d.forEach(function(r){var t=new MappingData(r[0],f.getName(),o[q],r[q+1]);f.addMap(t);g=m.getNodeByDbIdentifier(r[0]);if(g!=undefined){var s=new MappingData(g,f.getName(),o[q],r[q+1]);g.addMappingData(s)}})}break;case"inchi":break;default:metExploreD3.displayMessage("Warning",'The type of node "'+f.getTargetLabel()+"\" isn't know.")}metExploreD3.hideMask(c);var j=metExploreD3.GraphNetwork.isAnimated("viz");if(j=="true"){var h=b.getForce();if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){h.resume()}}},1)}},mapNodes:function(b,a){metExploreD3.onloadMapping(b,function(){d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(f){if(this.getAttribute("mapped")==undefined||this.getAttribute("mapped")==false||this.getAttribute("mapped")=="false"){return false}else{return true}}).attr("mapped","false").selectAll("rect.stroke").remove();var c=metExploreD3.createLoadMask("Mapping in progress...","viz");var d=_metExploreViz.getMappingByName(b);if(c!=undefined){metExploreD3.showMask(c);setTimeout(function(){var f=_metExploreViz.getSessionById("viz");var h=f.getForce();h.stop();var j=d.getConditions();j.forEach(function(m){d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(o){if(this.getAttribute("mapped")==undefined||this.getAttribute("mapped")==false||this.getAttribute("mapped")=="false"){return true}else{return false}}).each(function(q){if(q.getBiologicalType()=="reaction"){if(q.getMappingDataByNameAndCond(d.getName(),m)!=null){var p=metExploreD3.getReactionStyle();_MyThisGraphNode.addText(q,"viz",p);d3.select(this).attr("mapped","true").insert("rect",":first-child").attr("class","stroke").attr("width",parseInt(d3.select(this).select(".reaction").attr("width"))+10).attr("height",parseInt(d3.select(this).select(".reaction").attr("height"))+10).attr("rx",parseInt(d3.select(this).select(".reaction").attr("rx"))+5).attr("ry",parseInt(d3.select(this).select(".reaction").attr("ry"))+5).attr("transform","translate(-"+parseInt(parseInt(d3.select(this).select(".reaction").attr("width"))+10)/2+",-"+parseInt(parseInt(d3.select(this).select(".reaction").attr("height"))+10)/2+")").style("opacity","0.5").style("fill","red");f.addSelectedNode(q.getId())}}else{if(q.getBiologicalType()=="metabolite"){var r=d3.select(this).select(".metabolite").attr("identifier");if(q.getMappingDataByNameAndCond(d.getName(),m)!=null){var o=metExploreD3.getReactionStyle();_MyThisGraphNode.addText(q,"viz",o);d3.select(this).attr("mapped","true").insert("rect",":first-child").attr("class","stroke").attr("width",parseInt(d3.select(this).select(".metabolite").attr("width"))+10).attr("height",parseInt(d3.select(this).select(".metabolite").attr("height"))+10).attr("rx",parseInt(d3.select(this).select(".metabolite").attr("rx"))+5).attr("ry",parseInt(d3.select(this).select(".metabolite").attr("ry"))+5).attr("transform","translate(-"+parseInt(parseInt(d3.select(this).select(".metabolite").attr("width"))+10)/2+",-"+parseInt(parseInt(d3.select(this).select(".metabolite").attr("height"))+10)/2+")").style("opacity","0.5").style("fill","red");f.addSelectedNode(q.getId())}}}}).each(function(q){if(d3.select(this).select(".stroke")[0][0]==null){if(q.getBiologicalType()=="reaction"){if(q.getMappingDataByNameAndCond(d.getName(),m)!=null){var p=metExploreD3.getReactionStyle();_MyThisGraphNode.addText(q,"viz",p);d3.select(this).insert("rect",":first-child").attr("class","stroke").attr("width",parseInt(d3.select(this).select(".reaction").attr("width"))+10).attr("height",parseInt(d3.select(this).select(".reaction").attr("height"))+10).attr("rx",parseInt(d3.select(this).select(".reaction").attr("rx"))+5).attr("ry",parseInt(d3.select(this).select(".reaction").attr("ry"))+5).attr("transform","translate(-"+parseInt(parseInt(d3.select(this).select(".reaction").attr("width"))+10)/2+",-"+parseInt(parseInt(d3.select(this).select(".reaction").attr("height"))+10)/2+")").style("opacity","0.5").style("fill","red");f.addSelectedNode(q.getId());return true}else{return false}}else{if(q.getBiologicalType()=="metabolite"){var r=d3.select(this).select(".metabolite").attr("identifier");if(q.getMappingDataByNameAndCond(d.getName(),m)!=null){var o=metExploreD3.getReactionStyle();_MyThisGraphNode.addText(q,"viz",o);d3.select(this).insert("rect",":first-child").attr("class","stroke").attr("width",parseInt(d3.select(this).select(".metabolite").attr("width"))+10).attr("height",parseInt(d3.select(this).select(".metabolite").attr("height"))+10).attr("rx",parseInt(d3.select(this).select(".metabolite").attr("rx"))+5).attr("ry",parseInt(d3.select(this).select(".metabolite").attr("ry"))+5).attr("transform","translate(-"+parseInt(parseInt(d3.select(this).select(".metabolite").attr("width"))+10)/2+",-"+parseInt(parseInt(d3.select(this).select(".metabolite").attr("height"))+10)/2+")").style("opacity","0.5").style("fill","red");f.addSelectedNode(q.getId());return true}else{return false}}}}})});metExploreD3.hideMask(c);if(a!=undefined){a()}var g=metExploreD3.GraphNetwork.isAnimated("viz");if(g=="true"){var f=_metExploreViz.getSessionById("viz");var h=f.getForce();if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){h.resume()}}},1)}})},mapFluxes:function(g,c,f,h,a,d){var b=_metExploreViz.getMappingByName(g);var j=metExploreD3.createLoadMask("Mapping in progress...","viz");if(j!=undefined){metExploreD3.showMask(j);setTimeout(function(){var m=_metExploreViz.getGeneralStyle();var r=d3.select("#viz").select("#D3viz");var C=_metExploreViz.getSessionById("viz");var p=_metExploreViz.getSessionById("viz").getD3Data().getNodes();var q=metExploreD3.getConditionsMapped();var B=undefined;var t=undefined;var y=b.getName();var v=metExploreD3.getLinkStyle();var A=C.getForce();A.linkDistance(function(F){if(F.getSource().getIsSideCompound()||F.getTarget().getIsSideCompound()){return v.getSize()}else{return v.getSize()*2}});r.selectAll("g.node").filter(function(F){if(this.getAttribute("mapped")==undefined||this.getAttribute("mapped")==false||this.getAttribute("mapped")=="false"){return false}else{return true}}).selectAll("rect.stroke").remove();q.forEach(function(F){p.forEach(function(I){var G=I.getMappingDataByNameAndCond(y,F);if(G!=null){var H=Math.abs(G.getMapValue())}else{var H=0}if(!isNaN(H)){if(B==undefined){t=parseFloat(H);B=parseFloat(H)}else{if(t>parseFloat(H)){t=parseFloat(H)}if(B<parseFloat(H)){B=parseFloat(H)}}}})});if(h==undefined){h=metExploreD3.GraphUtils.colorNameToHex(m.getColorMinMappingContinuous());if(h==false){h=m.getColorMinMappingContinuous()}}else{m.setMinColorMappingContinuous(h)}if(f==undefined){f=metExploreD3.GraphUtils.colorNameToHex(m.getColorMaxMappingContinuous());if(f==false){f=m.getColorMaxMappingContinuous()}}else{m.setMaxColorMappingContinuous(f)}var r=d3.select("#viz").select("#D3viz");var o=C.getColorMappingsSet();C.resetColorMapping();var u=f;if(q[1]==c){u=h}if(a){var E=0.5;var s=0.2}else{var E=1;var s=1}var z=d3.scale.linear().domain([-4,-1,0,1,4]).range([1,E,s,E,1]);var D=d3.scale.linear().domain([-B,0,B]).range([-7,0,7]);C.addColorMapping(B,f);C.addColorMapping(-B,h);r.selectAll("g.node").each(function(H){if(H.getMappingDatasLength()!=0){if(H.getBiologicalType()=="reaction"){var G=H.getMappingDataByNameAndCond(y,q[0]);var K=H.getMappingDataByNameAndCond(y,q[1]);var I=G;if(q[1]==c){I=K}if(I==null){var J=0}else{if(isNaN(I.getMapValue())){var J=0}else{var J=I.getMapValue()}}var F=metExploreD3.getReactionStyle();_MyThisGraphNode.addText(H,"viz",F);d3.select(this).transition().duration(2000).style("opacity",z(D(parseFloat(J))));C.addSelectedNode(H.getId())}}});metExploreD3.hideMask(j);d3.select("#viz").select("#D3viz").selectAll("path.link").style("fill",function(F){var J,G;if(F.getSource().getBiologicalType()=="reaction"){J=F.getSource();G=F.getTarget()}else{G=F.getSource();J=F.getTarget()}var H=J.getMappingDataByNameAndCond(y,q[0]);var L=J.getMappingDataByNameAndCond(y,q[1]);r.selectAll("g#node"+G.getId()+".node").each(function(N){var O=H;if(q[1]==c){O=L}if(O==null){var M=0}else{if(isNaN(O.getMapValue())){var M=0}else{var M=O.getMapValue()}}if(N.flux==undefined){N.flux=D(M)}else{if(Math.abs(N.flux)<Math.abs(D(M))){N.flux=D(M)}}});r.selectAll("g#node"+G.getId()+".node").style("opacity",function(M){if(M.getIsSideCompound()){return 0.2}return z(M.flux)});if(this.id!="linkRev"){if(H==null){var I=0}else{if(isNaN(H.getMapValue())){var I=0}else{var I=H.getMapValue()}}if(D(I)==0){var K=d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("path:link");d3.select(this).style("opacity",0.5).style("stroke","black").style("stroke-width",0.5).style("stroke-dasharray","2,3").each(function(M){var N=K[0][0];this.parentNode.insertBefore(this,N)})}else{d3.select(this).style("opacity",z(D(parseFloat(I))))}if(G.getIsSideCompound()){d3.select(this).style("opacity",0.1)}return f}else{if(L==null){var I=0}else{if(isNaN(L.getMapValue())){var I=0}else{var I=L.getMapValue()}}if(D(I)==0){var K=d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("path:link");d3.select(this).style("opacity",0.5).style("stroke","black").style("stroke-width",0.5).style("stroke-dasharray","2,3").each(function(M){var N=K[0][0];this.parentNode.insertBefore(this,N)})}else{d3.select(this).style("opacity",z(D(parseFloat(I))))}if(G.getIsSideCompound()){d3.select(this).style("opacity",0.1)}return h}});if(t!=undefined){metExploreD3.fireEventArg("selectConditionForm","afterContinuousMapping","flux")}else{metExploreD3.displayMessage("Warning","No mapped node on network.")}if(d!=undefined){d()}var w=metExploreD3.GraphNetwork.isAnimated("viz");if(w=="true"){var C=_metExploreViz.getSessionById("viz");if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){A.start()}}metExploreD3.GraphNetwork.tick("viz")},1)}},mapUniqueFlux:function(h,d,g,b,f){var c=_metExploreViz.getMappingByName(h);var a=metExploreD3.createLoadMask("Mapping in progress...","viz");if(a!=undefined){metExploreD3.showMask(a);setTimeout(function(){var q=_metExploreViz.getGeneralStyle();var D=d3.select("#viz").select("#D3viz");var m=_metExploreViz.getSessionById("viz");var E=_metExploreViz.getSessionById("viz").getD3Data().getNodes();var w=c.getConditions();var u=undefined;var C=undefined;var y=c.getName();var v=metExploreD3.getLinkStyle();var o=m.getForce();o.linkDistance(function(F){if(F.getSource().getIsSideCompound()||F.getTarget().getIsSideCompound()){return v.getSize()}else{return v.getSize()*2}});D.selectAll("g.node").filter(function(F){if(this.getAttribute("mapped")==undefined||this.getAttribute("mapped")==false||this.getAttribute("mapped")=="false"){return false}else{return true}}).selectAll("rect.stroke").remove();w.forEach(function(F){E.forEach(function(H){var I=H.getMappingDataByNameAndCond(y,F);if(I!=null){var G=I.getMapValue();if(!isNaN(G)){if(u==undefined){C=parseFloat(G);u=parseFloat(G)}else{if(C>parseFloat(G)){C=parseFloat(G)}if(u<parseFloat(G)){u=parseFloat(G)}}}}})});if(g==undefined){g=q.getColorMaxMappingContinuous()}else{q.setMaxColorMappingContinuous(g)}var D=d3.select("#viz").select("#D3viz");var t=m.getColorMappingsSet();m.resetColorMapping();var A=d3.scale.linear().domain([-4,-1,1,4]).range([g,g,g,g]);if(b){var p=0.5;var j=0.2}else{var p=1;var j=1}var r=d3.scale.linear().domain([-4,-1,0,1,4]).range([1,p,j,p,1]);var B=d3.scale.linear().domain([-4,-1,1,4]).range([g,g,g,g]);var z=d3.scale.linear().domain([C,0,u]).range([-7,0,7]);m.addColorMapping(u,A(parseFloat(u)));D.selectAll("g.node").each(function(H){if(H.getMappingDatasLength()!=0){if(H.getBiologicalType()=="reaction"){var I=metExploreD3.getConditionsMapped()[0];var G=H.getMappingDataByNameAndCond(y,I);if(G!=null){if(!isNaN(G.getMapValue())){var F=metExploreD3.getReactionStyle();_MyThisGraphNode.addText(H,"viz",F);d3.select(this).transition().duration(2000).style("opacity",r(z(parseFloat(G.getMapValue()))));m.addSelectedNode(H.getId())}}}}});metExploreD3.hideMask(a);d3.select("#viz").select("#D3viz").selectAll("path.link").style("fill",function(L){var G,I;if(L.getSource().getBiologicalType()=="reaction"){G=L.getSource();I=L.getTarget()}else{I=L.getSource();G=L.getTarget()}var J=metExploreD3.getConditionsMapped()[0];var H=G.getMappingDataByNameAndCond(y,J);D.selectAll("g#node"+I.getId()+".node").each(function(N){if(H==null){var M=0}if(N.flux==undefined){N.flux=z(M)}else{if(Math.abs(N.flux)<Math.abs(z(M))){N.flux=z(M)}}});D.selectAll("g#node"+I.getId()+".node").style("opacity",function(M){if(M.getIsSideCompound()){return 0.2}return r(M.flux)});if(H==null){var F=0}else{if(isNaN(H.getMapValue())){var F=0}else{var F=H.getMapValue()}}if(z(F)==0){var K=d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("path:link");d3.select(this).style("opacity",0.5).style("stroke","black").style("stroke-width",0.5).style("stroke-dasharray","2,3").each(function(M){var N=K[0][0];this.parentNode.insertBefore(this,N)})}else{d3.select(this).style("opacity",r(z(parseFloat(F))))}if(I.getIsSideCompound()){d3.select(this).style("opacity",0.1)}return A(z(F))}).filter(function(F){return this.id=="linkRev"}).remove();d3.select("#viz").select("#D3viz").selectAll(".linklabel").filter(function(F){return this.id=="linkRev"}).remove();if(C!=undefined){metExploreD3.fireEventArg("selectConditionForm","afterContinuousMapping","flux")}else{metExploreD3.displayMessage("Warning","No mapped node on network.")}if(f!=undefined){f()}var s=metExploreD3.GraphNetwork.isAnimated("viz");if(s=="true"){var m=_metExploreViz.getSessionById("viz");if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){o.start()}}metExploreD3.GraphNetwork.tick("viz")},1)}},parseFluxValues:function(a){var c=_metExploreViz.getMappingByName(a);var b=metExploreD3.createLoadMask("Mapping in progress...","viz");if(b!=undefined){metExploreD3.showMask(b);setTimeout(function(){var g=_metExploreViz.getSessionById("viz");var m=_metExploreViz.getSessionById("viz").getD3Data().getNodes();var f=c.getConditions();var d=undefined;var o=undefined;var p=c.getName();var j=[];f.forEach(function(q){m.forEach(function(r){var s=r.getMappingDataByNameAndCond(p,q);if(s!=null){var t=s.getMapValue()}else{var t=0}if(!isNaN(t)){if(parseFloat(t)!=0&(999999-Math.abs(parseFloat(t)))*100/999999<0.001){j.push(r)}else{if(d==undefined){o=parseFloat(t);d=parseFloat(t)}else{if(o>parseFloat(t)){o=parseFloat(t)}if(d<parseFloat(t)){d=parseFloat(t)}}}}})});if(j.length>0){d=d+d/2;var h=_metExploreViz.getSessionById("viz").getColorMappingsSet();j.forEach(function(q){f.forEach(function(r){if((999999-Math.abs(parseFloat(q.getMappingDataByNameAndCond(p,r).getMapValue())))*100/999999<0.001){h.forEach(function(s){if(s.getName()==parseFloat(q.getMappingDataByNameAndCond(p,r).getMapValue())){s.setName(o)}if(s.getName()==parseFloat(q.getMappingDataByNameAndCond(p,r).getMapValue())){s.setName(d)}});q.setMappingDataByNameAndCond(p,r,d)}})})}metExploreD3.hideMask(b)},1)}},graphMappingFlux:function(f,a,c,b,h,d,g){metExploreD3.onloadMapping(f,function(){var j=_metExploreViz.getSessionById("viz");metExploreD3.GraphMapping.parseFluxValues(f);metExploreD3.GraphLink.loadLinksForFlux("viz",j.getD3Data(),metExploreD3.getLinkStyle(),metExploreD3.getMetaboliteStyle(),g,a);if(c=="Compare"){metExploreD3.GraphMapping.mapFluxes(f,a,b,h,d)}else{metExploreD3.GraphMapping.mapUniqueFlux(f,a,b,d)}})},reloadMapping:function(d){var b=_metExploreViz.getSessionById("viz");var a=b.getForce();a.stop();var c=metExploreD3.createLoadMask("Mapping in progress...","viz");if(c!=undefined){metExploreD3.showMask(c);setTimeout(function(){var f=b.getD3Data();var g=d.getConditions();var j=undefined;switch(d.getTargetLabel()){case"reactionDBIdentifier":d.getData().forEach(function(o){if(typeof o.getNode()=="object"){var p=f.getNodeByDbIdentifier(o.getNode().getDbIdentifier())}else{var p=f.getNodeByDbIdentifier(o.getNode())}console.log(p);if(p!=undefined){var q=new MappingData(p,d.getName(),o.getConditionName(),o.getMapValue());p.addMappingData(q)}});break;case"reactionId":d.getData().forEach(function(o){if(typeof o.getNode()=="object"){var p=f.getNodeById(o.getNode().getId())}else{var p=f.getNodeById(o.getNode())}if(p!=undefined){var q=new MappingData(p,d.getName(),o.getConditionName(),o.getMapValue());p.addMappingData(q)}});break;case"metaboliteId":d.getData().forEach(function(o){if(typeof o.getNode()=="object"){var p=f.getNodeById(o.getNode().getId())}else{var p=f.getNodeById(o.getNode())}if(p!=undefined){var q=new MappingData(p,d.getName(),o.getConditionName(),o.getMapValue());p.addMappingData(q)}});break;case"metaboliteDBIdentifier":d.getData().forEach(function(o){if(typeof o.getNode()=="object"){var p=f.getNodeByDbIdentifier(o.getNode().getDbIdentifier())}else{var p=f.getNodeByDbIdentifier(o.getNode())}if(p!=undefined){var q=new MappingData(p,d.getName(),o.getConditionName(),o.getMapValue());p.addMappingData(q)}});break;case"inchi":break;default:metExploreD3.displayMessage("Warning",'The type of node "'+d.getTargetLabel()+"\" isn't know.")}metExploreD3.hideMask(c);var m=metExploreD3.GraphNetwork.isAnimated("viz");if(m=="true"){var h=b.getForce();if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){h.resume()}}},1)}},graphMappingDiscreteData:function(a,b,c){metExploreD3.onloadMapping(a,function(){var f=_metExploreViz.getMappingByName(a);var d=metExploreD3.createLoadMask("Mapping in progress...","viz");if(d!=undefined){metExploreD3.showMask(d);setTimeout(function(){var q=_metExploreViz.getSessionById("viz");var y=q.getForce();y.stop();var r=f.getConditions();var w=q.getD3Data().getNodes();var B=[];var z=d3.select("#viz").select("#D3viz");z.selectAll("g.node").filter(function(C){if(this.getAttribute("mapped")==undefined||this.getAttribute("mapped")==false||this.getAttribute("mapped")=="false"){return false}else{return true}}).selectAll("rect.stroke").remove();r.forEach(function(C){w.forEach(function(D){var E=D.getMappingDataByNameAndCond(f.getName(),C);if(E!=null){var G=false;var F=E.getMapValue().valueOf();B.forEach(function(H){if(H.valueOf()==F.valueOf()){G=true}});if(!G){B.push(F)}}})});function u(D,C){if(parseFloat(D)<parseFloat(C)){return -1}if(parseFloat(D)>parseFloat(C)){return 1}return 0}function o(D,C){if(D<C){return -1}if(D>C){return 1}return 0}var p=[];var A=[];B.forEach(function(C){if(isNaN(C)){A.push(C)}else{p.push(C)}});p.sort(u);A.sort(o);B=p.concat(A);if(B.length==undefined){B.length=0}center=128;width=127;frequency=Math.PI*2*0.95/B.length;var m=top;var v=q.getColorMappingsSet();q.resetColorMapping();for(var j=0;j<B.length;j++){var g=Math.sin(frequency*j+2+B.length)*width+center;var t=Math.sin(frequency*j+0+B.length)*width+center;var s=Math.sin(frequency*j+4+B.length)*width+center;color=metExploreD3.GraphUtils.RGB2Color(g,t,s);q.addColorMapping(B[j],color);metExploreD3.GraphMapping.fixMappingColorOnNodeData(color,B[j],b,f.getName())}metExploreD3.hideMask(d);if(c!=undefined){c()}if(B.length!=0){metExploreD3.fireEventArg("selectConditionForm","afterDiscreteMapping","discrete")}else{metExploreD3.displayMessage("Warning","No mapped node on network.")}var h=metExploreD3.GraphNetwork.isAnimated("viz");if(h=="true"){var q=_metExploreViz.getSessionById("viz");var y=q.getForce();if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){y.resume()}}},1)}})},fixMappingColorOnNodeData:function(a,f,c,h){var d=d3.select("#viz").select("#D3viz");var g=_metExploreViz.getSessionById("viz");var b=a;d.selectAll("g.node").filter(function(p){if(p.getBiologicalType()=="reaction"){if(p.getMappingDatasLength()==0){return false}else{var o=p.getMappingDataByNameAndCond(h,c);if(o!=null){if(o.getMapValue()==f){var j=metExploreD3.getReactionStyle();_MyThisGraphNode.addText(p,"viz",j);g.addSelectedNode(p.getId());return true}else{return false}}else{return false}}}else{if(p.getBiologicalType()=="metabolite"){if(p.getMappingDatasLength()==0){return false}else{var o=p.getMappingDataByNameAndCond(h,c);if(o!=null){if(o.getMapValue()==f){var m=metExploreD3.getMetaboliteStyle();_MyThisGraphNode.addText(p,"viz",m);g.addSelectedNode(p.getId());return true}else{return false}}else{return false}}}}}).transition().duration(3000).attr("mapped",a).style("fill",a).each(function(m){if(m.getBiologicalType()=="reaction"){var j=metExploreD3.GraphUtils.chooseTextColor(b);d3.select(this).select("text").style("fill",j)}})},graphMappingContinuousData:function(a,c,b,f,d){metExploreD3.onloadMapping(a,function(){var h=_metExploreViz.getMappingByName(a);var g=metExploreD3.createLoadMask("Mapping in progress...","viz");if(g!=undefined){metExploreD3.showMask(g);setTimeout(function(){var w=_metExploreViz.getGeneralStyle();var m=d3.select("#viz").select("#D3viz");var v=_metExploreViz.getSessionById("viz");var A=_metExploreViz.getSessionById("viz").getD3Data().getNodes();var y=h.getConditions();var r=undefined;var B=undefined;var o=h.getName();var u='{"mapping":[';var t=metExploreD3.getMetaboliteStyle();var s=metExploreD3.getReactionStyle();m.selectAll("g.node").filter(function(C){if(this.getAttribute("mapped")==undefined||this.getAttribute("mapped")==false||this.getAttribute("mapped")=="false"){return false}else{return true}}).selectAll("rect.stroke").remove();y.forEach(function(C){u+='\n{"'+C+'":[';A.forEach(function(E){var F=E.getMappingDataByNameAndCond(o,C);if(F!=null){u+="\n{";var D=F.getMapValue();u+='"node" : "'+E.getName();u+='", "value" : "'+D;if(!isNaN(D)){if(r==undefined){B=parseFloat(D);r=parseFloat(D)}else{if(B>parseFloat(D)){B=parseFloat(D)}if(r<parseFloat(D)){r=parseFloat(D)}}}u+='"},\n'}});u+="]}\n"});u+="]}\n";if(b==undefined){b=w.getColorMinMappingContinuous()}else{w.setMinColorMappingContinuous(b)}if(f==undefined){f=w.getColorMaxMappingContinuous()}else{w.setMaxColorMappingContinuous(f)}var m=d3.select("#viz").select("#D3viz");var z=v.getColorMappingsSet();v.resetColorMapping();var p=d3.scale.linear().domain([parseFloat(B),parseFloat(r)]).range([b,f]);if(B==r){v.addColorMapping(r,p(parseFloat(r)))}else{v.addColorMapping(r,p(parseFloat(r)));v.addColorMapping(B,p(parseFloat(B)))}m.selectAll("g.node").each(function(F){if(F.getMappingDatasLength()!=0){if(F.getBiologicalType()=="reaction"){var E=F.getMappingDataByNameAndCond(o,c);if(E!=null){if(!isNaN(E.getMapValue())){_MyThisGraphNode.addText(F,"viz",s);d3.select(this).transition().duration(2000).attr("mapped",p(parseFloat(parseFloat(E.getMapValue())))).style("fill",p(parseFloat(E.getMapValue())));var C=metExploreD3.GraphUtils.chooseTextColor(p(parseFloat(E.getMapValue())));d3.select(this).select("text").style("fill",C);v.addSelectedNode(F.getId())}}}else{var E=F.getMappingDataByNameAndCond(o,c);if(E!=null){if(!isNaN(E.getMapValue())){var D=metExploreD3.getMetaboliteStyle();_MyThisGraphNode.addText(F,"viz",D);d3.select(this).transition().duration(2000).attr("mapped",p(parseFloat(parseFloat(E.getMapValue())))).style("fill",p(parseFloat(E.getMapValue())));v.addSelectedNode(F.getId())}}}}});metExploreD3.hideMask(g);if(B!=undefined){metExploreD3.fireEventArg("selectConditionForm","afterContinuousMapping","continuous")}else{metExploreD3.displayMessage("Warning","No mapped node on network.")}if(d!=undefined){d()}var q=metExploreD3.GraphNetwork.isAnimated("viz");if(q=="true"){var v=_metExploreViz.getSessionById("viz");var j=v.getForce();if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){j.resume()}}},1)}})},graphMappingBinary:function(d){var f=metExploreD3.getSessionsSet();var b=metExploreD3.getSessionById(f,"viz");var a=b.getForce();a.stop();var c=metExploreD3.createLoadMask("Mapping in progress...","viz");if(c!=undefined){metExploreD3.showMask(c);setTimeout(function(){metExploreD3.GraphMapping.fixMappingColorOnNode("#056da1",1,d);metExploreD3.hideMask(c);var g=metExploreD3.GraphNetwork.isAnimated("viz");if(g=="true"){var j=metExploreD3.getSessionsSet();var h=metExploreD3.getSessionById(j,"viz");var m=h.getForce();if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){m.resume()}}},1)}},fixMappingColorOnNode:function(c,g,d){var f=d3.select("#viz").select("#D3viz");var a=metExploreD3.getMetabolitesSet();var b=metExploreD3.getReactionsSet();f.selectAll("g.node").filter(function(j){if(j.getBiologicalType()=="reaction"){if(metExploreD3.getReactionById(b,j.getId()).get("mapped")==undefined){return false}else{if((metExploreD3.getReactionById(b,j.getId()).get("mapped")!=0)&&metExploreD3.getReactionById(b,j.getId()).get(d)==g){var m=metExploreD3.getSessionsSet();var o=metExploreD3.getReactionStyle();_MyThisGraphNode.addText(j,"viz",o,m);return true}else{return false}}}else{if(j.getBiologicalType()=="metabolite"&&!j.isSideCompound()){if(metExploreD3.getMetaboliteById(a,j.getId())==null){return false}if(metExploreD3.getMetaboliteById(a,j.getId()).get("mapped")==undefined){return false}else{if((metExploreD3.getMetaboliteById(a,j.getId()).get("mapped")!=0)&&metExploreD3.getMetaboliteById(a,j.getId()).get(d)==g){var m=metExploreD3.getSessionsSet();var h=metExploreD3.getMetaboliteStyle();_MyThisGraphNode.addText(j,"viz",h,m);return true}else{return false}}}}}).transition().duration(4000).attr("mapped",c).style("fill",c)},setDiscreteMappingColor:function(b,f,c,h){var g=_metExploreViz.getSessionById("viz");var d=g.getForce();d.stop();var a=metExploreD3.createLoadMask("Mapping in progress...","viz");if(a!=undefined){metExploreD3.showMask(a);setTimeout(function(){var m=d3.select("#viz").select("#D3viz");var o=g.getColorMappingsSet();var j=g.getColorMappingById(f);j.setValue(b);metExploreD3.GraphMapping.fixMappingColorOnNodeData(b,f,c,h);metExploreD3.hideMask(a)},1)}},setContinuousMappingColor:function(m,b,c,j){var a=_metExploreViz.getSessionById("viz");var f=a.getForce();f.stop();var h=metExploreD3.createLoadMask("Mapping in progress...","viz");if(h!=undefined){metExploreD3.showMask(h);var g=d3.select("#viz").select("#D3viz");var d=a.getColorMappingsSet();var o=a.getColorMappingById(b);o.setValue(m);metExploreD3.hideMask(h)}},removeGraphMapping:function(d){var b=_metExploreViz.getSessionById("viz");var f=d3.select("#viz").select("#D3viz");var a=metExploreD3.getMetabolitesSet();var c=metExploreD3.getReactionsSet();f.selectAll("g.node").filter(function(g){if(g.getBiologicalType()=="reaction"){if(metExploreD3.getReactionById(c,g.getId()).get("mapped")==undefined){return false}else{return metExploreD3.getReactionById(c,g.getId()).get("mapped")!=0}}else{if(g.getBiologicalType()=="metabolite"){if(metExploreD3.getMetaboliteById(a,g.getId()).get("mapped")==undefined){return false}else{return metExploreD3.getMetaboliteById(a,g.getId()).get("mapped")!=0}}}}).transition().duration(1000).attr("transform",function(g){return"translate("+g.x+", "+g.y+") scale(1)"}).style("fill","white");f.selectAll("g.node").filter(function(g){if(this.getAttribute("mapped")==undefined||this.getAttribute("mapped")==false||this.getAttribute("mapped")=="false"){return false}else{return true}}).attr("mapped","false").selectAll("rect.stroke").remove()},removeGraphMappingData:function(c){var b=_metExploreViz.getSessionById("viz");var f=d3.select("#viz").select("#D3viz");f.selectAll("g.node").transition().duration(1000).attr("transform",function(g){return"translate("+g.x+", "+g.y+") scale(1)"}).style("fill","white").style("opacity",1).each(function(g){if(g.getBiologicalType()=="reaction"){if(g.isSelected()){d3.select(this).select("text").transition().duration(4000).style("fill","white")}else{d3.select(this).select("text").transition().duration(4000).style("fill","black")}}});f.selectAll("g.node").filter(function(g){if(this.getAttribute("mapped")==undefined||this.getAttribute("mapped")==false||this.getAttribute("mapped")=="false"){return false}else{return true}}).attr("mapped","false").selectAll("rect.stroke").remove();var a=metExploreD3.getMetaboliteStyle();var d=metExploreD3.getLinkStyle();metExploreD3.GraphLink.refreshLink("viz",b,d,a)},launchAfterMappingFunction:function(b,a){var c=_metExploreViz.getMappingById(b);if(c!==null){a(c);return}var d=this;setTimeout(function(){d.launchAfterMappingFunction(b,a)},100)},onloadMapping:function(a,b){this.launchAfterMappingFunction(a,b)},removeMappingData:function(a){this.onloadMapping(a.get("id"),function(b){metExploreD3.fireEventArg("selectConditionForm","removeMapping",b)})},loadDataFromJSON:function(d){var f=metExploreD3.GraphUtils.decodeJSON(d);if(f){var b=_metExploreViz.getSessionById("viz");var a=b.getForce();a.stop();var c=metExploreD3.createLoadMask("Mapping in progress...","viz");if(c!=undefined){metExploreD3.showMask(c);setTimeout(function(){var m=[];f.mappings.forEach(function(o){m.push(o.name)});var j=new Mapping(f.name,m,f.targetLabel,f.id);_metExploreViz.addMapping(j);metExploreD3.GraphMapping.generateMapping(j,f.mappings);metExploreD3.hideMask(c);metExploreD3.fireEventArg("selectMappingVisu","jsonmapping",j);var h=metExploreD3.GraphNetwork.isAnimated("viz");if(h=="true"){var g=b.getForce();if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){g.resume()}}},1)}}},loadDataTSV:function(d,f){var b=_metExploreViz.getSessionById("viz");var a=b.getForce();a.stop();var c=metExploreD3.createLoadMask("Mapping in progress...","viz");if(c!=undefined){metExploreD3.showMask(c);d3.tsv(d,function(g){var h=d.split("/");var m=d.split("/")[h.length-1];var j=Object.keys(g[0])[0];var o=Object.keys(g[0]).indexOf(j);var p=Object.keys(g[0]);if(o>-1){p.splice(o,1)}var q=[];var r=new Mapping(m,p,j,q);_metExploreViz.addMapping(r);metExploreD3.GraphMapping.mapNodeDataFile(r,g);metExploreD3.fireEventArg("selectMappingVisu","jsonmapping",r);metExploreD3.hideMask(c);if(f!=undefined){f()}var t=metExploreD3.GraphNetwork.isAnimated("viz");if(t=="true"){var s=b.getForce();if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){s.resume()}}})}},generateMapping:function(c,d){var b=_metExploreViz.getSessionById("viz");var a=b.getD3Data();switch(c.getTargetLabel()){case"reactionDBIdentifier":if(!(d.length==1&&d[0].name=="undefined")){d.forEach(function(f){f.data.forEach(function(m){var g=new MappingData(m.node,c.getName(),f.name,m.value);c.addMap(g);var j=a.getNodeByDbIdentifier(m.node);if(j!=undefined){var h=new MappingData(j,c.getName(),f.name,m.value);j.addMappingData(h)}})})}else{d[0].data.forEach(function(f){var g=new MappingData(f.node,c.getName(),d[0].name,f.value);c.addMap(g);var h=a.getNodeByDbIdentifier(f.node);if(h!=undefined){var j=new MappingData(h,c.getName(),d[0].name,f.value);h.addMappingData(j)}})}break;case"metaboliteDBIdentifier":d.forEach(function(f){f.data.forEach(function(m){var g=new MappingData(m.node,c.getName(),f.name,m.value);c.addMap(g);var j=a.getNodeByDbIdentifier(m.node);if(j!=undefined){var h=new MappingData(j,c.getName(),f.name,m.value);j.addMappingData(h)}})});break;case"reactionId":if(!(d.length==1&&d[0].name=="undefined")){d.forEach(function(f){f.data.forEach(function(m){var g=new MappingData(m.node,c.getName(),f.name,m.value);c.addMap(g);var j=a.getNodeById(m.node);if(j!=undefined){var h=new MappingData(j,c.getName(),f.name,m.value);j.addMappingData(h)}})})}else{d[0].data.forEach(function(f){var g=new MappingData(f.node,c.getName(),d[0].name,f.value);c.addMap(g);var h=a.getNodeById(f.node);if(h!=undefined){var j=new MappingData(h,c.getName(),d[0].name,f.value);h.addMappingData(j)}})}break;case"metaboliteId":d.forEach(function(f){f.data.forEach(function(m){var g=new MappingData(m.node,c.getName(),f.name,m.value);c.addMap(g);var j=a.getNodeById(m.node);if(j!=undefined){var h=new MappingData(j,c.getName(),f.name,m.value);if(m.inchi!=undefined){j.mappedInchi=m.inchi}j.addMappingData(h)}})});break;case"inchi":break;default:metExploreD3.displayMessage("Warning",'The type of node "'+c.getTargetLabel()+"\" isn't know.")}}};metExploreD3.GraphPanel={getHeight:function(a){return d3.select("#"+a).select("#D3viz").style("height")},getWidth:function(a){return d3.select("#"+a).select("#D3viz").style("width")},resizeViz:function(c){var a=metExploreD3.getScaleById(c);if(a!=undefined){d3.select("#metexplore").text("");d3.select("#"+c).select("#D3viz").attr("width",$("#"+c).width());d3.select("#"+c).select("#D3viz").attr("height",$("#"+c).height());d3.select("#"+c).select("#D3viz").select("#foreignObject").attr("transform","translate("+($("#"+c).width()-300)+",100) scale(1)");var b=a.getZoomScale();var g=d3.scale.linear().domain([0,$("#"+c).width()]).range([0,$("#"+c).width()]);var f=d3.scale.linear().domain([$("#"+c).height(),0]).range([$("#"+c).height(),0]);var d=a.getZoom().translate();a.getZoom().x(g).y(f).translate(d).scale(b);d3.select("#"+c).select("#D3viz").select("#brush").call(d3.svg.brush().x(g).y(f).on("brushstart",function(m){document.addEventListener("mousedown",function(q){if(q.button===1){q.stopPropagation();q.preventDefault();q.stopImmediatePropagation()}});var h=d3.select("#"+c).select("#buttonHand").attr("scrollable");_MyThisGraphNode.activePanel=this.parentNode.parentNode.id;var j=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(d3.event.sourceEvent.button!=1&&h!="true"){if(j!=undefined){if(j.isLinked()){var o=_metExploreViz.getSessionById("viz");if(o!=undefined){var p=o.getForce();if(p!=undefined){p.stop()}}}else{var p=j.getForce();if(p!=undefined){p.stop()}}}brushing=true;d3.select("#"+c).select("#brush").classed("hide",false);d3.select("#"+c).select("#D3viz").on("mousedown.zoom",null);nodeBrushed=d3.select("#"+c).select("#graphComponent").selectAll("g.node");nodeBrushed.each(function(q){q.previouslySelected=q.isSelected()})}else{var p=j.getForce();if(p!=undefined){p.stop()}d3.select("#"+c).selectAll("#D3viz").style("cursor","all-scroll");d3.selectAll("#brush").classed("hide",true)}}).on("brushend",function(){if(d3.event.sourceEvent.button!=1&&brushing){var s=d3.event.target.extent();if(s[1][0]-s[0][0]>20||s[1][1]-s[0][1]>20){var p;var s=d3.event.target.extent();var j=metExploreD3.getScaleById(c);var o=j.getZoomScale();var h=metExploreD3.createLoadMask("Selection in progress...",c);if(h!=undefined){metExploreD3.showMask(h);metExploreD3.deferFunction(function(){nodeBrushed.classed("selected",function(z){var B=j.getZoom().x();var A=j.getZoom().y();p=(B(s[0][0])<=B(z.x)&&B(z.x)<B(s[1][0]))&&(A(s[0][1])<=A(z.y)&&A(z.y)<A(s[1][1]));if((z.isSelected()==false&&p==true)||(z.isSelected()==true&&p==false&&!z.previouslySelected)){_MyThisGraphNode.selection(z,c)}return p});metExploreD3.hideMask(h);var w=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(w!=undefined){if(w.isLinked()){var y=_metExploreViz.getSessionById("viz");if(y!=undefined){var u=metExploreD3.GraphNetwork.isAnimated(y.getId());if(u=="true"){var v=y.getForce();if(v!=undefined){if((metExploreD3.GraphNetwork.isAnimated(y.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(y.getId())==null)){v.start()}}}}}else{var v=w.getForce();var u=metExploreD3.GraphNetwork.isAnimated(w.getId());if(u=="true"){var v=w.getForce();if(v!=undefined){if((metExploreD3.GraphNetwork.isAnimated(w.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(w.getId())==null)){v.start()}}}}}brushing=false},100)}}}else{var q=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(q!=undefined){if(q.isLinked()){var m=_metExploreViz.getSessionById("viz");if(m!=undefined){var r=metExploreD3.GraphNetwork.isAnimated(m.getId());if(r=="true"){var t=m.getForce();if(t!=undefined){if((metExploreD3.GraphNetwork.isAnimated(m.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(m.getId())==null)){t.start()}}}}}else{var t=q.getForce();var r=metExploreD3.GraphNetwork.isAnimated(q.getId());if(r=="true"){var t=q.getForce();if(t!=undefined){if(d3.select(metExploreD3.GraphNetwork.isAnimated(q.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(q.getId())==null)){t.start()}}}}}}d3.event.target.clear();d3.select(this).call(d3.event.target);var j=metExploreD3.getScaleById(c);d3.select("#"+c).selectAll("#D3viz").style("cursor","default");d3.select("#"+c).selectAll("#D3viz").call(j.getZoom()).on("dblclick.zoom",null).on("mousedown",null);d3.event.target.extent();d3.selectAll("#brush").classed("hide",false)}));d3.select("#viz").select("#D3viz").select("#logoViz").select("image").attr("x",$("#viz").width()-88).attr("y",$("#viz").height()-70);d3.select("#metexplore").text("MetExploreViz").attr("x",$("#viz").width()-112).attr("y",$("#viz").height()-10)}},resizePanels:function(a){var m=_metExploreViz.getSessionsSet();var o=_metExploreViz.getSessionById(a);var g=$("#"+a).height();var q=$("#"+a).width();d3.select("#"+a).select("#D3viz").select("foreignObject").attr("x",q-300);if(d3.select("#"+a).select("#D3viz").select("#buttonZoomIn")[0][0]!=null&&d3.select("#"+a).select("#D3viz").select("#buttonZoomOut")[0][0]!=null&&d3.select("#"+a).select("#D3viz").select("#buttonHand")[0][0]!=null){var p=d3.select("#"+a).select("#D3viz").select("#buttonZoomIn").attr("x");var d=q-60-p;d3.select("#"+a).select("#D3viz").select("#buttonZoomIn").attr("transform","translate("+d+",0) scale(1)");p=d3.select("#"+a).select("#D3viz").select("#buttonZoomOut").attr("x");d=q-110-p;d3.select("#"+a).select("#D3viz").select("#buttonZoomOut").attr("transform","translate("+d+",0) scale(1)");p=d3.select("#"+a).select("#D3viz").select("#buttonHand").attr("x");d=q-160-p;d3.select("#"+a).select("#D3viz").select("#buttonHand").attr("transform","translate("+d+",0) scale(1)");p=d3.select("#"+a).select("#D3viz").select("#whiteBlack").attr("x");d=q-100-p;d3.select("#"+a).select("#D3viz").select("#whiteBlack").attr("transform","translate("+d+",0) scale(1)");p=d3.select("#"+a).select("#D3viz").select("#invertColor").attr("x");d=q-100-p;d3.select("#"+a).select("#D3viz").select("#invertColor").attr("transform","translate("+d+",0) scale(1)")}if(o!=undefined){if(o.isLinked()){var j=_metExploreViz.getSessionById("viz");var b=j.getForce();if(b!=undefined){var g=$("#viz").height();var q=$("#viz").width();b.size([q,g]);var c=d3.select("#viz").select("#buttonAnim").attr("animation");if(c=="true"){b.resume()}}}else{var b=o.getForce();if(b!=undefined){var g=$("#"+a).height();var q=$("#"+a).width();b.size([q,g]);var c=d3.select("#"+a).select("#buttonAnim").attr("animation");if(c=="true"){b.resume()}}}}var f=_metExploreViz.getSessionsSet();var o=_metExploreViz.getSessionById(a);if(o!=undefined){var c=metExploreD3.GraphNetwork.isAnimated(a);if(c=="true"){if(o.isLinked()){for(var r in f){if(f[r].isLinked()){metExploreD3.GraphNetwork.animationButtonOn(f[r].getId())}}var b=_metExploreViz.getSessionById("viz").getForce();b.resume()}else{metExploreD3.GraphNetwork.animationButtonOn(a);var b=o.getForce();b.resume()}}}},removeSvgComponents:function(a){d3.select("#"+a).select("#D3viz").selectAll("*").remove()},refreshJSON:function(f){var d=metExploreD3.GraphUtils.decodeJSON(f);if(d){if(!_metExploreViz.isLaunched()){metExploreD3.GraphPanel.initiateViz("D3")}var a=Ext.getCmp("viz");if(a!=undefined){var c=metExploreD3.createLoadMask("Refresh in process...","viz");if(c!=undefined){metExploreD3.showMask(c);var b=this;setTimeout(function(){metExploreD3.fireEvent("selectConditionForm","resetMapping");if(d.sessions!=undefined){metExploreD3.GraphPanel.loadDataJSON(f,g)}else{metExploreD3.GraphPanel.initDataJSON(f,g)}function g(){metExploreD3.hideMask(c);metExploreD3.fireEvent("graphPanel","afterrefresh")}},100)}}}},refreshPanel:function(b,a){var c=this;metExploreD3.hideInitialMask();if(metExploreD3.GraphUtils.decodeJSON(b).nodes||metExploreD3.GraphUtils.decodeJSON(b).sessions){if(!_metExploreViz.isLaunched()||metExploreD3.getGeneralStyle().windowsAlertIsDisable()){metExploreD3.GraphPanel.refreshJSON(b);if(typeof a==="function"){a()}}else{Ext.Msg.show({title:"Are you sure?",msg:"This action will remove previous network. <br />Would you like to do this?",buttons:Ext.Msg.OKCANCEL,fn:function(d){if(d=="ok"){metExploreD3.GraphPanel.refreshJSON(b);if(a!=undefined&&typeof a==="function"){a()}}},icon:Ext.Msg.QUESTION})}}else{metExploreD3.displayWarning("Syntaxe error",'File have bad syntax. Use a saved file from MetExploreViz or see <a href="http://metexplore.toulouse.inra.fr/metexploreViz/doc/documentation.php#generalfunctioning">MetExploreViz documentation</a>.')}},loadDataJSON:function(a,c){var d=metExploreD3.GraphUtils.decodeJSON(a);if(d){if(metExploreD3.bioSourceControled()){_metExploreViz.setBiosource(d.biosource);metExploreD3.fireEventParentWebSite("loadNetworkBiosource",{biosource:d.biosource,func:b,endFunc:c,json:a})}else{b();c()}function b(){var s=_metExploreViz.getSessionById("viz");var o=s.getForce();if(o!=undefined){o.nodes([]);o.links([]);o.on("start",null);o.on("end",null);o.on("tick",null)}s.reset();if(d.comparedPanels){d.comparedPanels.forEach(function(v){_metExploreViz.addComparedPanel(new ComparedPanel(v.panel,v.visible,v.parent,v.title))})}if(d.mappings){d.mappings.forEach(function(v){var v=new Mapping(v.name,v.conditions,v.targetLabel);_metExploreViz.addMapping(v)})}if(d.generalStyle){var q=metExploreD3.getGeneralStyle();var p=new GeneralStyle(q.getWebsiteName(),d.generalStyle.colorMinMappingContinuous,d.generalStyle.colorMaxMappingContinuous,d.generalStyle.maxReactionThreshold,d.generalStyle.displayLabelsForOpt,d.generalStyle.displayLinksForOpt,d.generalStyle.displayConvexhulls,d.generalStyle.clustered,d.generalStyle.displayCaption,q.hasEventForNodeInfo(),q.loadButtonIsHidden(),q.windowsAlertIsDisable());metExploreD3.setGeneralStyle(p)}var f=d.sessions;for(var g in f){if(g!="viz"){var s=new NetworkVizSession();s.setVizEngine("D3");s.setId(g);s.setLinked(f[g].linked);_metExploreViz.addSession(s);var r=Ext.getCmp("comparePanel");var u=_metExploreViz.getComparedPanelById(g);var h=[{id:u.getParent(),title:u.getTitle(),html:'<div id="'+u.getParent()+'" height="100%" width="100%"></div>',flex:1,closable:true,collapsible:true,collapseDirection:"left"}];r.add(h);r.expand();metExploreD3.fireEventArg("comparePanel","initiateviz",g)}if(f[g].colorMappings){f[g].colorMappings.forEach(function(v){s.addColorMapping(v.name,v.value)})}var m=f[g].animated;if(!m){m=false}s.setAnimated(m);var t=new NetworkData(g);t.cloneObject(f[g].d3Data);var j=t.getNodes();j.forEach(function(v){if(v.getBiologicalType()=="metabolite"){if(t.getCompartmentByName(v.getCompartment())==null){t.addCompartment(v.getCompartment())}}else{v.getPathways().forEach(function(w){if(t.getPathwayByName(w)==null){t.addPathway(w)}})}if(v.getMappingDatasLength()>0){v.getMappingDatas().forEach(function(y){y.setNode(v);if(_metExploreViz.getMappingByName(y.getMappingName())!=null){var w=_metExploreViz.getMappingByName(y.getMappingName());w.addMap(y)}})}});t.setId(g);if(g=="viz"){_metExploreViz.setInitialData(_metExploreViz.cloneNetworkData(t))}s.setD3Data(t);if(f[g].selectedNodes){f[g].selectedNodes.forEach(function(v){s.addSelectedNode(v)})}if(_metExploreViz.getMappingsLength()>0&&g=="viz"&&!metExploreD3.getGeneralStyle().windowsAlertIsDisable()){metExploreD3.displayMessageYesNo("Mapping","Do you want keep mappings.",function(v){if(v=="yes"){_metExploreViz.getMappingsSet().forEach(function(w){metExploreD3.GraphMapping.reloadMapping(w);metExploreD3.fireEventArg("selectMappingVisu","jsonmapping",w)});metExploreD3.fireEventArg("buttonRefresh","reloadMapping",true)}else{metExploreD3.fireEventArg("buttonMap","reloadMapping",false);metExploreD3.fireEventArg("buttonRefresh","reloadMapping",false);metExploreD3.fireEventArg("selectConditionForm","closeMapping",_metExploreViz.getActiveMapping);_metExploreViz.resetMappings()}})}if(f[g].mapped){s.setMapped(f[g].mapped)}if(f[g].mappingDataType){s.setMappingDataType(f[g].mappingDataType)}if(f[g].activeMapping){s.setActiveMapping(f[g].activeMapping)}}if(d.linkStyle){var p=new LinkStyle(d.linkStyle.size,d.linkStyle.lineWidth,d.linkStyle.markerWidth,d.linkStyle.markerHeight,d.linkStyle.markerInColor,d.linkStyle.markerOutColor,d.linkStyle.markerStrokeColor,d.linkStyle.markerStrokeWidth,d.linkStyle.strokeColor);metExploreD3.setLinkStyle(p)}if(d.metaboliteStyle){var p=new MetaboliteStyle(d.metaboliteStyle.height,d.metaboliteStyle.width,d.metaboliteStyle.rx,d.metaboliteStyle.ry,d.metaboliteStyle.fontSize,d.metaboliteStyle.strokeWidth,d.metaboliteStyle.label,d.metaboliteStyle.strokeColor);metExploreD3.setMetaboliteStyle(p)}if(d.reactionStyle){var p=new ReactionStyle(d.reactionStyle.height,d.reactionStyle.width,d.reactionStyle.rx,d.reactionStyle.ry,d.reactionStyle.label,d.reactionStyle.fontSize,d.reactionStyle.strokeColor,d.reactionStyle.strokeWidth);metExploreD3.setReactionStyle(p)}for(var g in f){metExploreD3.GraphNetwork.refreshSvg(g)}c()}}},initDataJSON:function(b,f){var c=metExploreD3.GraphUtils.decodeJSON(b);if(c){var a=_metExploreViz.getSessionById("viz");var g=a.getD3Data();_metExploreViz.resetOldCoodinates();g.getNodes().forEach(function(p){_metExploreViz.addOldCoodinates({id:p.getId(),x:p.x,px:p.px,y:p.y,py:p.py})});var h=a.getForce();if(h!=undefined){h.nodes([]);h.links([]);h.on("start",null);h.on("end",null);h.on("tick",null)}a.reset();a.setAnimated(true);var g=new NetworkData("viz");g.cloneObject(c);var d=g.getNodes();d.forEach(function(p){if(p.getBiologicalType()=="metabolite"){if(g.getCompartmentByName(p.getCompartment())==null){g.addCompartment(p.getCompartment())}}else{p.getPathways().forEach(function(q){if(g.getPathwayByName(q)==null){g.addPathway(q)}})}});g.setId("viz");_metExploreViz.setInitialData(_metExploreViz.cloneNetworkData(g));a.setD3Data(g);metExploreD3.GraphNetwork.refreshSvg("viz");var m=_metExploreViz.getOldCoodinates();if(m.length>0){var o=false;var j=0;while(j<m.length-1&&!o){if(g.getNodeById(m[j].id)!=undefined){o=true}j++}if(o&&!metExploreD3.getGeneralStyle().windowsAlertIsDisable()){metExploreD3.displayMessageYesNo("Coodinates","Do you want keep node coordinates.",function(p){if(p=="yes"){var q=[];m.forEach(function(r){var s=g.getNodeById(r.id);if(s!=undefined){s.x=r.x;s.y=r.y;s.px=r.px;s.py=r.py;q.push(r.id)}});d3.select("#viz").select("#graphComponent").selectAll("g.node").filter(function(r){return q.indexOf(r.id)!=-1}).each(function(r){r.setLocked(!r.isLocked());r.fixed=r.isLocked()});d3.select("#viz").select("#graphComponent").selectAll("g.node").filter(function(r){return q.indexOf(r.id)!=-1}).each(function(r){_MyThisGraphNode.selection(r,"viz")})}})}}if(_metExploreViz.getMappingsLength()>0){_metExploreViz.getMappingsSet().forEach(function(p){metExploreD3.GraphMapping.reloadMapping(p);metExploreD3.fireEventArg("selectMappingVisu","jsonmapping",p)});metExploreD3.fireEventArg("buttonRefresh","reloadMapping",true)}}f()},initiateViz:function(a){d3.select("#viz").selectAll("#presentationViz, #presentationLogoViz").classed("hide",true);metExploreD3.fireEvent("viz","initiateviz");_metExploreViz.setLaunched(true);if(a=="D3"){metExploreD3.GraphNetwork.delayedInitialisation("viz")}},loadData:function(a){var b=_metExploreViz.getSessionById(a);return b}};metExploreD3.GraphPath={panelParent:"",delayedInitialisation:function(a){metExploreD3.GraphLink.panelParent=a},refreshLink:function(c,h,b,g){metExploreD3.GraphLink.panelParent="#"+c;var f=h.getD3Data();var a=20;var d=b.getMarkerWidth()/2;d3.select("#"+c).select("#D3viz").select("#graphComponent").append("svg:defs").selectAll("marker").data(["in","out"]).enter().append("svg:marker").attr("id",String).attr("viewBox","0 0 "+b.getMarkerWidth()+" "+b.getMarkerHeight()).attr("refY",d).attr("markerWidth",b.getMarkerWidth()).attr("markerHeight",b.getMarkerHeight()).attr("orient","auto").append("svg:path").attr("class",String).attr("d","M0,0L"+b.getMarkerWidth()+","+b.getMarkerHeight()/2+"L0,"+b.getMarkerWidth()+"Z").style("visibility","hidden");metExploreD3.GraphLink.link=d3.select("#"+c).select("#D3viz").select("#graphComponent").selectAll("line").data(f.getLinks()).enter().append("line").attr("class","link").attr("marker-end",function(j){if(j.interaction=="out"){d3.select("#"+c).select("#D3viz").select("#graphComponent").select("#"+j.interaction).attr("refX",(g.getWidth()+g.getHeight())/2/2+(b.getMarkerWidth())).style("fill",b.getMarkerOutColor()).style("stroke",b.getMarkerStrokeColor()).style("stroke-width",b.getMarkerStrokeWidth());return"url(#"+j.interaction+")"}else{return"none"}}).attr("marker-start",function(j){if(j.interaction=="out"){return"none"}else{d3.select("#"+c).select("#D3viz").select("#graphComponent").select("#"+j.interaction).attr("refX",-((g.getWidth()+g.getHeight())/2/2)).style("fill",b.getMarkerInColor()).style("stroke",b.getMarkerStrokeColor()).style("stroke-width",b.getMarkerStrokeWidth());return"url(#"+j.interaction+")"}}).style("stroke",b.getStrokeColor())},tick:function(a,b){d3.select("#"+a).select("#D3viz").selectAll("path").filter(function(c){return c!="linkCaptionRev"}).attr("d",metExploreD3.GraphPath.groupPath).attr("transform",d3.select("#"+a).select("#D3viz").select("#graphComponent").attr("transform"))},loadPath:function(a){d3.select("#"+a).select("#D3viz").select("#graphComponent").selectAll("g.node");var c=metExploreD3.GraphPath.node.filter(function(d){return d.getBiologicalType()=="metabolite"});session.groups=d3.nest().key(function(d){return d.getCompartment()}).entries(c.data());metExploreD3.GraphPath.groupPath=function(g){var f=metExploreD3.getScaleById("viz");if(g.values.length>0){if(g.values.length>2){return"M"+d3.geom.hull(g.values.map(function(o){return[o.x,o.y]})).join("L")+"Z"}else{var d=[];g.values.forEach(function(o){d.push([o.x,o.y])});var j,h;for(var m=g.values.length;m<3;m++){j=g.values[0].x*(1+0.00001*m);h=g.values[0].y*(1+0.000011*m);d.push([j,h])}return"M"+d3.geom.hull(d).join("L")+"Z"}}};metExploreD3.GraphPath.groupFill=function(f,d){metExploreD3.sortCompartmentInBiosource();var g;for(var h=0;h<metExploreD3.getCompartmentInBiosourceLength();h++){if(f.key==metExploreD3.getCompartmentInBiosourceSet()[h].getIdentifier()){g=metExploreD3.getCompartmentInBiosourceSet()[h].getColor()}}return g};var b="M0,0L10,10Z";d3.select("#"+a).select("#D3viz").selectAll("path").filter(function(d){return d!="linkCaptionRev"}).data(session.groups).attr("d",function(d){return b}).enter().insert("path",":first-child").attr("class",function(d){return d.key}).attr("id",function(d){return d.key}).style("fill",metExploreD3.GraphPath.groupFill).style("stroke",metExploreD3.GraphPath.groupFill).style("stroke-width",40).style("stroke-linejoin","round").style("opacity",0.15)}};