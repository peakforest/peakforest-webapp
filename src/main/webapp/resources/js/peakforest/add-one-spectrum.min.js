$(document).ready(function(){$.ajax({type:"get",url:"list-std-matrix",async:true,success:function(a){$.each(a,function(c,b){$("#add1spectrum-sample-stdMatrix").append('<option id="'+b.id+'" html="'+(b.html).replace(/"/g,"'")+'">'+b.text+"</option>")})},error:function(a){console.log(a)}});$.ajax({type:"get",url:"list-ontologies",async:true,success:function(a){$.each(a,function(c,b){$("#add1spectrum-sample-bioMatrix").append('<option id="'+b.id+'" html="'+(b.html).replace(/"/g,"'")+'">'+b.text+"</option>")})},error:function(a){console.log(a)}});$("#add1spectrum-sample-stdMatrix").change(function(a){if(a.value!=""){$("#add1spectrum-sample-type-matrix-ref-help small").html('<i class="fa fa-question-circle"></i> '+$("#add1spectrum-sample-stdMatrix option:selected").attr("html"));$("#add1spectrum-sample-type-matrix-ref-help").show()}else{$("#add1spectrum-sample-type-matrix-ref-help").hide()}});$("#add1spectrum-sample-bioMatrix").change(function(a){if(a.value!=""){$($("#add1spectrum-sample-type-matrix-bio-help small")[0]).html('<i class="fa fa-question-circle"></i> '+$("#add1spectrum-sample-bioMatrix option:selected").attr("html"))}else{$($("#add1spectrum-sample-type-matrix-bio-help small")[0]).html("")}})});function checkUploadRawNmrFileForm(){if($("#rawNmrFile").val()==""){return false}return true}$(document).on("change",".btn-file-nmr-raw.btn-file :file",function(){var a=$(this),c=a.get(0).files?a.get(0).files.length:1,b=a.val().replace(/\\/g,"/").replace(/.*\//,"");a.trigger("fileselect",[c,b])});$(document).ready(function(){$(".btn-file-nmr-raw.btn-file :file").on("fileselect",function(d,e,b){var a=$(this).parents(".input-group").find(":text"),c=e>1?e+" files selected":b;if(a.length){a.val(c);$("#addRawNmrFileFormContent").appendTo("#rawNmrFileUploadForm");$("#rawNmrFileUploadForm").submit()}else{if(c){alert(c)}}});$("#rawNmrFileUploadForm").ajaxForm({beforeSubmit:startUploadRawNmrFile,success:function(f){var a={};$.each(f.trim().split("\n"),function(h,g){var i=(g).split("=");a[i[0]]=i[1]});if(a.success=="true"){if((a.reload=="true")){stringInfo="Raw spectrum dataum uploaded!";var e='<br><br><div class="alert alert-success alert-dismissible" role="alert">';e+='<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only"><spring:message code="alert.close" text="Close" /></span></button>';e+="<strong>Informations</strong> "+stringInfo;e+=" </div>";$("#rawNmrFileUploadError").html(e);$("#rawFileTmpName").val(a.new_raw_file_name)}else{if(a.procFiles){stringInfo="select proc. file: <ul>";var c=a.procFiles.split(",");$.each(c,function(h,g){if(g!=""){stringInfo+="<li><a onclick=\"submitRawNmrFile_addProcFile('"+g+"')\">"+g+"</a></li>"}})}else{if(a.files){stringInfo="select aq. file: <ul>";var c=a.files.split(",");$.each(c,function(h,g){if(g!=""){stringInfo+="<li><a onclick=\"submitRawNmrFile_addAqFile('"+g+"')\">"+g+"</a></li>"}})}}stringInfo+="</ul>";var e='<br><br><div class="alert alert-info alert-dismissible" role="alert">';e+='<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only"><spring:message code="alert.close" text="Close" /></span></button>';e+="<strong>Need more details</strong> "+stringInfo;e+=" </div>";$("#rawNmrFileUploadError").html(e)}}else{var d="";if(a.error=="no_file_selected"){d="no file selected!"}else{if(a.error=="wrong_ext"){d="wrong file extension"}else{if(a.error=="empty_file"){d="uploaded file is empty"}else{d="an error occured; please contact dev. team!"}}}var b='<br><br><div class="alert alert-info alert-dismissible" role="alert">';b+='<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only"><spring:message code="alert.close" text="Close" /></span></button>';b+='<strong><spring:message code="alert.strong.warning" text="Warning!" /></strong> '+d;b+=" </div>";$("#rawNmrFileUploadError").html(b)}$("#rawNmrFileUploading").hide();$("#addRawNmrFileFormContent").appendTo("#rawNmrFileUploadContainer")},error:function(){var a='<br><br><div class="alert alert-danger alert-dismissible" role="alert">';a+='<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only"><spring:message code="alert.close" text="Close" /></span></button>';a+='<strong><spring:message code="alert.strong.warning" text="Warning!" /></strong> could not upload file';a+=" </div>";$("#rawNmrFileUploadError").html(a);$("#rawNmrFileUploading").hide();$("#rawNmrFormContent").appendTo("#rawNmrFileUploadContainer")}})});function startUploadRawNmrFile(){$("#rawNmrFileUploadError").html("");$("#rawNmrFileUploading").show()}function submitRawNmrFile_addAqFile(a){$("#rawNmrFileUploadForm").append('<input type="hidden" name="aq_file" value="'+a+'">');$("#addRawNmrFileFormContent").appendTo("#rawNmrFileUploadForm");$("#rawNmrFileUploadForm").submit()}function submitRawNmrFile_addProcFile(a){$("#rawNmrFileUploadForm").append('<input type="hidden" name="proc_file" value="'+a+'">');$("#addRawNmrFileFormContent").appendTo("#rawNmrFileUploadForm");$("#rawNmrFileUploadForm").submit()}modeEditSpectrum13C=false;function updateNMRspectraViewer13c(){$("#containter-nmr-spectrum-preview-13c").empty();spectrumMinPPM=10;spectrumMaxPPM=-100000;maxGraph=0;var b=[];var a=[];$.each(hot_NMR_C_Peaks.getData(),function(){if(this["peak index"]!=undefined&&this["peak index"]!==""){var c=-(Number(this["ν (F1) [ppm]"]));var e=Number(this["intensity [rel]"]);var d=this["annotation"];b.push([(c-0.000001),-150]);b.push([(c+0.000001),-150]);b.push([c,e]);a[c]=d;if(c<spectrumMinPPM){spectrumMinPPM=c}if(c>spectrumMaxPPM){spectrumMaxPPM=c}if(e>maxGraph){maxGraph=e}}});spectrumMinPPM=spectrumMinPPM+(0.1*spectrumMinPPM);spectrumMaxPPM=spectrumMaxPPM-(0.1*spectrumMaxPPM);maxGraph=maxGraph+(0.1*maxGraph);b.sort();b.reverse();$("#containter-nmr-spectrum-preview-13c").highcharts({chart:{zoomType:"x",spacingRight:10,spacingLeft:10,type:"scatter"},title:{text:"Spectrum Preview",useHTML:true},subtitle:{text:document.ontouchstart===undefined?"Select area":"Pinch the chart to zoom in"},xAxis:{type:"number",title:{text:"Chemical Shift (ppm)"},min:spectrumMinPPM,max:spectrumMaxPPM,labels:{formatter:function(){return(Math.abs(this.value)+"")}}},yAxis:{title:{text:"Relative Intensity (%)"},min:0,max:maxGraph},tooltip:{crosshairs:true,formatter:function(){var c="";return"<b>"+this.series.name+"</b><br/>chemical shift:"+Math.abs(this.x)+" ppm;<br/>Relative Intensity: "+this.y+"%;<br/>Annotation: "+a[this.x]+""}},legend:{enabled:false},plotOptions:{scatter:{}},series:[{name:"preview",showInLegend:true,color:"#f00",lineColor:"#f00",pointInterval:10,pointStart:100,lineWidth:2,marker:{enabled:true,radius:2,lineColor:"#f00"},data:b,zIndex:10}]})}modeEditSpectrum=false;function updateNMRspectraViewer(){$("#containter-nmr-spectrum-preview").empty();spectrumMinPPM=10;spectrumMaxPPM=-100000;maxGraph=0;var b=[];var a=[];$.each(hot_NMR_H_Peaks.getData(),function(){if(this["peak index"]!=undefined&&this["peak index"]!==""){var c=-(Number(this["ν (F1) [ppm]"]));var e=Number(this["intensity [rel]"]);var d=this["annotation"];b.push([(c-0.000001),-150]);b.push([(c+0.000001),-150]);b.push([c,e]);a[c]=d;if(c<spectrumMinPPM){spectrumMinPPM=c}if(c>spectrumMaxPPM){spectrumMaxPPM=c}if(e>maxGraph){maxGraph=e}}});spectrumMinPPM=spectrumMinPPM+(0.1*spectrumMinPPM);spectrumMaxPPM=spectrumMaxPPM-(0.1*spectrumMaxPPM);maxGraph=maxGraph+(0.1*maxGraph);b.sort();b.reverse();$("#containter-nmr-spectrum-preview").highcharts({chart:{zoomType:"x",spacingRight:10,spacingLeft:10,type:"scatter"},title:{text:"Spectrum Preview",useHTML:true},subtitle:{text:document.ontouchstart===undefined?"Select area":"Pinch the chart to zoom in"},xAxis:{type:"number",title:{text:"Chemical Shift (ppm)"},min:spectrumMinPPM,max:spectrumMaxPPM,labels:{formatter:function(){return(Math.abs(this.value)+"")}}},yAxis:{title:{text:"Relative Intensity (%)"},min:0,max:maxGraph},tooltip:{crosshairs:true,formatter:function(){var c="";return"<b>"+this.series.name+"</b><br/>chemical shift:"+Math.abs(this.x)+" ppm;<br/>Relative Intensity: "+this.y+"%;<br/>Annotation: "+a[this.x]+""}},legend:{enabled:false},plotOptions:{scatter:{}},series:[{name:"preview",showInLegend:true,color:"#f00",lineColor:"#f00",pointInterval:10,pointStart:100,lineWidth:2,marker:{enabled:true,radius:2,lineColor:"#f00"},data:b,zIndex:10}]})}function updateLCMSspectraViewer(){$("#containter-lcms-spectrum-preview").empty();spectrumMinPPM=10000;if(Number($("#add1spectrum-peaksMS-rangeFrom").val())!=""){}spectrumMinPPM=Number($("#add1spectrum-peaksMS-rangeFrom").val());spectrumMaxPPM=0;if(Number($("#add1spectrum-peaksMS-rangeTo").val())!=""){}spectrumMaxPPM=Number($("#add1spectrum-peaksMS-rangeTo").val());maxGraph=0;var b=[];var a=[];$.each(hot_MS_Peaks.getData(),function(){if(this[0]!=undefined&&this[0]!=""){var c=(Number(this[0]));var e=Number(this[2]);var d=this[6];b.push([(c-0.000001),-150]);b.push([(c+0.000001),-150]);b.push([c,e]);a[c]=d;if(c<spectrumMinPPM){spectrumMinPPM=c}if(c>spectrumMaxPPM){spectrumMaxPPM=c}if(e>maxGraph){maxGraph=e}}});spectrumMinPPM=spectrumMinPPM-(0.1*spectrumMinPPM);spectrumMaxPPM=spectrumMaxPPM+(0.1*spectrumMaxPPM);maxGraph=maxGraph+(0.1*maxGraph);b.sort();$("#containter-lcms-spectrum-preview").highcharts({chart:{zoomType:"x",spacingRight:10,spacingLeft:10,type:"scatter"},title:{text:"Spectrum Preview",useHTML:true},subtitle:{text:document.ontouchstart===undefined?"Select area":"Pinch the chart to zoom in"},xAxis:{type:"number",title:{text:"m/z"},min:spectrumMinPPM,max:spectrumMaxPPM,labels:{formatter:function(){return(Math.abs(this.value)+"")}}},yAxis:{title:{text:"Relative Intensity (%)"},min:0,max:maxGraph},tooltip:{crosshairs:true,formatter:function(){var c="";return"<b>"+this.series.name+"</b><br/>m/z:"+Math.abs(this.x)+";<br/>Relative Intensity: "+this.y+"%;<br/>Annotation: "+a[this.x]+""}},legend:{enabled:false},plotOptions:{scatter:{}},series:[{name:"preview",showInLegend:true,color:"#f00",lineColor:"#f00",pointInterval:10,pointStart:100,lineWidth:2,marker:{enabled:true,radius:2,lineColor:"#f00"},data:b,zIndex:10}]})}setTimeout(function(){$("#add1spectrum-other-date").focusout(function(){if($(this).parent().hasClass("has-warning")){$(this).parent().removeClass("has-warning")}if($(this).parent().hasClass("has-success")){$(this).parent().removeClass("has-success")}if($(this).val()==""){$(this).parent().addClass("has-warning")}else{$(this).parent().addClass("has-success")}})},500);var isSeparationFlowRateInit=false;var isMSpeaksInit=false;$(document).ready(function(){$("#add1spectrum-chromatoLC-method").append('<option value="" selected="selected" disabled="disabled">choose in list&hellip;</option>');$.getJSON("resources/json/list-lc-methods.json",function(a){$.each(a.methods,function(){if(this.name!==undefined){if(this.value!==undefined){$("#add1spectrum-chromatoLC-method").append('<option value="'+this.value+'">'+this.name+"</option>")}else{$("#add1spectrum-chromatoLC-method").append("<option disabled>"+this.name+"</option>")}}})});$("#add1spectrum-chromatoLC-colConstructor").append('<option value="" selected="selected" disabled="disabled">choose in list&hellip;</option>');$.getJSON("resources/json/list-lc-columns.json",function(a){$.each(a.columns,function(){$("#add1spectrum-chromatoLC-colConstructor").append('<option value="'+this.value+'">'+this.name+"</option>")});$("#add1spectrum-chromatoLC-colConstructor").append('<option value="other" >Other</option>')});$("#add1spectrum-chromatoLC-separationSolvA").append('<option value="" selected="selected" disabled="disabled">choose in list&hellip;</option>');$("#add1spectrum-chromatoLC-separationSolvB").append('<option value="" selected="selected" disabled="disabled">choose in list&hellip;</option>');$.getJSON("resources/json/list-lc-solvents.json",function(a){$.each(a.solvents,function(){$("#add1spectrum-chromatoLC-separationSolvA").append('<option value="'+this.value+'">'+this.name+"</option>");$("#add1spectrum-chromatoLC-separationSolvB").append('<option value="'+this.value+'">'+this.name+"</option>")})});$.getJSON("resources/json/list-ms-ionization-methods.json",function(a){$.each(a.methods,function(){if(this.name!==undefined){if(this.value!==undefined){$("#add1spectrum-analyzserMS-ionizationMethod-pos").append('<option value="'+this.value+'">'+this.name+"</option>");$("#add1spectrum-analyzserMS-ionizationMethod-neg").append('<option value="'+this.value+'">'+this.name+"</option>")}else{$("#add1spectrum-analyzserMS-ionizationMethod-pos").append("<option disabled>"+this.name+"</option>");$("#add1spectrum-analyzserMS-ionizationMethod-neg").append("<option disabled>"+this.name+"</option>")}}})});$("#add1spectrum-sample-lcmsSolvent").append('<option value="" selected="selected" disabled="disabled">choose in list&hellip;</option>');$.getJSON("resources/json/list-lcms-solvents.json",function(a){$.each(a.solvents,function(){$("#add1spectrum-sample-lcmsSolvent").append('<option value="'+this.value+'" class="'+this.classD+'">'+this.name+"</option>")})});$("#add1spectrum-sample-nmrSolvent").append('<option value="" selected="selected" disabled="disabled">choose in list&hellip;</option>');$.getJSON("resources/json/list-nmr-solvents.json",function(a){$.each(a.solvents,function(){$("#add1spectrum-sample-nmrSolvent").append('<option value="'+this.value+'" class="'+this.classD+'">'+this.name+"</option>")})});$("#add1spectrum-sample-nmrReferenceChemicalShifIndicatort").append('<option value="" selected="selected" disabled="disabled">choose in list&hellip;</option>');$.getJSON("resources/json/list-nmr-referenceChemShiftIndicators.json",function(a){$.each(a.referenceChemShiftIndicator,function(){$("#add1spectrum-sample-nmrReferenceChemicalShifIndicatort").append('<option value="'+this.value+'" class="'+this.classD+'">'+this.name+"</option>")})});$("#add1spectrum-sample-nmrLockSubstance").append('<option value="" selected="selected" disabled="disabled">choose in list&hellip;</option>');$.getJSON("resources/json/list-nmr-lockSubstances.json",function(a){$.each(a.lockSubstance,function(){$("#add1spectrum-sample-nmrLockSubstance").append('<option value="'+this.value+'" class="'+this.classD+'">'+this.name+"</option>")})});$("#add1spectrum-sample-nmrBufferSolution").append('<option value="" selected="selected" disabled="disabled">choose in list&hellip;</option>');$.getJSON("resources/json/list-nmr-bufferSolutions.json",function(a){$.each(a.bufferSolution,function(){$("#add1spectrum-sample-nmrBufferSolution").append('<option value="'+this.value+'" class="'+this.classD+'">'+this.name+"</option>")})});$("#add1spectrum-analyzer-nmr-instrument-name").append('<option value="" selected="selected" disabled="disabled">choose in list&hellip;</option>');$("#add1spectrum-analyzer-nmr-instrument-magneticFieldStrength").append('<option value="" selected="selected" disabled="disabled">choose in list&hellip;</option>');$("#add1spectrum-analyzer-nmr-instrument-software").append('<option value="" selected="selected" disabled="disabled">choose in list&hellip;</option>');$("#add1spectrum-analyzer-nmr-instrument-probe").append('<option value="" selected="selected" disabled="disabled">choose in list&hellip;</option>');$("#add1spectrum-analyzer-nmr-instrument-tube").append('<option value="" selected="selected" disabled="disabled">choose in list&hellip;</option>');$.getJSON("resources/json/list-nmr-instrumentOptions.json",function(a){$.each(a.model,function(){$("#add1spectrum-analyzer-nmr-instrument-name").append('<option value="'+this.value+'" class="'+this.classD+'">'+this.name+"</option>")});$.each(a.magnetic_field_strength,function(){$("#add1spectrum-analyzer-nmr-instrument-magneticFieldStrength").append('<option value="'+this.value+'" class="'+this.classD+'">'+this.name+"</option>")});$.each(a.software,function(){$("#add1spectrum-analyzer-nmr-instrument-software").append('<option value="'+this.value+'" class="'+this.classD+'">'+this.name+"</option>")});$.each(a.probe,function(){$("#add1spectrum-analyzer-nmr-instrument-probe").append('<option value="'+this.value+'" class="'+this.classD+'">'+this.name+"</option>")});$.each(a.tubes,function(){$("#add1spectrum-analyzer-nmr-instrument-tube").append('<option value="'+this.value+'" class="'+this.classD+'">'+this.name+"</option>")})});resetFromColors();$(".add1spectrum").change(function(){console.log("Handler for .change() called #"+$(this).attr("id"));var c=$(this).attr("id");var a=$(this).val();var d=$(this).parent().hasClass("has-success");var e=$(this).parent().hasClass("has-warning");var l=$(this).parent().hasClass("has-error");var h=$(this).hasClass("is-optional");var j=$(this).hasClass("is-mandatory");switch(c){case"add1spectrum-sample-type":$("#add1spectrum-sample-type-compound-ref").hide();$("#add1spectrum-sample-type-compound-mix").hide();$("#add1spectrum-sample-type-matrix-ref").hide();$("#add1spectrum-sample-type-matrix-bio").hide();$("#add1spectrum-sample-type-rcc-added").hide();if(a=="compound-ref"){$("#add1spectrum-sample-type-compound-ref").show()}else{if(a=="compound-mix"){$("#add1spectrum-sample-type-compound-mix").show();$("#add1spectrum-sample-type-rcc-added").show();handsontableRefChemCpdAdded(null)}else{if(a=="matrix-ref"){$("#add1spectrum-sample-type-matrix-ref").show();$("#add1spectrum-sample-type-rcc-added").show();handsontableRefChemCpdAdded(null)}else{if(a=="matrix-bio"){$("#add1spectrum-sample-type-matrix-bio").show()}}}}break;case"add1spectrum-sample-nmrSolvent":resetElemColor("add1spectrum-sample-nmrpH");var f=$("#add1spectrum-sample-nmrSolvent option:selected").hasClass("displayPHOpt");if(a==""||a==null||!f){disableElem("add1spectrum-sample-nmrpH")}else{if($("#add1spectrum-sample-nmrpH").val()==""){enableElem("add1spectrum-sample-nmrpH")}else{if($("#add1spectrum-sample-nmrpH").val()!=""){enableElem("add1spectrum-sample-nmrpH")}}}break;case"add1spectrum-sample-nmrReferenceChemicalShifIndicatort":resetElemColor("add1spectrum-sample-nmrReferenceChemicalShifIndicatortOther");var k=$("#add1spectrum-sample-nmrReferenceChemicalShifIndicatort option:selected").hasClass("displayOtherOpt");if(a==""||a==null||!k){disableElem("add1spectrum-sample-nmrReferenceChemicalShifIndicatortOther")}else{if($("#add1spectrum-sample-nmrReferenceChemicalShifIndicatortOther").val()==""){enableElem("add1spectrum-sample-nmrReferenceChemicalShifIndicatortOther")}else{if($("#add1spectrum-sample-nmrReferenceChemicalShifIndicatortOther").val()!=""){enableElem("add1spectrum-sample-nmrReferenceChemicalShifIndicatortOther")}}}break;case"add1spectrum-chromatoLC-colConstructor":resetElemColor("add1spectrum-chromatoLC-colConstructorOther");if(a==""||a==null||a!="other"){disableElem("add1spectrum-chromatoLC-colConstructorOther")}else{if($("#add1spectrum-chromatoLC-colConstructorOther").val()==""){enableElem("add1spectrum-chromatoLC-colConstructorOther")}else{if($("#add1spectrum-chromatoLC-colConstructorOther").val()!=""){enableElem("add1spectrum-chromatoLC-colConstructorOther")}}}break;case"add1spectrum-analyzer-nmr-instrument-cellOrTube":resetElemColor("add1spectrum-analyzer-nmr-instrument-tube");resetElemColor("add1spectrum-analyzer-nmr-instrument-flowCellVolume");if(a==""||a==null){disableElem("add1spectrum-analyzer-nmr-instrument-tube");disableElem("add1spectrum-analyzer-nmr-instrument-flowCellVolume")}else{if(a=="cell"){disableElem("add1spectrum-analyzer-nmr-instrument-tube");enableElem("add1spectrum-analyzer-nmr-instrument-flowCellVolume")}else{if(a=="tube"){disableElem("add1spectrum-analyzer-nmr-instrument-flowCellVolume");enableElem("add1spectrum-analyzer-nmr-instrument-tube")}}}break;case"add1spectrum-analyzserNMR-programm":hideShowProgrammeOption();break;case"add1spectrum-chromatoLC-method":fulfillLCdata(a);break;case"add1spectrum-analyzserMS-ionizationMethod-pos":if($("#add1spectrum-analyzserMS-ionizationMethod-pos").val()!=null){$($("#add1spectrum-peaksMS-polarity option")[1]).attr("disabled",false)}break;case"add1spectrum-analyzserMS-ionizationMethod-neg":if($("#add1spectrum-analyzserMS-ionizationMethod-neg").val()!=null){$($("#add1spectrum-peaksMS-polarity option")[2]).attr("disabled",false)}break}if(j&&(a==""||a==null)){if(d){$(this).parent().removeClass("has-success")}else{if(e){$(this).parent().removeClass("has-warning")}else{if(l){$(this).parent().removeClass("has-error")}}}$(this).parent().addClass("has-error")}else{if(h&&(a==""||a==null)){if(d){$(this).parent().removeClass("has-success")}else{if(e){$(this).parent().removeClass("has-warning")}else{if(l){$(this).parent().removeClass("has-error")}}}$(this).parent().addClass("has-warning")}}if(j&&(a!=""&&a!=null)){if(l){$(this).parent().removeClass("has-error")}$(this).parent().addClass("has-success")}else{if(h&&a!=""){if(e){$(this).parent().removeClass("has-warning")}$(this).parent().addClass("has-success")}}if($(this).parent().children("input").size()==2){d=$(this).parent().hasClass("has-success");e=$(this).parent().hasClass("has-warning");l=$(this).parent().hasClass("has-error");if(j){if(d){$(this).parent().removeClass("has-success")}else{if(e){$(this).parent().removeClass("has-warning")}else{if(l){$(this).parent().removeClass("has-error")}}}var n=true;$.each($(this).parent().children("input"),function(p,o){if($(o).val()==null||$(o).val()==""){n=false}});if(n){$(this).parent().addClass("has-success")}else{$(this).parent().addClass("has-error")}}else{if(h){d=$(this).parent().hasClass("has-success");e=$(this).parent().hasClass("has-warning");l=$(this).parent().hasClass("has-error");if(d){$(this).parent().removeClass("has-success")}else{if(e){$(this).parent().removeClass("has-warning")}else{if(l){$(this).parent().removeClass("has-error")}}}var n=true;$.each($(this).parent().children("input"),function(p,o){if($(o).val()==null||$(o).val()==""){n=false}});if(n){$(this).parent().addClass("has-success")}else{$(this).parent().addClass("has-warning")}}}}if($(this).hasClass("one-or-more")){d=$(this).parent().hasClass("has-success");e=$(this).parent().hasClass("has-warning");l=$(this).parent().hasClass("has-error");if(d){$(this).parent().removeClass("has-success")}else{if(e){$(this).parent().removeClass("has-warning")}else{if(l){$(this).parent().removeClass("has-error")}}}n=false;$.each($(this).parent().children("input"),function(p,o){if($(o).val()!=null&&$(o).val()!=""){n=true}});$.each($(this).parent().children("select"),function(p,o){if($(o).val()!=null&&$(o).val()!=""){n=true}});if(n){$(this).parent().addClass("has-success")}else{$(this).parent().addClass("has-error")}}if($(this).hasClass("add1spectrum-sampleForm")){var b=true;$.each($(".add1spectrum-sampleForm"),function(p,o){if($(o).parent().hasClass("has-error")&&$(o).is(":visible")){b=false}});if(b){if($("#btnSwitch-gotoStep2").hasClass("btn-disabled")){$("#btnSwitch-gotoStep2").removeClass("btn-disabled")}if(!$("#btnSwitch-gotoStep2").hasClass("btn-primary")){$("#btnSwitch-gotoStep2").addClass("btn-primary")}$("#btnSwitch-gotoStep2").prop("disabled",false)}else{if(!$("#btnSwitch-gotoStep2").hasClass("btn-disabled")){$("#btnSwitch-gotoStep2").addClass("btn-disabled")}if($("#btnSwitch-gotoStep2").hasClass("btn-primary")){$("#btnSwitch-gotoStep2").removeClass("btn-primary")}$("#btnSwitch-gotoStep2").prop("disabled",true)}}if($(this).hasClass("add1spectrum-analyzerNMRForm")&&$("#btnSwitch-gotoStep4-nmr").is(":visible")){var g=true;$.each($(".add1spectrum-analyzerNMRForm"),function(p,o){if($(o).parent().hasClass("has-error")&&$(o).is(":visible")){g=false}});if(g){if($("#btnSwitch-gotoStep4-nmr").hasClass("btn-disabled")){$("#btnSwitch-gotoStep4-nmr").removeClass("btn-disabled")}if(!$("#btnSwitch-gotoStep4-nmr").hasClass("btn-primary")){$("#btnSwitch-gotoStep4-nmr").addClass("btn-primary")}$("#btnSwitch-gotoStep4-nmr").prop("disabled",false);$("#btnSwitch-gotoStep5-nmr").prop("disabled",false)}else{if(!$("#btnSwitch-gotoStep4-nmr").hasClass("btn-disabled")){$("#btnSwitch-gotoStep4-nmr").addClass("btn-disabled")}if($("#btnSwitch-gotoStep4-nmr").hasClass("btn-primary")){$("#btnSwitch-gotoStep4-nmr").removeClass("btn-primary")}$("#btnSwitch-gotoStep4-nmr").prop("disabled",true);$("#btnSwitch-gotoStep5-nmr").prop("disabled",true)}}if($(this).hasClass("add1spectrum-chromatoLCForm")&&$("#btnSwitch-gotoStep3-lc").is(":visible")){var g=true;$.each($(".add1spectrum-chromatoLCForm"),function(p,o){if($(o).parent().hasClass("has-error")&&$(o).is(":visible")){g=false}});if(g){if($("#btnSwitch-gotoStep3-lc").hasClass("btn-disabled")){$("#btnSwitch-gotoStep3-lc").removeClass("btn-disabled")}if(!$("#btnSwitch-gotoStep3-lc").hasClass("btn-primary")){$("#btnSwitch-gotoStep3-lc").addClass("btn-primary")}$("#btnSwitch-gotoStep3-lc").prop("disabled",false)}else{if(!$("#btnSwitch-gotoStep3-lc").hasClass("btn-disabled")){$("#btnSwitch-gotoStep3-lc").addClass("btn-disabled")}if($("#btnSwitch-gotoStep3-lc").hasClass("btn-primary")){$("#btnSwitch-gotoStep3-lc").removeClass("btn-primary")}$("#btnSwitch-gotoStep3-lc").prop("disabled",true)}}if($(this).hasClass("add1spectrum-analyzerMSForm")&&$("#btnSwitch-gotoStep4-ms").is(":visible")){var i=true;$.each($(".add1spectrum-analyzerMSForm"),function(p,o){if($(o).parent().hasClass("has-error")&&$(o).is(":visible")){i=false}});if(i){if($("#btnSwitch-gotoStep4-ms").hasClass("btn-disabled")){$("#btnSwitch-gotoStep4-ms").removeClass("btn-disabled")}if(!$("#btnSwitch-gotoStep4-ms").hasClass("btn-primary")){$("#btnSwitch-gotoStep4-ms").addClass("btn-primary")}$("#btnSwitch-gotoStep4-ms").prop("disabled",false)}else{if(!$("#btnSwitch-gotoStep4-ms").hasClass("btn-disabled")){$("#btnSwitch-gotoStep4-ms").addClass("btn-disabled")}if($("#btnSwitch-gotoStep4-ms").hasClass("btn-primary")){$("#btnSwitch-gotoStep4-ms").removeClass("btn-primary")}$("#btnSwitch-gotoStep4-ms").prop("disabled",true)}}if($(this).hasClass("add1spectrum-peaksMSForm-peaklist")&&$("#btnSwitch-gotoStep5-ms").is(":visible")){var m=true;$.each($(".add1spectrum-peaksMSForm-peaklist"),function(p,o){if($(o).parent().hasClass("has-error")&&$(o).is(":visible")){m=false}});if(m){if($("#btnSwitch-gotoStep5-ms").hasClass("btn-disabled")){$("#btnSwitch-gotoStep5-ms").removeClass("btn-disabled")}if(!$("#btnSwitch-gotoStep5-ms").hasClass("btn-primary")){$("#btnSwitch-gotoStep5-ms").addClass("btn-primary")}$("#btnSwitch-gotoStep5-ms").prop("disabled",false)}else{if(!$("#btnSwitch-gotoStep5-ms").hasClass("btn-disabled")){$("#btnSwitch-gotoStep5-ms").addClass("btn-disabled")}if($("#btnSwitch-gotoStep5-ms").hasClass("btn-primary")){$("#btnSwitch-gotoStep5-ms").removeClass("btn-primary")}$("#btnSwitch-gotoStep5-ms").prop("disabled",true)}}if($(this).hasClass("add1spectrum-otherForm")&&$("#btnSwitch-gotoStep6").is(":visible")){checkIfEnableSubmit()}})});function fulfillLCdata(a){$.getJSON("resources/json/lc-methods/"+a+".json",function(b){console.log(b);if(b.lc_chromatography!=null){$("#add1spectrum-chromatoLC-colConstructor").val(b.lc_chromatography.column_constructor);$("#add1spectrum-chromatoLC-colConstructor").change();$("#add1spectrum-chromatoLC-colConstructorOther").val(b.lc_chromatography.column_constructor_other);$("#add1spectrum-chromatoLC-colConstructorOther").change();$("#add1spectrum-chromatoLC-colName").val(b.lc_chromatography.column_name);$("#add1spectrum-chromatoLC-colName").change();$("#add1spectrum-chromatoLC-colLength").val(b.lc_chromatography.column_length);$("#add1spectrum-chromatoLC-colLength").change();$("#add1spectrum-chromatoLC-colDiameter").val(b.lc_chromatography.column_diameter);$("#add1spectrum-chromatoLC-colDiameter").change();$("#add1spectrum-chromatoLC-colParticuleSize").val(b.lc_chromatography.particule_size);$("#add1spectrum-chromatoLC-colParticuleSize").change();$("#add1spectrum-chromatoLC-colTemperature").val(b.lc_chromatography.column_temperature);$("#add1spectrum-chromatoLC-colTemperature").change();try{$("#add1spectrum-chromatoLC-LCMode").val(b.lc_chromatography.LC_mode.toLowerCase())}catch(c){}$("#add1spectrum-chromatoLC-LCMode").change();$("#add1spectrum-chromatoLC-separationFlowRate").val(b.lc_chromatography.separation_flow_rate);$("#add1spectrum-chromatoLC-separationFlowRate").change();$("#add1spectrum-chromatoLC-separationSolvA").val(b.lc_chromatography.separation_solvent_a);$("#add1spectrum-chromatoLC-separationSolvA").change();$("#add1spectrum-chromatoLC-separationSolvApH").val(b.lc_chromatography.ph_solvent_a);$("#add1spectrum-chromatoLC-separationSolvApH").change();$("#add1spectrum-chromatoLC-separationSolvB").val(b.lc_chromatography.separation_solvent_b);$("#add1spectrum-chromatoLC-separationSolvB").change();$("#add1spectrum-chromatoLC-separationSolvBpH").val(b.lc_chromatography.ph_solvent_b);$("#add1spectrum-chromatoLC-separationSolvBpH").change();var d=[];if(b.lc_chromatography.separation_flow_gradient!=null){$.each(b.lc_chromatography.separation_flow_gradient,function(){var f=[""+this.time,""+this.solvA,""+this.solvB];d.push(f)})}else{d=null}handsontableSeparationFlowRate(d)}if(b.ms_analyzer!=null){$("#add1spectrum-analyzer-ms-instrument").val(b.ms_analyzer.instrument);$("#add1spectrum-analyzer-ms-instrument").change();$("#add1spectrum-analyzer-ms-model").val(b.ms_analyzer.model);$("#add1spectrum-analyzer-ms-model").change();$("#add1spectrum-analyzer-ms-resolutionFWHM").val(b.ms_analyzer.resolution_FWHM);$("#add1spectrum-analyzer-ms-resolutionFWHM").change();$("#add1spectrum-analyzer-ms-ionAnalyzerType").val(b.ms_analyzer.ion_analyzer_type);$("#add1spectrum-analyzer-ms-ionAnalyzerType").change()}if(b.molecule_ionization!=null){if(b.molecule_ionization.mode_pos!=null){$("#add1spectrum-analyzserMS-ionizationMethod-pos").val(b.molecule_ionization.mode_pos.ionisation_method);$("#add1spectrum-analyzserMS-ionizationMethod-pos").change();$("#add1spectrum-analyzserMS-sprayGazFlow-pos").val(b.molecule_ionization.mode_pos.spray_gaz_flow);$("#add1spectrum-analyzserMS-sprayGazFlow-pos").change();$("#add1spectrum-analyzserMS-vaporizerGazFlow-pos").val(b.molecule_ionization.mode_pos.vaporizer_gaz_flow);$("#add1spectrum-analyzserMS-vaporizerGazFlow-pos").change();$("#add1spectrum-analyzserMS-vaporizerTemperature-pos").val(b.molecule_ionization.mode_pos.vaporizer_temperature);$("#add1spectrum-analyzserMS-vaporizerTemperature-pos").change();$("#add1spectrum-analyzserMS-sourceGazFlow-pos").val(b.molecule_ionization.mode_pos.source_gaz_flow);$("#add1spectrum-analyzserMS-sourceGazFlow-pos").change();$("#add1spectrum-analyzserMS-ionTransferTubeTemperatureOrTransferCapillaryTemperature-pos").val(b.molecule_ionization.mode_pos.tube_temperature);$("#add1spectrum-analyzserMS-ionTransferTubeTemperatureOrTransferCapillaryTemperature-pos").change();$("#add1spectrum-analyzserMS-highVoltageOrCoronaVoltage-pos").val(b.molecule_ionization.mode_pos.voltage);$("#add1spectrum-analyzserMS-highVoltageOrCoronaVoltage-pos").change()}if(b.molecule_ionization.mode_neg!=null){$("#add1spectrum-analyzserMS-ionizationMethod-neg").val(b.molecule_ionization.mode_neg.ionisation_method);$("#add1spectrum-analyzserMS-ionizationMethod-neg").change();$("#add1spectrum-analyzserMS-sprayGazFlow-neg").val(b.molecule_ionization.mode_neg.spray_gaz_flow);$("#add1spectrum-analyzserMS-sprayGazFlow-neg").change();$("#add1spectrum-analyzserMS-vaporizerGazFlow-neg").val(b.molecule_ionization.mode_neg.vaporizer_gaz_flow);$("#add1spectrum-analyzserMS-vaporizerGazFlow-neg").change();$("#add1spectrum-analyzserMS-vaporizerTemperature-neg").val(b.molecule_ionization.mode_neg.vaporizer_temperature);$("#add1spectrum-analyzserMS-vaporizerTemperature-neg").change();$("#add1spectrum-analyzserMS-sourceGazFlow-neg").val(b.molecule_ionization.mode_neg.source_gaz_flow);$("#add1spectrum-analyzserMS-sourceGazFlow-neg").change();$("#add1spectrum-analyzserMS-ionTransferTubeTemperatureOrTransferCapillaryTemperature-neg").val(b.molecule_ionization.mode_neg.tube_temperature);$("#add1spectrum-analyzserMS-ionTransferTubeTemperatureOrTransferCapillaryTemperature-neg").change();$("#add1spectrum-analyzserMS-highVoltageOrCoronaVoltage-neg").val(b.molecule_ionization.mode_neg.voltage);$("#add1spectrum-analyzserMS-highVoltageOrCoronaVoltage-neg").change()}}if(b.other!=null){$("#add1spectrum-other-author").val(b.other.data_authors);$("#add1spectrum-other-author").change();$("#add1spectrum-other-validator").val(b.other.data_validator);$("#add1spectrum-other-validator").change();$("#add1spectrum-other-date").val(b.other.acquisition_date);$("#add1spectrum-other-date").change();$("#add1spectrum-other-owner").val(b.other.data_ownership);$("#add1spectrum-other-owner").change()}}).error(function(c,e,b){if(c.status==404){var d='<div class="alert alert-danger alert-dismissible" role="alert">';d+='<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only"><spring:message code="alert.close" text="Close" /></span></button>';d+='<strong><spring:message code="alert.strong.error" text="Error!" /></strong> unable to load pre-filled data!';d+=" </div>";$("#alertBoxSelectTemplate").html(d)}})}var isLC=false;var isGC=false;var isIC=false;var isMS=false;var isMSMS=false;var isNMR=false;function resetFromColors(){$.each($(".add1spectrum"),function(b,a){if($(a).parent().hasClass("has-success")){$(a).parent().removeClass("has-success")}if($(a).parent().hasClass("has-warning")){$(a).parent().removeClass("has-warning")}if($(a).parent().hasClass("has-error")){$(a).parent().removeClass("has-error")}if($(a).hasClass("is-mandatory")&&($(a).val()==""||$(a).val()==null)){$(a).parent().addClass("has-error")}if($(a).hasClass("is-optional")&&($(a).val()==""||$(a).val()==null)){$(a).parent().addClass("has-warning")}if(($(a).val()!=""&&$(a).val()!=null)){$(a).parent().addClass("has-success")}});$.each($("button.switchStep"),function(b,a){if(!$(this).hasClass("btn-disabled")){$(this).addClass("btn-disabled")}if($(this).hasClass("btn-primary")){$(this).removeClass("btn-primary")}$(this).prop("disabled",true)});$("#btnSwitch-gotoStep5-ms").removeClass("btn-disabled");$("#btnSwitch-gotoStep5-nmr").removeClass("btn-disabled");$("#btnSwitch-gotoStep5-ms").addClass("btn-primary");$("#btnSwitch-gotoStep5-nmr").addClass("btn-primary");$("#btnSwitch-gotoStep5-ms").prop("disabled",false);$("#btnSwitch-gotoStep5-nmr").prop("disabled",false);$("#add1spectrum-other-author").prop("disabled",false);$("#add1spectrum-other-validator").prop("disabled",false);$("#add1spectrum-other-date").prop("disabled",false);$("#add1spectrum-other-owner").prop("disabled",false);$("#add1spectrum-other-fileName").prop("disabled",false);$("#add1spectrum-other-fileSize").prop("disabled",false)}function switchToStep(a){switch(a){case 2:$("#add1spectrum-chromatographyData-LC").hide();$("#add1spectrum-chromatographyData-GC").hide();$("#add1spectrum-analyserData-NMR").hide();$("#add1spectrum-analyserData-MS").hide();$("#add1spectrum-peaksData-MS").hide();$("#add1spectrum-peaksData-NMR").hide();$("#add1spectrum-otherData").hide();if($("#step1sign").hasClass("fa-question-circle")){$("#step1sign").removeClass("fa-question-circle").addClass("fa-check-circle")}if(isLC){$("#add1spectrum-chromatographyData-LC").show();$("#linkActivateStep2-lc").trigger("click");if($("#step2-lc-sign").hasClass("fa-check-circle")){$("#step2-lc-sign").removeClass("fa-check-circle").addClass("fa-question-circle")}if(!isSeparationFlowRateInit){handsontableSeparationFlowRate(null);isSeparationFlowRateInit=true}}else{if(isGC){$("#add1spectrum-chromatographyData-GC").show();$("#linkActivateStep2-gc").trigger("click");if($("#step2-gc-sign").hasClass("fa-check-circle")){$("#step2-gc-sign").removeClass("fa-check-circle").addClass("fa-question-circle")}}else{if(isIC){$("#add1spectrum-chromatographyData-IC").show();$("#linkActivateStep2-ic").trigger("click");if($("#step2-ic-sign").hasClass("fa-check-circle")){$("#step2-ic-sign").removeClass("fa-check-circle").addClass("fa-question-circle")}}else{if(isNMR){resetNMRprogramms();$("#add1spectrum-analyserData-NMR").show();$("#linkActivateStep3-nmr").trigger("click");if($("#step3-nmr-sign").hasClass("fa-check-circle")){$("#step3-nmr-sign").removeClass("fa-check-circle").addClass("fa-question-circle")}}}}}break;case 3:$("#add1spectrum-analyserData-MS").hide();if(!isNMR){$("#add1spectrum-analyserData-NMR").hide()}$("#add1spectrum-peaksData-MS").hide();$("#add1spectrum-peaksData-NMR").hide();$("#add1spectrum-otherData").hide();if($("#step2-lc-sign").hasClass("fa-question-circle")){$("#step2-lc-sign").removeClass("fa-question-circle").addClass("fa-check-circle")}if($("#step2-gc-sign").hasClass("fa-question-circle")){$("#step2-gc-sign").removeClass("fa-question-circle").addClass("fa-check-circle")}if(isMS||isMSMS){$("#add1spectrum-analyserData-MS").show();$("#linkActivateStep3-ms").trigger("click");$("#add1spectrum-analyzserMS-sprayGazFlow-pos").height($("#add1spectrum-analyzserMS-sprayGazFlow-pos").parent().children("span").height());$("#add1spectrum-analyzserMS-sprayGazFlow-neg").height($("#add1spectrum-analyzserMS-sprayGazFlow-neg").parent().children("span").height());$("#add1spectrum-analyzserMS-vaporizerGazFlow-pos").height($("#add1spectrum-analyzserMS-vaporizerGazFlow-pos").parent().children("span").height());$("#add1spectrum-analyzserMS-vaporizerGazFlow-neg").height($("#add1spectrum-analyzserMS-vaporizerGazFlow-neg").parent().children("span").height());$("#add1spectrum-analyzserMS-vaporizerTemperature-pos").height($("#add1spectrum-analyzserMS-vaporizerTemperature-pos").parent().children("span").height());$("#add1spectrum-analyzserMS-vaporizerTemperature-neg").height($("#add1spectrum-analyzserMS-vaporizerTemperature-neg").parent().children("span").height());$("#add1spectrum-analyzserMS-sourceGazFlow-pos").height($("#add1spectrum-analyzserMS-sourceGazFlow-pos").parent().children("span").height());$("#add1spectrum-analyzserMS-sourceGazFlow-neg").height($("#add1spectrum-analyzserMS-sourceGazFlow-neg").parent().children("span").height());$("#add1spectrum-analyzserMS-ionTransferTubeTemperatureOrTransferCapillaryTemperature-pos").height($("#add1spectrum-analyzserMS-ionTransferTubeTemperatureOrTransferCapillaryTemperature-pos").parent().children("span").height());$("#add1spectrum-analyzserMS-ionTransferTubeTemperatureOrTransferCapillaryTemperature-neg").height($("#add1spectrum-analyzserMS-ionTransferTubeTemperatureOrTransferCapillaryTemperature-neg").parent().children("span").height());$("#add1spectrum-analyzserMS-highVoltageOrCoronaVoltage-pos").height($("#add1spectrum-analyzserMS-highVoltageOrCoronaVoltage-pos").parent().children("span").height());$("#add1spectrum-analyzserMS-highVoltageOrCoronaVoltage-neg").height($("#add1spectrum-analyzserMS-highVoltageOrCoronaVoltage-neg").parent().children("span").height());if($("#step3-ms-sign").hasClass("fa-check-circle")){$("#step3-ms-sign").removeClass("fa-check-circle").addClass("fa-question-circle")}if(isMSMS){$(".enable-if-msms").attr("disabled",false)}else{$(".enable-if-msms").attr("disabled",true)}}else{if(isNMR){resetNMRprogramms();$("#add1spectrum-analyserData-NMR").show();$("#linkActivateStep3-nmr").trigger("click");if($("#step3-nmr-sign").hasClass("fa-check-circle")){$("#step3-nmr-sign").removeClass("fa-check-circle").addClass("fa-question-circle")}$(".add1spectrum-analyzserNMR-programm-peaklist").change()}}$("#add1spectrum-analyzer-ms-instrument").change();break;case 4:$("#add1spectrum-peaksData-MS").hide();$("#add1spectrum-peaksData-NMR").hide();$("#add1spectrum-otherData").hide();if($("#step3-ms-sign").hasClass("fa-question-circle")){$("#step3-ms-sign").removeClass("fa-question-circle").addClass("fa-check-circle")}if($("#step3-nmr-sign").hasClass("fa-question-circle")){$("#step3-nmr-sign").removeClass("fa-question-circle").addClass("fa-check-circle")}if(isMS||isMSMS){$("#add1spectrum-peaksData-MS").show();$("#linkActivateStep4-ms").trigger("click");if($("#step4-ms-sign").hasClass("fa-check-circle")){$("#step4-ms-sign").removeClass("fa-check-circle").addClass("fa-question-circle")}if(!isMSpeaksInit){handsontableMSpeaks(null);isMSpeaksInit=true;$(".add1spectrum-peaksMSForm-peaklist-reset").val("").change()}}else{if(isNMR){$("#add1spectrum-peaksData-NMR").show();$("#linkActivateStep4-nmr").trigger("click");if($("#step4-nmr-sign").hasClass("fa-check-circle")){$("#step4-nmr-sign").removeClass("fa-check-circle").addClass("fa-question-circle")}}}if(isMS||isMSMS){setTimeout(function(){$("#container_MS_Peaks").trigger("click")},250)}$("#add1spectrum-peaksMS-msLevel").change();break;case 5:$("#add1spectrum-otherData").hide();if($("#step4-ms-sign").hasClass("fa-question-circle")){$("#step4-ms-sign").removeClass("fa-question-circle").addClass("fa-check-circle")}if($("#step4-nmr-sign").hasClass("fa-question-circle")){$("#step4-nmr-sign").removeClass("fa-question-circle").addClass("fa-check-circle")}if(isMS||isMSMS){}else{if(isNMR){}}if($("#step5sign").hasClass("fa-check-circle")){$("#step5sign").removeClass("fa-check-circle").addClass("fa-question-circle")}$("#add1spectrum-otherData").show();$("#linkActivateStep5").trigger("click");checkIfEnableSubmit();$("#import1SpectrumLoadingBare").hide();$("#import1SpectrumResults").hide();break;case 6:postOneSpectrumFrom();cptPeakListTab++;break;case 7:dumpOneSpectrumFrom();break}}resetElemColor=function(a){if($("#"+a).parent().hasClass("has-success")){$("#"+a).parent().removeClass("has-success")}if($("#"+a).parent().hasClass("has-warning")){$("#"+a).parent().removeClass("has-warning")}if($("#"+a).parent().hasClass("has-error")){$("#"+a).parent().removeClass("has-error")}};disableElem=function(a){$("#"+a).prop("disabled",true);$("#"+a).val("");if($("#"+a).hasClass("is-mandatory")){$("#"+a).removeClass("is-mandatory")}};enableElem=function(a){$("#"+a).prop("disabled",false);$("#"+a).parent().addClass("has-error");if(!$("#"+a).hasClass("is-mandatory")){$("#"+a).addClass("is-mandatory")}};function checkIfEnableSubmit(){var a=true;$.each($(".add1spectrum-otherForm"),function(c,b){if($(b).parent().hasClass("has-error")&&$(b).is(":visible")){a=false}});if(a){if($("#btnSwitch-gotoStep6").hasClass("btn-disabled")){$("#btnSwitch-gotoStep6").removeClass("btn-disabled")}if(!$("#btnSwitch-gotoStep6").hasClass("btn-primary")){$("#btnSwitch-gotoStep6").addClass("btn-primary")}$("#btnSwitch-gotoStep6").prop("disabled",false);if($("#btnSwitch-gotoStep7").hasClass("btn-disabled")){$("#btnSwitch-gotoStep7").removeClass("btn-disabled")}if(!$("#btnSwitch-gotoStep7").hasClass("btn-primary")){$("#btnSwitch-gotoStep7").addClass("btn-primary")}$("#btnSwitch-gotoStep7").prop("disabled",false)}else{if(!$("#btnSwitch-gotoStep6").hasClass("btn-disabled")){$("#btnSwitch-gotoStep6").addClass("btn-disabled")}if($("#btnSwitch-gotoStep6").hasClass("btn-primary")){$("#btnSwitch-gotoStep6").removeClass("btn-primary")}$("#btnSwitch-gotoStep6").prop("disabled",true);if(!$("#btnSwitch-gotoStep7").hasClass("btn-disabled")){$("#btnSwitch-gotoStep7").addClass("btn-disabled")}if($("#btnSwitch-gotoStep7").hasClass("btn-primary")){$("#btnSwitch-gotoStep7").removeClass("btn-primary")}$("#btnSwitch-gotoStep7").prop("disabled",true)}}function addOneSpectrum(a){$(".add1spectrum-sampleForm").prop("disabled",false);$(".add1spectrum-chromatoLCForm").prop("disabled",false);$(".add1spectrum-analyzerMSForm").prop("disabled",false);$(".add1spectrum-analyzerNMRForm-lock").prop("disabled",false);$(".add1spectrum-otherForm").prop("disabled",false);$("#add1spectrum-chromatoLC-colConstructor").change();isLC=false;isGC=false;isIC=false;isMS=false;isMSMS=false;isNMR=false;$("#alertBoxSubmitSpectrum").html("");$(".opt-nmr").hide();$(".opt-ms").hide();$(".opt-msms").hide();$("#add1spectrum-chromatographyData-LC").hide();$("#add1spectrum-chromatographyData-GC").hide();$("#add1spectrum-analyserData-NMR").hide();$("#add1spectrum-analyserData-MS").hide();$(".add1spectrum-ionTrap").hide();$("#add1spectrum-peaksData-MS").hide();$("#add1spectrum-peaksData-NMR").hide();$("#add1spectrum-otherData").hide();$("#add1spectrum-sample-type").val("");$(".add1spectrum-sample-type-panel").hide();$(".add1spectrum-sampleForm").val("");$("#sample-bonus-display").html("");$(".add1spectrum-chromatoLCForm").val("");$(".add1spectrum-analyzerMSForm").val("");$(".add1spectrum-analyzerNMRForm").val("");isSeparationFlowRateInit=false;isMSpeaksInit=false;$(".handsontable").html("");$("#step0sign").removeClass("fa-question-circle").addClass("fa-check-circle");if($("#step1sign").hasClass("fa-check-circle")){$("#step1sign").removeClass("fa-check-circle").addClass("fa-question-circle")}$("#linkActivateStep1").trigger("click");$("#add1spectrum-sampleData").show();switch(a){case 1:isGC=true;isMS=true;break;case 2:isLC=true;isMS=true;$(".opt-ms").show();break;case 3:isNMR=true;$(".opt-nmr").show();break;case 4:isLC=true;isNMR=true;break;case 5:isLC=true;isMSMS=true;$(".opt-ms").show();$(".opt-msms").show();break;case 6:isIC=true;isMS=true;$(".opt-ms").show();break;case 7:isIC=true;isMSMS=true;$(".opt-ms").show();$(".opt-msms").show();break}resetFromColors();jsonSpectrumType=null;isJsonSpectrumTypeComplete=false;jsonSample=null;isJsonSampleComplete=false;isJsonRCCaddedComplete=false;jsonChromato=null;isJsonChromatoComplete=false;jsonAnalyzer=null;isJsonAnalyzerComplete=false;jsonPeaksList=[];isJsonPeaksListComplete=false;jsonOtherMetadata=null;isJsonOtherMetadataComplete=false;cptPeakListTab=0;jsonAnalyzerAcquisition=[];idMetadataMap={};listOfViewableSpectra=[];jsonMolIonization=null;jsonMolIonBeam=null;if(inchikey!==null){loadJSCompound(inchikey)}}function loadJSCompound(a){$("#add1spectrum-sample-type").val("compound-ref");$("#add1spectrum-sample-type").change();$("#add1spectrum-sample-inchikey").val(a);$("#add1spectrum-sample-inchikey").change();$.ajax({type:"get",url:"get-cpd-data",data:"inchikey="+a,dataType:"json",success:function(b){if(b.success){$("#add1spectrum-sample-inchi").val(b.inchi);$("#add1spectrum-sample-inchi").change();$("#add1spectrum-sample-commonName").val(b.name);$("#add1spectrum-sample-commonName").change();$("#sample-bonus-display").html('<img class="" src="image/'+b.type+"/"+b.inchikey+'" alt="'+b.name+'">')}},error:function(b){}}).always(function(){})}resetNMRprogramms=function(){$("#add1spectrum-analyzserNMR-programm").val("");$(".input-nmrProg").hide();$(".add1spectrum-analyzserNMR-programm-peaklist").prop("disabled",false);$(".add1spectrum-analyzserNMR-programm-processing").prop("disabled",false);$(".add1spectrum-analyzserNMR-programm-peaklist").val("").change()};hideShowProgrammeOption=function(){var a=$("#add1spectrum-analyzserNMR-programm").val();$(".input-nmrProg").hide();$(".nmr-1dh").hide();$(".nmr-1dc").hide();$(".nmr-2d-jres").hide();$(".nmr-2d-cosy").hide();$(".nmr-2d-tocsy").hide();$(".nmr-2d-noesy").hide();$(".nmr-2d-hsqc").hide();$(".nmr-2d-hmbc").hide();switch(a){case"":return false;case"proton":case"proton-1d":$(".input-nmrProg-H").show();handsontableNmrProtPeaks(null);handsontableNmrProtPeakSats(null);handsontableNmrMultiPeaks(null);$(".nmr-1dh").show();$(".input-nmrProg-all-1d").show();break;case"noesy-1d":$(".input-nmrProg-noesy1d").show();handsontableNmrProtPeaks(null);handsontableNmrProtPeakSats(null);handsontableNmrMultiPeaks(null);$(".nmr-1dh").show();$(".input-nmrProg-all-1d").show();break;case"cpmg-1d":$(".input-nmrProg-cpmg1d").show();handsontableNmrProtPeaks(null);handsontableNmrProtPeakSats(null);handsontableNmrMultiPeaks(null);$(".nmr-1dh").show();$(".input-nmrProg-all-1d").show();break;case"carbon13-1d":$(".input-nmrProg-C13").show();handsontableNmrCarbPeaks(null);handsontableNmrCarbMultiPeaks(null);$(".nmr-1dc").show();$(".input-nmrProg-all-1d").show();break;case"JRES-2d":$(".input-nmrProg-JRES").show();handsontableNmr_JRES_Peaks(null);$(".nmr-2d-jres").show();break;case"COSY-2d":$(".input-nmrProg-COSY").show();handsontableNmr_2DHH_Peaks(null);$(".nmr-2d-cosy").show();break;case"TOCSY-2d":$(".input-nmrProg-TOCSY").show();handsontableNmr_2DHH_Peaks(null);$(".nmr-2d-tocsy").show();break;case"NOESY-2d":$(".input-nmrProg-NOESY").show();handsontableNmr_2DHH_Peaks(null);$(".nmr-2d-noesy").show();break;case"HSQC-2d":$(".input-nmrProg-HSQC").show();handsontableNmr_2DHC_Peaks(null);$(".nmr-2d-hsqc").show();break;case"HMBC-2d":$(".input-nmrProg-HMBC").show();handsontableNmr_2DHC_Peaks(null);$(".nmr-2d-hmbc").show();break;default:break}$(".input-nmrProg-all").show();resetFromColors();return true};$(document).ready(function(){$("#add1spectrum-analyzer-nmr-processing-windowFunctionF1").on("change",function(){var a=$("#add1spectrum-analyzer-nmr-processing-windowFunctionF1").val();if(a=="SINE"||a=="QSINE"){$("#add1spectrum-analyzer-nmr-processing-ssbF1").parent().show()}else{$("#add1spectrum-analyzer-nmr-processing-ssbF1").parent().hide()}if(a=="GM"){$("#add1spectrum-analyzer-nmr-processing-gbF1").parent().show()}else{$("#add1spectrum-analyzer-nmr-processing-gbF1").parent().hide()}});$("#add1spectrum-analyzer-nmr-processing-windowFunctionF2").on("change",function(){var a=$("#add1spectrum-analyzer-nmr-processing-windowFunctionF2").val();if(a=="SINE"||a=="QSINE"){$("#add1spectrum-analyzer-nmr-processing-ssbF2").parent().show()}else{$("#add1spectrum-analyzer-nmr-processing-ssbF2").parent().hide()}if(a=="GM"){$("#add1spectrum-analyzer-nmr-processing-gbF2").parent().show()}else{$("#add1spectrum-analyzer-nmr-processing-gbF2").parent().hide()}});$("#add1spectrum-ionTrapBeam-type").on("change",function(){var a=$("#add1spectrum-ionTrapBeam-type").val();$(".add1spectrum-ionTrap").hide();if(a=="beam"){}else{if(a=="trap"){$(".add1spectrum-ionTrap").show()}}});$("#add1spectrum-peaksMS-msLevel").on("change",function(){$(".disabled-if-ms-in-msms").attr("disabled",true);var a=$("#add1spectrum-peaksMS-msLevel").val();if(a=="ms2"||a=="ms3"){$(".disabled-if-ms-in-msms").attr("disabled",false)}})});var yellowRenderer=function(a,g,e,b,f,d,c){Handsontable.renderers.TextRenderer.apply(this,arguments);g.style.backgroundColor="yellow"};var lightgrayRenderer=function(a,g,e,b,f,d,c){Handsontable.renderers.TextRenderer.apply(this,arguments);g.style.backgroundColor="#EEE"};var container_LC_SFG,hot_LC_SFG;var container_MS_Peaks,hot_MS_Peaks;var container_NMR_H_Peaks,hot_NMR_H_Peaks;var container_NMR_Hsat_Peaks,hot_NMR_Hsat_Peaks;var container_NMR_C_Peaks,hot_NMR_C_Peaks;var container_NMR_C_Multi_Peaks,hot_NMR_C_Multi_Peaks;var container_NMR_Multi_Peaks,hot_NMR_Multi_Peaks;var container_NMR_2DHC_Peaks,hot_NMR_2DHC_Peaks;var container_NMR_2DHH_Peaks,hot_NMR_2DHH_Peaks;var container_NMR_JRES_Peaks,hot_NMR_JRES_Peaks;var container_RCC_ADDED,hot_RCC_ADDED;function handsontableSeparationFlowRate(b){$("#container_LC_SFG").html("");var a;if(b==null){a=[["","",""],["","",""],["","",""],["","",""],["","",""],["","",""],["","",""],["","",""],["","",""]]}else{a=b}container_LC_SFG=document.getElementById("container_LC_SFG");hot_LC_SFG=new Handsontable(container_LC_SFG,{data:a,minSpareRows:1,colHeaders:true,colHeaders:["time (min)","solv. A (%)","solv. B (%)"],contextMenu:false});function c(){Handsontable.Dom.addEvent(document.body,"click",function(i){var h=i.target||i.srcElement;if(h.nodeName=="BUTTON"&&h.name=="dump"){var g=h.getAttribute("data-dump");var d=h.getAttribute("data-instance");var f=window[d];console.log("data of "+g,f.getData())}})}c();$("#container_LC_SFG table.htCore").css("width","100%")}handsontableMSpeaks=function(b){$("#container_MS_Peaks").html("");var c=[["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""]];if(b!=null){c=b}container_MS_Peaks=document.getElementById("container_MS_Peaks");hot_MS_Peaks=new Handsontable(container_MS_Peaks,{data:c,minSpareRows:1,colHeaders:true,colHeaders:["m/z","absolute intensity","relative intensity (%)","theo. mass","delta (ppm)","RDB Equiv.","composition","attribution"],contextMenu:false,columns:[{type:"numeric",format:"0.0000"},{type:"numeric",format:"0.00"},{type:"numeric",format:"0.00"},{type:"numeric",format:"0.0000"},{type:"numeric",format:"0.0000"},{type:"numeric",format:"0.0"},{type:"text"},{type:"text"}]});function a(){Handsontable.Dom.addEvent(document.body,"click",function(i){var h=i.target||i.srcElement;if(h.nodeName=="BUTTON"&&h.name=="dump"){var g=h.getAttribute("data-dump");var d=h.getAttribute("data-instance");var f=window[d];console.log("data of "+g,f.getData())}})}a();$("#container_MS_Peaks table.htCore").css("width","100%")};function handsontableNmrProtPeaks(c){$("#container_NMR_H_Peaks").html("");var b=[["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""]];if(c!=null){b=c}container_NMR_H_Peaks=document.getElementById("container_NMR_H_Peaks");hot_NMR_H_Peaks=new Handsontable(container_NMR_H_Peaks,{data:b,minSpareRows:1,colHeaders:true,colHeaders:["peak index","region","index (F1)","ν (F1) [ppm]","ν (F1) [Hz]","intensity [abs]","intensity [rel]","half width [ppm]","half width [Hz]","annotation"],contextMenu:false,columns:[{data:"peak index",type:"text"},{data:"region",renderer:lightgrayRenderer},{data:"index (F1)",renderer:lightgrayRenderer},{data:"ν (F1) [ppm]",type:"text"},{data:"ν (F1) [Hz]",renderer:lightgrayRenderer},{data:"intensity [abs]",renderer:lightgrayRenderer},{data:"intensity [rel]",type:"text"},{data:"half width [ppm]",type:"text"},{data:"half width [Hz]",renderer:lightgrayRenderer},{data:"annotation",type:"text"}]});function a(){Handsontable.Dom.addEvent(document.body,"click",function(i){var g=i.target||i.srcElement;if(g.nodeName=="BUTTON"&&g.name=="dump"){var f=g.getAttribute("data-dump");var d=g.getAttribute("data-instance");var h=window[d];console.log("data of "+f,h.getData())}})}a();hot_NMR_H_Peaks.selectCell(0,0);$("#container_NMR_H_Peaks table.htCore").css("width","100%")}function handsontableNmrProtPeakSats(c){$("#container_NMR_Hsat_Peaks").html("");var a=[["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""]];if(c!=null){a=c}container_NMR_Hsat_Peaks=document.getElementById("container_NMR_Hsat_Peaks");hot_NMR_Hsat_Peaks=new Handsontable(container_NMR_Hsat_Peaks,{data:a,minSpareRows:1,colHeaders:true,colHeaders:["peak index","region","index (F1)","ν (F1) [ppm]","ν (F1) [Hz]","intensity [abs]","intensity [rel]","half width [ppm]","half width [Hz]","annotation"],contextMenu:false,columns:[{data:"peak index",type:"text"},{data:"region",renderer:lightgrayRenderer},{data:"index (F1)",renderer:lightgrayRenderer},{data:"ν (F1) [ppm]",type:"text"},{data:"ν (F1) [Hz]",renderer:lightgrayRenderer},{data:"intensity [abs]",renderer:lightgrayRenderer},{data:"intensity [rel]",type:"text"},{data:"half width [ppm]",type:"text"},{data:"half width [Hz]",renderer:lightgrayRenderer},{data:"annotation",type:"text"}]});function b(){Handsontable.Dom.addEvent(document.body,"click",function(i){var h=i.target||i.srcElement;if(h.nodeName=="BUTTON"&&h.name=="dump"){var g=h.getAttribute("data-dump");var f=h.getAttribute("data-instance");var d=window[f];console.log("data of "+g,d.getData())}})}b();hot_NMR_Hsat_Peaks.selectCell(0,0);$("#container_NMR_Hsat_Peaks table.htCore").css("width","100%")}function handsontableNmrCarbPeaks(c){$("#container_NMR_C_Peaks").html("");var b=[["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""]];if(c!=null){b=c}container_NMR_C_Peaks=document.getElementById("container_NMR_C_Peaks");hot_NMR_C_Peaks=new Handsontable(container_NMR_C_Peaks,{data:b,minSpareRows:1,colHeaders:true,colHeaders:["peak index","region","index (F1)","ν (F1) [ppm]","ν (F1) [Hz]","intensity [abs]","intensity [rel]","half width [ppm]","half width [Hz]","annotation"],contextMenu:false,columns:[{data:"peak index",type:"text"},{data:"region",renderer:lightgrayRenderer},{data:"index (F1)",renderer:lightgrayRenderer},{data:"ν (F1) [ppm]",type:"text"},{data:"ν (F1) [Hz]",renderer:lightgrayRenderer},{data:"intensity [abs]",renderer:lightgrayRenderer},{data:"intensity [rel]",type:"text"},{data:"half width [ppm]",type:"text"},{data:"half width [Hz]",renderer:lightgrayRenderer},{data:"annotation",type:"text"}]});function a(){Handsontable.Dom.addEvent(document.body,"click",function(i){var h=i.target||i.srcElement;if(h.nodeName=="BUTTON"&&h.name=="dump"){var g=h.getAttribute("data-dump");var d=h.getAttribute("data-instance");var f=window[d];console.log("data of "+g,f.getData())}})}a();hot_NMR_C_Peaks.selectCell(0,0);$("#container_NMR_C_Peaks table.htCore").css("width","100%")}function handsontableNmrMultiPeaks(b){$("#container_NMR_Multi_Peaks").html("");var c=[["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""]];if(b!=null){c=b}container_NMR_Multi_Peaks=document.getElementById("container_NMR_Multi_Peaks");hot_NMR_Multi_Peaks=new Handsontable(container_NMR_Multi_Peaks,{data:c,minSpareRows:1,colHeaders:true,colHeaders:["ν (F1) [ppm]","H's","type","J(Hz)","range (ppm)","atoms","MSI level"],contextMenu:false,columns:[{data:"ν (F1) [ppm]",type:"text"},{data:"H's",type:"text"},{data:"type",type:"text"},{data:"J(Hz)",type:"text"},{data:"range (ppm)",type:"text"},{data:"atoms",type:"text"},{data:"MSI level",renderer:lightgrayRenderer}]});function a(){Handsontable.Dom.addEvent(document.body,"click",function(i){var h=i.target||i.srcElement;if(h.nodeName=="BUTTON"&&h.name=="dump"){var g=h.getAttribute("data-dump");var d=h.getAttribute("data-instance");var f=window[d];console.log("data of "+g,f.getData())}})}a();hot_NMR_Multi_Peaks.selectCell(0,0);$("#container_NMR_Multi_Peaks table.htCore").css("width","100%")}function handsontableNmrCarbMultiPeaks(b){$("#container_NMR_C_Multi_Peaks").html("");var c=[["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""]];if(b!=null){c=b}container_NMR_C_Multi_Peaks=document.getElementById("container_NMR_C_Multi_Peaks");hot_NMR_C_Multi_Peaks=new Handsontable(container_NMR_C_Multi_Peaks,{data:c,minSpareRows:1,colHeaders:true,colHeaders:["ν (F1) [ppm]","C's","type","J(Hz)","range (ppm)","atoms","MSI level"],contextMenu:false,columns:[{data:"ν (F1) [ppm]",type:"text"},{data:"C's",type:"text"},{data:"type",type:"text"},{data:"J(Hz)",type:"text"},{data:"range (ppm)",type:"text"},{data:"atoms",type:"text"},{data:"MSI level",renderer:lightgrayRenderer}]});function a(){Handsontable.Dom.addEvent(document.body,"click",function(i){var h=i.target||i.srcElement;if(h.nodeName=="BUTTON"&&h.name=="dump"){var g=h.getAttribute("data-dump");var d=h.getAttribute("data-instance");var f=window[d];console.log("data of "+g,f.getData())}})}a();hot_NMR_C_Multi_Peaks.selectCell(0,0);$("#container_NMR_C_Multi_Peaks table.htCore").css("width","100%")}function handsontableNmr_2DHC_Peaks(c){$("#container_NMR_2DHC_Peaks").html("");var b=[["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""]];if(c!=null){b=c}container_NMR_2DHC_Peaks=document.getElementById("container_NMR_2DHC_Peaks");hot_NMR_2DHC_Peaks=new Handsontable(container_NMR_2DHC_Peaks,{data:b,minSpareRows:1,colHeaders:true,colHeaders:["peak index","ν (F2) (1H) [ppm]","ν (F1) (13C) [ppm]","intensity [rel]","annotation"],contextMenu:false,columns:[{data:"peak index",type:"text"},{data:"F2 (ppm)",type:"text"},{data:"F1 (ppm)",type:"text"},{data:"intensity (rel)",type:"text"},{data:"annotation",type:"text"}]});function a(){Handsontable.Dom.addEvent(document.body,"click",function(i){var g=i.target||i.srcElement;if(g.nodeName=="BUTTON"&&g.name=="dump"){var f=g.getAttribute("data-dump");var d=g.getAttribute("data-instance");var h=window[d];console.log("data of "+f,h.getData())}})}a();hot_NMR_2DHC_Peaks.selectCell(0,0);$("#container_NMR_2DHC_Peaks table.htCore").css("width","100%")}function handsontableNmr_2DHH_Peaks(b){$("#container_NMR_2DHH_Peaks").html("");var c=[["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""]];if(b!=null){c=b}container_NMR_2DHH_Peaks=document.getElementById("container_NMR_2DHH_Peaks");hot_NMR_2DHH_Peaks=new Handsontable(container_NMR_2DHH_Peaks,{data:c,minSpareRows:1,colHeaders:true,colHeaders:["peak index","ν (F2) [ppm]","ν (F1) [ppm]","intensity [rel]","annotation"],contextMenu:false,columns:[{data:"peak_index",type:"text"},{data:"F2_ppm",type:"text"},{data:"F1_ppm",type:"text"},{data:"intensity_ppm",type:"text"},{data:"annotation",type:"text"}]});function a(){Handsontable.Dom.addEvent(document.body,"click",function(i){var h=i.target||i.srcElement;if(h.nodeName=="BUTTON"&&h.name=="dump"){var g=h.getAttribute("data-dump");var f=h.getAttribute("data-instance");var d=window[f];console.log("data of "+g,d.getData())}})}a();hot_NMR_2DHH_Peaks.selectCell(0,0);$("#container_NMR_2DHH_Peaks table.htCore").css("width","100%")}function handsontableNmr_JRES_Peaks(b){$("#container_NMR_JRES_Peaks").html("");var c=[["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""]];if(b!=null){c=b}container_NMR_JRES_Peaks=document.getElementById("container_NMR_JRES_Peaks");hot_NMR_JRES_Peaks=new Handsontable(container_NMR_JRES_Peaks,{data:c,minSpareRows:1,colHeaders:true,colHeaders:["peak index","ν (F2) [ppm]","ν (F1) [ppm]","intensity [rel]","multiplicity","J (coupling constant)","annotation"],contextMenu:false,columns:[{data:"peak_index",type:"text"},{data:"F2_ppm",type:"text"},{data:"F1_ppm",type:"text"},{data:"intensity_rel",type:"text"},{data:"multiplicity",type:"text"},{data:"J",type:"text"},{data:"annotation",type:"text"}]});function a(){Handsontable.Dom.addEvent(document.body,"click",function(h){var g=h.target||h.srcElement;if(g.nodeName=="BUTTON"&&g.name=="dump"){var f=g.getAttribute("data-dump");var d=g.getAttribute("data-instance");var i=window[d];console.log("data of "+f,i.getData())}})}a();hot_NMR_JRES_Peaks.selectCell(0,0);$("#container_NMR_JRES_Peaks table.htCore").css("width","100%")}function handsontableRefChemCpdAdded(c){$("#container_RCC_ADDED").html("");$("#sample-bonus-display").html("");var b,d;if(c==null){if(isNMR){b=[["","","",""],["","","",""],["","","",""],["","","",""],["","","",""],["","","",""],["","","",""],["","","",""],["","","",""],["","","",""],["","","",""],["","","",""]];d=[{data:"common name",type:"text"},{data:"<b>InChIKey</b>",type:"text"},{data:"composition",renderer:lightgrayRenderer},{data:"<b>concentration (&micro;g/ml)</b>",type:"text"}]}else{b=[["","","","","",""],["","","","","",""],["","","","","",""],["","","","","",""],["","","","","",""],["","","","","",""],["","","","","",""],["","","","","",""],["","","","","",""],["","","","","",""],["","","","","",""],["","","","","",""]];d=[{data:"common name",type:"text"},{data:"<b>InChIKey</b>",type:"text"},{data:"composition",renderer:lightgrayRenderer},{data:"<b>concentration (&micro;g/ml)</b>",type:"text"},{data:"exact mass",renderer:lightgrayRenderer},{data:"(M+H)+ or (M-H)-",renderer:lightgrayRenderer}]}}else{container_RCC_ADDED=c;if(isNMR){d=[{data:"common name",type:"text"},{data:"<b>InChIKey</b>",type:"text"},{data:"composition",renderer:lightgrayRenderer},{data:"<b>concentration (&micro;g/ml)</b>",type:"text"}]}else{d=[{data:"common name",type:"text"},{data:"<b>InChIKey</b>",type:"text"},{data:"composition",renderer:lightgrayRenderer},{data:"<b>concentration (&micro;g/ml)</b>",type:"text"},{data:"exact mass",renderer:lightgrayRenderer},{data:"(M+H)+ or (M-H)-",renderer:lightgrayRenderer}]}}container_RCC_ADDED=document.getElementById("container_RCC_ADDED");hot_RCC_ADDED=new Handsontable(container_RCC_ADDED,{data:b,minSpareRows:1,colHeaders:true,colHeaders:["common name","<b>InChIKey</b>","composition","<b>concentration (&micro;g/ml)</b>","exact mass","(M+H)+ or (M-H)-"],contextMenu:false,columns:d});function a(){Handsontable.Dom.addEvent(document.body,"click",function(j){var i=j.target||j.srcElement;if(i.nodeName=="BUTTON"&&i.name=="dump"){var h=i.getAttribute("data-dump");var f=i.getAttribute("data-instance");var g=window[f];console.log("data of "+h,g.getData())}})}a();$("#container_RCC_ADDED table.htCore").css("width","100%");hot_RCC_ADDED.selectCell(0,0);hot_RCC_ADDED.addHook("afterSelection",hookSelection)}function hookSelection(a,b){if(b==0||b==1||b==2){pickChemicalCompound4Mix(a)}}function resetNMRpeaks(){$("#container_NMR_H_Peaks").html("");$("#container_NMR_Hsat_Peaks").html("");$("#container_NMR_C_Peaks").html("");$("#container_NMR_Multi_Peaks").html("");$("#container_NMR_C_Multi_Peaks").html("");$("#container_NMR_2DHC_Peaks").html("");$("#container_NMR_2DHH_Peaks").html("");$("#container_NMR_JRES_Peaks").html("")}var jsonSpectrumType=null;var isJsonSpectrumTypeComplete=false;var jsonSample=null;var isJsonSampleComplete=false;var isJsonRCCaddedComplete=false;var jsonChromato=null;var isJsonChromatoComplete=false;var jsonAnalyzer=null;var isJsonAnalyzerComplete=false;var jsonPeaksList=[];var isJsonPeaksListComplete=false;var jsonOtherMetadata=null;var isJsonOtherMetadataComplete=false;var jsonMolIonization=null;var jsonMolIonBeam=null;var cptPeakListTab=0;var jsonAnalyzerAcquisition=[];var idMetadataMap={};var listOfViewableSpectra=[];$("#add1spectrum-analyzserNMR-programm").focus(function(){this.selectionStart=this.selectionEnd=this.value.length});postOneSpectrumFrom=function(){$("#import1SpectrumLoadingBare").show();if(!$("#btnSwitch-gotoStep6").hasClass("btn-disabled")){$("#btnSwitch-gotoStep6").addClass("btn-disabled")}if($("#btnSwitch-gotoStep6").hasClass("btn-primary")){$("#btnSwitch-gotoStep6").removeClass("btn-primary")}$("#btnSwitch-gotoStep6").prop("disabled",true);if($("#step5sign").hasClass("fa-question-circle")){$("#step5sign").removeClass("fa-question-circle").addClass("fa-spinner fa-spin")}if($("#step5sign").hasClass("fa-check-circle")){$("#step5sign").removeClass("fa-check-circle").addClass("fa-spinner fa-spin")}loadFomDataIntoJsonObjects();var a=getFormErrorMessage();if(a!=""){$("#alertBoxSubmitSpectrum").html(a);$("#import1SpectrumLoadingBare").hide();return false}else{$(".add1spectrum-sampleForm").prop("disabled",true);$(".add1spectrum-chromatoLCForm").prop("disabled",true);if(!$("#container_LC_SFG").is(":empty")){hot_LC_SFG.updateSettings({cells:function(e,c,f){var d={};d.readOnly=true;return d}})}if(!$("#container_MS_Peaks").is(":empty")){hot_MS_Peaks.updateSettings({cells:function(e,c,f){var d={};d.readOnly=true;return d}})}if(!$("#container_NMR_H_Peaks").is(":empty")){hot_NMR_H_Peaks.updateSettings({cells:function(e,c,f){var d={};d.readOnly=true;return d}})}if(!$("#container_NMR_Hsat_Peaks").is(":empty")){hot_NMR_Hsat_Peaks.updateSettings({cells:function(e,c,f){var d={};d.readOnly=true;return d}})}if(!$("#container_NMR_C_Peaks").is(":empty")){hot_NMR_C_Peaks.updateSettings({cells:function(e,c,f){var d={};d.readOnly=true;return d}})}if(!$("#container_NMR_Multi_Peaks").is(":empty")){hot_NMR_Multi_Peaks.updateSettings({cells:function(e,c,f){var d={};d.readOnly=true;return d}})}if(!$("#container_NMR_C_Multi_Peaks").is(":empty")){hot_NMR_C_Multi_Peaks.updateSettings({cells:function(e,c,f){var d={};d.readOnly=true;return d}})}if(!$("#container_NMR_2DHC_Peaks").is(":empty")){hot_NMR_2DHC_Peaks.updateSettings({cells:function(e,c,f){var d={};d.readOnly=true;return d}})}if(!$("#container_NMR_2DHH_Peaks").is(":empty")){hot_NMR_2DHH_Peaks.updateSettings({cells:function(e,c,f){var d={};d.readOnly=true;return d}})}if(!$("#container_NMR_JRES_Peaks").is(":empty")){hot_NMR_JRES_Peaks.updateSettings({cells:function(e,c,f){var d={};d.readOnly=true;return d}})}if(!$("#container_RCC_ADDED").is(":empty")){hot_RCC_ADDED.updateSettings({cells:function(e,c,f){var d={};d.readOnly=true;return d}});hot_RCC_ADDED.removeHook("afterSelection",hookSelection)}$(".add1spectrum-analyzerMSForm").prop("disabled",true);$(".add1spectrum-analyzerNMRForm-lock").prop("disabled",true);$(".add1spectrum-analyzserNMR-programm-peaklist").prop("disabled",true);$(".add1spectrum-analyzserNMR-programm-processing").prop("disabled",true);$(".add1spectrum-otherForm").prop("disabled",true);$("#btnSwitch-gotoStep2").prop("disabled",true);$("#btnSwitch-gotoStep3-lc").prop("disabled",true);$("#btnSwitch-gotoStep4-ms").prop("disabled",true);$("#btnSwitch-gotoStep4-nmr").prop("disabled",true);$("#btnSwitch-gotoStep5-nmr").prop("disabled",true)}var b=gatherJsonObjects();b.metadata_map=idMetadataMap;$.ajax({type:"post",url:"addOneSpectrum",data:JSON.stringify(b),contentType:"application/json",success:function(d){if(d.success){idMetadataMap=d.idMetadataMap;if(d["spectra-nmr-fail"].length===0&&d["spectra-lcms-fail"].length===0){if(isNMR){$("#btnSwitch-returntoStep3").attr("onclick","switchToStep(3)");$("#add1spectrum-analyzserNMR-programm").focus();if($("#add1spectrum-analyzserNMR-programm").parent().hasClass("has-success")){$("#add1spectrum-analyzserNMR-programm").parent().removeClass("has-success")}if($("#add1spectrum-analyzserNMR-programm").parent().hasClass("has-warning")){$("#add1spectrum-analyzserNMR-programm").parent().removeClass("has-warning")}if(!$("#add1spectrum-analyzserNMR-programm").parent().hasClass("has-error")){$("#add1spectrum-analyzserNMR-programm").parent().addClass("has-error")}if(d["spectra-nmr-success"].length===1){listOfViewableSpectra.push(d["spectra-nmr-success"][0])}}else{if(isMS||isMSMS){$("#btnSwitch-returntoStep3").attr("onclick","switchToStep(4)");isMSpeaksInit=false;if(d["spectra-lcms-success"].length===1){listOfViewableSpectra.push(d["spectra-lcms-success"][0])}if(d["spectra-lc-msms-success"].length===1){listOfViewableSpectra.push(d["spectra-lc-msms-success"][0]);var f=(d["spectra-lc-msms-parents-names"][0]);$("#add1spectrum-peaksMS-msPrecursor").append('<option value="'+(d["spectra-lc-msms-success"][0])+'">'+f+"</option>")}}}var c="";$.each(listOfViewableSpectra,function(h,g){if(c!=""){c+="-"}c+=""+g});$("#btnSwitch-view").attr("href","show-spectra-modal/"+c);$("#import1SpectrumResults").show()}else{var e='<div class="alert alert-danger alert-dismissible" role="alert">';e+='<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only"><spring:message code="alert.close" text="Close" /></span></button>';e+='<strong><spring:message code="alert.strong.error" text="Error!" /></strong> unable to add spectrum!';e+=" </div>";$("#alertBoxSubmitSpectrum").html(e)}}else{var e='<div class="alert alert-danger alert-dismissible" role="alert">';e+='<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only"><spring:message code="alert.close" text="Close" /></span></button>';e+='<strong><spring:message code="alert.strong.error" text="Error!" /></strong> unable to add spectrum!';e+=" </div>";$("#alertBoxSubmitSpectrum").html(e)}},error:function(c){var d='<div class="alert alert-danger alert-dismissible" role="alert">';d+='<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only"><spring:message code="alert.close" text="Close" /></span></button>';d+='<strong><spring:message code="alert.strong.error" text="Error!" /></strong> unable to add spectrum!';d+=" </div>";$("#alertBoxSubmitSpectrum").html(d)}}).always(function(){if($("#step5sign").hasClass("fa-question-circle")){$("#step5sign").removeClass("fa-question-circle").addClass("fa-check-circle")}if($("#step5sign").hasClass("fa-spinner")){$("#step5sign").removeClass("fa-spinner fa-spin").addClass("fa-check-circle")}$("#import1SpectrumLoadingBare").hide()});return true};loadFomDataIntoJsonObjects=function(){isJsonSpectrumTypeComplete=false;if(isGC&&isMS){jsonSpectrumType="gc-ms"}else{if(isLC&&isMS){jsonSpectrumType="lc-ms"}else{if(isLC&&isMSMS){jsonSpectrumType="lc-msms"}else{if(isNMR){jsonSpectrumType="nmr"}else{if(isGC&&isMS){jsonSpectrumType="ic-ms"}else{if(isLC&&isMS){jsonSpectrumType="ic-msms"}}}}}}if(jsonSpectrumType!=null&&jsonSpectrumType!=""){isJsonSpectrumTypeComplete=true}isJsonSampleComplete=true;isJsonRCCaddedComplete=true;jsonSample={};if(isNMR){$.each($(".add1spectrum-sampleForm-nmr").parent(),function(){if($(this).hasClass("has-error")){isJsonSampleComplete=false}});if(!isJsonSampleComplete){return false}jsonSample.nmr_tube_prep={};jsonSample.nmr_tube_prep.solvent=$("#add1spectrum-sample-nmrSolvent").val();jsonSample.nmr_tube_prep.pH=$("#add1spectrum-sample-nmrpH").val();jsonSample.nmr_tube_prep.referenceChemicalShifIndicatort=$("#add1spectrum-sample-nmrReferenceChemicalShifIndicatort").val();jsonSample.nmr_tube_prep.referenceChemicalShifIndicatortOther=$("#add1spectrum-sample-nmrReferenceChemicalShifIndicatortOther").val();jsonSample.nmr_tube_prep.referenceConcentration=$("#add1spectrum-sample-nmrReferenceConcentration").val();jsonSample.nmr_tube_prep.lockSubstance=$("#add1spectrum-sample-nmrLockSubstance").val();jsonSample.nmr_tube_prep.lockSubstanceConcentration=$("#add1spectrum-sample-nmrLockSubstanceConcentration").val();jsonSample.nmr_tube_prep.bufferSolution=$("#add1spectrum-sample-nmrBufferSolution").val();jsonSample.nmr_tube_prep.bufferSolutionConcentration=$("#add1spectrum-sample-nmrBufferSolutionConcentration").val();jsonSample.nmr_tube_prep.nmrIsotopicLabellingD=$("#add1spectrum-sample-nmrIsotopicLabellingD").val();jsonSample.nmr_tube_prep.nmrIsotopicLabelling13C=$("#add1spectrum-sample-nmrIsotopicLabelling13C").val();jsonSample.nmr_tube_prep.nmrIsotopicLabelling15N=$("#add1spectrum-sample-nmrIsotopicLabelling15N").val()}switch($("#add1spectrum-sample-type").val()){case"compound-ref":if($("#add1spectrum-sample-inchikey").val()==""){return false}jsonSample.sample_type="reference-chemical-compound";jsonSample.compound_inchikey=$("#add1spectrum-sample-inchikey").val();jsonSample.compound_concentration=$("#add1spectrum-sample-concentration").val();if(isMS){jsonSample.compound_ms_solvent=$("#add1spectrum-sample-lcmsSolvent").val()}jsonSample.compound_inchi=$("#add1spectrum-sample-inchi").val();jsonSample.compound_common_name=$("#add1spectrum-sample-commonName").val();isJsonSampleComplete=true;break;case"compound-mix":jsonSample.sample_type="mix-chemical-compound";jsonSample.compounds_solvent=$("#add1spectrum-sample-mixSolvent").val();jsonSample.rcc_added=getRCCADDED();if(jsonSample.rcc_added.length==0){isJsonRCCaddedComplete=false;return false}isJsonSampleComplete=true;break;case"matrix-ref":jsonSample.sample_type="standardized-matrix";jsonSample["std-matrix-id"]=$("#add1spectrum-sample-stdMatrix").val();jsonSample["std-matrix-txt"]=$("#add1spectrum-sample-stdMatrix option:selected").text();jsonSample.rcc_added=getRCCADDED();isJsonSampleComplete=true;break;case"matrix-bio":jsonSample.sample_type="analytical-matrix";jsonSample["analytical-matrix-id"]=$("#add1spectrum-sample-bioMatrix").val();jsonSample["analytical-matrix-txt"]=$("#add1spectrum-sample-bioMatrix option:selected").text();jsonSample["analytical-matrix-filter"]="allPF";break;default:return false}isJsonChromatoComplete=true;jsonChromato={};if(isGC){isJsonChromatoComplete=false}if(isLC){isJsonChromatoComplete=true;jsonChromato={};jsonChromato.lc_chromatography={};$.each($(".add1spectrum-chromatoLCForm").parent(),function(){if($(this).hasClass("has-error")){isJsonChromatoComplete=false}});if(!isJsonChromatoComplete){return false}jsonChromato.method=$("#add1spectrum-chromatoLC-method option:selected").text();jsonChromato.column_constructor=$("#add1spectrum-chromatoLC-colConstructor").val();jsonChromato.column_constructor_other=$("#add1spectrum-chromatoLC-colConstructorOther").val();jsonChromato.column_name=$("#add1spectrum-chromatoLC-colName").val();jsonChromato.column_length=$("#add1spectrum-chromatoLC-colLength").val();jsonChromato.column_diameter=$("#add1spectrum-chromatoLC-colDiameter").val();jsonChromato.particule_size=$("#add1spectrum-chromatoLC-colParticuleSize").val();jsonChromato.column_temperature=$("#add1spectrum-chromatoLC-colTemperature").val();jsonChromato.LC_mode=$("#add1spectrum-chromatoLC-LCMode").val();jsonChromato.separation_flow_rate=$("#add1spectrum-chromatoLC-separationFlowRate").val();jsonChromato.separation_solvent_a=$("#add1spectrum-chromatoLC-separationSolvA").val();jsonChromato.ph_solvent_a=$("#add1spectrum-chromatoLC-separationSolvApH").val();jsonChromato.separation_solvent_b=$("#add1spectrum-chromatoLC-separationSolvB").val();jsonChromato.ph_solvent_b=$("#add1spectrum-chromatoLC-separationSolvBApH").val();jsonSFG=[];$.each(hot_LC_SFG.getData(),function(){var o={};if(this[0]!=""){if(!isNaN(this[0])&&!isNaN(this[1])&&!isNaN(this[2])){o.time=Number(this[0]);o.solvA=Number(this[1]);o.solvB=Number(this[2]);jsonSFG.push(o)}}});jsonChromato.separation_flow_gradient=jsonSFG}if(isIC){isJsonChromatoComplete=false}isJsonAnalyzerComplete=true;isJsonAnalyzer={};if(isMS||isMSMS){isJsonAnalyzerComplete=true;jsonAnalyzer={};$.each($(".add1spectrum-analyzerMSForm").parent(),function(){if($(this).hasClass("has-error")){isJsonAnalyzerComplete=false}});if(!isJsonAnalyzerComplete){return false}jsonAnalyzer.instrument=$("#add1spectrum-analyzer-ms-instrument").val();jsonAnalyzer.model=$("#add1spectrum-analyzer-ms-model").val();jsonAnalyzer.ion_analyzer_type=$("#add1spectrum-analyzer-ms-ionAnalyzerType").val();if(isMSMS){jsonMolIonBeam={};var d={};if($("#add1spectrum-ionTrapBeam-type").val()=="trap"){d.ion_gas=$("#add1spectrum-ionTrapBeam-ionGas").val();d.ion_pressure_value=$("#add1spectrum-ionTrapBeam-ionGasPressureValue").val();d.ion_pressure_unit=$("#add1spectrum-ionTrapBeam-ionGasPressureUnit").val();d.ion_freq_shift=$("#add1spectrum-ionTrapBeam-ionFrequencyShift").val();d.ion_number=$("#add1spectrum-ionTrapBeam-ionNumber").val();jsonMolIonBeam.ion_trap=d}else{if($("#add1spectrum-ionTrapBeam-type").val()=="beam"){d.ion_gas=$("#add1spectrum-ionTrapBeam-ionGas").val();d.ion_pressure_value=$("#add1spectrum-ionTrapBeam-ionGasPressureValue").val();d.ion_pressure_unit=$("#add1spectrum-ionTrapBeam-ionGasPressureUnit").val();jsonMolIonBeam.ion_beam=d}}}jsonMolIonization={};var c={};var l={};c.ionisation_method=$("#add1spectrum-analyzserMS-ionizationMethod-pos").val();c.spray_gaz_flow=$("#add1spectrum-analyzserMS-sprayGazFlow-pos").val();c.vaporizer_gaz_flow=$("#add1spectrum-analyzserMS-vaporizerGazFlow-pos").val();c.vaporizer_temperature=$("#add1spectrum-analyzserMS-vaporizerTemperature-pos").val();c.source_gaz_flow=$("#add1spectrum-analyzserMS-sourceGazFlow-pos").val();c.tube_temperature=$("#add1spectrum-analyzserMS-ionTransferTubeTemperatureOrTransferCapillaryTemperature-pos").val();c.voltage=$("#add1spectrum-analyzserMS-highVoltageOrCoronaVoltage-pos").val();l.ionisation_method=$("#add1spectrum-analyzserMS-ionizationMethod-neg").val();l.spray_gaz_flow=$("#add1spectrum-analyzserMS-sprayGazFlow-neg").val();l.vaporizer_gaz_flow=$("#add1spectrum-analyzserMS-vaporizerGazFlow-neg").val();l.vaporizer_temperature=$("#add1spectrum-analyzserMS-vaporizerTemperature-neg").val();l.source_gaz_flow=$("#add1spectrum-analyzserMS-sourceGazFlow-neg").val();l.tube_temperature=$("#add1spectrum-analyzserMS-ionTransferTubeTemperatureOrTransferCapillaryTemperature-neg").val();l.voltage=$("#add1spectrum-analyzserMS-highVoltageOrCoronaVoltage-neg").val();jsonMolIonization.mode_pos=c;jsonMolIonization.mode_neg=l}var g=false;var i=false;var f=false;var m=false;var n=false;if(isNMR){isJsonAnalyzerComplete=true;jsonAnalyzer={};$.each($(".add1spectrum-analyzerNMRForm-lock").parent(),function(){if($(this).hasClass("has-error")){isJsonAnalyzerComplete=false}});if(!isJsonAnalyzerComplete){return false}jsonAnalyzer.instrument_name=$("#add1spectrum-analyzer-nmr-instrument-name").val();jsonAnalyzer.magnetic_field_strength=($("#add1spectrum-analyzer-nmr-instrument-magneticFieldStrength").val());jsonAnalyzer.software_version=$("#add1spectrum-analyzer-nmr-instrument-software").val();jsonAnalyzer.nmr_probe=$("#add1spectrum-analyzer-nmr-instrument-probe").val();if($("#add1spectrum-analyzer-nmr-instrument-cellOrTube").val()=="cell"){jsonAnalyzer.is_cell=true}else{jsonAnalyzer.is_cell=false}jsonAnalyzer.flow_cell_volume=$("#add1spectrum-analyzer-nmr-instrument-flowCellVolume").val();jsonAnalyzer.nmr_tube_diameter=$("#add1spectrum-analyzer-nmr-instrument-tube").val();jsonAnalyzerAcquisition[cptPeakListTab]={};var b={};switch($("#add1spectrum-analyzserNMR-programm").val()){case"proton":case"proton-1d":case"noesy-1d":case"cpmg-1d":g=true;break;case"carbon13-1d":i=true;break;case"JRES-2d":f=true;break;case"HSQC-2d":case"HMBC-2d":n=true;break;case"COSY-2d":case"TOCSY-2d":case"NOESY-2d":m=true;break;default:break}b.programm=$("#add1spectrum-analyzserNMR-programm").val();b.PULPROG=$("#add1spectrum-analyzserNMR-programm-PULPROG").val();b.TE=$("#add1spectrum-analyzserNMR-programm-TE").val();b.DS=$("#add1spectrum-analyzserNMR-programm-DS").val();if(g||i){b.F1=$("#add1spectrum-analyzserNMR-programm-F1").val();b.TD=$("#add1spectrum-analyzserNMR-programm-TD").val();b.NS=$("#add1spectrum-analyzserNMR-programm-NS").val();b.SW=$("#add1spectrum-analyzserNMR-programm-SW").val();b.D8=$("#add1spectrum-analyzserNMR-programm-D8").val();b.sed=$("#add1spectrum-analyzserNMR-programm-spinEchoDelay").val();b.nol=$("#add1spectrum-analyzserNMR-programm-numberOfLoops").val();b.dt=$("#add1spectrum-analyzserNMR-programm-decouplingType").val();b["processing-fourier-transform"]=$("#add1spectrum-analyzer-nmr-processing-fourierTransfo").val();b["processing-si"]=$("#add1spectrum-analyzer-nmr-processing-si").val();b["processing-line-broadening"]=$("#add1spectrum-analyzer-nmr-processing-lineBroadening").val()}else{if(m||n||f){b.F1=$("#add1spectrum-analyzserNMR-programm-F1").val();b.TD1=$("#add1spectrum-analyzserNMR-programm-TD1").val();b.TD2=$("#add1spectrum-analyzserNMR-programm-TD2").val();b.NS=$("#add1spectrum-analyzserNMR-programm-NSf2").val();b.AQ=$("#add1spectrum-analyzserNMR-programm-aq2d").val();if($("#add1spectrum-analyzserNMR-programm-aq2df1").val()!=""){b.AQ=$("#add1spectrum-analyzserNMR-programm-aq2df1").val()}b.D8=$("#add1spectrum-analyzserNMR-programm-D8-noesy2d").val();if($("#add1spectrum-analyzserNMR-programm-D8").val()!=""){b.D8=$("#add1spectrum-analyzserNMR-programm-D8").val()}b.SWF1=$("#add1spectrum-analyzserNMR-programm-SWf1").val();b.SWF2=$("#add1spectrum-analyzserNMR-programm-SWf2").val();if($("#add1spectrum-analyzserNMR-programm-SW1h").val()!=""){b.SWF1=$("#add1spectrum-analyzserNMR-programm-SW1h").val()}if($("#add1spectrum-analyzserNMR-programm-SWc").val()!=""){b.SWF2=$("#add1spectrum-analyzserNMR-programm-SWc").val()}b.DECOUP=$("#add1spectrum-analyzserNMR-programm-decouplageType").val();b.JXH=$("#add1spectrum-analyzserNMR-programm-JXH").val();if($("#add1spectrum-analyzserNMR-programm-JXH-lr").val()!=""){b.JXH=$("#add1spectrum-analyzserNMR-programm-JXH-lr").val()}b.NUS=$("#add1spectrum-analyzserNMR-programm-nus").val();b.NUSA=$("#add1spectrum-analyzserNMR-programm-nus-amount").val();b.NUSP=$("#add1spectrum-analyzserNMR-programm-nus-points").val();b["processing-fourier-transform"]=$("#add1spectrum-analyzer-nmr-processing-fourierTransfo-2d").val();b["processing-tilt"]=$("#add1spectrum-analyzer-nmr-processing-tilt").val();b["processing-si-f1"]=$("#add1spectrum-analyzer-nmr-processing-SIf1").val();b["processing-si-f2"]=$("#add1spectrum-analyzer-nmr-processing-SIf2").val();b["processing-winfn-f1"]=$("#add1spectrum-analyzer-nmr-processing-windowFunctionF1").val();b["processing-winfn-f2"]=$("#add1spectrum-analyzer-nmr-processing-windowFunctionF2").val();b["processing-line-broadening-f1"]=$("#add1spectrum-analyzer-nmr-processing-lineBroadeningF1").val();b["processing-line-broadening-f2"]=$("#add1spectrum-analyzer-nmr-processing-lineBroadeningF2").val();b["processing-ssb-f1"]=$("#add1spectrum-analyzer-nmr-processing-ssbF1").val();b["processing-ssb-f2"]=$("#add1spectrum-analyzer-nmr-processing-ssbF2").val();b["processing-gb-f1"]=$("#add1spectrum-analyzer-nmr-processing-gbF1").val();b["processing-gb-f2"]=$("#add1spectrum-analyzer-nmr-processing-gbF2").val();b["processing-peakPicking"]=$("#add1spectrum-analyzer-nmr-processing-peakPicking").val();b["processing-symmetrize"]=$("#add1spectrum-analyzer-nmr-processing-symmetrize").val();b["processing-nusParameter"]=$("#add1spectrum-analyzer-nmr-processing-nusProcessingParameter").val()}}jsonAnalyzerAcquisition[cptPeakListTab]=b;jsonAnalyzer.acquisition=jsonAnalyzerAcquisition}isJsonPeaksListComplete=false;if(isMS||isMSMS){var h=[];var e={};var a={};$.each(hot_MS_Peaks.getData(),function(){var o={};if(this[0]!=""){if(!isNaN(this[0])&&!isNaN(this[2])){o.mz=Number(this[0]);o.RI=Number(this[2]);o.theoMass=Number(this[3]);o.deltaPPM=Number(this[4]);o.rdbEquiv=Number(this[5]);o.composition=(this[6]);o.attribution=(this[7]);h.push(o);isJsonPeaksListComplete=true}}});e.ms_lvl=$("#add1spectrum-peaksMS-msLevel").val();e.polarity=$("#add1spectrum-peaksMS-polarity").val();e.resolution=$("#add1spectrum-peaksMS-resolution").val();e.curation=$("#add1spectrum-peaksMS-curation").val();e.mz_range_from=$("#add1spectrum-peaksMS-rangeFrom").val();e.mz_range_to=$("#add1spectrum-peaksMS-rangeTo").val();e.rt_abs_from=$("#add1spectrum-peaksMS-rtMinFrom").val();e.rt_abs_to=$("#add1spectrum-peaksMS-rtMinTo").val();e.rt_solv_from=$("#add1spectrum-peaksMS-rtSolvFrom").val();e.rt_solv_to=$("#add1spectrum-peaksMS-rtSolvTo").val();e.resolution_FWHM=$("#add1spectrum-analyzer-ms-resolutionFWHM").val();if(isMSMS){e.msms_ms_precursor=$("#add1spectrum-peaksMS-msPrecursor").val();e.msms_ms_precursor_ion=$("#add1spectrum-peaksMS-msPrecursorIon").val();e.msms_ms_isolation_mode=$("#add1spectrum-peaksMS-isolationMode").val();e.msms_ms_isolation_window=$("#add1spectrum-peaksMS-isolationWindow").val();e.msms_ms_qz_isolation=$("#add1spectrum-peaksMS-qzIsolation").val();e.msms_ms_activation_time=$("#add1spectrum-peaksMS-activationTime").val();e.msms_ms_mode=$("#add1spectrum-peaksMS-mode").val();e.msms_ms_frag_nrj=$("#add1spectrum-peaksMS-frag-nrj").val()}a.peakdata=e;a.peaklist=h;jsonPeaksList[cptPeakListTab]=a}if(isNMR){if(g){currentNMRpeakListMapper={};var h=[];$.each(hot_NMR_H_Peaks.getData(),function(){var o={};if(this["ν (F1) [ppm]"]!=""){if(!isNaN(this["ν (F1) [ppm]"])&&!isNaN(this["intensity [rel]"])){if(typeof this["peak index"]!=="undefined"){o.peak_index=Number(this["peak index"])+""}if(typeof this["region"]!=="undefined"){o.region=Number(this["region"])+""}if(typeof this["index (F1)"]!=="undefined"){o.index_F1=Number(this["index (F1)"])+""}if(typeof this["ν (F1) [ppm]"]!=="undefined"){o.f1=Number(this["ν (F1) [ppm]"])+""}if(typeof this["intensity [rel]"]!=="undefined"){o.intensity=Number(this["intensity [rel]"])+""}if(typeof this["half width [ppm]"]!=="undefined"){o.half_width=Number(this["half width [ppm]"])+""}if(typeof this["half width [Hz]"]!=="undefined"){o.half_width_hz=Number(this["half width [Hz]"])+""}if(typeof this["annotation"]!=="undefined"){o.annotation=(this["annotation"])+""}o.type="1";h.push(o);isJsonPeaksListComplete=true}}});currentNMRpeakListMapper.peaklist=h;var j=[];$.each(hot_NMR_Hsat_Peaks.getData(),function(){var o={};if(this["ν (F1) [ppm]"]!=""){if(!isNaN(this["ν (F1) [ppm]"])&&!isNaN(this["intensity [rel]"])){if(typeof this["peak index"]!=="undefined"){o.peak_index=Number(this["peak index"])+""}if(typeof this["region"]!=="undefined"){o.region=Number(this["region"])+""}if(typeof this["index (F1)"]!=="undefined"){o.index_F1=Number(this["index (F1)"])+""}if(typeof this["ν (F1) [ppm]"]!=="undefined"){o.f1=Number(this["ν (F1) [ppm]"])+""}if(typeof this["intensity [rel]"]!=="undefined"){o.intensity=Number(this["intensity [rel]"])+""}if(typeof this["half width [ppm]"]!=="undefined"){o.half_width=Number(this["half width [ppm]"])+""}if(typeof this["half width [Hz]"]!=="undefined"){o.half_width_hz=Number(this["half width [Hz]"])+""}if(typeof this["annotation"]!=="undefined"){o.annotation=(this["annotation"])+""}o.type="1";j.push(o)}}});if(j.length>0){currentNMRpeakListMapper.peaklist=j}var k=[];$.each(hot_NMR_Multi_Peaks.getData(),function(){var o={};if(this["ν (F1) [ppm]"]!=""){if(!isNaN(this["ν (F1) [ppm]"])){if(typeof this["ν (F1) [ppm]"]!=="undefined"){o.chemicalShift=Number(this["ν (F1) [ppm]"])+""}if(typeof this["H's"]!=="undefined"){o.H_or_C=(this["H's"])+""}if(typeof this["type"]!=="undefined"){o.type=(this["type"])+""}if(typeof this["J(Hz)"]!=="undefined"){o.J=(this["J(Hz)"])+""}if(typeof this["range (ppm)"]!=="undefined"){o.range=(this["range (ppm)"])+""}if(typeof this["atoms"]!=="undefined"){o.atoms=(this["atoms"])+""}if(typeof this["MSI level"]!=="undefined"){o.msi=(this["MSI level"])+""}k.push(o)}}});currentNMRpeakListMapper.patternlist=k;jsonPeaksList[cptPeakListTab]=currentNMRpeakListMapper}else{if(i){currentNMRpeakListMapper={};var h=[];$.each(hot_NMR_C_Peaks.getData(),function(){var o={};if(this["ν (F1) [ppm]"]!=""){if(!isNaN(this["ν (F1) [ppm]"])&&!isNaN(this["intensity [rel]"])){if(typeof this["peak index"]!=="undefined"){o.peak_index=Number(this["peak index"])+""}if(typeof this["region"]!=="undefined"){o.region=Number(this["region"])+""}if(typeof this["index (F1)"]!=="undefined"){o.index_F1=Number(this["index (F1)"])+""}if(typeof this["ν (F1) [ppm]"]!=="undefined"){o.f1=Number(this["ν (F1) [ppm]"])+""}if(typeof this["intensity [rel]"]!=="undefined"){o.intensity=Number(this["intensity [rel]"])+""}if(typeof this["half width [ppm]"]!=="undefined"){o.half_width=Number(this["half width [ppm]"])+""}if(typeof this["half width [Hz]"]!=="undefined"){o.half_width_hz=Number(this["half width [Hz]"])+""}if(typeof this["annotation"]!=="undefined"){o.annotation=(this["annotation"])+""}o.type="1";h.push(o);isJsonPeaksListComplete=true}}});currentNMRpeakListMapper.peaklist=h;var k=[];$.each(hot_NMR_C_Multi_Peaks.getData(),function(){var o={};if(this["ν (F1) [ppm]"]!=""){if(!isNaN(this["ν (F1) [ppm]"])){if(typeof this["ν (F1) [ppm]"]!=="undefined"){o.chemicalShift=Number(this["ν (F1) [ppm]"])+""}if(typeof this["C's"]!=="undefined"){o.H_or_C=(this["C's"])+""}if(typeof this["type"]!=="undefined"){o.type=(this["type"])+""}if(typeof this["J(Hz)"]!=="undefined"){o.J=(this["J(Hz)"])+""}if(typeof this["range (ppm)"]!=="undefined"){o.range=(this["range (ppm)"])+""}if(typeof this["atoms"]!=="undefined"){o.atoms=(this["atoms"])+""}if(typeof this["MSI level"]!=="undefined"){o.msi=(this["MSI level"])+""}k.push(o)}}});currentNMRpeakListMapper.patternlist=k;jsonPeaksList[cptPeakListTab]=currentNMRpeakListMapper}else{if(f){currentNMRpeakListMapper={};var h=[];$.each(hot_NMR_JRES_Peaks.getData(),function(){var o={};if(this["F2_ppm"]!=""){if(!isNaN(this["F1_ppm"])&&!isNaN(this["F2_ppm"])){if(typeof this["peak_index"]!=="undefined"){o.peak_index=Number(this["peak_index"])+""}if(typeof this["F2_ppm"]!=="undefined"){o.f2=Number(this["F2_ppm"])+""}if(typeof this["F1_ppm"]!=="undefined"){o.f1=Number(this["F1_ppm"])+""}if(typeof this["intensity_rel"]!=="undefined"){o.intensity_rel=Number(this["intensity_rel"])+""}if(typeof this["multiplicity"]!=="undefined"){o.multiplicity=(this["multiplicity"])+""}if(typeof this["J"]!=="undefined"){o.J=(this["J"])+""}if(typeof this["annotation"]!=="undefined"){o.annotation=(this["annotation"])+""}h.push(o);isJsonPeaksListComplete=true}}});currentNMRpeakListMapper["peaklist-jres"]=h;jsonPeaksList[cptPeakListTab]=currentNMRpeakListMapper}else{if(m){currentNMRpeakListMapper={};var h=[];$.each(hot_NMR_2DHH_Peaks.getData(),function(){var o={};if(this["F1_ppm"]!=""){if(!isNaN(this["F1_ppm"])&&!isNaN(this["F2_ppm"])){if(typeof this["peak_index"]!=="undefined"){o.peak_index=Number(this["peak index"])+""}if(typeof this["F1_ppm"]!=="undefined"){o.f1=Number(this["F1_ppm"])+""}if(typeof this["F2_ppm"]!=="undefined"){o.f2=Number(this["F2_ppm"])+""}if(typeof this["annotation"]!=="undefined"){o.annotation=(this["annotation"])+""}if(typeof this["intensity_rel"]!=="undefined"){o.intensity=Number(this["intensity_rel"])+""}if(typeof this["multiplicity"]!=="undefined"){o.multiplicity=(this["multiplicity"])+""}if(typeof this["J"]!=="undefined"){o.J=(this["J"])+""}h.push(o);isJsonPeaksListComplete=true}}});currentNMRpeakListMapper["peaklist-2d"]=h;jsonPeaksList[cptPeakListTab]=currentNMRpeakListMapper}else{if(n){currentNMRpeakListMapper={};var h=[];$.each(hot_NMR_2DHC_Peaks.getData(),function(){var o={};if(this["F1 (ppm)"]!=""){if(!isNaN(this["F1 (ppm)"])&&!isNaN(this["F2 (ppm)"])){if(typeof this["peak index"]!=="undefined"){o.peak_index=Number(this["peak index"])+""}if(typeof this["F1 (ppm)"]!=="undefined"){o.f1=Number(this["F1 (ppm)"])+""}if(typeof this["F2 (ppm)"]!=="undefined"){o.f2=Number(this["F2 (ppm)"])+""}if(typeof this["annotation"]!=="undefined"){o.annotation=(this["annotation"])+""}if(typeof this["intensity (rel)"]!=="undefined"){o.intensity=Number(this["intensity (rel)"])+""}h.push(o);isJsonPeaksListComplete=true}}});currentNMRpeakListMapper["peaklist-2d"]=h;jsonPeaksList[cptPeakListTab]=currentNMRpeakListMapper}}}}}}isJsonOtherMetadataComplete=true;jsonOtherMetadata={};$.each($(".add1spectrum-otherForm").parent(),function(){if($(this).hasClass("has-error")){isJsonOtherMetadataComplete=false}});if(!isJsonOtherMetadataComplete){return false}jsonOtherMetadata.data_authors=$("#add1spectrum-other-author").val();jsonOtherMetadata.data_validator=$("#add1spectrum-other-validator").val();jsonOtherMetadata.acquisition_date=$("#add1spectrum-other-date").val();jsonOtherMetadata.data_ownership=$("#add1spectrum-other-owner").val();jsonOtherMetadata.raw_file_name=$("#add1spectrum-other-fileName").val();jsonOtherMetadata.raw_file_size=$("#add1spectrum-other-fileSize").val();return true};function getFormErrorMessage(){var a="";if(!isJsonSpectrumTypeComplete){a='<div class="alert alert-danger alert-dismissible" role="alert">';a+='<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only"><spring:message code="alert.close" text="Close" /></span></button>';a+='<strong><spring:message code="alert.strong.error" text="Error!" /></strong> Error processing spectrum type!';a+=" </div>"}else{if(!isJsonSampleComplete){a='<div class="alert alert-danger alert-dismissible" role="alert">';a+='<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only"><spring:message code="alert.close" text="Close" /></span></button>';a+='<strong><spring:message code="alert.strong.error" text="Error!" /></strong> Missing mandatory data into sample section!';a+=" <br /> <a href=\"#\" onclick=\"$('#linkActivateStep1').trigger('click');\" >Go to this section</a>";a+=" </div>"}else{if(!isJsonRCCaddedComplete){a='<div class="alert alert-danger alert-dismissible" role="alert">';a+='<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only"><spring:message code="alert.close" text="Close" /></span></button>';a+='<strong><spring:message code="alert.strong.error" text="Error!" /></strong> Pease enter at least ONE compound in mix into sample section!';a+=" <br /> <a href=\"#\" onclick=\"$('#linkActivateStep1').trigger('click');\" >Go to this section</a>";a+=" </div>"}else{if(!isJsonPeaksListComplete){a='<div class="alert alert-danger alert-dismissible" role="alert">';a+='<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only"><spring:message code="alert.close" text="Close" /></span></button>';a+='<strong><spring:message code="alert.strong.error" text="Error!" /></strong> Missing peaklist!';if(isMS){a+=" <br /> <a href=\"#\" onclick=\"$('#linkActivateStep4-ms').trigger('click');\" >Go to this section</a>"}else{if(isNMR){a+=" <br /> <a href=\"#\" onclick=\"$('#linkActivateStep4-nmr').trigger('click');\" >Go to this section</a>"}}a+=" </div>"}}}}return a}function gatherJsonObjects(){var a={};a.dumper_type=jsonSpectrumType;a.analytical_sample=jsonSample;if(isLC){a.lc_chromatography=jsonChromato}else{if(isGC){a.gc_chromatography=jsonChromato}else{if(isIC){a.ic_chromatography=jsonChromato}}}if(isMS){a.ms_analyzer=jsonAnalyzer;a.molecule_ionization=jsonMolIonization;a.ms_peaklist=jsonPeaksList}else{if(isMSMS){a.ms_analyzer=jsonAnalyzer;a.molecule_ionization=jsonMolIonization;a.molecule_beamOrTrap=jsonMolIonBeam;a.ms_peaklist=jsonPeaksList}else{if(isNMR){a.nmr_analyzer=jsonAnalyzer;a.nmr_peaklist=jsonPeaksList;a.rawFileTmpName=$("#rawFileTmpName").val()}}}a.other=jsonOtherMetadata;return a}function dumpOneSpectrumFrom(){$("#import1SpectrumLoadingBare").show();if(!$("#btnSwitch-gotoStep7").hasClass("btn-disabled")){$("#btnSwitch-gotoStep7").addClass("btn-disabled")}if($("#btnSwitch-gotoStep7").hasClass("btn-primary")){$("#btnSwitch-gotoStep7").removeClass("btn-primary")}$("#btnSwitch-gotoStep7").prop("disabled",true);var c=$("#btnDownloadDumpForm");c.hide();c.attr("href","#");c.html("");loadFomDataIntoJsonObjects();var a=getFormErrorMessage();if(a!=""){$("#alertBoxSubmitSpectrum").html(a);$("#import1SpectrumLoadingBare").hide();return false}var b=gatherJsonObjects();$.ajax({type:"post",url:"dumpTemplate",data:JSON.stringify(b),contentType:"application/json",success:function(d){if(d.success){c.attr("href",d.fileURL);c.html('<i class="fa fa-cloud-download"></i> '+d.fileName);c.show();console.log(d)}else{var e='<div class="alert alert-danger alert-dismissible" role="alert">';e+='<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only"><spring:message code="alert.close" text="Close" /></span></button>';e+='<strong><spring:message code="alert.strong.error" text="Error!" /></strong> unable to generate file!';e+=" </div>";$("#alertBoxSubmitSpectrum").html(e);console.log(d)}},error:function(d){var e='<div class="alert alert-danger alert-dismissible" role="alert">';e+='<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only"><spring:message code="alert.close" text="Close" /></span></button>';e+='<strong><spring:message code="alert.strong.error" text="Error!" /></strong> unable to generate file!';e+=" </div>";$("#alertBoxSubmitSpectrum").html(e);console.log(d)}}).always(function(){$("#import1SpectrumLoadingBare").hide();if($("#btnSwitch-gotoStep7").hasClass("btn-disabled")){$("#btnSwitch-gotoStep7").removeClass("btn-disabled")}if(!$("#btnSwitch-gotoStep7").hasClass("btn-primary")){$("#btnSwitch-gotoStep7").addClass("btn-primary")}$("#btnSwitch-gotoStep7").prop("disabled",false)});return true}var singlePick=true;var multiPickLine=-1;function pickChemicalCompound(){singlePick=true;$("#modalPickCompound").modal("show");$("#add-one-cc-s1-value").focus()}function pickChemicalCompound4Mix(a){singlePick=false;multiPickLine=a;$("#modalPickCompound").modal("show");$("#add-one-cc-s1-value").focus()}var subjects=[];$(document).ready(function(){$("#add-one-cc-s1-value").bind("keypress",function(b){var a=b.keyCode||b.which;if(a==13){searchLocalCompound()}});$("#add-one-cc-s1-value").typeahead({source:function(a,b){return searchAjax()}});$(".pickChemicalCompound").click(function(){pickChemicalCompound()})});function searchAjax(){var a=[];var b=$("#add-one-cc-s1-value").val();if(b.length>2){$.ajax({type:"post",url:"search",dataType:"json",async:false,data:"query="+$("#add-one-cc-s1-value").val(),success:function(c){if(c.success){$.each(c.compoundNames,function(){a.push(this.name)});$.each(c.compounds,function(){if(this.inChIKey.indexOf(b)){a.push(this.inChIKey)}})}},error:function(c){subjects=[];console.log(c)}})}return a}function searchLocalCompound(){$("#load-step-1").show();$.ajax({type:"post",url:"pick-one-compound-search",async:true,data:"query="+$("#add-one-cc-s1-value").val()+"&filter="+fitlerSearchLoadlCpd,success:function(a){$("#ok-step-1").html(a)},error:function(a){console.log(a);$("#ok-step-1").html("Error: could not process request.")}}).always(function(){$("#load-step-1").hide()})}function getRCCADDED(){jsonRCC_ADDED=[];$.each(hot_RCC_ADDED.getData(),function(){var a={};if("<b>InChIKey</b>" in this&&this["<b>InChIKey</b>"]!=undefined&&this["<b>InChIKey</b>"]!=""){a.inchikey=(this["<b>InChIKey</b>"]);a.concentration=(this["<b>concentration (&micro;g/ml)</b>"]);jsonRCC_ADDED.push(a)}});return jsonRCC_ADDED}function clearLine(){setTimeout(function(){$("#add-one-cc-s1-value").val("");$("#ok-step-1").html("")},200);$("img.mixRCCadd"+multiPickLine).remove();if(singlePick){$("#add1spectrum-sample-inchikey").val("");$("#add1spectrum-sample-inchikey").change();$("#add1spectrum-sample-inchi").val("");$("#add1spectrum-sample-inchi").change();$("#add1spectrum-sample-commonName").val("");$("#add1spectrum-sample-commonName").change();$("#sample-bonus-display").html("")}else{if(multiPickLine>=0){hot_RCC_ADDED.setDataAtCell(multiPickLine,0,"");hot_RCC_ADDED.setDataAtCell(multiPickLine,1,"");hot_RCC_ADDED.setDataAtCell(multiPickLine,2,"");hot_RCC_ADDED.setDataAtCell(multiPickLine,3,"");hot_RCC_ADDED.setDataAtCell(multiPickLine,4,"");hot_RCC_ADDED.setDataAtCell(multiPickLine,5,"")}}};